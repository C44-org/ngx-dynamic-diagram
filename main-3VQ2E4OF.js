var T4=Object.create;var Ag=Object.defineProperty,M4=Object.defineProperties,A4=Object.getOwnPropertyDescriptor,k4=Object.getOwnPropertyDescriptors,S4=Object.getOwnPropertyNames,nx=Object.getOwnPropertySymbols,E4=Object.getPrototypeOf,ix=Object.prototype.hasOwnProperty,C4=Object.prototype.propertyIsEnumerable;var rx=(q,Y,ue)=>Y in q?Ag(q,Y,{enumerable:!0,configurable:!0,writable:!0,value:ue}):q[Y]=ue,Fr=(q,Y)=>{for(var ue in Y||={})ix.call(Y,ue)&&rx(q,ue,Y[ue]);if(nx)for(var ue of nx(Y))C4.call(Y,ue)&&rx(q,ue,Y[ue]);return q},bo=(q,Y)=>M4(q,k4(Y));var D4=(q,Y)=>()=>(Y||q((Y={exports:{}}).exports,Y),Y.exports);var I4=(q,Y,ue,C)=>{if(Y&&typeof Y=="object"||typeof Y=="function")for(let A of S4(Y))!ix.call(q,A)&&A!==ue&&Ag(q,A,{get:()=>Y[A],enumerable:!(C=A4(Y,A))||C.enumerable});return q};var ox=(q,Y,ue)=>(ue=q!=null?T4(E4(q)):{},I4(Y||!q||!q.__esModule?Ag(ue,"default",{value:q,enumerable:!0}):ue,q));var Dh=(q,Y,ue)=>new Promise((C,A)=>{var e=n=>{try{w(ue.next(n))}catch(T){A(T)}},v=n=>{try{w(ue.throw(n))}catch(T){A(T)}},w=n=>n.done?C(n.value):Promise.resolve(n.value).then(e,v);w((ue=ue.apply(q,Y)).next())});var wy=D4((F0,_y)=>{"use strict";(function(q,Y){typeof F0=="object"&&typeof _y=="object"?_y.exports=Y():typeof define=="function"&&define.amd?define([],Y):typeof F0=="object"?F0.Plotly=Y():q.Plotly=Y()})(self,function(){return function(){var q={79288:function(C,A,e){"use strict";var v=e(3400),w={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var n in w){var T=n.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");v.addStyleRule(T,w[n])}},86712:function(C,A,e){"use strict";C.exports=e(84224)},37240:function(C,A,e){"use strict";C.exports=e(51132)},29744:function(C,A,e){"use strict";C.exports=e(94456)},29352:function(C,A,e){"use strict";C.exports=e(67244)},96144:function(C,A,e){"use strict";C.exports=e(97776)},53219:function(C,A,e){"use strict";C.exports=e(61712)},4624:function(C,A,e){"use strict";C.exports=e(95856)},54543:function(C,A,e){"use strict";C.exports=e(54272)},45e3:function(C,A,e){"use strict";C.exports=e(85404)},62300:function(C,A,e){"use strict";C.exports=e(26048)},6920:function(C,A,e){"use strict";C.exports=e(66240)},10264:function(C,A,e){"use strict";C.exports=e(40448)},32016:function(C,A,e){"use strict";C.exports=e(64884)},27528:function(C,A,e){"use strict";C.exports=e(15088)},75556:function(C,A,e){"use strict";C.exports=e(76744)},39204:function(C,A,e){"use strict";C.exports=e(94704)},73996:function(C,A,e){"use strict";C.exports=e(62396)},16489:function(C,A,e){"use strict";C.exports=e(32028)},5e3:function(C,A,e){"use strict";C.exports=e(81932)},77280:function(C,A,e){"use strict";C.exports=e(45536)},33992:function(C,A,e){"use strict";C.exports=e(42600)},17600:function(C,A,e){"use strict";C.exports=e(21536)},49116:function(C,A,e){"use strict";C.exports=e(65664)},46808:function(C,A,e){"use strict";C.exports=e(29044)},36168:function(C,A,e){"use strict";C.exports=e(48928)},13792:function(C,A,e){"use strict";var v=e(32016);v.register([e(37240),e(29352),e(5e3),e(33992),e(17600),e(49116),e(6920),e(67484),e(79440),e(39204),e(83096),e(36168),e(20260),e(63560),e(65832),e(46808),e(73996),e(48824),e(89904),e(25120),e(13752),e(4340),e(62300),e(29800),e(8363),e(54543),e(86636),e(42192),e(32140),e(77280),e(89296),e(56816),e(70192),e(45e3),e(27528),e(84764),e(3920),e(50248),e(4624),e(69967),e(10264),e(86152),e(53219),e(81604),e(63796),e(29744),e(89336),e(86712),e(75556),e(16489),e(97312),e(96144)]),C.exports=v},3920:function(C,A,e){"use strict";C.exports=e(43480)},25120:function(C,A,e){"use strict";C.exports=e(6296)},4340:function(C,A,e){"use strict";C.exports=e(7404)},86152:function(C,A,e){"use strict";C.exports=e(65456)},56816:function(C,A,e){"use strict";C.exports=e(22020)},89296:function(C,A,e){"use strict";C.exports=e(29928)},20260:function(C,A,e){"use strict";C.exports=e(75792)},32140:function(C,A,e){"use strict";C.exports=e(156)},84764:function(C,A,e){"use strict";C.exports=e(45499)},48824:function(C,A,e){"use strict";C.exports=e(3296)},69967:function(C,A,e){"use strict";C.exports=e(4184)},8363:function(C,A,e){"use strict";C.exports=e(36952)},86636:function(C,A,e){"use strict";C.exports=e(38983)},70192:function(C,A,e){"use strict";C.exports=e(11572)},81604:function(C,A,e){"use strict";C.exports=e(76924)},63796:function(C,A,e){"use strict";C.exports=e(62944)},89336:function(C,A,e){"use strict";C.exports=e(95443)},67484:function(C,A,e){"use strict";C.exports=e(34864)},97312:function(C,A,e){"use strict";C.exports=e(76272)},42192:function(C,A,e){"use strict";C.exports=e(97924)},29800:function(C,A,e){"use strict";C.exports=e(15436)},63560:function(C,A,e){"use strict";C.exports=e(5621)},89904:function(C,A,e){"use strict";C.exports=e(91304)},50248:function(C,A,e){"use strict";C.exports=e(41724)},65832:function(C,A,e){"use strict";C.exports=e(31991)},79440:function(C,A,e){"use strict";C.exports=e(22869)},13752:function(C,A,e){"use strict";C.exports=e(67776)},83096:function(C,A,e){"use strict";C.exports=e(95952)},72196:function(C){"use strict";C.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},13916:function(C,A,e){"use strict";var v=e(72196),w=e(25376),n=e(33816),T=e(31780).templatedArray;e(36208),C.exports=T("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:w({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:v.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:v.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",n.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",n.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",n.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",n.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:w({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},90272:function(C,A,e){"use strict";var v=e(3400),w=e(54460),n=e(23816).draw;function T(f){var s=f._fullLayout;v.filterVisible(s.annotations).forEach(function(t){var o=w.getFromId(f,t.xref),r=w.getFromId(f,t.yref),i=w.getRefType(t.xref),a=w.getRefType(t.yref);t._extremes={},i==="range"&&x(t,o),a==="range"&&x(t,r)})}function x(f,s){var t,o=s._id,r=o.charAt(0),i=f[r],a=f["a"+r],u=f[r+"ref"],l=f["a"+r+"ref"],d=f["_"+r+"padplus"],c=f["_"+r+"padminus"],_={x:1,y:-1}[r]*f[r+"shift"],p=3*f.arrowsize*f.arrowwidth||0,g=p+_,m=p-_,b=3*f.startarrowsize*f.arrowwidth||0,y=b+_,M=b-_;if(l===u){var h=w.findExtremes(s,[s.r2c(i)],{ppadplus:g,ppadminus:m}),E=w.findExtremes(s,[s.r2c(a)],{ppadplus:Math.max(d,y),ppadminus:Math.max(c,M)});t={min:[h.min[0],E.min[0]],max:[h.max[0],E.max[0]]}}else y=a?y+a:y,M=a?M-a:M,t=w.findExtremes(s,[s.r2c(i)],{ppadplus:Math.max(d,g,y),ppadminus:Math.max(c,m,M)});f._extremes[o]=t}C.exports=function(f){var s=f._fullLayout;if(v.filterVisible(s.annotations).length&&f._fullData.length)return v.syncOrAsync([n,T],f)}},42300:function(C,A,e){"use strict";var v=e(3400),w=e(24040),n=e(31780).arrayEditor;function T(f,s){var t,o,r,i,a,u,l,d=f._fullLayout.annotations,c=[],_=[],p=[],g=(s||[]).length;for(t=0;t<d.length;t++)if(i=(r=d[t]).clicktoshow){for(o=0;o<g;o++)if(u=(a=s[o]).xaxis,l=a.yaxis,u._id===r.xref&&l._id===r.yref&&u.d2r(a.x)===x(r._xclick,u)&&l.d2r(a.y)===x(r._yclick,l)){(r.visible?i==="onout"?_:p:c).push(t);break}o===g&&r.visible&&i==="onout"&&_.push(t)}return{on:c,off:_,explicitOff:p}}function x(f,s){return s.type==="log"?s.l2r(f):s.d2r(f)}C.exports={hasClickToShow:function(f,s){var t=T(f,s);return t.on.length>0||t.explicitOff.length>0},onClick:function(f,s){var t,o,r=T(f,s),i=r.on,a=r.off.concat(r.explicitOff),u={},l=f._fullLayout.annotations;if(i.length||a.length){for(t=0;t<i.length;t++)(o=n(f.layout,"annotations",l[i[t]])).modifyItem("visible",!0),v.extendFlat(u,o.getUpdateObj());for(t=0;t<a.length;t++)(o=n(f.layout,"annotations",l[a[t]])).modifyItem("visible",!1),v.extendFlat(u,o.getUpdateObj());return w.call("update",f,{},u)}}}},87192:function(C,A,e){"use strict";var v=e(3400),w=e(76308);C.exports=function(n,T,x,f){f("opacity");var s=f("bgcolor"),t=f("bordercolor"),o=w.opacity(t);f("borderpad");var r=f("borderwidth"),i=f("showarrow");if(f("text",i?" ":x._dfltTitle.annotation),f("textangle"),v.coerceFont(f,"font",x.font),f("width"),f("align"),f("height")&&f("valign"),i){var a,u,l=f("arrowside");l.indexOf("end")!==-1&&(a=f("arrowhead"),u=f("arrowsize")),l.indexOf("start")!==-1&&(f("startarrowhead",a),f("startarrowsize",u)),f("arrowcolor",o?T.bordercolor:w.defaultLine),f("arrowwidth",2*(o&&r||1)),f("standoff"),f("startstandoff")}var d=f("hovertext"),c=x.hoverlabel||{};if(d){var _=f("hoverlabel.bgcolor",c.bgcolor||(w.opacity(s)?w.rgb(s):w.defaultLine)),p=f("hoverlabel.bordercolor",c.bordercolor||w.contrast(_)),g=v.extendFlat({},c.font);g.color||(g.color=p),v.coerceFont(f,"hoverlabel.font",g)}f("captureevents",!!d)}},26828:function(C,A,e){"use strict";var v=e(38248),w=e(36896);C.exports=function(n,T,x,f){T=T||{};var s=x==="log"&&T.type==="linear",t=x==="linear"&&T.type==="log";if(s||t)for(var o,r,i=n._fullLayout.annotations,a=T._id.charAt(0),u=0;u<i.length;u++)o=i[u],r="annotations["+u+"].",o[a+"ref"]===T._id&&l(a),o["a"+a+"ref"]===T._id&&l("a"+a);function l(d){var c=o[d],_=null;_=s?w(c,T.range):Math.pow(10,c),v(_)||(_=null),f(r+d,_)}}},45216:function(C,A,e){"use strict";var v=e(3400),w=e(54460),n=e(51272),T=e(87192),x=e(13916);function f(s,t,o){function r(E,k){return v.coerce(s,t,x,E,k)}var i=r("visible"),a=r("clicktoshow");if(i||a){T(s,t,o,r);for(var u=t.showarrow,l=["x","y"],d=[-10,-30],c={_fullLayout:o},_=0;_<2;_++){var p=l[_],g=w.coerceRef(s,t,c,p,"","paper");if(g!=="paper"&&w.getFromId(c,g)._annIndices.push(t._index),w.coercePosition(t,c,r,g,p,.5),u){var m="a"+p,b=w.coerceRef(s,t,c,m,"pixel",["pixel","paper"]);b!=="pixel"&&b!==g&&(b=t[m]="pixel");var y=b==="pixel"?d[_]:.4;w.coercePosition(t,c,r,b,m,y)}r(p+"anchor"),r(p+"shift")}if(v.noneOrAll(s,t,["x","y"]),u&&v.noneOrAll(s,t,["ax","ay"]),a){var M=r("xclick"),h=r("yclick");t._xclick=M===void 0?t.x:w.cleanPosition(M,c,t.xref),t._yclick=h===void 0?t.y:w.cleanPosition(h,c,t.yref)}}}C.exports=function(s,t){n(s,t,{name:"annotations",handleItemDefaults:f})}},23816:function(C,A,e){"use strict";var v=e(33428),w=e(24040),n=e(7316),T=e(3400),x=T.strTranslate,f=e(54460),s=e(76308),t=e(43616),o=e(93024),r=e(72736),i=e(93972),a=e(86476),u=e(31780).arrayEditor,l=e(33652);function d(p,g){var m=p._fullLayout.annotations[g]||{},b=f.getFromId(p,m.xref),y=f.getFromId(p,m.yref);b&&b.setScale(),y&&y.setScale(),_(p,m,g,!1,b,y)}function c(p,g,m,b,y){var M=y[m],h=y[m+"ref"],E=m.indexOf("y")!==-1,k=f.getRefType(h)==="domain",D=E?b.h:b.w;return p?k?M+(E?-g:g)/p._length:p.p2r(p.r2p(M)+g):M+(E?-g:g)/D}function _(p,g,m,b,y,M){var h,E,k=p._fullLayout,D=p._fullLayout._size,P=p._context.edits;b?(h="annotation-"+b,E=b+".annotations"):(h="annotation",E="annotations");var L=u(p.layout,E,g),O=L.modifyBase,N=L.modifyItem,V=L.getUpdateObj;k._infolayer.selectAll("."+h+'[data-index="'+m+'"]').remove();var F="clip"+k._uid+"_ann"+m;if(g._input&&g.visible!==!1){var j={x:{},y:{}},Z=+g.textangle||0,z=k._infolayer.append("g").classed(h,!0).attr("data-index",String(m)).style("opacity",g.opacity),H=z.append("g").classed("annotation-text-g",!0),U=P[g.showarrow?"annotationTail":"annotationPosition"],re=g.captureevents||P.annotationText||U,ee=H.append("g").style("pointer-events",re?"all":null).call(i,"pointer").on("click",function(){p._dragging=!1,p.emit("plotly_clickannotation",_e(v.event))});g.hovertext&&ee.on("mouseover",function(){var ye=g.hoverlabel,me=ye.font,Me=this.getBoundingClientRect(),Ae=p.getBoundingClientRect();o.loneHover({x0:Me.left-Ae.left,x1:Me.right-Ae.left,y:(Me.top+Me.bottom)/2-Ae.top,text:g.hovertext,color:ye.bgcolor,borderColor:ye.bordercolor,fontFamily:me.family,fontSize:me.size,fontColor:me.color,fontWeight:me.weight,fontStyle:me.style,fontVariant:me.variant},{container:k._hoverlayer.node(),outerContainer:k._paper.node(),gd:p})}).on("mouseout",function(){o.loneUnhover(k._hoverlayer.node())});var J=g.borderwidth,Q=g.borderpad,ne=J+Q,K=ee.append("rect").attr("class","bg").style("stroke-width",J+"px").call(s.stroke,g.bordercolor).call(s.fill,g.bgcolor),oe=g.width||g.height,le=k._topclips.selectAll("#"+F).data(oe?[0]:[]);le.enter().append("clipPath").classed("annclip",!0).attr("id",F).append("rect"),le.exit().remove();var se=g.font,de=k._meta?T.templateString(g.text,k._meta):g.text,be=ee.append("text").classed("annotation-text",!0).text(de);P.annotationText?be.call(r.makeEditable,{delegate:ee,gd:p}).call(xe).on("edit",function(ye){g.text=ye,this.call(xe),N("text",ye),y&&y.autorange&&O(y._name+".autorange",!0),M&&M.autorange&&O(M._name+".autorange",!0),w.call("_guiRelayout",p,V())}):be.call(xe)}else v.selectAll("#"+F).remove();function _e(ye){var me={index:m,annotation:g._input,fullAnnotation:g,event:ye};return b&&(me.subplotId=b),me}function xe(ye){return ye.call(t.font,se).attr({"text-anchor":{left:"start",right:"end"}[g.align]||"middle"}),r.convertToTspans(ye,p,ve),ye}function ve(){var ye=be.selectAll("a");ye.size()===1&&ye.text()===be.text()&&ee.insert("a",":first-child").attr({"xlink:xlink:href":ye.attr("xlink:href"),"xlink:xlink:show":ye.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(K.node());var me=ee.select(".annotation-text-math-group"),Me=!me.empty(),Ae=t.bBox((Me?me:be).node()),ce=Ae.width,ae=Ae.height,pe=g.width||ce,De=g.height||ae,ke=Math.round(pe+2*ne),Ee=Math.round(De+2*ne);function Ie(yt,ht){return ht==="auto"&&(ht=yt<.3333333333333333?"left":yt>.6666666666666666?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[ht]}for(var Re=!1,Ne=["x","y"],ge=0;ge<Ne.length;ge++){var we,Ce,ze,Pe,Ue,Ge=Ne[ge],Xe=g[Ge+"ref"]||Ge,st=g["a"+Ge+"ref"],at={x:y,y:M}[Ge],vt=(Z+(Ge==="x"?0:-90))*Math.PI/180,xt=ke*Math.cos(vt),gt=Ee*Math.sin(vt),rt=Math.abs(xt)+Math.abs(gt),tt=g[Ge+"anchor"],Mt=g[Ge+"shift"]*(Ge==="x"?1:-1),Pt=j[Ge],Rt=f.getRefType(Xe);if(at&&Rt!=="domain"){var St=at.r2fraction(g[Ge]);(St<0||St>1)&&(st===Xe?((St=at.r2fraction(g["a"+Ge]))<0||St>1)&&(Re=!0):Re=!0),we=at._offset+at.r2p(g[Ge]),Pe=.5}else{var Ye=Rt==="domain";Ge==="x"?(ze=g[Ge],we=Ye?at._offset+at._length*ze:we=D.l+D.w*ze):(ze=1-g[Ge],we=Ye?at._offset+at._length*ze:we=D.t+D.h*ze),Pe=g.showarrow?.5:ze}if(g.showarrow){Pt.head=we;var Ke=g["a"+Ge];if(Ue=xt*Ie(.5,g.xanchor)-gt*Ie(.5,g.yanchor),st===Xe){var Ve=f.getRefType(st);Ve==="domain"?(Ge==="y"&&(Ke=1-Ke),Pt.tail=at._offset+at._length*Ke):Ve==="paper"?Ge==="y"?(Ke=1-Ke,Pt.tail=D.t+D.h*Ke):Pt.tail=D.l+D.w*Ke:Pt.tail=at._offset+at.r2p(Ke),Ce=Ue}else Pt.tail=we+Ke,Ce=Ue+Ke;Pt.text=Pt.tail+Ue;var $e=k[Ge==="x"?"width":"height"];if(Xe==="paper"&&(Pt.head=T.constrain(Pt.head,1,$e-1)),st==="pixel"){var lt=-Math.max(Pt.tail-3,Pt.text),it=Math.min(Pt.tail+3,Pt.text)-$e;lt>0?(Pt.tail+=lt,Pt.text+=lt):it>0&&(Pt.tail-=it,Pt.text-=it)}Pt.tail+=Mt,Pt.head+=Mt}else Ce=Ue=rt*Ie(Pe,tt),Pt.text=we+Ue;Pt.text+=Mt,Ue+=Mt,Ce+=Mt,g["_"+Ge+"padplus"]=rt/2+Ce,g["_"+Ge+"padminus"]=rt/2-Ce,g["_"+Ge+"size"]=rt,g["_"+Ge+"shift"]=Ue}if(Re)ee.remove();else{var Be=0,je=0;if(g.align!=="left"&&(Be=(pe-ce)*(g.align==="center"?.5:1)),g.valign!=="top"&&(je=(De-ae)*(g.valign==="middle"?.5:1)),Me)me.select("svg").attr({x:ne+Be-1,y:ne+je}).call(t.setClipUrl,oe?F:null,p);else{var ot=ne+je-Ae.top,Ze=ne+Be-Ae.left;be.call(r.positionText,Ze,ot).call(t.setClipUrl,oe?F:null,p)}le.select("rect").call(t.setRect,ne,ne,pe,De),K.call(t.setRect,J/2,J/2,ke-J,Ee-J),ee.call(t.setTranslate,Math.round(j.x.text-ke/2),Math.round(j.y.text-Ee/2)),H.attr({transform:"rotate("+Z+","+j.x.text+","+j.y.text+")"});var dt,mt=function(yt,ht){z.selectAll(".annotation-arrow-g").remove();var kt=j.x.head,_t=j.y.head,Et=j.x.tail+yt,Lt=j.y.tail+ht,Ot=j.x.text+yt,Ft=j.y.text+ht,Zt=T.rotationXYMatrix(Z,Ot,Ft),Ht=T.apply2DTransform(Zt),Ut=T.apply2DTransform2(Zt),Wt=+K.attr("width"),nn=+K.attr("height"),On=Ot-.5*Wt,kn=On+Wt,gn=Ft-.5*nn,Jt=gn+nn,un=[[On,gn,On,Jt],[On,Jt,kn,Jt],[kn,Jt,kn,gn],[kn,gn,On,gn]].map(Ut);if(!un.reduce(function(ir,Zn){return ir^!!T.segmentsIntersect(kt,_t,kt+1e6,_t+1e6,Zn[0],Zn[1],Zn[2],Zn[3])},!1)){un.forEach(function(ir){var Zn=T.segmentsIntersect(Et,Lt,kt,_t,ir[0],ir[1],ir[2],ir[3]);Zn&&(Et=Zn.x,Lt=Zn.y)});var tn=g.arrowwidth,hn=g.arrowcolor,bn=g.arrowside,wn=z.append("g").style({opacity:s.opacity(hn)}).classed("annotation-arrow-g",!0),Pn=wn.append("path").attr("d","M"+Et+","+Lt+"L"+kt+","+_t).style("stroke-width",tn+"px").call(s.stroke,s.rgb(hn));if(l(Pn,bn,g),P.annotationPosition&&Pn.node().parentNode&&!b){var Cn=kt,Mn=_t;if(g.standoff){var Bn=Math.sqrt(Math.pow(kt-Et,2)+Math.pow(_t-Lt,2));Cn+=g.standoff*(Et-kt)/Bn,Mn+=g.standoff*(Lt-_t)/Bn}var Nn,rr,Yn=wn.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Et-Cn)+","+(Lt-Mn),transform:x(Cn,Mn)}).style("stroke-width",tn+6+"px").call(s.stroke,"rgba(0,0,0,0)").call(s.fill,"rgba(0,0,0,0)");a.init({element:Yn.node(),gd:p,prepFn:function(){var ir=t.getTranslate(ee);Nn=ir.x,rr=ir.y,y&&y.autorange&&O(y._name+".autorange",!0),M&&M.autorange&&O(M._name+".autorange",!0)},moveFn:function(ir,Zn){var ur=Ht(Nn,rr),en=ur[0]+ir,on=ur[1]+Zn;ee.call(t.setTranslate,en,on),N("x",c(y,ir,"x",D,g)),N("y",c(M,Zn,"y",D,g)),g.axref===g.xref&&N("ax",c(y,ir,"ax",D,g)),g.ayref===g.yref&&N("ay",c(M,Zn,"ay",D,g)),wn.attr("transform",x(ir,Zn)),H.attr({transform:"rotate("+Z+","+en+","+on+")"})},doneFn:function(){w.call("_guiRelayout",p,V());var ir=document.querySelector(".js-notes-box-panel");ir&&ir.redraw(ir.selectedObj)}})}}};g.showarrow&&mt(0,0),U&&a.init({element:ee.node(),gd:p,prepFn:function(){dt=H.attr("transform")},moveFn:function(yt,ht){var kt="pointer";if(g.showarrow)g.axref===g.xref?N("ax",c(y,yt,"ax",D,g)):N("ax",g.ax+yt),g.ayref===g.yref?N("ay",c(M,ht,"ay",D.w,g)):N("ay",g.ay+ht),mt(yt,ht);else{if(b)return;var _t,Et;if(y)_t=c(y,yt,"x",D,g);else{var Lt=g._xsize/D.w,Ot=g.x+(g._xshift-g.xshift)/D.w-Lt/2;_t=a.align(Ot+yt/D.w,Lt,0,1,g.xanchor)}if(M)Et=c(M,ht,"y",D,g);else{var Ft=g._ysize/D.h,Zt=g.y-(g._yshift+g.yshift)/D.h-Ft/2;Et=a.align(Zt-ht/D.h,Ft,0,1,g.yanchor)}N("x",_t),N("y",Et),y&&M||(kt=a.getCursor(y?.5:_t,M?.5:Et,g.xanchor,g.yanchor))}H.attr({transform:x(yt,ht)+dt}),i(ee,kt)},clickFn:function(yt,ht){g.captureevents&&p.emit("plotly_clickannotation",_e(ht))},doneFn:function(){i(ee),w.call("_guiRelayout",p,V());var yt=document.querySelector(".js-notes-box-panel");yt&&yt.redraw(yt.selectedObj)}})}}}C.exports={draw:function(p){var g=p._fullLayout;g._infolayer.selectAll(".annotation").remove();for(var m=0;m<g.annotations.length;m++)g.annotations[m].visible&&d(p,m);return n.previousPromises(p)},drawOne:d,drawRaw:_}},33652:function(C,A,e){"use strict";var v=e(33428),w=e(76308),n=e(72196),T=e(3400),x=T.strScale,f=T.strRotate,s=T.strTranslate;C.exports=function(t,o,r){var i,a,u,l,d=t.node(),c=n[r.arrowhead||0],_=n[r.startarrowhead||0],p=(r.arrowwidth||1)*(r.arrowsize||1),g=(r.arrowwidth||1)*(r.startarrowsize||1),m=o.indexOf("start")>=0,b=o.indexOf("end")>=0,y=c.backoff*p+r.standoff,M=_.backoff*g+r.startstandoff;if(d.nodeName==="line"){i={x:+t.attr("x1"),y:+t.attr("y1")},a={x:+t.attr("x2"),y:+t.attr("y2")};var h=i.x-a.x,E=i.y-a.y;if(l=(u=Math.atan2(E,h))+Math.PI,y&&M&&y+M>Math.sqrt(h*h+E*E))return void z();if(y){if(y*y>h*h+E*E)return void z();var k=y*Math.cos(u),D=y*Math.sin(u);a.x+=k,a.y+=D,t.attr({x2:a.x,y2:a.y})}if(M){if(M*M>h*h+E*E)return void z();var P=M*Math.cos(u),L=M*Math.sin(u);i.x-=P,i.y-=L,t.attr({x1:i.x,y1:i.y})}}else if(d.nodeName==="path"){var O=d.getTotalLength(),N="";if(O<y+M)return void z();var V=d.getPointAtLength(0),F=d.getPointAtLength(.1);u=Math.atan2(V.y-F.y,V.x-F.x),i=d.getPointAtLength(Math.min(M,O)),N="0px,"+M+"px,";var j=d.getPointAtLength(O),Z=d.getPointAtLength(O-.1);l=Math.atan2(j.y-Z.y,j.x-Z.x),a=d.getPointAtLength(Math.max(0,O-y)),N+=O-(N?M+y:y)+"px,"+O+"px",t.style("stroke-dasharray",N)}function z(){t.style("stroke-dasharray","0px,100px")}function H(U,re,ee,J){U.path&&(U.noRotate&&(ee=0),v.select(d.parentNode).append("path").attr({class:t.attr("class"),d:U.path,transform:s(re.x,re.y)+f(180*ee/Math.PI)+x(J)}).style({fill:w.rgb(r.arrowcolor),"stroke-width":0}))}m&&H(_,i,u,g),b&&H(c,a,l,p)}},79180:function(C,A,e){"use strict";var v=e(23816),w=e(42300);C.exports={moduleType:"component",name:"annotations",layoutAttributes:e(13916),supplyLayoutDefaults:e(45216),includeBasePlot:e(36632)("annotations"),calcAutorange:e(90272),draw:v.draw,drawOne:v.drawOne,drawRaw:v.drawRaw,hasClickToShow:w.hasClickToShow,onClick:w.onClick,convertCoords:e(26828)}},45899:function(C,A,e){"use strict";var v=e(13916),w=e(67824).overrideAll,n=e(31780).templatedArray;C.exports=w(n("annotation",{visible:v.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:v.xanchor,xshift:v.xshift,yanchor:v.yanchor,yshift:v.yshift,text:v.text,textangle:v.textangle,font:v.font,width:v.width,height:v.height,opacity:v.opacity,align:v.align,valign:v.valign,bgcolor:v.bgcolor,bordercolor:v.bordercolor,borderpad:v.borderpad,borderwidth:v.borderwidth,showarrow:v.showarrow,arrowcolor:v.arrowcolor,arrowhead:v.arrowhead,startarrowhead:v.startarrowhead,arrowside:v.arrowside,arrowsize:v.arrowsize,startarrowsize:v.startarrowsize,arrowwidth:v.arrowwidth,standoff:v.standoff,startstandoff:v.startstandoff,hovertext:v.hovertext,hoverlabel:v.hoverlabel,captureevents:v.captureevents}),"calc","from-root")},42456:function(C,A,e){"use strict";var v=e(3400),w=e(54460);function n(T,x){var f=x.fullSceneLayout.domain,s=x.fullLayout._size,t={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};T._xa={},v.extendFlat(T._xa,t),w.setConvert(T._xa),T._xa._offset=s.l+f.x[0]*s.w,T._xa.l2p=function(){return .5*(1+T._pdata[0]/T._pdata[3])*s.w*(f.x[1]-f.x[0])},T._ya={},v.extendFlat(T._ya,t),w.setConvert(T._ya),T._ya._offset=s.t+(1-f.y[1])*s.h,T._ya.l2p=function(){return .5*(1-T._pdata[1]/T._pdata[3])*s.h*(f.y[1]-f.y[0])}}C.exports=function(T){for(var x=T.fullSceneLayout.annotations,f=0;f<x.length;f++)n(x[f],T);T.fullLayout._infolayer.selectAll(".annotation-"+T.id).remove()}},52808:function(C,A,e){"use strict";var v=e(3400),w=e(54460),n=e(51272),T=e(87192),x=e(45899);function f(s,t,o,r){function i(u,l){return v.coerce(s,t,x,u,l)}function a(u){var l=u+"axis",d={_fullLayout:{}};return d._fullLayout[l]=o[l],w.coercePosition(t,d,i,u,u,.5)}i("visible")&&(T(s,t,r.fullLayout,i),a("x"),a("y"),a("z"),v.noneOrAll(s,t,["x","y","z"]),t.xref="x",t.yref="y",t.zref="z",i("xanchor"),i("yanchor"),i("xshift"),i("yshift"),t.showarrow&&(t.axref="pixel",t.ayref="pixel",i("ax",-10),i("ay",-30),v.noneOrAll(s,t,["ax","ay"])))}C.exports=function(s,t,o){n(s,t,{name:"annotations",handleItemDefaults:f,fullLayout:o.fullLayout})}},71836:function(C,A,e){"use strict";var v=e(23816).drawRaw,w=e(94424),n=["x","y","z"];C.exports=function(T){for(var x=T.fullSceneLayout,f=T.dataScale,s=x.annotations,t=0;t<s.length;t++){for(var o=s[t],r=!1,i=0;i<3;i++){var a=n[i],u=o[a],l=x[a+"axis"].r2fraction(u);if(l<0||l>1){r=!0;break}}r?T.fullLayout._infolayer.select(".annotation-"+T.id+'[data-index="'+t+'"]').remove():(o._pdata=w(T.glplot.cameraParams,[x.xaxis.r2l(o.x)*f[0],x.yaxis.r2l(o.y)*f[1],x.zaxis.r2l(o.z)*f[2]]),v(T.graphDiv,o,t,T.id,o._xa,o._ya))}}},56864:function(C,A,e){"use strict";var v=e(24040),w=e(3400);C.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e(45899)}}},layoutAttributes:e(45899),handleDefaults:e(52808),includeBasePlot:function(n,T){var x=v.subplotsRegistry.gl3d;if(x)for(var f=x.attrRegex,s=Object.keys(n),t=0;t<s.length;t++){var o=s[t];f.test(o)&&(n[o].annotations||[]).length&&(w.pushUnique(T._basePlotModules,x),w.pushUnique(T._subplots.gl3d,o))}},convert:e(42456),draw:e(71836)}},54976:function(C,A,e){"use strict";C.exports=e(38700),e(15168),e(67020),e(89792),e(55668),e(65168),e(2084),e(26368),e(24747),e(65616),e(30632),e(73040),e(1104),e(51456),e(4592),e(45348)},97776:function(C,A,e){"use strict";var v=e(54976),w=e(3400),n=e(39032),T=n.EPOCHJD,x=n.ONEDAY,f={valType:"enumerated",values:w.sortObjectKeys(v.calendars),editType:"calc",dflt:"gregorian"},s=function(p,g,m,b){var y={};return y[m]=f,w.coerce(p,g,y,m,b)},t="##",o={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:t,w:t,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},r={};function i(p){var g=r[p];return g||(r[p]=v.instance(p))}function a(p){return w.extendFlat({},f,{description:p})}function u(p){return"Sets the calendar system to use with `"+p+"` date data."}var l={xcalendar:a(u("x"))},d=w.extendFlat({},l,{ycalendar:a(u("y"))}),c=w.extendFlat({},d,{zcalendar:a(u("z"))}),_=a(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));C.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:d,bar:d,box:d,heatmap:d,contour:d,histogram:d,histogram2d:d,histogram2dcontour:d,scatter3d:c,surface:c,mesh3d:c,scattergl:d,ohlc:l,candlestick:l},layout:{calendar:a(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:_},yaxis:{calendar:_},scene:{xaxis:{calendar:_},yaxis:{calendar:_},zaxis:{calendar:_}},polar:{radialaxis:{calendar:_}}},transforms:{filter:{valuecalendar:a(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:a(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:f,handleDefaults:s,handleTraceDefaults:function(p,g,m,b){for(var y=0;y<m.length;y++)s(p,g,m[y]+"calendar",b.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:i,worldCalFmt:function(p,g,m){for(var b,y,M,h,E,k=Math.floor((g+.05)/x)+T,D=i(m).fromJD(k),P=0;(P=p.indexOf("%",P))!==-1;)(b=p.charAt(P+1))==="0"||b==="-"||b==="_"?(M=3,y=p.charAt(P+2),b==="_"&&(b="-")):(y=b,b="0",M=2),(h=o[y])?(E=h===t?t:D.formatDate(h[b]),p=p.substr(0,P)+E+p.substr(P+M),P+=E.length):P+=M;return p}}},22548:function(C,A){"use strict";A.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],A.defaultLine="#444",A.lightLine="#eee",A.background="#fff",A.borderLine="#BEC8D9",A.lightFraction=90.9090909090909},76308:function(C,A,e){"use strict";var v=e(49760),w=e(38248),n=e(38116).isTypedArray,T=C.exports={},x=e(22548);T.defaults=x.defaults;var f=T.defaultLine=x.defaultLine;T.lightLine=x.lightLine;var s=T.background=x.background;function t(o){if(w(o)||typeof o!="string")return o;var r=o.trim();if(r.substr(0,3)!=="rgb")return o;var i=r.match(/^rgba?\s*\(([^()]*)\)$/);if(!i)return o;var a=i[1].trim().split(/\s*[\s,]\s*/),u=r.charAt(3)==="a"&&a.length===4;if(!u&&a.length!==3)return o;for(var l=0;l<a.length;l++){if(!a[l].length||(a[l]=Number(a[l]),!(a[l]>=0)))return o;if(l===3)a[l]>1&&(a[l]=1);else if(a[l]>=1)return o}var d=Math.round(255*a[0])+", "+Math.round(255*a[1])+", "+Math.round(255*a[2]);return u?"rgba("+d+", "+a[3]+")":"rgb("+d+")"}T.tinyRGB=function(o){var r=o.toRgb();return"rgb("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+")"},T.rgb=function(o){return T.tinyRGB(v(o))},T.opacity=function(o){return o?v(o).getAlpha():0},T.addOpacity=function(o,r){var i=v(o).toRgb();return"rgba("+Math.round(i.r)+", "+Math.round(i.g)+", "+Math.round(i.b)+", "+r+")"},T.combine=function(o,r){var i=v(o).toRgb();if(i.a===1)return v(o).toRgbString();var a=v(r||s).toRgb(),u=a.a===1?a:{r:255*(1-a.a)+a.r*a.a,g:255*(1-a.a)+a.g*a.a,b:255*(1-a.a)+a.b*a.a},l={r:u.r*(1-i.a)+i.r*i.a,g:u.g*(1-i.a)+i.g*i.a,b:u.b*(1-i.a)+i.b*i.a};return v(l).toRgbString()},T.interpolate=function(o,r,i){var a=v(o).toRgb(),u=v(r).toRgb(),l={r:i*a.r+(1-i)*u.r,g:i*a.g+(1-i)*u.g,b:i*a.b+(1-i)*u.b};return v(l).toRgbString()},T.contrast=function(o,r,i){var a=v(o);return a.getAlpha()!==1&&(a=v(T.combine(o,s))),(a.isDark()?r?a.lighten(r):s:i?a.darken(i):f).toString()},T.stroke=function(o,r){var i=v(r);o.style({stroke:T.tinyRGB(i),"stroke-opacity":i.getAlpha()})},T.fill=function(o,r){var i=v(r);o.style({fill:T.tinyRGB(i),"fill-opacity":i.getAlpha()})},T.clean=function(o){if(o&&typeof o=="object"){var r,i,a,u,l=Object.keys(o);for(r=0;r<l.length;r++)if(u=o[a=l[r]],a.substr(a.length-5)==="color")if(Array.isArray(u))for(i=0;i<u.length;i++)u[i]=t(u[i]);else o[a]=t(u);else if(a.substr(a.length-10)==="colorscale"&&Array.isArray(u))for(i=0;i<u.length;i++)Array.isArray(u[i])&&(u[i][1]=t(u[i][1]));else if(Array.isArray(u)){var d=u[0];if(!Array.isArray(d)&&d&&typeof d=="object")for(i=0;i<u.length;i++)T.clean(u[i])}else u&&typeof u=="object"&&!n(u)&&T.clean(u)}}},42996:function(C,A,e){"use strict";var v=e(94724),w=e(25376),n=e(92880).extendFlat,T=e(67824).overrideAll;C.exports=T({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:v.linecolor,outlinewidth:v.linewidth,bordercolor:v.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:v.minor.tickmode,nticks:v.nticks,tick0:v.tick0,dtick:v.dtick,tickvals:v.tickvals,ticktext:v.ticktext,ticks:n({},v.ticks,{dflt:""}),ticklabeloverflow:n({},v.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:v.ticklen,tickwidth:v.tickwidth,tickcolor:v.tickcolor,ticklabelstep:v.ticklabelstep,showticklabels:v.showticklabels,labelalias:v.labelalias,tickfont:w({}),tickangle:v.tickangle,tickformat:v.tickformat,tickformatstops:v.tickformatstops,tickprefix:v.tickprefix,showtickprefix:v.showtickprefix,ticksuffix:v.ticksuffix,showticksuffix:v.showticksuffix,separatethousands:v.separatethousands,exponentformat:v.exponentformat,minexponent:v.minexponent,showexponent:v.showexponent,title:{text:{valType:"string"},font:w({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:w({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},63964:function(C){"use strict";C.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},64013:function(C,A,e){"use strict";var v=e(3400),w=e(31780),n=e(26332),T=e(25404),x=e(95936),f=e(42568),s=e(42996);C.exports=function(t,o,r){var i=w.newContainer(o,"colorbar"),a=t.colorbar||{};function u(N,V){return v.coerce(a,i,s,N,V)}var l=r.margin||{t:0,b:0,l:0,r:0},d=r.width-l.l-l.r,c=r.height-l.t-l.b,_=u("orientation")==="v",p=u("thicknessmode");u("thickness",p==="fraction"?30/(_?d:c):30);var g=u("lenmode");u("len",g==="fraction"?1:_?c:d);var m,b,y,M=u("yref")==="paper",h=u("xref")==="paper",E="left";_?(y="middle",E=h?"left":"right",m=h?1.02:1,b=.5):(y=M?"bottom":"top",E="center",m=.5,b=M?1.02:1),v.coerce(a,i,{x:{valType:"number",min:h?-2:0,max:h?3:1,dflt:m}},"x"),v.coerce(a,i,{y:{valType:"number",min:M?-2:0,max:M?3:1,dflt:b}},"y"),u("xanchor",E),u("xpad"),u("yanchor",y),u("ypad"),v.noneOrAll(a,i,["x","y"]),u("outlinecolor"),u("outlinewidth"),u("bordercolor"),u("borderwidth"),u("bgcolor");var k=v.coerce(a,i,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:_?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");u("ticklabeloverflow",k.indexOf("inside")!==-1?"hide past domain":"hide past div"),n(a,i,u,"linear");var D=r.font,P={noAutotickangles:!0,outerTicks:!1,font:D};k.indexOf("inside")!==-1&&(P.bgColor="black"),f(a,i,u,"linear",P),x(a,i,u,"linear",P),T(a,i,u,"linear",P),u("title.text",r._dfltTitle.colorbar);var L=i.showticklabels?i.tickfont:D,O=v.extendFlat({},L,{weight:D.weight,style:D.style,variant:D.variant,color:D.color,size:v.bigFont(L.size)});v.coerceFont(u,"title.font",O),u("title.side",_?"top":"right")}},37848:function(C,A,e){"use strict";var v=e(33428),w=e(49760),n=e(7316),T=e(24040),x=e(54460),f=e(86476),s=e(3400),t=s.strTranslate,o=e(92880).extendFlat,r=e(93972),i=e(43616),a=e(76308),u=e(81668),l=e(72736),d=e(94288).flipScale,c=e(28336),_=e(37668),p=e(94724),g=e(84284),m=g.LINE_SPACING,b=g.FROM_TL,y=g.FROM_BR,M=e(63964).cn;C.exports={draw:function(h){var E=h._fullLayout._infolayer.selectAll("g."+M.colorbar).data(function(k){var D,P,L,O,N=k._fullLayout,V=k.calcdata,F=[];function j(oe){return o(oe,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function Z(){typeof O.calc=="function"?O.calc(k,L,D):(D._fillgradient=P.reversescale?d(P.colorscale):P.colorscale,D._zrange=[P[O.min],P[O.max]])}for(var z=0;z<V.length;z++){var H=V[z];if((L=H[0].trace)._module){var U=L._module.colorbar;if(L.visible===!0&&U)for(var re=Array.isArray(U),ee=re?U:[U],J=0;J<ee.length;J++){var Q=(O=ee[J]).container;(P=Q?L[Q]:L)&&P.showscale&&((D=j(P.colorbar))._id="cb"+L.uid+(re&&Q?"-"+Q:""),D._traceIndex=L.index,D._propPrefix=(Q?Q+".":"")+"colorbar.",D._meta=L._meta,Z(),F.push(D))}}}for(var ne in N._colorAxes)if((P=N[ne]).showscale){var K=N._colorAxes[ne];(D=j(P.colorbar))._id="cb"+ne,D._propPrefix=ne+".colorbar.",D._meta=N._meta,O={min:"cmin",max:"cmax"},K[0]!=="heatmap"&&(L=K[1],O.calc=L._module.colorbar.calc),Z(),F.push(D)}return F}(h),function(k){return k._id});E.enter().append("g").attr("class",function(k){return k._id}).classed(M.colorbar,!0),E.each(function(k){var D=v.select(this);s.ensureSingle(D,"rect",M.cbbg),s.ensureSingle(D,"g",M.cbfills),s.ensureSingle(D,"g",M.cblines),s.ensureSingle(D,"g",M.cbaxis,function(L){L.classed(M.crisp,!0)}),s.ensureSingle(D,"g",M.cbtitleunshift,function(L){L.append("g").classed(M.cbtitle,!0)}),s.ensureSingle(D,"rect",M.cboutline);var P=function(L,O,N){var V=O.orientation==="v",F=O.len,j=O.lenmode,Z=O.thickness,z=O.thicknessmode,H=O.outlinewidth,U=O.borderwidth,re=O.bgcolor,ee=O.xanchor,J=O.yanchor,Q=O.xpad,ne=O.ypad,K=O.x,oe=V?O.y:1-O.y,le=O.yref==="paper",se=O.xref==="paper",de=N._fullLayout,be=de._size,_e=O._fillcolor,xe=O._line,ve=O.title,ye=ve.side,me=O._zrange||v.extent((typeof _e=="function"?_e:xe.color).domain()),Me=typeof xe.color=="function"?xe.color:function(){return xe.color},Ae=typeof _e=="function"?_e:function(){return _e},ce=O._levels,ae=function(Ve,$e,lt){var it,Be,je=$e._levels,ot=[],Ze=[],dt=je.end+je.size/100,mt=je.size,yt=1.001*lt[0]-.001*lt[1],ht=1.001*lt[1]-.001*lt[0];for(Be=0;Be<1e5&&(it=je.start+Be*mt,!(mt>0?it>=dt:it<=dt));Be++)it>yt&&it<ht&&ot.push(it);if($e._fillgradient)Ze=[0];else if(typeof $e._fillcolor=="function"){var kt=$e._filllevels;if(kt)for(dt=kt.end+kt.size/100,mt=kt.size,Be=0;Be<1e5&&(it=kt.start+Be*mt,!(mt>0?it>=dt:it<=dt));Be++)it>lt[0]&&it<lt[1]&&Ze.push(it);else(Ze=ot.map(function(_t){return _t-je.size/2})).push(Ze[Ze.length-1]+je.size)}else $e._fillcolor&&typeof $e._fillcolor=="string"&&(Ze=[0]);return je.size<0&&(ot.reverse(),Ze.reverse()),{line:ot,fill:Ze}}(0,O,me),pe=ae.fill,De=ae.line,ke=Math.round(Z*(z==="fraction"?V?be.w:be.h:1)),Ee=ke/(V?be.w:be.h),Ie=Math.round(F*(j==="fraction"?V?be.h:be.w:1)),Re=Ie/(V?be.h:be.w),Ne=se?be.w:N._fullLayout.width,ge=le?be.h:N._fullLayout.height,we=Math.round(V?K*Ne+Q:oe*ge+ne),Ce={center:.5,right:1}[ee]||0,ze={top:1,middle:.5}[J]||0,Pe=V?K-Ce*Ee:oe-ze*Ee,Ue=V?oe-ze*Re:K-Ce*Re,Ge=Math.round(V?ge*(1-Ue):Ne*Ue);O._lenFrac=Re,O._thickFrac=Ee,O._uFrac=Pe,O._vFrac=Ue;var Xe=O._axis=function(Ve,$e,lt){var it=Ve._fullLayout,Be=$e.orientation==="v",je={type:"linear",range:lt,tickmode:$e.tickmode,nticks:$e.nticks,tick0:$e.tick0,dtick:$e.dtick,tickvals:$e.tickvals,ticktext:$e.ticktext,ticks:$e.ticks,ticklen:$e.ticklen,tickwidth:$e.tickwidth,tickcolor:$e.tickcolor,showticklabels:$e.showticklabels,labelalias:$e.labelalias,ticklabelposition:$e.ticklabelposition,ticklabeloverflow:$e.ticklabeloverflow,ticklabelstep:$e.ticklabelstep,tickfont:$e.tickfont,tickangle:$e.tickangle,tickformat:$e.tickformat,exponentformat:$e.exponentformat,minexponent:$e.minexponent,separatethousands:$e.separatethousands,showexponent:$e.showexponent,showtickprefix:$e.showtickprefix,tickprefix:$e.tickprefix,showticksuffix:$e.showticksuffix,ticksuffix:$e.ticksuffix,title:$e.title,showline:!0,anchor:"free",side:Be?"right":"bottom",position:1},ot=Be?"y":"x",Ze={type:"linear",_id:ot+$e._id},dt={letter:ot,font:it.font,noAutotickangles:ot==="y",noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:it.calendar};function mt(yt,ht){return s.coerce(je,Ze,p,yt,ht)}return c(je,Ze,mt,dt,it),_(je,Ze,mt,dt),Ze}(N,O,me);Xe.position=Ee+(V?K+Q/be.w:oe+ne/be.h);var st=["top","bottom"].indexOf(ye)!==-1;if(V&&st&&(Xe.title.side=ye,Xe.titlex=K+Q/be.w,Xe.titley=Ue+(ve.side==="top"?Re-ne/be.h:ne/be.h)),V||st||(Xe.title.side=ye,Xe.titley=oe+ne/be.h,Xe.titlex=Ue+Q/be.w),xe.color&&O.tickmode==="auto"){Xe.tickmode="linear",Xe.tick0=ce.start;var at=ce.size,vt=s.constrain(Ie/50,4,15)+1,xt=(me[1]-me[0])/((O.nticks||vt)*at);if(xt>1){var gt=Math.pow(10,Math.floor(Math.log(xt)/Math.LN10));at*=gt*s.roundUp(xt/gt,[2,5,10]),(Math.abs(ce.start)/ce.size+1e-6)%1<2e-6&&(Xe.tick0=0)}Xe.dtick=at}Xe.domain=V?[Ue+ne/be.h,Ue+Re-ne/be.h]:[Ue+Q/be.w,Ue+Re-Q/be.w],Xe.setScale(),L.attr("transform",t(Math.round(be.l),Math.round(be.t)));var rt,tt=L.select("."+M.cbtitleunshift).attr("transform",t(-Math.round(be.l),-Math.round(be.t))),Mt=Xe.ticklabelposition,Pt=Xe.title.font.size,Rt=L.select("."+M.cbaxis),St=0,Ye=0;function Ke(Ve,$e){var lt={propContainer:Xe,propName:O._propPrefix+"title",traceIndex:O._traceIndex,_meta:O._meta,placeholder:de._dfltTitle.colorbar,containerGroup:L.select("."+M.cbtitle)},it=Ve.charAt(0)==="h"?Ve.substr(1):"h"+Ve;L.selectAll("."+it+",."+it+"-math-group").remove(),u.draw(N,Ve,o(lt,$e||{}))}return s.syncOrAsync([n.previousPromises,function(){var Ve,$e;(V&&st||!V&&!st)&&(ye==="top"&&(Ve=Q+be.l+Ne*K,$e=ne+be.t+ge*(1-Ue-Re)+3+.75*Pt),ye==="bottom"&&(Ve=Q+be.l+Ne*K,$e=ne+be.t+ge*(1-Ue)-3-.25*Pt),ye==="right"&&($e=ne+be.t+ge*oe+3+.75*Pt,Ve=Q+be.l+Ne*Ue),Ke(Xe._id+"title",{attributes:{x:Ve,y:$e,"text-anchor":V?"start":"middle"}}))},function(){if(!V&&!st||V&&st){var Ve,$e=L.select("."+M.cbtitle),lt=$e.select("text"),it=[-H/2,H/2],Be=$e.select(".h"+Xe._id+"title-math-group").node(),je=15.6;if(lt.node()&&(je=parseInt(lt.node().style.fontSize,10)*m),Be?(Ve=i.bBox(Be),Ye=Ve.width,(St=Ve.height)>je&&(it[1]-=(St-je)/2)):lt.node()&&!lt.classed(M.jsPlaceholder)&&(Ve=i.bBox(lt.node()),Ye=Ve.width,St=Ve.height),V){if(St){if(St+=5,ye==="top")Xe.domain[1]-=St/be.h,it[1]*=-1;else{Xe.domain[0]+=St/be.h;var ot=l.lineCount(lt);it[1]+=(1-ot)*je}$e.attr("transform",t(it[0],it[1])),Xe.setScale()}}else Ye&&(ye==="right"&&(Xe.domain[0]+=(Ye+Pt/2)/be.w),$e.attr("transform",t(it[0],it[1])),Xe.setScale())}L.selectAll("."+M.cbfills+",."+M.cblines).attr("transform",V?t(0,Math.round(be.h*(1-Xe.domain[1]))):t(Math.round(be.w*Xe.domain[0]),0)),Rt.attr("transform",V?t(0,Math.round(-be.t)):t(Math.round(-be.l),0));var Ze=L.select("."+M.cbfills).selectAll("rect."+M.cbfill).attr("style","").data(pe);Ze.enter().append("rect").classed(M.cbfill,!0).attr("style",""),Ze.exit().remove();var dt=me.map(Xe.c2p).map(Math.round).sort(function(_t,Et){return _t-Et});Ze.each(function(_t,Et){var Lt=[Et===0?me[0]:(pe[Et]+pe[Et-1])/2,Et===pe.length-1?me[1]:(pe[Et]+pe[Et+1])/2].map(Xe.c2p).map(Math.round);V&&(Lt[1]=s.constrain(Lt[1]+(Lt[1]>Lt[0])?1:-1,dt[0],dt[1]));var Ot=v.select(this).attr(V?"x":"y",we).attr(V?"y":"x",v.min(Lt)).attr(V?"width":"height",Math.max(ke,2)).attr(V?"height":"width",Math.max(v.max(Lt)-v.min(Lt),2));if(O._fillgradient)i.gradient(Ot,N,O._id,V?"vertical":"horizontalreversed",O._fillgradient,"fill");else{var Ft=Ae(_t).replace("e-","");Ot.attr("fill",w(Ft).toHexString())}});var mt=L.select("."+M.cblines).selectAll("path."+M.cbline).data(xe.color&&xe.width?De:[]);mt.enter().append("path").classed(M.cbline,!0),mt.exit().remove(),mt.each(function(_t){var Et=we,Lt=Math.round(Xe.c2p(_t))+xe.width/2%1;v.select(this).attr("d","M"+(V?Et+","+Lt:Lt+","+Et)+(V?"h":"v")+ke).call(i.lineGroupStyle,xe.width,Me(_t),xe.dash)}),Rt.selectAll("g."+Xe._id+"tick,path").remove();var yt=we+ke+(H||0)/2-(O.ticks==="outside"?1:0),ht=x.calcTicks(Xe),kt=x.getTickSigns(Xe)[2];return x.drawTicks(N,Xe,{vals:Xe.ticks==="inside"?x.clipEnds(Xe,ht):ht,layer:Rt,path:x.makeTickPath(Xe,yt,kt),transFn:x.makeTransTickFn(Xe)}),x.drawLabels(N,Xe,{vals:ht,layer:Rt,transFn:x.makeTransTickLabelFn(Xe),labelFns:x.makeLabelFns(Xe,yt)})},function(){if(V&&!st||!V&&st){var Ve,$e,lt=Xe.position||0,it=Xe._offset+Xe._length/2;if(ye==="right")$e=it,Ve=be.l+Ne*lt+10+Pt*(Xe.showticklabels?1:.5);else if(Ve=it,ye==="bottom"&&($e=be.t+ge*lt+10+(Mt.indexOf("inside")===-1?Xe.tickfont.size:0)+(Xe.ticks!=="intside"&&O.ticklen||0)),ye==="top"){var Be=ve.text.split("<br>").length;$e=be.t+ge*lt+10-ke-m*Pt*Be}Ke((V?"h":"v")+Xe._id+"title",{avoid:{selection:v.select(N).selectAll("g."+Xe._id+"tick"),side:ye,offsetTop:V?0:be.t,offsetLeft:V?be.l:0,maxShift:V?de.width:de.height},attributes:{x:Ve,y:$e,"text-anchor":"middle"},transform:{rotate:V?-90:0,offset:0}})}},n.previousPromises,function(){var Ve,$e=ke+H/2;Mt.indexOf("inside")===-1&&(Ve=i.bBox(Rt.node()),$e+=V?Ve.width:Ve.height),rt=tt.select("text");var lt=0,it=V&&ye==="top",Be=!V&&ye==="right",je=0;if(rt.node()&&!rt.classed(M.jsPlaceholder)){var ot,Ze=tt.select(".h"+Xe._id+"title-math-group").node();Ze&&(V&&st||!V&&!st)?(lt=(Ve=i.bBox(Ze)).width,ot=Ve.height):(lt=(Ve=i.bBox(tt.node())).right-be.l-(V?we:Ge),ot=Ve.bottom-be.t-(V?Ge:we),V||ye!=="top"||($e+=Ve.height,je=Ve.height)),Be&&(rt.attr("transform",t(lt/2+Pt/2,0)),lt*=2),$e=Math.max($e,V?lt:ot)}var dt=2*(V?Q:ne)+$e+U+H/2,mt=0;!V&&ve.text&&J==="bottom"&&oe<=0&&(dt+=mt=dt/2,je+=mt),de._hColorbarMoveTitle=mt,de._hColorbarMoveCBTitle=je;var yt=U+H,ht=(V?we:Ge)-yt/2-(V?Q:0),kt=(V?Ge:we)-(V?Ie:ne+je-mt);L.select("."+M.cbbg).attr("x",ht).attr("y",kt).attr(V?"width":"height",Math.max(dt-mt,2)).attr(V?"height":"width",Math.max(Ie+yt,2)).call(a.fill,re).call(a.stroke,O.bordercolor).style("stroke-width",U);var _t=Be?Math.max(lt-10,0):0;L.selectAll("."+M.cboutline).attr("x",(V?we:Ge+Q)+_t).attr("y",(V?Ge+ne-Ie:we)+(it?St:0)).attr(V?"width":"height",Math.max(ke,2)).attr(V?"height":"width",Math.max(Ie-(V?2*ne+St:2*Q+_t),2)).call(a.stroke,O.outlinecolor).style({fill:"none","stroke-width":H});var Et=V?Ce*dt:0,Lt=V?0:(1-ze)*dt-je;if(Et=se?be.l-Et:-Et,Lt=le?be.t-Lt:-Lt,L.attr("transform",t(Et,Lt)),!V&&(U||w(re).getAlpha()&&!w.equals(de.paper_bgcolor,re))){var Ot=Rt.selectAll("text"),Ft=Ot[0].length,Zt=L.select("."+M.cbbg).node(),Ht=i.bBox(Zt),Ut=i.getTranslate(L);Ot.each(function(bn,wn){var Pn=Ft-1;if(wn===0||wn===Pn){var Cn,Mn=i.bBox(this),Bn=i.getTranslate(this);if(wn===Pn){var Nn=Mn.right+Bn.x;(Cn=Ht.right+Ut.x+Ge-U-2+K-Nn)>0&&(Cn=0)}else if(wn===0){var rr=Mn.left+Bn.x;(Cn=Ht.left+Ut.x+Ge+U+2-rr)<0&&(Cn=0)}Cn&&(Ft<3?this.setAttribute("transform","translate("+Cn+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Wt={},nn=b[ee],On=y[ee],kn=b[J],gn=y[J],Jt=dt-ke;V?(j==="pixels"?(Wt.y=oe,Wt.t=Ie*kn,Wt.b=Ie*gn):(Wt.t=Wt.b=0,Wt.yt=oe+F*kn,Wt.yb=oe-F*gn),z==="pixels"?(Wt.x=K,Wt.l=dt*nn,Wt.r=dt*On):(Wt.l=Jt*nn,Wt.r=Jt*On,Wt.xl=K-Z*nn,Wt.xr=K+Z*On)):(j==="pixels"?(Wt.x=K,Wt.l=Ie*nn,Wt.r=Ie*On):(Wt.l=Wt.r=0,Wt.xl=K+F*nn,Wt.xr=K-F*On),z==="pixels"?(Wt.y=1-oe,Wt.t=dt*kn,Wt.b=dt*gn):(Wt.t=Jt*kn,Wt.b=Jt*gn,Wt.yt=oe-Z*kn,Wt.yb=oe+Z*gn));var un=O.y<.5?"b":"t",tn=O.x<.5?"l":"r";N._fullLayout._reservedMargin[O._id]={};var hn={r:de.width-ht-Et,l:ht+Wt.r,b:de.height-kt-Lt,t:kt+Wt.b};se&&le?n.autoMargin(N,O._id,Wt):se?N._fullLayout._reservedMargin[O._id][un]=hn[un]:le||V?N._fullLayout._reservedMargin[O._id][tn]=hn[tn]:N._fullLayout._reservedMargin[O._id][un]=hn[un]}],N)}(D,k,h);P&&P.then&&(h._promises||[]).push(P),h._context.edits.colorbarPosition&&function(L,O,N){var V,F,j,Z=O.orientation==="v",z=N._fullLayout._size;f.init({element:L.node(),gd:N,prepFn:function(){V=L.attr("transform"),r(L)},moveFn:function(H,U){L.attr("transform",V+t(H,U)),F=f.align((Z?O._uFrac:O._vFrac)+H/z.w,Z?O._thickFrac:O._lenFrac,0,1,O.xanchor),j=f.align((Z?O._vFrac:1-O._uFrac)-U/z.h,Z?O._lenFrac:O._thickFrac,0,1,O.yanchor);var re=f.getCursor(F,j,O.xanchor,O.yanchor);r(L,re)},doneFn:function(){if(r(L),F!==void 0&&j!==void 0){var H={};H[O._propPrefix+"x"]=F,H[O._propPrefix+"y"]=j,O._traceIndex!==void 0?T.call("_guiRestyle",N,H,O._traceIndex):T.call("_guiRelayout",N,H)}}})}(D,k,h)}),E.exit().each(function(k){n.autoMargin(h,k._id)}).remove(),E.order()}}},90553:function(C,A,e){"use strict";var v=e(3400);C.exports=function(w){return v.isPlainObject(w.colorbar)}},55080:function(C,A,e){"use strict";C.exports={moduleType:"component",name:"colorbar",attributes:e(42996),supplyDefaults:e(64013),draw:e(37848).draw,hasColorbar:e(90553)}},49084:function(C,A,e){"use strict";var v=e(42996),w=e(53756).counter,n=e(95376),T=e(88304).scales;function x(f){return"`"+f+"`"}n(T),C.exports=function(f,s){f=f||"";var t,o=(s=s||{}).cLetter||"c",r=("onlyIfNumerical"in s&&s.onlyIfNumerical,"noScale"in s?s.noScale:f==="marker.line"),i="showScaleDflt"in s?s.showScaleDflt:o==="z",a=typeof s.colorscaleDflt=="string"?T[s.colorscaleDflt]:null,u=s.editTypeOverride||"",l=f?f+".":"";"colorAttr"in s?(t=s.colorAttr,s.colorAttr):x(l+(t={z:"z",c:"color"}[o]));var d=o+"auto",c=o+"min",_=o+"max",p=o+"mid",g=(x(l+d),x(l+c),x(l+_),{});g[c]=g[_]=void 0;var m={};m[d]=!1;var b={};return t==="color"&&(b.color={valType:"color",arrayOk:!0,editType:u||"style"},s.anim&&(b.color.anim=!0)),b[d]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:g},b[c]={valType:"number",dflt:null,editType:u||"plot",impliedEdits:m},b[_]={valType:"number",dflt:null,editType:u||"plot",impliedEdits:m},b[p]={valType:"number",dflt:null,editType:"calc",impliedEdits:g},b.colorscale={valType:"colorscale",editType:"calc",dflt:a,impliedEdits:{autocolorscale:!1}},b.autocolorscale={valType:"boolean",dflt:s.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},b.reversescale={valType:"boolean",dflt:!1,editType:"plot"},r||(b.showscale={valType:"boolean",dflt:i,editType:"calc"},b.colorbar=v),s.noColorAxis||(b.coloraxis={valType:"subplotid",regex:w("coloraxis"),dflt:null,editType:"calc"}),b}},47128:function(C,A,e){"use strict";var v=e(38248),w=e(3400),n=e(94288).extractOpts;C.exports=function(T,x,f){var s,t=T._fullLayout,o=f.vals,r=f.containerStr,i=r?w.nestedProperty(x,r).get():x,a=n(i),u=a.auto!==!1,l=a.min,d=a.max,c=a.mid,_=function(){return w.aggNums(Math.min,null,o)},p=function(){return w.aggNums(Math.max,null,o)};l===void 0?l=_():u&&(l=i._colorAx&&v(l)?Math.min(l,_()):_()),d===void 0?d=p():u&&(d=i._colorAx&&v(d)?Math.max(d,p()):p()),u&&c!==void 0&&(d-c>c-l?l=c-(d-c):d-c<c-l&&(d=c+(c-l))),l===d&&(l-=.5,d+=.5),a._sync("min",l),a._sync("max",d),a.autocolorscale&&(s=l*d<0?t.colorscale.diverging:l>=0?t.colorscale.sequential:t.colorscale.sequentialminus,a._sync("colorscale",s))}},95504:function(C,A,e){"use strict";var v=e(3400),w=e(94288).hasColorscale,n=e(94288).extractOpts;C.exports=function(T,x){function f(u,l){var d=u["_"+l];d!==void 0&&(u[l]=d)}function s(u,l){var d=l.container?v.nestedProperty(u,l.container).get():u;if(d)if(d.coloraxis)d._colorAx=x[d.coloraxis];else{var c=n(d),_=c.auto;(_||c.min===void 0)&&f(d,l.min),(_||c.max===void 0)&&f(d,l.max),c.autocolorscale&&f(d,"colorscale")}}for(var t=0;t<T.length;t++){var o=T[t],r=o._module.colorbar;if(r)if(Array.isArray(r))for(var i=0;i<r.length;i++)s(o,r[i]);else s(o,r);w(o,"marker.line")&&s(o,{container:"marker.line",min:"cmin",max:"cmax"})}for(var a in x._colorAxes)s(x[a],{min:"cmin",max:"cmax"})}},27260:function(C,A,e){"use strict";var v=e(38248),w=e(3400),n=e(90553),T=e(64013),x=e(88304).isValid,f=e(24040).traceIs;function s(t,o){var r=o.slice(0,o.length-1);return o?w.nestedProperty(t,r).get()||{}:t}C.exports=function t(o,r,i,a,u){var l=u.prefix,d=u.cLetter,c="_module"in r,_=s(o,l),p=s(r,l),g=s(r._template||{},l)||{},m=function(){return delete o.coloraxis,delete r.coloraxis,t(o,r,i,a,u)};if(c){var b=i._colorAxes||{},y=a(l+"coloraxis");if(y){var M=f(r,"contour")&&w.nestedProperty(r,"contours.coloring").get()||"heatmap",h=b[y];return void(h?(h[2].push(m),h[0]!==M&&(h[0]=!1,w.warn(["Ignoring coloraxis:",y,"setting","as it is linked to incompatible colorscales."].join(" ")))):b[y]=[M,r,[m]])}}var E=_[d+"min"],k=_[d+"max"],D=v(E)&&v(k)&&E<k;a(l+d+"auto",!D)?a(l+d+"mid"):(a(l+d+"min"),a(l+d+"max"));var P,L,O=_.colorscale,N=g.colorscale;O!==void 0&&(P=!x(O)),N!==void 0&&(P=!x(N)),a(l+"autocolorscale",P),a(l+"colorscale"),a(l+"reversescale"),l!=="marker.line."&&(l&&c&&(L=n(_)),a(l+"showscale",L)&&(l&&g&&(p._template=g),T(_,p,i)))}},94288:function(C,A,e){"use strict";var v=e(33428),w=e(49760),n=e(38248),T=e(3400),x=e(76308),f=e(88304).isValid,s=["showscale","autocolorscale","colorscale","reversescale","colorbar"],t=["min","max","mid","auto"];function o(l){var d,c,_,p=l._colorAx,g=p||l,m={};for(c=0;c<s.length;c++)m[_=s[c]]=g[_];if(p)for(d="c",c=0;c<t.length;c++)m[_=t[c]]=g["c"+_];else{var b;for(c=0;c<t.length;c++)((b="c"+(_=t[c]))in g||(b="z"+_)in g)&&(m[_]=g[b]);d=b.charAt(0)}return m._sync=function(y,M){var h=t.indexOf(y)!==-1?d+y:y;g[h]=g["_"+h]=M},m}function r(l){for(var d=o(l),c=d.min,_=d.max,p=d.reversescale?i(d.colorscale):d.colorscale,g=p.length,m=new Array(g),b=new Array(g),y=0;y<g;y++){var M=p[y];m[y]=c+M[0]*(_-c),b[y]=M[1]}return{domain:m,range:b}}function i(l){for(var d=l.length,c=new Array(d),_=d-1,p=0;_>=0;_--,p++){var g=l[_];c[p]=[1-g[0],g[1]]}return c}function a(l,d){d=d||{};for(var c=l.domain,_=l.range,p=_.length,g=new Array(p),m=0;m<p;m++){var b=w(_[m]).toRgb();g[m]=[b.r,b.g,b.b,b.a]}var y,M=v.scale.linear().domain(c).range(g).clamp(!0),h=d.noNumericCheck,E=d.returnArray;return(y=h&&E?M:h?function(k){return u(M(k))}:E?function(k){return n(k)?M(k):w(k).isValid()?k:x.defaultLine}:function(k){return n(k)?u(M(k)):w(k).isValid()?k:x.defaultLine}).domain=M.domain,y.range=function(){return _},y}function u(l){var d={r:l[0],g:l[1],b:l[2],a:l[3]};return w(d).toRgbString()}C.exports={hasColorscale:function(l,d,c){var _=d?T.nestedProperty(l,d).get()||{}:l,p=_[c||"color"];p&&p._inputArray&&(p=p._inputArray);var g=!1;if(T.isArrayOrTypedArray(p)){for(var m=0;m<p.length;m++)if(n(p[m])){g=!0;break}}return T.isPlainObject(_)&&(g||_.showscale===!0||n(_.cmin)&&n(_.cmax)||f(_.colorscale)||T.isPlainObject(_.colorbar))},extractOpts:o,extractScale:r,flipScale:i,makeColorScaleFunc:a,makeColorScaleFuncFromTrace:function(l,d){return a(r(l),d)}}},8932:function(C,A,e){"use strict";var v=e(88304),w=e(94288);C.exports={moduleType:"component",name:"colorscale",attributes:e(49084),layoutAttributes:e(92332),supplyLayoutDefaults:e(51608),handleDefaults:e(27260),crossTraceDefaults:e(95504),calc:e(47128),scales:v.scales,defaultScale:v.defaultScale,getScale:v.get,isValidScale:v.isValid,hasColorscale:w.hasColorscale,extractOpts:w.extractOpts,extractScale:w.extractScale,flipScale:w.flipScale,makeColorScaleFunc:w.makeColorScaleFunc,makeColorScaleFuncFromTrace:w.makeColorScaleFuncFromTrace}},92332:function(C,A,e){"use strict";var v=e(92880).extendFlat,w=e(49084),n=e(88304).scales;C.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:n.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:n.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:n.RdBu,editType:"calc"}},coloraxis:v({_isSubplotObj:!0,editType:"calc"},w("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},51608:function(C,A,e){"use strict";var v=e(3400),w=e(31780),n=e(92332),T=e(27260);C.exports=function(x,f){function s(d,c){return v.coerce(x,f,n,d,c)}s("colorscale.sequential"),s("colorscale.sequentialminus"),s("colorscale.diverging");var t,o,r=f._colorAxes;function i(d,c){return v.coerce(t,o,n.coloraxis,d,c)}for(var a in r){var u=r[a];if(u[0])t=x[a]||{},(o=w.newContainer(f,a,"coloraxis"))._name=a,T(t,o,f,i,{prefix:"",cLetter:"c"});else{for(var l=0;l<u[2].length;l++)u[2][l]();delete f._colorAxes[a]}}}},88304:function(C,A,e){"use strict";var v=e(49760),w={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},n=w.RdBu;function T(x){var f=0;if(!Array.isArray(x)||x.length<2||!x[0]||!x[x.length-1]||+x[0][0]!=0||+x[x.length-1][0]!=1)return!1;for(var s=0;s<x.length;s++){var t=x[s];if(t.length!==2||+t[0]<f||!v(t[1]).isValid())return!1;f=+t[0]}return!0}C.exports={scales:w,defaultScale:n,get:function(x,f){if(f||(f=n),!x)return f;function s(){try{x=w[x]||JSON.parse(x)}catch{x=f}}return typeof x=="string"&&(s(),typeof x=="string"&&s()),T(x)?x:f},isValid:function(x){return w[x]!==void 0||T(x)}}},78316:function(C){"use strict";C.exports=function(A,e,v,w,n){var T=(A-v)/(w-v),x=T+e/(w-v),f=(T+x)/2;return n==="left"||n==="bottom"?T:n==="center"||n==="middle"?f:n==="right"||n==="top"?x:T<.6666666666666666-f?T:x>1.3333333333333333-f?x:f}},67416:function(C,A,e){"use strict";var v=e(3400),w=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];C.exports=function(n,T,x,f){return n=x==="left"?0:x==="center"?1:x==="right"?2:v.constrain(Math.floor(3*n),0,2),T=f==="bottom"?0:f==="middle"?1:f==="top"?2:v.constrain(Math.floor(3*T),0,2),w[T][n]}},72760:function(C,A){"use strict";A.selectMode=function(e){return e==="lasso"||e==="select"},A.drawMode=function(e){return e==="drawclosedpath"||e==="drawopenpath"||e==="drawline"||e==="drawrect"||e==="drawcircle"},A.openMode=function(e){return e==="drawline"||e==="drawopenpath"},A.rectMode=function(e){return e==="select"||e==="drawline"||e==="drawrect"||e==="drawcircle"},A.freeMode=function(e){return e==="lasso"||e==="drawclosedpath"||e==="drawopenpath"},A.selectingOrDrawing=function(e){return A.freeMode(e)||A.rectMode(e)}},86476:function(C,A,e){"use strict";var v=e(29128),w=e(52264),n=e(89184),T=e(3400).removeElement,x=e(33816),f=C.exports={};f.align=e(78316),f.getCursor=e(67416);var s=e(2616);function t(){var r=document.createElement("div");r.className="dragcover";var i=r.style;return i.position="fixed",i.left=0,i.right=0,i.top=0,i.bottom=0,i.zIndex=999999999,i.background="none",document.body.appendChild(r),r}function o(r){return v(r.changedTouches?r.changedTouches[0]:r,document.body)}f.unhover=s.wrapped,f.unhoverRaw=s.raw,f.init=function(r){var i,a,u,l,d,c,_,p,g=r.gd,m=1,b=g._context.doubleClickDelay,y=r.element;g._mouseDownTime||(g._mouseDownTime=0),y.style.pointerEvents="all",y.onmousedown=h,n?(y._ontouchstart&&y.removeEventListener("touchstart",y._ontouchstart),y._ontouchstart=h,y.addEventListener("touchstart",h,{passive:!1})):y.ontouchstart=h;var M=r.clampFn||function(D,P,L){return Math.abs(D)<L&&(D=0),Math.abs(P)<L&&(P=0),[D,P]};function h(D){g._dragged=!1,g._dragging=!0;var P=o(D);i=P[0],a=P[1],_=D.target,c=D,p=D.buttons===2||D.ctrlKey,D.clientX===void 0&&D.clientY===void 0&&(D.clientX=i,D.clientY=a),(u=new Date().getTime())-g._mouseDownTime<b?m+=1:(m=1,g._mouseDownTime=u),r.prepFn&&r.prepFn(D,i,a),w&&!p?(d=t()).style.cursor=window.getComputedStyle(y).cursor:w||(d=document,l=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(y).cursor),document.addEventListener("mouseup",k),document.addEventListener("touchend",k),r.dragmode!==!1&&(D.preventDefault(),document.addEventListener("mousemove",E),document.addEventListener("touchmove",E,{passive:!1}))}function E(D){D.preventDefault();var P=o(D),L=r.minDrag||x.MINDRAG,O=M(P[0]-i,P[1]-a,L),N=O[0],V=O[1];(N||V)&&(g._dragged=!0,f.unhover(g,D)),g._dragged&&r.moveFn&&!p&&(g._dragdata={element:y,dx:N,dy:V},r.moveFn(N,V))}function k(D){if(delete g._dragdata,r.dragmode!==!1&&(D.preventDefault(),document.removeEventListener("mousemove",E),document.removeEventListener("touchmove",E)),document.removeEventListener("mouseup",k),document.removeEventListener("touchend",k),w?T(d):l&&(d.documentElement.style.cursor=l,l=null),g._dragging){if(g._dragging=!1,new Date().getTime()-g._mouseDownTime>b&&(m=Math.max(m-1,1)),g._dragged)r.doneFn&&r.doneFn();else if(r.clickFn&&r.clickFn(m,c),!p){var P;try{P=new MouseEvent("click",D)}catch{var L=o(D);(P=document.createEvent("MouseEvents")).initMouseEvent("click",D.bubbles,D.cancelable,D.view,D.detail,D.screenX,D.screenY,L[0],L[1],D.ctrlKey,D.altKey,D.shiftKey,D.metaKey,D.button,D.relatedTarget)}_.dispatchEvent(P)}g._dragging=!1,g._dragged=!1}else g._dragged=!1}},f.coverSlip=t},2616:function(C,A,e){"use strict";var v=e(95924),w=e(91200),n=e(52200).getGraphDiv,T=e(92456),x=C.exports={};x.wrapped=function(f,s,t){(f=n(f))._fullLayout&&w.clear(f._fullLayout._uid+T.HOVERID),x.raw(f,s,t)},x.raw=function(f,s){var t=f._fullLayout,o=f._hoverdata;s||(s={}),s.target&&!f._dragged&&v.triggerHandler(f,"plotly_beforehover",s)===!1||(t._hoverlayer.selectAll("g").remove(),t._hoverlayer.selectAll("line").remove(),t._hoverlayer.selectAll("circle").remove(),f._hoverdata=void 0,s.target&&o&&f.emit("plotly_unhover",{event:s,points:o}))}},98192:function(C,A){"use strict";A.u={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},A.c={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},43616:function(C,A,e){"use strict";var v=e(33428),w=e(3400),n=w.numberFormat,T=e(38248),x=e(49760),f=e(24040),s=e(76308),t=e(8932),o=w.strTranslate,r=e(72736),i=e(9616),a=e(84284).LINE_SPACING,u=e(13448).DESELECTDIM,l=e(43028),d=e(7152),c=e(10624).appendArrayPointValue,_=C.exports={};function p(me,Me,Ae,ce){var ae=Me.fillpattern,pe=Me.fillgradient,De=ae&&_.getPatternAttr(ae.shape,0,"");if(De){var ke=_.getPatternAttr(ae.bgcolor,0,null),Ee=_.getPatternAttr(ae.fgcolor,0,null),Ie=ae.fgopacity,Re=_.getPatternAttr(ae.size,0,8),Ne=_.getPatternAttr(ae.solidity,0,.3),ge=Me.uid;_.pattern(me,"point",Ae,ge,De,Re,Ne,void 0,ae.fillmode,ke,Ee,Ie)}else if(pe&&pe.type!=="none"){var we,Ce,ze=pe.type,Pe="scatterfill-"+Me.uid;ce&&(Pe="legendfill-"+Me.uid),ce||pe.start===void 0&&pe.stop===void 0?(ze==="horizontal"&&(ze+="reversed"),me.call(_.gradient,Ae,Pe,ze,pe.colorscale,"fill")):(ze==="horizontal"?(we={x:pe.start,y:0},Ce={x:pe.stop,y:0}):ze==="vertical"&&(we={x:0,y:pe.start},Ce={x:0,y:pe.stop}),we.x=Me._xA.c2p(we.x===void 0?Me._extremes.x.min[0].val:we.x,!0),we.y=Me._yA.c2p(we.y===void 0?Me._extremes.y.min[0].val:we.y,!0),Ce.x=Me._xA.c2p(Ce.x===void 0?Me._extremes.x.max[0].val:Ce.x,!0),Ce.y=Me._yA.c2p(Ce.y===void 0?Me._extremes.y.max[0].val:Ce.y,!0),me.call(h,Ae,Pe,"linear",pe.colorscale,"fill",we,Ce,!0,!1))}else Me.fillcolor&&me.call(s.fill,Me.fillcolor)}_.font=function(me,Me,Ae,ce,ae,pe,De){w.isPlainObject(Me)&&(De=Me.variant,pe=Me.style,ae=Me.weight,ce=Me.color,Ae=Me.size,Me=Me.family),Me&&me.style("font-family",Me),Ae+1&&me.style("font-size",Ae+"px"),ce&&me.call(s.fill,ce),ae&&me.style("font-weight",ae),pe&&me.style("font-style",pe),De&&me.style("font-variant",De)},_.setPosition=function(me,Me,Ae){me.attr("x",Me).attr("y",Ae)},_.setSize=function(me,Me,Ae){me.attr("width",Me).attr("height",Ae)},_.setRect=function(me,Me,Ae,ce,ae){me.call(_.setPosition,Me,Ae).call(_.setSize,ce,ae)},_.translatePoint=function(me,Me,Ae,ce){var ae=Ae.c2p(me.x),pe=ce.c2p(me.y);return!!(T(ae)&&T(pe)&&Me.node())&&(Me.node().nodeName==="text"?Me.attr("x",ae).attr("y",pe):Me.attr("transform",o(ae,pe)),!0)},_.translatePoints=function(me,Me,Ae){me.each(function(ce){var ae=v.select(this);_.translatePoint(ce,ae,Me,Ae)})},_.hideOutsideRangePoint=function(me,Me,Ae,ce,ae,pe){Me.attr("display",Ae.isPtWithinRange(me,ae)&&ce.isPtWithinRange(me,pe)?null:"none")},_.hideOutsideRangePoints=function(me,Me){if(Me._hasClipOnAxisFalse){var Ae=Me.xaxis,ce=Me.yaxis;me.each(function(ae){var pe=ae[0].trace,De=pe.xcalendar,ke=pe.ycalendar,Ee=f.traceIs(pe,"bar-like")?".bartext":".point,.textpoint";me.selectAll(Ee).each(function(Ie){_.hideOutsideRangePoint(Ie,v.select(this),Ae,ce,De,ke)})})}},_.crispRound=function(me,Me,Ae){return Me&&T(Me)?me._context.staticPlot?Me:Me<1?1:Math.round(Me):Ae||0},_.singleLineStyle=function(me,Me,Ae,ce,ae){Me.style("fill","none");var pe=(((me||[])[0]||{}).trace||{}).line||{},De=Ae||pe.width||0,ke=ae||pe.dash||"";s.stroke(Me,ce||pe.color),_.dashLine(Me,ke,De)},_.lineGroupStyle=function(me,Me,Ae,ce){me.style("fill","none").each(function(ae){var pe=(((ae||[])[0]||{}).trace||{}).line||{},De=Me||pe.width||0,ke=ce||pe.dash||"";v.select(this).call(s.stroke,Ae||pe.color).call(_.dashLine,ke,De)})},_.dashLine=function(me,Me,Ae){Ae=+Ae||0,Me=_.dashStyle(Me,Ae),me.style({"stroke-dasharray":Me,"stroke-width":Ae+"px"})},_.dashStyle=function(me,Me){Me=+Me||1;var Ae=Math.max(Me,3);return me==="solid"?me="":me==="dot"?me=Ae+"px,"+Ae+"px":me==="dash"?me=3*Ae+"px,"+3*Ae+"px":me==="longdash"?me=5*Ae+"px,"+5*Ae+"px":me==="dashdot"?me=3*Ae+"px,"+Ae+"px,"+Ae+"px,"+Ae+"px":me==="longdashdot"&&(me=5*Ae+"px,"+2*Ae+"px,"+Ae+"px,"+2*Ae+"px"),me},_.singleFillStyle=function(me,Me){var Ae=v.select(me.node());p(me,((Ae.data()[0]||[])[0]||{}).trace||{},Me,!1)},_.fillGroupStyle=function(me,Me,Ae){me.style("stroke-width",0).each(function(ce){var ae=v.select(this);ce[0].trace&&p(ae,ce[0].trace,Me,Ae)})};var g=e(71984);_.symbolNames=[],_.symbolFuncs=[],_.symbolBackOffs=[],_.symbolNeedLines={},_.symbolNoDot={},_.symbolNoFill={},_.symbolList=[],Object.keys(g).forEach(function(me){var Me=g[me],Ae=Me.n;_.symbolList.push(Ae,String(Ae),me,Ae+100,String(Ae+100),me+"-open"),_.symbolNames[Ae]=me,_.symbolFuncs[Ae]=Me.f,_.symbolBackOffs[Ae]=Me.backoff||0,Me.needLine&&(_.symbolNeedLines[Ae]=!0),Me.noDot?_.symbolNoDot[Ae]=!0:_.symbolList.push(Ae+200,String(Ae+200),me+"-dot",Ae+300,String(Ae+300),me+"-open-dot"),Me.noFill&&(_.symbolNoFill[Ae]=!0)});var m=_.symbolNames.length;function b(me,Me,Ae,ce){var ae=me%100;return _.symbolFuncs[ae](Me,Ae,ce)+(me>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}_.symbolNumber=function(me){if(T(me))me=+me;else if(typeof me=="string"){var Me=0;me.indexOf("-open")>0&&(Me=100,me=me.replace("-open","")),me.indexOf("-dot")>0&&(Me+=200,me=me.replace("-dot","")),(me=_.symbolNames.indexOf(me))>=0&&(me+=Me)}return me%100>=m||me>=400?0:Math.floor(Math.max(me,0))};var y=n("~f"),M={radial:{type:"radial"},radialreversed:{type:"radial",reversed:!0},horizontal:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0}},horizontalreversed:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0},reversed:!0},vertical:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0}},verticalreversed:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0},reversed:!0}};function h(me,Me,Ae,ce,ae,pe,De,ke,Ee,Ie){var Re,Ne=ae.length;ce==="linear"?Re={node:"linearGradient",attrs:{x1:De.x,y1:De.y,x2:ke.x,y2:ke.y,gradientUnits:Ee?"userSpaceOnUse":"objectBoundingBox"},reversed:Ie}:ce==="radial"&&(Re={node:"radialGradient",reversed:Ie});for(var ge=new Array(Ne),we=0;we<Ne;we++)Re.reversed?ge[Ne-1-we]=[y(100*(1-ae[we][0])),ae[we][1]]:ge[we]=[y(100*ae[we][0]),ae[we][1]];var Ce=Me._fullLayout,ze="g"+Ce._uid+"-"+Ae,Pe=Ce._defs.select(".gradients").selectAll("#"+ze).data([ce+ge.join(";")],w.identity);Pe.exit().remove(),Pe.enter().append(Re.node).each(function(){var Ue=v.select(this);Re.attrs&&Ue.attr(Re.attrs),Ue.attr("id",ze);var Ge=Ue.selectAll("stop").data(ge);Ge.exit().remove(),Ge.enter().append("stop"),Ge.each(function(Xe){var st=x(Xe[1]);v.select(this).attr({offset:Xe[0]+"%","stop-color":s.tinyRGB(st),"stop-opacity":st.getAlpha()})})}),me.style(pe,re(ze,Me)).style(pe+"-opacity",null),me.classed("gradient_filled",!0)}_.gradient=function(me,Me,Ae,ce,ae,pe){var De=M[ce];return h(me,Me,Ae,De.type,ae,pe,De.start,De.stop,!1,De.reversed)},_.pattern=function(me,Me,Ae,ce,ae,pe,De,ke,Ee,Ie,Re,Ne){var ge=Me==="legend";ke&&(Ee==="overlay"?(Ie=ke,Re=s.contrast(Ie)):(Ie=void 0,Re=ke));var we,Ce,ze,Pe,Ue,Ge,Xe,st,at,vt=Ae._fullLayout,xt="p"+vt._uid+"-"+ce,gt={},rt=x(Re),tt=s.tinyRGB(rt),Mt=Ne*rt.getAlpha();switch(ae){case"/":we=pe*Math.sqrt(2),Ce=pe*Math.sqrt(2),Ge="path",gt={d:ze="M-"+we/4+","+Ce/4+"l"+we/2+",-"+Ce/2+"M0,"+Ce+"L"+we+",0M"+we/4*3+","+Ce/4*5+"l"+we/2+",-"+Ce/2,opacity:Mt,stroke:tt,"stroke-width":(Pe=De*pe)+"px"};break;case"\\":we=pe*Math.sqrt(2),Ce=pe*Math.sqrt(2),Ge="path",gt={d:ze="M"+we/4*3+",-"+Ce/4+"l"+we/2+","+Ce/2+"M0,0L"+we+","+Ce+"M-"+we/4+","+Ce/4*3+"l"+we/2+","+Ce/2,opacity:Mt,stroke:tt,"stroke-width":(Pe=De*pe)+"px"};break;case"x":we=pe*Math.sqrt(2),Ce=pe*Math.sqrt(2),ze="M-"+we/4+","+Ce/4+"l"+we/2+",-"+Ce/2+"M0,"+Ce+"L"+we+",0M"+we/4*3+","+Ce/4*5+"l"+we/2+",-"+Ce/2+"M"+we/4*3+",-"+Ce/4+"l"+we/2+","+Ce/2+"M0,0L"+we+","+Ce+"M-"+we/4+","+Ce/4*3+"l"+we/2+","+Ce/2,Pe=pe-pe*Math.sqrt(1-De),Ge="path",gt={d:ze,opacity:Mt,stroke:tt,"stroke-width":Pe+"px"};break;case"|":Ge="path",Ge="path",gt={d:ze="M"+(we=pe)/2+",0L"+we/2+","+(Ce=pe),opacity:Mt,stroke:tt,"stroke-width":(Pe=De*pe)+"px"};break;case"-":Ge="path",Ge="path",gt={d:ze="M0,"+(Ce=pe)/2+"L"+(we=pe)+","+Ce/2,opacity:Mt,stroke:tt,"stroke-width":(Pe=De*pe)+"px"};break;case"+":Ge="path",ze="M"+(we=pe)/2+",0L"+we/2+","+(Ce=pe)+"M0,"+Ce/2+"L"+we+","+Ce/2,Pe=pe-pe*Math.sqrt(1-De),Ge="path",gt={d:ze,opacity:Mt,stroke:tt,"stroke-width":Pe+"px"};break;case".":we=pe,Ce=pe,De<Math.PI/4?Ue=Math.sqrt(De*pe*pe/Math.PI):(Xe=De,st=Math.PI/4,Ue=(at=pe/2)+(pe/Math.sqrt(2)-at)*(Xe-st)/(1-st)),Ge="circle",gt={cx:we/2,cy:Ce/2,r:Ue,opacity:Mt,fill:tt}}var Pt=[ae||"noSh",Ie||"noBg",Re||"noFg",pe,De].join(";"),Rt=vt._defs.select(".patterns").selectAll("#"+xt).data([Pt],w.identity);Rt.exit().remove(),Rt.enter().append("pattern").each(function(){var St=v.select(this);if(St.attr({id:xt,width:we+"px",height:Ce+"px",patternUnits:"userSpaceOnUse",patternTransform:ge?"scale(0.8)":""}),Ie){var Ye=x(Ie),Ke=s.tinyRGB(Ye),Ve=Ye.getAlpha(),$e=St.selectAll("rect").data([0]);$e.exit().remove(),$e.enter().append("rect").attr({width:we+"px",height:Ce+"px",fill:Ke,"fill-opacity":Ve})}var lt=St.selectAll(Ge).data([0]);lt.exit().remove(),lt.enter().append(Ge).attr(gt)}),me.style("fill",re(xt,Ae)).style("fill-opacity",null),me.classed("pattern_filled",!0)},_.initGradients=function(me){var Me=me._fullLayout;w.ensureSingle(Me._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),v.select(me).selectAll(".gradient_filled").classed("gradient_filled",!1)},_.initPatterns=function(me){var Me=me._fullLayout;w.ensureSingle(Me._defs,"g","patterns").selectAll("pattern").remove(),v.select(me).selectAll(".pattern_filled").classed("pattern_filled",!1)},_.getPatternAttr=function(me,Me,Ae){return me&&w.isArrayOrTypedArray(me)?Me<me.length?me[Me]:Ae:me},_.pointStyle=function(me,Me,Ae,ce){if(me.size()){var ae=_.makePointStyleFns(Me);me.each(function(pe){_.singlePointStyle(pe,v.select(this),Me,ae,Ae,ce)})}},_.singlePointStyle=function(me,Me,Ae,ce,ae,pe){var De=Ae.marker,ke=De.line;if(pe&&pe.i>=0&&me.i===void 0&&(me.i=pe.i),Me.style("opacity",ce.selectedOpacityFn?ce.selectedOpacityFn(me):me.mo===void 0?De.opacity:me.mo),ce.ms2mrc){var Ee;Ee=me.ms==="various"||De.size==="various"?3:ce.ms2mrc(me.ms),me.mrc=Ee,ce.selectedSizeFn&&(Ee=me.mrc=ce.selectedSizeFn(me));var Ie=_.symbolNumber(me.mx||De.symbol)||0;me.om=Ie%200>=100;var Re=ye(me,Ae),Ne=Q(me,Ae);Me.attr("d",b(Ie,Ee,Re,Ne))}var ge,we,Ce,ze=!1;if(me.so)Ce=ke.outlierwidth,we=ke.outliercolor,ge=De.outliercolor;else{var Pe=(ke||{}).width;Ce=(me.mlw+1||Pe+1||(me.trace?(me.trace.marker.line||{}).width:0)+1)-1||0,we="mlc"in me?me.mlcc=ce.lineScale(me.mlc):w.isArrayOrTypedArray(ke.color)?s.defaultLine:ke.color,w.isArrayOrTypedArray(De.color)&&(ge=s.defaultLine,ze=!0),ge="mc"in me?me.mcc=ce.markerScale(me.mc):De.color||De.colors||"rgba(0,0,0,0)",ce.selectedColorFn&&(ge=ce.selectedColorFn(me))}if(me.om)Me.call(s.stroke,ge).style({"stroke-width":(Ce||1)+"px",fill:"none"});else{Me.style("stroke-width",(me.isBlank?0:Ce)+"px");var Ue=De.gradient,Ge=me.mgt;Ge?ze=!0:Ge=Ue&&Ue.type,w.isArrayOrTypedArray(Ge)&&(Ge=Ge[0],M[Ge]||(Ge=0));var Xe=De.pattern,st=Xe&&_.getPatternAttr(Xe.shape,me.i,"");if(Ge&&Ge!=="none"){var at=me.mgc;at?ze=!0:at=Ue.color;var vt=Ae.uid;ze&&(vt+="-"+me.i),_.gradient(Me,ae,vt,Ge,[[0,at],[1,ge]],"fill")}else if(st){var xt=!1,gt=Xe.fgcolor;!gt&&pe&&pe.color&&(gt=pe.color,xt=!0);var rt=_.getPatternAttr(gt,me.i,pe&&pe.color||null),tt=_.getPatternAttr(Xe.bgcolor,me.i,null),Mt=Xe.fgopacity,Pt=_.getPatternAttr(Xe.size,me.i,8),Rt=_.getPatternAttr(Xe.solidity,me.i,.3);xt=xt||me.mcc||w.isArrayOrTypedArray(Xe.shape)||w.isArrayOrTypedArray(Xe.bgcolor)||w.isArrayOrTypedArray(Xe.fgcolor)||w.isArrayOrTypedArray(Xe.size)||w.isArrayOrTypedArray(Xe.solidity);var St=Ae.uid;xt&&(St+="-"+me.i),_.pattern(Me,"point",ae,St,st,Pt,Rt,me.mcc,Xe.fillmode,tt,rt,Mt)}else w.isArrayOrTypedArray(ge)?s.fill(Me,ge[me.i]):s.fill(Me,ge);Ce&&s.stroke(Me,we)}},_.makePointStyleFns=function(me){var Me={},Ae=me.marker;return Me.markerScale=_.tryColorscale(Ae,""),Me.lineScale=_.tryColorscale(Ae,"line"),f.traceIs(me,"symbols")&&(Me.ms2mrc=l.isBubble(me)?d(me):function(){return(Ae.size||6)/2}),me.selectedpoints&&w.extendFlat(Me,_.makeSelectedPointStyleFns(me)),Me},_.makeSelectedPointStyleFns=function(me){var Me={},Ae=me.selected||{},ce=me.unselected||{},ae=me.marker||{},pe=Ae.marker||{},De=ce.marker||{},ke=ae.opacity,Ee=pe.opacity,Ie=De.opacity,Re=Ee!==void 0,Ne=Ie!==void 0;(w.isArrayOrTypedArray(ke)||Re||Ne)&&(Me.selectedOpacityFn=function(st){var at=st.mo===void 0?ae.opacity:st.mo;return st.selected?Re?Ee:at:Ne?Ie:u*at});var ge=ae.color,we=pe.color,Ce=De.color;(we||Ce)&&(Me.selectedColorFn=function(st){var at=st.mcc||ge;return st.selected?we||at:Ce||at});var ze=ae.size,Pe=pe.size,Ue=De.size,Ge=Pe!==void 0,Xe=Ue!==void 0;return f.traceIs(me,"symbols")&&(Ge||Xe)&&(Me.selectedSizeFn=function(st){var at=st.mrc||ze/2;return st.selected?Ge?Pe/2:at:Xe?Ue/2:at}),Me},_.makeSelectedTextStyleFns=function(me){var Me={},Ae=me.selected||{},ce=me.unselected||{},ae=me.textfont||{},pe=Ae.textfont||{},De=ce.textfont||{},ke=ae.color,Ee=pe.color,Ie=De.color;return Me.selectedTextColorFn=function(Re){var Ne=Re.tc||ke;return Re.selected?Ee||Ne:Ie||(Ee?Ne:s.addOpacity(Ne,u))},Me},_.selectedPointStyle=function(me,Me){if(me.size()&&Me.selectedpoints){var Ae=_.makeSelectedPointStyleFns(Me),ce=Me.marker||{},ae=[];Ae.selectedOpacityFn&&ae.push(function(pe,De){pe.style("opacity",Ae.selectedOpacityFn(De))}),Ae.selectedColorFn&&ae.push(function(pe,De){s.fill(pe,Ae.selectedColorFn(De))}),Ae.selectedSizeFn&&ae.push(function(pe,De){var ke=De.mx||ce.symbol||0,Ee=Ae.selectedSizeFn(De);pe.attr("d",b(_.symbolNumber(ke),Ee,ye(De,Me),Q(De,Me))),De.mrc2=Ee}),ae.length&&me.each(function(pe){for(var De=v.select(this),ke=0;ke<ae.length;ke++)ae[ke](De,pe)})}},_.tryColorscale=function(me,Me){var Ae=Me?w.nestedProperty(me,Me).get():me;if(Ae){var ce=Ae.color;if((Ae.colorscale||Ae._colorAx)&&w.isArrayOrTypedArray(ce))return t.makeColorScaleFuncFromTrace(Ae)}return w.identity};var E,k,D={start:1,end:-1,middle:0,bottom:1,top:-1};function P(me,Me,Ae,ce,ae){var pe=v.select(me.node().parentNode),De=Me.indexOf("top")!==-1?"top":Me.indexOf("bottom")!==-1?"bottom":"middle",ke=Me.indexOf("left")!==-1?"end":Me.indexOf("right")!==-1?"start":"middle",Ee=ce?ce/.8+1:0,Ie=(r.lineCount(me)-1)*a+1,Re=D[ke]*Ee,Ne=.75*Ae+D[De]*Ee+(D[De]-1)*Ie*Ae/2;me.attr("text-anchor",ke),ae||pe.attr("transform",o(Re,Ne))}function L(me,Me){var Ae=me.ts||Me.textfont.size;return T(Ae)&&Ae>0?Ae:0}function O(me,Me,Ae){return Ae&&(me=z(me)),Me?V(me[1]):N(me[0])}function N(me){var Me=v.round(me,2);return E=Me,Me}function V(me){var Me=v.round(me,2);return k=Me,Me}function F(me,Me,Ae,ce){var ae=me[0]-Me[0],pe=me[1]-Me[1],De=Ae[0]-Me[0],ke=Ae[1]-Me[1],Ee=Math.pow(ae*ae+pe*pe,.25),Ie=Math.pow(De*De+ke*ke,.25),Re=(Ie*Ie*ae-Ee*Ee*De)*ce,Ne=(Ie*Ie*pe-Ee*Ee*ke)*ce,ge=3*Ie*(Ee+Ie),we=3*Ee*(Ee+Ie);return[[N(Me[0]+(ge&&Re/ge)),V(Me[1]+(ge&&Ne/ge))],[N(Me[0]-(we&&Re/we)),V(Me[1]-(we&&Ne/we))]]}_.textPointStyle=function(me,Me,Ae){if(me.size()){var ce;if(Me.selectedpoints){var ae=_.makeSelectedTextStyleFns(Me);ce=ae.selectedTextColorFn}var pe=Me.texttemplate,De=Ae._fullLayout;me.each(function(ke){var Ee=v.select(this),Ie=pe?w.extractOption(ke,Me,"txt","texttemplate"):w.extractOption(ke,Me,"tx","text");if(Ie||Ie===0){if(pe){var Re=Me._module.formatLabels,Ne=Re?Re(ke,Me,De):{},ge={};c(ge,Me,ke.i);var we=Me._meta||{};Ie=w.texttemplateString(Ie,Ne,De._d3locale,ge,ke,we)}var Ce=ke.tp||Me.textposition,ze=L(ke,Me),Pe=ce?ce(ke):ke.tc||Me.textfont.color;Ee.call(_.font,{family:ke.tf||Me.textfont.family,weight:ke.tw||Me.textfont.weight,style:ke.ty||Me.textfont.style,variant:ke.tv||Me.textfont.variant,size:ze,color:Pe}).text(Ie).call(r.convertToTspans,Ae).call(P,Ce,ze,ke.mrc)}else Ee.remove()})}},_.selectedTextStyle=function(me,Me){if(me.size()&&Me.selectedpoints){var Ae=_.makeSelectedTextStyleFns(Me);me.each(function(ce){var ae=v.select(this),pe=Ae.selectedTextColorFn(ce),De=ce.tp||Me.textposition,ke=L(ce,Me);s.fill(ae,pe);var Ee=f.traceIs(Me,"bar-like");P(ae,De,ke,ce.mrc2||ce.mrc,Ee)})}},_.smoothopen=function(me,Me){if(me.length<3)return"M"+me.join("L");var Ae,ce="M"+me[0],ae=[];for(Ae=1;Ae<me.length-1;Ae++)ae.push(F(me[Ae-1],me[Ae],me[Ae+1],Me));for(ce+="Q"+ae[0][0]+" "+me[1],Ae=2;Ae<me.length-1;Ae++)ce+="C"+ae[Ae-2][1]+" "+ae[Ae-1][0]+" "+me[Ae];return ce+"Q"+ae[me.length-3][1]+" "+me[me.length-1]},_.smoothclosed=function(me,Me){if(me.length<3)return"M"+me.join("L")+"Z";var Ae,ce="M"+me[0],ae=me.length-1,pe=[F(me[ae],me[0],me[1],Me)];for(Ae=1;Ae<ae;Ae++)pe.push(F(me[Ae-1],me[Ae],me[Ae+1],Me));for(pe.push(F(me[ae-1],me[ae],me[0],Me)),Ae=1;Ae<=ae;Ae++)ce+="C"+pe[Ae-1][1]+" "+pe[Ae][0]+" "+me[Ae];return ce+"C"+pe[ae][1]+" "+pe[0][0]+" "+me[0]+"Z"};var j={hv:function(me,Me,Ae){return"H"+N(Me[0])+"V"+O(Me,1,Ae)},vh:function(me,Me,Ae){return"V"+V(Me[1])+"H"+O(Me,0,Ae)},hvh:function(me,Me,Ae){return"H"+N((me[0]+Me[0])/2)+"V"+V(Me[1])+"H"+O(Me,0,Ae)},vhv:function(me,Me,Ae){return"V"+V((me[1]+Me[1])/2)+"H"+N(Me[0])+"V"+O(Me,1,Ae)}},Z=function(me,Me,Ae){return"L"+O(Me,0,Ae)+","+O(Me,1,Ae)};function z(me,Me){var Ae=me.backoff,ce=me.trace,ae=me.d,pe=me.i;if(Ae&&ce&&ce.marker&&ce.marker.angle%360==0&&ce.line&&ce.line.shape!=="spline"){var De=w.isArrayOrTypedArray(Ae),ke=me,Ee=Me?Me[0]:E||0,Ie=Me?Me[1]:k||0,Re=ke[0],Ne=ke[1],ge=Re-Ee,we=Ne-Ie,Ce=Math.atan2(we,ge),ze=De?Ae[pe]:Ae;if(ze==="auto"){var Pe=ke.i;ce.type==="scatter"&&Pe--;var Ue=ke.marker,Ge=Ue.symbol;w.isArrayOrTypedArray(Ge)&&(Ge=Ge[Pe]);var Xe=Ue.size;w.isArrayOrTypedArray(Xe)&&(Xe=Xe[Pe]),ze=Ue?_.symbolBackOffs[_.symbolNumber(Ge)]*Xe:0,ze+=_.getMarkerStandoff(ae[Pe],ce)||0}var st=Re-ze*Math.cos(Ce),at=Ne-ze*Math.sin(Ce);(st<=Re&&st>=Ee||st>=Re&&st<=Ee)&&(at<=Ne&&at>=Ie||at>=Ne&&at<=Ie)&&(me=[st,at])}return me}_.steps=function(me){var Me=j[me]||Z;return function(Ae){for(var ce="M"+N(Ae[0][0])+","+V(Ae[0][1]),ae=Ae.length,pe=1;pe<ae;pe++)ce+=Me(Ae[pe-1],Ae[pe],pe===ae-1);return ce}},_.applyBackoff=z,_.makeTester=function(){var me=w.ensureSingleById(v.select("body"),"svg","js-plotly-tester",function(Ae){Ae.attr(i.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),Me=w.ensureSingle(me,"path","js-reference-point",function(Ae){Ae.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});_.tester=me,_.testref=Me},_.savedBBoxes={};var H=0;function U(me){var Me=me.getAttribute("data-unformatted");if(Me!==null)return Me+me.getAttribute("data-math")+me.getAttribute("text-anchor")+me.getAttribute("style")}function re(me,Me){if(!me)return null;var Ae=Me._context,ce=Ae._exportedPlot?"":Ae._baseUrl||"";return ce?"url('"+ce+"#"+me+"')":"url(#"+me+")"}_.bBox=function(me,Me,Ae){var ce,ae,pe;if(Ae||(Ae=U(me)),Ae){if(ce=_.savedBBoxes[Ae])return w.extendFlat({},ce)}else if(me.childNodes.length===1){var De=me.childNodes[0];if(Ae=U(De)){var ke=+De.getAttribute("x")||0,Ee=+De.getAttribute("y")||0,Ie=De.getAttribute("transform");if(!Ie){var Re=_.bBox(De,!1,Ae);return ke&&(Re.left+=ke,Re.right+=ke),Ee&&(Re.top+=Ee,Re.bottom+=Ee),Re}if(Ae+="~"+ke+"~"+Ee+"~"+Ie,ce=_.savedBBoxes[Ae])return w.extendFlat({},ce)}}Me?ae=me:(pe=_.tester.node(),ae=me.cloneNode(!0),pe.appendChild(ae)),v.select(ae).attr("transform",null).call(r.positionText,0,0);var Ne=ae.getBoundingClientRect(),ge=_.testref.node().getBoundingClientRect();Me||pe.removeChild(ae);var we={height:Ne.height,width:Ne.width,left:Ne.left-ge.left,top:Ne.top-ge.top,right:Ne.right-ge.left,bottom:Ne.bottom-ge.top};return H>=1e4&&(_.savedBBoxes={},H=0),Ae&&(_.savedBBoxes[Ae]=we),H++,w.extendFlat({},we)},_.setClipUrl=function(me,Me,Ae){me.attr("clip-path",re(Me,Ae))},_.getTranslate=function(me){var Me=(me[me.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(Ae,ce,ae){return[ce,ae].join(" ")}).split(" ");return{x:+Me[0]||0,y:+Me[1]||0}},_.setTranslate=function(me,Me,Ae){var ce=me.attr?"attr":"getAttribute",ae=me.attr?"attr":"setAttribute",pe=me[ce]("transform")||"";return Me=Me||0,Ae=Ae||0,pe=pe.replace(/(\btranslate\(.*?\);?)/,"").trim(),pe=(pe+=o(Me,Ae)).trim(),me[ae]("transform",pe),pe},_.getScale=function(me){var Me=(me[me.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(Ae,ce,ae){return[ce,ae].join(" ")}).split(" ");return{x:+Me[0]||1,y:+Me[1]||1}},_.setScale=function(me,Me,Ae){var ce=me.attr?"attr":"getAttribute",ae=me.attr?"attr":"setAttribute",pe=me[ce]("transform")||"";return Me=Me||1,Ae=Ae||1,pe=pe.replace(/(\bscale\(.*?\);?)/,"").trim(),pe=(pe+="scale("+Me+","+Ae+")").trim(),me[ae]("transform",pe),pe};var ee=/\s*sc.*/;_.setPointGroupScale=function(me,Me,Ae){if(Me=Me||1,Ae=Ae||1,me){var ce=Me===1&&Ae===1?"":"scale("+Me+","+Ae+")";me.each(function(){var ae=(this.getAttribute("transform")||"").replace(ee,"");ae=(ae+=ce).trim(),this.setAttribute("transform",ae)})}};var J=/translate\([^)]*\)\s*$/;function Q(me,Me){var Ae;return me&&(Ae=me.mf),Ae===void 0&&(Ae=Me.marker&&Me.marker.standoff||0),Me._geo||Me._xA?Ae:-Ae}_.setTextPointsScale=function(me,Me,Ae){me&&me.each(function(){var ce,ae=v.select(this),pe=ae.select("text");if(pe.node()){var De=parseFloat(pe.attr("x")||0),ke=parseFloat(pe.attr("y")||0),Ee=(ae.attr("transform")||"").match(J);ce=Me===1&&Ae===1?[]:[o(De,ke),"scale("+Me+","+Ae+")",o(-De,-ke)],Ee&&ce.push(Ee),ae.attr("transform",ce.join(""))}})},_.getMarkerStandoff=Q;var ne,K,oe,le,se,de,be=Math.atan2,_e=Math.cos,xe=Math.sin;function ve(me,Me){var Ae=Me[0],ce=Me[1];return[Ae*_e(me)-ce*xe(me),Ae*xe(me)+ce*_e(me)]}function ye(me,Me){var Ae,ce,ae=me.ma;ae===void 0&&((ae=Me.marker.angle)&&!w.isArrayOrTypedArray(ae)||(ae=0));var pe=Me.marker.angleref;if(pe==="previous"||pe==="north"){if(Me._geo){var De=Me._geo.project(me.lonlat);Ae=De[0],ce=De[1]}else{var ke=Me._xA,Ee=Me._yA;if(!ke||!Ee)return 90;Ae=ke.c2p(me.x),ce=Ee.c2p(me.y)}if(Me._geo){var Ie,Re=me.lonlat[0],Ne=me.lonlat[1],ge=Me._geo.project([Re,Ne+1e-5]),we=Me._geo.project([Re+1e-5,Ne]),Ce=be(we[1]-ce,we[0]-Ae),ze=be(ge[1]-ce,ge[0]-Ae);if(pe==="north")Ie=ae/180*Math.PI;else if(pe==="previous"){var Pe=Re/180*Math.PI,Ue=Ne/180*Math.PI,Ge=ne/180*Math.PI,Xe=K/180*Math.PI,st=Ge-Pe,at=_e(Xe)*xe(st),vt=xe(Xe)*_e(Ue)-_e(Xe)*xe(Ue)*_e(st);Ie=-be(at,vt)-Math.PI,ne=Re,K=Ne}var xt=ve(Ce,[_e(Ie),0]),gt=ve(ze,[xe(Ie),0]);ae=be(xt[1]+gt[1],xt[0]+gt[0])/Math.PI*180,pe!=="previous"||de===Me.uid&&me.i===se+1||(ae=null)}if(pe==="previous"&&!Me._geo)if(de===Me.uid&&me.i===se+1&&T(Ae)&&T(ce)){var rt=Ae-oe,tt=ce-le,Mt=Me.line&&Me.line.shape||"",Pt=Mt.slice(Mt.length-1);Pt==="h"&&(tt=0),Pt==="v"&&(rt=0),ae+=be(tt,rt)/Math.PI*180+90}else ae=null}return oe=Ae,le=ce,se=me.i,de=Me.uid,ae}_.getMarkerAngle=ye},71984:function(C,A,e){"use strict";var v,w,n,T,x=e(21984),f=e(33428).round,s="M0,0Z",t=Math.sqrt(2),o=Math.sqrt(3),r=Math.PI,i=Math.cos,a=Math.sin;function u(d){return d===null}function l(d,c,_){if(!(d&&d%360!=0||c))return _;if(n===d&&T===c&&v===_)return w;function p(N,V){var F=i(N),j=a(N),Z=V[0],z=V[1]+(c||0);return[Z*F-z*j,Z*j+z*F]}n=d,T=c,v=_;for(var g=d/180*r,m=0,b=0,y=x(_),M="",h=0;h<y.length;h++){var E=y[h],k=E[0],D=m,P=b;if(k==="M"||k==="L")m=+E[1],b=+E[2];else if(k==="m"||k==="l")m+=+E[1],b+=+E[2];else if(k==="H")m=+E[1];else if(k==="h")m+=+E[1];else if(k==="V")b=+E[1];else if(k==="v")b+=+E[1];else if(k==="A"){m=+E[1],b=+E[2];var L=p(g,[+E[6],+E[7]]);E[6]=L[0],E[7]=L[1],E[3]=+E[3]+d}k!=="H"&&k!=="V"||(k="L"),k!=="h"&&k!=="v"||(k="l"),k!=="m"&&k!=="l"||(m-=D,b-=P);var O=p(g,[m,b]);k!=="H"&&k!=="V"||(k="L"),k!=="M"&&k!=="L"&&k!=="m"&&k!=="l"||(E[1]=O[0],E[2]=O[1]),E[0]=k,M+=E[0]+E.slice(1).join(",")}return w=M,M}C.exports={circle:{n:0,f:function(d,c,_){if(u(c))return s;var p=f(d,2),g="M"+p+",0A"+p+","+p+" 0 1,1 0,-"+p+"A"+p+","+p+" 0 0,1 "+p+",0Z";return _?l(c,_,g):g}},square:{n:1,f:function(d,c,_){if(u(c))return s;var p=f(d,2);return l(c,_,"M"+p+","+p+"H-"+p+"V-"+p+"H"+p+"Z")}},diamond:{n:2,f:function(d,c,_){if(u(c))return s;var p=f(1.3*d,2);return l(c,_,"M"+p+",0L0,"+p+"L-"+p+",0L0,-"+p+"Z")}},cross:{n:3,f:function(d,c,_){if(u(c))return s;var p=f(.4*d,2),g=f(1.2*d,2);return l(c,_,"M"+g+","+p+"H"+p+"V"+g+"H-"+p+"V"+p+"H-"+g+"V-"+p+"H-"+p+"V-"+g+"H"+p+"V-"+p+"H"+g+"Z")}},x:{n:4,f:function(d,c,_){if(u(c))return s;var p=f(.8*d/t,2),g="l"+p+","+p,m="l"+p+",-"+p,b="l-"+p+",-"+p,y="l-"+p+","+p;return l(c,_,"M0,"+p+g+m+b+m+b+y+b+y+g+y+g+"Z")}},"triangle-up":{n:5,f:function(d,c,_){if(u(c))return s;var p=f(2*d/o,2);return l(c,_,"M-"+p+","+f(d/2,2)+"H"+p+"L0,-"+f(d,2)+"Z")}},"triangle-down":{n:6,f:function(d,c,_){if(u(c))return s;var p=f(2*d/o,2);return l(c,_,"M-"+p+",-"+f(d/2,2)+"H"+p+"L0,"+f(d,2)+"Z")}},"triangle-left":{n:7,f:function(d,c,_){if(u(c))return s;var p=f(2*d/o,2);return l(c,_,"M"+f(d/2,2)+",-"+p+"V"+p+"L-"+f(d,2)+",0Z")}},"triangle-right":{n:8,f:function(d,c,_){if(u(c))return s;var p=f(2*d/o,2);return l(c,_,"M-"+f(d/2,2)+",-"+p+"V"+p+"L"+f(d,2)+",0Z")}},"triangle-ne":{n:9,f:function(d,c,_){if(u(c))return s;var p=f(.6*d,2),g=f(1.2*d,2);return l(c,_,"M-"+g+",-"+p+"H"+p+"V"+g+"Z")}},"triangle-se":{n:10,f:function(d,c,_){if(u(c))return s;var p=f(.6*d,2),g=f(1.2*d,2);return l(c,_,"M"+p+",-"+g+"V"+p+"H-"+g+"Z")}},"triangle-sw":{n:11,f:function(d,c,_){if(u(c))return s;var p=f(.6*d,2),g=f(1.2*d,2);return l(c,_,"M"+g+","+p+"H-"+p+"V-"+g+"Z")}},"triangle-nw":{n:12,f:function(d,c,_){if(u(c))return s;var p=f(.6*d,2),g=f(1.2*d,2);return l(c,_,"M-"+p+","+g+"V-"+p+"H"+g+"Z")}},pentagon:{n:13,f:function(d,c,_){if(u(c))return s;var p=f(.951*d,2),g=f(.588*d,2),m=f(-d,2),b=f(-.309*d,2);return l(c,_,"M"+p+","+b+"L"+g+","+f(.809*d,2)+"H-"+g+"L-"+p+","+b+"L0,"+m+"Z")}},hexagon:{n:14,f:function(d,c,_){if(u(c))return s;var p=f(d,2),g=f(d/2,2),m=f(d*o/2,2);return l(c,_,"M"+m+",-"+g+"V"+g+"L0,"+p+"L-"+m+","+g+"V-"+g+"L0,-"+p+"Z")}},hexagon2:{n:15,f:function(d,c,_){if(u(c))return s;var p=f(d,2),g=f(d/2,2),m=f(d*o/2,2);return l(c,_,"M-"+g+","+m+"H"+g+"L"+p+",0L"+g+",-"+m+"H-"+g+"L-"+p+",0Z")}},octagon:{n:16,f:function(d,c,_){if(u(c))return s;var p=f(.924*d,2),g=f(.383*d,2);return l(c,_,"M-"+g+",-"+p+"H"+g+"L"+p+",-"+g+"V"+g+"L"+g+","+p+"H-"+g+"L-"+p+","+g+"V-"+g+"Z")}},star:{n:17,f:function(d,c,_){if(u(c))return s;var p=1.4*d,g=f(.225*p,2),m=f(.951*p,2),b=f(.363*p,2),y=f(.588*p,2),M=f(-p,2),h=f(-.309*p,2),E=f(.118*p,2),k=f(.809*p,2);return l(c,_,"M"+g+","+h+"H"+m+"L"+b+","+E+"L"+y+","+k+"L0,"+f(.382*p,2)+"L-"+y+","+k+"L-"+b+","+E+"L-"+m+","+h+"H-"+g+"L0,"+M+"Z")}},hexagram:{n:18,f:function(d,c,_){if(u(c))return s;var p=f(.66*d,2),g=f(.38*d,2),m=f(.76*d,2);return l(c,_,"M-"+m+",0l-"+g+",-"+p+"h"+m+"l"+g+",-"+p+"l"+g+","+p+"h"+m+"l-"+g+","+p+"l"+g+","+p+"h-"+m+"l-"+g+","+p+"l-"+g+",-"+p+"h-"+m+"Z")}},"star-triangle-up":{n:19,f:function(d,c,_){if(u(c))return s;var p=f(d*o*.8,2),g=f(.8*d,2),m=f(1.6*d,2),b=f(4*d,2),y="A "+b+","+b+" 0 0 1 ";return l(c,_,"M-"+p+","+g+y+p+","+g+y+"0,-"+m+y+"-"+p+","+g+"Z")}},"star-triangle-down":{n:20,f:function(d,c,_){if(u(c))return s;var p=f(d*o*.8,2),g=f(.8*d,2),m=f(1.6*d,2),b=f(4*d,2),y="A "+b+","+b+" 0 0 1 ";return l(c,_,"M"+p+",-"+g+y+"-"+p+",-"+g+y+"0,"+m+y+p+",-"+g+"Z")}},"star-square":{n:21,f:function(d,c,_){if(u(c))return s;var p=f(1.1*d,2),g=f(2*d,2),m="A "+g+","+g+" 0 0 1 ";return l(c,_,"M-"+p+",-"+p+m+"-"+p+","+p+m+p+","+p+m+p+",-"+p+m+"-"+p+",-"+p+"Z")}},"star-diamond":{n:22,f:function(d,c,_){if(u(c))return s;var p=f(1.4*d,2),g=f(1.9*d,2),m="A "+g+","+g+" 0 0 1 ";return l(c,_,"M-"+p+",0"+m+"0,"+p+m+p+",0"+m+"0,-"+p+m+"-"+p+",0Z")}},"diamond-tall":{n:23,f:function(d,c,_){if(u(c))return s;var p=f(.7*d,2),g=f(1.4*d,2);return l(c,_,"M0,"+g+"L"+p+",0L0,-"+g+"L-"+p+",0Z")}},"diamond-wide":{n:24,f:function(d,c,_){if(u(c))return s;var p=f(1.4*d,2),g=f(.7*d,2);return l(c,_,"M0,"+g+"L"+p+",0L0,-"+g+"L-"+p+",0Z")}},hourglass:{n:25,f:function(d,c,_){if(u(c))return s;var p=f(d,2);return l(c,_,"M"+p+","+p+"H-"+p+"L"+p+",-"+p+"H-"+p+"Z")},noDot:!0},bowtie:{n:26,f:function(d,c,_){if(u(c))return s;var p=f(d,2);return l(c,_,"M"+p+","+p+"V-"+p+"L-"+p+","+p+"V-"+p+"Z")},noDot:!0},"circle-cross":{n:27,f:function(d,c,_){if(u(c))return s;var p=f(d,2);return l(c,_,"M0,"+p+"V-"+p+"M"+p+",0H-"+p+"M"+p+",0A"+p+","+p+" 0 1,1 0,-"+p+"A"+p+","+p+" 0 0,1 "+p+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(d,c,_){if(u(c))return s;var p=f(d,2),g=f(d/t,2);return l(c,_,"M"+g+","+g+"L-"+g+",-"+g+"M"+g+",-"+g+"L-"+g+","+g+"M"+p+",0A"+p+","+p+" 0 1,1 0,-"+p+"A"+p+","+p+" 0 0,1 "+p+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(d,c,_){if(u(c))return s;var p=f(d,2);return l(c,_,"M0,"+p+"V-"+p+"M"+p+",0H-"+p+"M"+p+","+p+"H-"+p+"V-"+p+"H"+p+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(d,c,_){if(u(c))return s;var p=f(d,2);return l(c,_,"M"+p+","+p+"L-"+p+",-"+p+"M"+p+",-"+p+"L-"+p+","+p+"M"+p+","+p+"H-"+p+"V-"+p+"H"+p+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(d,c,_){if(u(c))return s;var p=f(1.3*d,2);return l(c,_,"M"+p+",0L0,"+p+"L-"+p+",0L0,-"+p+"ZM0,-"+p+"V"+p+"M-"+p+",0H"+p)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(d,c,_){if(u(c))return s;var p=f(1.3*d,2),g=f(.65*d,2);return l(c,_,"M"+p+",0L0,"+p+"L-"+p+",0L0,-"+p+"ZM-"+g+",-"+g+"L"+g+","+g+"M-"+g+","+g+"L"+g+",-"+g)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(d,c,_){if(u(c))return s;var p=f(1.4*d,2);return l(c,_,"M0,"+p+"V-"+p+"M"+p+",0H-"+p)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(d,c,_){if(u(c))return s;var p=f(d,2);return l(c,_,"M"+p+","+p+"L-"+p+",-"+p+"M"+p+",-"+p+"L-"+p+","+p)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(d,c,_){if(u(c))return s;var p=f(1.2*d,2),g=f(.85*d,2);return l(c,_,"M0,"+p+"V-"+p+"M"+p+",0H-"+p+"M"+g+","+g+"L-"+g+",-"+g+"M"+g+",-"+g+"L-"+g+","+g)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(d,c,_){if(u(c))return s;var p=f(d/2,2),g=f(d,2);return l(c,_,"M"+p+","+g+"V-"+g+"M"+(p-g)+",-"+g+"V"+g+"M"+g+","+p+"H-"+g+"M-"+g+","+(p-g)+"H"+g)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(d,c,_){if(u(c))return s;var p=f(1.2*d,2),g=f(1.6*d,2),m=f(.8*d,2);return l(c,_,"M-"+p+","+m+"L0,0M"+p+","+m+"L0,0M0,-"+g+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(d,c,_){if(u(c))return s;var p=f(1.2*d,2),g=f(1.6*d,2),m=f(.8*d,2);return l(c,_,"M-"+p+",-"+m+"L0,0M"+p+",-"+m+"L0,0M0,"+g+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(d,c,_){if(u(c))return s;var p=f(1.2*d,2),g=f(1.6*d,2),m=f(.8*d,2);return l(c,_,"M"+m+","+p+"L0,0M"+m+",-"+p+"L0,0M-"+g+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(d,c,_){if(u(c))return s;var p=f(1.2*d,2),g=f(1.6*d,2),m=f(.8*d,2);return l(c,_,"M-"+m+","+p+"L0,0M-"+m+",-"+p+"L0,0M"+g+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(d,c,_){if(u(c))return s;var p=f(1.4*d,2);return l(c,_,"M"+p+",0H-"+p)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(d,c,_){if(u(c))return s;var p=f(1.4*d,2);return l(c,_,"M0,"+p+"V-"+p)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(d,c,_){if(u(c))return s;var p=f(d,2);return l(c,_,"M"+p+",-"+p+"L-"+p+","+p)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(d,c,_){if(u(c))return s;var p=f(d,2);return l(c,_,"M"+p+","+p+"L-"+p+",-"+p)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(d,c,_){if(u(c))return s;var p=f(d,2);return l(c,_,"M0,0L-"+p+","+f(2*d,2)+"H"+p+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(d,c,_){if(u(c))return s;var p=f(d,2);return l(c,_,"M0,0L-"+p+",-"+f(2*d,2)+"H"+p+"Z")},noDot:!0},"arrow-left":{n:47,f:function(d,c,_){if(u(c))return s;var p=f(2*d,2),g=f(d,2);return l(c,_,"M0,0L"+p+",-"+g+"V"+g+"Z")},noDot:!0},"arrow-right":{n:48,f:function(d,c,_){if(u(c))return s;var p=f(2*d,2),g=f(d,2);return l(c,_,"M0,0L-"+p+",-"+g+"V"+g+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(d,c,_){if(u(c))return s;var p=f(d,2);return l(c,_,"M-"+p+",0H"+p+"M0,0L-"+p+","+f(2*d,2)+"H"+p+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(d,c,_){if(u(c))return s;var p=f(d,2);return l(c,_,"M-"+p+",0H"+p+"M0,0L-"+p+",-"+f(2*d,2)+"H"+p+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(d,c,_){if(u(c))return s;var p=f(2*d,2),g=f(d,2);return l(c,_,"M0,-"+g+"V"+g+"M0,0L"+p+",-"+g+"V"+g+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(d,c,_){if(u(c))return s;var p=f(2*d,2),g=f(d,2);return l(c,_,"M0,-"+g+"V"+g+"M0,0L-"+p+",-"+g+"V"+g+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(d,c,_){if(u(c))return s;var p=r/2.5,g=2*d*i(p),m=2*d*a(p);return l(c,_,"M0,0L"+-g+","+m+"L"+g+","+m+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(d,c,_){if(u(c))return s;var p=r/4,g=2*d*i(p),m=2*d*a(p);return l(c,_,"M0,0L"+-g+","+m+"A "+2*d+","+2*d+" 0 0 1 "+g+","+m+"Z")},backoff:.4,noDot:!0}}},97644:function(C){"use strict";C.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},14880:function(C,A,e){"use strict";var v=e(38248),w=e(24040),n=e(54460),T=e(3400),x=e(93792);function f(s,t,o,r){var i=t["error_"+r]||{},a=[];if(i.visible&&["linear","log"].indexOf(o.type)!==-1){for(var u=x(i),l=0;l<s.length;l++){var d=s[l],c=d.i;if(c===void 0)c=l;else if(c===null)continue;var _=d[r];if(v(o.c2l(_))){var p=u(_,c);if(v(p[0])&&v(p[1])){var g=d[r+"s"]=_-p[0],m=d[r+"h"]=_+p[1];a.push(g,m)}}}var b=o._id,y=t._extremes[b],M=n.findExtremes(o,a,T.extendFlat({tozero:y.opts.tozero},{padded:!0}));y.min=y.min.concat(M.min),y.max=y.max.concat(M.max)}}C.exports=function(s){for(var t=s.calcdata,o=0;o<t.length;o++){var r=t[o],i=r[0].trace;if(i.visible===!0&&w.traceIs(i,"errorBarsOK")){var a=n.getFromId(s,i.xaxis),u=n.getFromId(s,i.yaxis);f(r,i,a,"x"),f(r,i,u,"y")}}}},93792:function(C){"use strict";function A(e,v){return e==="percent"?function(w){return Math.abs(w*v/100)}:e==="constant"?function(){return Math.abs(v)}:e==="sqrt"?function(w){return Math.sqrt(Math.abs(w))}:void 0}C.exports=function(e){var v=e.type,w=e.symmetric;if(v==="data"){var n=e.array||[];if(w)return function(s,t){var o=+n[t];return[o,o]};var T=e.arrayminus||[];return function(s,t){var o=+n[t],r=+T[t];return isNaN(o)&&isNaN(r)?[NaN,NaN]:[r||0,o||0]}}var x=A(v,e.value),f=A(v,e.valueminus);return w||e.valueminus===void 0?function(s){var t=x(s);return[t,t]}:function(s){return[f(s),x(s)]}}},65200:function(C,A,e){"use strict";var v=e(38248),w=e(24040),n=e(3400),T=e(31780),x=e(97644);C.exports=function(f,s,t,o){var r="error_"+o.axis,i=T.newContainer(s,r),a=f[r]||{};function u(_,p){return n.coerce(a,i,x,_,p)}if(u("visible",a.array!==void 0||a.value!==void 0||a.type==="sqrt")!==!1){var l=u("type","array"in a?"data":"percent"),d=!0;l!=="sqrt"&&(d=u("symmetric",!((l==="data"?"arrayminus":"valueminus")in a))),l==="data"?(u("array"),u("traceref"),d||(u("arrayminus"),u("tracerefminus"))):l!=="percent"&&l!=="constant"||(u("value"),d||u("valueminus"));var c="copy_"+o.inherit+"style";o.inherit&&(s["error_"+o.inherit]||{}).visible&&u(c,!(a.color||v(a.thickness)||v(a.width))),o.inherit&&i[c]||(u("color",t),u("thickness"),u("width",w.traceIs(s,"gl3d")?0:4))}}},64968:function(C,A,e){"use strict";var v=e(3400),w=e(67824).overrideAll,n=e(97644),T={error_x:v.extendFlat({},n),error_y:v.extendFlat({},n)};delete T.error_x.copy_zstyle,delete T.error_y.copy_zstyle,delete T.error_y.copy_ystyle;var x={error_x:v.extendFlat({},n),error_y:v.extendFlat({},n),error_z:v.extendFlat({},n)};delete x.error_x.copy_ystyle,delete x.error_y.copy_ystyle,delete x.error_z.copy_ystyle,delete x.error_z.copy_zstyle,C.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:T,bar:T,histogram:T,scatter3d:w(x,"calc","nested"),scattergl:w(T,"calc","nested")}},supplyDefaults:e(65200),calc:e(14880),makeComputeError:e(93792),plot:e(78512),style:e(92036),hoverInfo:function(f,s,t){(s.error_y||{}).visible&&(t.yerr=f.yh-f.y,s.error_y.symmetric||(t.yerrneg=f.y-f.ys)),(s.error_x||{}).visible&&(t.xerr=f.xh-f.x,s.error_x.symmetric||(t.xerrneg=f.x-f.xs))}}},78512:function(C,A,e){"use strict";var v=e(33428),w=e(38248),n=e(43616),T=e(43028);C.exports=function(x,f,s,t){var o=s.xaxis,r=s.yaxis,i=t&&t.duration>0,a=x._context.staticPlot;f.each(function(u){var l,d=u[0].trace,c=d.error_x||{},_=d.error_y||{};d.ids&&(l=function(b){return b.id});var p=T.hasMarkers(d)&&d.marker.maxdisplayed>0;_.visible||c.visible||(u=[]);var g=v.select(this).selectAll("g.errorbar").data(u,l);if(g.exit().remove(),u.length){c.visible||g.selectAll("path.xerror").remove(),_.visible||g.selectAll("path.yerror").remove(),g.style("opacity",1);var m=g.enter().append("g").classed("errorbar",!0);i&&m.style("opacity",0).transition().duration(t.duration).style("opacity",1),n.setClipUrl(g,s.layerClipId,x),g.each(function(b){var y=v.select(this),M=function(L,O,N){var V={x:O.c2p(L.x),y:N.c2p(L.y)};return L.yh!==void 0&&(V.yh=N.c2p(L.yh),V.ys=N.c2p(L.ys),w(V.ys)||(V.noYS=!0,V.ys=N.c2p(L.ys,!0))),L.xh!==void 0&&(V.xh=O.c2p(L.xh),V.xs=O.c2p(L.xs),w(V.xs)||(V.noXS=!0,V.xs=O.c2p(L.xs,!0))),V}(b,o,r);if(!p||b.vis){var h,E=y.select("path.yerror");if(_.visible&&w(M.x)&&w(M.yh)&&w(M.ys)){var k=_.width;h="M"+(M.x-k)+","+M.yh+"h"+2*k+"m-"+k+",0V"+M.ys,M.noYS||(h+="m-"+k+",0h"+2*k),E.size()?i&&(E=E.transition().duration(t.duration).ease(t.easing)):E=y.append("path").style("vector-effect",a?"none":"non-scaling-stroke").classed("yerror",!0),E.attr("d",h)}else E.remove();var D=y.select("path.xerror");if(c.visible&&w(M.y)&&w(M.xh)&&w(M.xs)){var P=(c.copy_ystyle?_:c).width;h="M"+M.xh+","+(M.y-P)+"v"+2*P+"m0,-"+P+"H"+M.xs,M.noXS||(h+="m0,-"+P+"v"+2*P),D.size()?i&&(D=D.transition().duration(t.duration).ease(t.easing)):D=y.append("path").style("vector-effect",a?"none":"non-scaling-stroke").classed("xerror",!0),D.attr("d",h)}else D.remove()}})}})}},92036:function(C,A,e){"use strict";var v=e(33428),w=e(76308);C.exports=function(n){n.each(function(T){var x=T[0].trace,f=x.error_y||{},s=x.error_x||{},t=v.select(this);t.selectAll("path.yerror").style("stroke-width",f.thickness+"px").call(w.stroke,f.color),s.copy_ystyle&&(s=f),t.selectAll("path.xerror").style("stroke-width",s.thickness+"px").call(w.stroke,s.color)})}},55756:function(C,A,e){"use strict";var v=e(25376),w=e(65460).hoverlabel,n=e(92880).extendFlat;C.exports={hoverlabel:{bgcolor:n({},w.bgcolor,{arrayOk:!0}),bordercolor:n({},w.bordercolor,{arrayOk:!0}),font:v({arrayOk:!0,editType:"none"}),align:n({},w.align,{arrayOk:!0}),namelength:n({},w.namelength,{arrayOk:!0}),editType:"none"}}},55056:function(C,A,e){"use strict";var v=e(3400),w=e(24040);function n(T,x,f,s){s=s||v.identity,Array.isArray(T)&&(x[0][f]=s(T))}C.exports=function(T){var x=T.calcdata,f=T._fullLayout;function s(a){return function(u){return v.coerceHoverinfo({hoverinfo:u},{_module:a._module},f)}}for(var t=0;t<x.length;t++){var o=x[t],r=o[0].trace;if(!w.traceIs(r,"pie-like")){var i=w.traceIs(r,"2dMap")?n:v.fillArray;i(r.hoverinfo,o,"hi",s(r)),r.hovertemplate&&i(r.hovertemplate,o,"ht"),r.hoverlabel&&(i(r.hoverlabel.bgcolor,o,"hbg"),i(r.hoverlabel.bordercolor,o,"hbc"),i(r.hoverlabel.font.size,o,"hts"),i(r.hoverlabel.font.color,o,"htc"),i(r.hoverlabel.font.family,o,"htf"),i(r.hoverlabel.font.weight,o,"htw"),i(r.hoverlabel.font.style,o,"hty"),i(r.hoverlabel.font.variant,o,"htv"),i(r.hoverlabel.namelength,o,"hnl"),i(r.hoverlabel.align,o,"hta"))}}}},62376:function(C,A,e){"use strict";var v=e(24040),w=e(83292).hover;C.exports=function(n,T,x){var f=v.getComponentMethod("annotations","onClick")(n,n._hoverdata);function s(){n.emit("plotly_click",{points:n._hoverdata,event:T})}x!==void 0&&w(n,T,x,!0),n._hoverdata&&T&&T.target&&(f&&f.then?f.then(s):s(),T.stopImmediatePropagation&&T.stopImmediatePropagation())}},92456:function(C){"use strict";C.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},95448:function(C,A,e){"use strict";var v=e(3400),w=e(55756),n=e(16132);C.exports=function(T,x,f,s){var t=v.extendFlat({},s.hoverlabel);x.hovertemplate&&(t.namelength=-1),n(T,x,function(o,r){return v.coerce(T,x,w,o,r)},t)}},10624:function(C,A,e){"use strict";var v=e(3400);A.getSubplot=function(s){return s.subplot||s.xaxis+s.yaxis||s.geo},A.isTraceInSubplots=function(s,t){if(s.type==="splom"){for(var o=s.xaxes||[],r=s.yaxes||[],i=0;i<o.length;i++)for(var a=0;a<r.length;a++)if(t.indexOf(o[i]+r[a])!==-1)return!0;return!1}return t.indexOf(A.getSubplot(s))!==-1},A.flat=function(s,t){for(var o=new Array(s.length),r=0;r<s.length;r++)o[r]=t;return o},A.p2c=function(s,t){for(var o=new Array(s.length),r=0;r<s.length;r++)o[r]=s[r].p2c(t);return o},A.getDistanceFunction=function(s,t,o,r){return s==="closest"?r||A.quadrature(t,o):s.charAt(0)==="x"?t:o},A.getClosest=function(s,t,o){if(o.index!==!1)o.index>=0&&o.index<s.length?o.distance=0:o.index=!1;else for(var r=0;r<s.length;r++){var i=t(s[r]);i<=o.distance&&(o.index=r,o.distance=i)}return o},A.inbox=function(s,t,o){return s*t<0||s===0?o:1/0},A.quadrature=function(s,t){return function(o){var r=s(o),i=t(o);return Math.sqrt(r*r+i*i)}},A.makeEventData=function(s,t,o){var r="index"in s?s.index:s.pointNumber,i={data:t._input,fullData:t,curveNumber:t.index,pointNumber:r};if(t._indexToPoints){var a=t._indexToPoints[r];a.length===1?i.pointIndex=a[0]:i.pointIndices=a}else i.pointIndex=r;return t._module.eventData?i=t._module.eventData(i,s,t,o,r):("xVal"in s?i.x=s.xVal:"x"in s&&(i.x=s.x),"yVal"in s?i.y=s.yVal:"y"in s&&(i.y=s.y),s.xa&&(i.xaxis=s.xa),s.ya&&(i.yaxis=s.ya),s.zLabelVal!==void 0&&(i.z=s.zLabelVal)),A.appendArrayPointValue(i,t,r),i},A.appendArrayPointValue=function(s,t,o){var r=t._arrayAttrs;if(r)for(var i=0;i<r.length;i++){var a=r[i],u=n(a);if(s[u]===void 0){var l=T(v.nestedProperty(t,a).get(),o);l!==void 0&&(s[u]=l)}}},A.appendArrayMultiPointValues=function(s,t,o){var r=t._arrayAttrs;if(r)for(var i=0;i<r.length;i++){var a=r[i],u=n(a);if(s[u]===void 0){for(var l=v.nestedProperty(t,a).get(),d=new Array(o.length),c=0;c<o.length;c++)d[c]=T(l,o[c]);s[u]=d}}};var w={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function n(s){return w[s]||s}function T(s,t){return Array.isArray(t)?Array.isArray(s)&&Array.isArray(s[t[0]])?s[t[0]][t[1]]:void 0:s[t]}var x={x:!0,y:!0},f={"x unified":!0,"y unified":!0};A.isUnifiedHover=function(s){return typeof s=="string"&&!!f[s]},A.isXYhover=function(s){return typeof s=="string"&&!!x[s]}},83292:function(C,A,e){"use strict";var v=e(33428),w=e(38248),n=e(49760),T=e(3400),x=T.pushUnique,f=T.strTranslate,s=T.strRotate,t=e(95924),o=e(72736),r=e(72213),i=e(43616),a=e(76308),u=e(86476),l=e(54460),d=e(24040),c=e(10624),_=e(92456),p=e(77864),g=e(31140),m=_.YANGLE,b=Math.PI*m/180,y=1/Math.sin(b),M=Math.cos(b),h=Math.sin(b),E=_.HOVERARROWSIZE,k=_.HOVERTEXTPAD,D={box:!0,ohlc:!0,violin:!0,candlestick:!0},P={scatter:!0,scattergl:!0,splom:!0};function L(K,oe){return K.distance-oe.distance}function O(K){return[K.trace.index,K.index,K.x0,K.y0,K.name,K.attr,K.xa?K.xa._id:"",K.ya?K.ya._id:""].join(",")}A.hover=function(K,oe,le,se){K=T.getGraphDiv(K);var de=oe.target;T.throttle(K._fullLayout._uid+_.HOVERID,_.HOVERMINTIME,function(){(function(be,_e,xe,ve,ye){xe||(xe="xy");var me,Me,Ae,ce=Array.isArray(xe)?xe:[xe],ae=be._fullLayout,pe=ae.hoversubplots,De=ae._plots||[],ke=De[xe],Ee=ae._has("cartesian"),Ie=_e.hovermode||ae.hovermode,Re=(Ie||"").charAt(0)==="x",Ne=(Ie||"").charAt(0)==="y";if(Ee&&(Re||Ne)&&pe==="axis"){for(var ge=ce.length,we=0;we<ge;we++)if(De[me=ce[we]]){Me=l.getFromId(be,me,"x"),Ae=l.getFromId(be,me,"y");var Ce=(Re?Me:Ae)._subplotsWith;if(Ce&&Ce.length)for(var ze=0;ze<Ce.length;ze++)x(ce,Ce[ze])}}if(ke&&pe!=="single"){var Pe=ke.overlays.map(function(Bt){return Bt.id});ce=ce.concat(Pe)}for(var Ue=ce.length,Ge=new Array(Ue),Xe=new Array(Ue),st=!1,at=0;at<Ue;at++)if(De[me=ce[at]])st=!0,Ge[at]=De[me].xaxis,Xe[at]=De[me].yaxis;else{if(!ae[me]||!ae[me]._subplot)return void T.warn("Unrecognized subplot: "+me);var vt=ae[me]._subplot;Ge[at]=vt.xaxis,Xe[at]=vt.yaxis}if(Ie&&!st&&(Ie="closest"),["x","y","closest","x unified","y unified"].indexOf(Ie)===-1||!be.calcdata||be.querySelector(".zoombox")||be._dragging)return u.unhoverRaw(be,_e);var xt=ae.hoverdistance;xt===-1&&(xt=1/0);var gt=ae.spikedistance;gt===-1&&(gt=1/0);var rt,tt,Mt,Pt,Rt,St,Ye,Ke,Ve,$e,lt,it,Be,je=[],ot=[],Ze={hLinePoint:null,vLinePoint:null},dt=!1;if(Array.isArray(_e))for(Ie="array",Mt=0;Mt<_e.length;Mt++)(Rt=be.calcdata[_e[Mt].curveNumber||0])&&(St=Rt[0].trace,Rt[0].trace.hoverinfo!=="skip"&&(ot.push(Rt),St.orientation==="h"&&(dt=!0)));else{var mt,yt,ht=be.calcdata.slice();for(ht.sort(function(Bt,Qt){return(Bt[0].trace.zorder||0)-(Qt[0].trace.zorder||0)}),Pt=0;Pt<ht.length;Pt++)Rt=ht[Pt],(St=Rt[0].trace).hoverinfo!=="skip"&&c.isTraceInSubplots(St,ce)&&(ot.push(Rt),St.orientation==="h"&&(dt=!0));if(ye){if(t.triggerHandler(be,"plotly_beforehover",_e)===!1)return;var kt=ye.getBoundingClientRect();mt=_e.clientX-kt.left,yt=_e.clientY-kt.top,ae._calcInverseTransform(be);var _t=T.apply3DTransform(ae._invTransform)(mt,yt);if(mt=_t[0],yt=_t[1],mt<0||mt>Ge[0]._length||yt<0||yt>Xe[0]._length)return u.unhoverRaw(be,_e)}else mt="xpx"in _e?_e.xpx:Ge[0]._length/2,yt="ypx"in _e?_e.ypx:Xe[0]._length/2;if(_e.pointerX=mt+Ge[0]._offset,_e.pointerY=yt+Xe[0]._offset,rt="xval"in _e?c.flat(ce,_e.xval):c.p2c(Ge,mt),tt="yval"in _e?c.flat(ce,_e.yval):c.p2c(Xe,yt),!w(rt[0])||!w(tt[0]))return T.warn("Fx.hover failed",_e,be),u.unhoverRaw(be,_e)}var Et=1/0;function Lt(Bt,Qt){for(Pt=0;Pt<ot.length;Pt++)if((Rt=ot[Pt])&&Rt[0]&&Rt[0].trace&&(St=Rt[0].trace).visible===!0&&St._length!==0&&["carpet","contourcarpet"].indexOf(St._module.name)===-1){if(Ve=Ie,c.isUnifiedHover(Ve)&&(Ve=Ve.charAt(0)),St.type==="splom"?Ye=ce[Ke=0]:(Ye=c.getSubplot(St),Ke=ce.indexOf(Ye)),it={cd:Rt,trace:St,xa:Ge[Ke],ya:Xe[Ke],maxHoverDistance:xt,maxSpikeDistance:gt,index:!1,distance:Math.min(Et,xt),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:a.defaultLine,name:St.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},ae[Ye]&&(it.subplot=ae[Ye]._subplot),ae._splomScenes&&ae._splomScenes[St.uid]&&(it.scene=ae._splomScenes[St.uid]),Ve==="array"){var fn=_e[Pt];"pointNumber"in fn?(it.index=fn.pointNumber,Ve="closest"):(Ve="","xval"in fn&&($e=fn.xval,Ve="x"),"yval"in fn&&(lt=fn.yval,Ve=Ve?"closest":"y"))}else Bt!==void 0&&Qt!==void 0?($e=Bt,lt=Qt):($e=rt[Ke],lt=tt[Ke]);if(Be=je.length,xt!==0)if(St._module&&St._module.hoverPoints){var dn=St._module.hoverPoints(it,$e,lt,Ve,{finiteRange:!0,hoverLayer:ae._hoverlayer,hoversubplots:pe,gd:be});if(dn)for(var xn,sn=0;sn<dn.length;sn++)xn=dn[sn],w(xn.x0)&&w(xn.y0)&&je.push(z(xn,Ie))}else T.log("Unrecognized trace type in hover:",St);if(Ie==="closest"&&je.length>Be&&(je.splice(0,Be),Et=je[0].distance),Ee&&gt!==0&&je.length===0){it.distance=gt,it.index=!1;var $t=St._module.hoverPoints(it,$e,lt,"closest",{hoverLayer:ae._hoverlayer});if($t&&($t=$t.filter(function(Rn){return Rn.spikeDistance<=gt})),$t&&$t.length){var Yt,rn=$t.filter(function(Rn){return Rn.xa.showspikes&&Rn.xa.spikesnap!=="hovered data"});if(rn.length){var ln=rn[0];w(ln.x0)&&w(ln.y0)&&(Yt=Ft(ln),(!Ze.vLinePoint||Ze.vLinePoint.spikeDistance>Yt.spikeDistance)&&(Ze.vLinePoint=Yt))}var An=$t.filter(function(Rn){return Rn.ya.showspikes&&Rn.ya.spikesnap!=="hovered data"});if(An.length){var En=An[0];w(En.x0)&&w(En.y0)&&(Yt=Ft(En),(!Ze.hLinePoint||Ze.hLinePoint.spikeDistance>Yt.spikeDistance)&&(Ze.hLinePoint=Yt))}}}}}function Ot(Bt,Qt,fn){for(var dn,xn=null,sn=1/0,$t=0;$t<Bt.length;$t++)Me&&Me._id!==Bt[$t].xa._id||Ae&&Ae._id!==Bt[$t].ya._id||(dn=Bt[$t].spikeDistance,fn&&$t===0&&(dn=-1/0),dn<=sn&&dn<=Qt&&(xn=Bt[$t],sn=dn));return xn}function Ft(Bt){return Bt?{xa:Bt.xa,ya:Bt.ya,x:Bt.xSpike!==void 0?Bt.xSpike:(Bt.x0+Bt.x1)/2,y:Bt.ySpike!==void 0?Bt.ySpike:(Bt.y0+Bt.y1)/2,distance:Bt.distance,spikeDistance:Bt.spikeDistance,curveNumber:Bt.trace.index,color:Bt.color,pointNumber:Bt.index}:null}Lt();var Zt={fullLayout:ae,container:ae._hoverlayer,event:_e},Ht=be._spikepoints,Ut={vLinePoint:Ze.vLinePoint,hLinePoint:Ze.hLinePoint};be._spikepoints=Ut;var Wt=function(){var Bt=je.filter(function(fn){return Me&&Me._id===fn.xa._id&&Ae&&Ae._id===fn.ya._id}),Qt=je.filter(function(fn){return!(Me&&Me._id===fn.xa._id&&Ae&&Ae._id===fn.ya._id)});Bt.sort(L),Qt.sort(L),je=function(fn,dn){for(var xn=dn.charAt(0),sn=[],$t=[],Yt=[],rn=0;rn<fn.length;rn++){var ln=fn[rn];d.traceIs(ln.trace,"bar-like")||d.traceIs(ln.trace,"box-violin")?Yt.push(ln):ln.trace[xn+"period"]?$t.push(ln):sn.push(ln)}return sn.concat($t).concat(Yt)}(je=Bt.concat(Qt),Ie)};Wt();var nn=Ie.charAt(0),On=(nn==="x"||nn==="y")&&je[0]&&P[je[0].trace.type];if(Ee&&gt!==0&&je.length!==0){var kn=Ot(je.filter(function(Bt){return Bt.ya.showspikes}),gt,On);Ze.hLinePoint=Ft(kn);var gn=Ot(je.filter(function(Bt){return Bt.xa.showspikes}),gt,On);Ze.vLinePoint=Ft(gn)}if(je.length===0){var Jt=u.unhoverRaw(be,_e);return!Ee||Ze.hLinePoint===null&&Ze.vLinePoint===null||U(Ht)&&H(be,Ze,Zt),Jt}if(Ee&&U(Ht)&&H(be,Ze,Zt),c.isXYhover(Ve)&&je[0].length!==0&&je[0].trace.type!=="splom"){var un=je[0],tn=(je=D[un.trace.type]?je.filter(function(Bt){return Bt.trace.index===un.trace.index}):[un]).length;Lt(ee("x",un,ae),ee("y",un,ae));var hn,bn=[],wn={},Pn=0,Cn=function(Bt){var Qt=D[Bt.trace.type]?O(Bt):Bt.trace.index;if(wn[Qt]){var fn=wn[Qt]-1,dn=bn[fn];fn>0&&Math.abs(Bt.distance)<Math.abs(dn.distance)&&(bn[fn]=Bt)}else Pn++,wn[Qt]=Pn,bn.push(Bt)};for(hn=0;hn<tn;hn++)Cn(je[hn]);for(hn=je.length-1;hn>tn-1;hn--)Cn(je[hn]);je=bn,Wt()}var Mn=be._hoverdata,Bn=[],Nn=J(be),rr=Q(be);for(Mt=0;Mt<je.length;Mt++){var Yn=je[Mt],ir=c.makeEventData(Yn,Yn.trace,Yn.cd);if(Yn.hovertemplate!==!1){var Zn=!1;Yn.cd[Yn.index]&&Yn.cd[Yn.index].ht&&(Zn=Yn.cd[Yn.index].ht),Yn.hovertemplate=Zn||Yn.trace.hovertemplate||!1}if(Yn.xa&&Yn.ya){var ur=Yn.x0+Yn.xa._offset,en=Yn.x1+Yn.xa._offset,on=Yn.y0+Yn.ya._offset,Dn=Yn.y1+Yn.ya._offset,yn=Math.min(ur,en),Ln=Math.max(ur,en),Wn=Math.min(on,Dn),Un=Math.max(on,Dn);ir.bbox={x0:yn+rr,x1:Ln+rr,y0:Wn+Nn,y1:Un+Nn}}Yn.eventData=[ir],Bn.push(ir)}be._hoverdata=Bn;var Xn=Ie==="y"&&(ot.length>1||je.length>1)||Ie==="closest"&&dt&&je.length>1,pr=a.combine(ae.plot_bgcolor||a.background,ae.paper_bgcolor),Kt=V(je,{gd:be,hovermode:Ie,rotateLabels:Xn,bgColor:pr,container:ae._hoverlayer,outerContainer:ae._paper.node(),commonLabelOpts:ae.hoverlabel,hoverdistance:ae.hoverdistance}),mn=Kt.hoverLabels;if(c.isUnifiedHover(Ie)||(function(Bt,Qt,fn,dn){var xn,sn,$t,Yt,rn,ln,An,En=Qt?"xa":"ya",Rn=Qt?"ya":"xa",jn=0,Qn=1,qn=Bt.size(),Kn=new Array(qn),tr=0,Jn=dn.minX,hr=dn.maxX,br=dn.minY,gr=dn.maxY,ar=function(Rr){return Rr*fn._invScaleX},mr=function(Rr){return Rr*fn._invScaleY};function kr(Rr){var so=Rr[0],aa=Rr[Rr.length-1];if(sn=so.pmin-so.pos-so.dp+so.size,$t=aa.pos+aa.dp+aa.size-so.pmax,sn>.01){for(rn=Rr.length-1;rn>=0;rn--)Rr[rn].dp+=sn;xn=!1}if(!($t<.01)){if(sn<-.01){for(rn=Rr.length-1;rn>=0;rn--)Rr[rn].dp-=$t;xn=!1}if(xn){var ro=0;for(Yt=0;Yt<Rr.length;Yt++)(ln=Rr[Yt]).pos+ln.dp+ln.size>so.pmax&&ro++;for(Yt=Rr.length-1;Yt>=0&&!(ro<=0);Yt--)(ln=Rr[Yt]).pos>so.pmax-1&&(ln.del=!0,ro--);for(Yt=0;Yt<Rr.length&&!(ro<=0);Yt++)if((ln=Rr[Yt]).pos<so.pmin+1)for(ln.del=!0,ro--,$t=2*ln.size,rn=Rr.length-1;rn>=0;rn--)Rr[rn].dp-=$t;for(Yt=Rr.length-1;Yt>=0&&!(ro<=0);Yt--)(ln=Rr[Yt]).pos+ln.dp+ln.size>so.pmax&&(ln.del=!0,ro--)}}}for(Bt.each(function(Rr){var so=Rr[En],aa=Rr[Rn],ro=so._id.charAt(0)==="x",Za=so.range;tr===0&&Za&&Za[0]>Za[1]!==ro&&(Qn=-1);var fs=0,_o=ro?fn.width:fn.height;if(fn.hovermode==="x"||fn.hovermode==="y"){var Ra,Fa,hs=j(Rr,Qt),sa=Rr.anchor,ya=sa==="end"?-1:1;if(sa==="middle")Fa=(Ra=Rr.crossPos+(ro?mr(hs.y-Rr.by/2):ar(Rr.bx/2+Rr.tx2width/2)))+(ro?mr(Rr.by):ar(Rr.bx));else if(ro)Fa=(Ra=Rr.crossPos+mr(E+hs.y)-mr(Rr.by/2-E))+mr(Rr.by);else{var xa=ar(ya*E+hs.x),gi=xa+ar(ya*Rr.bx);Ra=Rr.crossPos+Math.min(xa,gi),Fa=Rr.crossPos+Math.max(xa,gi)}ro?br!==void 0&&gr!==void 0&&Math.min(Fa,gr)-Math.max(Ra,br)>1&&(aa.side==="left"?(fs=aa._mainLinePosition,_o=fn.width):_o=aa._mainLinePosition):Jn!==void 0&&hr!==void 0&&Math.min(Fa,hr)-Math.max(Ra,Jn)>1&&(aa.side==="top"?(fs=aa._mainLinePosition,_o=fn.height):_o=aa._mainLinePosition)}Kn[tr++]=[{datum:Rr,traceIndex:Rr.trace.index,dp:0,pos:Rr.pos,posref:Rr.posref,size:Rr.by*(ro?y:1)/2,pmin:fs,pmax:_o}]}),Kn.sort(function(Rr,so){return Rr[0].posref-so[0].posref||Qn*(so[0].traceIndex-Rr[0].traceIndex)});!xn&&jn<=qn;){for(jn++,xn=!0,Yt=0;Yt<Kn.length-1;){var Pr=Kn[Yt],wi=Kn[Yt+1],Ti=Pr[Pr.length-1],Qi=wi[0];if((sn=Ti.pos+Ti.dp+Ti.size-Qi.pos-Qi.dp+Qi.size)>.01&&Ti.pmin===Qi.pmin&&Ti.pmax===Qi.pmax){for(rn=wi.length-1;rn>=0;rn--)wi[rn].dp+=sn;for(Pr.push.apply(Pr,wi),Kn.splice(Yt+1,1),An=0,rn=Pr.length-1;rn>=0;rn--)An+=Pr[rn].dp;for($t=An/Pr.length,rn=Pr.length-1;rn>=0;rn--)Pr[rn].dp-=$t;xn=!1}else Yt++}Kn.forEach(kr)}for(Yt=Kn.length-1;Yt>=0;Yt--){var bi=Kn[Yt];for(rn=bi.length-1;rn>=0;rn--){var zi=bi[rn],Oo=zi.datum;Oo.offset=zi.dp,Oo.del=zi.del}}}(mn,Xn,ae,Kt.commonLabelBoundingBox),Z(mn,Xn,ae._invScaleX,ae._invScaleY)),ye&&ye.tagName){var Dt=d.getComponentMethod("annotations","hasClickToShow")(be,Bn);r(v.select(ye),Dt?"pointer":"")}ye&&!ve&&function(Bt,Qt,fn){if(!fn||fn.length!==Bt._hoverdata.length)return!0;for(var dn=fn.length-1;dn>=0;dn--){var xn=fn[dn],sn=Bt._hoverdata[dn];if(xn.curveNumber!==sn.curveNumber||String(xn.pointNumber)!==String(sn.pointNumber)||String(xn.pointNumbers)!==String(sn.pointNumbers))return!0}return!1}(be,0,Mn)&&(Mn&&be.emit("plotly_unhover",{event:_e,points:Mn}),be.emit("plotly_hover",{event:_e,points:be._hoverdata,xaxes:Ge,yaxes:Xe,xvals:rt,yvals:tt}))})(K,oe,le,se,de)})},A.loneHover=function(K,oe){var le=!0;Array.isArray(K)||(le=!1,K=[K]);var se=oe.gd,de=J(se),be=Q(se),_e=V(K.map(function(ye){var me=ye._x0||ye.x0||ye.x||0,Me=ye._x1||ye.x1||ye.x||0,Ae=ye._y0||ye.y0||ye.y||0,ce=ye._y1||ye.y1||ye.y||0,ae=ye.eventData;if(ae){var pe=Math.min(me,Me),De=Math.max(me,Me),ke=Math.min(Ae,ce),Ee=Math.max(Ae,ce),Ie=ye.trace;if(d.traceIs(Ie,"gl3d")){var Re=se._fullLayout[Ie.scene]._scene.container,Ne=Re.offsetLeft,ge=Re.offsetTop;pe+=Ne,De+=Ne,ke+=ge,Ee+=ge}ae.bbox={x0:pe+be,x1:De+be,y0:ke+de,y1:Ee+de},oe.inOut_bbox&&oe.inOut_bbox.push(ae.bbox)}else ae=!1;return{color:ye.color||a.defaultLine,x0:ye.x0||ye.x||0,x1:ye.x1||ye.x||0,y0:ye.y0||ye.y||0,y1:ye.y1||ye.y||0,xLabel:ye.xLabel,yLabel:ye.yLabel,zLabel:ye.zLabel,text:ye.text,name:ye.name,idealAlign:ye.idealAlign,borderColor:ye.borderColor,fontFamily:ye.fontFamily,fontSize:ye.fontSize,fontColor:ye.fontColor,fontWeight:ye.fontWeight,fontStyle:ye.fontStyle,fontVariant:ye.fontVariant,nameLength:ye.nameLength,textAlign:ye.textAlign,trace:ye.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:ye.hovertemplate||!1,hovertemplateLabels:ye.hovertemplateLabels||!1,eventData:ae}}),{gd:se,hovermode:"closest",rotateLabels:!1,bgColor:oe.bgColor||a.background,container:v.select(oe.container),outerContainer:oe.outerContainer||oe.container}).hoverLabels,xe=0,ve=0;return _e.sort(function(ye,me){return ye.y0-me.y0}).each(function(ye,me){var Me=ye.y0-ye.by/2;ye.offset=Me-5<xe?xe-Me+5:0,xe=Me+ye.by+ye.offset,me===oe.anchorIndex&&(ve=ye.offset)}).each(function(ye){ye.offset-=ve}),Z(_e,!1,se._fullLayout._invScaleX,se._fullLayout._invScaleY),le?_e:_e.node()};var N=/<extra>([\s\S]*)<\/extra>/;function V(K,oe){var le=oe.gd,se=le._fullLayout,de=oe.hovermode,be=oe.rotateLabels,_e=oe.bgColor,xe=oe.container,ve=oe.outerContainer,ye=oe.commonLabelOpts||{};if(K.length===0)return[[]];var me=oe.fontFamily||_.HOVERFONT,Me=oe.fontSize||_.HOVERFONTSIZE,Ae=oe.fontWeight||se.font.weight,ce=oe.fontStyle||se.font.style,ae=oe.fontVariant||se.font.variant,pe=K[0],De=pe.xa,ke=pe.ya,Ee=de.charAt(0),Ie=Ee+"Label",Re=pe[Ie];if(Re===void 0&&De.type==="multicategory")for(var Ne=0;Ne<K.length&&(Re=K[Ne][Ie])===void 0;Ne++);var ge=ne(le,ve),we=ge.top,Ce=ge.width,ze=ge.height,Pe=Re!==void 0&&pe.distance<=oe.hoverdistance&&(de==="x"||de==="y");if(Pe){var Ue,Ge,Xe=!0;for(Ue=0;Ue<K.length;Ue++)if(Xe&&K[Ue].zLabel===void 0&&(Xe=!1),Ge=K[Ue].hoverinfo||K[Ue].trace.hoverinfo){var st=Array.isArray(Ge)?Ge:Ge.split("+");if(st.indexOf("all")===-1&&st.indexOf(de)===-1){Pe=!1;break}}Xe&&(Pe=!1)}var at=xe.selectAll("g.axistext").data(Pe?[0]:[]);at.enter().append("g").classed("axistext",!0),at.exit().remove();var vt={minX:0,maxX:0,minY:0,maxY:0};if(at.each(function(){var Ht=v.select(this),Ut=T.ensureSingle(Ht,"path","",function(ur){ur.style({"stroke-width":"1px"})}),Wt=T.ensureSingle(Ht,"text","",function(ur){ur.attr("data-notex",1)}),nn=ye.bgcolor||a.defaultLine,On=ye.bordercolor||a.contrast(nn),kn=a.contrast(nn),gn={weight:ye.font.weight||Ae,style:ye.font.style||ce,variant:ye.font.variant||ae,family:ye.font.family||me,size:ye.font.size||Me,color:ye.font.color||kn};Ut.style({fill:nn,stroke:On}),Wt.text(Re).call(i.font,gn).call(o.positionText,0,0).call(o.convertToTspans,le),Ht.attr("transform","");var Jt,un,tn=ne(le,Wt.node());if(de==="x"){var hn=De.side==="top"?"-":"";Wt.attr("text-anchor","middle").call(o.positionText,0,De.side==="top"?we-tn.bottom-E-k:we-tn.top+E+k),Jt=De._offset+(pe.x0+pe.x1)/2,un=ke._offset+(De.side==="top"?0:ke._length);var bn=tn.width/2+k,wn=Jt;Jt<bn?wn=bn:Jt>se.width-bn&&(wn=se.width-bn),Ut.attr("d","M"+(Jt-wn)+",0L"+(Jt-wn+E)+","+hn+E+"H"+bn+"v"+hn+(2*k+tn.height)+"H"+-bn+"V"+hn+E+"H"+(Jt-wn-E)+"Z"),Jt=wn,vt.minX=Jt-bn,vt.maxX=Jt+bn,De.side==="top"?(vt.minY=un-(2*k+tn.height),vt.maxY=un-k):(vt.minY=un+k,vt.maxY=un+(2*k+tn.height))}else{var Pn,Cn,Mn;ke.side==="right"?(Pn="start",Cn=1,Mn="",Jt=De._offset+De._length):(Pn="end",Cn=-1,Mn="-",Jt=De._offset),un=ke._offset+(pe.y0+pe.y1)/2,Wt.attr("text-anchor",Pn),Ut.attr("d","M0,0L"+Mn+E+","+E+"V"+(k+tn.height/2)+"h"+Mn+(2*k+tn.width)+"V-"+(k+tn.height/2)+"H"+Mn+E+"V-"+E+"Z"),vt.minY=un-(k+tn.height/2),vt.maxY=un+(k+tn.height/2),ke.side==="right"?(vt.minX=Jt+E,vt.maxX=Jt+E+(2*k+tn.width)):(vt.minX=Jt-E-(2*k+tn.width),vt.maxX=Jt-E);var Bn,Nn=tn.height/2,rr=we-tn.top-Nn,Yn="clip"+se._uid+"commonlabel"+ke._id;if(Jt<tn.width+2*k+E){Bn="M-"+(E+k)+"-"+Nn+"h-"+(tn.width-k)+"V"+Nn+"h"+(tn.width-k)+"Z";var ir=tn.width-Jt+k;o.positionText(Wt,ir,rr),Pn==="end"&&Wt.selectAll("tspan").each(function(){var ur=v.select(this),en=i.tester.append("text").text(ur.text()).call(i.font,gn),on=ne(le,en.node());Math.round(on.width)<Math.round(tn.width)&&ur.attr("x",ir-on.width),en.remove()})}else o.positionText(Wt,Cn*(k+E),rr),Bn=null;var Zn=se._topclips.selectAll("#"+Yn).data(Bn?[0]:[]);Zn.enter().append("clipPath").attr("id",Yn).append("path"),Zn.exit().remove(),Zn.select("path").attr("d",Bn),i.setClipUrl(Wt,Bn?Yn:null,le)}Ht.attr("transform",f(Jt,un))}),c.isUnifiedHover(de)){xe.selectAll("g.hovertext").remove();var xt=K.filter(function(Ht){return Ht.hoverinfo!=="none"});if(xt.length===0)return[];var gt=se.hoverlabel,rt=gt.font,tt={showlegend:!0,legend:{title:{text:Re,font:rt},font:rt,bgcolor:gt.bgcolor,bordercolor:gt.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:se.legend?se.legend.traceorder:void 0,orientation:"v"}},Mt={font:rt};p(tt,Mt,le._fullData);var Pt=Mt.legend;Pt.entries=[];for(var Rt=0;Rt<xt.length;Rt++){var St=xt[Rt];if(St.hoverinfo!=="none"){var Ye=F(St,!0,de,se,Re),Ke=Ye[0],Ve=Ye[1];St.name=Ve,St.text=Ve!==""?Ve+" : "+Ke:Ke;var $e=St.cd[St.index];$e&&($e.mc&&(St.mc=$e.mc),$e.mcc&&(St.mc=$e.mcc),$e.mlc&&(St.mlc=$e.mlc),$e.mlcc&&(St.mlc=$e.mlcc),$e.mlw&&(St.mlw=$e.mlw),$e.mrc&&(St.mrc=$e.mrc),$e.dir&&(St.dir=$e.dir)),St._distinct=!0,Pt.entries.push([St])}}Pt.entries.sort(function(Ht,Ut){return Ht[0].trace.index-Ut[0].trace.index}),Pt.layer=xe,Pt._inHover=!0,Pt._groupTitleFont=gt.grouptitlefont,g(le,Pt);var lt,it,Be,je,ot=xe.select("g.legend"),Ze=ne(le,ot.node()),dt=Ze.width+2*k,mt=Ze.height+2*k,yt=xt[0],ht=(yt.x0+yt.x1)/2,kt=(yt.y0+yt.y1)/2,_t=!(d.traceIs(yt.trace,"bar-like")||d.traceIs(yt.trace,"box-violin"));Ee==="y"?_t?(it=kt-k,lt=kt+k):(it=Math.min.apply(null,xt.map(function(Ht){return Math.min(Ht.y0,Ht.y1)})),lt=Math.max.apply(null,xt.map(function(Ht){return Math.max(Ht.y0,Ht.y1)}))):it=lt=T.mean(xt.map(function(Ht){return(Ht.y0+Ht.y1)/2}))-mt/2,Ee==="x"?_t?(Be=ht+k,je=ht-k):(Be=Math.max.apply(null,xt.map(function(Ht){return Math.max(Ht.x0,Ht.x1)})),je=Math.min.apply(null,xt.map(function(Ht){return Math.min(Ht.x0,Ht.x1)}))):Be=je=T.mean(xt.map(function(Ht){return(Ht.x0+Ht.x1)/2}))-dt/2;var Et,Lt,Ot=De._offset,Ft=ke._offset;return je+=Ot-dt,it+=Ft-mt,Et=(Be+=Ot)+dt<Ce&&Be>=0?Be:je+dt<Ce&&je>=0?je:Ot+dt<Ce?Ot:Be-ht<ht-je+dt?Ce-dt:0,Et+=k,Lt=(lt+=Ft)+mt<ze&&lt>=0?lt:it+mt<ze&&it>=0?it:Ft+mt<ze?Ft:lt-kt<kt-it+mt?ze-mt:0,Lt+=k,ot.attr("transform",f(Et-1,Lt-1)),ot}var Zt=xe.selectAll("g.hovertext").data(K,function(Ht){return O(Ht)});return Zt.enter().append("g").classed("hovertext",!0).each(function(){var Ht=v.select(this);Ht.append("rect").call(a.fill,a.addOpacity(_e,.8)),Ht.append("text").classed("name",!0),Ht.append("path").style("stroke-width","1px"),Ht.append("text").classed("nums",!0).call(i.font,{weight:Ae,style:ce,variant:ae,family:me,size:Me})}),Zt.exit().remove(),Zt.each(function(Ht){var Ut=v.select(this).attr("transform",""),Wt=Ht.color;Array.isArray(Wt)&&(Wt=Wt[Ht.eventData[0].pointNumber]);var nn=Ht.bgcolor||Wt,On=a.combine(a.opacity(nn)?nn:a.defaultLine,_e),kn=a.combine(a.opacity(Wt)?Wt:a.defaultLine,_e),gn=Ht.borderColor||a.contrast(On),Jt=F(Ht,Pe,de,se,Re,Ut),un=Jt[0],tn=Jt[1],hn=Ut.select("text.nums").call(i.font,{family:Ht.fontFamily||me,size:Ht.fontSize||Me,color:Ht.fontColor||gn,weight:Ht.fontWeight||Ae,style:Ht.fontStyle||ce,variant:Ht.fontVariant||ae}).text(un).attr("data-notex",1).call(o.positionText,0,0).call(o.convertToTspans,le),bn=Ut.select("text.name"),wn=0,Pn=0;if(tn&&tn!==un){bn.call(i.font,{family:Ht.fontFamily||me,size:Ht.fontSize||Me,color:kn,weight:Ht.fontWeight||Ae,style:Ht.fontStyle||ce,variant:Ht.fontVariant||ae}).text(tn).attr("data-notex",1).call(o.positionText,0,0).call(o.convertToTspans,le);var Cn=ne(le,bn.node());wn=Cn.width+2*k,Pn=Cn.height+2*k}else bn.remove(),Ut.select("rect").remove();Ut.select("path").style({fill:On,stroke:gn});var Mn=Ht.xa._offset+(Ht.x0+Ht.x1)/2,Bn=Ht.ya._offset+(Ht.y0+Ht.y1)/2,Nn=Math.abs(Ht.x1-Ht.x0),rr=Math.abs(Ht.y1-Ht.y0),Yn=ne(le,hn.node()),ir=Yn.width/se._invScaleX,Zn=Yn.height/se._invScaleY;Ht.ty0=(we-Yn.top)/se._invScaleY,Ht.bx=ir+2*k,Ht.by=Math.max(Zn+2*k,Pn),Ht.anchor="start",Ht.txwidth=ir,Ht.tx2width=wn,Ht.offset=0;var ur,en,on=(ir+E+k+wn)*se._invScaleX;if(be)Ht.pos=Mn,ur=Bn+rr/2+on<=ze,en=Bn-rr/2-on>=0,Ht.idealAlign!=="top"&&ur||!en?ur?(Bn+=rr/2,Ht.anchor="start"):Ht.anchor="middle":(Bn-=rr/2,Ht.anchor="end"),Ht.crossPos=Bn;else{if(Ht.pos=Bn,ur=Mn+Nn/2+on<=Ce,en=Mn-Nn/2-on>=0,Ht.idealAlign!=="left"&&ur||!en)if(ur)Mn+=Nn/2,Ht.anchor="start";else{Ht.anchor="middle";var Dn=on/2,yn=Mn+Dn-Ce,Ln=Mn-Dn;yn>0&&(Mn-=yn),Ln<0&&(Mn+=-Ln)}else Mn-=Nn/2,Ht.anchor="end";Ht.crossPos=Mn}hn.attr("text-anchor",Ht.anchor),wn&&bn.attr("text-anchor",Ht.anchor),Ut.attr("transform",f(Mn,Bn)+(be?s(m):""))}),{hoverLabels:Zt,commonLabelBoundingBox:vt}}function F(K,oe,le,se,de,be){var _e="",xe="";K.nameOverride!==void 0&&(K.name=K.nameOverride),K.name&&(K.trace._meta&&(K.name=T.templateString(K.name,K.trace._meta)),_e=re(K.name,K.nameLength));var ve=le.charAt(0),ye=ve==="x"?"y":"x";K.zLabel!==void 0?(K.xLabel!==void 0&&(xe+="x: "+K.xLabel+"<br>"),K.yLabel!==void 0&&(xe+="y: "+K.yLabel+"<br>"),K.trace.type!=="choropleth"&&K.trace.type!=="choroplethmapbox"&&(xe+=(xe?"z: ":"")+K.zLabel)):oe&&K[ve+"Label"]===de?xe=K[ye+"Label"]||"":K.xLabel===void 0?K.yLabel!==void 0&&K.trace.type!=="scattercarpet"&&(xe=K.yLabel):xe=K.yLabel===void 0?K.xLabel:"("+K.xLabel+", "+K.yLabel+")",!K.text&&K.text!==0||Array.isArray(K.text)||(xe+=(xe?"<br>":"")+K.text),K.extraText!==void 0&&(xe+=(xe?"<br>":"")+K.extraText),be&&xe===""&&!K.hovertemplate&&(_e===""&&be.remove(),xe=_e);var me=K.hovertemplate||!1;if(me){var Me=K.hovertemplateLabels||K;K[ve+"Label"]!==de&&(Me[ve+"other"]=Me[ve+"Val"],Me[ve+"otherLabel"]=Me[ve+"Label"]),xe=(xe=T.hovertemplateString(me,Me,se._d3locale,K.eventData[0]||{},K.trace._meta)).replace(N,function(Ae,ce){return _e=re(ce,K.nameLength),""})}return[xe,_e]}function j(K,oe){var le=0,se=K.offset;return oe&&(se*=-h,le=K.offset*M),{x:le,y:se}}function Z(K,oe,le,se){var de=function(_e){return _e*le},be=function(_e){return _e*se};K.each(function(_e){var xe=v.select(this);if(_e.del)return xe.remove();var ve,ye,me,Me,Ae=xe.select("text.nums"),ce=_e.anchor,ae=ce==="end"?-1:1,pe=(Me=(me=(ye={start:1,end:-1,middle:0}[(ve=_e).anchor])*(E+k))+ye*(ve.txwidth+k),ve.anchor==="middle"&&(me-=ve.tx2width/2,Me+=ve.txwidth/2+k),{alignShift:ye,textShiftX:me,text2ShiftX:Me}),De=j(_e,oe),ke=De.x,Ee=De.y,Ie=ce==="middle";xe.select("path").attr("d",Ie?"M-"+de(_e.bx/2+_e.tx2width/2)+","+be(Ee-_e.by/2)+"h"+de(_e.bx)+"v"+be(_e.by)+"h-"+de(_e.bx)+"Z":"M0,0L"+de(ae*E+ke)+","+be(E+Ee)+"v"+be(_e.by/2-E)+"h"+de(ae*_e.bx)+"v-"+be(_e.by)+"H"+de(ae*E+ke)+"V"+be(Ee-E)+"Z");var Re=ke+pe.textShiftX,Ne=Ee+_e.ty0-_e.by/2+k,ge=_e.textAlign||"auto";ge!=="auto"&&(ge==="left"&&ce!=="start"?(Ae.attr("text-anchor","start"),Re=Ie?-_e.bx/2-_e.tx2width/2+k:-_e.bx-k):ge==="right"&&ce!=="end"&&(Ae.attr("text-anchor","end"),Re=Ie?_e.bx/2-_e.tx2width/2-k:_e.bx+k)),Ae.call(o.positionText,de(Re),be(Ne)),_e.tx2width&&(xe.select("text.name").call(o.positionText,de(pe.text2ShiftX+pe.alignShift*k+ke),be(Ee+_e.ty0-_e.by/2+k)),xe.select("rect").call(i.setRect,de(pe.text2ShiftX+(pe.alignShift-1)*_e.tx2width/2+ke),be(Ee-_e.by/2-1),de(_e.tx2width),be(_e.by+2)))})}function z(K,oe){var le=K.index,se=K.trace||{},de=K.cd[0],be=K.cd[le]||{};function _e(Ae){return Ae||w(Ae)&&Ae===0}var xe=Array.isArray(le)?function(Ae,ce){var ae=T.castOption(de,le,Ae);return _e(ae)?ae:T.extractOption({},se,"",ce)}:function(Ae,ce){return T.extractOption(be,se,Ae,ce)};function ve(Ae,ce,ae){var pe=xe(ce,ae);_e(pe)&&(K[Ae]=pe)}if(ve("hoverinfo","hi","hoverinfo"),ve("bgcolor","hbg","hoverlabel.bgcolor"),ve("borderColor","hbc","hoverlabel.bordercolor"),ve("fontFamily","htf","hoverlabel.font.family"),ve("fontSize","hts","hoverlabel.font.size"),ve("fontColor","htc","hoverlabel.font.color"),ve("fontWeight","htw","hoverlabel.font.weight"),ve("fontStyle","hty","hoverlabel.font.style"),ve("fontVariant","htv","hoverlabel.font.variant"),ve("nameLength","hnl","hoverlabel.namelength"),ve("textAlign","hta","hoverlabel.align"),K.posref=oe==="y"||oe==="closest"&&se.orientation==="h"?K.xa._offset+(K.x0+K.x1)/2:K.ya._offset+(K.y0+K.y1)/2,K.x0=T.constrain(K.x0,0,K.xa._length),K.x1=T.constrain(K.x1,0,K.xa._length),K.y0=T.constrain(K.y0,0,K.ya._length),K.y1=T.constrain(K.y1,0,K.ya._length),K.xLabelVal!==void 0&&(K.xLabel="xLabel"in K?K.xLabel:l.hoverLabelText(K.xa,K.xLabelVal,se.xhoverformat),K.xVal=K.xa.c2d(K.xLabelVal)),K.yLabelVal!==void 0&&(K.yLabel="yLabel"in K?K.yLabel:l.hoverLabelText(K.ya,K.yLabelVal,se.yhoverformat),K.yVal=K.ya.c2d(K.yLabelVal)),K.zLabelVal!==void 0&&K.zLabel===void 0&&(K.zLabel=String(K.zLabelVal)),!(isNaN(K.xerr)||K.xa.type==="log"&&K.xerr<=0)){var ye=l.tickText(K.xa,K.xa.c2l(K.xerr),"hover").text;K.xerrneg!==void 0?K.xLabel+=" +"+ye+" / -"+l.tickText(K.xa,K.xa.c2l(K.xerrneg),"hover").text:K.xLabel+=" \xB1 "+ye,oe==="x"&&(K.distance+=1)}if(!(isNaN(K.yerr)||K.ya.type==="log"&&K.yerr<=0)){var me=l.tickText(K.ya,K.ya.c2l(K.yerr),"hover").text;K.yerrneg!==void 0?K.yLabel+=" +"+me+" / -"+l.tickText(K.ya,K.ya.c2l(K.yerrneg),"hover").text:K.yLabel+=" \xB1 "+me,oe==="y"&&(K.distance+=1)}var Me=K.hoverinfo||K.trace.hoverinfo;return Me&&Me!=="all"&&((Me=Array.isArray(Me)?Me:Me.split("+")).indexOf("x")===-1&&(K.xLabel=void 0),Me.indexOf("y")===-1&&(K.yLabel=void 0),Me.indexOf("z")===-1&&(K.zLabel=void 0),Me.indexOf("text")===-1&&(K.text=void 0),Me.indexOf("name")===-1&&(K.name=void 0)),K}function H(K,oe,le){var se,de,be=le.container,_e=le.fullLayout,xe=_e._size,ve=le.event,ye=!!oe.hLinePoint,me=!!oe.vLinePoint;if(be.selectAll(".spikeline").remove(),me||ye){var Me=a.combine(_e.plot_bgcolor,_e.paper_bgcolor);if(ye){var Ae,ce,ae=oe.hLinePoint;se=ae&&ae.xa,(de=ae&&ae.ya).spikesnap==="cursor"?(Ae=ve.pointerX,ce=ve.pointerY):(Ae=se._offset+ae.x,ce=de._offset+ae.y);var pe,De,ke=n.readability(ae.color,Me)<1.5?a.contrast(Me):ae.color,Ee=de.spikemode,Ie=de.spikethickness,Re=de.spikecolor||ke,Ne=l.getPxPosition(K,de);if(Ee.indexOf("toaxis")!==-1||Ee.indexOf("across")!==-1){if(Ee.indexOf("toaxis")!==-1&&(pe=Ne,De=Ae),Ee.indexOf("across")!==-1){var ge=de._counterDomainMin,we=de._counterDomainMax;de.anchor==="free"&&(ge=Math.min(ge,de.position),we=Math.max(we,de.position)),pe=xe.l+ge*xe.w,De=xe.l+we*xe.w}be.insert("line",":first-child").attr({x1:pe,x2:De,y1:ce,y2:ce,"stroke-width":Ie,stroke:Re,"stroke-dasharray":i.dashStyle(de.spikedash,Ie)}).classed("spikeline",!0).classed("crisp",!0),be.insert("line",":first-child").attr({x1:pe,x2:De,y1:ce,y2:ce,"stroke-width":Ie+2,stroke:Me}).classed("spikeline",!0).classed("crisp",!0)}Ee.indexOf("marker")!==-1&&be.insert("circle",":first-child").attr({cx:Ne+(de.side!=="right"?Ie:-Ie),cy:ce,r:Ie,fill:Re}).classed("spikeline",!0)}if(me){var Ce,ze,Pe=oe.vLinePoint;se=Pe&&Pe.xa,de=Pe&&Pe.ya,se.spikesnap==="cursor"?(Ce=ve.pointerX,ze=ve.pointerY):(Ce=se._offset+Pe.x,ze=de._offset+Pe.y);var Ue,Ge,Xe=n.readability(Pe.color,Me)<1.5?a.contrast(Me):Pe.color,st=se.spikemode,at=se.spikethickness,vt=se.spikecolor||Xe,xt=l.getPxPosition(K,se);if(st.indexOf("toaxis")!==-1||st.indexOf("across")!==-1){if(st.indexOf("toaxis")!==-1&&(Ue=xt,Ge=ze),st.indexOf("across")!==-1){var gt=se._counterDomainMin,rt=se._counterDomainMax;se.anchor==="free"&&(gt=Math.min(gt,se.position),rt=Math.max(rt,se.position)),Ue=xe.t+(1-rt)*xe.h,Ge=xe.t+(1-gt)*xe.h}be.insert("line",":first-child").attr({x1:Ce,x2:Ce,y1:Ue,y2:Ge,"stroke-width":at,stroke:vt,"stroke-dasharray":i.dashStyle(se.spikedash,at)}).classed("spikeline",!0).classed("crisp",!0),be.insert("line",":first-child").attr({x1:Ce,x2:Ce,y1:Ue,y2:Ge,"stroke-width":at+2,stroke:Me}).classed("spikeline",!0).classed("crisp",!0)}st.indexOf("marker")!==-1&&be.insert("circle",":first-child").attr({cx:Ce,cy:xt-(se.side!=="top"?at:-at),r:at,fill:vt}).classed("spikeline",!0)}}}function U(K,oe){return!oe||oe.vLinePoint!==K._spikepoints.vLinePoint||oe.hLinePoint!==K._spikepoints.hLinePoint}function re(K,oe){return o.plainText(K||"",{len:oe,allowedTags:["br","sub","sup","b","i","em"]})}function ee(K,oe,le){var se=oe[K+"a"],de=oe[K+"Val"],be=oe.cd[0];if(se.type==="category"||se.type==="multicategory")de=se._categoriesMap[de];else if(se.type==="date"){var _e=oe.trace[K+"periodalignment"];if(_e){var xe=oe.cd[oe.index],ve=xe[K+"Start"];ve===void 0&&(ve=xe[K]);var ye=xe[K+"End"];ye===void 0&&(ye=xe[K]);var me=ye-ve;_e==="end"?de+=me:_e==="middle"&&(de+=me/2)}de=se.d2c(de)}return be&&be.t&&be.t.posLetter===se._id&&(le.boxmode!=="group"&&le.violinmode!=="group"||(de+=be.t.dPos)),de}function J(K){return K.offsetTop+K.clientTop}function Q(K){return K.offsetLeft+K.clientLeft}function ne(K,oe){var le=K._fullLayout,se=oe.getBoundingClientRect(),de=se.left,be=se.top,_e=de+se.width,xe=be+se.height,ve=T.apply3DTransform(le._invTransform)(de,be),ye=T.apply3DTransform(le._invTransform)(_e,xe),me=ve[0],Me=ve[1],Ae=ye[0],ce=ye[1];return{x:me,y:Me,width:Ae-me,height:ce-Me,top:Math.min(Me,ce),left:Math.min(me,Ae),right:Math.max(me,Ae),bottom:Math.max(Me,ce)}}},16132:function(C,A,e){"use strict";var v=e(3400),w=e(76308),n=e(10624).isUnifiedHover;C.exports=function(T,x,f,s){s=s||{};var t=x.legend;function o(r){s.font[r]||(s.font[r]=t?x.legend.font[r]:x.font[r])}x&&n(x.hovermode)&&(s.font||(s.font={}),o("size"),o("family"),o("color"),o("weight"),o("style"),o("variant"),t?(s.bgcolor||(s.bgcolor=w.combine(x.legend.bgcolor,x.paper_bgcolor)),s.bordercolor||(s.bordercolor=x.legend.bordercolor)):s.bgcolor||(s.bgcolor=x.paper_bgcolor)),f("hoverlabel.bgcolor",s.bgcolor),f("hoverlabel.bordercolor",s.bordercolor),f("hoverlabel.namelength",s.namelength),v.coerceFont(f,"hoverlabel.font",s.font),f("hoverlabel.align",s.align)}},41008:function(C,A,e){"use strict";var v=e(3400),w=e(65460);C.exports=function(n,T){function x(f,s){return T[f]!==void 0?T[f]:v.coerce(n,T,w,f,s)}return x("clickmode"),x("hoversubplots"),x("hovermode")}},93024:function(C,A,e){"use strict";var v=e(33428),w=e(3400),n=e(86476),T=e(10624),x=e(65460),f=e(83292);C.exports={moduleType:"component",name:"fx",constants:e(92456),schema:{layout:x},attributes:e(55756),layoutAttributes:x,supplyLayoutGlobalDefaults:e(81976),supplyDefaults:e(95448),supplyLayoutDefaults:e(88336),calc:e(55056),getDistanceFunction:T.getDistanceFunction,getClosest:T.getClosest,inbox:T.inbox,quadrature:T.quadrature,appendArrayPointValue:T.appendArrayPointValue,castHoverOption:function(s,t,o){return w.castOption(s,t,"hoverlabel."+o)},castHoverinfo:function(s,t,o){return w.castOption(s,o,"hoverinfo",function(r){return w.coerceHoverinfo({hoverinfo:r},{_module:s._module},t)})},hover:f.hover,unhover:n.unhover,loneHover:f.loneHover,loneUnhover:function(s){var t=w.isD3Selection(s)?s:v.select(s);t.selectAll("g.hovertext").remove(),t.selectAll(".spikeline").remove()},click:e(62376)}},65460:function(C,A,e){"use strict";var v=e(92456),w=e(25376),n=w({editType:"none"});n.family.dflt=v.HOVERFONT,n.size.dflt=v.HOVERFONTSIZE,C.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoversubplots:{valType:"enumerated",values:["single","overlaying","axis"],dflt:"overlaying",editType:"none"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:n,grouptitlefont:w({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},88336:function(C,A,e){"use strict";var v=e(3400),w=e(65460),n=e(41008),T=e(16132);C.exports=function(x,f){function s(i,a){return v.coerce(x,f,w,i,a)}n(x,f)&&(s("hoverdistance"),s("spikedistance")),s("dragmode")==="select"&&s("selectdirection");var t=f._has("mapbox"),o=f._has("geo"),r=f._basePlotModules.length;f.dragmode==="zoom"&&((t||o)&&r===1||t&&o&&r===2)&&(f.dragmode="pan"),T(x,f,s),v.coerceFont(s,"hoverlabel.grouptitlefont",f.hoverlabel.font)}},81976:function(C,A,e){"use strict";var v=e(3400),w=e(16132),n=e(65460);C.exports=function(T,x){w(T,x,function(f,s){return v.coerce(T,x,n,f,s)})}},12704:function(C,A,e){"use strict";var v=e(3400),w=e(53756).counter,n=e(86968).u,T=e(33816).idRegex,x=e(31780),f={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[w("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:n({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function s(r,i,a){var u=i[a+"axes"],l=Object.keys((r._splomAxes||{})[a]||{});return Array.isArray(u)?u:l.length?l:void 0}function t(r,i,a,u,l,d){var c=i(r+"gap",a),_=i("domain."+r);i(r+"side",u);for(var p=new Array(l),g=_[0],m=(_[1]-g)/(l-c),b=m*(1-c),y=0;y<l;y++){var M=g+m*y;p[d?l-1-y:y]=[M,M+b]}return p}function o(r,i,a,u,l){var d,c=new Array(a);function _(p,g){i.indexOf(g)!==-1&&u[g]===void 0?(c[p]=g,u[g]=p):c[p]=""}if(Array.isArray(r))for(d=0;d<a;d++)_(d,r[d]);else for(_(0,l),d=1;d<a;d++)_(d,l+(d+1));return c}C.exports={moduleType:"component",name:"grid",schema:{layout:{grid:f}},layoutAttributes:f,sizeDefaults:function(r,i){var a=r.grid||{},u=s(i,a,"x"),l=s(i,a,"y");if(r.grid||u||l){var d,c,_=Array.isArray(a.subplots)&&Array.isArray(a.subplots[0]),p=Array.isArray(u),g=Array.isArray(l),m=p&&u!==a.xaxes&&g&&l!==a.yaxes;_?(d=a.subplots.length,c=a.subplots[0].length):(g&&(d=l.length),p&&(c=u.length));var b=x.newContainer(i,"grid"),y=L("rows",d),M=L("columns",c);if(y*M>1){_||p||g||L("pattern")==="independent"&&(_=!0),b._hasSubplotGrid=_;var h,E,k=L("roworder")==="top to bottom",D=_?.2:.1,P=_?.3:.1;m&&i._splomGridDflt&&(h=i._splomGridDflt.xside,E=i._splomGridDflt.yside),b._domains={x:t("x",L,D,h,M),y:t("y",L,P,E,y,k)}}else delete i.grid}function L(O,N){return v.coerce(a,b,f,O,N)}},contentDefaults:function(r,i){var a=i.grid;if(a&&a._domains){var u,l,d,c,_,p,g,m=r.grid||{},b=i._subplots,y=a._hasSubplotGrid,M=a.rows,h=a.columns,E=a.pattern==="independent",k=a._axisMap={};if(y){var D=m.subplots||[];p=a.subplots=new Array(M);var P=1;for(u=0;u<M;u++){var L=p[u]=new Array(h),O=D[u]||[];for(l=0;l<h;l++)if(E?(_=P===1?"xy":"x"+P+"y"+P,P++):_=O[l],L[l]="",b.cartesian.indexOf(_)!==-1){if(g=_.indexOf("y"),d=_.slice(0,g),c=_.slice(g),k[d]!==void 0&&k[d]!==l||k[c]!==void 0&&k[c]!==u)continue;L[l]=_,k[d]=l,k[c]=u}}}else{var N=s(i,m,"x"),V=s(i,m,"y");a.xaxes=o(N,b.xaxis,h,k,"x"),a.yaxes=o(V,b.yaxis,M,k,"y")}var F=a._anchors={},j=a.roworder==="top to bottom";for(var Z in k){var z,H,U,re=Z.charAt(0),ee=a[re+"side"];if(ee.length<8)F[Z]="free";else if(re==="x"){if(ee.charAt(0)==="t"===j?(z=0,H=1,U=M):(z=M-1,H=-1,U=-1),y){var J=k[Z];for(u=z;u!==U;u+=H)if((_=p[u][J])&&(g=_.indexOf("y"),_.slice(0,g)===Z)){F[Z]=_.slice(g);break}}else for(u=z;u!==U;u+=H)if(c=a.yaxes[u],b.cartesian.indexOf(Z+c)!==-1){F[Z]=c;break}}else if(ee.charAt(0)==="l"?(z=0,H=1,U=h):(z=h-1,H=-1,U=-1),y){var Q=k[Z];for(u=z;u!==U;u+=H)if((_=p[Q][u])&&(g=_.indexOf("y"),_.slice(g)===Z)){F[Z]=_.slice(0,g);break}}else for(u=z;u!==U;u+=H)if(d=a.xaxes[u],b.cartesian.indexOf(d+Z)!==-1){F[Z]=d;break}}}}}},65760:function(C,A,e){"use strict";var v=e(33816),w=e(31780).templatedArray;e(36208),C.exports=w("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",v.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",v.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},63556:function(C,A,e){"use strict";var v=e(38248),w=e(36896);C.exports=function(n,T,x,f){T=T||{};var s=x==="log"&&T.type==="linear",t=x==="linear"&&T.type==="log";if(s||t){for(var o,r,i=n._fullLayout.images,a=T._id.charAt(0),u=0;u<i.length;u++)if(r="images["+u+"].",(o=i[u])[a+"ref"]===T._id){var l=o[a],d=o["size"+a],c=null,_=null;if(s){c=w(l,T.range);var p=d/Math.pow(10,c)/2;_=2*Math.log(p+Math.sqrt(1+p*p))/Math.LN10}else _=(c=Math.pow(10,l))*(Math.pow(10,d/2)-Math.pow(10,-d/2));v(c)?v(_)||(_=null):(c=null,_=null),f(r+a,c),f(r+"size"+a,_)}}}},25024:function(C,A,e){"use strict";var v=e(3400),w=e(54460),n=e(51272),T=e(65760);function x(f,s,t){function o(c,_){return v.coerce(f,s,T,c,_)}var r=o("source");if(!o("visible",!!r))return s;o("layer"),o("xanchor"),o("yanchor"),o("sizex"),o("sizey"),o("sizing"),o("opacity");for(var i={_fullLayout:t},a=["x","y"],u=0;u<2;u++){var l=a[u],d=w.coerceRef(f,s,i,l,"paper",void 0);d!=="paper"&&w.getFromId(i,d)._imgIndices.push(s._index),w.coercePosition(s,i,o,d,l,0)}return s}C.exports=function(f,s){n(f,s,{name:"images",handleItemDefaults:x})}},60963:function(C,A,e){"use strict";var v=e(33428),w=e(43616),n=e(54460),T=e(79811),x=e(9616);C.exports=function(f){var s,t,o=f._fullLayout,r=[],i={},a=[];for(t=0;t<o.images.length;t++){var u=o.images[t];if(u.visible)if(u.layer==="below"&&u.xref!=="paper"&&u.yref!=="paper"){s=T.ref2id(u.xref)+T.ref2id(u.yref);var l=o._plots[s];if(!l){a.push(u);continue}l.mainplot&&(s=l.mainplot.id),i[s]||(i[s]=[]),i[s].push(u)}else u.layer==="above"?r.push(u):a.push(u)}var d={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},c={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function _(h){var E=v.select(this);if(this._imgSrc!==h.source)if(E.attr("xmlns",x.svg),h.source&&h.source.slice(0,5)==="data:")E.attr("xlink:href",h.source),this._imgSrc=h.source;else{var k=new Promise((function(D){var P=new Image;function L(){E.remove(),D()}this.img=P,P.setAttribute("crossOrigin","anonymous"),P.onerror=L,P.onload=function(){var O=document.createElement("canvas");O.width=this.width,O.height=this.height,O.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var N=O.toDataURL("image/png");E.attr("xlink:href",N),D()},E.on("error",L),P.src=h.source,this._imgSrc=h.source}).bind(this));f._promises.push(k)}}function p(h){var E,k,D=v.select(this),P=n.getFromId(f,h.xref),L=n.getFromId(f,h.yref),O=n.getRefType(h.xref)==="domain",N=n.getRefType(h.yref)==="domain",V=o._size;E=P!==void 0?typeof h.xref=="string"&&O?P._length*h.sizex:Math.abs(P.l2p(h.sizex)-P.l2p(0)):h.sizex*V.w,k=L!==void 0?typeof h.yref=="string"&&N?L._length*h.sizey:Math.abs(L.l2p(h.sizey)-L.l2p(0)):h.sizey*V.h;var F,j,Z=E*d[h.xanchor].offset,z=k*c[h.yanchor].offset,H=d[h.xanchor].sizing+c[h.yanchor].sizing;switch(F=P!==void 0?typeof h.xref=="string"&&O?P._length*h.x+P._offset:P.r2p(h.x)+P._offset:h.x*V.w+V.l,F+=Z,j=L!==void 0?typeof h.yref=="string"&&N?L._length*(1-h.y)+L._offset:L.r2p(h.y)+L._offset:V.h-h.y*V.h+V.t,j+=z,h.sizing){case"fill":H+=" slice";break;case"stretch":H="none"}D.attr({x:F,y:j,width:E,height:k,preserveAspectRatio:H,opacity:h.opacity});var U=(P&&n.getRefType(h.xref)!=="domain"?P._id:"")+(L&&n.getRefType(h.yref)!=="domain"?L._id:"");w.setClipUrl(D,U?"clip"+o._uid+U:null,f)}var g=o._imageLowerLayer.selectAll("image").data(a),m=o._imageUpperLayer.selectAll("image").data(r);g.enter().append("image"),m.enter().append("image"),g.exit().remove(),m.exit().remove(),g.each(function(h){_.bind(this)(h),p.bind(this)(h)}),m.each(function(h){_.bind(this)(h),p.bind(this)(h)});var b=Object.keys(o._plots);for(t=0;t<b.length;t++){s=b[t];var y=o._plots[s];if(y.imagelayer){var M=y.imagelayer.selectAll("image").data(i[s]||[]);M.enter().append("image"),M.exit().remove(),M.each(function(h){_.bind(this)(h),p.bind(this)(h)})}}}},7402:function(C,A,e){"use strict";C.exports={moduleType:"component",name:"images",layoutAttributes:e(65760),supplyLayoutDefaults:e(25024),includeBasePlot:e(36632)("images"),draw:e(60963),convertCoords:e(63556)}},3800:function(C,A,e){"use strict";var v=e(25376),w=e(22548);C.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:w.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:v({editType:"legend"}),grouptitlefont:v({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},indentation:{valType:"number",min:-15,dflt:0,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:v({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}},65196:function(C){"use strict";C.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},77864:function(C,A,e){"use strict";var v=e(24040),w=e(3400),n=e(31780),T=e(45464),x=e(3800),f=e(64859),s=e(42451);function t(o,r,i,a){var u=r[o]||{},l=n.newContainer(i,o);function d(H,U){return w.coerce(u,l,x,H,U)}var c=w.coerceFont(d,"font",i.font);if(d("bgcolor",i.paper_bgcolor),d("bordercolor"),d("visible")){for(var _,p=function(H,U){var re=_._input,ee=_;return w.coerce(re,ee,T,H,U)},g=i.font||{},m=w.coerceFont(d,"grouptitlefont",w.extendFlat({},g,{size:Math.round(1.1*g.size)})),b=0,y=!1,M="normal",h=(i.shapes||[]).filter(function(H){return H.showlegend}),E=a.concat(h).filter(function(H){return o===(H.legend||"legend")}),k=0;k<E.length;k++)if((_=E[k]).visible){var D=_._isShape;(_.showlegend||_._dfltShowLegend&&!(_._module&&_._module.attributes&&_._module.attributes.showlegend&&_._module.attributes.showlegend.dflt===!1))&&(b++,_.showlegend&&(y=!0,(!D&&v.traceIs(_,"pie-like")||_._input.showlegend===!0)&&b++),w.coerceFont(p,"legendgrouptitle.font",m)),(!D&&v.traceIs(_,"bar")&&i.barmode==="stack"||["tonextx","tonexty"].indexOf(_.fill)!==-1)&&(M=s.isGrouped({traceorder:M})?"grouped+reversed":"reversed"),_.legendgroup!==void 0&&_.legendgroup!==""&&(M=s.isReversed({traceorder:M})?"reversed+grouped":"grouped")}var P=w.coerce(r,i,f,"showlegend",y&&b>(o==="legend"?1:0));if(P===!1&&(i[o]=void 0),(P!==!1||u.uirevision)&&(d("uirevision",i.uirevision),P!==!1)){d("borderwidth");var L,O,N,V=d("orientation")==="h",F=d("yref")==="paper",j=d("xref")==="paper",Z="left";if(V?(L=0,v.getComponentMethod("rangeslider","isVisible")(r.xaxis)?F?(O=1.1,N="bottom"):(O=1,N="top"):F?(O=-.1,N="top"):(O=0,N="bottom")):(O=1,N="auto",j?L=1.02:(L=1,Z="right")),w.coerce(u,l,{x:{valType:"number",editType:"legend",min:j?-2:0,max:j?3:1,dflt:L}},"x"),w.coerce(u,l,{y:{valType:"number",editType:"legend",min:F?-2:0,max:F?3:1,dflt:O}},"y"),d("traceorder",M),s.isGrouped(i[o])&&d("tracegroupgap"),d("entrywidth"),d("entrywidthmode"),d("indentation"),d("itemsizing"),d("itemwidth"),d("itemclick"),d("itemdoubleclick"),d("groupclick"),d("xanchor",Z),d("yanchor",N),d("valign"),w.noneOrAll(u,l,["x","y"]),d("title.text")){d("title.side",V?"left":"top");var z=w.extendFlat({},c,{size:w.bigFont(c.size)});w.coerceFont(d,"title.font",z)}}}}C.exports=function(o,r,i){var a,u=i.slice(),l=r.shapes;if(l)for(a=0;a<l.length;a++){var d=l[a];if(d.showlegend){var c={_input:d._input,visible:d.visible,showlegend:d.showlegend,legend:d.legend};u.push(c)}}var _=["legend"];for(a=0;a<u.length;a++)w.pushUnique(_,u[a].legend);for(r._legends=[],a=0;a<_.length;a++){var p=_[a];t(p,o,r,u),r[p]&&r[p].visible&&(r[p]._id=p),r._legends.push(p)}}},31140:function(C,A,e){"use strict";var v=e(33428),w=e(3400),n=e(7316),T=e(24040),x=e(95924),f=e(86476),s=e(43616),t=e(76308),o=e(72736),r=e(33048),i=e(65196),a=e(84284),u=a.LINE_SPACING,l=a.FROM_TL,d=a.FROM_BR,c=e(35456),_=e(2012),p=e(42451),g=1,m=/^legend[0-9]*$/;function b(N,V){var F,j,Z=V||{},z=N._fullLayout,H=O(Z),U=Z._inHover;if(U?(j=Z.layer,F="hover"):(j=z._infolayer,F=H),j){var re;if(F+=z._uid,N._legendMouseDownTime||(N._legendMouseDownTime=0),U){if(!Z.entries)return;re=c(Z.entries,Z)}else{for(var ee=(N.calcdata||[]).slice(),J=z.shapes,Q=0;Q<J.length;Q++){var ne=J[Q];if(ne.showlegend){var K={_isShape:!0,_fullInput:ne,index:ne._index,name:ne.name||ne.label.text||"shape "+ne._index,legend:ne.legend,legendgroup:ne.legendgroup,legendgrouptitle:ne.legendgrouptitle,legendrank:ne.legendrank,legendwidth:ne.legendwidth,showlegend:ne.showlegend,visible:ne.visible,opacity:ne.opacity,mode:ne.type==="line"?"lines":"markers",line:ne.line,marker:{line:ne.line,color:ne.fillcolor,size:12,symbol:ne.type==="rect"?"square":ne.type==="circle"?"circle":"hexagon2"}};ee.push([{trace:K}])}}re=z.showlegend&&c(ee,Z,z._legends.length>1)}var oe=z.hiddenlabels||[];if(!(U||z.showlegend&&re.length))return j.selectAll("."+H).remove(),z._topdefs.select("#"+F).remove(),n.autoMargin(N,H);var le=w.ensureSingle(j,"g",H,function(Me){U||Me.attr("pointer-events","all")}),se=w.ensureSingleById(z._topdefs,"clipPath",F,function(Me){Me.append("rect")}),de=w.ensureSingle(le,"rect","bg",function(Me){Me.attr("shape-rendering","crispEdges")});de.call(t.stroke,Z.bordercolor).call(t.fill,Z.bgcolor).style("stroke-width",Z.borderwidth+"px");var be,_e=w.ensureSingle(le,"g","scrollbox"),xe=Z.title;Z._titleWidth=0,Z._titleHeight=0,xe.text?((be=w.ensureSingle(_e,"text",H+"titletext")).attr("text-anchor","start").call(s.font,xe.font).text(xe.text),D(be,_e,N,Z,g)):_e.selectAll("."+H+"titletext").remove();var ve=w.ensureSingle(le,"rect","scrollbar",function(Me){Me.attr(i.scrollBarEnterAttrs).call(t.fill,i.scrollBarColor)}),ye=_e.selectAll("g.groups").data(re);ye.enter().append("g").attr("class","groups"),ye.exit().remove();var me=ye.selectAll("g.traces").data(w.identity);me.enter().append("g").attr("class","traces"),me.exit().remove(),me.style("opacity",function(Me){var Ae=Me[0].trace;return T.traceIs(Ae,"pie-like")?oe.indexOf(Me[0].label)!==-1?.5:1:Ae.visible==="legendonly"?.5:1}).each(function(){v.select(this).call(h,N,Z)}).call(_,N,Z).each(function(){U||v.select(this).call(k,N,H)}),w.syncOrAsync([n.previousPromises,function(){return function(Me,Ae,ce,ae){var pe=Me._fullLayout,De=O(ae);ae||(ae=pe[De]);var ke=pe._size,Ee=p.isVertical(ae),Ie=p.isGrouped(ae),Re=ae.entrywidthmode==="fraction",Ne=ae.borderwidth,ge=2*Ne,we=i.itemGap,Ce=ae.indentation+ae.itemwidth+2*we,ze=2*(Ne+we),Pe=L(ae),Ue=ae.y<0||ae.y===0&&Pe==="top",Ge=ae.y>1||ae.y===1&&Pe==="bottom",Xe=ae.tracegroupgap,st={};ae._maxHeight=Math.max(Ue||Ge?pe.height/2:ke.h,30);var at=0;ae._width=0,ae._height=0;var vt=function(mt){var yt=0,ht=0,kt=mt.title.side;return kt&&(kt.indexOf("left")!==-1&&(yt=mt._titleWidth),kt.indexOf("top")!==-1&&(ht=mt._titleHeight)),[yt,ht]}(ae);if(Ee)ce.each(function(mt){var yt=mt[0].height;s.setTranslate(this,Ne+vt[0],Ne+vt[1]+ae._height+yt/2+we),ae._height+=yt,ae._width=Math.max(ae._width,mt[0].width)}),at=Ce+ae._width,ae._width+=we+Ce+ge,ae._height+=ze,Ie&&(Ae.each(function(mt,yt){s.setTranslate(this,0,yt*ae.tracegroupgap)}),ae._height+=(ae._lgroupsLength-1)*ae.tracegroupgap);else{var xt=P(ae),gt=ae.x<0||ae.x===0&&xt==="right",rt=ae.x>1||ae.x===1&&xt==="left",tt=Ge||Ue,Mt=pe.width/2;ae._maxWidth=Math.max(gt?tt&&xt==="left"?ke.l+ke.w:Mt:rt?tt&&xt==="right"?ke.r+ke.w:Mt:ke.w,2*Ce);var Pt=0,Rt=0;ce.each(function(mt){var yt=y(mt,ae,Ce);Pt=Math.max(Pt,yt),Rt+=yt}),at=null;var St=0;if(Ie){var Ye=0,Ke=0,Ve=0;Ae.each(function(){var mt=0,yt=0;v.select(this).selectAll("g.traces").each(function(kt){var _t=y(kt,ae,Ce),Et=kt[0].height;s.setTranslate(this,vt[0],vt[1]+Ne+we+Et/2+yt),yt+=Et,mt=Math.max(mt,_t),st[kt[0].trace.legendgroup]=mt});var ht=mt+we;Ke>0&&ht+Ne+Ke>ae._maxWidth?(St=Math.max(St,Ke),Ke=0,Ve+=Ye+Xe,Ye=yt):Ye=Math.max(Ye,yt),s.setTranslate(this,Ke,Ve),Ke+=ht}),ae._width=Math.max(St,Ke)+Ne,ae._height=Ve+Ye+ze}else{var $e=ce.size(),lt=Rt+ge+($e-1)*we<ae._maxWidth,it=0,Be=0,je=0,ot=0;ce.each(function(mt){var yt=mt[0].height,ht=y(mt,ae,Ce),kt=lt?ht:Pt;Re||(kt+=we),kt+Ne+Be-we>=ae._maxWidth&&(St=Math.max(St,ot),Be=0,je+=it,ae._height+=it,it=0),s.setTranslate(this,vt[0]+Ne+Be,vt[1]+Ne+je+yt/2+we),ot=Be+ht+we,Be+=kt,it=Math.max(it,yt)}),lt?(ae._width=Be+ge,ae._height=it+ze):(ae._width=Math.max(St,ot)+ge,ae._height+=it+ze)}}ae._width=Math.ceil(Math.max(ae._width+vt[0],ae._titleWidth+2*(Ne+i.titlePad))),ae._height=Math.ceil(Math.max(ae._height+vt[1],ae._titleHeight+2*(Ne+i.itemGap))),ae._effHeight=Math.min(ae._height,ae._maxHeight);var Ze=Me._context.edits,dt=Ze.legendText||Ze.legendPosition;ce.each(function(mt){var yt=v.select(this).select("."+De+"toggle"),ht=mt[0].height,kt=mt[0].trace.legendgroup,_t=y(mt,ae,Ce);Ie&&kt!==""&&(_t=st[kt]);var Et=dt?Ce:at||_t;Ee||Re||(Et+=we/2),s.setRect(yt,0,-ht/2,Et,ht)})}(N,ye,me,Z)},function(){var Me,Ae,ce,ae,pe=z._size,De=Z.borderwidth,ke=Z.xref==="paper",Ee=Z.yref==="paper";if(xe.text&&function(tt,Mt,Pt){if(Mt.title.side==="top center"||Mt.title.side==="top right"){var Rt=Mt.title.font.size*u,St=0,Ye=tt.node(),Ke=s.bBox(Ye).width;Mt.title.side==="top center"?St=.5*(Mt._width-2*Pt-2*i.titlePad-Ke):Mt.title.side==="top right"&&(St=Mt._width-2*Pt-2*i.titlePad-Ke),o.positionText(tt,Pt+i.titlePad+St,Pt+Rt)}}(be,Z,De),!U){var Ie,Re;Ie=ke?pe.l+pe.w*Z.x-l[P(Z)]*Z._width:z.width*Z.x-l[P(Z)]*Z._width,Re=Ee?pe.t+pe.h*(1-Z.y)-l[L(Z)]*Z._effHeight:z.height*(1-Z.y)-l[L(Z)]*Z._effHeight;var Ne=function(tt,Mt,Pt,Rt){var St=tt._fullLayout,Ye=St[Mt],Ke=P(Ye),Ve=L(Ye),$e=Ye.xref==="paper",lt=Ye.yref==="paper";tt._fullLayout._reservedMargin[Mt]={};var it=Ye.y<.5?"b":"t",Be=Ye.x<.5?"l":"r",je={r:St.width-Pt,l:Pt+Ye._width,b:St.height-Rt,t:Rt+Ye._effHeight};if($e&&lt)return n.autoMargin(tt,Mt,{x:Ye.x,y:Ye.y,l:Ye._width*l[Ke],r:Ye._width*d[Ke],b:Ye._effHeight*d[Ve],t:Ye._effHeight*l[Ve]});$e?tt._fullLayout._reservedMargin[Mt][it]=je[it]:lt||Ye.orientation==="v"?tt._fullLayout._reservedMargin[Mt][Be]=je[Be]:tt._fullLayout._reservedMargin[Mt][it]=je[it]}(N,H,Ie,Re);if(Ne)return;if(z.margin.autoexpand){var ge=Ie,we=Re;Ie=ke?w.constrain(Ie,0,z.width-Z._width):ge,Re=Ee?w.constrain(Re,0,z.height-Z._effHeight):we,Ie!==ge&&w.log("Constrain "+H+".x to make legend fit inside graph"),Re!==we&&w.log("Constrain "+H+".y to make legend fit inside graph")}s.setTranslate(le,Ie,Re)}if(ve.on(".drag",null),le.on("wheel",null),U||Z._height<=Z._maxHeight||N._context.staticPlot){var Ce=Z._effHeight;U&&(Ce=Z._height),de.attr({width:Z._width-De,height:Ce-De,x:De/2,y:De/2}),s.setTranslate(_e,0,0),se.select("rect").attr({width:Z._width-2*De,height:Ce-2*De,x:De,y:De}),s.setClipUrl(_e,F,N),s.setRect(ve,0,0,0,0),delete Z._scrollY}else{var ze,Pe,Ue,Ge=Math.max(i.scrollBarMinHeight,Z._effHeight*Z._effHeight/Z._height),Xe=Z._effHeight-Ge-2*i.scrollBarMargin,st=Z._height-Z._effHeight,at=Xe/st,vt=Math.min(Z._scrollY||0,st);de.attr({width:Z._width-2*De+i.scrollBarWidth+i.scrollBarMargin,height:Z._effHeight-De,x:De/2,y:De/2}),se.select("rect").attr({width:Z._width-2*De+i.scrollBarWidth+i.scrollBarMargin,height:Z._effHeight-2*De,x:De,y:De+vt}),s.setClipUrl(_e,F,N),rt(vt,Ge,at),le.on("wheel",function(){rt(vt=w.constrain(Z._scrollY+v.event.deltaY/Xe*st,0,st),Ge,at),vt!==0&&vt!==st&&v.event.preventDefault()});var xt=v.behavior.drag().on("dragstart",function(){var tt=v.event.sourceEvent;ze=tt.type==="touchstart"?tt.changedTouches[0].clientY:tt.clientY,Ue=vt}).on("drag",function(){var tt=v.event.sourceEvent;tt.buttons===2||tt.ctrlKey||(Pe=tt.type==="touchmove"?tt.changedTouches[0].clientY:tt.clientY,vt=function(Mt,Pt,Rt){var St=(Rt-Pt)/at+Mt;return w.constrain(St,0,st)}(Ue,ze,Pe),rt(vt,Ge,at))});ve.call(xt);var gt=v.behavior.drag().on("dragstart",function(){var tt=v.event.sourceEvent;tt.type==="touchstart"&&(ze=tt.changedTouches[0].clientY,Ue=vt)}).on("drag",function(){var tt=v.event.sourceEvent;tt.type==="touchmove"&&(Pe=tt.changedTouches[0].clientY,vt=function(Mt,Pt,Rt){var St=(Pt-Rt)/at+Mt;return w.constrain(St,0,st)}(Ue,ze,Pe),rt(vt,Ge,at))});_e.call(gt)}function rt(tt,Mt,Pt){Z._scrollY=N._fullLayout[H]._scrollY=tt,s.setTranslate(_e,0,-tt),s.setRect(ve,Z._width,i.scrollBarMargin+tt*Pt,i.scrollBarWidth,Mt),se.select("rect").attr("y",De+tt)}N._context.edits.legendPosition&&(le.classed("cursor-move",!0),f.init({element:le.node(),gd:N,prepFn:function(){var tt=s.getTranslate(le);ce=tt.x,ae=tt.y},moveFn:function(tt,Mt){var Pt=ce+tt,Rt=ae+Mt;s.setTranslate(le,Pt,Rt),Me=f.align(Pt,Z._width,pe.l,pe.l+pe.w,Z.xanchor),Ae=f.align(Rt+Z._height,-Z._height,pe.t+pe.h,pe.t,Z.yanchor)},doneFn:function(){if(Me!==void 0&&Ae!==void 0){var tt={};tt[H+".x"]=Me,tt[H+".y"]=Ae,T.call("_guiRelayout",N,tt)}},clickFn:function(tt,Mt){var Pt=j.selectAll("g.traces").filter(function(){var Rt=this.getBoundingClientRect();return Mt.clientX>=Rt.left&&Mt.clientX<=Rt.right&&Mt.clientY>=Rt.top&&Mt.clientY<=Rt.bottom});Pt.size()>0&&M(N,le,Pt,tt,Mt)}}))}],N)}}function y(N,V,F){var j=N[0],Z=j.width,z=V.entrywidthmode,H=j.trace.legendwidth||V.entrywidth;return z==="fraction"?V._maxWidth*H:F+(H||Z)}function M(N,V,F,j,Z){var z=F.data()[0][0].trace,H={event:Z,node:F.node(),curveNumber:z.index,expandedIndex:z._expandedIndex,data:N.data,layout:N.layout,frames:N._transitionData._frames,config:N._context,fullData:N._fullData,fullLayout:N._fullLayout};z._group&&(H.group=z._group),T.traceIs(z,"pie-like")&&(H.label=F.datum()[0].label);var U=x.triggerHandler(N,"plotly_legendclick",H);if(j===1){if(U===!1)return;V._clickTimeout=setTimeout(function(){N._fullLayout&&r(F,N,j)},N._context.doubleClickDelay)}else j===2&&(V._clickTimeout&&clearTimeout(V._clickTimeout),N._legendMouseDownTime=0,x.triggerHandler(N,"plotly_legenddoubleclick",H)!==!1&&U!==!1&&r(F,N,j))}function h(N,V,F){var j,Z,z=O(F),H=N.data()[0][0],U=H.trace,re=T.traceIs(U,"pie-like"),ee=!F._inHover&&V._context.edits.legendText&&!re,J=F._maxNameLength;H.groupTitle?(j=H.groupTitle.text,Z=H.groupTitle.font):(Z=F.font,F.entries?j=H.text:(j=re?H.label:U.name,U._meta&&(j=w.templateString(j,U._meta))));var Q=w.ensureSingle(N,"text",z+"text");Q.attr("text-anchor","start").call(s.font,Z).text(ee?E(j,J):j);var ne=F.indentation+F.itemwidth+2*i.itemGap;o.positionText(Q,ne,0),ee?Q.call(o.makeEditable,{gd:V,text:j}).call(D,N,V,F).on("edit",function(K){this.text(E(K,J)).call(D,N,V,F);var oe=H.trace._fullInput||{},le={};if(T.hasTransform(oe,"groupby")){var se=T.getTransformIndices(oe,"groupby"),de=se[se.length-1],be=w.keyedContainer(oe,"transforms["+de+"].styles","target","value.name");be.set(H.trace._group,K),le=be.constructUpdate()}else le.name=K;return oe._isShape?T.call("_guiRelayout",V,"shapes["+U.index+"].name",le.name):T.call("_guiRestyle",V,le,U.index)}):D(Q,N,V,F)}function E(N,V){var F=Math.max(4,V);if(N&&N.trim().length>=F/2)return N;for(var j=F-(N=N||"").length;j>0;j--)N+=" ";return N}function k(N,V,F){var j,Z=V._context.doubleClickDelay,z=1,H=w.ensureSingle(N,"rect",F+"toggle",function(U){V._context.staticPlot||U.style("cursor","pointer").attr("pointer-events","all"),U.call(t.fill,"rgba(0,0,0,0)")});V._context.staticPlot||(H.on("mousedown",function(){(j=new Date().getTime())-V._legendMouseDownTime<Z?z+=1:(z=1,V._legendMouseDownTime=j)}),H.on("mouseup",function(){if(!V._dragged&&!V._editing){var U=V._fullLayout[F];new Date().getTime()-V._legendMouseDownTime>Z&&(z=Math.max(z-1,1)),M(V,U,N,z,v.event)}}))}function D(N,V,F,j,Z){j._inHover&&N.attr("data-notex",!0),o.convertToTspans(N,F,function(){(function(z,H,U,re){var ee=z.data()[0][0];if(U._inHover||!ee||ee.trace.showlegend){var J=z.select("g[class*=math-group]"),Q=J.node(),ne=O(U);U||(U=H._fullLayout[ne]);var K,oe,le=U.borderwidth,se=(re===g?U.title.font:ee.groupTitle?ee.groupTitle.font:U.font).size*u;if(Q){var de=s.bBox(Q);K=de.height,oe=de.width,re===g?s.setTranslate(J,le,le+.75*K):s.setTranslate(J,0,.25*K)}else{var be="."+ne+(re===g?"title":"")+"text",_e=z.select(be),xe=o.lineCount(_e),ve=_e.node();if(K=se*xe,oe=ve?s.bBox(ve).width:0,re===g)U.title.side==="left"&&(oe+=2*i.itemGap),o.positionText(_e,le+i.titlePad,le+se);else{var ye=2*i.itemGap+U.indentation+U.itemwidth;ee.groupTitle&&(ye=i.itemGap,oe-=U.indentation+U.itemwidth),o.positionText(_e,ye,-se*((xe-1)/2-.3))}}re===g?(U._titleWidth=oe,U._titleHeight=K):(ee.lineHeight=se,ee.height=Math.max(K,16)+3,ee.width=oe)}else z.remove()})(V,F,j,Z)})}function P(N){return w.isRightAnchor(N)?"right":w.isCenterAnchor(N)?"center":"left"}function L(N){return w.isBottomAnchor(N)?"bottom":w.isMiddleAnchor(N)?"middle":"top"}function O(N){return N._id||"legend"}C.exports=function(N,V){if(V)b(N,V);else{var F=N._fullLayout,j=F._legends;F._infolayer.selectAll('[class^="legend"]').each(function(){var H=v.select(this),U=H.attr("class").split(" ")[0];U.match(m)&&j.indexOf(U)===-1&&H.remove()});for(var Z=0;Z<j.length;Z++){var z=j[Z];b(N,N._fullLayout[z])}}}},35456:function(C,A,e){"use strict";var v=e(24040),w=e(42451);C.exports=function(n,T,x){var f,s,t=T._inHover,o=w.isGrouped(T),r=w.isReversed(T),i={},a=[],u=!1,l={},d=0,c=0;function _(j,Z,z){if(T.visible!==!1&&(!x||j===T._id))if(Z!==""&&w.isGrouped(T))a.indexOf(Z)===-1?(a.push(Z),u=!0,i[Z]=[z]):i[Z].push(z);else{var H="~~i"+d;a.push(H),i[H]=[z],d++}}for(f=0;f<n.length;f++){var p=n[f],g=p[0],m=g.trace,b=m.legend,y=m.legendgroup;if(t||m.visible&&m.showlegend)if(v.traceIs(m,"pie-like"))for(l[y]||(l[y]={}),s=0;s<p.length;s++){var M=p[s].label;l[y][M]||(_(b,y,{label:M,color:p[s].color,i:p[s].i,trace:m,pts:p[s].pts}),l[y][M]=!0,c=Math.max(c,(M||"").length))}else _(b,y,g),c=Math.max(c,(m.name||"").length)}if(!a.length)return[];var h=!u||!o,E=[];for(f=0;f<a.length;f++){var k=i[a[f]];h?E.push(k[0]):E.push(k)}for(h&&(E=[E]),f=0;f<E.length;f++){var D=1/0;for(s=0;s<E[f].length;s++){var P=E[f][s].trace.legendrank;D>P&&(D=P)}E[f][0]._groupMinRank=D,E[f][0]._preGroupSort=f}var L=function(j,Z){return j.trace.legendrank-Z.trace.legendrank||j._preSort-Z._preSort};for(E.forEach(function(j,Z){j[0]._preGroupSort=Z}),E.sort(function(j,Z){return j[0]._groupMinRank-Z[0]._groupMinRank||j[0]._preGroupSort-Z[0]._preGroupSort}),f=0;f<E.length;f++){E[f].forEach(function(j,Z){j._preSort=Z}),E[f].sort(L);var O=E[f][0].trace,N=null;for(s=0;s<E[f].length;s++){var V=E[f][s].trace.legendgrouptitle;if(V&&V.text){N=V,t&&(V.font=T._groupTitleFont);break}}if(r&&E[f].reverse(),N){var F=!1;for(s=0;s<E[f].length;s++)if(v.traceIs(E[f][s].trace,"pie-like")){F=!0;break}E[f].unshift({i:-1,groupTitle:N,noClick:F,trace:{showlegend:O.showlegend,legendgroup:O.legendgroup,visible:T.groupclick==="toggleitem"||O.visible}})}for(s=0;s<E[f].length;s++)E[f][s]=[E[f][s]]}return T._lgroupsLength=E.length,T._maxNameLength=c,E}},33048:function(C,A,e){"use strict";var v=e(24040),w=e(3400),n=w.pushUnique,T=!0;C.exports=function(x,f,s){var t=f._fullLayout;if(!f._dragged&&!f._editing){var o,r=t.legend.itemclick,i=t.legend.itemdoubleclick,a=t.legend.groupclick;if(s===1&&r==="toggle"&&i==="toggleothers"&&T&&f.data&&f._context.showTips&&w.notifier(w._(f,"Double-click on legend to isolate one trace"),"long"),T=!1,s===1?o=r:s===2&&(o=i),o){var u=a==="togglegroup",l=t.hiddenlabels?t.hiddenlabels.slice():[],d=x.data()[0][0];if(!d.groupTitle||!d.noClick){var c=f._fullData,_=(t.shapes||[]).filter(function(Ae){return Ae.showlegend}),p=c.concat(_),g=d.trace;g._isShape&&(g=g._fullInput);var m,b,y,M,h,E=g.legendgroup,k={},D=[],P=[],L=[],O=(t.shapes||[]).map(function(Ae){return Ae._input}),N=!1,V=g.legend,F=g._fullInput;if(F&&F._isShape||!v.traceIs(g,"pie-like")){var j,Z=E&&E.length,z=[];if(Z)for(m=0;m<p.length;m++)(j=p[m]).visible&&j.legendgroup===E&&z.push(m);if(o==="toggle"){var H;switch(g.visible){case!0:H="legendonly";break;case!1:H=!1;break;case"legendonly":H=!0}if(Z)if(u)for(m=0;m<p.length;m++){var U=p[m];U.visible!==!1&&U.legendgroup===E&&Me(U,H)}else Me(g,H);else Me(g,H)}else if(o==="toggleothers"){var re,ee,J,Q,ne=!0;for(m=0;m<p.length;m++)if(re=(Q=p[m])===g,ee=Q.showlegend!==!0,!(re||ee||Z&&Q.legendgroup===E||Q.legend!==V||Q.visible!==!0||v.traceIs(Q,"notLegendIsolatable"))){ne=!1;break}for(m=0;m<p.length;m++)if((Q=p[m]).visible!==!1&&Q.legend===V&&!v.traceIs(Q,"notLegendIsolatable"))switch(g.visible){case"legendonly":Me(Q,!0);break;case!0:J=!!ne||"legendonly",re=Q===g,ee=Q.showlegend!==!0&&!Q.legendgroup,Me(Q,!!(re||Z&&Q.legendgroup===E||ee)||J)}}for(m=0;m<P.length;m++)if(y=P[m]){var K=y.constructUpdate(),oe=Object.keys(K);for(b=0;b<oe.length;b++)M=oe[b],(k[M]=k[M]||[])[L[m]]=K[M]}for(h=Object.keys(k),m=0;m<h.length;m++)for(M=h[m],b=0;b<D.length;b++)k[M].hasOwnProperty(b)||(k[M][b]=void 0);N?v.call("_guiUpdate",f,k,{shapes:O},D):v.call("_guiRestyle",f,k,D)}else{var le=d.label,se=l.indexOf(le);if(o==="toggle")se===-1?l.push(le):l.splice(se,1);else if(o==="toggleothers"){var de=se!==-1,be=[];for(m=0;m<f.calcdata.length;m++){var _e=f.calcdata[m];for(b=0;b<_e.length;b++){var xe=_e[b].label;V===_e[0].trace.legend&&le!==xe&&(l.indexOf(xe)===-1&&(de=!0),n(l,xe),be.push(xe))}}if(!de)for(var ve=0;ve<be.length;ve++){var ye=l.indexOf(be[ve]);ye!==-1&&l.splice(ye,1)}}v.call("_guiRelayout",f,"hiddenlabels",l)}}}}function me(Ae,ce){var ae=D.indexOf(Ae),pe=k.visible;return pe||(pe=k.visible=[]),D.indexOf(Ae)===-1&&(D.push(Ae),ae=D.length-1),pe[ae]=ce,ae}function Me(Ae,ce){if(!d.groupTitle||u){var ae,pe=Ae._fullInput||Ae,De=pe._isShape,ke=pe.index;if(ke===void 0&&(ke=pe._index),v.hasTransform(pe,"groupby")){var Ee=P[ke];if(!Ee){var Ie=v.getTransformIndices(pe,"groupby"),Re=Ie[Ie.length-1];Ee=w.keyedContainer(pe,"transforms["+Re+"].styles","target","value.visible"),P[ke]=Ee}var Ne=Ee.get(Ae._group);Ne===void 0&&(Ne=!0),Ne!==!1&&Ee.set(Ae._group,ce),L[ke]=me(ke,pe.visible!==!1)}else{var ge=pe.visible!==!1&&ce;De?(ae=ge,O[ke].visible=ae,N=!0):me(ke,ge)}}}}},42451:function(C,A){"use strict";A.isGrouped=function(e){return(e.traceorder||"").indexOf("grouped")!==-1},A.isVertical=function(e){return e.orientation!=="h"},A.isReversed=function(e){return(e.traceorder||"").indexOf("reversed")!==-1}},2780:function(C,A,e){"use strict";C.exports={moduleType:"component",name:"legend",layoutAttributes:e(3800),supplyLayoutDefaults:e(77864),draw:e(31140),style:e(2012)}},2012:function(C,A,e){"use strict";var v=e(33428),w=e(24040),n=e(3400),T=n.strTranslate,x=e(43616),f=e(76308),s=e(94288).extractOpts,t=e(43028),o=e(10528),r=e(69656).castOption,i=e(65196);function a(d,c){return(c?"radial":"horizontal")+(d?"":"reversed")}function u(d){var c=d[0].trace,_=c.contours,p=t.hasLines(c),g=t.hasMarkers(c),m=c.visible&&c.fill&&c.fill!=="none",b=!1,y=!1;if(_){var M=_.coloring;M==="lines"?b=!0:p=M==="none"||M==="heatmap"||_.showlines,_.type==="constraint"?m=_._operation!=="=":M!=="fill"&&M!=="heatmap"||(y=!0)}return{showMarker:g,showLine:p,showFill:m,showGradientLine:b,showGradientFill:y,anyLine:p||b,anyFill:m||y}}function l(d,c,_){return d&&n.isArrayOrTypedArray(d)?c:d>_?_:d}C.exports=function(d,c,_){var p=c._fullLayout;_||(_=p.legend);var g=_.itemsizing==="constant",m=_.itemwidth,b=(m+2*i.itemGap)/2,y=T(b,0),M=function(k,D,P,L){var O;if(k+1)O=k;else{if(!(D&&D.width>0))return 0;O=D.width}return g?L:Math.min(O,P)};function h(k,D,P){var L=k[0].trace,O=L.marker||{},N=O.line||{},V=O.cornerradius?"M6,3a3,3,0,0,1-3,3H-3a3,3,0,0,1-3-3V-3a3,3,0,0,1,3-3H3a3,3,0,0,1,3,3Z":"M6,6H-6V-6H6Z",F=P?L.visible&&L.type===P:w.traceIs(L,"bar"),j=v.select(D).select("g.legendpoints").selectAll("path.legend"+P).data(F?[k]:[]);j.enter().append("path").classed("legend"+P,!0).attr("d",V).attr("transform",y),j.exit().remove(),j.each(function(Z){var z=v.select(this),H=Z[0],U=M(H.mlw,O.line,5,2);z.style("stroke-width",U+"px");var re=H.mcc;if(!_._inHover&&"mc"in H){var ee=s(O),J=ee.mid;J===void 0&&(J=(ee.max+ee.min)/2),re=x.tryColorscale(O,"")(J)}var Q=re||H.mc||O.color,ne=O.pattern,K=ne&&x.getPatternAttr(ne.shape,0,"");if(K){var oe=x.getPatternAttr(ne.bgcolor,0,null),le=x.getPatternAttr(ne.fgcolor,0,null),se=ne.fgopacity,de=l(ne.size,8,10),be=l(ne.solidity,.5,1),_e="legend-"+L.uid;z.call(x.pattern,"legend",c,_e,K,de,be,re,ne.fillmode,oe,le,se)}else z.call(f.fill,Q);U&&f.stroke(z,H.mlc||N.color)})}function E(k,D,P){var L=k[0],O=L.trace,N=P?O.visible&&O.type===P:w.traceIs(O,P),V=v.select(D).select("g.legendpoints").selectAll("path.legend"+P).data(N?[k]:[]);if(V.enter().append("path").classed("legend"+P,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",y),V.exit().remove(),V.size()){var F=O.marker||{},j=M(r(F.line.width,L.pts),F.line,5,2),Z="pieLike",z=n.minExtend(O,{marker:{line:{width:j}}},Z),H=n.minExtend(L,{trace:z},Z);o(V,H,z,c)}}d.each(function(k){var D=v.select(this),P=n.ensureSingle(D,"g","layers");P.style("opacity",k[0].trace.opacity);var L=_.indentation,O=_.valign,N=k[0].lineHeight,V=k[0].height;if(O==="middle"&&L===0||!N||!V)P.attr("transform",null);else{var F={top:1,bottom:-1}[O]*(.5*(N-V+3))||0,j=_.indentation;P.attr("transform",T(j,F))}P.selectAll("g.legendfill").data([k]).enter().append("g").classed("legendfill",!0),P.selectAll("g.legendlines").data([k]).enter().append("g").classed("legendlines",!0);var Z=P.selectAll("g.legendsymbols").data([k]);Z.enter().append("g").classed("legendsymbols",!0),Z.selectAll("g.legendpoints").data([k]).enter().append("g").classed("legendpoints",!0)}).each(function(k){var D,P=k[0].trace,L=[];if(P.visible)switch(P.type){case"histogram2d":case"heatmap":L=[["M-15,-2V4H15V-2Z"]],D=!0;break;case"choropleth":case"choroplethmapbox":L=[["M-6,-6V6H6V-6Z"]],D=!0;break;case"densitymapbox":L=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],D="radial";break;case"cone":L=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],D=!1;break;case"streamtube":L=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],D=!1;break;case"surface":L=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],D=!0;break;case"mesh3d":L=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],D=!1;break;case"volume":L=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],D=!0;break;case"isosurface":L=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],D=!1}var O=v.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(L);O.enter().append("path").classed("legend3dandfriends",!0).attr("transform",y).style("stroke-miterlimit",1),O.exit().remove(),O.each(function(N,V){var F,j=v.select(this),Z=s(P),z=Z.colorscale,H=Z.reversescale;if(z){if(!D){var U=z.length;F=V===0?z[H?U-1:0][1]:V===1?z[H?0:U-1][1]:z[Math.floor((U-1)/2)][1]}}else{var re=P.vertexcolor||P.facecolor||P.color;F=n.isArrayOrTypedArray(re)?re[V]||re[0]:re}j.attr("d",N[0]),F?j.call(f.fill,F):j.call(function(ee){if(ee.size()){var J="legendfill-"+P.uid;x.gradient(ee,c,J,a(H,D==="radial"),z,"fill")}})})}).each(function(k){var D=k[0].trace,P=D.type==="waterfall";if(k[0]._distinct&&P){var L=k[0].trace[k[0].dir].marker;return k[0].mc=L.color,k[0].mlw=L.line.width,k[0].mlc=L.line.color,h(k,this,"waterfall")}var O=[];D.visible&&P&&(O=k[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var N=v.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(O);N.enter().append("path").classed("legendwaterfall",!0).attr("transform",y).style("stroke-miterlimit",1),N.exit().remove(),N.each(function(V){var F=v.select(this),j=D[V[0]].marker,Z=M(void 0,j.line,5,2);F.attr("d",V[1]).style("stroke-width",Z+"px").call(f.fill,j.color),Z&&F.call(f.stroke,j.line.color)})}).each(function(k){h(k,this,"funnel")}).each(function(k){h(k,this)}).each(function(k){var D=k[0].trace,P=v.select(this).select("g.legendpoints").selectAll("path.legendbox").data(D.visible&&w.traceIs(D,"box-violin")?[k]:[]);P.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",y),P.exit().remove(),P.each(function(){var L=v.select(this);if(D.boxpoints!=="all"&&D.points!=="all"||f.opacity(D.fillcolor)!==0||f.opacity((D.line||{}).color)!==0){var O=M(void 0,D.line,5,2);L.style("stroke-width",O+"px").call(f.fill,D.fillcolor),O&&f.stroke(L,D.line.color)}else{var N=n.minExtend(D,{marker:{size:g?12:n.constrain(D.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});P.call(x.pointStyle,N,c)}})}).each(function(k){E(k,this,"funnelarea")}).each(function(k){E(k,this,"pie")}).each(function(k){var D,P,L=u(k),O=L.showFill,N=L.showLine,V=L.showGradientLine,F=L.showGradientFill,j=L.anyFill,Z=L.anyLine,z=k[0],H=z.trace,U=s(H),re=U.colorscale,ee=U.reversescale,J=t.hasMarkers(H)||!j?"M5,0":Z?"M5,-2":"M5,-3",Q=v.select(this),ne=Q.select(".legendfill").selectAll("path").data(O||F?[k]:[]);if(ne.enter().append("path").classed("js-fill",!0),ne.exit().remove(),ne.attr("d",J+"h"+m+"v6h-"+m+"z").call(function(le){if(le.size())if(O)x.fillGroupStyle(le,c,!0);else{var se="legendfill-"+H.uid;x.gradient(le,c,se,a(ee),re,"fill")}}),N||V){var K=M(void 0,H.line,10,5);P=n.minExtend(H,{line:{width:K}}),D=[n.minExtend(z,{trace:P})]}var oe=Q.select(".legendlines").selectAll("path").data(N||V?[D]:[]);oe.enter().append("path").classed("js-line",!0),oe.exit().remove(),oe.attr("d",J+(V?"l"+m+",0.0001":"h"+m)).call(N?x.lineGroupStyle:function(le){if(le.size()){var se="legendline-"+H.uid;x.lineGroupStyle(le),x.gradient(le,c,se,a(ee),re,"stroke")}})}).each(function(k){var D,P,L=u(k),O=L.anyFill,N=L.anyLine,V=L.showLine,F=L.showMarker,j=k[0],Z=j.trace,z=!F&&!N&&!O&&t.hasText(Z);function H(oe,le,se,de){var be=n.nestedProperty(Z,oe).get(),_e=n.isArrayOrTypedArray(be)&&le?le(be):be;if(g&&_e&&de!==void 0&&(_e=de),se){if(_e<se[0])return se[0];if(_e>se[1])return se[1]}return _e}function U(oe){return j._distinct&&j.index&&oe[j.index]?oe[j.index]:oe[0]}if(F||z||V){var re={},ee={};if(F){re.mc=H("marker.color",U),re.mx=H("marker.symbol",U),re.mo=H("marker.opacity",n.mean,[.2,1]),re.mlc=H("marker.line.color",U),re.mlw=H("marker.line.width",n.mean,[0,5],2),ee.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var J=H("marker.size",n.mean,[2,16],12);re.ms=J,ee.marker.size=J}V&&(ee.line={width:H("line.width",U,[0,10],5)}),z&&(re.tx="Aa",re.tp=H("textposition",U),re.ts=10,re.tc=H("textfont.color",U),re.tf=H("textfont.family",U),re.tw=H("textfont.weight",U),re.ty=H("textfont.style",U),re.tv=H("textfont.variant",U)),D=[n.minExtend(j,re)],(P=n.minExtend(Z,ee)).selectedpoints=null,P.texttemplate=null}var Q=v.select(this).select("g.legendpoints"),ne=Q.selectAll("path.scatterpts").data(F?D:[]);ne.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",y),ne.exit().remove(),ne.call(x.pointStyle,P,c),F&&(D[0].mrc=3);var K=Q.selectAll("g.pointtext").data(z?D:[]);K.enter().append("g").classed("pointtext",!0).append("text").attr("transform",y),K.exit().remove(),K.selectAll("text").call(x.textPointStyle,P,c)}).each(function(k){var D=k[0].trace,P=v.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(D.visible&&D.type==="candlestick"?[k,k]:[]);P.enter().append("path").classed("legendcandle",!0).attr("d",function(L,O){return O?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",y).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(L,O){var N=v.select(this),V=D[O?"increasing":"decreasing"],F=M(void 0,V.line,5,2);N.style("stroke-width",F+"px").call(f.fill,V.fillcolor),F&&f.stroke(N,V.line.color)})}).each(function(k){var D=k[0].trace,P=v.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(D.visible&&D.type==="ohlc"?[k,k]:[]);P.enter().append("path").classed("legendohlc",!0).attr("d",function(L,O){return O?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",y).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(L,O){var N=v.select(this),V=D[O?"increasing":"decreasing"],F=M(void 0,V.line,5,2);N.style("fill","none").call(x.dashLine,V.line.dash,F),F&&f.stroke(N,V.line.color)})})}},66540:function(C,A,e){"use strict";e(76052),C.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},44248:function(C,A,e){"use strict";var v=e(24040),w=e(7316),n=e(79811),T=e(9224),x=e(4016).eraseActiveShape,f=e(3400),s=f._,t=C.exports={};function o(p,g){var m,b,y=g.currentTarget,M=y.getAttribute("data-attr"),h=y.getAttribute("data-val")||!0,E=p._fullLayout,k={},D=n.list(p,null,!0),P=E._cartesianSpikesEnabled;if(M==="zoom"){var L,O=h==="in"?.5:2,N=(1+O)/2,V=(1-O)/2;for(b=0;b<D.length;b++)if(!(m=D[b]).fixedrange)if(L=m._name,h==="auto")k[L+".autorange"]=!0;else if(h==="reset")m._rangeInitial0===void 0&&m._rangeInitial1===void 0?k[L+".autorange"]=!0:m._rangeInitial0===void 0?(k[L+".autorange"]=m._autorangeInitial,k[L+".range"]=[null,m._rangeInitial1]):m._rangeInitial1===void 0?(k[L+".range"]=[m._rangeInitial0,null],k[L+".autorange"]=m._autorangeInitial):k[L+".range"]=[m._rangeInitial0,m._rangeInitial1],m._showSpikeInitial!==void 0&&(k[L+".showspikes"]=m._showSpikeInitial,P!=="on"||m._showSpikeInitial||(P="off"));else{var F=[m.r2l(m.range[0]),m.r2l(m.range[1])],j=[N*F[0]+V*F[1],N*F[1]+V*F[0]];k[L+".range[0]"]=m.l2r(j[0]),k[L+".range[1]"]=m.l2r(j[1])}}else M!=="hovermode"||h!=="x"&&h!=="y"||(h=E._isHoriz?"y":"x",y.setAttribute("data-val",h)),k[M]=h;E._cartesianSpikesEnabled=P,v.call("_guiRelayout",p,k)}function r(p,g){for(var m=g.currentTarget,b=m.getAttribute("data-attr"),y=m.getAttribute("data-val")||!0,M=p._fullLayout._subplots.gl3d||[],h={},E=b.split("."),k=0;k<M.length;k++)h[M[k]+"."+E[1]]=y;var D=y==="pan"?y:"zoom";h.dragmode=D,v.call("_guiRelayout",p,h)}function i(p,g){for(var m=g.currentTarget.getAttribute("data-attr"),b=m==="resetLastSave",y=m==="resetDefault",M=p._fullLayout,h=M._subplots.gl3d||[],E={},k=0;k<h.length;k++){var D,P=h[k],L=P+".camera",O=P+".aspectratio",N=P+".aspectmode",V=M[P]._scene;b?(E[L+".up"]=V.viewInitial.up,E[L+".eye"]=V.viewInitial.eye,E[L+".center"]=V.viewInitial.center,D=!0):y&&(E[L+".up"]=null,E[L+".eye"]=null,E[L+".center"]=null,D=!0),D&&(E[O+".x"]=V.viewInitial.aspectratio.x,E[O+".y"]=V.viewInitial.aspectratio.y,E[O+".z"]=V.viewInitial.aspectratio.z,E[N]=V.viewInitial.aspectmode)}v.call("_guiRelayout",p,E)}function a(p,g){var m=g.currentTarget,b=m._previousVal,y=p._fullLayout,M=y._subplots.gl3d||[],h=["xaxis","yaxis","zaxis"],E={},k={};if(b)k=b,m._previousVal=null;else{for(var D=0;D<M.length;D++){var P=M[D],L=y[P],O=P+".hovermode";E[O]=L.hovermode,k[O]=!1;for(var N=0;N<3;N++){var V=h[N],F=P+"."+V+".showspikes";k[F]=!1,E[F]=L[V].showspikes}}m._previousVal=E}return k}function u(p,g){for(var m=g.currentTarget,b=m.getAttribute("data-attr"),y=m.getAttribute("data-val")||!0,M=p._fullLayout,h=M._subplots.geo||[],E=0;E<h.length;E++){var k=h[E],D=M[k];if(b==="zoom"){var P=D.projection.scale,L=y==="in"?2*P:.5*P;v.call("_guiRelayout",p,k+".projection.scale",L)}}b==="reset"&&_(p,"geo")}function l(p){var g=p._fullLayout;return!g.hovermode&&(g._has("cartesian")?g._isHoriz?"y":"x":"closest")}function d(p){var g=l(p);v.call("_guiRelayout",p,"hovermode",g)}function c(p,g){for(var m=g.currentTarget.getAttribute("data-val"),b=p._fullLayout,y=b._subplots.mapbox||[],M={},h=0;h<y.length;h++){var E=y[h],k=b[E].zoom,D=m==="in"?1.05*k:k/1.05;M[E+".zoom"]=D}v.call("_guiRelayout",p,M)}function _(p,g){for(var m=p._fullLayout,b=m._subplots[g]||[],y={},M=0;M<b.length;M++)for(var h=b[M],E=m[h]._subplot.viewInitial,k=Object.keys(E),D=0;D<k.length;D++){var P=k[D];y[h+"."+P]=E[P]}v.call("_guiRelayout",p,y)}t.toImage={name:"toImage",title:function(p){var g=(p._context.toImageButtonOptions||{}).format||"png";return s(p,g==="png"?"Download plot as a png":"Download plot")},icon:T.camera,click:function(p){var g=p._context.toImageButtonOptions,m={format:g.format||"png"};f.notifier(s(p,"Taking snapshot - this may take a few seconds"),"long"),m.format!=="svg"&&f.isIE()&&(f.notifier(s(p,"IE only supports svg.  Changing format to svg."),"long"),m.format="svg"),["filename","width","height","scale"].forEach(function(b){b in g&&(m[b]=g[b])}),v.call("downloadImage",p,m).then(function(b){f.notifier(s(p,"Snapshot succeeded")+" - "+b,"long")}).catch(function(){f.notifier(s(p,"Sorry, there was a problem downloading your snapshot!"),"long")})}},t.sendDataToCloud={name:"sendDataToCloud",title:function(p){return s(p,"Edit in Chart Studio")},icon:T.disk,click:function(p){w.sendDataToCloud(p)}},t.editInChartStudio={name:"editInChartStudio",title:function(p){return s(p,"Edit in Chart Studio")},icon:T.pencil,click:function(p){w.sendDataToCloud(p)}},t.zoom2d={name:"zoom2d",_cat:"zoom",title:function(p){return s(p,"Zoom")},attr:"dragmode",val:"zoom",icon:T.zoombox,click:o},t.pan2d={name:"pan2d",_cat:"pan",title:function(p){return s(p,"Pan")},attr:"dragmode",val:"pan",icon:T.pan,click:o},t.select2d={name:"select2d",_cat:"select",title:function(p){return s(p,"Box Select")},attr:"dragmode",val:"select",icon:T.selectbox,click:o},t.lasso2d={name:"lasso2d",_cat:"lasso",title:function(p){return s(p,"Lasso Select")},attr:"dragmode",val:"lasso",icon:T.lasso,click:o},t.drawclosedpath={name:"drawclosedpath",title:function(p){return s(p,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:T.drawclosedpath,click:o},t.drawopenpath={name:"drawopenpath",title:function(p){return s(p,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:T.drawopenpath,click:o},t.drawline={name:"drawline",title:function(p){return s(p,"Draw line")},attr:"dragmode",val:"drawline",icon:T.drawline,click:o},t.drawrect={name:"drawrect",title:function(p){return s(p,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:T.drawrect,click:o},t.drawcircle={name:"drawcircle",title:function(p){return s(p,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:T.drawcircle,click:o},t.eraseshape={name:"eraseshape",title:function(p){return s(p,"Erase active shape")},icon:T.eraseshape,click:x},t.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(p){return s(p,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:o},t.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(p){return s(p,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:o},t.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(p){return s(p,"Autoscale")},attr:"zoom",val:"auto",icon:T.autoscale,click:o},t.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(p){return s(p,"Reset axes")},attr:"zoom",val:"reset",icon:T.home,click:o},t.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(p){return s(p,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:o},t.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(p){return s(p,"Compare data on hover")},attr:"hovermode",val:function(p){return p._fullLayout._isHoriz?"y":"x"},icon:T.tooltip_compare,gravity:"ne",click:o},t.zoom3d={name:"zoom3d",_cat:"zoom",title:function(p){return s(p,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:T.zoombox,click:r},t.pan3d={name:"pan3d",_cat:"pan",title:function(p){return s(p,"Pan")},attr:"scene.dragmode",val:"pan",icon:T.pan,click:r},t.orbitRotation={name:"orbitRotation",title:function(p){return s(p,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:T["3d_rotate"],click:r},t.tableRotation={name:"tableRotation",title:function(p){return s(p,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:T["z-axis"],click:r},t.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(p){return s(p,"Reset camera to default")},attr:"resetDefault",icon:T.home,click:i},t.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(p){return s(p,"Reset camera to last save")},attr:"resetLastSave",icon:T.movie,click:i},t.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(p){return s(p,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function(p,g){var m=a(p,g);v.call("_guiRelayout",p,m)}},t.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(p){return s(p,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:u},t.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(p){return s(p,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:u},t.resetGeo={name:"resetGeo",_cat:"reset",title:function(p){return s(p,"Reset")},attr:"reset",val:null,icon:T.autoscale,click:u},t.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(p){return s(p,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:d},t.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(p){return s(p,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:d},t.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(p){return s(p,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:d},t.resetViewSankey={name:"resetSankeyGroup",title:function(p){return s(p,"Reset view")},icon:T.home,click:function(p){for(var g={"node.groups":[],"node.x":[],"node.y":[]},m=0;m<p._fullData.length;m++){var b=p._fullData[m]._viewInitial;g["node.groups"].push(b.node.groups.slice()),g["node.x"].push(b.node.x.slice()),g["node.y"].push(b.node.y.slice())}v.call("restyle",p,g)}},t.toggleHover={name:"toggleHover",title:function(p){return s(p,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function(p,g){var m=a(p,g);m.hovermode=l(p),v.call("_guiRelayout",p,m)}},t.resetViews={name:"resetViews",title:function(p){return s(p,"Reset views")},icon:T.home,click:function(p,g){var m=g.currentTarget;m.setAttribute("data-attr","zoom"),m.setAttribute("data-val","reset"),o(p,g),m.setAttribute("data-attr","resetLastSave"),i(p,g),_(p,"geo"),_(p,"mapbox")}},t.toggleSpikelines={name:"toggleSpikelines",title:function(p){return s(p,"Toggle Spike Lines")},icon:T.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(p){var g=p._fullLayout,m=g._cartesianSpikesEnabled;g._cartesianSpikesEnabled=m==="on"?"off":"on",v.call("_guiRelayout",p,function(b){for(var y=b._fullLayout._cartesianSpikesEnabled==="on",M=n.list(b,null,!0),h={},E=0;E<M.length;E++){var k=M[E];h[k._name+".showspikes"]=!!y||k._showSpikeInitial}return h}(p))}},t.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(p){return s(p,"Reset view")},attr:"reset",icon:T.home,click:function(p){_(p,"mapbox")}},t.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(p){return s(p,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:c},t.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(p){return s(p,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:c}},76052:function(C,A,e){"use strict";var v=e(44248),w=Object.keys(v),n=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],T=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(n),x=[];w.forEach(function(f){(function(s){if(T.indexOf(s._cat||s.name)===-1){var t=s.name,o=(s._cat||s.name).toLowerCase();x.indexOf(t)===-1&&x.push(t),x.indexOf(o)===-1&&x.push(o)}})(v[f])}),x.sort(),C.exports={DRAW_MODES:n,backButtons:T,foreButtons:x}},90824:function(C,A,e){"use strict";var v=e(3400),w=e(76308),n=e(31780),T=e(66540);C.exports=function(x,f){var s=x.modebar||{},t=n.newContainer(f,"modebar");function o(i,a){return v.coerce(s,t,T,i,a)}o("orientation"),o("bgcolor",w.addOpacity(f.paper_bgcolor,.5));var r=w.contrast(w.rgb(f.modebar.bgcolor));o("color",w.addOpacity(r,.3)),o("activecolor",w.addOpacity(r,.7)),o("uirevision",f.uirevision),o("add"),o("remove")}},45460:function(C,A,e){"use strict";C.exports={moduleType:"component",name:"modebar",layoutAttributes:e(66540),supplyLayoutDefaults:e(90824),manage:e(18816)}},18816:function(C,A,e){"use strict";var v=e(79811),w=e(43028),n=e(24040),T=e(10624).isUnifiedHover,x=e(66400),f=e(44248),s=e(76052).DRAW_MODES,t=e(3400).extendDeep;C.exports=function(o){var r=o._fullLayout,i=o._context,a=r._modeBar;if(i.displayModeBar||i.watermark){if(!Array.isArray(i.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(i.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var u,l=i.modeBarButtons;u=Array.isArray(l)&&l.length?function(d){for(var c=t([],d),_=0;_<c.length;_++)for(var p=c[_],g=0;g<p.length;g++){var m=p[g];if(typeof m=="string"){if(f[m]===void 0)throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));c[_][g]=f[m]}}return c}(l):!i.displayModeBar&&i.watermark?[]:function(d){var c=d._fullLayout,_=d._fullData,p=d._context;function g(be,_e){if(typeof _e=="string"){if(_e.toLowerCase()===be.toLowerCase())return!0}else{var xe=_e.name,ve=_e._cat||_e.name;if(xe===be||ve===be.toLowerCase())return!0}return!1}var m=c.modebar.add;typeof m=="string"&&(m=[m]);var b=c.modebar.remove;typeof b=="string"&&(b=[b]);var y=p.modeBarButtonsToAdd.concat(m.filter(function(be){for(var _e=0;_e<p.modeBarButtonsToRemove.length;_e++)if(g(be,p.modeBarButtonsToRemove[_e]))return!1;return!0})),M=p.modeBarButtonsToRemove.concat(b.filter(function(be){for(var _e=0;_e<p.modeBarButtonsToAdd.length;_e++)if(g(be,p.modeBarButtonsToAdd[_e]))return!1;return!0})),h=c._has("cartesian"),E=c._has("gl3d"),k=c._has("geo"),D=c._has("pie"),P=c._has("funnelarea"),L=c._has("gl2d"),O=c._has("ternary"),N=c._has("mapbox"),V=c._has("polar"),F=c._has("smith"),j=c._has("sankey"),Z=function(be){for(var _e=v.list({_fullLayout:be},null,!0),xe=0;xe<_e.length;xe++)if(!_e[xe].fixedrange)return!1;return!0}(c),z=T(c.hovermode),H=[];function U(be){if(be.length){for(var _e=[],xe=0;xe<be.length;xe++){for(var ve=be[xe],ye=f[ve],me=ye.name.toLowerCase(),Me=(ye._cat||ye.name).toLowerCase(),Ae=!1,ce=0;ce<M.length;ce++){var ae=M[ce].toLowerCase();if(ae===me||ae===Me){Ae=!0;break}}Ae||_e.push(f[ve])}H.push(_e)}}var re=["toImage"];p.showEditInChartStudio?re.push("editInChartStudio"):p.showSendToCloud&&re.push("sendDataToCloud"),U(re);var ee=[],J=[],Q=[],ne=[];(h||L||D||P||O)+k+E+N+V+F>1?(J=["toggleHover"],Q=["resetViews"]):k?(ee=["zoomInGeo","zoomOutGeo"],J=["hoverClosestGeo"],Q=["resetGeo"]):E?(J=["hoverClosest3d"],Q=["resetCameraDefault3d","resetCameraLastSave3d"]):N?(ee=["zoomInMapbox","zoomOutMapbox"],J=["toggleHover"],Q=["resetViewMapbox"]):L?J=["hoverClosestGl2d"]:D?J=["hoverClosestPie"]:j?(J=["hoverClosestCartesian","hoverCompareCartesian"],Q=["resetViewSankey"]):J=["toggleHover"],h&&(J=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(be){for(var _e=0;_e<be.length;_e++)if(!n.traceIs(be[_e],"noHover"))return!1;return!0}(_)||z)&&(J=[]),!h&&!L||Z||(ee=["zoomIn2d","zoomOut2d","autoScale2d"],Q[0]!=="resetViews"&&(Q=["resetScale2d"])),E?ne=["zoom3d","pan3d","orbitRotation","tableRotation"]:(h||L)&&!Z||O?ne=["zoom2d","pan2d"]:N||k?ne=["pan2d"]:V&&(ne=["zoom2d"]),function(be){for(var _e=!1,xe=0;xe<be.length&&!_e;xe++){var ve=be[xe];ve._module&&ve._module.selectPoints&&(n.traceIs(ve,"scatter-like")?(w.hasMarkers(ve)||w.hasText(ve))&&(_e=!0):n.traceIs(ve,"box-violin")&&ve.boxpoints!=="all"&&ve.points!=="all"||(_e=!0))}return _e}(_)&&ne.push("select2d","lasso2d");var K=[],oe=function(be){K.indexOf(be)===-1&&J.indexOf(be)!==-1&&K.push(be)};if(Array.isArray(y)){for(var le=[],se=0;se<y.length;se++){var de=y[se];typeof de=="string"?(de=de.toLowerCase(),s.indexOf(de)!==-1?(c._has("mapbox")||c._has("cartesian"))&&ne.push(de):de==="togglespikelines"?oe("toggleSpikelines"):de==="togglehover"?oe("toggleHover"):de==="hovercompare"?oe("hoverCompareCartesian"):de==="hoverclosest"?(oe("hoverClosestCartesian"),oe("hoverClosestGeo"),oe("hoverClosest3d"),oe("hoverClosestGl2d"),oe("hoverClosestPie")):de==="v1hovermode"&&(oe("toggleHover"),oe("hoverClosestCartesian"),oe("hoverCompareCartesian"),oe("hoverClosestGeo"),oe("hoverClosest3d"),oe("hoverClosestGl2d"),oe("hoverClosestPie"))):le.push(de)}y=le}return U(ne),U(ee.concat(Q)),U(K),function(be,_e){if(_e.length)if(Array.isArray(_e[0]))for(var xe=0;xe<_e.length;xe++)be.push(_e[xe]);else be.push(_e);return be}(H,y)}(o),a?a.update(o,u):r._modeBar=x(o,u)}else a&&(a.destroy(),delete r._modeBar)}},66400:function(C,A,e){"use strict";var v=e(33428),w=e(38248),n=e(3400),T=e(9224),x=e(25788).version,f=new DOMParser;function s(o){this.container=o.container,this.element=document.createElement("div"),this.update(o.graphInfo,o.buttons),this.container.appendChild(this.element)}var t=s.prototype;t.update=function(o,r){this.graphInfo=o;var i=this.graphInfo._context,a=this.graphInfo._fullLayout,u="modebar-"+a._uid;this.element.setAttribute("id",u),this._uid=u,this.element.className="modebar",i.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),a.modebar.orientation==="v"&&(this.element.className+=" vertical",r=r.reverse());var l=a.modebar,d=i.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";n.deleteRelatedStyleRule(u),n.addRelatedStyleRule(u,d+"#"+u+" .modebar-group","background-color: "+l.bgcolor),n.addRelatedStyleRule(u,"#"+u+" .modebar-btn .icon path","fill: "+l.color),n.addRelatedStyleRule(u,"#"+u+" .modebar-btn:hover .icon path","fill: "+l.activecolor),n.addRelatedStyleRule(u,"#"+u+" .modebar-btn.active .icon path","fill: "+l.activecolor);var c=!this.hasButtons(r),_=this.hasLogo!==i.displaylogo,p=this.locale!==i.locale;if(this.locale=i.locale,(c||_||p)&&(this.removeAllButtons(),this.updateButtons(r),i.watermark||i.displaylogo)){var g=this.getLogo();i.watermark&&(g.className=g.className+" watermark"),a.modebar.orientation==="v"?this.element.insertBefore(g,this.element.childNodes[0]):this.element.appendChild(g),this.hasLogo=!0}this.updateActiveButton()},t.updateButtons=function(o){var r=this;this.buttons=o,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(i){var a=r.createGroup();i.forEach(function(u){var l=u.name;if(!l)throw new Error("must provide button 'name' in button config");if(r.buttonsNames.indexOf(l)!==-1)throw new Error("button name '"+l+"' is taken");r.buttonsNames.push(l);var d=r.createButton(u);r.buttonElements.push(d),a.appendChild(d)}),r.element.appendChild(a)})},t.createGroup=function(){var o=document.createElement("div");return o.className="modebar-group",o},t.createButton=function(o){var r=this,i=document.createElement("a");i.setAttribute("rel","tooltip"),i.className="modebar-btn";var a=o.title;a===void 0?a=o.name:typeof a=="function"&&(a=a(this.graphInfo)),(a||a===0)&&i.setAttribute("data-title",a),o.attr!==void 0&&i.setAttribute("data-attr",o.attr);var u=o.val;if(u!==void 0&&(typeof u=="function"&&(u=u(this.graphInfo)),i.setAttribute("data-val",u)),typeof o.click!="function")throw new Error("must provide button 'click' function in button config");i.addEventListener("click",function(d){o.click(r.graphInfo,d),r.updateActiveButton(d.currentTarget)}),i.setAttribute("data-toggle",o.toggle||!1),o.toggle&&v.select(i).classed("active",!0);var l=o.icon;return typeof l=="function"?i.appendChild(l()):i.appendChild(this.createIcon(l||T.question)),i.setAttribute("data-gravity",o.gravity||"n"),i},t.createIcon=function(o){var r,i=w(o.height)?Number(o.height):o.ascent-o.descent,a="http://www.w3.org/2000/svg";if(o.path){(r=document.createElementNS(a,"svg")).setAttribute("viewBox",[0,0,o.width,i].join(" ")),r.setAttribute("class","icon");var u=document.createElementNS(a,"path");u.setAttribute("d",o.path),o.transform?u.setAttribute("transform",o.transform):o.ascent!==void 0&&u.setAttribute("transform","matrix(1 0 0 -1 0 "+o.ascent+")"),r.appendChild(u)}return o.svg&&(r=f.parseFromString(o.svg,"application/xml").childNodes[0]),r.setAttribute("height","1em"),r.setAttribute("width","1em"),r},t.updateActiveButton=function(o){var r=this.graphInfo._fullLayout,i=o!==void 0?o.getAttribute("data-attr"):null;this.buttonElements.forEach(function(a){var u=a.getAttribute("data-val")||!0,l=a.getAttribute("data-attr"),d=a.getAttribute("data-toggle")==="true",c=v.select(a);if(d)l===i&&c.classed("active",!c.classed("active"));else{var _=l===null?l:n.nestedProperty(r,l).get();c.classed("active",_===u)}})},t.hasButtons=function(o){var r=this.buttons;if(!r||o.length!==r.length)return!1;for(var i=0;i<o.length;++i){if(o[i].length!==r[i].length)return!1;for(var a=0;a<o[i].length;a++)if(o[i][a].name!==r[i][a].name)return!1}return!0},t.getLogo=function(){var o=this.createGroup(),r=document.createElement("a");return r.href="https://plotly.com/",r.target="_blank",r.setAttribute("data-title",n._(this.graphInfo,"Produced with Plotly.js")+" (v"+x+")"),r.className="modebar-btn plotlyjsicon modebar-btn--logo",r.appendChild(this.createIcon(T.newplotlylogo)),o.appendChild(r),o},t.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},t.destroy=function(){n.removeElement(this.container.querySelector(".modebar")),n.deleteRelatedStyleRule(this._uid)},C.exports=function(o,r){var i=o._fullLayout,a=new s({graphInfo:o,container:i._modebardiv.node(),buttons:r});return i._privateplot&&v.select(a.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),a}},26680:function(C,A,e){"use strict";var v=e(25376),w=e(22548),n=(0,e(31780).templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});C.exports={visible:{valType:"boolean",editType:"plot"},buttons:n,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:v({editType:"plot"}),bgcolor:{valType:"color",dflt:w.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:w.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},85984:function(C){"use strict";C.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},22148:function(C,A,e){"use strict";var v=e(3400),w=e(76308),n=e(31780),T=e(51272),x=e(26680),f=e(85984);function s(t,o,r,i){var a=i.calendar;function u(d,c){return v.coerce(t,o,x.buttons,d,c)}if(u("visible")){var l=u("step");l!=="all"&&(!a||a==="gregorian"||l!=="month"&&l!=="year"?u("stepmode"):o.stepmode="backward",u("count")),u("label")}}C.exports=function(t,o,r,i,a){var u=t.rangeselector||{},l=n.newContainer(o,"rangeselector");function d(p,g){return v.coerce(u,l,x,p,g)}if(d("visible",T(u,l,{name:"buttons",handleItemDefaults:s,calendar:a}).length>0)){var c=function(p,g,m){for(var b=m.filter(function(E){return g[E].anchor===p._id}),y=0,M=0;M<b.length;M++){var h=g[b[M]].domain;h&&(y=Math.max(h[1],y))}return[p.domain[0],y+f.yPad]}(o,r,i);d("x",c[0]),d("y",c[1]),v.noneOrAll(t,o,["x","y"]),d("xanchor"),d("yanchor"),v.coerceFont(d,"font",r.font);var _=d("bgcolor");d("activecolor",w.contrast(_,f.lightAmount,f.darkAmount)),d("bordercolor"),d("borderwidth")}}},50216:function(C,A,e){"use strict";var v=e(33428),w=e(24040),n=e(7316),T=e(76308),x=e(43616),f=e(3400),s=f.strTranslate,t=e(72736),o=e(79811),r=e(84284),i=r.LINE_SPACING,a=r.FROM_TL,u=r.FROM_BR,l=e(85984),d=e(48040);function c(g){return g._id}function _(g,m,b){var y=f.ensureSingle(g,"rect","selector-rect",function(M){M.attr("shape-rendering","crispEdges")});y.attr({rx:l.rx,ry:l.ry}),y.call(T.stroke,m.bordercolor).call(T.fill,function(M,h){return h._isActive||h._isHovered?M.activecolor:M.bgcolor}(m,b)).style("stroke-width",m.borderwidth+"px")}function p(g,m,b,y){var M,h;f.ensureSingle(g,"text","selector-text",function(E){E.attr("text-anchor","middle")}).call(x.font,m.font).text((M=b,h=y._fullLayout._meta,M.label?h?f.templateString(M.label,h):M.label:M.step==="all"?"all":M.count+M.step.charAt(0))).call(function(E){t.convertToTspans(E,y)})}C.exports=function(g){var m=g._fullLayout._infolayer.selectAll(".rangeselector").data(function(b){for(var y=o.list(b,"x",!0),M=[],h=0;h<y.length;h++){var E=y[h];E.rangeselector&&E.rangeselector.visible&&M.push(E)}return M}(g),c);m.enter().append("g").classed("rangeselector",!0),m.exit().remove(),m.style({cursor:"pointer","pointer-events":"all"}),m.each(function(b){var y=v.select(this),M=b,h=M.rangeselector,E=y.selectAll("g.button").data(f.filterVisible(h.buttons));E.enter().append("g").classed("button",!0),E.exit().remove(),E.each(function(k){var D=v.select(this),P=d(M,k);k._isActive=function(L,O,N){if(O.step==="all")return L.autorange===!0;var V=Object.keys(N);return L.range[0]===N[V[0]]&&L.range[1]===N[V[1]]}(M,k,P),D.call(_,h,k),D.call(p,h,k,g),D.on("click",function(){g._dragged||w.call("_guiRelayout",g,P)}),D.on("mouseover",function(){k._isHovered=!0,D.call(_,h,k)}),D.on("mouseout",function(){k._isHovered=!1,D.call(_,h,k)})}),function(k,D,P,L,O){var N=0,V=0,F=P.borderwidth;D.each(function(){var re=v.select(this).select(".selector-text"),ee=P.font.size*i,J=Math.max(ee*t.lineCount(re),16)+3;V=Math.max(V,J)}),D.each(function(){var re=v.select(this),ee=re.select(".selector-rect"),J=re.select(".selector-text"),Q=J.node()&&x.bBox(J.node()).width,ne=P.font.size*i,K=t.lineCount(J),oe=Math.max(Q+10,l.minButtonWidth);re.attr("transform",s(F+N,F)),ee.attr({x:0,y:0,width:oe,height:V}),t.positionText(J,oe/2,V/2-(K-1)*ne/2+3),N+=oe+5});var j=k._fullLayout._size,Z=j.l+j.w*P.x,z=j.t+j.h*(1-P.y),H="left";f.isRightAnchor(P)&&(Z-=N,H="right"),f.isCenterAnchor(P)&&(Z-=N/2,H="center");var U="top";f.isBottomAnchor(P)&&(z-=V,U="bottom"),f.isMiddleAnchor(P)&&(z-=V/2,U="middle"),N=Math.ceil(N),V=Math.ceil(V),Z=Math.round(Z),z=Math.round(z),n.autoMargin(k,L+"-range-selector",{x:P.x,y:P.y,l:N*a[H],r:N*u[H],b:V*u[U],t:V*a[U]}),O.attr("transform",s(Z,z))}(g,E,h,M._name,y)})}},48040:function(C,A,e){"use strict";var v=e(73220),w=e(3400).titleCase;C.exports=function(n,T){var x=n._name,f={};if(T.step==="all")f[x+".autorange"]=!0;else{var s=function(t,o){var r,i=t.range,a=new Date(t.r2l(i[1])),u=o.step,l=v["utc"+w(u)],d=o.count;switch(o.stepmode){case"backward":r=t.l2r(+l.offset(a,-d));break;case"todate":var c=l.offset(a,-d);r=t.l2r(+l.ceil(c))}return[r,i[1]]}(n,T);f[x+".range[0]"]=s[0],f[x+".range[1]"]=s[1]}return f}},41152:function(C,A,e){"use strict";C.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e(26680)}}},layoutAttributes:e(26680),handleDefaults:e(22148),draw:e(50216)}},11200:function(C,A,e){"use strict";var v=e(22548);C.exports={bgcolor:{valType:"color",dflt:v.background,editType:"plot"},bordercolor:{valType:"color",dflt:v.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},26652:function(C,A,e){"use strict";var v=e(79811).list,w=e(19280).getAutoRange,n=e(74636);C.exports=function(T){for(var x=v(T,"x",!0),f=0;f<x.length;f++){var s=x[f],t=s[n.name];t&&t.visible&&t.autorange&&(t._input.autorange=!0,t._input.range=t.range=w(T,s))}}},74636:function(C){"use strict";C.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},94040:function(C,A,e){"use strict";var v=e(3400),w=e(31780),n=e(79811),T=e(11200),x=e(10936);C.exports=function(f,s,t){var o=f[t],r=s[t];if(o.rangeslider||s._requestRangeslider[r._id]){v.isPlainObject(o.rangeslider)||(o.rangeslider={});var i,a,u=o.rangeslider,l=w.newContainer(r,"rangeslider");if(y("visible")){y("bgcolor",s.plot_bgcolor),y("bordercolor"),y("borderwidth"),y("thickness"),y("autorange",!r.isValidRange(u.range)),y("range");var d=s._subplots;if(d)for(var c=d.cartesian.filter(function(h){return h.substr(0,h.indexOf("y"))===n.name2id(t)}).map(function(h){return h.substr(h.indexOf("y"),h.length)}),_=v.simpleMap(c,n.id2name),p=0;p<_.length;p++){var g=_[p];i=u[g]||{},a=w.newContainer(l,g,"yaxis");var m,b=s[g];i.range&&b.isValidRange(i.range)&&(m="fixed"),M("rangemode",m)!=="match"&&M("range",b.range.slice())}l._input=u}}function y(h,E){return v.coerce(u,l,T,h,E)}function M(h,E){return v.coerce(i,a,x,h,E)}}},20060:function(C,A,e){"use strict";var v=e(33428),w=e(24040),n=e(7316),T=e(3400),x=T.strTranslate,f=e(43616),s=e(76308),t=e(81668),o=e(57952),r=e(79811),i=e(86476),a=e(93972),u=e(74636);function l(b){return typeof b.clientX=="number"?b.clientX:b.touches&&b.touches.length>0?b.touches[0].clientX:0}function d(b,y,M,h){var E=T.ensureSingle(b,"rect",u.bgClassName,function(L){L.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),k=h.borderwidth%2==0?h.borderwidth:h.borderwidth-1,D=-h._offsetShift,P=f.crispRound(y,h.borderwidth);E.attr({width:h._width+k,height:h._height+k,transform:x(D,D),"stroke-width":P}).call(s.stroke,h.bordercolor).call(s.fill,h.bgcolor)}function c(b,y,M,h){var E=y._fullLayout;T.ensureSingleById(E._topdefs,"clipPath",h._clipId,function(k){k.append("rect").attr({x:0,y:0})}).select("rect").attr({width:h._width,height:h._height})}function _(b,y,M,h){var E,k=y.calcdata,D=b.selectAll("g."+u.rangePlotClassName).data(M._subplotsWith,T.identity);D.enter().append("g").attr("class",function(P){return u.rangePlotClassName+" "+P}).call(f.setClipUrl,h._clipId,y),D.order(),D.exit().remove(),D.each(function(P,L){var O=v.select(this),N=L===0,V=r.getFromId(y,P,"y"),F=V._name,j=h[F],Z={data:[],layout:{xaxis:{type:M.type,domain:[0,1],range:h.range.slice(),calendar:M.calendar},width:h._width,height:h._height,margin:{t:0,b:0,l:0,r:0}},_context:y._context};M.rangebreaks&&(Z.layout.xaxis.rangebreaks=M.rangebreaks),Z.layout[F]={type:V.type,domain:[0,1],range:j.rangemode!=="match"?j.range.slice():V.range.slice(),calendar:V.calendar},V.rangebreaks&&(Z.layout[F].rangebreaks=V.rangebreaks),n.supplyDefaults(Z);var z=Z._fullLayout.xaxis,H=Z._fullLayout[F];z.clearCalc(),z.setScale(),H.clearCalc(),H.setScale();var U={id:P,plotgroup:O,xaxis:z,yaxis:H,isRangePlot:!0};N?E=U:(U.mainplot="xy",U.mainplotinfo=E),o.rangePlot(y,U,function(re,ee){for(var J=[],Q=0;Q<re.length;Q++){var ne=re[Q],K=ne[0].trace;K.xaxis+K.yaxis===ee&&J.push(ne)}return J}(k,P))})}function p(b,y,M,h,E){T.ensureSingle(b,"rect",u.maskMinClassName,function(k){k.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",h._height).call(s.fill,u.maskColor),T.ensureSingle(b,"rect",u.maskMaxClassName,function(k){k.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",h._height).call(s.fill,u.maskColor),E.rangemode!=="match"&&(T.ensureSingle(b,"rect",u.maskMinOppAxisClassName,function(k){k.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",h._width).call(s.fill,u.maskOppAxisColor),T.ensureSingle(b,"rect",u.maskMaxOppAxisClassName,function(k){k.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",h._width).style("border-top",u.maskOppBorder).call(s.fill,u.maskOppAxisColor))}function g(b,y,M,h){y._context.staticPlot||T.ensureSingle(b,"rect",u.slideBoxClassName,function(E){E.attr({y:0,cursor:u.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:h._height,fill:u.slideBoxFill})}function m(b,y,M,h){var E=T.ensureSingle(b,"g",u.grabberMinClassName),k=T.ensureSingle(b,"g",u.grabberMaxClassName),D={x:0,width:u.handleWidth,rx:u.handleRadius,fill:s.background,stroke:s.defaultLine,"stroke-width":u.handleStrokeWidth,"shape-rendering":"crispEdges"},P={y:Math.round(h._height/4),height:Math.round(h._height/2)};T.ensureSingle(E,"rect",u.handleMinClassName,function(O){O.attr(D)}).attr(P),T.ensureSingle(k,"rect",u.handleMaxClassName,function(O){O.attr(D)}).attr(P);var L={width:u.grabAreaWidth,x:0,y:0,fill:u.grabAreaFill,cursor:y._context.staticPlot?void 0:u.grabAreaCursor};T.ensureSingle(E,"rect",u.grabAreaMinClassName,function(O){O.attr(L)}).attr("height",h._height),T.ensureSingle(k,"rect",u.grabAreaMaxClassName,function(O){O.attr(L)}).attr("height",h._height)}C.exports=function(b){for(var y=b._fullLayout,M=y._rangeSliderData,h=0;h<M.length;h++){var E=M[h][u.name];E._clipId=E._id+"-"+y._uid}var k=y._infolayer.selectAll("g."+u.containerClassName).data(M,function(D){return D._name});k.exit().each(function(D){var P=D[u.name];y._topdefs.select("#"+P._clipId).remove()}).remove(),M.length!==0&&(k.enter().append("g").classed(u.containerClassName,!0).attr("pointer-events","all"),k.each(function(D){var P=v.select(this),L=D[u.name],O=y[r.id2name(D.anchor)],N=L[r.id2name(D.anchor)];if(L.range){var V,F=T.simpleMap(L.range,D.r2l),j=T.simpleMap(D.range,D.r2l);V=j[0]<j[1]?[Math.min(F[0],j[0]),Math.max(F[1],j[1])]:[Math.max(F[0],j[0]),Math.min(F[1],j[1])],L.range=L._input.range=T.simpleMap(V,D.l2r)}D.cleanRange("rangeslider.range");var Z=y._size,z=D.domain;L._width=Z.w*(z[1]-z[0]);var H=Math.round(Z.l+Z.w*z[0]),U=Math.round(Z.t+Z.h*(1-D._counterDomainMin)+(D.side==="bottom"?D._depth:0)+L._offsetShift+u.extraPad);P.attr("transform",x(H,U)),L._rl=T.simpleMap(L.range,D.r2l);var re=L._rl[0],ee=L._rl[1],J=ee-re;if(L.p2d=function(_e){return _e/L._width*J+re},L.d2p=function(_e){return(_e-re)/J*L._width},D.rangebreaks){var Q=D.locateBreaks(re,ee);if(Q.length){var ne,K,oe=0;for(ne=0;ne<Q.length;ne++)oe+=(K=Q[ne]).max-K.min;var le=L._width/(ee-re-oe),se=[-le*re];for(ne=0;ne<Q.length;ne++)K=Q[ne],se.push(se[se.length-1]-le*(K.max-K.min));for(L.d2p=function(_e){for(var xe=se[0],ve=0;ve<Q.length;ve++){var ye=Q[ve];if(_e>=ye.max)xe=se[ve+1];else if(_e<ye.min)break}return xe+le*_e},ne=0;ne<Q.length;ne++)(K=Q[ne]).pmin=L.d2p(K.min),K.pmax=L.d2p(K.max);L.p2d=function(_e){for(var xe=se[0],ve=0;ve<Q.length;ve++){var ye=Q[ve];if(_e>=ye.pmax)xe=se[ve+1];else if(_e<ye.pmin)break}return(_e-xe)/le}}}if(N.rangemode!=="match"){var de=O.r2l(N.range[0]),be=O.r2l(N.range[1])-de;L.d2pOppAxis=function(_e){return(_e-de)/be*L._height}}P.call(d,b,D,L).call(c,b,D,L).call(_,b,D,L).call(p,b,D,L,N).call(g,b,D,L).call(m,b,D,L),function(_e,xe,ve,ye){if(!xe._context.staticPlot){var me=_e.select("rect."+u.slideBoxClassName).node(),Me=_e.select("rect."+u.grabAreaMinClassName).node(),Ae=_e.select("rect."+u.grabAreaMaxClassName).node();_e.on("mousedown",ce),_e.on("touchstart",ce)}function ce(){var ae=v.event,pe=ae.target,De=l(ae),ke=De-_e.node().getBoundingClientRect().left,Ee=ye.d2p(ve._rl[0]),Ie=ye.d2p(ve._rl[1]),Re=i.coverSlip();function Ne(we){var Ce,ze,Pe,Ue=+l(we)-De;switch(pe){case me:if(Pe="ew-resize",Ee+Ue>ve._length||Ie+Ue<0)return;Ce=Ee+Ue,ze=Ie+Ue;break;case Me:if(Pe="col-resize",Ee+Ue>ve._length)return;Ce=Ee+Ue,ze=Ie;break;case Ae:if(Pe="col-resize",Ie+Ue<0)return;Ce=Ee,ze=Ie+Ue;break;default:Pe="ew-resize",Ce=ke,ze=ke+Ue}if(ze<Ce){var Ge=ze;ze=Ce,Ce=Ge}ye._pixelMin=Ce,ye._pixelMax=ze,a(v.select(Re),Pe),function(Xe,st,at,vt){function xt(tt){return at.l2r(T.constrain(tt,vt._rl[0],vt._rl[1]))}var gt=xt(vt.p2d(vt._pixelMin)),rt=xt(vt.p2d(vt._pixelMax));window.requestAnimationFrame(function(){w.call("_guiRelayout",st,at._name+".range",[gt,rt])})}(0,xe,ve,ye)}function ge(){Re.removeEventListener("mousemove",Ne),Re.removeEventListener("mouseup",ge),this.removeEventListener("touchmove",Ne),this.removeEventListener("touchend",ge),T.removeElement(Re)}this.addEventListener("touchmove",Ne),this.addEventListener("touchend",ge),Re.addEventListener("mousemove",Ne),Re.addEventListener("mouseup",ge)}}(P,b,D,L),function(_e,xe,ve,ye,me,Me){var Ae=u.handleWidth/2;function ce(we){return T.constrain(we,0,ye._width)}function ae(we){return T.constrain(we,0,ye._height)}function pe(we){return T.constrain(we,-Ae,ye._width+Ae)}var De=ce(ye.d2p(ve._rl[0])),ke=ce(ye.d2p(ve._rl[1]));if(_e.select("rect."+u.slideBoxClassName).attr("x",De).attr("width",ke-De),_e.select("rect."+u.maskMinClassName).attr("width",De),_e.select("rect."+u.maskMaxClassName).attr("x",ke).attr("width",ye._width-ke),Me.rangemode!=="match"){var Ee=ye._height-ae(ye.d2pOppAxis(me._rl[1])),Ie=ye._height-ae(ye.d2pOppAxis(me._rl[0]));_e.select("rect."+u.maskMinOppAxisClassName).attr("x",De).attr("height",Ee).attr("width",ke-De),_e.select("rect."+u.maskMaxOppAxisClassName).attr("x",De).attr("y",Ie).attr("height",ye._height-Ie).attr("width",ke-De),_e.select("rect."+u.slideBoxClassName).attr("y",Ee).attr("height",Ie-Ee)}var Re=.5,Ne=Math.round(pe(De-Ae))-Re,ge=Math.round(pe(ke-Ae))+Re;_e.select("g."+u.grabberMinClassName).attr("transform",x(Ne,Re)),_e.select("g."+u.grabberMaxClassName).attr("transform",x(ge,Re))}(P,0,D,L,O,N),D.side==="bottom"&&t.draw(b,D._id+"title",{propContainer:D,propName:D._name+".title",placeholder:y._dfltTitle.x,attributes:{x:D._offset+D._length/2,y:U+L._height+L._offsetShift+10+1.5*D.title.font.size,"text-anchor":"middle"}})}))}},97944:function(C,A,e){"use strict";var v=e(79811),w=e(72736),n=e(74636),T=e(84284).LINE_SPACING,x=n.name;function f(s){var t=s&&s[x];return t&&t.visible}A.isVisible=f,A.makeData=function(s){var t=v.list({_fullLayout:s},"x",!0),o=s.margin,r=[];if(!s._has("gl2d"))for(var i=0;i<t.length;i++){var a=t[i];if(f(a)){r.push(a);var u=a[x];u._id=x+a._id,u._height=(s.height-o.b-o.t)*u.thickness,u._offsetShift=Math.floor(u.borderwidth/2)}}s._rangeSliderData=r},A.autoMarginOpts=function(s,t){var o=s._fullLayout,r=t[x],i=t._id.charAt(0),a=0,u=0;return t.side==="bottom"&&(a=t._depth,t.title.text!==o._dfltTitle[i]&&(u=1.5*t.title.font.size+10+r._offsetShift,u+=(t.title.text.match(w.BR_TAG_ALL)||[]).length*t.title.font.size*T)),{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:r._height+a+Math.max(o.margin.b,u),pad:n.extraPad+2*r._offsetShift}}},49692:function(C,A,e){"use strict";var v=e(3400),w=e(11200),n=e(10936),T=e(97944);C.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:v.extendFlat({},w,{yaxis:n})}}},layoutAttributes:e(11200),handleDefaults:e(94040),calcAutorange:e(26652),draw:e(20060),isVisible:T.isVisible,makeData:T.makeData,autoMarginOpts:T.autoMarginOpts}},10936:function(C){"use strict";C.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},93956:function(C,A,e){"use strict";var v=e(13916),w=e(52904).line,n=e(98192).u,T=e(92880).extendFlat,x=e(67824).overrideAll,f=e(31780).templatedArray;e(36208),C.exports=x(f("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:T({},v.xref,{}),yref:T({},v.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:w.color,width:T({},w.width,{min:1,dflt:1}),dash:T({},n,{dflt:"dot"})}}),"arraydraw","from-root")},83280:function(C){"use strict";C.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},74224:function(C,A,e){"use strict";var v=e(3400),w=e(54460),n=e(51272),T=e(93956),x=e(65152);function f(s,t,o){function r(D,P){return v.coerce(s,t,T,D,P)}var i=r("path"),a=r("type",i?"path":"rect")!=="path";a&&delete t.path,r("opacity"),r("line.color"),r("line.width"),r("line.dash");for(var u=["x","y"],l=0;l<2;l++){var d,c,_,p=u[l],g={_fullLayout:o},m=w.coerceRef(s,t,g,p);if((d=w.getFromId(g,m))._selectionIndices.push(t._index),_=x.rangeToShapePosition(d),c=x.shapePositionToRange(d),a){var b=p+"0",y=p+"1",M=s[b],h=s[y];s[b]=c(s[b],!0),s[y]=c(s[y],!0),w.coercePosition(t,g,r,m,b),w.coercePosition(t,g,r,m,y);var E=t[b],k=t[y];E!==void 0&&k!==void 0&&(t[b]=_(E),t[y]=_(k),s[b]=M,s[y]=h)}}a&&v.noneOrAll(s,t,["x0","x1","y0","y1"])}C.exports=function(s,t){n(s,t,{name:"selections",handleItemDefaults:f});for(var o=t.selections,r=0;r<o.length;r++){var i=o[r];i&&i.path===void 0&&(i.x0!==void 0&&i.x1!==void 0&&i.y0!==void 0&&i.y1!==void 0||(t.selections[r]=null))}}},23640:function(C,A,e){"use strict";var v=e(9856).readPaths,w=e(55496),n=e(1936).clearOutlineControllers,T=e(76308),x=e(43616),f=e(31780).arrayEditor,s=e(65152),t=s.getPathString;function o(l){var d=l._fullLayout;for(var c in n(l),d._selectionLayer.selectAll("path").remove(),d._plots){var _=d._plots[c].selectionLayer;_&&_.selectAll("path").remove()}for(var p=0;p<d.selections.length;p++)i(l,p)}function r(l){return l._context.editSelection}function i(l,d){l._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+d+'"]').remove();var c=s.makeSelectionsOptionsAndPlotinfo(l,d),_=c.options,p=c.plotinfo;_._input&&function(g){var m=t(l,_),b={"data-index":d,"fill-rule":"evenodd",d:m},y=_.opacity,M="rgba(0,0,0,0)",h=_.line.color||T.contrast(l._fullLayout.plot_bgcolor),E=_.line.width,k=_.line.dash;E||(E=5,k="solid");var D=r(l)&&l._fullLayout._activeSelectionIndex===d;D&&(M=l._fullLayout.activeselection.fillcolor,y=l._fullLayout.activeselection.opacity);for(var P=[],L=1;L>=0;L--){var O=g.append("path").attr(b).style("opacity",L?.1:y).call(T.stroke,h).call(T.fill,M).call(x.dashLine,L?"solid":k,L?4+E:E);if(a(O,l,_),D){var N=f(l.layout,"selections",_);O.style({cursor:"move"});var V={element:O.node(),plotinfo:p,gd:l,editHelpers:N,isActiveSelection:!0},F=v(m,l);w(F,O,V)}else O.style("pointer-events",L?"all":"none");P[L]=O}var j=P[0];P[1].node().addEventListener("click",function(){return function(Z,z){if(r(Z)){var H=+z.node().getAttribute("data-index");if(H>=0){if(H===Z._fullLayout._activeSelectionIndex)return void u(Z);Z._fullLayout._activeSelectionIndex=H,Z._fullLayout._deactivateSelection=u,o(Z)}}}(l,j)})}(l._fullLayout._selectionLayer)}function a(l,d,c){var _=c.xref+c.yref;x.setClipUrl(l,"clip"+d._fullLayout._uid+_,d)}function u(l){r(l)&&l._fullLayout._activeSelectionIndex>=0&&(n(l),delete l._fullLayout._activeSelectionIndex,o(l))}C.exports={draw:o,drawOne:i,activateLastSelection:function(l){if(r(l)){var d=l._fullLayout.selections.length-1;l._fullLayout._activeSelectionIndex=d,l._fullLayout._deactivateSelection=u,o(l)}}}},34200:function(C,A,e){"use strict";var v=e(98192).u,w=e(92880).extendFlat;C.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:w({},v,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},81004:function(C){"use strict";C.exports=function(A,e,v){v("newselection.mode"),v("newselection.line.width")&&(v("newselection.line.color"),v("newselection.line.dash")),v("activeselection.fillcolor"),v("activeselection.opacity")}},5968:function(C,A,e){"use strict";var v=e(72760).selectMode,w=e(1936).clearOutline,n=e(9856),T=n.readPaths,x=n.writePaths,f=n.fixDatesForPaths;C.exports=function(s,t){if(s.length){var o=s[0][0];if(o){var r=o.getAttribute("d"),i=t.gd,a=i._fullLayout.newselection,u=t.plotinfo,l=u.xaxis,d=u.yaxis,c=t.isActiveSelection,_=t.dragmode,p=(i.layout||{}).selections||[];if(!v(_)&&c!==void 0){var g=i._fullLayout._activeSelectionIndex;if(g<p.length)switch(i._fullLayout.selections[g].type){case"rect":_="select";break;case"path":_="lasso"}}var m,b=T(r,i,u,c),y={xref:l._id,yref:d._id,opacity:a.opacity,line:{color:a.line.color,width:a.line.width,dash:a.line.dash}};b.length===1&&(m=b[0]),m&&m.length===5&&_==="select"?(y.type="rect",y.x0=m[0][1],y.y0=m[0][2],y.x1=m[2][1],y.y1=m[2][2]):(y.type="path",l&&d&&f(b,l,d),y.path=x(b),m=null),w(i);for(var M=t.editHelpers,h=(M||{}).modifyItem,E=[],k=0;k<p.length;k++){var D=i._fullLayout.selections[k];if(D){if(E[k]=D._input,c!==void 0&&k===i._fullLayout._activeSelectionIndex){var P=y;switch(D.type){case"rect":h("x0",P.x0),h("x1",P.x1),h("y0",P.y0),h("y1",P.y1);break;case"path":h("path",P.path)}}}else E[k]=D}return c===void 0?(E.push(y),E):M?M.getUpdateObj():{}}}}},5840:function(C,A,e){"use strict";var v=e(3400).strTranslate;function w(n,T){switch(n.type){case"log":return n.p2d(T);case"date":return n.p2r(T,0,n.calendar);default:return n.p2r(T)}}C.exports={p2r:w,r2p:function(n,T){switch(n.type){case"log":return n.d2p(T);case"date":return n.r2p(T,0,n.calendar);default:return n.r2p(T)}},axValue:function(n){var T=n._id.charAt(0)==="y"?1:0;return function(x){return w(n,x[T])}},getTransform:function(n){return v(n.xaxis._offset,n.yaxis._offset)}}},22676:function(C,A,e){"use strict";var v=e(23640),w=e(43156);C.exports={moduleType:"component",name:"selections",layoutAttributes:e(93956),supplyLayoutDefaults:e(74224),supplyDrawNewSelectionDefaults:e(81004),includeBasePlot:e(36632)("selections"),draw:v.draw,drawOne:v.drawOne,reselect:w.reselect,prepSelect:w.prepSelect,clearOutline:w.clearOutline,clearSelectionsCache:w.clearSelectionsCache,selectOnClick:w.selectOnClick}},43156:function(C,A,e){"use strict";var v=e(14756),w=e(61456),n=e(24040),T=e(43616).dashStyle,x=e(76308),f=e(93024),s=e(10624).makeEventData,t=e(72760),o=t.freeMode,r=t.rectMode,i=t.drawMode,a=t.openMode,u=t.selectMode,l=e(65152),d=e(85448),c=e(55496),_=e(1936).clearOutline,p=e(9856),g=p.handleEllipse,m=p.readPaths,b=e(93940).newShapes,y=e(5968),M=e(23640).activateLastSelection,h=e(3400),E=h.sorterAsc,k=e(92065),D=e(91200),P=e(79811).getFromId,L=e(73696),O=e(39172).redrawReglTraces,N=e(83280),V=N.MINSELECT,F=k.filter,j=k.tester,Z=e(5840),z=Z.p2r,H=Z.axValue,U=Z.getTransform;function re(Ne){return Ne.subplot!==void 0}function ee(Ne,ge,we,Ce,ze,Pe,Ue){var Ge,Xe,st,at,vt,xt,gt,rt,tt,Mt=ge._hoverdata,Pt=ge._fullLayout.clickmode.indexOf("event")>-1,Rt=[];if(function($e){return $e&&Array.isArray($e)&&$e[0].hoverOnBox!==!0}(Mt)){K(Ne,ge,Pe);var St=function($e,lt){var it,Be,je=$e[0],ot=-1,Ze=[];for(Be=0;Be<lt.length;Be++)if(it=lt[Be],je.fullData._expandedIndex===it.cd[0].trace._expandedIndex){if(je.hoverOnBox===!0)break;je.pointNumber!==void 0?ot=je.pointNumber:je.binNumber!==void 0&&(ot=je.binNumber,Ze=je.pointNumbers);break}return{pointNumber:ot,pointNumbers:Ze,searchInfo:it}}(Mt,Ge=se(ge,we,Ce,ze));if(St.pointNumbers.length>0?function($e,lt){var it,Be,je,ot=[];for(je=0;je<$e.length;je++)(it=$e[je]).cd[0].trace.selectedpoints&&it.cd[0].trace.selectedpoints.length>0&&ot.push(it);if(ot.length===1&&ot[0]===lt.searchInfo&&(Be=lt.searchInfo.cd[0].trace).selectedpoints.length===lt.pointNumbers.length){for(je=0;je<lt.pointNumbers.length;je++)if(Be.selectedpoints.indexOf(lt.pointNumbers[je])<0)return!1;return!0}return!1}(Ge,St):function($e){var lt,it,Be=0;for(it=0;it<$e.length;it++)if((lt=$e[it].cd[0].trace).selectedpoints&&(lt.selectedpoints.length>1||(Be+=lt.selectedpoints.length)>1))return!1;return Be===1}(Ge)&&(xt=be(St))){for(Ue&&Ue.remove(),tt=0;tt<Ge.length;tt++)(Xe=Ge[tt])._module.selectPoints(Xe,!1);_e(ge,Ge),oe(Pe),Pt&&Re(ge)}else{for(gt=Ne.shiftKey&&(xt!==void 0?xt:be(St)),st=function($e,lt,it){return{pointNumber:$e,searchInfo:lt,subtract:!!it}}(St.pointNumber,St.searchInfo,gt),at=ne(Pe.selectionDefs.concat([st])),tt=0;tt<Ge.length;tt++)if(vt=ve(Ge[tt]._module.selectPoints(Ge[tt],at),Ge[tt]),Rt.length)for(var Ye=0;Ye<vt.length;Ye++)Rt.push(vt[Ye]);else Rt=vt;if(_e(ge,Ge,rt={points:Rt}),st&&Pe&&Pe.selectionDefs.push(st),Ue){var Ke=Pe.mergedPolygons,Ve=a(Pe.dragmode);c(ye(Ke,Ve),Ue,Pe)}Pt&&Ie(ge,rt)}}}function J(Ne){return"pointNumber"in Ne&&"searchInfo"in Ne}function Q(Ne){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(ge,we,Ce,ze){var Pe=Ne.searchInfo.cd[0].trace._expandedIndex;return ze.cd[0].trace._expandedIndex===Pe&&Ce===Ne.pointNumber},isRect:!1,degenerate:!1,subtract:!!Ne.subtract}}function ne(Ne){if(Ne.length){for(var ge=[],we=J(Ne[0])?0:Ne[0][0][0],Ce=we,ze=J(Ne[0])?0:Ne[0][0][1],Pe=ze,Ue=0;Ue<Ne.length;Ue++)if(J(Ne[Ue]))ge.push(Q(Ne[Ue]));else{var Ge=j(Ne[Ue]);Ge.subtract=!!Ne[Ue].subtract,ge.push(Ge),we=Math.min(we,Ge.xmin),Ce=Math.max(Ce,Ge.xmax),ze=Math.min(ze,Ge.ymin),Pe=Math.max(Pe,Ge.ymax)}return{xmin:we,xmax:Ce,ymin:ze,ymax:Pe,pts:[],contains:function(Xe,st,at,vt){for(var xt=!1,gt=0;gt<ge.length;gt++)ge[gt].contains(Xe,st,at,vt)&&(xt=!ge[gt].subtract);return xt},isRect:!1,degenerate:!1}}}function K(Ne,ge,we){var Ce=ge._fullLayout,ze=we.plotinfo,Pe=we.dragmode,Ue=Ce._lastSelectedSubplot&&Ce._lastSelectedSubplot===ze.id,Ge=(Ne.shiftKey||Ne.altKey)&&!(i(Pe)&&a(Pe));Ue&&Ge&&ze.selection&&ze.selection.selectionDefs&&!we.selectionDefs?(we.selectionDefs=ze.selection.selectionDefs,we.mergedPolygons=ze.selection.mergedPolygons):Ge&&ze.selection||oe(we),Ue||(_(ge),Ce._lastSelectedSubplot=ze.id)}function oe(Ne,ge){var we=Ne.dragmode,Ce=Ne.plotinfo,ze=Ne.gd;(function(vt){return vt._fullLayout._activeShapeIndex>=0})(ze)&&ze._fullLayout._deactivateShape(ze),function(vt){return vt._fullLayout._activeSelectionIndex>=0}(ze)&&ze._fullLayout._deactivateSelection(ze);var Pe=ze._fullLayout._zoomlayer,Ue=i(we),Ge=u(we);if(Ue||Ge){var Xe,st,at=Pe.selectAll(".select-outline-"+Ce.id);at&&ze._fullLayout._outlining&&(Ue&&(Xe=b(at,Ne)),Xe&&n.call("_guiRelayout",ze,{shapes:Xe}),Ge&&!re(Ne)&&(st=y(at,Ne)),st&&(ze._fullLayout._noEmitSelectedAtStart=!0,n.call("_guiRelayout",ze,{selections:st}).then(function(){ge&&M(ze)})),ze._fullLayout._outlining=!1)}Ce.selection={},Ce.selection.selectionDefs=Ne.selectionDefs=[],Ce.selection.mergedPolygons=Ne.mergedPolygons=[]}function le(Ne){return Ne._id}function se(Ne,ge,we,Ce){if(!Ne.calcdata)return[];var ze,Pe,Ue,Ge=[],Xe=ge.map(le),st=we.map(le);for(Ue=0;Ue<Ne.calcdata.length;Ue++)if((Pe=(ze=Ne.calcdata[Ue])[0].trace).visible===!0&&Pe._module&&Pe._module.selectPoints)if(!re({subplot:Ce})||Pe.subplot!==Ce&&Pe.geo!==Ce)if(Pe.type==="splom"){if(Pe._xaxes[Xe[0]]&&Pe._yaxes[st[0]]){var at=de(Pe._module,ze,ge[0],we[0]);at.scene=Ne._fullLayout._splomScenes[Pe.uid],Ge.push(at)}}else if(Pe.type==="sankey"){var vt=de(Pe._module,ze,ge[0],we[0]);Ge.push(vt)}else{if(!(Xe.indexOf(Pe.xaxis)!==-1||Pe._xA&&Pe._xA.overlaying)||!(st.indexOf(Pe.yaxis)!==-1||Pe._yA&&Pe._yA.overlaying))continue;Ge.push(de(Pe._module,ze,P(Ne,Pe.xaxis),P(Ne,Pe.yaxis)))}else Ge.push(de(Pe._module,ze,ge[0],we[0]));return Ge}function de(Ne,ge,we,Ce){return{_module:Ne,cd:ge,xaxis:we,yaxis:Ce}}function be(Ne){var ge=Ne.searchInfo.cd[0].trace,we=Ne.pointNumber,Ce=Ne.pointNumbers,ze=Ce.length>0?Ce[0]:we;return!!ge.selectedpoints&&ge.selectedpoints.indexOf(ze)>-1}function _e(Ne,ge,we){var Ce,ze;for(Ce=0;Ce<ge.length;Ce++){var Pe=ge[Ce].cd[0].trace._fullInput,Ue=Ne._fullLayout._tracePreGUI[Pe.uid]||{};Ue.selectedpoints===void 0&&(Ue.selectedpoints=Pe._input.selectedpoints||null)}if(we){var Ge=we.points||[];for(Ce=0;Ce<ge.length;Ce++)(ze=ge[Ce].cd[0].trace)._input.selectedpoints=ze._fullInput.selectedpoints=[],ze._fullInput!==ze&&(ze.selectedpoints=[]);for(var Xe=0;Xe<Ge.length;Xe++){var st=Ge[Xe],at=st.data,vt=st.fullData,xt=st.pointIndex,gt=st.pointIndices;gt?([].push.apply(at.selectedpoints,gt),ze._fullInput!==ze&&[].push.apply(vt.selectedpoints,gt)):(at.selectedpoints.push(xt),ze._fullInput!==ze&&vt.selectedpoints.push(xt))}}else for(Ce=0;Ce<ge.length;Ce++)delete(ze=ge[Ce].cd[0].trace).selectedpoints,delete ze._input.selectedpoints,ze._fullInput!==ze&&delete ze._fullInput.selectedpoints;(function(rt,tt){for(var Mt=!1,Pt=0;Pt<tt.length;Pt++){var Rt=tt[Pt],St=Rt.cd;n.traceIs(St[0].trace,"regl")&&(Mt=!0);var Ye=Rt._module,Ke=Ye.styleOnSelect||Ye.style;Ke&&(Ke(rt,St,St[0].node3),St[0].nodeRangePlot3&&Ke(rt,St,St[0].nodeRangePlot3))}Mt&&(L(rt),O(rt))})(Ne,ge)}function xe(Ne,ge,we){for(var Ce=(we?v.difference:v.union)({regions:Ne},{regions:[ge]}).regions.reverse(),ze=0;ze<Ce.length;ze++){var Pe=Ce[ze];Pe.subtract=pe(Pe,Ce.slice(0,ze))}return Ce}function ve(Ne,ge){if(Array.isArray(Ne))for(var we=ge.cd,Ce=ge.cd[0].trace,ze=0;ze<Ne.length;ze++)Ne[ze]=s(Ne[ze],Ce,we);return Ne}function ye(Ne,ge){for(var we=[],Ce=0;Ce<Ne.length;Ce++){we[Ce]=[];for(var ze=0;ze<Ne[Ce].length;ze++){we[Ce][ze]=[],we[Ce][ze][0]=ze?"L":"M";for(var Pe=0;Pe<Ne[Ce][ze].length;Pe++)we[Ce][ze].push(Ne[Ce][ze][Pe])}ge||we[Ce].push(["Z",we[Ce][0][1],we[Ce][0][2]])}return we}function me(Ne,ge){for(var we,Ce,ze=[],Pe=[],Ue=0;Ue<ge.length;Ue++){var Ge=ge[Ue];Ce=Ge._module.selectPoints(Ge,Ne),Pe.push(Ce),we=ve(Ce,Ge),ze=ze.concat(we)}return ze}function Me(Ne,ge,we,Ce,ze){var Pe,Ue,Ge,Xe=!!Ce;ze&&(Pe=ze.plotinfo,Ue=ze.xaxes[0]._id,Ge=ze.yaxes[0]._id);var st=[],at=[],vt=ae(Ne),xt=Ne._fullLayout;if(Pe){var gt=xt._zoomlayer,rt=xt.dragmode,tt=i(rt),Mt=u(rt);if(tt||Mt){var Pt=P(Ne,Ue,"x"),Rt=P(Ne,Ge,"y");if(Pt&&Rt){var St=gt.selectAll(".select-outline-"+Pe.id);if(St&&Ne._fullLayout._outlining&&St.length){for(var Ye=St[0][0].getAttribute("d"),Ke=m(Ye,Ne,Pe),Ve=[],$e=0;$e<Ke.length;$e++){for(var lt=Ke[$e],it=[],Be=0;Be<lt.length;Be++)it.push([De(Pt,lt[Be][1]),De(Rt,lt[Be][2])]);it.xref=Ue,it.yref=Ge,it.subtract=pe(it,Ve),Ve.push(it)}vt=vt.concat(Ve)}}}}var je=Ue&&Ge?[Ue+Ge]:xt._subplots.cartesian;(function(Pn){var Cn=Pn.calcdata;if(Cn)for(var Mn=0;Mn<Cn.length;Mn++){var Bn=Cn[Mn][0].trace,Nn=Pn._fullLayout._splomScenes;if(Nn){var rr=Nn[Bn.uid];rr&&(rr.selectBatch=[])}}})(Ne);for(var ot={},Ze=0;Ze<je.length;Ze++){var dt=je[Ze],mt=dt.indexOf("y"),yt=dt.slice(0,mt),ht=dt.slice(mt),kt=Ue&&Ge?we:void 0;if(kt=ce(vt,yt,ht,kt)){var _t=Ce;if(!Xe){var Et=P(Ne,yt,"x"),Lt=P(Ne,ht,"y");_t=se(Ne,[Et],[Lt],dt);for(var Ot=0;Ot<_t.length;Ot++){var Ft=_t[Ot],Zt=Ft.cd[0],Ht=Zt.trace;if(Ft._module.name==="scattergl"&&!Zt.t.xpx){var Ut=Ht.x,Wt=Ht.y,nn=Ht._length;Zt.t.xpx=[],Zt.t.ypx=[];for(var On=0;On<nn;On++)Zt.t.xpx[On]=Et.c2p(Ut[On]),Zt.t.ypx[On]=Lt.c2p(Wt[On])}Ft._module.name==="splom"&&(ot[Ht.uid]||(ot[Ht.uid]=!0))}}var kn=me(kt,_t);st=st.concat(kn),at=at.concat(_t)}}var gn={points:st};_e(Ne,at,gn);var Jt=xt.clickmode.indexOf("event")>-1&&ge;if(!Pe&&ge){var un=ae(Ne,!0);if(un.length){var tn=un[0].xref,hn=un[0].yref;if(tn&&hn){var bn=ke(un);Ee([P(Ne,tn,"x"),P(Ne,hn,"y")])(gn,bn)}}Ne._fullLayout._noEmitSelectedAtStart?Ne._fullLayout._noEmitSelectedAtStart=!1:Jt&&Ie(Ne,gn),xt._reselect=!1}if(!Pe&&xt._deselect){var wn=xt._deselect;(function(Pn,Cn,Mn){for(var Bn=0;Bn<Mn.length;Bn++){var Nn=Mn[Bn];if(Nn.xaxis&&Nn.xaxis._id===Pn&&Nn.yaxis&&Nn.yaxis._id===Cn)return!0}return!1})(Ue=wn.xref,Ge=wn.yref,at)||Ae(Ne,Ue,Ge,Ce),Jt&&(gn.points.length?Ie(Ne,gn):Re(Ne)),xt._deselect=!1}return{eventData:gn,selectionTesters:we}}function Ae(Ne,ge,we,Ce){Ce=se(Ne,[P(Ne,ge,"x")],[P(Ne,we,"y")],ge+we);for(var ze=0;ze<Ce.length;ze++){var Pe=Ce[ze];Pe._module.selectPoints(Pe,!1)}_e(Ne,Ce)}function ce(Ne,ge,we,Ce){for(var ze,Pe=0;Pe<Ne.length;Pe++){var Ue=Ne[Pe];ge===Ue.xref&&we===Ue.yref&&(ze?Ce=ne(ze=xe(ze,Ue,!!Ue.subtract)):(ze=[Ue],Ce=j(Ue)))}return Ce}function ae(Ne,ge){for(var we=[],Ce=Ne._fullLayout,ze=Ce.selections,Pe=ze.length,Ue=0;Ue<Pe;Ue++)if(!ge||Ue===Ce._activeSelectionIndex){var Ge=ze[Ue];if(Ge){var Xe,st,at,vt,xt,gt=Ge.xref,rt=Ge.yref,tt=P(Ne,gt,"x"),Mt=P(Ne,rt,"y");if(Ge.type==="rect"){xt=[];var Pt=De(tt,Ge.x0),Rt=De(tt,Ge.x1),St=De(Mt,Ge.y0),Ye=De(Mt,Ge.y1);xt=[[Pt,St],[Pt,Ye],[Rt,Ye],[Rt,St]],Xe=Math.min(Pt,Rt),st=Math.max(Pt,Rt),at=Math.min(St,Ye),vt=Math.max(St,Ye),xt.xmin=Xe,xt.xmax=st,xt.ymin=at,xt.ymax=vt,xt.xref=gt,xt.yref=rt,xt.subtract=!1,xt.isRect=!0,we.push(xt)}else if(Ge.type==="path")for(var Ke=Ge.path.split("Z"),Ve=[],$e=0;$e<Ke.length;$e++){var lt=Ke[$e];if(lt){lt+="Z";var it=l.extractPathCoords(lt,d.paramIsX,"raw"),Be=l.extractPathCoords(lt,d.paramIsY,"raw");Xe=1/0,st=-1/0,at=1/0,vt=-1/0,xt=[];for(var je=0;je<it.length;je++){var ot=De(tt,it[je]),Ze=De(Mt,Be[je]);xt.push([ot,Ze]),Xe=Math.min(ot,Xe),st=Math.max(ot,st),at=Math.min(Ze,at),vt=Math.max(Ze,vt)}xt.xmin=Xe,xt.xmax=st,xt.ymin=at,xt.ymax=vt,xt.xref=gt,xt.yref=rt,xt.subtract=pe(xt,Ve),Ve.push(xt),we.push(xt)}}}}return we}function pe(Ne,ge){for(var we=!1,Ce=0;Ce<ge.length;Ce++)for(var ze=ge[Ce],Pe=0;Pe<Ne.length;Pe++)if(w(Ne[Pe],ze)){we=!we;break}return we}function De(Ne,ge){return Ne.type==="date"&&(ge=ge.replace("_"," ")),Ne.type==="log"?Ne.c2p(ge):Ne.r2p(ge,null,Ne.calendar)}function ke(Ne){for(var ge=Ne.length,we=[],Ce=0;Ce<ge;Ce++){var ze=Ne[Ce];we=(we=we.concat(ze)).concat([ze[0]])}return(Pe=we).isRect=Pe.length===5&&Pe[0][0]===Pe[4][0]&&Pe[0][1]===Pe[4][1]&&Pe[0][0]===Pe[1][0]&&Pe[2][0]===Pe[3][0]&&Pe[0][1]===Pe[3][1]&&Pe[1][1]===Pe[2][1]||Pe[0][1]===Pe[1][1]&&Pe[2][1]===Pe[3][1]&&Pe[0][0]===Pe[3][0]&&Pe[1][0]===Pe[2][0],Pe.isRect&&(Pe.xmin=Math.min(Pe[0][0],Pe[2][0]),Pe.xmax=Math.max(Pe[0][0],Pe[2][0]),Pe.ymin=Math.min(Pe[0][1],Pe[2][1]),Pe.ymax=Math.max(Pe[0][1],Pe[2][1])),Pe;var Pe}function Ee(Ne){return function(ge,we){for(var Ce,ze,Pe=0;Pe<Ne.length;Pe++){var Ue=Ne[Pe],Ge=Ue._id,Xe=Ge.charAt(0);if(we.isRect){Ce||(Ce={});var st=we[Xe+"min"],at=we[Xe+"max"];st!==void 0&&at!==void 0&&(Ce[Ge]=[z(Ue,st),z(Ue,at)].sort(E))}else ze||(ze={}),ze[Ge]=we.map(H(Ue))}Ce&&(ge.range=Ce),ze&&(ge.lassoPoints=ze)}}function Ie(Ne,ge){ge&&(ge.selections=(Ne.layout||{}).selections||[]),Ne.emit("plotly_selected",ge)}function Re(Ne){Ne.emit("plotly_deselect",null)}C.exports={reselect:Me,prepSelect:function(Ne,ge,we,Ce,ze){var Pe=!re(Ce),Ue=o(ze),Ge=r(ze),Xe=a(ze),st=i(ze),at=u(ze),vt=ze==="drawcircle",xt=ze==="drawline"||vt,gt=Ce.gd,rt=gt._fullLayout,tt=at&&rt.newselection.mode==="immediate"&&Pe,Mt=rt._zoomlayer,Pt=Ce.element.getBoundingClientRect(),Rt=Ce.plotinfo,St=U(Rt),Ye=ge-Pt.left,Ke=we-Pt.top;rt._calcInverseTransform(gt);var Ve=h.apply3DTransform(rt._invTransform)(Ye,Ke);Ye=Ve[0],Ke=Ve[1];var $e,lt,it,Be,je,ot,Ze,dt=rt._invScaleX,mt=rt._invScaleY,yt=Ye,ht=Ke,kt="M"+Ye+","+Ke,_t=Ce.xaxes[0],Et=Ce.yaxes[0],Lt=_t._length,Ot=Et._length,Ft=Ne.altKey&&!(i(ze)&&Xe);K(Ne,gt,Ce),Ue&&($e=F([[Ye,Ke]],N.BENDPX));var Zt=Mt.selectAll("path.select-outline-"+Rt.id).data([1]),Ht=st?rt.newshape:rt.newselection;st&&(Ce.hasText=Ht.label.text||Ht.label.texttemplate);var Ut=st&&!Xe?Ht.fillcolor:"rgba(0,0,0,0)",Wt=Ht.line.color||(Pe?x.contrast(gt._fullLayout.plot_bgcolor):"#7f7f7f");Zt.enter().append("path").attr("class","select-outline select-outline-"+Rt.id).style({opacity:st?Ht.opacity/2:1,"stroke-dasharray":T(Ht.line.dash,Ht.line.width),"stroke-width":Ht.line.width+"px","shape-rendering":"crispEdges"}).call(x.stroke,Wt).call(x.fill,Ut).attr("fill-rule","evenodd").classed("cursor-move",!!st).attr("transform",St).attr("d",kt+"Z");var nn=Mt.append("path").attr("class","zoombox-corners").style({fill:x.background,stroke:x.defaultLine,"stroke-width":1}).attr("transform",St).attr("d","M0,0Z");if(st&&Ce.hasText){var On=Mt.select(".label-temp");On.empty()&&(On=Mt.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var kn=rt._uid+N.SELECTID,gn=[],Jt=se(gt,Ce.xaxes,Ce.yaxes,Ce.subplot);tt&&!Ne.shiftKey&&(Ce._clearSubplotSelections=function(){if(Pe){var tn=_t._id,hn=Et._id;Ae(gt,tn,hn,Jt);for(var bn=(gt.layout||{}).selections||[],wn=[],Pn=!1,Cn=0;Cn<bn.length;Cn++){var Mn=rt.selections[Cn];Mn.xref!==tn||Mn.yref!==hn?wn.push(bn[Cn]):Pn=!0}Pn&&(gt._fullLayout._noEmitSelectedAtStart=!0,n.call("_guiRelayout",gt,{selections:wn}))}});var un=function(tn){return tn.plotinfo.fillRangeItems||Ee(tn.xaxes.concat(tn.yaxes))}(Ce);Ce.moveFn=function(tn,hn){Ce._clearSubplotSelections&&(Ce._clearSubplotSelections(),Ce._clearSubplotSelections=void 0),yt=Math.max(0,Math.min(Lt,dt*tn+Ye)),ht=Math.max(0,Math.min(Ot,mt*hn+Ke));var bn=Math.abs(yt-Ye),wn=Math.abs(ht-Ke);if(Ge){var Pn,Cn,Mn;if(at){var Bn=rt.selectdirection;switch(Pn=Bn==="any"?wn<Math.min(.6*bn,V)?"h":bn<Math.min(.6*wn,V)?"v":"d":Bn){case"h":Cn=vt?Ot/2:0,Mn=Ot;break;case"v":Cn=vt?Lt/2:0,Mn=Lt}}if(st)switch(rt.newshape.drawdirection){case"vertical":Pn="h",Cn=vt?Ot/2:0,Mn=Ot;break;case"horizontal":Pn="v",Cn=vt?Lt/2:0,Mn=Lt;break;case"ortho":bn<wn?(Pn="h",Cn=Ke,Mn=ht):(Pn="v",Cn=Ye,Mn=yt);break;default:Pn="d"}Pn==="h"?((Be=xt?g(vt,[yt,Cn],[yt,Mn]):[[Ye,Cn],[Ye,Mn],[yt,Mn],[yt,Cn]]).xmin=xt?yt:Math.min(Ye,yt),Be.xmax=xt?yt:Math.max(Ye,yt),Be.ymin=Math.min(Cn,Mn),Be.ymax=Math.max(Cn,Mn),nn.attr("d","M"+Be.xmin+","+(Ke-V)+"h-4v"+2*V+"h4ZM"+(Be.xmax-1)+","+(Ke-V)+"h4v"+2*V+"h-4Z")):Pn==="v"?((Be=xt?g(vt,[Cn,ht],[Mn,ht]):[[Cn,Ke],[Cn,ht],[Mn,ht],[Mn,Ke]]).xmin=Math.min(Cn,Mn),Be.xmax=Math.max(Cn,Mn),Be.ymin=xt?ht:Math.min(Ke,ht),Be.ymax=xt?ht:Math.max(Ke,ht),nn.attr("d","M"+(Ye-V)+","+Be.ymin+"v-4h"+2*V+"v4ZM"+(Ye-V)+","+(Be.ymax-1)+"v4h"+2*V+"v-4Z")):Pn==="d"&&((Be=xt?g(vt,[Ye,Ke],[yt,ht]):[[Ye,Ke],[Ye,ht],[yt,ht],[yt,Ke]]).xmin=Math.min(Ye,yt),Be.xmax=Math.max(Ye,yt),Be.ymin=Math.min(Ke,ht),Be.ymax=Math.max(Ke,ht),nn.attr("d","M0,0Z"))}else Ue&&($e.addPt([yt,ht]),Be=$e.filtered);if(Ce.selectionDefs&&Ce.selectionDefs.length?(it=xe(Ce.mergedPolygons,Be,Ft),Be.subtract=Ft,lt=ne(Ce.selectionDefs.concat([Be]))):(it=[Be],lt=j(Be)),c(ye(it,Xe),Zt,Ce),at){var Nn,rr=Me(gt,!1),Yn=rr.eventData?rr.eventData.points.slice():[];rr=Me(gt,!1,lt,Jt,Ce),lt=rr.selectionTesters,Ze=rr.eventData,Nn=$e?$e.filtered:ke(it),D.throttle(kn,N.SELECTDELAY,function(){for(var ir=(gn=me(lt,Jt)).slice(),Zn=0;Zn<Yn.length;Zn++){for(var ur=Yn[Zn],en=!1,on=0;on<ir.length;on++)if(ir[on].curveNumber===ur.curveNumber&&ir[on].pointNumber===ur.pointNumber){en=!0;break}en||ir.push(ur)}ir.length&&(Ze||(Ze={}),Ze.points=ir),un(Ze,Nn),function(Dn,yn){Dn.emit("plotly_selecting",yn)}(gt,Ze)})}},Ce.clickFn=function(tn,hn){if(nn.remove(),gt._fullLayout._activeShapeIndex>=0)gt._fullLayout._deactivateShape(gt);else if(!st){var bn=rt.clickmode;D.done(kn).then(function(){if(D.clear(kn),tn===2){for(Zt.remove(),je=0;je<Jt.length;je++)(ot=Jt[je])._module.selectPoints(ot,!1);if(_e(gt,Jt),oe(Ce),Re(gt),Jt.length){var wn=Jt[0].xaxis,Pn=Jt[0].yaxis;if(wn&&Pn){for(var Cn=[],Mn=gt._fullLayout.selections,Bn=0;Bn<Mn.length;Bn++){var Nn=Mn[Bn];Nn&&(Nn.xref===wn._id&&Nn.yref===Pn._id||Cn.push(Nn))}Cn.length<Mn.length&&(gt._fullLayout._noEmitSelectedAtStart=!0,n.call("_guiRelayout",gt,{selections:Cn}))}}}else bn.indexOf("select")>-1&&ee(hn,gt,Ce.xaxes,Ce.yaxes,Ce.subplot,Ce,Zt),bn==="event"&&Ie(gt,void 0);f.click(gt,hn,Rt.id)}).catch(h.error)}},Ce.doneFn=function(){nn.remove(),D.done(kn).then(function(){D.clear(kn),!tt&&Be&&Ce.selectionDefs&&(Be.subtract=Ft,Ce.selectionDefs.push(Be),Ce.mergedPolygons.length=0,[].push.apply(Ce.mergedPolygons,it)),(tt||st)&&oe(Ce,tt),Ce.doneFnCompleted&&Ce.doneFnCompleted(gn),at&&Ie(gt,Ze)}).catch(h.error)}},clearOutline:_,clearSelectionsCache:oe,selectOnClick:ee}},46056:function(C,A,e){"use strict";var v=e(13916),w=e(25376),n=e(52904).line,T=e(98192).u,x=e(92880).extendFlat,f=e(31780).templatedArray,s=(e(36208),e(45464)),t=e(21776).ye,o=e(97728);C.exports=f("shape",{visible:x({},s.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:x({},s.legend,{editType:"calc+arraydraw"}),legendgroup:x({},s.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:x({},s.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:w({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:x({},s.legendrank,{editType:"calc+arraydraw"}),legendwidth:x({},s.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above",editType:"arraydraw"},xref:x({},v.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:x({},v.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:x({},n.color,{editType:"arraydraw"}),width:x({},n.width,{editType:"calc+arraydraw"}),dash:x({},T,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:t({},{keys:Object.keys(o)}),font:w({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})},96084:function(C,A,e){"use strict";var v=e(3400),w=e(54460),n=e(85448),T=e(65152);function x(o){return s(o.line.width,o.xsizemode,o.x0,o.x1,o.path,!1)}function f(o){return s(o.line.width,o.ysizemode,o.y0,o.y1,o.path,!0)}function s(o,r,i,a,u,l){var d=o/2,c=l;if(r==="pixel"){var _=u?T.extractPathCoords(u,l?n.paramIsY:n.paramIsX):[i,a],p=v.aggNums(Math.max,null,_),g=v.aggNums(Math.min,null,_),m=g<0?Math.abs(g)+d:d,b=p>0?p+d:d;return{ppad:d,ppadplus:c?m:b,ppadminus:c?b:m}}return{ppad:d}}function t(o,r,i,a,u){var l=o.type==="category"||o.type==="multicategory"?o.r2c:o.d2c;if(r!==void 0)return[l(r),l(i)];if(a){var d,c,_,p,g=1/0,m=-1/0,b=a.match(n.segmentRE);for(o.type==="date"&&(l=T.decodeDate(l)),d=0;d<b.length;d++)(c=u[b[d].charAt(0)].drawn)!==void 0&&(!(_=b[d].substr(1).match(n.paramRE))||_.length<c||((p=l(_[c]))<g&&(g=p),p>m&&(m=p)));return m>=g?[g,m]:void 0}}C.exports=function(o){var r=o._fullLayout,i=v.filterVisible(r.shapes);if(i.length&&o._fullData.length)for(var a=0;a<i.length;a++){var u,l,d=i[a];d._extremes={};var c=w.getRefType(d.xref),_=w.getRefType(d.yref);if(d.xref!=="paper"&&c!=="domain"){var p=d.xsizemode==="pixel"?d.xanchor:d.x0,g=d.xsizemode==="pixel"?d.xanchor:d.x1;(l=t(u=w.getFromId(o,d.xref),p,g,d.path,n.paramIsX))&&(d._extremes[u._id]=w.findExtremes(u,l,x(d)))}if(d.yref!=="paper"&&_!=="domain"){var m=d.ysizemode==="pixel"?d.yanchor:d.y0,b=d.ysizemode==="pixel"?d.yanchor:d.y1;(l=t(u=w.getFromId(o,d.yref),m,b,d.path,n.paramIsY))&&(d._extremes[u._id]=w.findExtremes(u,l,f(d)))}}}},85448:function(C){"use strict";C.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},43712:function(C,A,e){"use strict";var v=e(3400),w=e(54460),n=e(51272),T=e(46056),x=e(65152);function f(s,t,o){function r(Z,z){return v.coerce(s,t,T,Z,z)}if(t._isShape=!0,r("visible")){r("showlegend")&&(r("legend"),r("legendwidth"),r("legendgroup"),r("legendgrouptitle.text"),v.coerceFont(r,"legendgrouptitle.font"),r("legendrank"));var i=r("path"),a=r("type",i?"path":"rect"),u=a!=="path";u&&delete t.path,r("editable"),r("layer"),r("opacity"),r("fillcolor"),r("fillrule"),r("line.width")&&(r("line.color"),r("line.dash"));for(var l=r("xsizemode"),d=r("ysizemode"),c=["x","y"],_=0;_<2;_++){var p,g,m,b=c[_],y=b+"anchor",M=b==="x"?l:d,h={_fullLayout:o},E=w.coerceRef(s,t,h,b,void 0,"paper");if(w.getRefType(E)==="range"?((p=w.getFromId(h,E))._shapeIndices.push(t._index),m=x.rangeToShapePosition(p),g=x.shapePositionToRange(p)):g=m=v.identity,u){var k=b+"0",D=b+"1",P=s[k],L=s[D];s[k]=g(s[k],!0),s[D]=g(s[D],!0),M==="pixel"?(r(k,0),r(D,10)):(w.coercePosition(t,h,r,E,k,.25),w.coercePosition(t,h,r,E,D,.75)),t[k]=m(t[k]),t[D]=m(t[D]),s[k]=P,s[D]=L}if(M==="pixel"){var O=s[y];s[y]=g(s[y],!0),w.coercePosition(t,h,r,E,y,.25),t[y]=m(t[y]),s[y]=O}}u&&v.noneOrAll(s,t,["x0","x1","y0","y1"]);var N,V,F=a==="line";if(u&&(N=r("label.texttemplate")),N||(V=r("label.text")),V||N){r("label.textangle");var j=r("label.textposition",F?"middle":"middle center");r("label.xanchor"),r("label.yanchor",function(Z,z){return Z?"bottom":z.indexOf("top")!==-1?"top":z.indexOf("bottom")!==-1?"bottom":"middle"}(F,j)),r("label.padding"),v.coerceFont(r,"label.font",o.font)}}}C.exports=function(s,t){n(s,t,{name:"shapes",handleItemDefaults:f})}},60728:function(C,A,e){"use strict";var v=e(3400),w=e(54460),n=e(72736),T=e(43616),x=e(9856).readPaths,f=e(65152),s=f.getPathString,t=e(97728),o=e(84284).FROM_TL;C.exports=function(r,i,a,u){if(u.selectAll(".shape-label").remove(),a.label.text||a.label.texttemplate){var l;if(a.label.texttemplate){var d={};if(a.type!=="path"){var c=w.getFromId(r,a.xref),_=w.getFromId(r,a.yref);for(var p in t){var g=t[p](a,c,_);g!==void 0&&(d[p]=g)}}l=v.texttemplateStringForShapes(a.label.texttemplate,{},r._fullLayout._d3locale,d)}else l=a.label.text;var m,b,y,M,h={"data-index":i},E=a.label.font,k=u.append("g").attr(h).classed("shape-label",!0).append("text").attr({"data-notex":1}).classed("shape-label-text",!0).text(l);if(a.path){var D=s(r,a),P=x(D,r);m=1/0,y=1/0,b=-1/0,M=-1/0;for(var L=0;L<P.length;L++)for(var O=0;O<P[L].length;O++)for(var N=P[L][O],V=1;V<N.length;V+=2){var F=N[V],j=N[V+1];m=Math.min(m,F),b=Math.max(b,F),y=Math.min(y,j),M=Math.max(M,j)}}else{var Z=w.getFromId(r,a.xref),z=w.getRefType(a.xref),H=w.getFromId(r,a.yref),U=w.getRefType(a.yref),re=f.getDataToPixel(r,Z,!1,z),ee=f.getDataToPixel(r,H,!0,U);m=re(a.x0),b=re(a.x1),y=ee(a.y0),M=ee(a.y1)}var J=a.label.textangle;J==="auto"&&(J=a.type==="line"?function(le,se,de,be){var _e,xe;return xe=Math.abs(de-le),_e=de>=le?se-be:be-se,-180/Math.PI*Math.atan2(_e,xe)}(m,y,b,M):0),k.call(function(le){return le.call(T.font,E).attr({}),n.convertToTspans(le,r),le});var Q=function(le,se,de,be,_e,xe,ve){var ye,me,Me,Ae,ce=_e.label.textposition,ae=_e.label.textangle,pe=_e.label.padding,De=_e.type,ke=Math.PI/180*xe,Ee=Math.sin(ke),Ie=Math.cos(ke),Re=_e.label.xanchor,Ne=_e.label.yanchor;if(De==="line"){ce==="start"?(ye=le,me=se):ce==="end"?(ye=de,me=be):(ye=(le+de)/2,me=(se+be)/2),Re==="auto"&&(Re=ce==="start"?ae==="auto"?de>le?"left":de<le?"right":"center":de>le?"right":de<le?"left":"center":ce==="end"?ae==="auto"?de>le?"right":de<le?"left":"center":de>le?"left":de<le?"right":"center":"center");var ge={bottom:-1,middle:0,top:1};if(ae==="auto"){var we=ge[Ne];Me=-pe*Ee*we,Ae=pe*Ie*we}else Me=pe*{left:1,center:0,right:-1}[Re],Ae=pe*ge[Ne];ye+=Me,me+=Ae}else Me=pe+3,ce.indexOf("right")!==-1?(ye=Math.max(le,de)-Me,Re==="auto"&&(Re="right")):ce.indexOf("left")!==-1?(ye=Math.min(le,de)+Me,Re==="auto"&&(Re="left")):(ye=(le+de)/2,Re==="auto"&&(Re="center")),me=ce.indexOf("top")!==-1?Math.min(se,be):ce.indexOf("bottom")!==-1?Math.max(se,be):(se+be)/2,Ae=pe,Ne==="bottom"?me-=Ae:Ne==="top"&&(me+=Ae);var Ce=o[Ne],ze=_e.label.font.size,Pe=ve.height;return{textx:ye+(Pe*Ce-ze)*Ee,texty:me+-(Pe*Ce-ze)*Ie,xanchor:Re}}(m,y,b,M,a,J,T.bBox(k.node())),ne=Q.textx,K=Q.texty,oe=Q.xanchor;k.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[oe],y:K,x:ne,transform:"rotate("+J+","+ne+","+K+")"}).call(n.positionText,ne,K)}}},55496:function(C,A,e){"use strict";var v=e(3400).strTranslate,w=e(86476),n=e(72760),T=n.drawMode,x=n.selectMode,f=e(24040),s=e(76308),t=e(7e3),o=t.i000,r=t.i090,i=t.i180,a=t.i270,u=e(1936).clearOutlineControllers,l=e(9856),d=l.pointsOnRectangle,c=l.pointsOnEllipse,_=l.writePaths,p=e(93940).newShapes,g=e(93940).createShapeObj,m=e(5968),b=e(60728);function y(M,h){var E,k,D,P=M[h][1],L=M[h][2],O=M.length;return k=M[E=(h+1)%O][1],D=M[E][2],k===P&&D===L&&(k=M[E=(h+2)%O][1],D=M[E][2]),[E,k,D]}C.exports=function M(h,E,k,D){D||(D=0);var P=k.gd;function L(){M(h,E,k,D++),(c(h[0])||k.hasText)&&O({redrawing:!0})}function O(_e){var xe={};k.isActiveShape!==void 0&&(k.isActiveShape=!1,xe=p(E,k)),k.isActiveSelection!==void 0&&(k.isActiveSelection=!1,xe=m(E,k),P._fullLayout._reselect=!0),Object.keys(xe).length&&f.call((_e||{}).redrawing?"relayout":"_guiRelayout",P,xe)}var N,V,F,j,Z,z=P._fullLayout._zoomlayer,H=k.dragmode,U=T(H),re=x(H);if((U||re)&&(P._fullLayout._outlining=!0),u(P),E.attr("d",_(h)),D||!k.isActiveShape&&!k.isActiveSelection||(Z=function(_e,xe){for(var ve=0;ve<xe.length;ve++){var ye=xe[ve];_e[ve]=[];for(var me=0;me<ye.length;me++){_e[ve][me]=[];for(var Me=0;Me<ye[me].length;Me++)_e[ve][me][Me]=ye[me][Me]}}return _e}([],h),function(_e){N=[];for(var xe=0;xe<h.length;xe++){var ve=h[xe],ye=d(ve),me=!ye&&c(ve);N[xe]=[];for(var Me=ve.length,Ae=0;Ae<Me;Ae++)if(ve[Ae][0]!=="Z"&&(!me||Ae===o||Ae===r||Ae===i||Ae===a)){var ce,ae=ye&&k.isActiveSelection;ae&&(ce=y(ve,Ae));var pe=ve[Ae][1],De=ve[Ae][2],ke=_e.append(ae?"rect":"circle").attr("data-i",xe).attr("data-j",Ae).style({fill:s.background,stroke:s.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(ae){var Ee=ce[1]-pe,Ie=ce[2]-De,Re=Ie?5:Math.max(Math.min(25,Math.abs(Ee)-5),5),Ne=Ee?5:Math.max(Math.min(25,Math.abs(Ie)-5),5);ke.classed(Ie?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",Re).attr("height",Ne).attr("x",pe-Re/2).attr("y",De-Ne/2).attr("transform",v(Ee/2,Ie/2))}else ke.classed("cursor-grab",!0).attr("r",5).attr("cx",pe).attr("cy",De);N[xe][Ae]={element:ke.node(),gd:P,prepFn:Q,doneFn:K,clickFn:oe},w.init(N[xe][Ae])}}}(z.append("g").attr("class","outline-controllers")),function(){V=[],h.length&&(V[0]={element:E[0][0],gd:P,prepFn:se,doneFn:de,clickFn:be},w.init(V[0]))}()),U&&k.hasText){var ee=z.select(".label-temp"),J=g(E,k,k.dragmode);b(P,"label-temp",J,ee)}function Q(_e){F=+_e.srcElement.getAttribute("data-i"),j=+_e.srcElement.getAttribute("data-j"),N[F][j].moveFn=ne}function ne(_e,xe){if(h.length){var ve=Z[F][j][1],ye=Z[F][j][2],me=h[F],Me=me.length;if(d(me)){var Ae=_e,ce=xe;k.isActiveSelection&&(y(me,j)[1]===me[j][1]?ce=0:Ae=0);for(var ae=0;ae<Me;ae++)if(ae!==j){var pe=me[ae];pe[1]===me[j][1]&&(pe[1]=ve+Ae),pe[2]===me[j][2]&&(pe[2]=ye+ce)}if(me[j][1]=ve+Ae,me[j][2]=ye+ce,!d(me))for(var De=0;De<Me;De++)for(var ke=0;ke<me[De].length;ke++)me[De][ke]=Z[F][De][ke]}else me[j][1]=ve+_e,me[j][2]=ye+xe;L()}}function K(){O()}function oe(_e,xe){if(_e===2){F=+xe.srcElement.getAttribute("data-i"),j=+xe.srcElement.getAttribute("data-j");var ve=h[F];d(ve)||c(ve)||function(){if(h.length&&h[F]&&h[F].length){for(var ye=[],me=0;me<h[F].length;me++)me!==j&&ye.push(h[F][me]);ye.length>1&&(ye.length!==2||ye[1][0]!=="Z")&&(j===0&&(ye[0][0]="M"),h[F]=ye,L(),O())}}()}}function le(_e,xe){(function(ve,ye){if(h.length)for(var me=0;me<h.length;me++)for(var Me=0;Me<h[me].length;Me++)for(var Ae=0;Ae+2<h[me][Me].length;Ae+=2)h[me][Me][Ae+1]=Z[me][Me][Ae+1]+ve,h[me][Me][Ae+2]=Z[me][Me][Ae+2]+ye})(_e,xe),L()}function se(_e){(F=+_e.srcElement.getAttribute("data-i"))||(F=0),V[F].moveFn=le}function de(){O()}function be(_e){_e===2&&function(xe){if(x(xe._fullLayout.dragmode)){u(xe);var ve=xe._fullLayout._activeSelectionIndex,ye=(xe.layout||{}).selections||[];if(ve<ye.length){for(var me=[],Me=0;Me<ye.length;Me++)Me!==ve&&me.push(ye[Me]);delete xe._fullLayout._activeSelectionIndex;var Ae=xe._fullLayout.selections[ve];xe._fullLayout._deselect={xref:Ae.xref,yref:Ae.yref},f.call("_guiRelayout",xe,{selections:me})}}}(P)}}},4016:function(C,A,e){"use strict";var v=e(33428),w=e(24040),n=e(3400),T=e(54460),x=e(9856).readPaths,f=e(55496),s=e(60728),t=e(1936).clearOutlineControllers,o=e(76308),r=e(43616),i=e(31780).arrayEditor,a=e(86476),u=e(93972),l=e(85448),d=e(65152),c=d.getPathString;function _(h){var E=h._fullLayout;for(var k in E._shapeUpperLayer.selectAll("path").remove(),E._shapeLowerLayer.selectAll("path").remove(),E._shapeUpperLayer.selectAll("text").remove(),E._shapeLowerLayer.selectAll("text").remove(),E._plots){var D=E._plots[k].shapelayer;D&&(D.selectAll("path").remove(),D.selectAll("text").remove())}for(var P=0;P<E.shapes.length;P++)E.shapes[P].visible===!0&&m(h,P)}function p(h){return!!h._fullLayout._outlining}function g(h){return!h._context.edits.shapePosition}function m(h,E){h._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+E+'"]').remove();var k=d.makeShapesOptionsAndPlotinfo(h,E),D=k.options,P=k.plotinfo;function L(O){var N=c(h,D),V={"data-index":E,"fill-rule":D.fillrule,d:N},F=D.opacity,j=D.fillcolor,Z=D.line.width?D.line.color:"rgba(0,0,0,0)",z=D.line.width,H=D.line.dash;z||D.editable!==!0||(z=5,H="solid");var U=N[N.length-1]!=="Z",re=g(h)&&D.editable&&h._fullLayout._activeShapeIndex===E;re&&(j=U?"rgba(0,0,0,0)":h._fullLayout.activeshape.fillcolor,F=h._fullLayout.activeshape.opacity);var ee,J=O.append("g").classed("shape-group",!0).attr({"data-index":E}),Q=J.append("path").attr(V).style("opacity",F).call(o.stroke,Z).call(o.fill,j).call(r.dashLine,H,z);if(b(J,h,D),s(h,E,D,J),(re||h._context.edits.shapePosition)&&(ee=i(h.layout,"shapes",D)),re){Q.style({cursor:"move"});var ne={element:Q.node(),plotinfo:P,gd:h,editHelpers:ee,hasText:D.label.text||D.label.texttemplate,isActiveShape:!0},K=x(N,h);f(K,Q,ne)}else h._context.edits.shapePosition?function(oe,le,se,de,be,_e){var xe,ve,ye,me,Me,Ae,ce,ae,pe,De,ke,Ee,Ie,Re,Ne,ge,we=10,Ce=10,ze=se.xsizemode==="pixel",Pe=se.ysizemode==="pixel",Ue=se.type==="line",Ge=se.type==="path",Xe=_e.modifyItem,st=v.select(le.node().parentNode),at=T.getFromId(oe,se.xref),vt=T.getRefType(se.xref),xt=T.getFromId(oe,se.yref),gt=T.getRefType(se.yref),rt=d.getDataToPixel(oe,at,!1,vt),tt=d.getDataToPixel(oe,xt,!0,gt),Mt=d.getPixelToData(oe,at,!1,vt),Pt=d.getPixelToData(oe,xt,!0,gt),Rt=Ue?function(){var it=10,Be=Math.max(se.line.width,it),je=be.append("g").attr("data-index",de).attr("drag-helper",!0);je.append("path").attr("d",le.attr("d")).style({cursor:"move","stroke-width":Be,"stroke-opacity":"0"});var ot={"fill-opacity":"0"},Ze=Math.max(Be/2,it);return je.append("circle").attr({"data-line-point":"start-point",cx:ze?rt(se.xanchor)+se.x0:rt(se.x0),cy:Pe?tt(se.yanchor)-se.y0:tt(se.y0),r:Ze}).style(ot).classed("cursor-grab",!0),je.append("circle").attr({"data-line-point":"end-point",cx:ze?rt(se.xanchor)+se.x1:rt(se.x1),cy:Pe?tt(se.yanchor)-se.y1:tt(se.y1),r:Ze}).style(ot).classed("cursor-grab",!0),je}():le,St={element:Rt.node(),gd:oe,prepFn:function(it){p(oe)||(ze&&(Me=rt(se.xanchor)),Pe&&(Ae=tt(se.yanchor)),se.type==="path"?Ne=se.path:(xe=ze?se.x0:rt(se.x0),ve=Pe?se.y0:tt(se.y0),ye=ze?se.x1:rt(se.x1),me=Pe?se.y1:tt(se.y1)),xe<ye?(pe=xe,Ie="x0",De=ye,Re="x1"):(pe=ye,Ie="x1",De=xe,Re="x0"),!Pe&&ve<me||Pe&&ve>me?(ce=ve,ke="y0",ae=me,Ee="y1"):(ce=me,ke="y1",ae=ve,Ee="y0"),Ye(it),$e(be,se),function(Be,je,ot){var Ze=je.xref,dt=je.yref,mt=T.getFromId(ot,Ze),yt=T.getFromId(ot,dt),ht="";Ze==="paper"||mt.autorange||(ht+=Ze),dt==="paper"||yt.autorange||(ht+=dt),r.setClipUrl(Be,ht?"clip"+ot._fullLayout._uid+ht:null,ot)}(le,se,oe),St.moveFn=ge==="move"?Ke:Ve,St.altKey=it.altKey)},doneFn:function(){p(oe)||(u(le),lt(be),b(le,oe,se),w.call("_guiRelayout",oe,_e.getUpdateObj()))},clickFn:function(){p(oe)||lt(be)}};function Ye(it){if(p(oe))ge=null;else if(Ue)ge=it.target.tagName==="path"?"move":it.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var Be=St.element.getBoundingClientRect(),je=Be.right-Be.left,ot=Be.bottom-Be.top,Ze=it.clientX-Be.left,dt=it.clientY-Be.top,mt=!Ge&&je>we&&ot>Ce&&!it.shiftKey?a.getCursor(Ze/je,1-dt/ot):"move";u(le,mt),ge=mt.split("-")[0]}}function Ke(it,Be){if(se.type==="path"){var je=function(dt){return dt},ot=je,Ze=je;ze?Xe("xanchor",se.xanchor=Mt(Me+it)):(ot=function(dt){return Mt(rt(dt)+it)},at&&at.type==="date"&&(ot=d.encodeDate(ot))),Pe?Xe("yanchor",se.yanchor=Pt(Ae+Be)):(Ze=function(dt){return Pt(tt(dt)+Be)},xt&&xt.type==="date"&&(Ze=d.encodeDate(Ze))),Xe("path",se.path=y(Ne,ot,Ze))}else ze?Xe("xanchor",se.xanchor=Mt(Me+it)):(Xe("x0",se.x0=Mt(xe+it)),Xe("x1",se.x1=Mt(ye+it))),Pe?Xe("yanchor",se.yanchor=Pt(Ae+Be)):(Xe("y0",se.y0=Pt(ve+Be)),Xe("y1",se.y1=Pt(me+Be)));le.attr("d",c(oe,se)),$e(be,se),s(oe,de,se,st)}function Ve(it,Be){if(Ge){var je=function(Wt){return Wt},ot=je,Ze=je;ze?Xe("xanchor",se.xanchor=Mt(Me+it)):(ot=function(Wt){return Mt(rt(Wt)+it)},at&&at.type==="date"&&(ot=d.encodeDate(ot))),Pe?Xe("yanchor",se.yanchor=Pt(Ae+Be)):(Ze=function(Wt){return Pt(tt(Wt)+Be)},xt&&xt.type==="date"&&(Ze=d.encodeDate(Ze))),Xe("path",se.path=y(Ne,ot,Ze))}else if(Ue){if(ge==="resize-over-start-point"){var dt=xe+it,mt=Pe?ve-Be:ve+Be;Xe("x0",se.x0=ze?dt:Mt(dt)),Xe("y0",se.y0=Pe?mt:Pt(mt))}else if(ge==="resize-over-end-point"){var yt=ye+it,ht=Pe?me-Be:me+Be;Xe("x1",se.x1=ze?yt:Mt(yt)),Xe("y1",se.y1=Pe?ht:Pt(ht))}}else{var kt=function(Wt){return ge.indexOf(Wt)!==-1},_t=kt("n"),Et=kt("s"),Lt=kt("w"),Ot=kt("e"),Ft=_t?ce+Be:ce,Zt=Et?ae+Be:ae,Ht=Lt?pe+it:pe,Ut=Ot?De+it:De;Pe&&(_t&&(Ft=ce-Be),Et&&(Zt=ae-Be)),(!Pe&&Zt-Ft>Ce||Pe&&Ft-Zt>Ce)&&(Xe(ke,se[ke]=Pe?Ft:Pt(Ft)),Xe(Ee,se[Ee]=Pe?Zt:Pt(Zt))),Ut-Ht>we&&(Xe(Ie,se[Ie]=ze?Ht:Mt(Ht)),Xe(Re,se[Re]=ze?Ut:Mt(Ut)))}le.attr("d",c(oe,se)),$e(be,se),s(oe,de,se,st)}function $e(it,Be){(ze||Pe)&&function(){var je=Be.type!=="path",ot=it.selectAll(".visual-cue").data([0]);ot.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var Ze=rt(ze?Be.xanchor:n.midRange(je?[Be.x0,Be.x1]:d.extractPathCoords(Be.path,l.paramIsX))),dt=tt(Pe?Be.yanchor:n.midRange(je?[Be.y0,Be.y1]:d.extractPathCoords(Be.path,l.paramIsY)));if(Ze=d.roundPositionForSharpStrokeRendering(Ze,1),dt=d.roundPositionForSharpStrokeRendering(dt,1),ze&&Pe){var mt="M"+(Ze-1-1)+","+(dt-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";ot.attr("d",mt)}else if(ze){var yt="M"+(Ze-1-1)+","+(dt-9-1)+"v18 h2 v-18 Z";ot.attr("d",yt)}else{var ht="M"+(Ze-9-1)+","+(dt-1-1)+"h18 v2 h-18 Z";ot.attr("d",ht)}}()}function lt(it){it.selectAll(".visual-cue").remove()}a.init(St),Rt.node().onmousemove=Ye}(h,Q,D,E,O,ee):D.editable===!0&&Q.style("pointer-events",U||o.opacity(j)*F<=.5?"stroke":"all");Q.node().addEventListener("click",function(){return function(oe,le){if(g(oe)){var se=+le.node().getAttribute("data-index");if(se>=0){if(se===oe._fullLayout._activeShapeIndex)return void M(oe);oe._fullLayout._activeShapeIndex=se,oe._fullLayout._deactivateShape=M,_(oe)}}}(h,Q)})}D._input&&D.visible===!0&&(D.layer==="above"?L(h._fullLayout._shapeUpperLayer):D.xref==="paper"||D.yref==="paper"?L(h._fullLayout._shapeLowerLayer):D.layer==="between"?L(P.shapelayerBetween):P._hadPlotinfo?L((P.mainplotinfo||P).shapelayer):L(h._fullLayout._shapeLowerLayer))}function b(h,E,k){var D=(k.xref+k.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");r.setClipUrl(h,D?"clip"+E._fullLayout._uid+D:null,E)}function y(h,E,k){return h.replace(l.segmentRE,function(D){var P=0,L=D.charAt(0),O=l.paramIsX[L],N=l.paramIsY[L],V=l.numParams[L];return L+D.substr(1).replace(l.paramRE,function(F){return P>=V||(O[P]?F=E(F):N[P]&&(F=k(F)),P++),F})})}function M(h){g(h)&&h._fullLayout._activeShapeIndex>=0&&(t(h),delete h._fullLayout._activeShapeIndex,_(h))}C.exports={draw:_,drawOne:m,eraseActiveShape:function(h){if(g(h)){t(h);var E=h._fullLayout._activeShapeIndex,k=(h.layout||{}).shapes||[];if(E<k.length){for(var D=[],P=0;P<k.length;P++)P!==E&&D.push(k[P]);return delete h._fullLayout._activeShapeIndex,w.call("_guiRelayout",h,{shapes:D})}}},drawLabel:s}},92872:function(C,A,e){"use strict";var v=e(67824).overrideAll,w=e(45464),n=e(25376),T=e(98192).u,x=e(92880).extendFlat,f=e(21776).ye,s=e(97728);C.exports=v({newshape:{visible:x({},w.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:x({},w.legend,{}),legendgroup:x({},w.legendgroup,{}),legendgrouptitle:{text:x({},w.legendgrouptitle.text,{}),font:n({})},legendrank:x({},w.legendrank,{}),legendwidth:x({},w.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:x({},T,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:x({},w.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:f({newshape:!0},{keys:Object.keys(s)}),font:n({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")},7e3:function(C){"use strict";C.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},65144:function(C,A,e){"use strict";var v=e(76308),w=e(3400);C.exports=function(n,T,x){if(x("newshape.visible"),x("newshape.name"),x("newshape.showlegend"),x("newshape.legend"),x("newshape.legendwidth"),x("newshape.legendgroup"),x("newshape.legendgrouptitle.text"),w.coerceFont(x,"newshape.legendgrouptitle.font"),x("newshape.legendrank"),x("newshape.drawdirection"),x("newshape.layer"),x("newshape.fillcolor"),x("newshape.fillrule"),x("newshape.opacity"),x("newshape.line.width")){var f=(n||{}).plot_bgcolor||"#FFF";x("newshape.line.color",v.contrast(f)),x("newshape.line.dash")}var s=n.dragmode==="drawline",t=x("newshape.label.text"),o=x("newshape.label.texttemplate");if(t||o){x("newshape.label.textangle");var r=x("newshape.label.textposition",s?"middle":"middle center");x("newshape.label.xanchor"),x("newshape.label.yanchor",function(i,a){return i?"bottom":a.indexOf("top")!==-1?"top":a.indexOf("bottom")!==-1?"bottom":"middle"}(s,r)),x("newshape.label.padding"),w.coerceFont(x,"newshape.label.font",T.font)}x("activeshape.fillcolor"),x("activeshape.opacity")}},9856:function(C,A,e){"use strict";var v=e(21984),w=e(7e3),n=w.CIRCLE_SIDES,T=w.SQRT2,x=e(5840),f=x.p2r,s=x.r2p,t=[0,3,4,5,6,1,2],o=[0,3,4,1,2];function r(a,u){return Math.abs(a-u)<=1e-6}function i(a,u){var l=u[1]-a[1],d=u[2]-a[2];return Math.sqrt(l*l+d*d)}A.writePaths=function(a){var u=a.length;if(!u)return"M0,0Z";for(var l="",d=0;d<u;d++)for(var c=a[d].length,_=0;_<c;_++){var p=a[d][_][0];if(p==="Z")l+="Z";else for(var g=a[d][_].length,m=0;m<g;m++){var b=m;p==="Q"||p==="S"?b=o[m]:p==="C"&&(b=t[m]),l+=a[d][_][b],m>0&&m<g-1&&(l+=",")}}return l},A.readPaths=function(a,u,l,d){var c,_,p,g=v(a),m=[],b=-1,y=0,M=0,h=function(){_=y,p=M};h();for(var E=0;E<g.length;E++){var k,D,P,L,O=[],N=g[E][0],V=N;switch(N){case"M":m[++b]=[],y=+g[E][1],M=+g[E][2],O.push([V,y,M]),h();break;case"Q":case"S":k=+g[E][1],P=+g[E][2],y=+g[E][3],M=+g[E][4],O.push([V,y,M,k,P]);break;case"C":k=+g[E][1],P=+g[E][2],D=+g[E][3],L=+g[E][4],y=+g[E][5],M=+g[E][6],O.push([V,y,M,k,P,D,L]);break;case"T":case"L":y=+g[E][1],M=+g[E][2],O.push([V,y,M]);break;case"H":V="L",y=+g[E][1],O.push([V,y,M]);break;case"V":V="L",M=+g[E][1],O.push([V,y,M]);break;case"A":V="L";var F=+g[E][1],j=+g[E][2];+g[E][4]||(F=-F,j=-j);var Z=y-F,z=M;for(c=1;c<=n/2;c++){var H=2*Math.PI*c/n;O.push([V,Z+F*Math.cos(H),z+j*Math.sin(H)])}break;case"Z":y===_&&M===p||(y=_,M=p,O.push([V,y,M]))}for(var U=(l||{}).domain,re=u._fullLayout._size,ee=l&&l.xsizemode==="pixel",J=l&&l.ysizemode==="pixel",Q=d===!1,ne=0;ne<O.length;ne++){for(c=0;c+2<7;c+=2){var K=O[ne][c+1],oe=O[ne][c+2];K!==void 0&&oe!==void 0&&(y=K,M=oe,l&&(l.xaxis&&l.xaxis.p2r?(Q&&(K-=l.xaxis._offset),K=ee?s(l.xaxis,l.xanchor)+K:f(l.xaxis,K)):(Q&&(K-=re.l),U?K=U.x[0]+K/re.w:K/=re.w),l.yaxis&&l.yaxis.p2r?(Q&&(oe-=l.yaxis._offset),oe=J?s(l.yaxis,l.yanchor)-oe:f(l.yaxis,oe)):(Q&&(oe-=re.t),oe=U?U.y[1]-oe/re.h:1-oe/re.h)),O[ne][c+1]=K,O[ne][c+2]=oe)}m[b].push(O[ne].slice())}}return m},A.pointsOnRectangle=function(a){if(a.length!==5)return!1;for(var u=1;u<3;u++)if(!r(a[0][u]-a[1][u],a[3][u]-a[2][u])||!r(a[0][u]-a[3][u],a[1][u]-a[2][u]))return!1;return!(!r(a[0][1],a[1][1])&&!r(a[0][1],a[3][1])||!(i(a[0],a[1])*i(a[0],a[3])))},A.pointsOnEllipse=function(a){var u=a.length;if(u!==n+1)return!1;u=n;for(var l=0;l<u;l++){var d=(2*u-l)%u,c=(u/2+d)%u,_=(u/2+l)%u;if(!r(i(a[l],a[_]),i(a[d],a[c])))return!1}return!0},A.handleEllipse=function(a,u,l){if(!a)return[u,l];var d=A.ellipseOver({x0:u[0],y0:u[1],x1:l[0],y1:l[1]}),c=(d.x1+d.x0)/2,_=(d.y1+d.y0)/2,p=(d.x1-d.x0)/2,g=(d.y1-d.y0)/2;p||(p=g/=T),g||(g=p/=T);for(var m=[],b=0;b<n;b++){var y=2*b*Math.PI/n;m.push([c+p*Math.cos(y),_+g*Math.sin(y)])}return m},A.ellipseOver=function(a){var u=a.x0,l=a.y0,d=a.x1,c=a.y1,_=d-u,p=c-l,g=((u-=_)+d)/2,m=((l-=p)+c)/2;return{x0:g-(_*=T),y0:m-(p*=T),x1:g+_,y1:m+p}},A.fixDatesForPaths=function(a,u,l){var d=u.type==="date",c=l.type==="date";if(!d&&!c)return a;for(var _=0;_<a.length;_++)for(var p=0;p<a[_].length;p++)for(var g=0;g+2<a[_][p].length;g+=2)d&&(a[_][p][g+1]=a[_][p][g+1].replace(" ","_")),c&&(a[_][p][g+2]=a[_][p][g+2].replace(" ","_"));return a}},93940:function(C,A,e){"use strict";var v=e(72760),w=v.drawMode,n=v.openMode,T=e(7e3),x=T.i000,f=T.i090,s=T.i180,t=T.i270,o=T.cos45,r=T.sin45,i=e(5840),a=i.p2r,u=i.r2p,l=e(1936).clearOutline,d=e(9856),c=d.readPaths,_=d.writePaths,p=d.ellipseOver,g=d.fixDatesForPaths;function m(b,y,M){var h,E=b[0][0],k=y.gd,D=E.getAttribute("d"),P=k._fullLayout.newshape,L=y.plotinfo,O=y.isActiveShape,N=L.xaxis,V=L.yaxis,F=!!L.domain||!L.xaxis,j=!!L.domain||!L.yaxis,Z=n(M),z=c(D,k,L,O),H={editable:!0,visible:P.visible,name:P.name,showlegend:P.showlegend,legend:P.legend,legendwidth:P.legendwidth,legendgroup:P.legendgroup,legendgrouptitle:{text:P.legendgrouptitle.text,font:P.legendgrouptitle.font},legendrank:P.legendrank,label:P.label,xref:F?"paper":N._id,yref:j?"paper":V._id,layer:P.layer,opacity:P.opacity,line:{color:P.line.color,width:P.line.width,dash:P.line.dash}};if(Z||(H.fillcolor=P.fillcolor,H.fillrule=P.fillrule),z.length===1&&(h=z[0]),h&&h.length===5&&M==="drawrect")H.type="rect",H.x0=h[0][1],H.y0=h[0][2],H.x1=h[2][1],H.y1=h[2][2];else if(h&&M==="drawline")H.type="line",H.x0=h[0][1],H.y0=h[0][2],H.x1=h[1][1],H.y1=h[1][2];else if(h&&M==="drawcircle"){H.type="circle";var U=h[x][1],re=h[f][1],ee=h[s][1],J=h[t][1],Q=h[x][2],ne=h[f][2],K=h[s][2],oe=h[t][2],le=L.xaxis&&(L.xaxis.type==="date"||L.xaxis.type==="log"),se=L.yaxis&&(L.yaxis.type==="date"||L.yaxis.type==="log");le&&(U=u(L.xaxis,U),re=u(L.xaxis,re),ee=u(L.xaxis,ee),J=u(L.xaxis,J)),se&&(Q=u(L.yaxis,Q),ne=u(L.yaxis,ne),K=u(L.yaxis,K),oe=u(L.yaxis,oe));var de=(re+J)/2,be=(Q+K)/2,_e=p({x0:de,y0:be,x1:de+(J-re+ee-U)/2*o,y1:be+(oe-ne+K-Q)/2*r});le&&(_e.x0=a(L.xaxis,_e.x0),_e.x1=a(L.xaxis,_e.x1)),se&&(_e.y0=a(L.yaxis,_e.y0),_e.y1=a(L.yaxis,_e.y1)),H.x0=_e.x0,H.y0=_e.y0,H.x1=_e.x1,H.y1=_e.y1}else H.type="path",N&&V&&g(z,N,V),H.path=_(z),h=null;return H}C.exports={newShapes:function(b,y){if(b.length&&b[0][0]){var M=y.gd,h=y.isActiveShape,E=y.dragmode,k=(M.layout||{}).shapes||[];if(!w(E)&&h!==void 0){var D=M._fullLayout._activeShapeIndex;if(D<k.length)switch(M._fullLayout.shapes[D].type){case"rect":E="drawrect";break;case"circle":E="drawcircle";break;case"line":E="drawline";break;case"path":var P=k[D].path||"";E=P[P.length-1]==="Z"?"drawclosedpath":"drawopenpath"}}var L=m(b,y,E);l(M);for(var O=y.editHelpers,N=(O||{}).modifyItem,V=[],F=0;F<k.length;F++){var j=M._fullLayout.shapes[F];if(V[F]=j._input,h!==void 0&&F===M._fullLayout._activeShapeIndex){var Z=L;switch(j.type){case"line":case"rect":case"circle":N("x0",Z.x0),N("x1",Z.x1),N("y0",Z.y0),N("y1",Z.y1);break;case"path":N("path",Z.path)}}}return h===void 0?(V.push(L),V):O?O.getUpdateObj():{}}},createShapeObj:m}},1936:function(C){"use strict";C.exports={clearOutlineControllers:function(A){var e=A._fullLayout._zoomlayer;e&&e.selectAll(".outline-controllers").remove()},clearOutline:function(A){var e=A._fullLayout._zoomlayer;e&&e.selectAll(".select-outline").remove(),A._fullLayout._outlining=!1}}},65152:function(C,A,e){"use strict";var v=e(85448),w=e(3400),n=e(54460);A.rangeToShapePosition=function(T){return T.type==="log"?T.r2d:function(x){return x}},A.shapePositionToRange=function(T){return T.type==="log"?T.d2r:function(x){return x}},A.decodeDate=function(T){return function(x){return x.replace&&(x=x.replace("_"," ")),T(x)}},A.encodeDate=function(T){return function(x){return T(x).replace(" ","_")}},A.extractPathCoords=function(T,x,f){var s=[];return T.match(v.segmentRE).forEach(function(t){var o=x[t.charAt(0)].drawn;if(o!==void 0){var r=t.substr(1).match(v.paramRE);if(r&&!(r.length<o)){var i=r[o],a=f?i:w.cleanNumber(i);s.push(a)}}}),s},A.getDataToPixel=function(T,x,f,s){var t,o=T._fullLayout._size;if(x)if(s==="domain")t=function(i){return x._length*(f?1-i:i)+x._offset};else{var r=A.shapePositionToRange(x);t=function(i){return x._offset+x.r2p(r(i,!0))},x.type==="date"&&(t=A.decodeDate(t))}else t=f?function(i){return o.t+o.h*(1-i)}:function(i){return o.l+o.w*i};return t},A.getPixelToData=function(T,x,f,s){var t,o=T._fullLayout._size;if(x)if(s==="domain")t=function(i){var a=(i-x._offset)/x._length;return f?1-a:a};else{var r=A.rangeToShapePosition(x);t=function(i){return r(x.p2r(i-x._offset))}}else t=f?function(i){return 1-(i-o.t)/o.h}:function(i){return(i-o.l)/o.w};return t},A.roundPositionForSharpStrokeRendering=function(T,x){var f=Math.round(x%2)===1,s=Math.round(T);return f?s+.5:s},A.makeShapesOptionsAndPlotinfo=function(T,x){var f=T._fullLayout.shapes[x]||{},s=T._fullLayout._plots[f.xref+f.yref];return s?s._hadPlotinfo=!0:(s={},f.xref&&f.xref!=="paper"&&(s.xaxis=T._fullLayout[f.xref+"axis"]),f.yref&&f.yref!=="paper"&&(s.yaxis=T._fullLayout[f.yref+"axis"])),s.xsizemode=f.xsizemode,s.ysizemode=f.ysizemode,s.xanchor=f.xanchor,s.yanchor=f.yanchor,{options:f,plotinfo:s}},A.makeSelectionsOptionsAndPlotinfo=function(T,x){var f=T._fullLayout.selections[x]||{},s=T._fullLayout._plots[f.xref+f.yref];return s?s._hadPlotinfo=!0:(s={},f.xref&&(s.xaxis=T._fullLayout[f.xref+"axis"]),f.yref&&(s.yaxis=T._fullLayout[f.yref+"axis"])),{options:f,plotinfo:s}},A.getPathString=function(T,x){var f,s,t,o,r,i,a,u,l=x.type,d=n.getRefType(x.xref),c=n.getRefType(x.yref),_=n.getFromId(T,x.xref),p=n.getFromId(T,x.yref),g=T._fullLayout._size;if(_?d==="domain"?s=function(P){return _._offset+_._length*P}:(f=A.shapePositionToRange(_),s=function(P){return _._offset+_.r2p(f(P,!0))}):s=function(P){return g.l+g.w*P},p?c==="domain"?o=function(P){return p._offset+p._length*(1-P)}:(t=A.shapePositionToRange(p),o=function(P){return p._offset+p.r2p(t(P,!0))}):o=function(P){return g.t+g.h*(1-P)},l==="path")return _&&_.type==="date"&&(s=A.decodeDate(s)),p&&p.type==="date"&&(o=A.decodeDate(o)),function(P,L,O){var N=P.path,V=P.xsizemode,F=P.ysizemode,j=P.xanchor,Z=P.yanchor;return N.replace(v.segmentRE,function(z){var H=0,U=z.charAt(0),re=v.paramIsX[U],ee=v.paramIsY[U],J=v.numParams[U],Q=z.substr(1).replace(v.paramRE,function(ne){return re[H]?ne=V==="pixel"?L(j)+Number(ne):L(ne):ee[H]&&(ne=F==="pixel"?O(Z)-Number(ne):O(ne)),++H>J&&(ne="X"),ne});return H>J&&(Q=Q.replace(/[\s,]*X.*/,""),w.log("Ignoring extra params in segment "+z)),U+Q})}(x,s,o);if(x.xsizemode==="pixel"){var m=s(x.xanchor);r=m+x.x0,i=m+x.x1}else r=s(x.x0),i=s(x.x1);if(x.ysizemode==="pixel"){var b=o(x.yanchor);a=b-x.y0,u=b-x.y1}else a=o(x.y0),u=o(x.y1);if(l==="line")return"M"+r+","+a+"L"+i+","+u;if(l==="rect")return"M"+r+","+a+"H"+i+"V"+u+"H"+r+"Z";var y=(r+i)/2,M=(a+u)/2,h=Math.abs(y-r),E=Math.abs(M-a),k="A"+h+","+E,D=y+h+","+M;return"M"+D+k+" 0 1,1 "+y+","+(M-E)+k+" 0 0,1 "+D+"Z"}},41592:function(C,A,e){"use strict";var v=e(4016);C.exports={moduleType:"component",name:"shapes",layoutAttributes:e(46056),supplyLayoutDefaults:e(43712),supplyDrawNewShapeDefaults:e(65144),includeBasePlot:e(36632)("shapes"),calcAutorange:e(96084),draw:v.draw,drawOne:v.drawOne}},97728:function(C){"use strict";function A(n,T){return T?T.d2l(n):n}function e(n,T){return T?T.l2d(n):n}function v(n,T){return A(n.x1,T)-A(n.x0,T)}function w(n,T,x){return A(n.y1,x)-A(n.y0,x)}C.exports={x0:function(n){return n.x0},x1:function(n){return n.x1},y0:function(n){return n.y0},y1:function(n){return n.y1},slope:function(n,T,x){return n.type!=="line"?void 0:w(n,0,x)/v(n,T)},dx:v,dy:w,width:function(n,T){return Math.abs(v(n,T))},height:function(n,T,x){return Math.abs(w(n,0,x))},length:function(n,T,x){return n.type!=="line"?void 0:Math.sqrt(Math.pow(v(n,T),2)+Math.pow(w(n,0,x),2))},xcenter:function(n,T){return e((A(n.x1,T)+A(n.x0,T))/2,T)},ycenter:function(n,T,x){return e((A(n.y1,x)+A(n.y0,x))/2,x)}}},89861:function(C,A,e){"use strict";var v=e(25376),w=e(66741),n=e(92880).extendDeepAll,T=e(67824).overrideAll,x=e(85656),f=e(31780).templatedArray,s=e(60876),t=f("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});C.exports=T(f("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:t,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:n(w({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:x.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:v({})},font:v({}),activebgcolor:{valType:"color",dflt:s.gripBgActiveColor},bgcolor:{valType:"color",dflt:s.railBgColor},bordercolor:{valType:"color",dflt:s.railBorderColor},borderwidth:{valType:"number",min:0,dflt:s.railBorderWidth},ticklen:{valType:"number",min:0,dflt:s.tickLength},tickcolor:{valType:"color",dflt:s.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:s.minorTickLength}}),"arraydraw","from-root")},60876:function(C){"use strict";C.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},8132:function(C,A,e){"use strict";var v=e(3400),w=e(51272),n=e(89861),T=e(60876).name,x=n.steps;function f(t,o,r){function i(c,_){return v.coerce(t,o,n,c,_)}for(var a=w(t,o,{name:"steps",handleItemDefaults:s}),u=0,l=0;l<a.length;l++)a[l].visible&&u++;if(u<2?o.visible=!1:i("visible")){o._stepCount=u;var d=o._visibleSteps=v.filterVisible(a);(a[i("active")]||{}).visible||(o.active=d[0]._index),i("x"),i("y"),v.noneOrAll(t,o,["x","y"]),i("xanchor"),i("yanchor"),i("len"),i("lenmode"),i("pad.t"),i("pad.r"),i("pad.b"),i("pad.l"),v.coerceFont(i,"font",r.font),i("currentvalue.visible")&&(i("currentvalue.xanchor"),i("currentvalue.prefix"),i("currentvalue.suffix"),i("currentvalue.offset"),v.coerceFont(i,"currentvalue.font",o.font)),i("transition.duration"),i("transition.easing"),i("bgcolor"),i("activebgcolor"),i("bordercolor"),i("borderwidth"),i("ticklen"),i("tickwidth"),i("tickcolor"),i("minorticklen")}}function s(t,o){function r(a,u){return v.coerce(t,o,x,a,u)}if(t.method==="skip"||Array.isArray(t.args)?r("visible"):o.visible=!1){r("method"),r("args");var i=r("label","step-"+o._index);r("value",i),r("execute")}}C.exports=function(t,o){w(t,o,{name:T,handleItemDefaults:f})}},79664:function(C,A,e){"use strict";var v=e(33428),w=e(7316),n=e(76308),T=e(43616),x=e(3400),f=x.strTranslate,s=e(72736),t=e(31780).arrayEditor,o=e(60876),r=e(84284),i=r.LINE_SPACING,a=r.FROM_TL,u=r.FROM_BR;function l(O){return o.autoMarginIdRoot+O._index}function d(O){return O._index}function c(O,N){var V=T.tester.selectAll("g."+o.labelGroupClass).data(N._visibleSteps);V.enter().append("g").classed(o.labelGroupClass,!0);var F=0,j=0;V.each(function(ne){var K=g(v.select(this),{step:ne},N).node();if(K){var oe=T.bBox(K);j=Math.max(j,oe.height),F=Math.max(F,oe.width)}}),V.remove();var Z=N._dims={};Z.inputAreaWidth=Math.max(o.railWidth,o.gripHeight);var z=O._fullLayout._size;Z.lx=z.l+z.w*N.x,Z.ly=z.t+z.h*(1-N.y),N.lenmode==="fraction"?Z.outerLength=Math.round(z.w*N.len):Z.outerLength=N.len,Z.inputAreaStart=0,Z.inputAreaLength=Math.round(Z.outerLength-N.pad.l-N.pad.r);var H=(Z.inputAreaLength-2*o.stepInset)/(N._stepCount-1),U=F+o.labelPadding;if(Z.labelStride=Math.max(1,Math.ceil(U/H)),Z.labelHeight=j,Z.currentValueMaxWidth=0,Z.currentValueHeight=0,Z.currentValueTotalHeight=0,Z.currentValueMaxLines=1,N.currentvalue.visible){var re=T.tester.append("g");V.each(function(ne){var K=_(re,N,ne.label),oe=K.node()&&T.bBox(K.node())||{width:0,height:0},le=s.lineCount(K);Z.currentValueMaxWidth=Math.max(Z.currentValueMaxWidth,Math.ceil(oe.width)),Z.currentValueHeight=Math.max(Z.currentValueHeight,Math.ceil(oe.height)),Z.currentValueMaxLines=Math.max(Z.currentValueMaxLines,le)}),Z.currentValueTotalHeight=Z.currentValueHeight+N.currentvalue.offset,re.remove()}Z.height=Z.currentValueTotalHeight+o.tickOffset+N.ticklen+o.labelOffset+Z.labelHeight+N.pad.t+N.pad.b;var ee="left";x.isRightAnchor(N)&&(Z.lx-=Z.outerLength,ee="right"),x.isCenterAnchor(N)&&(Z.lx-=Z.outerLength/2,ee="center");var J="top";x.isBottomAnchor(N)&&(Z.ly-=Z.height,J="bottom"),x.isMiddleAnchor(N)&&(Z.ly-=Z.height/2,J="middle"),Z.outerLength=Math.ceil(Z.outerLength),Z.height=Math.ceil(Z.height),Z.lx=Math.round(Z.lx),Z.ly=Math.round(Z.ly);var Q={y:N.y,b:Z.height*u[J],t:Z.height*a[J]};N.lenmode==="fraction"?(Q.l=0,Q.xl=N.x-N.len*a[ee],Q.r=0,Q.xr=N.x+N.len*u[ee]):(Q.x=N.x,Q.l=Z.outerLength*a[ee],Q.r=Z.outerLength*u[ee]),w.autoMargin(O,l(N),Q)}function _(O,N,V){if(N.currentvalue.visible){var F,j,Z=N._dims;switch(N.currentvalue.xanchor){case"right":F=Z.inputAreaLength-o.currentValueInset-Z.currentValueMaxWidth,j="left";break;case"center":F=.5*Z.inputAreaLength,j="middle";break;default:F=o.currentValueInset,j="left"}var z=x.ensureSingle(O,"text",o.labelClass,function(Q){Q.attr({"text-anchor":j,"data-notex":1})}),H=N.currentvalue.prefix?N.currentvalue.prefix:"";if(typeof V=="string")H+=V;else{var U=N.steps[N.active].label,re=N._gd._fullLayout._meta;re&&(U=x.templateString(U,re)),H+=U}N.currentvalue.suffix&&(H+=N.currentvalue.suffix),z.call(T.font,N.currentvalue.font).text(H).call(s.convertToTspans,N._gd);var ee=s.lineCount(z),J=(Z.currentValueMaxLines+1-ee)*N.currentvalue.font.size*i;return s.positionText(z,F,J),z}}function p(O,N,V){x.ensureSingle(O,"rect",o.gripRectClass,function(F){F.call(M,N,O,V).style("pointer-events","all")}).attr({width:o.gripWidth,height:o.gripHeight,rx:o.gripRadius,ry:o.gripRadius}).call(n.stroke,V.bordercolor).call(n.fill,V.bgcolor).style("stroke-width",V.borderwidth+"px")}function g(O,N,V){var F=x.ensureSingle(O,"text",o.labelClass,function(z){z.attr({"text-anchor":"middle","data-notex":1})}),j=N.step.label,Z=V._gd._fullLayout._meta;return Z&&(j=x.templateString(j,Z)),F.call(T.font,V.font).text(j).call(s.convertToTspans,V._gd),F}function m(O,N){var V=x.ensureSingle(O,"g",o.labelsClass),F=N._dims,j=V.selectAll("g."+o.labelGroupClass).data(F.labelSteps);j.enter().append("g").classed(o.labelGroupClass,!0),j.exit().remove(),j.each(function(Z){var z=v.select(this);z.call(g,Z,N),T.setTranslate(z,k(N,Z.fraction),o.tickOffset+N.ticklen+N.font.size*i+o.labelOffset+F.currentValueTotalHeight)})}function b(O,N,V,F,j){var Z=Math.round(F*(V._stepCount-1)),z=V._visibleSteps[Z]._index;z!==V.active&&y(O,N,V,z,!0,j)}function y(O,N,V,F,j,Z){var z=V.active;V.active=F,t(O.layout,o.name,V).applyUpdate("active",F);var H=V.steps[V.active];N.call(E,V,Z),N.call(_,V),O.emit("plotly_sliderchange",{slider:V,step:V.steps[V.active],interaction:j,previousActive:z}),H&&H.method&&j&&(N._nextMethod?(N._nextMethod.step=H,N._nextMethod.doCallback=j,N._nextMethod.doTransition=Z):(N._nextMethod={step:H,doCallback:j,doTransition:Z},N._nextMethodRaf=window.requestAnimationFrame(function(){var U=N._nextMethod.step;U.method&&(U.execute&&w.executeAPICommand(O,U.method,U.args),N._nextMethod=null,N._nextMethodRaf=null)})))}function M(O,N,V){if(!N._context.staticPlot){var F=V.node(),j=v.select(N);O.on("mousedown",z),O.on("touchstart",z)}function Z(){return V.data()[0]}function z(){var H=Z();N.emit("plotly_sliderstart",{slider:H});var U=V.select("."+o.gripRectClass);v.event.stopPropagation(),v.event.preventDefault(),U.call(n.fill,H.activebgcolor);var re=D(H,v.mouse(F)[0]);function ee(){var Q=Z(),ne=D(Q,v.mouse(F)[0]);b(N,V,Q,ne,!1)}function J(){var Q=Z();Q._dragging=!1,U.call(n.fill,Q.bgcolor),j.on("mouseup",null),j.on("mousemove",null),j.on("touchend",null),j.on("touchmove",null),N.emit("plotly_sliderend",{slider:Q,step:Q.steps[Q.active]})}b(N,V,H,re,!0),H._dragging=!0,j.on("mousemove",ee),j.on("touchmove",ee),j.on("mouseup",J),j.on("touchend",J)}}function h(O,N){var V=O.selectAll("rect."+o.tickRectClass).data(N._visibleSteps),F=N._dims;V.enter().append("rect").classed(o.tickRectClass,!0),V.exit().remove(),V.attr({width:N.tickwidth+"px","shape-rendering":"crispEdges"}),V.each(function(j,Z){var z=Z%F.labelStride==0,H=v.select(this);H.attr({height:z?N.ticklen:N.minorticklen}).call(n.fill,N.tickcolor),T.setTranslate(H,k(N,Z/(N._stepCount-1))-.5*N.tickwidth,(z?o.tickOffset:o.minorTickOffset)+F.currentValueTotalHeight)})}function E(O,N,V){for(var F=O.select("rect."+o.gripRectClass),j=0,Z=0;Z<N._stepCount;Z++)if(N._visibleSteps[Z]._index===N.active){j=Z;break}var z=k(N,j/(N._stepCount-1));if(!N._invokingCommand){var H=F;V&&N.transition.duration>0&&(H=H.transition().duration(N.transition.duration).ease(N.transition.easing)),H.attr("transform",f(z-.5*o.gripWidth,N._dims.currentValueTotalHeight))}}function k(O,N){var V=O._dims;return V.inputAreaStart+o.stepInset+(V.inputAreaLength-2*o.stepInset)*Math.min(1,Math.max(0,N))}function D(O,N){var V=O._dims;return Math.min(1,Math.max(0,(N-o.stepInset-V.inputAreaStart)/(V.inputAreaLength-2*o.stepInset-2*V.inputAreaStart)))}function P(O,N,V){var F=V._dims,j=x.ensureSingle(O,"rect",o.railTouchRectClass,function(Z){Z.call(M,N,O,V).style("pointer-events","all")});j.attr({width:F.inputAreaLength,height:Math.max(F.inputAreaWidth,o.tickOffset+V.ticklen+F.labelHeight)}).call(n.fill,V.bgcolor).attr("opacity",0),T.setTranslate(j,0,F.currentValueTotalHeight)}function L(O,N){var V=N._dims,F=V.inputAreaLength-2*o.railInset,j=x.ensureSingle(O,"rect",o.railRectClass);j.attr({width:F,height:o.railWidth,rx:o.railRadius,ry:o.railRadius,"shape-rendering":"crispEdges"}).call(n.stroke,N.bordercolor).call(n.fill,N.bgcolor).style("stroke-width",N.borderwidth+"px"),T.setTranslate(j,o.railInset,.5*(V.inputAreaWidth-o.railWidth)+V.currentValueTotalHeight)}C.exports=function(O){var N=O._context.staticPlot,V=O._fullLayout,F=function(re,ee){for(var J=re[o.name],Q=[],ne=0;ne<J.length;ne++){var K=J[ne];K.visible&&(K._gd=ee,Q.push(K))}return Q}(V,O),j=V._infolayer.selectAll("g."+o.containerClassName).data(F.length>0?[0]:[]);function Z(re){re._commandObserver&&(re._commandObserver.remove(),delete re._commandObserver),w.autoMargin(O,l(re))}if(j.enter().append("g").classed(o.containerClassName,!0).style("cursor",N?null:"ew-resize"),j.exit().each(function(){v.select(this).selectAll("g."+o.groupClassName).each(Z)}).remove(),F.length!==0){var z=j.selectAll("g."+o.groupClassName).data(F,d);z.enter().append("g").classed(o.groupClassName,!0),z.exit().each(Z).remove();for(var H=0;H<F.length;H++){var U=F[H];c(O,U)}z.each(function(re){var ee=v.select(this);(function(J){var Q=J._dims;Q.labelSteps=[];for(var ne=J._stepCount,K=0;K<ne;K+=Q.labelStride)Q.labelSteps.push({fraction:K/(ne-1),step:J._visibleSteps[K]})})(re),w.manageCommandObserver(O,re,re._visibleSteps,function(J){var Q=ee.data()[0];Q.active!==J.index&&(Q._dragging||y(O,ee,Q,J.index,!1,!0))}),function(J,Q,ne){(ne.steps[ne.active]||{}).visible||(ne.active=ne._visibleSteps[0]._index),Q.call(_,ne).call(L,ne).call(m,ne).call(h,ne).call(P,J,ne).call(p,J,ne);var K=ne._dims;T.setTranslate(Q,K.lx+ne.pad.l,K.ly+ne.pad.t),Q.call(E,ne,!1),Q.call(_,ne)}(O,v.select(this),re)})}}},97544:function(C,A,e){"use strict";var v=e(60876);C.exports={moduleType:"component",name:v.name,layoutAttributes:e(89861),supplyLayoutDefaults:e(8132),draw:e(79664)}},81668:function(C,A,e){"use strict";var v=e(33428),w=e(38248),n=e(7316),T=e(24040),x=e(3400),f=x.strTranslate,s=e(43616),t=e(76308),o=e(72736),r=e(13448),i=e(84284).OPPOSITE_SIDE,a=/ [XY][0-9]* /;C.exports={draw:function(u,l,d){var c,_=d.propContainer,p=d.propName,g=d.placeholder,m=d.traceIndex,b=d.avoid||{},y=d.attributes,M=d.transform,h=d.containerGroup,E=u._fullLayout,k=1,D=!1,P=_.title,L=(P&&P.text?P.text:"").trim(),O=P&&P.font?P.font:{},N=O.family,V=O.size,F=O.color,j=O.weight,Z=O.style,z=O.variant;p==="title.text"?c="titleText":p.indexOf("axis")!==-1?c="axisTitleText":p.indexOf(!0)&&(c="colorbarTitleText");var H=u._context.edits[c];L===""?k=0:L.replace(a," % ")===g.replace(a," % ")&&(k=.2,D=!0,H||(L="")),d._meta?L=x.templateString(L,d._meta):E._meta&&(L=x.templateString(L,E._meta));var U,re=L||H;h||(h=x.ensureSingle(E._infolayer,"g","g-"+l),U=E._hColorbarMoveTitle);var ee=h.selectAll("text").data(re?[0]:[]);if(ee.enter().append("text"),ee.text(L).attr("class",l),ee.exit().remove(),!re)return h;function J(K){x.syncOrAsync([Q,ne],K)}function Q(K){var oe;return!M&&U&&(M={}),M?(oe="",M.rotate&&(oe+="rotate("+[M.rotate,y.x,y.y]+")"),(M.offset||U)&&(oe+=f(0,(M.offset||0)-(U||0)))):oe=null,K.attr("transform",oe),K.style({"font-family":N,"font-size":v.round(V,2)+"px",fill:t.rgb(F),opacity:k*t.opacity(F),"font-weight":j,"font-style":Z,"font-variant":z}).attr(y).call(o.convertToTspans,u),n.previousPromises(u)}function ne(K){var oe=v.select(K.node().parentNode);if(b&&b.selection&&b.side&&L){oe.attr("transform",null);var le=i[b.side],se=b.side==="left"||b.side==="top"?-1:1,de=w(b.pad)?b.pad:2,be=s.bBox(oe.node()),_e={t:0,b:0,l:0,r:0},xe=u._fullLayout._reservedMargin;for(var ve in xe)for(var ye in xe[ve]){var me=xe[ve][ye];_e[ye]=Math.max(_e[ye],me)}var Me={left:_e.l,top:_e.t,right:E.width-_e.r,bottom:E.height-_e.b},Ae=b.maxShift||se*(Me[b.side]-be[b.side]),ce=0;if(Ae<0)ce=Ae;else{var ae=b.offsetLeft||0,pe=b.offsetTop||0;be.left-=ae,be.right-=ae,be.top-=pe,be.bottom-=pe,b.selection.each(function(){var ke=s.bBox(this);x.bBoxIntersect(be,ke,de)&&(ce=Math.max(ce,se*(ke[b.side]-be[le])+de))}),ce=Math.min(Ae,ce),_._titleScoot=Math.abs(ce)}if(ce>0||Ae<0){var De={left:[-ce,0],right:[ce,0],top:[0,-ce],bottom:[0,ce]}[b.side];oe.attr("transform",f(De[0],De[1]))}}}return ee.call(J),H&&(L?ee.on(".opacity",null):(k=0,D=!0,ee.text(g).on("mouseover.opacity",function(){v.select(this).transition().duration(r.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){v.select(this).transition().duration(r.HIDE_PLACEHOLDER).style("opacity",0)})),ee.call(o.makeEditable,{gd:u}).on("edit",function(K){m!==void 0?T.call("_guiRestyle",u,p,K,m):T.call("_guiRelayout",u,p,K)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(J)}).on("input",function(K){this.text(K||" ").call(o.positionText,y.x,y.y)})),ee.classed("js-placeholder",D),h}}},88444:function(C,A,e){"use strict";var v=e(25376),w=e(22548),n=e(92880).extendFlat,T=e(67824).overrideAll,x=e(66741),f=e(31780).templatedArray,s=f("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});C.exports=T(f("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:s,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:n(x({editType:"arraydraw"}),{}),font:v({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:w.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},73712:function(C){"use strict";C.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25C4",right:"\u25BA",up:"\u25B2",down:"\u25BC"}}},91384:function(C,A,e){"use strict";var v=e(3400),w=e(51272),n=e(88444),T=e(73712).name,x=n.buttons;function f(t,o,r){function i(a,u){return v.coerce(t,o,n,a,u)}i("visible",w(t,o,{name:"buttons",handleItemDefaults:s}).length>0)&&(i("active"),i("direction"),i("type"),i("showactive"),i("x"),i("y"),v.noneOrAll(t,o,["x","y"]),i("xanchor"),i("yanchor"),i("pad.t"),i("pad.r"),i("pad.b"),i("pad.l"),v.coerceFont(i,"font",r.font),i("bgcolor",r.paper_bgcolor),i("bordercolor"),i("borderwidth"))}function s(t,o){function r(i,a){return v.coerce(t,o,x,i,a)}r("visible",t.method==="skip"||Array.isArray(t.args))&&(r("method"),r("args"),r("args2"),r("label"),r("execute"))}C.exports=function(t,o){w(t,o,{name:T,handleItemDefaults:f})}},14420:function(C,A,e){"use strict";var v=e(33428),w=e(7316),n=e(76308),T=e(43616),x=e(3400),f=e(72736),s=e(31780).arrayEditor,t=e(84284).LINE_SPACING,o=e(73712),r=e(37400);function i(k){return k._index}function a(k,D){return+k.attr(o.menuIndexAttrName)===D._index}function u(k,D,P,L,O,N,V,F){D.active=V,s(k.layout,o.name,D).applyUpdate("active",V),D.type==="buttons"?d(k,L,null,null,D):D.type==="dropdown"&&(O.attr(o.menuIndexAttrName,"-1"),l(k,L,O,N,D),F||d(k,L,O,N,D))}function l(k,D,P,L,O){var N=x.ensureSingle(D,"g",o.headerClassName,function(H){H.style("pointer-events","all")}),V=O._dims,F=O.active,j=O.buttons[F]||o.blankHeaderOpts,Z={y:O.pad.t,yPad:0,x:O.pad.l,xPad:0,index:0},z={width:V.headerWidth,height:V.headerHeight};N.call(c,O,j,k).call(h,O,Z,z),x.ensureSingle(D,"text",o.headerArrowClassName,function(H){H.attr("text-anchor","end").call(T.font,O.font).text(o.arrowSymbol[O.direction])}).attr({x:V.headerWidth-o.arrowOffsetX+O.pad.l,y:V.headerHeight/2+o.textOffsetY+O.pad.t}),N.on("click",function(){P.call(E,String(a(P,O)?-1:O._index)),d(k,D,P,L,O)}),N.on("mouseover",function(){N.call(m)}),N.on("mouseout",function(){N.call(b,O)}),T.setTranslate(D,V.lx,V.ly)}function d(k,D,P,L,O){P||(P=D).attr("pointer-events","all");var N=function(Q){return+Q.attr(o.menuIndexAttrName)==-1}(P)&&O.type!=="buttons"?[]:O.buttons,V=O.type==="dropdown"?o.dropdownButtonClassName:o.buttonClassName,F=P.selectAll("g."+V).data(x.filterVisible(N)),j=F.enter().append("g").classed(V,!0),Z=F.exit();O.type==="dropdown"?(j.attr("opacity","0").transition().attr("opacity","1"),Z.transition().attr("opacity","0").remove()):Z.remove();var z=0,H=0,U=O._dims,re=["up","down"].indexOf(O.direction)!==-1;O.type==="dropdown"&&(re?H=U.headerHeight+o.gapButtonHeader:z=U.headerWidth+o.gapButtonHeader),O.type==="dropdown"&&O.direction==="up"&&(H=-o.gapButtonHeader+o.gapButton-U.openHeight),O.type==="dropdown"&&O.direction==="left"&&(z=-o.gapButtonHeader+o.gapButton-U.openWidth);var ee={x:U.lx+z+O.pad.l,y:U.ly+H+O.pad.t,yPad:o.gapButton,xPad:o.gapButton,index:0},J={l:ee.x+O.borderwidth,t:ee.y+O.borderwidth};F.each(function(Q,ne){var K=v.select(this);K.call(c,O,Q,k).call(h,O,ee),K.on("click",function(){v.event.defaultPrevented||(Q.execute&&(Q.args2&&O.active===ne?(u(k,O,0,D,P,L,-1),w.executeAPICommand(k,Q.method,Q.args2)):(u(k,O,0,D,P,L,ne),w.executeAPICommand(k,Q.method,Q.args))),k.emit("plotly_buttonclicked",{menu:O,button:Q,active:O.active}))}),K.on("mouseover",function(){K.call(m)}),K.on("mouseout",function(){K.call(b,O),F.call(g,O)})}),F.call(g,O),re?(J.w=Math.max(U.openWidth,U.headerWidth),J.h=ee.y-J.t):(J.w=ee.x-J.l,J.h=Math.max(U.openHeight,U.headerHeight)),J.direction=O.direction,L&&(F.size()?function(Q,ne,K,oe,le,se){var de,be,_e,xe=le.direction,ve=xe==="up"||xe==="down",ye=le._dims,me=le.active;if(ve)for(be=0,_e=0;_e<me;_e++)be+=ye.heights[_e]+o.gapButton;else for(de=0,_e=0;_e<me;_e++)de+=ye.widths[_e]+o.gapButton;oe.enable(se,de,be),oe.hbar&&oe.hbar.attr("opacity","0").transition().attr("opacity","1"),oe.vbar&&oe.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,L,O,J):function(Q){var ne=!!Q.hbar,K=!!Q.vbar;ne&&Q.hbar.transition().attr("opacity","0").each("end",function(){ne=!1,K||Q.disable()}),K&&Q.vbar.transition().attr("opacity","0").each("end",function(){K=!1,ne||Q.disable()})}(L))}function c(k,D,P,L){k.call(_,D).call(p,D,P,L)}function _(k,D){x.ensureSingle(k,"rect",o.itemRectClassName,function(P){P.attr({rx:o.rx,ry:o.ry,"shape-rendering":"crispEdges"})}).call(n.stroke,D.bordercolor).call(n.fill,D.bgcolor).style("stroke-width",D.borderwidth+"px")}function p(k,D,P,L){var O=x.ensureSingle(k,"text",o.itemTextClassName,function(F){F.attr({"text-anchor":"start","data-notex":1})}),N=P.label,V=L._fullLayout._meta;V&&(N=x.templateString(N,V)),O.call(T.font,D.font).text(N).call(f.convertToTspans,L)}function g(k,D){var P=D.active;k.each(function(L,O){var N=v.select(this);O===P&&D.showactive&&N.select("rect."+o.itemRectClassName).call(n.fill,o.activeColor)})}function m(k){k.select("rect."+o.itemRectClassName).call(n.fill,o.hoverColor)}function b(k,D){k.select("rect."+o.itemRectClassName).call(n.fill,D.bgcolor)}function y(k,D){var P=D._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},L=T.tester.selectAll("g."+o.dropdownButtonClassName).data(x.filterVisible(D.buttons));L.enter().append("g").classed(o.dropdownButtonClassName,!0);var O=["up","down"].indexOf(D.direction)!==-1;L.each(function(z,H){var U=v.select(this);U.call(c,D,z,k);var re=U.select("."+o.itemTextClassName),ee=re.node()&&T.bBox(re.node()).width,J=Math.max(ee+o.textPadX,o.minWidth),Q=D.font.size*t,ne=f.lineCount(re),K=Math.max(Q*ne,o.minHeight)+o.textOffsetY;K=Math.ceil(K),J=Math.ceil(J),P.widths[H]=J,P.heights[H]=K,P.height1=Math.max(P.height1,K),P.width1=Math.max(P.width1,J),O?(P.totalWidth=Math.max(P.totalWidth,J),P.openWidth=P.totalWidth,P.totalHeight+=K+o.gapButton,P.openHeight+=K+o.gapButton):(P.totalWidth+=J+o.gapButton,P.openWidth+=J+o.gapButton,P.totalHeight=Math.max(P.totalHeight,K),P.openHeight=P.totalHeight)}),O?P.totalHeight-=o.gapButton:P.totalWidth-=o.gapButton,P.headerWidth=P.width1+o.arrowPadX,P.headerHeight=P.height1,D.type==="dropdown"&&(O?(P.width1+=o.arrowPadX,P.totalHeight=P.height1):P.totalWidth=P.width1,P.totalWidth+=o.arrowPadX),L.remove();var N=P.totalWidth+D.pad.l+D.pad.r,V=P.totalHeight+D.pad.t+D.pad.b,F=k._fullLayout._size;P.lx=F.l+F.w*D.x,P.ly=F.t+F.h*(1-D.y);var j="left";x.isRightAnchor(D)&&(P.lx-=N,j="right"),x.isCenterAnchor(D)&&(P.lx-=N/2,j="center");var Z="top";x.isBottomAnchor(D)&&(P.ly-=V,Z="bottom"),x.isMiddleAnchor(D)&&(P.ly-=V/2,Z="middle"),P.totalWidth=Math.ceil(P.totalWidth),P.totalHeight=Math.ceil(P.totalHeight),P.lx=Math.round(P.lx),P.ly=Math.round(P.ly),w.autoMargin(k,M(D),{x:D.x,y:D.y,l:N*({right:1,center:.5}[j]||0),r:N*({left:1,center:.5}[j]||0),b:V*({top:1,middle:.5}[Z]||0),t:V*({bottom:1,middle:.5}[Z]||0)})}function M(k){return o.autoMarginIdRoot+k._index}function h(k,D,P,L){L=L||{};var O=k.select("."+o.itemRectClassName),N=k.select("."+o.itemTextClassName),V=D.borderwidth,F=P.index,j=D._dims;T.setTranslate(k,V+P.x,V+P.y);var Z=["up","down"].indexOf(D.direction)!==-1,z=L.height||(Z?j.heights[F]:j.height1);O.attr({x:0,y:0,width:L.width||(Z?j.width1:j.widths[F]),height:z});var H=D.font.size*t,U=(f.lineCount(N)-1)*H/2;f.positionText(N,o.textOffsetX,z/2-U+o.textOffsetY),Z?P.y+=j.heights[F]+P.yPad:P.x+=j.widths[F]+P.xPad,P.index++}function E(k,D){k.attr(o.menuIndexAttrName,D||"-1").selectAll("g."+o.dropdownButtonClassName).remove()}C.exports=function(k){var D=k._fullLayout,P=x.filterVisible(D[o.name]);function L(H){w.autoMargin(k,M(H))}var O=D._menulayer.selectAll("g."+o.containerClassName).data(P.length>0?[0]:[]);if(O.enter().append("g").classed(o.containerClassName,!0).style("cursor","pointer"),O.exit().each(function(){v.select(this).selectAll("g."+o.headerGroupClassName).each(L)}).remove(),P.length!==0){var N=O.selectAll("g."+o.headerGroupClassName).data(P,i);N.enter().append("g").classed(o.headerGroupClassName,!0);for(var V=x.ensureSingle(O,"g",o.dropdownButtonGroupClassName,function(H){H.style("pointer-events","all")}),F=0;F<P.length;F++){var j=P[F];y(k,j)}var Z="updatemenus"+D._uid,z=new r(k,V,Z);N.enter().size()&&(V.node().parentNode.appendChild(V.node()),V.call(E)),N.exit().each(function(H){V.call(E),L(H)}).remove(),N.each(function(H){var U=v.select(this),re=H.type==="dropdown"?V:null;w.manageCommandObserver(k,H,H.buttons,function(ee){u(k,H,H.buttons[ee.index],U,re,z,ee.index,!0)}),H.type==="dropdown"?(l(k,U,V,z,H),a(V,H)&&d(k,U,V,z,H)):d(k,U,null,null,H)})}}},76908:function(C,A,e){"use strict";var v=e(73712);C.exports={moduleType:"component",name:v.name,layoutAttributes:e(88444),supplyLayoutDefaults:e(91384),draw:e(14420)}},37400:function(C,A,e){"use strict";C.exports=x;var v=e(33428),w=e(76308),n=e(43616),T=e(3400);function x(f,s,t){this.gd=f,this.container=s,this.id=t,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}x.barWidth=2,x.barLength=20,x.barRadius=2,x.barPad=1,x.barColor="#808BA4",x.prototype.enable=function(f,s,t){var o=this.gd._fullLayout,r=o.width,i=o.height;this.position=f;var a,u,l,d,c=this.position.l,_=this.position.w,p=this.position.t,g=this.position.h,m=this.position.direction,b=m==="down",y=m==="left",M=m==="up",h=_,E=g;b||y||m==="right"||M||(this.position.direction="down",b=!0),b||M?(u=(a=c)+h,b?(l=p,E=(d=Math.min(l+E,i))-l):E=(d=p+E)-(l=Math.max(d-E,0))):(d=(l=p)+E,y?h=(u=c+h)-(a=Math.max(u-h,0)):(a=c,h=(u=Math.min(a+h,r))-a)),this._box={l:a,t:l,w:h,h:E};var k=_>h,D=x.barLength+2*x.barPad,P=x.barWidth+2*x.barPad,L=c,O=p+g;O+P>i&&(O=i-P);var N=this.container.selectAll("rect.scrollbar-horizontal").data(k?[0]:[]);N.exit().on(".drag",null).remove(),N.enter().append("rect").classed("scrollbar-horizontal",!0).call(w.fill,x.barColor),k?(this.hbar=N.attr({rx:x.barRadius,ry:x.barRadius,x:L,y:O,width:D,height:P}),this._hbarXMin=L+D/2,this._hbarTranslateMax=h-D):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var V=g>E,F=x.barWidth+2*x.barPad,j=x.barLength+2*x.barPad,Z=c+_,z=p;Z+F>r&&(Z=r-F);var H=this.container.selectAll("rect.scrollbar-vertical").data(V?[0]:[]);H.exit().on(".drag",null).remove(),H.enter().append("rect").classed("scrollbar-vertical",!0).call(w.fill,x.barColor),V?(this.vbar=H.attr({rx:x.barRadius,ry:x.barRadius,x:Z,y:z,width:F,height:j}),this._vbarYMin=z+j/2,this._vbarTranslateMax=E-j):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var U=this.id,re=a-.5,ee=V?u+F+.5:u+.5,J=l-.5,Q=k?d+P+.5:d+.5,ne=o._topdefs.selectAll("#"+U).data(k||V?[0]:[]);if(ne.exit().remove(),ne.enter().append("clipPath").attr("id",U).append("rect"),k||V?(this._clipRect=ne.select("rect").attr({x:Math.floor(re),y:Math.floor(J),width:Math.ceil(ee)-Math.floor(re),height:Math.ceil(Q)-Math.floor(J)}),this.container.call(n.setClipUrl,U,this.gd),this.bg.attr({x:c,y:p,width:_,height:g})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(n.setClipUrl,null),delete this._clipRect),k||V){var K=v.behavior.drag().on("dragstart",function(){v.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(K);var oe=v.behavior.drag().on("dragstart",function(){v.event.sourceEvent.preventDefault(),v.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));k&&this.hbar.on(".drag",null).call(oe),V&&this.vbar.on(".drag",null).call(oe)}this.setTranslate(s,t)},x.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(n.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},x.prototype._onBoxDrag=function(){var f=this.translateX,s=this.translateY;this.hbar&&(f-=v.event.dx),this.vbar&&(s-=v.event.dy),this.setTranslate(f,s)},x.prototype._onBoxWheel=function(){var f=this.translateX,s=this.translateY;this.hbar&&(f+=v.event.deltaY),this.vbar&&(s+=v.event.deltaY),this.setTranslate(f,s)},x.prototype._onBarDrag=function(){var f=this.translateX,s=this.translateY;if(this.hbar){var t=f+this._hbarXMin,o=t+this._hbarTranslateMax;f=(T.constrain(v.event.x,t,o)-t)/(o-t)*(this.position.w-this._box.w)}if(this.vbar){var r=s+this._vbarYMin,i=r+this._vbarTranslateMax;s=(T.constrain(v.event.y,r,i)-r)/(i-r)*(this.position.h-this._box.h)}this.setTranslate(f,s)},x.prototype.setTranslate=function(f,s){var t=this.position.w-this._box.w,o=this.position.h-this._box.h;if(f=T.constrain(f||0,0,t),s=T.constrain(s||0,0,o),this.translateX=f,this.translateY=s,this.container.call(n.setTranslate,this._box.l-this.position.l-f,this._box.t-this.position.t-s),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+f-.5),y:Math.floor(this.position.t+s-.5)}),this.hbar){var r=f/t;this.hbar.call(n.setTranslate,f+r*this._hbarTranslateMax,s)}if(this.vbar){var i=s/o;this.vbar.call(n.setTranslate,f,s+i*this._vbarTranslateMax)}}},84284:function(C){"use strict";C.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},36208:function(C){"use strict";C.exports={axisRefDescription:function(A,e,v){return["If set to a",A,"axis id (e.g. *"+A+"* or","*"+A+"2*), the `"+A+"` position refers to a",A,"coordinate. If set to *paper*, the `"+A+"`","position refers to the distance from the",e,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",e,"("+v+"). If set to a",A,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",e,"of the domain of that axis: e.g.,","*"+A+"2 domain* refers to the domain of the second",A," axis and a",A,"position of 0.5 refers to the","point between the",e,"and the",v,"of the domain of the","second",A,"axis."].join(" ")}}},48164:function(C){"use strict";C.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25B2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25BC"}}},26880:function(C){"use strict";C.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},69104:function(C){"use strict";C.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},99168:function(C){"use strict";C.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},87792:function(C){"use strict";C.exports={circle:"\u25CF","circle-open":"\u25CB",square:"\u25A0","square-open":"\u25A1",diamond:"\u25C6","diamond-open":"\u25C7",cross:"+",x:"\u274C"}},13448:function(C){"use strict";C.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},39032:function(C){"use strict";C.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},2264:function(C,A){"use strict";A.CSS_DECLARATIONS=[["image-rendering","optimizeSpeed"],["image-rendering","-moz-crisp-edges"],["image-rendering","-o-crisp-edges"],["image-rendering","-webkit-optimize-contrast"],["image-rendering","optimize-contrast"],["image-rendering","crisp-edges"],["image-rendering","pixelated"]],A.STYLE=A.CSS_DECLARATIONS.map(function(e){return e.join(": ")+"; "}).join("")},9616:function(C,A){"use strict";A.xmlns="http://www.w3.org/2000/xmlns/",A.svg="http://www.w3.org/2000/svg",A.xlink="http://www.w3.org/1999/xlink",A.svgAttrs={xmlns:A.svg,"xmlns:xlink":A.xlink}},64884:function(C,A,e){"use strict";A.version=e(25788).version,e(88324),e(79288);for(var v=e(24040),w=A.register=v.register,n=e(22448),T=Object.keys(n),x=0;x<T.length;x++){var f=T[x];f.charAt(0)!=="_"&&(A[f]=n[f]),w({moduleType:"apiMethod",name:f,fn:n[f]})}w(e(65875)),w([e(79180),e(56864),e(22676),e(41592),e(7402),e(76908),e(97544),e(49692),e(41152),e(12704),e(64968),e(8932),e(55080),e(2780),e(93024),e(45460)]),w([e(6580),e(11680)]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(w(window.PlotlyLocales),delete window.PlotlyLocales),A.Icons=e(9224);var s=e(93024),t=e(7316);A.Plots={resize:t.resize,graphJson:t.graphJson,sendDataToCloud:t.sendDataToCloud},A.Fx={hover:s.hover,unhover:s.unhover,loneHover:s.loneHover,loneUnhover:s.loneUnhover},A.Snapshot=e(78904),A.PlotSchema=e(73060)},9224:function(C){"use strict";C.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},98308:function(C,A){"use strict";A.isLeftAnchor=function(e){return e.xanchor==="left"||e.xanchor==="auto"&&e.x<=.3333333333333333},A.isCenterAnchor=function(e){return e.xanchor==="center"||e.xanchor==="auto"&&e.x>.3333333333333333&&e.x<.6666666666666666},A.isRightAnchor=function(e){return e.xanchor==="right"||e.xanchor==="auto"&&e.x>=.6666666666666666},A.isTopAnchor=function(e){return e.yanchor==="top"||e.yanchor==="auto"&&e.y>=.6666666666666666},A.isMiddleAnchor=function(e){return e.yanchor==="middle"||e.yanchor==="auto"&&e.y>.3333333333333333&&e.y<.6666666666666666},A.isBottomAnchor=function(e){return e.yanchor==="bottom"||e.yanchor==="auto"&&e.y<=.3333333333333333}},11864:function(C,A,e){"use strict";var v=e(20435),w=v.mod,n=v.modHalf,T=Math.PI,x=2*T;function f(r){return Math.abs(r[1]-r[0])>x-1e-14}function s(r,i){return n(i-r,x)}function t(r,i){if(f(i))return!0;var a,u;i[0]<i[1]?(a=i[0],u=i[1]):(a=i[1],u=i[0]),(a=w(a,x))>(u=w(u,x))&&(u+=x);var l=w(r,x),d=l+x;return l>=a&&l<=u||d>=a&&d<=u}function o(r,i,a,u,l,d,c){l=l||0,d=d||0;var _,p,g,m,b,y=f([a,u]);function M(D,P){return[D*Math.cos(P)+l,d-D*Math.sin(P)]}y?(_=0,p=T,g=x):a<u?(_=a,g=u):(_=u,g=a),r<i?(m=r,b=i):(m=i,b=r);var h,E=Math.abs(g-_)<=T?0:1;function k(D,P,L){return"A"+[D,D]+" "+[0,E,L]+" "+M(D,P)}return y?h=m===null?"M"+M(b,_)+k(b,p,0)+k(b,g,0)+"Z":"M"+M(m,_)+k(m,p,0)+k(m,g,0)+"ZM"+M(b,_)+k(b,p,1)+k(b,g,1)+"Z":m===null?(h="M"+M(b,_)+k(b,g,0),c&&(h+="L0,0Z")):h="M"+M(m,_)+"L"+M(b,_)+k(b,g,0)+"L"+M(m,g)+k(m,_,1)+"Z",h}C.exports={deg2rad:function(r){return r/180*T},rad2deg:function(r){return r/T*180},angleDelta:s,angleDist:function(r,i){return Math.abs(s(r,i))},isFullCircle:f,isAngleInsideSector:t,isPtInsideSector:function(r,i,a,u){return!!t(i,u)&&(a[0]<a[1]?(l=a[0],d=a[1]):(l=a[1],d=a[0]),r>=l&&r<=d);var l,d},pathArc:function(r,i,a,u,l){return o(null,r,i,a,u,l,0)},pathSector:function(r,i,a,u,l){return o(null,r,i,a,u,l,1)},pathAnnulus:function(r,i,a,u,l,d){return o(r,i,a,u,l,d,1)}}},38116:function(C,A,e){"use strict";var v=e(83160).decode,w=e(63620),n=Array.isArray,T=ArrayBuffer,x=DataView;function f(i){return T.isView(i)&&!(i instanceof x)}function s(i){return n(i)||f(i)}A.isTypedArray=f,A.isArrayOrTypedArray=s,A.isArray1D=function(i){return!s(i[0])},A.ensureArray=function(i,a){return n(i)||(i=[]),i.length=a,i};var t={u1c:typeof Uint8ClampedArray>"u"?void 0:Uint8ClampedArray,i1:typeof Int8Array>"u"?void 0:Int8Array,u1:typeof Uint8Array>"u"?void 0:Uint8Array,i2:typeof Int16Array>"u"?void 0:Int16Array,u2:typeof Uint16Array>"u"?void 0:Uint16Array,i4:typeof Int32Array>"u"?void 0:Int32Array,u4:typeof Uint32Array>"u"?void 0:Uint32Array,f4:typeof Float32Array>"u"?void 0:Float32Array,f8:typeof Float64Array>"u"?void 0:Float64Array};function o(i){return i.constructor===ArrayBuffer}function r(i,a,u){if(s(i)){if(s(i[0])){for(var l=u,d=0;d<i.length;d++)l=a(l,i[d].length);return l}return i.length}return 0}t.uint8c=t.u1c,t.uint8=t.u1,t.int8=t.i1,t.uint16=t.u2,t.int16=t.i2,t.uint32=t.u4,t.int32=t.i4,t.float32=t.f4,t.float64=t.f8,A.isArrayBuffer=o,A.decodeTypedArraySpec=function(i){var a=[],u=function(D){return{bdata:D.bdata,dtype:D.dtype,shape:D.shape}}(i),l=u.dtype,d=t[l];if(!d)throw new Error('Error in dtype: "'+l+'"');var c=d.BYTES_PER_ELEMENT,_=u.bdata;o(_)||(_=v(_));var p=u.shape===void 0?[_.byteLength/c]:(""+u.shape).split(",");p.reverse();var g,m,b=p.length,y=+p[0],M=c*y,h=0;if(b===1)a=new d(_);else if(b===2)for(g=+p[1],m=0;m<g;m++)a[m]=new d(_,h,y),h+=M;else{if(b!==3)throw new Error("ndim: "+b+'is not supported with the shape:"'+u.shape+'"');g=+p[1];for(var E=+p[2],k=0;k<E;k++)for(a[k]=[],m=0;m<g;m++)a[k][m]=new d(_,h,y),h+=M}return a.bdata=u.bdata,a.dtype=u.dtype,a.shape=p.reverse().join(","),i._inputArray=a,a},A.isTypedArraySpec=function(i){return w(i)&&i.hasOwnProperty("dtype")&&typeof i.dtype=="string"&&i.hasOwnProperty("bdata")&&(typeof i.bdata=="string"||o(i.bdata))&&(i.shape===void 0||i.hasOwnProperty("shape")&&(typeof i.shape=="string"||typeof i.shape=="number"))},A.concat=function(){var i,a,u,l,d,c,_,p,g=[],m=!0,b=0;for(u=0;u<arguments.length;u++)(c=(l=arguments[u]).length)&&(a?g.push(l):(a=l,d=c),n(l)?i=!1:(m=!1,b?i!==l.constructor&&(i=!1):i=l.constructor),b+=c);if(!b)return[];if(!g.length)return a;if(m)return a.concat.apply(a,g);if(i){for((_=new i(b)).set(a),u=0;u<g.length;u++)l=g[u],_.set(l,d),d+=l.length;return _}for(_=new Array(b),p=0;p<a.length;p++)_[p]=a[p];for(u=0;u<g.length;u++){for(l=g[u],p=0;p<l.length;p++)_[d+p]=l[p];d+=p}return _},A.maxRowLength=function(i){return r(i,Math.max,0)},A.minRowLength=function(i){return r(i,Math.min,1/0)}},54037:function(C,A,e){"use strict";var v=e(38248),w=e(39032).BADNUM,n=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;C.exports=function(T){return typeof T=="string"&&(T=T.replace(n,"")),v(T)?Number(T):w}},73696:function(C){"use strict";C.exports=function(A){var e=A._fullLayout;e._glcanvas&&e._glcanvas.size()&&e._glcanvas.each(function(v){v.regl&&v.regl.clear({color:!0,depth:!0})})}},75352:function(C){"use strict";C.exports=function(A){A._responsiveChartHandler&&(window.removeEventListener("resize",A._responsiveChartHandler),delete A._responsiveChartHandler)}},63064:function(C,A,e){"use strict";var v=e(38248),w=e(49760),n=e(45464),T=e(88304),x=e(76308),f=e(13448).DESELECTDIM,s=e(22296),t=e(53756).counter,o=e(20435).modHalf,r=e(38116).isArrayOrTypedArray,i=e(38116).isTypedArraySpec,a=e(38116).decodeTypedArraySpec;function u(l,d){var c=A.valObjectMeta[d.valType];if(d.arrayOk&&r(l))return!0;if(c.validateFunction)return c.validateFunction(l,d);var _={},p=_,g={set:function(m){p=m}};return c.coerceFunction(l,g,_,d),p!==_}A.valObjectMeta={data_array:{coerceFunction:function(l,d,c){d.set(r(l)?l:i(l)?a(l):c)}},enumerated:{coerceFunction:function(l,d,c,_){_.coerceNumber&&(l=+l),_.values.indexOf(l)===-1?d.set(c):d.set(l)},validateFunction:function(l,d){d.coerceNumber&&(l=+l);for(var c=d.values,_=0;_<c.length;_++){var p=String(c[_]);if(p.charAt(0)==="/"&&p.charAt(p.length-1)==="/"){if(new RegExp(p.substr(1,p.length-2)).test(l))return!0}else if(l===c[_])return!0}return!1}},boolean:{coerceFunction:function(l,d,c){l===!0||l===!1?d.set(l):d.set(c)}},number:{coerceFunction:function(l,d,c,_){!v(l)||_.min!==void 0&&l<_.min||_.max!==void 0&&l>_.max?d.set(c):d.set(+l)}},integer:{coerceFunction:function(l,d,c,_){l%1||!v(l)||_.min!==void 0&&l<_.min||_.max!==void 0&&l>_.max?d.set(c):d.set(+l)}},string:{coerceFunction:function(l,d,c,_){if(typeof l!="string"){var p=typeof l=="number";_.strict!==!0&&p?d.set(String(l)):d.set(c)}else _.noBlank&&!l?d.set(c):d.set(l)}},color:{coerceFunction:function(l,d,c){w(l).isValid()?d.set(l):d.set(c)}},colorlist:{coerceFunction:function(l,d,c){Array.isArray(l)&&l.length&&l.every(function(_){return w(_).isValid()})?d.set(l):d.set(c)}},colorscale:{coerceFunction:function(l,d,c){d.set(T.get(l,c))}},angle:{coerceFunction:function(l,d,c){l==="auto"?d.set("auto"):v(l)?d.set(o(+l,360)):d.set(c)}},subplotid:{coerceFunction:function(l,d,c,_){var p=_.regex||t(c);typeof l=="string"&&p.test(l)?d.set(l):d.set(c)},validateFunction:function(l,d){var c=d.dflt;return l===c||typeof l=="string"&&!!t(c).test(l)}},flaglist:{coerceFunction:function(l,d,c,_){if((_.extras||[]).indexOf(l)===-1)if(typeof l=="string"){for(var p=l.split("+"),g=0;g<p.length;){var m=p[g];_.flags.indexOf(m)===-1||p.indexOf(m)<g?p.splice(g,1):g++}p.length?d.set(p.join("+")):d.set(c)}else d.set(c);else d.set(l)}},any:{coerceFunction:function(l,d,c){l===void 0?d.set(c):d.set(i(l)?a(l):l)}},info_array:{coerceFunction:function(l,d,c,_){function p(V,F,j){var Z,z={set:function(H){Z=H}};return j===void 0&&(j=F.dflt),A.valObjectMeta[F.valType].coerceFunction(V,z,j,F),Z}if(i(l)&&(l=a(l)),r(l)){var g,m,b,y,M,h,E=_.dimensions===2||_.dimensions==="1-2"&&Array.isArray(l)&&r(l[0]),k=_.items,D=[],P=Array.isArray(k),L=P&&E&&r(k[0]),O=E&&P&&!L,N=P&&!O?k.length:l.length;if(c=Array.isArray(c)?c:[],E)for(g=0;g<N;g++)for(D[g]=[],b=r(l[g])?l[g]:[],M=O?k.length:P?k[g].length:b.length,m=0;m<M;m++)y=O?k[m]:P?k[g][m]:k,(h=p(b[m],y,(c[g]||[])[m]))!==void 0&&(D[g][m]=h);else for(g=0;g<N;g++)(h=p(l[g],P?k[g]:k,c[g]))!==void 0&&(D[g]=h);d.set(D)}else d.set(c)},validateFunction:function(l,d){if(!r(l))return!1;var c=d.items,_=Array.isArray(c),p=d.dimensions===2;if(!d.freeLength&&l.length!==c.length)return!1;for(var g=0;g<l.length;g++)if(p){if(!r(l[g])||!d.freeLength&&l[g].length!==c[g].length)return!1;for(var m=0;m<l[g].length;m++)if(!u(l[g][m],_?c[g][m]:c))return!1}else if(!u(l[g],_?c[g]:c))return!1;return!0}}},A.coerce=function(l,d,c,_,p){var g=s(c,_).get(),m=s(l,_),b=s(d,_),y=m.get(),M=d._template;if(y===void 0&&M&&(y=s(M,_).get(),M=0),p===void 0&&(p=g.dflt),g.arrayOk){if(r(y))return b.set(y),y;if(i(y))return y=a(y),b.set(y),y}var h=A.valObjectMeta[g.valType].coerceFunction;h(y,b,p,g);var E=b.get();return M&&E===p&&!u(y,g)&&(h(y=s(M,_).get(),b,p,g),E=b.get()),E},A.coerce2=function(l,d,c,_,p){var g=s(l,_),m=A.coerce(l,d,c,_,p);return g.get()!=null&&m},A.coerceFont=function(l,d,c,_){_||(_={});var p={};return c=c||{},p.family=l(d+".family",c.family),p.size=l(d+".size",c.size),p.color=l(d+".color",c.color),p.weight=l(d+".weight",c.weight),p.style=l(d+".style",c.style),_.noFontVariant||(p.variant=l(d+".variant",c.variant)),p},A.coercePattern=function(l,d,c,_){if(l(d+".shape")){l(d+".solidity"),l(d+".size");var p=l(d+".fillmode")==="overlay";if(!_){var g=l(d+".bgcolor",p?c:void 0);l(d+".fgcolor",p?x.contrast(g):c)}l(d+".fgopacity",p?.5:1)}},A.coerceHoverinfo=function(l,d,c){var _,p=d._module.attributes,g=p.hoverinfo?p:n,m=g.hoverinfo;if(c._dataLength===1){var b=m.dflt==="all"?m.flags.slice():m.dflt.split("+");b.splice(b.indexOf("name"),1),_=b.join("+")}return A.coerce(l,d,g,"hoverinfo",_)},A.coerceSelectionMarkerOpacity=function(l,d){if(l.marker){var c,_,p=l.marker.opacity;p!==void 0&&(r(p)||l.selected||l.unselected||(c=p,_=f*p),d("selected.marker.opacity",c),d("unselected.marker.opacity",_))}},A.validate=u},67555:function(C,A,e){"use strict";var v,w,n=e(94336).Yn,T=e(38248),x=e(24248),f=e(20435).mod,s=e(39032),t=s.BADNUM,o=s.ONEDAY,r=s.ONEHOUR,i=s.ONEMIN,a=s.ONESEC,u=s.EPOCHJD,l=e(24040),d=e(94336).E9,c=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,_=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,p=new Date().getFullYear()-70;function g(N){return N&&l.componentsRegistry.calendars&&typeof N=="string"&&N!=="gregorian"}function m(N,V){return String(N+Math.pow(10,V)).substr(1)}A.dateTick0=function(N,V){var F=function(Z,z){return g(Z)?z?l.getComponentMethod("calendars","CANONICAL_SUNDAY")[Z]:l.getComponentMethod("calendars","CANONICAL_TICK")[Z]:z?"2000-01-02":"2000-01-01"}(N,!!V);if(V<2)return F;var j=A.dateTime2ms(F,N);return j+=o*(V-1),A.ms2DateTime(j,0,N)},A.dfltRange=function(N){return g(N)?l.getComponentMethod("calendars","DFLTRANGE")[N]:["2000-01-01","2001-01-01"]},A.isJSDate=function(N){return typeof N=="object"&&N!==null&&typeof N.getTime=="function"},A.dateTime2ms=function(N,V){if(A.isJSDate(N)){var F=N.getTimezoneOffset()*i,j=(N.getUTCMinutes()-N.getMinutes())*i+(N.getUTCSeconds()-N.getSeconds())*a+(N.getUTCMilliseconds()-N.getMilliseconds());if(j){var Z=3*i;F=F-Z/2+f(j-F+Z/2,Z)}return(N=Number(N)-F)>=v&&N<=w?N:t}if(typeof N!="string"&&typeof N!="number")return t;N=String(N);var z=g(V),H=N.charAt(0);!z||H!=="G"&&H!=="g"||(N=N.substr(1),V="");var U=z&&V.substr(0,7)==="chinese",re=N.match(U?_:c);if(!re)return t;var ee=re[1],J=re[3]||"1",Q=Number(re[5]||1),ne=Number(re[7]||0),K=Number(re[9]||0),oe=Number(re[11]||0);if(z){if(ee.length===2)return t;var le;ee=Number(ee);try{var se=l.getComponentMethod("calendars","getCal")(V);if(U){var de=J.charAt(J.length-1)==="i";J=parseInt(J,10),le=se.newDate(ee,se.toMonthIndex(ee,J,de),Q)}else le=se.newDate(ee,Number(J),Q)}catch{return t}return le?(le.toJD()-u)*o+ne*r+K*i+oe*a:t}ee=ee.length===2?(Number(ee)+2e3-p)%100+p:Number(ee),J-=1;var be=new Date(Date.UTC(2e3,J,Q,ne,K));return be.setUTCFullYear(ee),be.getUTCMonth()!==J||be.getUTCDate()!==Q?t:be.getTime()+oe*a},v=A.MIN_MS=A.dateTime2ms("-9999"),w=A.MAX_MS=A.dateTime2ms("9999-12-31 23:59:59.9999"),A.isDateTime=function(N,V){return A.dateTime2ms(N,V)!==t};var b=90*o,y=3*r,M=5*i;function h(N,V,F,j,Z){if((V||F||j||Z)&&(N+=" "+m(V,2)+":"+m(F,2),(j||Z)&&(N+=":"+m(j,2),Z))){for(var z=4;Z%10==0;)z-=1,Z/=10;N+="."+m(Z,z)}return N}A.ms2DateTime=function(N,V,F){if(typeof N!="number"||!(N>=v&&N<=w))return t;V||(V=0);var j,Z,z,H,U,re,ee=Math.floor(10*f(N+.05,1)),J=Math.round(N-ee/10);if(g(F)){var Q=Math.floor(J/o)+u,ne=Math.floor(f(N,o));try{j=l.getComponentMethod("calendars","getCal")(F).fromJD(Q).formatDate("yyyy-mm-dd")}catch{j=d("G%Y-%m-%d")(new Date(J))}if(j.charAt(0)==="-")for(;j.length<11;)j="-0"+j.substr(1);else for(;j.length<10;)j="0"+j;Z=V<b?Math.floor(ne/r):0,z=V<b?Math.floor(ne%r/i):0,H=V<y?Math.floor(ne%i/a):0,U=V<M?ne%a*10+ee:0}else re=new Date(J),j=d("%Y-%m-%d")(re),Z=V<b?re.getUTCHours():0,z=V<b?re.getUTCMinutes():0,H=V<y?re.getUTCSeconds():0,U=V<M?10*re.getUTCMilliseconds()+ee:0;return h(j,Z,z,H,U)},A.ms2DateTimeLocal=function(N){if(!(N>=v+o&&N<=w-o))return t;var V=Math.floor(10*f(N+.05,1)),F=new Date(Math.round(N-V/10));return h(n("%Y-%m-%d")(F),F.getHours(),F.getMinutes(),F.getSeconds(),10*F.getUTCMilliseconds()+V)},A.cleanDate=function(N,V,F){if(N===t)return V;if(A.isJSDate(N)||typeof N=="number"&&isFinite(N)){if(g(F))return x.error("JS Dates and milliseconds are incompatible with world calendars",N),V;if(!(N=A.ms2DateTimeLocal(+N))&&V!==void 0)return V}else if(!A.isDateTime(N,F))return x.error("unrecognized date",N),V;return N};var E=/%\d?f/g,k=/%h/g,D={1:"1",2:"1",3:"2",4:"2"};function P(N,V,F,j){N=N.replace(E,function(z){var H=Math.min(+z.charAt(1)||6,6);return(V/1e3%1+2).toFixed(H).substr(2).replace(/0+$/,"")||"0"});var Z=new Date(Math.floor(V+.05));if(N=N.replace(k,function(){return D[F("%q")(Z)]}),g(j))try{N=l.getComponentMethod("calendars","worldCalFmt")(N,V,j)}catch{return"Invalid"}return F(N)(Z)}var L=[59,59.9,59.99,59.999,59.9999];A.formatDate=function(N,V,F,j,Z,z){if(Z=g(Z)&&Z,!V)if(F==="y")V=z.year;else if(F==="m")V=z.month;else{if(F!=="d")return function(H,U){var re=f(H+.05,o),ee=m(Math.floor(re/r),2)+":"+m(f(Math.floor(re/i),60),2);if(U!=="M"){T(U)||(U=0);var J=(100+Math.min(f(H/a,60),L[U])).toFixed(U).substr(1);U>0&&(J=J.replace(/0+$/,"").replace(/[\.]$/,"")),ee+=":"+J}return ee}(N,F)+`
`+P(z.dayMonthYear,N,j,Z);V=z.dayMonth+`
`+z.year}return P(V,N,j,Z)};var O=3*o;A.incrementMonth=function(N,V,F){F=g(F)&&F;var j=f(N,o);if(N=Math.round(N-j),F)try{var Z=Math.round(N/o)+u,z=l.getComponentMethod("calendars","getCal")(F),H=z.fromJD(Z);return V%12?z.add(H,V,"m"):z.add(H,V/12,"y"),(H.toJD()-u)*o+j}catch{x.error("invalid ms "+N+" in calendar "+F)}var U=new Date(N+O);return U.setUTCMonth(U.getUTCMonth()+V)+j-O},A.findExactDates=function(N,V){for(var F,j,Z=0,z=0,H=0,U=0,re=g(V)&&l.getComponentMethod("calendars","getCal")(V),ee=0;ee<N.length;ee++)if(j=N[ee],T(j)){if(!(j%o))if(re)try{(F=re.fromJD(j/o+u)).day()===1?F.month()===1?Z++:z++:H++}catch{}else(F=new Date(j)).getUTCDate()===1?F.getUTCMonth()===0?Z++:z++:H++}else U++;H+=z+=Z;var J=N.length-U;return{exactYears:Z/J,exactMonths:z/J,exactDays:H/J}}},52200:function(C,A,e){"use strict";var v=e(33428),w=e(24248),n=e(52248),T=e(36524);function x(r){var i=r&&r.parentNode;i&&i.removeChild(r)}function f(r,i,a){var u="plotly.js-style-"+r,l=document.getElementById(u);l||((l=document.createElement("style")).setAttribute("id",u),l.appendChild(document.createTextNode("")),document.head.appendChild(l));var d=l.sheet;d.insertRule?d.insertRule(i+"{"+a+"}",0):d.addRule?d.addRule(i,a,0):w.warn("addStyleRule failed")}function s(r){var i=window.getComputedStyle(r,null),a=i.getPropertyValue("-webkit-transform")||i.getPropertyValue("-moz-transform")||i.getPropertyValue("-ms-transform")||i.getPropertyValue("-o-transform")||i.getPropertyValue("transform");return a==="none"?null:a.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(u){return+u})}function t(r){for(var i=[];o(r);)i.push(r),r=r.parentNode;return i}function o(r){return r&&(r instanceof Element||r instanceof HTMLElement)}C.exports={getGraphDiv:function(r){var i;if(typeof r=="string"){if((i=document.getElementById(r))===null)throw new Error("No DOM element with id '"+r+"' exists on the page.");return i}if(r==null)throw new Error("DOM element provided is null or undefined");return r},isPlotDiv:function(r){var i=v.select(r);return i.node()instanceof HTMLElement&&i.size()&&i.classed("js-plotly-plot")},removeElement:x,addStyleRule:function(r,i){f("global",r,i)},addRelatedStyleRule:f,deleteRelatedStyleRule:function(r){var i="plotly.js-style-"+r,a=document.getElementById(i);a&&x(a)},getFullTransformMatrix:function(r){var i=t(r),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return i.forEach(function(u){var l=s(u);if(l){var d=n.convertCssMatrix(l);a=T.multiply(a,a,d)}}),a},getElementTransformMatrix:s,getElementAndAncestors:t,equalDomRects:function(r,i){return r&&i&&r.top===i.top&&r.left===i.left&&r.right===i.right&&r.bottom===i.bottom}}},95924:function(C,A,e){"use strict";var v=e(61252).EventEmitter,w={init:function(n){if(n._ev instanceof v)return n;var T=new v,x=new v;return n._ev=T,n._internalEv=x,n.on=T.on.bind(T),n.once=T.once.bind(T),n.removeListener=T.removeListener.bind(T),n.removeAllListeners=T.removeAllListeners.bind(T),n._internalOn=x.on.bind(x),n._internalOnce=x.once.bind(x),n._removeInternalListener=x.removeListener.bind(x),n._removeAllInternalListeners=x.removeAllListeners.bind(x),n.emit=function(f,s){typeof jQuery<"u"&&jQuery(n).trigger(f,s),T.emit(f,s),x.emit(f,s)},n},triggerHandler:function(n,T,x){var f,s;typeof jQuery<"u"&&(f=jQuery(n).triggerHandler(T,x));var t=n._ev;if(!t)return f;var o,r=t._events[T];if(!r)return f;function i(a){return a.listener?(t.removeListener(T,a.listener),a.fired?void 0:(a.fired=!0,a.listener.apply(t,[x]))):a.apply(t,[x])}for(r=Array.isArray(r)?r:[r],o=0;o<r.length-1;o++)i(r[o]);return s=i(r[o]),f!==void 0?f:s},purge:function(n){return delete n._ev,delete n.on,delete n.once,delete n.removeListener,delete n.removeAllListeners,delete n.emit,delete n._ev,delete n._internalEv,delete n._internalOn,delete n._internalOnce,delete n._removeInternalListener,delete n._removeAllInternalListeners,n}};C.exports=w},92880:function(C,A,e){"use strict";var v=e(63620),w=Array.isArray;function n(T,x,f,s){var t,o,r,i,a,u,l,d=T[0],c=T.length;if(c===2&&w(d)&&w(T[1])&&d.length===0){if(l=function(p,g){var m,b;for(m=0;m<p.length;m++){if((b=p[m])!==null&&typeof b=="object")return!1;b!==void 0&&(g[m]=b)}return!0}(T[1],d),l)return d;d.splice(0,d.length)}for(var _=1;_<c;_++)for(o in t=T[_])r=d[o],i=t[o],s&&w(i)?d[o]=i:x&&i&&(v(i)||(a=w(i)))?(a?(a=!1,u=r&&w(r)?r:[]):u=r&&v(r)?r:{},d[o]=n([u,i],x,f,s)):(i!==void 0||f)&&(d[o]=i);return d}A.extendFlat=function(){return n(arguments,!1,!1,!1)},A.extendDeep=function(){return n(arguments,!0,!1,!1)},A.extendDeepAll=function(){return n(arguments,!0,!0,!1)},A.extendDeepNoArrays=function(){return n(arguments,!0,!1,!0)}},68944:function(C){"use strict";C.exports=function(A){for(var e={},v=[],w=0,n=0;n<A.length;n++){var T=A[n];e[T]!==1&&(e[T]=1,v[w++]=T)}return v}},43880:function(C){"use strict";function A(v){return v.visible===!0}function e(v){var w=v[0].trace;return w.visible===!0&&w._length!==0}C.exports=function(v){for(var w,n=(w=v,Array.isArray(w)&&Array.isArray(w[0])&&w[0][0]&&w[0][0].trace?e:A),T=[],x=0;x<v.length;x++){var f=v[x];n(f)&&T.push(f)}return T}},27144:function(C,A,e){"use strict";var v=e(33428),w=e(36116),n=e(40440),T=e(77844),x=e(42428),f=e(35536),s=e(24248),t=e(63620),o=e(22296),r=e(92065),i=Object.keys(w),a={"ISO-3":f,"USA-states":f,"country names":function(l){for(var d=0;d<i.length;d++){var c=i[d];if(new RegExp(w[c]).test(l.trim().toLowerCase()))return c}return s.log("Unrecognized country name: "+l+"."),!1}};function u(l){var d=l.geojson,c=window.PlotlyGeoAssets||{},_=typeof d=="string"?c[d]:d;return t(_)?_:(s.error("Oops ... something went wrong when fetching "+d),!1)}C.exports={locationToFeature:function(l,d,c){if(!d||typeof d!="string")return!1;var _,p,g,m=a[l](d);if(m){if(l==="USA-states")for(_=[],g=0;g<c.length;g++)(p=c[g]).properties&&p.properties.gu&&p.properties.gu==="USA"&&_.push(p);else _=c;for(g=0;g<_.length;g++)if((p=_[g]).id===m)return p;s.log(["Location with id",m,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(l){var d,c,_,p,g=l.geometry,m=g.coordinates,b=l.id,y=[];function M(h){for(var E=0;E<h.length-1;E++)if(h[E][0]>0&&h[E+1][0]<0)return E;return null}switch(d=b==="RUS"||b==="FJI"?function(h){var E;if(M(h)===null)E=h;else for(E=new Array(h.length),p=0;p<h.length;p++)E[p]=[h[p][0]<0?h[p][0]+360:h[p][0],h[p][1]];y.push(r.tester(E))}:b==="ATA"?function(h){var E=M(h);if(E===null)return y.push(r.tester(h));var k=new Array(h.length+1),D=0;for(p=0;p<h.length;p++)p>E?k[D++]=[h[p][0]+360,h[p][1]]:p===E?(k[D++]=h[p],k[D++]=[h[p][0],-90]):k[D++]=h[p];var P=r.tester(k);P.pts.pop(),y.push(P)}:function(h){y.push(r.tester(h))},g.type){case"MultiPolygon":for(c=0;c<m.length;c++)for(_=0;_<m[c].length;_++)d(m[c][_]);break;case"Polygon":for(c=0;c<m.length;c++)d(m[c])}return y},getTraceGeojson:u,extractTraceFeature:function(l){var d=l[0].trace,c=u(d);if(!c)return!1;var _,p={},g=[];for(_=0;_<d._length;_++){var m=l[_];(m.loc||m.loc===0)&&(p[m.loc]=m)}function b(h){var E=o(h,d.featureidkey||"id").get(),k=p[E];if(k){var D=h.geometry;if(D.type==="Polygon"||D.type==="MultiPolygon"){var P={type:"Feature",id:E,geometry:D,properties:{}};P.properties.ct=function(L){var O,N=L.geometry;if(N.type==="MultiPolygon")for(var V=N.coordinates,F=0,j=0;j<V.length;j++){var Z={type:"Polygon",coordinates:V[j]},z=n.default(Z);z>F&&(F=z,O=Z)}else O=N;return T.default(O).geometry.coordinates}(P),k.fIn=h,k.fOut=P,g.push(P)}else s.log(["Location",k.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete p[E]}switch(c.type){case"FeatureCollection":var y=c.features;for(_=0;_<y.length;_++)b(y[_]);break;case"Feature":b(c);break;default:return s.warn(["Invalid GeoJSON type",(c.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var M in p)s.log(["Location *"+M+"*","does not have a matching feature with id-key","*"+d.featureidkey+"*."].join(" "));return g},fetchTraceGeoData:function(l){var d=window.PlotlyGeoAssets||{},c=[];function _(b){return new Promise(function(y,M){v.json(b,function(h,E){if(h){delete d[b];var k=h.status===404?'GeoJSON at URL "'+b+'" does not exist.':"Unexpected error while fetching from "+b;return M(new Error(k))}return d[b]=E,y(E)})})}function p(b){return new Promise(function(y,M){var h=0,E=setInterval(function(){return d[b]&&d[b]!=="pending"?(clearInterval(E),y(d[b])):h>100?(clearInterval(E),M("Unexpected error while fetching from "+b)):void h++},50)})}for(var g=0;g<l.length;g++){var m=l[g][0].trace.geojson;typeof m=="string"&&(d[m]?d[m]==="pending"&&c.push(p(m)):(d[m]="pending",c.push(_(m))))}return c},computeBbox:function(l){return x.default(l)}}},44808:function(C,A,e){"use strict";var v=e(39032).BADNUM;A.calcTraceToLineCoords=function(w){for(var n=w[0].trace.connectgaps,T=[],x=[],f=0;f<w.length;f++){var s=w[f].lonlat;s[0]!==v?x.push(s):!n&&x.length>0&&(T.push(x),x=[])}return x.length>0&&T.push(x),T},A.makeLine=function(w){return w.length===1?{type:"LineString",coordinates:w[0]}:{type:"MultiLineString",coordinates:w}},A.makePolygon=function(w){if(w.length===1)return{type:"Polygon",coordinates:w};for(var n=new Array(w.length),T=0;T<w.length;T++)n[T]=[w[T]];return{type:"MultiPolygon",coordinates:n}},A.makeBlank=function(){return{type:"Point",coordinates:[]}}},92348:function(C,A,e){"use strict";var v,w,n,T=e(20435).mod;function x(s,t,o,r,i,a,u,l){var d=o-s,c=i-s,_=u-i,p=r-t,g=a-t,m=l-a,b=d*m-_*p;if(b===0)return null;var y=(c*m-_*g)/b,M=(c*p-d*g)/b;return M<0||M>1||y<0||y>1?null:{x:s+d*y,y:t+p*y}}function f(s,t,o,r,i){var a=r*s+i*t;if(a<0)return r*r+i*i;if(a>o){var u=r-s,l=i-t;return u*u+l*l}var d=r*t-i*s;return d*d/o}A.segmentsIntersect=x,A.segmentDistance=function(s,t,o,r,i,a,u,l){if(x(s,t,o,r,i,a,u,l))return 0;var d=o-s,c=r-t,_=u-i,p=l-a,g=d*d+c*c,m=_*_+p*p,b=Math.min(f(d,c,g,i-s,a-t),f(d,c,g,u-s,l-t),f(_,p,m,s-i,t-a),f(_,p,m,o-i,r-a));return Math.sqrt(b)},A.getTextLocation=function(s,t,o,r){if(s===w&&r===n||(v={},w=s,n=r),v[o])return v[o];var i=s.getPointAtLength(T(o-r/2,t)),a=s.getPointAtLength(T(o+r/2,t)),u=Math.atan((a.y-i.y)/(a.x-i.x)),l=s.getPointAtLength(T(o,t)),d={x:(4*l.x+i.x+a.x)/6,y:(4*l.y+i.y+a.y)/6,theta:u};return v[o]=d,d},A.clearLocationCache=function(){w=null},A.getVisibleSegment=function(s,t,o){var r,i,a=t.left,u=t.right,l=t.top,d=t.bottom,c=0,_=s.getTotalLength(),p=_;function g(b){var y=s.getPointAtLength(b);b===0?r=y:b===_&&(i=y);var M=y.x<a?a-y.x:y.x>u?y.x-u:0,h=y.y<l?l-y.y:y.y>d?y.y-d:0;return Math.sqrt(M*M+h*h)}for(var m=g(c);m;){if((c+=m+o)>p)return;m=g(c)}for(m=g(p);m;){if(c>(p-=m+o))return;m=g(p)}return{min:c,max:p,len:p-c,total:_,isClosed:c===0&&p===_&&Math.abs(r.x-i.x)<.1&&Math.abs(r.y-i.y)<.1}},A.findPointOnPath=function(s,t,o,r){for(var i,a,u,l=(r=r||{}).pathLength||s.getTotalLength(),d=r.tolerance||.001,c=r.iterationLimit||30,_=s.getPointAtLength(0)[o]>s.getPointAtLength(l)[o]?-1:1,p=0,g=0,m=l;p<c;){if(i=(g+m)/2,u=(a=s.getPointAtLength(i))[o]-t,Math.abs(u)<d)return a;_*u>0?m=i:g=i,p++}return a}},33040:function(C,A,e){"use strict";var v=e(38248),w=e(49760),n=e(72160),T=e(8932),x=e(22548).defaultLine,f=e(38116).isArrayOrTypedArray,s=n(x);function t(i,a){var u=i;return u[3]*=a,u}function o(i){if(v(i))return s;var a=n(i);return a.length?a:s}function r(i){return v(i)?i:1}C.exports={formatColor:function(i,a,u){var l=i.color;l&&l._inputArray&&(l=l._inputArray);var d,c,_,p,g,m=f(l),b=f(a),y=T.extractOpts(i),M=[];if(d=y.colorscale!==void 0?T.makeColorScaleFuncFromTrace(i):o,c=m?function(E,k){return E[k]===void 0?s:n(d(E[k]))}:o,_=b?function(E,k){return E[k]===void 0?1:r(E[k])}:r,m||b)for(var h=0;h<u;h++)p=c(l,h),g=_(a,h),M[h]=t(p,g);else M=t(n(l),a);return M},parseColorScale:function(i){var a=T.extractOpts(i),u=a.colorscale;return a.reversescale&&(u=T.flipScale(a.colorscale)),u.map(function(l){var d=l[0],c=w(l[1]).toRgb();return{index:d,rgb:[c.r,c.g,c.b,c.a]}})}}},71688:function(C,A,e){"use strict";var v=e(35536);function w(n){return[n]}C.exports={keyFun:function(n){return n.key},repeat:w,descend:v,wrap:w,unwrap:function(n){return n[0]}}},35536:function(C){"use strict";C.exports=function(A){return A}},1396:function(C){"use strict";C.exports=function(A,e){if(!e)return A;var v=1/Math.abs(e),w=v>1?(v*A+v*e)/v:A+e,n=String(w).length;if(n>16){var T=String(e).length;if(n>=String(A).length+T){var x=parseFloat(w).toPrecision(12);x.indexOf("e+")===-1&&(w=+x)}}return w}},3400:function(C,A,e){"use strict";var v=e(33428),w=e(94336).E9,n=e(57624).E9,T=e(38248),x=e(39032),f=x.FP_SAFE,s=-f,t=x.BADNUM,o=C.exports={};o.adjustFormat=function(ne){return!ne||/^\d[.]\df/.test(ne)||/[.]\d%/.test(ne)?ne:ne==="0.f"?"~f":/^\d%/.test(ne)?"~%":/^\ds/.test(ne)?"~s":!/^[~,.0$]/.test(ne)&&/[&fps]/.test(ne)?"~"+ne:ne};var r={};o.warnBadFormat=function(ne){var K=String(ne);r[K]||(r[K]=1,o.warn('encountered bad format: "'+K+'"'))},o.noFormat=function(ne){return String(ne)},o.numberFormat=function(ne){var K;try{K=n(o.adjustFormat(ne))}catch{return o.warnBadFormat(ne),o.noFormat}return K},o.nestedProperty=e(22296),o.keyedContainer=e(37804),o.relativeAttr=e(23193),o.isPlainObject=e(63620),o.toLogRange=e(36896),o.relinkPrivateKeys=e(51528);var i=e(38116);o.isArrayBuffer=i.isArrayBuffer,o.isTypedArray=i.isTypedArray,o.isArrayOrTypedArray=i.isArrayOrTypedArray,o.isArray1D=i.isArray1D,o.ensureArray=i.ensureArray,o.concat=i.concat,o.maxRowLength=i.maxRowLength,o.minRowLength=i.minRowLength;var a=e(20435);o.mod=a.mod,o.modHalf=a.modHalf;var u=e(63064);o.valObjectMeta=u.valObjectMeta,o.coerce=u.coerce,o.coerce2=u.coerce2,o.coerceFont=u.coerceFont,o.coercePattern=u.coercePattern,o.coerceHoverinfo=u.coerceHoverinfo,o.coerceSelectionMarkerOpacity=u.coerceSelectionMarkerOpacity,o.validate=u.validate;var l=e(67555);o.dateTime2ms=l.dateTime2ms,o.isDateTime=l.isDateTime,o.ms2DateTime=l.ms2DateTime,o.ms2DateTimeLocal=l.ms2DateTimeLocal,o.cleanDate=l.cleanDate,o.isJSDate=l.isJSDate,o.formatDate=l.formatDate,o.incrementMonth=l.incrementMonth,o.dateTick0=l.dateTick0,o.dfltRange=l.dfltRange,o.findExactDates=l.findExactDates,o.MIN_MS=l.MIN_MS,o.MAX_MS=l.MAX_MS;var d=e(14952);o.findBin=d.findBin,o.sorterAsc=d.sorterAsc,o.sorterDes=d.sorterDes,o.distinctVals=d.distinctVals,o.roundUp=d.roundUp,o.sort=d.sort,o.findIndexOfMin=d.findIndexOfMin,o.sortObjectKeys=e(95376);var c=e(63084);o.aggNums=c.aggNums,o.len=c.len,o.mean=c.mean,o.median=c.median,o.midRange=c.midRange,o.variance=c.variance,o.stdev=c.stdev,o.interp=c.interp;var _=e(52248);o.init2dArray=_.init2dArray,o.transposeRagged=_.transposeRagged,o.dot=_.dot,o.translationMatrix=_.translationMatrix,o.rotationMatrix=_.rotationMatrix,o.rotationXYMatrix=_.rotationXYMatrix,o.apply3DTransform=_.apply3DTransform,o.apply2DTransform=_.apply2DTransform,o.apply2DTransform2=_.apply2DTransform2,o.convertCssMatrix=_.convertCssMatrix,o.inverseTransformMatrix=_.inverseTransformMatrix;var p=e(11864);o.deg2rad=p.deg2rad,o.rad2deg=p.rad2deg,o.angleDelta=p.angleDelta,o.angleDist=p.angleDist,o.isFullCircle=p.isFullCircle,o.isAngleInsideSector=p.isAngleInsideSector,o.isPtInsideSector=p.isPtInsideSector,o.pathArc=p.pathArc,o.pathSector=p.pathSector,o.pathAnnulus=p.pathAnnulus;var g=e(98308);o.isLeftAnchor=g.isLeftAnchor,o.isCenterAnchor=g.isCenterAnchor,o.isRightAnchor=g.isRightAnchor,o.isTopAnchor=g.isTopAnchor,o.isMiddleAnchor=g.isMiddleAnchor,o.isBottomAnchor=g.isBottomAnchor;var m=e(92348);o.segmentsIntersect=m.segmentsIntersect,o.segmentDistance=m.segmentDistance,o.getTextLocation=m.getTextLocation,o.clearLocationCache=m.clearLocationCache,o.getVisibleSegment=m.getVisibleSegment,o.findPointOnPath=m.findPointOnPath;var b=e(92880);o.extendFlat=b.extendFlat,o.extendDeep=b.extendDeep,o.extendDeepAll=b.extendDeepAll,o.extendDeepNoArrays=b.extendDeepNoArrays;var y=e(24248);o.log=y.log,o.warn=y.warn,o.error=y.error;var M=e(53756);o.counterRegex=M.counter;var h=e(91200);o.throttle=h.throttle,o.throttleDone=h.done,o.clearThrottle=h.clear;var E=e(52200);function k(ne){var K={};for(var oe in ne)for(var le=ne[oe],se=0;se<le.length;se++)K[le[se]]=+oe;return K}o.getGraphDiv=E.getGraphDiv,o.isPlotDiv=E.isPlotDiv,o.removeElement=E.removeElement,o.addStyleRule=E.addStyleRule,o.addRelatedStyleRule=E.addRelatedStyleRule,o.deleteRelatedStyleRule=E.deleteRelatedStyleRule,o.getFullTransformMatrix=E.getFullTransformMatrix,o.getElementTransformMatrix=E.getElementTransformMatrix,o.getElementAndAncestors=E.getElementAndAncestors,o.equalDomRects=E.equalDomRects,o.clearResponsive=e(75352),o.preserveDrawingBuffer=e(34296),o.makeTraceGroups=e(30988),o._=e(98356),o.notifier=e(41792),o.filterUnique=e(68944),o.filterVisible=e(43880),o.pushUnique=e(52416),o.increment=e(1396),o.cleanNumber=e(54037),o.ensureNumber=function(ne){return T(ne)?(ne=Number(ne))>f||ne<s?t:ne:t},o.isIndex=function(ne,K){return!(K!==void 0&&ne>=K)&&T(ne)&&ne>=0&&ne%1==0},o.noop=e(16628),o.identity=e(35536),o.repeat=function(ne,K){for(var oe=new Array(K),le=0;le<K;le++)oe[le]=ne;return oe},o.swapAttrs=function(ne,K,oe,le){oe||(oe="x"),le||(le="y");for(var se=0;se<K.length;se++){var de=K[se],be=o.nestedProperty(ne,de.replace("?",oe)),_e=o.nestedProperty(ne,de.replace("?",le)),xe=be.get();be.set(_e.get()),_e.set(xe)}},o.raiseToTop=function(ne){ne.parentNode.appendChild(ne)},o.cancelTransition=function(ne){return ne.transition().duration(0)},o.constrain=function(ne,K,oe){return K>oe?Math.max(oe,Math.min(K,ne)):Math.max(K,Math.min(oe,ne))},o.bBoxIntersect=function(ne,K,oe){return oe=oe||0,ne.left<=K.right+oe&&K.left<=ne.right+oe&&ne.top<=K.bottom+oe&&K.top<=ne.bottom+oe},o.simpleMap=function(ne,K,oe,le,se){for(var de=ne.length,be=new Array(de),_e=0;_e<de;_e++)be[_e]=K(ne[_e],oe,le,se);return be},o.randstr=function ne(K,oe,le,se){if(le||(le=16),oe===void 0&&(oe=24),oe<=0)return"0";var de,be,_e=Math.log(Math.pow(2,oe))/Math.log(le),xe="";for(de=2;_e===1/0;de*=2)_e=Math.log(Math.pow(2,oe/de))/Math.log(le)*de;var ve=_e-Math.floor(_e);for(de=0;de<Math.floor(_e);de++)xe=Math.floor(Math.random()*le).toString(le)+xe;ve&&(be=Math.pow(le,ve),xe=Math.floor(Math.random()*be).toString(le)+xe);var ye=parseInt(xe,le);return K&&K[xe]||ye!==1/0&&ye>=Math.pow(2,oe)?se>10?(o.warn("randstr failed uniqueness"),xe):ne(K,oe,le,(se||0)+1):xe},o.OptionControl=function(ne,K){ne||(ne={}),K||(K="opt");var oe={optionList:[],_newoption:function(le){le[K]=ne,oe[le.name]=le,oe.optionList.push(le)}};return oe["_"+K]=ne,oe},o.smooth=function(ne,K){if((K=Math.round(K)||0)<2)return ne;var oe,le,se,de,be=ne.length,_e=2*be,xe=2*K-1,ve=new Array(xe),ye=new Array(be);for(oe=0;oe<xe;oe++)ve[oe]=(1-Math.cos(Math.PI*(oe+1)/K))/(2*K);for(oe=0;oe<be;oe++){for(de=0,le=0;le<xe;le++)(se=oe+le+1-K)<-be?se-=_e*Math.round(se/_e):se>=_e&&(se-=_e*Math.floor(se/_e)),se<0?se=-1-se:se>=be&&(se=_e-1-se),de+=ne[se]*ve[le];ye[oe]=de}return ye},o.syncOrAsync=function(ne,K,oe){var le;function se(){return o.syncOrAsync(ne,K,oe)}for(;ne.length;)if((le=(0,ne.splice(0,1)[0])(K))&&le.then)return le.then(se);return oe&&oe(K)},o.stripTrailingSlash=function(ne){return ne.substr(-1)==="/"?ne.substr(0,ne.length-1):ne},o.noneOrAll=function(ne,K,oe){if(ne){var le,se=!1,de=!0;for(le=0;le<oe.length;le++)ne[oe[le]]!=null?se=!0:de=!1;if(se&&!de)for(le=0;le<oe.length;le++)ne[oe[le]]=K[oe[le]]}},o.mergeArray=function(ne,K,oe,le){var se=typeof le=="function";if(o.isArrayOrTypedArray(ne))for(var de=Math.min(ne.length,K.length),be=0;be<de;be++){var _e=ne[be];K[be][oe]=se?le(_e):_e}},o.mergeArrayCastPositive=function(ne,K,oe){return o.mergeArray(ne,K,oe,function(le){var se=+le;return isFinite(se)&&se>0?se:0})},o.fillArray=function(ne,K,oe,le){if(le=le||o.identity,o.isArrayOrTypedArray(ne))for(var se=0;se<K.length;se++)K[se][oe]=le(ne[se])},o.castOption=function(ne,K,oe,le){le=le||o.identity;var se=o.nestedProperty(ne,oe).get();return o.isArrayOrTypedArray(se)?Array.isArray(K)&&o.isArrayOrTypedArray(se[K[0]])?le(se[K[0]][K[1]]):le(se[K]):se},o.extractOption=function(ne,K,oe,le){if(oe in ne)return ne[oe];var se=o.nestedProperty(K,le).get();return Array.isArray(se)?void 0:se},o.tagSelected=function(ne,K,oe){var le,se,de=K.selectedpoints,be=K._indexToPoints;be&&(le=k(be));for(var _e=0;_e<de.length;_e++){var xe=de[_e];if(o.isIndex(xe)||o.isArrayOrTypedArray(xe)&&o.isIndex(xe[0])&&o.isIndex(xe[1])){var ve=le?le[xe]:xe,ye=oe?oe[ve]:ve;(se=ye)!==void 0&&se<ne.length&&(ne[ye].selected=1)}}},o.selIndices2selPoints=function(ne){var K=ne.selectedpoints,oe=ne._indexToPoints;if(oe){for(var le=k(oe),se=[],de=0;de<K.length;de++){var be=K[de];if(o.isIndex(be)){var _e=le[be];o.isIndex(_e)&&se.push(_e)}}return se}return K},o.getTargetArray=function(ne,K){var oe=K.target;if(typeof oe=="string"&&oe){var le=o.nestedProperty(ne,oe).get();return!!o.isArrayOrTypedArray(le)&&le}return!!o.isArrayOrTypedArray(oe)&&oe},o.minExtend=function ne(K,oe,le){var se={};typeof oe!="object"&&(oe={});var de,be,_e,xe=le==="pieLike"?-1:3,ve=Object.keys(K);for(de=0;de<ve.length;de++)_e=K[be=ve[de]],be.charAt(0)!=="_"&&typeof _e!="function"&&(be==="module"?se[be]=_e:Array.isArray(_e)?se[be]=be==="colorscale"||xe===-1?_e.slice():_e.slice(0,xe):o.isTypedArray(_e)?se[be]=xe===-1?_e.subarray():_e.subarray(0,xe):se[be]=_e&&typeof _e=="object"?ne(K[be],oe[be],le):_e);for(ve=Object.keys(oe),de=0;de<ve.length;de++)typeof(_e=oe[be=ve[de]])=="object"&&be in se&&typeof se[be]=="object"||(se[be]=_e);return se},o.titleCase=function(ne){return ne.charAt(0).toUpperCase()+ne.substr(1)},o.containsAny=function(ne,K){for(var oe=0;oe<K.length;oe++)if(ne.indexOf(K[oe])!==-1)return!0;return!1},o.isIE=function(){return window.navigator.msSaveBlob!==void 0};var D=/Version\/[\d\.]+.*Safari/;o.isSafari=function(){return D.test(window.navigator.userAgent)};var P=/iPad|iPhone|iPod/;o.isIOS=function(){return P.test(window.navigator.userAgent)};var L=/Firefox\/(\d+)\.\d+/;o.getFirefoxVersion=function(){var ne=L.exec(window.navigator.userAgent);if(ne&&ne.length===2){var K=parseInt(ne[1]);if(!isNaN(K))return K}return null},o.isD3Selection=function(ne){return ne instanceof v.selection},o.ensureSingle=function(ne,K,oe,le){var se=ne.select(K+(oe?"."+oe:""));if(se.size())return se;var de=ne.append(K);return oe&&de.classed(oe,!0),le&&de.call(le),de},o.ensureSingleById=function(ne,K,oe,le){var se=ne.select(K+"#"+oe);if(se.size())return se;var de=ne.append(K).attr("id",oe);return le&&de.call(le),de},o.objectFromPath=function(ne,K){for(var oe,le=ne.split("."),se=oe={},de=0;de<le.length;de++){var be=le[de],_e=null,xe=le[de].match(/(.*)\[([0-9]+)\]/);xe?(be=xe[1],_e=xe[2],oe=oe[be]=[],de===le.length-1?oe[_e]=K:oe[_e]={},oe=oe[_e]):(de===le.length-1?oe[be]=K:oe[be]={},oe=oe[be])}return se};var O=/^([^\[\.]+)\.(.+)?/,N=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function V(ne){return ne.slice(0,2)==="__"}o.expandObjectPaths=function(ne){var K,oe,le,se,de,be,_e;if(typeof ne=="object"&&!Array.isArray(ne)){for(oe in ne)if(ne.hasOwnProperty(oe))if(K=oe.match(O)){if(se=ne[oe],V(le=K[1]))continue;delete ne[oe],ne[le]=o.extendDeepNoArrays(ne[le]||{},o.objectFromPath(oe,o.expandObjectPaths(se))[le])}else if(K=oe.match(N)){if(se=ne[oe],V(le=K[1]))continue;if(de=parseInt(K[2]),delete ne[oe],ne[le]=ne[le]||[],K[3]===".")_e=K[4],be=ne[le][de]=ne[le][de]||{},o.extendDeepNoArrays(be,o.objectFromPath(_e,o.expandObjectPaths(se)));else{if(V(le))continue;ne[le][de]=o.expandObjectPaths(se)}}else{if(V(oe))continue;ne[oe]=o.expandObjectPaths(ne[oe])}}return ne},o.numSeparate=function(ne,K,oe){if(oe||(oe=!1),typeof K!="string"||K.length===0)throw new Error("Separator string required for formatting!");typeof ne=="number"&&(ne=String(ne));var le=/(\d+)(\d{3})/,se=K.charAt(0),de=K.charAt(1),be=ne.split("."),_e=be[0],xe=be.length>1?se+be[1]:"";if(de&&(be.length>1||_e.length>4||oe))for(;le.test(_e);)_e=_e.replace(le,"$1"+de+"$2");return _e+xe},o.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var F=/^\w*$/;o.templateString=function(ne,K){var oe={};return ne.replace(o.TEMPLATE_STRING_REGEX,function(le,se){var de;return F.test(se)?de=K[se]:(oe[se]=oe[se]||o.nestedProperty(K,se).get,de=oe[se]()),o.isValidTextValue(de)?de:""})};var j={max:10,count:0,name:"hovertemplate"};o.hovertemplateString=function(){return re.apply(j,arguments)};var Z={max:10,count:0,name:"texttemplate"};o.texttemplateString=function(){return re.apply(Z,arguments)};var z=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/,H={max:10,count:0,name:"texttemplate",parseMultDiv:!0};o.texttemplateStringForShapes=function(){return re.apply(H,arguments)};var U=/^[:|\|]/;function re(ne,K,oe){var le=this,se=arguments;K||(K={});var de={};return ne.replace(o.TEMPLATE_STRING_REGEX,function(be,_e,xe){var ve=_e==="_xother"||_e==="_yother",ye=_e==="_xother_"||_e==="_yother_",me=_e==="xother_"||_e==="yother_",Me=_e==="xother"||_e==="yother"||ve||me||ye,Ae=_e;(ve||ye)&&(Ae=Ae.substring(1)),(me||ye)&&(Ae=Ae.substring(0,Ae.length-1));var ce,ae,pe,De=null,ke=null;if(le.parseMultDiv){var Ee=function(ge){var we=ge.match(z);return we?{key:we[1],op:we[2],number:Number(we[3])}:{key:ge,op:null,number:null}}(Ae);Ae=Ee.key,De=Ee.op,ke=Ee.number}if(Me){if((ce=K[Ae])===void 0)return""}else for(pe=3;pe<se.length;pe++)if(ae=se[pe]){if(ae.hasOwnProperty(Ae)){ce=ae[Ae];break}if(F.test(Ae)||(ce=o.nestedProperty(ae,Ae).get(),(ce=de[Ae]||o.nestedProperty(ae,Ae).get())&&(de[Ae]=ce)),ce!==void 0)break}if(ce!==void 0&&(De==="*"&&(ce*=ke),De==="/"&&(ce/=ke)),ce===void 0&&le)return le.count<le.max&&(o.warn("Variable '"+Ae+"' in "+le.name+" could not be found!"),ce=be),le.count===le.max&&o.warn("Too many "+le.name+" warnings - additional warnings will be suppressed"),le.count++,be;if(xe){var Ie;if(xe[0]===":"&&(Ie=oe?oe.numberFormat:o.numberFormat,ce!==""&&(ce=Ie(xe.replace(U,""))(ce))),xe[0]==="|"){Ie=oe?oe.timeFormat:w;var Re=o.dateTime2ms(ce);ce=o.formatDate(Re,xe.replace(U,""),!1,Ie)}}else{var Ne=Ae+"Label";K.hasOwnProperty(Ne)&&(ce=K[Ne])}return Me&&(ce="("+ce+")",(ve||ye)&&(ce=" "+ce),(me||ye)&&(ce+=" ")),ce})}o.subplotSort=function(ne,K){for(var oe=Math.min(ne.length,K.length)+1,le=0,se=0,de=0;de<oe;de++){var be=ne.charCodeAt(de)||0,_e=K.charCodeAt(de)||0,xe=be>=48&&be<=57,ve=_e>=48&&_e<=57;if(xe&&(le=10*le+be-48),ve&&(se=10*se+_e-48),!xe||!ve){if(le!==se)return le-se;if(be!==_e)return be-_e}}return se-le};var ee=2e9;o.seedPseudoRandom=function(){ee=2e9},o.pseudoRandom=function(){var ne=ee;return ee=(69069*ee+1)%4294967296,Math.abs(ee-ne)<429496729?o.pseudoRandom():ee/4294967296},o.fillText=function(ne,K,oe){var le=Array.isArray(oe)?function(be){oe.push(be)}:function(be){oe.text=be},se=o.extractOption(ne,K,"htx","hovertext");if(o.isValidTextValue(se))return le(se);var de=o.extractOption(ne,K,"tx","text");return o.isValidTextValue(de)?le(de):void 0},o.isValidTextValue=function(ne){return ne||ne===0},o.formatPercent=function(ne,K){K=K||0;for(var oe=(Math.round(100*ne*Math.pow(10,K))*Math.pow(.1,K)).toFixed(K)+"%",le=0;le<K;le++)oe.indexOf(".")!==-1&&(oe=(oe=oe.replace("0%","%")).replace(".%","%"));return oe},o.isHidden=function(ne){var K=window.getComputedStyle(ne).display;return!K||K==="none"},o.strTranslate=function(ne,K){return ne||K?"translate("+ne+","+K+")":""},o.strRotate=function(ne){return ne?"rotate("+ne+")":""},o.strScale=function(ne){return ne!==1?"scale("+ne+")":""},o.getTextTransform=function(ne){var K=ne.noCenter,oe=ne.textX,le=ne.textY,se=ne.targetX,de=ne.targetY,be=ne.anchorX||0,_e=ne.anchorY||0,xe=ne.rotate,ve=ne.scale;return ve?ve>1&&(ve=1):ve=0,o.strTranslate(se-ve*(oe+be),de-ve*(le+_e))+o.strScale(ve)+(xe?"rotate("+xe+(K?"":" "+oe+" "+le)+")":"")},o.setTransormAndDisplay=function(ne,K){ne.attr("transform",o.getTextTransform(K)),ne.style("display",K.scale?null:"none")},o.ensureUniformFontSize=function(ne,K){var oe=o.extendFlat({},K);return oe.size=Math.max(K.size,ne._fullLayout.uniformtext.minsize||0),oe},o.join2=function(ne,K,oe){var le=ne.length;return le>1?ne.slice(0,-1).join(K)+oe+ne[le-1]:ne.join(K)},o.bigFont=function(ne){return Math.round(1.2*ne)};var J=o.getFirefoxVersion(),Q=J!==null&&J<86;o.getPositionFromD3Event=function(){return Q?[v.event.layerX,v.event.layerY]:[v.event.offsetX,v.event.offsetY]}},63620:function(C){"use strict";C.exports=function(A){return window&&window.process&&window.process.versions?Object.prototype.toString.call(A)==="[object Object]":Object.prototype.toString.call(A)==="[object Object]"&&Object.getPrototypeOf(A).hasOwnProperty("hasOwnProperty")}},37804:function(C,A,e){"use strict";var v=e(22296),w=/^\w*$/;C.exports=function(n,T,x,f){var s,t,o;x=x||"name",f=f||"value";var r={};T&&T.length?(o=v(n,T),t=o.get()):t=n,T=T||"";var i={};if(t)for(s=0;s<t.length;s++)i[t[s][x]]=s;var a=w.test(f),u={set:function(l,d){var c=d===null?4:0;if(!t){if(!o||c===4)return;t=[],o.set(t)}var _=i[l];if(_===void 0){if(c===4)return;c|=3,_=t.length,i[l]=_}else d!==(a?t[_][f]:v(t[_],f).get())&&(c|=2);var p=t[_]=t[_]||{};return p[x]=l,a?p[f]=d:v(p,f).set(d),d!==null&&(c&=-5),r[_]=r[_]|c,u},get:function(l){if(t){var d=i[l];return d===void 0?void 0:a?t[d][f]:v(t[d],f).get()}},rename:function(l,d){var c=i[l];return c===void 0||(r[c]=1|r[c],i[d]=c,delete i[l],t[c][x]=d),u},remove:function(l){var d=i[l];if(d===void 0)return u;var c=t[d];if(Object.keys(c).length>2)return r[d]=2|r[d],u.set(l,null);if(a){for(s=d;s<t.length;s++)r[s]=3|r[s];for(s=d;s<t.length;s++)i[t[s][x]]--;t.splice(d,1),delete i[l]}else v(c,f).set(null),r[d]=6|r[d];return u},constructUpdate:function(){for(var l,d,c={},_=Object.keys(r),p=0;p<_.length;p++)d=_[p],l=T+"["+d+"]",t[d]?(1&r[d]&&(c[l+"."+x]=t[d][x]),2&r[d]&&(c[l+"."+f]=a?4&r[d]?null:t[d][f]:4&r[d]?null:v(t[d],f).get())):c[l]=null;return c}};return u}},98356:function(C,A,e){"use strict";var v=e(24040);C.exports=function(w,n){for(var T=w._context.locale,x=0;x<2;x++){for(var f=w._context.locales,s=0;s<2;s++){var t=(f[T]||{}).dictionary;if(t){var o=t[n];if(o)return o}f=v.localeRegistry}var r=T.split("-")[0];if(r===T)break;T=r}return n}},24248:function(C,A,e){"use strict";var v=e(20556).dfltConfig,w=e(41792),n=C.exports={};n.log=function(){var T;if(v.logging>1){var x=["LOG:"];for(T=0;T<arguments.length;T++)x.push(arguments[T]);console.trace.apply(console,x)}if(v.notifyOnLogging>1){var f=[];for(T=0;T<arguments.length;T++)f.push(arguments[T]);w(f.join("<br>"),"long")}},n.warn=function(){var T;if(v.logging>0){var x=["WARN:"];for(T=0;T<arguments.length;T++)x.push(arguments[T]);console.trace.apply(console,x)}if(v.notifyOnLogging>0){var f=[];for(T=0;T<arguments.length;T++)f.push(arguments[T]);w(f.join("<br>"),"stick")}},n.error=function(){var T;if(v.logging>0){var x=["ERROR:"];for(T=0;T<arguments.length;T++)x.push(arguments[T]);console.error.apply(console,x)}if(v.notifyOnLogging>0){var f=[];for(T=0;T<arguments.length;T++)f.push(arguments[T]);w(f.join("<br>"),"stick")}}},30988:function(C,A,e){"use strict";var v=e(33428);C.exports=function(w,n,T){var x=w.selectAll("g."+T.replace(/\s/g,".")).data(n,function(s){return s[0].trace.uid});x.exit().remove(),x.enter().append("g").attr("class",T),x.order();var f=w.classed("rangeplot")?"nodeRangePlot3":"node3";return x.each(function(s){s[0][f]=v.select(this)}),x}},52248:function(C,A,e){"use strict";var v=e(36524);A.init2dArray=function(w,n){for(var T=new Array(w),x=0;x<w;x++)T[x]=new Array(n);return T},A.transposeRagged=function(w){var n,T,x=0,f=w.length;for(n=0;n<f;n++)x=Math.max(x,w[n].length);var s=new Array(x);for(n=0;n<x;n++)for(s[n]=new Array(f),T=0;T<f;T++)s[n][T]=w[T][n];return s},A.dot=function(w,n){if(!w.length||!n.length||w.length!==n.length)return null;var T,x,f=w.length;if(w[0].length)for(T=new Array(f),x=0;x<f;x++)T[x]=A.dot(w[x],n);else if(n[0].length){var s=A.transposeRagged(n);for(T=new Array(s.length),x=0;x<s.length;x++)T[x]=A.dot(w,s[x])}else for(T=0,x=0;x<f;x++)T+=w[x]*n[x];return T},A.translationMatrix=function(w,n){return[[1,0,w],[0,1,n],[0,0,1]]},A.rotationMatrix=function(w){var n=w*Math.PI/180;return[[Math.cos(n),-Math.sin(n),0],[Math.sin(n),Math.cos(n),0],[0,0,1]]},A.rotationXYMatrix=function(w,n,T){return A.dot(A.dot(A.translationMatrix(n,T),A.rotationMatrix(w)),A.translationMatrix(-n,-T))},A.apply3DTransform=function(w){return function(){var n=arguments,T=arguments.length===1?n[0]:[n[0],n[1],n[2]||0];return A.dot(w,[T[0],T[1],T[2],1]).slice(0,3)}},A.apply2DTransform=function(w){return function(){var n=arguments;n.length===3&&(n=n[0]);var T=arguments.length===1?n[0]:[n[0],n[1]];return A.dot(w,[T[0],T[1],1]).slice(0,2)}},A.apply2DTransform2=function(w){var n=A.apply2DTransform(w);return function(T){return n(T.slice(0,2)).concat(n(T.slice(2,4)))}},A.convertCssMatrix=function(w){if(w){var n=w.length;if(n===16)return w;if(n===6)return[w[0],w[1],0,0,w[2],w[3],0,0,0,0,1,0,w[4],w[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},A.inverseTransformMatrix=function(w){var n=[];return v.invert(n,w),[[n[0],n[1],n[2],n[3]],[n[4],n[5],n[6],n[7]],[n[8],n[9],n[10],n[11]],[n[12],n[13],n[14],n[15]]]}},20435:function(C){"use strict";C.exports={mod:function(A,e){var v=A%e;return v<0?v+e:v},modHalf:function(A,e){return Math.abs(A)>e/2?A-Math.round(A/e)*e:A}}},22296:function(C,A,e){"use strict";var v=e(38248),w=e(38116).isArrayOrTypedArray;function n(r,i){return function(){var a,u,l,d,c,_=r;for(d=0;d<i.length-1;d++){if((a=i[d])===-1){for(u=!0,l=[],c=0;c<_.length;c++)l[c]=n(_[c],i.slice(d+1))(),l[c]!==l[0]&&(u=!1);return u?l[0]:l}if(typeof a=="number"&&!w(_)||typeof(_=_[a])!="object"||_===null)return}if(typeof _=="object"&&_!==null&&(l=_[i[d]])!==null)return l}}C.exports=function(r,i){if(v(i))i=String(i);else if(typeof i!="string"||i.substr(i.length-4)==="[-1]")throw"bad property string";var a,u,l,d,c=i.split(".");for(d=0;d<c.length;d++)if(String(c[d]).slice(0,2)==="__")throw"bad property string";for(d=0;d<c.length;){if(a=String(c[d]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(a[1])c[d]=a[1];else{if(d!==0)throw"bad property string";c.splice(0,1)}for(u=a[2].substr(1,a[2].length-2).split("]["),l=0;l<u.length;l++)d++,c.splice(d,0,Number(u[l]))}d++}return typeof r!="object"?function(_,p,g){return{set:function(){throw"bad container"},get:function(){},astr:p,parts:g,obj:_}}(r,i,c):{set:f(r,c,i),get:n(r,c),astr:i,parts:c,obj:r}};var T=/(^|\.)args\[/;function x(r,i){return r===void 0||r===null&&!i.match(T)}function f(r,i,a){return function(u){var l,d,c=r,_="",p=[[r,_]],g=x(u,a);for(d=0;d<i.length-1;d++){if(typeof(l=i[d])=="number"&&!w(c))throw"array index but container is not an array";if(l===-1){if(g=!t(c,i.slice(d+1),u,a))break;return}if(!o(c,l,i[d+1],g))break;if(typeof(c=c[l])!="object"||c===null)throw"container is not an object";_=s(_,l),p.push([c,_])}if(g){if(d===i.length-1&&(delete c[i[d]],Array.isArray(c)&&+i[d]==c.length-1))for(;c.length&&c[c.length-1]===void 0;)c.pop()}else c[i[d]]=u}}function s(r,i){var a=i;return v(i)?a="["+i+"]":r&&(a="."+i),r+a}function t(r,i,a,u){var l,d=w(a),c=!0,_=a,p=u.replace("-1",0),g=!d&&x(a,p),m=i[0];for(l=0;l<r.length;l++)p=u.replace("-1",l),d&&(g=x(_=a[l%a.length],p)),g&&(c=!1),o(r,l,m,g)&&f(r[l],i,u.replace("-1",l))(_);return c}function o(r,i,a,u){if(r[i]===void 0){if(u)return!1;r[i]=typeof a=="number"?[]:{}}return!0}},16628:function(C){"use strict";C.exports=function(){}},41792:function(C,A,e){"use strict";var v=e(33428),w=e(38248),n=[];C.exports=function(T,x){if(n.indexOf(T)===-1){n.push(T);var f=1e3;w(x)?f=x:x==="long"&&(f=3e3);var s=v.select("body").selectAll(".plotly-notifier").data([0]);s.enter().append("div").classed("plotly-notifier",!0),s.selectAll(".notifier-note").data(n).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(o){var r=v.select(this);r.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){r.transition().call(t)});for(var i=r.append("p"),a=o.split(/<br\s*\/?>/g),u=0;u<a.length;u++)u&&i.append("br"),i.append("span").text(a[u]);x==="stick"?r.transition().duration(350).style("opacity",1):r.transition().duration(700).style("opacity",1).transition().delay(f).call(t)})}function t(o){o.duration(700).style("opacity",0).each("end",function(r){var i=n.indexOf(r);i!==-1&&n.splice(i,1),v.select(this).remove()})}}},72213:function(C,A,e){"use strict";var v=e(93972),w="data-savedcursor";C.exports=function(n,T){var x=n.attr(w);if(T){if(!x){for(var f=(n.attr("class")||"").split(" "),s=0;s<f.length;s++){var t=f[s];t.indexOf("cursor-")===0&&n.attr(w,t.substr(7)).classed(t,!1)}n.attr(w)||n.attr(w,"!!")}v(n,T)}else x&&(n.attr(w,null),x==="!!"?v(n):v(n,x))}},92065:function(C,A,e){"use strict";var v=e(52248).dot,w=e(39032).BADNUM,n=C.exports={};n.tester=function(T){var x,f=T.slice(),s=f[0][0],t=s,o=f[0][1],r=o;for(f[f.length-1][0]===f[0][0]&&f[f.length-1][1]===f[0][1]||f.push(f[0]),x=1;x<f.length;x++)s=Math.min(s,f[x][0]),t=Math.max(t,f[x][0]),o=Math.min(o,f[x][1]),r=Math.max(r,f[x][1]);var i,a=!1;f.length===5&&(f[0][0]===f[1][0]?f[2][0]===f[3][0]&&f[0][1]===f[3][1]&&f[1][1]===f[2][1]&&(a=!0,i=function(d){return d[0]===f[0][0]}):f[0][1]===f[1][1]&&f[2][1]===f[3][1]&&f[0][0]===f[3][0]&&f[1][0]===f[2][0]&&(a=!0,i=function(d){return d[1]===f[0][1]}));var u=!0,l=f[0];for(x=1;x<f.length;x++)if(l[0]!==f[x][0]||l[1]!==f[x][1]){u=!1;break}return{xmin:s,xmax:t,ymin:o,ymax:r,pts:f,contains:a?function(d,c){var _=d[0],p=d[1];return!(_===w||_<s||_>t||p===w||p<o||p>r||c&&i(d))}:function(d,c){var _=d[0],p=d[1];if(_===w||_<s||_>t||p===w||p<o||p>r)return!1;var g,m,b,y,M,h=f.length,E=f[0][0],k=f[0][1],D=0;for(g=1;g<h;g++)if(m=E,b=k,E=f[g][0],k=f[g][1],!(_<(y=Math.min(m,E))||_>Math.max(m,E)||p>Math.max(b,k)))if(p<Math.min(b,k))_!==y&&D++;else{if(p===(M=E===m?p:b+(_-m)*(k-b)/(E-m)))return g!==1||!c;p<=M&&_!==y&&D++}return D%2==1},isRect:a,degenerate:u}},n.isSegmentBent=function(T,x,f,s){var t,o,r,i=T[x],a=[T[f][0]-i[0],T[f][1]-i[1]],u=v(a,a),l=Math.sqrt(u),d=[-a[1]/l,a[0]/l];for(t=x+1;t<f;t++)if(o=[T[t][0]-i[0],T[t][1]-i[1]],(r=v(o,a))<0||r>u||Math.abs(v(o,d))>s)return!0;return!1},n.filter=function(T,x){var f=[T[0]],s=0,t=0;function o(r){T.push(r);var i=f.length,a=s;f.splice(t+1);for(var u=a+1;u<T.length;u++)(u===T.length-1||n.isSegmentBent(T,a,u+1,x))&&(f.push(T[u]),f.length<i-2&&(s=u,t=f.length-1),a=u)}return T.length>1&&o(T.pop()),{addPt:o,raw:T,filtered:f}}},5048:function(C,A,e){"use strict";var v=e(16576),w=e(28624);C.exports=function(n,T,x){var f=n._fullLayout,s=!0;return f._glcanvas.each(function(t){if(t.regl)t.regl.preloadCachedCode(x);else if(!t.pick||f._has("parcoords")){try{t.regl=w({canvas:this,attributes:{antialias:!t.pick,preserveDrawingBuffer:!0},pixelRatio:n._context.plotGlPixelRatio||e.g.devicePixelRatio,extensions:T||[],cachedCode:x||{}})}catch{s=!1}t.regl||(s=!1),s&&this.addEventListener("webglcontextlost",function(o){n&&n.emit&&n.emit("plotly_webglcontextlost",{event:o,layer:t.key})},!1)}}),s||v({container:f._glcontainer.node()}),s}},34296:function(C,A,e){"use strict";var v=e(38248),w=e(25928);C.exports=function(n){var T;if(typeof(T=n&&n.hasOwnProperty("userAgent")?n.userAgent:function(){var i;return typeof navigator<"u"&&(i=navigator.userAgent),i&&i.headers&&typeof i.headers["user-agent"]=="string"&&(i=i.headers["user-agent"]),i}())!="string")return!0;var x=w({ua:{headers:{"user-agent":T}},tablet:!0,featureDetect:!1});if(!x){for(var f=T.split(" "),s=1;s<f.length;s++)if(f[s].indexOf("Safari")!==-1)for(var t=s-1;t>-1;t--){var o=f[t];if(o.substr(0,8)==="Version/"){var r=o.substr(8).split(".")[0];if(v(r)&&(r=+r),r>=13)return!0}}}return x}},52416:function(C){"use strict";C.exports=function(A,e){if(e instanceof RegExp){for(var v=e.toString(),w=0;w<A.length;w++)if(A[w]instanceof RegExp&&A[w].toString()===v)return A;A.push(e)}else!e&&e!==0||A.indexOf(e)!==-1||A.push(e);return A}},94552:function(C,A,e){"use strict";var v=e(3400),w=e(20556).dfltConfig,n={add:function(T,x,f,s,t){var o,r;T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},r=T.undoQueue.index,T.autoplay?T.undoQueue.inSequence||(T.autoplay=!1):(!T.undoQueue.sequence||T.undoQueue.beginSequence?(o={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},T.undoQueue.queue.splice(r,T.undoQueue.queue.length-r,o),T.undoQueue.index+=1):o=T.undoQueue.queue[r-1],T.undoQueue.beginSequence=!1,o&&(o.undo.calls.unshift(x),o.undo.args.unshift(f),o.redo.calls.push(s),o.redo.args.push(t)),T.undoQueue.queue.length>w.queueLength&&(T.undoQueue.queue.shift(),T.undoQueue.index--))},startSequence:function(T){T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},T.undoQueue.sequence=!0,T.undoQueue.beginSequence=!0},stopSequence:function(T){T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},T.undoQueue.sequence=!1,T.undoQueue.beginSequence=!1},undo:function(T){var x,f;if(!(T.undoQueue===void 0||isNaN(T.undoQueue.index)||T.undoQueue.index<=0)){for(T.undoQueue.index--,x=T.undoQueue.queue[T.undoQueue.index],T.undoQueue.inSequence=!0,f=0;f<x.undo.calls.length;f++)n.plotDo(T,x.undo.calls[f],x.undo.args[f]);T.undoQueue.inSequence=!1,T.autoplay=!1}},redo:function(T){var x,f;if(!(T.undoQueue===void 0||isNaN(T.undoQueue.index)||T.undoQueue.index>=T.undoQueue.queue.length)){for(x=T.undoQueue.queue[T.undoQueue.index],T.undoQueue.inSequence=!0,f=0;f<x.redo.calls.length;f++)n.plotDo(T,x.redo.calls[f],x.redo.args[f]);T.undoQueue.inSequence=!1,T.autoplay=!1,T.undoQueue.index++}},plotDo:function(T,x,f){T.autoplay=!0,f=function(s,t){for(var o,r=[],i=0;i<t.length;i++)o=t[i],r[i]=o===s?o:typeof o=="object"?Array.isArray(o)?v.extendDeep([],o):v.extendDeepAll({},o):o;return r}(T,f),x.apply(null,f)}};C.exports=n},53756:function(C,A){"use strict";A.counter=function(e,v,w,n){var T=(v||"")+(w?"":"$"),x=n===!1?"":"^";return e==="xy"?new RegExp(x+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+T):new RegExp(x+e+"([2-9]|[1-9][0-9]+)?"+T)}},23193:function(C){"use strict";var A=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,e=/^[^\.\[\]]+$/;C.exports=function(v,w){for(;w;){var n=v.match(A);if(n)v=n[1];else{if(!v.match(e))throw new Error("bad relativeAttr call:"+[v,w]);v=""}if(w.charAt(0)!=="^")break;w=w.slice(1)}return v&&w.charAt(0)!=="["?v+"."+w:v+w}},51528:function(C,A,e){"use strict";var v=e(38116).isArrayOrTypedArray,w=e(63620);C.exports=function n(T,x){for(var f in x){var s=x[f],t=T[f];if(t!==s)if(f.charAt(0)==="_"||typeof s=="function"){if(f in T)continue;T[f]=s}else if(v(s)&&v(t)&&w(s[0])){if(f==="customdata"||f==="ids")continue;for(var o=Math.min(s.length,t.length),r=0;r<o;r++)t[r]!==s[r]&&w(s[r])&&w(t[r])&&n(t[r],s[r])}else w(s)&&w(t)&&(n(t,s),Object.keys(t).length||delete T[f])}}},14952:function(C,A,e){"use strict";var v=e(38248),w=e(24248),n=e(35536),T=e(39032).BADNUM,x=1e-9;function f(r,i){return r<i}function s(r,i){return r<=i}function t(r,i){return r>i}function o(r,i){return r>=i}A.findBin=function(r,i,a){if(v(i.start))return a?Math.ceil((r-i.start)/i.size-x)-1:Math.floor((r-i.start)/i.size+x);var u,l,d=0,c=i.length,_=0,p=c>1?(i[c-1]-i[0])/(c-1):1;for(l=p>=0?a?f:s:a?o:t,r+=p*x*(a?-1:1)*(p>=0?1:-1);d<c&&_++<100;)l(i[u=Math.floor((d+c)/2)],r)?d=u+1:c=u;return _>90&&w.log("Long binary search..."),d-1},A.sorterAsc=function(r,i){return r-i},A.sorterDes=function(r,i){return i-r},A.distinctVals=function(r){var i,a=r.slice();for(a.sort(A.sorterAsc),i=a.length-1;i>-1&&a[i]===T;i--);for(var u,l=a[i]-a[0]||1,d=l/(i||1)/1e4,c=[],_=0;_<=i;_++){var p=a[_],g=p-u;u===void 0?(c.push(p),u=p):g>d&&(l=Math.min(l,g),c.push(p),u=p)}return{vals:c,minDiff:l}},A.roundUp=function(r,i,a){for(var u,l=0,d=i.length-1,c=0,_=a?0:1,p=a?1:0,g=a?Math.ceil:Math.floor;l<d&&c++<100;)i[u=g((l+d)/2)]<=r?l=u+_:d=u-p;return i[l]},A.sort=function(r,i){for(var a=0,u=0,l=1;l<r.length;l++){var d=i(r[l],r[l-1]);if(d<0?a=1:d>0&&(u=1),a&&u)return r.sort(i)}return u?r:r.reverse()},A.findIndexOfMin=function(r,i){i=i||n;for(var a,u=1/0,l=0;l<r.length;l++){var d=i(r[l]);d<u&&(u=d,a=l)}return a}},93972:function(C){"use strict";C.exports=function(A,e){(A.attr("class")||"").split(" ").forEach(function(v){v.indexOf("cursor-")===0&&A.classed(v,!1)}),e&&A.classed("cursor-"+e,!0)}},16576:function(C,A,e){"use strict";var v=e(76308),w=function(){};C.exports=function(n){for(var T in n)typeof n[T]=="function"&&(n[T]=w);n.destroy=function(){n.container.parentNode.removeChild(n.container)};var x=document.createElement("div");x.className="no-webgl",x.style.cursor="pointer",x.style.fontSize="24px",x.style.color=v.defaults[0],x.style.position="absolute",x.style.left=x.style.top="0px",x.style.width=x.style.height="100%",x.style["background-color"]=v.lightLine,x.style["z-index"]=30;var f=document.createElement("p");return f.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",f.style.position="relative",f.style.top="50%",f.style.left="50%",f.style.height="30%",f.style.width="50%",f.style.margin="-15% 0 0 -25%",x.appendChild(f),n.container.appendChild(x),n.container.style.background="#FFFFFF",n.container.onclick=function(){window.open("https://get.webgl.org")},!1}},95376:function(C){"use strict";C.exports=function(A){return Object.keys(A).sort()}},63084:function(C,A,e){"use strict";var v=e(38248),w=e(38116).isArrayOrTypedArray;A.aggNums=function(n,T,x,f){var s,t;if((!f||f>x.length)&&(f=x.length),v(T)||(T=!1),w(x[0])){for(t=new Array(f),s=0;s<f;s++)t[s]=A.aggNums(n,T,x[s]);x=t}for(s=0;s<f;s++)v(T)?v(x[s])&&(T=n(+T,+x[s])):T=x[s];return T},A.len=function(n){return A.aggNums(function(T){return T+1},0,n)},A.mean=function(n,T){return T||(T=A.len(n)),A.aggNums(function(x,f){return x+f},0,n)/T},A.midRange=function(n){if(n!==void 0&&n.length!==0)return(A.aggNums(Math.max,null,n)+A.aggNums(Math.min,null,n))/2},A.variance=function(n,T,x){return T||(T=A.len(n)),v(x)||(x=A.mean(n,T)),A.aggNums(function(f,s){return f+Math.pow(s-x,2)},0,n)/T},A.stdev=function(n,T,x){return Math.sqrt(A.variance(n,T,x))},A.median=function(n){var T=n.slice().sort();return A.interp(T,.5)},A.interp=function(n,T){if(!v(T))throw"n should be a finite number";if((T=T*n.length-.5)<0)return n[0];if(T>n.length-1)return n[n.length-1];var x=T%1;return x*n[Math.ceil(T)]+(1-x)*n[Math.floor(T)]}},43080:function(C,A,e){"use strict";var v=e(72160);C.exports=function(w){return w?v(w):[0,0,0,1]}},9188:function(C,A,e){"use strict";var v=e(2264),w=e(43616),n=e(3400),T=null;C.exports=function(){if(T!==null)return T;T=!1;var x=n.isIE()||n.isSafari()||n.isIOS();if(window.navigator.userAgent&&!x){var f=Array.from(v.CSS_DECLARATIONS).reverse(),s=window.CSS&&window.CSS.supports||window.supportsCSS;if(typeof s=="function")T=f.some(function(r){return s.apply(null,r)});else{var t=w.tester.append("image").attr("style",v.STYLE),o=window.getComputedStyle(t.node()).imageRendering;T=f.some(function(r){var i=r[1];return o===i||o===i.toLowerCase()}),t.remove()}}return T}},72736:function(C,A,e){"use strict";var v=e(33428),w=e(3400),n=w.strTranslate,T=e(9616),x=e(84284).LINE_SPACING,f=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;A.convertToTspans=function(N,V,F){var j=N.text(),Z=!N.attr("data-notex")&&V&&V._context.typesetMath&&typeof MathJax<"u"&&j.match(f),z=v.select(N.node().parentNode);if(!z.empty()){var H=N.attr("class")?N.attr("class").split(" ")[0]:"text";return H+="-math",z.selectAll("svg."+H).remove(),z.selectAll("g."+H+"-group").remove(),N.style("display",null).attr({"data-unformatted":j,"data-math":"N"}),Z?(V&&V._promises||[]).push(new Promise(function(re){N.style("display","none");var ee=parseInt(N.node().style.fontSize,10),J={fontSize:ee};(function(Q,ne,K){var oe,le,se,de,be=parseInt((MathJax.version||"").split(".")[0]);if(be===2||be===3){var _e=function(){var ve="math-output-"+w.randstr({},64),ye=(de=v.select("body").append("div").attr({id:ve}).style({visibility:"hidden",position:"absolute","font-size":ne.fontSize+"px"}).text(Q.replace(s,"\\lt ").replace(t,"\\gt "))).node();return be===2?MathJax.Hub.Typeset(ye):MathJax.typeset([ye])},xe=function(){var ve=de.select(be===2?".MathJax_SVG":".MathJax"),ye=!ve.empty()&&de.select("svg").node();if(ye){var me,Me=ye.getBoundingClientRect();me=be===2?v.select("body").select("#MathJax_SVG_glyphs"):ve.select("defs"),K(ve,me,Me)}else w.log("There was an error in the tex syntax.",Q),K();de.remove()};be===2?MathJax.Hub.Queue(function(){return le=w.extendDeepAll({},MathJax.Hub.config),se=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:o},displayAlign:"left"})},function(){if((oe=MathJax.Hub.config.menuSettings.renderer)!=="SVG")return MathJax.Hub.setRenderer("SVG")},_e,xe,function(){if(oe!=="SVG")return MathJax.Hub.setRenderer(oe)},function(){return se!==void 0&&(MathJax.Hub.processSectionDelay=se),MathJax.Hub.Config(le)}):be===3&&(le=w.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=o,(oe=MathJax.config.startup.output)!=="svg"&&(MathJax.config.startup.output="svg"),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){_e(),xe(),oe!=="svg"&&(MathJax.config.startup.output=oe),MathJax.config=le}))}else w.warn("No MathJax version:",MathJax.version)})(Z[2],J,function(Q,ne,K){z.selectAll("svg."+H).remove(),z.selectAll("g."+H+"-group").remove();var oe=Q&&Q.select("svg");if(!oe||!oe.node())return U(),void re();var le=z.append("g").classed(H+"-group",!0).attr({"pointer-events":"none","data-unformatted":j,"data-math":"Y"});le.node().appendChild(oe.node()),ne&&ne.node()&&oe.node().insertBefore(ne.node().cloneNode(!0),oe.node().firstChild);var se=K.width,de=K.height;oe.attr({class:H,height:de,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var be=N.node().style.fill||"black",_e=oe.select("g");_e.attr({fill:be,stroke:be});var xe=_e.node().getBoundingClientRect(),ve=xe.width,ye=xe.height;(ve>se||ye>de)&&(oe.style("overflow","hidden"),ve=(xe=oe.node().getBoundingClientRect()).width,ye=xe.height);var me=+N.attr("x"),Me=+N.attr("y"),Ae=-(ee||N.node().getBoundingClientRect().height)/4;if(H[0]==="y")le.attr({transform:"rotate("+[-90,me,Me]+")"+n(-ve/2,Ae-ye/2)});else if(H[0]==="l")Me=Ae-ye/2;else if(H[0]==="a"&&H.indexOf("atitle")!==0)me=0,Me=Ae;else{var ce=N.attr("text-anchor");me-=ve*(ce==="middle"?.5:ce==="end"?1:0),Me=Me+Ae-ye/2}oe.attr({x:me,y:Me}),F&&F.call(N,le),re(le)})})):U(),N}function U(){z.empty()||(H=N.attr("class")+"-math",z.select("svg."+H).remove()),N.text("").style("white-space","pre");var re=function(ee,J){J=J.replace(d," ");var Q,ne=!1,K=[],oe=-1;function le(){oe++;var ke=document.createElementNS(T.svg,"tspan");v.select(ke).attr({class:"line",dy:oe*x+"em"}),ee.appendChild(ke),Q=ke;var Ee=K;if(K=[{node:ke}],Ee.length>1)for(var Ie=1;Ie<Ee.length;Ie++)se(Ee[Ie])}function se(ke){var Ee,Ie=ke.type,Re={};if(Ie==="a"){Ee="a";var Ne=ke.target,ge=ke.href,we=ke.popup;ge&&(Re={"xlink:xlink:show":Ne==="_blank"||Ne.charAt(0)!=="_"?"new":"replace",target:Ne,"xlink:xlink:href":ge},we&&(Re.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+we+'");return false;'))}else Ee="tspan";ke.style&&(Re.style=ke.style);var Ce=document.createElementNS(T.svg,Ee);if(Ie==="sup"||Ie==="sub"){de(Q,u),Q.appendChild(Ce);var ze=document.createElementNS(T.svg,"tspan");de(ze,u),v.select(ze).attr("dy",a[Ie]),Re.dy=i[Ie],Q.appendChild(Ce),Q.appendChild(ze)}else Q.appendChild(Ce);v.select(Ce).attr(Re),Q=ke.node=Ce,K.push(ke)}function de(ke,Ee){ke.appendChild(document.createTextNode(Ee))}function be(ke){if(K.length!==1){var Ee=K.pop();ke!==Ee.type&&w.log("Start tag <"+Ee.type+"> doesnt match end tag <"+ke+">. Pretending it did match.",J),Q=K[K.length-1].node}else w.log("Ignoring unexpected end tag </"+ke+">.",J)}p.test(J)?le():(Q=ee,K=[{node:ee}]);for(var _e=J.split(c),xe=0;xe<_e.length;xe++){var ve=_e[xe],ye=ve.match(_),me=ye&&ye[2].toLowerCase(),Me=r[me];if(me==="br")le();else if(Me===void 0)de(Q,D(ve));else if(ye[1])be(me);else{var Ae=ye[4],ce={type:me},ae=M(Ae,g);if(ae?(ae=ae.replace(h,"$1 fill:"),Me&&(ae+=";"+Me)):Me&&(ae=Me),ae&&(ce.style=ae),me==="a"){ne=!0;var pe=M(Ae,m);if(pe){var De=P(pe);De&&(ce.href=De,ce.target=M(Ae,b)||"_blank",ce.popup=M(Ae,y))}}se(ce)}}return ne}(N.node(),j);re&&N.style("pointer-events","all"),A.positionText(N),F&&F.call(N)}};var s=/(<|&lt;|&#60;)/g,t=/(>|&gt;|&#62;)/g,o=[["$","$"],["\\(","\\)"]],r={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},i={sub:"0.3em",sup:"-0.6em"},a={sub:"-0.21em",sup:"0.42em"},u="\u200B",l=["http:","https:","mailto:","",void 0,":"],d=A.NEWLINES=/(\r\n?|\n)/g,c=/(<[^<>]*>)/,_=/<(\/?)([^ >]*)(\s+(.*))?>/i,p=/<br(\s+.*)?>/i;A.BR_TAG_ALL=/<br(\s+.*)?>/gi;var g=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,m=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,b=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,y=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function M(N,V){if(!N)return null;var F=N.match(V),j=F&&(F[3]||F[4]);return j&&D(j)}var h=/(^|;)\s*color:/;A.plainText=function(N,V){for(var F=(V=V||{}).len!==void 0&&V.len!==-1?V.len:1/0,j=V.allowedTags!==void 0?V.allowedTags:["br"],Z=N.split(c),z=[],H="",U=0,re=0;re<Z.length;re++){var ee=Z[re],J=ee.match(_),Q=J&&J[2].toLowerCase();if(Q)j.indexOf(Q)!==-1&&(z.push(ee),H=Q);else{var ne=ee.length;if(U+ne<F)z.push(ee),U+=ne;else if(U<F){var K=F-U;H&&(H!=="br"||K<=3||ne<=3)&&z.pop(),F>3?z.push(ee.substr(0,K-3)+"..."):z.push(ee.substr(0,K));break}H=""}}return z.join("")};var E={mu:"\u03BC",amp:"&",lt:"<",gt:">",nbsp:"\xA0",times:"\xD7",plusmn:"\xB1",deg:"\xB0"},k=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function D(N){return N.replace(k,function(V,F){return(F.charAt(0)==="#"?function(j){if(!(j>1114111)){var Z=String.fromCodePoint;if(Z)return Z(j);var z=String.fromCharCode;return j<=65535?z(j):z(55232+(j>>10),j%1024+56320)}}(F.charAt(1)==="x"?parseInt(F.substr(2),16):parseInt(F.substr(1),10)):E[F])||V})}function P(N){var V=encodeURI(decodeURI(N)),F=document.createElement("a"),j=document.createElement("a");F.href=N,j.href=V;var Z=F.protocol,z=j.protocol;return l.indexOf(Z)!==-1&&l.indexOf(z)!==-1?V:""}function L(N,V,F){var j,Z,z,H=F.horizontalAlign,U=F.verticalAlign||"top",re=N.node().getBoundingClientRect(),ee=V.node().getBoundingClientRect();return Z=U==="bottom"?function(){return re.bottom-j.height}:U==="middle"?function(){return re.top+(re.height-j.height)/2}:function(){return re.top},z=H==="right"?function(){return re.right-j.width}:H==="center"?function(){return re.left+(re.width-j.width)/2}:function(){return re.left},function(){j=this.node().getBoundingClientRect();var J=z()-ee.left,Q=Z()-ee.top,ne=F.gd||{};if(F.gd){ne._fullLayout._calcInverseTransform(ne);var K=w.apply3DTransform(ne._fullLayout._invTransform)(J,Q);J=K[0],Q=K[1]}return this.style({top:Q+"px",left:J+"px","z-index":1e3}),this}}A.convertEntities=D,A.sanitizeHTML=function(N){N=N.replace(d," ");for(var V=document.createElement("p"),F=V,j=[],Z=N.split(c),z=0;z<Z.length;z++){var H=Z[z],U=H.match(_),re=U&&U[2].toLowerCase();if(re in r)if(U[1])j.length&&(F=j.pop());else{var ee=U[4],J=M(ee,g),Q=J?{style:J}:{};if(re==="a"){var ne=M(ee,m);if(ne){var K=P(ne);if(K){Q.href=K;var oe=M(ee,b);oe&&(Q.target=oe)}}}var le=document.createElement(re);F.appendChild(le),v.select(le).attr(Q),F=le,j.push(le)}else F.appendChild(document.createTextNode(D(H)))}return V.innerHTML},A.lineCount=function(N){return N.selectAll("tspan.line").size()||1},A.positionText=function(N,V,F){return N.each(function(){var j=v.select(this);function Z(U,re){return re===void 0?(re=j.attr(U))===null&&(j.attr(U,0),re=0):j.attr(U,re),re}var z=Z("x",V),H=Z("y",F);this.nodeName==="text"&&j.selectAll("tspan.line").attr({x:z,y:H})})};var O="1px ";A.makeTextShadow=function(N){return O+O+O+N+", -"+O+"-"+O+O+N+", "+O+"-"+O+O+N+", -"+O+O+O+N},A.makeEditable=function(N,V){var F=V.gd,j=V.delegate,Z=v.dispatch("edit","input","cancel"),z=j||N;if(N.style({"pointer-events":j?"none":"all"}),N.size()!==1)throw new Error("boo");function H(){var re,ee,J,Q,ne;re=v.select(F).select(".svg-container"),ee=re.append("div"),J=N.node().style,Q=parseFloat(J.fontSize||12),(ne=V.text)===void 0&&(ne=N.attr("data-unformatted")),ee.classed("plugin-editable editable",!0).style({position:"absolute","font-family":J.fontFamily||"Arial","font-size":Q,color:V.fill||J.fill||"black",opacity:1,"background-color":V.background||"transparent",outline:"#ffffff33 1px solid",margin:[-Q/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(ne).call(L(N,re,V)).on("blur",function(){F._editing=!1,N.text(this.textContent).style({opacity:1});var le,se=v.select(this).attr("class");(le=se?"."+se.split(" ")[0]+"-math-group":"[class*=-math-group]")&&v.select(N.node().parentNode).select(le).style({opacity:0});var de=this.textContent;v.select(this).transition().duration(0).remove(),v.select(document).on("mouseup",null),Z.edit.call(N,de)}).on("focus",function(){var le=this;F._editing=!0,v.select(document).on("mouseup",function(){if(v.event.target===le)return!1;document.activeElement===ee.node()&&ee.node().blur()})}).on("keyup",function(){v.event.which===27?(F._editing=!1,N.style({opacity:1}),v.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),Z.cancel.call(N,this.textContent)):(Z.input.call(N,this.textContent),v.select(this).call(L(N,re,V)))}).on("keydown",function(){v.event.which===13&&this.blur()}).call(U),N.style({opacity:0});var K,oe=z.attr("class");(K=oe?"."+oe.split(" ")[0]+"-math-group":"[class*=-math-group]")&&v.select(N.node().parentNode).select(K).style({opacity:0})}function U(re){var ee=re.node(),J=document.createRange();J.selectNodeContents(ee);var Q=window.getSelection();Q.removeAllRanges(),Q.addRange(J),ee.focus()}return V.immediate?H():z.on("click",H),v.rebind(N,Z,"on")}},91200:function(C,A){"use strict";var e={};function v(w){w&&w.timer!==null&&(clearTimeout(w.timer),w.timer=null)}A.throttle=function(w,n,T){var x=e[w],f=Date.now();if(!x){for(var s in e)e[s].ts<f-6e4&&delete e[s];x=e[w]={ts:0,timer:null}}function t(){T(),x.ts=Date.now(),x.onDone&&(x.onDone(),x.onDone=null)}v(x),f>x.ts+n?t():x.timer=setTimeout(function(){t(),x.timer=null},n)},A.done=function(w){var n=e[w];return n&&n.timer?new Promise(function(T){var x=n.onDone;n.onDone=function(){x&&x(),T(),n.onDone=null}}):Promise.resolve()},A.clear=function(w){if(w)v(e[w]),delete e[w];else for(var n in e)A.clear(n)}},36896:function(C,A,e){"use strict";var v=e(38248);C.exports=function(w,n){if(w>0)return Math.log(w)/Math.LN10;var T=Math.log(Math.min(n[0],n[1]))/Math.LN10;return v(T)||(T=Math.log(Math.max(n[0],n[1]))/Math.LN10-6),T}},59972:function(C,A,e){"use strict";var v=C.exports={},w=e(79552).locationmodeToLayer,n=e(55712).NO;v.getTopojsonName=function(T){return[T.scope.replace(/ /g,"-"),"_",T.resolution.toString(),"m"].join("")},v.getTopojsonPath=function(T,x){return T+x+".json"},v.getTopojsonFeatures=function(T,x){var f=w[T.locationmode],s=x.objects[f];return n(x,s).features}},11680:function(C){"use strict";C.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},6580:function(C){"use strict";C.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},69820:function(C,A,e){"use strict";var v=e(24040);C.exports=function(w){for(var n,T,x=v.layoutArrayContainers,f=v.layoutArrayRegexes,s=w.split("[")[0],t=0;t<f.length;t++)if((T=w.match(f[t]))&&T.index===0){n=T[0];break}if(n||(n=x[x.indexOf(s)]),!n)return!1;var o=w.substr(n.length);return o?!!(T=o.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:n,index:Number(T[1]),property:T[3]||""}:{array:n,index:"",property:""}}},67824:function(C,A,e){"use strict";var v=e(92880).extendFlat,w=e(63620),n={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},T={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},x=n.flags.slice().concat(["fullReplot"]),f=T.flags.slice().concat("layoutReplot");function s(r){for(var i={},a=0;a<r.length;a++)i[r[a]]=!1;return i}function t(r,i,a){var u=v({},r);for(var l in u){var d=u[l];w(d)&&(u[l]=o(d,i,0,l))}return a==="from-root"&&(u.editType=i),u}function o(r,i,a,u){if(r.valType){var l=v({},r);if(l.editType=i,Array.isArray(r.items)){l.items=new Array(r.items.length);for(var d=0;d<r.items.length;d++)l.items[d]=o(r.items[d],i)}return l}return t(r,i,u.charAt(0)==="_"?"nested":"from-root")}C.exports={traces:n,layout:T,traceFlags:function(){return s(x)},layoutFlags:function(){return s(f)},update:function(r,i){var a=i.editType;if(a&&a!=="none")for(var u=a.split("+"),l=0;l<u.length;l++)r[u[l]]=!0},overrideAll:t}},93404:function(C,A,e){"use strict";var v=e(38248),w=e(61784),n=e(24040),T=e(3400),x=e(7316),f=e(79811),s=e(76308),t=f.cleanId,o=f.getFromTrace,r=n.traceIs;function i(m,b){var y=m[b],M=b.charAt(0);y&&y!=="paper"&&(m[b]=t(y,M,!0))}function a(m){function b(y,M){var h=m[y],E=m.title&&m.title[M];h&&!E&&(m.title||(m.title={}),m.title[M]=m[y],delete m[y])}m&&(typeof m.title!="string"&&typeof m.title!="number"||(m.title={text:m.title}),b("titlefont","font"),b("titleposition","position"),b("titleside","side"),b("titleoffset","offset"))}function u(m){if(!T.isPlainObject(m))return!1;var b=m.name;return delete m.name,delete m.showlegend,(typeof b=="string"||typeof b=="number")&&String(b)}function l(m,b,y,M){if(y&&!M)return m;if(M&&!y||!m.trim())return b;if(!b.trim())return m;var h,E=Math.min(m.length,b.length);for(h=0;h<E&&m.charAt(h)===b.charAt(h);h++);return m.substr(0,h).trim()}function d(m){var b="middle",y="center";return typeof m=="string"&&(m.indexOf("top")!==-1?b="top":m.indexOf("bottom")!==-1&&(b="bottom"),m.indexOf("left")!==-1?y="left":m.indexOf("right")!==-1&&(y="right")),b+" "+y}function c(m,b){return b in m&&typeof m[b]=="object"&&Object.keys(m[b]).length===0}A.clearPromiseQueue=function(m){Array.isArray(m._promises)&&m._promises.length>0&&T.log("Clearing previous rejected promises from queue."),m._promises=[]},A.cleanLayout=function(m){var b,y;m||(m={}),m.xaxis1&&(m.xaxis||(m.xaxis=m.xaxis1),delete m.xaxis1),m.yaxis1&&(m.yaxis||(m.yaxis=m.yaxis1),delete m.yaxis1),m.scene1&&(m.scene||(m.scene=m.scene1),delete m.scene1);var M=(x.subplotsRegistry.cartesian||{}).attrRegex,h=(x.subplotsRegistry.polar||{}).attrRegex,E=(x.subplotsRegistry.ternary||{}).attrRegex,k=(x.subplotsRegistry.gl3d||{}).attrRegex,D=Object.keys(m);for(b=0;b<D.length;b++){var P=D[b];if(M&&M.test(P)){var L=m[P];L.anchor&&L.anchor!=="free"&&(L.anchor=t(L.anchor)),L.overlaying&&(L.overlaying=t(L.overlaying)),L.type||(L.isdate?L.type="date":L.islog?L.type="log":L.isdate===!1&&L.islog===!1&&(L.type="linear")),L.autorange!=="withzero"&&L.autorange!=="tozero"||(L.autorange=!0,L.rangemode="tozero"),L.insiderange&&delete L.range,delete L.islog,delete L.isdate,delete L.categories,c(L,"domain")&&delete L.domain,L.autotick!==void 0&&(L.tickmode===void 0&&(L.tickmode=L.autotick?"auto":"linear"),delete L.autotick),a(L)}else if(h&&h.test(P))a(m[P].radialaxis);else if(E&&E.test(P)){var O=m[P];a(O.aaxis),a(O.baxis),a(O.caxis)}else if(k&&k.test(P)){var N=m[P],V=N.cameraposition;if(Array.isArray(V)&&V[0].length===4){var F=V[0],j=V[1],Z=V[2],z=w([],F),H=[];for(y=0;y<3;++y)H[y]=j[y]+Z*z[2+4*y];N.camera={eye:{x:H[0],y:H[1],z:H[2]},center:{x:j[0],y:j[1],z:j[2]},up:{x:0,y:0,z:1}},delete N.cameraposition}a(N.xaxis),a(N.yaxis),a(N.zaxis)}}var U=Array.isArray(m.annotations)?m.annotations.length:0;for(b=0;b<U;b++){var re=m.annotations[b];T.isPlainObject(re)&&(re.ref&&(re.ref==="paper"?(re.xref="paper",re.yref="paper"):re.ref==="data"&&(re.xref="x",re.yref="y"),delete re.ref),i(re,"xref"),i(re,"yref"))}var ee=Array.isArray(m.shapes)?m.shapes.length:0;for(b=0;b<ee;b++){var J=m.shapes[b];T.isPlainObject(J)&&(i(J,"xref"),i(J,"yref"))}var Q=Array.isArray(m.images)?m.images.length:0;for(b=0;b<Q;b++){var ne=m.images[b];T.isPlainObject(ne)&&(i(ne,"xref"),i(ne,"yref"))}var K=m.legend;return K&&(K.x>3?(K.x=1.02,K.xanchor="left"):K.x<-2&&(K.x=-.02,K.xanchor="right"),K.y>3?(K.y=1.02,K.yanchor="bottom"):K.y<-2&&(K.y=-.02,K.yanchor="top")),a(m),m.dragmode==="rotate"&&(m.dragmode="orbit"),s.clean(m),m.template&&m.template.layout&&A.cleanLayout(m.template.layout),m},A.cleanData=function(m){for(var b=0;b<m.length;b++){var y,M=m[b];if(M.type==="histogramy"&&"xbins"in M&&!("ybins"in M)&&(M.ybins=M.xbins,delete M.xbins),M.error_y&&"opacity"in M.error_y){var h=s.defaults,E=M.error_y.color||(r(M,"bar")?s.defaultLine:h[b%h.length]);M.error_y.color=s.addOpacity(s.rgb(E),s.opacity(E)*M.error_y.opacity),delete M.error_y.opacity}if("bardir"in M&&(M.bardir!=="h"||!r(M,"bar")&&M.type.substr(0,9)!=="histogram"||(M.orientation="h",A.swapXYData(M)),delete M.bardir),M.type==="histogramy"&&A.swapXYData(M),M.type!=="histogramx"&&M.type!=="histogramy"||(M.type="histogram"),"scl"in M&&!("colorscale"in M)&&(M.colorscale=M.scl,delete M.scl),"reversescl"in M&&!("reversescale"in M)&&(M.reversescale=M.reversescl,delete M.reversescl),M.xaxis&&(M.xaxis=t(M.xaxis,"x")),M.yaxis&&(M.yaxis=t(M.yaxis,"y")),r(M,"gl3d")&&M.scene&&(M.scene=x.subplotsRegistry.gl3d.cleanId(M.scene)),!r(M,"pie-like")&&!r(M,"bar-like"))if(Array.isArray(M.textposition))for(y=0;y<M.textposition.length;y++)M.textposition[y]=d(M.textposition[y]);else M.textposition&&(M.textposition=d(M.textposition));var k=n.getModule(M);if(k&&k.colorbar){var D=k.colorbar.container,P=D?M[D]:M;P&&P.colorscale&&(P.colorscale==="YIGnBu"&&(P.colorscale="YlGnBu"),P.colorscale==="YIOrRd"&&(P.colorscale="YlOrRd"))}if(M.type==="surface"&&T.isPlainObject(M.contours)){var L=["x","y","z"];for(y=0;y<L.length;y++){var O=M.contours[L[y]];T.isPlainObject(O)&&(O.highlightColor&&(O.highlightcolor=O.highlightColor,delete O.highlightColor),O.highlightWidth&&(O.highlightwidth=O.highlightWidth,delete O.highlightWidth))}}if(M.type==="candlestick"||M.type==="ohlc"){var N=(M.increasing||{}).showlegend!==!1,V=(M.decreasing||{}).showlegend!==!1,F=u(M.increasing),j=u(M.decreasing);if(F!==!1&&j!==!1){var Z=l(F,j,N,V);Z&&(M.name=Z)}else!F&&!j||M.name||(M.name=F||j)}if(Array.isArray(M.transforms)){var z=M.transforms;for(y=0;y<z.length;y++){var H=z[y];if(T.isPlainObject(H))switch(H.type){case"filter":H.filtersrc&&(H.target=H.filtersrc,delete H.filtersrc),H.calendar&&(H.valuecalendar||(H.valuecalendar=H.calendar),delete H.calendar);break;case"groupby":if(H.styles=H.styles||H.style,H.styles&&!Array.isArray(H.styles)){var U=H.styles,re=Object.keys(U);H.styles=[];for(var ee=0;ee<re.length;ee++)H.styles.push({target:re[ee],value:U[re[ee]]})}}}}c(M,"line")&&delete M.line,"marker"in M&&(c(M.marker,"line")&&delete M.marker.line,c(M,"marker")&&delete M.marker),s.clean(M),M.autobinx&&(delete M.autobinx,delete M.xbins),M.autobiny&&(delete M.autobiny,delete M.ybins),a(M),M.colorbar&&a(M.colorbar),M.marker&&M.marker.colorbar&&a(M.marker.colorbar),M.line&&M.line.colorbar&&a(M.line.colorbar),M.aaxis&&a(M.aaxis),M.baxis&&a(M.baxis)}},A.swapXYData=function(m){var b;if(T.swapAttrs(m,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(m.z)&&Array.isArray(m.z[0])&&(m.transpose?delete m.transpose:m.transpose=!0),m.error_x&&m.error_y){var y=m.error_y,M="copy_ystyle"in y?y.copy_ystyle:!(y.color||y.thickness||y.width);T.swapAttrs(m,["error_?.copy_ystyle"]),M&&T.swapAttrs(m,["error_?.color","error_?.thickness","error_?.width"])}if(typeof m.hoverinfo=="string"){var h=m.hoverinfo.split("+");for(b=0;b<h.length;b++)h[b]==="x"?h[b]="y":h[b]==="y"&&(h[b]="x");m.hoverinfo=h.join("+")}},A.coerceTraceIndices=function(m,b){if(v(b))return[b];if(!Array.isArray(b)||!b.length)return m.data.map(function(h,E){return E});if(Array.isArray(b)){for(var y=[],M=0;M<b.length;M++)T.isIndex(b[M],m.data.length)?y.push(b[M]):T.warn("trace index (",b[M],") is not a number or is out of bounds");return y}return b},A.manageArrayContainers=function(m,b,y){var M=m.obj,h=m.parts,E=h.length,k=h[E-1],D=v(k);if(D&&b===null){var P=h.slice(0,E-1).join(".");T.nestedProperty(M,P).get().splice(k,1)}else D&&m.get()===void 0&&m.get()===void 0&&(y[m.astr]=null),m.set(b)};var _=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function p(m){var b=m.search(_);if(b>0)return m.substr(0,b)}A.hasParent=function(m,b){for(var y=p(b);y;){if(y in m)return!0;y=p(y)}return!1};var g=["x","y","z"];A.clearAxisTypes=function(m,b,y){for(var M=0;M<b.length;M++)for(var h=m._fullData[M],E=0;E<3;E++){var k=o(m,h,g[E]);if(k&&k.type!=="log"){var D=k._name,P=k._id.substr(1);if(P.substr(0,5)==="scene"){if(y[P]!==void 0)continue;D=P+"."+D}var L=D+".type";y[D]===void 0&&y[L]===void 0&&T.nestedProperty(m.layout,L).set(null)}}}},22448:function(C,A,e){"use strict";var v=e(36424);A._doPlot=v._doPlot,A.newPlot=v.newPlot,A.restyle=v.restyle,A.relayout=v.relayout,A.redraw=v.redraw,A.update=v.update,A._guiRestyle=v._guiRestyle,A._guiRelayout=v._guiRelayout,A._guiUpdate=v._guiUpdate,A._storeDirectGUIEdit=v._storeDirectGUIEdit,A.react=v.react,A.extendTraces=v.extendTraces,A.prependTraces=v.prependTraces,A.addTraces=v.addTraces,A.deleteTraces=v.deleteTraces,A.moveTraces=v.moveTraces,A.purge=v.purge,A.addFrames=v.addFrames,A.deleteFrames=v.deleteFrames,A.animate=v.animate,A.setPlotConfig=v.setPlotConfig;var w=e(52200).getGraphDiv,n=e(4016).eraseActiveShape;A.deleteActiveShape=function(x){return n(w(x))},A.toImage=e(67024),A.validate=e(21480),A.downloadImage=e(39792);var T=e(94828);A.makeTemplate=T.makeTemplate,A.validateTemplate=T.validateTemplate},17680:function(C,A,e){"use strict";var v=e(63620),w=e(16628),n=e(24248),T=e(14952).sorterAsc,x=e(24040);A.containerArrayMatch=e(69820);var f=A.isAddVal=function(t){return t==="add"||v(t)},s=A.isRemoveVal=function(t){return t===null||t==="remove"};A.applyContainerArrayChanges=function(t,o,r,i,a){var u=o.astr,l=x.getComponentMethod(u,"supplyLayoutDefaults"),d=x.getComponentMethod(u,"draw"),c=x.getComponentMethod(u,"drawOne"),_=i.replot||i.recalc||l===w||d===w,p=t.layout,g=t._fullLayout;if(r[""]){Object.keys(r).length>1&&n.warn("Full array edits are incompatible with other edits",u);var m=r[""][""];if(s(m))o.set(null);else{if(!Array.isArray(m))return n.warn("Unrecognized full array edit value",u,m),!0;o.set(m)}return!_&&(l(p,g),d(t),!0)}var b,y,M,h,E,k,D,P,L=Object.keys(r).map(Number).sort(T),O=o.get(),N=O||[],V=a(g,u).get(),F=[],j=-1,Z=N.length;for(b=0;b<L.length;b++)if(h=r[M=L[b]],E=Object.keys(h),k=h[""],D=f(k),M<0||M>N.length-(D?0:1))n.warn("index out of range",u,M);else if(k!==void 0)E.length>1&&n.warn("Insertion & removal are incompatible with edits to the same index.",u,M),s(k)?F.push(M):D?(k==="add"&&(k={}),N.splice(M,0,k),V&&V.splice(M,0,{})):n.warn("Unrecognized full object edit value",u,M,k),j===-1&&(j=M);else for(y=0;y<E.length;y++)P=u+"["+M+"].",a(N[M],E[y],P).set(h[E[y]]);for(b=F.length-1;b>=0;b--)N.splice(F[b],1),V&&V.splice(F[b],1);if(N.length?O||o.set(N):o.set(null),_)return!1;if(l(p,g),c!==w){var z;if(j===-1)z=L;else{for(Z=Math.max(N.length,Z),z=[],b=0;b<L.length&&!((M=L[b])>=j);b++)z.push(M);for(b=j;b<Z;b++)z.push(b)}for(b=0;b<z.length;b++)c(t,z[b])}else d(t);return!0}},36424:function(C,A,e){"use strict";var v=e(33428),w=e(38248),n=e(52264),T=e(3400),x=T.nestedProperty,f=e(95924),s=e(94552),t=e(24040),o=e(73060),r=e(7316),i=e(54460),a=e(96312),u=e(94724),l=e(43616),d=e(76308),c=e(42464).initInteractions,_=e(9616),p=e(22676).clearOutline,g=e(20556).dfltConfig,m=e(17680),b=e(93404),y=e(39172),M=e(67824),h=e(33816).AX_NAME_PATTERN,E=0;function k(ke){var Ee=ke._fullLayout;Ee._redrawFromAutoMarginCount?Ee._redrawFromAutoMarginCount--:ke.emit("plotly_afterplot")}function D(ke,Ee){try{ke._fullLayout._paper.style("background",Ee)}catch(Ie){T.error(Ie)}}function P(ke,Ee){D(ke,d.combine(Ee,"white"))}function L(ke,Ee){if(!ke._context){ke._context=T.extendDeep({},g);var Ie=v.select("base");ke._context._baseUrl=Ie.size()&&Ie.attr("href")?window.location.href.split("#")[0]:""}var Re,Ne,ge,we=ke._context;if(Ee){for(Ne=Object.keys(Ee),Re=0;Re<Ne.length;Re++)(ge=Ne[Re])!=="editable"&&ge!=="edits"&&ge in we&&(ge==="setBackground"&&Ee[ge]==="opaque"?we[ge]=P:we[ge]=Ee[ge]);Ee.plot3dPixelRatio&&!we.plotGlPixelRatio&&(we.plotGlPixelRatio=we.plot3dPixelRatio);var Ce=Ee.editable;if(Ce!==void 0)for(we.editable=Ce,Ne=Object.keys(we.edits),Re=0;Re<Ne.length;Re++)we.edits[Ne[Re]]=Ce;if(Ee.edits)for(Ne=Object.keys(Ee.edits),Re=0;Re<Ne.length;Re++)(ge=Ne[Re])in we.edits&&(we.edits[ge]=Ee.edits[ge]);we._exportedPlot=Ee._exportedPlot}we.staticPlot&&(we.editable=!1,we.edits={},we.autosizable=!1,we.scrollZoom=!1,we.doubleClick=!1,we.showTips=!1,we.showLink=!1,we.displayModeBar=!1),we.displayModeBar!=="hover"||n||(we.displayModeBar=!0),we.setBackground!=="transparent"&&typeof we.setBackground=="function"||(we.setBackground=D),we._hasZeroHeight=we._hasZeroHeight||ke.clientHeight===0,we._hasZeroWidth=we._hasZeroWidth||ke.clientWidth===0;var ze=we.scrollZoom,Pe=we._scrollZoom={};if(ze===!0)Pe.cartesian=1,Pe.gl3d=1,Pe.geo=1,Pe.mapbox=1;else if(typeof ze=="string"){var Ue=ze.split("+");for(Re=0;Re<Ue.length;Re++)Pe[Ue[Re]]=1}else ze!==!1&&(Pe.gl3d=1,Pe.geo=1,Pe.mapbox=1)}function O(ke,Ee){var Ie,Re,Ne=Ee+1,ge=[];for(Ie=0;Ie<ke.length;Ie++)(Re=ke[Ie])<0?ge.push(Ne+Re):ge.push(Re);return ge}function N(ke,Ee,Ie){var Re,Ne;for(Re=0;Re<Ee.length;Re++){if((Ne=Ee[Re])!==parseInt(Ne,10))throw new Error("all values in "+Ie+" must be integers");if(Ne>=ke.data.length||Ne<-ke.data.length)throw new Error(Ie+" must be valid indices for gd.data.");if(Ee.indexOf(Ne,Re+1)>-1||Ne>=0&&Ee.indexOf(-ke.data.length+Ne)>-1||Ne<0&&Ee.indexOf(ke.data.length+Ne)>-1)throw new Error("each index in "+Ie+" must be unique.")}}function V(ke,Ee,Ie){if(!Array.isArray(ke.data))throw new Error("gd.data must be an array.");if(Ee===void 0)throw new Error("currentIndices is a required argument.");if(Array.isArray(Ee)||(Ee=[Ee]),N(ke,Ee,"currentIndices"),Ie===void 0||Array.isArray(Ie)||(Ie=[Ie]),Ie!==void 0&&N(ke,Ie,"newIndices"),Ie!==void 0&&Ee.length!==Ie.length)throw new Error("current and new indices must be of equal length.")}function F(ke,Ee,Ie,Re,Ne){(function(Xe,st,at,vt){var xt=T.isPlainObject(vt);if(!Array.isArray(Xe.data))throw new Error("gd.data must be an array");if(!T.isPlainObject(st))throw new Error("update must be a key:value object");if(at===void 0)throw new Error("indices must be an integer or array of integers");for(var gt in N(Xe,at,"indices"),st){if(!Array.isArray(st[gt])||st[gt].length!==at.length)throw new Error("attribute "+gt+" must be an array of length equal to indices array length");if(xt&&(!(gt in vt)||!Array.isArray(vt[gt])||vt[gt].length!==st[gt].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}})(ke,Ee,Ie,Re);for(var ge=function(Xe,st,at,vt){var xt,gt,rt,tt,Mt,Pt=T.isPlainObject(vt),Rt=[];for(var St in Array.isArray(at)||(at=[at]),at=O(at,Xe.data.length-1),st)for(var Ye=0;Ye<at.length;Ye++){if(xt=Xe.data[at[Ye]],gt=(rt=x(xt,St)).get(),tt=st[St][Ye],!T.isArrayOrTypedArray(tt))throw new Error("attribute: "+St+" index: "+Ye+" must be an array");if(!T.isArrayOrTypedArray(gt))throw new Error("cannot extend missing or non-array attribute: "+St);if(gt.constructor!==tt.constructor)throw new Error("cannot extend array with an array of a different type: "+St);Mt=Pt?vt[St][Ye]:vt,w(Mt)||(Mt=-1),Rt.push({prop:rt,target:gt,insert:tt,maxp:Math.floor(Mt)})}return Rt}(ke,Ee,Ie,Re),we={},Ce={},ze=0;ze<ge.length;ze++){var Pe=ge[ze].prop,Ue=ge[ze].maxp,Ge=Ne(ge[ze].target,ge[ze].insert,Ue);Pe.set(Ge[0]),Array.isArray(we[Pe.astr])||(we[Pe.astr]=[]),we[Pe.astr].push(Ge[1]),Array.isArray(Ce[Pe.astr])||(Ce[Pe.astr]=[]),Ce[Pe.astr].push(ge[ze].target.length)}return{update:we,maxPoints:Ce}}function j(ke,Ee){var Ie=new ke.constructor(ke.length+Ee.length);return Ie.set(ke),Ie.set(Ee,ke.length),Ie}function Z(ke,Ee,Ie,Re){ke=T.getGraphDiv(ke),b.clearPromiseQueue(ke);var Ne={};if(typeof Ee=="string")Ne[Ee]=Ie;else{if(!T.isPlainObject(Ee))return T.warn("Restyle fail.",Ee,Ie,Re),Promise.reject();Ne=T.extendFlat({},Ee),Re===void 0&&(Re=Ie)}Object.keys(Ne).length&&(ke.changed=!0);var ge=b.coerceTraceIndices(ke,Re),we=re(ke,Ne,ge),Ce=we.flags;Ce.calc&&(ke.calcdata=void 0),Ce.clearAxisTypes&&b.clearAxisTypes(ke,ge,{});var ze=[];Ce.fullReplot?ze.push(A._doPlot):(ze.push(r.previousPromises),r.supplyDefaults(ke),Ce.markerSize&&(r.doCalcdata(ke),ne(ze)),Ce.style&&ze.push(y.doTraceStyle),Ce.colorbars&&ze.push(y.doColorBars),ze.push(k)),ze.push(r.rehover,r.redrag,r.reselect),s.add(ke,Z,[ke,we.undoit,we.traces],Z,[ke,we.redoit,we.traces]);var Pe=T.syncOrAsync(ze,ke);return Pe&&Pe.then||(Pe=Promise.resolve()),Pe.then(function(){return ke.emit("plotly_restyle",we.eventData),ke})}function z(ke){return ke===void 0?null:ke}function H(ke,Ee){return Ee?function(Ie,Re,Ne){var ge=x(Ie,Re),we=ge.set;return ge.set=function(Ce){U((Ne||"")+Re,ge.get(),Ce,ke),we(Ce)},ge}:x}function U(ke,Ee,Ie,Re){if(Array.isArray(Ee)||Array.isArray(Ie))for(var Ne=Array.isArray(Ee)?Ee:[],ge=Array.isArray(Ie)?Ie:[],we=Math.max(Ne.length,ge.length),Ce=0;Ce<we;Ce++)U(ke+"["+Ce+"]",Ne[Ce],ge[Ce],Re);else if(T.isPlainObject(Ee)||T.isPlainObject(Ie)){var ze=T.isPlainObject(Ee)?Ee:{},Pe=T.isPlainObject(Ie)?Ie:{},Ue=T.extendFlat({},ze,Pe);for(var Ge in Ue)U(ke+"."+Ge,ze[Ge],Pe[Ge],Re)}else Re[ke]===void 0&&(Re[ke]=z(Ee))}function re(ke,Ee,Ie){var Re,Ne=ke._fullLayout,ge=ke._fullData,we=ke.data,Ce=Ne._guiEditing,ze=H(Ne._preGUI,Ce),Pe=T.extendDeepAll({},Ee);ee(Ee);var Ue,Ge=M.traceFlags(),Xe={},st={};function at(){return Ie.map(function(){})}function vt(Ut){var Wt=i.id2name(Ut);Ue.indexOf(Wt)===-1&&Ue.push(Wt)}function xt(Ut){return"LAYOUT"+Ut+".autorange"}function gt(Ut){return"LAYOUT"+Ut+".range"}function rt(Ut){for(var Wt=Ut;Wt<ge.length;Wt++)if(ge[Wt]._input===we[Ut])return ge[Wt]}function tt(Ut,Wt,nn){if(Array.isArray(Ut))Ut.forEach(function(gn){tt(gn,Wt,nn)});else if(!(Ut in Ee)&&!b.hasParent(Ee,Ut)){var On;if(Ut.substr(0,6)==="LAYOUT")On=ze(ke.layout,Ut.replace("LAYOUT",""));else{var kn=Ie[nn];On=H(Ne._tracePreGUI[rt(kn)._fullInput.uid],Ce)(we[kn],Ut)}Ut in st||(st[Ut]=at()),st[Ut][nn]===void 0&&(st[Ut][nn]=z(On.get())),Wt!==void 0&&On.set(Wt)}}function Mt(Ut){return function(Wt){return ge[Wt][Ut]}}function Pt(Ut){return function(Wt,nn){return Wt===!1?ge[Ie[nn]][Ut]:null}}for(var Rt in Ee){if(b.hasParent(Ee,Rt))throw new Error("cannot set "+Rt+" and a parent attribute simultaneously");var St,Ye,Ke,Ve,$e,lt,it=Ee[Rt];if(Rt!=="autobinx"&&Rt!=="autobiny"||(Rt=Rt.charAt(Rt.length-1)+"bins",it=Array.isArray(it)?it.map(Pt(Rt)):it===!1?Ie.map(Mt(Rt)):null),Xe[Rt]=it,Rt.substr(0,6)!=="LAYOUT"){for(st[Rt]=at(),Re=0;Re<Ie.length;Re++)if(St=we[Ie[Re]],Ye=rt(Ie[Re]),Ve=(Ke=H(Ne._tracePreGUI[Ye._fullInput.uid],Ce)(St,Rt)).get(),($e=Array.isArray(it)?it[Re%it.length]:it)!==void 0){var Be=Ke.parts[Ke.parts.length-1],je=Rt.substr(0,Rt.length-Be.length-1),ot=je?je+".":"",Ze=je?x(Ye,je).get():Ye;if((lt=o.getTraceValObject(Ye,Ke.parts))&&lt.impliedEdits&&$e!==null)for(var dt in lt.impliedEdits)tt(T.relativeAttr(Rt,dt),lt.impliedEdits[dt],Re);else if(Be!=="thicknessmode"&&Be!=="lenmode"||Ve===$e||$e!=="fraction"&&$e!=="pixels"||!Ze){if(Rt==="type"&&($e==="pie"!=(Ve==="pie")||$e==="funnelarea"!=(Ve==="funnelarea"))){var mt="x",yt="y";$e!=="bar"&&Ve!=="bar"||St.orientation!=="h"||(mt="y",yt="x"),T.swapAttrs(St,["?","?src"],"labels",mt),T.swapAttrs(St,["d?","?0"],"label",mt),T.swapAttrs(St,["?","?src"],"values",yt),Ve==="pie"||Ve==="funnelarea"?(x(St,"marker.color").set(x(St,"marker.colors").get()),Ne._pielayer.selectAll("g.trace").remove()):t.traceIs(St,"cartesian")&&x(St,"marker.colors").set(x(St,"marker.color").get())}}else{var ht=Ne._size,kt=Ze.orient,_t=kt==="top"||kt==="bottom";if(Be==="thicknessmode"){var Et=_t?ht.h:ht.w;tt(ot+"thickness",Ze.thickness*($e==="fraction"?1/Et:Et),Re)}else{var Lt=_t?ht.w:ht.h;tt(ot+"len",Ze.len*($e==="fraction"?1/Lt:Lt),Re)}}if(st[Rt][Re]=z(Ve),["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(Rt)!==-1){if(Rt==="orientation"){Ke.set($e);var Ot=St.x&&!St.y?"h":"v";if((Ke.get()||Ot)===Ye.orientation)continue}else Rt==="orientationaxes"&&(St.orientation={v:"h",h:"v"}[Ye.orientation]);b.swapXYData(St),Ge.calc=Ge.clearAxisTypes=!0}else r.dataArrayContainers.indexOf(Ke.parts[0])!==-1?(b.manageArrayContainers(Ke,$e,st),Ge.calc=!0):(lt?lt.arrayOk&&!t.traceIs(Ye,"regl")&&(T.isArrayOrTypedArray($e)||T.isArrayOrTypedArray(Ve))?Ge.calc=!0:M.update(Ge,lt):Ge.calc=!0,Ke.set($e))}if(["swapxyaxes","orientationaxes"].indexOf(Rt)!==-1&&i.swap(ke,Ie),Rt==="orientationaxes"){var Ft=x(ke.layout,"hovermode"),Zt=Ft.get();Zt==="x"?Ft.set("y"):Zt==="y"?Ft.set("x"):Zt==="x unified"?Ft.set("y unified"):Zt==="y unified"&&Ft.set("x unified")}if(["orientation","type"].indexOf(Rt)!==-1){for(Ue=[],Re=0;Re<Ie.length;Re++){var Ht=we[Ie[Re]];t.traceIs(Ht,"cartesian")&&(vt(Ht.xaxis||"x"),vt(Ht.yaxis||"y"))}tt(Ue.map(xt),!0,0),tt(Ue.map(gt),[0,1],0)}}else Ke=ze(ke.layout,Rt.replace("LAYOUT","")),st[Rt]=[z(Ke.get())],Ke.set(Array.isArray(it)?it[0]:it),Ge.calc=!0}return(Ge.calc||Ge.plot)&&(Ge.fullReplot=!0),{flags:Ge,undoit:st,redoit:Xe,traces:Ie,eventData:T.extendDeepNoArrays([],[Pe,Ie])}}function ee(ke){var Ee,Ie,Re,Ne=T.counterRegex("axis",".title",!1,!1),ge=/colorbar\.title$/,we=Object.keys(ke);for(Ee=0;Ee<we.length;Ee++)Ie=we[Ee],Re=ke[Ie],Ie!=="title"&&!Ne.test(Ie)&&!ge.test(Ie)||typeof Re!="string"&&typeof Re!="number"?Ie.indexOf("titlefont")>-1&&Ie.indexOf("grouptitlefont")===-1?Ce(Ie,Ie.replace("titlefont","title.font")):Ie.indexOf("titleposition")>-1?Ce(Ie,Ie.replace("titleposition","title.position")):Ie.indexOf("titleside")>-1?Ce(Ie,Ie.replace("titleside","title.side")):Ie.indexOf("titleoffset")>-1&&Ce(Ie,Ie.replace("titleoffset","title.offset")):Ce(Ie,Ie.replace("title","title.text"));function Ce(ze,Pe){ke[Pe]=ke[ze],delete ke[ze]}}function J(ke,Ee,Ie){ke=T.getGraphDiv(ke),b.clearPromiseQueue(ke);var Re={};if(typeof Ee=="string")Re[Ee]=Ie;else{if(!T.isPlainObject(Ee))return T.warn("Relayout fail.",Ee,Ie),Promise.reject();Re=T.extendFlat({},Ee)}Object.keys(Re).length&&(ke.changed=!0);var Ne=se(ke,Re),ge=Ne.flags;ge.calc&&(ke.calcdata=void 0);var we=[r.previousPromises];ge.layoutReplot?we.push(y.layoutReplot):Object.keys(Re).length&&(Q(ke,ge,Ne)||r.supplyDefaults(ke),ge.legend&&we.push(y.doLegend),ge.layoutstyle&&we.push(y.layoutStyles),ge.axrange&&ne(we,Ne.rangesAltered),ge.ticks&&we.push(y.doTicksRelayout),ge.modebar&&we.push(y.doModeBar),ge.camera&&we.push(y.doCamera),ge.colorbars&&we.push(y.doColorBars),we.push(k)),we.push(r.rehover,r.redrag,r.reselect),s.add(ke,J,[ke,Ne.undoit],J,[ke,Ne.redoit]);var Ce=T.syncOrAsync(we,ke);return Ce&&Ce.then||(Ce=Promise.resolve(ke)),Ce.then(function(){return ke.emit("plotly_relayout",Ne.eventData),ke})}function Q(ke,Ee,Ie){var Re,Ne,ge=ke._fullLayout;if(!Ee.axrange)return!1;for(var we in Ee)if(we!=="axrange"&&Ee[we])return!1;var Ce=function(st,at){return T.coerce(Re,Ne,u,st,at)},ze={};for(var Pe in Ie.rangesAltered){var Ue=i.id2name(Pe);if(Re=ke.layout[Ue],Ne=ge[Ue],a(Re,Ne,Ce,ze),Ne._matchGroup){for(var Ge in Ne._matchGroup)if(Ge!==Pe){var Xe=ge[i.id2name(Ge)];Xe.autorange=Ne.autorange,Xe.range=Ne.range.slice(),Xe._input.range=Ne.range.slice()}}}return!0}function ne(ke,Ee){var Ie=Ee?function(Re){var Ne=[];for(var ge in Ee){var we=i.getFromId(Re,ge);if(Ne.push(ge),(we.ticklabelposition||"").indexOf("inside")!==-1&&we._anchorAxis&&Ne.push(we._anchorAxis._id),we._matchGroup)for(var Ce in we._matchGroup)Ee[Ce]||Ne.push(Ce)}return i.draw(Re,Ne,{skipTitle:!0})}:function(Re){return i.draw(Re,"redraw")};ke.push(p,y.doAutoRangeAndConstraints,Ie,y.drawData,y.finalDraw)}var K=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,oe=/^[xyz]axis[0-9]*\.autorange$/,le=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function se(ke,Ee){var Ie,Re,Ne,ge=ke.layout,we=ke._fullLayout,Ce=we._guiEditing,ze=H(we._preGUI,Ce),Pe=Object.keys(Ee),Ue=i.list(ke),Ge=T.extendDeepAll({},Ee),Xe={};for(ee(Ee),Pe=Object.keys(Ee),Re=0;Re<Pe.length;Re++)if(Pe[Re].indexOf("allaxes")===0){for(Ne=0;Ne<Ue.length;Ne++){var st=Ue[Ne]._id.substr(1),at=st.indexOf("scene")!==-1?st+".":"",vt=Pe[Re].replace("allaxes",at+Ue[Ne]._name);Ee[vt]||(Ee[vt]=Ee[Pe[Re]])}delete Ee[Pe[Re]]}var xt=M.layoutFlags(),gt={},rt={};function tt(gn,Jt){if(Array.isArray(gn))gn.forEach(function(tn){tt(tn,Jt)});else if(!(gn in Ee)&&!b.hasParent(Ee,gn)){var un=ze(ge,gn);gn in rt||(rt[gn]=z(un.get())),Jt!==void 0&&un.set(Jt)}}var Mt,Pt={};function Rt(gn){var Jt=i.name2id(gn.split(".")[0]);return Pt[Jt]=1,Jt}for(var St in Ee){if(b.hasParent(Ee,St))throw new Error("cannot set "+St+" and a parent attribute simultaneously");for(var Ye=ze(ge,St),Ke=Ee[St],Ve=Ye.parts.length-1;Ve>0&&typeof Ye.parts[Ve]!="string";)Ve--;var $e=Ye.parts[Ve],lt=Ye.parts[Ve-1]+"."+$e,it=Ye.parts.slice(0,Ve).join("."),Be=x(ke.layout,it).get(),je=x(we,it).get(),ot=Ye.get();if(Ke!==void 0){gt[St]=Ke,rt[St]=$e==="reverse"?Ke:z(ot);var Ze=o.getLayoutValObject(we,Ye.parts);if(Ze&&Ze.impliedEdits&&Ke!==null)for(var dt in Ze.impliedEdits)tt(T.relativeAttr(St,dt),Ze.impliedEdits[dt]);if(["width","height"].indexOf(St)!==-1)if(Ke){tt("autosize",null);var mt=St==="height"?"width":"height";tt(mt,we[mt])}else we[St]=ke._initialAutoSize[St];else if(St==="autosize")tt("width",Ke?null:we.width),tt("height",Ke?null:we.height);else if(lt.match(K))Rt(lt),x(we,it+"._inputRange").set(null);else if(lt.match(oe)){Rt(lt),x(we,it+"._inputRange").set(null);var yt=x(we,it).get();yt._inputDomain&&(yt._input.domain=yt._inputDomain.slice())}else lt.match(le)&&x(we,it+"._inputDomain").set(null);if($e==="type"){Mt=Be;var ht=je.type==="linear"&&Ke==="log",kt=je.type==="log"&&Ke==="linear";if(ht||kt){if(Mt&&Mt.range)if(je.autorange)ht&&(Mt.range=Mt.range[1]>Mt.range[0]?[1,2]:[2,1]);else{var _t=Mt.range[0],Et=Mt.range[1];ht?(_t<=0&&Et<=0&&tt(it+".autorange",!0),_t<=0?_t=Et/1e6:Et<=0&&(Et=_t/1e6),tt(it+".range[0]",Math.log(_t)/Math.LN10),tt(it+".range[1]",Math.log(Et)/Math.LN10)):(tt(it+".range[0]",Math.pow(10,_t)),tt(it+".range[1]",Math.pow(10,Et)))}else tt(it+".autorange",!0);Array.isArray(we._subplots.polar)&&we._subplots.polar.length&&we[Ye.parts[0]]&&Ye.parts[1]==="radialaxis"&&delete we[Ye.parts[0]]._subplot.viewInitial["radialaxis.range"],t.getComponentMethod("annotations","convertCoords")(ke,je,Ke,tt),t.getComponentMethod("images","convertCoords")(ke,je,Ke,tt)}else tt(it+".autorange",!0),tt(it+".range",null);x(we,it+"._inputRange").set(null)}else if($e.match(h)){var Lt=x(we,St).get(),Ot=(Ke||{}).type;Ot&&Ot!=="-"||(Ot="linear"),t.getComponentMethod("annotations","convertCoords")(ke,Lt,Ot,tt),t.getComponentMethod("images","convertCoords")(ke,Lt,Ot,tt)}var Ft=m.containerArrayMatch(St);if(Ft){Ie=Ft.array,Re=Ft.index;var Zt=Ft.property,Ht=Ze||{editType:"calc"};Re!==""&&Zt===""&&(m.isAddVal(Ke)?rt[St]=null:m.isRemoveVal(Ke)?rt[St]=(x(ge,Ie).get()||[])[Re]:T.warn("unrecognized full object value",Ee)),M.update(xt,Ht),Xe[Ie]||(Xe[Ie]={});var Ut=Xe[Ie][Re];Ut||(Ut=Xe[Ie][Re]={}),Ut[Zt]=Ke,delete Ee[St]}else $e==="reverse"?(Be.range?Be.range.reverse():(tt(it+".autorange",!0),Be.range=[1,0]),je.autorange?xt.calc=!0:xt.plot=!0):(St==="dragmode"&&(Ke===!1&&ot!==!1||Ke!==!1&&ot===!1)||we._has("scatter-like")&&we._has("regl")&&St==="dragmode"&&(Ke==="lasso"||Ke==="select")&&ot!=="lasso"&&ot!=="select"||we._has("gl2d")?xt.plot=!0:Ze?M.update(xt,Ze):xt.calc=!0,Ye.set(Ke))}}for(Ie in Xe)m.applyContainerArrayChanges(ke,ze(ge,Ie),Xe[Ie],xt,ze)||(xt.plot=!0);for(var Wt in Pt){var nn=(Mt=i.getFromId(ke,Wt))&&Mt._constraintGroup;if(nn)for(var On in xt.calc=!0,nn)Pt[On]||(i.getFromId(ke,On)._constraintShrinkable=!0)}(de(ke)||Ee.height||Ee.width)&&(xt.plot=!0);var kn=we.shapes;for(Re=0;Re<kn.length;Re++)if(kn[Re].showlegend){xt.calc=!0;break}return(xt.plot||xt.calc)&&(xt.layoutReplot=!0),{flags:xt,rangesAltered:Pt,undoit:rt,redoit:gt,eventData:Ge}}function de(ke){var Ee=ke._fullLayout,Ie=Ee.width,Re=Ee.height;return ke.layout.autosize&&r.plotAutoSize(ke,ke.layout,Ee),Ee.width!==Ie||Ee.height!==Re}function be(ke,Ee,Ie,Re){ke=T.getGraphDiv(ke),b.clearPromiseQueue(ke),T.isPlainObject(Ee)||(Ee={}),T.isPlainObject(Ie)||(Ie={}),Object.keys(Ee).length&&(ke.changed=!0),Object.keys(Ie).length&&(ke.changed=!0);var Ne=b.coerceTraceIndices(ke,Re),ge=re(ke,T.extendFlat({},Ee),Ne),we=ge.flags,Ce=se(ke,T.extendFlat({},Ie)),ze=Ce.flags;(we.calc||ze.calc)&&(ke.calcdata=void 0),we.clearAxisTypes&&b.clearAxisTypes(ke,Ne,Ie);var Pe=[];ze.layoutReplot?Pe.push(y.layoutReplot):we.fullReplot?Pe.push(A._doPlot):(Pe.push(r.previousPromises),Q(ke,ze,Ce)||r.supplyDefaults(ke),we.style&&Pe.push(y.doTraceStyle),(we.colorbars||ze.colorbars)&&Pe.push(y.doColorBars),ze.legend&&Pe.push(y.doLegend),ze.layoutstyle&&Pe.push(y.layoutStyles),ze.axrange&&ne(Pe,Ce.rangesAltered),ze.ticks&&Pe.push(y.doTicksRelayout),ze.modebar&&Pe.push(y.doModeBar),ze.camera&&Pe.push(y.doCamera),Pe.push(k)),Pe.push(r.rehover,r.redrag,r.reselect),s.add(ke,be,[ke,ge.undoit,Ce.undoit,ge.traces],be,[ke,ge.redoit,Ce.redoit,ge.traces]);var Ue=T.syncOrAsync(Pe,ke);return Ue&&Ue.then||(Ue=Promise.resolve(ke)),Ue.then(function(){return ke.emit("plotly_update",{data:ge.eventData,layout:Ce.eventData}),ke})}function _e(ke){return function(Ee){Ee._fullLayout._guiEditing=!0;var Ie=ke.apply(null,arguments);return Ee._fullLayout._guiEditing=!1,Ie}}var xe=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],ve=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function ye(ke,Ee){for(var Ie=0;Ie<Ee.length;Ie++){var Re=Ee[Ie],Ne=ke.match(Re.pattern);if(Ne){var ge=Ne[1]||"";return{head:ge,tail:ke.substr(ge.length+1),attr:Re.attr}}}}function me(ke,Ee){var Ie=x(Ee,ke).get();if(Ie!==void 0)return Ie;var Re=ke.split(".");for(Re.pop();Re.length>1;)if(Re.pop(),(Ie=x(Ee,Re.join(".")+".uirevision").get())!==void 0)return Ie;return Ee.uirevision}function Me(ke,Ee){for(var Ie=0;Ie<Ee.length;Ie++)if(Ee[Ie]._fullInput.uid===ke)return Ie;return-1}function Ae(ke,Ee,Ie){for(var Re=0;Re<Ee.length;Re++)if(Ee[Re].uid===ke)return Re;return!Ee[Ie]||Ee[Ie].uid?-1:Ie}function ce(ke,Ee){var Ie=T.isPlainObject(ke),Re=Array.isArray(ke);return Ie||Re?(Ie&&T.isPlainObject(Ee)||Re&&Array.isArray(Ee))&&JSON.stringify(ke)===JSON.stringify(Ee):ke===Ee}function ae(ke,Ee,Ie,Re){var Ne,ge,we,Ce=Re.getValObject,ze=Re.flags,Pe=Re.immutable,Ue=Re.inArray,Ge=Re.arrayIndex;function Xe(){var Be=Ne.editType;Ue&&Be.indexOf("arraydraw")!==-1?T.pushUnique(ze.arrays[Ue],Ge):(M.update(ze,Ne),Be!=="none"&&ze.nChanges++,Re.transition&&Ne.anim&&ze.nChangesAnim++,(K.test(we)||oe.test(we))&&(ze.rangesAltered[Ie[0]]=1),le.test(we)&&x(Ee,"_inputDomain").set(null),ge==="datarevision"&&(ze.newDataRevision=1))}function st(Be){return Be.valType==="data_array"||Be.arrayOk}for(ge in ke){if(ze.calc&&!Re.transition)return;var at=ke[ge],vt=Ee[ge],xt=Ie.concat(ge);if(we=xt.join("."),ge.charAt(0)!=="_"&&typeof at!="function"&&at!==vt){if((ge==="tick0"||ge==="dtick")&&Ie[0]!=="geo"){var gt=Ee.tickmode;if(gt==="auto"||gt==="array"||!gt)continue}if((ge!=="range"||!Ee.autorange)&&(ge!=="zmin"&&ge!=="zmax"||Ee.type!=="contourcarpet")&&(Ne=Ce(xt))&&(!Ne._compareAsJSON||JSON.stringify(at)!==JSON.stringify(vt))){var rt,tt=Ne.valType,Mt=st(Ne),Pt=Array.isArray(at),Rt=Array.isArray(vt);if(Pt&&Rt){var St="_input_"+ge,Ye=ke[St],Ke=Ee[St];if(Array.isArray(Ye)&&Ye===Ke)continue}if(vt===void 0)Mt&&Pt?ze.calc=!0:Xe();else if(Ne._isLinkedToArray){var Ve=[],$e=!1;Ue||(ze.arrays[ge]=Ve);var lt=Math.min(at.length,vt.length),it=Math.max(at.length,vt.length);if(lt!==it){if(Ne.editType!=="arraydraw"){Xe();continue}$e=!0}for(rt=0;rt<lt;rt++)ae(at[rt],vt[rt],xt.concat(rt),T.extendFlat({inArray:ge,arrayIndex:rt},Re));if($e)for(rt=lt;rt<it;rt++)Ve.push(rt)}else!tt&&T.isPlainObject(at)?ae(at,vt,xt,Re):Mt?Pt&&Rt?(Pe&&(ze.calc=!0),(Pe||Re.newDataRevision)&&Xe()):Pt!==Rt?ze.calc=!0:Xe():Pt&&Rt&&at.length===vt.length&&String(at)===String(vt)||Xe()}}}for(ge in Ee)if(!(ge in ke)&&ge.charAt(0)!=="_"&&typeof Ee[ge]!="function"){if(st(Ne=Ce(Ie.concat(ge)))&&Array.isArray(Ee[ge]))return void(ze.calc=!0);Xe()}}function pe(ke,Ee){var Ie;for(Ie in ke)if(Ie.charAt(0)!=="_"){var Re=ke[Ie],Ne=Ee[Ie];if(Re!==Ne)if(T.isPlainObject(Re)&&T.isPlainObject(Ne)){if(pe(Re,Ne))return!0}else{if(!Array.isArray(Re)||!Array.isArray(Ne)||Re.length!==Ne.length)return!0;for(var ge=0;ge<Re.length;ge++)if(Re[ge]!==Ne[ge]&&(!T.isPlainObject(Re[ge])||!T.isPlainObject(Ne[ge])||pe(Re[ge],Ne[ge])))return!0}}}function De(ke){var Ee=ke._fullLayout,Ie=ke.getBoundingClientRect();if(!T.equalDomRects(Ie,Ee._lastBBox)){var Re=Ee._invTransform=T.inverseTransformMatrix(T.getFullTransformMatrix(ke));Ee._invScaleX=Math.sqrt(Re[0][0]*Re[0][0]+Re[0][1]*Re[0][1]+Re[0][2]*Re[0][2]),Ee._invScaleY=Math.sqrt(Re[1][0]*Re[1][0]+Re[1][1]*Re[1][1]+Re[1][2]*Re[1][2]),Ee._lastBBox=Ie}}A.animate=function(ke,Ee,Ie){if(ke=T.getGraphDiv(ke),!T.isPlotDiv(ke))throw new Error("This element is not a Plotly plot: "+ke+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Re=ke._transitionData;Re._frameQueue||(Re._frameQueue=[]);var Ne=(Ie=r.supplyAnimationDefaults(Ie)).transition,ge=Ie.frame;function we(Pe){return Array.isArray(Ne)?Pe>=Ne.length?Ne[0]:Ne[Pe]:Ne}function Ce(Pe){return Array.isArray(ge)?Pe>=ge.length?ge[0]:ge[Pe]:ge}function ze(Pe,Ue){var Ge=0;return function(){if(Pe&&++Ge===Ue)return Pe()}}return Re._frameWaitingCnt===void 0&&(Re._frameWaitingCnt=0),new Promise(function(Pe,Ue){function Ge(){ke.emit("plotly_animating"),Re._lastFrameAt=-1/0,Re._timeToNext=0,Re._runningTransitions=0,Re._currentFrame=null;var St=function(){Re._animationRaf=window.requestAnimationFrame(St),Date.now()-Re._lastFrameAt>Re._timeToNext&&function(){Re._currentFrame&&Re._currentFrame.onComplete&&Re._currentFrame.onComplete();var Ye=Re._currentFrame=Re._frameQueue.shift();if(Ye){var Ke=Ye.name?Ye.name.toString():null;ke._fullLayout._currentFrame=Ke,Re._lastFrameAt=Date.now(),Re._timeToNext=Ye.frameOpts.duration,r.transition(ke,Ye.frame.data,Ye.frame.layout,b.coerceTraceIndices(ke,Ye.frame.traces),Ye.frameOpts,Ye.transitionOpts).then(function(){Ye.onComplete&&Ye.onComplete()}),ke.emit("plotly_animatingframe",{name:Ke,frame:Ye.frame,animation:{frame:Ye.frameOpts,transition:Ye.transitionOpts}})}else ke.emit("plotly_animated"),window.cancelAnimationFrame(Re._animationRaf),Re._animationRaf=null}()};St()}var Xe,st,at=0;function vt(St){return Array.isArray(Ne)?at>=Ne.length?St.transitionOpts=Ne[at]:St.transitionOpts=Ne[0]:St.transitionOpts=Ne,at++,St}var xt=[],gt=Ee==null,rt=Array.isArray(Ee);if(gt||rt||!T.isPlainObject(Ee)){if(gt||["string","number"].indexOf(typeof Ee)!==-1)for(Xe=0;Xe<Re._frames.length;Xe++)(st=Re._frames[Xe])&&(gt||String(st.group)===String(Ee))&&xt.push({type:"byname",name:String(st.name),data:vt({name:st.name})});else if(rt)for(Xe=0;Xe<Ee.length;Xe++){var tt=Ee[Xe];["number","string"].indexOf(typeof tt)!==-1?(tt=String(tt),xt.push({type:"byname",name:tt,data:vt({name:tt})})):T.isPlainObject(tt)&&xt.push({type:"object",data:vt(T.extendFlat({},tt))})}}else xt.push({type:"object",data:vt(T.extendFlat({},Ee))});for(Xe=0;Xe<xt.length;Xe++)if((st=xt[Xe]).type==="byname"&&!Re._frameHash[st.data.name])return T.warn('animate failure: frame not found: "'+st.data.name+'"'),void Ue();["next","immediate"].indexOf(Ie.mode)!==-1&&function(){if(Re._frameQueue.length!==0){for(;Re._frameQueue.length;){var St=Re._frameQueue.pop();St.onInterrupt&&St.onInterrupt()}ke.emit("plotly_animationinterrupted",[])}}(),Ie.direction==="reverse"&&xt.reverse();var Mt=ke._fullLayout._currentFrame;if(Mt&&Ie.fromcurrent){var Pt=-1;for(Xe=0;Xe<xt.length;Xe++)if((st=xt[Xe]).type==="byname"&&st.name===Mt){Pt=Xe;break}if(Pt>0&&Pt<xt.length-1){var Rt=[];for(Xe=0;Xe<xt.length;Xe++)st=xt[Xe],(xt[Xe].type!=="byname"||Xe>Pt)&&Rt.push(st);xt=Rt}}xt.length>0?function(St){if(St.length!==0){for(var Ye=0;Ye<St.length;Ye++){var Ke;Ke=St[Ye].type==="byname"?r.computeFrame(ke,St[Ye].name):St[Ye].data;var Ve=Ce(Ye),$e=we(Ye);$e.duration=Math.min($e.duration,Ve.duration);var lt={frame:Ke,name:St[Ye].name,frameOpts:Ve,transitionOpts:$e};Ye===St.length-1&&(lt.onComplete=ze(Pe,2),lt.onInterrupt=Ue),Re._frameQueue.push(lt)}Ie.mode==="immediate"&&(Re._lastFrameAt=-1/0),Re._animationRaf||Ge()}}(xt):(ke.emit("plotly_animated"),Pe())})},A.addFrames=function(ke,Ee,Ie){if(ke=T.getGraphDiv(ke),Ee==null)return Promise.resolve();if(!T.isPlotDiv(ke))throw new Error("This element is not a Plotly plot: "+ke+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Re,Ne,ge,we,Ce=ke._transitionData._frames,ze=ke._transitionData._frameHash;if(!Array.isArray(Ee))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+Ee);var Pe=Ce.length+2*Ee.length,Ue=[],Ge={};for(Re=Ee.length-1;Re>=0;Re--)if(T.isPlainObject(Ee[Re])){var Xe=Ee[Re].name,st=(ze[Xe]||Ge[Xe]||{}).name,at=Ee[Re].name,vt=ze[st]||Ge[st];st&&at&&typeof at=="number"&&vt&&E<5&&(E++,T.warn('addFrames: overwriting frame "'+(ze[st]||Ge[st]).name+'" with a frame whose name of type "number" also equates to "'+st+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),E===5&&T.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Ge[Xe]={name:Xe},Ue.push({frame:r.supplyFrameDefaults(Ee[Re]),index:Ie&&Ie[Re]!==void 0&&Ie[Re]!==null?Ie[Re]:Pe+Re})}Ue.sort(function(St,Ye){return St.index>Ye.index?-1:St.index<Ye.index?1:0});var xt=[],gt=[],rt=Ce.length;for(Re=Ue.length-1;Re>=0;Re--){if(typeof(Ne=Ue[Re].frame).name=="number"&&T.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Ne.name)for(;ze[Ne.name="frame "+ke._transitionData._counter++];);if(ze[Ne.name]){for(ge=0;ge<Ce.length&&(Ce[ge]||{}).name!==Ne.name;ge++);xt.push({type:"replace",index:ge,value:Ne}),gt.unshift({type:"replace",index:ge,value:Ce[ge]})}else we=Math.max(0,Math.min(Ue[Re].index,rt)),xt.push({type:"insert",index:we,value:Ne}),gt.unshift({type:"delete",index:we}),rt++}var tt=r.modifyFrames,Mt=r.modifyFrames,Pt=[ke,gt],Rt=[ke,xt];return s&&s.add(ke,tt,Pt,Mt,Rt),r.modifyFrames(ke,xt)},A.deleteFrames=function(ke,Ee){if(ke=T.getGraphDiv(ke),!T.isPlotDiv(ke))throw new Error("This element is not a Plotly plot: "+ke);var Ie,Re,Ne=ke._transitionData._frames,ge=[],we=[];if(!Ee)for(Ee=[],Ie=0;Ie<Ne.length;Ie++)Ee.push(Ie);for((Ee=Ee.slice()).sort(),Ie=Ee.length-1;Ie>=0;Ie--)Re=Ee[Ie],ge.push({type:"delete",index:Re}),we.unshift({type:"insert",index:Re,value:Ne[Re]});var Ce=r.modifyFrames,ze=r.modifyFrames,Pe=[ke,we],Ue=[ke,ge];return s&&s.add(ke,Ce,Pe,ze,Ue),r.modifyFrames(ke,ge)},A.addTraces=function ke(Ee,Ie,Re){Ee=T.getGraphDiv(Ee);var Ne,ge,we=[],Ce=A.deleteTraces,ze=ke,Pe=[Ee,we],Ue=[Ee,Ie];for(function(Ge,Xe,st){var at,vt;if(!Array.isArray(Ge.data))throw new Error("gd.data must be an array.");if(Xe===void 0)throw new Error("traces must be defined.");for(Array.isArray(Xe)||(Xe=[Xe]),at=0;at<Xe.length;at++)if(typeof(vt=Xe[at])!="object"||Array.isArray(vt)||vt===null)throw new Error("all values in traces array must be non-array objects");if(st===void 0||Array.isArray(st)||(st=[st]),st!==void 0&&st.length!==Xe.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(Ee,Ie,Re),Array.isArray(Ie)||(Ie=[Ie]),Ie=Ie.map(function(Ge){return T.extendFlat({},Ge)}),b.cleanData(Ie),Ne=0;Ne<Ie.length;Ne++)Ee.data.push(Ie[Ne]);for(Ne=0;Ne<Ie.length;Ne++)we.push(-Ie.length+Ne);if(Re===void 0)return ge=A.redraw(Ee),s.add(Ee,Ce,Pe,ze,Ue),ge;Array.isArray(Re)||(Re=[Re]);try{V(Ee,we,Re)}catch(Ge){throw Ee.data.splice(Ee.data.length-Ie.length,Ie.length),Ge}return s.startSequence(Ee),s.add(Ee,Ce,Pe,ze,Ue),ge=A.moveTraces(Ee,we,Re),s.stopSequence(Ee),ge},A.deleteTraces=function ke(Ee,Ie){Ee=T.getGraphDiv(Ee);var Re,Ne,ge=[],we=A.addTraces,Ce=ke,ze=[Ee,ge,Ie],Pe=[Ee,Ie];if(Ie===void 0)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Ie)||(Ie=[Ie]),N(Ee,Ie,"indices"),(Ie=O(Ie,Ee.data.length-1)).sort(T.sorterDes),Re=0;Re<Ie.length;Re+=1)Ne=Ee.data.splice(Ie[Re],1)[0],ge.push(Ne);var Ue=A.redraw(Ee);return s.add(Ee,we,ze,Ce,Pe),Ue},A.extendTraces=function ke(Ee,Ie,Re,Ne){var ge=F(Ee=T.getGraphDiv(Ee),Ie,Re,Ne,function(ze,Pe,Ue){var Ge,Xe;if(T.isTypedArray(ze))if(Ue<0){var st=new ze.constructor(0),at=j(ze,Pe);Ue<0?(Ge=at,Xe=st):(Ge=st,Xe=at)}else if(Ge=new ze.constructor(Ue),Xe=new ze.constructor(ze.length+Pe.length-Ue),Ue===Pe.length)Ge.set(Pe),Xe.set(ze);else if(Ue<Pe.length){var vt=Pe.length-Ue;Ge.set(Pe.subarray(vt)),Xe.set(ze),Xe.set(Pe.subarray(0,vt),ze.length)}else{var xt=Ue-Pe.length,gt=ze.length-xt;Ge.set(ze.subarray(gt)),Ge.set(Pe,xt),Xe.set(ze.subarray(0,gt))}else Ge=ze.concat(Pe),Xe=Ue>=0&&Ue<Ge.length?Ge.splice(0,Ge.length-Ue):[];return[Ge,Xe]}),we=A.redraw(Ee),Ce=[Ee,ge.update,Re,ge.maxPoints];return s.add(Ee,A.prependTraces,Ce,ke,arguments),we},A.moveTraces=function ke(Ee,Ie,Re){var Ne,ge=[],we=[],Ce=ke,ze=ke,Pe=[Ee=T.getGraphDiv(Ee),Re,Ie],Ue=[Ee,Ie,Re];if(V(Ee,Ie,Re),Ie=Array.isArray(Ie)?Ie:[Ie],Re===void 0)for(Re=[],Ne=0;Ne<Ie.length;Ne++)Re.push(-Ie.length+Ne);for(Re=Array.isArray(Re)?Re:[Re],Ie=O(Ie,Ee.data.length-1),Re=O(Re,Ee.data.length-1),Ne=0;Ne<Ee.data.length;Ne++)Ie.indexOf(Ne)===-1&&ge.push(Ee.data[Ne]);for(Ne=0;Ne<Ie.length;Ne++)we.push({newIndex:Re[Ne],trace:Ee.data[Ie[Ne]]});for(we.sort(function(Xe,st){return Xe.newIndex-st.newIndex}),Ne=0;Ne<we.length;Ne+=1)ge.splice(we[Ne].newIndex,0,we[Ne].trace);Ee.data=ge;var Ge=A.redraw(Ee);return s.add(Ee,Ce,Pe,ze,Ue),Ge},A.prependTraces=function ke(Ee,Ie,Re,Ne){var ge=F(Ee=T.getGraphDiv(Ee),Ie,Re,Ne,function(ze,Pe,Ue){var Ge,Xe;if(T.isTypedArray(ze))if(Ue<=0){var st=new ze.constructor(0),at=j(Pe,ze);Ue<0?(Ge=at,Xe=st):(Ge=st,Xe=at)}else if(Ge=new ze.constructor(Ue),Xe=new ze.constructor(ze.length+Pe.length-Ue),Ue===Pe.length)Ge.set(Pe),Xe.set(ze);else if(Ue<Pe.length){var vt=Pe.length-Ue;Ge.set(Pe.subarray(0,vt)),Xe.set(Pe.subarray(vt)),Xe.set(ze,vt)}else{var xt=Ue-Pe.length;Ge.set(Pe),Ge.set(ze.subarray(0,xt),Pe.length),Xe.set(ze.subarray(xt))}else Ge=Pe.concat(ze),Xe=Ue>=0&&Ue<Ge.length?Ge.splice(Ue,Ge.length):[];return[Ge,Xe]}),we=A.redraw(Ee),Ce=[Ee,ge.update,Re,ge.maxPoints];return s.add(Ee,A.extendTraces,Ce,ke,arguments),we},A.newPlot=function(ke,Ee,Ie,Re){return ke=T.getGraphDiv(ke),r.cleanPlot([],{},ke._fullData||[],ke._fullLayout||{}),r.purge(ke),A._doPlot(ke,Ee,Ie,Re)},A._doPlot=function(ke,Ee,Ie,Re){var Ne;if(ke=T.getGraphDiv(ke),f.init(ke),T.isPlainObject(Ee)){var ge=Ee;Ee=ge.data,Ie=ge.layout,Re=ge.config,Ne=ge.frames}if(f.triggerHandler(ke,"plotly_beforeplot",[Ee,Ie,Re])===!1)return Promise.reject();Ee||Ie||T.isPlotDiv(ke)||T.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",ke),L(ke,Re),Ie||(Ie={}),v.select(ke).classed("js-plotly-plot",!0),l.makeTester(),Array.isArray(ke._promises)||(ke._promises=[]);var we=(ke.data||[]).length===0&&Array.isArray(Ee);Array.isArray(Ee)&&(b.cleanData(Ee),we?ke.data=Ee:ke.data.push.apply(ke.data,Ee),ke.empty=!1),ke.layout&&!we||(ke.layout=b.cleanLayout(Ie)),r.supplyDefaults(ke);var Ce=ke._fullLayout,ze=Ce._has("cartesian");Ce._replotting=!0,(we||Ce._shouldCreateBgLayer)&&(function(gt){var rt=v.select(gt),tt=gt._fullLayout;if(tt._calcInverseTransform=De,tt._calcInverseTransform(gt),tt._container=rt.selectAll(".plot-container").data([0]),tt._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),tt._paperdiv=tt._container.selectAll(".svg-container").data([0]),tt._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),tt._glcontainer=tt._paperdiv.selectAll(".gl-container").data([{}]),tt._glcontainer.enter().append("div").classed("gl-container",!0),tt._paperdiv.selectAll(".main-svg").remove(),tt._paperdiv.select(".modebar-container").remove(),tt._paper=tt._paperdiv.insert("svg",":first-child").classed("main-svg",!0),tt._toppaper=tt._paperdiv.append("svg").classed("main-svg",!0),tt._modebardiv=tt._paperdiv.append("div"),delete tt._modeBar,tt._hoverpaper=tt._paperdiv.append("svg").classed("main-svg",!0),!tt._uid){var Mt={};v.selectAll("defs").each(function(){this.id&&(Mt[this.id.split("-")[1]]=1)}),tt._uid=T.randstr(Mt)}tt._paperdiv.selectAll(".main-svg").attr(_.svgAttrs),tt._defs=tt._paper.append("defs").attr("id","defs-"+tt._uid),tt._clips=tt._defs.append("g").classed("clips",!0),tt._topdefs=tt._toppaper.append("defs").attr("id","topdefs-"+tt._uid),tt._topclips=tt._topdefs.append("g").classed("clips",!0),tt._bgLayer=tt._paper.append("g").classed("bglayer",!0),tt._draggers=tt._paper.append("g").classed("draglayer",!0);var Pt=tt._paper.append("g").classed("layer-below",!0);tt._imageLowerLayer=Pt.append("g").classed("imagelayer",!0),tt._shapeLowerLayer=Pt.append("g").classed("shapelayer",!0),tt._cartesianlayer=tt._paper.append("g").classed("cartesianlayer",!0),tt._polarlayer=tt._paper.append("g").classed("polarlayer",!0),tt._smithlayer=tt._paper.append("g").classed("smithlayer",!0),tt._ternarylayer=tt._paper.append("g").classed("ternarylayer",!0),tt._geolayer=tt._paper.append("g").classed("geolayer",!0),tt._funnelarealayer=tt._paper.append("g").classed("funnelarealayer",!0),tt._pielayer=tt._paper.append("g").classed("pielayer",!0),tt._iciclelayer=tt._paper.append("g").classed("iciclelayer",!0),tt._treemaplayer=tt._paper.append("g").classed("treemaplayer",!0),tt._sunburstlayer=tt._paper.append("g").classed("sunburstlayer",!0),tt._indicatorlayer=tt._toppaper.append("g").classed("indicatorlayer",!0),tt._glimages=tt._paper.append("g").classed("glimages",!0);var Rt=tt._toppaper.append("g").classed("layer-above",!0);tt._imageUpperLayer=Rt.append("g").classed("imagelayer",!0),tt._shapeUpperLayer=Rt.append("g").classed("shapelayer",!0),tt._selectionLayer=tt._toppaper.append("g").classed("selectionlayer",!0),tt._infolayer=tt._toppaper.append("g").classed("infolayer",!0),tt._menulayer=tt._toppaper.append("g").classed("menulayer",!0),tt._zoomlayer=tt._toppaper.append("g").classed("zoomlayer",!0),tt._hoverlayer=tt._hoverpaper.append("g").classed("hoverlayer",!0),tt._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),gt.emit("plotly_framework")}(ke),Ce._shouldCreateBgLayer&&delete Ce._shouldCreateBgLayer),l.initGradients(ke),l.initPatterns(ke),we&&i.saveShowSpikeInitial(ke);var Pe=!ke.calcdata||ke.calcdata.length!==(ke._fullData||[]).length;Pe&&r.doCalcdata(ke);for(var Ue=0;Ue<ke.calcdata.length;Ue++)ke.calcdata[Ue][0].trace=ke._fullData[Ue];ke._context.responsive?ke._responsiveChartHandler||(ke._responsiveChartHandler=function(){T.isHidden(ke)||r.resize(ke)},window.addEventListener("resize",ke._responsiveChartHandler)):T.clearResponsive(ke);var Ge=T.extendFlat({},Ce._size),Xe=0;function st(){if(r.clearAutoMarginIds(ke),y.drawMarginPushers(ke),i.allowAutoMargin(ke),ke._fullLayout.title.text&&ke._fullLayout.title.automargin&&r.allowAutoMargin(ke,"title.automargin"),Ce._has("pie"))for(var gt=ke._fullData,rt=0;rt<gt.length;rt++){var tt=gt[rt];tt.type==="pie"&&tt.automargin&&r.allowAutoMargin(ke,"pie."+tt.uid+".automargin")}return r.doAutoMargin(ke),r.previousPromises(ke)}function at(){ke._transitioning||(y.doAutoRangeAndConstraints(ke),we&&i.saveRangeInitial(ke),t.getComponentMethod("rangeslider","calcAutorange")(ke))}var vt=[r.previousPromises,function(){if(Ne)return A.addFrames(ke,Ne)},function gt(){for(var rt=Ce._basePlotModules,tt=0;tt<rt.length;tt++)rt[tt].drawFramework&&rt[tt].drawFramework(ke);!Ce._glcanvas&&Ce._has("gl")&&(Ce._glcanvas=Ce._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(St){return St.key}),Ce._glcanvas.enter().append("canvas").attr("class",function(St){return"gl-canvas gl-canvas-"+St.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Mt=ke._context.plotGlPixelRatio;if(Ce._glcanvas){Ce._glcanvas.attr("width",Ce.width*Mt).attr("height",Ce.height*Mt).style("width",Ce.width+"px").style("height",Ce.height+"px");var Pt=Ce._glcanvas.data()[0].regl;if(Pt&&(Math.floor(Ce.width*Mt)!==Pt._gl.drawingBufferWidth||Math.floor(Ce.height*Mt)!==Pt._gl.drawingBufferHeight)){var Rt="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!Xe)return T.log(Rt+" Clearing graph and plotting again."),r.cleanPlot([],{},ke._fullData,Ce),r.supplyDefaults(ke),Ce=ke._fullLayout,r.doCalcdata(ke),Xe++,gt();T.error(Rt)}}return Ce.modebar.orientation==="h"?Ce._modebardiv.style("height",null).style("width","100%"):Ce._modebardiv.style("width",null).style("height",Ce.height+"px"),r.previousPromises(ke)},st,function(){if(r.didMarginChange(Ge,Ce._size))return T.syncOrAsync([st,y.layoutStyles],ke)}];ze&&vt.push(function(){if(Pe)return T.syncOrAsync([t.getComponentMethod("shapes","calcAutorange"),t.getComponentMethod("annotations","calcAutorange"),at],ke);at()}),vt.push(y.layoutStyles),ze&&vt.push(function(){return i.draw(ke,we?"":"redraw")},function(gt){var rt=gt._fullLayout._insideTickLabelsUpdaterange;if(rt)return gt._fullLayout._insideTickLabelsUpdaterange=void 0,J(gt,rt).then(function(){i.saveRangeInitial(gt,!0)})}),vt.push(y.drawData,y.finalDraw,c,r.addLinks,r.rehover,r.redrag,r.reselect,r.doAutoMargin,r.previousPromises);var xt=T.syncOrAsync(vt,ke);return xt&&xt.then||(xt=Promise.resolve()),xt.then(function(){return k(ke),ke})},A.purge=function(ke){var Ee=(ke=T.getGraphDiv(ke))._fullLayout||{},Ie=ke._fullData||[];return r.cleanPlot([],{},Ie,Ee),r.purge(ke),f.purge(ke),Ee._container&&Ee._container.remove(),delete ke._context,ke},A.react=function(ke,Ee,Ie,Re){var Ne,ge;ke=T.getGraphDiv(ke),b.clearPromiseQueue(ke);var we=ke._fullData,Ce=ke._fullLayout;if(T.isPlotDiv(ke)&&we&&Ce){if(T.isPlainObject(Ee)){var ze=Ee;Ee=ze.data,Ie=ze.layout,Re=ze.config,Ne=ze.frames}var Pe=!1;if(Re){var Ue=T.extendDeep({},ke._context);ke._context=void 0,L(ke,Re),Pe=pe(Ue,ke._context)}ke.data=Ee||[],b.cleanData(ke.data),ke.layout=Ie||{},b.cleanLayout(ke.layout),function(it,Be,je,ot){var Ze,dt,mt,yt,ht,kt,_t,Et,Lt,Ot,Ft=ot._preGUI,Zt=[],Ht={},Ut={};for(Ze in Ft){if(ht=ye(Ze,xe)){if(Lt=ht.head,Ot=ht.tail,dt=ht.attr||Lt+".uirevision",(yt=(mt=x(ot,dt).get())&&me(dt,Be))&&yt===mt){if((kt=Ft[Ze])===null&&(kt=void 0),ce(Et=(_t=x(Be,Ze)).get(),kt)){Et===void 0&&Ot==="autorange"&&Zt.push(Lt),_t.set(z(x(ot,Ze).get()));continue}if(Ot==="autorange"||Ot.substr(0,6)==="range["){var Wt=Ft[Lt+".range[0]"],nn=Ft[Lt+".range[1]"],On=Ft[Lt+".autorange"];if(On||On===null&&Wt===null&&nn===null){if(!(Lt in Ht)){var kn=x(Be,Lt).get();Ht[Lt]=kn&&(kn.autorange||kn.autorange!==!1&&(!kn.range||kn.range.length!==2))}if(Ht[Lt]){_t.set(z(x(ot,Ze).get()));continue}}}}}else T.warn("unrecognized GUI edit: "+Ze);delete Ft[Ze],ht&&ht.tail.substr(0,6)==="range["&&(Ut[ht.head]=1)}for(var gn=0;gn<Zt.length;gn++){var Jt=Zt[gn];if(Ut[Jt]){var un=x(Be,Jt).get();un&&delete un.autorange}}var tn=ot._tracePreGUI;for(var hn in tn){var bn,wn=tn[hn],Pn=null;for(Ze in wn){if(!Pn){var Cn=Me(hn,je);if(Cn<0){delete tn[hn];break}var Mn=Ae(hn,it,(bn=je[Cn]._fullInput).index);if(Mn<0){delete tn[hn];break}Pn=it[Mn]}if(ht=ye(Ze,ve)){if(ht.attr?yt=(mt=x(ot,ht.attr).get())&&me(ht.attr,Be):(mt=bn.uirevision,(yt=Pn.uirevision)===void 0&&(yt=Be.uirevision)),yt&&yt===mt&&((kt=wn[Ze])===null&&(kt=void 0),ce(Et=(_t=x(Pn,Ze)).get(),kt))){_t.set(z(x(bn,Ze).get()));continue}}else T.warn("unrecognized GUI edit: "+Ze+" in trace uid "+hn);delete wn[Ze]}}}(ke.data,ke.layout,we,Ce),r.supplyDefaults(ke,{skipUpdateCalc:!0});var Ge=ke._fullData,Xe=ke._fullLayout,st=Xe.datarevision===void 0,at=Xe.transition,vt=function(it,Be,je,ot,Ze){var dt=M.layoutFlags();return dt.arrays={},dt.rangesAltered={},dt.nChanges=0,dt.nChangesAnim=0,ae(Be,je,[],{getValObject:function(mt){return o.getLayoutValObject(je,mt)},flags:dt,immutable:ot,transition:Ze,gd:it}),(dt.plot||dt.calc)&&(dt.layoutReplot=!0),Ze&&dt.nChanges&&dt.nChangesAnim&&(dt.anim=dt.nChanges===dt.nChangesAnim?"all":"some"),dt}(ke,Ce,Xe,st,at),xt=vt.newDataRevision,gt=function(it,Be,je,ot,Ze,dt){var mt=Be.length===je.length;if(!Ze&&!mt)return{fullReplot:!0,calc:!0};var yt,ht,kt=M.traceFlags();kt.arrays={},kt.nChanges=0,kt.nChangesAnim=0;var _t={getValObject:function(Lt){var Ot=o.getTraceValObject(ht,Lt);return!ht._module.animatable&&Ot.anim&&(Ot.anim=!1),Ot},flags:kt,immutable:ot,transition:Ze,newDataRevision:dt,gd:it},Et={};for(yt=0;yt<Be.length;yt++)if(je[yt]){if(ht=je[yt]._fullInput,r.hasMakesDataTransform(ht)&&(ht=je[yt]),Et[ht.uid])continue;Et[ht.uid]=1,ae(Be[yt]._fullInput,ht,[],_t)}return(kt.calc||kt.plot)&&(kt.fullReplot=!0),Ze&&kt.nChanges&&kt.nChangesAnim&&(kt.anim=kt.nChanges===kt.nChangesAnim&&mt?"all":"some"),kt}(ke,we,Ge,st,at,xt);if(de(ke)&&(vt.layoutReplot=!0),gt.calc||vt.calc){ke.calcdata=void 0;for(var rt=Object.getOwnPropertyNames(Xe),tt=0;tt<rt.length;tt++){var Mt=rt[tt],Pt=Mt.substring(0,5);if(Pt==="xaxis"||Pt==="yaxis"){var Rt=Xe[Mt]._emptyCategories;Rt&&Rt()}}}else r.supplyDefaultsUpdateCalc(ke.calcdata,Ge);var St=[];if(Ne&&(ke._transitionData={},r.createTransitionData(ke),St.push(function(){return A.addFrames(ke,Ne)})),Xe.transition&&!Pe&&(gt.anim||vt.anim))vt.ticks&&St.push(y.doTicksRelayout),r.doCalcdata(ke),y.doAutoRangeAndConstraints(ke),St.push(function(){return r.transitionFromReact(ke,gt,vt,Ce)});else if(gt.fullReplot||vt.layoutReplot||Pe)ke._fullLayout._skipDefaults=!0,St.push(A._doPlot);else{for(var Ye in vt.arrays){var Ke=vt.arrays[Ye];if(Ke.length){var Ve=t.getComponentMethod(Ye,"drawOne");if(Ve!==T.noop)for(var $e=0;$e<Ke.length;$e++)Ve(ke,Ke[$e]);else{var lt=t.getComponentMethod(Ye,"draw");if(lt===T.noop)throw new Error("cannot draw components: "+Ye);lt(ke)}}}St.push(r.previousPromises),gt.style&&St.push(y.doTraceStyle),(gt.colorbars||vt.colorbars)&&St.push(y.doColorBars),vt.legend&&St.push(y.doLegend),vt.layoutstyle&&St.push(y.layoutStyles),vt.axrange&&ne(St),vt.ticks&&St.push(y.doTicksRelayout),vt.modebar&&St.push(y.doModeBar),vt.camera&&St.push(y.doCamera),St.push(k)}St.push(r.rehover,r.redrag,r.reselect),(ge=T.syncOrAsync(St,ke))&&ge.then||(ge=Promise.resolve(ke))}else ge=A.newPlot(ke,Ee,Ie,Re);return ge.then(function(){return ke.emit("plotly_react",{data:Ee,layout:Ie}),ke})},A.redraw=function(ke){if(ke=T.getGraphDiv(ke),!T.isPlotDiv(ke))throw new Error("This element is not a Plotly plot: "+ke);return b.cleanData(ke.data),b.cleanLayout(ke.layout),ke.calcdata=void 0,A._doPlot(ke).then(function(){return ke.emit("plotly_redraw"),ke})},A.relayout=J,A.restyle=Z,A.setPlotConfig=function(ke){return T.extendFlat(g,ke)},A.update=be,A._guiRelayout=_e(J),A._guiRestyle=_e(Z),A._guiUpdate=_e(be),A._storeDirectGUIEdit=function(ke,Ee,Ie){for(var Re in Ie)U(Re,x(ke,Re).get(),Ie[Re],Ee)}},20556:function(C){"use strict";var A={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},e={};(function v(w,n){for(var T in w){var x=w[T];x.valType?n[T]=x.dflt:(n[T]||(n[T]={}),v(x,n[T]))}})(A,e),C.exports={configAttributes:A,dfltConfig:e}},73060:function(C,A,e){"use strict";var v=e(24040),w=e(3400),n=e(45464),T=e(64859),x=e(16672),f=e(85656),s=e(20556).configAttributes,t=e(67824),o=w.extendDeepAll,r=w.isPlainObject,i=w.isArrayOrTypedArray,a=w.nestedProperty,u=w.valObjectMeta,l="_isSubplotObj",d="_isLinkedToArray",c="_deprecated",_=[l,d,"_arrayAttrRegexps",c];function p(h,E,k){if(!h)return!1;if(h._isLinkedToArray){if(g(E[k]))k++;else if(k<E.length)return!1}for(;k<E.length;k++){var D=h[E[k]];if(!r(D)||(h=D,k===E.length-1))break;if(h._isLinkedToArray){if(!g(E[++k]))return!1}else if(h.valType==="info_array"){var P=E[++k];if(!g(P))return!1;var L=h.items;if(Array.isArray(L)){if(P>=L.length)return!1;if(h.dimensions===2){if(k++,E.length===k)return h;var O=E[k];if(!g(O))return!1;h=L[P][O]}else h=L[P]}else h=L}}return h}function g(h){return h===Math.round(h)&&h>=0}function m(){var h,E,k={};for(h in o(k,T),v.subplotsRegistry)if((E=v.subplotsRegistry[h]).layoutAttributes)if(Array.isArray(E.attr))for(var D=0;D<E.attr.length;D++)y(k,E,E.attr[D]);else y(k,E,E.attr==="subplot"?E.name:E.attr);for(h in v.componentsRegistry){var P=(E=v.componentsRegistry[h]).schema;if(P&&(P.subplots||P.layout)){var L=P.subplots;if(L&&L.xaxis&&!L.yaxis)for(var O in L.xaxis)delete k.yaxis[O];delete k.xaxis.shift,delete k.xaxis.autoshift}else E.name==="colorscale"?o(k,E.layoutAttributes):E.layoutAttributes&&M(k,E.layoutAttributes,E.name)}return{layoutAttributes:b(k)}}function b(h){return function(E){A.crawl(E,function(k,D,P){A.isValObject(k)?k.arrayOk!==!0&&k.valType!=="data_array"||(P[D+"src"]={valType:"string",editType:"none"}):r(k)&&(k.role="object")})}(h),function(E){A.crawl(E,function(k,D,P){if(k){var L=k[d];L&&(delete k[d],P[D]={items:{}},P[D].items[L]=k,P[D].role="object")}})}(h),function(E){(function k(D){for(var P in D)if(r(D[P]))k(D[P]);else if(Array.isArray(D[P]))for(var L=0;L<D[P].length;L++)k(D[P][L]);else D[P]instanceof RegExp&&(D[P]=D[P].toString())})(E)}(h),h}function y(h,E,k){var D=a(h,k),P=o({},E.layoutAttributes);P[l]=!0,D.set(P)}function M(h,E,k){var D=a(h,k);D.set(o(D.get()||{},E))}A.IS_SUBPLOT_OBJ=l,A.IS_LINKED_TO_ARRAY=d,A.DEPRECATED=c,A.UNDERSCORE_ATTRS=_,A.get=function(){var h={};v.allTypes.forEach(function(D){h[D]=function(P){var L,O;O=(L=v.modules[P]._module).basePlotModule;var N={type:null},V=o({},n),F=o({},L.attributes);A.crawl(F,function(z,H,U,re,ee){a(V,ee).set(void 0),z===void 0&&a(F,ee).set(void 0)}),o(N,V),v.traceIs(P,"noOpacity")&&delete N.opacity,v.traceIs(P,"showLegend")||(delete N.showlegend,delete N.legendgroup),v.traceIs(P,"noHover")&&(delete N.hoverinfo,delete N.hoverlabel),L.selectPoints||delete N.selectedpoints,o(N,F),O.attributes&&o(N,O.attributes),N.type=P;var j={meta:L.meta||{},categories:L.categories||{},animatable:!!L.animatable,type:P,attributes:b(N)};if(L.layoutAttributes){var Z={};o(Z,L.layoutAttributes),j.layoutAttributes=b(Z)}return L.animatable||A.crawl(j,function(z){A.isValObject(z)&&"anim"in z&&delete z.anim}),j}(D)});var E,k={};return Object.keys(v.transformsRegistry).forEach(function(D){k[D]=function(P){var L=v.transformsRegistry[P],O=o({},L.attributes);return Object.keys(v.componentsRegistry).forEach(function(N){var V=v.componentsRegistry[N];V.schema&&V.schema.transforms&&V.schema.transforms[P]&&Object.keys(V.schema.transforms[P]).forEach(function(F){M(O,V.schema.transforms[P][F],F)})}),{attributes:b(O)}}(D)}),{defs:{valObjects:u,metaKeys:_.concat(["description","role","editType","impliedEdits"]),editType:{traces:t.traces,layout:t.layout},impliedEdits:{}},traces:h,layout:m(),transforms:k,frames:(E={frames:o({},x)},b(E),E.frames),animation:b(f),config:b(s)}},A.crawl=function(h,E,k,D){var P=k||0;D=D||"",Object.keys(h).forEach(function(L){var O=h[L];if(_.indexOf(L)===-1){var N=(D?D+".":"")+L;E(O,L,h,P,N),A.isValObject(O)||r(O)&&L!=="impliedEdits"&&A.crawl(O,E,P+1,N)}})},A.isValObject=function(h){return h&&h.valType!==void 0},A.findArrayAttributes=function(h){var E,k,D=[],P=[],L=[];function O(z,H,U,re){P=P.slice(0,re).concat([H]),L=L.slice(0,re).concat([z&&z._isLinkedToArray]),z&&(z.valType==="data_array"||z.arrayOk===!0)&&(P[re-1]!=="colorbar"||H!=="ticktext"&&H!=="tickvals")&&N(E,0,"")}function N(z,H,U){var re=z[P[H]],ee=U+P[H];if(H===P.length-1)i(re)&&D.push(k+ee);else if(L[H]){if(Array.isArray(re))for(var J=0;J<re.length;J++)r(re[J])&&N(re[J],H+1,ee+"["+J+"].")}else r(re)&&N(re,H+1,ee+".")}E=h,k="",A.crawl(n,O),h._module&&h._module.attributes&&A.crawl(h._module.attributes,O);var V=h.transforms;if(V)for(var F=0;F<V.length;F++){var j=V[F],Z=j._module;Z&&(k="transforms["+F+"].",E=j,A.crawl(Z.attributes,O))}return D},A.getTraceValObject=function(h,E){var k,D,P=E[0],L=1;if(P==="transforms"){if(E.length===1)return n.transforms;var O=h.transforms;if(!Array.isArray(O)||!O.length)return!1;var N=E[1];if(!g(N)||N>=O.length)return!1;D=(k=(v.transformsRegistry[O[N].type]||{}).attributes)&&k[E[2]],L=3}else{var V=h._module;if(V||(V=(v.modules[h.type||n.type.dflt]||{})._module),!V)return!1;if(!(D=(k=V.attributes)&&k[P])){var F=V.basePlotModule;F&&F.attributes&&(D=F.attributes[P])}D||(D=n[P])}return p(D,E,L)},A.getLayoutValObject=function(h,E){var k=function(D,P){var L,O,N,V,F=D._basePlotModules;if(F){var j;for(L=0;L<F.length;L++){if((N=F[L]).attrRegex&&N.attrRegex.test(P)){if(N.layoutAttrOverrides)return N.layoutAttrOverrides;!j&&N.layoutAttributes&&(j=N.layoutAttributes)}var Z=N.baseLayoutAttrOverrides;if(Z&&P in Z)return Z[P]}if(j)return j}var z=D._modules;if(z){for(L=0;L<z.length;L++)if((V=z[L].layoutAttributes)&&P in V)return V[P]}for(O in v.componentsRegistry){if((N=v.componentsRegistry[O]).name==="colorscale"&&P.indexOf("coloraxis")===0)return N.layoutAttributes[P];if(!N.schema&&P===N.name)return N.layoutAttributes}return P in T&&T[P]}(h,E[0]);return p(k,E,1)}},31780:function(C,A,e){"use strict";var v=e(3400),w=e(45464),n="templateitemname",T={name:{valType:"string",editType:"none"}};function x(s){return s&&typeof s=="string"}function f(s){var t=s.length-1;return s.charAt(t)!=="s"&&v.warn("bad argument to arrayDefaultKey: "+s),s.substr(0,s.length-1)+"defaults"}T[n]={valType:"string",editType:"calc"},A.templatedArray=function(s,t){return t._isLinkedToArray=s,t.name=T.name,t[n]=T[n],t},A.traceTemplater=function(s){var t,o,r={};for(t in s)o=s[t],Array.isArray(o)&&o.length&&(r[t]=0);return{newTrace:function(i){var a={type:t=v.coerce(i,{},w,"type"),_template:null};if(t in r){o=s[t];var u=r[t]%o.length;r[t]++,a._template=o[u]}return a}}},A.newContainer=function(s,t,o){var r=s._template,i=r&&(r[t]||o&&r[o]);return v.isPlainObject(i)||(i=null),s[t]={_template:i}},A.arrayTemplater=function(s,t,o){var r=s._template,i=r&&r[f(t)],a=r&&r[t];Array.isArray(a)&&a.length||(a=[]);var u={};return{newItem:function(l){var d={name:l.name,_input:l},c=d[n]=l[n];if(!x(c))return d._template=i,d;for(var _=0;_<a.length;_++){var p=a[_];if(p.name===c)return u[c]=1,d._template=p,d}return d[o]=l[o]||!1,d._template=!1,d},defaultItems:function(){for(var l=[],d=0;d<a.length;d++){var c=a[d],_=c.name;if(x(_)&&!u[_]){var p={_template:c,name:_,_input:{_templateitemname:_}};p[n]=c[n],l.push(p),u[_]=1}}return l}}},A.arrayDefaultKey=f,A.arrayEditor=function(s,t,o){var r=(v.nestedProperty(s,t).get()||[]).length,i=o._index,a=i>=r&&(o._input||{})._templateitemname;a&&(i=r);var u,l=t+"["+i+"]";function d(){u={},a&&(u[l]={},u[l][n]=a)}function c(p,g){a?v.nestedProperty(u[l],p).set(g):u[l+"."+p]=g}function _(){var p=u;return d(),p}return d(),{modifyBase:function(p,g){u[p]=g},modifyItem:c,getUpdateObj:_,applyUpdate:function(p,g){p&&c(p,g);var m=_();for(var b in m)v.nestedProperty(s,b).set(m[b])}}}},39172:function(C,A,e){"use strict";var v=e(33428),w=e(24040),n=e(7316),T=e(3400),x=e(72736),f=e(73696),s=e(76308),t=e(43616),o=e(81668),r=e(45460),i=e(54460),a=e(84284),u=e(71888),l=u.enforce,d=u.clean,c=e(19280).doAutoRange,_="start";function p(M,h,E){for(var k=0;k<E.length;k++){var D=E[k][0],P=E[k][1];if(!(D[0]>=M[1]||D[1]<=M[0])&&P[0]<h[1]&&P[1]>h[0])return!0}return!1}function g(M){var h,E,k,D,P,L,O=M._fullLayout,N=O._size,V=N.p,F=i.list(M,"",!0);if(O._paperdiv.style({width:M._context.responsive&&O.autosize&&!M._context._hasZeroWidth&&!M.layout.width?"100%":O.width+"px",height:M._context.responsive&&O.autosize&&!M._context._hasZeroHeight&&!M.layout.height?"100%":O.height+"px"}).selectAll(".main-svg").call(t.setSize,O.width,O.height),M._context.setBackground(M,O.paper_bgcolor),A.drawMainTitle(M),r.manage(M),!O._has("cartesian"))return n.previousPromises(M);function j(Pe,Ue,Ge){var Xe=Pe._lw/2;return Pe._id.charAt(0)==="x"?Ue?Ge==="top"?Ue._offset-V-Xe:Ue._offset+Ue._length+V+Xe:N.t+N.h*(1-(Pe.position||0))+Xe%1:Ue?Ge==="right"?Ue._offset+Ue._length+V+Xe:Ue._offset-V-Xe:N.l+N.w*(Pe.position||0)+Xe%1}for(h=0;h<F.length;h++){var Z=(D=F[h])._anchorAxis;D._linepositions={},D._lw=t.crispRound(M,D.linewidth,1),D._mainLinePosition=j(D,Z,D.side),D._mainMirrorPosition=D.mirror&&Z?j(D,Z,a.OPPOSITE_SIDE[D.side]):null}var z=[],H=[],U=[],re=s.opacity(O.paper_bgcolor)===1&&s.opacity(O.plot_bgcolor)===1&&O.paper_bgcolor===O.plot_bgcolor;for(E in O._plots)if((k=O._plots[E]).mainplot)k.bg&&k.bg.remove(),k.bg=void 0;else{var ee=k.xaxis.domain,J=k.yaxis.domain,Q=k.plotgroup;if(p(ee,J,U)){var ne=Q.node(),K=k.bg=T.ensureSingle(Q,"rect","bg");ne.insertBefore(K.node(),ne.childNodes[0]),H.push(E)}else Q.select("rect.bg").remove(),U.push([ee,J]),re||(z.push(E),H.push(E))}var oe,le,se,de,be,_e,xe,ve,ye,me,Me,Ae,ce,ae=O._bgLayer.selectAll(".bg").data(z);for(ae.enter().append("rect").classed("bg",!0),ae.exit().remove(),ae.each(function(Pe){O._plots[Pe].bg=v.select(this)}),h=0;h<H.length;h++)k=O._plots[H[h]],P=k.xaxis,L=k.yaxis,k.bg&&P._offset!==void 0&&L._offset!==void 0&&k.bg.call(t.setRect,P._offset-V,L._offset-V,P._length+2*V,L._length+2*V).call(s.fill,O.plot_bgcolor).style("stroke-width",0);if(!O._hasOnlyLargeSploms)for(E in O._plots){k=O._plots[E],P=k.xaxis,L=k.yaxis;var pe,De,ke=k.clipId="clip"+O._uid+E+"plot",Ee=T.ensureSingleById(O._clips,"clipPath",ke,function(Pe){Pe.classed("plotclip",!0).append("rect")});k.clipRect=Ee.select("rect").attr({width:P._length,height:L._length}),t.setTranslate(k.plot,P._offset,L._offset),k._hasClipOnAxisFalse?(pe=null,De=ke):(pe=ke,De=null),t.setClipUrl(k.plot,pe,M),k.layerClipId=De}function Ie(Pe){return"M"+oe+","+Pe+"H"+le}function Re(Pe){return"M"+P._offset+","+Pe+"h"+P._length}function Ne(Pe){return"M"+Pe+","+ve+"V"+xe}function ge(Pe){return L._shift!==void 0&&(Pe+=L._shift),"M"+Pe+","+L._offset+"v"+L._length}function we(Pe,Ue,Ge){if(!Pe.showline||E!==Pe._mainSubplot)return"";if(!Pe._anchorAxis)return Ge(Pe._mainLinePosition);var Xe=Ue(Pe._mainLinePosition);return Pe.mirror&&(Xe+=Ue(Pe._mainMirrorPosition)),Xe}for(E in O._plots){k=O._plots[E],P=k.xaxis,L=k.yaxis;var Ce="M0,0";m(P,E)&&(be=y(P,"left",L,F),oe=P._offset-(be?V+be:0),_e=y(P,"right",L,F),le=P._offset+P._length+(_e?V+_e:0),se=j(P,L,"bottom"),de=j(P,L,"top"),!(ce=!P._anchorAxis||E!==P._mainSubplot)||P.mirror!=="allticks"&&P.mirror!=="all"||(P._linepositions[E]=[se,de]),Ce=we(P,Ie,Re),ce&&P.showline&&(P.mirror==="all"||P.mirror==="allticks")&&(Ce+=Ie(se)+Ie(de)),k.xlines.style("stroke-width",P._lw+"px").call(s.stroke,P.showline?P.linecolor:"rgba(0,0,0,0)")),k.xlines.attr("d",Ce);var ze="M0,0";m(L,E)&&(Me=y(L,"bottom",P,F),xe=L._offset+L._length+(Me?V:0),Ae=y(L,"top",P,F),ve=L._offset-(Ae?V:0),ye=j(L,P,"left"),me=j(L,P,"right"),!(ce=!L._anchorAxis||E!==L._mainSubplot)||L.mirror!=="allticks"&&L.mirror!=="all"||(L._linepositions[E]=[ye,me]),ze=we(L,Ne,ge),ce&&L.showline&&(L.mirror==="all"||L.mirror==="allticks")&&(ze+=Ne(ye)+Ne(me)),k.ylines.style("stroke-width",L._lw+"px").call(s.stroke,L.showline?L.linecolor:"rgba(0,0,0,0)")),k.ylines.attr("d",ze)}return i.makeClipPaths(M),n.previousPromises(M)}function m(M,h){return(M.ticks||M.showline)&&(h===M._mainSubplot||M.mirror==="all"||M.mirror==="allticks")}function b(M,h,E){if(!E.showline||!E._lw)return!1;if(E.mirror==="all"||E.mirror==="allticks")return!0;var k=E._anchorAxis;if(!k)return!1;var D=a.FROM_BL[h];return E.side===h?k.domain[D]===M.domain[D]:E.mirror&&k.domain[1-D]===M.domain[1-D]}function y(M,h,E,k){if(b(M,h,E))return E._lw;for(var D=0;D<k.length;D++){var P=k[D];if(P._mainAxis===E._mainAxis&&b(M,h,P))return P._lw}return 0}A.layoutStyles=function(M){return T.syncOrAsync([n.doAutoMargin,g],M)},A.drawMainTitle=function(M){var h,E=M._fullLayout.title,k=M._fullLayout,D=function(z){var H=z.title,U="middle";return T.isRightAnchor(H)?U="end":T.isLeftAnchor(H)&&(U=_),U}(k),P=function(z){var H=z.title,U="0em";return T.isTopAnchor(H)?U=a.CAP_SHIFT+"em":T.isMiddleAnchor(H)&&(U=a.MID_SHIFT+"em"),U}(k),L=function(z,H){var U=z.title,re=z._size,ee=0;return H!=="0em"&&H?H===a.CAP_SHIFT+"em"&&(ee=U.pad.t):ee=-U.pad.b,U.y==="auto"?re.t/2:U.yref==="paper"?re.t+re.h-re.h*U.y+ee:z.height-z.height*U.y+ee}(k,P),O=function(z,H){var U=z.title,re=z._size,ee=0;return H===_?ee=U.pad.l:H==="end"&&(ee=-U.pad.r),U.xref==="paper"?re.l+re.w*U.x+ee:z.width*U.x+ee}(k,D);if(o.draw(M,"gtitle",{propContainer:k,propName:"title.text",placeholder:k._dfltTitle.plot,attributes:{x:O,y:L,"text-anchor":D,dy:P}}),E.text&&E.automargin){var N=v.selectAll(".gtitle"),V=t.bBox(N.node()).height,F=function(z,H,U){var re=H.y,ee=H.yanchor,J=re>.5?"t":"b",Q=z._fullLayout.margin[J],ne=0;return H.yref==="paper"?ne=U+H.pad.t+H.pad.b:H.yref==="container"&&(ne=function(K,oe,le,se,de){var be=0;return le==="middle"&&(be+=de/2),K==="t"?(le==="top"&&(be+=de),be+=se-oe*se):(le==="bottom"&&(be+=de),be+=oe*se),be}(J,re,ee,z._fullLayout.height,U)+H.pad.t+H.pad.b),ne>Q?ne:0}(M,E,V);if(F>0){(function(z,H,U,re){var ee="title.automargin",J=z._fullLayout.title,Q=J.y>.5?"t":"b",ne={x:J.x,y:J.y,t:0,b:0},K={};J.yref==="paper"&&function(oe,le,se,de,be){var _e=le.yref==="paper"?oe._fullLayout._size.h:oe._fullLayout.height,xe=T.isTopAnchor(le)?de:de-be,ve=se==="b"?_e-xe:xe;return!(T.isTopAnchor(le)&&se==="t"||T.isBottomAnchor(le)&&se==="b")&&ve<be}(z,J,Q,H,re)?ne[Q]=U:J.yref==="container"&&(K[Q]=U,z._fullLayout._reservedMargin[ee]=K),n.allowAutoMargin(z,ee),n.autoMargin(z,ee,ne)})(M,L,F,V),N.attr({x:O,y:L,"text-anchor":D,dy:(h=E.yanchor,h==="top"?a.CAP_SHIFT+.3+"em":h==="bottom"?"-0.3em":a.MID_SHIFT+"em")}).call(x.positionText,O,L);var j=(E.text.match(x.BR_TAG_ALL)||[]).length;if(j){var Z=a.LINE_SPACING*j+a.MID_SHIFT;E.y===0&&(Z=-Z),N.selectAll(".line").each(function(){var z=+this.getAttribute("dy").slice(0,-2)-Z+"em";this.setAttribute("dy",z)})}}}},A.doTraceStyle=function(M){var h,E=M.calcdata,k=[];for(h=0;h<E.length;h++){var D=E[h],P=D[0]||{},L=P.trace||{},O=L._module||{},N=O.arraysToCalcdata;N&&N(D,L);var V=O.editStyle;V&&k.push({fn:V,cd0:P})}if(k.length){for(h=0;h<k.length;h++){var F=k[h];F.fn(M,F.cd0)}f(M),A.redrawReglTraces(M)}return n.style(M),w.getComponentMethod("legend","draw")(M),n.previousPromises(M)},A.doColorBars=function(M){return w.getComponentMethod("colorbar","draw")(M),n.previousPromises(M)},A.layoutReplot=function(M){var h=M.layout;return M.layout=void 0,w.call("_doPlot",M,"",h)},A.doLegend=function(M){return w.getComponentMethod("legend","draw")(M),n.previousPromises(M)},A.doTicksRelayout=function(M){return i.draw(M,"redraw"),M._fullLayout._hasOnlyLargeSploms&&(w.subplotsRegistry.splom.updateGrid(M),f(M),A.redrawReglTraces(M)),A.drawMainTitle(M),n.previousPromises(M)},A.doModeBar=function(M){var h=M._fullLayout;r.manage(M);for(var E=0;E<h._basePlotModules.length;E++){var k=h._basePlotModules[E].updateFx;k&&k(M)}return n.previousPromises(M)},A.doCamera=function(M){for(var h=M._fullLayout,E=h._subplots.gl3d,k=0;k<E.length;k++){var D=h[E[k]];D._scene.setViewport(D)}},A.drawData=function(M){var h=M._fullLayout;f(M);for(var E=h._basePlotModules,k=0;k<E.length;k++)E[k].plot(M);return A.redrawReglTraces(M),n.style(M),w.getComponentMethod("selections","draw")(M),w.getComponentMethod("shapes","draw")(M),w.getComponentMethod("annotations","draw")(M),w.getComponentMethod("images","draw")(M),h._replotting=!1,n.previousPromises(M)},A.redrawReglTraces=function(M){var h=M._fullLayout;if(h._has("regl")){var E,k,D=M._fullData,P=[],L=[];for(h._hasOnlyLargeSploms&&h._splomGrid.draw(),E=0;E<D.length;E++){var O=D[E];O.visible===!0&&O._length!==0&&(O.type==="splom"?h._splomScenes[O.uid].draw():O.type==="scattergl"?T.pushUnique(P,O.xaxis+O.yaxis):O.type==="scatterpolargl"&&T.pushUnique(L,O.subplot))}for(E=0;E<P.length;E++)(k=h._plots[P[E]])._scene&&k._scene.draw();for(E=0;E<L.length;E++)(k=h[L[E]]._subplot)._scene&&k._scene.draw()}},A.doAutoRangeAndConstraints=function(M){for(var h,E=i.list(M,"",!0),k={},D=0;D<E.length;D++)if(!k[(h=E[D])._id]){k[h._id]=1,d(M,h),c(M,h);var P=h._matchGroup;if(P)for(var L in P){var O=i.getFromId(M,L);c(M,O,h.range),k[L]=1}}l(M)},A.finalDraw=function(M){w.getComponentMethod("rangeslider","draw")(M),w.getComponentMethod("rangeselector","draw")(M)},A.drawMarginPushers=function(M){w.getComponentMethod("legend","draw")(M),w.getComponentMethod("rangeselector","draw")(M),w.getComponentMethod("sliders","draw")(M),w.getComponentMethod("updatemenus","draw")(M),w.getComponentMethod("colorbar","draw")(M)}},94828:function(C,A,e){"use strict";var v=e(3400),w=v.isPlainObject,n=e(73060),T=e(7316),x=e(45464),f=e(31780),s=e(20556).dfltConfig;function t(c,_){c=v.extendDeep({},c);var p,g,m=Object.keys(c).sort();function b(k,D,P){if(w(D)&&w(k))t(k,D);else if(Array.isArray(D)&&Array.isArray(k)){var L=f.arrayTemplater({_template:c},P);for(g=0;g<D.length;g++){var O=D[g],N=L.newItem(O)._template;N&&t(N,O)}var V=L.defaultItems();for(g=0;g<V.length;g++)D.push(V[g]._template);for(g=0;g<D.length;g++)delete D[g].templateitemname}}for(p=0;p<m.length;p++){var y=m[p],M=c[y];if(y in _?b(M,_[y],y):_[y]=M,o(y)===y)for(var h in _){var E=o(h);h===E||E!==y||h in c||b(M,_[h],y)}}}function o(c){return c.replace(/[0-9]+$/,"")}function r(c,_,p,g,m){var b=m&&p(m);for(var y in c){var M=c[y],h=u(c,y,g),E=u(c,y,m),k=p(E);if(!k){var D=o(y);D!==y&&(k=p(E=u(c,D,m)))}if(!(b&&b===k||!k||k._noTemplating||k.valType==="data_array"||k.arrayOk&&Array.isArray(M)))if(!k.valType&&w(M))r(M,_,p,h,E);else if(k._isLinkedToArray&&Array.isArray(M))for(var P=!1,L=0,O={},N=0;N<M.length;N++){var V=M[N];if(w(V)){var F=V.name;if(F)O[F]||(r(V,_,p,u(M,L,h),u(M,L,E)),L++,O[F]=1);else if(!P){var j=u(c,f.arrayDefaultKey(y),g),Z=u(M,L,h);r(V,_,p,Z,u(M,L,E));var z=v.nestedProperty(_,Z);v.nestedProperty(_,j).set(z.get()),z.set(null),P=!0}}}else v.nestedProperty(_,h).set(M)}}function i(c,_){return n.getLayoutValObject(c,v.nestedProperty({},_).parts)}function a(c,_){return n.getTraceValObject(c,v.nestedProperty({},_).parts)}function u(c,_,p){return p?Array.isArray(c)?p+"["+_+"]":p+"."+_:_}function l(c){for(var _=0;_<c.length;_++)if(w(c[_]))return!0}function d(c){var _;switch(c.code){case"data":_="The template has no key data.";break;case"layout":_="The template has no key layout.";break;case"missing":_=c.path?"There are no templates for item "+c.path+" with name "+c.templateitemname:"There are no templates for trace "+c.index+", of type "+c.traceType+".";break;case"unused":_=c.path?"The template item at "+c.path+" was not used in constructing the plot.":c.dataCount?"Some of the templates of type "+c.traceType+" were not used. The template has "+c.templateCount+" traces, the data only has "+c.dataCount+" of this type.":"The template has "+c.templateCount+" traces of type "+c.traceType+" but there are none in the data.";break;case"reused":_="Some of the templates of type "+c.traceType+" were used more than once. The template has "+c.templateCount+" traces, the data has "+c.dataCount+" of this type."}return c.msg=_,c}A.makeTemplate=function(c){c=v.isPlainObject(c)?c:v.getGraphDiv(c),c=v.extendDeep({_context:s},{data:c.data,layout:c.layout}),T.supplyDefaults(c);var _=c.data||[],p=c.layout||{};p._basePlotModules=c._fullLayout._basePlotModules,p._modules=c._fullLayout._modules;var g={data:{},layout:{}};_.forEach(function(L){var O={};r(L,O,a.bind(null,L));var N=v.coerce(L,{},x,"type"),V=g.data[N];V||(V=g.data[N]=[]),V.push(O)}),r(p,g.layout,i.bind(null,p)),delete g.layout.template;var m=p.template;if(w(m)){var b,y,M,h,E,k,D=m.layout;w(D)&&t(D,g.layout);var P=m.data;if(w(P)){for(y in g.data)if(M=P[y],Array.isArray(M)){for(k=(E=g.data[y]).length,h=M.length,b=0;b<k;b++)t(M[b%h],E[b]);for(b=k;b<h;b++)E.push(v.extendDeep({},M[b]))}for(y in P)y in g.data||(g.data[y]=v.extendDeep([],P[y]))}}return g},A.validateTemplate=function(c,_){var p=v.extendDeep({},{_context:s,data:c.data,layout:c.layout}),g=p.layout||{};w(_)||(_=g.template||{});var m=_.layout,b=_.data,y=[];p.layout=g,p.layout.template=_,T.supplyDefaults(p);var M=p._fullLayout,h=p._fullData,E={};if(w(m)?(function V(F,j){for(var Z in F)if(Z.charAt(0)!=="_"&&w(F[Z])){var z,H=o(Z),U=[];for(z=0;z<j.length;z++)U.push(u(F,Z,j[z])),H!==Z&&U.push(u(F,H,j[z]));for(z=0;z<U.length;z++)E[U[z]]=1;V(F[Z],U)}}(M,["layout"]),function V(F,j){for(var Z in F)if(Z.indexOf("defaults")===-1&&w(F[Z])){var z=u(F,Z,j);E[z]?V(F[Z],z):y.push({code:"unused",path:z})}}(m,"layout")):y.push({code:"layout"}),w(b)){for(var k,D={},P=0;P<h.length;P++){var L=h[P];D[k=L.type]=(D[k]||0)+1,L._fullInput._template||y.push({code:"missing",index:L._fullInput.index,traceType:k})}for(k in b){var O=b[k].length,N=D[k]||0;O>N?y.push({code:"unused",traceType:k,templateCount:O,dataCount:N}):N>O&&y.push({code:"reused",traceType:k,templateCount:O,dataCount:N})}}else y.push({code:"data"});if(function V(F,j){for(var Z in F)if(Z.charAt(0)!=="_"){var z=F[Z],H=u(F,Z,j);w(z)?(Array.isArray(F)&&z._template===!1&&z.templateitemname&&y.push({code:"missing",path:H,templateitemname:z.templateitemname}),V(z,H)):Array.isArray(z)&&l(z)&&V(z,H)}}({data:h,layout:M},""),y.length)return y.map(d)}},67024:function(C,A,e){"use strict";var v=e(38248),w=e(36424),n=e(7316),T=e(3400),x=e(81792),f=e(37164),s=e(63268),t=e(25788).version,o={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};C.exports=function(r,i){var a,u,l,d;function c(N){return!(N in i)||T.validate(i[N],o[N])}if(i=i||{},T.isPlainObject(r)?(a=r.data||[],u=r.layout||{},l=r.config||{},d={}):(r=T.getGraphDiv(r),a=T.extendDeep([],r.data),u=T.extendDeep({},r.layout),l=r._context,d=r._fullLayout||{}),!c("width")&&i.width!==null||!c("height")&&i.height!==null)throw new Error("Height and width should be pixel values.");if(!c("format"))throw new Error("Export format is not "+T.join2(o.format.values,", "," or ")+".");var _={};function p(N,V){return T.coerce(i,_,o,N,V)}var g=p("format"),m=p("width"),b=p("height"),y=p("scale"),M=p("setBackground"),h=p("imageDataOnly"),E=document.createElement("div");E.style.position="absolute",E.style.left="-5000px",document.body.appendChild(E);var k=T.extendFlat({},u);m?k.width=m:i.width===null&&v(d.width)&&(k.width=d.width),b?k.height=b:i.height===null&&v(d.height)&&(k.height=d.height);var D=T.extendFlat({},l,{_exportedPlot:!0,staticPlot:!0,setBackground:M}),P=x.getRedrawFunc(E);function L(){return new Promise(function(N){setTimeout(N,x.getDelay(E._fullLayout))})}function O(){return new Promise(function(N,V){var F=f(E,g,y),j=E._fullLayout.width,Z=E._fullLayout.height;function z(){w.purge(E),document.body.removeChild(E)}if(g==="full-json"){var H=n.graphJson(E,!1,"keepdata","object",!0,!0);return H.version=t,H=JSON.stringify(H),z(),N(h?H:x.encodeJSON(H))}if(z(),g==="svg")return N(h?F:x.encodeSVG(F));var U=document.createElement("canvas");U.id=T.randstr(),s({format:g,width:j,height:Z,scale:y,canvas:U,svg:F,promise:!0}).then(N).catch(V)})}return new Promise(function(N,V){w.newPlot(E,a,k,D).then(P).then(L).then(O).then(function(F){N(function(j){return h?j.replace(x.IMAGE_URL_PREFIX,""):j}(F))}).catch(function(F){V(F)})})}},21480:function(C,A,e){"use strict";var v=e(3400),w=e(7316),n=e(73060),T=e(20556).dfltConfig,x=v.isPlainObject,f=Array.isArray,s=v.isArrayOrTypedArray;function t(c,_,p,g,m,b){b=b||[];for(var y=Object.keys(c),M=0;M<y.length;M++){var h=y[M];if(h!=="transforms"){var E=b.slice();E.push(h);var k=c[h],D=_[h],P=u(p,h),L=(P||{}).valType,O=L==="info_array",N=L==="colorscale",V=(P||{}).items;if(a(p,h))if(x(k)&&x(D)&&L!=="any")t(k,D,P,g,m,E);else if(O&&f(k)){k.length>D.length&&g.push(i("unused",m,E.concat(D.length)));var F,j,Z,z,H,U=D.length,re=Array.isArray(V);if(re&&(U=Math.min(U,V.length)),P.dimensions===2)for(j=0;j<U;j++)if(f(k[j])){k[j].length>D[j].length&&g.push(i("unused",m,E.concat(j,D[j].length)));var ee=D[j].length;for(F=0;F<(re?Math.min(ee,V[j].length):ee);F++)Z=re?V[j][F]:V,z=k[j][F],H=D[j][F],v.validate(z,Z)?H!==z&&H!==+z&&g.push(i("dynamic",m,E.concat(j,F),z,H)):g.push(i("value",m,E.concat(j,F),z))}else g.push(i("array",m,E.concat(j),k[j]));else for(j=0;j<U;j++)Z=re?V[j]:V,z=k[j],H=D[j],v.validate(z,Z)?H!==z&&H!==+z&&g.push(i("dynamic",m,E.concat(j),z,H)):g.push(i("value",m,E.concat(j),z))}else if(P.items&&!O&&f(k)){var J,Q,ne=V[Object.keys(V)[0]],K=[];for(J=0;J<D.length;J++){var oe=D[J]._index||J;if((Q=E.slice()).push(oe),x(k[oe])&&x(D[J])){K.push(oe);var le=k[oe],se=D[J];x(le)&&le.visible!==!1&&se.visible===!1?g.push(i("invisible",m,Q)):t(le,se,ne,g,m,Q)}}for(J=0;J<k.length;J++)(Q=E.slice()).push(J),x(k[J])?K.indexOf(J)===-1&&g.push(i("unused",m,Q)):g.push(i("object",m,Q,k[J]))}else!x(k)&&x(D)?g.push(i("object",m,E,k)):s(k)||!s(D)||O||N?h in _?v.validate(k,P)?P.valType==="enumerated"&&(P.coerceNumber&&k!==+D||k!==D)&&g.push(i("dynamic",m,E,k,D)):g.push(i("value",m,E,k)):g.push(i("unused",m,E,k)):g.push(i("array",m,E,k));else g.push(i("schema",m,E))}}return g}C.exports=function(c,_){c===void 0&&(c=[]),_===void 0&&(_={});var p,g,m=n.get(),b=[],y={_context:v.extendFlat({},T)};f(c)?(y.data=v.extendDeep([],c),p=c):(y.data=[],p=[],b.push(i("array","data"))),x(_)?(y.layout=v.extendDeep({},_),g=_):(y.layout={},g={},arguments.length>1&&b.push(i("object","layout"))),w.supplyDefaults(y);for(var M=y._fullData,h=p.length,E=0;E<h;E++){var k=p[E],D=["data",E];if(x(k)){var P=M[E],L=P.type,O=m.traces[L].attributes;O.type={valType:"enumerated",values:[L]},P.visible===!1&&k.visible!==!1&&b.push(i("invisible",D)),t(k,P,O,b,D);var N=k.transforms,V=P.transforms;if(N){f(N)||b.push(i("array",D,["transforms"])),D.push("transforms");for(var F=0;F<N.length;F++){var j=["transforms",F],Z=N[F].type;if(x(N[F])){var z=m.transforms[Z]?m.transforms[Z].attributes:{};z.type={valType:"enumerated",values:Object.keys(m.transforms)},t(N[F],V[F],z,b,D,j)}else b.push(i("object",D,j))}}}else b.push(i("object",D))}var H=y._fullLayout,U=function(re,ee){for(var J=re.layout.layoutAttributes,Q=0;Q<ee.length;Q++){var ne=ee[Q],K=re.traces[ne.type],oe=K.layoutAttributes;oe&&(ne.subplot?v.extendFlat(J[K.attributes.subplot.dflt],oe):v.extendFlat(J,oe))}return J}(m,M);return t(g,H,U,b,"layout"),b.length===0?void 0:b};var o={object:function(c,_){return(c==="layout"&&_===""?"The layout argument":c[0]==="data"&&_===""?"Trace "+c[1]+" in the data argument":r(c)+"key "+_)+" must be linked to an object container"},array:function(c,_){return(c==="data"?"The data argument":r(c)+"key "+_)+" must be linked to an array container"},schema:function(c,_){return r(c)+"key "+_+" is not part of the schema"},unused:function(c,_,p){var g=x(p)?"container":"key";return r(c)+g+" "+_+" did not get coerced"},dynamic:function(c,_,p,g){return[r(c)+"key",_,"(set to '"+p+"')","got reset to","'"+g+"'","during defaults."].join(" ")},invisible:function(c,_){return(_?r(c)+"item "+_:"Trace "+c[1])+" got defaulted to be not visible"},value:function(c,_,p){return[r(c)+"key "+_,"is set to an invalid value ("+p+")"].join(" ")}};function r(c){return f(c)?"In data trace "+c[1]+", ":"In "+c+", "}function i(c,_,p,g,m){var b,y;p=p||"",f(_)?(b=_[0],y=_[1]):(b=_,y=null);var M=function(E){if(!f(E))return String(E);for(var k="",D=0;D<E.length;D++){var P=E[D];typeof P=="number"?k=k.substr(0,k.length-1)+"["+P+"]":k+=P,D<E.length-1&&(k+=".")}return k}(p),h=o[c](_,M,g,m);return v.log(h),{code:c,container:b,trace:y,path:p,astr:M,msg:h}}function a(c,_){var p=d(_),g=p.keyMinusId,m=p.id;return!!(g in c&&c[g]._isSubplotObj&&m)||_ in c}function u(c,_){return _ in c?c[_]:c[d(_).keyMinusId]}var l=v.counterRegex("([a-z]+)");function d(c){var _=c.match(l);return{keyMinusId:_&&_[1],id:_&&_[2]}}},85656:function(C){"use strict";C.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},51272:function(C,A,e){"use strict";var v=e(3400),w=e(31780);C.exports=function(n,T,x){var f,s,t=x.name,o=x.inclusionAttr||"visible",r=T[t],i=v.isArrayOrTypedArray(n[t])?n[t]:[],a=T[t]=[],u=w.arrayTemplater(T,t,o);for(f=0;f<i.length;f++){var l=i[f];v.isPlainObject(l)?s=u.newItem(l):(s=u.newItem({}))[o]=!1,s._index=f,s[o]!==!1&&x.handleItemDefaults(l,s,T,x),a.push(s)}var d=u.defaultItems();for(f=0;f<d.length;f++)(s=d[f])._index=a.length,x.handleItemDefaults({},s,T,x,{}),a.push(s);if(v.isArrayOrTypedArray(r)){var c=Math.min(r.length,a.length);for(f=0;f<c;f++)v.relinkPrivateKeys(a[f],r[f])}return a}},45464:function(C,A,e){"use strict";var v=e(25376),w=e(55756);C.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:v({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:w.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},1220:function(C,A,e){"use strict";var v=e(38248),w=e(3400),n=w.dateTime2ms,T=w.incrementMonth,x=e(39032).ONEAVGMONTH;C.exports=function(f,s,t,o){if(s.type!=="date")return{vals:o};var r=f[t+"periodalignment"];if(!r)return{vals:o};var i,a=f[t+"period"];if(v(a)){if((a=+a)<=0)return{vals:o}}else if(typeof a=="string"&&a.charAt(0)==="M"){var u=+a.substring(1);if(!(u>0&&Math.round(u)===u))return{vals:o};i=u}for(var l=s.calendar,d=r==="start",c=r==="end",_=f[t+"period0"],p=n(_,l)||0,g=[],m=[],b=[],y=o.length,M=0;M<y;M++){var h,E,k,D=o[M];if(i){for(h=Math.round((D-p)/(i*x)),k=T(p,i*h,l);k>D;)k=T(k,-i,l);for(;k<=D;)k=T(k,i,l);E=T(k,-i,l)}else{for(k=p+(h=Math.round((D-p)/a))*a;k>D;)k-=a;for(;k<=D;)k+=a;E=k-a}g[M]=d?E:c?k:(E+k)/2,m[M]=E,b[M]=k}return{vals:g,starts:m,ends:b}}},26720:function(C){"use strict";C.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},19280:function(C,A,e){"use strict";var v=e(33428),w=e(38248),n=e(3400),T=e(39032).FP_SAFE,x=e(24040),f=e(43616),s=e(79811),t=s.getFromId,o=s.isLinked;function r(M,h){var E,k,D=[],P=M._fullLayout,L=a(P,h,0),O=a(P,h,1),N=l(M,h),V=N.min,F=N.max;if(V.length===0||F.length===0)return n.simpleMap(h.range,h.r2l);var j=V[0].val,Z=F[0].val;for(E=1;E<V.length&&j===Z;E++)j=Math.min(j,V[E].val);for(E=1;E<F.length&&j===Z;E++)Z=Math.max(Z,F[E].val);var z=h.autorange,H=z==="reversed"||z==="min reversed"||z==="max reversed";if(!H&&h.range){var U=n.simpleMap(h.range,h.r2l);H=U[1]<U[0]}h.autorange==="reversed"&&(h.autorange=!0);var re,ee,J,Q,ne,K,oe=h.rangemode,le=oe==="tozero",se=oe==="nonnegative",de=h._length,be=de/10,_e=0;for(E=0;E<V.length;E++)for(re=V[E],k=0;k<F.length;k++)(K=(ee=F[k]).val-re.val-i(h,re.val,ee.val))>0&&((ne=de-L(re)-O(ee))>be?K/ne>_e&&(J=re,Q=ee,_e=K/ne):K/de>_e&&(J={val:re.val,nopad:1},Q={val:ee.val,nopad:1},_e=K/de));if(j===Z){var xe=j-1,ve=j+1;if(le)if(j===0)D=[0,1];else{var ye=(j>0?F:V).reduce(function(Me,Ae){return Math.max(Me,O(Ae))},0),me=j/(1-Math.min(.5,ye/de));D=j>0?[0,me]:[me,0]}else D=se?[Math.max(0,xe),Math.max(1,ve)]:[xe,ve]}else le?(J.val>=0&&(J={val:0,nopad:1}),Q.val<=0&&(Q={val:0,nopad:1})):se&&(J.val-_e*L(J)<0&&(J={val:0,nopad:1}),Q.val<=0&&(Q={val:1,nopad:1})),_e=(Q.val-J.val-i(h,re.val,ee.val))/(de-L(J)-O(Q)),D=[J.val-_e*L(J),Q.val+_e*O(Q)];return D=y(D,h),h.limitRange&&h.limitRange(),H&&D.reverse(),n.simpleMap(D,h.l2r||Number)}function i(M,h,E){var k=0;if(M.rangebreaks)for(var D=M.locateBreaks(h,E),P=0;P<D.length;P++){var L=D[P];k+=L.max-L.min}return k}function a(M,h,E){var k=.05*h._length,D=h._anchorAxis||{};if((h.ticklabelposition||"").indexOf("inside")!==-1||(D.ticklabelposition||"").indexOf("inside")!==-1){var P=h.isReversed();if(!P){var L=n.simpleMap(h.range,h.r2l);P=L[1]<L[0]}P&&(E=!E)}var O=0;return o(M,h._id)||(O=function(N,V,F){var j=0,Z=V._id.charAt(0)==="x";for(var z in N._plots){var H=N._plots[z];if(V._id===H.xaxis._id||V._id===H.yaxis._id){var U=(Z?H.yaxis:H.xaxis)||{};if((U.ticklabelposition||"").indexOf("inside")!==-1&&(!F&&(U.side==="left"||U.side==="bottom")||F&&(U.side==="top"||U.side==="right"))){if(U._vals){var re=n.deg2rad(U._tickAngles[U._id+"tick"]||0),ee=Math.abs(Math.cos(re)),J=Math.abs(Math.sin(re));if(!U._vals[0].bb){var Q=U._id+"tick";U._selections[Q].each(function(se){var de=v.select(this);de.select(".text-math-group").empty()&&(se.bb=f.bBox(de.node()))})}for(var ne=0;ne<U._vals.length;ne++){var K=U._vals[ne].bb;if(K){var oe=2*u+K.width,le=2*u+K.height;j=Math.max(j,Z?Math.max(oe*ee,le*J):Math.max(le*ee,oe*J))}}}U.ticks==="inside"&&U.ticklabelposition==="inside"&&(j+=U.ticklen||0)}}}return j}(M,h,E)),k=Math.max(O,k),h.constrain==="domain"&&h._inputDomain&&(k*=(h._inputDomain[1]-h._inputDomain[0])/(h.domain[1]-h.domain[0])),function(N){return N.nopad?0:N.pad+(N.extrapad?k:O)}}C.exports={applyAutorangeOptions:y,getAutoRange:r,makePadFn:a,doAutoRange:function(M,h,E){if(h.setScale(),h.autorange){h.range=E?E.slice():r(M,h),h._r=h.range.slice(),h._rl=n.simpleMap(h._r,h.r2l);var k=h._input,D={};D[h._attr+".range"]=h.range,D[h._attr+".autorange"]=h.autorange,x.call("_storeDirectGUIEdit",M.layout,M._fullLayout._preGUI,D),k.range=h.range.slice(),k.autorange=h.autorange}var P=h._anchorAxis;if(P&&P.rangeslider){var L=P.rangeslider[h._name];L&&L.rangemode==="auto"&&(L.range=r(M,h)),P._input.rangeslider[h._name]=n.extendFlat({},L)}},findExtremes:function(M,h,E){E||(E={}),M._m||M.setScale();var k,D,P,L,O,N,V,F,j,Z=[],z=[],H=h.length,U=E.padded||!1,re=E.tozero&&(M.type==="linear"||M.type==="-"),ee=M.type==="log",J=!1,Q=E.vpadLinearized||!1;function ne(xe){if(Array.isArray(xe))return J=!0,function(ye){return Math.max(Number(xe[ye]||0),0)};var ve=Math.max(Number(xe||0),0);return function(){return ve}}var K=ne((M._m>0?E.ppadplus:E.ppadminus)||E.ppad||0),oe=ne((M._m>0?E.ppadminus:E.ppadplus)||E.ppad||0),le=ne(E.vpadplus||E.vpad),se=ne(E.vpadminus||E.vpad);if(!J){if(F=1/0,j=-1/0,ee)for(k=0;k<H;k++)(D=h[k])<F&&D>0&&(F=D),D>j&&D<T&&(j=D);else for(k=0;k<H;k++)(D=h[k])<F&&D>-T&&(F=D),D>j&&D<T&&(j=D);h=[F,j],H=2}var de={tozero:re,extrapad:U};function be(xe){P=h[xe],w(P)&&(N=K(xe),V=oe(xe),Q?(L=M.c2l(P)-se(xe),O=M.c2l(P)+le(xe)):(F=P-se(xe),j=P+le(xe),ee&&F<j/10&&(F=j/10),L=M.c2l(F),O=M.c2l(j)),re&&(L=Math.min(0,L),O=Math.max(0,O)),p(L)&&d(Z,L,V,de),p(O)&&c(z,O,N,de))}var _e=Math.min(6,H);for(k=0;k<_e;k++)be(k);for(k=H-1;k>=_e;k--)be(k);return{min:Z,max:z,opts:E}},concatExtremes:l};var u=3;function l(M,h,E){var k,D,P,L=h._id,O=M._fullData,N=M._fullLayout,V=[],F=[];function j(re,ee){for(k=0;k<ee.length;k++){var J=re[ee[k]],Q=(J._extremes||{})[L];if(J.visible===!0&&Q){for(D=0;D<Q.min.length;D++)P=Q.min[D],d(V,P.val,P.pad,{extrapad:P.extrapad});for(D=0;D<Q.max.length;D++)P=Q.max[D],c(F,P.val,P.pad,{extrapad:P.extrapad})}}}if(j(O,h._traceIndices),j(N.annotations||[],h._annIndices||[]),j(N.shapes||[],h._shapeIndices||[]),h._matchGroup&&!E){for(var Z in h._matchGroup)if(Z!==h._id){var z=t(M,Z),H=l(M,z,!0),U=h._length/z._length;for(D=0;D<H.min.length;D++)P=H.min[D],d(V,P.val,P.pad*U,{extrapad:P.extrapad});for(D=0;D<H.max.length;D++)P=H.max[D],c(F,P.val,P.pad*U,{extrapad:P.extrapad})}}return{min:V,max:F}}function d(M,h,E,k){_(M,h,E,k,g)}function c(M,h,E,k){_(M,h,E,k,m)}function _(M,h,E,k,D){for(var P=k.tozero,L=k.extrapad,O=!0,N=0;N<M.length&&O;N++){var V=M[N];if(D(V.val,h)&&V.pad>=E&&(V.extrapad||!L)){O=!1;break}D(h,V.val)&&V.pad<=E&&(L||!V.extrapad)&&(M.splice(N,1),N--)}if(O){var F=P&&h===0;M.push({val:h,pad:F?0:E,extrapad:!F&&L})}}function p(M){return w(M)&&Math.abs(M)<T}function g(M,h){return M<=h}function m(M,h){return M>=h}function b(M,h,E){return h===void 0||E===void 0||(h=M.d2l(h))<M.d2l(E)}function y(M,h){if(!h||!h.autorangeoptions)return M;var E=M[0],k=M[1],D=h.autorangeoptions.include;if(D!==void 0){var P=h.d2l(E),L=h.d2l(k);n.isArrayOrTypedArray(D)||(D=[D]);for(var O=0;O<D.length;O++){var N=h.d2l(D[O]);P>=N&&(P=N,E=N),L<=N&&(L=N,k=N)}}return E=function(V,F){var j=F.autorangeoptions;return j&&j.minallowed!==void 0&&b(F,j.minallowed,j.maxallowed)?j.minallowed:j&&j.clipmin!==void 0&&b(F,j.clipmin,j.clipmax)?Math.max(V,F.d2l(j.clipmin)):V}(E,h),k=function(V,F){var j=F.autorangeoptions;return j&&j.maxallowed!==void 0&&b(F,j.minallowed,j.maxallowed)?j.maxallowed:j&&j.clipmax!==void 0&&b(F,j.clipmin,j.clipmax)?Math.min(V,F.d2l(j.clipmax)):V}(k,h),[E,k]}},76808:function(C){"use strict";C.exports=function(A,e,v){var w,n;if(v){var T=e==="reversed"||e==="min reversed"||e==="max reversed";w=v[T?1:0],n=v[T?0:1]}var x=A("autorangeoptions.minallowed",n===null?w:void 0),f=A("autorangeoptions.maxallowed",w===null?n:void 0);x===void 0&&A("autorangeoptions.clipmin"),f===void 0&&A("autorangeoptions.clipmax"),A("autorangeoptions.include")}},54460:function(C,A,e){"use strict";var v=e(33428),w=e(38248),n=e(7316),T=e(24040),x=e(3400),f=x.strTranslate,s=e(72736),t=e(81668),o=e(76308),r=e(43616),i=e(94724),a=e(98728),u=e(39032),l=u.ONEMAXYEAR,d=u.ONEAVGYEAR,c=u.ONEMINYEAR,_=u.ONEMAXQUARTER,p=u.ONEAVGQUARTER,g=u.ONEMINQUARTER,m=u.ONEMAXMONTH,b=u.ONEAVGMONTH,y=u.ONEMINMONTH,M=u.ONEWEEK,h=u.ONEDAY,E=h/2,k=u.ONEHOUR,D=u.ONEMIN,P=u.ONESEC,L=u.MINUS_SIGN,O=u.BADNUM,N={K:"zeroline"},V={K:"gridline",L:"path"},F={K:"minor-gridline",L:"path"},j={K:"tick",L:"path"},Z={K:"tick",L:"text"},z={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},H=e(84284),U=H.MID_SHIFT,re=H.CAP_SHIFT,ee=H.LINE_SPACING,J=H.OPPOSITE_SIDE,Q=C.exports={};Q.setConvert=e(78344);var ne=e(52976),K=e(79811),oe=K.idSort,le=K.isLinked;Q.id2name=K.id2name,Q.name2id=K.name2id,Q.cleanId=K.cleanId,Q.list=K.list,Q.listIds=K.listIds,Q.getFromId=K.getFromId,Q.getFromTrace=K.getFromTrace;var se=e(19280);Q.getAutoRange=se.getAutoRange,Q.findExtremes=se.findExtremes;var de=1e-4;function be(Be){var je=(Be[1]-Be[0])*de;return[Be[0]-je,Be[1]+je]}Q.coerceRef=function(Be,je,ot,Ze,dt,mt){var yt=Ze.charAt(Ze.length-1),ht=ot._fullLayout._subplots[yt+"axis"],kt=Ze+"ref",_t={};return dt||(dt=ht[0]||(typeof mt=="string"?mt:mt[0])),mt||(mt=dt),ht=ht.concat(ht.map(function(Et){return Et+" domain"})),_t[kt]={valType:"enumerated",values:ht.concat(mt?typeof mt=="string"?[mt]:mt:[]),dflt:dt},x.coerce(Be,je,_t,kt)},Q.getRefType=function(Be){return Be===void 0?Be:Be==="paper"?"paper":Be==="pixel"?"pixel":/( domain)$/.test(Be)?"domain":"range"},Q.coercePosition=function(Be,je,ot,Ze,dt,mt){var yt,ht;if(Q.getRefType(Ze)!=="range")yt=x.ensureNumber,ht=ot(dt,mt);else{var kt=Q.getFromId(je,Ze);ht=ot(dt,mt=kt.fraction2r(mt)),yt=kt.cleanPos}Be[dt]=yt(ht)},Q.cleanPosition=function(Be,je,ot){return(ot==="paper"||ot==="pixel"?x.ensureNumber:Q.getFromId(je,ot).cleanPos)(Be)},Q.redrawComponents=function(Be,je){je=je||Q.listIds(Be);var ot=Be._fullLayout;function Ze(dt,mt,yt,ht){for(var kt=T.getComponentMethod(dt,mt),_t={},Et=0;Et<je.length;Et++)for(var Lt=ot[Q.id2name(je[Et])][yt],Ot=0;Ot<Lt.length;Ot++){var Ft=Lt[Ot];if(!_t[Ft]&&(kt(Be,Ft),_t[Ft]=1,ht))return}}Ze("annotations","drawOne","_annIndices"),Ze("shapes","drawOne","_shapeIndices"),Ze("images","draw","_imgIndices",!0),Ze("selections","drawOne","_selectionIndices")};var _e=Q.getDataConversions=function(Be,je,ot,Ze){var dt,mt=ot==="x"||ot==="y"||ot==="z"?ot:Ze;if(x.isArrayOrTypedArray(mt)){if(dt={type:ne(Ze,void 0,{autotypenumbers:Be._fullLayout.autotypenumbers}),_categories:[]},Q.setConvert(dt),dt.type==="category")for(var yt=0;yt<Ze.length;yt++)dt.d2c(Ze[yt])}else dt=Q.getFromTrace(Be,je,mt);return dt?{d2c:dt.d2c,c2d:dt.c2d}:mt==="ids"?{d2c:ve,c2d:ve}:{d2c:xe,c2d:xe}};function xe(Be){return+Be}function ve(Be){return String(Be)}function ye(Be,je){return Math.abs((Be/je+.5)%1-.5)<.001}function me(Be,je){return Math.abs(Be/je-1)<.001}function Me(Be){return+Be.substring(1)}function Ae(Be,je){return Be.rangebreaks&&(je=je.filter(function(ot){return Be.maskBreaks(ot.x)!==O})),je}function ce(Be){var je=Be._mainAxis,ot=[];if(je._vals){for(var Ze=0;Ze<je._vals.length;Ze++)if(!je._vals[Ze].noTick){var dt=je.l2p(je._vals[Ze].x),mt=Be.p2l(dt),yt=Q.tickText(Be,mt);je._vals[Ze].minor&&(yt.minor=!0,yt.text=""),ot.push(yt)}}return Ae(Be,ot)}function ae(Be,je){var ot=be(x.simpleMap(Be.range,Be.r2l)),Ze=Math.min(ot[0],ot[1]),dt=Math.max(ot[0],ot[1]),mt=Be.type==="category"?Be.d2l_noadd:Be.d2l;Be.type==="log"&&String(Be.dtick).charAt(0)!=="L"&&(Be.dtick="L"+Math.pow(10,Math.floor(Math.min(Be.range[0],Be.range[1]))-1));for(var yt=[],ht=0;ht<=1;ht++)if((je===void 0||!(je&&ht||je===!1&&!ht))&&(!ht||Be.minor)){var kt=ht?Be.minor.tickvals:Be.tickvals,_t=ht?[]:Be.ticktext;if(kt){x.isArrayOrTypedArray(_t)||(_t=[]);for(var Et=0;Et<kt.length;Et++){var Lt=mt(kt[Et]);if(Lt>Ze&&Lt<dt){var Ot=Q.tickText(Be,Lt,!1,String(_t[Et]));ht&&(Ot.minor=!0,Ot.text=""),yt.push(Ot)}}}}return Ae(Be,yt)}Q.getDataToCoordFunc=function(Be,je,ot,Ze){return _e(Be,je,ot,Ze).d2c},Q.counterLetter=function(Be){var je=Be.charAt(0);return je==="x"?"y":je==="y"?"x":void 0},Q.minDtick=function(Be,je,ot,Ze){["log","category","multicategory"].indexOf(Be.type)===-1&&Ze?Be._minDtick===void 0?(Be._minDtick=je,Be._forceTick0=ot):Be._minDtick&&((Be._minDtick/je+1e-6)%1<2e-6&&((ot-Be._forceTick0)/je%1+1.000001)%1<2e-6?(Be._minDtick=je,Be._forceTick0=ot):((je/Be._minDtick+1e-6)%1>2e-6||((ot-Be._forceTick0)/Be._minDtick%1+1.000001)%1>2e-6)&&(Be._minDtick=0)):Be._minDtick=0},Q.saveRangeInitial=function(Be,je){for(var ot=Q.list(Be,"",!0),Ze=!1,dt=0;dt<ot.length;dt++){var mt=ot[dt],yt=mt._rangeInitial0===void 0&&mt._rangeInitial1===void 0,ht=yt||mt.range[0]!==mt._rangeInitial0||mt.range[1]!==mt._rangeInitial1,kt=mt.autorange;(yt&&kt!==!0||je&&ht)&&(mt._rangeInitial0=kt==="min"||kt==="max reversed"?void 0:mt.range[0],mt._rangeInitial1=kt==="max"||kt==="min reversed"?void 0:mt.range[1],mt._autorangeInitial=kt,Ze=!0)}return Ze},Q.saveShowSpikeInitial=function(Be,je){for(var ot=Q.list(Be,"",!0),Ze=!1,dt="on",mt=0;mt<ot.length;mt++){var yt=ot[mt],ht=yt._showSpikeInitial===void 0,kt=ht||yt.showspikes!==yt._showspikes;(ht||je&&kt)&&(yt._showSpikeInitial=yt.showspikes,Ze=!0),dt!=="on"||yt.showspikes||(dt="off")}return Be._fullLayout._cartesianSpikesEnabled=dt,Ze},Q.autoBin=function(Be,je,ot,Ze,dt,mt){var yt,ht=x.aggNums(Math.min,null,Be),kt=x.aggNums(Math.max,null,Be);if(je.type==="category"||je.type==="multicategory")return{start:ht-.5,end:kt+.5,size:Math.max(1,Math.round(mt)||1),_dataSpan:kt-ht};if(dt||(dt=je.calendar),yt=je.type==="log"?{type:"linear",range:[ht,kt]}:{type:je.type,range:x.simpleMap([ht,kt],je.c2r,0,dt),calendar:dt},Q.setConvert(yt),mt=mt&&a.dtick(mt,yt.type))yt.dtick=mt,yt.tick0=a.tick0(void 0,yt.type,dt);else{var _t;if(ot)_t=(kt-ht)/ot;else{var Et=x.distinctVals(Be),Lt=Math.pow(10,Math.floor(Math.log(Et.minDiff)/Math.LN10)),Ot=Lt*x.roundUp(Et.minDiff/Lt,[.9,1.9,4.9,9.9],!0);_t=Math.max(Ot,2*x.stdev(Be)/Math.pow(Be.length,Ze?.25:.4)),w(_t)||(_t=1)}Q.autoTicks(yt,_t)}var Ft,Zt=yt.dtick,Ht=Q.tickIncrement(Q.tickFirst(yt),Zt,"reverse",dt);if(typeof Zt=="number")Ht=function(Ut,Wt,nn,On,kn){var gn=0,Jt=0,un=0,tn=0;function hn(Cn){return(1+100*(Cn-Ut)/nn.dtick)%100<2}for(var bn=0;bn<Wt.length;bn++)Wt[bn]%1==0?un++:w(Wt[bn])||tn++,hn(Wt[bn])&&gn++,hn(Wt[bn]+nn.dtick/2)&&Jt++;var wn=Wt.length-tn;if(un===wn&&nn.type!=="date")nn.dtick<1?Ut=On-.5*nn.dtick:(Ut-=.5)+nn.dtick<On&&(Ut+=nn.dtick);else if(Jt<.1*wn&&(gn>.3*wn||hn(On)||hn(kn))){var Pn=nn.dtick/2;Ut+=Ut+Pn<On?Pn:-Pn}return Ut}(Ht,Be,yt,ht,kt),Ft=Ht+(1+Math.floor((kt-Ht)/Zt))*Zt;else for(yt.dtick.charAt(0)==="M"&&(Ht=function(Ut,Wt,nn,On,kn){var gn=x.findExactDates(Wt,kn);if(gn.exactDays>.8){var Jt=Number(nn.substr(1));gn.exactYears>.8&&Jt%12==0?Ut=Q.tickIncrement(Ut,"M6","reverse")+1.5*h:gn.exactMonths>.8?Ut=Q.tickIncrement(Ut,"M1","reverse")+15.5*h:Ut-=E;var un=Q.tickIncrement(Ut,nn);if(un<=On)return un}return Ut}(Ht,Be,Zt,ht,dt)),Ft=Ht;Ft<=kt;)Ft=Q.tickIncrement(Ft,Zt,!1,dt);return{start:je.c2r(Ht,0,dt),end:je.c2r(Ft,0,dt),size:Zt,_dataSpan:kt-ht}},Q.prepMinorTicks=function(Be,je,ot){if(!je.minor.dtick){delete Be.dtick;var Ze,dt=je.dtick&&w(je._tmin);if(dt){var mt=Q.tickIncrement(je._tmin,je.dtick,!0);Ze=[je._tmin,.99*mt+.01*je._tmin]}else{var yt=x.simpleMap(je.range,je.r2l);Ze=[yt[0],.8*yt[0]+.2*yt[1]]}if(Be.range=x.simpleMap(Ze,je.l2r),Be._isMinor=!0,Q.prepTicks(Be,ot),dt){var ht=w(je.dtick),kt=w(Be.dtick),_t=ht?je.dtick:+je.dtick.substring(1),Et=kt?Be.dtick:+Be.dtick.substring(1);ht&&kt?ye(_t,Et)?_t===2*M&&Et===2*h&&(Be.dtick=M):_t===2*M&&Et===3*h?Be.dtick=M:_t!==M||(je._input.minor||{}).nticks?me(_t/Et,2.5)?Be.dtick=_t/2:Be.dtick=_t:Be.dtick=h:String(je.dtick).charAt(0)==="M"?kt?Be.dtick="M1":ye(_t,Et)?_t>=12&&Et===2&&(Be.dtick="M3"):Be.dtick=je.dtick:String(Be.dtick).charAt(0)==="L"?String(je.dtick).charAt(0)==="L"?ye(_t,Et)||(Be.dtick=me(_t/Et,2.5)?je.dtick/2:je.dtick):Be.dtick="D1":Be.dtick==="D2"&&+je.dtick>1&&(Be.dtick=1)}Be.range=je.range}je.minor._tick0Init===void 0&&(Be.tick0=je.tick0)},Q.prepTicks=function(Be,je){var ot=x.simpleMap(Be.range,Be.r2l,void 0,void 0,je);if(Be.tickmode==="auto"||!Be.dtick){var Ze,dt=Be.nticks;dt||(Be.type==="category"||Be.type==="multicategory"?(Ze=Be.tickfont?x.bigFont(Be.tickfont.size||12):15,dt=Be._length/Ze):(Ze=Be._id.charAt(0)==="y"?40:80,dt=x.constrain(Be._length/Ze,4,9)+1),Be._name==="radialaxis"&&(dt*=2)),Be.minor&&Be.minor.tickmode!=="array"||Be.tickmode==="array"&&(dt*=100),Be._roughDTick=Math.abs(ot[1]-ot[0])/dt,Q.autoTicks(Be,Be._roughDTick),Be._minDtick>0&&Be.dtick<2*Be._minDtick&&(Be.dtick=Be._minDtick,Be.tick0=Be.l2r(Be._forceTick0))}Be.ticklabelmode==="period"&&function(mt){var yt;function ht(){return!(w(mt.dtick)||mt.dtick.charAt(0)!=="M")}var kt=ht(),_t=Q.getTickFormat(mt);if(_t){var Et=mt._dtickInit!==mt.dtick;/%[fLQsSMX]/.test(_t)||(/%[HI]/.test(_t)?(yt=k,Et&&!kt&&mt.dtick<k&&(mt.dtick=k)):/%p/.test(_t)?(yt=E,Et&&!kt&&mt.dtick<E&&(mt.dtick=E)):/%[Aadejuwx]/.test(_t)?(yt=h,Et&&!kt&&mt.dtick<h&&(mt.dtick=h)):/%[UVW]/.test(_t)?(yt=M,Et&&!kt&&mt.dtick<M&&(mt.dtick=M)):/%[Bbm]/.test(_t)?(yt=b,Et&&(kt?Me(mt.dtick)<1:mt.dtick<y)&&(mt.dtick="M1")):/%[q]/.test(_t)?(yt=p,Et&&(kt?Me(mt.dtick)<3:mt.dtick<g)&&(mt.dtick="M3")):/%[Yy]/.test(_t)&&(yt=d,Et&&(kt?Me(mt.dtick)<12:mt.dtick<c)&&(mt.dtick="M12")))}(kt=ht())&&mt.tick0===mt._dowTick0&&(mt.tick0=mt._rawTick0),mt._definedDelta=yt}(Be),Be.tick0||(Be.tick0=Be.type==="date"?"2000-01-01":0),Be.type==="date"&&Be.dtick<.1&&(Be.dtick=.1),we(Be)},Q.calcTicks=function(Be,je){for(var ot,Ze,dt=Be.type,mt=Be.calendar,yt=Be.ticklabelstep,ht=Be.ticklabelmode==="period",kt=x.simpleMap(Be.range,Be.r2l,void 0,void 0,je),_t=kt[1]<kt[0],Et=Math.min(kt[0],kt[1]),Lt=Math.max(kt[0],kt[1]),Ot=Math.max(1e3,Be._length||0),Ft=[],Zt=[],Ht=[],Ut=[],Wt=Be.minor&&(Be.minor.ticks||Be.minor.showgrid),nn=1;nn>=(Wt?0:1);nn--){var On=!nn;nn?(Be._dtickInit=Be.dtick,Be._tick0Init=Be.tick0):(Be.minor._dtickInit=Be.minor.dtick,Be.minor._tick0Init=Be.minor.tick0);var kn=nn?Be:x.extendFlat({},Be,Be.minor);if(On?Q.prepMinorTicks(kn,Be,je):Q.prepTicks(kn,je),kn.tickmode!=="array")if(kn.tickmode!=="sync"){var gn=be(kt),Jt=gn[0],un=gn[1],tn=w(kn.dtick),hn=dt==="log"&&!(tn||kn.dtick.charAt(0)==="L"),bn=Q.tickFirst(kn,je);if(nn){if(Be._tmin=bn,bn<Jt!==_t)break;dt!=="category"&&dt!=="multicategory"||(un=_t?Math.max(-.5,un):Math.min(Be._categories.length-.5,un))}var wn,Pn,Cn=null,Mn=bn;nn&&(tn?Pn=Be.dtick:dt==="date"?typeof Be.dtick=="string"&&Be.dtick.charAt(0)==="M"&&(Pn=b*Be.dtick.substring(1)):Pn=Be._roughDTick,wn=Math.round((Be.r2l(Mn)-Be.r2l(Be.tick0))/Pn)-1);var Bn=kn.dtick;for(kn.rangebreaks&&kn._tick0Init!==kn.tick0&&(Mn=Ve(Mn,Be),_t||(Mn=Q.tickIncrement(Mn,Bn,!_t,mt))),nn&&ht&&(Mn=Q.tickIncrement(Mn,Bn,!_t,mt),wn--);_t?Mn>=un:Mn<=un;Mn=Q.tickIncrement(Mn,Bn,_t,mt)){if(nn&&wn++,kn.rangebreaks&&!_t){if(Mn<Jt)continue;if(kn.maskBreaks(Mn)===O&&Ve(Mn,kn)>=Lt)break}if(Ht.length>Ot||Mn===Cn)break;Cn=Mn;var Nn={value:Mn};nn?(hn&&Mn!==(0|Mn)&&(Nn.simpleLabel=!0),yt>1&&wn%yt&&(Nn.skipLabel=!0),Ht.push(Nn)):(Nn.minor=!0,Ut.push(Nn))}}else Ht=[],Ft=ce(Be);else nn?(Ht=[],Ft=ae(Be,!On)):(Ut=[],Zt=ae(Be,!On))}if(Wt&&!(Be.minor.ticks==="inside"&&Be.ticks==="outside"||Be.minor.ticks==="outside"&&Be.ticks==="inside")){for(var rr=Ht.map(function(Dt){return Dt.value}),Yn=[],ir=0;ir<Ut.length;ir++){var Zn=Ut[ir],ur=Zn.value;if(rr.indexOf(ur)===-1){for(var en=!1,on=0;!en&&on<Ht.length;on++)1e7+Ht[on].value===1e7+ur&&(en=!0);en||Yn.push(Zn)}}Ut=Yn}if(ht&&function(Dt,Bt,Qt){for(var fn=0;fn<Dt.length;fn++){var dn=Dt[fn].value,xn=fn,sn=fn+1;fn<Dt.length-1?(xn=fn,sn=fn+1):fn>0?(xn=fn-1,sn=fn):(xn=fn,sn=fn);var $t,Yt=Dt[xn].value,rn=Dt[sn].value,ln=Math.abs(rn-Yt),An=Qt||ln,En=0;An>=c?En=ln>=c&&ln<=l?ln:d:Qt===p&&An>=g?En=ln>=g&&ln<=_?ln:p:An>=y?En=ln>=y&&ln<=m?ln:b:Qt===M&&An>=M?En=M:An>=h?En=h:Qt===E&&An>=E?En=E:Qt===k&&An>=k&&(En=k),En>=ln&&(En=ln,$t=!0);var Rn=dn+En;if(Bt.rangebreaks&&En>0){for(var jn=0,Qn=0;Qn<84;Qn++){var qn=(Qn+.5)/84;Bt.maskBreaks(dn*(1-qn)+qn*Rn)!==O&&jn++}(En*=jn/84)||(Dt[fn].drop=!0),$t&&ln>M&&(En=ln)}(En>0||fn===0)&&(Dt[fn].periodX=dn+En/2)}}(Ht,Be,Be._definedDelta),Be.rangebreaks){var Dn=Be._id.charAt(0)==="y",yn=1;Be.tickmode==="auto"&&(yn=Be.tickfont?Be.tickfont.size:12);var Ln=NaN;for(ot=Ht.length-1;ot>-1;ot--)if(Ht[ot].drop)Ht.splice(ot,1);else{Ht[ot].value=Ve(Ht[ot].value,Be);var Wn=Be.c2p(Ht[ot].value);(Dn?Ln>Wn-yn:Ln<Wn+yn)?Ht.splice(_t?ot+1:ot,1):Ln=Wn}}Ke(Be)&&Math.abs(kt[1]-kt[0])===360&&Ht.pop(),Be._tmax=(Ht[Ht.length-1]||{}).value,Be._prevDateHead="",Be._inCalcTicks=!0;var Un,Xn,pr=function(Dt){Dt.text="",Be._prevDateHead=Ze};for(Ht=Ht.concat(Ut),ot=0;ot<Ht.length;ot++){var Kt=Ht[ot].minor,mn=Ht[ot].value;Kt?Zt.push({x:mn,minor:!0}):(Ze=Be._prevDateHead,Un=Q.tickText(Be,mn,!1,Ht[ot].simpleLabel),(Xn=Ht[ot].periodX)!==void 0&&(Un.periodX=Xn,(Xn>Lt||Xn<Et)&&(Xn>Lt&&(Un.periodX=Lt),Xn<Et&&(Un.periodX=Et),pr(Un))),Ht[ot].skipLabel&&pr(Un),Ft.push(Un))}return Ft=Ft.concat(Zt),Be._inCalcTicks=!1,ht&&Ft.length&&(Ft[0].noTick=!0),Ft};var pe=[2,5,10],De=[1,2,3,6,12],ke=[1,2,5,10,15,30],Ee=[1,2,3,7,14],Ie=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Re=[-.301,0,.301,.699,1],Ne=[15,30,45,90,180];function ge(Be,je,ot){return je*x.roundUp(Be/je,ot)}function we(Be){var je=Be.dtick;if(Be._tickexponent=0,w(je)||typeof je=="string"||(je=1),Be.type!=="category"&&Be.type!=="multicategory"||(Be._tickround=null),Be.type==="date"){var ot=Be.r2l(Be.tick0),Ze=Be.l2r(ot).replace(/(^-|i)/g,""),dt=Ze.length;if(String(je).charAt(0)==="M")dt>10||Ze.substr(5)!=="01-01"?Be._tickround="d":Be._tickround=+je.substr(1)%12==0?"y":"m";else if(je>=h&&dt<=10||je>=15*h)Be._tickround="d";else if(je>=D&&dt<=16||je>=k)Be._tickround="M";else if(je>=P&&dt<=19||je>=D)Be._tickround="S";else{var mt=Be.l2r(ot+je).replace(/^-/,"").length;Be._tickround=Math.max(dt,mt)-20,Be._tickround<0&&(Be._tickround=4)}}else if(w(je)||je.charAt(0)==="L"){var yt=Be.range.map(Be.r2d||Number);w(je)||(je=Number(je.substr(1))),Be._tickround=2-Math.floor(Math.log(je)/Math.LN10+.01);var ht=Math.max(Math.abs(yt[0]),Math.abs(yt[1])),kt=Math.floor(Math.log(ht)/Math.LN10+.01),_t=Be.minexponent===void 0?3:Be.minexponent;Math.abs(kt)>_t&&(Pe(Be.exponentformat)&&!Ue(kt)?Be._tickexponent=3*Math.round((kt-1)/3):Be._tickexponent=kt)}else Be._tickround=null}function Ce(Be,je,ot){var Ze=Be.tickfont||{};return{x:je,dx:0,dy:0,text:ot||"",fontSize:Ze.size,font:Ze.family,fontWeight:Ze.weight,fontStyle:Ze.style,fontVariant:Ze.variant,fontColor:Ze.color}}Q.autoTicks=function(Be,je,ot){var Ze;function dt(Lt){return Math.pow(Lt,Math.floor(Math.log(je)/Math.LN10))}if(Be.type==="date"){Be.tick0=x.dateTick0(Be.calendar,0);var mt=2*je;if(mt>d)je/=d,Ze=dt(10),Be.dtick="M"+12*ge(je,Ze,pe);else if(mt>b)je/=b,Be.dtick="M"+ge(je,1,De);else if(mt>h){if(Be.dtick=ge(je,h,Be._hasDayOfWeekBreaks?[1,2,7,14]:Ee),!ot){var yt=Q.getTickFormat(Be),ht=Be.ticklabelmode==="period";ht&&(Be._rawTick0=Be.tick0),/%[uVW]/.test(yt)?Be.tick0=x.dateTick0(Be.calendar,2):Be.tick0=x.dateTick0(Be.calendar,1),ht&&(Be._dowTick0=Be.tick0)}}else mt>k?Be.dtick=ge(je,k,De):mt>D?Be.dtick=ge(je,D,ke):mt>P?Be.dtick=ge(je,P,ke):(Ze=dt(10),Be.dtick=ge(je,Ze,pe))}else if(Be.type==="log"){Be.tick0=0;var kt=x.simpleMap(Be.range,Be.r2l);if(Be._isMinor&&(je*=1.5),je>.7)Be.dtick=Math.ceil(je);else if(Math.abs(kt[1]-kt[0])<1){var _t=1.5*Math.abs((kt[1]-kt[0])/je);je=Math.abs(Math.pow(10,kt[1])-Math.pow(10,kt[0]))/_t,Ze=dt(10),Be.dtick="L"+ge(je,Ze,pe)}else Be.dtick=je>.3?"D2":"D1"}else Be.type==="category"||Be.type==="multicategory"?(Be.tick0=0,Be.dtick=Math.ceil(Math.max(je,1))):Ke(Be)?(Be.tick0=0,Ze=1,Be.dtick=ge(je,Ze,Ne)):(Be.tick0=0,Ze=dt(10),Be.dtick=ge(je,Ze,pe));if(Be.dtick===0&&(Be.dtick=1),!w(Be.dtick)&&typeof Be.dtick!="string"){var Et=Be.dtick;throw Be.dtick=1,"ax.dtick error: "+String(Et)}},Q.tickIncrement=function(Be,je,ot,Ze){var dt=ot?-1:1;if(w(je))return x.increment(Be,dt*je);var mt=je.charAt(0),yt=dt*Number(je.substr(1));if(mt==="M")return x.incrementMonth(Be,yt,Ze);if(mt==="L")return Math.log(Math.pow(10,Be)+yt)/Math.LN10;if(mt==="D"){var ht=je==="D2"?Re:Ie,kt=Be+.01*dt,_t=x.roundUp(x.mod(kt,1),ht,ot);return Math.floor(kt)+Math.log(v.round(Math.pow(10,_t),1))/Math.LN10}throw"unrecognized dtick "+String(je)},Q.tickFirst=function(Be,je){var ot=Be.r2l||Number,Ze=x.simpleMap(Be.range,ot,void 0,void 0,je),dt=Ze[1]<Ze[0],mt=dt?Math.floor:Math.ceil,yt=be(Ze)[0],ht=Be.dtick,kt=ot(Be.tick0);if(w(ht)){var _t=mt((yt-kt)/ht)*ht+kt;return Be.type!=="category"&&Be.type!=="multicategory"||(_t=x.constrain(_t,0,Be._categories.length-1)),_t}var Et=ht.charAt(0),Lt=Number(ht.substr(1));if(Et==="M"){for(var Ot,Ft,Zt,Ht=0,Ut=kt;Ht<10;){if(((Ot=Q.tickIncrement(Ut,ht,dt,Be.calendar))-yt)*(Ut-yt)<=0)return dt?Math.min(Ut,Ot):Math.max(Ut,Ot);Ft=(yt-(Ut+Ot)/2)/(Ot-Ut),Zt=Et+(Math.abs(Math.round(Ft))||1)*Lt,Ut=Q.tickIncrement(Ut,Zt,Ft<0?!dt:dt,Be.calendar),Ht++}return x.error("tickFirst did not converge",Be),Ut}if(Et==="L")return Math.log(mt((Math.pow(10,yt)-kt)/Lt)*Lt+kt)/Math.LN10;if(Et==="D"){var Wt=ht==="D2"?Re:Ie,nn=x.roundUp(x.mod(yt,1),Wt,dt);return Math.floor(yt)+Math.log(v.round(Math.pow(10,nn),1))/Math.LN10}throw"unrecognized dtick "+String(ht)},Q.tickText=function(Be,je,ot,Ze){var dt,mt=Ce(Be,je),yt=Be.tickmode==="array",ht=ot||yt,kt=Be.type,_t=kt==="category"?Be.d2l_noadd:Be.d2l,Et=function(Ut){var Wt=Be.l2p(Ut);return Wt>=0&&Wt<=Be._length?Ut:null};if(yt&&x.isArrayOrTypedArray(Be.ticktext)){var Lt=x.simpleMap(Be.range,Be.r2l),Ot=(Math.abs(Lt[1]-Lt[0])-(Be._lBreaks||0))/1e4;for(dt=0;dt<Be.ticktext.length&&!(Math.abs(je-_t(Be.tickvals[dt]))<Ot);dt++);if(dt<Be.ticktext.length)return mt.text=String(Be.ticktext[dt]),mt.xbnd=[Et(mt.x-.5),Et(mt.x+Be.dtick-.5)],mt}function Ft(Ut){if(Ut===void 0)return!0;if(ot)return Ut==="none";var Wt={first:Be._tmin,last:Be._tmax}[Ut];return Ut!=="all"&&je!==Wt}var Zt=ot?"never":Be.exponentformat!=="none"&&Ft(Be.showexponent)?"hide":"";if(kt==="date"?function(Ut,Wt,nn,On){var kn=Ut._tickround,gn=nn&&Ut.hoverformat||Q.getTickFormat(Ut);(On=!gn&&On)&&(kn=w(kn)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[kn]);var Jt,un=x.formatDate(Wt.x,gn,kn,Ut._dateFormat,Ut.calendar,Ut._extraFormat),tn=un.indexOf(`
`);if(tn!==-1&&(Jt=un.substr(tn+1),un=un.substr(0,tn)),On&&(Jt===void 0||un!=="00:00:00"&&un!=="00:00"?un.length===8&&(un=un.replace(/:00$/,"")):(un=Jt,Jt="")),Jt)if(nn)kn==="d"?un+=", "+Jt:un=Jt+(un?", "+un:"");else if(Ut._inCalcTicks&&Ut._prevDateHead===Jt){var hn=$e(Ut),bn=Ut._trueSide||Ut.side;(!hn&&bn==="top"||hn&&bn==="bottom")&&(un+="<br> ")}else Ut._prevDateHead=Jt,un+="<br>"+Jt;Wt.text=un}(Be,mt,ot,ht):kt==="log"?function(Ut,Wt,nn,On,kn){var gn=Ut.dtick,Jt=Wt.x,un=Ut.tickformat,tn=typeof gn=="string"&&gn.charAt(0);if(kn==="never"&&(kn=""),On&&tn!=="L"&&(gn="L3",tn="L"),un||tn==="L")Wt.text=Ge(Math.pow(10,Jt),Ut,kn,On);else if(w(gn)||tn==="D"&&x.mod(Jt+.01,1)<.1){var hn=Math.round(Jt),bn=Math.abs(hn),wn=Ut.exponentformat;wn==="power"||Pe(wn)&&Ue(hn)?(Wt.text=hn===0?1:hn===1?"10":"10<sup>"+(hn>1?"":L)+bn+"</sup>",Wt.fontSize*=1.25):(wn==="e"||wn==="E")&&bn>2?Wt.text="1"+wn+(hn>0?"+":L)+bn:(Wt.text=Ge(Math.pow(10,Jt),Ut,"","fakehover"),gn==="D1"&&Ut._id.charAt(0)==="y"&&(Wt.dy-=Wt.fontSize/6))}else{if(tn!=="D")throw"unrecognized dtick "+String(gn);Wt.text=String(Math.round(Math.pow(10,x.mod(Jt,1)))),Wt.fontSize*=.75}if(Ut.dtick==="D1"){var Pn=String(Wt.text).charAt(0);Pn!=="0"&&Pn!=="1"||(Ut._id.charAt(0)==="y"?Wt.dx-=Wt.fontSize/4:(Wt.dy+=Wt.fontSize/2,Wt.dx+=(Ut.range[1]>Ut.range[0]?1:-1)*Wt.fontSize*(Jt<0?.5:.25)))}}(Be,mt,0,ht,Zt):kt==="category"?function(Ut,Wt){var nn=Ut._categories[Math.round(Wt.x)];nn===void 0&&(nn=""),Wt.text=String(nn)}(Be,mt):kt==="multicategory"?function(Ut,Wt,nn){var On=Math.round(Wt.x),kn=Ut._categories[On]||[],gn=kn[1]===void 0?"":String(kn[1]),Jt=kn[0]===void 0?"":String(kn[0]);nn?Wt.text=Jt+" - "+gn:(Wt.text=gn,Wt.text2=Jt)}(Be,mt,ot):Ke(Be)?function(Ut,Wt,nn,On,kn){if(Ut.thetaunit!=="radians"||nn)Wt.text=Ge(Wt.x,Ut,kn,On);else{var gn=Wt.x/180;if(gn===0)Wt.text="0";else{var Jt=function(tn){function hn(Cn,Mn){return Math.abs(Cn-Mn)<=1e-6}var bn=function(Cn){for(var Mn=1;!hn(Math.round(Cn*Mn)/Mn,Cn);)Mn*=10;return Mn}(tn),wn=tn*bn,Pn=Math.abs(function Cn(Mn,Bn){return hn(Bn,0)?Mn:Cn(Bn,Mn%Bn)}(wn,bn));return[Math.round(wn/Pn),Math.round(bn/Pn)]}(gn);if(Jt[1]>=100)Wt.text=Ge(x.deg2rad(Wt.x),Ut,kn,On);else{var un=Wt.x<0;Jt[1]===1?Jt[0]===1?Wt.text="\u03C0":Wt.text=Jt[0]+"\u03C0":Wt.text=["<sup>",Jt[0],"</sup>","\u2044","<sub>",Jt[1],"</sub>","\u03C0"].join(""),un&&(Wt.text=L+Wt.text)}}}}(Be,mt,ot,ht,Zt):function(Ut,Wt,nn,On,kn){kn==="never"?kn="":Ut.showexponent==="all"&&Math.abs(Wt.x/Ut.dtick)<1e-6&&(kn="hide"),Wt.text=Ge(Wt.x,Ut,kn,On)}(Be,mt,0,ht,Zt),Ze||(Be.tickprefix&&!Ft(Be.showtickprefix)&&(mt.text=Be.tickprefix+mt.text),Be.ticksuffix&&!Ft(Be.showticksuffix)&&(mt.text+=Be.ticksuffix)),Be.labelalias&&Be.labelalias.hasOwnProperty(mt.text)){var Ht=Be.labelalias[mt.text];typeof Ht=="string"&&(mt.text=Ht)}return(Be.tickson==="boundaries"||Be.showdividers)&&(mt.xbnd=[Et(mt.x-.5),Et(mt.x+Be.dtick-.5)]),mt},Q.hoverLabelText=function(Be,je,ot){ot&&(Be=x.extendFlat({},Be,{hoverformat:ot}));var Ze=x.isArrayOrTypedArray(je)?je[0]:je,dt=x.isArrayOrTypedArray(je)?je[1]:void 0;if(dt!==void 0&&dt!==Ze)return Q.hoverLabelText(Be,Ze,ot)+" - "+Q.hoverLabelText(Be,dt,ot);var mt=Be.type==="log"&&Ze<=0,yt=Q.tickText(Be,Be.c2l(mt?-Ze:Ze),"hover").text;return mt?Ze===0?"0":L+yt:yt};var ze=["f","p","n","\u03BC","m","","k","M","G","T"];function Pe(Be){return Be==="SI"||Be==="B"}function Ue(Be){return Be>14||Be<-15}function Ge(Be,je,ot,Ze){var dt=Be<0,mt=je._tickround,yt=ot||je.exponentformat||"B",ht=je._tickexponent,kt=Q.getTickFormat(je),_t=je.separatethousands;if(Ze){var Et={exponentformat:yt,minexponent:je.minexponent,dtick:je.showexponent==="none"?je.dtick:w(Be)&&Math.abs(Be)||1,range:je.showexponent==="none"?je.range.map(je.r2d):[0,Be||1]};we(Et),mt=(Number(Et._tickround)||0)+4,ht=Et._tickexponent,je.hoverformat&&(kt=je.hoverformat)}if(kt)return je._numFormat(kt)(Be).replace(/-/g,L);var Lt,Ot=Math.pow(10,-mt)/2;if(yt==="none"&&(ht=0),(Be=Math.abs(Be))<Ot)Be="0",dt=!1;else{if(Be+=Ot,ht&&(Be*=Math.pow(10,-ht),mt+=ht),mt===0)Be=String(Math.floor(Be));else if(mt<0){Be=(Be=String(Math.round(Be))).substr(0,Be.length+mt);for(var Ft=mt;Ft<0;Ft++)Be+="0"}else{var Zt=(Be=String(Be)).indexOf(".")+1;Zt&&(Be=Be.substr(0,Zt+mt).replace(/\.?0+$/,""))}Be=x.numSeparate(Be,je._separators,_t)}return ht&&yt!=="hide"&&(Pe(yt)&&Ue(ht)&&(yt="power"),Lt=ht<0?L+-ht:yt!=="power"?"+"+ht:String(ht),yt==="e"||yt==="E"?Be+=yt+Lt:yt==="power"?Be+="\xD710<sup>"+Lt+"</sup>":yt==="B"&&ht===9?Be+="B":Pe(yt)&&(Be+=ze[ht/3+5])),dt?L+Be:Be}function Xe(Be,je){if(Be){var ot=Object.keys(z).reduce(function(Ze,dt){return je.indexOf(dt)!==-1&&z[dt].forEach(function(mt){Ze[mt]=1}),Ze},{});Object.keys(Be).forEach(function(Ze){ot[Ze]||(Ze.length===1?Be[Ze]=0:delete Be[Ze])})}}function st(Be,je){for(var ot=[],Ze={},dt=0;dt<je.length;dt++){var mt=je[dt];Ze[mt.text2]?Ze[mt.text2].push(mt.x):Ze[mt.text2]=[mt.x]}for(var yt in Ze)ot.push(Ce(Be,x.interp(Ze[yt],.5),yt));return ot}function at(Be){return Be.periodX!==void 0?Be.periodX:Be.x}function vt(Be){return[Be.text,Be.x,Be.axInfo,Be.font,Be.fontSize,Be.fontColor].join("_")}function xt(Be){var je=Be.title.font.size,ot=(Be.title.text.match(s.BR_TAG_ALL)||[]).length;return Be.title.hasOwnProperty("standoff")?je*(re+ot*ee):ot?je*(ot+1)*ee:je}function gt(Be,je){var ot=Be.l2p(je);return ot>1&&ot<Be._length-1}function rt(Be){var je=v.select(Be),ot=je.select(".text-math-group");return ot.empty()?je.select("text"):ot}function tt(Be){return Be._id+".automargin"}function Mt(Be){return tt(Be)+".mirror"}function Pt(Be){return Be._id+".rangeslider"}function Rt(Be,je){for(var ot=0;ot<je.length;ot++)Be.indexOf(je[ot])===-1&&Be.push(je[ot])}function St(Be,je,ot){var Ze,dt,mt=[],yt=[],ht=Be.layout;for(Ze=0;Ze<je.length;Ze++)mt.push(Q.getFromId(Be,je[Ze]));for(Ze=0;Ze<ot.length;Ze++)yt.push(Q.getFromId(Be,ot[Ze]));var kt=Object.keys(i),_t=["anchor","domain","overlaying","position","side","tickangle","editType"],Et=["linear","log"];for(Ze=0;Ze<kt.length;Ze++){var Lt=kt[Ze],Ot=mt[0][Lt],Ft=yt[0][Lt],Zt=!0,Ht=!1,Ut=!1;if(Lt.charAt(0)!=="_"&&typeof Ot!="function"&&_t.indexOf(Lt)===-1){for(dt=1;dt<mt.length&&Zt;dt++){var Wt=mt[dt][Lt];Lt==="type"&&Et.indexOf(Ot)!==-1&&Et.indexOf(Wt)!==-1&&Ot!==Wt?Ht=!0:Wt!==Ot&&(Zt=!1)}for(dt=1;dt<yt.length&&Zt;dt++){var nn=yt[dt][Lt];Lt==="type"&&Et.indexOf(Ft)!==-1&&Et.indexOf(nn)!==-1&&Ft!==nn?Ut=!0:yt[dt][Lt]!==Ft&&(Zt=!1)}Zt&&(Ht&&(ht[mt[0]._name].type="linear"),Ut&&(ht[yt[0]._name].type="linear"),Ye(ht,Lt,mt,yt,Be._fullLayout._dfltTitle))}}for(Ze=0;Ze<Be._fullLayout.annotations.length;Ze++){var On=Be._fullLayout.annotations[Ze];je.indexOf(On.xref)!==-1&&ot.indexOf(On.yref)!==-1&&x.swapAttrs(ht.annotations[Ze],["?"])}}function Ye(Be,je,ot,Ze,dt){var mt,yt=x.nestedProperty,ht=yt(Be[ot[0]._name],je).get(),kt=yt(Be[Ze[0]._name],je).get();for(je==="title"&&(ht&&ht.text===dt.x&&(ht.text=dt.y),kt&&kt.text===dt.y&&(kt.text=dt.x)),mt=0;mt<ot.length;mt++)yt(Be,ot[mt]._name+"."+je).set(kt);for(mt=0;mt<Ze.length;mt++)yt(Be,Ze[mt]._name+"."+je).set(ht)}function Ke(Be){return Be._id==="angularaxis"}function Ve(Be,je){for(var ot=je._rangebreaks.length,Ze=0;Ze<ot;Ze++){var dt=je._rangebreaks[Ze];if(Be>=dt.min&&Be<dt.max)return dt.max}return Be}function $e(Be){return(Be.ticklabelposition||"").indexOf("inside")!==-1}function lt(Be,je){$e(Be._anchorAxis||{})&&Be._hideCounterAxisInsideTickLabels&&Be._hideCounterAxisInsideTickLabels(je)}function it(Be,je,ot,Ze){var dt,mt=Be.anchor==="free"||Be.overlaying!==void 0&&Be.overlaying!==!1?Be.overlaying:Be._id;dt=Ze?Be.side==="right"?je:-je:je,mt in ot||(ot[mt]={}),Be.side in ot[mt]||(ot[mt][Be.side]=0),ot[mt][Be.side]+=dt}Q.getTickFormat=function(Be){var je,ot,Ze,dt,mt,yt,ht,kt;function _t(Ot){return typeof Ot!="string"?Ot:Number(Ot.replace("M",""))*b}function Et(Ot,Ft){var Zt=["L","D"];if(typeof Ot==typeof Ft){if(typeof Ot=="number")return Ot-Ft;var Ht=Zt.indexOf(Ot.charAt(0)),Ut=Zt.indexOf(Ft.charAt(0));return Ht===Ut?Number(Ot.replace(/(L|D)/g,""))-Number(Ft.replace(/(L|D)/g,"")):Ht-Ut}return typeof Ot=="number"?1:-1}function Lt(Ot,Ft){var Zt=Ft[0]===null,Ht=Ft[1]===null,Ut=Et(Ot,Ft[0])>=0,Wt=Et(Ot,Ft[1])<=0;return(Zt||Ut)&&(Ht||Wt)}if(Be.tickformatstops&&Be.tickformatstops.length>0)switch(Be.type){case"date":case"linear":for(je=0;je<Be.tickformatstops.length;je++)if((Ze=Be.tickformatstops[je]).enabled&&(dt=Be.dtick,mt=Ze.dtickrange,yt=void 0,ht=void 0,kt=void 0,yt=_t||function(Ot){return Ot},ht=mt[0],kt=mt[1],(!ht&&typeof ht!="number"||yt(ht)<=yt(dt))&&(!kt&&typeof kt!="number"||yt(kt)>=yt(dt)))){ot=Ze;break}break;case"log":for(je=0;je<Be.tickformatstops.length;je++)if((Ze=Be.tickformatstops[je]).enabled&&Lt(Be.dtick,Ze.dtickrange)){ot=Ze;break}}return ot?ot.value:Be.tickformat},Q.getSubplots=function(Be,je){var ot=Be._fullLayout._subplots,Ze=ot.cartesian.concat(ot.gl2d||[]),dt=je?Q.findSubplotsWithAxis(Ze,je):Ze;return dt.sort(function(mt,yt){var ht=mt.substr(1).split("y"),kt=yt.substr(1).split("y");return ht[0]===kt[0]?+ht[1]-+kt[1]:+ht[0]-+kt[0]}),dt},Q.findSubplotsWithAxis=function(Be,je){for(var ot=new RegExp(je._id.charAt(0)==="x"?"^"+je._id+"y":je._id+"$"),Ze=[],dt=0;dt<Be.length;dt++){var mt=Be[dt];ot.test(mt)&&Ze.push(mt)}return Ze},Q.makeClipPaths=function(Be){var je=Be._fullLayout;if(!je._hasOnlyLargeSploms){var ot,Ze,dt={_offset:0,_length:je.width,_id:""},mt={_offset:0,_length:je.height,_id:""},yt=Q.list(Be,"x",!0),ht=Q.list(Be,"y",!0),kt=[];for(ot=0;ot<yt.length;ot++)for(kt.push({x:yt[ot],y:mt}),Ze=0;Ze<ht.length;Ze++)ot===0&&kt.push({x:dt,y:ht[Ze]}),kt.push({x:yt[ot],y:ht[Ze]});var _t=je._clips.selectAll(".axesclip").data(kt,function(Et){return Et.x._id+Et.y._id});_t.enter().append("clipPath").classed("axesclip",!0).attr("id",function(Et){return"clip"+je._uid+Et.x._id+Et.y._id}).append("rect"),_t.exit().remove(),_t.each(function(Et){v.select(this).select("rect").attr({x:Et.x._offset||0,y:Et.y._offset||0,width:Et.x._length||1,height:Et.y._length||1})})}},Q.draw=function(Be,je,ot){var Ze=Be._fullLayout;je==="redraw"&&Ze._paper.selectAll("g.subplot").each(function(ht){var kt=ht[0],_t=Ze._plots[kt];if(_t){var Et=_t.xaxis,Lt=_t.yaxis;_t.xaxislayer.selectAll("."+Et._id+"tick").remove(),_t.yaxislayer.selectAll("."+Lt._id+"tick").remove(),_t.xaxislayer.selectAll("."+Et._id+"tick2").remove(),_t.yaxislayer.selectAll("."+Lt._id+"tick2").remove(),_t.xaxislayer.selectAll("."+Et._id+"divider").remove(),_t.yaxislayer.selectAll("."+Lt._id+"divider").remove(),_t.minorGridlayer&&_t.minorGridlayer.selectAll("path").remove(),_t.gridlayer&&_t.gridlayer.selectAll("path").remove(),_t.zerolinelayer&&_t.zerolinelayer.selectAll("path").remove(),Ze._infolayer.select(".g-"+Et._id+"title").remove(),Ze._infolayer.select(".g-"+Lt._id+"title").remove()}});var dt=je&&je!=="redraw"?je:Q.listIds(Be),mt=Q.list(Be).filter(function(ht){return ht.autoshift}).map(function(ht){return ht.overlaying});dt.map(function(ht){var kt=Q.getFromId(Be,ht);if(kt.tickmode==="sync"&&kt.overlaying){var _t=dt.findIndex(function(Et){return Et===kt.overlaying});_t>=0&&dt.unshift(dt.splice(_t,1).shift())}});var yt={false:{left:0,right:0}};return x.syncOrAsync(dt.map(function(ht){return function(){if(ht){var kt=Q.getFromId(Be,ht);ot||(ot={}),ot.axShifts=yt,ot.overlayingShiftedAx=mt;var _t=Q.drawOne(Be,kt,ot);return kt._shiftPusher&&it(kt,kt._fullDepth||0,yt,!0),kt._r=kt.range.slice(),kt._rl=x.simpleMap(kt._r,kt.r2l),_t}}}))},Q.drawOne=function(Be,je,ot){var Ze,dt,mt,yt=(ot=ot||{}).axShifts||{},ht=ot.overlayingShiftedAx||[];je.setScale();var kt=Be._fullLayout,_t=je._id,Et=_t.charAt(0),Lt=Q.counterLetter(_t),Ot=kt._plots[je._mainSubplot];if(Ot){if(je._shiftPusher=je.autoshift||ht.indexOf(je._id)!==-1||ht.indexOf(je.overlaying)!==-1,je._shiftPusher&je.anchor==="free"){var Ft=je.linewidth/2||0;je.ticks==="inside"&&(Ft+=je.ticklen),it(je,Ft,yt,!0),it(je,je.shift||0,yt,!1)}ot.skipTitle===!0&&je._shift!==void 0||(je._shift=function(sn,$t){return sn.autoshift?$t[sn.overlaying][sn.side]:sn.shift||0}(je,yt));var Zt=Ot[Et+"axislayer"],Ht=je._mainLinePosition,Ut=Ht+=je._shift,Wt=je._mainMirrorPosition,nn=je._vals=Q.calcTicks(je),On=[je.mirror,Ut,Wt].join("_");for(Ze=0;Ze<nn.length;Ze++)nn[Ze].axInfo=On;je._selections={},je._tickAngles&&(je._prevTickAngles=je._tickAngles),je._tickAngles={},je._depth=null;var kn={};if(je.visible){var gn,Jt,un=Q.makeTransTickFn(je),tn=Q.makeTransTickLabelFn(je),hn=je.ticks==="inside",bn=je.ticks==="outside";if(je.tickson==="boundaries"){var wn=function(sn,$t){var Yt,rn=[],ln=function(An,En){var Rn=An.xbnd[En];Rn!==null&&rn.push(x.extendFlat({},An,{x:Rn}))};if($t.length){for(Yt=0;Yt<$t.length;Yt++)ln($t[Yt],0);ln($t[Yt-1],1)}return rn}(0,nn);Jt=Q.clipEnds(je,wn),gn=hn?Jt:wn}else Jt=Q.clipEnds(je,nn),gn=hn&&je.ticklabelmode!=="period"?Jt:nn;var Pn,Cn=je._gridVals=Jt,Mn=function(sn,$t){var Yt,rn,ln=[],An=$t.length&&$t[$t.length-1].x<$t[0].x,En=function(jn,Qn){var qn=jn.xbnd[Qn];qn!==null&&ln.push(x.extendFlat({},jn,{x:qn}))};if(sn.showdividers&&$t.length){for(Yt=0;Yt<$t.length;Yt++){var Rn=$t[Yt];Rn.text2!==rn&&En(Rn,An?1:0),rn=Rn.text2}En($t[Yt-1],An?0:1)}return ln}(je,nn);if(!kt._hasOnlyLargeSploms){var Bn=je._subplotsWith,Nn={};for(Ze=0;Ze<Bn.length;Ze++){dt=Bn[Ze];var rr=(mt=kt._plots[dt])[Lt+"axis"],Yn=rr._mainAxis._id;if(!Nn[Yn]){Nn[Yn]=1;var ir=Et==="x"?"M0,"+rr._offset+"v"+rr._length:"M"+rr._offset+",0h"+rr._length;Q.drawGrid(Be,je,{vals:Cn,counterAxis:rr,layer:mt.gridlayer.select("."+_t),minorLayer:mt.minorGridlayer.select("."+_t),path:ir,transFn:un}),Q.drawZeroLine(Be,je,{counterAxis:rr,layer:mt.zerolinelayer,path:ir,transFn:un})}}}var Zn=Q.getTickSigns(je),ur=Q.getTickSigns(je,"minor");if(je.ticks||je.minor&&je.minor.ticks){var en,on,Dn,yn,Ln=Q.makeTickPath(je,Ut,Zn[2]),Wn=Q.makeTickPath(je,Ut,ur[2],{minor:!0});if(je._anchorAxis&&je.mirror&&je.mirror!==!0?(en=Q.makeTickPath(je,Wt,Zn[3]),on=Q.makeTickPath(je,Wt,ur[3],{minor:!0}),Dn=Ln+en,yn=Wn+on):(en="",on="",Dn=Ln,yn=Wn),je.showdividers&&bn&&je.tickson==="boundaries"){var Un={};for(Ze=0;Ze<Mn.length;Ze++)Un[Mn[Ze].x]=1;Pn=function(sn){return Un[sn.x]?en:Dn}}else Pn=function(sn){return sn.minor?yn:Dn}}if(Q.drawTicks(Be,je,{vals:gn,layer:Zt,path:Pn,transFn:un}),je.mirror==="allticks"){var Xn=Object.keys(je._linepositions||{});for(Ze=0;Ze<Xn.length;Ze++){dt=Xn[Ze],mt=kt._plots[dt];var pr=je._linepositions[dt]||[],Kt=pr[0],mn=pr[1],Dt=pr[2],Bt=Q.makeTickPath(je,Kt,Dt?Zn[0]:ur[0],{minor:Dt})+Q.makeTickPath(je,mn,Dt?Zn[1]:ur[1],{minor:Dt});Q.drawTicks(Be,je,{vals:gn,layer:mt[Et+"axislayer"],path:Bt,transFn:un})}}var Qt=[];if(Qt.push(function(){return Q.drawLabels(Be,je,{vals:nn,layer:Zt,plotinfo:mt,transFn:tn,labelFns:Q.makeLabelFns(je,Ut)})}),je.type==="multicategory"){var fn={x:2,y:10}[Et];Qt.push(function(){var sn={x:"height",y:"width"}[Et],$t=xn()[sn]+fn+(je._tickAngles[_t+"tick"]?je.tickfont.size*ee:0);return Q.drawLabels(Be,je,{vals:st(je,nn),layer:Zt,cls:_t+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:un,labelFns:Q.makeLabelFns(je,Ut+$t*Zn[4])})}),Qt.push(function(){return je._depth=Zn[4]*(xn("tick2")[je.side]-Ut),function(sn,$t,Yt){var rn=$t._id+"divider",ln=Yt.vals,An=Yt.layer.selectAll("path."+rn).data(ln,vt);An.exit().remove(),An.enter().insert("path",":first-child").classed(rn,1).classed("crisp",1).call(o.stroke,$t.dividercolor).style("stroke-width",r.crispRound(sn,$t.dividerwidth,1)+"px"),An.attr("transform",Yt.transFn).attr("d",Yt.path)}(Be,je,{vals:Mn,layer:Zt,path:Q.makeTickPath(je,Ut,Zn[4],{len:je._depth}),transFn:un})})}else je.title.hasOwnProperty("standoff")&&Qt.push(function(){je._depth=Zn[4]*(xn()[je.side]-Ut)});var dn=T.getComponentMethod("rangeslider","isVisible")(je);return ot.skipTitle||dn&&je.side==="bottom"||Qt.push(function(){return function(sn,$t){var Yt,rn=sn._fullLayout,ln=$t._id,An=ln.charAt(0),En=$t.title.font.size,Rn=($t.title.text.match(s.BR_TAG_ALL)||[]).length;if($t.title.hasOwnProperty("standoff"))$t.side==="bottom"||$t.side==="right"?Yt=$t._depth+$t.title.standoff+En*re:$t.side!=="top"&&$t.side!=="left"||(Yt=$t._depth+$t.title.standoff+En*(U+Rn*ee));else{var jn=$e($t);if($t.type==="multicategory")Yt=$t._depth;else{var Qn=1.5*En;jn&&(Qn=.5*En,$t.ticks==="outside"&&(Qn+=$t.ticklen)),Yt=10+Qn+($t.linewidth?$t.linewidth-1:0)}jn||(Yt+=An==="x"?$t.side==="top"?En*($t.showticklabels?1:0):En*($t.showticklabels?1.5:.5):$t.side==="right"?En*($t.showticklabels?1:.5):En*($t.showticklabels?.5:0))}var qn,Kn,tr,Jn,hr=Q.getPxPosition(sn,$t);if(An==="x"?(Kn=$t._offset+$t._length/2,tr=$t.side==="top"?hr-Yt:hr+Yt):(tr=$t._offset+$t._length/2,Kn=$t.side==="right"?hr+Yt:hr-Yt,qn={rotate:"-90",offset:0}),$t.type!=="multicategory"){var br=$t._selections[$t._id+"tick"];if(Jn={selection:br,side:$t.side},br&&br.node()&&br.node().parentNode){var gr=r.getTranslate(br.node().parentNode);Jn.offsetLeft=gr.x,Jn.offsetTop=gr.y}$t.title.hasOwnProperty("standoff")&&(Jn.pad=0)}return $t._titleStandoff=Yt,t.draw(sn,ln+"title",{propContainer:$t,propName:$t._name+".title.text",placeholder:rn._dfltTitle[An],avoid:Jn,transform:qn,attributes:{x:Kn,y:tr,"text-anchor":"middle"}})}(Be,je)}),Qt.push(function(){var sn,$t,Yt,rn,ln=je.side.charAt(0),An=J[je.side].charAt(0),En=Q.getPxPosition(Be,je),Rn=bn?je.ticklen:0;(je.automargin||dn||je._shiftPusher)&&(je.type==="multicategory"?sn=xn("tick2"):(sn=xn(),Et==="x"&&ln==="b"&&(je._depth=Math.max(sn.width>0?sn.bottom-En:0,Rn))));var jn=0,Qn=0;if(je._shiftPusher&&(jn=Math.max(Rn,sn.height>0?ln==="l"?En-sn.left:sn.right-En:0),je.title.text!==kt._dfltTitle[Et]&&(Qn=(je._titleStandoff||0)+(je._titleScoot||0),ln==="l"&&(Qn+=xt(je))),je._fullDepth=Math.max(jn,Qn)),je.automargin){$t={x:0,y:0,r:0,l:0,t:0,b:0};var qn=[0,1],Kn=typeof je._shift=="number"?je._shift:0;if(Et==="x"){if(ln==="b"?$t[ln]=je._depth:($t[ln]=je._depth=Math.max(sn.width>0?En-sn.top:0,Rn),qn.reverse()),sn.width>0){var tr=sn.right-(je._offset+je._length);tr>0&&($t.xr=1,$t.r=tr);var Jn=je._offset-sn.left;Jn>0&&($t.xl=0,$t.l=Jn)}}else if(ln==="l"?(je._depth=Math.max(sn.height>0?En-sn.left:0,Rn),$t[ln]=je._depth-Kn):(je._depth=Math.max(sn.height>0?sn.right-En:0,Rn),$t[ln]=je._depth+Kn,qn.reverse()),sn.height>0){var hr=sn.bottom-(je._offset+je._length);hr>0&&($t.yb=0,$t.b=hr);var br=je._offset-sn.top;br>0&&($t.yt=1,$t.t=br)}$t[Lt]=je.anchor==="free"?je.position:je._anchorAxis.domain[qn[0]],je.title.text!==kt._dfltTitle[Et]&&($t[ln]+=xt(je)+(je.title.standoff||0)),je.mirror&&je.anchor!=="free"&&((Yt={x:0,y:0,r:0,l:0,t:0,b:0})[An]=je.linewidth,je.mirror&&je.mirror!==!0&&(Yt[An]+=Rn),je.mirror===!0||je.mirror==="ticks"?Yt[Lt]=je._anchorAxis.domain[qn[1]]:je.mirror!=="all"&&je.mirror!=="allticks"||(Yt[Lt]=[je._counterDomainMin,je._counterDomainMax][qn[1]]))}dn&&(rn=T.getComponentMethod("rangeslider","autoMarginOpts")(Be,je)),typeof je.automargin=="string"&&(Xe($t,je.automargin),Xe(Yt,je.automargin)),n.autoMargin(Be,tt(je),$t),n.autoMargin(Be,Mt(je),Yt),n.autoMargin(Be,Pt(je),rn)}),x.syncOrAsync(Qt)}}function xn(sn){var $t=_t+(sn||"tick");return kn[$t]||(kn[$t]=function(Yt,rn,ln){var An,En,Rn,jn;if(Yt._selections[rn].size())An=1/0,En=-1/0,Rn=1/0,jn=-1/0,Yt._selections[rn].each(function(){var qn=rt(this),Kn=r.bBox(qn.node().parentNode);An=Math.min(An,Kn.top),En=Math.max(En,Kn.bottom),Rn=Math.min(Rn,Kn.left),jn=Math.max(jn,Kn.right)});else{var Qn=Q.makeLabelFns(Yt,ln);An=En=Qn.yFn({dx:0,dy:0,fontSize:0}),Rn=jn=Qn.xFn({dx:0,dy:0,fontSize:0})}return{top:An,bottom:En,left:Rn,right:jn,height:En-An,width:jn-Rn}}(je,$t,Ut)),kn[$t]}},Q.getTickSigns=function(Be,je){var ot=Be._id.charAt(0),Ze={x:"top",y:"right"}[ot],dt=Be.side===Ze?1:-1,mt=[-1,1,dt,-dt];return(je?(Be.minor||{}).ticks:Be.ticks)!=="inside"==(ot==="x")&&(mt=mt.map(function(yt){return-yt})),Be.side&&mt.push({l:-1,t:-1,r:1,b:1}[Be.side.charAt(0)]),mt},Q.makeTransTickFn=function(Be){return Be._id.charAt(0)==="x"?function(je){return f(Be._offset+Be.l2p(je.x),0)}:function(je){return f(0,Be._offset+Be.l2p(je.x))}},Q.makeTransTickLabelFn=function(Be){var je=function(dt){var mt=dt.ticklabelposition||"",yt=function(Wt){return mt.indexOf(Wt)!==-1},ht=yt("top"),kt=yt("left"),_t=yt("right"),Et=yt("bottom"),Lt=yt("inside"),Ot=Et||kt||ht||_t;if(!Ot&&!Lt)return[0,0];var Ft=dt.side,Zt=Ot?(dt.tickwidth||0)/2:0,Ht=3,Ut=dt.tickfont?dt.tickfont.size:12;return(Et||ht)&&(Zt+=Ut*re,Ht+=(dt.linewidth||0)/2),(kt||_t)&&(Zt+=(dt.linewidth||0)/2,Ht+=3),Lt&&Ft==="top"&&(Ht-=Ut*(1-re)),(kt||ht)&&(Zt=-Zt),Ft!=="bottom"&&Ft!=="right"||(Ht=-Ht),[Ot?Zt:0,Lt?Ht:0]}(Be),ot=je[0],Ze=je[1];return Be._id.charAt(0)==="x"?function(dt){return f(ot+Be._offset+Be.l2p(at(dt)),Ze)}:function(dt){return f(Ze,ot+Be._offset+Be.l2p(at(dt)))}},Q.makeTickPath=function(Be,je,ot,Ze){Ze||(Ze={});var dt=Ze.minor;if(dt&&!Be.minor)return"";var mt=Ze.len!==void 0?Ze.len:dt?Be.minor.ticklen:Be.ticklen,yt=Be._id.charAt(0),ht=(Be.linewidth||1)/2;return yt==="x"?"M0,"+(je+ht*ot)+"v"+mt*ot:"M"+(je+ht*ot)+",0h"+mt*ot},Q.makeLabelFns=function(Be,je,ot){var Ze=Be.ticklabelposition||"",dt=function(wn){return Ze.indexOf(wn)!==-1},mt=dt("top"),yt=dt("left"),ht=dt("right"),kt=dt("bottom")||yt||mt||ht,_t=dt("inside"),Et=Ze==="inside"&&Be.ticks==="inside"||!_t&&Be.ticks==="outside"&&Be.tickson!=="boundaries",Lt=0,Ot=0,Ft=Et?Be.ticklen:0;if(_t?Ft*=-1:kt&&(Ft=0),Et&&(Lt+=Ft,ot)){var Zt=x.deg2rad(ot);Lt=Ft*Math.cos(Zt)+1,Ot=Ft*Math.sin(Zt)}Be.showticklabels&&(Et||Be.showline)&&(Lt+=.2*Be.tickfont.size);var Ht,Ut,Wt,nn,On,kn={labelStandoff:Lt+=(Be.linewidth||1)/2*(_t?-1:1),labelShift:Ot},gn=0,Jt=Be.side,un=Be._id.charAt(0),tn=Be.tickangle;if(un==="x")nn=(On=!_t&&Jt==="bottom"||_t&&Jt==="top")?1:-1,_t&&(nn*=-1),Ht=Ot*nn,Ut=je+Lt*nn,Wt=On?1:-.2,Math.abs(tn)===90&&(_t?Wt+=U:Wt=tn===-90&&Jt==="bottom"?re:tn===90&&Jt==="top"?U:.5,gn=U/2*(tn/90)),kn.xFn=function(wn){return wn.dx+Ht+gn*wn.fontSize},kn.yFn=function(wn){return wn.dy+Ut+wn.fontSize*Wt},kn.anchorFn=function(wn,Pn){if(kt){if(yt)return"end";if(ht)return"start"}return w(Pn)&&Pn!==0&&Pn!==180?Pn*nn<0!==_t?"end":"start":"middle"},kn.heightFn=function(wn,Pn,Cn){return Pn<-60||Pn>60?-.5*Cn:Be.side==="top"!==_t?-Cn:0};else if(un==="y"){if(nn=(On=!_t&&Jt==="left"||_t&&Jt==="right")?1:-1,_t&&(nn*=-1),Ht=Lt,Ut=Ot*nn,Wt=0,_t||Math.abs(tn)!==90||(Wt=tn===-90&&Jt==="left"||tn===90&&Jt==="right"?re:.5),_t){var hn=w(tn)?+tn:0;if(hn!==0){var bn=x.deg2rad(hn);gn=Math.abs(Math.sin(bn))*re*nn,Wt=0}}kn.xFn=function(wn){return wn.dx+je-(Ht+wn.fontSize*Wt)*nn+gn*wn.fontSize},kn.yFn=function(wn){return wn.dy+Ut+wn.fontSize*U},kn.anchorFn=function(wn,Pn){return w(Pn)&&Math.abs(Pn)===90?"middle":On?"end":"start"},kn.heightFn=function(wn,Pn,Cn){return Be.side==="right"&&(Pn*=-1),Pn<-30?-Cn:Pn<30?-.5*Cn:0}}return kn},Q.drawTicks=function(Be,je,ot){ot=ot||{};var Ze=je._id+"tick",dt=[].concat(je.minor&&je.minor.ticks?ot.vals.filter(function(yt){return yt.minor&&!yt.noTick}):[]).concat(je.ticks?ot.vals.filter(function(yt){return!yt.minor&&!yt.noTick}):[]),mt=ot.layer.selectAll("path."+Ze).data(dt,vt);mt.exit().remove(),mt.enter().append("path").classed(Ze,1).classed("ticks",1).classed("crisp",ot.crisp!==!1).each(function(yt){return o.stroke(v.select(this),yt.minor?je.minor.tickcolor:je.tickcolor)}).style("stroke-width",function(yt){return r.crispRound(Be,yt.minor?je.minor.tickwidth:je.tickwidth,1)+"px"}).attr("d",ot.path).style("display",null),lt(je,[j]),mt.attr("transform",ot.transFn)},Q.drawGrid=function(Be,je,ot){if(ot=ot||{},je.tickmode!=="sync"){var Ze=je._id+"grid",dt=je.minor&&je.minor.showgrid,mt=dt?ot.vals.filter(function(Wt){return Wt.minor}):[],yt=je.showgrid?ot.vals.filter(function(Wt){return!Wt.minor}):[],ht=ot.counterAxis;if(ht&&Q.shouldShowZeroLine(Be,je,ht))for(var kt=je.tickmode==="array",_t=0;_t<yt.length;_t++){var Et=yt[_t].x;if(kt?!Et:Math.abs(Et)<je.dtick/100){if(yt=yt.slice(0,_t).concat(yt.slice(_t+1)),!kt)break;_t--}}je._gw=r.crispRound(Be,je.gridwidth,1);for(var Lt=dt?r.crispRound(Be,je.minor.gridwidth,1):0,Ot=ot.layer,Ft=ot.minorLayer,Zt=1;Zt>=0;Zt--){var Ht=Zt?Ot:Ft;if(Ht){var Ut=Ht.selectAll("path."+Ze).data(Zt?yt:mt,vt);Ut.exit().remove(),Ut.enter().append("path").classed(Ze,1).classed("crisp",ot.crisp!==!1),Ut.attr("transform",ot.transFn).attr("d",ot.path).each(function(Wt){return o.stroke(v.select(this),Wt.minor?je.minor.gridcolor:je.gridcolor||"#ddd")}).style("stroke-dasharray",function(Wt){return r.dashStyle(Wt.minor?je.minor.griddash:je.griddash,Wt.minor?je.minor.gridwidth:je.gridwidth)}).style("stroke-width",function(Wt){return(Wt.minor?Lt:je._gw)+"px"}).style("display",null),typeof ot.path=="function"&&Ut.attr("d",ot.path)}}lt(je,[V,F])}},Q.drawZeroLine=function(Be,je,ot){ot=ot||ot;var Ze=je._id+"zl",dt=Q.shouldShowZeroLine(Be,je,ot.counterAxis),mt=ot.layer.selectAll("path."+Ze).data(dt?[{x:0,id:je._id}]:[]);mt.exit().remove(),mt.enter().append("path").classed(Ze,1).classed("zl",1).classed("crisp",ot.crisp!==!1).each(function(){ot.layer.selectAll("path").sort(function(yt,ht){return oe(yt.id,ht.id)})}),mt.attr("transform",ot.transFn).attr("d",ot.path).call(o.stroke,je.zerolinecolor||o.defaultLine).style("stroke-width",r.crispRound(Be,je.zerolinewidth,je._gw||1)+"px").style("display",null),lt(je,[N])},Q.drawLabels=function(Be,je,ot){ot=ot||{};var Ze=Be._fullLayout,dt=je._id,mt=ot.cls||dt+"tick",yt=ot.vals.filter(function(Nn){return Nn.text}),ht=ot.labelFns,kt=ot.secondary?0:je.tickangle,_t=(je._prevTickAngles||{})[mt],Et=ot.layer.selectAll("g."+mt).data(je.showticklabels?yt:[],vt),Lt=[];function Ot(Nn,rr){Nn.each(function(Yn){var ir=v.select(this),Zn=ir.select(".text-math-group"),ur=ht.anchorFn(Yn,rr),en=ot.transFn.call(ir.node(),Yn)+(w(rr)&&+rr!=0?" rotate("+rr+","+ht.xFn(Yn)+","+(ht.yFn(Yn)-Yn.fontSize/2)+")":""),on=s.lineCount(ir),Dn=ee*Yn.fontSize,yn=ht.heightFn(Yn,w(rr)?+rr:0,(on-1)*Dn);if(yn&&(en+=f(0,yn)),Zn.empty()){var Ln=ir.select("text");Ln.attr({transform:en,"text-anchor":ur}),Ln.style("opacity",1),je._adjustTickLabelsOverflow&&je._adjustTickLabelsOverflow()}else{var Wn=r.bBox(Zn.node()).width*{end:-.5,start:.5}[ur];Zn.attr("transform",en+f(Wn,0))}})}Et.enter().append("g").classed(mt,1).append("text").attr("text-anchor","middle").each(function(Nn){var rr=v.select(this),Yn=Be._promises.length;rr.call(s.positionText,ht.xFn(Nn),ht.yFn(Nn)).call(r.font,{family:Nn.font,size:Nn.fontSize,color:Nn.fontColor,weight:Nn.fontWeight,style:Nn.fontStyle,variant:Nn.fontVariant}).text(Nn.text).call(s.convertToTspans,Be),Be._promises[Yn]?Lt.push(Be._promises.pop().then(function(){Ot(rr,kt)})):Ot(rr,kt)}),lt(je,[Z]),Et.exit().remove(),ot.repositionOnUpdate&&Et.each(function(Nn){v.select(this).select("text").call(s.positionText,ht.xFn(Nn),ht.yFn(Nn))}),je._adjustTickLabelsOverflow=function(){var Nn=je.ticklabeloverflow;if(Nn&&Nn!=="allow"){var rr=Nn.indexOf("hide")!==-1,Yn=je._id.charAt(0)==="x",ir=0,Zn=Yn?Be._fullLayout.width:Be._fullLayout.height;if(Nn.indexOf("domain")!==-1){var ur=x.simpleMap(je.range,je.r2l);ir=je.l2p(ur[0])+je._offset,Zn=je.l2p(ur[1])+je._offset}var en=Math.min(ir,Zn),on=Math.max(ir,Zn),Dn=je.side,yn=1/0,Ln=-1/0;for(var Wn in Et.each(function(pr){var Kt=v.select(this);if(Kt.select(".text-math-group").empty()){var mn=r.bBox(Kt.node()),Dt=0;Yn?(mn.right>on||mn.left<en)&&(Dt=1):(mn.bottom>on||mn.top+(je.tickangle?0:pr.fontSize/4)<en)&&(Dt=1);var Bt=Kt.select("text");Dt?rr&&Bt.style("opacity",0):(Bt.style("opacity",1),yn=Dn==="bottom"||Dn==="right"?Math.min(yn,Yn?mn.top:mn.left):-1/0,Ln=Dn==="top"||Dn==="left"?Math.max(Ln,Yn?mn.bottom:mn.right):1/0)}}),Ze._plots){var Un=Ze._plots[Wn];if(je._id===Un.xaxis._id||je._id===Un.yaxis._id){var Xn=Yn?Un.yaxis:Un.xaxis;Xn&&(Xn["_visibleLabelMin_"+je._id]=yn,Xn["_visibleLabelMax_"+je._id]=Ln)}}}},je._hideCounterAxisInsideTickLabels=function(Nn){var rr=je._id.charAt(0)==="x",Yn=[];for(var ir in Ze._plots){var Zn=Ze._plots[ir];je._id!==Zn.xaxis._id&&je._id!==Zn.yaxis._id||Yn.push(rr?Zn.yaxis:Zn.xaxis)}Yn.forEach(function(ur,en){ur&&$e(ur)&&(Nn||[N,F,V,j,Z]).forEach(function(on){var Dn=on.K==="tick"&&on.L==="text"&&je.ticklabelmode==="period",yn=Ze._plots[je._mainSubplot];(on.K===N.K?yn.zerolinelayer.selectAll("."+je._id+"zl"):on.K===F.K?yn.minorGridlayer.selectAll("."+je._id):on.K===V.K?yn.gridlayer.selectAll("."+je._id):yn[je._id.charAt(0)+"axislayer"]).each(function(){var Ln=v.select(this);on.L&&(Ln=Ln.selectAll(on.L)),Ln.each(function(Wn){var Un=je.l2p(Dn?at(Wn):Wn.x)+je._offset,Xn=v.select(this);Un<je["_visibleLabelMax_"+ur._id]&&Un>je["_visibleLabelMin_"+ur._id]?Xn.style("display","none"):on.K!=="tick"||en||Xn.style("display",null)})})})})},Ot(Et,_t+1?_t:kt);var Ft=null;je._selections&&(je._selections[mt]=Et);var Zt=[function(){return Lt.length&&Promise.all(Lt)}];je.automargin&&Ze._redrawFromAutoMarginCount&&_t===90?(Ft=_t,Zt.push(function(){Ot(Et,_t)})):Zt.push(function(){if(Ot(Et,kt),yt.length&&je.autotickangles&&(je.type!=="log"||String(je.dtick).charAt(0)!=="D")){Ft=je.autotickangles[0];var Nn,rr=0,Yn=[],ir=1;Et.each(function(xn){rr=Math.max(rr,xn.fontSize);var sn=je.l2p(xn.x),$t=rt(this),Yt=r.bBox($t.node());ir=Math.max(ir,s.lineCount($t)),Yn.push({top:0,bottom:10,height:10,left:sn-Yt.width/2,right:sn+Yt.width/2+2,width:Yt.width+2})});var Zn=(je.tickson==="boundaries"||je.showdividers)&&!ot.secondary,ur=yt.length,en=Math.abs((yt[ur-1].x-yt[0].x)*je._m)/(ur-1),on=Zn?en/2:en,Dn=Zn?je.ticklen:1.25*rr*ir,yn=on/Math.sqrt(Math.pow(on,2)+Math.pow(Dn,2)),Ln=je.autotickangles.map(function(xn){return xn*Math.PI/180}),Wn=Ln.find(function(xn){return Math.abs(Math.cos(xn))<=yn});Wn===void 0&&(Wn=Ln.reduce(function(xn,sn){return Math.abs(Math.cos(xn))<Math.abs(Math.cos(sn))?xn:sn},Ln[0]));var Un=Wn*(180/Math.PI);if(Zn){var Xn=2;for(je.ticks&&(Xn+=je.tickwidth/2),Nn=0;Nn<Yn.length;Nn++){var pr=yt[Nn].xbnd,Kt=Yn[Nn];if(pr[0]!==null&&Kt.left-je.l2p(pr[0])<Xn||pr[1]!==null&&je.l2p(pr[1])-Kt.right<Xn){Ft=Un;break}}}else{var mn=je.ticklabelposition||"",Dt=function(xn){return mn.indexOf(xn)!==-1},Bt=Dt("top"),Qt=Dt("left"),fn=Dt("right"),dn=Dt("bottom")||Qt||Bt||fn?(je.tickwidth||0)+6:0;for(Nn=0;Nn<Yn.length-1;Nn++)if(x.bBoxIntersect(Yn[Nn],Yn[Nn+1],dn)){Ft=Un;break}}Ft&&Ot(Et,Ft)}}),je._tickAngles&&Zt.push(function(){je._tickAngles[mt]=Ft===null?w(kt)?kt:0:Ft});var Ht=function(){var Nn=0,rr=0;return Et.each(function(Yn,ir){var Zn,ur=rt(this);ur.select(".text-math-group").empty()&&(je._vals[ir]&&(Zn=je._vals[ir].bb||r.bBox(ur.node()),je._vals[ir].bb=Zn),Nn=Math.max(Nn,Zn.width),rr=Math.max(rr,Zn.height))}),{labelsMaxW:Nn,labelsMaxH:rr}},Ut=je._anchorAxis;if(Ut&&(Ut.autorange||Ut.insiderange)&&$e(je)&&!le(Ze,je._id)&&(Ze._insideTickLabelsUpdaterange||(Ze._insideTickLabelsUpdaterange={}),Ut.autorange&&(Ze._insideTickLabelsUpdaterange[Ut._name+".autorange"]=Ut.autorange,Zt.push(Ht)),Ut.insiderange)){var Wt=Ht(),nn=je._id.charAt(0)==="y"?Wt.labelsMaxW:Wt.labelsMaxH;nn+=6,je.ticklabelposition==="inside"&&(nn+=je.ticklen||0);var On=je.side==="right"||je.side==="top"?1:-1,kn=On===1?1:0,gn=On===1?0:1,Jt=[];Jt[gn]=Ut.range[gn];var un=Ut.range,tn=Ut.r2p(un[kn]),hn=Ut.r2p(un[gn]),bn=Ze._insideTickLabelsUpdaterange[Ut._name+".range"];if(bn){var wn=Ut.r2p(bn[kn]),Pn=Ut.r2p(bn[gn]),Cn=On*(je._id.charAt(0)==="y"?1:-1);Cn*tn<Cn*wn&&(tn=wn,Jt[kn]=un[kn]=bn[kn]),Cn*hn>Cn*Pn&&(hn=Pn,Jt[gn]=un[gn]=bn[gn])}var Mn=Math.abs(hn-tn);Mn-nn>0?nn*=1+nn/(Mn-=nn):nn=0,je._id.charAt(0)!=="y"&&(nn=-nn),Jt[kn]=Ut.p2r(Ut.r2p(un[kn])+On*nn),Ut.autorange==="min"||Ut.autorange==="max reversed"?(Jt[0]=null,Ut._rangeInitial0=void 0,Ut._rangeInitial1=void 0):Ut.autorange!=="max"&&Ut.autorange!=="min reversed"||(Jt[1]=null,Ut._rangeInitial0=void 0,Ut._rangeInitial1=void 0),Ze._insideTickLabelsUpdaterange[Ut._name+".range"]=Jt}var Bn=x.syncOrAsync(Zt);return Bn&&Bn.then&&Be._promises.push(Bn),Bn},Q.getPxPosition=function(Be,je){var ot,Ze=Be._fullLayout._size,dt=je._id.charAt(0),mt=je.side;return je.anchor!=="free"?ot=je._anchorAxis:dt==="x"?ot={_offset:Ze.t+(1-(je.position||0))*Ze.h,_length:0}:dt==="y"&&(ot={_offset:Ze.l+(je.position||0)*Ze.w+je._shift,_length:0}),mt==="top"||mt==="left"?ot._offset:mt==="bottom"||mt==="right"?ot._offset+ot._length:void 0},Q.shouldShowZeroLine=function(Be,je,ot){var Ze=x.simpleMap(je.range,je.r2l);return Ze[0]*Ze[1]<=0&&je.zeroline&&(je.type==="linear"||je.type==="-")&&!(je.rangebreaks&&je.maskBreaks(0)===O)&&(gt(je,0)||!function(dt,mt,yt,ht){var kt=yt._mainAxis;if(kt){var _t=dt._fullLayout,Et=mt._id.charAt(0),Lt=Q.counterLetter(mt._id),Ot=mt._offset+(Math.abs(ht[0])<Math.abs(ht[1])==(Et==="x")?0:mt._length),Ft=_t._plots[yt._mainSubplot];if(!(Ft.mainplotinfo||Ft).overlays.length)return Wt(yt);for(var Zt=Q.list(dt,Lt),Ht=0;Ht<Zt.length;Ht++){var Ut=Zt[Ht];if(Ut._mainAxis===kt&&Wt(Ut))return!0}}function Wt(nn){if(!nn.showline||!nn.linewidth)return!1;var On=Math.max((nn.linewidth+mt.zerolinewidth)/2,1);function kn(un){return typeof un=="number"&&Math.abs(un-Ot)<On}if(kn(nn._mainLinePosition)||kn(nn._mainMirrorPosition))return!0;var gn=nn._linepositions||{};for(var Jt in gn)if(kn(gn[Jt][0])||kn(gn[Jt][1]))return!0}}(Be,je,ot,Ze)||function(dt,mt){for(var yt=dt._fullData,ht=mt._mainSubplot,kt=mt._id.charAt(0),_t=0;_t<yt.length;_t++){var Et=yt[_t];if(Et.visible===!0&&Et.xaxis+Et.yaxis===ht&&(T.traceIs(Et,"bar-like")&&Et.orientation==={x:"h",y:"v"}[kt]||Et.fill&&Et.fill.charAt(Et.fill.length-1)===kt))return!0}return!1}(Be,je))},Q.clipEnds=function(Be,je){return je.filter(function(ot){return gt(Be,ot.x)})},Q.allowAutoMargin=function(Be){for(var je=Q.list(Be,"",!0),ot=0;ot<je.length;ot++){var Ze=je[ot];Ze.automargin&&(n.allowAutoMargin(Be,tt(Ze)),Ze.mirror&&n.allowAutoMargin(Be,Mt(Ze))),T.getComponentMethod("rangeslider","isVisible")(Ze)&&n.allowAutoMargin(Be,Pt(Ze))}},Q.swap=function(Be,je){for(var ot=function(dt,mt){var yt,ht,kt=[];for(yt=0;yt<mt.length;yt++){var _t=[],Et=dt._fullData[mt[yt]].xaxis,Lt=dt._fullData[mt[yt]].yaxis;if(Et&&Lt){for(ht=0;ht<kt.length;ht++)kt[ht].x.indexOf(Et)===-1&&kt[ht].y.indexOf(Lt)===-1||_t.push(ht);if(_t.length){var Ot,Ft=kt[_t[0]];if(_t.length>1)for(ht=1;ht<_t.length;ht++)Ot=kt[_t[ht]],Rt(Ft.x,Ot.x),Rt(Ft.y,Ot.y);Rt(Ft.x,[Et]),Rt(Ft.y,[Lt])}else kt.push({x:[Et],y:[Lt]})}}return kt}(Be,je),Ze=0;Ze<ot.length;Ze++)St(Be,ot[Ze].x,ot[Ze].y)}},52976:function(C,A,e){"use strict";var v=e(38248),w=e(3400),n=e(39032).BADNUM,T=w.isArrayOrTypedArray,x=w.isDateTime,f=w.cleanNumber,s=Math.round;function t(r,i){return i?v(r):typeof r=="number"}function o(r){return Math.max(1,(r-1)/1e3)}C.exports=function(r,i,a){var u=r,l=a.noMultiCategory;if(T(u)&&!u.length)return"-";if(!l&&function(g){return T(g[0])&&T(g[1])}(u))return"multicategory";if(l&&Array.isArray(u[0])){for(var d=[],c=0;c<u.length;c++)if(T(u[c]))for(var _=0;_<u[c].length;_++)d.push(u[c][_]);u=d}if(function(g,m){for(var b=g.length,y=o(b),M=0,h=0,E={},k=0;k<b;k+=y){var D=g[s(k)],P=String(D);E[P]||(E[P]=1,x(D,m)&&M++,v(D)&&h++)}return M>2*h}(u,i))return"date";var p=a.autotypenumbers!=="strict";return function(g,m){for(var b=g.length,y=o(b),M=0,h=0,E={},k=0;k<b;k+=y){var D=g[s(k)],P=String(D);if(!E[P]){E[P]=1;var L=typeof D;L==="boolean"?h++:(m?f(D)!==n:L==="number")?M++:L==="string"&&h++}}return h>2*M}(u,p)?"category":function(g,m){for(var b=g.length,y=0;y<b;y++)if(t(g[y],m))return!0;return!1}(u,p)?"linear":"-"}},28336:function(C,A,e){"use strict";var v=e(38248),w=e(24040),n=e(3400),T=e(31780),x=e(51272),f=e(94724),s=e(26332),t=e(25404),o=e(95936),r=e(42568),i=e(22416),a=e(42136),u=e(96312),l=e(78344),d=e(33816).WEEKDAY_PATTERN,c=e(33816).HOUR_PATTERN;function _(m,b,y){function M(N,V){return n.coerce(m,b,f.rangebreaks,N,V)}if(M("enabled")){var h=M("bounds");if(h&&h.length>=2){var E,k,D="";if(h.length===2){for(E=0;E<2;E++)if(k=g(h[E])){D=d;break}}var P=M("pattern",D);if(P===d)for(E=0;E<2;E++)(k=g(h[E]))&&(b.bounds[E]=h[E]=k-1);if(P)for(E=0;E<2;E++)switch(k=h[E],P){case d:if(!v(k)||(k=+k)!==Math.floor(k)||k<0||k>=7)return void(b.enabled=!1);b.bounds[E]=h[E]=k;break;case c:if(!v(k)||(k=+k)<0||k>24)return void(b.enabled=!1);b.bounds[E]=h[E]=k}if(y.autorange===!1){var L=y.range;if(L[0]<L[1]){if(h[0]<L[0]&&h[1]>L[1])return void(b.enabled=!1)}else if(h[0]>L[0]&&h[1]<L[1])return void(b.enabled=!1)}}else{var O=M("values");if(!O||!O.length)return void(b.enabled=!1);M("dvalue")}}}C.exports=function(m,b,y,M,h){var E,k=M.letter,D=M.font||{},P=M.splomStash||{},L=y("visible",!M.visibleDflt),O=b._template||{},N=b.type||O.type||"-";N==="date"&&(w.getComponentMethod("calendars","handleDefaults")(m,b,"calendar",M.calendar),M.noTicklabelmode||(E=y("ticklabelmode")));var V="";M.noTicklabelposition&&N!=="multicategory"||(V=n.coerce(m,b,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:E==="period"?["outside","inside"]:k==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),M.noTicklabeloverflow||y("ticklabeloverflow",V.indexOf("inside")!==-1?"hide past domain":N==="category"||N==="multicategory"?"allow":"hide past div"),l(b,h),u(m,b,y,M),i(m,b,y,M),N==="category"||M.noHover||y("hoverformat");var F=y("color"),j=F!==f.color.dflt?F:D.color,Z=P.label||h._dfltTitle[k];if(r(m,b,y,N,M),!L)return b;y("title.text",Z),n.coerceFont(y,"title.font",{family:D.family,weight:D.weight,style:D.style,variant:D.variant,size:n.bigFont(D.size),color:j}),s(m,b,y,N);var z=M.hasMinor;if(z&&(T.newContainer(b,"minor"),s(m,b,y,N,{isMinor:!0})),o(m,b,y,N,M),t(m,b,y,M),z){var H=M.isMinor;M.isMinor=!0,t(m,b,y,M),M.isMinor=H}a(m,b,y,{dfltColor:F,bgColor:M.bgColor,showGrid:M.showGrid,hasMinor:z,attributes:f}),!z||b.minor.ticks||b.minor.showgrid||delete b.minor,(b.showline||b.ticks)&&y("mirror");var U,re=N==="multicategory";if(M.noTickson||N!=="category"&&!re||!b.ticks&&!b.showgrid||(re&&(U="boundaries"),y("tickson",U)==="boundaries"&&delete b.ticklabelposition),re&&y("showdividers")&&(y("dividercolor"),y("dividerwidth")),N==="date")if(x(m,b,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:_}),b.rangebreaks.length){for(var ee=0;ee<b.rangebreaks.length;ee++)if(b.rangebreaks[ee].pattern===d){b._hasDayOfWeekBreaks=!0;break}if(l(b,h),h._has("scattergl")||h._has("splom"))for(var J=0;J<M.data.length;J++){var Q=M.data[J];Q.type!=="scattergl"&&Q.type!=="splom"||(Q.visible=!1,n.warn(Q.type+" traces do not work on axes with rangebreaks. Setting trace "+Q.index+" to `visible: false`."))}}else delete b.rangebreaks;return b};var p={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function g(m){if(typeof m=="string")return p[m.substr(0,3).toLowerCase()]}},29736:function(C,A,e){"use strict";var v=e(26880),w=v.FORMAT_LINK,n=v.DATE_FORMAT_LINK;function T(f,s){return["Sets the "+f+" formatting rule"+(s?"for `"+s+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+w+"."].join(" ")}function x(f,s){return T(f,s)+[" And for dates see: "+n+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}C.exports={axisHoverFormat:function(f,s){return{valType:"string",dflt:"",editType:"none",description:(s?T:x)("hover text",f)+["By default the values are formatted using "+(s?"generic number format":"`"+f+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:T,descriptionWithDates:x}},79811:function(C,A,e){"use strict";var v=e(24040),w=e(33816);function n(T,x){if(x&&x.length){for(var f=0;f<x.length;f++)if(x[f][T])return!0}return!1}A.id2name=function(T){if(typeof T=="string"&&T.match(w.AX_ID_PATTERN)){var x=T.split(" ")[0].substr(1);return x==="1"&&(x=""),T.charAt(0)+"axis"+x}},A.name2id=function(T){if(T.match(w.AX_NAME_PATTERN)){var x=T.substr(5);return x==="1"&&(x=""),T.charAt(0)+x}},A.cleanId=function(T,x,f){var s=/( domain)$/.test(T);if(typeof T=="string"&&T.match(w.AX_ID_PATTERN)&&(!x||T.charAt(0)===x)&&(!s||f)){var t=T.split(" ")[0].substr(1).replace(/^0+/,"");return t==="1"&&(t=""),T.charAt(0)+t+(s&&f?" domain":"")}},A.list=function(T,x,f){var s=T._fullLayout;if(!s)return[];var t,o=A.listIds(T,x),r=new Array(o.length);for(t=0;t<o.length;t++){var i=o[t];r[t]=s[i.charAt(0)+"axis"+i.substr(1)]}if(!f){var a=s._subplots.gl3d||[];for(t=0;t<a.length;t++){var u=s[a[t]];x?r.push(u[x+"axis"]):r.push(u.xaxis,u.yaxis,u.zaxis)}}return r},A.listIds=function(T,x){var f=T._fullLayout;if(!f)return[];var s=f._subplots;return x?s[x+"axis"]:s.xaxis.concat(s.yaxis)},A.getFromId=function(T,x,f){var s=T._fullLayout;return x=x===void 0||typeof x!="string"?x:x.replace(" domain",""),f==="x"?x=x.replace(/y[0-9]*/,""):f==="y"&&(x=x.replace(/x[0-9]*/,"")),s[A.id2name(x)]},A.getFromTrace=function(T,x,f){var s=T._fullLayout,t=null;if(v.traceIs(x,"gl3d")){var o=x.scene;o.substr(0,5)==="scene"&&(t=s[o][f+"axis"])}else t=A.getFromId(T,x[f+"axis"]||f);return t},A.idSort=function(T,x){var f=T.charAt(0),s=x.charAt(0);return f!==s?f>s?1:-1:+(T.substr(1)||1)-+(x.substr(1)||1)},A.ref2id=function(T){return!!/^[xyz]/.test(T)&&T.split(" ")[0]},A.isLinked=function(T,x){return n(x,T._axisMatchGroups)||n(x,T._axisConstraintGroups)}},22416:function(C,A,e){"use strict";var v=e(38116).isTypedArraySpec;C.exports=function(w,n,T,x){if(n.type==="category"){var f,s=w.categoryarray,t=Array.isArray(s)&&s.length>0||v(s);t&&(f="array");var o,r=T("categoryorder",f);r==="array"&&(o=T("categoryarray")),t||r!=="array"||(r=n.categoryorder="trace"),r==="trace"?n._initialCategories=[]:r==="array"?n._initialCategories=o.slice():(o=function(i,a){var u,l,d,c=a.dataAttr||i._id.charAt(0),_={};if(a.axData)u=a.axData;else for(u=[],l=0;l<a.data.length;l++){var p=a.data[l];p[c+"axis"]===i._id&&u.push(p)}for(l=0;l<u.length;l++){var g=u[l][c];for(d=0;d<g.length;d++){var m=g[d];m!=null&&(_[m]=1)}}return Object.keys(_)}(n,x).sort(),r==="category ascending"?n._initialCategories=o:r==="category descending"&&(n._initialCategories=o.reverse()))}}},98728:function(C,A,e){"use strict";var v=e(38248),w=e(3400),n=e(39032),T=n.ONEDAY,x=n.ONEWEEK;A.dtick=function(f,s){var t=s==="log",o=s==="date",r=s==="category",i=o?T:1;if(!f)return i;if(v(f))return(f=Number(f))<=0?i:r?Math.max(1,Math.round(f)):o?Math.max(.1,f):f;if(typeof f!="string"||!o&&!t)return i;var a=f.charAt(0),u=f.substr(1);return(u=v(u)?Number(u):0)<=0||!(o&&a==="M"&&u===Math.round(u)||t&&a==="L"||t&&a==="D"&&(u===1||u===2))?i:f},A.tick0=function(f,s,t,o){return s==="date"?w.cleanDate(f,w.dateTick0(t,o%x==0?1:0)):o!=="D1"&&o!=="D2"?v(f)?Number(f):0:void 0}},33816:function(C,A,e){"use strict";var v=e(53756).counter;C.exports={idRegex:{x:v("x","( domain)?"),y:v("y","( domain)?")},attrRegex:v("[xy]axis"),xAxisMatch:v("xaxis"),yAxisMatch:v("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},71888:function(C,A,e){"use strict";var v=e(3400),w=e(19280),n=e(79811).id2name,T=e(94724),x=e(21160),f=e(78344),s=e(39032).ALMOST_EQUAL,t=e(84284).FROM_BL;function o(c,_,p){var g=p.axIds,m=p.layoutOut,b=p.hasImage,y=m._axisConstraintGroups,M=m._axisMatchGroups,h=_._id,E=h.charAt(0),k=((m._splomAxes||{})[E]||{})[h]||{},D=_._id,P=D.charAt(0)==="x";function L(ne,K){return v.coerce(c,_,T,ne,K)}_._matchGroup=null,_._constraintGroup=null,L("constrain",b?"domain":"range"),v.coerce(c,_,{constraintoward:{valType:"enumerated",values:P?["left","center","right"]:["bottom","middle","top"],dflt:P?"center":"middle"}},"constraintoward");var O,N,V=_.type,F=[];for(O=0;O<g.length;O++)(N=g[O])!==D&&m[n(N)].type===V&&F.push(N);var j=i(y,D);if(j){var Z=[];for(O=0;O<F.length;O++)j[N=F[O]]||Z.push(N);F=Z}var z,H,U=F.length;U&&(c.matches||k.matches)&&(z=v.coerce(c,_,{matches:{valType:"enumerated",values:F,dflt:F.indexOf(k.matches)!==-1?k.matches:void 0}},"matches"));var re=b&&!P?_.anchor:void 0;if(U&&!z&&(c.scaleanchor||re)&&(H=v.coerce(c,_,{scaleanchor:{valType:"enumerated",values:F.concat([!1])}},"scaleanchor",re)),z){_._matchGroup=a(M,D,z,1);var ee=m[n(z)],J=r(m,_)/r(m,ee);P!==(z.charAt(0)==="x")&&(J=(P?"x":"y")+J),a(y,D,z,J)}else c.matches&&g.indexOf(c.matches)!==-1&&v.warn("ignored "+_._name+'.matches: "'+c.matches+'" to avoid an infinite loop');if(H){var Q=L("scaleratio");Q||(Q=_.scaleratio=1),a(y,D,H,Q)}else c.scaleanchor&&g.indexOf(c.scaleanchor)!==-1&&v.warn("ignored "+_._name+'.scaleanchor: "'+c.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function r(c,_){var p=_.domain;return p||(p=c[n(_.overlaying)].domain),p[1]-p[0]}function i(c,_){for(var p=0;p<c.length;p++)if(c[p][_])return c[p];return null}function a(c,_,p,g){var m,b,y,M,h,E=i(c,_);E===null?((E={})[_]=1,h=c.length,c.push(E)):h=c.indexOf(E);var k=Object.keys(E);for(m=0;m<c.length;m++)if(y=c[m],m!==h&&y[p]){var D=y[p];for(b=0;b<k.length;b++)y[M=k[b]]=u(D,u(g,E[M]));return void c.splice(h,1)}if(g!==1)for(b=0;b<k.length;b++){var P=k[b];E[P]=u(g,E[P])}E[p]=1}function u(c,_){var p,g,m="",b="";typeof c=="string"&&(p=(m=c.match(/^[xy]*/)[0]).length,c=+c.substr(p)),typeof _=="string"&&(g=(b=_.match(/^[xy]*/)[0]).length,_=+_.substr(g));var y=c*_;return p||g?p&&g&&m.charAt(0)!==b.charAt(0)?p===g?y:(p>g?m.substr(g):b.substr(p))+y:m+b+c*_:y}function l(c,_){for(var p=_._size,g=p.h/p.w,m={},b=Object.keys(c),y=0;y<b.length;y++){var M=b[y],h=c[M];if(typeof h=="string"){var E=h.match(/^[xy]*/)[0],k=E.length;h=+h.substr(k);for(var D=E.charAt(0)==="y"?g:1/g,P=0;P<k;P++)h*=D}m[M]=h}return m}function d(c,_){var p=c._inputDomain,g=t[c.constraintoward],m=p[0]+(p[1]-p[0])*g;c.domain=c._input.domain=[m+(p[0]-m)/_,m+(p[1]-m)/_],c.setScale()}A.handleDefaults=function(c,_,p){var g,m,b,y,M,h,E,k,D=p.axIds,P=p.axHasImage,L=_._axisConstraintGroups=[],O=_._axisMatchGroups=[];for(g=0;g<D.length;g++)o(M=c[y=n(D[g])],h=_[y],{axIds:D,layoutOut:_,hasImage:P[y]});function N(ee,J){for(g=0;g<ee.length;g++)for(b in m=ee[g])_[n(b)][J]=m}for(N(O,"_matchGroup"),g=0;g<L.length;g++)for(b in m=L[g])if((h=_[n(b)]).fixedrange){for(var V in m){var F=n(V);(c[F]||{}).fixedrange===!1&&v.warn("fixedrange was specified as false for axis "+F+" but was overridden because another axis in its constraint group has fixedrange true"),_[F].fixedrange=!0}break}for(g=0;g<L.length;){for(b in m=L[g]){(h=_[n(b)])._matchGroup&&Object.keys(h._matchGroup).length===Object.keys(m).length&&(L.splice(g,1),g--);break}g++}N(L,"_constraintGroup");var j=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],Z=!1,z=!1;function H(){k=h[E],E==="rangebreaks"&&(z=h._hasDayOfWeekBreaks)}for(g=0;g<O.length;g++){m=O[g];for(var U=0;U<j.length;U++){var re;for(b in E=j[U],k=null,m)if(M=c[y=n(b)],h=_[y],E in h){if(!h.matches&&(re=h,E in M)){H();break}k===null&&E in M&&H()}if(E==="range"&&k&&M.range&&M.range.length===2&&M.range[0]!==null&&M.range[1]!==null&&(Z=!0),E==="autorange"&&k===null&&Z&&(k=!1),k===null&&E in re&&(k=re[E]),k!==null)for(b in m)(h=_[n(b)])[E]=E==="range"?k.slice():k,E==="rangebreaks"&&(h._hasDayOfWeekBreaks=z,f(h,_))}}},A.enforce=function(c){var _,p,g,m,b,y,M,h,E=c._fullLayout,k=E._axisConstraintGroups||[];for(_=0;_<k.length;_++){g=l(k[_],E);var D=Object.keys(g),P=1/0,L=0,O=1/0,N={},V={},F=!1;for(p=0;p<D.length;p++)V[m=D[p]]=b=E[n(m)],b._inputDomain?b.domain=b._inputDomain.slice():b._inputDomain=b.domain.slice(),b._inputRange||(b._inputRange=b.range.slice()),b.setScale(),N[m]=y=Math.abs(b._m)/g[m],P=Math.min(P,y),b.constrain!=="domain"&&b._constraintShrinkable||(O=Math.min(O,y)),delete b._constraintShrinkable,L=Math.max(L,y),b.constrain==="domain"&&(F=!0);if(!(P>s*L)||F){for(p=0;p<D.length;p++)if(y=N[m=D[p]],M=(b=V[m]).constrain,y!==O||M==="domain")if(h=y/O,M==="range")x(b,h);else{var j=b._inputDomain,Z=(b.domain[1]-b.domain[0])/(j[1]-j[0]),z=(b.r2l(b.range[1])-b.r2l(b.range[0]))/(b.r2l(b._inputRange[1])-b.r2l(b._inputRange[0]));if((h/=Z)*z<1){b.domain=b._input.domain=j.slice(),x(b,h);continue}if(z<1&&(b.range=b._input.range=b._inputRange.slice(),h*=z),b.autorange){var H=b.r2l(b.range[0]),U=b.r2l(b.range[1]),re=(H+U)/2,ee=re,J=re,Q=Math.abs(U-re),ne=re-Q*h*1.0001,K=re+Q*h*1.0001,oe=w.makePadFn(E,b,0),le=w.makePadFn(E,b,1);d(b,h);var se,de,be=Math.abs(b._m),_e=w.concatExtremes(c,b),xe=_e.min,ve=_e.max;for(de=0;de<xe.length;de++)(se=xe[de].val-oe(xe[de])/be)>ne&&se<ee&&(ee=se);for(de=0;de<ve.length;de++)(se=ve[de].val+le(ve[de])/be)<K&&se>J&&(J=se);h/=(J-ee)/(2*Q),ee=b.l2r(ee),J=b.l2r(J),b.range=b._input.range=H<U?[ee,J]:[J,ee]}d(b,h)}}}},A.getAxisGroup=function(c,_){for(var p=c._axisMatchGroups,g=0;g<p.length;g++)if(p[g][_])return"g"+g;return _},A.clean=function(c,_){if(_._inputDomain){for(var p=!1,g=_._id,m=c._fullLayout._axisConstraintGroups,b=0;b<m.length;b++)if(m[b][g]){p=!0;break}p&&_.constrain==="domain"||(_._input.domain=_.domain=_._inputDomain,delete _._inputDomain)}}},51184:function(C,A,e){"use strict";var v=e(33428),w=e(3400),n=w.numberFormat,T=e(49760),x=e(89184),f=e(24040),s=w.strTranslate,t=e(72736),o=e(76308),r=e(43616),i=e(93024),a=e(54460),u=e(93972),l=e(86476),d=e(72760),c=d.selectingOrDrawing,_=d.freeMode,p=e(84284).FROM_TL,g=e(73696),m=e(39172).redrawReglTraces,b=e(7316),y=e(79811).getFromId,M=e(22676).prepSelect,h=e(22676).clearOutline,E=e(22676).selectOnClick,k=e(21160),D=e(33816),P=D.MINDRAG,L=D.MINZOOM,O=!0;function N(se,de,be,_e){var xe=w.ensureSingle(se.draglayer,de,be,function(ve){ve.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",se.id)});return xe.call(u,_e),xe.node()}function V(se,de,be,_e,xe,ve,ye){var me=N(se,"rect",de,be);return v.select(me).call(r.setRect,_e,xe,ve,ye),me}function F(se,de){for(var be=0;be<se.length;be++)if(!se[be].fixedrange)return de;return""}function j(se,de,be,_e,xe){for(var ve=0;ve<se.length;ve++){var ye=se[ve];if(!ye.fixedrange)if(ye.rangebreaks){var me=ye._id.charAt(0)==="y",Me=me?1-de:de,Ae=me?1-be:be;_e[ye._name+".range[0]"]=ye.l2r(ye.p2l(Me*ye._length)),_e[ye._name+".range[1]"]=ye.l2r(ye.p2l(Ae*ye._length))}else{var ce=ye._rl[0],ae=ye._rl[1]-ce;_e[ye._name+".range[0]"]=ye.l2r(ce+ae*de),_e[ye._name+".range[1]"]=ye.l2r(ce+ae*be)}}if(xe&&xe.length){var pe=(de+(1-be))/2;j(xe,pe,1-pe,_e,[])}}function Z(se,de){for(var be=0;be<se.length;be++){var _e=se[be];if(!_e.fixedrange){if(_e.rangebreaks){var xe=_e._length,ve=(_e.p2l(0+de)-_e.p2l(0)+(_e.p2l(xe+de)-_e.p2l(xe)))/2;_e.range=[_e.l2r(_e._rl[0]-ve),_e.l2r(_e._rl[1]-ve)]}else _e.range=[_e.l2r(_e._rl[0]-de/_e._m),_e.l2r(_e._rl[1]-de/_e._m)];_e.limitRange&&_e.limitRange()}}}function z(se){return 1-(se>=0?Math.min(se,.9):1/(1/Math.max(se,-.3)+3.222))}function H(se,de,be,_e,xe){return se.append("path").attr("class","zoombox").style({fill:de>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",s(be,_e)).attr("d",xe+"Z")}function U(se,de,be){return se.append("path").attr("class","zoombox-corners").style({fill:o.background,stroke:o.defaultLine,"stroke-width":1,opacity:0}).attr("transform",s(de,be)).attr("d","M0,0Z")}function re(se,de,be,_e,xe,ve){se.attr("d",_e+"M"+be.l+","+be.t+"v"+be.h+"h"+be.w+"v-"+be.h+"h-"+be.w+"Z"),ee(se,de,xe,ve)}function ee(se,de,be,_e){be||(se.transition().style("fill",_e>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),de.transition().style("opacity",1).duration(200))}function J(se){v.select(se).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function Q(se){O&&se.data&&se._context.showTips&&(w.notifier(w._(se,"Double-click to zoom back out"),"long"),O=!1)}function ne(se){var de=Math.floor(Math.min(se.b-se.t,se.r-se.l,L)/2);return"M"+(se.l-3.5)+","+(se.t-.5+de)+"h3v"+-de+"h"+de+"v-3h-"+(de+3)+"ZM"+(se.r+3.5)+","+(se.t-.5+de)+"h-3v"+-de+"h"+-de+"v-3h"+(de+3)+"ZM"+(se.r+3.5)+","+(se.b+.5-de)+"h-3v"+de+"h"+-de+"v3h"+(de+3)+"ZM"+(se.l-3.5)+","+(se.b+.5-de)+"h3v"+de+"h"+de+"v3h-"+(de+3)+"Z"}function K(se,de,be,_e,xe){for(var ve,ye,me,Me,Ae=!1,ce={},ae={},pe=(xe||{}).xaHash,De=(xe||{}).yaHash,ke=0;ke<de.length;ke++){var Ee=de[ke];for(ve in be)if(Ee[ve]){for(me in Ee)xe&&(pe[me]||De[me])||(me.charAt(0)==="x"?be:_e)[me]||(ce[me]=ve);for(ye in _e)xe&&(pe[ye]||De[ye])||!Ee[ye]||(Ae=!0)}for(ye in _e)if(Ee[ye])for(Me in Ee)xe&&(pe[Me]||De[Me])||(Me.charAt(0)==="x"?be:_e)[Me]||(ae[Me]=ye)}Ae&&(w.extendFlat(ce,ae),ae={});var Ie={},Re=[];for(me in ce){var Ne=y(se,me);Re.push(Ne),Ie[Ne._id]=Ne}var ge={},we=[];for(Me in ae){var Ce=y(se,Me);we.push(Ce),ge[Ce._id]=Ce}return{xaHash:Ie,yaHash:ge,xaxes:Re,yaxes:we,xLinks:ce,yLinks:ae,isSubplotConstrained:Ae}}function oe(se,de){if(x){var be=se.onwheel!==void 0?"wheel":"mousewheel";se._onwheel&&se.removeEventListener(be,se._onwheel),se._onwheel=de,se.addEventListener(be,de,{passive:!1})}else se.onwheel!==void 0?se.onwheel=de:se.onmousewheel!==void 0?se.onmousewheel=de:se.isAddedWheelEvent||(se.isAddedWheelEvent=!0,se.addEventListener("wheel",de,{passive:!1}))}function le(se){var de=[];for(var be in se)de.push(se[be]);return de}C.exports={makeDragBox:function(se,de,be,_e,xe,ve,ye,me){var Me,Ae,ce,ae,pe,De,ke,Ee,Ie,Re,Ne,ge,we,Ce,ze,Pe,Ue,Ge,Xe,st,at,vt,xt,gt=se._fullLayout._zoomlayer,rt=ye+me==="nsew",tt=(ye+me).length===1;function Mt(){if(Me=de.xaxis,Ae=de.yaxis,Ie=Me._length,Re=Ae._length,ke=Me._offset,Ee=Ae._offset,(ce={})[Me._id]=Me,(ae={})[Ae._id]=Ae,ye&&me)for(var Jt=de.overlays,un=0;un<Jt.length;un++){var tn=Jt[un].xaxis;ce[tn._id]=tn;var hn=Jt[un].yaxis;ae[hn._id]=hn}pe=le(ce),De=le(ae),we=F(pe,me),Ce=F(De,ye),ze=!Ce&&!we,ge=K(se,se._fullLayout._axisMatchGroups,ce,ae);var bn=(Ne=K(se,se._fullLayout._axisConstraintGroups,ce,ae,ge)).isSubplotConstrained||ge.isSubplotConstrained;Pe=me||bn,Ue=ye||bn;var wn=se._fullLayout;Ge=wn._has("scattergl"),Xe=wn._has("splom"),st=wn._has("svg")}be+=de.yaxis._shift,Mt();var Pt=function(Jt,un,tn){return Jt?Jt==="nsew"?tn?"":un==="pan"?"move":"crosshair":Jt.toLowerCase()+"-resize":"pointer"}(Ce+we,se._fullLayout.dragmode,rt),Rt=V(de,ye+me+"drag",Pt,be,_e,xe,ve);if(ze&&!rt)return Rt.onmousedown=null,Rt.style.pointerEvents="none",Rt;var St,Ye,Ke,Ve,$e,lt,it,Be,je,ot,Ze={element:Rt,gd:se,plotinfo:de};function dt(){Ze.plotinfo.selection=!1,h(se)}function mt(Jt,un){var tn=Ze.gd;if(tn._fullLayout._activeShapeIndex>=0)tn._fullLayout._deactivateShape(tn);else{var hn=tn._fullLayout.clickmode;if(J(tn),Jt!==2||tt||Ut(),rt)hn.indexOf("select")>-1&&E(un,tn,pe,De,de.id,Ze),hn.indexOf("event")>-1&&i.click(tn,un,de.id);else if(Jt===1&&tt){var bn=ye?Ae:Me,wn=ye==="s"||me==="w"?0:1,Pn=bn._name+".range["+wn+"]",Cn=function(Nn,rr){var Yn,ir=Nn.range[rr],Zn=Math.abs(ir-Nn.range[1-rr]);return Nn.type==="date"?ir:Nn.type==="log"?(Yn=Math.ceil(Math.max(0,-Math.log(Zn)/Math.LN10))+3,n("."+Yn+"g")(Math.pow(10,ir))):(Yn=Math.floor(Math.log(Math.abs(ir))/Math.LN10)-Math.floor(Math.log(Zn)/Math.LN10)+4,n("."+String(Yn)+"g")(ir))}(bn,wn),Mn="left",Bn="middle";if(bn.fixedrange)return;ye?(Bn=ye==="n"?"top":"bottom",bn.side==="right"&&(Mn="right")):me==="e"&&(Mn="right"),tn._context.showAxisRangeEntryBoxes&&v.select(Rt).call(t.makeEditable,{gd:tn,immediate:!0,background:tn._fullLayout.paper_bgcolor,text:String(Cn),fill:bn.tickfont?bn.tickfont.color:"#444",horizontalAlign:Mn,verticalAlign:Bn}).on("edit",function(Nn){var rr=bn.d2r(Nn);rr!==void 0&&f.call("_guiRelayout",tn,Pn,rr)})}}}function yt(Jt,un){if(se._transitioningWithDuration)return!1;var tn=Math.max(0,Math.min(Ie,vt*Jt+St)),hn=Math.max(0,Math.min(Re,xt*un+Ye)),bn=Math.abs(tn-St),wn=Math.abs(hn-Ye);function Pn(){it="",Ke.r=Ke.l,Ke.t=Ke.b,je.attr("d","M0,0Z")}if(Ke.l=Math.min(St,tn),Ke.r=Math.max(St,tn),Ke.t=Math.min(Ye,hn),Ke.b=Math.max(Ye,hn),Ne.isSubplotConstrained)bn>L||wn>L?(it="xy",bn/Ie>wn/Re?(wn=bn*Re/Ie,Ye>hn?Ke.t=Ye-wn:Ke.b=Ye+wn):(bn=wn*Ie/Re,St>tn?Ke.l=St-bn:Ke.r=St+bn),je.attr("d",ne(Ke))):Pn();else if(ge.isSubplotConstrained)if(bn>L||wn>L){it="xy";var Cn=Math.min(Ke.l/Ie,(Re-Ke.b)/Re),Mn=Math.max(Ke.r/Ie,(Re-Ke.t)/Re);Ke.l=Cn*Ie,Ke.r=Mn*Ie,Ke.b=(1-Cn)*Re,Ke.t=(1-Mn)*Re,je.attr("d",ne(Ke))}else Pn();else!Ce||wn<Math.min(Math.max(.6*bn,P),L)?bn<P||!we?Pn():(Ke.t=0,Ke.b=Re,it="x",je.attr("d",function(Bn,Nn){return"M"+(Bn.l-.5)+","+(Nn-L-.5)+"h-3v"+(2*L+1)+"h3ZM"+(Bn.r+.5)+","+(Nn-L-.5)+"h3v"+(2*L+1)+"h-3Z"}(Ke,Ye))):!we||bn<Math.min(.6*wn,L)?(Ke.l=0,Ke.r=Ie,it="y",je.attr("d",function(Bn,Nn){return"M"+(Nn-L-.5)+","+(Bn.t-.5)+"v-3h"+(2*L+1)+"v3ZM"+(Nn-L-.5)+","+(Bn.b+.5)+"v3h"+(2*L+1)+"v-3Z"}(Ke,St))):(it="xy",je.attr("d",ne(Ke)));Ke.w=Ke.r-Ke.l,Ke.h=Ke.b-Ke.t,it&&(ot=!0),se._dragged=ot,re(Be,je,Ke,$e,lt,Ve),ht(),se.emit("plotly_relayouting",at),lt=!0}function ht(){at={},it!=="xy"&&it!=="x"||(j(pe,Ke.l/Ie,Ke.r/Ie,at,Ne.xaxes),Zt("x",at)),it!=="xy"&&it!=="y"||(j(De,(Re-Ke.b)/Re,(Re-Ke.t)/Re,at,Ne.yaxes),Zt("y",at))}function kt(){ht(),J(se),Wt(),Q(se)}Ze.prepFn=function(Jt,un,tn){var hn=Ze.dragmode,bn=se._fullLayout.dragmode;bn!==hn&&(Ze.dragmode=bn),Mt(),vt=se._fullLayout._invScaleX,xt=se._fullLayout._invScaleY,ze||(rt?Jt.shiftKey?bn==="pan"?bn="zoom":c(bn)||(bn="pan"):Jt.ctrlKey&&(bn="pan"):bn="pan"),_(bn)?Ze.minDrag=1:Ze.minDrag=void 0,c(bn)?(Ze.xaxes=pe,Ze.yaxes=De,M(Jt,un,tn,Ze,bn)):(Ze.clickFn=mt,c(hn)&&dt(),ze||(bn==="zoom"?(Ze.moveFn=yt,Ze.doneFn=kt,Ze.minDrag=1,function(wn,Pn,Cn){var Mn=Rt.getBoundingClientRect();St=Pn-Mn.left,Ye=Cn-Mn.top,se._fullLayout._calcInverseTransform(se);var Bn=w.apply3DTransform(se._fullLayout._invTransform)(St,Ye);St=Bn[0],Ye=Bn[1],Ke={l:St,r:St,w:0,t:Ye,b:Ye,h:0},Ve=se._hmpixcount?se._hmlumcount/se._hmpixcount:T(se._fullLayout.plot_bgcolor).getLuminance(),lt=!1,it="xy",ot=!1,Be=H(gt,Ve,ke,Ee,$e="M0,0H"+Ie+"V"+Re+"H0V0"),je=U(gt,ke,Ee)}(0,un,tn)):bn==="pan"&&(Ze.moveFn=Ft,Ze.doneFn=Wt))),se._fullLayout._redrag=function(){var wn=se._dragdata;if(wn&&wn.element===Rt){var Pn=se._fullLayout.dragmode;c(Pn)||(Mt(),nn([0,0,Ie,Re]),Ze.moveFn(wn.dx,wn.dy))}}},l.init(Ze);var _t=[0,0,Ie,Re],Et=null,Lt=D.REDRAWDELAY,Ot=de.mainplot?se._fullLayout._plots[de.mainplot]:de;function Ft(Jt,un){if(Jt*=vt,un*=xt,!se._transitioningWithDuration){if(se._fullLayout._replotting=!0,we==="ew"||Ce==="ns"){var tn=we?-Jt:0,hn=Ce?-un:0;if(ge.isSubplotConstrained){if(we&&Ce){var bn=(Jt/Ie-un/Re)/2;tn=-(Jt=bn*Ie),hn=-(un=-bn*Re)}Ce?tn=-hn*Ie/Re:hn=-tn*Re/Ie}return we&&(Z(pe,Jt),Zt("x")),Ce&&(Z(De,un),Zt("y")),nn([tn,hn,Ie,Re]),Ht(),void se.emit("plotly_relayouting",at)}var wn,Pn,Cn=we==="w"==(Ce==="n")?1:-1;if(we&&Ce&&(Ne.isSubplotConstrained||ge.isSubplotConstrained)){var Mn=(Jt/Ie+Cn*un/Re)/2;Jt=Mn*Ie,un=Cn*Mn*Re}if(we==="w"?Jt=Yn(pe,0,Jt):we==="e"?Jt=Yn(pe,1,-Jt):we||(Jt=0),Ce==="n"?un=Yn(De,1,un):Ce==="s"?un=Yn(De,0,-un):Ce||(un=0),wn=we==="w"?Jt:0,Pn=Ce==="n"?un:0,Ne.isSubplotConstrained&&!ge.isSubplotConstrained||ge.isSubplotConstrained&&we&&Ce&&Cn>0){var Bn;if(ge.isSubplotConstrained||!we&&Ce.length===1){for(Bn=0;Bn<pe.length;Bn++)pe[Bn].range=pe[Bn]._r.slice(),k(pe[Bn],1-un/Re);wn=(Jt=un*Ie/Re)/2}if(ge.isSubplotConstrained||!Ce&&we.length===1){for(Bn=0;Bn<De.length;Bn++)De[Bn].range=De[Bn]._r.slice(),k(De[Bn],1-Jt/Ie);Pn=(un=Jt*Re/Ie)/2}}ge.isSubplotConstrained&&Ce||Zt("x"),ge.isSubplotConstrained&&we||Zt("y");var Nn=Ie-Jt,rr=Re-un;!ge.isSubplotConstrained||we&&Ce||(we?(Pn=wn?0:Jt*Re/Ie,rr=Nn*Re/Ie):(wn=Pn?0:un*Ie/Re,Nn=rr*Ie/Re)),nn([wn,Pn,Nn,rr]),Ht(),se.emit("plotly_relayouting",at)}function Yn(ir,Zn,ur){for(var en,on,Dn=1-Zn,yn=0;yn<ir.length;yn++){var Ln=ir[yn];if(!Ln.fixedrange){en=Ln,on=Ln._rl[Dn]+(Ln._rl[Zn]-Ln._rl[Dn])/z(ur/Ln._length);var Wn=Ln.l2r(on);Wn!==!1&&Wn!==void 0&&(Ln.range[Zn]=Wn)}}return en._length*(en._rl[Zn]-on)/(en._rl[Zn]-en._rl[Dn])}}function Zt(Jt,un){for(var tn=ge.isSubplotConstrained?{x:De,y:pe}[Jt]:ge[Jt+"axes"],hn=ge.isSubplotConstrained?{x:pe,y:De}[Jt]:[],bn=0;bn<tn.length;bn++){var wn=tn[bn],Pn=wn._id,Cn=ge.xLinks[Pn]||ge.yLinks[Pn],Mn=hn[0]||ce[Cn]||ae[Cn];Mn&&(un?(un[wn._name+".range[0]"]=un[Mn._name+".range[0]"],un[wn._name+".range[1]"]=un[Mn._name+".range[1]"]):wn.range=Mn.range.slice())}}function Ht(){var Jt,un=[];function tn(Pn){for(Jt=0;Jt<Pn.length;Jt++)Pn[Jt].fixedrange||un.push(Pn[Jt]._id)}function hn(Pn,Cn){for(Jt=0;Jt<Pn.length;Jt++){var Mn=Pn[Jt],Bn=Mn[Cn];Mn.fixedrange||Bn.tickmode!=="sync"||un.push(Bn._id)}}for(Pe&&(tn(pe),tn(Ne.xaxes),tn(ge.xaxes),hn(de.overlays,"xaxis")),Ue&&(tn(De),tn(Ne.yaxes),tn(ge.yaxes),hn(de.overlays,"yaxis")),at={},Jt=0;Jt<un.length;Jt++){var bn=un[Jt],wn=y(se,bn);a.drawOne(se,wn,{skipTitle:!0}),at[wn._name+".range[0]"]=wn.range[0],at[wn._name+".range[1]"]=wn.range[1]}a.redrawComponents(se,un)}function Ut(){if(!se._transitioningWithDuration){var Jt=se._context.doubleClick,un=[];we&&(un=un.concat(pe)),Ce&&(un=un.concat(De)),ge.xaxes&&(un=un.concat(ge.xaxes)),ge.yaxes&&(un=un.concat(ge.yaxes));var tn,hn,bn={};if(Jt==="reset+autosize")for(Jt="autosize",hn=0;hn<un.length;hn++){var wn=(tn=un[hn])._rangeInitial0,Pn=tn._rangeInitial1,Cn=wn!==void 0||Pn!==void 0;if(Cn&&(wn!==void 0&&wn!==tn.range[0]||Pn!==void 0&&Pn!==tn.range[1])||!Cn&&tn.autorange!==!0){Jt="reset";break}}if(Jt==="autosize")for(hn=0;hn<un.length;hn++)(tn=un[hn]).fixedrange||(bn[tn._name+".autorange"]=!0);else if(Jt==="reset"){for((we||Ne.isSubplotConstrained)&&(un=un.concat(Ne.xaxes)),Ce&&!Ne.isSubplotConstrained&&(un=un.concat(Ne.yaxes)),Ne.isSubplotConstrained&&(we?Ce||(un=un.concat(De)):un=un.concat(pe)),hn=0;hn<un.length;hn++)if(!(tn=un[hn]).fixedrange){var Mn=tn._name,Bn=tn._autorangeInitial;tn._rangeInitial0===void 0&&tn._rangeInitial1===void 0?bn[Mn+".autorange"]=!0:tn._rangeInitial0===void 0?(bn[Mn+".autorange"]=Bn,bn[Mn+".range"]=[null,tn._rangeInitial1]):tn._rangeInitial1===void 0?(bn[Mn+".range"]=[tn._rangeInitial0,null],bn[Mn+".autorange"]=Bn):bn[Mn+".range"]=[tn._rangeInitial0,tn._rangeInitial1]}}se.emit("plotly_doubleclick",null),f.call("_guiRelayout",se,bn)}}function Wt(){nn([0,0,Ie,Re]),w.syncOrAsync([b.previousPromises,function(){se._fullLayout._replotting=!1,f.call("_guiRelayout",se,at)}],se)}function nn(Jt){var un,tn,hn,bn,wn=se._fullLayout,Pn=wn._plots,Cn=wn._subplots.cartesian;if(Xe&&f.subplotsRegistry.splom.drag(se),Ge){for(un=0;un<Cn.length;un++)if(hn=(tn=Pn[Cn[un]]).xaxis,bn=tn.yaxis,tn._scene){var Mn=w.simpleMap(hn.range,hn.r2l),Bn=w.simpleMap(bn.range,bn.r2l);hn.limitRange&&hn.limitRange(),bn.limitRange&&bn.limitRange(),Mn=hn.range,Bn=bn.range,tn._scene.update({range:[Mn[0],Bn[0],Mn[1],Bn[1]]})}}if((Xe||Ge)&&(g(se),m(se)),st){var Nn=Jt[2]/Me._length,rr=Jt[3]/Ae._length;for(un=0;un<Cn.length;un++){hn=(tn=Pn[Cn[un]]).xaxis,bn=tn.yaxis;var Yn,ir,Zn,ur,en=(Pe||ge.isSubplotConstrained)&&!hn.fixedrange&&ce[hn._id],on=(Ue||ge.isSubplotConstrained)&&!bn.fixedrange&&ae[bn._id];if(en?(Yn=Nn,Zn=me||ge.isSubplotConstrained?Jt[0]:gn(hn,Yn)):ge.xaHash[hn._id]?(Yn=Nn,Zn=Jt[0]*hn._length/Me._length):ge.yaHash[hn._id]?(Yn=rr,Zn=Ce==="ns"?-Jt[1]*hn._length/Ae._length:gn(hn,Yn,{n:"top",s:"bottom"}[Ce])):Zn=kn(hn,Yn=On(hn,Nn,rr)),Yn>1&&(hn.maxallowed!==void 0&&Pe===(hn.range[0]<hn.range[1]?"e":"w")||hn.minallowed!==void 0&&Pe===(hn.range[0]<hn.range[1]?"w":"e"))&&(Yn=1,Zn=0),on?(ir=rr,ur=ye||ge.isSubplotConstrained?Jt[1]:gn(bn,ir)):ge.yaHash[bn._id]?(ir=rr,ur=Jt[1]*bn._length/Ae._length):ge.xaHash[bn._id]?(ir=Nn,ur=we==="ew"?-Jt[0]*bn._length/Me._length:gn(bn,ir,{e:"right",w:"left"}[we])):ur=kn(bn,ir=On(bn,Nn,rr)),ir>1&&(bn.maxallowed!==void 0&&Ue===(bn.range[0]<bn.range[1]?"n":"s")||bn.minallowed!==void 0&&Ue===(bn.range[0]<bn.range[1]?"s":"n"))&&(ir=1,ur=0),Yn||ir){Yn||(Yn=1),ir||(ir=1);var Dn=hn._offset-Zn/Yn,yn=bn._offset-ur/ir;tn.clipRect.call(r.setTranslate,Zn,ur).call(r.setScale,Yn,ir),tn.plot.call(r.setTranslate,Dn,yn).call(r.setScale,1/Yn,1/ir),Yn===tn.xScaleFactor&&ir===tn.yScaleFactor||(r.setPointGroupScale(tn.zoomScalePts,Yn,ir),r.setTextPointsScale(tn.zoomScaleTxt,Yn,ir)),r.hideOutsideRangePoints(tn.clipOnAxisFalseTraces,tn),tn.xScaleFactor=Yn,tn.yScaleFactor=ir}}}}function On(Jt,un,tn){return Jt.fixedrange?0:Pe&&Ne.xaHash[Jt._id]?un:Ue&&(Ne.isSubplotConstrained?Ne.xaHash:Ne.yaHash)[Jt._id]?tn:0}function kn(Jt,un){return un?(Jt.range=Jt._r.slice(),k(Jt,un),gn(Jt,un)):0}function gn(Jt,un,tn){return Jt._length*(1-un)*p[tn||Jt.constraintoward||"middle"]}return ye.length*me.length!=1&&oe(Rt,function(Jt){if(se._context._scrollZoom.cartesian||se._fullLayout._enablescrollzoom){if(dt(),se._transitioningWithDuration)return Jt.preventDefault(),void Jt.stopPropagation();Mt(),clearTimeout(Et);var un=-Jt.deltaY;if(isFinite(un)||(un=Jt.wheelDelta/10),isFinite(un)){var tn,hn=Math.exp(-Math.min(Math.max(un,-20),20)/200),bn=Ot.draglayer.select(".nsewdrag").node().getBoundingClientRect(),wn=(Jt.clientX-bn.left)/bn.width,Pn=(bn.bottom-Jt.clientY)/bn.height;if(Pe){for(me||(wn=.5),tn=0;tn<pe.length;tn++)Cn(pe[tn],wn,hn);Zt("x"),_t[2]*=hn,_t[0]+=_t[2]*wn*(1/hn-1)}if(Ue){for(ye||(Pn=.5),tn=0;tn<De.length;tn++)Cn(De[tn],Pn,hn);Zt("y"),_t[3]*=hn,_t[1]+=_t[3]*(1-Pn)*(1/hn-1)}nn(_t),Ht(),se.emit("plotly_relayouting",at),Et=setTimeout(function(){se._fullLayout&&(_t=[0,0,Ie,Re],Wt())},Lt),Jt.preventDefault()}else w.log("Did not find wheel motion attributes: ",Jt)}function Cn(Mn,Bn,Nn){if(!Mn.fixedrange){var rr=w.simpleMap(Mn.range,Mn.r2l),Yn=rr[0]+(rr[1]-rr[0])*Bn;Mn.range=rr.map(function(ir){return Mn.l2r(Yn+(ir-Yn)*Nn)})}}}),Rt},makeDragger:N,makeRectDragger:V,makeZoombox:H,makeCorners:U,updateZoombox:re,xyCorners:ne,transitionZoombox:ee,removeZoombox:J,showDoubleClickNotifier:Q,attachWheelEventHandler:oe}},42464:function(C,A,e){"use strict";var v=e(33428),w=e(93024),n=e(86476),T=e(93972),x=e(51184).makeDragBox,f=e(33816).DRAGGERSIZE;A.initInteractions=function(s){var t=s._fullLayout;if(s._context.staticPlot)v.select(s).selectAll(".drag").remove();else if(t._has("cartesian")||t._has("splom")){Object.keys(t._plots||{}).sort(function(r,i){if((t._plots[r].mainplot&&!0)===(t._plots[i].mainplot&&!0)){var a=r.split("y"),u=i.split("y");return a[0]===u[0]?Number(a[1]||1)-Number(u[1]||1):Number(a[0]||1)-Number(u[0]||1)}return t._plots[r].mainplot?1:-1}).forEach(function(r){var i=t._plots[r],a=i.xaxis,u=i.yaxis;if(!i.mainplot){var l=x(s,i,a._offset,u._offset,a._length,u._length,"ns","ew");l.onmousemove=function(_){s._fullLayout._rehover=function(){s._fullLayout._hoversubplot===r&&s._fullLayout._plots[r]&&w.hover(s,_,r)},w.hover(s,_,r),s._fullLayout._lasthover=l,s._fullLayout._hoversubplot=r},l.onmouseout=function(_){s._dragging||(s._fullLayout._hoversubplot=null,n.unhover(s,_))},s._context.showAxisDragHandles&&(x(s,i,a._offset-f,u._offset-f,f,f,"n","w"),x(s,i,a._offset+a._length,u._offset-f,f,f,"n","e"),x(s,i,a._offset-f,u._offset+u._length,f,f,"s","w"),x(s,i,a._offset+a._length,u._offset+u._length,f,f,"s","e"))}if(s._context.showAxisDragHandles){if(r===a._mainSubplot){var d=a._mainLinePosition;a.side==="top"&&(d-=f),x(s,i,a._offset+.1*a._length,d,.8*a._length,f,"","ew"),x(s,i,a._offset,d,.1*a._length,f,"","w"),x(s,i,a._offset+.9*a._length,d,.1*a._length,f,"","e")}if(r===u._mainSubplot){var c=u._mainLinePosition;u.side!=="right"&&(c-=f),x(s,i,c,u._offset+.1*u._length,f,.8*u._length,"ns",""),x(s,i,c,u._offset+.9*u._length,f,.1*u._length,"s",""),x(s,i,c,u._offset,f,.1*u._length,"n","")}}});var o=t._hoverlayer.node();o.onmousemove=function(r){r.target=s._fullLayout._lasthover,w.hover(s,r,t._hoversubplot)},o.onclick=function(r){r.target=s._fullLayout._lasthover,w.click(s,r)},o.onmousedown=function(r){s._fullLayout._lasthover.onmousedown(r)},A.updateFx(s)}},A.updateFx=function(s){var t=s._fullLayout,o=t.dragmode==="pan"?"move":"crosshair";T(t._draggers,o)}},36632:function(C,A,e){"use strict";var v=e(24040),w=e(3400),n=e(79811);C.exports=function(T){return function(x,f){var s=x[T];if(Array.isArray(s))for(var t=v.subplotsRegistry.cartesian,o=t.idRegex,r=f._subplots,i=r.xaxis,a=r.yaxis,u=r.cartesian,l=f._has("cartesian")||f._has("gl2d"),d=0;d<s.length;d++){var c=s[d];if(w.isPlainObject(c)){var _=n.cleanId(c.xref,"x",!1),p=n.cleanId(c.yref,"y",!1),g=o.x.test(_),m=o.y.test(p);if(g||m){l||w.pushUnique(f._basePlotModules,t);var b=!1;g&&i.indexOf(_)===-1&&(i.push(_),b=!0),m&&a.indexOf(p)===-1&&(a.push(p),b=!0),b&&g&&m&&u.push(_+p)}}}}}},57952:function(C,A,e){"use strict";var v=e(33428),w=e(24040),n=e(3400),T=e(7316),x=e(43616),f=e(84888)._M,s=e(79811),t=e(33816),o=e(9616),r=n.ensureSingle;function i(c,_,p){return n.ensureSingle(c,_,p,function(g){g.datum(p)})}function a(c,_,p,g,m){for(var b,y,M,h=t.traceLayerClasses,E=c._fullLayout,k=E._modules,D={},P=0;P<p.length;P++){var L=p[P][0].trace.zorder||0;D[L]||(D[L]=[]),D[L].push(p[P])}for(var O=[],N=[],V=Object.keys(D).map(Number).sort(n.sorterAsc),F=0;F<V.length;F++)for(var j=V[F],Z=0;Z<k.length;Z++){var z=(b=k[Z]).name,H=w.modules[z].categories;if(H.svg){var U=b.layerName||z+"layer",re=U+(F?Number(F)+1:""),ee=b.plot;M=(y=f(p,ee,j))[0],p=y[1],M.length&&O.push({i:h.indexOf(U),zorder:F,className:re,plotMethod:ee,cdModule:M}),H.zoomScale&&N.push("."+re)}}O.sort(function(ne,K){return(ne.zorder||0)-(K.zorder||0)||ne.i-K.i});var J=_.plot.selectAll("g.mlayer").data(O,function(ne){return ne.className});if(J.enter().append("g").attr("class",function(ne){return ne.className}).classed("mlayer",!0).classed("rangeplot",_.isRangePlot),J.exit().remove(),J.order(),J.each(function(ne){var K=v.select(this),oe=ne.className;ne.plotMethod(c,_,ne.cdModule,K,g,m),t.clipOnAxisFalseQuery.indexOf("."+oe)===-1&&x.setClipUrl(K,_.layerClipId,c)}),E._has("scattergl")&&(b=w.getModule("scattergl"),M=f(p,b)[0],b.plot(c,_,M)),!c._context.staticPlot&&(_._hasClipOnAxisFalse&&(_.clipOnAxisFalseTraces=_.plot.selectAll(t.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),N.length)){var Q=_.plot.selectAll(N.join(",")).selectAll(".trace");_.zoomScalePts=Q.selectAll("path.point"),_.zoomScaleTxt=Q.selectAll(".textpoint")}}function u(c,_){var p=_.plotgroup,g=_.id,m=t.layerValue2layerClass[_.xaxis.layer],b=t.layerValue2layerClass[_.yaxis.layer],y=c._fullLayout._hasOnlyLargeSploms;if(_.mainplot){var M=_.mainplotinfo,h=M.plotgroup,E=g+"-x",k=g+"-y";_.minorGridlayer=M.minorGridlayer,_.gridlayer=M.gridlayer,_.zerolinelayer=M.zerolinelayer,r(M.overlinesBelow,"path",E),r(M.overlinesBelow,"path",k),r(M.overaxesBelow,"g",E),r(M.overaxesBelow,"g",k),_.plot=r(M.overplot,"g",g),r(M.overlinesAbove,"path",E),r(M.overlinesAbove,"path",k),r(M.overaxesAbove,"g",E),r(M.overaxesAbove,"g",k),_.xlines=h.select(".overlines-"+m).select("."+E),_.ylines=h.select(".overlines-"+b).select("."+k),_.xaxislayer=h.select(".overaxes-"+m).select("."+E),_.yaxislayer=h.select(".overaxes-"+b).select("."+k)}else if(y)_.xlines=r(p,"path","xlines-above"),_.ylines=r(p,"path","ylines-above"),_.xaxislayer=r(p,"g","xaxislayer-above"),_.yaxislayer=r(p,"g","yaxislayer-above");else{var D=r(p,"g","layer-subplot");_.shapelayer=r(D,"g","shapelayer"),_.imagelayer=r(D,"g","imagelayer"),_.minorGridlayer=r(p,"g","minor-gridlayer"),_.gridlayer=r(p,"g","gridlayer"),_.zerolinelayer=r(p,"g","zerolinelayer");var P=r(p,"g","layer-between");_.shapelayerBetween=r(P,"g","shapelayer"),_.imagelayerBetween=r(P,"g","imagelayer"),r(p,"path","xlines-below"),r(p,"path","ylines-below"),_.overlinesBelow=r(p,"g","overlines-below"),r(p,"g","xaxislayer-below"),r(p,"g","yaxislayer-below"),_.overaxesBelow=r(p,"g","overaxes-below"),_.plot=r(p,"g","plot"),_.overplot=r(p,"g","overplot"),_.xlines=r(p,"path","xlines-above"),_.ylines=r(p,"path","ylines-above"),_.overlinesAbove=r(p,"g","overlines-above"),r(p,"g","xaxislayer-above"),r(p,"g","yaxislayer-above"),_.overaxesAbove=r(p,"g","overaxes-above"),_.xlines=p.select(".xlines-"+m),_.ylines=p.select(".ylines-"+b),_.xaxislayer=p.select(".xaxislayer-"+m),_.yaxislayer=p.select(".yaxislayer-"+b)}y||(i(_.minorGridlayer,"g",_.xaxis._id),i(_.minorGridlayer,"g",_.yaxis._id),_.minorGridlayer.selectAll("g").map(function(L){return L[0]}).sort(s.idSort),i(_.gridlayer,"g",_.xaxis._id),i(_.gridlayer,"g",_.yaxis._id),_.gridlayer.selectAll("g").map(function(L){return L[0]}).sort(s.idSort)),_.xlines.style("fill","none").classed("crisp",!0),_.ylines.style("fill","none").classed("crisp",!0)}function l(c,_){if(c){var p={};for(var g in c.each(function(M){var h=M[0];v.select(this).remove(),d(h,_),p[h]=!0}),_._plots)for(var m=_._plots[g].overlays||[],b=0;b<m.length;b++){var y=m[b];p[y.id]&&y.plot.selectAll(".trace").remove()}}}function d(c,_){_._draggers.selectAll("g."+c).remove(),_._defs.select("#clip"+_._uid+c+"plot").remove()}A.name="cartesian",A.attr=["xaxis","yaxis"],A.idRoot=["x","y"],A.idRegex=t.idRegex,A.attrRegex=t.attrRegex,A.attributes=e(26720),A.layoutAttributes=e(94724),A.supplyLayoutDefaults=e(67352),A.transitionAxes=e(73736),A.finalizeSubplots=function(c,_){var p,g,m,b=_._subplots,y=b.xaxis,M=b.yaxis,h=b.cartesian,E=h.concat(b.gl2d||[]),k={},D={};for(p=0;p<E.length;p++){var P=E[p].split("y");k[P[0]]=1,D["y"+P[1]]=1}for(p=0;p<y.length;p++)k[g=y[p]]||(m=(c[s.id2name(g)]||{}).anchor,t.idRegex.y.test(m)||(m="y"),h.push(g+m),E.push(g+m),D[m]||(D[m]=1,n.pushUnique(M,m)));for(p=0;p<M.length;p++)D[m=M[p]]||(g=(c[s.id2name(m)]||{}).anchor,t.idRegex.x.test(g)||(g="x"),h.push(g+m),E.push(g+m),k[g]||(k[g]=1,n.pushUnique(y,g)));if(!E.length){for(var L in g="",m="",c)t.attrRegex.test(L)&&(L.charAt(0)==="x"?(!g||+L.substr(5)<+g.substr(5))&&(g=L):(!m||+L.substr(5)<+m.substr(5))&&(m=L));g=g?s.name2id(g):"x",m=m?s.name2id(m):"y",y.push(g),M.push(m),h.push(g+m)}},A.plot=function(c,_,p,g){var m,b=c._fullLayout,y=b._subplots.cartesian,M=c.calcdata;if(!Array.isArray(_))for(_=[],m=0;m<M.length;m++)_.push(m);for(m=0;m<y.length;m++){for(var h,E=y[m],k=b._plots[E],D=[],P=0;P<M.length;P++){var L=M[P],O=L[0].trace;O.xaxis+O.yaxis===E&&((_.indexOf(O.index)!==-1||O.carpet)&&(h&&h[0].trace.xaxis+h[0].trace.yaxis===E&&["tonextx","tonexty","tonext"].indexOf(O.fill)!==-1&&D.indexOf(h)===-1&&D.push(h),D.push(L)),h=L)}a(c,k,D,p,g)}},A.clean=function(c,_,p,g){var m,b,y,M=g._plots||{},h=_._plots||{},E=g._subplots||{};if(g._hasOnlyLargeSploms&&!_._hasOnlyLargeSploms)for(y in M)(m=M[y]).plotgroup&&m.plotgroup.remove();var k=g._has&&g._has("gl"),D=_._has&&_._has("gl");if(k&&!D)for(y in M)(m=M[y])._scene&&m._scene.destroy();if(E.xaxis&&E.yaxis){var P=s.listIds({_fullLayout:g});for(b=0;b<P.length;b++){var L=P[b];_[s.id2name(L)]||g._infolayer.selectAll(".g-"+L+"title").remove()}}var O=g._has&&g._has("cartesian"),N=_._has&&_._has("cartesian");if(O&&!N)l(g._cartesianlayer.selectAll(".subplot"),g),g._defs.selectAll(".axesclip").remove(),delete g._axisConstraintGroups,delete g._axisMatchGroups;else if(E.cartesian)for(b=0;b<E.cartesian.length;b++){var V=E.cartesian[b];if(!h[V]){var F="."+V+",."+V+"-x,."+V+"-y";g._cartesianlayer.selectAll(F).remove(),d(V,g)}}},A.drawFramework=function(c){var _=c._fullLayout,p=function(m){var b,y,M,h,E,k,D=m._fullLayout,P=D._subplots.cartesian,L=P.length,O=[],N=[];for(b=0;b<L;b++){M=P[b],E=(h=D._plots[M]).xaxis,k=h.yaxis;var V=E._mainAxis,F=k._mainAxis,j=V._id+F._id,Z=D._plots[j];h.overlays=[],j!==M&&Z?(h.mainplot=j,h.mainplotinfo=Z,N.push(M)):(h.mainplot=void 0,h.mainplotinfo=void 0,O.push(M))}for(b=0;b<N.length;b++)M=N[b],(h=D._plots[M]).mainplotinfo.overlays.push(h);var z=O.concat(N),H=new Array(L);for(b=0;b<L;b++){M=z[b],E=(h=D._plots[M]).xaxis,k=h.yaxis;var U=[M,E.layer,k.layer,E.overlaying||"",k.overlaying||""];for(y=0;y<h.overlays.length;y++)U.push(h.overlays[y].id);H[b]=U}return H}(c),g=_._cartesianlayer.selectAll(".subplot").data(p,String);g.enter().append("g").attr("class",function(m){return"subplot "+m[0]}),g.order(),g.exit().call(l,_),g.each(function(m){var b=m[0],y=_._plots[b];y.plotgroup=v.select(this),u(c,y),y.draglayer=r(_._draggers,"g",b)})},A.rangePlot=function(c,_,p){u(c,_),a(c,_,p),T.style(c)},A.toSVG=function(c){var _=c._fullLayout._glimages,p=v.select(c).selectAll(".svg-container");p.filter(function(g,m){return m===p.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var g=this,m=g.toDataURL("image/png");_.append("svg:image").attr({xmlns:o.svg,"xlink:href":m,preserveAspectRatio:"none",x:0,y:0,width:g.style.width,height:g.style.height})})},A.updateFx=e(42464).updateFx},94724:function(C,A,e){"use strict";var v=e(25376),w=e(22548),n=e(98192).u,T=e(92880).extendFlat,x=e(31780).templatedArray,f=e(29736).descriptionWithDates,s=e(39032).ONEDAY,t=e(33816),o=t.HOUR_PATTERN,r=t.WEEKDAY_PATTERN,i={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},a=T({},i,{values:i.values.slice().concat(["sync"])});function u(E){return{valType:"integer",min:0,dflt:E?5:0,editType:"ticks"}}var l={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},d={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},c={valType:"data_array",editType:"ticks"},_={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function p(E){var k={valType:"number",min:0,editType:"ticks"};return E||(k.dflt=5),k}function g(E){var k={valType:"number",min:0,editType:"ticks"};return E||(k.dflt=1),k}var m={valType:"color",dflt:w.defaultLine,editType:"ticks"},b={valType:"color",dflt:w.lightLine,editType:"ticks"};function y(E){var k={valType:"number",min:0,editType:"ticks"};return E||(k.dflt=1),k}var M=T({},n,{editType:"ticks"}),h={valType:"boolean",editType:"ticks"};C.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:w.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:v({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},scaleanchor:{valType:"enumerated",values:[t.idRegex.x.toString(),t.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"calc"},rangebreaks:x("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[r,o,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:s},editType:"calc"}),tickmode:a,nticks:u(),tick0:l,dtick:d,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:c,ticktext:{valType:"data_array",editType:"ticks"},ticks:_,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:p(),tickwidth:g(),tickcolor:m,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:T({},n,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:v({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},autotickangles:{valType:"info_array",freeLength:!0,items:{valType:"angle"},dflt:[0,30,90],editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:f("tick label")},tickformatstops:x("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:f("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:w.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:h,gridcolor:b,gridwidth:y(),griddash:M,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:w.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:w.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},minor:{tickmode:i,nticks:u("minor"),tick0:l,dtick:d,tickvals:c,ticks:_,ticklen:p("minor"),tickwidth:g("minor"),tickcolor:m,gridcolor:b,gridwidth:y("minor"),griddash:M,showgrid:h,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:v({editType:"ticks"})}}},67352:function(C,A,e){"use strict";var v=e(3400),w=e(76308),n=e(10624).isUnifiedHover,T=e(41008),x=e(31780),f=e(64859),s=e(94724),t=e(14944),o=e(28336),r=e(71888),i=e(37668),a=e(79811),u=a.id2name,l=a.name2id,d=e(33816).AX_ID_PATTERN,c=e(24040),_=c.traceIs,p=c.getComponentMethod;function g(m,b,y){Array.isArray(m[b])?m[b].push(y):m[b]=[y]}C.exports=function(m,b,y){var M,h,E=b.autotypenumbers,k={},D={},P={},L={},O={},N={},V={},F={},j={},Z={};for(M=0;M<y.length;M++){var z=y[M];if(_(z,"cartesian")||_(z,"gl2d")){var H,U;if(z.xaxis)H=u(z.xaxis),g(k,H,z);else if(z.xaxes)for(h=0;h<z.xaxes.length;h++)g(k,u(z.xaxes[h]),z);if(z.yaxis)U=u(z.yaxis),g(k,U,z);else if(z.yaxes)for(h=0;h<z.yaxes.length;h++)g(k,u(z.yaxes[h]),z);z.type==="funnel"?z.orientation==="h"?(H&&(D[H]=!0),U&&(V[U]=!0)):U&&(P[U]=!0):z.type==="image"?(U&&(F[U]=!0),H&&(F[H]=!0)):(U&&(O[U]=!0,N[U]=!0),_(z,"carpet")&&(z.type!=="carpet"||z._cheater)||H&&(L[H]=!0)),z.type==="carpet"&&z._cheater&&H&&(D[H]=!0),_(z,"2dMap")&&(j[H]=!0,j[U]=!0),_(z,"oriented")&&(Z[z.orientation==="h"?U:H]=!0)}}var re=b._subplots,ee=re.xaxis,J=re.yaxis,Q=v.simpleMap(ee,u),ne=v.simpleMap(J,u),K=Q.concat(ne),oe=w.background;ee.length&&J.length&&(oe=v.coerce(m,b,f,"plot_bgcolor"));var le,se,de,be,_e,xe=w.combine(oe,b.paper_bgcolor);function ve(){var tt=k[le]||[];_e._traceIndices=tt.map(function(Mt){return Mt._expandedIndex}),_e._annIndices=[],_e._shapeIndices=[],_e._selectionIndices=[],_e._imgIndices=[],_e._subplotsWith=[],_e._counterAxes=[],_e._name=_e._attr=le,_e._id=se}function ye(tt,Mt){return v.coerce(be,_e,s,tt,Mt)}function me(tt,Mt){return v.coerce2(be,_e,s,tt,Mt)}function Me(tt){return tt==="x"?J:ee}function Ae(tt,Mt){for(var Pt=tt==="x"?Q:ne,Rt=[],St=0;St<Pt.length;St++){var Ye=Pt[St];Ye===Mt||(m[Ye]||{}).overlaying||Rt.push(l(Ye))}return Rt}var ce={x:Me("x"),y:Me("y")},ae=ce.x.concat(ce.y),pe={},De=[];function ke(){var tt=be.matches;d.test(tt)&&ae.indexOf(tt)===-1&&(pe[tt]=be.type,De=Object.keys(pe))}var Ee=T(m,b),Ie=n(Ee);for(M=0;M<K.length;M++){le=K[M],se=l(le),de=le.charAt(0),v.isPlainObject(m[le])||(m[le]={}),be=m[le],_e=x.newContainer(b,le,de+"axis"),ve();var Re=de==="x"&&!L[le]&&D[le]||de==="y"&&!O[le]&&P[le],Ne=de==="y"&&(!N[le]&&V[le]||F[le]),ge={hasMinor:!0,letter:de,font:b.font,outerTicks:j[le],showGrid:!Z[le],data:k[le]||[],bgColor:xe,calendar:b.calendar,automargin:!0,visibleDflt:Re,reverseDflt:Ne,autotypenumbersDflt:E,splomStash:((b._splomAxes||{})[de]||{})[se],noAutotickangles:de==="y"};ye("uirevision",b.uirevision),t(be,_e,ye,ge),o(be,_e,ye,ge,b);var we=Ie&&de===Ee.charAt(0),Ce=me("spikecolor",Ie?_e.color:void 0),ze=me("spikethickness",Ie?1.5:void 0),Pe=me("spikedash",Ie?"dot":void 0),Ue=me("spikemode",Ie?"across":void 0),Ge=me("spikesnap");ye("showspikes",!!(we||Ce||ze||Pe||Ue||Ge))||(delete _e.spikecolor,delete _e.spikethickness,delete _e.spikedash,delete _e.spikemode,delete _e.spikesnap);var Xe=u(be.overlaying),st=[0,1];if(b[Xe]!==void 0){var at=u(b[Xe].anchor);b[at]!==void 0&&(st=b[at].domain)}i(be,_e,ye,{letter:de,counterAxes:ce[de],overlayableAxes:Ae(de,le),grid:b.grid,overlayingDomain:st}),ye("title.standoff"),ke(),_e._input=be}for(M=0;M<De.length;){se=De[M++],de=(le=u(se)).charAt(0),v.isPlainObject(m[le])||(m[le]={}),be=m[le],_e=x.newContainer(b,le,de+"axis"),ve();var vt={letter:de,font:b.font,outerTicks:j[le],showGrid:!Z[le],data:[],bgColor:xe,calendar:b.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:E,splomStash:((b._splomAxes||{})[de]||{})[se]};ye("uirevision",b.uirevision),_e.type=pe[se]||"linear",o(be,_e,ye,vt,b),i(be,_e,ye,{letter:de,counterAxes:ce[de],overlayableAxes:Ae(de,le),grid:b.grid}),ye("fixedrange"),ke(),_e._input=be}var xt=p("rangeslider","handleDefaults"),gt=p("rangeselector","handleDefaults");for(M=0;M<Q.length;M++)le=Q[M],be=m[le],_e=b[le],xt(m,b,le),_e.type==="date"&&gt(be,_e,b,ne,_e.calendar),ye("fixedrange");for(M=0;M<ne.length;M++){le=ne[M],be=m[le],_e=b[le];var rt=b[u(_e.anchor)];ye("fixedrange",p("rangeslider","isVisible")(rt))}r.handleDefaults(m,b,{axIds:ae.concat(De).sort(a.idSort),axHasImage:F})}},42136:function(C,A,e){"use strict";var v=e(49760).mix,w=e(22548),n=e(3400);C.exports=function(T,x,f,s){var t=(s=s||{}).dfltColor;function o(m,b){return n.coerce2(T,x,s.attributes,m,b)}var r=o("linecolor",t),i=o("linewidth");f("showline",s.showLine||!!r||!!i)||(delete x.linecolor,delete x.linewidth);var a=o("gridcolor",v(t,s.bgColor,s.blend||w.lightFraction).toRgbString()),u=o("gridwidth"),l=o("griddash");if(f("showgrid",s.showGrid||!!a||!!u||!!l)||(delete x.gridcolor,delete x.gridwidth,delete x.griddash),s.hasMinor){var d=o("minor.gridcolor",v(x.gridcolor,s.bgColor,67).toRgbString()),c=o("minor.gridwidth",x.gridwidth||1),_=o("minor.griddash",x.griddash||"solid");f("minor.showgrid",!!d||!!c||!!_)||(delete x.minor.gridcolor,delete x.minor.gridwidth,delete x.minor.griddash)}if(!s.noZeroLine){var p=o("zerolinecolor",t),g=o("zerolinewidth");f("zeroline",s.showGrid||!!p||!!g)||(delete x.zerolinecolor,delete x.zerolinewidth)}}},37668:function(C,A,e){"use strict";var v=e(38248),w=e(3400);C.exports=function(n,T,x,f){var s,t,o,r,i,a,u=f.counterAxes||[],l=f.overlayableAxes||[],d=f.letter,c=f.grid,_=f.overlayingDomain;c&&(t=c._domains[d][c._axisMap[T._id]],s=c._anchors[T._id],t&&(o=c[d+"side"].split(" ")[0],r=c.domain[d][o==="right"||o==="top"?1:0])),t=t||[0,1],s=s||(v(n.position)?"free":u[0]||"free"),o=o||(d==="x"?"bottom":"left"),r=r||0,i=0,a=!1;var p=w.coerce(n,T,{anchor:{valType:"enumerated",values:["free"].concat(u),dflt:s}},"anchor"),g=w.coerce(n,T,{side:{valType:"enumerated",values:d==="x"?["bottom","top"]:["left","right"],dflt:o}},"side");p==="free"&&(d==="y"&&(x("autoshift")&&(r=g==="left"?_[0]:_[1],a=!T.automargin||T.automargin,i=g==="left"?-3:3),x("shift",i)),x("position",r)),x("automargin",a);var m=!1;if(l.length&&(m=w.coerce(n,T,{overlaying:{valType:"enumerated",values:[!1].concat(l),dflt:!1}},"overlaying")),!m){var b=x("domain",t);b[0]>b[1]-.000244140625&&(T.domain=t),w.noneOrAll(n.domain,T.domain,t),T.tickmode==="sync"&&(T.tickmode="auto")}return x("layer"),T}},42568:function(C,A,e){"use strict";var v=e(85024);C.exports=function(w,n,T,x,f){f||(f={});var s=f.tickSuffixDflt,t=v(w);T("tickprefix")&&T("showtickprefix",t),T("ticksuffix",s)&&T("showticksuffix",t)}},96312:function(C,A,e){"use strict";var v=e(76808);C.exports=function(w,n,T,x){var f=n._template||{},s=n.type||f.type||"-";T("minallowed"),T("maxallowed");var t,o=T("range");o||x.noInsiderange||s==="log"||(!(t=T("insiderange"))||t[0]!==null&&t[1]!==null||(n.insiderange=!1,t=void 0),t&&(o=T("range",t)));var r,i=n.getAutorangeDflt(o,x),a=T("autorange",i);!o||(o[0]!==null||o[1]!==null)&&(o[0]!==null&&o[1]!==null||a!=="reversed"&&a!==!0)&&(o[0]===null||a!=="min"&&a!=="max reversed")&&(o[1]===null||a!=="max"&&a!=="min reversed")||(o=void 0,delete n.range,n.autorange=!0,r=!0),r||(a=T("autorange",i=n.getAutorangeDflt(o,x))),a&&(v(T,a,o),s!=="linear"&&s!=="-"||T("rangemode")),n.cleanRange()}},21160:function(C,A,e){"use strict";var v=e(84284).FROM_BL;C.exports=function(w,n,T){T===void 0&&(T=v[w.constraintoward||"center"]);var x=[w.r2l(w.range[0]),w.r2l(w.range[1])],f=x[0]+(x[1]-x[0])*T;w.range=w._input.range=[w.l2r(f+(x[0]-f)*n),w.l2r(f+(x[1]-f)*n)],w.setScale()}},78344:function(C,A,e){"use strict";var v=e(33428),w=e(94336).E9,n=e(3400),T=n.numberFormat,x=e(38248),f=n.cleanNumber,s=n.ms2DateTime,t=n.dateTime2ms,o=n.ensureNumber,r=n.isArrayOrTypedArray,i=e(39032),a=i.FP_SAFE,u=i.BADNUM,l=i.LOG_CLIP,d=i.ONEWEEK,c=i.ONEDAY,_=i.ONEHOUR,p=i.ONEMIN,g=i.ONESEC,m=e(79811),b=e(33816),y=b.HOUR_PATTERN,M=b.WEEKDAY_PATTERN;function h(k){return Math.pow(10,k)}function E(k){return k!=null}C.exports=function(k,D){D=D||{};var P=k._id||"x",L=P.charAt(0);function O(K,oe){if(K>0)return Math.log(K)/Math.LN10;if(K<=0&&oe&&k.range&&k.range.length===2){var le=k.range[0],se=k.range[1];return .5*(le+se-2*l*Math.abs(le-se))}return u}function N(K,oe,le,se){if((se||{}).msUTC&&x(K))return+K;var de=t(K,le||k.calendar);if(de===u){if(!x(K))return u;K=+K;var be=Math.floor(10*n.mod(K+.05,1)),_e=Math.round(K-be/10);de=t(new Date(_e))+be/10}return de}function V(K,oe,le){return s(K,oe,le||k.calendar)}function F(K){return k._categories[Math.round(K)]}function j(K){if(E(K)){if(k._categoriesMap===void 0&&(k._categoriesMap={}),k._categoriesMap[K]!==void 0)return k._categoriesMap[K];k._categories.push(typeof K=="number"?String(K):K);var oe=k._categories.length-1;return k._categoriesMap[K]=oe,oe}return u}function Z(K){if(k._categoriesMap)return k._categoriesMap[K]}function z(K){var oe=Z(K);return oe!==void 0?oe:x(K)?+K:void 0}function H(K){return x(K)?+K:Z(K)}function U(K,oe,le){return v.round(le+oe*K,2)}function re(K,oe,le){return(K-le)/oe}var ee=function(K){return x(K)?U(K,k._m,k._b):u},J=function(K){return re(K,k._m,k._b)};if(k.rangebreaks){var Q=L==="y";ee=function(K){if(!x(K))return u;var oe=k._rangebreaks.length;if(!oe)return U(K,k._m,k._b);var le=Q;k.range[0]>k.range[1]&&(le=!le);for(var se=le?-1:1,de=se*K,be=0,_e=0;_e<oe;_e++){var xe=se*k._rangebreaks[_e].min,ve=se*k._rangebreaks[_e].max;if(de<xe)break;if(!(de>ve)){be=de<(xe+ve)/2?_e:_e+1;break}be=_e+1}var ye=k._B[be]||0;return isFinite(ye)?U(K,k._m2,ye):0},J=function(K){var oe=k._rangebreaks.length;if(!oe)return re(K,k._m,k._b);for(var le=0,se=0;se<oe&&!(K<k._rangebreaks[se].pmin);se++)K>k._rangebreaks[se].pmax&&(le=se+1);return re(K,k._m2,k._B[le])}}k.c2l=k.type==="log"?O:o,k.l2c=k.type==="log"?h:o,k.l2p=ee,k.p2l=J,k.c2p=k.type==="log"?function(K,oe){return ee(O(K,oe))}:ee,k.p2c=k.type==="log"?function(K){return h(J(K))}:J,["linear","-"].indexOf(k.type)!==-1?(k.d2r=k.r2d=k.d2c=k.r2c=k.d2l=k.r2l=f,k.c2d=k.c2r=k.l2d=k.l2r=o,k.d2p=k.r2p=function(K){return k.l2p(f(K))},k.p2d=k.p2r=J,k.cleanPos=o):k.type==="log"?(k.d2r=k.d2l=function(K,oe){return O(f(K),oe)},k.r2d=k.r2c=function(K){return h(f(K))},k.d2c=k.r2l=f,k.c2d=k.l2r=o,k.c2r=O,k.l2d=h,k.d2p=function(K,oe){return k.l2p(k.d2r(K,oe))},k.p2d=function(K){return h(J(K))},k.r2p=function(K){return k.l2p(f(K))},k.p2r=J,k.cleanPos=o):k.type==="date"?(k.d2r=k.r2d=n.identity,k.d2c=k.r2c=k.d2l=k.r2l=N,k.c2d=k.c2r=k.l2d=k.l2r=V,k.d2p=k.r2p=function(K,oe,le){return k.l2p(N(K,0,le))},k.p2d=k.p2r=function(K,oe,le){return V(J(K),oe,le)},k.cleanPos=function(K){return n.cleanDate(K,u,k.calendar)}):k.type==="category"?(k.d2c=k.d2l=j,k.r2d=k.c2d=k.l2d=F,k.d2r=k.d2l_noadd=z,k.r2c=function(K){var oe=H(K);return oe!==void 0?oe:k.fraction2r(.5)},k.l2r=k.c2r=o,k.r2l=H,k.d2p=function(K){return k.l2p(k.r2c(K))},k.p2d=function(K){return F(J(K))},k.r2p=k.d2p,k.p2r=J,k.cleanPos=function(K){return typeof K=="string"&&K!==""?K:o(K)}):k.type==="multicategory"&&(k.r2d=k.c2d=k.l2d=F,k.d2r=k.d2l_noadd=z,k.r2c=function(K){var oe=z(K);return oe!==void 0?oe:k.fraction2r(.5)},k.r2c_just_indices=Z,k.l2r=k.c2r=o,k.r2l=z,k.d2p=function(K){return k.l2p(k.r2c(K))},k.p2d=function(K){return F(J(K))},k.r2p=k.d2p,k.p2r=J,k.cleanPos=function(K){return Array.isArray(K)||typeof K=="string"&&K!==""?K:o(K)},k.setupMultiCategory=function(K){var oe,le,se=k._traceIndices,de=k._matchGroup;if(de&&k._categories.length===0){for(var be in de)if(be!==P){var _e=D[m.id2name(be)];se=se.concat(_e._traceIndices)}}var xe=[[0,{}],[0,{}]],ve=[];for(oe=0;oe<se.length;oe++){var ye=K[se[oe]];if(L in ye){var me=ye[L],Me=ye._length||n.minRowLength(me);if(r(me[0])&&r(me[1]))for(le=0;le<Me;le++){var Ae=me[0][le],ce=me[1][le];E(Ae)&&E(ce)&&(ve.push([Ae,ce]),Ae in xe[0][1]||(xe[0][1][Ae]=xe[0][0]++),ce in xe[1][1]||(xe[1][1][ce]=xe[1][0]++))}}}for(ve.sort(function(ae,pe){var De=xe[0][1],ke=De[ae[0]]-De[pe[0]];if(ke)return ke;var Ee=xe[1][1];return Ee[ae[1]]-Ee[pe[1]]}),oe=0;oe<ve.length;oe++)j(ve[oe])}),k.fraction2r=function(K){var oe=k.r2l(k.range[0]),le=k.r2l(k.range[1]);return k.l2r(oe+K*(le-oe))},k.r2fraction=function(K){var oe=k.r2l(k.range[0]),le=k.r2l(k.range[1]);return(k.r2l(K)-oe)/(le-oe)},k.limitRange=function(K){var oe=k.minallowed,le=k.maxallowed;if(oe!==void 0||le!==void 0){K||(K="range");var se=n.nestedProperty(k,K).get(),de=n.simpleMap(se,k.r2l),be=de[1]<de[0];be&&de.reverse();var _e=n.simpleMap([oe,le],k.r2l);if(oe!==void 0&&de[0]<_e[0]&&(se[be?1:0]=oe),le!==void 0&&de[1]>_e[1]&&(se[be?0:1]=le),se[0]===se[1]){var xe=k.l2r(oe),ve=k.l2r(le);if(oe!==void 0){var ye=xe+1;le!==void 0&&(ye=Math.min(ye,ve)),se[be?1:0]=ye}if(le!==void 0){var me=ve+1;oe!==void 0&&(me=Math.max(me,xe)),se[be?0:1]=me}}}},k.cleanRange=function(K,oe){k._cleanRange(K,oe),k.limitRange(K)},k._cleanRange=function(K,oe){oe||(oe={}),K||(K="range");var le,se,de=n.nestedProperty(k,K).get();if(se=(se=k.type==="date"?n.dfltRange(k.calendar):L==="y"?b.DFLTRANGEY:k._name==="realaxis"?[0,1]:oe.dfltRange||b.DFLTRANGEX).slice(),k.rangemode!=="tozero"&&k.rangemode!=="nonnegative"||(se[0]=0),de&&de.length===2){var be=de[0]===null,_e=de[1]===null;for(k.type!=="date"||k.autorange||(de[0]=n.cleanDate(de[0],u,k.calendar),de[1]=n.cleanDate(de[1],u,k.calendar)),le=0;le<2;le++)if(k.type==="date"){if(!n.isDateTime(de[le],k.calendar)){k[K]=se;break}if(k.r2l(de[0])===k.r2l(de[1])){var xe=n.constrain(k.r2l(de[0]),n.MIN_MS+1e3,n.MAX_MS-1e3);de[0]=k.l2r(xe-1e3),de[1]=k.l2r(xe+1e3);break}}else{if(!x(de[le])){if(be||_e||!x(de[1-le])){k[K]=se;break}de[le]=de[1-le]*(le?10:.1)}if(de[le]<-a?de[le]=-a:de[le]>a&&(de[le]=a),de[0]===de[1]){var ve=Math.max(1,Math.abs(1e-6*de[0]));de[0]-=ve,de[1]+=ve}}}else n.nestedProperty(k,K).set(se)},k.setScale=function(K){var oe=D._size;if(k.overlaying){var le=m.getFromId({_fullLayout:D},k.overlaying);k.domain=le.domain}var se=K&&k._r?"_r":"range",de=k.calendar;k.cleanRange(se);var be,_e,xe=k.r2l(k[se][0],de),ve=k.r2l(k[se][1],de),ye=L==="y";if(ye?(k._offset=oe.t+(1-k.domain[1])*oe.h,k._length=oe.h*(k.domain[1]-k.domain[0]),k._m=k._length/(xe-ve),k._b=-k._m*ve):(k._offset=oe.l+k.domain[0]*oe.w,k._length=oe.w*(k.domain[1]-k.domain[0]),k._m=k._length/(ve-xe),k._b=-k._m*xe),k._rangebreaks=[],k._lBreaks=0,k._m2=0,k._B=[],k.rangebreaks&&(k._rangebreaks=k.locateBreaks(Math.min(xe,ve),Math.max(xe,ve)),k._rangebreaks.length)){for(be=0;be<k._rangebreaks.length;be++)_e=k._rangebreaks[be],k._lBreaks+=Math.abs(_e.max-_e.min);var me=ye;xe>ve&&(me=!me),me&&k._rangebreaks.reverse();var Me=me?-1:1;for(k._m2=Me*k._length/(Math.abs(ve-xe)-k._lBreaks),k._B.push(-k._m2*(ye?ve:xe)),be=0;be<k._rangebreaks.length;be++)_e=k._rangebreaks[be],k._B.push(k._B[k._B.length-1]-Me*k._m2*(_e.max-_e.min));for(be=0;be<k._rangebreaks.length;be++)(_e=k._rangebreaks[be]).pmin=ee(_e.min),_e.pmax=ee(_e.max)}if(!isFinite(k._m)||!isFinite(k._b)||k._length<0)throw D._replotting=!1,new Error("Something went wrong with axis scaling")},k.maskBreaks=function(K){var oe,le,se,de,be,_e=k.rangebreaks||[];_e._cachedPatterns||(_e._cachedPatterns=_e.map(function(Ae){return Ae.enabled&&Ae.bounds?n.simpleMap(Ae.bounds,Ae.pattern?f:k.d2c):null})),_e._cachedValues||(_e._cachedValues=_e.map(function(Ae){return Ae.enabled&&Ae.values?n.simpleMap(Ae.values,k.d2c).sort(n.sorterAsc):null}));for(var xe=0;xe<_e.length;xe++){var ve=_e[xe];if(ve.enabled){if(ve.bounds){var ye=ve.pattern;switch(le=(oe=_e._cachedPatterns[xe])[0],se=oe[1],ye){case M:de=(be=new Date(K)).getUTCDay(),le>se&&(se+=7,de<le&&(de+=7));break;case y:de=(be=new Date(K)).getUTCHours()+(be.getUTCMinutes()/60+be.getUTCSeconds()/3600+be.getUTCMilliseconds()/36e5),le>se&&(se+=24,de<le&&(de+=24));break;case"":de=K}if(de>=le&&de<se)return u}else for(var me=_e._cachedValues[xe],Me=0;Me<me.length;Me++)if(se=(le=me[Me])+ve.dvalue,K>=le&&K<se)return u}}return K},k.locateBreaks=function(K,oe){var le,se,de,be,_e=[];if(!k.rangebreaks)return _e;var xe=k.rangebreaks.slice().sort(function(Ee,Ie){return Ee.pattern===M&&Ie.pattern===y?-1:Ie.pattern===M&&Ee.pattern===y?1:0}),ve=function(Ee,Ie){if((Ee=n.constrain(Ee,K,oe))!==(Ie=n.constrain(Ie,K,oe))){for(var Re=!0,Ne=0;Ne<_e.length;Ne++){var ge=_e[Ne];Ee<ge.max&&Ie>=ge.min&&(Ee<ge.min&&(ge.min=Ee),Ie>ge.max&&(ge.max=Ie),Re=!1)}Re&&_e.push({min:Ee,max:Ie})}};for(le=0;le<xe.length;le++){var ye=xe[le];if(ye.enabled)if(ye.bounds){var me=K,Me=oe;ye.pattern&&(me=Math.floor(me)),de=(se=n.simpleMap(ye.bounds,ye.pattern?f:k.r2l))[0],be=se[1];var Ae,ce,ae=new Date(me);switch(ye.pattern){case M:ce=d,Ae=(be-de+(be<de?7:0))*c,me+=de*c-(ae.getUTCDay()*c+ae.getUTCHours()*_+ae.getUTCMinutes()*p+ae.getUTCSeconds()*g+ae.getUTCMilliseconds());break;case y:ce=c,Ae=(be-de+(be<de?24:0))*_,me+=de*_-(ae.getUTCHours()*_+ae.getUTCMinutes()*p+ae.getUTCSeconds()*g+ae.getUTCMilliseconds());break;default:me=Math.min(se[0],se[1]),Ae=ce=(Me=Math.max(se[0],se[1]))-me}for(var pe=me;pe<Me;pe+=ce)ve(pe,pe+Ae)}else for(var De=n.simpleMap(ye.values,k.d2c),ke=0;ke<De.length;ke++)ve(de=De[ke],be=de+ye.dvalue)}return _e.sort(function(Ee,Ie){return Ee.min-Ie.min}),_e},k.makeCalcdata=function(K,oe,le){var se,de,be,_e,xe=k.type,ve=xe==="date"&&K[oe+"calendar"];if(oe in K){if(se=K[oe],_e=K._length||n.minRowLength(se),n.isTypedArray(se)&&(xe==="linear"||xe==="log")){if(_e===se.length)return se;if(se.subarray)return se.subarray(0,_e)}if(xe==="multicategory")return function(Me,Ae){for(var ce=new Array(Ae),ae=0;ae<Ae;ae++){var pe=(Me[0]||[])[ae],De=(Me[1]||[])[ae];ce[ae]=Z([pe,De])}return ce}(se,_e);for(de=new Array(_e),be=0;be<_e;be++)de[be]=k.d2c(se[be],0,ve,le)}else{var ye=oe+"0"in K?k.d2c(K[oe+"0"],0,ve):0,me=K["d"+oe]?Number(K["d"+oe]):1;for(se=K[{x:"y",y:"x"}[oe]],_e=K._length||se.length,de=new Array(_e),be=0;be<_e;be++)de[be]=ye+be*me}if(k.rangebreaks)for(be=0;be<_e;be++)de[be]=k.maskBreaks(de[be]);return de},k.isValidRange=function(K,oe){return Array.isArray(K)&&K.length===2&&(oe&&K[0]===null||x(k.r2l(K[0])))&&(oe&&K[1]===null||x(k.r2l(K[1])))},k.getAutorangeDflt=function(K,oe){var le=!k.isValidRange(K,"nullOk");return le&&oe&&oe.reverseDflt?le="reversed":K&&(K[0]===null&&K[1]===null?le=!0:K[0]===null&&K[1]!==null?le="min":K[0]!==null&&K[1]===null&&(le="max")),le},k.isReversed=function(){var K=k.autorange;return K==="reversed"||K==="min reversed"||K==="max reversed"},k.isPtWithinRange=function(K,oe){var le=k.c2l(K[L],null,oe),se=k.r2l(k.range[0]),de=k.r2l(k.range[1]);return se<de?se<=le&&le<=de:de<=le&&le<=se},k._emptyCategories=function(){k._categories=[],k._categoriesMap={}},k.clearCalc=function(){var K=k._matchGroup;if(K){var oe=null,le=null;for(var se in K){var de=D[m.id2name(se)];if(de._categories){oe=de._categories,le=de._categoriesMap;break}}oe&&le?(k._categories=oe,k._categoriesMap=le):k._emptyCategories()}else k._emptyCategories();if(k._initialCategories)for(var be=0;be<k._initialCategories.length;be++)j(k._initialCategories[be])},k.sortByInitialCategories=function(){var K=[];if(k._emptyCategories(),k._initialCategories)for(var oe=0;oe<k._initialCategories.length;oe++)j(k._initialCategories[oe]);K=K.concat(k._traceIndices);var le=k._matchGroup;for(var se in le)if(P!==se){var de=D[m.id2name(se)];de._categories=k._categories,de._categoriesMap=k._categoriesMap,K=K.concat(de._traceIndices)}return K};var ne=D._d3locale;k.type==="date"&&(k._dateFormat=ne?ne.timeFormat:w,k._extraFormat=D._extraFormat),k._separators=D.separators,k._numFormat=ne?ne.numberFormat:T,delete k._minDtick,delete k._forceTick0}},85024:function(C){"use strict";C.exports=function(A){var e=["showexponent","showtickprefix","showticksuffix"].filter(function(v){return A[v]!==void 0});if(e.every(function(v){return A[v]===A[e[0]]})||e.length===1)return A[e[0]]}},95936:function(C,A,e){"use strict";var v=e(3400),w=e(76308).contrast,n=e(94724),T=e(85024),x=e(51272);function f(s,t){function o(r,i){return v.coerce(s,t,n.tickformatstops,r,i)}o("enabled")&&(o("dtickrange"),o("value"))}C.exports=function(s,t,o,r,i){i||(i={});var a=o("labelalias");v.isPlainObject(a)||delete t.labelalias;var u=T(s);if(o("showticklabels")){var l=i.font||{},d=t.color,c=(t.ticklabelposition||"").indexOf("inside")!==-1?w(i.bgColor):d&&d!==n.color.dflt?d:l.color;if(v.coerceFont(o,"tickfont",{family:l.family,weight:l.weight,style:l.style,variant:l.variant,size:l.size,color:c}),i.noTicklabelstep||r==="multicategory"||r==="log"||o("ticklabelstep"),!i.noAng){var _=o("tickangle");i.noAutotickangles||_!=="auto"||o("autotickangles")}if(r!=="category"){var p=o("tickformat");x(s,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:f}),t.tickformatstops.length||delete t.tickformatstops,i.noExp||p||r==="date"||(o("showexponent",u),o("exponentformat"),o("minexponent"),o("separatethousands"))}}}},25404:function(C,A,e){"use strict";var v=e(3400),w=e(94724);C.exports=function(n,T,x,f){var s=f.isMinor,t=s?n.minor||{}:n,o=s?T.minor:T,r=s?w.minor:w,i=s?"minor.":"",a=v.coerce2(t,o,r,"ticklen",s?.6*(T.ticklen||5):void 0),u=v.coerce2(t,o,r,"tickwidth",s?T.tickwidth||1:void 0),l=v.coerce2(t,o,r,"tickcolor",(s?T.tickcolor:void 0)||o.color);x(i+"ticks",!s&&f.outerTicks||a||u||l?"outside":"")||(delete o.ticklen,delete o.tickwidth,delete o.tickcolor)}},26332:function(C,A,e){"use strict";var v=e(98728),w=e(3400).isArrayOrTypedArray,n=e(38116).isTypedArraySpec,T=e(38116).decodeTypedArraySpec;C.exports=function(x,f,s,t,o){o||(o={});var r=o.isMinor,i=r?x.minor||{}:x,a=r?f.minor:f,u=r?"minor.":"";function l(m){var b=i[m];return n(b)&&(b=T(b)),b!==void 0?b:(a._template||{})[m]}var d=l("tick0"),c=l("dtick"),_=l("tickvals"),p=s(u+"tickmode",w(_)?"array":c?"linear":"auto");if(p==="auto"||p==="sync")s(u+"nticks");else if(p==="linear"){var g=a.dtick=v.dtick(c,t);a.tick0=v.tick0(d,t,f.calendar,g)}else t!=="multicategory"&&(s(u+"tickvals")===void 0?a.tickmode="auto":r||s("ticktext"))}},73736:function(C,A,e){"use strict";var v=e(33428),w=e(24040),n=e(3400),T=e(43616),x=e(54460);C.exports=function(f,s,t,o){var r=f._fullLayout;if(s.length!==0){var i,a,u,l;o&&(i=o());var d=v.ease(t.easing);return f._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(l),l=null,function(){for(var p={},g=0;g<s.length;g++){var m=s[g],b=m.plotinfo.xaxis,y=m.plotinfo.yaxis;m.xr0&&(p[b._name+".range"]=m.xr0.slice()),m.yr0&&(p[y._name+".range"]=m.yr0.slice())}return w.call("relayout",f,p).then(function(){for(var M=0;M<s.length;M++)c(s[M].plotinfo)})}()}),a=Date.now(),l=window.requestAnimationFrame(function p(){u=Date.now();for(var g=Math.min(1,(u-a)/t.duration),m=d(g),b=0;b<s.length;b++)_(s[b],m);u-a>t.duration?(function(){for(var y={},M=0;M<s.length;M++){var h=s[M],E=h.plotinfo.xaxis,k=h.plotinfo.yaxis;h.xr1&&(y[E._name+".range"]=h.xr1.slice()),h.yr1&&(y[k._name+".range"]=h.yr1.slice())}i&&i(),w.call("relayout",f,y).then(function(){for(var D=0;D<s.length;D++)c(s[D].plotinfo)})}(),l=window.cancelAnimationFrame(p)):l=window.requestAnimationFrame(p)}),Promise.resolve()}function c(p){var g=p.xaxis,m=p.yaxis;r._defs.select("#"+p.clipId+"> rect").call(T.setTranslate,0,0).call(T.setScale,1,1),p.plot.call(T.setTranslate,g._offset,m._offset).call(T.setScale,1,1);var b=p.plot.selectAll(".scatterlayer .trace");b.selectAll(".point").call(T.setPointGroupScale,1,1),b.selectAll(".textpoint").call(T.setTextPointsScale,1,1),b.call(T.hideOutsideRangePoints,p)}function _(p,g){var m=p.plotinfo,b=m.xaxis,y=m.yaxis,M=b._length,h=y._length,E=!!p.xr1,k=!!p.yr1,D=[];if(E){var P=n.simpleMap(p.xr0,b.r2l),L=n.simpleMap(p.xr1,b.r2l),O=P[1]-P[0],N=L[1]-L[0];D[0]=(P[0]*(1-g)+g*L[0]-P[0])/(P[1]-P[0])*M,D[2]=M*(1-g+g*N/O),b.range[0]=b.l2r(P[0]*(1-g)+g*L[0]),b.range[1]=b.l2r(P[1]*(1-g)+g*L[1])}else D[0]=0,D[2]=M;if(k){var V=n.simpleMap(p.yr0,y.r2l),F=n.simpleMap(p.yr1,y.r2l),j=V[1]-V[0],Z=F[1]-F[0];D[1]=(V[1]*(1-g)+g*F[1]-V[1])/(V[0]-V[1])*h,D[3]=h*(1-g+g*Z/j),y.range[0]=b.l2r(V[0]*(1-g)+g*F[0]),y.range[1]=y.l2r(V[1]*(1-g)+g*F[1])}else D[1]=0,D[3]=h;x.drawOne(f,b,{skipTitle:!0}),x.drawOne(f,y,{skipTitle:!0}),x.redrawComponents(f,[b._id,y._id]);var z=E?M/D[2]:1,H=k?h/D[3]:1,U=E?D[0]:0,re=k?D[1]:0,ee=E?D[0]/D[2]*M:0,J=k?D[1]/D[3]*h:0,Q=b._offset-ee,ne=y._offset-J;m.clipRect.call(T.setTranslate,U,re).call(T.setScale,1/z,1/H),m.plot.call(T.setTranslate,Q,ne).call(T.setScale,z,H),T.setPointGroupScale(m.zoomScalePts,1/z,1/H),T.setTextPointsScale(m.zoomScaleTxt,1/z,1/H)}x.redrawComponents(f)}},14944:function(C,A,e){"use strict";var v=e(24040).traceIs,w=e(52976);function n(x){return{v:"x",h:"y"}[x.orientation||"v"]}function T(x,f){var s=n(x),t=v(x,"box-violin"),o=v(x._fullInput||{},"candlestick");return t&&!o&&f===s&&x[s]===void 0&&x[s+"0"]===void 0}C.exports=function(x,f,s,t){s("autotypenumbers",t.autotypenumbersDflt),s("type",(t.splomStash||{}).type)==="-"&&(function(o,r){if(o.type==="-"){var i,a=o._id,u=a.charAt(0);a.indexOf("scene")!==-1&&(a=u);var l=function(y,M,h){for(var E=0;E<y.length;E++){var k=y[E];if(k.type==="splom"&&k._length>0&&(k["_"+h+"axes"]||{})[M]||(k[h+"axis"]||h)===M&&(T(k,h)||(k[h]||[]).length||k[h+"0"]))return k}}(r,a,u);if(l)if(l.type!=="histogram"||u!=={v:"y",h:"x"}[l.orientation||"v"]){var d=u+"calendar",c=l[d],_={noMultiCategory:!v(l,"cartesian")||v(l,"noMultiCategory")};if(l.type==="box"&&l._hasPreCompStats&&u==={h:"x",v:"y"}[l.orientation||"v"]&&(_.noMultiCategory=!0),_.autotypenumbers=o.autotypenumbers,T(l,u)){var p=n(l),g=[];for(i=0;i<r.length;i++){var m=r[i];v(m,"box-violin")&&(m[u+"axis"]||u)===a&&(m[p]!==void 0?g.push(m[p][0]):m.name!==void 0?g.push(m.name):g.push("text"),m[d]!==c&&(c=void 0))}o.type=w(g,c,_)}else if(l.type==="splom"){var b=l.dimensions[l._axesDim[a]];b.visible&&(o.type=w(b.values,c,_))}else o.type=w(l[u]||[l[u+"0"]],c,_)}else o.type="linear"}}(f,t.data),f.type==="-"?f.type="linear":x.type=f.type)}},62460:function(C,A,e){"use strict";var v=e(24040),w=e(3400);function n(s,t,o){var r,i,a,u=!1;if(t.type==="data")r=s._fullData[t.traces!==null?t.traces[0]:0];else{if(t.type!=="layout")return!1;r=s._fullLayout}return i=w.nestedProperty(r,t.prop).get(),(a=o[t.type]=o[t.type]||{}).hasOwnProperty(t.prop)&&a[t.prop]!==i&&(u=!0),a[t.prop]=i,{changed:u,value:i}}function T(s,t){var o=[],r=t[0],i={};if(typeof r=="string")i[r]=t[1];else{if(!w.isPlainObject(r))return o;i=r}return f(i,function(a,u,l){o.push({type:"layout",prop:a,value:l})},"",0),o}function x(s,t){var o,r,i,a,u=[];if(r=t[0],i=t[1],o=t[2],a={},typeof r=="string")a[r]=i;else{if(!w.isPlainObject(r))return u;a=r,o===void 0&&(o=i)}return o===void 0&&(o=null),f(a,function(l,d,c){var _,p;if(Array.isArray(c)){p=c.slice();var g=Math.min(p.length,s.data.length);o&&(g=Math.min(g,o.length)),_=[];for(var m=0;m<g;m++)_[m]=o?o[m]:m}else p=c,_=o?o.slice():null;if(_===null)Array.isArray(p)&&(p=p[0]);else if(Array.isArray(_)){if(!Array.isArray(p)){var b=p;p=[];for(var y=0;y<_.length;y++)p[y]=b}p.length=Math.min(_.length,p.length)}u.push({type:"data",prop:l,traces:_,value:p})},"",0),u}function f(s,t,o,r){Object.keys(s).forEach(function(i){var a=s[i];if(i[0]!=="_"){var u=o+(r>0?".":"")+i;w.isPlainObject(a)?f(a,t,u,r+1):t(u,i,a)}})}A.manageCommandObserver=function(s,t,o,r){var i={},a=!0;t&&t._commandObserver&&(i=t._commandObserver),i.cache||(i.cache={}),i.lookupTable={};var u=A.hasSimpleAPICommandBindings(s,o,i.lookupTable);if(t&&t._commandObserver){if(u)return i;if(t._commandObserver.remove)return t._commandObserver.remove(),t._commandObserver=null,i}if(u){n(s,u,i.cache),i.check=function(){if(a){var c=n(s,u,i.cache);return c.changed&&r&&i.lookupTable[c.value]!==void 0&&(i.disable(),Promise.resolve(r({value:c.value,type:u.type,prop:u.prop,traces:u.traces,index:i.lookupTable[c.value]})).then(i.enable,i.enable)),c.changed}};for(var l=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],d=0;d<l.length;d++)s._internalOn(l[d],i.check);i.remove=function(){for(var c=0;c<l.length;c++)s._removeInternalListener(l[c],i.check)}}else w.log("Unable to automatically bind plot updates to API command"),i.lookupTable={},i.remove=function(){};return i.disable=function(){a=!1},i.enable=function(){a=!0},t&&(t._commandObserver=i),i},A.hasSimpleAPICommandBindings=function(s,t,o){var r,i,a=t.length;for(r=0;r<a;r++){var u,l=t[r],d=l.method,c=l.args;if(Array.isArray(c)||(c=[]),!d)return!1;var _=A.computeAPICommandBindings(s,d,c);if(_.length!==1)return!1;if(i){if((u=_[0]).type!==i.type||u.prop!==i.prop)return!1;if(Array.isArray(i.traces)){if(!Array.isArray(u.traces))return!1;u.traces.sort();for(var p=0;p<i.traces.length;p++)if(i.traces[p]!==u.traces[p])return!1}else if(u.prop!==i.prop)return!1}else i=_[0],Array.isArray(i.traces)&&i.traces.sort();var g=(u=_[0]).value;if(Array.isArray(g)){if(g.length!==1)return!1;g=g[0]}o&&(o[g]=r)}return i},A.executeAPICommand=function(s,t,o){if(t==="skip")return Promise.resolve();var r=v.apiMethodRegistry[t],i=[s];Array.isArray(o)||(o=[]);for(var a=0;a<o.length;a++)i.push(o[a]);return r.apply(null,i).catch(function(u){return w.warn("API call to Plotly."+t+" rejected.",u),Promise.reject(u)})},A.computeAPICommandBindings=function(s,t,o){var r;switch(Array.isArray(o)||(o=[]),t){case"restyle":r=x(s,o);break;case"relayout":r=T(0,o);break;case"update":r=x(s,[o[0],o[2]]).concat(T(0,[o[1]]));break;case"animate":r=function(i,a){return Array.isArray(a[0])&&a[0].length===1&&["string","number"].indexOf(typeof a[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:a[0][0].toString()}]:[]}(0,o);break;default:r=[]}return r}},86968:function(C,A,e){"use strict";var v=e(92880).extendFlat;A.u=function(w,n){n=n||{};var T={valType:"info_array",editType:(w=w||{}).editType,items:[{valType:"number",min:0,max:1,editType:w.editType},{valType:"number",min:0,max:1,editType:w.editType}],dflt:[0,1]},x=(w.name&&w.name,w.trace,n.description&&n.description,{x:v({},T,{}),y:v({},T,{}),editType:w.editType});return w.noGridCell||(x.row={valType:"integer",min:0,dflt:0,editType:w.editType},x.column={valType:"integer",min:0,dflt:0,editType:w.editType}),x},A.Q=function(w,n,T,x){var f=x&&x.x||[0,1],s=x&&x.y||[0,1],t=n.grid;if(t){var o=T("domain.column");o!==void 0&&(o<t.columns?f=t._domains.x[o]:delete w.domain.column);var r=T("domain.row");r!==void 0&&(r<t.rows?s=t._domains.y[r]:delete w.domain.row)}var i=T("domain.x",f),a=T("domain.y",s);i[0]<i[1]||(w.domain.x=f.slice()),a[0]<a[1]||(w.domain.y=s.slice())}},25376:function(C){"use strict";C.exports=function(A){var e=A.variantValues,v=A.editType,w=A.colorEditType;w===void 0&&(w=v);var n={family:{valType:"string",noBlank:!0,strict:!0,editType:v},size:{valType:"number",min:1,editType:v},color:{valType:"color",editType:w},weight:{editType:v,valType:"enumerated",values:["normal","bold"],dflt:"normal"},style:{editType:v,valType:"enumerated",values:["normal","italic"],dflt:"normal"},variant:A.noFontVariant?void 0:{editType:v,valType:"enumerated",values:e||["normal","small-caps","all-small-caps","all-petite-caps","petite-caps","unicase"],dflt:"normal"},editType:v};return A.autoSize&&(n.size.dflt="auto"),A.autoColor&&(n.color.dflt="auto"),A.arrayOk&&(n.family.arrayOk=!0,n.weight.arrayOk=!0,n.style.arrayOk=!0,n.variant.arrayOk=!0,n.size.arrayOk=!0,n.color.arrayOk=!0),n}},16672:function(C){"use strict";C.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},79552:function(C,A){"use strict";A.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr","equal earth":"equalEarth",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},A.axesNames=["lonaxis","lataxis"],A.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},A.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},A.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},A.clipPad=.001,A.precision=.1,A.landColor="#F0DC82",A.waterColor="#3399FF",A.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},A.sphereSVG={type:"Sphere"},A.fillLayers={ocean:1,land:1,lakes:1},A.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},A.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],A.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],A.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},43520:function(C,A,e){"use strict";var v=e(33428),w=e(83356),n=w.geoPath,T=w.geoDistance,x=e(87108),f=e(24040),s=e(3400),t=s.strTranslate,o=e(76308),r=e(43616),i=e(93024),a=e(7316),u=e(54460),l=e(19280).getAutoRange,d=e(86476),c=e(22676).prepSelect,_=e(22676).clearOutline,p=e(22676).selectOnClick,g=e(79248),m=e(79552),b=e(27144),y=e(59972),M=e(55712).NO;function h(D){this.id=D.id,this.graphDiv=D.graphDiv,this.container=D.container,this.topojsonURL=D.topojsonURL,this.isStatic=D.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var E=h.prototype;function k(D,P){var L=m.clipPad,O=D[0]+L,N=D[1]-L,V=P[0]+L,F=P[1]-L;O>0&&N<0&&(N+=360);var j=(N-O)/4;return{type:"Polygon",coordinates:[[[O,V],[O,F],[O+j,F],[O+2*j,F],[O+3*j,F],[N,F],[N,V],[N-j,V],[N-2*j,V],[N-3*j,V],[O,V]]]}}C.exports=function(D){return new h(D)},E.plot=function(D,P,L,O){var N=this;if(O)return N.update(D,P,!0);N._geoCalcData=D,N._fullLayout=P;var V=P[this.id],F=[],j=!1;for(var Z in m.layerNameToAdjective)if(Z!=="frame"&&V["show"+Z]){j=!0;break}for(var z=!1,H=0;H<D.length;H++){var U=D[0][0].trace;U._geo=N,U.locationmode&&(j=!0);var re=U.marker;if(re){var ee=re.angle,J=re.angleref;(ee||J==="north"||J==="previous")&&(z=!0)}}if(this._hasMarkerAngles=z,j){var Q=y.getTopojsonName(V);N.topojson!==null&&Q===N.topojsonName||(N.topojsonName=Q,PlotlyGeoAssets.topojson[N.topojsonName]===void 0&&F.push(N.fetchTopojson()))}F=F.concat(b.fetchTraceGeoData(D)),L.push(new Promise(function(ne,K){Promise.all(F).then(function(){N.topojson=PlotlyGeoAssets.topojson[N.topojsonName],N.update(D,P),ne()}).catch(K)}))},E.fetchTopojson=function(){var D=this,P=y.getTopojsonPath(D.topojsonURL,D.topojsonName);return new Promise(function(L,O){v.json(P,function(N,V){if(N)return N.status===404?O(new Error(["plotly.js could not find topojson file at",P+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):O(new Error(["unexpected error while fetching topojson file at",P].join(" ")));PlotlyGeoAssets.topojson[D.topojsonName]=V,L()})})},E.update=function(D,P,L){var O=P[this.id];this.hasChoropleth=!1;for(var N=0;N<D.length;N++){var V=D[N],F=V[0].trace;F.type==="choropleth"&&(this.hasChoropleth=!0),F.visible===!0&&F._length>0&&F._module.calcGeoJSON(V,P)}if(!L){if(this.updateProjection(D,P))return;this.viewInitial&&this.scope===O.scope||this.saveViewInitial(O)}this.scope=O.scope,this.updateBaseLayers(P,O),this.updateDims(P,O),this.updateFx(P,O),a.generalUpdatePerTraceModule(this.graphDiv,this,D,O);var j=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=j.selectAll(".point"),this.dataPoints.text=j.selectAll("text"),this.dataPaths.line=j.selectAll(".js-line");var Z=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=Z.selectAll("path"),this._render()},E.updateProjection=function(D,P){var L=this.graphDiv,O=P[this.id],N=P._size,V=O.domain,F=O.projection,j=O.lonaxis,Z=O.lataxis,z=j._ax,H=Z._ax,U=this.projection=function(ae){var pe=ae.projection,De=pe.type,ke=m.projNames[De];ke="geo"+s.titleCase(ke);for(var Ee=(w[ke]||x[ke])(),Ie=ae._isSatellite?180*Math.acos(1/pe.distance)/Math.PI:ae._isClipped?m.lonaxisSpan[De]/2:null,Re=["center","rotate","parallels","clipExtent"],Ne=function(Ce){return Ce?Ee:[]},ge=0;ge<Re.length;ge++){var we=Re[ge];typeof Ee[we]!="function"&&(Ee[we]=Ne)}return Ee.isLonLatOverEdges=function(Ce){if(Ee(Ce)===null)return!0;if(Ie){var ze=Ee.rotate();return T(Ce,[-ze[0],-ze[1]])>Ie*Math.PI/180}return!1},Ee.getPath=function(){return n().projection(Ee)},Ee.getBounds=function(Ce){return Ee.getPath().bounds(Ce)},Ee.precision(m.precision),ae._isSatellite&&Ee.tilt(pe.tilt).distance(pe.distance),Ie&&Ee.clipAngle(Ie-m.clipPad),Ee}(O),re=[[N.l+N.w*V.x[0],N.t+N.h*(1-V.y[1])],[N.l+N.w*V.x[1],N.t+N.h*(1-V.y[0])]],ee=O.center||{},J=F.rotation||{},Q=j.range||[],ne=Z.range||[];if(O.fitbounds){z._length=re[1][0]-re[0][0],H._length=re[1][1]-re[0][1],z.range=l(L,z),H.range=l(L,H);var K=(z.range[0]+z.range[1])/2,oe=(H.range[0]+H.range[1])/2;if(O._isScoped)ee={lon:K,lat:oe};else if(O._isClipped){ee={lon:K,lat:oe},J={lon:K,lat:oe,roll:J.roll};var le=F.type,se=m.lonaxisSpan[le]/2||180,de=m.lataxisSpan[le]/2||90;Q=[K-se,K+se],ne=[oe-de,oe+de]}else ee={lon:K,lat:oe},J={lon:K,lat:J.lat,roll:J.roll}}U.center([ee.lon-J.lon,ee.lat-J.lat]).rotate([-J.lon,-J.lat,J.roll]).parallels(F.parallels);var be=k(Q,ne);U.fitExtent(re,be);var _e=this.bounds=U.getBounds(be),xe=this.fitScale=U.scale(),ve=U.translate();if(O.fitbounds){var ye=U.getBounds(k(z.range,H.range)),me=Math.min((_e[1][0]-_e[0][0])/(ye[1][0]-ye[0][0]),(_e[1][1]-_e[0][1])/(ye[1][1]-ye[0][1]));isFinite(me)?U.scale(me*xe):s.warn("Something went wrong during"+this.id+"fitbounds computations.")}else U.scale(F.scale*xe);var Me=this.midPt=[(_e[0][0]+_e[1][0])/2,(_e[0][1]+_e[1][1])/2];if(U.translate([ve[0]+(Me[0]-ve[0]),ve[1]+(Me[1]-ve[1])]).clipExtent(_e),O._isAlbersUsa){var Ae=U([ee.lon,ee.lat]),ce=U.translate();U.translate([ce[0]-(Ae[0]-ce[0]),ce[1]-(Ae[1]-ce[1])])}},E.updateBaseLayers=function(D,P){var L=this,O=L.topojson,N=L.layers,V=L.basePaths;function F(U){return U==="lonaxis"||U==="lataxis"}function j(U){return!!m.lineLayers[U]}function Z(U){return!!m.fillLayers[U]}var z=(this.hasChoropleth?m.layersForChoropleth:m.layers).filter(function(U){return j(U)||Z(U)?P["show"+U]:!F(U)||P[U].showgrid}),H=L.framework.selectAll(".layer").data(z,String);H.exit().each(function(U){delete N[U],delete V[U],v.select(this).remove()}),H.enter().append("g").attr("class",function(U){return"layer "+U}).each(function(U){var re=N[U]=v.select(this);U==="bg"?L.bgRect=re.append("rect").style("pointer-events","all"):F(U)?V[U]=re.append("path").style("fill","none"):U==="backplot"?re.append("g").classed("choroplethlayer",!0):U==="frontplot"?re.append("g").classed("scatterlayer",!0):j(U)?V[U]=re.append("path").style("fill","none").style("stroke-miterlimit",2):Z(U)&&(V[U]=re.append("path").style("stroke","none"))}),H.order(),H.each(function(U){var re=V[U],ee=m.layerNameToAdjective[U];U==="frame"?re.datum(m.sphereSVG):j(U)||Z(U)?re.datum(M(O,O.objects[U])):F(U)&&re.datum(function(J,Q,ne){var K,oe,le,se=Q[J],de=m.scopeDefaults[Q.scope];J==="lonaxis"?(K=de.lonaxisRange,oe=de.lataxisRange,le=function(ce,ae){return[ce,ae]}):J==="lataxis"&&(K=de.lataxisRange,oe=de.lonaxisRange,le=function(ce,ae){return[ae,ce]});var be={type:"linear",range:[K[0],K[1]-1e-6],tick0:se.tick0,dtick:se.dtick};u.setConvert(be,ne);var _e=u.calcTicks(be);Q.isScoped||J!=="lonaxis"||_e.pop();for(var xe=_e.length,ve=new Array(xe),ye=0;ye<xe;ye++)for(var me=_e[ye].x,Me=ve[ye]=[],Ae=oe[0];Ae<oe[1]+2.5;Ae+=2.5)Me.push(le(me,Ae));return{type:"MultiLineString",coordinates:ve}}(U,P,D)).call(o.stroke,P[U].gridcolor).call(r.dashLine,P[U].griddash,P[U].gridwidth),j(U)?re.call(o.stroke,P[ee+"color"]).call(r.dashLine,"",P[ee+"width"]):Z(U)&&re.call(o.fill,P[ee+"color"])})},E.updateDims=function(D,P){var L=this.bounds,O=(P.framewidth||0)/2,N=L[0][0]-O,V=L[0][1]-O,F=L[1][0]-N+O,j=L[1][1]-V+O;r.setRect(this.clipRect,N,V,F,j),this.bgRect.call(r.setRect,N,V,F,j).call(o.fill,P.bgcolor),this.xaxis._offset=N,this.xaxis._length=F,this.yaxis._offset=V,this.yaxis._length=j},E.updateFx=function(D,P){var L=this,O=L.graphDiv,N=L.bgRect,V=D.dragmode,F=D.clickmode;if(!L.isStatic){var j={element:L.bgRect.node(),gd:O,plotinfo:{id:L.id,xaxis:L.xaxis,yaxis:L.yaxis,fillRangeItems:function(z,H){H.isRect?(z.range={})[L.id]=[Z([H.xmin,H.ymin]),Z([H.xmax,H.ymax])]:(z.lassoPoints={})[L.id]=H.map(Z)}},xaxes:[L.xaxis],yaxes:[L.yaxis],subplot:L.id,clickFn:function(z){z===2&&_(O)}};V==="pan"?(N.node().onmousedown=null,N.call(g(L,P)),N.on("dblclick.zoom",function(){var z=L.viewInitial,H={};for(var U in z)H[L.id+"."+U]=z[U];f.call("_guiRelayout",O,H),O.emit("plotly_doubleclick",null)}),O._context._scrollZoom.geo||N.on("wheel.zoom",null)):V!=="select"&&V!=="lasso"||(N.on(".zoom",null),j.prepFn=function(z,H,U){c(z,H,U,j,V)},d.init(j)),N.on("mousemove",function(){var z=L.projection.invert(s.getPositionFromD3Event());if(!z)return d.unhover(O,v.event);L.xaxis.p2c=function(){return z[0]},L.yaxis.p2c=function(){return z[1]},i.hover(O,v.event,L.id)}),N.on("mouseout",function(){O._dragging||d.unhover(O,v.event)}),N.on("click",function(){V!=="select"&&V!=="lasso"&&(F.indexOf("select")>-1&&p(v.event,O,[L.xaxis],[L.yaxis],L.id,j),F.indexOf("event")>-1&&i.click(O,v.event))})}function Z(z){return L.projection.invert([z[0]+L.xaxis._offset,z[1]+L.yaxis._offset])}},E.makeFramework=function(){var D=this,P=D.graphDiv,L=P._fullLayout,O="clip"+L._uid+D.id;D.clipDef=L._clips.append("clipPath").attr("id",O),D.clipRect=D.clipDef.append("rect"),D.framework=v.select(D.container).append("g").attr("class","geo "+D.id).call(r.setClipUrl,O,P),D.project=function(N){var V=D.projection(N);return V?[V[0]-D.xaxis._offset,V[1]-D.yaxis._offset]:[null,null]},D.xaxis={_id:"x",c2p:function(N){return D.project(N)[0]}},D.yaxis={_id:"y",c2p:function(N){return D.project(N)[1]}},D.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},u.setConvert(D.mockAxis,L)},E.saveViewInitial=function(D){var P,L=D.center||{},O=D.projection,N=O.rotation||{};this.viewInitial={fitbounds:D.fitbounds,"projection.scale":O.scale},P=D._isScoped?{"center.lon":L.lon,"center.lat":L.lat}:D._isClipped?{"projection.rotation.lon":N.lon,"projection.rotation.lat":N.lat}:{"center.lon":L.lon,"center.lat":L.lat,"projection.rotation.lon":N.lon},s.extendFlat(this.viewInitial,P)},E.render=function(D){this._hasMarkerAngles&&D?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},E._render=function(){var D,P=this.projection,L=P.getPath();function O(V){var F=P(V.lonlat);return F?t(F[0],F[1]):null}function N(V){return P.isLonLatOverEdges(V.lonlat)?"none":null}for(D in this.basePaths)this.basePaths[D].attr("d",L);for(D in this.dataPaths)this.dataPaths[D].attr("d",function(V){return L(V.geojson)});for(D in this.dataPoints)this.dataPoints[D].attr("display",N).attr("transform",O)}},10816:function(C,A,e){"use strict";var v=e(84888).KY,w=e(3400).counterRegex,n=e(43520),T="geo",x=w(T),f={};f[T]={valType:"subplotid",dflt:T,editType:"calc"},C.exports={attr:T,name:T,idRoot:T,idRegex:x,attrRegex:x,attributes:f,layoutAttributes:e(40384),supplyLayoutDefaults:e(86920),plot:function(s){for(var t=s._fullLayout,o=s.calcdata,r=t._subplots[T],i=0;i<r.length;i++){var a=r[i],u=v(o,T,a),l=t[a]._subplot;l||(l=n({id:a,graphDiv:s,container:t._geolayer.node(),topojsonURL:s._context.topojsonURL,staticPlot:s._context.staticPlot}),t[a]._subplot=l),l.plot(u,t,s._promises)}},updateFx:function(s){for(var t=s._fullLayout,o=t._subplots[T],r=0;r<o.length;r++){var i=t[o[r]];i._subplot.updateFx(t,i)}},clean:function(s,t,o,r){for(var i=r._subplots[T]||[],a=0;a<i.length;a++){var u=i[a],l=r[u]._subplot;!t[u]&&l&&(l.framework.remove(),l.clipDef.remove())}}}},40384:function(C,A,e){"use strict";var v=e(22548),w=e(86968).u,n=e(98192).u,T=e(79552),x=e(67824).overrideAll,f=e(95376),s={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:v.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:n};(C.exports=x({domain:w({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:f(T.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:f(T.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:v.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:T.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:T.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:T.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:T.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:v.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:v.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:v.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:v.background},lonaxis:s,lataxis:s},"plot","from-root")).uirevision={valType:"any",editType:"none"}},86920:function(C,A,e){"use strict";var v=e(3400),w=e(168),n=e(84888).op,T=e(79552),x=e(40384),f=T.axesNames;function s(t,o,r,i){var a=n(i.fullData,"geo",i.id).map(function(J){return J._expandedIndex}),u=r("resolution"),l=r("scope"),d=T.scopeDefaults[l],c=r("projection.type",d.projType),_=o._isAlbersUsa=c==="albers usa";_&&(l=o.scope="usa");var p=o._isScoped=l!=="world",g=o._isSatellite=c==="satellite",m=o._isConic=c.indexOf("conic")!==-1||c==="albers",b=o._isClipped=!!T.lonaxisSpan[c];if(t.visible===!1){var y=v.extendDeep({},o._template);y.showcoastlines=!1,y.showcountries=!1,y.showframe=!1,y.showlakes=!1,y.showland=!1,y.showocean=!1,y.showrivers=!1,y.showsubunits=!1,y.lonaxis&&(y.lonaxis.showgrid=!1),y.lataxis&&(y.lataxis.showgrid=!1),o._template=y}for(var M=r("visible"),h=0;h<f.length;h++){var E,k=f[h],D=[30,10][h];if(p)E=d[k+"Range"];else{var P=T[k+"Span"],L=(P[c]||P["*"])/2,O=r("projection.rotation."+k.substr(0,3),d.projRotate[h]);E=[O-L,O+L]}var N=r(k+".range",E);r(k+".tick0"),r(k+".dtick",D),r(k+".showgrid",!!M&&void 0)&&(r(k+".gridcolor"),r(k+".gridwidth"),r(k+".griddash")),o[k]._ax={type:"linear",_id:k.slice(0,3),_traceIndices:a,setScale:v.identity,c2l:v.identity,r2l:v.identity,autorange:!0,range:N.slice(),_m:1,_input:{}}}var V=o.lonaxis.range,F=o.lataxis.range,j=V[0],Z=V[1];j>0&&Z<0&&(Z+=360);var z,H,U,re=(j+Z)/2;if(!_){var ee=p?d.projRotate:[re,0,0];z=r("projection.rotation.lon",ee[0]),r("projection.rotation.lat",ee[1]),r("projection.rotation.roll",ee[2]),r("showcoastlines",!p&&M)&&(r("coastlinecolor"),r("coastlinewidth")),r("showocean",!!M&&void 0)&&r("oceancolor")}_?(H=-96.6,U=38.7):(H=p?re:z,U=(F[0]+F[1])/2),r("center.lon",H),r("center.lat",U),g&&(r("projection.tilt"),r("projection.distance")),m&&r("projection.parallels",d.projParallels||[0,60]),r("projection.scale"),r("showland",!!M&&void 0)&&r("landcolor"),r("showlakes",!!M&&void 0)&&r("lakecolor"),r("showrivers",!!M&&void 0)&&(r("rivercolor"),r("riverwidth")),r("showcountries",p&&l!=="usa"&&M)&&(r("countrycolor"),r("countrywidth")),(l==="usa"||l==="north america"&&u===50)&&(r("showsubunits",M),r("subunitcolor"),r("subunitwidth")),p||r("showframe",M)&&(r("framecolor"),r("framewidth")),r("bgcolor"),r("fitbounds")&&(delete o.projection.scale,p?(delete o.center.lon,delete o.center.lat):b?(delete o.center.lon,delete o.center.lat,delete o.projection.rotation.lon,delete o.projection.rotation.lat,delete o.lonaxis.range,delete o.lataxis.range):(delete o.center.lon,delete o.center.lat,delete o.projection.rotation.lon))}C.exports=function(t,o,r){w(t,o,r,{type:"geo",attributes:x,handleDefaults:s,fullData:r,partition:"y"})}},79248:function(C,A,e){"use strict";var v=e(33428),w=e(3400),n=e(24040),T=Math.PI/180,x=180/Math.PI,f={cursor:"pointer"},s={cursor:"auto"};function t(p,g){return v.behavior.zoom().translate(g.translate()).scale(g.scale())}function o(p,g,m){var b=p.id,y=p.graphDiv,M=y.layout,h=M[b],E=y._fullLayout,k=E[b],D={},P={};function L(O,N){D[b+"."+O]=w.nestedProperty(h,O).get(),n.call("_storeDirectGUIEdit",M,E._preGUI,D);var V=w.nestedProperty(k,O);V.get()!==N&&(V.set(N),w.nestedProperty(h,O).set(N),P[b+"."+O]=N)}m(L),L("projection.scale",g.scale()/p.fitScale),L("fitbounds",!1),y.emit("plotly_relayout",P)}function r(p,g){var m=t(0,g);function b(y){var M=g.invert(p.midPt);y("center.lon",M[0]),y("center.lat",M[1])}return m.on("zoomstart",function(){v.select(this).style(f)}).on("zoom",function(){g.scale(v.event.scale).translate(v.event.translate),p.render(!0);var y=g.invert(p.midPt);p.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":g.scale()/p.fitScale,"geo.center.lon":y[0],"geo.center.lat":y[1]})}).on("zoomend",function(){v.select(this).style(s),o(p,g,b)}),m}function i(p,g){var m,b,y,M,h,E,k,D,P,L=t(0,g);function O(V){return g.invert(V)}function N(V){var F=g.rotate(),j=g.invert(p.midPt);V("projection.rotation.lon",-F[0]),V("center.lon",j[0]),V("center.lat",j[1])}return L.on("zoomstart",function(){v.select(this).style(f),m=v.mouse(this),b=g.rotate(),y=g.translate(),M=b,h=O(m)}).on("zoom",function(){if(E=v.mouse(this),function(j){var Z=O(j);if(!Z)return!0;var z=g(Z);return Math.abs(z[0]-j[0])>2||Math.abs(z[1]-j[1])>2}(m))return L.scale(g.scale()),void L.translate(g.translate());g.scale(v.event.scale),g.translate([y[0],v.event.translate[1]]),h?O(E)&&(D=O(E),k=[M[0]+(D[0]-h[0]),b[1],b[2]],g.rotate(k),M=k):h=O(m=E),P=!0,p.render(!0);var V=g.rotate(),F=g.invert(p.midPt);p.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":g.scale()/p.fitScale,"geo.center.lon":F[0],"geo.center.lat":F[1],"geo.projection.rotation.lon":-V[0]})}).on("zoomend",function(){v.select(this).style(s),P&&o(p,g,N)}),L}function a(p,g){var m,b={r:g.rotate(),k:g.scale()},y=t(0,g),M=function(D){for(var P=0,L=arguments.length,O=[];++P<L;)O.push(arguments[P]);var N=v.dispatch.apply(null,O);return N.of=function(V,F){return function(j){var Z;try{Z=j.sourceEvent=v.event,j.target=D,v.event=j,N[j.type].apply(V,F)}finally{v.event=Z}}},N}(y,"zoomstart","zoom","zoomend"),h=0,E=y.on;function k(D){var P=g.rotate();D("projection.rotation.lon",-P[0]),D("projection.rotation.lat",-P[1])}return y.on("zoomstart",function(){v.select(this).style(f);var D,P,L,O,N,V,F,j,Z,z,H,U=v.mouse(this),re=g.rotate(),ee=re,J=g.translate(),Q=(P=.5*(D=re)[0]*T,L=.5*D[1]*T,O=.5*D[2]*T,N=Math.sin(P),V=Math.cos(P),F=Math.sin(L),j=Math.cos(L),Z=Math.sin(O),[V*j*(z=Math.cos(O))+N*F*Z,N*j*z-V*F*Z,V*F*z+N*j*Z,V*j*Z-N*F*z]);m=u(g,U),E.call(y,"zoom",function(){var ne,K,oe,le,se,de,be,_e,xe,ve,ye=v.mouse(this);if(g.scale(b.k=v.event.scale),m){if(u(g,ye)){g.rotate(re).translate(J);var me=u(g,ye),Me=function(ae,pe){if(ae&&pe){var De=function(Re,Ne){return[Re[1]*Ne[2]-Re[2]*Ne[1],Re[2]*Ne[0]-Re[0]*Ne[2],Re[0]*Ne[1]-Re[1]*Ne[0]]}(ae,pe),ke=Math.sqrt(_(De,De)),Ee=.5*Math.acos(Math.max(-1,Math.min(1,_(ae,pe)))),Ie=Math.sin(Ee)/ke;return ke&&[Math.cos(Ee),De[2]*Ie,-De[1]*Ie,De[0]*Ie]}}(m,me),Ae=function(ae){return[Math.atan2(2*(ae[0]*ae[1]+ae[2]*ae[3]),1-2*(ae[1]*ae[1]+ae[2]*ae[2]))*x,Math.asin(Math.max(-1,Math.min(1,2*(ae[0]*ae[2]-ae[3]*ae[1]))))*x,Math.atan2(2*(ae[0]*ae[3]+ae[1]*ae[2]),1-2*(ae[2]*ae[2]+ae[3]*ae[3]))*x]}((oe=(ne=Q)[0],le=ne[1],se=ne[2],de=ne[3],[oe*(be=(K=Me)[0])-le*(_e=K[1])-se*(xe=K[2])-de*(ve=K[3]),oe*_e+le*be+se*ve-de*xe,oe*xe-le*ve+se*be+de*_e,oe*ve+le*xe-se*_e+de*be])),ce=b.r=function(ae,pe,De){var ke=c(pe,2,ae[0]);ke=c(ke,1,ae[1]),ke=c(ke,0,ae[2]-De[2]);var Ee,Ie,Re=pe[0],Ne=pe[1],ge=pe[2],we=ke[0],Ce=ke[1],ze=ke[2],Pe=Math.atan2(Ne,Re)*x,Ue=Math.sqrt(Re*Re+Ne*Ne);Math.abs(Ce)>Ue?(Ie=(Ce>0?90:-90)-Pe,Ee=0):(Ie=Math.asin(Ce/Ue)*x-Pe,Ee=Math.sqrt(Ue*Ue-Ce*Ce));var Ge=180-Ie-2*Pe,Xe=(Math.atan2(ze,we)-Math.atan2(ge,Ee))*x,st=(Math.atan2(ze,we)-Math.atan2(ge,-Ee))*x;return l(De[0],De[1],Ie,Xe)<=l(De[0],De[1],Ge,st)?[Ie,Xe,De[2]]:[Ge,st,De[2]]}(Ae,m,ee);isFinite(ce[0])&&isFinite(ce[1])&&isFinite(ce[2])||(ce=ee),g.rotate(ce),ee=ce}}else m=u(g,U=ye);M.of(this,arguments)({type:"zoom"})}),H=M.of(this,arguments),h++||H({type:"zoomstart"})}).on("zoomend",function(){var D;v.select(this).style(s),E.call(y,"zoom",null),D=M.of(this,arguments),--h||D({type:"zoomend"}),o(p,g,k)}).on("zoom.redraw",function(){p.render(!0);var D=g.rotate();p.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":g.scale()/p.fitScale,"geo.projection.rotation.lon":-D[0],"geo.projection.rotation.lat":-D[1]})}),v.rebind(y,M,"on")}function u(p,g){var m=p.invert(g);return m&&isFinite(m[0])&&isFinite(m[1])&&function(b){var y=b[0]*T,M=b[1]*T,h=Math.cos(M);return[h*Math.cos(y),h*Math.sin(y),Math.sin(M)]}(m)}function l(p,g,m,b){var y=d(m-p),M=d(b-g);return Math.sqrt(y*y+M*M)}function d(p){return(p%360+540)%360-180}function c(p,g,m){var b=m*T,y=p.slice(),M=g===0?1:0,h=g===2?1:2,E=Math.cos(b),k=Math.sin(b);return y[M]=p[M]*E-p[h]*k,y[h]=p[h]*E+p[M]*k,y}function _(p,g){for(var m=0,b=0,y=p.length;b<y;++b)m+=p[b]*g[b];return m}C.exports=function(p,g){var m=p.projection;return(g._isScoped?r:g._isClipped?a:i)(p,m)}},84888:function(C,A,e){"use strict";var v=e(24040),w=e(33816).SUBPLOT_PATTERN;A.KY=function(n,T,x){var f=v.subplotsRegistry[T];if(!f)return[];for(var s=f.attr,t=[],o=0;o<n.length;o++){var r=n[o];r[0].trace[s]===x&&t.push(r)}return t},A._M=function(n,T,x){var f,s=[],t=[];if(!(f=typeof T=="string"?v.getModule(T).plot:typeof T=="function"?T:T.plot))return[s,n];for(var o=x,r=0;r<n.length;r++){var i=n[r],a=i[0].trace,u=a.zorder!==void 0;a.visible===!0&&a._length!==0&&(!a._module||a._module.plot!==f||u&&a.zorder!==o?t.push(i):s.push(i))}return[s,t]},A.op=function(n,T,x){if(!v.subplotsRegistry[T])return[];var f,s,t,o=v.subplotsRegistry[T].attr,r=[];if(T==="gl2d"){var i=x.match(w);s="x"+i[1],t="y"+i[2]}for(var a=0;a<n.length;a++)f=n[a],T==="gl2d"&&v.traceIs(f,"gl2d")?f[o[0]]===s&&f[o[1]]===t&&r.push(f):f[o]===x&&r.push(f);return r}},2428:function(C,A,e){"use strict";var v=e(62644),w=e(97264),n=e(29128),T=e(33816),x=e(89184);function f(s,t){this.element=s,this.plot=t,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}C.exports=function(s){var t=s.mouseContainer,o=s.glplot,r=new f(t,o);function i(){s.xaxis.autorange=!1,s.yaxis.autorange=!1}function a(u,l,d){var c,_,p=s.calcDataBox(),g=o.viewBox,m=r.lastPos[0],b=r.lastPos[1],y=T.MINDRAG*o.pixelRatio,M=T.MINZOOM*o.pixelRatio;function h(O,N,V){var F=Math.min(N,V),j=Math.max(N,V);F!==j?(p[O]=F,p[O+2]=j,r.dataBox=p,s.setRanges(p)):(s.selectBox.selectBox=[0,0,1,1],s.glplot.setDirty())}switch(l*=o.pixelRatio,d*=o.pixelRatio,d=g[3]-g[1]-d,s.fullLayout.dragmode){case"zoom":if(u){var E=l/(g[2]-g[0])*(p[2]-p[0])+p[0],k=d/(g[3]-g[1])*(p[3]-p[1])+p[1];r.boxInited||(r.boxStart[0]=E,r.boxStart[1]=k,r.dragStart[0]=l,r.dragStart[1]=d),r.boxEnd[0]=E,r.boxEnd[1]=k,r.boxInited=!0,r.boxEnabled||r.boxStart[0]===r.boxEnd[0]&&r.boxStart[1]===r.boxEnd[1]||(r.boxEnabled=!0);var D=Math.abs(r.dragStart[0]-l)<M,P=Math.abs(r.dragStart[1]-d)<M;if(!function(){for(var O=s.graphDiv._fullLayout._axisConstraintGroups,N=s.xaxis._id,V=s.yaxis._id,F=0;F<O.length;F++)if(O[F][N]!==-1){if(O[F][V]!==-1)return!0;break}return!1}()||D&&P)D&&(r.boxEnd[0]=r.boxStart[0]),P&&(r.boxEnd[1]=r.boxStart[1]);else{c=r.boxEnd[0]-r.boxStart[0],_=r.boxEnd[1]-r.boxStart[1];var L=(p[3]-p[1])/(p[2]-p[0]);Math.abs(c*L)>Math.abs(_)?(r.boxEnd[1]=r.boxStart[1]+Math.abs(c)*L*(_>=0?1:-1),r.boxEnd[1]<p[1]?(r.boxEnd[1]=p[1],r.boxEnd[0]=r.boxStart[0]+(p[1]-r.boxStart[1])/Math.abs(L)):r.boxEnd[1]>p[3]&&(r.boxEnd[1]=p[3],r.boxEnd[0]=r.boxStart[0]+(p[3]-r.boxStart[1])/Math.abs(L))):(r.boxEnd[0]=r.boxStart[0]+Math.abs(_)/L*(c>=0?1:-1),r.boxEnd[0]<p[0]?(r.boxEnd[0]=p[0],r.boxEnd[1]=r.boxStart[1]+(p[0]-r.boxStart[0])*Math.abs(L)):r.boxEnd[0]>p[2]&&(r.boxEnd[0]=p[2],r.boxEnd[1]=r.boxStart[1]+(p[2]-r.boxStart[0])*Math.abs(L)))}}else r.boxEnabled?(c=r.boxStart[0]!==r.boxEnd[0],_=r.boxStart[1]!==r.boxEnd[1],c||_?(c&&(h(0,r.boxStart[0],r.boxEnd[0]),s.xaxis.autorange=!1),_&&(h(1,r.boxStart[1],r.boxEnd[1]),s.yaxis.autorange=!1),s.relayoutCallback()):s.glplot.setDirty(),r.boxEnabled=!1,r.boxInited=!1):r.boxInited&&(r.boxInited=!1);break;case"pan":r.boxEnabled=!1,r.boxInited=!1,u?(r.panning||(r.dragStart[0]=l,r.dragStart[1]=d),Math.abs(r.dragStart[0]-l)<y&&(l=r.dragStart[0]),Math.abs(r.dragStart[1]-d)<y&&(d=r.dragStart[1]),c=(m-l)*(p[2]-p[0])/(o.viewBox[2]-o.viewBox[0]),_=(b-d)*(p[3]-p[1])/(o.viewBox[3]-o.viewBox[1]),p[0]+=c,p[2]+=c,p[1]+=_,p[3]+=_,s.setRanges(p),r.panning=!0,r.lastInputTime=Date.now(),i(),s.cameraChanged(),s.handleAnnotations()):r.panning&&(r.panning=!1,s.relayoutCallback())}r.lastPos[0]=l,r.lastPos[1]=d}return r.mouseListener=v(t,a),t.addEventListener("touchstart",function(u){var l=n(u.changedTouches[0],t);a(0,l[0],l[1]),a(1,l[0],l[1]),u.preventDefault()},!!x&&{passive:!1}),t.addEventListener("touchmove",function(u){u.preventDefault();var l=n(u.changedTouches[0],t);a(1,l[0],l[1]),u.preventDefault()},!!x&&{passive:!1}),t.addEventListener("touchend",function(u){a(0,r.lastPos[0],r.lastPos[1]),u.preventDefault()},!!x&&{passive:!1}),r.wheelListener=w(t,function(u,l){if(!s.scrollZoom)return!1;var d=s.calcDataBox(),c=o.viewBox,_=r.lastPos[0],p=r.lastPos[1],g=Math.exp(5*l/(c[3]-c[1])),m=_/(c[2]-c[0])*(d[2]-d[0])+d[0],b=p/(c[3]-c[1])*(d[3]-d[1])+d[1];return d[0]=(d[0]-m)*g+m,d[2]=(d[2]-m)*g+m,d[1]=(d[1]-b)*g+b,d[3]=(d[3]-b)*g+b,s.setRanges(d),r.lastInputTime=Date.now(),i(),s.cameraChanged(),s.handleAnnotations(),s.relayoutCallback(),!0},!0),r}},92568:function(C,A,e){"use strict";var v=e(54460),w=e(43080);function n(f){this.scene=f,this.gl=f.gl,this.pixelRatio=f.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var T=n.prototype,x=["xaxis","yaxis"];T.merge=function(f){var s,t,o,r,i,a,u,l,d,c,_;for(this.titleEnable=!1,this.backgroundColor=w(f.plot_bgcolor),c=0;c<2;++c){var p=(s=x[c]).charAt(0);for(o=(t=f[this.scene[s]._name]).title.text===this.scene.fullLayout._dfltTitle[p]?"":t.title.text,_=0;_<=2;_+=2)this.labelEnable[c+_]=!1,this.labels[c+_]=o,this.labelColor[c+_]=w(t.title.font.color),this.labelFont[c+_]=t.title.font.family,this.labelSize[c+_]=t.title.font.size,this.labelPad[c+_]=this.getLabelPad(s,t),this.tickEnable[c+_]=!1,this.tickColor[c+_]=w((t.tickfont||{}).color),this.tickAngle[c+_]=t.tickangle==="auto"?0:Math.PI*-t.tickangle/180,this.tickPad[c+_]=this.getTickPad(t),this.tickMarkLength[c+_]=0,this.tickMarkWidth[c+_]=t.tickwidth||0,this.tickMarkColor[c+_]=w(t.tickcolor),this.borderLineEnable[c+_]=!1,this.borderLineColor[c+_]=w(t.linecolor),this.borderLineWidth[c+_]=t.linewidth||0;u=this.hasSharedAxis(t),i=this.hasAxisInDfltPos(s,t)&&!u,a=this.hasAxisInAltrPos(s,t)&&!u,r=t.mirror||!1,l=u?String(r).indexOf("all")!==-1:!!r,d=u?r==="allticks":String(r).indexOf("ticks")!==-1,i?this.labelEnable[c]=!0:a&&(this.labelEnable[c+2]=!0),i?this.tickEnable[c]=t.showticklabels:a&&(this.tickEnable[c+2]=t.showticklabels),(i||l)&&(this.borderLineEnable[c]=t.showline),(a||l)&&(this.borderLineEnable[c+2]=t.showline),(i||d)&&(this.tickMarkLength[c]=this.getTickMarkLength(t)),(a||d)&&(this.tickMarkLength[c+2]=this.getTickMarkLength(t)),this.gridLineEnable[c]=t.showgrid,this.gridLineColor[c]=w(t.gridcolor),this.gridLineWidth[c]=t.gridwidth,this.zeroLineEnable[c]=t.zeroline,this.zeroLineColor[c]=w(t.zerolinecolor),this.zeroLineWidth[c]=t.zerolinewidth}},T.hasSharedAxis=function(f){var s=this.scene,t=s.fullLayout._subplots.gl2d;return v.findSubplotsWithAxis(t,f).indexOf(s.id)!==0},T.hasAxisInDfltPos=function(f,s){var t=s.side;return f==="xaxis"?t==="bottom":f==="yaxis"?t==="left":void 0},T.hasAxisInAltrPos=function(f,s){var t=s.side;return f==="xaxis"?t==="top":f==="yaxis"?t==="right":void 0},T.getLabelPad=function(f,s){var t=1.5,o=s.title.font.size,r=s.showticklabels;return f==="xaxis"?s.side==="top"?o*(t+(r?1:0))-10:o*(t+(r?.5:0))-10:f==="yaxis"?s.side==="right"?10+o*(t+(r?1:.5)):10+o*(t+(r?.5:0)):void 0},T.getTickPad=function(f){return f.ticks==="outside"?10+f.ticklen:15},T.getTickMarkLength=function(f){if(!f.ticks)return 0;var s=f.ticklen;return f.ticks==="inside"?-s:s},C.exports=function(f){return new n(f)}},39952:function(C,A,e){"use strict";var v=e(67824).overrideAll,w=e(17188),n=e(64859),T=e(9616),x=e(33816),f=e(57952),s=e(65460),t=e(84888).op;A.name="gl2d",A.attr=["xaxis","yaxis"],A.idRoot=["x","y"],A.idRegex=x.idRegex,A.attrRegex=x.attrRegex,A.attributes=e(26720),A.supplyLayoutDefaults=function(o,r,i){r._has("cartesian")||f.supplyLayoutDefaults(o,r,i)},A.layoutAttrOverrides=v(f.layoutAttributes,"plot","from-root"),A.baseLayoutAttrOverrides=v({plot_bgcolor:n.plot_bgcolor,hoverlabel:s.hoverlabel},"plot","nested"),A.plot=function(o){for(var r=o._fullLayout,i=o._fullData,a=r._subplots.gl2d,u=0;u<a.length;u++){var l=a[u],d=r._plots[l],c=t(i,"gl2d",l),_=d._scene2d;_===void 0&&(_=new w({id:l,graphDiv:o,container:o.querySelector(".gl-container"),staticPlot:o._context.staticPlot,plotGlPixelRatio:o._context.plotGlPixelRatio},r),d._scene2d=_),_.plot(c,o.calcdata,r,o.layout)}},A.clean=function(o,r,i,a){for(var u=a._subplots.gl2d||[],l=0;l<u.length;l++){var d=u[l],c=a._plots[d];c._scene2d&&t(o,"gl2d",d).length===0&&(c._scene2d.destroy(),delete a._plots[d])}f.clean.apply(this,arguments)},A.drawFramework=function(o){o._context.staticPlot||f.drawFramework(o)},A.toSVG=function(o){for(var r=o._fullLayout,i=r._subplots.gl2d,a=0;a<i.length;a++){var u=r._plots[i[a]]._scene2d,l=u.toImage("png");r._glimages.append("svg:image").attr({xmlns:T.svg,"xlink:href":l,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),u.destroy()}},A.updateFx=function(o){for(var r=o._fullLayout,i=r._subplots.gl2d,a=0;a<i.length;a++)r._plots[i[a]]._scene2d.updateFx(r.dragmode)}},17188:function(C,A,e){"use strict";var v,w,n=e(24040),T=e(54460),x=e(93024),f=e(67792).gl_plot2d,s=e(67792).gl_spikes2d,t=e(67792).gl_select_box,o=e(5408),r=e(92568),i=e(2428),a=e(16576),u=e(71888),l=u.enforce,d=u.clean,c=e(19280).doAutoRange,_=e(72760),p=_.drawMode,g=_.selectMode,m=["xaxis","yaxis"],b=e(33816).SUBPLOT_PATTERN;function y(h,E){this.container=h.container,this.graphDiv=h.graphDiv,this.pixelRatio=h.plotGlPixelRatio||window.devicePixelRatio,this.id=h.id,this.staticPlot=!!h.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(E),this.makeFramework(),this.stopped||(this.glplotOptions=r(this),this.glplotOptions.merge(E),this.glplot=f(this.glplotOptions),this.camera=i(this),this.traces={},this.spikes=s(this.glplot),this.selectBox=t(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}C.exports=y;var M=y.prototype;M.makeFramework=function(){if(this.staticPlot){if(!(w||(v=document.createElement("canvas"),w=o({canvas:v,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=v,this.gl=w}else{var h=this.container.querySelector(".gl-canvas-focus"),E=o({canvas:h,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!E)return a(this),void(this.stopped=!0);this.canvas=h,this.gl=E}var k=this.canvas;k.style.width="100%",k.style.height="100%",k.style.position="absolute",k.style.top="0px",k.style.left="0px",k.style["pointer-events"]="none",this.updateSize(k);var D=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");D.style.position="absolute",D.style.top=D.style.left="0px",D.style.width=D.style.height="100%",D.style["z-index"]=20,D.style["pointer-events"]="none";var P=this.mouseContainer=document.createElement("div");P.style.position="absolute",P.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var L=this.container;L.appendChild(D),L.appendChild(P);var O=this;P.addEventListener("mouseout",function(){O.isMouseOver=!1,O.unhover()}),P.addEventListener("mouseover",function(){O.isMouseOver=!0})},M.toImage=function(h){h||(h="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(v),this.updateSize(this.canvas);var E=this.glplot.gl,k=E.drawingBufferWidth,D=E.drawingBufferHeight;E.clearColor(1,1,1,0),E.clear(E.COLOR_BUFFER_BIT|E.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),E.bindFramebuffer(E.FRAMEBUFFER,null);var P=new Uint8Array(k*D*4);E.readPixels(0,0,k,D,E.RGBA,E.UNSIGNED_BYTE,P);for(var L=0,O=D-1;L<O;++L,--O)for(var N=0;N<k;++N)for(var V=0;V<4;++V){var F=P[4*(k*L+N)+V];P[4*(k*L+N)+V]=P[4*(k*O+N)+V],P[4*(k*O+N)+V]=F}var j=document.createElement("canvas");j.width=k,j.height=D;var Z,z=j.getContext("2d",{willReadFrequently:!0}),H=z.createImageData(k,D);switch(H.data.set(P),z.putImageData(H,0,0),h){case"jpeg":Z=j.toDataURL("image/jpeg");break;case"webp":Z=j.toDataURL("image/webp");break;default:Z=j.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(v),Z},M.updateSize=function(h){h||(h=this.canvas);var E=this.pixelRatio,k=this.fullLayout,D=k.width,P=k.height,L=0|Math.ceil(E*D),O=0|Math.ceil(E*P);return h.width===L&&h.height===O||(h.width=L,h.height=O),h},M.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var h=[T.calcTicks(this.xaxis),T.calcTicks(this.yaxis)],E=0;E<2;++E)for(var k=0;k<h[E].length;++k)h[E][k].text=h[E][k].text+"";return h},M.updateRefs=function(h){this.fullLayout=h;var E=this.id.match(b),k="xaxis"+E[1],D="yaxis"+E[2];this.xaxis=this.fullLayout[k],this.yaxis=this.fullLayout[D]},M.relayoutCallback=function(){var h=this.graphDiv,E=this.xaxis,k=this.yaxis,D=h.layout,P={},L=P[E._name+".range"]=E.range.slice(),O=P[k._name+".range"]=k.range.slice();P[E._name+".autorange"]=E.autorange,P[k._name+".autorange"]=k.autorange,n.call("_storeDirectGUIEdit",h.layout,h._fullLayout._preGUI,P);var N=D[E._name];N.range=L,N.autorange=E.autorange;var V=D[k._name];V.range=O,V.autorange=k.autorange,P.lastInputTime=this.camera.lastInputTime,h.emit("plotly_relayout",P)},M.cameraChanged=function(){var h=this.camera;this.glplot.setDataBox(this.calcDataBox());var E=this.computeTickMarks();(function(k,D){for(var P=0;P<2;++P){var L=k[P],O=D[P];if(L.length!==O.length)return!0;for(var N=0;N<L.length;++N)if(L[N].x!==O[N].x)return!0}return!1})(E,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=E,this.glplotOptions.dataBox=h.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},M.handleAnnotations=function(){for(var h=this.graphDiv,E=this.fullLayout.annotations,k=0;k<E.length;k++){var D=E[k];D.xref===this.xaxis._id&&D.yref===this.yaxis._id&&n.getComponentMethod("annotations","drawOne")(h,k)}},M.destroy=function(){if(this.glplot){var h=this.traces;h&&Object.keys(h).map(function(E){h[E].dispose(),delete h[E]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},M.plot=function(h,E,k){var D=this.glplot;this.updateRefs(k),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(h,E),this.updateFx(k.dragmode);var P=k.width,L=k.height;this.updateSize(this.canvas);var O=this.glplotOptions;O.merge(k),O.screenBox=[0,0,P,L];var N={_fullLayout:{_axisConstraintGroups:k._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:k._size}};d(N,this.xaxis),d(N,this.yaxis);var V,F,j=k._size,Z=this.xaxis.domain,z=this.yaxis.domain;for(O.viewBox=[j.l+Z[0]*j.w,j.b+z[0]*j.h,P-j.r-(1-Z[1])*j.w,L-j.t-(1-z[1])*j.h],this.mouseContainer.style.width=j.w*(Z[1]-Z[0])+"px",this.mouseContainer.style.height=j.h*(z[1]-z[0])+"px",this.mouseContainer.height=j.h*(z[1]-z[0]),this.mouseContainer.style.left=j.l+Z[0]*j.w+"px",this.mouseContainer.style.top=j.t+(1-z[1])*j.h+"px",F=0;F<2;++F)(V=this[m[F]])._length=O.viewBox[F+2]-O.viewBox[F],c(this.graphDiv,V),V.setScale();l(N),O.ticks=this.computeTickMarks(),O.dataBox=this.calcDataBox(),O.merge(k),D.update(O),this.glplot.draw()},M.calcDataBox=function(){var h=this.xaxis,E=this.yaxis,k=h.range,D=E.range,P=h.r2l,L=E.r2l;return[P(k[0]),L(D[0]),P(k[1]),L(D[1])]},M.setRanges=function(h){var E=this.xaxis,k=this.yaxis,D=E.l2r,P=k.l2r;E.range=[D(h[0]),D(h[2])],k.range=[P(h[1]),P(h[3])]},M.updateTraces=function(h,E){var k,D,P,L=Object.keys(this.traces);this.fullData=h;e:for(k=0;k<L.length;k++){var O=L[k],N=this.traces[O];for(D=0;D<h.length;D++)if((P=h[D]).uid===O&&P.type===N.type)continue e;N.dispose(),delete this.traces[O]}for(k=0;k<h.length;k++){P=h[k];var V=E[k],F=this.traces[P.uid];F?F.update(P,V):(F=P._module.plot(this,P,V),this.traces[P.uid]=F)}this.glplot.objects.sort(function(j,Z){return j._trace.index-Z._trace.index})},M.updateFx=function(h){g(h)||p(h)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor=h==="pan"?"move":h==="zoom"?"crosshair":null},M.emitPointAction=function(h,E){for(var k,D=h.trace.uid,P=h.pointIndex,L=0;L<this.fullData.length;L++)this.fullData[L].uid===D&&(k=this.fullData[L]);var O={x:h.traceCoord[0],y:h.traceCoord[1],curveNumber:k.index,pointNumber:P,data:k._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};x.appendArrayPointValue(O,k,P),this.graphDiv.emit(E,{points:[O]})},M.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var h=this.glplot,E=this.camera,k=E.mouseListener,D=this.lastButtonState===1&&k.buttons===0,P=this.fullLayout;this.lastButtonState=k.buttons,this.cameraChanged();var L,O=k.x*h.pixelRatio,N=this.canvas.height-h.pixelRatio*k.y;if(E.boxEnabled&&P.dragmode==="zoom"){this.selectBox.enabled=!0;for(var V=this.selectBox.selectBox=[Math.min(E.boxStart[0],E.boxEnd[0]),Math.min(E.boxStart[1],E.boxEnd[1]),Math.max(E.boxStart[0],E.boxEnd[0]),Math.max(E.boxStart[1],E.boxEnd[1])],F=0;F<2;F++)E.boxStart[F]===E.boxEnd[F]&&(V[F]=h.dataBox[F],V[F+2]=h.dataBox[F+2]);h.setDirty()}else if(!E.panning&&this.isMouseOver){this.selectBox.enabled=!1;var j=P._size,Z=this.xaxis.domain,z=this.yaxis.domain,H=(L=h.pick(O/h.pixelRatio+j.l+Z[0]*j.w,N/h.pixelRatio-(j.t+(1-z[1])*j.h)))&&L.object._trace.handlePick(L);if(H&&D&&this.emitPointAction(H,"plotly_click"),L&&L.object._trace.hoverinfo!=="skip"&&P.hovermode&&H&&(!this.lastPickResult||this.lastPickResult.traceUid!==H.trace.uid||this.lastPickResult.dataCoord[0]!==H.dataCoord[0]||this.lastPickResult.dataCoord[1]!==H.dataCoord[1])){var U=H;this.lastPickResult={traceUid:H.trace?H.trace.uid:null,dataCoord:H.dataCoord.slice()},this.spikes.update({center:L.dataCoord}),U.screenCoord=[((h.viewBox[2]-h.viewBox[0])*(L.dataCoord[0]-h.dataBox[0])/(h.dataBox[2]-h.dataBox[0])+h.viewBox[0])/h.pixelRatio,(this.canvas.height-(h.viewBox[3]-h.viewBox[1])*(L.dataCoord[1]-h.dataBox[1])/(h.dataBox[3]-h.dataBox[1])-h.viewBox[1])/h.pixelRatio],this.emitPointAction(H,"plotly_hover");var re=this.fullData[U.trace.index]||{},ee=U.pointIndex,J=x.castHoverinfo(re,P,ee);if(J&&J!=="all"){var Q=J.split("+");Q.indexOf("x")===-1&&(U.traceCoord[0]=void 0),Q.indexOf("y")===-1&&(U.traceCoord[1]=void 0),Q.indexOf("z")===-1&&(U.traceCoord[2]=void 0),Q.indexOf("text")===-1&&(U.textLabel=void 0),Q.indexOf("name")===-1&&(U.name=void 0)}x.loneHover({x:U.screenCoord[0],y:U.screenCoord[1],xLabel:this.hoverFormatter("xaxis",U.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",U.traceCoord[1]),zLabel:U.traceCoord[2],text:U.textLabel,name:U.name,color:x.castHoverOption(re,ee,"bgcolor")||U.color,borderColor:x.castHoverOption(re,ee,"bordercolor"),fontFamily:x.castHoverOption(re,ee,"font.family"),fontSize:x.castHoverOption(re,ee,"font.size"),fontColor:x.castHoverOption(re,ee,"font.color"),nameLength:x.castHoverOption(re,ee,"namelength"),textAlign:x.castHoverOption(re,ee,"align")},{container:this.svgContainer,gd:this.graphDiv})}}L||this.unhover(),h.draw()}},M.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),x.loneUnhover(this.svgContainer))},M.hoverFormatter=function(h,E){if(E!==void 0){var k=this[h];return T.tickText(k,k.c2l(E),"hover").text}}},12536:function(C,A,e){"use strict";var v=e(67824).overrideAll,w=e(65460),n=e(98432),T=e(84888).op,x=e(3400),f=e(9616),s="gl3d",t="scene";A.name=s,A.attr=t,A.idRoot=t,A.idRegex=A.attrRegex=x.counterRegex("scene"),A.attributes=e(6636),A.layoutAttributes=e(346),A.baseLayoutAttrOverrides=v({hoverlabel:w.hoverlabel},"plot","nested"),A.supplyLayoutDefaults=e(5208),A.plot=function(o){for(var r=o._fullLayout,i=o._fullData,a=r._subplots[s],u=0;u<a.length;u++){var l=a[u],d=T(i,s,l),c=r[l],_=c.camera,p=c._scene;p||(p=new n({id:l,graphDiv:o,container:o.querySelector(".gl-container"),staticPlot:o._context.staticPlot,plotGlPixelRatio:o._context.plotGlPixelRatio,camera:_},r),c._scene=p),p.viewInitial||(p.viewInitial={up:{x:_.up.x,y:_.up.y,z:_.up.z},eye:{x:_.eye.x,y:_.eye.y,z:_.eye.z},center:{x:_.center.x,y:_.center.y,z:_.center.z}}),p.plot(d,r,o.layout)}},A.clean=function(o,r,i,a){for(var u=a._subplots[s]||[],l=0;l<u.length;l++){var d=u[l];!r[d]&&a[d]._scene&&(a[d]._scene.destroy(),a._infolayer&&a._infolayer.selectAll(".annotation-"+d).remove())}},A.toSVG=function(o){for(var r=o._fullLayout,i=r._subplots[s],a=r._size,u=0;u<i.length;u++){var l=r[i[u]],d=l.domain,c=l._scene,_=c.toImage("png");r._glimages.append("svg:image").attr({xmlns:f.svg,"xlink:href":_,x:a.l+a.w*d.x[0],y:a.t+a.h*(1-d.y[1]),width:a.w*(d.x[1]-d.x[0]),height:a.h*(d.y[1]-d.y[0]),preserveAspectRatio:"none"}),c.destroy()}},A.cleanId=function(o){if(o.match(/^scene[0-9]*$/)){var r=o.substr(5);return r==="1"&&(r=""),t+r}},A.updateFx=function(o){for(var r=o._fullLayout,i=r._subplots[s],a=0;a<i.length;a++)r[i[a]]._scene.updateFx(r.dragmode,r.hovermode)}},6636:function(C){"use strict";C.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},86140:function(C,A,e){"use strict";var v=e(76308),w=e(94724),n=e(92880).extendFlat,T=e(67824).overrideAll;C.exports=T({visible:w.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:v.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:w.color,categoryorder:w.categoryorder,categoryarray:w.categoryarray,title:{text:w.title.text,font:w.title.font},type:n({},w.type,{values:["-","linear","log","date","category"]}),autotypenumbers:w.autotypenumbers,autorange:w.autorange,autorangeoptions:{minallowed:w.autorangeoptions.minallowed,maxallowed:w.autorangeoptions.maxallowed,clipmin:w.autorangeoptions.clipmin,clipmax:w.autorangeoptions.clipmax,include:w.autorangeoptions.include,editType:"plot"},rangemode:w.rangemode,minallowed:w.minallowed,maxallowed:w.maxallowed,range:n({},w.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:w.minor.tickmode,nticks:w.nticks,tick0:w.tick0,dtick:w.dtick,tickvals:w.tickvals,ticktext:w.ticktext,ticks:w.ticks,mirror:w.mirror,ticklen:w.ticklen,tickwidth:w.tickwidth,tickcolor:w.tickcolor,showticklabels:w.showticklabels,labelalias:w.labelalias,tickfont:w.tickfont,tickangle:w.tickangle,tickprefix:w.tickprefix,showtickprefix:w.showtickprefix,ticksuffix:w.ticksuffix,showticksuffix:w.showticksuffix,showexponent:w.showexponent,exponentformat:w.exponentformat,minexponent:w.minexponent,separatethousands:w.separatethousands,tickformat:w.tickformat,tickformatstops:w.tickformatstops,hoverformat:w.hoverformat,showline:w.showline,linecolor:w.linecolor,linewidth:w.linewidth,showgrid:w.showgrid,gridcolor:n({},w.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:w.gridwidth,zeroline:w.zeroline,zerolinecolor:w.zerolinecolor,zerolinewidth:w.zerolinewidth,_deprecated:{title:w._deprecated.title,titlefont:w._deprecated.titlefont}},"plot","from-root")},64380:function(C,A,e){"use strict";var v=e(49760).mix,w=e(3400),n=e(31780),T=e(86140),x=e(14944),f=e(28336),s=["xaxis","yaxis","zaxis"];C.exports=function(t,o,r){var i,a;function u(c,_){return w.coerce(i,a,T,c,_)}for(var l=0;l<s.length;l++){var d=s[l];i=t[d]||{},(a=n.newContainer(o,d))._id=d[0]+r.scene,a._name=d,x(i,a,u,r),f(i,a,u,{font:r.font,letter:d[0],data:r.data,showGrid:!0,noAutotickangles:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,noInsiderange:!0,bgColor:r.bgColor,calendar:r.calendar},r.fullLayout),u("gridcolor",v(a.color,r.bgColor,72.72727272727273).toRgbString()),u("title.text",d[0]),a.setScale=w.noop,u("showspikes")&&(u("spikesides"),u("spikethickness"),u("spikecolor",a.color)),u("showaxeslabels"),u("showbackground")&&u("backgroundcolor")}}},44728:function(C,A,e){"use strict";var v=e(43080),w=e(3400),n=["xaxis","yaxis","zaxis"];function T(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickFontWeight=["normal","normal","normal","normal"],this.tickFontStyle=["normal","normal","normal","normal"],this.tickFontVariant=["normal","normal","normal","normal"],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelFontWeight=["normal","normal","normal","normal"],this.labelFontStyle=["normal","normal","normal","normal"],this.labelFontVariant=["normal","normal","normal","normal"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}T.prototype.merge=function(x,f){for(var s=this,t=0;t<3;++t){var o=f[n[t]];o.visible?(s.labels[t]=x._meta?w.templateString(o.title.text,x._meta):o.title.text,"font"in o.title&&(o.title.font.color&&(s.labelColor[t]=v(o.title.font.color)),o.title.font.family&&(s.labelFont[t]=o.title.font.family),o.title.font.size&&(s.labelSize[t]=o.title.font.size),o.title.font.weight&&(s.labelFontWeight[t]=o.title.font.weight),o.title.font.style&&(s.labelFontStyle[t]=o.title.font.style),o.title.font.variant&&(s.labelFontVariant[t]=o.title.font.variant)),"showline"in o&&(s.lineEnable[t]=o.showline),"linecolor"in o&&(s.lineColor[t]=v(o.linecolor)),"linewidth"in o&&(s.lineWidth[t]=o.linewidth),"showgrid"in o&&(s.gridEnable[t]=o.showgrid),"gridcolor"in o&&(s.gridColor[t]=v(o.gridcolor)),"gridwidth"in o&&(s.gridWidth[t]=o.gridwidth),o.type==="log"?s.zeroEnable[t]=!1:"zeroline"in o&&(s.zeroEnable[t]=o.zeroline),"zerolinecolor"in o&&(s.zeroLineColor[t]=v(o.zerolinecolor)),"zerolinewidth"in o&&(s.zeroLineWidth[t]=o.zerolinewidth),"ticks"in o&&o.ticks?s.lineTickEnable[t]=!0:s.lineTickEnable[t]=!1,"ticklen"in o&&(s.lineTickLength[t]=s._defaultLineTickLength[t]=o.ticklen),"tickcolor"in o&&(s.lineTickColor[t]=v(o.tickcolor)),"tickwidth"in o&&(s.lineTickWidth[t]=o.tickwidth),"tickangle"in o&&(s.tickAngle[t]=o.tickangle==="auto"?-3600:Math.PI*-o.tickangle/180),"showticklabels"in o&&(s.tickEnable[t]=o.showticklabels),"tickfont"in o&&(o.tickfont.color&&(s.tickColor[t]=v(o.tickfont.color)),o.tickfont.family&&(s.tickFont[t]=o.tickfont.family),o.tickfont.size&&(s.tickSize[t]=o.tickfont.size),o.tickfont.weight&&(s.tickFontWeight[t]=o.tickfont.weight),o.tickfont.style&&(s.tickFontStyle[t]=o.tickfont.style),o.tickfont.variant&&(s.tickFontVariant[t]=o.tickfont.variant)),"mirror"in o?["ticks","all","allticks"].indexOf(o.mirror)!==-1?(s.lineTickMirror[t]=!0,s.lineMirror[t]=!0):o.mirror===!0?(s.lineTickMirror[t]=!1,s.lineMirror[t]=!0):(s.lineTickMirror[t]=!1,s.lineMirror[t]=!1):s.lineMirror[t]=!1,"showbackground"in o&&o.showbackground!==!1?(s.backgroundEnable[t]=!0,s.backgroundColor[t]=v(o.backgroundcolor)):s.backgroundEnable[t]=!1):(s.tickEnable[t]=!1,s.labelEnable[t]=!1,s.lineEnable[t]=!1,s.lineTickEnable[t]=!1,s.gridEnable[t]=!1,s.zeroEnable[t]=!1,s.backgroundEnable[t]=!1)}},C.exports=function(x,f){var s=new T;return s.merge(x,f),s}},5208:function(C,A,e){"use strict";var v=e(3400),w=e(76308),n=e(24040),T=e(168),x=e(64380),f=e(346),s=e(84888).op,t="gl3d";function o(r,i,a,u){for(var l=a("bgcolor"),d=w.combine(l,u.paper_bgcolor),c=["up","center","eye"],_=0;_<c.length;_++)a("camera."+c[_]+".x"),a("camera."+c[_]+".y"),a("camera."+c[_]+".z");a("camera.projection.type");var p=!!a("aspectratio.x")&&!!a("aspectratio.y")&&!!a("aspectratio.z"),g=a("aspectmode",p?"manual":"auto");p||(r.aspectratio=i.aspectratio={x:1,y:1,z:1},g==="manual"&&(i.aspectmode="auto"),r.aspectmode=i.aspectmode);var m=s(u.fullData,t,u.id);x(r,i,{font:u.font,scene:u.id,data:m,bgColor:d,calendar:u.calendar,autotypenumbersDflt:u.autotypenumbersDflt,fullLayout:u.fullLayout}),n.getComponentMethod("annotations3d","handleDefaults")(r,i,u);var b=u.getDfltFromLayout("dragmode");if(b!==!1&&!b)if(b="orbit",r.camera&&r.camera.up){var y=r.camera.up.x,M=r.camera.up.y,h=r.camera.up.z;h!==0&&(y&&M&&h?h/Math.sqrt(y*y+M*M+h*h)>.999&&(b="turntable"):b="turntable")}else b="turntable";a("dragmode",b),a("hovermode",u.getDfltFromLayout("hovermode"))}C.exports=function(r,i,a){var u=i._basePlotModules.length>1;T(r,i,a,{type:t,attributes:f,handleDefaults:o,fullLayout:i,font:i.font,fullData:a,getDfltFromLayout:function(l){if(!u)return v.validate(r[l],f[l])?r[l]:void 0},autotypenumbersDflt:i.autotypenumbers,paper_bgcolor:i.paper_bgcolor,calendar:i.calendar})}},346:function(C,A,e){"use strict";var v=e(86140),w=e(86968).u,n=e(92880).extendFlat,T=e(3400).counterRegex;function x(f,s,t){return{x:{valType:"number",dflt:f,editType:"camera"},y:{valType:"number",dflt:s,editType:"camera"},z:{valType:"number",dflt:t,editType:"camera"},editType:"camera"}}C.exports={_arrayAttrRegexps:[T("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:n(x(0,0,1),{}),center:n(x(0,0,0),{}),eye:n(x(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:w({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:v,yaxis:v,zaxis:v,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},9020:function(C,A,e){"use strict";var v=e(43080),w=["xaxis","yaxis","zaxis"];function n(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}n.prototype.merge=function(T){for(var x=0;x<3;++x){var f=T[w[x]];f.visible?(this.enabled[x]=f.showspikes,this.colors[x]=v(f.spikecolor),this.drawSides[x]=f.spikesides,this.lineWidth[x]=f.spikethickness):(this.enabled[x]=!1,this.drawSides[x]=!1)}},C.exports=function(T){var x=new n;return x.merge(T),x}},87152:function(C,A,e){"use strict";C.exports=function(x){for(var f=x.axesOptions,s=x.glplot.axesPixels,t=x.fullSceneLayout,o=[[],[],[]],r=0;r<3;++r){var i=t[n[r]];if(i._length=(s[r].hi-s[r].lo)*s[r].pixelsPerDataUnit/x.dataScale[r],Math.abs(i._length)===1/0||isNaN(i._length))o[r]=[];else{i._input_range=i.range.slice(),i.range[0]=s[r].lo/x.dataScale[r],i.range[1]=s[r].hi/x.dataScale[r],i._m=1/(x.dataScale[r]*s[r].pixelsPerDataUnit),i.range[0]===i.range[1]&&(i.range[0]-=1,i.range[1]+=1);var a=i.tickmode;if(i.tickmode==="auto"){i.tickmode="linear";var u=i.nticks||w.constrain(i._length/40,4,9);v.autoTicks(i,Math.abs(i.range[1]-i.range[0])/u)}for(var l=v.calcTicks(i,{msUTC:!0}),d=0;d<l.length;++d)l[d].x=l[d].x*x.dataScale[r],i.type==="date"&&(l[d].text=l[d].text.replace(/\<br\>/g," "));o[r]=l,i.tickmode=a}}for(f.ticks=o,r=0;r<3;++r)for(T[r]=.5*(x.glplot.bounds[0][r]+x.glplot.bounds[1][r]),d=0;d<2;++d)f.bounds[d][r]=x.glplot.bounds[d][r];x.contourLevels=function(c){for(var _=new Array(3),p=0;p<3;++p){for(var g=c[p],m=new Array(g.length),b=0;b<g.length;++b)m[b]=g[b].x;_[p]=m}return _}(o)};var v=e(54460),w=e(3400),n=["xaxis","yaxis","zaxis"],T=[0,0,0]},94424:function(C){"use strict";function A(e,v){var w,n,T=[0,0,0,0];for(w=0;w<4;++w)for(n=0;n<4;++n)T[n]+=e[4*w+n]*v[w];return T}C.exports=function(e,v){return A(e.projection,A(e.view,A(e.model,[v[0],v[1],v[2],1])))}},98432:function(C,A,e){"use strict";var v,w,n=e(67792).gl_plot3d,T=n.createCamera,x=n.createScene,f=e(5408),s=e(89184),t=e(24040),o=e(3400),r=o.preserveDrawingBuffer(),i=e(54460),a=e(93024),u=e(43080),l=e(16576),d=e(94424),c=e(44728),_=e(9020),p=e(87152),g=e(19280).applyAutorangeOptions,m=!1;function b(k,D){var P=document.createElement("div"),L=k.container;this.graphDiv=k.graphDiv;var O=document.createElementNS("http://www.w3.org/2000/svg","svg");O.style.position="absolute",O.style.top=O.style.left="0px",O.style.width=O.style.height="100%",O.style["z-index"]=20,O.style["pointer-events"]="none",P.appendChild(O),this.svgContainer=O,P.id=k.id,P.style.position="absolute",P.style.top=P.style.left="0px",P.style.width=P.style.height="100%",L.appendChild(P),this.fullLayout=D,this.id=k.id||"scene",this.fullSceneLayout=D[this.id],this.plotArgs=[[],{},{}],this.axesOptions=c(D,D[this.id]),this.spikeOptions=_(D[this.id]),this.container=P,this.staticMode=!!k.staticPlot,this.pixelRatio=this.pixelRatio||k.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=t.getComponentMethod("annotations3d","convert"),this.drawAnnotations=t.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var y=b.prototype;y.prepareOptions=function(){var k=this,D={canvas:k.canvas,gl:k.gl,glOptions:{preserveDrawingBuffer:r,premultipliedAlpha:!0,antialias:!0},container:k.container,axes:k.axesOptions,spikes:k.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:k.camera,pixelRatio:k.pixelRatio};if(k.staticMode){if(!(w||(v=document.createElement("canvas"),w=f({canvas:v,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");D.gl=w,D.canvas=v}return D};var M=!0;y.tryCreatePlot=function(){var k=this,D=k.prepareOptions(),P=!0;try{k.glplot=x(D)}catch{if(k.staticMode||!M||r)P=!1;else{o.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{r=D.glOptions.preserveDrawingBuffer=!0,k.glplot=x(D)}catch{r=D.glOptions.preserveDrawingBuffer=!1,P=!1}}}return M=!1,P},y.initializeGLCamera=function(){var k=this,D=k.fullSceneLayout.camera,P=D.projection.type==="orthographic";k.camera=T(k.container,{center:[D.center.x,D.center.y,D.center.z],eye:[D.eye.x,D.eye.y,D.eye.z],up:[D.up.x,D.up.y,D.up.z],_ortho:P,zoomMin:.01,zoomMax:100,mode:"orbit"})},y.initializeGLPlot=function(){var k=this;if(k.initializeGLCamera(),!k.tryCreatePlot())return l(k);k.traces={},k.make4thDimension();var D=k.graphDiv,P=D.layout,L=function(){var N={};return k.isCameraChanged(P)&&(N[k.id+".camera"]=k.getCamera()),k.isAspectChanged(P)&&(N[k.id+".aspectratio"]=k.glplot.getAspectratio(),P[k.id].aspectmode!=="manual"&&(k.fullSceneLayout.aspectmode=P[k.id].aspectmode=N[k.id+".aspectmode"]="manual")),N},O=function(N){if(N.fullSceneLayout.dragmode!==!1){var V=L();N.saveLayout(P),N.graphDiv.emit("plotly_relayout",V)}};return k.glplot.canvas&&(k.glplot.canvas.addEventListener("mouseup",function(){O(k)}),k.glplot.canvas.addEventListener("touchstart",function(){m=!0}),k.glplot.canvas.addEventListener("wheel",function(N){if(D._context._scrollZoom.gl3d){if(k.camera._ortho){var V=N.deltaX>N.deltaY?1.1:.9090909090909091,F=k.glplot.getAspectratio();k.glplot.setAspectratio({x:V*F.x,y:V*F.y,z:V*F.z})}O(k)}},!!s&&{passive:!1}),k.glplot.canvas.addEventListener("mousemove",function(){if(k.fullSceneLayout.dragmode!==!1&&k.camera.mouseListener.buttons!==0){var N=L();k.graphDiv.emit("plotly_relayouting",N)}}),k.staticMode||k.glplot.canvas.addEventListener("webglcontextlost",function(N){D&&D.emit&&D.emit("plotly_webglcontextlost",{event:N,layer:k.id})},!1)),k.glplot.oncontextloss=function(){k.recoverContext()},k.glplot.onrender=function(){k.render()},!0},y.render=function(){var k,D=this,P=D.graphDiv,L=D.svgContainer,O=D.container.getBoundingClientRect();P._fullLayout._calcInverseTransform(P);var N=P._fullLayout._invScaleX,V=P._fullLayout._invScaleY,F=O.width*N,j=O.height*V;L.setAttributeNS(null,"viewBox","0 0 "+F+" "+j),L.setAttributeNS(null,"width",F),L.setAttributeNS(null,"height",j),p(D),D.glplot.axes.update(D.axesOptions);for(var Z=Object.keys(D.traces),z=null,H=D.glplot.selection,U=0;U<Z.length;++U)(k=D.traces[Z[U]]).data.hoverinfo!=="skip"&&k.handlePick(H)&&(z=k),k.setContourLevels&&k.setContourLevels();function re(ve,ye,me){var Me=D.fullSceneLayout[ve+"axis"];return Me.type!=="log"&&(ye=Me.d2l(ye)),i.hoverLabelText(Me,ye,me)}if(z!==null){var ee=d(D.glplot.cameraParams,H.dataCoordinate);k=z.data;var J,Q=P._fullData[k.index],ne=H.index,K={xLabel:re("x",H.traceCoordinate[0],k.xhoverformat),yLabel:re("y",H.traceCoordinate[1],k.yhoverformat),zLabel:re("z",H.traceCoordinate[2],k.zhoverformat)},oe=a.castHoverinfo(Q,D.fullLayout,ne),le=(oe||"").split("+"),se=oe&&oe==="all";Q.hovertemplate||se||(le.indexOf("x")===-1&&(K.xLabel=void 0),le.indexOf("y")===-1&&(K.yLabel=void 0),le.indexOf("z")===-1&&(K.zLabel=void 0),le.indexOf("text")===-1&&(H.textLabel=void 0),le.indexOf("name")===-1&&(z.name=void 0));var de=[];k.type==="cone"||k.type==="streamtube"?(K.uLabel=re("x",H.traceCoordinate[3],k.uhoverformat),(se||le.indexOf("u")!==-1)&&de.push("u: "+K.uLabel),K.vLabel=re("y",H.traceCoordinate[4],k.vhoverformat),(se||le.indexOf("v")!==-1)&&de.push("v: "+K.vLabel),K.wLabel=re("z",H.traceCoordinate[5],k.whoverformat),(se||le.indexOf("w")!==-1)&&de.push("w: "+K.wLabel),K.normLabel=H.traceCoordinate[6].toPrecision(3),(se||le.indexOf("norm")!==-1)&&de.push("norm: "+K.normLabel),k.type==="streamtube"&&(K.divergenceLabel=H.traceCoordinate[7].toPrecision(3),(se||le.indexOf("divergence")!==-1)&&de.push("divergence: "+K.divergenceLabel)),H.textLabel&&de.push(H.textLabel),J=de.join("<br>")):k.type==="isosurface"||k.type==="volume"?(K.valueLabel=i.hoverLabelText(D._mockAxis,D._mockAxis.d2l(H.traceCoordinate[3]),k.valuehoverformat),de.push("value: "+K.valueLabel),H.textLabel&&de.push(H.textLabel),J=de.join("<br>")):J=H.textLabel;var be={x:H.traceCoordinate[0],y:H.traceCoordinate[1],z:H.traceCoordinate[2],data:Q._input,fullData:Q,curveNumber:Q.index,pointNumber:ne};a.appendArrayPointValue(be,Q,ne),k._module.eventData&&(be=Q._module.eventData(be,H,Q,{},ne));var _e={points:[be]};if(D.fullSceneLayout.hovermode){var xe=[];a.loneHover({trace:Q,x:(.5+.5*ee[0]/ee[3])*F,y:(.5-.5*ee[1]/ee[3])*j,xLabel:K.xLabel,yLabel:K.yLabel,zLabel:K.zLabel,text:J,name:z.name,color:a.castHoverOption(Q,ne,"bgcolor")||z.color,borderColor:a.castHoverOption(Q,ne,"bordercolor"),fontFamily:a.castHoverOption(Q,ne,"font.family"),fontSize:a.castHoverOption(Q,ne,"font.size"),fontColor:a.castHoverOption(Q,ne,"font.color"),nameLength:a.castHoverOption(Q,ne,"namelength"),textAlign:a.castHoverOption(Q,ne,"align"),hovertemplate:o.castOption(Q,ne,"hovertemplate"),hovertemplateLabels:o.extendFlat({},be,K),eventData:[be]},{container:L,gd:P,inOut_bbox:xe}),be.bbox=xe[0]}H.distance<5&&(H.buttons||m)?P.emit("plotly_click",_e):P.emit("plotly_hover",_e),this.oldEventData=_e}else a.loneUnhover(L),this.oldEventData&&P.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;D.drawAnnotations(D)},y.recoverContext=function(){var k=this;k.glplot.dispose();var D=function(){k.glplot.gl.isContextLost()?requestAnimationFrame(D):k.initializeGLPlot()?k.plot.apply(k,k.plotArgs):o.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(D)};var h=["xaxis","yaxis","zaxis"];function E(k,D,P){for(var L=k.fullSceneLayout,O=0;O<3;O++){var N=h[O],V=N.charAt(0),F=L[N],j=D[V],Z=D[V+"calendar"],z=D["_"+V+"length"];if(o.isArrayOrTypedArray(j))for(var H,U=0;U<(z||j.length);U++)if(o.isArrayOrTypedArray(j[U]))for(var re=0;re<j[U].length;++re)H=F.d2l(j[U][re],0,Z),!isNaN(H)&&isFinite(H)&&(P[0][O]=Math.min(P[0][O],H),P[1][O]=Math.max(P[1][O],H));else H=F.d2l(j[U],0,Z),!isNaN(H)&&isFinite(H)&&(P[0][O]=Math.min(P[0][O],H),P[1][O]=Math.max(P[1][O],H));else P[0][O]=Math.min(P[0][O],0),P[1][O]=Math.max(P[1][O],z-1)}}y.plot=function(k,D,P){var L=this;if(L.plotArgs=[k,D,P],!L.glplot.contextLost){var O,N,V,F,j,Z,z=D[L.id],H=P[L.id];L.fullLayout=D,L.fullSceneLayout=z,L.axesOptions.merge(D,z),L.spikeOptions.merge(z),L.setViewport(z),L.updateFx(z.dragmode,z.hovermode),L.camera.enableWheel=L.graphDiv._context._scrollZoom.gl3d,L.glplot.setClearColor(u(z.bgcolor)),L.setConvert(j),k?Array.isArray(k)||(k=[k]):k=[];var U=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(V=0;V<k.length;++V)(O=k[V]).visible===!0&&O._length!==0&&E(this,O,U);(function(Ie,Re){for(var Ne=Ie.fullSceneLayout,ge=Ne.annotations||[],we=0;we<3;we++)for(var Ce=h[we],ze=Ce.charAt(0),Pe=Ne[Ce],Ue=0;Ue<ge.length;Ue++){var Ge=ge[Ue];if(Ge.visible){var Xe=Pe.r2l(Ge[ze]);!isNaN(Xe)&&isFinite(Xe)&&(Re[0][we]=Math.min(Re[0][we],Xe),Re[1][we]=Math.max(Re[1][we],Xe))}}})(this,U);var re=[1,1,1];for(F=0;F<3;++F)U[1][F]===U[0][F]?re[F]=1:re[F]=1/(U[1][F]-U[0][F]);for(L.dataScale=re,L.convertAnnotations(this),V=0;V<k.length;++V)(O=k[V]).visible===!0&&O._length!==0&&((N=L.traces[O.uid])?N.data.type===O.type?N.update(O):(N.dispose(),N=O._module.plot(this,O),L.traces[O.uid]=N):(N=O._module.plot(this,O),L.traces[O.uid]=N),N.name=O.name);var ee=Object.keys(L.traces);e:for(V=0;V<ee.length;++V){for(F=0;F<k.length;++F)if(k[F].uid===ee[V]&&k[F].visible===!0&&k[F]._length!==0)continue e;(N=L.traces[ee[V]]).dispose(),delete L.traces[ee[V]]}L.glplot.objects.sort(function(Ie,Re){return Ie._trace.data.index-Re._trace.data.index});var J,Q=[[0,0,0],[0,0,0]],ne=[],K={};for(V=0;V<3;++V){var oe;if((Z=(j=z[h[V]]).type)in K?(K[Z].acc*=re[V],K[Z].count+=1):K[Z]={acc:re[V],count:1},j.autorange){Q[0][V]=1/0,Q[1][V]=-1/0;var le=L.glplot.objects,se=L.fullSceneLayout.annotations||[],de=j._name.charAt(0);for(F=0;F<le.length;F++){var be=le[F],_e=be.bounds,xe=be._trace.data._pad||0;be.constructor.name==="ErrorBars"&&j._lowerLogErrorBound?Q[0][V]=Math.min(Q[0][V],j._lowerLogErrorBound):Q[0][V]=Math.min(Q[0][V],_e[0][V]/re[V]-xe),Q[1][V]=Math.max(Q[1][V],_e[1][V]/re[V]+xe)}for(F=0;F<se.length;F++){var ve=se[F];if(ve.visible){var ye=j.r2l(ve[de]);Q[0][V]=Math.min(Q[0][V],ye),Q[1][V]=Math.max(Q[1][V],ye)}}if("rangemode"in j&&j.rangemode==="tozero"&&(Q[0][V]=Math.min(Q[0][V],0),Q[1][V]=Math.max(Q[1][V],0)),Q[0][V]>Q[1][V])Q[0][V]=-1,Q[1][V]=1;else{var me=Q[1][V]-Q[0][V];Q[0][V]-=me/32,Q[1][V]+=me/32}if(oe=[Q[0][V],Q[1][V]],oe=g(oe,j),Q[0][V]=oe[0],Q[1][V]=oe[1],j.isReversed()){var Me=Q[0][V];Q[0][V]=Q[1][V],Q[1][V]=Me}}else oe=j.range,Q[0][V]=j.r2l(oe[0]),Q[1][V]=j.r2l(oe[1]);Q[0][V]===Q[1][V]&&(Q[0][V]-=1,Q[1][V]+=1),ne[V]=Q[1][V]-Q[0][V],j.range=[Q[0][V],Q[1][V]],j.limitRange(),L.glplot.setBounds(V,{min:j.range[0]*re[V],max:j.range[1]*re[V]})}var Ae=z.aspectmode;if(Ae==="cube")J=[1,1,1];else if(Ae==="manual"){var ce=z.aspectratio;J=[ce.x,ce.y,ce.z]}else{if(Ae!=="auto"&&Ae!=="data")throw new Error("scene.js aspectRatio was not one of the enumerated types");var ae=[1,1,1];for(V=0;V<3;++V){var pe=K[Z=(j=z[h[V]]).type];ae[V]=Math.pow(pe.acc,1/pe.count)/re[V]}J=Ae==="data"||Math.max.apply(null,ae)/Math.min.apply(null,ae)<=4?ae:[1,1,1]}z.aspectratio.x=H.aspectratio.x=J[0],z.aspectratio.y=H.aspectratio.y=J[1],z.aspectratio.z=H.aspectratio.z=J[2],L.glplot.setAspectratio(z.aspectratio),L.viewInitial.aspectratio||(L.viewInitial.aspectratio={x:z.aspectratio.x,y:z.aspectratio.y,z:z.aspectratio.z}),L.viewInitial.aspectmode||(L.viewInitial.aspectmode=z.aspectmode);var De=z.domain||null,ke=D._size||null;if(De&&ke){var Ee=L.container.style;Ee.position="absolute",Ee.left=ke.l+De.x[0]*ke.w+"px",Ee.top=ke.t+(1-De.y[1])*ke.h+"px",Ee.width=ke.w*(De.x[1]-De.x[0])+"px",Ee.height=ke.h*(De.y[1]-De.y[0])+"px"}L.glplot.redraw()}},y.destroy=function(){var k=this;k.glplot&&(k.camera.mouseListener.enabled=!1,k.container.removeEventListener("wheel",k.camera.wheelListener),k.camera=null,k.glplot.dispose(),k.container.parentNode.removeChild(k.container),k.glplot=null)},y.getCamera=function(){var k,D=this;return D.camera.view.recalcMatrix(D.camera.view.lastT()),{up:{x:(k=D.camera).up[0],y:k.up[1],z:k.up[2]},center:{x:k.center[0],y:k.center[1],z:k.center[2]},eye:{x:k.eye[0],y:k.eye[1],z:k.eye[2]},projection:{type:k._ortho===!0?"orthographic":"perspective"}}},y.setViewport=function(k){var D,P=this,L=k.camera;P.camera.lookAt.apply(this,[[(D=L).eye.x,D.eye.y,D.eye.z],[D.center.x,D.center.y,D.center.z],[D.up.x,D.up.y,D.up.z]]),P.glplot.setAspectratio(k.aspectratio),L.projection.type==="orthographic"!==P.camera._ortho&&(P.glplot.redraw(),P.glplot.clearRGBA(),P.glplot.dispose(),P.initializeGLPlot())},y.isCameraChanged=function(k){var D=this.getCamera(),P=o.nestedProperty(k,this.id+".camera").get();function L(F,j,Z,z){var H=["up","center","eye"],U=["x","y","z"];return j[H[Z]]&&F[H[Z]][U[z]]===j[H[Z]][U[z]]}var O=!1;if(P===void 0)O=!0;else{for(var N=0;N<3;N++)for(var V=0;V<3;V++)if(!L(D,P,N,V)){O=!0;break}(!P.projection||D.projection&&D.projection.type!==P.projection.type)&&(O=!0)}return O},y.isAspectChanged=function(k){var D=this.glplot.getAspectratio(),P=o.nestedProperty(k,this.id+".aspectratio").get();return P===void 0||P.x!==D.x||P.y!==D.y||P.z!==D.z},y.saveLayout=function(k){var D,P,L,O,N,V,F=this,j=F.fullLayout,Z=F.isCameraChanged(k),z=F.isAspectChanged(k),H=Z||z;if(H){var U={};Z&&(D=F.getCamera(),L=(P=o.nestedProperty(k,F.id+".camera")).get(),U[F.id+".camera"]=L),z&&(O=F.glplot.getAspectratio(),V=(N=o.nestedProperty(k,F.id+".aspectratio")).get(),U[F.id+".aspectratio"]=V),t.call("_storeDirectGUIEdit",k,j._preGUI,U),Z&&(P.set(D),o.nestedProperty(j,F.id+".camera").set(D)),z&&(N.set(O),o.nestedProperty(j,F.id+".aspectratio").set(O),F.glplot.redraw())}return H},y.updateFx=function(k,D){var P=this,L=P.camera;if(L)if(k==="orbit")L.mode="orbit",L.keyBindingMode="rotate";else if(k==="turntable"){L.up=[0,0,1],L.mode="turntable",L.keyBindingMode="rotate";var O=P.graphDiv,N=O._fullLayout,V=P.fullSceneLayout.camera,F=V.up.x,j=V.up.y,Z=V.up.z;if(Z/Math.sqrt(F*F+j*j+Z*Z)<.999){var z=P.id+".camera.up",H={x:0,y:0,z:1},U={};U[z]=H;var re=O.layout;t.call("_storeDirectGUIEdit",re,N._preGUI,U),V.up=H,o.nestedProperty(re,z).set(H)}}else L.keyBindingMode=k;P.fullSceneLayout.hovermode=D},y.toImage=function(k){var D=this;k||(k="png"),D.staticMode&&D.container.appendChild(v),D.glplot.redraw();var P=D.glplot.gl,L=P.drawingBufferWidth,O=P.drawingBufferHeight;P.bindFramebuffer(P.FRAMEBUFFER,null);var N=new Uint8Array(L*O*4);P.readPixels(0,0,L,O,P.RGBA,P.UNSIGNED_BYTE,N),function(z,H,U){for(var re=0,ee=U-1;re<ee;++re,--ee)for(var J=0;J<H;++J)for(var Q=0;Q<4;++Q){var ne=4*(H*re+J)+Q,K=4*(H*ee+J)+Q,oe=z[ne];z[ne]=z[K],z[K]=oe}}(N,L,O),function(z,H,U){for(var re=0;re<U;++re)for(var ee=0;ee<H;++ee){var J=4*(H*re+ee),Q=z[J+3];if(Q>0)for(var ne=255/Q,K=0;K<3;++K)z[J+K]=Math.min(ne*z[J+K],255)}}(N,L,O);var V=document.createElement("canvas");V.width=L,V.height=O;var F,j=V.getContext("2d",{willReadFrequently:!0}),Z=j.createImageData(L,O);switch(Z.data.set(N),j.putImageData(Z,0,0),k){case"jpeg":F=V.toDataURL("image/jpeg");break;case"webp":F=V.toDataURL("image/webp");break;default:F=V.toDataURL("image/png")}return D.staticMode&&D.container.removeChild(v),F},y.setConvert=function(){for(var k=0;k<3;k++){var D=this.fullSceneLayout[h[k]];i.setConvert(D,this.fullLayout),D.setScale=o.noop}},y.make4thDimension=function(){var k=this,D=k.graphDiv._fullLayout;k._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},i.setConvert(k._mockAxis,D)},C.exports=b},52094:function(C){"use strict";C.exports=function(A,e,v,w){w=w||A.length;for(var n=new Array(w),T=0;T<w;T++)n[T]=[A[T],e[T],v[T]];return n}},64859:function(C,A,e){"use strict";var v=e(25376),w=e(85656),n=e(22548),T=e(92872),x=e(34200),f=e(66741),s=e(92880).extendFlat,t=v({editType:"calc"});t.family.dflt='"Open Sans", verdana, arial, sans-serif',t.size.dflt=12,t.color.dflt=n.defaultLine,C.exports={font:t,title:{text:{valType:"string",editType:"layoutstyle"},font:v({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:s(f({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:n.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:n.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:n.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:T.newshape,activeshape:T.activeshape,newselection:x.newselection,activeselection:x.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:s({},w.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:v({editType:"layoutstyle"})}}},47552:function(C,A,e){"use strict";var v=e(95376),w="1.13.4",n='\xA9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',T=['\xA9 <a target="_blank" href="https://carto.com/">Carto</a>',n].join(" "),x=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),f={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:n,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:x,tiles:["https://tiles.stadiamaps.com/tiles/stamen_terrain/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:x,tiles:["https://tiles.stadiamaps.com/tiles/stamen_toner/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://tiles.stadiamaps.com/tiles/stamen_watercolor/{z}/{x}/{y}.jpg?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"}},s=v(f);C.exports={requiredVersion:w,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:f,styleValuesNonMapbox:s,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install @plotly/mapbox-gl@"+w+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",s.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},89032:function(C,A,e){"use strict";var v=e(3400);C.exports=function(w,n){var T=w.split(" "),x=T[0],f=T[1],s=v.isArrayOrTypedArray(n)?v.mean(n):n,t=.5+s/100,o=1.5+s/100,r=["",""],i=[0,0];switch(x){case"top":r[0]="top",i[1]=-o;break;case"bottom":r[0]="bottom",i[1]=o}switch(f){case"left":r[1]="right",i[0]=-t;break;case"right":r[1]="left",i[0]=t}return{anchor:r[0]&&r[1]?r.join("-"):r[0]?r[0]:r[1]?r[1]:"center",offset:i}}},33688:function(C,A,e){"use strict";var v=e(3480),w=e(3400),n=w.strTranslate,T=w.strScale,x=e(84888).KY,f=e(9616),s=e(33428),t=e(43616),o=e(72736),r=e(14440),i="mapbox",a=A.constants=e(47552);function u(l){return typeof l=="string"&&(a.styleValuesMapbox.indexOf(l)!==-1||l.indexOf("mapbox://")===0||l.indexOf("stamen")===0)}A.name=i,A.attr="subplot",A.idRoot=i,A.idRegex=A.attrRegex=w.counterRegex(i),A.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},A.layoutAttributes=e(5232),A.supplyLayoutDefaults=e(5976),A.plot=function(l){var d=l._fullLayout,c=l.calcdata,_=d._subplots[i];if(v.version!==a.requiredVersion)throw new Error(a.wrongVersionErrorMsg);var p=function(h,E){var k=h._fullLayout;if(h._context.mapboxAccessToken==="")return"";for(var D=[],P=[],L=!1,O=!1,N=0;N<E.length;N++){var V=k[E[N]],F=V.accesstoken;u(V.style)&&(F?w.pushUnique(D,F):(u(V._input.style)&&(w.error("Uses Mapbox map style, but did not set an access token."),L=!0),O=!0)),F&&w.pushUnique(P,F)}if(O){var j=L?a.noAccessTokenErrorMsg:a.missingStyleErrorMsg;throw w.error(j),new Error(j)}return D.length?(D.length>1&&w.warn(a.multipleTokensErrorMsg),D[0]):(P.length&&w.log(["Listed mapbox access token(s)",P.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(l,_);v.accessToken=p;for(var g=0;g<_.length;g++){var m=_[g],b=x(c,i,m),y=d[m],M=y._subplot;M||(M=new r(l,m),d[m]._subplot=M),M.viewInitial||(M.viewInitial={center:w.extendFlat({},y.center),zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),M.plot(b,d,l._promises)}},A.clean=function(l,d,c,_){for(var p=_._subplots[i]||[],g=0;g<p.length;g++){var m=p[g];!d[m]&&_[m]._subplot&&_[m]._subplot.destroy()}},A.toSVG=function(l){for(var d=l._fullLayout,c=d._subplots[i],_=d._size,p=0;p<c.length;p++){var g=d[c[p]],m=g.domain,b=g._subplot.toImage("png");d._glimages.append("svg:image").attr({xmlns:f.svg,"xlink:href":b,x:_.l+_.w*m.x[0],y:_.t+_.h*(1-m.y[1]),width:_.w*(m.x[1]-m.x[0]),height:_.h*(m.y[1]-m.y[0]),preserveAspectRatio:"none"});var y=s.select(g._subplot.div);if(y.select(".mapboxgl-ctrl-logo").node().offsetParent!==null){var M=d._glimages.append("g");M.attr("transform",n(_.l+_.w*m.x[0]+10,_.t+_.h*(1-m.y[0])-31)),M.append("path").attr("d",a.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),M.append("path").attr("d",a.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),M.append("path").attr("d",a.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),M.append("polygon").attr("points",a.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var h=y.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),E=d._glimages.append("g"),k=E.append("text");k.text(h).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":h});var D=t.bBox(k.node()),P=_.w*(m.x[1]-m.x[0]);if(D.width>P/2){var L=h.split("|").join("<br>");k.text(L).attr("data-unformatted",L).call(o.convertToTspans,l),D=t.bBox(k.node())}k.attr("transform",n(-3,8-D.height)),E.insert("rect",".static-attribution").attr({x:-D.width-6,y:-D.height-3,width:D.width+6,height:D.height+3,fill:"rgba(255, 255, 255, 0.75)"});var O=1;D.width+6>P&&(O=P/(D.width+6));var N=[_.l+_.w*m.x[1],_.t+_.h*(1-m.y[0])];E.attr("transform",n(N[0],N[1])+T(O))}},A.updateFx=function(l){for(var d=l._fullLayout,c=d._subplots[i],_=0;_<c.length;_++)d[c[_]]._subplot.updateFx(d)}},22360:function(C,A,e){"use strict";var v=e(3400),w=e(72736).sanitizeHTML,n=e(89032),T=e(47552);function x(o,r){this.subplot=o,this.uid=o.uid+"-"+r,this.index=r,this.idSource="source-"+this.uid,this.idLayer=T.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var f=x.prototype;function s(o){if(!o.visible)return!1;var r=o.source;if(Array.isArray(r)&&r.length>0){for(var i=0;i<r.length;i++)if(typeof r[i]!="string"||r[i].length===0)return!1;return!0}return v.isPlainObject(r)||typeof r=="string"&&r.length>0}function t(o){var r={},i={};switch(o.type){case"circle":v.extendFlat(i,{"circle-radius":o.circle.radius,"circle-color":o.color,"circle-opacity":o.opacity});break;case"line":v.extendFlat(i,{"line-width":o.line.width,"line-color":o.color,"line-opacity":o.opacity,"line-dasharray":o.line.dash});break;case"fill":v.extendFlat(i,{"fill-color":o.color,"fill-outline-color":o.fill.outlinecolor,"fill-opacity":o.opacity});break;case"symbol":var a=o.symbol,u=n(a.textposition,a.iconsize);v.extendFlat(r,{"icon-image":a.icon+"-15","icon-size":a.iconsize/10,"text-field":a.text,"text-size":a.textfont.size,"text-anchor":u.anchor,"text-offset":u.offset,"symbol-placement":a.placement}),v.extendFlat(i,{"icon-color":o.color,"text-color":a.textfont.color,"text-opacity":o.opacity});break;case"raster":v.extendFlat(i,{"raster-fade-duration":0,"raster-opacity":o.opacity})}return{layout:r,paint:i}}f.update=function(o){this.visible?this.needsNewImage(o)?this.updateImage(o):this.needsNewSource(o)?(this.removeLayer(),this.updateSource(o),this.updateLayer(o)):this.needsNewLayer(o)?this.updateLayer(o):this.updateStyle(o):(this.updateSource(o),this.updateLayer(o)),this.visible=s(o)},f.needsNewImage=function(o){return this.subplot.map.getSource(this.idSource)&&this.sourceType==="image"&&o.sourcetype==="image"&&(this.source!==o.source||JSON.stringify(this.coordinates)!==JSON.stringify(o.coordinates))},f.needsNewSource=function(o){return this.sourceType!==o.sourcetype||JSON.stringify(this.source)!==JSON.stringify(o.source)||this.layerType!==o.type},f.needsNewLayer=function(o){return this.layerType!==o.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},f.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},f.updateImage=function(o){this.subplot.map.getSource(this.idSource).updateImage({url:o.source,coordinates:o.coordinates});var r=this.findFollowingMapboxLayerId(this.lookupBelow());r!==null&&this.subplot.map.moveLayer(this.idLayer,r)},f.updateSource=function(o){var r=this.subplot.map;if(r.getSource(this.idSource)&&r.removeSource(this.idSource),this.sourceType=o.sourcetype,this.source=o.source,s(o)){var i=function(a){var u,l=a.sourcetype,d=a.source,c={type:l};return l==="geojson"?u="data":l==="vector"?u=typeof d=="string"?"url":"tiles":l==="raster"?(u="tiles",c.tileSize=256):l==="image"&&(u="url",c.coordinates=a.coordinates),c[u]=d,a.sourceattribution&&(c.attribution=w(a.sourceattribution)),c}(o);r.addSource(this.idSource,i)}},f.findFollowingMapboxLayerId=function(o){if(o==="traces")for(var r=this.subplot.getMapLayers(),i=0;i<r.length;i++){var a=r[i].id;if(typeof a=="string"&&a.indexOf(T.traceLayerPrefix)===0){o=a;break}}return o},f.updateLayer=function(o){var r=this.subplot,i=t(o),a=this.lookupBelow(),u=this.findFollowingMapboxLayerId(a);this.removeLayer(),s(o)&&r.addLayer({id:this.idLayer,source:this.idSource,"source-layer":o.sourcelayer||"",type:o.type,minzoom:o.minzoom,maxzoom:o.maxzoom,layout:i.layout,paint:i.paint},u),this.layerType=o.type,this.below=a},f.updateStyle=function(o){if(s(o)){var r=t(o);this.subplot.setOptions(this.idLayer,"setLayoutProperty",r.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",r.paint)}},f.removeLayer=function(){var o=this.subplot.map;o.getLayer(this.idLayer)&&o.removeLayer(this.idLayer)},f.dispose=function(){var o=this.subplot.map;o.getLayer(this.idLayer)&&o.removeLayer(this.idLayer),o.getSource(this.idSource)&&o.removeSource(this.idSource)},C.exports=function(o,r,i){var a=new x(o,r);return a.update(i),a}},5232:function(C,A,e){"use strict";var v=e(3400),w=e(76308).defaultLine,n=e(86968).u,T=e(25376),x=e(52904).textposition,f=e(67824).overrideAll,s=e(31780).templatedArray,t=e(47552),o=T({noFontVariant:!0});o.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(C.exports=f({_arrayAttrRegexps:[v.counterRegex("mapbox",".layers",!0)],domain:n({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:t.styleValuesMapbox.concat(t.styleValuesNonMapbox),dflt:t.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:s("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:w},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:w}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:o,textposition:v.extendFlat({},x,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},5976:function(C,A,e){"use strict";var v=e(3400),w=e(168),n=e(51272),T=e(5232);function x(s,t,o,r){o("accesstoken",r.accessToken),o("style"),o("center.lon"),o("center.lat"),o("zoom"),o("bearing"),o("pitch");var i=o("bounds.west"),a=o("bounds.east"),u=o("bounds.south"),l=o("bounds.north");i!==void 0&&a!==void 0&&u!==void 0&&l!==void 0||delete t.bounds,n(s,t,{name:"layers",handleItemDefaults:f}),t._input=s}function f(s,t){function o(l,d){return v.coerce(s,t,T.layers,l,d)}if(o("visible")){var r,i=o("sourcetype"),a=i==="raster"||i==="image";o("source"),o("sourceattribution"),i==="vector"&&o("sourcelayer"),i==="image"&&o("coordinates"),a&&(r="raster");var u=o("type",r);a&&u!=="raster"&&(u=t.type="raster",v.log("Source types *raster* and *image* must drawn *raster* layer type.")),o("below"),o("color"),o("opacity"),o("minzoom"),o("maxzoom"),u==="circle"&&o("circle.radius"),u==="line"&&(o("line.width"),o("line.dash")),u==="fill"&&o("fill.outlinecolor"),u==="symbol"&&(o("symbol.icon"),o("symbol.iconsize"),o("symbol.text"),v.coerceFont(o,"symbol.textfont",void 0,{noFontVariant:!0}),o("symbol.textposition"),o("symbol.placement"))}}C.exports=function(s,t,o){w(s,t,o,{type:"mapbox",attributes:T,handleDefaults:x,partition:"y",accessToken:t._mapboxAccessToken})}},14440:function(C,A,e){"use strict";var v=e(3480),w=e(3400),n=e(27144),T=e(24040),x=e(54460),f=e(86476),s=e(93024),t=e(72760),o=t.drawMode,r=t.selectMode,i=e(22676).prepSelect,a=e(22676).clearOutline,u=e(22676).clearSelectionsCache,l=e(22676).selectOnClick,d=e(47552),c=e(22360);function _(M,h){this.id=h,this.gd=M;var E=M._fullLayout,k=M._context;this.container=E._glcontainer.node(),this.isStatic=k.staticPlot,this.uid=E._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(E),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var p=_.prototype;p.plot=function(M,h,E){var k,D=this,P=h[D.id];D.map&&P.accesstoken!==D.accessToken&&(D.map.remove(),D.map=null,D.styleObj=null,D.traceHash={},D.layerList=[]),k=D.map?new Promise(function(L,O){D.updateMap(M,h,L,O)}):new Promise(function(L,O){D.createMap(M,h,L,O)}),E.push(k)},p.createMap=function(M,h,E,k){var D=this,P=h[D.id],L=D.styleObj=m(P.style,h);D.accessToken=P.accesstoken;var O=P.bounds,N=O?[[O.west,O.south],[O.east,O.north]]:null,V=D.map=new v.Map({container:D.div,style:L.style,center:y(P.center),zoom:P.zoom,bearing:P.bearing,pitch:P.pitch,maxBounds:N,interactive:!D.isStatic,preserveDrawingBuffer:D.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new v.AttributionControl({compact:!0}));V._canvas.style.left="0px",V._canvas.style.top="0px",D.rejectOnError(k),D.isStatic||D.initFx(M,h);var F=[];F.push(new Promise(function(j){V.once("load",j)})),F=F.concat(n.fetchTraceGeoData(M)),Promise.all(F).then(function(){D.fillBelowLookup(M,h),D.updateData(M),D.updateLayout(h),D.resolveOnRender(E)}).catch(k)},p.updateMap=function(M,h,E,k){var D=this,P=D.map,L=h[this.id];D.rejectOnError(k);var O=[],N=m(L.style,h);JSON.stringify(D.styleObj)!==JSON.stringify(N)&&(D.styleObj=N,P.setStyle(N.style),D.traceHash={},O.push(new Promise(function(V){P.once("styledata",V)}))),O=O.concat(n.fetchTraceGeoData(M)),Promise.all(O).then(function(){D.fillBelowLookup(M,h),D.updateData(M),D.updateLayout(h),D.resolveOnRender(E)}).catch(k)},p.fillBelowLookup=function(M,h){var E,k,D=h[this.id].layers,P=this.belowLookup={},L=!1;for(E=0;E<M.length;E++){var O=M[E][0].trace,N=O._module;typeof O.below=="string"?k=O.below:N.getBelow&&(k=N.getBelow(O,this)),k===""&&(L=!0),P["trace-"+O.uid]=k||""}for(E=0;E<D.length;E++){var V=D[E];k=typeof V.below=="string"?V.below:L?"traces":"",P["layout-"+E]=k}var F,j,Z={};for(F in P)Z[k=P[F]]?Z[k].push(F):Z[k]=[F];for(k in Z){var z=Z[k];if(z.length>1)for(E=0;E<z.length;E++)(F=z[E]).indexOf("trace-")===0?(j=F.split("trace-")[1],this.traceHash[j]&&(this.traceHash[j].below=null)):F.indexOf("layout-")===0&&(j=F.split("layout-")[1],this.layerList[j]&&(this.layerList[j].below=null))}};var g={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function m(M,h){var E={};if(w.isPlainObject(M))E.id=M.id,E.style=M;else if(typeof M=="string")if(E.id=M,d.styleValuesMapbox.indexOf(M)!==-1)E.style=b(M);else if(d.stylesNonMapbox[M]){E.style=d.stylesNonMapbox[M];var k=E.style.sources["plotly-"+M],D=k?k.tiles:void 0;D&&D[0]&&D[0].slice(-9)==="?api_key="&&(D[0]+=h._mapboxAccessToken)}else E.style=M;else E.id=d.styleValueDflt,E.style=b(d.styleValueDflt);return E.transition={duration:0,delay:0},E}function b(M){return d.styleUrlPrefix+M+"-"+d.styleUrlSuffix}function y(M){return[M.lon,M.lat]}p.updateData=function(M){var h,E,k,D,P=this.traceHash,L=M.slice().sort(function(j,Z){return g[j[0].trace.type]-g[Z[0].trace.type]});for(k=0;k<L.length;k++){var O=L[k],N=!1;(h=P[(E=O[0].trace).uid])&&(h.type===E.type?(h.update(O),N=!0):h.dispose()),!N&&E._module&&(P[E.uid]=E._module.plot(this,O))}var V=Object.keys(P);e:for(k=0;k<V.length;k++){var F=V[k];for(D=0;D<M.length;D++)if(F===(E=M[D][0].trace).uid)continue e;(h=P[F]).dispose(),delete P[F]}},p.updateLayout=function(M){var h=this.map,E=M[this.id];this.dragging||this.wheeling||(h.setCenter(y(E.center)),h.setZoom(E.zoom),h.setBearing(E.bearing),h.setPitch(E.pitch)),this.updateLayers(M),this.updateFramework(M),this.updateFx(M),this.map.resize(),this.gd._context._scrollZoom.mapbox?h.scrollZoom.enable():h.scrollZoom.disable()},p.resolveOnRender=function(M){var h=this.map;h.on("render",function E(){h.loaded()&&(h.off("render",E),setTimeout(M,10))})},p.rejectOnError=function(M){var h=this.map;function E(){M(new Error(d.mapOnErrorMsg))}h.once("error",E),h.once("style.error",E),h.once("source.error",E),h.once("tile.error",E),h.once("layer.error",E)},p.createFramework=function(M){var h=this,E=h.div=document.createElement("div");E.id=h.uid,E.style.position="absolute",h.container.appendChild(E),h.xaxis={_id:"x",c2p:function(k){return h.project(k).x}},h.yaxis={_id:"y",c2p:function(k){return h.project(k).y}},h.updateFramework(M),h.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},x.setConvert(h.mockAxis,M)},p.initFx=function(M,h){var E=this,k=E.gd,D=E.map;function P(){s.loneUnhover(h._hoverlayer)}function L(){var O=E.getView();k.emit("plotly_relayouting",E.getViewEditsWithDerived(O))}D.on("moveend",function(O){if(E.map){var N=k._fullLayout;if(O.originalEvent||E.wheeling){var V=N[E.id];T.call("_storeDirectGUIEdit",k.layout,N._preGUI,E.getViewEdits(V));var F=E.getView();V._input.center=V.center=F.center,V._input.zoom=V.zoom=F.zoom,V._input.bearing=V.bearing=F.bearing,V._input.pitch=V.pitch=F.pitch,k.emit("plotly_relayout",E.getViewEditsWithDerived(F))}O.originalEvent&&O.originalEvent.type==="mouseup"?E.dragging=!1:E.wheeling&&(E.wheeling=!1),N._rehover&&N._rehover()}}),D.on("wheel",function(){E.wheeling=!0}),D.on("mousemove",function(O){var N=E.div.getBoundingClientRect(),V=[O.originalEvent.offsetX,O.originalEvent.offsetY];O.target.getBoundingClientRect=function(){return N},E.xaxis.p2c=function(){return D.unproject(V).lng},E.yaxis.p2c=function(){return D.unproject(V).lat},k._fullLayout._rehover=function(){k._fullLayout._hoversubplot===E.id&&k._fullLayout[E.id]&&s.hover(k,O,E.id)},s.hover(k,O,E.id),k._fullLayout._hoversubplot=E.id}),D.on("dragstart",function(){E.dragging=!0,P()}),D.on("zoomstart",P),D.on("mouseout",function(){k._fullLayout._hoversubplot=null}),D.on("drag",L),D.on("zoom",L),D.on("dblclick",function(){var O=k._fullLayout[E.id];T.call("_storeDirectGUIEdit",k.layout,k._fullLayout._preGUI,E.getViewEdits(O));var N=E.viewInitial;D.setCenter(y(N.center)),D.setZoom(N.zoom),D.setBearing(N.bearing),D.setPitch(N.pitch);var V=E.getView();O._input.center=O.center=V.center,O._input.zoom=O.zoom=V.zoom,O._input.bearing=O.bearing=V.bearing,O._input.pitch=O.pitch=V.pitch,k.emit("plotly_doubleclick",null),k.emit("plotly_relayout",E.getViewEditsWithDerived(V))}),E.clearOutline=function(){u(E.dragOptions),a(E.dragOptions.gd)},E.onClickInPanFn=function(O){return function(N){var V=k._fullLayout.clickmode;V.indexOf("select")>-1&&l(N.originalEvent,k,[E.xaxis],[E.yaxis],E.id,O),V.indexOf("event")>-1&&s.click(k,N.originalEvent)}}},p.updateFx=function(M){var h=this,E=h.map,k=h.gd;if(!h.isStatic){var D,P=M.dragmode;D=function(N,V){V.isRect?(N.range={})[h.id]=[O([V.xmin,V.ymin]),O([V.xmax,V.ymax])]:(N.lassoPoints={})[h.id]=V.map(O)};var L=h.dragOptions;h.dragOptions=w.extendDeep(L||{},{dragmode:M.dragmode,element:h.div,gd:k,plotinfo:{id:h.id,domain:M[h.id].domain,xaxis:h.xaxis,yaxis:h.yaxis,fillRangeItems:D},xaxes:[h.xaxis],yaxes:[h.yaxis],subplot:h.id}),E.off("click",h.onClickInPanHandler),r(P)||o(P)?(E.dragPan.disable(),E.on("zoomstart",h.clearOutline),h.dragOptions.prepFn=function(N,V,F){i(N,V,F,h.dragOptions,P)},f.init(h.dragOptions)):(E.dragPan.enable(),E.off("zoomstart",h.clearOutline),h.div.onmousedown=null,h.div.ontouchstart=null,h.div.removeEventListener("touchstart",h.div._ontouchstart),h.onClickInPanHandler=h.onClickInPanFn(h.dragOptions),E.on("click",h.onClickInPanHandler))}function O(N){var V=h.map.unproject(N);return[V.lng,V.lat]}},p.updateFramework=function(M){var h=M[this.id].domain,E=M._size,k=this.div.style;k.width=E.w*(h.x[1]-h.x[0])+"px",k.height=E.h*(h.y[1]-h.y[0])+"px",k.left=E.l+h.x[0]*E.w+"px",k.top=E.t+(1-h.y[1])*E.h+"px",this.xaxis._offset=E.l+h.x[0]*E.w,this.xaxis._length=E.w*(h.x[1]-h.x[0]),this.yaxis._offset=E.t+(1-h.y[1])*E.h,this.yaxis._length=E.h*(h.y[1]-h.y[0])},p.updateLayers=function(M){var h,E=M[this.id].layers,k=this.layerList;if(E.length!==k.length){for(h=0;h<k.length;h++)k[h].dispose();for(k=this.layerList=[],h=0;h<E.length;h++)k.push(c(this,h,E[h]))}else for(h=0;h<E.length;h++)k[h].update(E[h])},p.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},p.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},p.setOptions=function(M,h,E){for(var k in E)this.map[h](M,k,E[k])},p.getMapLayers=function(){return this.map.getStyle().layers},p.addLayer=function(M,h){var E=this.map;if(typeof h=="string"){if(h==="")return void E.addLayer(M,h);for(var k=this.getMapLayers(),D=0;D<k.length;D++)if(h===k[D].id)return void E.addLayer(M,h);w.warn(["Trying to add layer with *below* value",h,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}E.addLayer(M)},p.project=function(M){return this.map.project(new v.LngLat(M[0],M[1]))},p.getView=function(){var M=this.map,h=M.getCenter(),E={lon:h.lng,lat:h.lat},k=M.getCanvas(),D=parseInt(k.style.width),P=parseInt(k.style.height);return{center:E,zoom:M.getZoom(),bearing:M.getBearing(),pitch:M.getPitch(),_derived:{coordinates:[M.unproject([0,0]).toArray(),M.unproject([D,0]).toArray(),M.unproject([D,P]).toArray(),M.unproject([0,P]).toArray()]}}},p.getViewEdits=function(M){for(var h=this.id,E=["center","zoom","bearing","pitch"],k={},D=0;D<E.length;D++){var P=E[D];k[h+"."+P]=M[P]}return k},p.getViewEditsWithDerived=function(M){var h=this.id,E=this.getViewEdits(M);return E[h+"._derived"]=M._derived,E},C.exports=_},66741:function(C){"use strict";C.exports=function(A){var e=A.editType;return{t:{valType:"number",dflt:0,editType:e},r:{valType:"number",dflt:0,editType:e},b:{valType:"number",dflt:0,editType:e},l:{valType:"number",dflt:0,editType:e},editType:e}}},7316:function(C,A,e){"use strict";var v=e(33428),w=e(94336).m_,n=e(57624).SO,T=e(38248),x=e(83160),f=e(24040),s=e(73060),t=e(31780),o=e(3400),r=e(76308),i=e(39032).BADNUM,a=e(79811),u=e(1936).clearOutline,l=e(55308),d=e(85656),c=e(16672),_=e(84888)._M,p=o.relinkPrivateKeys,g=o._,m=C.exports={};o.extendFlat(m,f),m.attributes=e(45464),m.attributes.type.values=m.allTypes,m.fontAttrs=e(25376),m.layoutAttributes=e(64859);var b=m.transformsRegistry,y=e(62460);m.executeAPICommand=y.executeAPICommand,m.computeAPICommandBindings=y.computeAPICommandBindings,m.manageCommandObserver=y.manageCommandObserver,m.hasSimpleAPICommandBindings=y.hasSimpleAPICommandBindings,m.redrawText=function(z){return z=o.getGraphDiv(z),new Promise(function(H){setTimeout(function(){z._fullLayout&&(f.getComponentMethod("annotations","draw")(z),f.getComponentMethod("legend","draw")(z),f.getComponentMethod("colorbar","draw")(z),H(m.previousPromises(z)))},300)})},m.resize=function(z){var H;z=o.getGraphDiv(z);var U=new Promise(function(re,ee){z&&!o.isHidden(z)||ee(new Error("Resize must be passed a displayed plot div element.")),z._redrawTimer&&clearTimeout(z._redrawTimer),z._resolveResize&&(H=z._resolveResize),z._resolveResize=re,z._redrawTimer=setTimeout(function(){if(!z.layout||z.layout.width&&z.layout.height||o.isHidden(z))re(z);else{delete z.layout.width,delete z.layout.height;var J=z.changed;z.autoplay=!0,f.call("relayout",z,{autosize:!0}).then(function(){z.changed=J,z._resolveResize===re&&(delete z._resolveResize,re(z))})}},100)});return H&&H(U),U},m.previousPromises=function(z){if((z._promises||[]).length)return Promise.all(z._promises).then(function(){z._promises=[]})},m.addLinks=function(z){if(z._context.showLink||z._context.showSources){var H=z._fullLayout,U=o.ensureSingle(H._paper,"text","js-plot-link-container",function(K){K.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:r.defaultLine,"pointer-events":"all"}).each(function(){var oe=v.select(this);oe.append("tspan").classed("js-link-to-tool",!0),oe.append("tspan").classed("js-link-spacer",!0),oe.append("tspan").classed("js-sourcelinks",!0)})}),re=U.node(),ee={y:H._paper.attr("height")-9};document.body.contains(re)&&re.getComputedTextLength()>=H.width-20?(ee["text-anchor"]="start",ee.x=5):(ee["text-anchor"]="end",ee.x=H._paper.attr("width")-7),U.attr(ee);var J=U.select(".js-link-to-tool"),Q=U.select(".js-link-spacer"),ne=U.select(".js-sourcelinks");z._context.showSources&&z._context.showSources(z),z._context.showLink&&function(K,oe){oe.text("");var le=oe.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(K._context.linkText+" \xBB");if(K._context.sendData)le.on("click",function(){m.sendDataToCloud(K)});else{var se=window.location.pathname.split("/"),de=window.location.search;le.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+se[2].split(".")[0]+"/"+se[1]+de})}}(z,J),Q.text(J.text()&&ne.text()?" - ":"")}},m.sendDataToCloud=function(z){var H=(window.PLOTLYENV||{}).BASE_URL||z._context.plotlyServerURL;if(H){z.emit("plotly_beforeexport");var U=v.select(z).append("div").attr("id","hiddenform").style("display","none"),re=U.append("form").attr({action:H+"/external",method:"post",target:"_blank"});return re.append("input").attr({type:"text",name:"data"}).node().value=m.graphJson(z,!1,"keepdata"),re.node().submit(),U.remove(),z.emit("plotly_afterexport"),!1}};var M=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],h=["year","month","dayMonth","dayMonthYear"];function E(z,H){var U=z._context.locale;U||(U="en-US");var re=!1,ee={};function J(se){for(var de=!0,be=0;be<H.length;be++){var _e=H[be];ee[_e]||(se[_e]?ee[_e]=se[_e]:de=!1)}de&&(re=!0)}for(var Q=0;Q<2;Q++){for(var ne=z._context.locales,K=0;K<2;K++){var oe=(ne[U]||{}).format;if(oe&&(J(oe),re))break;ne=f.localeRegistry}var le=U.split("-")[0];if(re||le===U)break;U=le}return re||J(f.localeRegistry.en.format),ee}function k(z,H){var U={_fullLayout:H},re=z._id.charAt(0)==="x",ee=z._mainAxis._anchorAxis,J="",Q="",ne="";if(ee&&(ne=ee._mainAxis._id,J=re?z._id+ne:ne+z._id),!J||!H._plots[J]){J="";for(var K=z._counterAxes,oe=0;oe<K.length;oe++){var le=K[oe],se=re?z._id+le:le+z._id;Q||(Q=se);var de=a.getFromId(U,le);if(ne&&de.overlaying===ne){J=se;break}}}return J||Q}function D(z){var H=z.transforms;if(Array.isArray(H)&&H.length)for(var U=0;U<H.length;U++){var re=H[U],ee=re._module||b[re.type];if(ee&&ee.makesData)return!0}return!1}function P(z,H,U,re){for(var ee=z.transforms,J=[z],Q=0;Q<ee.length;Q++){var ne=ee[Q],K=b[ne.type];K&&K.transform&&(J=K.transform(J,{transform:ne,fullTrace:z,fullData:H,layout:U,fullLayout:re,transformIndex:Q}))}return J}function L(z){return typeof z=="string"&&z.substr(z.length-2)==="px"&&parseFloat(z)}function O(z){var H=z.margin;if(!z._size){var U=z._size={l:Math.round(H.l),r:Math.round(H.r),t:Math.round(H.t),b:Math.round(H.b),p:Math.round(H.pad)};U.w=Math.round(z.width)-U.l-U.r,U.h=Math.round(z.height)-U.t-U.b}z._pushmargin||(z._pushmargin={}),z._pushmarginIds||(z._pushmarginIds={}),z._reservedMargin||(z._reservedMargin={})}m.supplyDefaults=function(z,H){var U=H&&H.skipUpdateCalc,re=z._fullLayout||{};if(re._skipDefaults)delete re._skipDefaults;else{var ee,J=z._fullLayout={},Q=z.layout||{},ne=z._fullData||[],K=z._fullData=[],oe=z.data||[],le=z.calcdata||[],se=z._context||{};z._transitionData||m.createTransitionData(z),J._dfltTitle={plot:g(z,"Click to enter Plot title"),x:g(z,"Click to enter X axis title"),y:g(z,"Click to enter Y axis title"),colorbar:g(z,"Click to enter Colorscale title"),annotation:g(z,"new text")},J._traceWord=g(z,"trace");var de=E(z,M);if(J._mapboxAccessToken=se.mapboxAccessToken,re._initialAutoSizeIsDone){var be=re.width,_e=re.height;m.supplyLayoutGlobalDefaults(Q,J,de),Q.width||(J.width=be),Q.height||(J.height=_e),m.sanitizeMargins(J)}else{m.supplyLayoutGlobalDefaults(Q,J,de);var xe=!Q.width||!Q.height,ve=J.autosize,ye=se.autosizable;xe&&(ve||ye)?m.plotAutoSize(z,Q,J):xe&&m.sanitizeMargins(J),!ve&&xe&&(Q.width=J.width,Q.height=J.height)}J._d3locale=function(Pe,Ue){return Pe.decimal=Ue.charAt(0),Pe.thousands=Ue.charAt(1),{numberFormat:function(Ge){try{Ge=n(Pe).format(o.adjustFormat(Ge))}catch{return o.warnBadFormat(Ge),o.noFormat}return Ge},timeFormat:w(Pe).utcFormat}}(de,J.separators),J._extraFormat=E(z,h),J._initialAutoSizeIsDone=!0,J._dataLength=oe.length,J._modules=[],J._visibleModules=[],J._basePlotModules=[];var me=J._subplots=function(){var Pe,Ue,Ge=f.collectableSubplotTypes,Xe={};if(!Ge){Ge=[];var st=f.subplotsRegistry;for(var at in st){var vt=st[at].attr;if(vt&&(Ge.push(at),Array.isArray(vt)))for(Ue=0;Ue<vt.length;Ue++)o.pushUnique(Ge,vt[Ue])}}for(Pe=0;Pe<Ge.length;Pe++)Xe[Ge[Pe]]=[];return Xe}(),Me=J._splomAxes={x:{},y:{}},Ae=J._splomSubplots={};J._splomGridDflt={},J._scatterStackOpts={},J._firstScatter={},J._alignmentOpts={},J._colorAxes={},J._requestRangeslider={},J._traceUids=function(Pe,Ue){var Ge,Xe,st=Ue.length,at=[];for(Ge=0;Ge<Pe.length;Ge++){var vt=Pe[Ge]._fullInput;vt!==Xe&&at.push(vt),Xe=vt}var xt=at.length,gt=new Array(st),rt={};function tt(Rt,St){gt[St]=Rt,rt[Rt]=1}function Mt(Rt,St){if(Rt&&typeof Rt=="string"&&!rt[Rt])return tt(Rt,St),!0}for(Ge=0;Ge<st;Ge++){var Pt=Ue[Ge].uid;typeof Pt=="number"&&(Pt=String(Pt)),Mt(Pt,Ge)||Ge<xt&&Mt(at[Ge].uid,Ge)||tt(o.randstr(rt),Ge)}return gt}(ne,oe),J._globalTransforms=(z._context||{}).globalTransforms,m.supplyDataDefaults(oe,K,Q,J);var ce=Object.keys(Me.x),ae=Object.keys(Me.y);if(ce.length>1&&ae.length>1){for(f.getComponentMethod("grid","sizeDefaults")(Q,J),ee=0;ee<ce.length;ee++)o.pushUnique(me.xaxis,ce[ee]);for(ee=0;ee<ae.length;ee++)o.pushUnique(me.yaxis,ae[ee]);for(var pe in Ae)o.pushUnique(me.cartesian,pe)}if(J._has=m._hasPlotType.bind(J),ne.length===K.length)for(ee=0;ee<K.length;ee++)p(K[ee],ne[ee]);m.supplyLayoutModuleDefaults(Q,J,K,z._transitionData);var De=J._visibleModules,ke=[];for(ee=0;ee<De.length;ee++){var Ee=De[ee].crossTraceDefaults;Ee&&o.pushUnique(ke,Ee)}for(ee=0;ee<ke.length;ee++)ke[ee](K,J);J._hasOnlyLargeSploms=J._basePlotModules.length===1&&J._basePlotModules[0].name==="splom"&&ce.length>15&&ae.length>15&&J.shapes.length===0&&J.images.length===0,m.linkSubplots(K,J,ne,re),m.cleanPlot(K,J,ne,re);var Ie=!(!re._has||!re._has("gl2d")),Re=!(!J._has||!J._has("gl2d")),Ne=!(!re._has||!re._has("cartesian"))||Ie,ge=!(!J._has||!J._has("cartesian"))||Re;Ne&&!ge?re._bgLayer.remove():ge&&!Ne&&(J._shouldCreateBgLayer=!0),re._zoomlayer&&!z._dragging&&u({_fullLayout:re}),function(Pe,Ue){var Ge,Xe=[];Ue.meta&&(Ge=Ue._meta={meta:Ue.meta,layout:{meta:Ue.meta}});for(var st=0;st<Pe.length;st++){var at=Pe[st];at.meta?Xe[at.index]=at._meta={meta:at.meta}:Ue.meta&&(at._meta={meta:Ue.meta}),Ue.meta&&(at._meta.layout={meta:Ue.meta})}Xe.length&&(Ge||(Ge=Ue._meta={}),Ge.data=Xe)}(K,J),p(J,re),f.getComponentMethod("colorscale","crossTraceDefaults")(K,J),J._preGUI||(J._preGUI={}),J._tracePreGUI||(J._tracePreGUI={});var we,Ce=J._tracePreGUI,ze={};for(we in Ce)ze[we]="old";for(ee=0;ee<K.length;ee++)ze[we=K[ee]._fullInput.uid]||(Ce[we]={}),ze[we]="new";for(we in ze)ze[we]==="old"&&delete Ce[we];O(J),f.getComponentMethod("rangeslider","makeData")(J),U||le.length!==K.length||m.supplyDefaultsUpdateCalc(le,K)}},m.supplyDefaultsUpdateCalc=function(z,H){for(var U=0;U<H.length;U++){var re=H[U],ee=(z[U]||[])[0];if(ee&&ee.trace){var J=ee.trace;if(J._hasCalcTransform){var Q,ne,K,oe=J._arrayAttrs;for(Q=0;Q<oe.length;Q++)ne=oe[Q],K=o.nestedProperty(J,ne).get().slice(),o.nestedProperty(re,ne).set(K)}ee.trace=re}}},m.createTransitionData=function(z){z._transitionData||(z._transitionData={}),z._transitionData._frames||(z._transitionData._frames=[]),z._transitionData._frameHash||(z._transitionData._frameHash={}),z._transitionData._counter||(z._transitionData._counter=0),z._transitionData._interruptCallbacks||(z._transitionData._interruptCallbacks=[])},m._hasPlotType=function(z){var H,U=this._basePlotModules||[];for(H=0;H<U.length;H++)if(U[H].name===z)return!0;var re=this._modules||[];for(H=0;H<re.length;H++){var ee=re[H].name;if(ee===z)return!0;var J=f.modules[ee];if(J&&J.categories[z])return!0}return!1},m.cleanPlot=function(z,H,U,re){var ee,J,Q=re._basePlotModules||[];for(ee=0;ee<Q.length;ee++){var ne=Q[ee];ne.clean&&ne.clean(z,H,U,re)}var K=re._has&&re._has("gl"),oe=H._has&&H._has("gl");K&&!oe&&re._glcontainer!==void 0&&(re._glcontainer.selectAll(".gl-canvas").remove(),re._glcontainer.selectAll(".no-webgl").remove(),re._glcanvas=null);var le=!!re._infolayer;e:for(ee=0;ee<U.length;ee++){var se=U[ee].uid;for(J=0;J<z.length;J++)if(se===z[J].uid)continue e;le&&re._infolayer.select(".cb"+se).remove()}},m.linkSubplots=function(z,H,U,re){var ee,J,Q=re._plots||{},ne=H._plots={},K=H._subplots,oe={_fullData:z,_fullLayout:H},le=K.cartesian.concat(K.gl2d||[]);for(ee=0;ee<le.length;ee++){var se,de=le[ee],be=Q[de],_e=a.getFromId(oe,de,"x"),xe=a.getFromId(oe,de,"y");for(be?se=ne[de]=be:(se=ne[de]={}).id=de,_e._counterAxes.push(xe._id),xe._counterAxes.push(_e._id),_e._subplotsWith.push(de),xe._subplotsWith.push(de),se.xaxis=_e,se.yaxis=xe,se._hasClipOnAxisFalse=!1,J=0;J<z.length;J++){var ve=z[J];if(ve.xaxis===se.xaxis._id&&ve.yaxis===se.yaxis._id&&ve.cliponaxis===!1){se._hasClipOnAxisFalse=!0;break}}}var ye,me=a.list(oe,null,!0);for(ee=0;ee<me.length;ee++){var Me=null;(ye=me[ee]).overlaying&&(Me=a.getFromId(oe,ye.overlaying))&&Me.overlaying&&(ye.overlaying=!1,Me=null),ye._mainAxis=Me||ye,Me&&(ye.domain=Me.domain.slice()),ye._anchorAxis=ye.anchor==="free"?null:a.getFromId(oe,ye.anchor)}for(ee=0;ee<me.length;ee++)if((ye=me[ee])._counterAxes.sort(a.idSort),ye._subplotsWith.sort(o.subplotSort),ye._mainSubplot=k(ye,H),ye._counterAxes.length&&(ye.spikemode&&ye.spikemode.indexOf("across")!==-1||ye.automargin&&ye.mirror&&ye.anchor!=="free"||f.getComponentMethod("rangeslider","isVisible")(ye))){var Ae=1,ce=0;for(J=0;J<ye._counterAxes.length;J++){var ae=a.getFromId(oe,ye._counterAxes[J]);Ae=Math.min(Ae,ae.domain[0]),ce=Math.max(ce,ae.domain[1])}Ae<ce&&(ye._counterDomainMin=Ae,ye._counterDomainMax=ce)}},m.clearExpandedTraceDefaultColors=function(z){var H,U,re;for(U=[],(H=z._module._colorAttrs)||(z._module._colorAttrs=H=[],s.crawl(z._module.attributes,function(ee,J,Q,ne){U[ne]=J,U.length=ne+1,ee.valType==="color"&&ee.dflt===void 0&&H.push(U.join("."))})),re=0;re<H.length;re++)o.nestedProperty(z,"_input."+H[re]).get()||o.nestedProperty(z,H[re]).set(null)},m.supplyDataDefaults=function(z,H,U,re){var ee,J,Q,ne=re._modules,K=re._visibleModules,oe=re._basePlotModules,le=0,se=0;function de(pe){H.push(pe);var De=pe._module;De&&(o.pushUnique(ne,De),pe.visible===!0&&o.pushUnique(K,De),o.pushUnique(oe,pe._module.basePlotModule),le++,pe._input.visible!==!1&&se++)}re._transformModules=[];var be={},_e=[],xe=(U.template||{}).data||{},ve=t.traceTemplater(xe);for(ee=0;ee<z.length;ee++){if(Q=z[ee],(J=ve.newTrace(Q)).uid=re._traceUids[ee],m.supplyTraceDefaults(Q,J,se,re,ee),J.index=ee,J._input=Q,J._expandedIndex=le,J.transforms&&J.transforms.length)for(var ye=Q.visible!==!1&&J.visible===!1,me=P(J,H,U,re),Me=0;Me<me.length;Me++){var Ae=me[Me],ce={_template:J._template,type:J.type,uid:J.uid+Me};ye&&Ae.visible===!1&&delete Ae.visible,m.supplyTraceDefaults(Ae,ce,le,re,ee),p(ce,Ae),ce.index=ee,ce._input=Q,ce._fullInput=J,ce._expandedIndex=le,ce._expandedInput=Ae,de(ce)}else J._fullInput=J,J._expandedInput=J,de(J);f.traceIs(J,"carpetAxis")&&(be[J.carpet]=J),f.traceIs(J,"carpetDependent")&&_e.push(ee)}for(ee=0;ee<_e.length;ee++)if((J=H[_e[ee]]).visible){var ae=be[J.carpet];J._carpet=ae,ae&&ae.visible?(J.xaxis=ae.xaxis,J.yaxis=ae.yaxis):J.visible=!1}},m.supplyAnimationDefaults=function(z){var H;z=z||{};var U={};function re(ee,J){return o.coerce(z||{},U,d,ee,J)}if(re("mode"),re("direction"),re("fromcurrent"),Array.isArray(z.frame))for(U.frame=[],H=0;H<z.frame.length;H++)U.frame[H]=m.supplyAnimationFrameDefaults(z.frame[H]||{});else U.frame=m.supplyAnimationFrameDefaults(z.frame||{});if(Array.isArray(z.transition))for(U.transition=[],H=0;H<z.transition.length;H++)U.transition[H]=m.supplyAnimationTransitionDefaults(z.transition[H]||{});else U.transition=m.supplyAnimationTransitionDefaults(z.transition||{});return U},m.supplyAnimationFrameDefaults=function(z){var H={};function U(re,ee){return o.coerce(z||{},H,d.frame,re,ee)}return U("duration"),U("redraw"),H},m.supplyAnimationTransitionDefaults=function(z){var H={};function U(re,ee){return o.coerce(z||{},H,d.transition,re,ee)}return U("duration"),U("easing"),H},m.supplyFrameDefaults=function(z){var H={};function U(re,ee){return o.coerce(z,H,c,re,ee)}return U("group"),U("name"),U("traces"),U("baseframe"),U("data"),U("layout"),H},m.supplyTraceDefaults=function(z,H,U,re,ee){var J,Q=re.colorway||r.defaults,ne=Q[U%Q.length];function K(Me,Ae){return o.coerce(z,H,m.attributes,Me,Ae)}var oe=K("visible");K("type"),K("name",re._traceWord+" "+ee),K("uirevision",re.uirevision);var le=m.getModule(H);if(H._module=le,le){var se=le.basePlotModule,de=se.attr,be=se.attributes;if(de&&be){var _e=re._subplots,xe="";if(oe||se.name!=="gl2d"){if(Array.isArray(de))for(J=0;J<de.length;J++){var ve=de[J],ye=o.coerce(z,H,be,ve);_e[ve]&&o.pushUnique(_e[ve],ye),xe+=ye}else xe=o.coerce(z,H,be,de);_e[se.name]&&o.pushUnique(_e[se.name],xe)}}}if(oe){if(K("customdata"),K("ids"),K("meta"),f.traceIs(H,"showLegend")?(o.coerce(z,H,le.attributes.showlegend?le.attributes:m.attributes,"showlegend"),K("legend"),K("legendwidth"),K("legendgroup"),K("legendgrouptitle.text"),K("legendrank"),H._dfltShowLegend=!0):H._dfltShowLegend=!1,le&&le.supplyDefaults(z,H,ne,re),f.traceIs(H,"noOpacity")||K("opacity"),f.traceIs(H,"notLegendIsolatable")&&(H.visible=!!H.visible),f.traceIs(H,"noHover")||(H.hovertemplate||o.coerceHoverinfo(z,H,re),H.type!=="parcats"&&f.getComponentMethod("fx","supplyDefaults")(z,H,ne,re)),le&&le.selectPoints){var me=K("selectedpoints");o.isTypedArray(me)&&(H.selectedpoints=Array.from(me))}m.supplyTransformDefaults(z,H,re)}return H},m.hasMakesDataTransform=D,m.supplyTransformDefaults=function(z,H,U){if(H._length||D(z)){var re=U._globalTransforms||[],ee=U._transformModules||[];if(Array.isArray(z.transforms)||re.length!==0)for(var J=z.transforms||[],Q=re.concat(J),ne=H.transforms=[],K=0;K<Q.length;K++){var oe,le=Q[K],se=le.type,de=b[se],be=!(le._module&&le._module===de),_e=de&&typeof de.transform=="function";de||o.warn("Unrecognized transform type "+se+"."),de&&de.supplyDefaults&&(be||_e)?((oe=de.supplyDefaults(le,H,U,z)).type=se,oe._module=de,o.pushUnique(ee,de)):oe=o.extendFlat({},le),ne.push(oe)}}},m.supplyLayoutGlobalDefaults=function(z,H,U){function re(le,se){return o.coerce(z,H,m.layoutAttributes,le,se)}var ee=z.template;o.isPlainObject(ee)&&(H.template=ee,H._template=ee.layout,H._dataTemplate=ee.data),re("autotypenumbers");var J=o.coerceFont(re,"font"),Q=J.size;o.coerceFont(re,"title.font",o.extendFlat({},J,{size:Math.round(1.4*Q)})),re("title.text",H._dfltTitle.plot),re("title.xref");var ne=re("title.yref");re("title.pad.t"),re("title.pad.r"),re("title.pad.b"),re("title.pad.l");var K=re("title.automargin");re("title.x"),re("title.xanchor"),re("title.y"),re("title.yanchor"),K&&(ne==="paper"&&(H.title.y!==0&&(H.title.y=1),H.title.yanchor==="auto"&&(H.title.yanchor=H.title.y===0?"top":"bottom")),ne==="container"&&(H.title.y==="auto"&&(H.title.y=1),H.title.yanchor==="auto"&&(H.title.yanchor=H.title.y<.5?"bottom":"top"))),re("uniformtext.mode")&&re("uniformtext.minsize"),re("autosize",!(z.width&&z.height)),re("width"),re("height"),re("minreducedwidth"),re("minreducedheight"),re("margin.l"),re("margin.r"),re("margin.t"),re("margin.b"),re("margin.pad"),re("margin.autoexpand"),z.width&&z.height&&m.sanitizeMargins(H),f.getComponentMethod("grid","sizeDefaults")(z,H),re("paper_bgcolor"),re("separators",U.decimal+U.thousands),re("hidesources"),re("colorway"),re("datarevision");var oe=re("uirevision");re("editrevision",oe),re("selectionrevision",oe),f.getComponentMethod("modebar","supplyLayoutDefaults")(z,H),f.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(z,H,re),f.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(z,H,re),re("meta"),o.isPlainObject(z.transition)&&(re("transition.duration"),re("transition.easing"),re("transition.ordering")),f.getComponentMethod("calendars","handleDefaults")(z,H,"calendar"),f.getComponentMethod("fx","supplyLayoutGlobalDefaults")(z,H,re),o.coerce(z,H,l,"scattermode")},m.plotAutoSize=function(z,H,U){var re,ee,J=z._context||{},Q=J.frameMargins,ne=o.isPlotDiv(z);if(ne&&z.emit("plotly_autosize"),J.fillFrame)re=window.innerWidth,ee=window.innerHeight,document.body.style.overflow="hidden";else{var K=ne?window.getComputedStyle(z):{};if(re=L(K.width)||L(K.maxWidth)||U.width,ee=L(K.height)||L(K.maxHeight)||U.height,T(Q)&&Q>0){var oe=1-2*Q;re=Math.round(oe*re),ee=Math.round(oe*ee)}}var le=m.layoutAttributes.width.min,se=m.layoutAttributes.height.min;re<le&&(re=le),ee<se&&(ee=se);var de=!H.width&&Math.abs(U.width-re)>1,be=!H.height&&Math.abs(U.height-ee)>1;(be||de)&&(de&&(U.width=re),be&&(U.height=ee)),z._initialAutoSize||(z._initialAutoSize={width:re,height:ee}),m.sanitizeMargins(U)},m.supplyLayoutModuleDefaults=function(z,H,U,re){var ee,J,Q,ne=f.componentsRegistry,K=H._basePlotModules,oe=f.subplotsRegistry.cartesian;for(ee in ne)(Q=ne[ee]).includeBasePlot&&Q.includeBasePlot(z,H);for(var le in K.length||K.push(oe),H._has("cartesian")&&(f.getComponentMethod("grid","contentDefaults")(z,H),oe.finalizeSubplots(z,H)),H._subplots)H._subplots[le].sort(o.subplotSort);for(J=0;J<K.length;J++)(Q=K[J]).supplyLayoutDefaults&&Q.supplyLayoutDefaults(z,H,U);var se=H._modules;for(J=0;J<se.length;J++)(Q=se[J]).supplyLayoutDefaults&&Q.supplyLayoutDefaults(z,H,U);var de=H._transformModules;for(J=0;J<de.length;J++)(Q=de[J]).supplyLayoutDefaults&&Q.supplyLayoutDefaults(z,H,U,re);for(ee in ne)(Q=ne[ee]).supplyLayoutDefaults&&Q.supplyLayoutDefaults(z,H,U)},m.purge=function(z){var H=z._fullLayout||{};H._glcontainer!==void 0&&(H._glcontainer.selectAll(".gl-canvas").remove(),H._glcontainer.remove(),H._glcanvas=null),H._modeBar&&H._modeBar.destroy(),z._transitionData&&(z._transitionData._interruptCallbacks&&(z._transitionData._interruptCallbacks.length=0),z._transitionData._animationRaf&&window.cancelAnimationFrame(z._transitionData._animationRaf)),o.clearThrottle(),o.clearResponsive(z),delete z.data,delete z.layout,delete z._fullData,delete z._fullLayout,delete z.calcdata,delete z.empty,delete z.fid,delete z.undoqueue,delete z.undonum,delete z.autoplay,delete z.changed,delete z._promises,delete z._redrawTimer,delete z._hmlumcount,delete z._hmpixcount,delete z._transitionData,delete z._transitioning,delete z._initialAutoSize,delete z._transitioningWithDuration,delete z._dragging,delete z._dragged,delete z._dragdata,delete z._hoverdata,delete z._snapshotInProgress,delete z._editing,delete z._mouseDownTime,delete z._legendMouseDownTime,z.removeAllListeners&&z.removeAllListeners()},m.style=function(z){var H,U=z._fullLayout._visibleModules,re=[];for(H=0;H<U.length;H++){var ee=U[H];ee.style&&o.pushUnique(re,ee.style)}for(H=0;H<re.length;H++)re[H](z)},m.sanitizeMargins=function(z){if(z&&z.margin){var H,U=z.width,re=z.height,ee=z.margin,J=U-(ee.l+ee.r),Q=re-(ee.t+ee.b);J<0&&(H=(U-1)/(ee.l+ee.r),ee.l=Math.floor(H*ee.l),ee.r=Math.floor(H*ee.r)),Q<0&&(H=(re-1)/(ee.t+ee.b),ee.t=Math.floor(H*ee.t),ee.b=Math.floor(H*ee.b))}},m.clearAutoMarginIds=function(z){z._fullLayout._pushmarginIds={}},m.allowAutoMargin=function(z,H){z._fullLayout._pushmarginIds[H]=1},m.autoMargin=function(z,H,U){var re=z._fullLayout,ee=re.width,J=re.height,Q=re.margin,ne=re.minreducedwidth,K=re.minreducedheight,oe=o.constrain(ee-Q.l-Q.r,2,ne),le=o.constrain(J-Q.t-Q.b,2,K),se=Math.max(0,ee-oe),de=Math.max(0,J-le),be=re._pushmargin,_e=re._pushmarginIds;if(Q.autoexpand!==!1){if(U){var xe=U.pad;if(xe===void 0&&(xe=Math.min(12,Q.l,Q.r,Q.t,Q.b)),se){var ve=(U.l+U.r)/se;ve>1&&(U.l/=ve,U.r/=ve)}if(de){var ye=(U.t+U.b)/de;ye>1&&(U.t/=ye,U.b/=ye)}var me=U.xl!==void 0?U.xl:U.x,Me=U.xr!==void 0?U.xr:U.x,Ae=U.yt!==void 0?U.yt:U.y,ce=U.yb!==void 0?U.yb:U.y;be[H]={l:{val:me,size:U.l+xe},r:{val:Me,size:U.r+xe},b:{val:ce,size:U.b+xe},t:{val:Ae,size:U.t+xe}},_e[H]=1}else delete be[H],delete _e[H];if(!re._replotting)return m.doAutoMargin(z)}},m.doAutoMargin=function(z){var H=z._fullLayout,U=H.width,re=H.height;H._size||(H._size={}),O(H);var ee=H._size,J=H.margin,Q={t:0,b:0,l:0,r:0},ne=o.extendFlat({},ee),K=J.l,oe=J.r,le=J.t,se=J.b,de=H._pushmargin,be=H._pushmarginIds,_e=H.minreducedwidth,xe=H.minreducedheight;if(J.autoexpand!==!1){for(var ve in de)be[ve]||delete de[ve];var ye=z._fullLayout._reservedMargin;for(var me in ye)for(var Me in ye[me]){var Ae=ye[me][Me];Q[Me]=Math.max(Q[Me],Ae)}for(var ce in de.base={l:{val:0,size:K},r:{val:1,size:oe},t:{val:1,size:le},b:{val:0,size:se}},Q){var ae=0;for(var pe in de)pe!=="base"&&T(de[pe][ce].size)&&(ae=de[pe][ce].size>ae?de[pe][ce].size:ae);var De=Math.max(0,J[ce]-ae);Q[ce]=Math.max(0,Q[ce]-De)}for(var ke in de){var Ee=de[ke].l||{},Ie=de[ke].b||{},Re=Ee.val,Ne=Ee.size,ge=Ie.val,we=Ie.size,Ce=U-Q.r-Q.l,ze=re-Q.t-Q.b;for(var Pe in de){if(T(Ne)&&de[Pe].r){var Ue=de[Pe].r.val,Ge=de[Pe].r.size;if(Ue>Re){var Xe=(Ne*Ue+(Ge-Ce)*Re)/(Ue-Re),st=(Ge*(1-Re)+(Ne-Ce)*(1-Ue))/(Ue-Re);Xe+st>K+oe&&(K=Xe,oe=st)}}if(T(we)&&de[Pe].t){var at=de[Pe].t.val,vt=de[Pe].t.size;if(at>ge){var xt=(we*at+(vt-ze)*ge)/(at-ge),gt=(vt*(1-ge)+(we-ze)*(1-at))/(at-ge);xt+gt>se+le&&(se=xt,le=gt)}}}}}var rt=o.constrain(U-J.l-J.r,2,_e),tt=o.constrain(re-J.t-J.b,2,xe),Mt=Math.max(0,U-rt),Pt=Math.max(0,re-tt);if(Mt){var Rt=(K+oe)/Mt;Rt>1&&(K/=Rt,oe/=Rt)}if(Pt){var St=(se+le)/Pt;St>1&&(se/=St,le/=St)}if(ee.l=Math.round(K)+Q.l,ee.r=Math.round(oe)+Q.r,ee.t=Math.round(le)+Q.t,ee.b=Math.round(se)+Q.b,ee.p=Math.round(J.pad),ee.w=Math.round(U)-ee.l-ee.r,ee.h=Math.round(re)-ee.t-ee.b,!H._replotting&&(m.didMarginChange(ne,ee)||function(Ke){if("_redrawFromAutoMarginCount"in Ke._fullLayout)return!1;var Ve=a.list(Ke,"",!0);for(var $e in Ve)if(Ve[$e].autoshift||Ve[$e].shift)return!0;return!1}(z))){"_redrawFromAutoMarginCount"in H?H._redrawFromAutoMarginCount++:H._redrawFromAutoMarginCount=1;var Ye=3*(1+Object.keys(be).length);if(H._redrawFromAutoMarginCount<Ye)return f.call("_doPlot",z);H._size=ne,o.warn("Too many auto-margin redraws.")}(function(Ke){var Ve=a.list(Ke,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function($e){for(var lt=0;lt<Ve.length;lt++){var it=Ve[lt][$e];it&&it()}})})(z)};var N=["l","r","t","b","p","w","h"];function V(z,H,U){var re=!1,ee=[m.previousPromises,function(){if(z._transitionData)return z._transitioning=!1,function(Q){var ne=Promise.resolve();if(!Q)return ne;for(;Q.length;)ne=ne.then(Q.shift());return ne}(z._transitionData._interruptCallbacks)},U.prepareFn,m.rehover,m.reselect,function(){return z.emit("plotly_transitioning",[]),new Promise(function(Q){z._transitioning=!0,H.duration>0&&(z._transitioningWithDuration=!0),z._transitionData._interruptCallbacks.push(function(){re=!0}),U.redraw&&z._transitionData._interruptCallbacks.push(function(){return f.call("redraw",z)}),z._transitionData._interruptCallbacks.push(function(){z.emit("plotly_transitioninterrupted",[])});var ne=0,K=0;function oe(){return ne++,function(){var le;K++,re||K!==ne||(le=Q,z._transitionData&&(function(se){if(se)for(;se.length;)se.shift()}(z._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(U.redraw)return f.call("redraw",z)}).then(function(){z._transitioning=!1,z._transitioningWithDuration=!1,z.emit("plotly_transitioned",[])}).then(le)))}}U.runFn(oe),setTimeout(oe())})}],J=o.syncOrAsync(ee,z);return J&&J.then||(J=Promise.resolve()),J.then(function(){return z})}m.didMarginChange=function(z,H){for(var U=0;U<N.length;U++){var re=N[U],ee=z[re],J=H[re];if(!T(ee)||Math.abs(J-ee)>1)return!0}return!1},m.graphJson=function(z,H,U,re,ee,J){(ee&&H&&!z._fullData||ee&&!H&&!z._fullLayout)&&m.supplyDefaults(z);var Q=ee?z._fullData:z.data,ne=ee?z._fullLayout:z.layout,K=(z._transitionData||{})._frames;function oe(de,be){if(typeof de=="function")return be?"_function_":null;if(o.isPlainObject(de)){var _e,xe={};return Object.keys(de).sort().forEach(function(Me){if(["_","["].indexOf(Me.charAt(0))===-1)if(typeof de[Me]!="function"){if(U==="keepdata"){if(Me.substr(Me.length-3)==="src")return}else if(U==="keepstream"){if(typeof(_e=de[Me+"src"])=="string"&&_e.indexOf(":")>0&&!o.isPlainObject(de.stream))return}else if(U!=="keepall"&&typeof(_e=de[Me+"src"])=="string"&&_e.indexOf(":")>0)return;xe[Me]=oe(de[Me],be)}else be&&(xe[Me]="_function")}),xe}var ve=Array.isArray(de),ye=o.isTypedArray(de);if((ve||ye)&&de.dtype&&de.shape){var me=de.bdata;return oe({dtype:de.dtype,shape:de.shape,bdata:o.isArrayBuffer(me)?x.encode(me):me},be)}return ve?de.map(function(Me){return oe(Me,be)}):ye?o.simpleMap(de,o.identity):o.isJSDate(de)?o.ms2DateTimeLocal(+de):de}var le={data:(Q||[]).map(function(de){var be=oe(de);return H&&delete be.fit,be})};if(!H&&(le.layout=oe(ne),ee)){var se=ne._size;le.layout.computed={margin:{b:se.b,l:se.l,r:se.r,t:se.t}}}return K&&(le.frames=oe(K)),J&&(le.config=oe(z._context,!0)),re==="object"?le:JSON.stringify(le)},m.modifyFrames=function(z,H){var U,re,ee,J=z._transitionData._frames,Q=z._transitionData._frameHash;for(U=0;U<H.length;U++)switch((re=H[U]).type){case"replace":ee=re.value;var ne=(J[re.index]||{}).name,K=ee.name;J[re.index]=Q[K]=ee,K!==ne&&(delete Q[ne],Q[K]=ee);break;case"insert":Q[(ee=re.value).name]=ee,J.splice(re.index,0,ee);break;case"delete":delete Q[(ee=J[re.index]).name],J.splice(re.index,1)}return Promise.resolve()},m.computeFrame=function(z,H){var U,re,ee,J,Q=z._transitionData._frameHash;if(!H)throw new Error("computeFrame must be given a string frame name");var ne=Q[H.toString()];if(!ne)return!1;for(var K=[ne],oe=[ne.name];ne.baseframe&&(ne=Q[ne.baseframe.toString()])&&oe.indexOf(ne.name)===-1;)K.push(ne),oe.push(ne.name);for(var le={};ne=K.pop();)if(ne.layout&&(le.layout=m.extendLayout(le.layout,ne.layout)),ne.data){if(le.data||(le.data=[]),!(re=ne.traces))for(re=[],U=0;U<ne.data.length;U++)re[U]=U;for(le.traces||(le.traces=[]),U=0;U<ne.data.length;U++)(ee=re[U])!=null&&((J=le.traces.indexOf(ee))===-1&&(J=le.data.length,le.traces[J]=ee),le.data[J]=m.extendTrace(le.data[J],ne.data[U]))}return le},m.recomputeFrameHash=function(z){for(var H=z._transitionData._frameHash={},U=z._transitionData._frames,re=0;re<U.length;re++){var ee=U[re];ee&&ee.name&&(H[ee.name]=ee)}},m.extendObjectWithContainers=function(z,H,U){var re,ee,J,Q,ne,K,oe,le=o.extendDeepNoArrays({},H||{}),se=o.expandObjectPaths(le),de={};if(U&&U.length)for(J=0;J<U.length;J++)(ee=(re=o.nestedProperty(se,U[J])).get())===void 0?o.nestedProperty(de,U[J]).set(null):(re.set(null),o.nestedProperty(de,U[J]).set(ee));if(z=o.extendDeepNoArrays(z||{},se),U&&U.length){for(J=0;J<U.length;J++)if(K=o.nestedProperty(de,U[J]).get()){for(oe=(ne=o.nestedProperty(z,U[J])).get(),Array.isArray(oe)||(oe=[],ne.set(oe)),Q=0;Q<K.length;Q++){var be=K[Q];oe[Q]=be===null?null:m.extendObjectWithContainers(oe[Q],be)}ne.set(oe)}}return z},m.dataArrayContainers=["transforms","dimensions"],m.layoutArrayContainers=f.layoutArrayContainers,m.extendTrace=function(z,H){return m.extendObjectWithContainers(z,H,m.dataArrayContainers)},m.extendLayout=function(z,H){return m.extendObjectWithContainers(z,H,m.layoutArrayContainers)},m.transition=function(z,H,U,re,ee,J){var Q={redraw:ee.redraw},ne={},K=[];return Q.prepareFn=function(){for(var oe=Array.isArray(H)?H.length:0,le=re.slice(0,oe),se=0;se<le.length;se++){var de=le[se],be=z._fullData[de]._module;if(be){if(be.animatable){var _e=be.basePlotModule.name;ne[_e]||(ne[_e]=[]),ne[_e].push(de)}z.data[le[se]]=m.extendTrace(z.data[le[se]],H[se])}}var xe=o.expandObjectPaths(o.extendDeepNoArrays({},U)),ve=/^[xy]axis[0-9]*$/;for(var ye in xe)ve.test(ye)&&delete xe[ye].range;m.extendLayout(z.layout,xe),delete z.calcdata,m.supplyDefaults(z),m.doCalcdata(z);var me=o.expandObjectPaths(U);if(me){var Me=z._fullLayout._plots;for(var Ae in Me){var ce=Me[Ae],ae=ce.xaxis,pe=ce.yaxis,De=ae.range.slice(),ke=pe.range.slice(),Ee=null,Ie=null,Re=null,Ne=null;Array.isArray(me[ae._name+".range"])?Ee=me[ae._name+".range"].slice():Array.isArray((me[ae._name]||{}).range)&&(Ee=me[ae._name].range.slice()),Array.isArray(me[pe._name+".range"])?Ie=me[pe._name+".range"].slice():Array.isArray((me[pe._name]||{}).range)&&(Ie=me[pe._name].range.slice()),De&&Ee&&(ae.r2l(De[0])!==ae.r2l(Ee[0])||ae.r2l(De[1])!==ae.r2l(Ee[1]))&&(Re={xr0:De,xr1:Ee}),ke&&Ie&&(pe.r2l(ke[0])!==pe.r2l(Ie[0])||pe.r2l(ke[1])!==pe.r2l(Ie[1]))&&(Ne={yr0:ke,yr1:Ie}),(Re||Ne)&&K.push(o.extendFlat({plotinfo:ce},Re,Ne))}}return Promise.resolve()},Q.runFn=function(oe){var le,se,de=z._fullLayout._basePlotModules,be=K.length;if(U)for(se=0;se<de.length;se++)de[se].transitionAxes&&de[se].transitionAxes(z,K,J,oe);for(var _e in be?((le=o.extendFlat({},J)).duration=0,delete ne.cartesian):le=J,ne){var xe=ne[_e];z._fullData[xe[0]]._module.basePlotModule.plot(z,xe,le,oe)}},V(z,J,Q)},m.transitionFromReact=function(z,H,U,re){var ee=z._fullLayout,J=ee.transition,Q={},ne=[];return Q.prepareFn=function(){var K=ee._plots;for(var oe in Q.redraw=!1,H.anim==="some"&&(Q.redraw=!0),U.anim==="some"&&(Q.redraw=!0),K){var le=K[oe],se=le.xaxis,de=le.yaxis,be=re[se._name].range.slice(),_e=re[de._name].range.slice(),xe=se.range.slice(),ve=de.range.slice();se.setScale(),de.setScale();var ye=null,me=null;se.r2l(be[0])===se.r2l(xe[0])&&se.r2l(be[1])===se.r2l(xe[1])||(ye={xr0:be,xr1:xe}),de.r2l(_e[0])===de.r2l(ve[0])&&de.r2l(_e[1])===de.r2l(ve[1])||(me={yr0:_e,yr1:ve}),(ye||me)&&ne.push(o.extendFlat({plotinfo:le},ye,me))}return Promise.resolve()},Q.runFn=function(K){for(var oe,le,se,de=z._fullData,be=z._fullLayout._basePlotModules,_e=[],xe=0;xe<de.length;xe++)_e.push(xe);function ve(){if(z._fullLayout)for(var me=0;me<be.length;me++)be[me].transitionAxes&&be[me].transitionAxes(z,ne,oe,K)}function ye(){if(z._fullLayout)for(var me=0;me<be.length;me++)be[me].plot(z,se,le,K)}ne.length&&H.anim?J.ordering==="traces first"?(oe=o.extendFlat({},J,{duration:0}),se=_e,le=J,setTimeout(ve,J.duration),ye()):(oe=J,se=null,le=o.extendFlat({},J,{duration:0}),setTimeout(ye,oe.duration),ve()):ne.length?(oe=J,ve()):H.anim&&(se=_e,le=J,ye())},V(z,J,Q)},m.doCalcdata=function(z,H){var U,re,ee,J,Q=a.list(z),ne=z._fullData,K=z._fullLayout,oe=new Array(ne.length),le=(z.calcdata||[]).slice();for(z.calcdata=oe,K._numBoxes=0,K._numViolins=0,K._violinScaleGroupStats={},z._hmpixcount=0,z._hmlumcount=0,K._piecolormap={},K._sunburstcolormap={},K._treemapcolormap={},K._iciclecolormap={},K._funnelareacolormap={},ee=0;ee<ne.length;ee++)Array.isArray(H)&&H.indexOf(ee)===-1&&(oe[ee]=le[ee]);for(ee=0;ee<ne.length;ee++)(U=ne[ee])._arrayAttrs=s.findArrayAttributes(U),U._extremes={};var se=K._subplots.polar||[];for(ee=0;ee<se.length;ee++)Q.push(K[se[ee]].radialaxis,K[se[ee]].angularaxis);for(var de in K._colorAxes){var be=K[de];be.cauto!==!1&&(delete be.cmin,delete be.cmax)}var _e=!1;function xe(me){if(U=ne[me],re=U._module,U.visible===!0&&U.transforms){if(re&&re.calc){var Me=re.calc(z,U);Me[0]&&Me[0].t&&Me[0].t._scene&&delete Me[0].t._scene.dirty}for(J=0;J<U.transforms.length;J++){var Ae=U.transforms[J];(re=b[Ae.type])&&re.calcTransform&&(U._hasCalcTransform=!0,_e=!0,re.calcTransform(z,U,Ae))}}}function ve(me,Me){if(U=ne[me],!!(re=U._module).isContainer===Me){var Ae=[];if(U.visible===!0&&U._length!==0){delete U._indexToPoints;var ce=U.transforms||[];for(J=ce.length-1;J>=0;J--)if(ce[J].enabled){U._indexToPoints=ce[J]._indexToPoints;break}re&&re.calc&&(Ae=re.calc(z,U))}Array.isArray(Ae)&&Ae[0]||(Ae=[{x:i,y:i}]),Ae[0].t||(Ae[0].t={}),Ae[0].trace=U,oe[me]=Ae}}for(j(Q,ne,K),ee=0;ee<ne.length;ee++)ve(ee,!0);for(ee=0;ee<ne.length;ee++)xe(ee);for(_e&&j(Q,ne,K),ee=0;ee<ne.length;ee++)ve(ee,!0);for(ee=0;ee<ne.length;ee++)ve(ee,!1);Z(z);var ye=function(me,Me){var Ae,ce,ae,pe,De,ke=[];function Ee($e,lt,it){var Be=lt._id.charAt(0);if($e==="histogram2dcontour"){var je=lt._counterAxes[0],ot=a.getFromId(Me,je),Ze=Be==="x"||je==="x"&&ot.type==="category",dt=Be==="y"||je==="y"&&ot.type==="category";return function(mt,yt){return mt===0||yt===0||Ze&&mt===it[yt].length-1||dt&&yt===it.length-1?-1:(Be==="y"?yt:mt)-1}}return function(mt,yt){return Be==="y"?yt:mt}}var Ie={min:function($e){return o.aggNums(Math.min,null,$e)},max:function($e){return o.aggNums(Math.max,null,$e)},sum:function($e){return o.aggNums(function(lt,it){return lt+it},null,$e)},total:function($e){return o.aggNums(function(lt,it){return lt+it},null,$e)},mean:function($e){return o.mean($e)},median:function($e){return o.median($e)}};function Re($e,lt){return $e[1]-lt[1]}function Ne($e,lt){return lt[1]-$e[1]}for(Ae=0;Ae<me.length;Ae++){var ge=me[Ae];if(ge.type==="category"){var we=ge.categoryorder.match(F);if(we){var Ce=we[1],ze=we[2],Pe=ge._id.charAt(0),Ue=Pe==="x",Ge=[];for(ce=0;ce<ge._categories.length;ce++)Ge.push([ge._categories[ce],[]]);for(ce=0;ce<ge._traceIndices.length;ce++){var Xe=ge._traceIndices[ce],st=Me._fullData[Xe];if(st.visible===!0){var at=st.type;f.traceIs(st,"histogram")&&(delete st._xautoBinFinished,delete st._yautoBinFinished);var vt=at==="splom",xt=at==="scattergl",gt=Me.calcdata[Xe];for(ae=0;ae<gt.length;ae++){var rt,tt,Mt=gt[ae];if(vt){var Pt=st._axesDim[ge._id];if(!Ue){var Rt=st._diag[Pt][0];Rt&&(ge=Me._fullLayout[a.id2name(Rt)])}var St=Mt.trace.dimensions[Pt].values;for(pe=0;pe<St.length;pe++)for(rt=ge._categoriesMap[St[pe]],De=0;De<Mt.trace.dimensions.length;De++)if(De!==Pt){var Ye=Mt.trace.dimensions[De];Ge[rt][1].push(Ye.values[pe])}}else if(xt){for(pe=0;pe<Mt.t.x.length;pe++)Ue?(rt=Mt.t.x[pe],tt=Mt.t.y[pe]):(rt=Mt.t.y[pe],tt=Mt.t.x[pe]),Ge[rt][1].push(tt);Mt.t&&Mt.t._scene&&delete Mt.t._scene.dirty}else if(Mt.hasOwnProperty("z")){tt=Mt.z;var Ke=Ee(st.type,ge,tt);for(pe=0;pe<tt.length;pe++)for(De=0;De<tt[pe].length;De++)(rt=Ke(De,pe))+1&&Ge[rt][1].push(tt[pe][De])}else for((rt=Mt.p)===void 0&&(rt=Mt[Pe]),(tt=Mt.s)===void 0&&(tt=Mt.v),tt===void 0&&(tt=Ue?Mt.y:Mt.x),Array.isArray(tt)||(tt=tt===void 0?[]:[tt]),pe=0;pe<tt.length;pe++)Ge[rt][1].push(tt[pe])}}}ge._categoriesValue=Ge;var Ve=[];for(ce=0;ce<Ge.length;ce++)Ve.push([Ge[ce][0],Ie[Ce](Ge[ce][1])]);Ve.sort(ze==="descending"?Ne:Re),ge._categoriesAggregatedValue=Ve,ge._initialCategories=Ve.map(function($e){return $e[0]}),ke=ke.concat(ge.sortByInitialCategories())}}}return ke}(Q,z);if(ye.length){for(K._numBoxes=0,K._numViolins=0,ee=0;ee<ye.length;ee++)ve(ye[ee],!0);for(ee=0;ee<ye.length;ee++)ve(ye[ee],!1);Z(z)}f.getComponentMethod("fx","calc")(z),f.getComponentMethod("errorbars","calc")(z)};var F=/(total|sum|min|max|mean|median) (ascending|descending)/;function j(z,H,U){var re={};function ee(K){K.clearCalc(),K.type==="multicategory"&&K.setupMultiCategory(H),re[K._id]=1}o.simpleMap(z,ee);for(var J=U._axisMatchGroups||[],Q=0;Q<J.length;Q++)for(var ne in J[Q])re[ne]||ee(U[a.id2name(ne)])}function Z(z){var H,U,re,ee=z._fullLayout,J=ee._visibleModules,Q={};for(U=0;U<J.length;U++){var ne=J[U],K=ne.crossTraceCalc;if(K){var oe=ne.basePlotModule.name;Q[oe]?o.pushUnique(Q[oe],K):Q[oe]=[K]}}for(re in Q){var le=Q[re],se=ee._subplots[re];if(Array.isArray(se))for(H=0;H<se.length;H++){var de=se[H],be=re==="cartesian"?ee._plots[de]:ee[de];for(U=0;U<le.length;U++)le[U](z,be,de)}else for(U=0;U<le.length;U++)le[U](z)}}m.rehover=function(z){z._fullLayout._rehover&&z._fullLayout._rehover()},m.redrag=function(z){z._fullLayout._redrag&&z._fullLayout._redrag()},m.reselect=function(z){var H=z._fullLayout,U=(z.layout||{}).selections,re=H._previousSelections;H._previousSelections=U;var ee=H._reselect||JSON.stringify(U)!==JSON.stringify(re);f.getComponentMethod("selections","reselect")(z,ee)},m.generalUpdatePerTraceModule=function(z,H,U,re){var ee,J=H.traceHash,Q={};for(ee=0;ee<U.length;ee++){var ne=U[ee],K=ne[0].trace;K.visible&&(Q[K.type]=Q[K.type]||[],Q[K.type].push(ne))}for(var oe in J)if(!Q[oe]){var le=J[oe][0];le[0].trace.visible=!1,Q[oe]=[le]}for(var se in Q){var de=Q[se];de[0][0].trace._module.plot(z,H,o.filterVisible(de),re)}H.traceHash=Q},m.plotBasePlot=function(z,H,U,re,ee){var J=f.getModule(z),Q=_(H.calcdata,J)[0];J.plot(H,Q,re,ee)},m.cleanBasePlot=function(z,H,U,re,ee){var J=ee._has&&ee._has(z),Q=U._has&&U._has(z);J&&!Q&&ee["_"+z+"layer"].selectAll("g.trace").remove()}},39360:function(C){"use strict";C.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},57384:function(C,A,e){"use strict";var v=e(3400),w=e(92065).tester,n=v.findIndexOfMin,T=v.isAngleInsideSector,x=v.angleDelta,f=v.angleDist;function s(i,a,u,l){var d,c,_=l[0],p=l[1],g=o(Math.sin(a)-Math.sin(i)),m=o(Math.cos(a)-Math.cos(i)),b=Math.tan(u),y=o(1/b),M=g/m,h=p-M*_;return y?g&&m?c=b*(d=h/(b-M)):m?(d=p*y,c=p):(d=_,c=_*b):g&&m?(d=0,c=h):m?(d=0,c=p):d=c=NaN,[d,c]}function t(i,a,u,l){return v.isFullCircle([a,u])?function(d,c){var _,p=c.length,g=new Array(p+1);for(_=0;_<p;_++){var m=c[_];g[_]=[d*Math.cos(m),d*Math.sin(m)]}return g[_]=g[0].slice(),g}(i,l):function(d,c,_,p){var g,m,b=p.length,y=[];function M(V){return[d*Math.cos(V),d*Math.sin(V)]}function h(V,F,j){return s(V,F,j,M(V))}function E(V){return v.mod(V,b)}function k(V){return T(V,[c,_])}var D=n(p,function(V){return k(V)?f(V,c):1/0}),P=h(p[D],p[E(D-1)],c);for(y.push(P),g=D,m=0;m<b;g++,m++){var L=p[E(g)];if(!k(L))break;y.push(M(L))}var O=n(p,function(V){return k(V)?f(V,_):1/0}),N=h(p[O],p[E(O+1)],_);return y.push(N),y.push([0,0]),y.push(y[0].slice()),y}(i,a,u,l)}function o(i){return Math.abs(i)>1e-10?i:0}function r(i,a,u){a=a||0,u=u||0;for(var l=i.length,d=new Array(l),c=0;c<l;c++){var _=i[c];d[c]=[a+_[0],u-_[1]]}return d}C.exports={isPtInsidePolygon:function(i,a,u,l,d){if(!T(a,l))return!1;var c,_;u[0]<u[1]?(c=u[0],_=u[1]):(c=u[1],_=u[0]);var p=w(t(c,l[0],l[1],d)),g=w(t(_,l[0],l[1],d)),m=[i*Math.cos(a),i*Math.sin(a)];return g.contains(m)&&!p.contains(m)},findPolygonOffset:function(i,a,u,l){for(var d=1/0,c=1/0,_=t(i,a,u,l),p=0;p<_.length;p++){var g=_[p];d=Math.min(d,g[0]),c=Math.min(c,-g[1])}return[d,c]},findEnclosingVertexAngles:function(i,a){var u=n(a,function(d){var c=x(d,i);return c>0?c:1/0}),l=v.mod(u+1,a.length);return[a[u],a[l]]},findIntersectionXY:s,findXYatLength:function(i,a,u,l){var d=-a*u,c=a*a+1,_=2*(a*d-u),p=d*d+u*u-i*i,g=Math.sqrt(_*_-4*c*p),m=(-_+g)/(2*c),b=(-_-g)/(2*c);return[[m,a*m+d+l],[b,a*b+d+l]]},clampTiny:o,pathPolygon:function(i,a,u,l,d,c){return"M"+r(t(i,a,u,l),d,c).join("L")},pathPolygonAnnulus:function(i,a,u,l,d,c,_){var p,g;i<a?(p=i,g=a):(p=a,g=i);var m=r(t(p,u,l,d),c,_);return"M"+r(t(g,u,l,d),c,_).reverse().join("L")+"M"+m.join("L")}}},40872:function(C,A,e){"use strict";var v=e(84888).KY,w=e(3400).counterRegex,n=e(62400),T=e(39360),x=T.attr,f=T.name,s=w(f),t={};t[x]={valType:"subplotid",dflt:f,editType:"calc"},C.exports={attr:x,name:f,idRoot:f,idRegex:s,attrRegex:s,attributes:t,layoutAttributes:e(95300),supplyLayoutDefaults:e(84380),plot:function(o){for(var r=o._fullLayout,i=o.calcdata,a=r._subplots[f],u=0;u<a.length;u++){var l=a[u],d=v(i,f,l),c=r[l]._subplot;c||(c=n(o,l),r[l]._subplot=c),c.plot(d,r,o._promises)}},clean:function(o,r,i,a){for(var u=a._subplots[f]||[],l=a._has&&a._has("gl"),d=r._has&&r._has("gl"),c=l&&!d,_=0;_<u.length;_++){var p=u[_],g=a[p]._subplot;if(!r[p]&&g)for(var m in g.framework.remove(),g.layers["radial-axis-title"].remove(),g.clipPaths)g.clipPaths[m].remove();c&&g._scene&&(g._scene.destroy(),g._scene=null)}},toSVG:e(57952).toSVG}},95300:function(C,A,e){"use strict";var v=e(22548),w=e(94724),n=e(86968).u,T=e(3400).extendFlat,x=e(67824).overrideAll,f=x({color:w.color,showline:T({},w.showline,{dflt:!0}),linecolor:w.linecolor,linewidth:w.linewidth,showgrid:T({},w.showgrid,{dflt:!0}),gridcolor:w.gridcolor,gridwidth:w.gridwidth,griddash:w.griddash},"plot","from-root"),s=x({tickmode:w.minor.tickmode,nticks:w.nticks,tick0:w.tick0,dtick:w.dtick,tickvals:w.tickvals,ticktext:w.ticktext,ticks:w.ticks,ticklen:w.ticklen,tickwidth:w.tickwidth,tickcolor:w.tickcolor,ticklabelstep:w.ticklabelstep,showticklabels:w.showticklabels,labelalias:w.labelalias,showtickprefix:w.showtickprefix,tickprefix:w.tickprefix,showticksuffix:w.showticksuffix,ticksuffix:w.ticksuffix,showexponent:w.showexponent,exponentformat:w.exponentformat,minexponent:w.minexponent,separatethousands:w.separatethousands,tickfont:w.tickfont,tickangle:w.tickangle,tickformat:w.tickformat,tickformatstops:w.tickformatstops,layer:w.layer},"plot","from-root"),t={visible:T({},w.visible,{dflt:!0}),type:T({},w.type,{values:["-","linear","log","date","category"]}),autotypenumbers:w.autotypenumbers,autorangeoptions:{minallowed:w.autorangeoptions.minallowed,maxallowed:w.autorangeoptions.maxallowed,clipmin:w.autorangeoptions.clipmin,clipmax:w.autorangeoptions.clipmax,include:w.autorangeoptions.include,editType:"plot"},autorange:T({},w.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},minallowed:T({},w.minallowed,{editType:"plot"}),maxallowed:T({},w.maxallowed,{editType:"plot"}),range:T({},w.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:w.categoryorder,categoryarray:w.categoryarray,angle:{valType:"angle",editType:"plot"},autotickangles:w.autotickangles,side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:T({},w.title.text,{editType:"plot",dflt:""}),font:T({},w.title.font,{editType:"plot"}),editType:"plot"},hoverformat:w.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:w._deprecated.title,titlefont:w._deprecated.titlefont}};T(t,f,s);var o={visible:T({},w.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:w.autotypenumbers,categoryorder:w.categoryorder,categoryarray:w.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:w.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};T(o,f,s),C.exports={domain:n({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:v.background},radialaxis:t,angularaxis:o,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},84380:function(C,A,e){"use strict";var v=e(3400),w=e(76308),n=e(31780),T=e(168),x=e(84888).op,f=e(26332),s=e(25404),t=e(95936),o=e(42568),r=e(22416),i=e(42136),a=e(76808),u=e(52976),l=e(95300),d=e(57696),c=e(39360),_=c.axisNames;function p(m,b,y,M){var h=y("bgcolor");M.bgColor=w.combine(h,M.paper_bgcolor);var E=y("sector");y("hole");var k,D=x(M.fullData,c.name,M.id),P=M.layoutOut;function L(_e,xe){return y(k+"."+_e,xe)}for(var O=0;O<_.length;O++){k=_[O],v.isPlainObject(m[k])||(m[k]={});var N=m[k],V=n.newContainer(b,k);V._id=V._name=k,V._attr=M.id+"."+k,V._traceIndices=D.map(function(_e){return _e._expandedIndex});var F=c.axisName2dataArray[k],j=g(N,V,L,D,F,M);r(N,V,L,{axData:D,dataAttr:F});var Z=L("visible");switch(d(V,b,P),L("uirevision",b.uirevision),V._m=1,k){case"radialaxis":L("minallowed"),L("maxallowed");var z,H=L("range"),U=V.getAutorangeDflt(H),re=L("autorange",U);!H||(H[0]!==null||H[1]!==null)&&(H[0]!==null&&H[1]!==null||re!=="reversed"&&re!==!0)&&(H[0]===null||re!=="min"&&re!=="max reversed")&&(H[1]===null||re!=="max"&&re!=="min reversed")||(H=void 0,delete V.range,V.autorange=!0,z=!0),z||(re=L("autorange",U=V.getAutorangeDflt(H))),N.autorange=re,re&&(a(L,re,H),j!=="linear"&&j!=="-"||L("rangemode"),V.isReversed()&&(V._m=-1)),V.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(j==="date"){v.log("Polar plots do not support date angular axes yet.");for(var ee=0;ee<D.length;ee++)D[ee].visible=!1;j=N.type=V.type="linear"}L(j==="linear"?"thetaunit":"period");var J=L("direction");L("rotation",{counterclockwise:0,clockwise:90}[J])}if(o(N,V,L,V.type,{tickSuffixDflt:V.thetaunit==="degrees"?"\xB0":void 0}),Z){var Q,ne,K,oe,le,se,de,be=M.font||{};ne=(Q=L("color"))===N.color?Q:be.color,K=be.size,oe=be.family,le=be.weight,se=be.style,de=be.variant,f(N,V,L,V.type),t(N,V,L,V.type,{font:{weight:le,style:se,variant:de,color:ne,size:K,family:oe},noAutotickangles:k==="angularaxis"}),s(N,V,L,{outerTicks:!0}),i(N,V,L,{dfltColor:Q,bgColor:M.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:l[k]}),L("layer"),k==="radialaxis"&&(L("side"),L("angle",E[0]),L("title.text"),v.coerceFont(L,"title.font",{weight:le,style:se,variant:de,color:ne,size:v.bigFont(K),family:oe}))}j!=="category"&&L("hoverformat"),V._input=N}b.angularaxis.type==="category"&&y("gridshape")}function g(m,b,y,M,h,E){var k=y("autotypenumbers",E.autotypenumbersDflt);if(y("type")==="-"){for(var D,P=0;P<M.length;P++)if(M[P].visible){D=M[P];break}D&&D[h]&&(b.type=u(D[h],"gregorian",{noMultiCategory:!0,autotypenumbers:k})),b.type==="-"?b.type="linear":m.type=b.type}return b.type}C.exports=function(m,b,y){T(m,b,y,{type:c.name,attributes:l,handleDefaults:p,font:b.font,autotypenumbersDflt:b.autotypenumbers,paper_bgcolor:b.paper_bgcolor,fullData:y,layoutOut:b})}},62400:function(C,A,e){"use strict";var v=e(33428),w=e(49760),n=e(24040),T=e(3400),x=T.strRotate,f=T.strTranslate,s=e(76308),t=e(43616),o=e(7316),r=e(54460),i=e(78344),a=e(57696),u=e(19280).doAutoRange,l=e(51184),d=e(86476),c=e(93024),_=e(81668),p=e(22676).prepSelect,g=e(22676).selectOnClick,m=e(22676).clearOutline,b=e(93972),y=e(73696),M=e(39172).redrawReglTraces,h=e(84284).MID_SHIFT,E=e(39360),k=e(57384),D=e(36416),P=D.smith,L=D.reactanceArc,O=D.resistanceArc,N=D.smithTransform,V=T._,F=T.mod,j=T.deg2rad,Z=T.rad2deg;function z(J,Q,ne){this.isSmith=ne||!1,this.id=Q,this.gd=J,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var K=J._fullLayout,oe="clip"+K._uid+Q;this.clipIds.forTraces=oe+"-for-traces",this.clipPaths.forTraces=K._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=K["_"+(ne?"smith":"polar")+"layer"].append("g").attr("class",Q),this.getHole=function(le){return this.isSmith?0:le.hole},this.getSector=function(le){return this.isSmith?[0,360]:le.sector},this.getRadial=function(le){return this.isSmith?le.realaxis:le.radialaxis},this.getAngular=function(le){return this.isSmith?le.imaginaryaxis:le.angularaxis},ne||(this.radialTickLayout=null,this.angularTickLayout=null)}var H=z.prototype;function U(J){var Q=J.ticks+String(J.ticklen)+String(J.showticklabels);return"side"in J&&(Q+=J.side),Q}function re(J,Q){return Q[T.findIndexOfMin(Q,function(ne){return T.angleDist(J,ne)})]}function ee(J,Q,ne){return Q?(J.attr("display",null),J.attr(ne)):J&&J.attr("display","none"),J}C.exports=function(J,Q,ne){return new z(J,Q,ne)},H.plot=function(J,Q){for(var ne=this,K=Q[ne.id],oe=!1,le=0;le<J.length;le++)if(J[le][0].trace.cliponaxis===!1){oe=!0;break}ne._hasClipOnAxisFalse=oe,ne.updateLayers(Q,K),ne.updateLayout(Q,K),o.generalUpdatePerTraceModule(ne.gd,ne,J,K),ne.updateFx(Q,K),ne.isSmith&&(delete K.realaxis.range,delete K.imaginaryaxis.range)},H.updateLayers=function(J,Q){var ne=this,K=ne.isSmith,oe=ne.layers,le=ne.getRadial(Q),se=ne.getAngular(Q),de=E.layerNames,be=de.indexOf("frontplot"),_e=de.slice(0,be),xe=se.layer==="below traces",ve=le.layer==="below traces";xe&&_e.push("angular-line"),ve&&_e.push("radial-line"),xe&&_e.push("angular-axis"),ve&&_e.push("radial-axis"),_e.push("frontplot"),xe||_e.push("angular-line"),ve||_e.push("radial-line"),xe||_e.push("angular-axis"),ve||_e.push("radial-axis");var ye=(K?"smith":"polar")+"sublayer",me=ne.framework.selectAll("."+ye).data(_e,String);me.enter().append("g").attr("class",function(Me){return ye+" "+Me}).each(function(Me){var Ae=oe[Me]=v.select(this);switch(Me){case"frontplot":K||Ae.append("g").classed("barlayer",!0),Ae.append("g").classed("scatterlayer",!0);break;case"backplot":Ae.append("g").classed("maplayer",!0);break;case"plotbg":oe.bg=Ae.append("path");break;case"radial-grid":case"angular-grid":Ae.style("fill","none");break;case"radial-line":Ae.append("line").style("fill","none");break;case"angular-line":Ae.append("path").style("fill","none")}}),me.order()},H.updateLayout=function(J,Q){var ne=this,K=ne.layers,oe=J._size,le=ne.getRadial(Q),se=ne.getAngular(Q),de=Q.domain.x,be=Q.domain.y;ne.xOffset=oe.l+oe.w*de[0],ne.yOffset=oe.t+oe.h*(1-be[1]);var _e=ne.xLength=oe.w*(de[1]-de[0]),xe=ne.yLength=oe.h*(be[1]-be[0]),ve=ne.getSector(Q);ne.sectorInRad=ve.map(j);var ye,me,Me,Ae,ce,ae=ne.sectorBBox=function(st){var at,vt=st[0],xt=st[1]-vt,gt=F(vt,360),rt=gt+xt,tt=Math.cos(j(gt)),Mt=Math.sin(j(gt)),Pt=Math.cos(j(rt)),Rt=Math.sin(j(rt));return at=gt<=90&&rt>=90||gt>90&&rt>=450?1:Mt<=0&&Rt<=0?0:Math.max(Mt,Rt),[gt<=180&&rt>=180||gt>180&&rt>=540?-1:tt>=0&&Pt>=0?0:Math.min(tt,Pt),gt<=270&&rt>=270||gt>270&&rt>=630?-1:Mt>=0&&Rt>=0?0:Math.min(Mt,Rt),rt>=360?1:tt<=0&&Pt<=0?0:Math.max(tt,Pt),at]}(ve),pe=ae[2]-ae[0],De=ae[3]-ae[1],ke=xe/_e,Ee=Math.abs(De/pe);ke>Ee?(ye=_e,ce=(xe-(me=_e*Ee))/oe.h/2,Me=[de[0],de[1]],Ae=[be[0]+ce,be[1]-ce]):(me=xe,ce=(_e-(ye=xe/Ee))/oe.w/2,Me=[de[0]+ce,de[1]-ce],Ae=[be[0],be[1]]),ne.xLength2=ye,ne.yLength2=me,ne.xDomain2=Me,ne.yDomain2=Ae;var Ie,Re=ne.xOffset2=oe.l+oe.w*Me[0],Ne=ne.yOffset2=oe.t+oe.h*(1-Ae[1]),ge=ne.radius=ye/pe,we=ne.innerRadius=ne.getHole(Q)*ge,Ce=ne.cx=Re-ge*ae[0],ze=ne.cy=Ne+ge*ae[3],Pe=ne.cxx=Ce-Re,Ue=ne.cyy=ze-Ne,Ge=le.side;Ge==="counterclockwise"?(Ie=Ge,Ge="top"):Ge==="clockwise"&&(Ie=Ge,Ge="bottom"),ne.radialAxis=ne.mockAxis(J,Q,le,{_id:"x",side:Ge,_trueSide:Ie,domain:[we/oe.w,ge/oe.w]}),ne.angularAxis=ne.mockAxis(J,Q,se,{side:"right",domain:[0,Math.PI],autorange:!1}),ne.doAutoRange(J,Q),ne.updateAngularAxis(J,Q),ne.updateRadialAxis(J,Q),ne.updateRadialAxisTitle(J,Q),ne.xaxis=ne.mockCartesianAxis(J,Q,{_id:"x",domain:Me}),ne.yaxis=ne.mockCartesianAxis(J,Q,{_id:"y",domain:Ae});var Xe=ne.pathSubplot();ne.clipPaths.forTraces.select("path").attr("d",Xe).attr("transform",f(Pe,Ue)),K.frontplot.attr("transform",f(Re,Ne)).call(t.setClipUrl,ne._hasClipOnAxisFalse?null:ne.clipIds.forTraces,ne.gd),K.bg.attr("d",Xe).attr("transform",f(Ce,ze)).call(s.fill,Q.bgcolor)},H.mockAxis=function(J,Q,ne,K){var oe=T.extendFlat({},ne,K);return a(oe,Q,J),oe},H.mockCartesianAxis=function(J,Q,ne){var K=this,oe=K.isSmith,le=ne._id,se=T.extendFlat({type:"linear"},ne);i(se,J);var de={x:[0,2],y:[1,3]};return se.setRange=function(){var be=K.sectorBBox,_e=de[le],xe=K.radialAxis._rl,ve=(xe[1]-xe[0])/(1-K.getHole(Q));se.range=[be[_e[0]]*ve,be[_e[1]]*ve]},se.isPtWithinRange=le!=="x"||oe?function(){return!0}:function(be){return K.isPtInside(be)},se.setRange(),se.setScale(),se},H.doAutoRange=function(J,Q){var ne=this,K=ne.gd,oe=ne.radialAxis,le=ne.getRadial(Q);u(K,oe);var se=oe.range;if(le.range=se.slice(),le._input.range=se.slice(),oe._rl=[oe.r2l(se[0],null,"gregorian"),oe.r2l(se[1],null,"gregorian")],oe.minallowed!==void 0){var de=oe.r2l(oe.minallowed);oe._rl[0]>oe._rl[1]?oe._rl[1]=Math.max(oe._rl[1],de):oe._rl[0]=Math.max(oe._rl[0],de)}if(oe.maxallowed!==void 0){var be=oe.r2l(oe.maxallowed);oe._rl[0]<oe._rl[1]?oe._rl[1]=Math.min(oe._rl[1],be):oe._rl[0]=Math.min(oe._rl[0],be)}},H.updateRadialAxis=function(J,Q){var ne=this,K=ne.gd,oe=ne.layers,le=ne.radius,se=ne.innerRadius,de=ne.cx,be=ne.cy,_e=ne.getRadial(Q),xe=F(ne.getSector(Q)[0],360),ve=ne.radialAxis,ye=se<le,me=ne.isSmith;me||(ne.fillViewInitialKey("radialaxis.angle",_e.angle),ne.fillViewInitialKey("radialaxis.range",ve.range.slice()),ve.setGeometry()),ve.tickangle==="auto"&&xe>90&&xe<=270&&(ve.tickangle=180);var Me=me?function(Ne){var ge=N(ne,P([Ne.x,0]));return f(ge[0]-de,ge[1]-be)}:function(Ne){return f(ve.l2p(Ne.x)+se,0)},Ae=me?function(Ne){return O(ne,Ne.x,-1/0,1/0)}:function(Ne){return ne.pathArc(ve.r2p(Ne.x)+se)},ce=U(_e);if(ne.radialTickLayout!==ce&&(oe["radial-axis"].selectAll(".xtick").remove(),ne.radialTickLayout=ce),ye){ve.setScale();var ae=0,pe=me?(ve.tickvals||[]).filter(function(Ne){return Ne>=0}).map(function(Ne){return r.tickText(ve,Ne,!0,!1)}):r.calcTicks(ve),De=me?pe:r.clipEnds(ve,pe),ke=r.getTickSigns(ve)[2];me&&((ve.ticks==="top"&&ve.side==="bottom"||ve.ticks==="bottom"&&ve.side==="top")&&(ke=-ke),ve.ticks==="top"&&ve.side==="top"&&(ae=-ve.ticklen),ve.ticks==="bottom"&&ve.side==="bottom"&&(ae=ve.ticklen)),r.drawTicks(K,ve,{vals:pe,layer:oe["radial-axis"],path:r.makeTickPath(ve,0,ke),transFn:Me,crisp:!1}),r.drawGrid(K,ve,{vals:De,layer:oe["radial-grid"],path:Ae,transFn:T.noop,crisp:!1}),r.drawLabels(K,ve,{vals:pe,layer:oe["radial-axis"],transFn:Me,labelFns:r.makeLabelFns(ve,ae)})}var Ee=ne.radialAxisAngle=ne.vangles?Z(re(j(_e.angle),ne.vangles)):_e.angle,Ie=f(de,be),Re=Ie+x(-Ee);ee(oe["radial-axis"],ye&&(_e.showticklabels||_e.ticks),{transform:Re}),ee(oe["radial-grid"],ye&&_e.showgrid,{transform:me?"":Ie}),ee(oe["radial-line"].select("line"),ye&&_e.showline,{x1:me?-le:se,y1:0,x2:le,y2:0,transform:Re}).attr("stroke-width",_e.linewidth).call(s.stroke,_e.linecolor)},H.updateRadialAxisTitle=function(J,Q,ne){if(!this.isSmith){var K=this,oe=K.gd,le=K.radius,se=K.cx,de=K.cy,be=K.getRadial(Q),_e=K.id+"title",xe=0;if(be.title){var ve=t.bBox(K.layers["radial-axis"].node()).height,ye=be.title.font.size,me=be.side;xe=me==="top"?ye:me==="counterclockwise"?-(ve+.4*ye):ve+.8*ye}var Me=ne!==void 0?ne:K.radialAxisAngle,Ae=j(Me),ce=Math.cos(Ae),ae=Math.sin(Ae),pe=se+le/2*ce+xe*ae,De=de-le/2*ae+xe*ce;K.layers["radial-axis-title"]=_.draw(oe,_e,{propContainer:be,propName:K.id+".radialaxis.title",placeholder:V(oe,"Click to enter radial axis title"),attributes:{x:pe,y:De,"text-anchor":"middle"},transform:{rotate:-Me}})}},H.updateAngularAxis=function(J,Q){var ne=this,K=ne.gd,oe=ne.layers,le=ne.radius,se=ne.innerRadius,de=ne.cx,be=ne.cy,_e=ne.getAngular(Q),xe=ne.angularAxis,ve=ne.isSmith;ve||(ne.fillViewInitialKey("angularaxis.rotation",_e.rotation),xe.setGeometry(),xe.setScale());var ye=ve?function(Ne){var ge=N(ne,P([0,Ne.x]));return Math.atan2(ge[0]-de,ge[1]-be)-Math.PI/2}:function(Ne){return xe.t2g(Ne.x)};xe.type==="linear"&&xe.thetaunit==="radians"&&(xe.tick0=Z(xe.tick0),xe.dtick=Z(xe.dtick));var me=function(Ne){return f(de+le*Math.cos(Ne),be-le*Math.sin(Ne))},Me=ve?function(Ne){var ge=N(ne,P([0,Ne.x]));return f(ge[0],ge[1])}:function(Ne){return me(ye(Ne))},Ae=ve?function(Ne){var ge=N(ne,P([0,Ne.x])),we=Math.atan2(ge[0]-de,ge[1]-be)-Math.PI/2;return f(ge[0],ge[1])+x(-Z(we))}:function(Ne){var ge=ye(Ne);return me(ge)+x(-Z(ge))},ce=ve?function(Ne){return L(ne,Ne.x,0,1/0)}:function(Ne){var ge=ye(Ne),we=Math.cos(ge),Ce=Math.sin(ge);return"M"+[de+se*we,be-se*Ce]+"L"+[de+le*we,be-le*Ce]},ae=r.makeLabelFns(xe,0).labelStandoff,pe={xFn:function(Ne){var ge=ye(Ne);return Math.cos(ge)*ae},yFn:function(Ne){var ge=ye(Ne),we=Math.sin(ge)>0?.2:1;return-Math.sin(ge)*(ae+Ne.fontSize*we)+Math.abs(Math.cos(ge))*(Ne.fontSize*h)},anchorFn:function(Ne){var ge=ye(Ne),we=Math.cos(ge);return Math.abs(we)<.1?"middle":we>0?"start":"end"},heightFn:function(Ne,ge,we){var Ce=ye(Ne);return-.5*(1+Math.sin(Ce))*we}},De=U(_e);ne.angularTickLayout!==De&&(oe["angular-axis"].selectAll("."+xe._id+"tick").remove(),ne.angularTickLayout=De);var ke,Ee=ve?[1/0].concat(xe.tickvals||[]).map(function(Ne){return r.tickText(xe,Ne,!0,!1)}):r.calcTicks(xe);if(ve&&(Ee[0].text="\u221E",Ee[0].fontSize*=1.75),Q.gridshape==="linear"?(ke=Ee.map(ye),T.angleDelta(ke[0],ke[1])<0&&(ke=ke.slice().reverse())):ke=null,ne.vangles=ke,xe.type==="category"&&(Ee=Ee.filter(function(Ne){return T.isAngleInsideSector(ye(Ne),ne.sectorInRad)})),xe.visible){var Ie=xe.ticks==="inside"?-1:1,Re=(xe.linewidth||1)/2;r.drawTicks(K,xe,{vals:Ee,layer:oe["angular-axis"],path:"M"+Ie*Re+",0h"+Ie*xe.ticklen,transFn:Ae,crisp:!1}),r.drawGrid(K,xe,{vals:Ee,layer:oe["angular-grid"],path:ce,transFn:T.noop,crisp:!1}),r.drawLabels(K,xe,{vals:Ee,layer:oe["angular-axis"],repositionOnUpdate:!0,transFn:Me,labelFns:pe})}ee(oe["angular-line"].select("path"),_e.showline,{d:ne.pathSubplot(),transform:f(de,be)}).attr("stroke-width",_e.linewidth).call(s.stroke,_e.linecolor)},H.updateFx=function(J,Q){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(J),this.updateRadialDrag(J,Q,0),this.updateRadialDrag(J,Q,1)),this.updateHoverAndMainDrag(J))},H.updateHoverAndMainDrag=function(J){var Q,ne,K=this,oe=K.isSmith,le=K.gd,se=K.layers,de=J._zoomlayer,be=E.MINZOOM,_e=E.OFFEDGE,xe=K.radius,ve=K.innerRadius,ye=K.cx,me=K.cy,Me=K.cxx,Ae=K.cyy,ce=K.sectorInRad,ae=K.vangles,pe=K.radialAxis,De=k.clampTiny,ke=k.findXYatLength,Ee=k.findEnclosingVertexAngles,Ie=E.cornerHalfWidth,Re=E.cornerLen/2,Ne=l.makeDragger(se,"path","maindrag",J.dragmode===!1?"none":"crosshair");v.select(Ne).attr("d",K.pathSubplot()).attr("transform",f(ye,me)),Ne.onmousemove=function(it){c.hover(le,it,K.id),le._fullLayout._lasthover=Ne,le._fullLayout._hoversubplot=K.id},Ne.onmouseout=function(it){le._dragging||d.unhover(le,it)};var ge,we,Ce,ze,Pe,Ue,Ge,Xe,st,at={element:Ne,gd:le,subplot:K.id,plotinfo:{id:K.id,xaxis:K.xaxis,yaxis:K.yaxis},xaxes:[K.xaxis],yaxes:[K.yaxis]};function vt(it,Be){return Math.sqrt(it*it+Be*Be)}function xt(it,Be){return vt(it-Me,Be-Ae)}function gt(it,Be){return Math.atan2(Ae-Be,it-Me)}function rt(it,Be){return[it*Math.cos(Be),it*Math.sin(-Be)]}function tt(it,Be){if(it===0)return K.pathSector(2*Ie);var je=Re/it,ot=Be-je,Ze=Be+je,dt=Math.max(0,Math.min(it,xe)),mt=dt-Ie,yt=dt+Ie;return"M"+rt(mt,ot)+"A"+[mt,mt]+" 0,0,0 "+rt(mt,Ze)+"L"+rt(yt,Ze)+"A"+[yt,yt]+" 0,0,1 "+rt(yt,ot)+"Z"}function Mt(it,Be,je){if(it===0)return K.pathSector(2*Ie);var ot,Ze,dt=rt(it,Be),mt=rt(it,je),yt=De((dt[0]+mt[0])/2),ht=De((dt[1]+mt[1])/2);if(yt&&ht){var kt=ht/yt,_t=-1/kt,Et=ke(Ie,kt,yt,ht);ot=ke(Re,_t,Et[0][0],Et[0][1]),Ze=ke(Re,_t,Et[1][0],Et[1][1])}else{var Lt,Ot;ht?(Lt=Re,Ot=Ie):(Lt=Ie,Ot=Re),ot=[[yt-Lt,ht-Ot],[yt+Lt,ht-Ot]],Ze=[[yt-Lt,ht+Ot],[yt+Lt,ht+Ot]]}return"M"+ot.join("L")+"L"+Ze.reverse().join("L")+"Z"}function Pt(it,Be){return Be=Math.max(Math.min(Be,xe),ve),it<_e?it=0:xe-it<_e?it=xe:Be<_e?Be=0:xe-Be<_e&&(Be=xe),Math.abs(Be-it)>be?(it<Be?(Ce=it,ze=Be):(Ce=Be,ze=it),!0):(Ce=null,ze=null,!1)}function Rt(it,Be){it=it||Pe,Be=Be||"M0,0Z",Xe.attr("d",it),st.attr("d",Be),l.transitionZoombox(Xe,st,Ue,Ge),Ue=!0;var je={};$e(je),le.emit("plotly_relayouting",je)}function St(it,Be){var je,ot,Ze=ge+(it*=Q),dt=we+(Be*=ne),mt=xt(ge,we),yt=Math.min(xt(Ze,dt),xe),ht=gt(ge,we);Pt(mt,yt)&&(je=Pe+K.pathSector(ze),Ce&&(je+=K.pathSector(Ce)),ot=tt(Ce,ht)+tt(ze,ht)),Rt(je,ot)}function Ye(it,Be,je,ot){var Ze=k.findIntersectionXY(je,ot,je,[it-Me,Ae-Be]);return vt(Ze[0],Ze[1])}function Ke(it,Be){var je,ot,Ze=ge+it,dt=we+Be,mt=gt(ge,we),yt=gt(Ze,dt),ht=Ee(mt,ae),kt=Ee(yt,ae);Pt(Ye(ge,we,ht[0],ht[1]),Math.min(Ye(Ze,dt,kt[0],kt[1]),xe))&&(je=Pe+K.pathSector(ze),Ce&&(je+=K.pathSector(Ce)),ot=[Mt(Ce,ht[0],ht[1]),Mt(ze,ht[0],ht[1])].join(" ")),Rt(je,ot)}function Ve(){if(l.removeZoombox(le),Ce!==null&&ze!==null){var it={};$e(it),l.showDoubleClickNotifier(le),n.call("_guiRelayout",le,it)}}function $e(it){var Be=pe._rl,je=(Be[1]-Be[0])/(1-ve/xe)/xe,ot=[Be[0]+(Ce-ve)*je,Be[0]+(ze-ve)*je];it[K.id+".radialaxis.range"]=ot}function lt(it,Be){var je=le._fullLayout.clickmode;if(l.removeZoombox(le),it===2){var ot={};for(var Ze in K.viewInitial)ot[K.id+"."+Ze]=K.viewInitial[Ze];le.emit("plotly_doubleclick",null),n.call("_guiRelayout",le,ot)}je.indexOf("select")>-1&&it===1&&g(Be,le,[K.xaxis],[K.yaxis],K.id,at),je.indexOf("event")>-1&&c.click(le,Be,K.id)}at.prepFn=function(it,Be,je){var ot=le._fullLayout.dragmode,Ze=Ne.getBoundingClientRect();le._fullLayout._calcInverseTransform(le);var dt=le._fullLayout._invTransform;Q=le._fullLayout._invScaleX,ne=le._fullLayout._invScaleY;var mt=T.apply3DTransform(dt)(Be-Ze.left,je-Ze.top);if(ge=mt[0],we=mt[1],ae){var yt=k.findPolygonOffset(xe,ce[0],ce[1],ae);ge+=Me+yt[0],we+=Ae+yt[1]}switch(ot){case"zoom":at.clickFn=lt,oe||(at.moveFn=ae?Ke:St,at.doneFn=Ve,function(){Ce=null,ze=null,Pe=K.pathSubplot(),Ue=!1;var ht=le._fullLayout[K.id];Ge=w(ht.bgcolor).getLuminance(),(Xe=l.makeZoombox(de,Ge,ye,me,Pe)).attr("fill-rule","evenodd"),st=l.makeCorners(de,ye,me),m(le)}());break;case"select":case"lasso":p(it,Be,je,at,ot)}},d.init(at)},H.updateRadialDrag=function(J,Q,ne){var K=this,oe=K.gd,le=K.layers,se=K.radius,de=K.innerRadius,be=K.cx,_e=K.cy,xe=K.radialAxis,ve=E.radialDragBoxSize,ye=ve/2;if(xe.visible){var me,Me,Ae,ce=j(K.radialAxisAngle),ae=xe._rl,pe=ae[0],De=ae[1],ke=ae[ne],Ee=.75*(ae[1]-ae[0])/(1-K.getHole(Q))/se;ne?(me=be+(se+ye)*Math.cos(ce),Me=_e-(se+ye)*Math.sin(ce),Ae="radialdrag"):(me=be+(de-ye)*Math.cos(ce),Me=_e-(de-ye)*Math.sin(ce),Ae="radialdrag-inner");var Ie,Re,Ne,ge=l.makeRectDragger(le,Ae,"crosshair",-ye,-ye,ve,ve),we={element:ge,gd:oe};J.dragmode===!1&&(we.dragmode=!1),ee(v.select(ge),xe.visible&&de<se,{transform:f(me,Me)}),we.prepFn=function(){Ie=null,Re=null,Ne=null,we.moveFn=Ce,we.doneFn=ze,m(oe)},we.clampFn=function(Ge,Xe){return Math.sqrt(Ge*Ge+Xe*Xe)<E.MINDRAG&&(Ge=0,Xe=0),[Ge,Xe]},d.init(we)}function Ce(Ge,Xe){if(Ie)Ie(Ge,Xe);else{var st=[Ge,-Xe],at=[Math.cos(ce),Math.sin(ce)],vt=Math.abs(T.dot(st,at)/Math.sqrt(T.dot(st,st)));isNaN(vt)||(Ie=vt<.5?Pe:Ue)}var xt={};(function(gt){Re!==null?gt[K.id+".radialaxis.angle"]=Re:Ne!==null&&(gt[K.id+".radialaxis.range["+ne+"]"]=Ne)})(xt),oe.emit("plotly_relayouting",xt)}function ze(){Re!==null?n.call("_guiRelayout",oe,K.id+".radialaxis.angle",Re):Ne!==null&&n.call("_guiRelayout",oe,K.id+".radialaxis.range["+ne+"]",Ne)}function Pe(Ge,Xe){if(ne!==0){var st=me+Ge,at=Me+Xe;Re=Math.atan2(_e-at,st-be),K.vangles&&(Re=re(Re,K.vangles)),Re=Z(Re);var vt=f(be,_e)+x(-Re);le["radial-axis"].attr("transform",vt),le["radial-line"].select("line").attr("transform",vt);var xt=K.gd._fullLayout,gt=xt[K.id];K.updateRadialAxisTitle(xt,gt,Re)}}function Ue(Ge,Xe){var st=T.dot([Ge,-Xe],[Math.cos(ce),Math.sin(ce)]);if(Ne=ke-Ee*st,Ee>0==(ne?Ne>pe:Ne<De)){var at=oe._fullLayout,vt=at[K.id];xe.range[ne]=Ne,xe._rl[ne]=Ne,K.updateRadialAxis(at,vt),K.xaxis.setRange(),K.xaxis.setScale(),K.yaxis.setRange(),K.yaxis.setScale();var xt=!1;for(var gt in K.traceHash){var rt=K.traceHash[gt],tt=T.filterVisible(rt);rt[0][0].trace._module.plot(oe,K,tt,vt),n.traceIs(gt,"gl")&&tt.length&&(xt=!0)}xt&&(y(oe),M(oe))}else Ne=null}},H.updateAngularDrag=function(J){var Q=this,ne=Q.gd,K=Q.layers,oe=Q.radius,le=Q.angularAxis,se=Q.cx,de=Q.cy,be=Q.cxx,_e=Q.cyy,xe=E.angularDragBoxSize,ve=l.makeDragger(K,"path","angulardrag",J.dragmode===!1?"none":"move"),ye={element:ve,gd:ne};function me(we,Ce){return Math.atan2(_e+xe-Ce,we-be-xe)}J.dragmode===!1?ye.dragmode=!1:v.select(ve).attr("d",Q.pathAnnulus(oe,oe+xe)).attr("transform",f(se,de)).call(b,"move");var Me,Ae,ce,ae,pe,De,ke=K.frontplot.select(".scatterlayer").selectAll(".trace"),Ee=ke.selectAll(".point"),Ie=ke.selectAll(".textpoint");function Re(we,Ce){var ze=Q.gd._fullLayout,Pe=ze[Q.id],Ue=me(Me+we*J._invScaleX,Ae+Ce*J._invScaleY),Ge=Z(Ue-De);if(ae=ce+Ge,K.frontplot.attr("transform",f(Q.xOffset2,Q.yOffset2)+x([-Ge,be,_e])),Q.vangles){pe=Q.radialAxisAngle+Ge;var Xe=f(se,de)+x(-Ge),st=f(se,de)+x(-pe);K.bg.attr("transform",Xe),K["radial-grid"].attr("transform",Xe),K["radial-axis"].attr("transform",st),K["radial-line"].select("line").attr("transform",st),Q.updateRadialAxisTitle(ze,Pe,pe)}else Q.clipPaths.forTraces.select("path").attr("transform",f(be,_e)+x(Ge));Ee.each(function(){var tt=v.select(this),Mt=t.getTranslate(tt);tt.attr("transform",f(Mt.x,Mt.y)+x([Ge]))}),Ie.each(function(){var tt=v.select(this),Mt=tt.select("text"),Pt=t.getTranslate(tt);tt.attr("transform",x([Ge,Mt.attr("x"),Mt.attr("y")])+f(Pt.x,Pt.y))}),le.rotation=T.modHalf(ae,360),Q.updateAngularAxis(ze,Pe),Q._hasClipOnAxisFalse&&!T.isFullCircle(Q.sectorInRad)&&ke.call(t.hideOutsideRangePoints,Q);var at=!1;for(var vt in Q.traceHash)if(n.traceIs(vt,"gl")){var xt=Q.traceHash[vt],gt=T.filterVisible(xt);xt[0][0].trace._module.plot(ne,Q,gt,Pe),gt.length&&(at=!0)}at&&(y(ne),M(ne));var rt={};Ne(rt),ne.emit("plotly_relayouting",rt)}function Ne(we){we[Q.id+".angularaxis.rotation"]=ae,Q.vangles&&(we[Q.id+".radialaxis.angle"]=pe)}function ge(){Ie.select("text").attr("transform",null);var we={};Ne(we),n.call("_guiRelayout",ne,we)}ye.prepFn=function(we,Ce,ze){var Pe=J[Q.id];ce=Pe.angularaxis.rotation;var Ue=ve.getBoundingClientRect();Me=Ce-Ue.left,Ae=ze-Ue.top,ne._fullLayout._calcInverseTransform(ne);var Ge=T.apply3DTransform(J._invTransform)(Me,Ae);Me=Ge[0],Ae=Ge[1],De=me(Me,Ae),ye.moveFn=Re,ye.doneFn=ge,m(ne)},Q.vangles&&!T.isFullCircle(Q.sectorInRad)&&(ye.prepFn=T.noop,b(v.select(ve),null)),d.init(ye)},H.isPtInside=function(J){if(this.isSmith)return!0;var Q=this.sectorInRad,ne=this.vangles,K=this.angularAxis.c2g(J.theta),oe=this.radialAxis,le=oe.c2l(J.r),se=oe._rl;return(ne?k.isPtInsidePolygon:T.isPtInsideSector)(le,K,se,Q,ne)},H.pathArc=function(J){var Q=this.sectorInRad,ne=this.vangles;return(ne?k.pathPolygon:T.pathArc)(J,Q[0],Q[1],ne)},H.pathSector=function(J){var Q=this.sectorInRad,ne=this.vangles;return(ne?k.pathPolygon:T.pathSector)(J,Q[0],Q[1],ne)},H.pathAnnulus=function(J,Q){var ne=this.sectorInRad,K=this.vangles;return(K?k.pathPolygonAnnulus:T.pathAnnulus)(J,Q,ne[0],ne[1],K)},H.pathSubplot=function(){var J=this.innerRadius,Q=this.radius;return J?this.pathAnnulus(J,Q):this.pathSector(Q)},H.fillViewInitialKey=function(J,Q){J in this.viewInitial||(this.viewInitial[J]=Q)}},57696:function(C,A,e){"use strict";var v=e(3400),w=e(78344),n=v.deg2rad,T=v.rad2deg;C.exports=function(x,f,s){switch(w(x,s),x._id){case"x":case"radialaxis":(function(t,o){var r=o._subplot;t.setGeometry=function(){var i=t._rl[0],a=t._rl[1],u=r.innerRadius,l=(r.radius-u)/(a-i),d=u/l,c=i>a?function(_){return _<=0}:function(_){return _>=0};t.c2g=function(_){var p=t.c2l(_)-i;return(c(p)?p:0)+d},t.g2c=function(_){return t.l2c(_+i-d)},t.g2p=function(_){return _*l},t.c2p=function(_){return t.g2p(t.c2g(_))}}})(x,f);break;case"angularaxis":(function(t,o){var r=t.type;if(r==="linear"){var i=t.d2c,a=t.c2d;t.d2c=function(u,l){return function(d,c){return c==="degrees"?n(d):d}(i(u),l)},t.c2d=function(u,l){return a(function(d,c){return c==="degrees"?T(d):d}(u,l))}}t.makeCalcdata=function(u,l){var d,c,_=u[l],p=u._length,g=function(h){return t.d2c(h,u.thetaunit)};if(_)for(d=new Array(p),c=0;c<p;c++)d[c]=g(_[c]);else{var m=l+"0",b="d"+l,y=m in u?g(u[m]):0,M=u[b]?g(u[b]):(t.period||2*Math.PI)/p;for(d=new Array(p),c=0;c<p;c++)d[c]=y+c*M}return d},t.setGeometry=function(){var u,l,d,c,_=o.sector,p=_.map(n),g={clockwise:-1,counterclockwise:1}[t.direction],m=n(t.rotation),b=function(E){return g*E+m},y=function(E){return(E-m)/g};switch(r){case"linear":l=u=v.identity,c=n,d=T,t.range=v.isFullCircle(p)?[_[0],_[0]+360]:p.map(y).map(T);break;case"category":var M=t._categories.length,h=t.period?Math.max(t.period,M):M;h===0&&(h=1),l=c=function(E){return 2*E*Math.PI/h},u=d=function(E){return E*h/Math.PI/2},t.range=[0,h]}t.c2g=function(E){return b(l(E))},t.g2c=function(E){return u(y(E))},t.t2g=function(E){return b(c(E))},t.g2t=function(E){return d(y(E))}}})(x,f)}}},55012:function(C){"use strict";C.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},36416:function(C){"use strict";function A(n){return n<0?-1:n>0?1:0}function e(n){var T=n[0],x=n[1];if(!isFinite(T)||!isFinite(x))return[1,0];var f=(T+1)*(T+1)+x*x;return[(T*T+x*x-1)/f,2*x/f]}function v(n,T){var x=T[0],f=T[1];return[x*n.radius+n.cx,-f*n.radius+n.cy]}function w(n,T){return T*n.radius}C.exports={smith:e,reactanceArc:function(n,T,x,f){var s=v(n,e([x,T])),t=s[0],o=s[1],r=v(n,e([f,T])),i=r[0],a=r[1];if(T===0)return["M"+t+","+o,"L"+i+","+a].join(" ");var u=w(n,1/Math.abs(T));return["M"+t+","+o,"A"+u+","+u+" 0 0,"+(T<0?1:0)+" "+i+","+a].join(" ")},resistanceArc:function(n,T,x,f){var s=w(n,1/(T+1)),t=v(n,e([T,x])),o=t[0],r=t[1],i=v(n,e([T,f])),a=i[0],u=i[1];if(A(x)!==A(f)){var l=v(n,e([T,0]));return["M"+o+","+r,"A"+s+","+s+" 0 0,"+(0<x?0:1)+" "+l[0]+","+l[1],"A"+s+","+s+" 0 0,"+(f<0?0:1)+a+","+u].join(" ")}return["M"+o+","+r,"A"+s+","+s+" 0 0,"+(f<x?0:1)+" "+a+","+u].join(" ")},smithTransform:v}},47788:function(C,A,e){"use strict";var v=e(84888).KY,w=e(3400).counterRegex,n=e(62400),T=e(55012),x=T.attr,f=T.name,s=w(f),t={};t[x]={valType:"subplotid",dflt:f,editType:"calc"},C.exports={attr:x,name:f,idRoot:f,idRegex:s,attrRegex:s,attributes:t,layoutAttributes:e(6183),supplyLayoutDefaults:e(22836),plot:function(o){for(var r=o._fullLayout,i=o.calcdata,a=r._subplots[f],u=0;u<a.length;u++){var l=a[u],d=v(i,f,l),c=r[l]._subplot;c||(c=n(o,l,!0),r[l]._subplot=c),c.plot(d,r,o._promises)}},clean:function(o,r,i,a){for(var u=a._subplots[f]||[],l=0;l<u.length;l++){var d=u[l],c=a[d]._subplot;if(!r[d]&&c)for(var _ in c.framework.remove(),c.clipPaths)c.clipPaths[_].remove()}},toSVG:e(57952).toSVG}},6183:function(C,A,e){"use strict";var v=e(22548),w=e(94724),n=e(86968).u,T=e(3400).extendFlat,x=e(67824).overrideAll,f=x({color:w.color,showline:T({},w.showline,{dflt:!0}),linecolor:w.linecolor,linewidth:w.linewidth,showgrid:T({},w.showgrid,{dflt:!0}),gridcolor:w.gridcolor,gridwidth:w.gridwidth,griddash:w.griddash},"plot","from-root"),s=x({ticklen:w.ticklen,tickwidth:T({},w.tickwidth,{dflt:2}),tickcolor:w.tickcolor,showticklabels:w.showticklabels,labelalias:w.labelalias,showtickprefix:w.showtickprefix,tickprefix:w.tickprefix,showticksuffix:w.showticksuffix,ticksuffix:w.ticksuffix,tickfont:w.tickfont,tickformat:w.tickformat,hoverformat:w.hoverformat,layer:w.layer},"plot","from-root"),t=T({visible:T({},w.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:T({},w.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},f,s),o=T({visible:T({},w.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:w.ticks,editType:"calc"},f,s);C.exports={domain:n({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:v.background},realaxis:t,imaginaryaxis:o,editType:"calc"}},22836:function(C,A,e){"use strict";var v,w,n,T=e(3400),x=e(76308),f=e(31780),s=e(168),t=e(84888).op,o=e(42568),r=e(95936),i=e(42136),a=e(78344),u=e(6183),l=e(55012),d=l.axisNames,c=(v=function(p){return T.isTypedArray(p)&&(p=Array.from(p)),p.slice().reverse().map(function(g){return-g}).concat([0]).concat(p)},w=String,n={},function(p){var g=w?w(p):p;if(g in n)return n[g];var m=v(p);return n[g]=m,m});function _(p,g,m,b){var y=m("bgcolor");b.bgColor=x.combine(y,b.paper_bgcolor);var M,h=t(b.fullData,l.name,b.id),E=b.layoutOut;function k(H,U){return m(M+"."+H,U)}for(var D=0;D<d.length;D++){M=d[D],T.isPlainObject(p[M])||(p[M]={});var P=p[M],L=f.newContainer(g,M);L._id=L._name=M,L._attr=b.id+"."+M,L._traceIndices=h.map(function(H){return H._expandedIndex});var O=k("visible");if(L.type="linear",a(L,E),o(P,L,k,L.type),O){var N,V,F,j,Z=M==="realaxis";Z&&k("side"),Z?k("tickvals"):k("tickvals",c(g.realaxis.tickvals||u.realaxis.tickvals.dflt)),T.isTypedArray(L.tickvals)&&(L.tickvals=Array.from(L.tickvals));var z=b.font||{};O&&(V=(N=k("color"))===P.color?N:z.color,F=z.size,j=z.family),r(P,L,k,L.type,{noAutotickangles:!0,noTicklabelstep:!0,noAng:!Z,noExp:!0,font:{color:V,size:F,family:j}}),T.coerce2(p,g,u,M+".ticklen"),T.coerce2(p,g,u,M+".tickwidth"),T.coerce2(p,g,u,M+".tickcolor",g.color),k("ticks")||(delete g[M].ticklen,delete g[M].tickwidth,delete g[M].tickcolor),i(P,L,k,{dfltColor:N,bgColor:b.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:u[M]}),k("layer")}k("hoverformat"),delete L.type,L._input=P}}C.exports=function(p,g,m){s(p,g,m,{noUirevision:!0,type:l.name,attributes:u,handleDefaults:_,font:g.font,paper_bgcolor:g.paper_bgcolor,fullData:m,layoutOut:g})}},168:function(C,A,e){"use strict";var v=e(3400),w=e(31780),n=e(86968).Q;C.exports=function(T,x,f,s){var t,o,r=s.type,i=s.attributes,a=s.handleDefaults,u=s.partition||"x",l=x._subplots[r],d=l.length,c=d&&l[0].replace(/\d+$/,"");function _(b,y){return v.coerce(t,o,i,b,y)}for(var p=0;p<d;p++){var g=l[p];t=T[g]?T[g]:T[g]={},o=w.newContainer(x,g,c),s.noUirevision||_("uirevision",x.uirevision);var m={};m[u]=[p/d,(p+1)/d],n(o,x,_,m),s.id=g,a(t,o,_,s)}}},21776:function(C,A,e){"use strict";var v=e(26880);function w(n){var T=n.description?" "+n.description:"",x=n.keys||[];if(x.length>0){for(var f=[],s=0;s<x.length;s++)f[s]="`"+x[s]+"`";T+="Finally, the template string has access to ",T=x.length===1?T+"variable "+f[0]:T+"variables "+f.slice(0,-1).join(", ")+" and "+f.slice(-1)+"."}return T}v.FORMAT_LINK,v.DATE_FORMAT_LINK,A.Ks=function(n,T){n=n||{},w(T=T||{});var x={valType:"string",dflt:"",editType:n.editType||"none"};return n.arrayOk!==!1&&(x.arrayOk=!0),x},A.Gw=function(n,T){n=n||{},w(T=T||{});var x={valType:"string",dflt:"",editType:n.editType||"calc"};return n.arrayOk!==!1&&(x.arrayOk=!0),x},A.ye=function(n,T){return T=T||{},(n=n||{}).newshape,w(T),{valType:"string",dflt:"",editType:n.editType||"arraydraw"}}},19352:function(C,A,e){"use strict";var v=e(24696),w=e(84888).KY,n=e(3400).counterRegex,T="ternary";A.name=T;var x=A.attr="subplot";A.idRoot=T,A.idRegex=A.attrRegex=n(T),(A.attributes={})[x]={valType:"subplotid",dflt:"ternary",editType:"calc"},A.layoutAttributes=e(86379),A.supplyLayoutDefaults=e(38536),A.plot=function(f){for(var s=f._fullLayout,t=f.calcdata,o=s._subplots[T],r=0;r<o.length;r++){var i=o[r],a=w(t,T,i),u=s[i]._subplot;u||(u=new v({id:i,graphDiv:f,container:s._ternarylayer.node()},s),s[i]._subplot=u),u.plot(a,s,f._promises)}},A.clean=function(f,s,t,o){for(var r=o._subplots[T]||[],i=0;i<r.length;i++){var a=r[i],u=o[a]._subplot;!s[a]&&u&&(u.plotContainer.remove(),u.clipDef.remove(),u.clipDefRelative.remove(),u.layers["a-title"].remove(),u.layers["b-title"].remove(),u.layers["c-title"].remove())}}},86379:function(C,A,e){"use strict";var v=e(22548),w=e(86968).u,n=e(94724),T=e(67824).overrideAll,x=e(92880).extendFlat,f={title:{text:n.title.text,font:n.title.font},color:n.color,tickmode:n.minor.tickmode,nticks:x({},n.nticks,{dflt:6,min:1}),tick0:n.tick0,dtick:n.dtick,tickvals:n.tickvals,ticktext:n.ticktext,ticks:n.ticks,ticklen:n.ticklen,tickwidth:n.tickwidth,tickcolor:n.tickcolor,ticklabelstep:n.ticklabelstep,showticklabels:n.showticklabels,labelalias:n.labelalias,showtickprefix:n.showtickprefix,tickprefix:n.tickprefix,showticksuffix:n.showticksuffix,ticksuffix:n.ticksuffix,showexponent:n.showexponent,exponentformat:n.exponentformat,minexponent:n.minexponent,separatethousands:n.separatethousands,tickfont:n.tickfont,tickangle:n.tickangle,tickformat:n.tickformat,tickformatstops:n.tickformatstops,hoverformat:n.hoverformat,showline:x({},n.showline,{dflt:!0}),linecolor:n.linecolor,linewidth:n.linewidth,showgrid:x({},n.showgrid,{dflt:!0}),gridcolor:n.gridcolor,gridwidth:n.gridwidth,griddash:n.griddash,layer:n.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:n._deprecated.title,titlefont:n._deprecated.titlefont}},s=C.exports=T({domain:w({name:"ternary"}),bgcolor:{valType:"color",dflt:v.background},sum:{valType:"number",dflt:1,min:0},aaxis:f,baxis:f,caxis:f},"plot","from-root");s.uirevision={valType:"any",editType:"none"},s.aaxis.uirevision=s.baxis.uirevision=s.caxis.uirevision={valType:"any",editType:"none"}},38536:function(C,A,e){"use strict";var v=e(76308),w=e(31780),n=e(3400),T=e(168),x=e(95936),f=e(42568),s=e(25404),t=e(26332),o=e(42136),r=e(86379),i=["aaxis","baxis","caxis"];function a(l,d,c,_){var p,g,m,b=c("bgcolor"),y=c("sum");_.bgColor=v.combine(b,_.paper_bgcolor);for(var M=0;M<i.length;M++)g=l[p=i[M]]||{},(m=w.newContainer(d,p))._name=p,u(g,m,_,d);var h=d.aaxis,E=d.baxis,k=d.caxis;h.min+E.min+k.min>=y&&(h.min=0,E.min=0,k.min=0,l.aaxis&&delete l.aaxis.min,l.baxis&&delete l.baxis.min,l.caxis&&delete l.caxis.min)}function u(l,d,c,_){var p=r[d._name];function g(E,k){return n.coerce(l,d,p,E,k)}g("uirevision",_.uirevision),d.type="linear";var m=g("color"),b=m!==p.color.dflt?m:c.font.color,y=d._name.charAt(0).toUpperCase(),M="Component "+y,h=g("title.text",M);d._hovertitle=h===M?h:y,n.coerceFont(g,"title.font",{weight:c.font.weight,style:c.font.style,variant:c.font.variant,family:c.font.family,size:n.bigFont(c.font.size),color:b}),g("min"),t(l,d,g,"linear"),f(l,d,g,"linear"),x(l,d,g,"linear",{noAutotickangles:!0}),s(l,d,g,{outerTicks:!0}),g("showticklabels")&&(n.coerceFont(g,"tickfont",{weight:c.font.weight,style:c.font.style,variant:c.font.variant,family:c.font.family,size:c.font.size,color:b}),g("tickangle"),g("tickformat")),o(l,d,g,{dfltColor:m,bgColor:c.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:p}),g("hoverformat"),g("layer")}C.exports=function(l,d,c){T(l,d,c,{type:"ternary",attributes:r,handleDefaults:a,font:d.font,paper_bgcolor:d.paper_bgcolor})}},24696:function(C,A,e){"use strict";var v=e(33428),w=e(49760),n=e(24040),T=e(3400),x=T.strTranslate,f=T._,s=e(76308),t=e(43616),o=e(78344),r=e(92880).extendFlat,i=e(7316),a=e(54460),u=e(86476),l=e(93024),d=e(72760),c=d.freeMode,_=d.rectMode,p=e(81668),g=e(22676).prepSelect,m=e(22676).selectOnClick,b=e(22676).clearOutline,y=e(22676).clearSelectionsCache,M=e(33816);function h(F,j){this.id=F.id,this.graphDiv=F.graphDiv,this.init(j),this.makeFramework(j),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}C.exports=h;var E=h.prototype;E.init=function(F){this.container=F._ternarylayer,this.defs=F._defs,this.layoutId=F._uid,this.traceHash={},this.layers={}},E.plot=function(F,j){var Z=this,z=j[Z.id],H=j._size;Z._hasClipOnAxisFalse=!1;for(var U=0;U<F.length;U++)if(F[U][0].trace.cliponaxis===!1){Z._hasClipOnAxisFalse=!0;break}Z.updateLayers(z),Z.adjustLayout(z,H),i.generalUpdatePerTraceModule(Z.graphDiv,Z,F,z),Z.layers.plotbg.select("path").call(s.fill,z.bgcolor)},E.makeFramework=function(F){var j=this,Z=j.graphDiv,z=F[j.id],H=j.clipId="clip"+j.layoutId+j.id,U=j.clipIdRelative="clip-relative"+j.layoutId+j.id;j.clipDef=T.ensureSingleById(F._clips,"clipPath",H,function(re){re.append("path").attr("d","M0,0Z")}),j.clipDefRelative=T.ensureSingleById(F._clips,"clipPath",U,function(re){re.append("path").attr("d","M0,0Z")}),j.plotContainer=T.ensureSingle(j.container,"g",j.id),j.updateLayers(z),t.setClipUrl(j.layers.backplot,H,Z),t.setClipUrl(j.layers.grids,H,Z)},E.updateLayers=function(F){var j=this.layers,Z=["draglayer","plotbg","backplot","grids"];F.aaxis.layer==="below traces"&&Z.push("aaxis","aline"),F.baxis.layer==="below traces"&&Z.push("baxis","bline"),F.caxis.layer==="below traces"&&Z.push("caxis","cline"),Z.push("frontplot"),F.aaxis.layer==="above traces"&&Z.push("aaxis","aline"),F.baxis.layer==="above traces"&&Z.push("baxis","bline"),F.caxis.layer==="above traces"&&Z.push("caxis","cline");var z=this.plotContainer.selectAll("g.toplevel").data(Z,String),H=["agrid","bgrid","cgrid"];z.enter().append("g").attr("class",function(U){return"toplevel "+U}).each(function(U){var re=v.select(this);j[U]=re,U==="frontplot"?re.append("g").classed("scatterlayer",!0):U==="backplot"?re.append("g").classed("maplayer",!0):U==="plotbg"?re.append("path").attr("d","M0,0Z"):U==="aline"||U==="bline"||U==="cline"?re.append("path"):U==="grids"&&H.forEach(function(ee){j[ee]=re.append("g").classed("grid "+ee,!0)})}),z.order()};var k=Math.sqrt(4/3);E.adjustLayout=function(F,j){var Z,z,H,U,re,ee,J=this,Q=F.domain,ne=(Q.x[0]+Q.x[1])/2,K=(Q.y[0]+Q.y[1])/2,oe=Q.x[1]-Q.x[0],le=Q.y[1]-Q.y[0],se=oe*j.w,de=le*j.h,be=F.sum,_e=F.aaxis.min,xe=F.baxis.min,ve=F.caxis.min;se>k*de?H=(U=de)*k:U=(H=se)/k,re=oe*H/se,ee=le*U/de,Z=j.l+j.w*ne-H/2,z=j.t+j.h*(1-K)-U/2,J.x0=Z,J.y0=z,J.w=H,J.h=U,J.sum=be,J.xaxis={type:"linear",range:[_e+2*ve-be,be-_e-2*xe],domain:[ne-re/2,ne+re/2],_id:"x"},o(J.xaxis,J.graphDiv._fullLayout),J.xaxis.setScale(),J.xaxis.isPtWithinRange=function(Ie){return Ie.a>=J.aaxis.range[0]&&Ie.a<=J.aaxis.range[1]&&Ie.b>=J.baxis.range[1]&&Ie.b<=J.baxis.range[0]&&Ie.c>=J.caxis.range[1]&&Ie.c<=J.caxis.range[0]},J.yaxis={type:"linear",range:[_e,be-xe-ve],domain:[K-ee/2,K+ee/2],_id:"y"},o(J.yaxis,J.graphDiv._fullLayout),J.yaxis.setScale(),J.yaxis.isPtWithinRange=function(){return!0};var ye=J.yaxis.domain[0],me=J.aaxis=r({},F.aaxis,{range:[_e,be-xe-ve],side:"left",tickangle:(+F.aaxis.tickangle||0)-30,domain:[ye,ye+ee*k],anchor:"free",position:0,_id:"y",_length:H});o(me,J.graphDiv._fullLayout),me.setScale();var Me=J.baxis=r({},F.baxis,{range:[be-_e-ve,xe],side:"bottom",domain:J.xaxis.domain,anchor:"free",position:0,_id:"x",_length:H});o(Me,J.graphDiv._fullLayout),Me.setScale();var Ae=J.caxis=r({},F.caxis,{range:[be-_e-xe,ve],side:"right",tickangle:(+F.caxis.tickangle||0)+30,domain:[ye,ye+ee*k],anchor:"free",position:0,_id:"y",_length:H});o(Ae,J.graphDiv._fullLayout),Ae.setScale();var ce="M"+Z+","+(z+U)+"h"+H+"l-"+H/2+",-"+U+"Z";J.clipDef.select("path").attr("d",ce),J.layers.plotbg.select("path").attr("d",ce);var ae="M0,"+U+"h"+H+"l-"+H/2+",-"+U+"Z";J.clipDefRelative.select("path").attr("d",ae);var pe=x(Z,z);J.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",pe),J.clipDefRelative.select("path").attr("transform",null);var De=x(Z-Me._offset,z+U);J.layers.baxis.attr("transform",De),J.layers.bgrid.attr("transform",De);var ke=x(Z+H/2,z)+"rotate(30)"+x(0,-me._offset);J.layers.aaxis.attr("transform",ke),J.layers.agrid.attr("transform",ke);var Ee=x(Z+H/2,z)+"rotate(-30)"+x(0,-Ae._offset);J.layers.caxis.attr("transform",Ee),J.layers.cgrid.attr("transform",Ee),J.drawAxes(!0),J.layers.aline.select("path").attr("d",me.showline?"M"+Z+","+(z+U)+"l"+H/2+",-"+U:"M0,0").call(s.stroke,me.linecolor||"#000").style("stroke-width",(me.linewidth||0)+"px"),J.layers.bline.select("path").attr("d",Me.showline?"M"+Z+","+(z+U)+"h"+H:"M0,0").call(s.stroke,Me.linecolor||"#000").style("stroke-width",(Me.linewidth||0)+"px"),J.layers.cline.select("path").attr("d",Ae.showline?"M"+(Z+H/2)+","+z+"l"+H/2+","+U:"M0,0").call(s.stroke,Ae.linecolor||"#000").style("stroke-width",(Ae.linewidth||0)+"px"),J.graphDiv._context.staticPlot||J.initInteractions(),t.setClipUrl(J.layers.frontplot,J._hasClipOnAxisFalse?null:J.clipId,J.graphDiv)},E.drawAxes=function(F){var j=this,Z=j.graphDiv,z=j.id.substr(7)+"title",H=j.layers,U=j.aaxis,re=j.baxis,ee=j.caxis;if(j.drawAx(U),j.drawAx(re),j.drawAx(ee),F){var J=Math.max(U.showticklabels?U.tickfont.size/2:0,(ee.showticklabels?.75*ee.tickfont.size:0)+(ee.ticks==="outside"?.87*ee.ticklen:0)),Q=(re.showticklabels?re.tickfont.size:0)+(re.ticks==="outside"?re.ticklen:0)+3;H["a-title"]=p.draw(Z,"a"+z,{propContainer:U,propName:j.id+".aaxis.title",placeholder:f(Z,"Click to enter Component A title"),attributes:{x:j.x0+j.w/2,y:j.y0-U.title.font.size/3-J,"text-anchor":"middle"}}),H["b-title"]=p.draw(Z,"b"+z,{propContainer:re,propName:j.id+".baxis.title",placeholder:f(Z,"Click to enter Component B title"),attributes:{x:j.x0-Q,y:j.y0+j.h+.83*re.title.font.size+Q,"text-anchor":"middle"}}),H["c-title"]=p.draw(Z,"c"+z,{propContainer:ee,propName:j.id+".caxis.title",placeholder:f(Z,"Click to enter Component C title"),attributes:{x:j.x0+j.w+Q,y:j.y0+j.h+.83*ee.title.font.size+Q,"text-anchor":"middle"}})}},E.drawAx=function(F){var j,Z=this,z=Z.graphDiv,H=F._name,U=H.charAt(0),re=F._id,ee=Z.layers[H],J=U+"tickLayout",Q=(j=F).ticks+String(j.ticklen)+String(j.showticklabels);Z[J]!==Q&&(ee.selectAll("."+re+"tick").remove(),Z[J]=Q),F.setScale();var ne=a.calcTicks(F),K=a.clipEnds(F,ne),oe=a.makeTransTickFn(F),le=a.getTickSigns(F)[2],se=T.deg2rad(30),de=le*(F.linewidth||1)/2,be=le*F.ticklen,_e=Z.w,xe=Z.h,ve=U==="b"?"M0,"+de+"l"+Math.sin(se)*be+","+Math.cos(se)*be:"M"+de+",0l"+Math.cos(se)*be+","+-Math.sin(se)*be,ye={a:"M0,0l"+xe+",-"+_e/2,b:"M0,0l-"+_e/2+",-"+xe,c:"M0,0l-"+xe+","+_e/2}[U];a.drawTicks(z,F,{vals:F.ticks==="inside"?K:ne,layer:ee,path:ve,transFn:oe,crisp:!1}),a.drawGrid(z,F,{vals:K,layer:Z.layers[U+"grid"],path:ye,transFn:oe,crisp:!1}),a.drawLabels(z,F,{vals:ne,layer:ee,transFn:oe,labelFns:a.makeLabelFns(F,0,30)})};var D=M.MINZOOM/2+.87,P="m-0.87,.5h"+D+"v3h-"+(D+5.2)+"l"+(D/2+2.6)+",-"+(.87*D+4.5)+"l2.6,1.5l-"+D/2+","+.87*D+"Z",L="m0.87,.5h-"+D+"v3h"+(D+5.2)+"l-"+(D/2+2.6)+",-"+(.87*D+4.5)+"l-2.6,1.5l"+D/2+","+.87*D+"Z",O="m0,1l"+D/2+","+.87*D+"l2.6,-1.5l-"+(D/2+2.6)+",-"+(.87*D+4.5)+"l-"+(D/2+2.6)+","+(.87*D+4.5)+"l2.6,1.5l"+D/2+",-"+.87*D+"Z",N=!0;function V(F){v.select(F).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}E.clearOutline=function(){y(this.dragOptions),b(this.dragOptions.gd)},E.initInteractions=function(){var F,j,Z,z,H,U,re,ee,J,Q,ne,K,oe=this,le=oe.layers.plotbg.select("path").node(),se=oe.graphDiv,de=se._fullLayout._zoomlayer;function be(ae){var pe={};return pe[oe.id+".aaxis.min"]=ae.a,pe[oe.id+".baxis.min"]=ae.b,pe[oe.id+".caxis.min"]=ae.c,pe}function _e(ae,pe){var De=se._fullLayout.clickmode;V(se),ae===2&&(se.emit("plotly_doubleclick",null),n.call("_guiRelayout",se,be({a:0,b:0,c:0}))),De.indexOf("select")>-1&&ae===1&&m(pe,se,[oe.xaxis],[oe.yaxis],oe.id,oe.dragOptions),De.indexOf("event")>-1&&l.click(se,pe,oe.id)}function xe(ae,pe){return 1-pe/oe.h}function ve(ae,pe){return 1-(ae+(oe.h-pe)/Math.sqrt(3))/oe.w}function ye(ae,pe){return(ae-(oe.h-pe)/Math.sqrt(3))/oe.w}function me(ae,pe){var De=Z+ae*F,ke=z+pe*j,Ee=Math.max(0,Math.min(1,xe(0,z),xe(0,ke))),Ie=Math.max(0,Math.min(1,ve(Z,z),ve(De,ke))),Re=Math.max(0,Math.min(1,ye(Z,z),ye(De,ke))),Ne=(Ee/2+Re)*oe.w,ge=(1-Ee/2-Ie)*oe.w,we=(Ne+ge)/2,Ce=ge-Ne,ze=(1-Ee)*oe.h,Pe=ze-Ce/k;Ce<M.MINZOOM?(re=H,ne.attr("d",J),K.attr("d","M0,0Z")):(re={a:H.a+Ee*U,b:H.b+Ie*U,c:H.c+Re*U},ne.attr("d",J+"M"+Ne+","+ze+"H"+ge+"L"+we+","+Pe+"L"+Ne+","+ze+"Z"),K.attr("d","M"+Z+","+z+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+Ne+","+ze+P+"M"+ge+","+ze+L+"M"+we+","+Pe+O)),Q||(ne.transition().style("fill",ee>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),K.transition().style("opacity",1).duration(200),Q=!0),se.emit("plotly_relayouting",be(re))}function Me(){V(se),re!==H&&(n.call("_guiRelayout",se,be(re)),N&&se.data&&se._context.showTips&&(T.notifier(f(se,"Double-click to zoom back out"),"long"),N=!1))}function Ae(ae,pe){var De=ae/oe.xaxis._m,ke=pe/oe.yaxis._m,Ee=[(re={a:H.a-ke,b:H.b+(De+ke)/2,c:H.c-(De-ke)/2}).a,re.b,re.c].sort(T.sorterAsc),Ie=Ee.indexOf(re.a),Re=Ee.indexOf(re.b),Ne=Ee.indexOf(re.c);Ee[0]<0&&(Ee[1]+Ee[0]/2<0?(Ee[2]+=Ee[0]+Ee[1],Ee[0]=Ee[1]=0):(Ee[2]+=Ee[0]/2,Ee[1]+=Ee[0]/2,Ee[0]=0),re={a:Ee[Ie],b:Ee[Re],c:Ee[Ne]},pe=(H.a-re.a)*oe.yaxis._m,ae=(H.c-re.c-H.b+re.b)*oe.xaxis._m);var ge=x(oe.x0+ae,oe.y0+pe);oe.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",ge);var we=x(-ae,-pe);oe.clipDefRelative.select("path").attr("transform",we),oe.aaxis.range=[re.a,oe.sum-re.b-re.c],oe.baxis.range=[oe.sum-re.a-re.c,re.b],oe.caxis.range=[oe.sum-re.a-re.b,re.c],oe.drawAxes(!1),oe._hasClipOnAxisFalse&&oe.plotContainer.select(".scatterlayer").selectAll(".trace").call(t.hideOutsideRangePoints,oe),se.emit("plotly_relayouting",be(re))}function ce(){n.call("_guiRelayout",se,be(re))}this.dragOptions={element:le,gd:se,plotinfo:{id:oe.id,domain:se._fullLayout[oe.id].domain,xaxis:oe.xaxis,yaxis:oe.yaxis},subplot:oe.id,prepFn:function(ae,pe,De){oe.dragOptions.xaxes=[oe.xaxis],oe.dragOptions.yaxes=[oe.yaxis],F=se._fullLayout._invScaleX,j=se._fullLayout._invScaleY;var ke=oe.dragOptions.dragmode=se._fullLayout.dragmode;c(ke)?oe.dragOptions.minDrag=1:oe.dragOptions.minDrag=void 0,ke==="zoom"?(oe.dragOptions.moveFn=me,oe.dragOptions.clickFn=_e,oe.dragOptions.doneFn=Me,function(Ee,Ie,Re){var Ne=le.getBoundingClientRect();Z=Ie-Ne.left,z=Re-Ne.top,se._fullLayout._calcInverseTransform(se);var ge=se._fullLayout._invTransform,we=T.apply3DTransform(ge)(Z,z);Z=we[0],z=we[1],H={a:oe.aaxis.range[0],b:oe.baxis.range[1],c:oe.caxis.range[1]},re=H,U=oe.aaxis.range[1]-H.a,ee=w(oe.graphDiv._fullLayout[oe.id].bgcolor).getLuminance(),J="M0,"+oe.h+"L"+oe.w/2+", 0L"+oe.w+","+oe.h+"Z",Q=!1,ne=de.append("path").attr("class","zoombox").attr("transform",x(oe.x0,oe.y0)).style({fill:ee>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",J),K=de.append("path").attr("class","zoombox-corners").attr("transform",x(oe.x0,oe.y0)).style({fill:s.background,stroke:s.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),oe.clearOutline(se)}(0,pe,De)):ke==="pan"?(oe.dragOptions.moveFn=Ae,oe.dragOptions.clickFn=_e,oe.dragOptions.doneFn=ce,H={a:oe.aaxis.range[0],b:oe.baxis.range[1],c:oe.caxis.range[1]},re=H,oe.clearOutline(se)):(_(ke)||c(ke))&&g(ae,pe,De,oe.dragOptions,ke)}},le.onmousemove=function(ae){l.hover(se,ae,oe.id),se._fullLayout._lasthover=le,se._fullLayout._hoversubplot=oe.id},le.onmouseout=function(ae){se._dragging||u.unhover(se,ae)},u.init(this.dragOptions)}},24040:function(C,A,e){"use strict";var v=e(24248),w=e(16628),n=e(52416),T=e(63620),x=e(52200).addStyleRule,f=e(92880),s=e(45464),t=e(64859),o=f.extendFlat,r=f.extendDeepAll;function i(m){var b=m.name,y=m.categories,M=m.meta;if(A.modules[b])v.log("Type "+b+" already registered");else{A.subplotsRegistry[m.basePlotModule.name]||function(N){var V=N.name;if(A.subplotsRegistry[V])v.log("Plot type "+V+" already registered.");else for(var F in d(N),A.subplotsRegistry[V]=N,A.componentsRegistry)p(F,N.name)}(m.basePlotModule);for(var h={},E=0;E<y.length;E++)h[y[E]]=!0,A.allCategories[y[E]]=!0;for(var k in A.modules[b]={_module:m,categories:h},M&&Object.keys(M).length&&(A.modules[b].meta=M),A.allTypes.push(b),A.componentsRegistry)c(k,b);m.layoutAttributes&&o(A.traceLayoutAttributes,m.layoutAttributes);var D=m.basePlotModule,P=D.name;if(P==="mapbox"){var L=D.constants.styleRules;for(var O in L)x(".js-plotly-plot .plotly .mapboxgl-"+O,L[O])}P!=="geo"&&P!=="mapbox"||window.PlotlyGeoAssets!==void 0||(window.PlotlyGeoAssets={topojson:{}})}}function a(m){if(typeof m.name!="string")throw new Error("Component module *name* must be a string.");var b=m.name;for(var y in A.componentsRegistry[b]=m,m.layoutAttributes&&(m.layoutAttributes._isLinkedToArray&&n(A.layoutArrayContainers,b),d(m)),A.modules)c(b,y);for(var M in A.subplotsRegistry)p(b,M);for(var h in A.transformsRegistry)_(b,h);m.schema&&m.schema.layout&&r(t,m.schema.layout)}function u(m){if(typeof m.name!="string")throw new Error("Transform module *name* must be a string.");var b="Transform module "+m.name,y=typeof m.transform=="function",M=typeof m.calcTransform=="function";if(!y&&!M)throw new Error(b+" is missing a *transform* or *calcTransform* method.");for(var h in y&&M&&v.log([b+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),T(m.attributes)||v.log(b+" registered without an *attributes* object."),typeof m.supplyDefaults!="function"&&v.log(b+" registered without a *supplyDefaults* method."),A.transformsRegistry[m.name]=m,A.componentsRegistry)_(h,m.name)}function l(m){var b=m.name,y=b.split("-")[0],M=m.dictionary,h=m.format,E=M&&Object.keys(M).length,k=h&&Object.keys(h).length,D=A.localeRegistry,P=D[b];if(P||(D[b]=P={}),y!==b){var L=D[y];L||(D[y]=L={}),E&&L.dictionary===P.dictionary&&(L.dictionary=M),k&&L.format===P.format&&(L.format=h)}E&&(P.dictionary=M),k&&(P.format=h)}function d(m){if(m.layoutAttributes){var b=m.layoutAttributes._arrayAttrRegexps;if(b)for(var y=0;y<b.length;y++)n(A.layoutArrayRegexes,b[y])}}function c(m,b){var y=A.componentsRegistry[m].schema;if(y&&y.traces){var M=y.traces[b];M&&r(A.modules[b]._module.attributes,M)}}function _(m,b){var y=A.componentsRegistry[m].schema;if(y&&y.transforms){var M=y.transforms[b];M&&r(A.transformsRegistry[b].attributes,M)}}function p(m,b){var y=A.componentsRegistry[m].schema;if(y&&y.subplots){var M=A.subplotsRegistry[b],h=M.layoutAttributes,E=M.attr==="subplot"?M.name:M.attr;Array.isArray(E)&&(E=E[0]);var k=y.subplots[E];h&&k&&r(h,k)}}function g(m){return typeof m=="object"&&(m=m.type),m}A.modules={},A.allCategories={},A.allTypes=[],A.subplotsRegistry={},A.transformsRegistry={},A.componentsRegistry={},A.layoutArrayContainers=[],A.layoutArrayRegexes=[],A.traceLayoutAttributes={},A.localeRegistry={},A.apiMethodRegistry={},A.collectableSubplotTypes=null,A.register=function(m){if(A.collectableSubplotTypes=null,!m)throw new Error("No argument passed to Plotly.register.");m&&!Array.isArray(m)&&(m=[m]);for(var b=0;b<m.length;b++){var y=m[b];if(!y)throw new Error("Invalid module was attempted to be registered!");switch(y.moduleType){case"trace":i(y);break;case"transform":u(y);break;case"component":a(y);break;case"locale":l(y);break;case"apiMethod":var M=y.name;A.apiMethodRegistry[M]=y.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},A.getModule=function(m){var b=A.modules[g(m)];return!!b&&b._module},A.traceIs=function(m,b){if((m=g(m))==="various")return!1;var y=A.modules[m];return y||(m&&v.log("Unrecognized trace type "+m+"."),y=A.modules[s.type.dflt]),!!y.categories[b]},A.getTransformIndices=function(m,b){for(var y=[],M=m.transforms||[],h=0;h<M.length;h++)M[h].type===b&&y.push(h);return y},A.hasTransform=function(m,b){for(var y=m.transforms||[],M=0;M<y.length;M++)if(y[M].type===b)return!0;return!1},A.getComponentMethod=function(m,b){var y=A.componentsRegistry[m];return y&&y[b]||w},A.call=function(){var m=arguments[0],b=[].slice.call(arguments,1);return A.apiMethodRegistry[m].apply(null,b)}},91536:function(C,A,e){"use strict";var v=e(24040),w=e(3400),n=w.extendFlat,T=w.extendDeep;function x(f){var s;switch(f){case"themes__thumb":s={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":s={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:s={}}return s}C.exports=function(f,s){var t,o,r=f.data,i=f.layout,a=T([],r),u=T({},i,x(s.tileClass)),l=f._context||{};if(s.width&&(u.width=s.width),s.height&&(u.height=s.height),s.tileClass==="thumbnail"||s.tileClass==="themes__thumb"){u.annotations=[];var d=Object.keys(u);for(t=0;t<d.length;t++)o=d[t],["xaxis","yaxis","zaxis"].indexOf(o.slice(0,5))>-1&&(u[d[t]].title={text:""});for(t=0;t<a.length;t++){var c=a[t];c.showscale=!1,c.marker&&(c.marker.showscale=!1),v.traceIs(c,"pie-like")&&(c.textposition="none")}}if(Array.isArray(s.annotations))for(t=0;t<s.annotations.length;t++)u.annotations.push(s.annotations[t]);var _=Object.keys(u).filter(function(y){return y.match(/^scene\d*$/)});if(_.length){var p={};for(s.tileClass==="thumbnail"&&(p={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),t=0;t<_.length;t++){var g=u[_[t]];g.xaxis||(g.xaxis={}),g.yaxis||(g.yaxis={}),g.zaxis||(g.zaxis={}),n(g.xaxis,p),n(g.yaxis,p),n(g.zaxis,p),g._scene=null}}var m=document.createElement("div");s.tileClass&&(m.className=s.tileClass);var b={gd:m,td:m,layout:u,data:a,config:{staticPlot:s.staticPlot===void 0||s.staticPlot,plotGlPixelRatio:s.plotGlPixelRatio===void 0?2:s.plotGlPixelRatio,displaylogo:s.displaylogo||!1,showLink:s.showLink||!1,showTips:s.showTips||!1,mapboxAccessToken:l.mapboxAccessToken}};return s.setBackground!=="transparent"&&(b.config.setBackground=s.setBackground||"opaque"),b.gd.defaultLayout=x(s.tileClass),b}},39792:function(C,A,e){"use strict";var v=e(3400),w=e(67024),n=e(48616),T=e(81792);C.exports=function(x,f){var s;return v.isPlainObject(x)||(s=v.getGraphDiv(x)),(f=f||{}).format=f.format||"png",f.width=f.width||null,f.height=f.height||null,f.imageDataOnly=!0,new Promise(function(t,o){s&&s._snapshotInProgress&&o(new Error("Snapshotting already in progress.")),v.isIE()&&f.format!=="svg"&&o(new Error(T.MSG_IE_BAD_FORMAT)),s&&(s._snapshotInProgress=!0);var r=w(x,f),i=f.filename||x.fn||"newplot";i+="."+f.format.replace("-","."),r.then(function(a){return s&&(s._snapshotInProgress=!1),n(a,i,f.format)}).then(function(a){t(a)}).catch(function(a){s&&(s._snapshotInProgress=!1),o(a)})})}},48616:function(C,A,e){"use strict";var v=e(3400),w=e(81792);C.exports=function(n,T,x){var f=document.createElement("a"),s="download"in f;return new Promise(function(t,o){var r,i;if(v.isIE())return r=w.createBlob(n,"svg"),window.navigator.msSaveBlob(r,T),r=null,t(T);if(s)return r=w.createBlob(n,x),i=w.createObjectURL(r),f.href=i,f.download=T,document.body.appendChild(f),f.click(),document.body.removeChild(f),w.revokeObjectURL(i),r=null,t(T);if(v.isSafari()){var a=x==="svg"?",":";base64,";return w.octetStream(a+encodeURIComponent(n)),t(T)}o(new Error("download error"))})}},81792:function(C,A,e){"use strict";var v=e(24040);A.getDelay=function(n){return n._has&&(n._has("gl3d")||n._has("gl2d")||n._has("mapbox"))?500:0},A.getRedrawFunc=function(n){return function(){v.getComponentMethod("colorbar","draw")(n)}},A.encodeSVG=function(n){return"data:image/svg+xml,"+encodeURIComponent(n)},A.encodeJSON=function(n){return"data:application/json,"+encodeURIComponent(n)};var w=window.URL||window.webkitURL;A.createObjectURL=function(n){return w.createObjectURL(n)},A.revokeObjectURL=function(n){return w.revokeObjectURL(n)},A.createBlob=function(n,T){if(T==="svg")return new window.Blob([n],{type:"image/svg+xml;charset=utf-8"});if(T==="full-json")return new window.Blob([n],{type:"application/json;charset=utf-8"});var x=function(f){for(var s=f.length,t=new ArrayBuffer(s),o=new Uint8Array(t),r=0;r<s;r++)o[r]=f.charCodeAt(r);return t}(window.atob(n));return new window.Blob([x],{type:"image/"+T})},A.octetStream=function(n){document.location.href="data:application/octet-stream"+n},A.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,A.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},78904:function(C,A,e){"use strict";var v=e(81792),w={getDelay:v.getDelay,getRedrawFunc:v.getRedrawFunc,clone:e(91536),toSVG:e(37164),svgToImg:e(63268),toImage:e(61808),downloadImage:e(39792)};C.exports=w},63268:function(C,A,e){"use strict";var v=e(3400),w=e(61252).EventEmitter,n=e(81792);C.exports=function(T){var x=T.emitter||new w,f=new Promise(function(s,t){var o=window.Image,r=T.svg,i=T.format||"png";if(v.isIE()&&i!=="svg"){var a=new Error(n.MSG_IE_BAD_FORMAT);return t(a),T.promise?f:x.emit("error",a)}var u,l,d=T.canvas,c=T.scale||1,_=T.width||300,p=T.height||150,g=c*_,m=c*p,b=d.getContext("2d",{willReadFrequently:!0}),y=new o;i==="svg"||v.isSafari()?l=n.encodeSVG(r):(u=n.createBlob(r,"svg"),l=n.createObjectURL(u)),d.width=g,d.height=m,y.onload=function(){var M;switch(u=null,n.revokeObjectURL(l),i!=="svg"&&b.drawImage(y,0,0,g,m),i){case"jpeg":M=d.toDataURL("image/jpeg");break;case"png":M=d.toDataURL("image/png");break;case"webp":M=d.toDataURL("image/webp");break;case"svg":M=l;break;default:var h="Image format is not jpeg, png, svg or webp.";if(t(new Error(h)),!T.promise)return x.emit("error",h)}s(M),T.promise||x.emit("success",M)},y.onerror=function(M){if(u=null,n.revokeObjectURL(l),t(M),!T.promise)return x.emit("error",M)},y.src=l});return T.promise?f:x}},61808:function(C,A,e){"use strict";var v=e(61252).EventEmitter,w=e(24040),n=e(3400),T=e(81792),x=e(91536),f=e(37164),s=e(63268);C.exports=function(t,o){var r=new v,i=x(t,{format:"png"}),a=i.gd;a.style.position="absolute",a.style.left="-5000px",document.body.appendChild(a);var u=T.getRedrawFunc(a);return w.call("_doPlot",a,i.data,i.layout,i.config).then(u).then(function(){var l=T.getDelay(a._fullLayout);setTimeout(function(){var d=f(a),c=document.createElement("canvas");c.id=n.randstr(),(r=s({format:o.format,width:a._fullLayout.width,height:a._fullLayout.height,canvas:c,emitter:r,svg:d})).clean=function(){a&&document.body.removeChild(a)}},l)}).catch(function(l){r.emit("error",l)}),r}},37164:function(C,A,e){"use strict";var v=e(33428),w=e(3400),n=e(43616),T=e(76308),x=e(9616),f=/"/g,s="TOBESTRIPPED",t=new RegExp('("'+s+")|("+s+'")',"g");C.exports=function(o,r,i){var a,u=o._fullLayout,l=u._paper,d=u._toppaper,c=u.width,_=u.height;l.insert("rect",":first-child").call(n.setRect,0,0,c,_).call(T.fill,u.paper_bgcolor);var p=u._basePlotModules||[];for(a=0;a<p.length;a++){var g=p[a];g.toSVG&&g.toSVG(o)}if(d){var m=d.node().childNodes,b=Array.prototype.slice.call(m);for(a=0;a<b.length;a++){var y=b[a];y.childNodes.length&&l.node().appendChild(y)}}u._draggers&&u._draggers.remove(),l.node().style.background="",l.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var h=v.select(this);if(this.style.visibility!=="hidden"&&this.style.display!=="none"){h.style({visibility:null,display:null});var E=this.style.fontFamily;E&&E.indexOf('"')!==-1&&h.style("font-family",E.replace(f,s));var k=this.style.fontWeight;k&&k==="normal"&&h.style("font-weight",void 0);var D=this.style.fontStyle;D&&D==="normal"&&h.style("font-style",void 0);var P=this.style.fontVariant;P&&P==="normal"&&h.style("font-variant",void 0)}else h.remove()}),l.selectAll(".gradient_filled,.pattern_filled").each(function(){var h=v.select(this),E=this.style.fill;E&&E.indexOf("url(")!==-1&&h.style("fill",E.replace(f,s));var k=this.style.stroke;k&&k.indexOf("url(")!==-1&&h.style("stroke",k.replace(f,s))}),r!=="pdf"&&r!=="eps"||l.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),l.node().setAttributeNS(x.xmlns,"xmlns",x.svg),l.node().setAttributeNS(x.xmlns,"xmlns:xlink",x.xlink),r==="svg"&&i&&(l.attr("width",i*c),l.attr("height",i*_),l.attr("viewBox","0 0 "+c+" "+_));var M=new window.XMLSerializer().serializeToString(l.node());return M=(M=(M=function(h){var E=v.select("body").append("div").style({display:"none"}).html(""),k=h.replace(/(&[^;]*;)/gi,function(D){return D==="&lt;"?"&#60;":D==="&rt;"?"&#62;":D.indexOf("<")!==-1||D.indexOf(">")!==-1?"":E.html(D).text()});return E.remove(),k}(M)).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(t,"'"),w.isIE()&&(M=(M=(M=M.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),M}},84664:function(C,A,e){"use strict";var v=e(3400);C.exports=function(w,n){for(var T=0;T<w.length;T++)w[T].i=T;v.mergeArray(n.text,w,"tx"),v.mergeArray(n.hovertext,w,"htx");var x=n.marker;if(x){v.mergeArray(x.opacity,w,"mo",!0),v.mergeArray(x.color,w,"mc");var f=x.line;f&&(v.mergeArray(f.color,w,"mlc"),v.mergeArrayCastPositive(f.width,w,"mlw"))}}},20832:function(C,A,e){"use strict";var v=e(52904),w=e(29736).axisHoverFormat,n=e(21776).Ks,T=e(21776).Gw,x=e(49084),f=e(25376),s=e(78048),t=e(98192).c,o=e(92880).extendFlat,r=f({editType:"calc",arrayOk:!0,colorEditType:"style"}),i=o({},v.marker.line.width,{dflt:0}),a=o({width:i,editType:"calc"},x("marker.line")),u=o({line:a,editType:"calc"},x("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:t,cornerradius:{valType:"any",editType:"calc"}});C.exports={x:v.x,x0:v.x0,dx:v.dx,y:v.y,y0:v.y0,dy:v.dy,xperiod:v.xperiod,yperiod:v.yperiod,xperiod0:v.xperiod0,yperiod0:v.yperiod0,xperiodalignment:v.xperiodalignment,yperiodalignment:v.yperiodalignment,xhoverformat:w("x"),yhoverformat:w("y"),text:v.text,texttemplate:T({editType:"plot"},{keys:s.eventDataKeys}),hovertext:v.hovertext,hovertemplate:n({},{keys:s.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:o({},r,{}),insidetextfont:o({},r,{}),outsidetextfont:o({},r,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:o({},v.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:u,offsetgroup:v.offsetgroup,alignmentgroup:v.alignmentgroup,selected:{marker:{opacity:v.selected.marker.opacity,color:v.selected.marker.color,editType:"style"},textfont:v.selected.textfont,editType:"style"},unselected:{marker:{opacity:v.unselected.marker.opacity,color:v.unselected.marker.color,editType:"style"},textfont:v.unselected.textfont,editType:"style"},zorder:v.zorder,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},71820:function(C,A,e){"use strict";var v=e(54460),w=e(1220),n=e(94288).hasColorscale,T=e(47128),x=e(84664),f=e(4500);C.exports=function(s,t){var o,r,i,a,u,l,d=v.getFromId(s,t.xaxis||"x"),c=v.getFromId(s,t.yaxis||"y"),_={msUTC:!(!t.base&&t.base!==0)};t.orientation==="h"?(o=d.makeCalcdata(t,"x",_),i=c.makeCalcdata(t,"y"),a=w(t,c,"y",i),u=!!t.yperiodalignment,l="y"):(o=c.makeCalcdata(t,"y",_),i=d.makeCalcdata(t,"x"),a=w(t,d,"x",i),u=!!t.xperiodalignment,l="x"),r=a.vals;for(var p=Math.min(r.length,o.length),g=new Array(p),m=0;m<p;m++)g[m]={p:r[m],s:o[m]},u&&(g[m].orig_p=i[m],g[m][l+"End"]=a.ends[m],g[m][l+"Start"]=a.starts[m]),t.ids&&(g[m].id=String(t.ids[m]));return n(t,"marker")&&T(s,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),n(t,"marker.line")&&T(s,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),x(g,t),f(g,t),g}},78048:function(C){"use strict";C.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},96376:function(C,A,e){"use strict";var v=e(38248),w=e(3400).isArrayOrTypedArray,n=e(39032).BADNUM,T=e(24040),x=e(54460),f=e(71888).getAxisGroup,s=e(72592);function t(p,g,m,b,y){if(b.length){var M,h,E,k;switch(function(D,P){var L,O;for(L=0;L<P.length;L++){var N,V=P[L],F=V[0].trace,j=F.type==="funnel"?F._base:F.base,Z=F.orientation==="h"?F.xcalendar:F.ycalendar,z=D.type==="category"||D.type==="multicategory"?function(){return null}:D.d2c;if(w(j)){for(O=0;O<Math.min(j.length,V.length);O++)N=z(j[O],0,Z),v(N)?(V[O].b=+N,V[O].hasB=1):V[O].b=0;for(;O<V.length;O++)V[O].b=0}else{N=z(j,0,Z);var H=v(N);for(N=H?N:0,O=0;O<V.length;O++)V[O].b=N,H&&(V[O].hasB=1)}}}(m,b),y.mode){case"overlay":o(g,m,b,y);break;case"group":for(M=[],h=[],E=0;E<b.length;E++)(k=b[E])[0].trace.offset===void 0?h.push(k):M.push(k);h.length&&function(D,P,L,O,N){var V=new s(O,{posAxis:P,sepNegVal:!1,overlapNoMerge:!N.norm});(function(F,j,Z,z){for(var H=F._fullLayout,U=Z.positions,re=Z.distinctPositions,ee=Z.minDiff,J=Z.traces,Q=J.length,ne=U.length!==re.length,K=ee*(1-z.gap),oe=f(H,j._id)+J[0][0].trace.orientation,le=H._alignmentOpts[oe]||{},se=0;se<Q;se++){var de,be,_e=J[se],xe=_e[0].trace,ve=le[xe.alignmentgroup]||{},ye=Object.keys(ve.offsetGroups||{}).length,me=(de=ye?K/ye:ne?K/Q:K)*(1-(z.groupgap||0));be=ye?((2*xe._offsetIndex+1-ye)*de-me)/2:ne?((2*se+1-Q)*de-me)/2:-me/2;var Me=_e[0].t;Me.barwidth=me,Me.poffset=be,Me.bargroupwidth=K,Me.bardelta=ee}Z.binWidth=J[0][0].t.barwidth/100,i(Z),a(j,Z),u(j,Z,ne)})(D,P,V,N),function(F,j){for(var Z=F.traces,z=0;z<Z.length;z++){var H=Z[z];if(H[0].trace.base===void 0)for(var U=new s([H],{posAxis:j,sepNegVal:!0,overlapNoMerge:!0}),re=0;re<H.length;re++){var ee=H[re];if(ee.p!==n){var J=U.put(ee.p,ee.b+ee.s);J&&(ee.b=J)}}}}(V,P),N.norm?(d(V),c(L,V,N)):l(L,V)}(p,g,m,h,y),M.length&&o(g,m,M,y);break;case"stack":case"relative":for(M=[],h=[],E=0;E<b.length;E++)(k=b[E])[0].trace.base===void 0?h.push(k):M.push(k);(function(D){if(!(D.length<2)){var P,L,O,N,V,F;for(P=0;P<D.length&&(N=(L=D[P][0].trace).marker?L.marker.cornerradius:void 0)===void 0;P++);if(N!==void 0)for(V=v(N)?+N:+N.slice(0,-1),F=v(N)?"px":"%",P=0;P<D.length;P++)(O=D[P][0].t).cornerradiusvalue=V,O.cornerradiusform=F}})(h),h.length&&function(D,P,L,O,N){var V=new s(O,{posAxis:P,sepNegVal:N.mode==="relative",overlapNoMerge:!(N.norm||N.mode==="stack"||N.mode==="relative")});r(P,V,N),function(H,U,re){var ee,J,Q,ne,K,oe,le=_(H),se=U.traces;for(ne=0;ne<se.length;ne++)if((J=(ee=se[ne])[0].trace).type==="funnel")for(K=0;K<ee.length;K++)(oe=ee[K]).s!==n&&U.put(oe.p,-.5*oe.s);for(ne=0;ne<se.length;ne++){Q=(J=(ee=se[ne])[0].trace).type==="funnel";var de=[];for(K=0;K<ee.length;K++)if((oe=ee[K]).s!==n){var be;be=Q?oe.s:oe.s+oe.b;var _e=U.put(oe.p,be),xe=_e+be;oe.b=_e,oe[le]=xe,re.norm||(de.push(xe),oe.hasB&&de.push(_e))}re.norm||(J._extremes[H._id]=x.findExtremes(H,de,{tozero:!0,padded:!0}))}}(L,V,N);for(var F=0;F<O.length;F++)for(var j=O[F],Z=0;Z<j.length;Z++){var z=j[Z];z.s!==n&&z.b+z.s===V.get(z.p,z.s)&&(z._outmost=!0)}N.norm&&c(L,V,N)}(0,g,m,h,y),M.length&&o(g,m,M,y)}(function(D){var P,L,O,N,V,F,j;for(P=0;P<D.length;P++)O=(L=D[P])[0].trace,(N=L[0].t).cornerradiusvalue===void 0&&(V=O.marker?O.marker.cornerradius:void 0)!==void 0&&(F=v(V)?+V:+V.slice(0,-1),j=v(V)?"px":"%",N.cornerradiusvalue=F,N.cornerradiusform=j)})(b),function(D,P){var L,O,N,V=_(P),F={},j=1/0,Z=-1/0;for(L=0;L<D.length;L++)for(N=D[L],O=0;O<N.length;O++){var z=N[O].p;v(z)&&(j=Math.min(j,z),Z=Math.max(Z,z))}var H=1e4/(Z-j),U=F.round=function(xe){return String(Math.round(H*(xe-j)))},re={},ee={},J=D.some(function(xe){var ve=xe[0].trace;return"marker"in ve&&ve.marker.cornerradius});for(L=0;L<D.length;L++){(N=D[L])[0].t.extents=F;var Q=N[0].t.poffset,ne=w(Q);for(O=0;O<N.length;O++){var K=N[O],oe=K[V]-K.w/2;if(v(oe)){var le=K[V]+K.w/2,se=U(K.p);F[se]?F[se]=[Math.min(oe,F[se][0]),Math.max(le,F[se][1])]:F[se]=[oe,le]}if(K.p0=K.p+(ne?Q[O]:Q),K.p1=K.p0+K.w,K.s0=K.b,K.s1=K.s0+K.s,J){var de=Math.min(K.s0,K.s1)||0,be=Math.max(K.s0,K.s1)||0,_e=K[V];re[_e]=_e in re?Math.min(re[_e],de):de,ee[_e]=_e in ee?Math.max(ee[_e],be):be}}}J&&function(xe,ve,ye,me){for(var Me=_(me),Ae=0;Ae<xe.length;Ae++)for(var ce=xe[Ae],ae=0;ae<ce.length;ae++){var pe=ce[ae],De=pe[Me];pe._sMin=ve[De],pe._sMax=ye[De]}}(D,re,ee,P)}(b,g)}}function o(p,g,m,b){for(var y=0;y<m.length;y++){var M=m[y],h=new s([M],{posAxis:p,sepNegVal:!1,overlapNoMerge:!b.norm});r(p,h,b),b.norm?(d(h),c(g,h,b)):l(g,h)}}function r(p,g,m){for(var b=g.minDiff,y=g.traces,M=b*(1-m.gap),h=M*(1-(m.groupgap||0)),E=-h/2,k=0;k<y.length;k++){var D=y[k][0].t;D.barwidth=h,D.poffset=E,D.bargroupwidth=M,D.bardelta=b}g.binWidth=y[0][0].t.barwidth/100,i(g),a(p,g),u(p,g)}function i(p){var g,m,b=p.traces;for(g=0;g<b.length;g++){var y,M=b[g],h=M[0],E=h.trace,k=h.t,D=E._offset||E.offset,P=k.poffset;if(w(D)){for(y=Array.prototype.slice.call(D,0,M.length),m=0;m<y.length;m++)v(y[m])||(y[m]=P);for(m=y.length;m<M.length;m++)y.push(P);k.poffset=y}else D!==void 0&&(k.poffset=D);var L=E._width||E.width,O=k.barwidth;if(w(L)){var N=Array.prototype.slice.call(L,0,M.length);for(m=0;m<N.length;m++)v(N[m])||(N[m]=O);for(m=N.length;m<M.length;m++)N.push(O);if(k.barwidth=N,D===void 0){for(y=[],m=0;m<M.length;m++)y.push(P+(O-N[m])/2);k.poffset=y}}else L!==void 0&&(k.barwidth=L,D===void 0&&(k.poffset=P+(O-L)/2))}}function a(p,g){for(var m=g.traces,b=_(p),y=0;y<m.length;y++)for(var M=m[y],h=M[0].t,E=h.poffset,k=w(E),D=h.barwidth,P=w(D),L=0;L<M.length;L++){var O=M[L],N=O.w=P?D[L]:D;O.p===void 0&&(O.p=O[b],O["orig_"+b]=O[b]);var V=(k?E[L]:E)+N/2;O[b]=O.p+V}}function u(p,g,m){var b=g.traces,y=g.minDiff/2;x.minDtick(p,g.minDiff,g.distinctPositions[0],m);for(var M=0;M<b.length;M++){var h,E,k,D,P=b[M],L=P[0],O=L.trace,N=[];for(D=0;D<P.length;D++)E=(h=P[D]).p-y,k=h.p+y,N.push(E,k);if(O.width||O.offset){var V=L.t,F=V.poffset,j=V.barwidth,Z=w(F),z=w(j);for(D=0;D<P.length;D++){h=P[D];var H=Z?F[D]:F,U=z?j[D]:j;k=(E=h.p+H)+U,N.push(E,k)}}O._extremes[p._id]=x.findExtremes(p,N,{padded:!1})}}function l(p,g){for(var m=g.traces,b=_(p),y=0;y<m.length;y++){for(var M=m[y],h=M[0].trace,E=h.type==="scatter",k=h.orientation==="v",D=[],P=!1,L=0;L<M.length;L++){var O=M[L],N=E?0:O.b,V=E?k?O.y:O.x:N+O.s;O[b]=V,D.push(V),O.hasB&&D.push(N),O.hasB&&O.b||(P=!0)}h._extremes[p._id]=x.findExtremes(p,D,{tozero:P,padded:!0})}}function d(p){for(var g=p.traces,m=0;m<g.length;m++)for(var b=g[m],y=0;y<b.length;y++){var M=b[y];M.s!==n&&p.put(M.p,M.b+M.s)}}function c(p,g,m){var b=g.traces,y=_(p),M=m.norm==="fraction"?1:100,h=M/1e9,E=p.l2c(p.c2l(0)),k=m.mode==="stack"?M:E;function D(re){return v(p.c2l(re))&&(re<E-h||re>k+h||!v(E))}for(var P=0;P<b.length;P++){for(var L=b[P],O=L[0].trace,N=[],V=!1,F=!1,j=0;j<L.length;j++){var Z=L[j];if(Z.s!==n){var z=Math.abs(M/g.get(Z.p,Z.s));Z.b*=z,Z.s*=z;var H=Z.b,U=H+Z.s;Z[y]=U,N.push(U),F=F||D(U),Z.hasB&&(N.push(H),F=F||D(H)),Z.hasB&&Z.b||(V=!0)}}O._extremes[p._id]=x.findExtremes(p,N,{tozero:V,padded:F})}}function _(p){return p._id.charAt(0)}C.exports={crossTraceCalc:function(p,g){for(var m=g.xaxis,b=g.yaxis,y=p._fullLayout,M=p._fullData,h=p.calcdata,E=[],k=[],D=0;D<M.length;D++){var P=M[D];if(P.visible===!0&&T.traceIs(P,"bar")&&P.xaxis===m._id&&P.yaxis===b._id&&(P.orientation==="h"?E.push(h[D]):k.push(h[D]),P._computePh))for(var L=p.calcdata[D],O=0;O<L.length;O++)typeof L[O].ph0=="function"&&(L[O].ph0=L[O].ph0()),typeof L[O].ph1=="function"&&(L[O].ph1=L[O].ph1())}var N={xCat:m.type==="category"||m.type==="multicategory",yCat:b.type==="category"||b.type==="multicategory",mode:y.barmode,norm:y.barnorm,gap:y.bargap,groupgap:y.bargroupgap};t(p,m,b,k,N),t(p,b,m,E,N)},setGroupPositions:t}},31508:function(C,A,e){"use strict";var v=e(38248),w=e(3400),n=e(76308),T=e(24040),x=e(43980),f=e(31147),s=e(55592),t=e(20011),o=e(20832),r=w.coerceFont;function i(u){if(v(u)){if((u=+u)>=0)return u}else if(typeof u=="string"&&(u=u.trim()).slice(-1)==="%"&&v(u.slice(0,-1))&&(u=+u.slice(0,-1))>=0)return u+"%"}function a(u,l,d,c,_,p){var g=(p=p||{}).moduleHasSelected!==!1,m=p.moduleHasUnselected!==!1,b=p.moduleHasConstrain!==!1,y=p.moduleHasCliponaxis!==!1,M=p.moduleHasTextangle!==!1,h=p.moduleHasInsideanchor!==!1,E=!!p.hasPathbar,k=Array.isArray(_)||_==="auto",D=k||_==="inside",P=k||_==="outside";if(D||P){var L=r(c,"textfont",d.font),O=w.extendFlat({},L),N=!(u.textfont&&u.textfont.color);if(N&&delete O.color,r(c,"insidetextfont",O),E){var V=w.extendFlat({},L);N&&delete V.color,r(c,"pathbar.textfont",V)}P&&r(c,"outsidetextfont",L),g&&c("selected.textfont.color"),m&&c("unselected.textfont.color"),b&&c("constraintext"),y&&c("cliponaxis"),M&&c("textangle"),c("texttemplate")}D&&h&&c("insidetextanchor")}C.exports={supplyDefaults:function(u,l,d,c){function _(b,y){return w.coerce(u,l,o,b,y)}if(x(u,l,c,_)){f(u,l,c,_),_("xhoverformat"),_("yhoverformat"),_("zorder"),_("orientation",l.x&&!l.y?"h":"v"),_("base"),_("offset"),_("width"),_("text"),_("hovertext"),_("hovertemplate");var p=_("textposition");a(u,0,c,_,p,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),s(u,l,_,d,c);var g=(l.marker.line||{}).color,m=T.getComponentMethod("errorbars","supplyDefaults");m(u,l,g||n.defaultLine,{axis:"y"}),m(u,l,g||n.defaultLine,{axis:"x",inherit:"y"}),w.coerceSelectionMarkerOpacity(l,_)}else l.visible=!1},crossTraceDefaults:function(u,l){var d,c;function _(m,b){return w.coerce(c._input,c,o,m,b)}for(var p=0;p<u.length;p++)if((c=u[p]).type==="bar"){d=c._input;var g=_("marker.cornerradius",l.barcornerradius);c.marker&&(c.marker.cornerradius=i(g)),l.barmode==="group"&&t(d,c,l,_)}},handleText:a,validateCornerradius:i}},52160:function(C){"use strict";C.exports=function(A,e,v){return A.x="xVal"in e?e.xVal:e.x,A.y="yVal"in e?e.yVal:e.y,e.xa&&(A.xaxis=e.xa),e.ya&&(A.yaxis=e.ya),v.orientation==="h"?(A.label=A.y,A.value=A.x):(A.label=A.x,A.value=A.y),A}},60444:function(C,A,e){"use strict";var v=e(38248),w=e(49760),n=e(3400).isArrayOrTypedArray;A.coerceString=function(T,x,f){if(typeof x=="string"){if(x||!T.noBlank)return x}else if((typeof x=="number"||x===!0)&&!T.strict)return String(x);return f!==void 0?f:T.dflt},A.coerceNumber=function(T,x,f){if(v(x)){x=+x;var s=T.min,t=T.max;if(!(s!==void 0&&x<s||t!==void 0&&x>t))return x}return f!==void 0?f:T.dflt},A.coerceColor=function(T,x,f){return w(x).isValid()?x:f!==void 0?f:T.dflt},A.coerceEnumerated=function(T,x,f){return T.coerceNumber&&(x=+x),T.values.indexOf(x)!==-1?x:f!==void 0?f:T.dflt},A.getValue=function(T,x){var f;return n(T)?x<T.length&&(f=T[x]):f=T,f},A.getLineWidth=function(T,x){return 0<x.mlw?x.mlw:n(T.marker.line.width)?0:T.marker.line.width}},63400:function(C,A,e){"use strict";var v=e(93024),w=e(24040),n=e(76308),T=e(3400).fillText,x=e(60444).getLineWidth,f=e(54460).hoverLabelText,s=e(39032).BADNUM;function t(r,i,a,u,l){var d,c,_,p,g,m,b,y=r.cd,M=y[0].trace,h=y[0].t,E=u==="closest",k=M.type==="waterfall",D=r.maxHoverDistance,P=r.maxSpikeDistance;M.orientation==="h"?(d=a,c=i,_="y",p="x",g=ee,m=U):(d=i,c=a,_="x",p="y",m=ee,g=U);var L=M[_+"period"],O=E||L;function N(de){return F(de,-1)}function V(de){return F(de,1)}function F(de,be){var _e=de.w;return de[_]+be*_e/2}function j(de){return de[_+"End"]-de[_+"Start"]}var Z=E?N:L?function(de){return de.p-j(de)/2}:function(de){return Math.min(N(de),de.p-h.bardelta/2)},z=E?V:L?function(de){return de.p+j(de)/2}:function(de){return Math.max(V(de),de.p+h.bardelta/2)};function H(de,be,_e){return l.finiteRange&&(_e=0),v.inbox(de-d,be-d,_e+Math.min(1,Math.abs(be-de)/b)-1)}function U(de){return H(Z(de),z(de),D)}function re(de){var be=de[p];if(k){var _e=Math.abs(de.rawS)||0;c>0?be+=_e:c<0&&(be-=_e)}return be}function ee(de){var be=c,_e=de.b,xe=re(de);return v.inbox(_e-be,xe-be,D+(xe-be)/(xe-_e)-1)}var J=r[_+"a"],Q=r[p+"a"];b=Math.abs(J.r2c(J.range[1])-J.r2c(J.range[0]));var ne=v.getDistanceFunction(u,g,m,function(de){return(g(de)+m(de))/2});if(v.getClosest(y,ne,r),r.index!==!1&&y[r.index].p!==s){O||(Z=function(de){return Math.min(N(de),de.p-h.bargroupwidth/2)},z=function(de){return Math.max(V(de),de.p+h.bargroupwidth/2)});var K=y[r.index],oe=M.base?K.b+K.s:K.s;r[p+"0"]=r[p+"1"]=Q.c2p(K[p],!0),r[p+"LabelVal"]=oe;var le=h.extents[h.extents.round(K.p)];r[_+"0"]=J.c2p(E?Z(K):le[0],!0),r[_+"1"]=J.c2p(E?z(K):le[1],!0);var se=K.orig_p!==void 0;return r[_+"LabelVal"]=se?K.orig_p:K.p,r.labelLabel=f(J,r[_+"LabelVal"],M[_+"hoverformat"]),r.valueLabel=f(Q,r[p+"LabelVal"],M[p+"hoverformat"]),r.baseLabel=f(Q,K.b,M[p+"hoverformat"]),r.spikeDistance=(function(de){var be=c,_e=de.b,xe=re(de);return v.inbox(_e-be,xe-be,P+(xe-be)/(xe-_e)-1)}(K)+function(de){return H(N(de),V(de),P)}(K))/2,r[_+"Spike"]=J.c2p(K.p,!0),T(K,M,r),r.hovertemplate=M.hovertemplate,r}}function o(r,i){var a=i.mcc||r.marker.color,u=i.mlcc||r.marker.line.color,l=x(r,i);return n.opacity(a)?a:n.opacity(u)&&l?u:void 0}C.exports={hoverPoints:function(r,i,a,u,l){var d=t(r,i,a,u,l);if(d){var c=d.cd,_=c[0].trace,p=c[d.index];return d.color=o(_,p),w.getComponentMethod("errorbars","hoverInfo")(p,_,d),[d]}},hoverOnBars:t,getTraceColor:o}},51132:function(C,A,e){"use strict";C.exports={attributes:e(20832),layoutAttributes:e(39324),supplyDefaults:e(31508).supplyDefaults,crossTraceDefaults:e(31508).crossTraceDefaults,supplyLayoutDefaults:e(37156),calc:e(71820),crossTraceCalc:e(96376).crossTraceCalc,colorbar:e(5528),arraysToCalcdata:e(84664),plot:e(98184).plot,style:e(60100).style,styleOnSelect:e(60100).styleOnSelect,hoverPoints:e(63400).hoverPoints,eventData:e(52160),selectPoints:e(45784),moduleType:"trace",name:"bar",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},39324:function(C){"use strict";C.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},barcornerradius:{valType:"any",editType:"calc"}}},37156:function(C,A,e){"use strict";var v=e(24040),w=e(54460),n=e(3400),T=e(39324),x=e(31508).validateCornerradius;C.exports=function(f,s,t){function o(g,m){return n.coerce(f,s,T,g,m)}for(var r=!1,i=!1,a=!1,u={},l=o("barmode"),d=0;d<t.length;d++){var c=t[d];if(v.traceIs(c,"bar")&&c.visible){if(r=!0,l==="group"){var _=c.xaxis+c.yaxis;u[_]&&(a=!0),u[_]=!0}c.visible&&c.type==="histogram"&&w.getFromId({_fullLayout:s},c[c.orientation==="v"?"xaxis":"yaxis"]).type!=="category"&&(i=!0)}}if(r){l!=="overlay"&&o("barnorm"),o("bargap",i&&!a?0:.2),o("bargroupgap");var p=o("barcornerradius");s.barcornerradius=x(p)}else delete s.barmode}},98184:function(C,A,e){"use strict";var v=e(33428),w=e(38248),n=e(3400),T=e(72736),x=e(76308),f=e(43616),s=e(24040),t=e(54460).tickText,o=e(82744),r=o.recordMinTextSize,i=o.clearMinTextSize,a=e(60100),u=e(60444),l=e(78048),d=e(20832),c=d.text,_=d.textposition,p=e(10624).appendArrayPointValue,g=l.TEXTPAD;function m(O){return O.id}function b(O){if(O.ids)return m}function y(O){return(O>0)-(O<0)}function M(O,N){return O<N?1:-1}function h(O,N,V,F){var j;return!N.uniformtext.mode&&E(V)?(F&&(j=F()),O.transition().duration(V.duration).ease(V.easing).each("end",function(){j&&j()}).each("interrupt",function(){j&&j()})):O}function E(O){return O&&O.duration>0}function k(O,N,V,F,j){return!(O<0||N<0)&&(V<=O&&F<=N||V<=N&&F<=O||(j?O>=V*(N/F):N>=F*(O/V)))}function D(O){return O==="auto"?0:O}function P(O,N){var V=Math.PI/180*N,F=Math.abs(Math.sin(V)),j=Math.abs(Math.cos(V));return{x:O.width*j+O.height*F,y:O.width*F+O.height*j}}function L(O,N,V,F,j,Z){var z=!!Z.isHorizontal,H=!!Z.constrained,U=Z.angle||0,re=Z.anchor,ee=re==="end",J=re==="start",Q=((Z.leftToRight||0)+1)/2,ne=1-Q,K=Z.hasB,oe=Z.r,le=Z.overhead,se=j.width,de=j.height,be=Math.abs(N-O),_e=Math.abs(F-V),xe=be>2*g&&_e>2*g?g:0;be-=2*xe,_e-=2*xe;var ve=D(U);U!=="auto"||se<=be&&de<=_e||!(se>be||de>_e)||(se>_e||de>be)&&se<de==be<_e||(ve+=90);var ye,me,Me=P(j,ve);if(oe&&oe-le>g){var Ae=function(Ne,ge,we,Ce,ze,Pe,Ue,Ge,Xe){var st,at,vt,xt,gt=Math.max(0,Math.abs(ge-Ne)-2*g),rt=Math.max(0,Math.abs(Ce-we)-2*g),tt=Pe-g,Mt=Ue?tt-Math.sqrt(tt*tt-(tt-Ue)*(tt-Ue)):tt,Pt=Xe?2*tt:Ge?tt-Ue:2*Mt,Rt=Xe?2*tt:Ge?2*Mt:tt-Ue;return ze.y/ze.x>=rt/(gt-Pt)?xt=rt/ze.y:ze.y/ze.x<=(rt-Rt)/gt?xt=gt/ze.x:!Xe&&Ge?(st=ze.x*ze.x+ze.y*ze.y/4,vt=(gt-tt)*(gt-tt)+(rt/2-tt)*(rt/2-tt)-tt*tt,xt=(-(at=-2*ze.x*(gt-tt)-ze.y*(rt/2-tt))+Math.sqrt(at*at-4*st*vt))/(2*st)):Xe?(st=(ze.x*ze.x+ze.y*ze.y)/4,vt=(gt/2-tt)*(gt/2-tt)+(rt/2-tt)*(rt/2-tt)-tt*tt,xt=(-(at=-ze.x*(gt/2-tt)-ze.y*(rt/2-tt))+Math.sqrt(at*at-4*st*vt))/(2*st)):(st=ze.x*ze.x/4+ze.y*ze.y,vt=(gt/2-tt)*(gt/2-tt)+(rt-tt)*(rt-tt)-tt*tt,xt=(-(at=-ze.x*(gt/2-tt)-2*ze.y*(rt-tt))+Math.sqrt(at*at-4*st*vt))/(2*st)),{scale:xt=Math.min(1,xt),pad:Ge?Math.max(0,tt-Math.sqrt(Math.max(0,tt*tt-(tt-(rt-ze.y*xt)/2)*(tt-(rt-ze.y*xt)/2)))-Ue):Math.max(0,tt-Math.sqrt(Math.max(0,tt*tt-(tt-(gt-ze.x*xt)/2)*(tt-(gt-ze.x*xt)/2)))-Ue)}}(O,N,V,F,Me,oe,le,z,K);ye=Ae.scale,me=Ae.pad}else ye=1,H&&(ye=Math.min(1,be/Me.x,_e/Me.y)),me=0;var ce=j.left*ne+j.right*Q,ae=(j.top+j.bottom)/2,pe=(O+g)*ne+(N-g)*Q,De=(V+F)/2,ke=0,Ee=0;if(J||ee){var Ie=(z?Me.x:Me.y)/2;oe&&(ee||K)&&(xe+=me);var Re=z?M(O,N):M(V,F);z?J?(pe=O+Re*xe,ke=-Re*Ie):(pe=N-Re*xe,ke=Re*Ie):J?(De=V+Re*xe,Ee=-Re*Ie):(De=F-Re*xe,Ee=Re*Ie)}return{textX:ce,textY:ae,targetX:pe,targetY:De,anchorX:ke,anchorY:Ee,scale:ye,rotate:ve}}C.exports={plot:function(O,N,V,F,j,Z){var z=N.xaxis,H=N.yaxis,U=O._fullLayout,re=O._context.staticPlot;j||(j={mode:U.barmode,norm:U.barmode,gap:U.bargap,groupgap:U.bargroupgap},i("bar",U));var ee=n.makeTraceGroups(F,V,"trace bars").each(function(J){var Q=v.select(this),ne=J[0].trace,K=J[0].t,oe=ne.type==="waterfall",le=ne.type==="funnel",se=ne.type==="histogram",de=ne.type==="bar",be=de||le,_e=0;oe&&ne.connector.visible&&ne.connector.mode==="between"&&(_e=ne.connector.line.width/2);var xe=ne.orientation==="h",ve=E(j),ye=n.ensureSingle(Q,"g","points"),me=b(ne),Me=ye.selectAll("g.point").data(n.identity,me);Me.enter().append("g").classed("point",!0),Me.exit().remove(),Me.each(function(ce,ae){var pe,De,ke=v.select(this),Ee=function(it,Be,je,ot){var Ze=[],dt=[],mt=ot?Be:je,yt=ot?je:Be;return Ze[0]=mt.c2p(it.s0,!0),dt[0]=yt.c2p(it.p0,!0),Ze[1]=mt.c2p(it.s1,!0),dt[1]=yt.c2p(it.p1,!0),ot?[Ze,dt]:[dt,Ze]}(ce,z,H,xe),Ie=Ee[0][0],Re=Ee[0][1],Ne=Ee[1][0],ge=Ee[1][1],we=(xe?Re-Ie:ge-Ne)==0;if(we&&be&&u.getLineWidth(ne,ce)&&(we=!1),we||(we=!(w(Ie)&&w(Re)&&w(Ne)&&w(ge))),ce.isBlank=we,we&&(xe?Re=Ie:ge=Ne),_e&&!we&&(xe?(Ie-=M(Ie,Re)*_e,Re+=M(Ie,Re)*_e):(Ne-=M(Ne,ge)*_e,ge+=M(Ne,ge)*_e)),ne.type==="waterfall"){if(!we){var Ce=ne[ce.dir].marker;pe=Ce.line.width,De=Ce.color}}else pe=u.getLineWidth(ne,ce),De=ce.mc||ne.marker.color;function ze(it){var Be=v.round(pe/2%1,2);return j.gap===0&&j.groupgap===0?v.round(Math.round(it)-Be,2):it}var Pe=x.opacity(De)<1||pe>.01?ze:function(it,Be,je){return je&&it===Be?it:Math.abs(it-Be)>=2?ze(it):it>Be?Math.ceil(it):Math.floor(it)};O._context.staticPlot||(Ie=Pe(Ie,Re,xe),Re=Pe(Re,Ie,xe),Ne=Pe(Ne,ge,!xe),ge=Pe(ge,Ne,!xe));var Ue,Ge=xe?z.c2p:H.c2p;Ue=ce.s0>0?ce._sMax:ce.s0<0?ce._sMin:ce.s1>0?ce._sMax:ce._sMin;var Xe,st,at=de||se?function(it,Be){if(!it)return 0;var je,ot=Math.abs(xe?ge-Ne:Re-Ie),Ze=Math.abs(xe?Re-Ie:ge-Ne),dt=Pe(Math.abs(Ge(Ue,!0)-Ge(0,!0))),mt=ce.hasB?Math.min(ot/2,Ze/2):Math.min(ot/2,dt);return je=Be==="%"?ot*(Math.min(50,it)/100):it,Pe(Math.max(Math.min(je,mt),0))}(K.cornerradiusvalue,K.cornerradiusform):0,vt="M"+Ie+","+Ne+"V"+ge+"H"+Re+"V"+Ne+"Z",xt=0;if(at&&ce.s){var gt=y(ce.s0)===0||y(ce.s)===y(ce.s0)?ce.s1:ce.s0;if((xt=Pe(ce.hasB?0:Math.abs(Ge(Ue,!0)-Ge(gt,!0))))<at){var rt=M(Ie,Re),tt=M(Ne,ge),Mt=rt===-tt?1:0;if(xe)if(ce.hasB)Xe="M"+(Ie+at*rt)+","+Ne+"A "+at+","+at+" 0 0 "+Mt+" "+Ie+","+(Ne+at*tt)+"V"+(ge-at*tt)+"A "+at+","+at+" 0 0 "+Mt+" "+(Ie+at*rt)+","+ge+"H"+(Re-at*rt)+"A "+at+","+at+" 0 0 "+Mt+" "+Re+","+(ge-at*tt)+"V"+(Ne+at*tt)+"A "+at+","+at+" 0 0 "+Mt+" "+(Re-at*rt)+","+Ne+"Z";else{var Pt=(st=Math.abs(Re-Ie)+xt)<at?at-Math.sqrt(st*(2*at-st)):0,Rt=xt>0?Math.sqrt(xt*(2*at-xt)):0,St=rt>0?Math.max:Math.min;Xe="M"+Ie+","+Ne+"V"+(ge-Pt*tt)+"H"+St(Re-(at-xt)*rt,Ie)+"A "+at+","+at+" 0 0 "+Mt+" "+Re+","+(ge-at*tt-Rt)+"V"+(Ne+at*tt+Rt)+"A "+at+","+at+" 0 0 "+Mt+" "+St(Re-(at-xt)*rt,Ie)+","+(Ne+Pt*tt)+"Z"}else if(ce.hasB)Xe="M"+(Ie+at*rt)+","+Ne+"A "+at+","+at+" 0 0 "+Mt+" "+Ie+","+(Ne+at*tt)+"V"+(ge-at*tt)+"A "+at+","+at+" 0 0 "+Mt+" "+(Ie+at*rt)+","+ge+"H"+(Re-at*rt)+"A "+at+","+at+" 0 0 "+Mt+" "+Re+","+(ge-at*tt)+"V"+(Ne+at*tt)+"A "+at+","+at+" 0 0 "+Mt+" "+(Re-at*rt)+","+Ne+"Z";else{var Ye=(st=Math.abs(ge-Ne)+xt)<at?at-Math.sqrt(st*(2*at-st)):0,Ke=xt>0?Math.sqrt(xt*(2*at-xt)):0,Ve=tt>0?Math.max:Math.min;Xe="M"+(Ie+Ye*rt)+","+Ne+"V"+Ve(ge-(at-xt)*tt,Ne)+"A "+at+","+at+" 0 0 "+Mt+" "+(Ie+at*rt-Ke)+","+ge+"H"+(Re-at*rt+Ke)+"A "+at+","+at+" 0 0 "+Mt+" "+(Re-Ye*rt)+","+Ve(ge-(at-xt)*tt,Ne)+"V"+Ne+"Z"}}else Xe=vt}else Xe=vt;var $e=h(n.ensureSingle(ke,"path"),U,j,Z);if($e.style("vector-effect",re?"none":"non-scaling-stroke").attr("d",isNaN((Re-Ie)*(ge-Ne))||we&&O._context.staticPlot?"M0,0Z":Xe).call(f.setClipUrl,N.layerClipId,O),!U.uniformtext.mode&&ve){var lt=f.makePointStyleFns(ne);f.singlePointStyle(ce,$e,ne,lt,O)}(function(it,Be,je,ot,Ze,dt,mt,yt,ht,kt,_t,Et,Lt){var Ot,Ft=Be.xaxis,Zt=Be.yaxis,Ht=it._fullLayout;function Ut(pr,Kt,mn){return n.ensureSingle(pr,"text").text(Kt).attr({class:"bartext bartext-"+Ot,"text-anchor":"middle","data-notex":1}).call(f.font,mn).call(T.convertToTspans,it)}var Wt=ot[0].trace,nn=Wt.orientation==="h",On=function(pr,Kt,mn,Dt,Bt){var Qt,fn=Kt[0].trace;return Qt=fn.texttemplate?function(dn,xn,sn,$t,Yt){var rn=xn[0].trace,ln=n.castOption(rn,sn,"texttemplate");if(!ln)return"";var An,En,Rn,jn,Qn=rn.type==="histogram",qn=rn.type==="waterfall",Kn=rn.type==="funnel",tr=rn.orientation==="h";function Jn(Pr){return t(jn,jn.c2l(Pr),!0).text}tr?(An="y",En=Yt,Rn="x",jn=$t):(An="x",En=$t,Rn="y",jn=Yt);var hr,br=xn[sn],gr={};gr.label=br.p,gr.labelLabel=gr[An+"Label"]=(hr=br.p,t(En,En.c2l(hr),!0).text);var ar=n.castOption(rn,br.i,"text");(ar===0||ar)&&(gr.text=ar),gr.value=br.s,gr.valueLabel=gr[Rn+"Label"]=Jn(br.s);var mr={};p(mr,rn,br.i),(Qn||mr.x===void 0)&&(mr.x=tr?gr.value:gr.label),(Qn||mr.y===void 0)&&(mr.y=tr?gr.label:gr.value),(Qn||mr.xLabel===void 0)&&(mr.xLabel=tr?gr.valueLabel:gr.labelLabel),(Qn||mr.yLabel===void 0)&&(mr.yLabel=tr?gr.labelLabel:gr.valueLabel),qn&&(gr.delta=+br.rawS||br.s,gr.deltaLabel=Jn(gr.delta),gr.final=br.v,gr.finalLabel=Jn(gr.final),gr.initial=gr.final-gr.delta,gr.initialLabel=Jn(gr.initial)),Kn&&(gr.value=br.s,gr.valueLabel=Jn(gr.value),gr.percentInitial=br.begR,gr.percentInitialLabel=n.formatPercent(br.begR),gr.percentPrevious=br.difR,gr.percentPreviousLabel=n.formatPercent(br.difR),gr.percentTotal=br.sumR,gr.percenTotalLabel=n.formatPercent(br.sumR));var kr=n.castOption(rn,br.i,"customdata");return kr&&(gr.customdata=kr),n.texttemplateString(ln,gr,dn._d3locale,mr,gr,rn._meta||{})}(pr,Kt,mn,Dt,Bt):fn.textinfo?function(dn,xn,sn,$t){var Yt=dn[0].trace,rn=Yt.orientation==="h",ln=Yt.type==="waterfall",An=Yt.type==="funnel";function En(kr){return t(rn?sn:$t,+kr,!0).text}var Rn,jn,Qn=Yt.textinfo,qn=dn[xn],Kn=Qn.split("+"),tr=[],Jn=function(kr){return Kn.indexOf(kr)!==-1};if(Jn("label")&&tr.push((jn=dn[xn].p,t(rn?$t:sn,jn,!0).text)),Jn("text")&&((Rn=n.castOption(Yt,qn.i,"text"))===0||Rn)&&tr.push(Rn),ln){var hr=+qn.rawS||qn.s,br=qn.v,gr=br-hr;Jn("initial")&&tr.push(En(gr)),Jn("delta")&&tr.push(En(hr)),Jn("final")&&tr.push(En(br))}if(An){Jn("value")&&tr.push(En(qn.s));var ar=0;Jn("percent initial")&&ar++,Jn("percent previous")&&ar++,Jn("percent total")&&ar++;var mr=ar>1;Jn("percent initial")&&(Rn=n.formatPercent(qn.begR),mr&&(Rn+=" of initial"),tr.push(Rn)),Jn("percent previous")&&(Rn=n.formatPercent(qn.difR),mr&&(Rn+=" of previous"),tr.push(Rn)),Jn("percent total")&&(Rn=n.formatPercent(qn.sumR),mr&&(Rn+=" of total"),tr.push(Rn))}return tr.join("<br>")}(Kt,mn,Dt,Bt):u.getValue(fn.text,mn),u.coerceString(c,Qt)}(Ht,ot,Ze,Ft,Zt);Ot=function(pr,Kt){var mn=u.getValue(pr.textposition,Kt);return u.coerceEnumerated(_,mn)}(Wt,Ze);var kn=Et.mode==="stack"||Et.mode==="relative",gn=ot[Ze],Jt=!kn||gn._outmost,un=gn.hasB,tn=kt&&kt-_t>g;if(On&&Ot!=="none"&&(!gn.isBlank&&dt!==mt&&yt!==ht||Ot!=="auto"&&Ot!=="inside")){var hn=Ht.font,bn=a.getBarColor(ot[Ze],Wt),wn=a.getInsideTextFont(Wt,Ze,hn,bn),Pn=a.getOutsideTextFont(Wt,Ze,hn),Cn=Wt.insidetextanchor||"end",Mn=je.datum();nn?Ft.type==="log"&&Mn.s0<=0&&(dt=Ft.range[0]<Ft.range[1]?0:Ft._length):Zt.type==="log"&&Mn.s0<=0&&(yt=Zt.range[0]<Zt.range[1]?Zt._length:0);var Bn,Nn,rr,Yn,ir,Zn=Math.abs(mt-dt),ur=Math.abs(ht-yt),en=Zn-2*g,on=ur-2*g;if(Ot==="outside"&&(Jt||gn.hasB||(Ot="inside")),Ot==="auto")if(Jt){Ot="inside",Bn=Ut(je,On,ir=n.ensureUniformFontSize(it,wn)),rr=(Nn=f.bBox(Bn.node())).width,Yn=Nn.height;var Dn,yn=rr>0&&Yn>0;Dn=tn?un?k(en-2*kt,on,rr,Yn,nn)||k(en,on-2*kt,rr,Yn,nn):nn?k(en-(kt-_t),on,rr,Yn,nn)||k(en,on-2*(kt-_t),rr,Yn,nn):k(en,on-(kt-_t),rr,Yn,nn)||k(en-2*(kt-_t),on,rr,Yn,nn):k(en,on,rr,Yn,nn),yn&&Dn?Ot="inside":(Ot="outside",Bn.remove(),Bn=null)}else Ot="inside";if(!Bn){var Ln=(Bn=Ut(je,On,ir=n.ensureUniformFontSize(it,Ot==="outside"?Pn:wn))).attr("transform");if(Bn.attr("transform",""),rr=(Nn=f.bBox(Bn.node())).width,Yn=Nn.height,Bn.attr("transform",Ln),rr<=0||Yn<=0)return void Bn.remove()}var Wn,Un=Wt.textangle;Wn=Ot==="outside"?function(pr,Kt,mn,Dt,Bt,Qt){var fn,dn=!!Qt.isHorizontal,xn=!!Qt.constrained,sn=Qt.angle||0,$t=Bt.width,Yt=Bt.height,rn=Math.abs(Kt-pr),ln=Math.abs(Dt-mn);fn=dn?ln>2*g?g:0:rn>2*g?g:0;var An=1;xn&&(An=dn?Math.min(1,ln/Yt):Math.min(1,rn/$t));var En=D(sn),Rn=P(Bt,En),jn=(dn?Rn.x:Rn.y)/2,Qn=(Bt.left+Bt.right)/2,qn=(Bt.top+Bt.bottom)/2,Kn=(pr+Kt)/2,tr=(mn+Dt)/2,Jn=0,hr=0,br=dn?M(Kt,pr):M(mn,Dt);return dn?(Kn=Kt-br*fn,Jn=br*jn):(tr=Dt+br*fn,hr=-br*jn),{textX:Qn,textY:qn,targetX:Kn,targetY:tr,anchorX:Jn,anchorY:hr,scale:An,rotate:En}}(dt,mt,yt,ht,Nn,{isHorizontal:nn,constrained:Wt.constraintext==="both"||Wt.constraintext==="outside",angle:Un}):L(dt,mt,yt,ht,Nn,{isHorizontal:nn,constrained:Wt.constraintext==="both"||Wt.constraintext==="inside",angle:Un,anchor:Cn,hasB:un,r:kt,overhead:_t}),Wn.fontSize=ir.size,r(Wt.type==="histogram"?"bar":Wt.type,Wn,Ht),gn.transform=Wn;var Xn=h(Bn,Ht,Et,Lt);n.setTransormAndDisplay(Xn,Wn)}else je.select("text").remove()})(O,N,ke,J,ae,Ie,Re,Ne,ge,at,xt,j,Z),N.layerClipId&&f.hideOutsideRangePoint(ce,ke.select("text"),z,H,ne.xcalendar,ne.ycalendar)});var Ae=ne.cliponaxis===!1;f.setClipUrl(Q,Ae?null:N.layerClipId,O)});s.getComponentMethod("errorbars","plot")(O,ee,N,j)},toMoveInsideBar:L}},45784:function(C){"use strict";function A(e,v,w,n,T){var x=v.c2p(n?e.s0:e.p0,!0),f=v.c2p(n?e.s1:e.p1,!0),s=w.c2p(n?e.p0:e.s0,!0),t=w.c2p(n?e.p1:e.s1,!0);return T?[(x+f)/2,(s+t)/2]:n?[f,(s+t)/2]:[(x+f)/2,t]}C.exports=function(e,v){var w,n=e.cd,T=e.xaxis,x=e.yaxis,f=n[0].trace,s=f.type==="funnel",t=f.orientation==="h",o=[];if(v===!1)for(w=0;w<n.length;w++)n[w].selected=0;else for(w=0;w<n.length;w++){var r=n[w],i="ct"in r?r.ct:A(r,T,x,t,s);v.contains(i,!1,w,e)?(o.push({pointNumber:w,x:T.c2d(r.x),y:x.c2d(r.y)}),r.selected=1):r.selected=0}return o}},72592:function(C,A,e){"use strict";C.exports=w;var v=e(3400).distinctVals;function w(n,T){this.traces=n,this.sepNegVal=T.sepNegVal,this.overlapNoMerge=T.overlapNoMerge;for(var x=1/0,f=T.posAxis._id.charAt(0),s=[],t=0;t<n.length;t++){for(var o=n[t],r=0;r<o.length;r++){var i=o[r],a=i.p;a===void 0&&(a=i[f]),a!==void 0&&s.push(a)}o[0]&&o[0].width1&&(x=Math.min(o[0].width1,x))}this.positions=s;var u=v(s);this.distinctPositions=u.vals,u.vals.length===1&&x!==1/0?this.minDiff=x:this.minDiff=Math.min(u.minDiff,x);var l=(T.posAxis||{}).type;l!=="category"&&l!=="multicategory"||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}w.prototype.put=function(n,T){var x=this.getLabel(n,T),f=this.bins[x]||0;return this.bins[x]=f+T,f},w.prototype.get=function(n,T){var x=this.getLabel(n,T);return this.bins[x]||0},w.prototype.getLabel=function(n,T){return(T<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?n:Math.round(n/this.binWidth))}},60100:function(C,A,e){"use strict";var v=e(33428),w=e(76308),n=e(43616),T=e(3400),x=e(24040),f=e(82744).resizeText,s=e(20832),t=s.textfont,o=s.insidetextfont,r=s.outsidetextfont,i=e(60444);function a(m,b,y){n.pointStyle(m.selectAll("path"),b,y),u(m,b,y)}function u(m,b,y){m.selectAll("text").each(function(M){var h=v.select(this),E=T.ensureUniformFontSize(y,l(h,M,b,y));n.font(h,E)})}function l(m,b,y,M){var h=M._fullLayout.font,E=y.textfont;if(m.classed("bartext-inside")){var k=g(b,y);E=c(y,b.i,h,k)}else m.classed("bartext-outside")&&(E=_(y,b.i,h));return E}function d(m,b,y){return p(t,m.textfont,b,y)}function c(m,b,y,M){var h=d(m,b,y);return(m._input.textfont===void 0||m._input.textfont.color===void 0||Array.isArray(m.textfont.color)&&m.textfont.color[b]===void 0)&&(h={color:w.contrast(M),family:h.family,size:h.size,weight:h.weight,style:h.style,variant:h.variant}),p(o,m.insidetextfont,b,h)}function _(m,b,y){var M=d(m,b,y);return p(r,m.outsidetextfont,b,M)}function p(m,b,y,M){b=b||{};var h=i.getValue(b.family,y),E=i.getValue(b.size,y),k=i.getValue(b.color,y),D=i.getValue(b.weight,y),P=i.getValue(b.style,y),L=i.getValue(b.variant,y);return{family:i.coerceString(m.family,h,M.family),size:i.coerceNumber(m.size,E,M.size),color:i.coerceColor(m.color,k,M.color),weight:i.coerceString(m.weight,D,M.weight),style:i.coerceString(m.style,P,M.style),variant:i.coerceString(m.variant,L,M.variant)}}function g(m,b){return b.type==="waterfall"?b[m.dir].marker.color:m.mcc||m.mc||b.marker.color}C.exports={style:function(m){var b=v.select(m).selectAll('g[class^="barlayer"]').selectAll("g.trace");f(m,b,"bar");var y=b.size(),M=m._fullLayout;b.style("opacity",function(h){return h[0].trace.opacity}).each(function(h){(M.barmode==="stack"&&y>1||M.bargap===0&&M.bargroupgap===0&&!h[0].trace.marker.line.width)&&v.select(this).attr("shape-rendering","crispEdges")}),b.selectAll("g.points").each(function(h){a(v.select(this),h[0].trace,m)}),x.getComponentMethod("errorbars","style")(b)},styleTextPoints:u,styleOnSelect:function(m,b,y){var M=b[0].trace;M.selectedpoints?function(h,E,k){n.selectedPointStyle(h.selectAll("path"),E),function(D,P,L){D.each(function(O){var N,V=v.select(this);if(O.selected){N=T.ensureUniformFontSize(L,l(V,O,P,L));var F=P.selected.textfont&&P.selected.textfont.color;F&&(N.color=F),n.font(V,N)}else n.selectedTextStyle(V,P)})}(h.selectAll("text"),E,k)}(y,M,m):(a(y,M,m),x.getComponentMethod("errorbars","style")(y))},getInsideTextFont:c,getOutsideTextFont:_,getBarColor:g,resizeText:f}},55592:function(C,A,e){"use strict";var v=e(76308),w=e(94288).hasColorscale,n=e(27260),T=e(3400).coercePattern;C.exports=function(x,f,s,t,o){var r=s("marker.color",t),i=w(x,"marker");i&&n(x,f,o,s,{prefix:"marker.",cLetter:"c"}),s("marker.line.color",v.defaultLine),w(x,"marker.line")&&n(x,f,o,s,{prefix:"marker.line.",cLetter:"c"}),s("marker.line.width"),s("marker.opacity"),T(s,"marker.pattern",r,i),s("selected.marker.color"),s("unselected.marker.color")}},82744:function(C,A,e){"use strict";var v=e(33428),w=e(3400);function n(T){return"_"+T+"Text_minsize"}C.exports={recordMinTextSize:function(T,x,f){if(f.uniformtext.mode){var s=n(T),t=f.uniformtext.minsize,o=x.scale*x.fontSize;x.hide=o<t,f[s]=f[s]||1/0,x.hide||(f[s]=Math.min(f[s],Math.max(o,t)))}},clearMinTextSize:function(T,x){x[n(T)]=void 0},resizeText:function(T,x,f){var s=T._fullLayout,t=s["_"+f+"Text_minsize"];if(t){var o,r=s.uniformtext.mode==="hide";switch(f){case"funnelarea":case"pie":case"sunburst":o="g.slice";break;case"treemap":case"icicle":o="g.slice, g.pathbar";break;default:o="g.points > g.point"}x.selectAll(o).each(function(i){var a=i.transform;if(a){a.scale=r&&a.hide?0:t/a.fontSize;var u=v.select(this).select("text");w.setTransormAndDisplay(u,a)}})}}}},78100:function(C,A,e){"use strict";var v,w=e(21776).Ks,n=e(92880).extendFlat,T=e(8319),x=e(20832);C.exports={r:T.r,theta:T.theta,r0:T.r0,dr:T.dr,theta0:T.theta0,dtheta:T.dtheta,thetaunit:T.thetaunit,base:n({},x.base,{}),offset:n({},x.offset,{}),width:n({},x.width,{}),text:n({},x.text,{}),hovertext:n({},x.hovertext,{}),marker:(v=n({},x.marker),delete v.cornerradius,v),hoverinfo:T.hoverinfo,hovertemplate:w(),selected:x.selected,unselected:x.unselected}},47056:function(C,A,e){"use strict";var v=e(94288).hasColorscale,w=e(47128),n=e(3400).isArrayOrTypedArray,T=e(84664),x=e(96376).setGroupPositions,f=e(4500),s=e(24040).traceIs,t=e(3400).extendFlat;C.exports={calc:function(o,r){for(var i=o._fullLayout,a=r.subplot,u=i[a].radialaxis,l=i[a].angularaxis,d=u.makeCalcdata(r,"r"),c=l.makeCalcdata(r,"theta"),_=r._length,p=new Array(_),g=d,m=c,b=0;b<_;b++)p[b]={p:m[b],s:g[b]};function y(M){var h=r[M];h!==void 0&&(r["_"+M]=n(h)?l.makeCalcdata(r,M):l.d2c(h,r.thetaunit))}return l.type==="linear"&&(y("width"),y("offset")),v(r,"marker")&&w(o,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"}),v(r,"marker.line")&&w(o,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"}),T(p,r),f(p,r),p},crossTraceCalc:function(o,r,i){for(var a=o.calcdata,u=[],l=0;l<a.length;l++){var d=a[l],c=d[0].trace;c.visible===!0&&s(c,"bar")&&c.subplot===i&&u.push(d)}var _=t({},r.radialaxis,{_id:"x"}),p=r.angularaxis;x(o,p,_,u,{mode:r.barmode,norm:r.barnorm,gap:r.bargap,groupgap:r.bargroupgap})}}},70384:function(C,A,e){"use strict";var v=e(3400),w=e(85968).handleRThetaDefaults,n=e(55592),T=e(78100);C.exports=function(x,f,s,t){function o(r,i){return v.coerce(x,f,T,r,i)}w(x,f,t,o)?(o("thetaunit"),o("base"),o("offset"),o("width"),o("text"),o("hovertext"),o("hovertemplate"),n(x,f,o,s,t),v.coerceSelectionMarkerOpacity(f,o)):f.visible=!1}},68896:function(C,A,e){"use strict";var v=e(93024),w=e(3400),n=e(63400).getTraceColor,T=w.fillText,x=e(8504).makeHoverPointText,f=e(57384).isPtInsidePolygon;C.exports=function(s,t,o){var r=s.cd,i=r[0].trace,a=s.subplot,u=a.radialAxis,l=a.angularAxis,d=a.vangles,c=d?f:w.isPtInsideSector,_=s.maxHoverDistance,p=l._period||2*Math.PI,g=Math.abs(u.g2p(Math.sqrt(t*t+o*o))),m=Math.atan2(o,t);if(u.range[0]>u.range[1]&&(m+=Math.PI),v.getClosest(r,function(M){return c(g,m,[M.rp0,M.rp1],[M.thetag0,M.thetag1],d)?_+Math.min(1,Math.abs(M.thetag1-M.thetag0)/p)-1+(M.rp1-g)/(M.rp1-M.rp0)-1:1/0},s),s.index!==!1){var b=r[s.index];s.x0=s.x1=b.ct[0],s.y0=s.y1=b.ct[1];var y=w.extendFlat({},b,{r:b.s,theta:b.p});return T(b,i,s),x(y,i,a,s),s.hovertemplate=i.hovertemplate,s.color=n(i,b),s.xLabelVal=s.yLabelVal=void 0,b.s<0&&(s.idealAlign="left"),[s]}}},94456:function(C,A,e){"use strict";C.exports={moduleType:"trace",name:"barpolar",basePlotModule:e(40872),categories:["polar","bar","showLegend"],attributes:e(78100),layoutAttributes:e(9320),supplyDefaults:e(70384),supplyLayoutDefaults:e(89580),calc:e(47056).calc,crossTraceCalc:e(47056).crossTraceCalc,plot:e(42040),colorbar:e(5528),formatLabels:e(22852),style:e(60100).style,styleOnSelect:e(60100).styleOnSelect,hoverPoints:e(68896),selectPoints:e(45784),meta:{}}},9320:function(C){"use strict";C.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},89580:function(C,A,e){"use strict";var v=e(3400),w=e(9320);C.exports=function(n,T,x){var f,s={};function t(i,a){return v.coerce(n[f]||{},T[f],w,i,a)}for(var o=0;o<x.length;o++){var r=x[o];r.type==="barpolar"&&r.visible===!0&&(s[f=r.subplot]||(t("barmode"),t("bargap"),s[f]=1))}}},42040:function(C,A,e){"use strict";var v=e(33428),w=e(38248),n=e(3400),T=e(43616),x=e(57384);C.exports=function(f,s,t){var o=f._context.staticPlot,r=s.xaxis,i=s.yaxis,a=s.radialAxis,u=s.angularAxis,l=function(c){var _=c.cxx,p=c.cyy;return c.vangles?function(g,m,b,y){var M,h;n.angleDelta(b,y)>0?(M=b,h=y):(M=y,h=b);var E=[x.findEnclosingVertexAngles(M,c.vangles)[0],(M+h)/2,x.findEnclosingVertexAngles(h,c.vangles)[1]];return x.pathPolygonAnnulus(g,m,M,h,E,_,p)}:function(g,m,b,y){return n.pathAnnulus(g,m,b,y,_,p)}}(s),d=s.layers.frontplot.select("g.barlayer");n.makeTraceGroups(d,t,"trace bars").each(function(){var c=v.select(this),_=n.ensureSingle(c,"g","points").selectAll("g.point").data(n.identity);_.enter().append("g").style("vector-effect",o?"none":"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),_.exit().remove(),_.each(function(p){var g,m=v.select(this),b=p.rp0=a.c2p(p.s0),y=p.rp1=a.c2p(p.s1),M=p.thetag0=u.c2g(p.p0),h=p.thetag1=u.c2g(p.p1);if(w(b)&&w(y)&&w(M)&&w(h)&&b!==y&&M!==h){var E=a.c2g(p.s1),k=(M+h)/2;p.ct=[r.c2p(E*Math.cos(k)),i.c2p(E*Math.sin(k))],g=l(b,y,M,h)}else g="M0,0Z";n.ensureSingle(m,"path").attr("d",g)}),T.setClipUrl(c,s._hasClipOnAxisFalse?s.clipIds.forTraces:null,f)})}},63188:function(C,A,e){"use strict";var v=e(98304),w=e(52904),n=e(20832),T=e(22548),x=e(29736).axisHoverFormat,f=e(21776).Ks,s=e(92880).extendFlat,t=w.marker,o=t.line;C.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:w.xperiod,yperiod:w.yperiod,xperiod0:w.xperiod0,yperiod0:w.yperiod0,xperiodalignment:w.xperiodalignment,yperiodalignment:w.yperiodalignment,xhoverformat:x("x"),yhoverformat:x("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},sdmultiple:{valType:"number",min:0,editType:"calc",dflt:1},sizemode:{valType:"enumerated",values:["quartiles","sd"],editType:"calc",dflt:"quartiles"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:s({},t.symbol,{arrayOk:!1,editType:"plot"}),opacity:s({},t.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:s({},t.angle,{arrayOk:!1,editType:"calc"}),size:s({},t.size,{arrayOk:!1,editType:"calc"}),color:s({},t.color,{arrayOk:!1,editType:"style"}),line:{color:s({},o.color,{arrayOk:!1,dflt:T.defaultLine,editType:"style"}),width:s({},o.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:v(),whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},showwhiskers:{valType:"boolean",editType:"calc"},offsetgroup:n.offsetgroup,alignmentgroup:n.alignmentgroup,selected:{marker:w.selected.marker,editType:"style"},unselected:{marker:w.unselected.marker,editType:"style"},text:s({},w.text,{}),hovertext:s({},w.hovertext,{}),hovertemplate:f({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"},zorder:w.zorder}},62555:function(C,A,e){"use strict";var v=e(38248),w=e(54460),n=e(1220),T=e(3400),x=e(39032).BADNUM,f=T._;C.exports=function(c,_){var p,g,m,b,y,M,h,E=c._fullLayout,k=w.getFromId(c,_.xaxis||"x"),D=w.getFromId(c,_.yaxis||"y"),P=[],L=_.type==="violin"?"_numViolins":"_numBoxes";_.orientation==="h"?(m=k,b="x",y=D,M="y",h=!!_.yperiodalignment):(m=D,b="y",y=k,M="x",h=!!_.xperiodalignment);var O,N,V,F,j,Z,z=function(ze,Pe,Ue,Ge){var Xe,st=Pe+"0"in ze;if(Pe in ze||st&&"d"+Pe in ze){var at=Ue.makeCalcdata(ze,Pe);return[n(ze,Ue,Pe,at).vals,at]}Xe=st?ze[Pe+"0"]:"name"in ze&&(Ue.type==="category"||v(ze.name)&&["linear","log"].indexOf(Ue.type)!==-1||T.isDateTime(ze.name)&&Ue.type==="date")?ze.name:Ge;for(var vt=Ue.type==="multicategory"?Ue.r2c_just_indices(Xe):Ue.d2c(Xe,0,ze[Pe+"calendar"]),xt=ze._length,gt=new Array(xt),rt=0;rt<xt;rt++)gt[rt]=vt;return[gt]}(_,M,y,E[L]),H=z[0],U=z[1],re=T.distinctVals(H,y),ee=re.vals,J=re.minDiff/2,Q=(_.boxpoints||_.points)==="all"?T.identity:function(ze){return ze.v<O.lf||ze.v>O.uf};if(_._hasPreCompStats){var ne=_[b],K=function(ze){return m.d2c((_[ze]||[])[p])},oe=1/0,le=-1/0;for(p=0;p<_._length;p++){var se=H[p];if(v(se)){if((O={}).pos=O[M]=se,h&&U&&(O.orig_p=U[p]),O.q1=K("q1"),O.med=K("median"),O.q3=K("q3"),N=[],ne&&T.isArrayOrTypedArray(ne[p]))for(g=0;g<ne[p].length;g++)(Z=m.d2c(ne[p][g]))!==x&&(t(j={v:Z,i:[p,g]},_,[p,g]),N.push(j));if(O.pts=N.sort(o),F=(V=O[b]=N.map(r)).length,O.med!==x&&O.q1!==x&&O.q3!==x&&O.med>=O.q1&&O.q3>=O.med){var de=K("lowerfence");O.lf=de!==x&&de<=O.q1?de:i(O,V,F);var be=K("upperfence");O.uf=be!==x&&be>=O.q3?be:a(O,V,F);var _e=K("mean");O.mean=_e!==x?_e:F?T.mean(V,F):(O.q1+O.q3)/2;var xe=K("sd");O.sd=_e!==x&&xe>=0?xe:F?T.stdev(V,F,O.mean):O.q3-O.q1,O.lo=u(O),O.uo=l(O);var ve=K("notchspan");ve=ve!==x&&ve>0?ve:d(O,F),O.ln=O.med-ve,O.un=O.med+ve;var ye=O.lf,me=O.uf;_.boxpoints&&V.length&&(ye=Math.min(ye,V[0]),me=Math.max(me,V[F-1])),_.notched&&(ye=Math.min(ye,O.ln),me=Math.max(me,O.un)),O.min=ye,O.max=me}else{var Me;T.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+O.q1,"median = "+O.med,"q3 = "+O.q3].join(`
`)),Me=O.med!==x?O.med:O.q1!==x?O.q3!==x?(O.q1+O.q3)/2:O.q1:O.q3!==x?O.q3:0,O.med=Me,O.q1=O.q3=Me,O.lf=O.uf=Me,O.mean=O.sd=Me,O.ln=O.un=Me,O.min=O.max=Me}oe=Math.min(oe,O.min),le=Math.max(le,O.max),O.pts2=N.filter(Q),P.push(O)}}_._extremes[m._id]=w.findExtremes(m,[oe,le],{padded:!0})}else{var Ae=m.makeCalcdata(_,b),ce=function(ze,Pe){for(var Ue=ze.length,Ge=new Array(Ue+1),Xe=0;Xe<Ue;Xe++)Ge[Xe]=ze[Xe]-Pe;return Ge[Ue]=ze[Ue-1]+Pe,Ge}(ee,J),ae=ee.length,pe=function(ze){for(var Pe=new Array(ze),Ue=0;Ue<ze;Ue++)Pe[Ue]=[];return Pe}(ae);for(p=0;p<_._length;p++)if(Z=Ae[p],v(Z)){var De=T.findBin(H[p],ce);De>=0&&De<ae&&(t(j={v:Z,i:p},_,p),pe[De].push(j))}var ke=1/0,Ee=-1/0,Ie=_.quartilemethod,Re=Ie==="exclusive",Ne=Ie==="inclusive";for(p=0;p<ae;p++)if(pe[p].length>0){var ge,we;(O={}).pos=O[M]=ee[p],N=O.pts=pe[p].sort(o),F=(V=O[b]=N.map(r)).length,O.min=V[0],O.max=V[F-1],O.mean=T.mean(V,F),O.sd=T.stdev(V,F,O.mean)*_.sdmultiple,O.med=T.interp(V,.5),F%2&&(Re||Ne)?(Re?(ge=V.slice(0,F/2),we=V.slice(F/2+1)):Ne&&(ge=V.slice(0,F/2+1),we=V.slice(F/2)),O.q1=T.interp(ge,.5),O.q3=T.interp(we,.5)):(O.q1=T.interp(V,.25),O.q3=T.interp(V,.75)),O.lf=i(O,V,F),O.uf=a(O,V,F),O.lo=u(O),O.uo=l(O);var Ce=d(O,F);O.ln=O.med-Ce,O.un=O.med+Ce,ke=Math.min(ke,O.ln),Ee=Math.max(Ee,O.un),O.pts2=N.filter(Q),P.push(O)}_.notched&&T.isTypedArray(Ae)&&(Ae=Array.from(Ae)),_._extremes[m._id]=w.findExtremes(m,_.notched?Ae.concat([ke,Ee]):Ae,{padded:!0})}return function(ze,Pe){if(T.isArrayOrTypedArray(Pe.selectedpoints))for(var Ue=0;Ue<ze.length;Ue++){for(var Ge=ze[Ue].pts||[],Xe={},st=0;st<Ge.length;st++)Xe[Ge[st].i]=st;T.tagSelected(Ge,Pe,Xe)}}(P,_),P.length>0?(P[0].t={num:E[L],dPos:J,posLetter:M,valLetter:b,labels:{med:f(c,"median:"),min:f(c,"min:"),q1:f(c,"q1:"),q3:f(c,"q3:"),max:f(c,"max:"),mean:_.boxmean==="sd"||_.sizemode==="sd"?f(c,"mean \xB1 \u03C3:").replace("\u03C3",_.sdmultiple===1?"\u03C3":_.sdmultiple+"\u03C3"):f(c,"mean:"),lf:f(c,"lower fence:"),uf:f(c,"upper fence:")}},E[L]++,P):[{t:{empty:!0}}]};var s={text:"tx",hovertext:"htx"};function t(c,_,p){for(var g in s)T.isArrayOrTypedArray(_[g])&&(Array.isArray(p)?T.isArrayOrTypedArray(_[g][p[0]])&&(c[s[g]]=_[g][p[0]][p[1]]):c[s[g]]=_[g][p])}function o(c,_){return c.v-_.v}function r(c){return c.v}function i(c,_,p){return p===0?c.q1:Math.min(c.q1,_[Math.min(T.findBin(2.5*c.q1-1.5*c.q3,_,!0)+1,p-1)])}function a(c,_,p){return p===0?c.q3:Math.max(c.q3,_[Math.max(T.findBin(2.5*c.q3-1.5*c.q1,_),0)])}function u(c){return 4*c.q1-3*c.q3}function l(c){return 4*c.q3-3*c.q1}function d(c,_){return _===0?0:1.57*(c.q3-c.q1)/Math.sqrt(_)}},96404:function(C,A,e){"use strict";var v=e(54460),w=e(3400),n=e(71888).getAxisGroup,T=["v","h"];function x(f,s,t,o){var r,i,a,u=s.calcdata,l=s._fullLayout,d=o._id,c=d.charAt(0),_=[],p=0;for(r=0;r<t.length;r++)for(a=u[t[r]],i=0;i<a.length;i++)_.push(o.c2l(a[i].pos,!0)),p+=(a[i].pts2||[]).length;if(_.length){var g=w.distinctVals(_);o.type!=="category"&&o.type!=="multicategory"||(g.minDiff=1);var m=g.minDiff/2;v.minDtick(o,g.minDiff,g.vals[0],!0);var b=l[f==="violin"?"_numViolins":"_numBoxes"],y=l[f+"mode"]==="group"&&b>1,M=1-l[f+"gap"],h=1-l[f+"groupgap"];for(r=0;r<t.length;r++){var E,k,D,P,L,O,N=(a=u[t[r]])[0].trace,V=a[0].t,F=N.width,j=N.side;if(F)E=k=P=F/2,D=0;else if(E=m,y){var Z=n(l,o._id)+N.orientation,z=(l._alignmentOpts[Z]||{})[N.alignmentgroup]||{},H=Object.keys(z.offsetGroups||{}).length,U=H||b;k=E*M*h/U,D=2*E*(((H?N._offsetIndex:V.num)+.5)/U-.5)*M,P=E*M/U}else k=E*M*h,D=0,P=E;V.dPos=E,V.bPos=D,V.bdPos=k,V.wHover=P;var re,ee,J,Q,ne,K,oe=D+k,le=!!F;if(j==="positive"?(L=E*(F?1:.5),re=oe,O=re=D):j==="negative"?(L=re=D,O=E*(F?1:.5),ee=oe):(L=O=E,re=ee=oe),(N.boxpoints||N.points)&&p>0){var se=N.pointpos,de=N.jitter,be=N.marker.size/2,_e=0;se+de>=0&&((_e=oe*(se+de))>L?(le=!0,ne=be,J=_e):_e>re&&(ne=be,J=L)),_e<=L&&(J=L);var xe=0;se-de<=0&&((xe=-oe*(se-de))>O?(le=!0,K=be,Q=xe):xe>ee&&(K=be,Q=O)),xe<=O&&(Q=O)}else J=L,Q=O;var ve=new Array(a.length);for(i=0;i<a.length;i++)ve[i]=a[i].pos;N._extremes[d]=v.findExtremes(o,ve,{padded:le,vpadminus:Q,vpadplus:J,vpadLinearized:!0,ppadminus:{x:K,y:ne}[c],ppadplus:{x:ne,y:K}[c]})}}}C.exports={crossTraceCalc:function(f,s){for(var t=f.calcdata,o=s.xaxis,r=s.yaxis,i=0;i<T.length;i++){for(var a=T[i],u=a==="h"?r:o,l=[],d=0;d<t.length;d++){var c=t[d],_=c[0].t,p=c[0].trace;p.visible!==!0||p.type!=="box"&&p.type!=="candlestick"||_.empty||(p.orientation||"v")!==a||p.xaxis!==o._id||p.yaxis!==r._id||l.push(d)}x("box",f,l,u)}},setPositionOffset:x}},90624:function(C,A,e){"use strict";var v=e(3400),w=e(24040),n=e(76308),T=e(31147),x=e(20011),f=e(52976),s=e(63188);function t(r,i,a,u){function l(j){var Z=0;return j&&j.length&&(Z+=1,v.isArrayOrTypedArray(j[0])&&j[0].length&&(Z+=1)),Z}function d(j){return v.validate(r[j],s[j])}var c,_=a("y"),p=a("x");if(i.type==="box"){var g=a("q1"),m=a("median"),b=a("q3");i._hasPreCompStats=g&&g.length&&m&&m.length&&b&&b.length,c=Math.min(v.minRowLength(g),v.minRowLength(m),v.minRowLength(b))}var y,M,h=l(_),E=l(p),k=h&&v.minRowLength(_),D=E&&v.minRowLength(p),P=u.calendar,L={autotypenumbers:u.autotypenumbers};if(i._hasPreCompStats)switch(String(E)+String(h)){case"00":var O=d("x0")||d("dx");y=!d("y0")&&!d("dy")||O?"v":"h",M=c;break;case"10":y="v",M=Math.min(c,D);break;case"20":y="h",M=Math.min(c,p.length);break;case"01":y="h",M=Math.min(c,k);break;case"02":y="v",M=Math.min(c,_.length);break;case"12":y="v",M=Math.min(c,D,_.length);break;case"21":y="h",M=Math.min(c,p.length,k);break;case"11":M=0;break;case"22":var N,V=!1;for(N=0;N<p.length;N++)if(f(p[N],P,L)==="category"){V=!0;break}if(V)y="v",M=Math.min(c,D,_.length);else{for(N=0;N<_.length;N++)if(f(_[N],P,L)==="category"){V=!0;break}V?(y="h",M=Math.min(c,p.length,k)):(y="v",M=Math.min(c,D,_.length))}}else h>0?(y="v",M=E>0?Math.min(D,k):Math.min(k)):E>0?(y="h",M=Math.min(D)):M=0;if(M){i._length=M;var F=a("orientation",y);i._hasPreCompStats?F==="v"&&E===0?(a("x0",0),a("dx",1)):F==="h"&&h===0&&(a("y0",0),a("dy",1)):F==="v"&&E===0?a("x0"):F==="h"&&h===0&&a("y0"),w.getComponentMethod("calendars","handleTraceDefaults")(r,i,["x","y"],u)}else i.visible=!1}function o(r,i,a,u){var l=u.prefix,d=v.coerce2(r,i,s,"marker.outliercolor"),c=a("marker.line.outliercolor"),_="outliers";i._hasPreCompStats?_="all":(d||c)&&(_="suspectedoutliers");var p=a(l+"points",_);p?(a("jitter",p==="all"?.3:0),a("pointpos",p==="all"?-1.5:0),a("marker.symbol"),a("marker.opacity"),a("marker.size"),a("marker.angle"),a("marker.color",i.line.color),a("marker.line.color"),a("marker.line.width"),p==="suspectedoutliers"&&(a("marker.line.outliercolor",i.marker.color),a("marker.line.outlierwidth")),a("selected.marker.color"),a("unselected.marker.color"),a("selected.marker.size"),a("unselected.marker.size"),a("text"),a("hovertext")):delete i.marker;var g=a("hoveron");g!=="all"&&g.indexOf("points")===-1||a("hovertemplate"),v.coerceSelectionMarkerOpacity(i,a)}C.exports={supplyDefaults:function(r,i,a,u){function l(M,h){return v.coerce(r,i,s,M,h)}if(t(r,i,l,u),i.visible!==!1){T(r,i,u,l),l("xhoverformat"),l("yhoverformat");var d=i._hasPreCompStats;d&&(l("lowerfence"),l("upperfence")),l("line.color",(r.marker||{}).color||a),l("line.width"),l("fillcolor",n.addOpacity(i.line.color,.5));var c=!1;if(d){var _=l("mean"),p=l("sd");_&&_.length&&(c=!0,p&&p.length&&(c="sd"))}l("whiskerwidth");var g,m=l("sizemode");m==="quartiles"&&(g=l("boxmean",c)),l("showwhiskers",m==="quartiles"),m!=="sd"&&g!=="sd"||l("sdmultiple"),l("width"),l("quartilemethod");var b=!1;if(d){var y=l("notchspan");y&&y.length&&(b=!0)}else v.validate(r.notchwidth,s.notchwidth)&&(b=!0);l("notched",b)&&l("notchwidth"),o(r,i,l,{prefix:"box"}),l("zorder")}},crossTraceDefaults:function(r,i){var a,u;function l(_){return v.coerce(u._input,u,s,_)}for(var d=0;d<r.length;d++){var c=(u=r[d]).type;c!=="box"&&c!=="violin"||(a=u._input,i[c+"mode"]==="group"&&x(a,u,i,l))}},handleSampleDefaults:t,handlePointsDefaults:o}},10392:function(C){"use strict";C.exports=function(A,e){return e.hoverOnBox&&(A.hoverOnBox=e.hoverOnBox),"xVal"in e&&(A.x=e.xVal),"yVal"in e&&(A.y=e.yVal),e.xa&&(A.xaxis=e.xa),e.ya&&(A.yaxis=e.ya),A}},27576:function(C,A,e){"use strict";var v=e(54460),w=e(3400),n=e(93024),T=e(76308),x=w.fillText;function f(t,o,r,i){var a,u,l,d,c,_,p,g,m,b,y,M,h,E,k=t.cd,D=t.xa,P=t.ya,L=k[0].trace,O=k[0].t,N=L.type==="violin",V=O.bdPos,F=O.wHover,j=function(Me){return l.c2l(Me.pos)+O.bPos-l.c2l(_)};N&&L.side!=="both"?(L.side==="positive"&&(m=function(Me){var Ae=j(Me);return n.inbox(Ae,Ae+F,b)},M=V,h=0),L.side==="negative"&&(m=function(Me){var Ae=j(Me);return n.inbox(Ae-F,Ae,b)},M=0,h=V)):(m=function(Me){var Ae=j(Me);return n.inbox(Ae-F,Ae+F,b)},M=h=V),E=N?function(Me){return n.inbox(Me.span[0]-c,Me.span[1]-c,b)}:function(Me){return n.inbox(Me.min-c,Me.max-c,b)},L.orientation==="h"?(c=o,_=r,p=E,g=m,a="y",l=P,u="x",d=D):(c=r,_=o,p=m,g=E,a="x",l=D,u="y",d=P);var Z=Math.min(1,V/Math.abs(l.r2c(l.range[1])-l.r2c(l.range[0])));function z(Me){return(p(Me)+g(Me))/2}b=t.maxHoverDistance-Z,y=t.maxSpikeDistance-Z;var H=n.getDistanceFunction(i,p,g,z);if(n.getClosest(k,H,t),t.index===!1)return[];var U=k[t.index],re=L.line.color,ee=(L.marker||{}).color;T.opacity(re)&&L.line.width?t.color=re:T.opacity(ee)&&L.boxpoints?t.color=ee:t.color=L.fillcolor,t[a+"0"]=l.c2p(U.pos+O.bPos-h,!0),t[a+"1"]=l.c2p(U.pos+O.bPos+M,!0),t[a+"LabelVal"]=U.orig_p!==void 0?U.orig_p:U.pos;var J=a+"Spike";t.spikeDistance=z(U)*y/b,t[J]=l.c2p(U.pos,!0);var Q=L.boxmean||L.sizemode==="sd"||(L.meanline||{}).visible,ne=L.boxpoints||L.points,K=ne&&Q?["max","uf","q3","med","mean","q1","lf","min"]:ne&&!Q?["max","uf","q3","med","q1","lf","min"]:!ne&&Q?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],oe=d.range[1]<d.range[0];L.orientation===(oe?"v":"h")&&K.reverse();for(var le=t.spikeDistance,se=t[J],de=[],be=0;be<K.length;be++){var _e=K[be];if(_e in U){var xe=U[_e],ve=d.c2p(xe,!0),ye=w.extendFlat({},t);ye.attr=_e,ye[u+"0"]=ye[u+"1"]=ve,ye[u+"LabelVal"]=xe,ye[u+"Label"]=(O.labels?O.labels[_e]+" ":"")+v.hoverLabelText(d,xe,L[u+"hoverformat"]),ye.hoverOnBox=!0,_e!=="mean"||!("sd"in U)||L.boxmean!=="sd"&&L.sizemode!=="sd"||(ye[u+"err"]=U.sd),ye.hovertemplate=!1,de.push(ye)}}t.name="",t.spikeDistance=void 0,t[J]=void 0;for(var me=0;me<de.length;me++)de[me].attr!=="med"?(de[me].name="",de[me].spikeDistance=void 0,de[me][J]=void 0):(de[me].spikeDistance=le,de[me][J]=se);return de}function s(t,o,r){for(var i,a,u,l=t.cd,d=t.xa,c=t.ya,_=l[0].trace,p=d.c2p(o),g=c.c2p(r),m=n.quadrature(function(N){var V=Math.max(3,N.mrc||0);return Math.max(Math.abs(d.c2p(N.x)-p)-V,1-3/V)},function(N){var V=Math.max(3,N.mrc||0);return Math.max(Math.abs(c.c2p(N.y)-g)-V,1-3/V)}),b=!1,y=0;y<l.length;y++){a=l[y];for(var M=0;M<(a.pts||[]).length;M++){var h=m(u=a.pts[M]);h<=t.distance&&(t.distance=h,b=[y,M])}}if(!b)return!1;u=(a=l[b[0]]).pts[b[1]];var E=d.c2p(u.x,!0),k=c.c2p(u.y,!0),D=u.mrc||1;i=w.extendFlat({},t,{index:u.i,color:(_.marker||{}).color,name:_.name,x0:E-D,x1:E+D,y0:k-D,y1:k+D,spikeDistance:t.distance,hovertemplate:_.hovertemplate});var P,L=a.orig_p,O=L!==void 0?L:a.pos;return _.orientation==="h"?(P=c,i.xLabelVal=u.x,i.yLabelVal=O):(P=d,i.xLabelVal=O,i.yLabelVal=u.y),i[P._id.charAt(0)+"Spike"]=P.c2p(a.pos,!0),x(u,_,i),i}C.exports={hoverPoints:function(t,o,r,i){var a,u=t.cd[0].trace.hoveron,l=[];return u.indexOf("boxes")!==-1&&(l=l.concat(f(t,o,r,i))),u.indexOf("points")!==-1&&(a=s(t,o,r)),i==="closest"?a?[a]:l:(a&&l.push(a),l)},hoverOnBoxes:f,hoverOnPoints:s}},67244:function(C,A,e){"use strict";C.exports={attributes:e(63188),layoutAttributes:e(16560),supplyDefaults:e(90624).supplyDefaults,crossTraceDefaults:e(90624).crossTraceDefaults,supplyLayoutDefaults:e(68832).supplyLayoutDefaults,calc:e(62555),crossTraceCalc:e(96404).crossTraceCalc,plot:e(18728).plot,style:e(25776).style,styleOnSelect:e(25776).styleOnSelect,hoverPoints:e(27576).hoverPoints,eventData:e(10392),selectPoints:e(8264),moduleType:"trace",name:"box",basePlotModule:e(57952),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},16560:function(C){"use strict";C.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},68832:function(C,A,e){"use strict";var v=e(24040),w=e(3400),n=e(16560);function T(x,f,s,t,o){for(var r=o+"Layout",i=!1,a=0;a<s.length;a++){var u=s[a];if(v.traceIs(u,r)){i=!0;break}}i&&(t(o+"mode"),t(o+"gap"),t(o+"groupgap"))}C.exports={supplyLayoutDefaults:function(x,f,s){T(0,0,s,function(t,o){return w.coerce(x,f,n,t,o)},"box")},_supply:T}},18728:function(C,A,e){"use strict";var v=e(33428),w=e(3400),n=e(43616);function T(s,t,o,r,i){var a,u,l=o.orientation==="h",d=t.val,c=t.pos,_=!!c.rangebreaks,p=r.bPos,g=r.wdPos||0,m=r.bPosPxOffset||0,b=o.whiskerwidth||0,y=o.showwhiskers!==!1,M=o.notched||!1,h=M?1-2*o.notchwidth:1;Array.isArray(r.bdPos)?(a=r.bdPos[0],u=r.bdPos[1]):(a=r.bdPos,u=r.bdPos);var E=s.selectAll("path.box").data(o.type!=="violin"||o.box.visible?w.identity:[]);E.enter().append("path").style("vector-effect",i?"none":"non-scaling-stroke").attr("class","box"),E.exit().remove(),E.each(function(k){if(k.empty)return v.select(this).attr("d","M0,0Z");var D=c.c2l(k.pos+p,!0),P=c.l2p(D-a)+m,L=c.l2p(D+u)+m,O=_?(P+L)/2:c.l2p(D)+m,N=o.whiskerwidth,V=_?P*N+(1-N)*O:c.l2p(D-g)+m,F=_?L*N+(1-N)*O:c.l2p(D+g)+m,j=c.l2p(D-a*h)+m,Z=c.l2p(D+u*h)+m,z=o.sizemode==="sd",H=d.c2p(z?k.mean-k.sd:k.q1,!0),U=z?d.c2p(k.mean+k.sd,!0):d.c2p(k.q3,!0),re=w.constrain(z?d.c2p(k.mean,!0):d.c2p(k.med,!0),Math.min(H,U)+1,Math.max(H,U)-1),ee=k.lf===void 0||o.boxpoints===!1||z,J=d.c2p(ee?k.min:k.lf,!0),Q=d.c2p(ee?k.max:k.uf,!0),ne=d.c2p(k.ln,!0),K=d.c2p(k.un,!0);l?v.select(this).attr("d","M"+re+","+j+"V"+Z+"M"+H+","+P+"V"+L+(M?"H"+ne+"L"+re+","+Z+"L"+K+","+L:"")+"H"+U+"V"+P+(M?"H"+K+"L"+re+","+j+"L"+ne+","+P:"")+"Z"+(y?"M"+H+","+O+"H"+J+"M"+U+","+O+"H"+Q+(b===0?"":"M"+J+","+V+"V"+F+"M"+Q+","+V+"V"+F):"")):v.select(this).attr("d","M"+j+","+re+"H"+Z+"M"+P+","+H+"H"+L+(M?"V"+ne+"L"+Z+","+re+"L"+L+","+K:"")+"V"+U+"H"+P+(M?"V"+K+"L"+j+","+re+"L"+P+","+ne:"")+"Z"+(y?"M"+O+","+H+"V"+J+"M"+O+","+U+"V"+Q+(b===0?"":"M"+V+","+J+"H"+F+"M"+V+","+Q+"H"+F):""))})}function x(s,t,o,r){var i=t.x,a=t.y,u=r.bdPos,l=r.bPos,d=o.boxpoints||o.points;w.seedPseudoRandom();var c=s.selectAll("g.points").data(d?function(p){return p.forEach(function(g){g.t=r,g.trace=o}),p}:[]);c.enter().append("g").attr("class","points"),c.exit().remove();var _=c.selectAll("path").data(function(p){var g,m,b=p.pts2,y=Math.max((p.max-p.min)/10,p.q3-p.q1),M=1e-9*y,h=.01*y,E=[],k=0;if(o.jitter){if(y===0)for(k=1,E=new Array(b.length),g=0;g<b.length;g++)E[g]=1;else for(g=0;g<b.length;g++){var D=Math.max(0,g-5),P=b[D].v,L=Math.min(b.length-1,g+5),O=b[L].v;d!=="all"&&(b[g].v<p.lf?O=Math.min(O,p.lf):P=Math.max(P,p.uf));var N=Math.sqrt(h*(L-D)/(O-P+M))||0;N=w.constrain(Math.abs(N),0,1),E.push(N),k=Math.max(N,k)}m=2*o.jitter/(k||1)}for(g=0;g<b.length;g++){var V=b[g],F=V.v,j=o.jitter?m*E[g]*(w.pseudoRandom()-.5):0,Z=p.pos+l+u*(o.pointpos+j);o.orientation==="h"?(V.y=Z,V.x=F):(V.x=Z,V.y=F),d==="suspectedoutliers"&&F<p.uo&&F>p.lo&&(V.so=!0)}return b});_.enter().append("path").classed("point",!0),_.exit().remove(),_.call(n.translatePoints,i,a)}function f(s,t,o,r){var i,a,u=t.val,l=t.pos,d=!!l.rangebreaks,c=r.bPos,_=r.bPosPxOffset||0,p=o.boxmean||(o.meanline||{}).visible;Array.isArray(r.bdPos)?(i=r.bdPos[0],a=r.bdPos[1]):(i=r.bdPos,a=r.bdPos);var g=s.selectAll("path.mean").data(o.type==="box"&&o.boxmean||o.type==="violin"&&o.box.visible&&o.meanline.visible?w.identity:[]);g.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),g.exit().remove(),g.each(function(m){var b=l.c2l(m.pos+c,!0),y=l.l2p(b-i)+_,M=l.l2p(b+a)+_,h=d?(y+M)/2:l.l2p(b)+_,E=u.c2p(m.mean,!0),k=u.c2p(m.mean-m.sd,!0),D=u.c2p(m.mean+m.sd,!0);o.orientation==="h"?v.select(this).attr("d","M"+E+","+y+"V"+M+(p==="sd"?"m0,0L"+k+","+h+"L"+E+","+y+"L"+D+","+h+"Z":"")):v.select(this).attr("d","M"+y+","+E+"H"+M+(p==="sd"?"m0,0L"+h+","+k+"L"+y+","+E+"L"+h+","+D+"Z":""))})}C.exports={plot:function(s,t,o,r){var i=s._context.staticPlot,a=t.xaxis,u=t.yaxis;w.makeTraceGroups(r,o,"trace boxes").each(function(l){var d,c,_=v.select(this),p=l[0],g=p.t,m=p.trace;g.wdPos=g.bdPos*m.whiskerwidth,m.visible!==!0||g.empty?_.remove():(m.orientation==="h"?(d=u,c=a):(d=a,c=u),T(_,{pos:d,val:c},m,g,i),x(_,{x:a,y:u},m,g),f(_,{pos:d,val:c},m,g))})},plotBoxAndWhiskers:T,plotPoints:x,plotBoxMean:f}},8264:function(C){"use strict";C.exports=function(A,e){var v,w,n=A.cd,T=A.xaxis,x=A.yaxis,f=[];if(e===!1)for(v=0;v<n.length;v++)for(w=0;w<(n[v].pts||[]).length;w++)n[v].pts[w].selected=0;else for(v=0;v<n.length;v++)for(w=0;w<(n[v].pts||[]).length;w++){var s=n[v].pts[w],t=T.c2p(s.x),o=x.c2p(s.y);e.contains([t,o],null,s.i,A)?(f.push({pointNumber:s.i,x:T.c2d(s.x),y:x.c2d(s.y)}),s.selected=1):s.selected=0}return f}},25776:function(C,A,e){"use strict";var v=e(33428),w=e(76308),n=e(43616);C.exports={style:function(T,x,f){var s=f||v.select(T).selectAll("g.trace.boxes");s.style("opacity",function(t){return t[0].trace.opacity}),s.each(function(t){var o=v.select(this),r=t[0].trace,i=r.line.width;function a(d,c,_,p){d.style("stroke-width",c+"px").call(w.stroke,_).call(w.fill,p)}var u=o.selectAll("path.box");if(r.type==="candlestick")u.each(function(d){if(!d.empty){var c=v.select(this),_=r[d.dir];a(c,_.line.width,_.line.color,_.fillcolor),c.style("opacity",r.selectedpoints&&!d.selected?.3:1)}});else{a(u,i,r.line.color,r.fillcolor),o.selectAll("path.mean").style({"stroke-width":i,"stroke-dasharray":2*i+"px,"+i+"px"}).call(w.stroke,r.line.color);var l=o.selectAll("path.point");n.pointStyle(l,r,T)}})},styleOnSelect:function(T,x,f){var s=x[0].trace,t=f.selectAll("path.point");s.selectedpoints?n.selectedPointStyle(t,s):n.pointStyle(t,s,T)}}},64216:function(C,A,e){"use strict";var v=e(3400).extendFlat,w=e(29736).axisHoverFormat,n=e(20279),T=e(63188);function x(f){return{line:{color:v({},T.line.color,{dflt:f}),width:T.line.width,editType:"style"},fillcolor:T.fillcolor,editType:"style"}}C.exports={xperiod:n.xperiod,xperiod0:n.xperiod0,xperiodalignment:n.xperiodalignment,xhoverformat:w("x"),yhoverformat:w("y"),x:n.x,open:n.open,high:n.high,low:n.low,close:n.close,line:{width:v({},T.line.width,{}),editType:"style"},increasing:x(n.increasing.line.color.dflt),decreasing:x(n.decreasing.line.color.dflt),text:n.text,hovertext:n.hovertext,whiskerwidth:v({},T.whiskerwidth,{dflt:0}),hoverlabel:n.hoverlabel,zorder:T.zorder}},46283:function(C,A,e){"use strict";var v=e(3400),w=e(54460),n=e(1220),T=e(42812).calcCommon;function x(f,s,t,o){return{min:t,q1:Math.min(f,o),med:o,q3:Math.max(f,o),max:s}}C.exports=function(f,s){var t=f._fullLayout,o=w.getFromId(f,s.xaxis),r=w.getFromId(f,s.yaxis),i=o.makeCalcdata(s,"x"),a=n(s,o,"x",i).vals,u=T(f,s,i,a,r,x);return u.length?(v.extendFlat(u[0].t,{num:t._numBoxes,dPos:v.distinctVals(a).minDiff/2,posLetter:"x",valLetter:"y"}),t._numBoxes++,u):[{t:{empty:!0}}]}},64588:function(C,A,e){"use strict";var v=e(3400),w=e(76308),n=e(52744),T=e(31147),x=e(64216);function f(s,t,o,r){var i=o(r+".line.color");o(r+".line.width",t.line.width),o(r+".fillcolor",w.addOpacity(i,.5))}C.exports=function(s,t,o,r){function i(a,u){return v.coerce(s,t,x,a,u)}n(s,t,i,r)?(T(s,t,r,i,{x:!0}),i("xhoverformat"),i("yhoverformat"),i("line.width"),f(0,t,i,"increasing"),f(0,t,i,"decreasing"),i("text"),i("hovertext"),i("whiskerwidth"),r._requestRangeslider[t.xaxis]=!0,i("zorder")):t.visible=!1}},61712:function(C,A,e){"use strict";C.exports={moduleType:"trace",name:"candlestick",basePlotModule:e(57952),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:e(64216),layoutAttributes:e(16560),supplyLayoutDefaults:e(68832).supplyLayoutDefaults,crossTraceCalc:e(96404).crossTraceCalc,supplyDefaults:e(64588),calc:e(46283),plot:e(18728).plot,layerName:"boxlayer",style:e(25776).style,hoverPoints:e(18720).hoverPoints,selectPoints:e(97384)}},93504:function(C,A,e){"use strict";var v=e(63856),w=e(31780);C.exports=function(n,T,x,f,s){f("a")||(f("da"),f("a0")),f("b")||(f("db"),f("b0")),function(t,o,r,i){["aaxis","baxis"].forEach(function(a){var u=a.charAt(0),l=t[a]||{},d=w.newContainer(o,a),c={noAutotickangles:!0,noTicklabelstep:!0,tickfont:"x",id:u+"axis",letter:u,font:o.font,name:a,data:t[u],calendar:o.calendar,dfltColor:i,bgColor:r.paper_bgcolor,autotypenumbersDflt:r.autotypenumbers,fullLayout:r};v(l,d,c),d._categories=d._categories||[],t[a]||l.type==="-"||(t[a]={type:l.type})})}(n,T,x,s)}},51676:function(C,A,e){"use strict";var v=e(3400).isArrayOrTypedArray;function w(n,T){if(!v(n)||T>=10)return null;for(var x=1/0,f=-1/0,s=n.length,t=0;t<s;t++){var o=n[t];if(v(o)){var r=w(o,T+1);r&&(x=Math.min(r[0],x),f=Math.max(r[1],f))}else x=Math.min(o,x),f=Math.max(o,f)}return[x,f]}C.exports=function(n){return w(n,0)}},85720:function(C,A,e){"use strict";var v=e(25376),w=e(98692),n=e(22548),T=v({editType:"calc"}),x=e(52904).zorder;T.family.dflt='"Open Sans", verdana, arial, sans-serif',T.size.dflt=12,T.color.dflt=n.defaultLine,C.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:w,baxis:w,font:T,color:{valType:"color",dflt:n.defaultLine,editType:"plot"},transforms:void 0,zorder:x}},77712:function(C,A,e){"use strict";var v=e(3400).isArrayOrTypedArray;C.exports=function(w,n,T,x){var f,s,t,o,r,i,a,u,l,d,c,_,p,g=v(T)?"a":"b",m=(g==="a"?w.aaxis:w.baxis).smoothing,b=g==="a"?w.a2i:w.b2j,y=g==="a"?T:x,M=g==="a"?x:T,h=g==="a"?n.a.length:n.b.length,E=g==="a"?n.b.length:n.a.length,k=Math.floor(g==="a"?w.b2j(M):w.a2i(M)),D=g==="a"?function(re){return w.evalxy([],re,k)}:function(re){return w.evalxy([],k,re)};m&&(t=Math.max(0,Math.min(E-2,k)),o=k-t,s=g==="a"?function(re,ee){return w.dxydi([],re,t,ee,o)}:function(re,ee){return w.dxydj([],t,re,o,ee)});var P=b(y[0]),L=b(y[1]),O=P<L?1:-1,N=1e-8*(L-P),V=O>0?Math.floor:Math.ceil,F=O>0?Math.ceil:Math.floor,j=O>0?Math.min:Math.max,Z=O>0?Math.max:Math.min,z=V(P+N),H=F(L-N),U=[[a=D(P)]];for(f=z;f*O<H*O;f+=O)r=[],c=Z(P,f),p=(_=j(L,f+O))-c,i=Math.max(0,Math.min(h-2,Math.floor(.5*(c+_)))),u=D(_),m&&(l=s(i,c-i),d=s(i,_-i),r.push([a[0]+l[0]/3*p,a[1]+l[1]/3*p]),r.push([u[0]-d[0]/3*p,u[1]-d[1]/3*p])),r.push(u),U.push(r),a=u;return U}},98692:function(C,A,e){"use strict";var v=e(25376),w=e(22548),n=e(94724),T=e(29736).descriptionWithDates,x=e(67824).overrideAll,f=e(98192).u,s=e(92880).extendFlat;C.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:v({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:n.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},labelalias:s({},n.labelalias,{editType:"calc"}),tickfont:v({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:T("tick label")},tickformatstops:x(n.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:w.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:s({},f,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:s({},f,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:w.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:v({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},63856:function(C,A,e){"use strict";var v=e(85720),w=e(76308).addOpacity,n=e(24040),T=e(3400),x=e(26332),f=e(95936),s=e(42568),t=e(22416),o=e(78344),r=e(52976);C.exports=function(i,a,u){var l=u.letter,d=u.font||{},c=v[l+"axis"];function _(O,N){return T.coerce(i,a,c,O,N)}function p(O,N){return T.coerce2(i,a,c,O,N)}u.name&&(a._name=u.name,a._id=u.name),_("autotypenumbers",u.autotypenumbersDflt);var g=_("type");g==="-"&&(u.data&&function(O,N){if(O.type==="-"){var V=O._id.charAt(0),F=O[V+"calendar"];O.type=r(N,F,{autotypenumbers:O.autotypenumbers})}}(a,u.data),a.type==="-"?a.type="linear":g=i.type=a.type),_("smoothing"),_("cheatertype"),_("showticklabels"),_("labelprefix",l+" = "),_("labelsuffix"),_("showtickprefix"),_("showticksuffix"),_("separatethousands"),_("tickformat"),_("exponentformat"),_("minexponent"),_("showexponent"),_("categoryorder"),_("tickmode"),_("tickvals"),_("ticktext"),_("tick0"),_("dtick"),a.tickmode==="array"&&(_("arraytick0"),_("arraydtick")),_("labelpadding"),a._hovertitle=l,g==="date"&&n.getComponentMethod("calendars","handleDefaults")(i,a,"calendar",u.calendar),o(a,u.fullLayout),a.c2p=T.identity;var m=_("color",u.dfltColor),b=m===i.color?m:d.color;_("title.text")&&(T.coerceFont(_,"title.font",{weight:d.weight,style:d.style,variant:d.variant,family:d.family,size:T.bigFont(d.size),color:b}),_("title.offset")),_("tickangle"),_("autorange",!a.isValidRange(i.range))&&_("rangemode"),_("range"),a.cleanRange(),_("fixedrange"),x(i,a,_,g),s(i,a,_,g,u),f(i,a,_,g,u),t(i,a,_,{data:u.data,dataAttr:l});var y=p("gridcolor",w(m,.3)),M=p("gridwidth"),h=p("griddash"),E=_("showgrid");E||(delete a.gridcolor,delete a.gridwidth,delete a.griddash);var k=p("startlinecolor",m),D=p("startlinewidth",M);_("startline",a.showgrid||!!k||!!D)||(delete a.startlinecolor,delete a.startlinewidth);var P=p("endlinecolor",m),L=p("endlinewidth",M);return _("endline",a.showgrid||!!P||!!L)||(delete a.endlinecolor,delete a.endlinewidth),E?(_("minorgridcount"),_("minorgridwidth",M),_("minorgriddash",h),_("minorgridcolor",w(y,.06)),a.minorgridcount||(delete a.minorgridwidth,delete a.minorgriddash,delete a.minorgridcolor)):(delete a.gridcolor,delete a.gridwidth,delete a.griddash),a.showticklabels==="none"&&(delete a.tickfont,delete a.tickangle,delete a.showexponent,delete a.exponentformat,delete a.minexponent,delete a.tickformat,delete a.showticksuffix,delete a.showtickprefix),a.showticksuffix||delete a.ticksuffix,a.showtickprefix||delete a.tickprefix,_("tickmode"),a}},58744:function(C,A,e){"use strict";var v=e(54460),w=e(3400).isArray1D,n=e(60776),T=e(51676),x=e(19216),f=e(14724),s=e(24944),t=e(26136),o=e(51512),r=e(2872),i=e(81e3);C.exports=function(a,u){var l=v.getFromId(a,u.xaxis),d=v.getFromId(a,u.yaxis),c=u.aaxis,_=u.baxis,p=u.x,g=u.y,m=[];p&&w(p)&&m.push("x"),g&&w(g)&&m.push("y"),m.length&&r(u,c,_,"a","b",m);var b=u._a=u._a||u.a,y=u._b=u._b||u.b;p=u._x||u.x,g=u._y||u.y;var M={};if(u._cheater){var h=c.cheatertype==="index"?b.length:b,E=_.cheatertype==="index"?y.length:y;p=n(h,E,u.cheaterslope)}u._x=p=t(p),u._y=g=t(g),o(p,b,y),o(g,b,y),i(u),u.setScale();var k=T(p),D=T(g),P=.5*(k[1]-k[0]),L=.5*(k[1]+k[0]),O=.5*(D[1]-D[0]),N=.5*(D[1]+D[0]),V=1.3;return k=[L-P*V,L+P*V],D=[N-O*V,N+O*V],u._extremes[l._id]=v.findExtremes(l,k,{padded:!0}),u._extremes[d._id]=v.findExtremes(d,D,{padded:!0}),x(u,"a","b"),x(u,"b","a"),f(u,c),f(u,_),M.clipsegments=s(u._xctrl,u._yctrl,c,_),M.x=p,M.y=g,M.a=b,M.b=y,[M]}},24944:function(C){"use strict";C.exports=function(A,e,v,w){var n,T,x,f=[],s=!!v.smoothing,t=!!w.smoothing,o=A[0].length-1,r=A.length-1;for(n=0,T=[],x=[];n<=o;n++)T[n]=A[0][n],x[n]=e[0][n];for(f.push({x:T,y:x,bicubic:s}),n=0,T=[],x=[];n<=r;n++)T[n]=A[n][o],x[n]=e[n][o];for(f.push({x:T,y:x,bicubic:t}),n=o,T=[],x=[];n>=0;n--)T[o-n]=A[r][n],x[o-n]=e[r][n];for(f.push({x:T,y:x,bicubic:s}),n=r,T=[],x=[];n>=0;n--)T[r-n]=A[n][0],x[r-n]=e[n][0];return f.push({x:T,y:x,bicubic:t}),f}},19216:function(C,A,e){"use strict";var v=e(54460),w=e(92880).extendFlat;C.exports=function(n,T,x){var f,s,t,o,r,i,a,u,l,d,c,_,p,g,m=n["_"+T],b=n[T+"axis"],y=b._gridlines=[],M=b._minorgridlines=[],h=b._boundarylines=[],E=n["_"+x],k=n[x+"axis"];b.tickmode==="array"&&(b.tickvals=m.slice());var D=n._xctrl,P=n._yctrl,L=D[0].length,O=D.length,N=n._a.length,V=n._b.length;v.prepTicks(b),b.tickmode==="array"&&delete b.tickvals;var F=b.smoothing?3:1;function j(z){var H,U,re,ee,J,Q,ne,K,oe,le,se,de,be=[],_e=[],xe={};if(T==="b")for(U=n.b2j(z),re=Math.floor(Math.max(0,Math.min(V-2,U))),ee=U-re,xe.length=V,xe.crossLength=N,xe.xy=function(ve){return n.evalxy([],ve,U)},xe.dxy=function(ve,ye){return n.dxydi([],ve,re,ye,ee)},H=0;H<N;H++)Q=Math.min(N-2,H),ne=H-Q,K=n.evalxy([],H,U),k.smoothing&&H>0&&(oe=n.dxydi([],H-1,re,0,ee),be.push(J[0]+oe[0]/3),_e.push(J[1]+oe[1]/3),le=n.dxydi([],H-1,re,1,ee),be.push(K[0]-le[0]/3),_e.push(K[1]-le[1]/3)),be.push(K[0]),_e.push(K[1]),J=K;else for(H=n.a2i(z),Q=Math.floor(Math.max(0,Math.min(N-2,H))),ne=H-Q,xe.length=N,xe.crossLength=V,xe.xy=function(ve){return n.evalxy([],H,ve)},xe.dxy=function(ve,ye){return n.dxydj([],Q,ve,ne,ye)},U=0;U<V;U++)re=Math.min(V-2,U),ee=U-re,K=n.evalxy([],H,U),k.smoothing&&U>0&&(se=n.dxydj([],Q,U-1,ne,0),be.push(J[0]+se[0]/3),_e.push(J[1]+se[1]/3),de=n.dxydj([],Q,U-1,ne,1),be.push(K[0]-de[0]/3),_e.push(K[1]-de[1]/3)),be.push(K[0]),_e.push(K[1]),J=K;return xe.axisLetter=T,xe.axis=b,xe.crossAxis=k,xe.value=z,xe.constvar=x,xe.index=u,xe.x=be,xe.y=_e,xe.smoothing=k.smoothing,xe}function Z(z){var H,U,re,ee,J,Q=[],ne=[],K={};if(K.length=m.length,K.crossLength=E.length,T==="b")for(re=Math.max(0,Math.min(V-2,z)),J=Math.min(1,Math.max(0,z-re)),K.xy=function(oe){return n.evalxy([],oe,z)},K.dxy=function(oe,le){return n.dxydi([],oe,re,le,J)},H=0;H<L;H++)Q[H]=D[z*F][H],ne[H]=P[z*F][H];else for(U=Math.max(0,Math.min(N-2,z)),ee=Math.min(1,Math.max(0,z-U)),K.xy=function(oe){return n.evalxy([],z,oe)},K.dxy=function(oe,le){return n.dxydj([],U,oe,ee,le)},H=0;H<O;H++)Q[H]=D[H][z*F],ne[H]=P[H][z*F];return K.axisLetter=T,K.axis=b,K.crossAxis=k,K.value=m[z],K.constvar=x,K.index=z,K.x=Q,K.y=ne,K.smoothing=k.smoothing,K}if(b.tickmode==="array"){for(o=5e-15,i=(r=[Math.floor((m.length-1-b.arraytick0)/b.arraydtick*(1+o)),Math.ceil(-b.arraytick0/b.arraydtick/(1+o))].sort(function(z,H){return z-H}))[0]-1,a=r[1]+1,u=i;u<a;u++)(s=b.arraytick0+b.arraydtick*u)<0||s>m.length-1||y.push(w(Z(s),{color:b.gridcolor,width:b.gridwidth,dash:b.griddash}));for(u=i;u<a;u++)if(t=b.arraytick0+b.arraydtick*u,c=Math.min(t+b.arraydtick,m.length-1),!(t<0||t>m.length-1||c<0||c>m.length-1))for(_=m[t],p=m[c],f=0;f<b.minorgridcount;f++)(g=c-t)<=0||(d=_+(p-_)*(f+1)/(b.minorgridcount+1)*(b.arraydtick/g))<m[0]||d>m[m.length-1]||M.push(w(j(d),{color:b.minorgridcolor,width:b.minorgridwidth,dash:b.minorgriddash}));b.startline&&h.push(w(Z(0),{color:b.startlinecolor,width:b.startlinewidth})),b.endline&&h.push(w(Z(m.length-1),{color:b.endlinecolor,width:b.endlinewidth}))}else{for(o=5e-15,i=(r=[Math.floor((m[m.length-1]-b.tick0)/b.dtick*(1+o)),Math.ceil((m[0]-b.tick0)/b.dtick/(1+o))].sort(function(z,H){return z-H}))[0],a=r[1],u=i;u<=a;u++)l=b.tick0+b.dtick*u,y.push(w(j(l),{color:b.gridcolor,width:b.gridwidth,dash:b.griddash}));for(u=i-1;u<a+1;u++)for(l=b.tick0+b.dtick*u,f=0;f<b.minorgridcount;f++)(d=l+b.dtick*(f+1)/(b.minorgridcount+1))<m[0]||d>m[m.length-1]||M.push(w(j(d),{color:b.minorgridcolor,width:b.minorgridwidth,dash:b.minorgriddash}));b.startline&&h.push(w(j(m[0]),{color:b.startlinecolor,width:b.startlinewidth})),b.endline&&h.push(w(j(m[m.length-1]),{color:b.endlinecolor,width:b.endlinewidth}))}}},14724:function(C,A,e){"use strict";var v=e(54460),w=e(92880).extendFlat;C.exports=function(n,T){var x,f,s,t=T._labels=[],o=T._gridlines;for(x=0;x<o.length;x++)s=o[x],["start","both"].indexOf(T.showticklabels)!==-1&&(f=v.tickText(T,s.value),w(f,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:s.xy(0),dxy:s.dxy(0,0),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:x===0,isLast:x===o.length-1}),t.push(f)),["end","both"].indexOf(T.showticklabels)!==-1&&(f=v.tickText(T,s.value),w(f,{endAnchor:!1,xy:s.xy(s.crossLength-1),dxy:s.dxy(s.crossLength-2,1),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:x===0,isLast:x===o.length-1}),t.push(f))}},62284:function(C){"use strict";C.exports=function(A,e,v,w){var n=A[0]-e[0],T=A[1]-e[1],x=v[0]-e[0],f=v[1]-e[1],s=Math.pow(n*n+T*T,.25),t=Math.pow(x*x+f*f,.25),o=(t*t*n-s*s*x)*w,r=(t*t*T-s*s*f)*w,i=t*(s+t)*3,a=s*(s+t)*3;return[[e[0]+(i&&o/i),e[1]+(i&&r/i)],[e[0]-(a&&o/a),e[1]-(a&&r/a)]]}},60776:function(C,A,e){"use strict";var v=e(3400).isArrayOrTypedArray;C.exports=function(w,n,T){var x,f,s,t,o,r,i=[],a=v(w)?w.length:w,u=v(n)?n.length:n,l=v(w)?w:null,d=v(n)?n:null;l&&(s=(l.length-1)/(l[l.length-1]-l[0])/(a-1)),d&&(t=(d.length-1)/(d[d.length-1]-d[0])/(u-1));var c=1/0,_=-1/0;for(f=0;f<u;f++)for(i[f]=[],o=d?(d[f]-d[0])*t:f/(u-1),x=0;x<a;x++)r=(l?(l[x]-l[0])*s:x/(a-1))-o*T,c=Math.min(r,c),_=Math.max(r,_),i[f][x]=r;var p=1/(_-c),g=-c*p;for(f=0;f<u;f++)for(x=0;x<a;x++)i[f][x]=p*i[f][x]+g;return i}},30180:function(C,A,e){"use strict";var v=e(62284),w=e(3400).ensureArray;function n(T,x,f){var s=-.5*f[0]+1.5*x[0],t=-.5*f[1]+1.5*x[1];return[(2*s+T[0])/3,(2*t+T[1])/3]}C.exports=function(T,x,f,s,t,o){var r,i,a,u,l,d,c,_,p,g,m=f[0].length,b=f.length,y=t?3*m-2:m,M=o?3*b-2:b;for(T=w(T,M),x=w(x,M),a=0;a<M;a++)T[a]=w(T[a],y),x[a]=w(x[a],y);for(i=0,u=0;i<b;i++,u+=o?3:1)for(l=T[u],d=x[u],c=f[i],_=s[i],r=0,a=0;r<m;r++,a+=t?3:1)l[a]=c[r],d[a]=_[r];if(t)for(i=0,u=0;i<b;i++,u+=o?3:1){for(r=1,a=3;r<m-1;r++,a+=3)p=v([f[i][r-1],s[i][r-1]],[f[i][r],s[i][r]],[f[i][r+1],s[i][r+1]],t),T[u][a-1]=p[0][0],x[u][a-1]=p[0][1],T[u][a+1]=p[1][0],x[u][a+1]=p[1][1];g=n([T[u][0],x[u][0]],[T[u][2],x[u][2]],[T[u][3],x[u][3]]),T[u][1]=g[0],x[u][1]=g[1],g=n([T[u][y-1],x[u][y-1]],[T[u][y-3],x[u][y-3]],[T[u][y-4],x[u][y-4]]),T[u][y-2]=g[0],x[u][y-2]=g[1]}if(o)for(a=0;a<y;a++){for(u=3;u<M-3;u+=3)p=v([T[u-3][a],x[u-3][a]],[T[u][a],x[u][a]],[T[u+3][a],x[u+3][a]],o),T[u-1][a]=p[0][0],x[u-1][a]=p[0][1],T[u+1][a]=p[1][0],x[u+1][a]=p[1][1];g=n([T[0][a],x[0][a]],[T[2][a],x[2][a]],[T[3][a],x[3][a]]),T[1][a]=g[0],x[1][a]=g[1],g=n([T[M-1][a],x[M-1][a]],[T[M-3][a],x[M-3][a]],[T[M-4][a],x[M-4][a]]),T[M-2][a]=g[0],x[M-2][a]=g[1]}if(t&&o)for(u=1;u<M;u+=(u+1)%3==0?2:1){for(a=3;a<y-3;a+=3)p=v([T[u][a-3],x[u][a-3]],[T[u][a],x[u][a]],[T[u][a+3],x[u][a+3]],t),T[u][a-1]=.5*(T[u][a-1]+p[0][0]),x[u][a-1]=.5*(x[u][a-1]+p[0][1]),T[u][a+1]=.5*(T[u][a+1]+p[1][0]),x[u][a+1]=.5*(x[u][a+1]+p[1][1]);g=n([T[u][0],x[u][0]],[T[u][2],x[u][2]],[T[u][3],x[u][3]]),T[u][1]=.5*(T[u][1]+g[0]),x[u][1]=.5*(x[u][1]+g[1]),g=n([T[u][y-1],x[u][y-1]],[T[u][y-3],x[u][y-3]],[T[u][y-4],x[u][y-4]]),T[u][y-2]=.5*(T[u][y-2]+g[0]),x[u][y-2]=.5*(x[u][y-2]+g[1])}return[T,x]}},24588:function(C){"use strict";C.exports={RELATIVE_CULL_TOLERANCE:1e-6}},26435:function(C){"use strict";C.exports=function(A,e,v){return e&&v?function(w,n,T,x,f){var s,t,o,r,i,a;w||(w=[]),n*=3,T*=3;var u=x*x,l=1-x,d=l*l,c=l*x*2,_=-3*d,p=3*(d-c),g=3*(c-u),m=3*u,b=f*f,y=b*f,M=1-f,h=M*M,E=h*M;for(a=0;a<A.length;a++)s=_*(i=A[a])[T][n]+p*i[T][n+1]+g*i[T][n+2]+m*i[T][n+3],t=_*i[T+1][n]+p*i[T+1][n+1]+g*i[T+1][n+2]+m*i[T+1][n+3],o=_*i[T+2][n]+p*i[T+2][n+1]+g*i[T+2][n+2]+m*i[T+2][n+3],r=_*i[T+3][n]+p*i[T+3][n+1]+g*i[T+3][n+2]+m*i[T+3][n+3],w[a]=E*s+3*(h*f*t+M*b*o)+y*r;return w}:e?function(w,n,T,x,f){var s,t,o,r;w||(w=[]),n*=3;var i=x*x,a=1-x,u=a*a,l=a*x*2,d=-3*u,c=3*(u-l),_=3*(l-i),p=3*i,g=1-f;for(o=0;o<A.length;o++)s=d*(r=A[o])[T][n]+c*r[T][n+1]+_*r[T][n+2]+p*r[T][n+3],t=d*r[T+1][n]+c*r[T+1][n+1]+_*r[T+1][n+2]+p*r[T+1][n+3],w[o]=g*s+f*t;return w}:v?function(w,n,T,x,f){var s,t,o,r,i,a;w||(w=[]),T*=3;var u=f*f,l=u*f,d=1-f,c=d*d,_=c*d;for(i=0;i<A.length;i++)s=(a=A[i])[T][n+1]-a[T][n],t=a[T+1][n+1]-a[T+1][n],o=a[T+2][n+1]-a[T+2][n],r=a[T+3][n+1]-a[T+3][n],w[i]=_*s+3*(c*f*t+d*u*o)+l*r;return w}:function(w,n,T,x,f){var s,t,o,r;w||(w=[]);var i=1-f;for(o=0;o<A.length;o++)s=(r=A[o])[T][n+1]-r[T][n],t=r[T+1][n+1]-r[T+1][n],w[o]=i*s+f*t;return w}}},24464:function(C){"use strict";C.exports=function(A,e,v){return e&&v?function(w,n,T,x,f){var s,t,o,r,i,a;w||(w=[]),n*=3,T*=3;var u=x*x,l=u*x,d=1-x,c=d*d,_=c*d,p=f*f,g=1-f,m=g*g,b=g*f*2,y=-3*m,M=3*(m-b),h=3*(b-p),E=3*p;for(a=0;a<A.length;a++)s=y*(i=A[a])[T][n]+M*i[T+1][n]+h*i[T+2][n]+E*i[T+3][n],t=y*i[T][n+1]+M*i[T+1][n+1]+h*i[T+2][n+1]+E*i[T+3][n+1],o=y*i[T][n+2]+M*i[T+1][n+2]+h*i[T+2][n+2]+E*i[T+3][n+2],r=y*i[T][n+3]+M*i[T+1][n+3]+h*i[T+2][n+3]+E*i[T+3][n+3],w[a]=_*s+3*(c*x*t+d*u*o)+l*r;return w}:e?function(w,n,T,x,f){var s,t,o,r,i,a;w||(w=[]),n*=3;var u=f*f,l=u*f,d=1-f,c=d*d,_=c*d;for(i=0;i<A.length;i++)s=(a=A[i])[T+1][n]-a[T][n],t=a[T+1][n+1]-a[T][n+1],o=a[T+1][n+2]-a[T][n+2],r=a[T+1][n+3]-a[T][n+3],w[i]=_*s+3*(c*f*t+d*u*o)+l*r;return w}:v?function(w,n,T,x,f){var s,t,o,r;w||(w=[]),T*=3;var i=1-x,a=f*f,u=1-f,l=u*u,d=u*f*2,c=-3*l,_=3*(l-d),p=3*(d-a),g=3*a;for(o=0;o<A.length;o++)s=c*(r=A[o])[T][n]+_*r[T+1][n]+p*r[T+2][n]+g*r[T+3][n],t=c*r[T][n+1]+_*r[T+1][n+1]+p*r[T+2][n+1]+g*r[T+3][n+1],w[o]=i*s+x*t;return w}:function(w,n,T,x,f){var s,t,o,r;w||(w=[]);var i=1-x;for(o=0;o<A.length;o++)s=(r=A[o])[T+1][n]-r[T][n],t=r[T+1][n+1]-r[T][n+1],w[o]=i*s+x*t;return w}}},29056:function(C){"use strict";C.exports=function(A,e,v,w,n){var T=e-2,x=v-2;return w&&n?function(f,s,t){var o,r,i,a,u,l;f||(f=[]);var d=Math.max(0,Math.min(Math.floor(s),T)),c=Math.max(0,Math.min(Math.floor(t),x)),_=Math.max(0,Math.min(1,s-d)),p=Math.max(0,Math.min(1,t-c));d*=3,c*=3;var g=_*_,m=g*_,b=1-_,y=b*b,M=y*b,h=p*p,E=h*p,k=1-p,D=k*k,P=D*k;for(l=0;l<A.length;l++)o=M*(u=A[l])[c][d]+3*(y*_*u[c][d+1]+b*g*u[c][d+2])+m*u[c][d+3],r=M*u[c+1][d]+3*(y*_*u[c+1][d+1]+b*g*u[c+1][d+2])+m*u[c+1][d+3],i=M*u[c+2][d]+3*(y*_*u[c+2][d+1]+b*g*u[c+2][d+2])+m*u[c+2][d+3],a=M*u[c+3][d]+3*(y*_*u[c+3][d+1]+b*g*u[c+3][d+2])+m*u[c+3][d+3],f[l]=P*o+3*(D*p*r+k*h*i)+E*a;return f}:w?function(f,s,t){f||(f=[]);var o,r,i,a,u,l,d=Math.max(0,Math.min(Math.floor(s),T)),c=Math.max(0,Math.min(Math.floor(t),x)),_=Math.max(0,Math.min(1,s-d)),p=Math.max(0,Math.min(1,t-c));d*=3;var g=_*_,m=g*_,b=1-_,y=b*b,M=y*b,h=1-p;for(u=0;u<A.length;u++)o=h*(l=A[u])[c][d]+p*l[c+1][d],r=h*l[c][d+1]+p*l[c+1][d+1],i=h*l[c][d+2]+p*l[c+1][d+1],a=h*l[c][d+3]+p*l[c+1][d+1],f[u]=M*o+3*(y*_*r+b*g*i)+m*a;return f}:n?function(f,s,t){f||(f=[]);var o,r,i,a,u,l,d=Math.max(0,Math.min(Math.floor(s),T)),c=Math.max(0,Math.min(Math.floor(t),x)),_=Math.max(0,Math.min(1,s-d)),p=Math.max(0,Math.min(1,t-c));c*=3;var g=p*p,m=g*p,b=1-p,y=b*b,M=y*b,h=1-_;for(u=0;u<A.length;u++)o=h*(l=A[u])[c][d]+_*l[c][d+1],r=h*l[c+1][d]+_*l[c+1][d+1],i=h*l[c+2][d]+_*l[c+2][d+1],a=h*l[c+3][d]+_*l[c+3][d+1],f[u]=M*o+3*(y*p*r+b*g*i)+m*a;return f}:function(f,s,t){f||(f=[]);var o,r,i,a,u=Math.max(0,Math.min(Math.floor(s),T)),l=Math.max(0,Math.min(Math.floor(t),x)),d=Math.max(0,Math.min(1,s-u)),c=Math.max(0,Math.min(1,t-l)),_=1-c,p=1-d;for(i=0;i<A.length;i++)o=p*(a=A[i])[l][u]+d*a[l][u+1],r=p*a[l+1][u]+d*a[l+1][u+1],f[i]=_*o+c*r;return f}}},38356:function(C,A,e){"use strict";var v=e(3400),w=e(86411),n=e(93504),T=e(85720),x=e(22548);C.exports=function(f,s,t,o){function r(a,u){return v.coerce(f,s,T,a,u)}s._clipPathId="clip"+s.uid+"carpet";var i=r("color",x.defaultLine);v.coerceFont(r,"font",o.font),r("carpet"),n(f,s,o,r,i),s.a&&s.b?(s.a.length<3&&(s.aaxis.smoothing=0),s.b.length<3&&(s.baxis.smoothing=0),w(f,s,r)||(s.visible=!1),s._cheater&&r("cheaterslope"),r("zorder")):s.visible=!1}},95856:function(C,A,e){"use strict";C.exports={attributes:e(85720),supplyDefaults:e(38356),plot:e(164),calc:e(58744),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:e(57952),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},50948:function(C){"use strict";C.exports=function(A,e){for(var v,w=A._fullData.length,n=0;n<w;n++){var T=A._fullData[n];if(T.index!==e.index&&T.type==="carpet"&&(v||(v=T),T.carpet===e.carpet))return T}return v}},53416:function(C){"use strict";C.exports=function(A,e,v){if(A.length===0)return"";var w,n=[],T=v?3:1;for(w=0;w<A.length;w+=T)n.push(A[w]+","+e[w]),v&&w<A.length-T&&(n.push("C"),n.push([A[w+1]+","+e[w+1],A[w+2]+","+e[w+2]+" "].join(" ")));return n.join(v?"":"L")}},87072:function(C,A,e){"use strict";var v=e(3400).isArrayOrTypedArray;C.exports=function(w,n,T){var x;for(v(w)?w.length>n.length&&(w=w.slice(0,n.length)):w=[],x=0;x<n.length;x++)w[x]=T(n[x]);return w}},15584:function(C){"use strict";C.exports=function(A,e,v,w,n,T){var x=n[0]*A.dpdx(e),f=n[1]*A.dpdy(v),s=1,t=1;if(T){var o=Math.sqrt(n[0]*n[0]+n[1]*n[1]),r=Math.sqrt(T[0]*T[0]+T[1]*T[1]),i=(n[0]*T[0]+n[1]*T[1])/o/r;t=Math.max(0,i)}var a=180*Math.atan2(f,x)/Math.PI;return a<-90?(a+=180,s=-s):a>90&&(a-=180,s=-s),{angle:a,flip:s,p:A.c2p(w,e,v),offsetMultplier:t}}},164:function(C,A,e){"use strict";var v=e(33428),w=e(43616),n=e(87072),T=e(53416),x=e(15584),f=e(72736),s=e(3400),t=s.strRotate,o=s.strTranslate,r=e(84284);function i(c,_,p,g,m,b,y){var M="const-"+m+"-lines",h=p.selectAll("."+M).data(b);h.enter().append("path").classed(M,!0).style("vector-effect",y?"none":"non-scaling-stroke"),h.each(function(E){var k=E,D=k.x,P=k.y,L=n([],D,c.c2p),O=n([],P,_.c2p),N="M"+T(L,O,k.smoothing);v.select(this).attr("d",N).style("stroke-width",k.width).style("stroke",k.color).style("stroke-dasharray",w.dashStyle(k.dash,k.width)).style("fill","none")}),h.exit().remove()}function a(c,_,p,g,m,b,y,M){var h=b.selectAll("text."+M).data(y);h.enter().append("text").classed(M,!0);var E=0,k={};return h.each(function(D,P){var L;if(D.axis.tickangle==="auto")L=x(g,_,p,D.xy,D.dxy);else{var O=(D.axis.tickangle+180)*Math.PI/180;L=x(g,_,p,D.xy,[Math.cos(O),Math.sin(O)])}P||(k={angle:L.angle,flip:L.flip});var N=(D.endAnchor?-1:1)*L.flip,V=v.select(this).attr({"text-anchor":N>0?"start":"end","data-notex":1}).call(w.font,D.font).text(D.text).call(f.convertToTspans,c),F=w.bBox(this);V.attr("transform",o(L.p[0],L.p[1])+t(L.angle)+o(D.axis.labelpadding*N,.3*F.height)),E=Math.max(E,F.width+D.axis.labelpadding)}),h.exit().remove(),k.maxExtent=E,k}C.exports=function(c,_,p,g){var m=c._context.staticPlot,b=_.xaxis,y=_.yaxis,M=c._fullLayout._clips;s.makeTraceGroups(g,p,"trace").each(function(h){var E=v.select(this),k=h[0],D=k.trace,P=D.aaxis,L=D.baxis,O=s.ensureSingle(E,"g","minorlayer"),N=s.ensureSingle(E,"g","majorlayer"),V=s.ensureSingle(E,"g","boundarylayer"),F=s.ensureSingle(E,"g","labellayer");E.style("opacity",D.opacity),i(b,y,N,0,"a",P._gridlines,!0),i(b,y,N,0,"b",L._gridlines,!0),i(b,y,O,0,"a",P._minorgridlines,!0),i(b,y,O,0,"b",L._minorgridlines,!0),i(b,y,V,0,"a-boundary",P._boundarylines,m),i(b,y,V,0,"b-boundary",L._boundarylines,m);var j=a(c,b,y,D,0,F,P._labels,"a-label"),Z=a(c,b,y,D,0,F,L._labels,"b-label");(function(z,H,U,re,ee,J,Q,ne){var K,oe,le,se,de=s.aggNums(Math.min,null,U.a),be=s.aggNums(Math.max,null,U.a),_e=s.aggNums(Math.min,null,U.b),xe=s.aggNums(Math.max,null,U.b);K=.5*(de+be),oe=_e,le=U.ab2xy(K,oe,!0),se=U.dxyda_rough(K,oe),Q.angle===void 0&&s.extendFlat(Q,x(U,ee,J,le,U.dxydb_rough(K,oe))),d(z,H,U,0,le,se,U.aaxis,ee,J,Q,"a-title"),K=de,oe=.5*(_e+xe),le=U.ab2xy(K,oe,!0),se=U.dxydb_rough(K,oe),ne.angle===void 0&&s.extendFlat(ne,x(U,ee,J,le,U.dxyda_rough(K,oe))),d(z,H,U,0,le,se,U.baxis,ee,J,ne,"b-title")})(c,F,D,0,b,y,j,Z),function(z,H,U,re,ee){var J,Q,ne,K,oe=U.select("#"+z._clipPathId);oe.size()||(oe=U.append("clipPath").classed("carpetclip",!0));var le=s.ensureSingle(oe,"path","carpetboundary"),se=H.clipsegments,de=[];for(K=0;K<se.length;K++)J=se[K],Q=n([],J.x,re.c2p),ne=n([],J.y,ee.c2p),de.push(T(Q,ne,J.bicubic));var be="M"+de.join("L")+"Z";oe.attr("id",z._clipPathId),le.attr("d",be)}(D,k,M,b,y)})};var u=r.LINE_SPACING,l=(1-r.MID_SHIFT)/u+1;function d(c,_,p,g,m,b,y,M,h,E,k){var D=[];y.title.text&&D.push(y.title.text);var P=_.selectAll("text."+k).data(D),L=E.maxExtent;P.enter().append("text").classed(k,!0),P.each(function(){var O=x(p,M,h,m,b);["start","both"].indexOf(y.showticklabels)===-1&&(L=0);var N=y.title.font.size;L+=N+y.title.offset;var V=(E.angle+(E.flip<0?180:0)-O.angle+450)%360,F=V>90&&V<270,j=v.select(this);j.text(y.title.text).call(f.convertToTspans,c),F&&(L=(-f.lineCount(j)+l)*u*N-L),j.attr("transform",o(O.p[0],O.p[1])+t(O.angle)+o(0,L)).attr("text-anchor","middle").call(w.font,y.title.font)}),P.exit().remove()}},81e3:function(C,A,e){"use strict";var v=e(24588),w=e(14952).findBin,n=e(30180),T=e(29056),x=e(26435),f=e(24464);C.exports=function(s){var t=s._a,o=s._b,r=t.length,i=o.length,a=s.aaxis,u=s.baxis,l=t[0],d=t[r-1],c=o[0],_=o[i-1],p=t[t.length-1]-t[0],g=o[o.length-1]-o[0],m=p*v.RELATIVE_CULL_TOLERANCE,b=g*v.RELATIVE_CULL_TOLERANCE;l-=m,d+=m,c-=b,_+=b,s.isVisible=function(y,M){return y>l&&y<d&&M>c&&M<_},s.isOccluded=function(y,M){return y<l||y>d||M<c||M>_},s.setScale=function(){var y=s._x,M=s._y,h=n(s._xctrl,s._yctrl,y,M,a.smoothing,u.smoothing);s._xctrl=h[0],s._yctrl=h[1],s.evalxy=T([s._xctrl,s._yctrl],r,i,a.smoothing,u.smoothing),s.dxydi=x([s._xctrl,s._yctrl],a.smoothing,u.smoothing),s.dxydj=f([s._xctrl,s._yctrl],a.smoothing,u.smoothing)},s.i2a=function(y){var M=Math.max(0,Math.floor(y[0]),r-2),h=y[0]-M;return(1-h)*t[M]+h*t[M+1]},s.j2b=function(y){var M=Math.max(0,Math.floor(y[1]),r-2),h=y[1]-M;return(1-h)*o[M]+h*o[M+1]},s.ij2ab=function(y){return[s.i2a(y[0]),s.j2b(y[1])]},s.a2i=function(y){var M=Math.max(0,Math.min(w(y,t),r-2)),h=t[M],E=t[M+1];return Math.max(0,Math.min(r-1,M+(y-h)/(E-h)))},s.b2j=function(y){var M=Math.max(0,Math.min(w(y,o),i-2)),h=o[M],E=o[M+1];return Math.max(0,Math.min(i-1,M+(y-h)/(E-h)))},s.ab2ij=function(y){return[s.a2i(y[0]),s.b2j(y[1])]},s.i2c=function(y,M){return s.evalxy([],y,M)},s.ab2xy=function(y,M,h){if(!h&&(y<t[0]||y>t[r-1]|M<o[0]||M>o[i-1]))return[!1,!1];var E=s.a2i(y),k=s.b2j(M),D=s.evalxy([],E,k);if(h){var P,L,O,N,V=0,F=0,j=[];y<t[0]?(P=0,L=0,V=(y-t[0])/(t[1]-t[0])):y>t[r-1]?(P=r-2,L=1,V=(y-t[r-1])/(t[r-1]-t[r-2])):L=E-(P=Math.max(0,Math.min(r-2,Math.floor(E)))),M<o[0]?(O=0,N=0,F=(M-o[0])/(o[1]-o[0])):M>o[i-1]?(O=i-2,N=1,F=(M-o[i-1])/(o[i-1]-o[i-2])):N=k-(O=Math.max(0,Math.min(i-2,Math.floor(k)))),V&&(s.dxydi(j,P,O,L,N),D[0]+=j[0]*V,D[1]+=j[1]*V),F&&(s.dxydj(j,P,O,L,N),D[0]+=j[0]*F,D[1]+=j[1]*F)}return D},s.c2p=function(y,M,h){return[M.c2p(y[0]),h.c2p(y[1])]},s.p2x=function(y,M,h){return[M.p2c(y[0]),h.p2c(y[1])]},s.dadi=function(y){var M=Math.max(0,Math.min(t.length-2,y));return t[M+1]-t[M]},s.dbdj=function(y){var M=Math.max(0,Math.min(o.length-2,y));return o[M+1]-o[M]},s.dxyda=function(y,M,h,E){var k=s.dxydi(null,y,M,h,E),D=s.dadi(y,h);return[k[0]/D,k[1]/D]},s.dxydb=function(y,M,h,E){var k=s.dxydj(null,y,M,h,E),D=s.dbdj(M,E);return[k[0]/D,k[1]/D]},s.dxyda_rough=function(y,M,h){var E=p*(h||.1),k=s.ab2xy(y+E,M,!0),D=s.ab2xy(y-E,M,!0);return[.5*(k[0]-D[0])/E,.5*(k[1]-D[1])/E]},s.dxydb_rough=function(y,M,h){var E=g*(h||.1),k=s.ab2xy(y,M+E,!0),D=s.ab2xy(y,M-E,!0);return[.5*(k[0]-D[0])/E,.5*(k[1]-D[1])/E]},s.dpdx=function(y){return y._m},s.dpdy=function(y){return y._m}}},51512:function(C,A,e){"use strict";var v=e(3400);C.exports=function(w,n,T){var x,f,s,t=[],o=[],r=w[0].length,i=w.length;function a(z,H){var U,re=0,ee=0;return z>0&&(U=w[H][z-1])!==void 0&&(ee++,re+=U),z<r-1&&(U=w[H][z+1])!==void 0&&(ee++,re+=U),H>0&&(U=w[H-1][z])!==void 0&&(ee++,re+=U),H<i-1&&(U=w[H+1][z])!==void 0&&(ee++,re+=U),re/Math.max(1,ee)}var u,l,d,c,_,p,g,m,b,y,M,h=0;for(x=0;x<r;x++)for(f=0;f<i;f++)w[f][x]===void 0&&(t.push(x),o.push(f),w[f][x]=a(x,f)),h=Math.max(h,Math.abs(w[f][x]));if(!t.length)return w;var E=0,k=0,D=t.length;do{for(E=0,s=0;s<D;s++){x=t[s],f=o[s];var P,L,O,N,V,F,j=0,Z=0;x===0?(O=n[V=Math.min(r-1,2)],N=n[1],P=w[f][V],Z+=(L=w[f][1])+(L-P)*(n[0]-N)/(N-O),j++):x===r-1&&(O=n[V=Math.max(0,r-3)],N=n[r-2],P=w[f][V],Z+=(L=w[f][r-2])+(L-P)*(n[r-1]-N)/(N-O),j++),(x===0||x===r-1)&&f>0&&f<i-1&&(u=T[f+1]-T[f],Z+=((l=T[f]-T[f-1])*w[f+1][x]+u*w[f-1][x])/(l+u),j++),f===0?(O=T[F=Math.min(i-1,2)],N=T[1],P=w[F][x],Z+=(L=w[1][x])+(L-P)*(T[0]-N)/(N-O),j++):f===i-1&&(O=T[F=Math.max(0,i-3)],N=T[i-2],P=w[F][x],Z+=(L=w[i-2][x])+(L-P)*(T[i-1]-N)/(N-O),j++),(f===0||f===i-1)&&x>0&&x<r-1&&(u=n[x+1]-n[x],Z+=((l=n[x]-n[x-1])*w[f][x+1]+u*w[f][x-1])/(l+u),j++),j?Z/=j:(d=n[x+1]-n[x],c=n[x]-n[x-1],m=(_=T[f+1]-T[f])*(p=T[f]-T[f-1])*(_+p),Z=((g=d*c*(d+c))*(p*w[f+1][x]+_*w[f-1][x])+m*(c*w[f][x+1]+d*w[f][x-1]))/(m*(c+d)+g*(p+_))),E+=(y=(b=Z-w[f][x])/h)*y,M=j?0:.85,w[f][x]+=b*(1+M)}E=Math.sqrt(E)}while(k++<100&&E>1e-5);return v.log("Smoother converged to",E,"after",k,"iterations"),w}},86411:function(C,A,e){"use strict";var v=e(3400).isArray1D;C.exports=function(w,n,T){var x=T("x"),f=x&&x.length,s=T("y"),t=s&&s.length;if(!f&&!t)return!1;if(n._cheater=!x,f&&!v(x)||t&&!v(s))n._length=null;else{var o=f?x.length:1/0;t&&(o=Math.min(o,s.length)),n.a&&n.a.length&&(o=Math.min(o,n.a.length)),n.b&&n.b.length&&(o=Math.min(o,n.b.length)),n._length=o}return!0}},83372:function(C,A,e){"use strict";var v=e(21776).Ks,w=e(6096),n=e(49084),T=e(45464),x=e(22548).defaultLine,f=e(92880).extendFlat,s=w.marker.line;C.exports=f({locations:{valType:"data_array",editType:"calc"},locationmode:w.locationmode,z:{valType:"data_array",editType:"calc"},geojson:f({},w.geojson,{}),featureidkey:w.featureidkey,text:f({},w.text,{}),hovertext:f({},w.hovertext,{}),marker:{line:{color:f({},s.color,{dflt:x}),width:f({},s.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:w.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:w.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:f({},T.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:v(),showlegend:f({},T.showlegend,{dflt:!1})},n("",{cLetter:"z",editTypeOverride:"calc"}))},7924:function(C,A,e){"use strict";var v=e(38248),w=e(39032).BADNUM,n=e(47128),T=e(20148),x=e(4500);function f(s){return s&&typeof s=="string"}C.exports=function(s,t){var o,r=t._length,i=new Array(r);o=t.geojson?function(c){return f(c)||v(c)}:f;for(var a=0;a<r;a++){var u=i[a]={},l=t.locations[a],d=t.z[a];o(l)&&v(d)?(u.loc=l,u.z=d):(u.loc=null,u.z=w),u.index=a}return T(i,t),n(s,t,{vals:t.z,containerStr:"",cLetter:"z"}),x(i,t),i}},30972:function(C,A,e){"use strict";var v=e(3400),w=e(27260),n=e(83372);C.exports=function(T,x,f,s){function t(u,l){return v.coerce(T,x,n,u,l)}var o=t("locations"),r=t("z");if(o&&o.length&&v.isArrayOrTypedArray(r)&&r.length){x._length=Math.min(o.length,r.length);var i,a=t("geojson");(typeof a=="string"&&a!==""||v.isPlainObject(a))&&(i="geojson-id"),t("locationmode",i)==="geojson-id"&&t("featureidkey"),t("text"),t("hovertext"),t("hovertemplate"),t("marker.line.width")&&t("marker.line.color"),t("marker.opacity"),w(T,x,s,t,{prefix:"",cLetter:"z"}),v.coerceSelectionMarkerOpacity(x,t)}else x.visible=!1}},52428:function(C){"use strict";C.exports=function(A,e,v,w,n){A.location=e.location,A.z=e.z;var T=w[n];return T.fIn&&T.fIn.properties&&(A.properties=T.fIn.properties),A.ct=T.ct,A}},69224:function(C,A,e){"use strict";var v=e(54460),w=e(83372),n=e(3400).fillText;C.exports=function(T,x,f){var s,t,o,r,i=T.cd,a=i[0].trace,u=T.subplot,l=[x,f],d=[x+360,f];for(t=0;t<i.length;t++)if(r=!1,(s=i[t])._polygons){for(o=0;o<s._polygons.length;o++)s._polygons[o].contains(l)&&(r=!r),s._polygons[o].contains(d)&&(r=!r);if(r)break}if(r&&s)return T.x0=T.x1=T.xa.c2p(s.ct),T.y0=T.y1=T.ya.c2p(s.ct),T.index=s.index,T.location=s.loc,T.z=s.z,T.zLabel=v.tickText(u.mockAxis,u.mockAxis.c2l(s.z),"hover").text,T.hovertemplate=s.hovertemplate,function(c,_,p){if(!_.hovertemplate){var g=p.hi||_.hoverinfo,m=String(p.loc),b=g==="all"?w.hoverinfo.flags:g.split("+"),y=b.indexOf("name")!==-1,M=b.indexOf("location")!==-1,h=b.indexOf("z")!==-1,E=b.indexOf("text")!==-1,k=[];!y&&M?c.nameOverride=m:(y&&(c.nameOverride=_.name),M&&k.push(m)),h&&k.push(c.zLabel),E&&n(p,_,k),c.extraText=k.join("<br>")}}(T,a,s),[T]}},54272:function(C,A,e){"use strict";C.exports={attributes:e(83372),supplyDefaults:e(30972),colorbar:e(96288),calc:e(7924),calcGeoJSON:e(88364).calcGeoJSON,plot:e(88364).plot,style:e(7947).style,styleOnSelect:e(7947).styleOnSelect,hoverPoints:e(69224),eventData:e(52428),selectPoints:e(17328),moduleType:"trace",name:"choropleth",basePlotModule:e(10816),categories:["geo","noOpacity","showLegend"],meta:{}}},88364:function(C,A,e){"use strict";var v=e(33428),w=e(3400),n=e(27144),T=e(59972).getTopojsonFeatures,x=e(19280).findExtremes,f=e(7947).style;C.exports={calcGeoJSON:function(s,t){for(var o=s[0].trace,r=t[o.geo],i=r._subplot,a=o.locationmode,u=o._length,l=a==="geojson-id"?n.extractTraceFeature(s):T(o,i.topojson),d=[],c=[],_=0;_<u;_++){var p=s[_],g=a==="geojson-id"?p.fOut:n.locationToFeature(a,p.loc,l);if(g){p.geojson=g,p.ct=g.properties.ct,p._polygons=n.feature2polygons(g);var m=n.computeBbox(g);d.push(m[0],m[2]),c.push(m[1],m[3])}else p.geojson=null}if(r.fitbounds==="geojson"&&a==="geojson-id"){var b=n.computeBbox(n.getTraceGeojson(o));d=[b[0],b[2]],c=[b[1],b[3]]}var y={padded:!0};o._extremes.lon=x(r.lonaxis._ax,d,y),o._extremes.lat=x(r.lataxis._ax,c,y)},plot:function(s,t,o){var r=t.layers.backplot.select(".choroplethlayer");w.makeTraceGroups(r,o,"trace choropleth").each(function(i){var a=v.select(this).selectAll("path.choroplethlocation").data(w.identity);a.enter().append("path").classed("choroplethlocation",!0),a.exit().remove(),f(s,i)})}}},17328:function(C){"use strict";C.exports=function(A,e){var v,w,n,T,x,f=A.cd,s=A.xaxis,t=A.yaxis,o=[];if(e===!1)for(v=0;v<f.length;v++)f[v].selected=0;else for(v=0;v<f.length;v++)(n=(w=f[v]).ct)&&(T=s.c2p(n),x=t.c2p(n),e.contains([T,x],null,v,A)?(o.push({pointNumber:v,lon:n[0],lat:n[1]}),w.selected=1):w.selected=0);return o}},7947:function(C,A,e){"use strict";var v=e(33428),w=e(76308),n=e(43616),T=e(8932);function x(f,s){var t=s[0].trace,o=s[0].node3.selectAll(".choroplethlocation"),r=t.marker||{},i=r.line||{},a=T.makeColorScaleFuncFromTrace(t);o.each(function(u){v.select(this).attr("fill",a(u.z)).call(w.stroke,u.mlc||i.color).call(n.dashLine,"",u.mlw||i.width||0).style("opacity",r.opacity)}),n.selectedPointStyle(o,t)}C.exports={style:function(f,s){s&&x(0,s)},styleOnSelect:function(f,s){var t=s[0].node3,o=s[0].trace;o.selectedpoints?n.selectedPointStyle(t.selectAll(".choroplethlocation"),o):x(0,s)}}},45608:function(C,A,e){"use strict";var v=e(83372),w=e(49084),n=e(21776).Ks,T=e(45464),x=e(92880).extendFlat;C.exports=x({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:x({},v.featureidkey,{}),below:{valType:"string",editType:"plot"},text:v.text,hovertext:v.hovertext,marker:{line:{color:x({},v.marker.line.color,{editType:"plot"}),width:x({},v.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:x({},v.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:x({},v.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:x({},v.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:v.hoverinfo,hovertemplate:n({},{keys:["properties"]}),showlegend:x({},T.showlegend,{dflt:!1})},w("",{cLetter:"z",editTypeOverride:"calc"}))},13504:function(C,A,e){"use strict";var v=e(38248),w=e(3400),n=e(8932),T=e(43616),x=e(44808).makeBlank,f=e(27144);function s(t){var o,r=t[0].trace,i=r._opts;if(r.selectedpoints){for(var a=T.makeSelectedPointStyleFns(r),u=0;u<t.length;u++){var l=t[u];l.fOut&&(l.fOut.properties.mo2=a.selectedOpacityFn(l))}o={type:"identity",property:"mo2"}}else o=w.isArrayOrTypedArray(r.marker.opacity)?{type:"identity",property:"mo"}:r.marker.opacity;return w.extendFlat(i.fill.paint,{"fill-opacity":o}),w.extendFlat(i.line.paint,{"line-opacity":o}),i}C.exports={convert:function(t){var o=t[0].trace,r=o.visible===!0&&o._length!==0,i={layout:{visibility:"none"},paint:{}},a={layout:{visibility:"none"},paint:{}},u=o._opts={fill:i,line:a,geojson:x()};if(!r)return u;var l=f.extractTraceFeature(t);if(!l)return u;var d,c,_,p=n.makeColorScaleFuncFromTrace(o),g=o.marker,m=g.line||{};w.isArrayOrTypedArray(g.opacity)&&(d=function(k){var D=k.mo;return v(D)?+w.constrain(D,0,1):0}),w.isArrayOrTypedArray(m.color)&&(c=function(k){return k.mlc}),w.isArrayOrTypedArray(m.width)&&(_=function(k){return k.mlw});for(var b=0;b<t.length;b++){var y=t[b],M=y.fOut;if(M){var h=M.properties;h.fc=p(y.z),d&&(h.mo=d(y)),c&&(h.mlc=c(y)),_&&(h.mlw=_(y)),y.ct=h.ct,y._polygons=f.feature2polygons(M)}}var E=d?{type:"identity",property:"mo"}:g.opacity;return w.extendFlat(i.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":E}),w.extendFlat(a.paint,{"line-color":c?{type:"identity",property:"mlc"}:m.color,"line-width":_?{type:"identity",property:"mlw"}:m.width,"line-opacity":E}),i.layout.visibility="visible",a.layout.visibility="visible",u.geojson={type:"FeatureCollection",features:l},s(t),u},convertOnSelect:s}},9352:function(C,A,e){"use strict";var v=e(3400),w=e(27260),n=e(45608);C.exports=function(T,x,f,s){function t(a,u){return v.coerce(T,x,n,a,u)}var o=t("locations"),r=t("z"),i=t("geojson");v.isArrayOrTypedArray(o)&&o.length&&v.isArrayOrTypedArray(r)&&r.length&&(typeof i=="string"&&i!==""||v.isPlainObject(i))?(t("featureidkey"),x._length=Math.min(o.length,r.length),t("below"),t("text"),t("hovertext"),t("hovertemplate"),t("marker.line.width")&&t("marker.line.color"),t("marker.opacity"),w(T,x,s,t,{prefix:"",cLetter:"z"}),v.coerceSelectionMarkerOpacity(x,t)):x.visible=!1}},85404:function(C,A,e){"use strict";C.exports={attributes:e(45608),supplyDefaults:e(9352),colorbar:e(96288),calc:e(7924),plot:e(61288),hoverPoints:e(69224),eventData:e(52428),selectPoints:e(17328),styleOnSelect:function(v,w){w&&w[0].trace._glTrace.updateOnSelect(w)},getBelow:function(v,w){for(var n=w.getMapLayers(),T=n.length-2;T>=0;T--){var x=n[T].id;if(typeof x=="string"&&x.indexOf("water")===0){for(var f=T+1;f<n.length;f++)if(typeof(x=n[f].id)=="string"&&x.indexOf("plotly-")===-1)return x}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:e(33688),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},61288:function(C,A,e){"use strict";var v=e(13504).convert,w=e(13504).convertOnSelect,n=e(47552).traceLayerPrefix;function T(f,s){this.type="choroplethmapbox",this.subplot=f,this.uid=s,this.sourceId="source-"+s,this.layerList=[["fill",n+s+"-fill"],["line",n+s+"-line"]],this.below=null}var x=T.prototype;x.update=function(f){this._update(v(f)),f[0].trace._glTrace=this},x.updateOnSelect=function(f){this._update(w(f))},x._update=function(f){var s=this.subplot,t=this.layerList,o=s.belowLookup["trace-"+this.uid];s.map.getSource(this.sourceId).setData(f.geojson),o!==this.below&&(this._removeLayers(),this._addLayers(f,o),this.below=o);for(var r=0;r<t.length;r++){var i=t[r],a=i[0],u=i[1],l=f[a];s.setOptions(u,"setLayoutProperty",l.layout),l.layout.visibility==="visible"&&s.setOptions(u,"setPaintProperty",l.paint)}},x._addLayers=function(f,s){for(var t=this.subplot,o=this.layerList,r=this.sourceId,i=0;i<o.length;i++){var a=o[i],u=a[0],l=f[u];t.addLayer({type:u,id:a[1],source:r,layout:l.layout,paint:l.paint},s)}},x._removeLayers=function(){for(var f=this.subplot.map,s=this.layerList,t=s.length-1;t>=0;t--)f.removeLayer(s[t][1])},x.dispose=function(){var f=this.subplot.map;this._removeLayers(),f.removeSource(this.sourceId)},C.exports=function(f,s){var t=s[0].trace,o=new T(f,t.uid),r=o.sourceId,i=v(s),a=o.below=f.belowLookup["trace-"+t.uid];return f.map.addSource(r,{type:"geojson",data:i.geojson}),o._addLayers(i,a),s[0].trace._glTrace=o,o}},86040:function(C,A,e){"use strict";var v=e(49084),w=e(29736).axisHoverFormat,n=e(21776).Ks,T=e(52948),x=e(45464),f=e(92880).extendFlat,s={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute","raw"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:n({editType:"calc"},{keys:["norm"]}),uhoverformat:w("u",1),vhoverformat:w("v",1),whoverformat:w("w",1),xhoverformat:w("x"),yhoverformat:w("y"),zhoverformat:w("z"),showlegend:f({},x.showlegend,{dflt:!1})};f(s,v("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(t){s[t]=T[t]}),s.hoverinfo=f({},x.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),s.transforms=void 0,C.exports=s},83344:function(C,A,e){"use strict";var v=e(47128);C.exports=function(w,n){for(var T=n.u,x=n.v,f=n.w,s=Math.min(n.x.length,n.y.length,n.z.length,T.length,x.length,f.length),t=-1/0,o=1/0,r=0;r<s;r++){var i=T[r],a=x[r],u=f[r],l=Math.sqrt(i*i+a*a+u*u);t=Math.max(t,l),o=Math.min(o,l)}n._len=s,n._normMax=t,v(w,n,{vals:[o,t],containerStr:"",cLetter:"c"})}},6648:function(C,A,e){"use strict";var v=e(67792).gl_cone3d,w=e(67792).gl_cone3d.createConeMesh,n=e(3400).simpleMap,T=e(33040).parseColorScale,x=e(8932).extractOpts,f=e(3400).isArrayOrTypedArray,s=e(52094);function t(l,d){this.scene=l,this.uid=d,this.mesh=null,this.data=null}var o=t.prototype;o.handlePick=function(l){if(l.object===this.mesh){var d=l.index=l.data.index,c=this.data.x[d],_=this.data.y[d],p=this.data.z[d],g=this.data.u[d],m=this.data.v[d],b=this.data.w[d];l.traceCoordinate=[c,_,p,g,m,b,Math.sqrt(g*g+m*m+b*b)];var y=this.data.hovertext||this.data.text;return f(y)&&y[d]!==void 0?l.textLabel=y[d]:y&&(l.textLabel=y),!0}};var r={xaxis:0,yaxis:1,zaxis:2},i={tip:1,tail:0,cm:.25,center:.5},a={tip:1,tail:1,cm:.75,center:.5};function u(l,d){var c=l.fullSceneLayout,_=l.dataScale,p={};function g(h,E){var k=c[E],D=_[r[E]];return n(h,function(P){return k.d2l(P)*D})}p.vectors=s(g(d.u,"xaxis"),g(d.v,"yaxis"),g(d.w,"zaxis"),d._len),p.positions=s(g(d.x,"xaxis"),g(d.y,"yaxis"),g(d.z,"zaxis"),d._len);var m=x(d);p.colormap=T(d),p.vertexIntensityBounds=[m.min/d._normMax,m.max/d._normMax],p.coneOffset=i[d.anchor];var b=d.sizemode;b==="scaled"?p.coneSize=d.sizeref||.5:b==="absolute"?p.coneSize=d.sizeref&&d._normMax?d.sizeref/d._normMax:.5:b==="raw"&&(p.coneSize=d.sizeref),p.coneSizemode=b;var y=v(p),M=d.lightposition;return y.lightPosition=[M.x,M.y,M.z],y.ambient=d.lighting.ambient,y.diffuse=d.lighting.diffuse,y.specular=d.lighting.specular,y.roughness=d.lighting.roughness,y.fresnel=d.lighting.fresnel,y.opacity=d.opacity,d._pad=a[d.anchor]*y.vectorScale*y.coneScale*d._normMax,y}o.update=function(l){this.data=l;var d=u(this.scene,l);this.mesh.update(d)},o.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},C.exports=function(l,d){var c=l.glplot.gl,_=u(l,d),p=w(c,_),g=new t(l,d.uid);return g.mesh=p,g.data=d,p._trace=g,l.glplot.add(p),g}},86096:function(C,A,e){"use strict";var v=e(3400),w=e(27260),n=e(86040);C.exports=function(T,x,f,s){function t(c,_){return v.coerce(T,x,n,c,_)}var o=t("u"),r=t("v"),i=t("w"),a=t("x"),u=t("y"),l=t("z");if(o&&o.length&&r&&r.length&&i&&i.length&&a&&a.length&&u&&u.length&&l&&l.length){var d=t("sizemode");t("sizeref",d==="raw"?1:.5),t("anchor"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),w(T,x,s,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),x._length=null}else x.visible=!1}},26048:function(C,A,e){"use strict";C.exports={moduleType:"trace",name:"cone",basePlotModule:e(12536),categories:["gl3d","showLegend"],attributes:e(86040),supplyDefaults:e(86096),colorbar:{min:"cmin",max:"cmax"},calc:e(83344),plot:e(6648),eventData:function(v,w){return v.norm=w.traceCoordinate[6],v},meta:{}}},67104:function(C,A,e){"use strict";var v=e(83328),w=e(52904),n=e(29736),T=n.axisHoverFormat,x=n.descriptionOnlyNumbers,f=e(49084),s=e(98192).u,t=e(25376),o=e(92880).extendFlat,r=e(69104),i=r.COMPARISON_OPS2,a=r.INTERVAL_OPS,u=w.line;C.exports=o({z:v.z,x:v.x,x0:v.x0,dx:v.dx,y:v.y,y0:v.y0,dy:v.dy,xperiod:v.xperiod,yperiod:v.yperiod,xperiod0:w.xperiod0,yperiod0:w.yperiod0,xperiodalignment:v.xperiodalignment,yperiodalignment:v.yperiodalignment,text:v.text,hovertext:v.hovertext,transpose:v.transpose,xtype:v.xtype,ytype:v.ytype,xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:v.hovertemplate,texttemplate:o({},v.texttemplate,{}),textfont:o({},v.textfont,{}),hoverongaps:v.hoverongaps,connectgaps:o({},v.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:t({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:x("contour label")},operation:{valType:"enumerated",values:[].concat(i).concat(a),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:o({},u.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:s,smoothing:o({},u.smoothing,{}),editType:"plot"},zorder:w.zorder},f("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},20688:function(C,A,e){"use strict";var v=e(8932),w=e(19512),n=e(54444),T=e(46960);C.exports=function(x,f){var s=w(x,f),t=s[0].z;n(f,t);var o,r=f.contours,i=v.extractOpts(f);if(r.coloring==="heatmap"&&i.auto&&f.autocontour===!1){var a=r.start,u=T(r),l=r.size||1,d=Math.floor((u-a)/l)+1;isFinite(l)||(l=1,d=1);var c=a-l/2;o=[c,c+d*l]}else o=t;return v.calc(x,f,{vals:o,cLetter:"z"}),s}},56008:function(C){"use strict";C.exports=function(A,e){var v,w=A[0],n=w.z;switch(e.type){case"levels":var T=Math.min(n[0][0],n[0][1]);for(v=0;v<A.length;v++){var x=A[v];x.prefixBoundary=!x.edgepaths.length&&(T>x.level||x.starts.length&&T===x.level)}break;case"constraint":if(w.prefixBoundary=!1,w.edgepaths.length)return;var f=w.x.length,s=w.y.length,t=-1/0,o=1/0;for(v=0;v<s;v++)o=Math.min(o,n[v][0]),o=Math.min(o,n[v][f-1]),t=Math.max(t,n[v][0]),t=Math.max(t,n[v][f-1]);for(v=1;v<f-1;v++)o=Math.min(o,n[0][v]),o=Math.min(o,n[s-1][v]),t=Math.max(t,n[0][v]),t=Math.max(t,n[s-1][v]);var r,i,a=e.value;switch(e._operation){case">":a>t&&(w.prefixBoundary=!0);break;case"<":(a<o||w.starts.length&&a===o)&&(w.prefixBoundary=!0);break;case"[]":r=Math.min(a[0],a[1]),((i=Math.max(a[0],a[1]))<o||r>t||w.starts.length&&i===o)&&(w.prefixBoundary=!0);break;case"][":r=Math.min(a[0],a[1]),i=Math.max(a[0],a[1]),r<o&&i>t&&(w.prefixBoundary=!0)}}}},55296:function(C,A,e){"use strict";var v=e(8932),w=e(41076),n=e(46960);C.exports={min:"zmin",max:"zmax",calc:function(T,x,f){var s=x.contours,t=x.line,o=s.size||1,r=s.coloring,i=w(x,{isColorbar:!0});if(r==="heatmap"){var a=v.extractOpts(x);f._fillgradient=a.reversescale?v.flipScale(a.colorscale):a.colorscale,f._zrange=[a.min,a.max]}else r==="fill"&&(f._fillcolor=i);f._line={color:r==="lines"?i:t.color,width:s.showlines!==!1?t.width:0,dash:t.dash},f._levels={start:s.start,end:n(s),size:o}}}},93252:function(C){"use strict";C.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},95536:function(C,A,e){"use strict";var v=e(38248),w=e(17428),n=e(76308),T=n.addOpacity,x=n.opacity,f=e(69104),s=e(3400).isArrayOrTypedArray,t=f.CONSTRAINT_REDUCTION,o=f.COMPARISON_OPS2;C.exports=function(r,i,a,u,l,d){var c,_,p,g=i.contours,m=a("contours.operation");g._operation=t[m],function(b,y){var M;o.indexOf(y.operation)===-1?(b("contours.value",[0,1]),s(y.value)?y.value.length>2?y.value=y.value.slice(2):y.length===0?y.value=[0,1]:y.length<2?(M=parseFloat(y.value[0]),y.value=[M,M+1]):y.value=[parseFloat(y.value[0]),parseFloat(y.value[1])]:v(y.value)&&(M=parseFloat(y.value),y.value=[M,M+1])):(b("contours.value",0),v(y.value)||(s(y.value)?y.value=parseFloat(y.value[0]):y.value=0))}(a,g),m==="="?c=g.showlines=!0:(c=a("contours.showlines"),p=a("fillcolor",T((r.line||{}).color||l,.5))),c&&(_=a("line.color",p&&x(p)?T(i.fillcolor,1):l),a("line.width",2),a("line.dash")),a("line.smoothing"),w(a,u,_,d)}},3212:function(C,A,e){"use strict";var v=e(69104),w=e(38248);function n(f,s){var t,o=Array.isArray(s);function r(i){return w(i)?+i:null}return v.COMPARISON_OPS2.indexOf(f)!==-1?t=r(o?s[0]:s):v.INTERVAL_OPS.indexOf(f)!==-1?t=o?[r(s[0]),r(s[1])]:[r(s),r(s)]:v.SET_OPS.indexOf(f)!==-1&&(t=o?s.map(r):[r(s)]),t}function T(f){return function(s){s=n(f,s);var t=Math.min(s[0],s[1]),o=Math.max(s[0],s[1]);return{start:t,end:o,size:o-t}}}function x(f){return function(s){return{start:s=n(f,s),end:1/0,size:1/0}}}C.exports={"[]":T("[]"),"][":T("]["),">":x(">"),"<":x("<"),"=":x("=")}},84952:function(C){"use strict";C.exports=function(A,e,v,w){var n=w("contours.start"),T=w("contours.end"),x=n===!1||T===!1,f=v("contours.size");!(x?e.autocontour=!0:v("autocontour",!1))&&f||v("ncontours")}},82172:function(C,A,e){"use strict";var v=e(3400);function w(n){return v.extendFlat({},n,{edgepaths:v.extendDeep([],n.edgepaths),paths:v.extendDeep([],n.paths),starts:v.extendDeep([],n.starts)})}C.exports=function(n,T){var x,f,s,t=function(i){return i.reverse()},o=function(i){return i};switch(T){case"=":case"<":return n;case">":for(n.length!==1&&v.warn("Contour data invalid for the specified inequality operation."),f=n[0],x=0;x<f.edgepaths.length;x++)f.edgepaths[x]=t(f.edgepaths[x]);for(x=0;x<f.paths.length;x++)f.paths[x]=t(f.paths[x]);for(x=0;x<f.starts.length;x++)f.starts[x]=t(f.starts[x]);return n;case"][":var r=t;t=o,o=r;case"[]":for(n.length!==2&&v.warn("Contour data invalid for the specified inequality range operation."),f=w(n[0]),s=w(n[1]),x=0;x<f.edgepaths.length;x++)f.edgepaths[x]=t(f.edgepaths[x]);for(x=0;x<f.paths.length;x++)f.paths[x]=t(f.paths[x]);for(x=0;x<f.starts.length;x++)f.starts[x]=t(f.starts[x]);for(;s.edgepaths.length;)f.edgepaths.push(o(s.edgepaths.shift()));for(;s.paths.length;)f.paths.push(o(s.paths.shift()));for(;s.starts.length;)f.starts.push(o(s.starts.shift()));return[f]}}},57004:function(C,A,e){"use strict";var v=e(3400),w=e(51264),n=e(31147),T=e(95536),x=e(84952),f=e(97680),s=e(39096),t=e(67104);C.exports=function(o,r,i,a){function u(d,c){return v.coerce(o,r,t,d,c)}if(w(o,r,u,a)){n(o,r,a,u),u("xhoverformat"),u("yhoverformat"),u("text"),u("hovertext"),u("hoverongaps"),u("hovertemplate");var l=u("contours.type")==="constraint";u("connectgaps",v.isArray1D(r.z)),l?T(o,r,u,a,i):(x(o,r,u,function(d){return v.coerce2(o,r,t,d)}),f(o,r,u,a)),r.contours&&r.contours.coloring==="heatmap"&&s(u,a),u("zorder")}else r.visible=!1}},61512:function(C,A,e){"use strict";var v=e(3400),w=e(3212),n=e(46960);C.exports=function(T,x,f){for(var s=T.type==="constraint"?w[T._operation](T.value):T,t=s.size,o=[],r=n(s),i=f.trace._carpetTrace,a=i?{xaxis:i.aaxis,yaxis:i.baxis,x:f.a,y:f.b}:{xaxis:x.xaxis,yaxis:x.yaxis,x:f.x,y:f.y},u=s.start;u<r;u+=t)if(o.push(v.extendFlat({level:u,crossings:{},starts:[],edgepaths:[],paths:[],z:f.z,smoothing:f.trace.line.smoothing},a)),o.length>1e3){v.warn("Too many contours, clipping at 1000",T);break}return o}},46960:function(C){"use strict";C.exports=function(A){return A.end+A.size/1e6}},88748:function(C,A,e){"use strict";var v=e(3400),w=e(93252);function n(f,s,t,o){return Math.abs(f[0]-s[0])<t&&Math.abs(f[1]-s[1])<o}function T(f,s,t,o,r){var i,a=s.join(","),u=f.crossings[a],l=function(oe,le,se){var de=0,be=0;return oe>20&&le?oe===208||oe===1114?de=se[0]===0?1:-1:be=se[1]===0?1:-1:w.BOTTOMSTART.indexOf(oe)!==-1?be=1:w.LEFTSTART.indexOf(oe)!==-1?de=1:w.TOPSTART.indexOf(oe)!==-1?be=-1:de=-1,[de,be]}(u,t,s),d=[x(f,s,[-l[0],-l[1]])],c=f.z.length,_=f.z[0].length,p=s.slice(),g=l.slice();for(i=0;i<1e4;i++){if(u>20?(u=w.CHOOSESADDLE[u][(l[0]||l[1])<0?0:1],f.crossings[a]=w.SADDLEREMAINDER[u]):delete f.crossings[a],!(l=w.NEWDELTA[u])){v.log("Found bad marching index:",u,s,f.level);break}d.push(x(f,s,l)),s[0]+=l[0],s[1]+=l[1],a=s.join(","),n(d[d.length-1],d[d.length-2],o,r)&&d.pop();var m=l[0]&&(s[0]<0||s[0]>_-2)||l[1]&&(s[1]<0||s[1]>c-2);if(s[0]===p[0]&&s[1]===p[1]&&l[0]===g[0]&&l[1]===g[1]||t&&m)break;u=f.crossings[a]}i===1e4&&v.log("Infinite loop in contour?");var b,y,M,h,E,k,D,P,L,O,N,V,F,j,Z,z=n(d[0],d[d.length-1],o,r),H=0,U=.2*f.smoothing,re=[],ee=0;for(i=1;i<d.length;i++)V=d[i],F=d[i-1],j=V[2]-F[2],Z=V[3]-F[3],H+=D=Math.sqrt(j*j+Z*Z),re.push(D);var J=H/re.length*U;function Q(oe){return d[oe%d.length]}for(i=d.length-2;i>=ee;i--)if((b=re[i])<J){for(M=0,y=i-1;y>=ee&&b+re[y]<J;y--)b+=re[y];if(z&&i===d.length-2)for(M=0;M<y&&b+re[M]<J;M++)b+=re[M];E=i-y+M+1,k=Math.floor((i+y+M+2)/2),h=z||i!==d.length-2?z||y!==-1?E%2?Q(k):[(Q(k)[0]+Q(k+1)[0])/2,(Q(k)[1]+Q(k+1)[1])/2]:d[0]:d[d.length-1],d.splice(y+1,i-y+1,h),i=y+1,M&&(ee=M),z&&(i===d.length-2?d[M]=d[d.length-1]:i===0&&(d[d.length-1]=d[0]))}for(d.splice(0,ee),i=0;i<d.length;i++)d[i].length=2;if(!(d.length<2))if(z)d.pop(),f.paths.push(d);else{t||v.log("Unclosed interior contour?",f.level,p.join(","),d.join("L"));var ne=!1;for(P=0;P<f.edgepaths.length;P++)if(O=f.edgepaths[P],!ne&&n(O[0],d[d.length-1],o,r)){d.pop(),ne=!0;var K=!1;for(L=0;L<f.edgepaths.length;L++)if(n((N=f.edgepaths[L])[N.length-1],d[0],o,r)){K=!0,d.shift(),f.edgepaths.splice(P,1),L===P?f.paths.push(d.concat(N)):(L>P&&L--,f.edgepaths[L]=N.concat(d,O));break}K||(f.edgepaths[P]=d.concat(O))}for(P=0;P<f.edgepaths.length&&!ne;P++)n((O=f.edgepaths[P])[O.length-1],d[0],o,r)&&(d.shift(),f.edgepaths[P]=O.concat(d),ne=!0);ne||f.edgepaths.push(d)}}function x(f,s,t){var o=s[0]+Math.max(t[0],0),r=s[1]+Math.max(t[1],0),i=f.z[r][o],a=f.xaxis,u=f.yaxis;if(t[1]){var l=(f.level-i)/(f.z[r][o+1]-i),d=(l!==1?(1-l)*a.c2l(f.x[o]):0)+(l!==0?l*a.c2l(f.x[o+1]):0);return[a.c2p(a.l2c(d),!0),u.c2p(f.y[r],!0),o+l,r]}var c=(f.level-i)/(f.z[r+1][o]-i),_=(c!==1?(1-c)*u.c2l(f.y[r]):0)+(c!==0?c*u.c2l(f.y[r+1]):0);return[a.c2p(f.x[o],!0),u.c2p(u.l2c(_),!0),o,r+c]}C.exports=function(f,s,t){var o,r,i,a;for(s=s||.01,t=t||.01,r=0;r<f.length;r++){for(i=f[r],a=0;a<i.starts.length;a++)T(i,i.starts[a],"edge",s,t);for(o=0;Object.keys(i.crossings).length&&o<1e4;)o++,T(i,Object.keys(i.crossings)[0].split(",").map(Number),void 0,s,t);o===1e4&&v.log("Infinite loop in contour?")}}},38200:function(C,A,e){"use strict";var v=e(76308),w=e(55512);C.exports=function(n,T,x,f,s){s||(s={}),s.isContour=!0;var t=w(n,T,x,f,s);return t&&t.forEach(function(o){var r=o.trace;r.contours.type==="constraint"&&(r.fillcolor&&v.opacity(r.fillcolor)?o.color=v.addOpacity(r.fillcolor,1):r.contours.showlines&&v.opacity(r.line.color)&&(o.color=v.addOpacity(r.line.color,1)))}),t}},66240:function(C,A,e){"use strict";C.exports={attributes:e(67104),supplyDefaults:e(57004),calc:e(20688),plot:e(23676).plot,style:e(52440),colorbar:e(55296),hoverPoints:e(38200),moduleType:"trace",name:"contour",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},17428:function(C,A,e){"use strict";var v=e(3400);C.exports=function(w,n,T,x){if(x||(x={}),w("contours.showlabels")){var f=n.font;v.coerceFont(w,"contours.labelfont",{weight:f.weight,style:f.style,variant:f.variant,family:f.family,size:f.size,color:T}),w("contours.labelformat")}x.hasHover!==!1&&w("zhoverformat")}},41076:function(C,A,e){"use strict";var v=e(33428),w=e(8932),n=e(46960);C.exports=function(T){var x=T.contours,f=x.start,s=n(x),t=x.size||1,o=Math.floor((s-f)/t)+1,r=x.coloring==="lines"?0:1,i=w.extractOpts(T);isFinite(t)||(t=1,o=1);var a,u,l=i.reversescale?w.flipScale(i.colorscale):i.colorscale,d=l.length,c=new Array(d),_=new Array(d),p=i.min,g=i.max;if(x.coloring==="heatmap"){for(u=0;u<d;u++)a=l[u],c[u]=a[0]*(g-p)+p,_[u]=a[1];var m=v.extent([p,g,x.start,x.start+t*(o-1)]),b=m[p<g?0:1],y=m[p<g?1:0];b!==p&&(c.splice(0,0,b),_.splice(0,0,_[0])),y!==g&&(c.push(y),_.push(_[_.length-1]))}else{var M=T._input&&typeof T._input.zmin=="number"&&typeof T._input.zmax=="number";for(M&&(f<=p||s>=g)&&(f<=p&&(f=p),s>=g&&(s=g),o=Math.floor((s-f)/t)+1,r=0),u=0;u<d;u++)a=l[u],c[u]=(a[0]*(o+r-1)-r/2)*t+f,_[u]=a[1];(M||T.autocontour)&&(c[0]>p&&(c.unshift(p),_.unshift(_[0])),c[c.length-1]<g&&(c.push(g),_.push(_[_.length-1])))}return w.makeColorScaleFunc({domain:c,range:_},{noNumericCheck:!0})}},72424:function(C,A,e){"use strict";var v=e(93252);function w(n,T){var x=(T[0][0]>n?0:1)+(T[0][1]>n?0:2)+(T[1][1]>n?0:4)+(T[1][0]>n?0:8);return x===5||x===10?n>(T[0][0]+T[0][1]+T[1][0]+T[1][1])/4?x===5?713:1114:x===5?104:208:x===15?0:x}C.exports=function(n){var T,x,f,s,t,o,r,i,a,u=n[0].z,l=u.length,d=u[0].length,c=l===2||d===2;for(x=0;x<l-1;x++)for(s=[],x===0&&(s=s.concat(v.BOTTOMSTART)),x===l-2&&(s=s.concat(v.TOPSTART)),T=0;T<d-1;T++)for(f=s.slice(),T===0&&(f=f.concat(v.LEFTSTART)),T===d-2&&(f=f.concat(v.RIGHTSTART)),t=T+","+x,o=[[u[x][T],u[x][T+1]],[u[x+1][T],u[x+1][T+1]]],a=0;a<n.length;a++)(r=w((i=n[a]).level,o))&&(i.crossings[t]=r,f.indexOf(r)!==-1&&(i.starts.push([T,x]),c&&f.indexOf(r,f.indexOf(r)+1)!==-1&&i.starts.push([T,x])))}},23676:function(C,A,e){"use strict";var v=e(33428),w=e(3400),n=e(43616),T=e(8932),x=e(72736),f=e(54460),s=e(78344),t=e(41420),o=e(72424),r=e(88748),i=e(61512),a=e(82172),u=e(56008),l=e(93252),d=l.LABELOPTIMIZER;function c(g,m){var b,y,M,h,E,k,D,P="",L=0,O=g.edgepaths.map(function(z,H){return H}),N=!0;function V(z){return Math.abs(z[1]-m[2][1])<.01}function F(z){return Math.abs(z[0]-m[0][0])<.01}function j(z){return Math.abs(z[0]-m[2][0])<.01}for(;O.length;){for(k=n.smoothopen(g.edgepaths[L],g.smoothing),P+=N?k:k.replace(/^M/,"L"),O.splice(O.indexOf(L),1),b=g.edgepaths[L][g.edgepaths[L].length-1],h=-1,M=0;M<4;M++){if(!b){w.log("Missing end?",L,g);break}for(D=b,Math.abs(D[1]-m[0][1])<.01&&!j(b)?y=m[1]:F(b)?y=m[0]:V(b)?y=m[3]:j(b)&&(y=m[2]),E=0;E<g.edgepaths.length;E++){var Z=g.edgepaths[E][0];Math.abs(b[0]-y[0])<.01?Math.abs(b[0]-Z[0])<.01&&(Z[1]-b[1])*(y[1]-Z[1])>=0&&(y=Z,h=E):Math.abs(b[1]-y[1])<.01?Math.abs(b[1]-Z[1])<.01&&(Z[0]-b[0])*(y[0]-Z[0])>=0&&(y=Z,h=E):w.log("endpt to newendpt is not vert. or horz.",b,y,Z)}if(b=y,h>=0)break;P+="L"+y}if(h===g.edgepaths.length){w.log("unclosed perimeter path");break}L=h,(N=O.indexOf(L)===-1)&&(L=O[0],P+="Z")}for(L=0;L<g.paths.length;L++)P+=n.smoothclosed(g.paths[L],g.smoothing);return P}function _(g,m,b,y){var M=m.width/2,h=m.height/2,E=g.x,k=g.y,D=g.theta,P=Math.cos(D)*M,L=Math.sin(D)*M,O=(E>y.center?y.right-E:E-y.left)/(P+Math.abs(Math.sin(D)*h)),N=(k>y.middle?y.bottom-k:k-y.top)/(Math.abs(L)+Math.cos(D)*h);if(O<1||N<1)return 1/0;var V=d.EDGECOST*(1/(O-1)+1/(N-1));V+=d.ANGLECOST*D*D;for(var F=E-P,j=k-L,Z=E+P,z=k+L,H=0;H<b.length;H++){var U=b[H],re=Math.cos(U.theta)*U.width/2,ee=Math.sin(U.theta)*U.width/2,J=2*w.segmentDistance(F,j,Z,z,U.x-re,U.y-ee,U.x+re,U.y+ee)/(m.height+U.height),Q=U.level===m.level,ne=Q?d.SAMELEVELDISTANCE:1;if(J<=ne)return 1/0;V+=d.NEIGHBORCOST*(Q?d.SAMELEVELFACTOR:1)/(J-ne)}return V}function p(g){var m,b,y=g.trace._emptypoints,M=[],h=g.z.length,E=g.z[0].length,k=[];for(m=0;m<E;m++)k.push(1);for(m=0;m<h;m++)M.push(k.slice());for(m=0;m<y.length;m++)M[(b=y[m])[0]][b[1]]=0;return g.zmask=M,M}A.plot=function(g,m,b,y){var M=m.xaxis,h=m.yaxis;w.makeTraceGroups(y,b,"contour").each(function(E){var k=v.select(this),D=E[0],P=D.trace,L=D.x,O=D.y,N=P.contours,V=i(N,m,D),F=w.ensureSingle(k,"g","heatmapcoloring"),j=[];N.coloring==="heatmap"&&(j=[E]),t(g,m,j,F),o(V),r(V);var Z=M.c2p(L[0],!0),z=M.c2p(L[L.length-1],!0),H=h.c2p(O[0],!0),U=h.c2p(O[O.length-1],!0),re=[[Z,U],[z,U],[z,H],[Z,H]],ee=V;N.type==="constraint"&&(ee=a(V,N._operation)),function(J,Q,ne){var K=w.ensureSingle(J,"g","contourbg").selectAll("path").data(ne.coloring==="fill"?[0]:[]);K.enter().append("path"),K.exit().remove(),K.attr("d","M"+Q.join("L")+"Z").style("stroke","none")}(k,re,N),function(J,Q,ne,K){var oe=K.coloring==="fill"||K.type==="constraint"&&K._operation!=="=",le="M"+ne.join("L")+"Z";oe&&u(Q,K);var se=w.ensureSingle(J,"g","contourfill").selectAll("path").data(oe?Q:[]);se.enter().append("path"),se.exit().remove(),se.each(function(de){var be=(de.prefixBoundary?le:"")+c(de,ne);be?v.select(this).attr("d",be).style("stroke","none"):v.select(this).remove()})}(k,ee,re,N),function(J,Q,ne,K,oe){var le=ne._context.staticPlot,se=w.ensureSingle(J,"g","contourlines"),de=oe.showlines!==!1,be=oe.showlabels,_e=de&&be,xe=A.createLines(se,de||be,Q,le),ve=A.createLineClip(se,_e,ne,K.trace.uid),ye=J.selectAll("g.contourlabels").data(be?[0]:[]);if(ye.exit().remove(),ye.enter().append("g").classed("contourlabels",!0),be){var me=[],Me=[];w.clearLocationCache();var Ae=A.labelFormatter(ne,K),ce=n.tester.append("text").attr("data-notex",1).call(n.font,oe.labelfont),ae=Q[0].xaxis,pe=Q[0].yaxis,De=ae._length,ke=pe._length,Ee=ae.range,Ie=pe.range,Re=w.aggNums(Math.min,null,K.x),Ne=w.aggNums(Math.max,null,K.x),ge=w.aggNums(Math.min,null,K.y),we=w.aggNums(Math.max,null,K.y),Ce=Math.max(ae.c2p(Re,!0),0),ze=Math.min(ae.c2p(Ne,!0),De),Pe=Math.max(pe.c2p(we,!0),0),Ue=Math.min(pe.c2p(ge,!0),ke),Ge={};Ee[0]<Ee[1]?(Ge.left=Ce,Ge.right=ze):(Ge.left=ze,Ge.right=Ce),Ie[0]<Ie[1]?(Ge.top=Pe,Ge.bottom=Ue):(Ge.top=Ue,Ge.bottom=Pe),Ge.middle=(Ge.top+Ge.bottom)/2,Ge.center=(Ge.left+Ge.right)/2,me.push([[Ge.left,Ge.top],[Ge.right,Ge.top],[Ge.right,Ge.bottom],[Ge.left,Ge.bottom]]);var Xe=Math.sqrt(De*De+ke*ke),st=l.LABELDISTANCE*Xe/Math.max(1,Q.length/l.LABELINCREASE);xe.each(function(at){var vt=A.calcTextOpts(at.level,Ae,ce,ne);v.select(this).selectAll("path").each(function(){var xt=w.getVisibleSegment(this,Ge,vt.height/2);if(xt&&!(xt.len<(vt.width+vt.height)*l.LABELMIN))for(var gt=Math.min(Math.ceil(xt.len/st),l.LABELMAX),rt=0;rt<gt;rt++){var tt=A.findBestTextLocation(this,xt,vt,Me,Ge);if(!tt)break;A.addLabelData(tt,vt,Me,me)}})}),ce.remove(),A.drawLabels(ye,Me,ne,ve,_e?me:null)}be&&!de&&xe.remove()}(k,V,g,D,N),function(J,Q,ne,K,oe){var le=K.trace,se=ne._fullLayout._clips,de="clip"+le.uid,be=se.selectAll("#"+de).data(le.connectgaps?[]:[0]);if(be.enter().append("clipPath").classed("contourclip",!0).attr("id",de),be.exit().remove(),le.connectgaps===!1){var _e={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:Q.xaxis,yaxis:Q.yaxis,x:K.x,y:K.y,z:p(K),smoothing:0};o([_e]),r([_e]),u([_e],{type:"levels"}),w.ensureSingle(be,"path","").attr("d",(_e.prefixBoundary?"M"+oe.join("L")+"Z":"")+c(_e,oe))}else de=null;n.setClipUrl(J,de,ne)}(k,m,g,D,re)})},A.createLines=function(g,m,b,y){var M=b[0].smoothing,h=g.selectAll("g.contourlevel").data(m?b:[]);if(h.exit().remove(),h.enter().append("g").classed("contourlevel",!0),m){var E=h.selectAll("path.openline").data(function(D){return D.pedgepaths||D.edgepaths});E.exit().remove(),E.enter().append("path").classed("openline",!0),E.attr("d",function(D){return n.smoothopen(D,M)}).style("stroke-miterlimit",1).style("vector-effect",y?"none":"non-scaling-stroke");var k=h.selectAll("path.closedline").data(function(D){return D.ppaths||D.paths});k.exit().remove(),k.enter().append("path").classed("closedline",!0),k.attr("d",function(D){return n.smoothclosed(D,M)}).style("stroke-miterlimit",1).style("vector-effect",y?"none":"non-scaling-stroke")}return h},A.createLineClip=function(g,m,b,y){var M=m?"clipline"+y:null,h=b._fullLayout._clips.selectAll("#"+M).data(m?[0]:[]);return h.exit().remove(),h.enter().append("clipPath").classed("contourlineclip",!0).attr("id",M),n.setClipUrl(g,M,b),h},A.labelFormatter=function(g,m){var b=g._fullLayout,y=m.trace,M=y.contours,h={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(M.labelformat)h.tickformat=M.labelformat,s(h,b);else{var E=T.extractOpts(y);if(E&&E.colorbar&&E.colorbar._axis)h=E.colorbar._axis;else{if(M.type==="constraint"){var k=M.value;w.isArrayOrTypedArray(k)?h.range=[k[0],k[k.length-1]]:h.range=[k,k]}else h.range=[M.start,M.end],h.nticks=(M.end-M.start)/M.size;h.range[0]===h.range[1]&&(h.range[1]+=h.range[0]||1),h.nticks||(h.nticks=1e3),s(h,b),f.prepTicks(h),h._tmin=null,h._tmax=null}}return function(D){return f.tickText(h,D).text}},A.calcTextOpts=function(g,m,b,y){var M=m(g);b.text(M).call(x.convertToTspans,y);var h=b.node(),E=n.bBox(h,!0);return{text:M,width:E.width,height:E.height,fontSize:+h.style["font-size"].replace("px",""),level:g,dy:(E.top+E.bottom)/2}},A.findBestTextLocation=function(g,m,b,y,M){var h,E,k,D,P,L=b.width;m.isClosed?(E=m.len/d.INITIALSEARCHPOINTS,h=m.min+E/2,k=m.max):(E=(m.len-L)/(d.INITIALSEARCHPOINTS+1),h=m.min+E+L/2,k=m.max-(E+L)/2);for(var O=1/0,N=0;N<d.ITERATIONS;N++){for(var V=h;V<k;V+=E){var F=w.getTextLocation(g,m.total,V,L),j=_(F,b,y,M);j<O&&(O=j,P=F,D=V)}if(O>2*d.MAXCOST)break;N&&(E/=2),k=(h=D-E/2)+1.5*E}if(O<=d.MAXCOST)return P},A.addLabelData=function(g,m,b,y){var M=m.fontSize,h=m.width+M/3,E=Math.max(0,m.height-M/3),k=g.x,D=g.y,P=g.theta,L=Math.sin(P),O=Math.cos(P),N=function(F,j){return[k+F*O-j*L,D+F*L+j*O]},V=[N(-h/2,-E/2),N(-h/2,E/2),N(h/2,E/2),N(h/2,-E/2)];b.push({text:m.text,x:k,y:D,dy:m.dy,theta:P,level:m.level,width:h,height:E}),y.push(V)},A.drawLabels=function(g,m,b,y,M){var h=g.selectAll("text").data(m,function(D){return D.text+","+D.x+","+D.y+","+D.theta});if(h.exit().remove(),h.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(D){var P=D.x+Math.sin(D.theta)*D.dy,L=D.y-Math.cos(D.theta)*D.dy;v.select(this).text(D.text).attr({x:P,y:L,transform:"rotate("+180*D.theta/Math.PI+" "+P+" "+L+")"}).call(x.convertToTspans,b)}),M){for(var E="",k=0;k<M.length;k++)E+="M"+M[k].join("L")+"Z";w.ensureSingle(y,"path","").attr("d",E)}}},54444:function(C,A,e){"use strict";var v=e(54460),w=e(3400);function n(T,x,f){var s={type:"linear",range:[T,x]};return v.autoTicks(s,(x-T)/(f||15)),s}C.exports=function(T,x){var f=T.contours;if(T.autocontour){var s=T.zmin,t=T.zmax;(T.zauto||s===void 0)&&(s=w.aggNums(Math.min,null,x)),(T.zauto||t===void 0)&&(t=w.aggNums(Math.max,null,x));var o=n(s,t,T.ncontours);f.size=o.dtick,f.start=v.tickFirst(o),o.range.reverse(),f.end=v.tickFirst(o),f.start===s&&(f.start+=f.size),f.end===t&&(f.end-=f.size),f.start>f.end&&(f.start=f.end=(f.start+f.end)/2),T._input.contours||(T._input.contours={}),w.extendFlat(T._input.contours,{start:f.start,end:f.end,size:f.size}),T._input.autocontour=!0}else if(f.type!=="constraint"){var r,i=f.start,a=f.end,u=T._input.contours;i>a&&(f.start=u.start=a,a=f.end=u.end=i,i=f.start),f.size>0||(r=i===a?1:n(i,a,T.ncontours).dtick,u.size=f.size=r)}}},52440:function(C,A,e){"use strict";var v=e(33428),w=e(43616),n=e(41648),T=e(41076);C.exports=function(x){var f=v.select(x).selectAll("g.contour");f.style("opacity",function(s){return s[0].trace.opacity}),f.each(function(s){var t=v.select(this),o=s[0].trace,r=o.contours,i=o.line,a=r.size||1,u=r.start,l=r.type==="constraint",d=!l&&r.coloring==="lines",c=!l&&r.coloring==="fill",_=d||c?T(o):null;t.selectAll("g.contourlevel").each(function(m){v.select(this).selectAll("path").call(w.lineGroupStyle,i.width,d?_(m.level):i.color,i.dash)});var p=r.labelfont;if(t.selectAll("g.contourlabels text").each(function(m){w.font(v.select(this),{weight:p.weight,style:p.style,variant:p.variant,family:p.family,size:p.size,color:p.color||(d?_(m.level):i.color)})}),l)t.selectAll("g.contourfill path").style("fill",o.fillcolor);else if(c){var g;t.selectAll("g.contourfill path").style("fill",function(m){return g===void 0&&(g=m.level),_(m.level+.5*a)}),g===void 0&&(g=u),t.selectAll("g.contourbg path").style("fill",_(g-.5*a))}}),n(x)}},97680:function(C,A,e){"use strict";var v=e(27260),w=e(17428);C.exports=function(n,T,x,f,s){var t,o=x("contours.coloring"),r="";o==="fill"&&(t=x("contours.showlines")),t!==!1&&(o!=="lines"&&(r=x("line.color","#000")),x("line.width",.5),x("line.dash")),o!=="none"&&(n.showlegend!==!0&&(T.showlegend=!1),T._dfltShowLegend=!1,v(n,T,f,x,{prefix:"",cLetter:"z"})),x("line.smoothing"),w(x,f,r,s)}},37960:function(C,A,e){"use strict";var v=e(83328),w=e(67104),n=e(49084),T=e(92880).extendFlat,x=w.contours;C.exports=T({carpet:{valType:"string",editType:"calc"},z:v.z,a:v.x,a0:v.x0,da:v.dx,b:v.y,b0:v.y0,db:v.dy,text:v.text,hovertext:v.hovertext,transpose:v.transpose,atype:v.xtype,btype:v.ytype,fillcolor:w.fillcolor,autocontour:w.autocontour,ncontours:w.ncontours,contours:{type:x.type,start:x.start,end:x.end,size:x.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:x.showlines,showlabels:x.showlabels,labelfont:x.labelfont,labelformat:x.labelformat,operation:x.operation,value:x.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:w.line.color,width:w.line.width,dash:w.line.dash,smoothing:w.line.smoothing,editType:"plot"},zorder:w.zorder,transforms:void 0},n("",{cLetter:"z",autoColorDflt:!1}))},30572:function(C,A,e){"use strict";var v=e(47128),w=e(3400),n=e(2872),T=e(26136),x=e(70448),f=e(11240),s=e(35744),t=e(3252),o=e(50948),r=e(54444);C.exports=function(i,a){var u=a._carpetTrace=o(i,a);if(u&&u.visible&&u.visible!=="legendonly"){if(!a.a||!a.b){var l=i.data[u.index],d=i.data[a.index];d.a||(d.a=l.a),d.b||(d.b=l.b),t(d,a,a._defaultColor,i._fullLayout)}var c=function(_,p){var g,m,b,y,M,h,E,k=p._carpetTrace,D=k.aaxis,P=k.baxis;D._minDtick=0,P._minDtick=0,w.isArray1D(p.z)&&n(p,D,P,"a","b",["z"]),g=p._a=p._a||p.a,y=p._b=p._b||p.b,g=g?D.makeCalcdata(p,"_a"):[],y=y?P.makeCalcdata(p,"_b"):[],m=p.a0||0,b=p.da||1,M=p.b0||0,h=p.db||1,E=p._z=T(p._z||p.z,p.transpose),p._emptypoints=f(E),x(E,p._emptypoints);var L=w.maxRowLength(E),O=p.xtype==="scaled"?"":g,N=s(p,O,m,b,L,D),V=p.ytype==="scaled"?"":y,F={a:N,b:s(p,V,M,h,E.length,P),z:E};return p.contours.type==="levels"&&p.contours.coloring!=="none"&&v(_,p,{vals:E,containerStr:"",cLetter:"z"}),[F]}(i,a);return r(a,a._z),c}}},3252:function(C,A,e){"use strict";var v=e(3400),w=e(51264),n=e(37960),T=e(95536),x=e(84952),f=e(97680);C.exports=function(s,t,o,r){function i(a,u){return v.coerce(s,t,n,a,u)}if(i("carpet"),s.a&&s.b){if(!w(s,t,i,r,"a","b"))return void(t.visible=!1);i("text"),i("contours.type")==="constraint"?T(s,t,i,r,o,{hasHover:!1}):(x(s,t,i,function(a){return v.coerce2(s,t,n,a)}),f(s,t,i,r,{hasHover:!1}))}else t._defaultColor=o,t._length=null;i("zorder")}},40448:function(C,A,e){"use strict";C.exports={attributes:e(37960),supplyDefaults:e(3252),colorbar:e(55296),calc:e(30572),plot:e(94440),style:e(52440),moduleType:"trace",name:"contourcarpet",basePlotModule:e(57952),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},94440:function(C,A,e){"use strict";var v=e(33428),w=e(87072),n=e(53416),T=e(43616),x=e(3400),f=e(72424),s=e(88748),t=e(23676),o=e(93252),r=e(82172),i=e(61512),a=e(56008),u=e(50948),l=e(77712);function d(p,g,m){var b=p.getPointAtLength(g),y=p.getPointAtLength(m),M=y.x-b.x,h=y.y-b.y,E=Math.sqrt(M*M+h*h);return[M/E,h/E]}function c(p){var g=Math.sqrt(p[0]*p[0]+p[1]*p[1]);return[p[0]/g,p[1]/g]}function _(p,g){var m=Math.abs(p[0]*g[0]+p[1]*g[1]);return Math.sqrt(1-m*m)/m}C.exports=function(p,g,m,b){var y=g.xaxis,M=g.yaxis;x.makeTraceGroups(b,m,"contour").each(function(h){var E=v.select(this),k=h[0],D=k.trace,P=D._carpetTrace=u(p,D),L=p.calcdata[P.index][0];if(P.visible&&P.visible!=="legendonly"){var O=k.a,N=k.b,V=D.contours,F=i(V,g,k),j=V.type==="constraint",Z=V._operation,z=j?Z==="="?"lines":"fill":V.coloring,H=[[O[0],N[N.length-1]],[O[O.length-1],N[N.length-1]],[O[O.length-1],N[0]],[O[0],N[0]]];f(F);var U=1e-8*(O[O.length-1]-O[0]),re=1e-8*(N[N.length-1]-N[0]);s(F,U,re);var ee,J,Q,ne,K=F;V.type==="constraint"&&(K=r(F,Z)),function(de,be){var _e,xe,ve,ye,me,Me,Ae,ce,ae;for(_e=0;_e<de.length;_e++){for(me=(ye=de[_e]).pedgepaths=[],Me=ye.ppaths=[],xe=0;xe<ye.edgepaths.length;xe++){for(ae=ye.edgepaths[xe],Ae=[],ve=0;ve<ae.length;ve++)Ae[ve]=be(ae[ve]);me.push(Ae)}for(xe=0;xe<ye.paths.length;xe++){for(ae=ye.paths[xe],ce=[],ve=0;ve<ae.length;ve++)ce[ve]=be(ae[ve]);Me.push(ce)}}}(F,se);var oe=[];for(ne=L.clipsegments.length-1;ne>=0;ne--)ee=L.clipsegments[ne],J=w([],ee.x,y.c2p),Q=w([],ee.y,M.c2p),J.reverse(),Q.reverse(),oe.push(n(J,Q,ee.bicubic));var le="M"+oe.join("L")+"Z";(function(de,be,_e,xe,ve,ye){var me,Me,Ae,ce,ae=x.ensureSingle(de,"g","contourbg").selectAll("path").data(ye!=="fill"||ve?[]:[0]);ae.enter().append("path"),ae.exit().remove();var pe=[];for(ce=0;ce<be.length;ce++)me=be[ce],Me=w([],me.x,_e.c2p),Ae=w([],me.y,xe.c2p),pe.push(n(Me,Ae,me.bicubic));ae.attr("d","M"+pe.join("L")+"Z").style("stroke","none")})(E,L.clipsegments,y,M,j,z),function(de,be,_e,xe,ve,ye,me,Me,Ae,ce,ae){var pe=ce==="fill";pe&&a(ve,de.contours);var De=x.ensureSingle(be,"g","contourfill").selectAll("path").data(pe?ve:[]);De.enter().append("path"),De.exit().remove(),De.each(function(ke){var Ee=(ke.prefixBoundary?ae:"")+function(Ie,Re,Ne,ge,we,Ce,ze,Pe){var Ue,Ge,Xe,st,at,vt,xt,gt="",rt=Re.edgepaths.map(function(it,Be){return Be}),tt=!0,Mt=1e-4*Math.abs(Ne[0][0]-Ne[2][0]),Pt=1e-4*Math.abs(Ne[0][1]-Ne[2][1]);function Rt(it){return Math.abs(it[1]-Ne[0][1])<Pt}function St(it){return Math.abs(it[1]-Ne[2][1])<Pt}function Ye(it){return Math.abs(it[0]-Ne[0][0])<Mt}function Ke(it){return Math.abs(it[0]-Ne[2][0])<Mt}function Ve(it,Be){var je,ot,Ze,dt,mt="";for(Rt(it)&&!Ke(it)||St(it)&&!Ye(it)?(dt=we.aaxis,Ze=l(we,Ce,[it[0],Be[0]],.5*(it[1]+Be[1]))):(dt=we.baxis,Ze=l(we,Ce,.5*(it[0]+Be[0]),[it[1],Be[1]])),je=1;je<Ze.length;je++)for(mt+=dt.smoothing?"C":"L",ot=0;ot<Ze[je].length;ot++){var yt=Ze[je][ot];mt+=[ze.c2p(yt[0]),Pe.c2p(yt[1])]+" "}return mt}for(Ue=0,Ge=null;rt.length;){var $e=Re.edgepaths[Ue][0];for(Ge&&(gt+=Ve(Ge,$e)),xt=T.smoothopen(Re.edgepaths[Ue].map(ge),Re.smoothing),gt+=tt?xt:xt.replace(/^M/,"L"),rt.splice(rt.indexOf(Ue),1),Ge=Re.edgepaths[Ue][Re.edgepaths[Ue].length-1],at=-1,st=0;st<4;st++){if(!Ge){x.log("Missing end?",Ue,Re);break}for(Rt(Ge)&&!Ke(Ge)?Xe=Ne[1]:Ye(Ge)?Xe=Ne[0]:St(Ge)?Xe=Ne[3]:Ke(Ge)&&(Xe=Ne[2]),vt=0;vt<Re.edgepaths.length;vt++){var lt=Re.edgepaths[vt][0];Math.abs(Ge[0]-Xe[0])<Mt?Math.abs(Ge[0]-lt[0])<Mt&&(lt[1]-Ge[1])*(Xe[1]-lt[1])>=0&&(Xe=lt,at=vt):Math.abs(Ge[1]-Xe[1])<Pt?Math.abs(Ge[1]-lt[1])<Pt&&(lt[0]-Ge[0])*(Xe[0]-lt[0])>=0&&(Xe=lt,at=vt):x.log("endpt to newendpt is not vert. or horz.",Ge,Xe,lt)}if(at>=0)break;gt+=Ve(Ge,Xe),Ge=Xe}if(at===Re.edgepaths.length){x.log("unclosed perimeter path");break}Ue=at,(tt=rt.indexOf(Ue)===-1)&&(Ue=rt[0],gt+=Ve(Ge,Xe)+"Z",Ge=null)}for(Ue=0;Ue<Re.paths.length;Ue++)gt+=T.smoothclosed(Re.paths[Ue].map(ge),Re.smoothing);return gt}(0,ke,ye,me,Me,Ae,_e,xe);Ee?v.select(this).attr("d",Ee).style("stroke","none"):v.select(this).remove()})}(D,E,y,M,K,H,se,P,L,z,le),function(de,be,_e,xe,ve,ye,me){var Me=_e._context.staticPlot,Ae=x.ensureSingle(de,"g","contourlines"),ce=ve.showlines!==!1,ae=ve.showlabels,pe=ce&&ae,De=t.createLines(Ae,ce||ae,be,Me),ke=t.createLineClip(Ae,pe,_e,xe.trace.uid),Ee=de.selectAll("g.contourlabels").data(ae?[0]:[]);if(Ee.exit().remove(),Ee.enter().append("g").classed("contourlabels",!0),ae){var Ie=ye.xaxis,Re=ye.yaxis,Ne=Ie._length,ge=Re._length,we=[[[0,0],[Ne,0],[Ne,ge],[0,ge]]],Ce=[];x.clearLocationCache();var ze=t.labelFormatter(_e,xe),Pe=T.tester.append("text").attr("data-notex",1).call(T.font,ve.labelfont),Ue={left:0,right:Ne,center:Ne/2,top:0,bottom:ge,middle:ge/2},Ge=Math.sqrt(Ne*Ne+ge*ge),Xe=o.LABELDISTANCE*Ge/Math.max(1,be.length/o.LABELINCREASE);De.each(function(st){var at=t.calcTextOpts(st.level,ze,Pe,_e);v.select(this).selectAll("path").each(function(vt){var xt=this,gt=x.getVisibleSegment(xt,Ue,at.height/2);if(gt&&(function(Pt,Rt,St,Ye,Ke,Ve){for(var $e,lt=0;lt<St.pedgepaths.length;lt++)Rt===St.pedgepaths[lt]&&($e=St.edgepaths[lt]);if($e){var it=Ke.a[0],Be=Ke.a[Ke.a.length-1],je=Ke.b[0],ot=Ke.b[Ke.b.length-1],Ze=d(Pt,0,1),dt=d(Pt,Ye.total,Ye.total-1),mt=ht($e[0],Ze),yt=Ye.total-ht($e[$e.length-1],dt);Ye.min<mt&&(Ye.min=mt),Ye.max>yt&&(Ye.max=yt),Ye.len=Ye.max-Ye.min}function ht(kt,_t){var Et,Lt=0,Ot=.1;return(Math.abs(kt[0]-it)<Ot||Math.abs(kt[0]-Be)<Ot)&&(Et=c(Ke.dxydb_rough(kt[0],kt[1],Ot)),Lt=Math.max(Lt,Ve*_(_t,Et)/2)),(Math.abs(kt[1]-je)<Ot||Math.abs(kt[1]-ot)<Ot)&&(Et=c(Ke.dxyda_rough(kt[0],kt[1],Ot)),Lt=Math.max(Lt,Ve*_(_t,Et)/2)),Lt}}(xt,vt,st,gt,me,at.height),!(gt.len<(at.width+at.height)*o.LABELMIN)))for(var rt=Math.min(Math.ceil(gt.len/Xe),o.LABELMAX),tt=0;tt<rt;tt++){var Mt=t.findBestTextLocation(xt,gt,at,Ce,Ue);if(!Mt)break;t.addLabelData(Mt,at,Ce,we)}})}),Pe.remove(),t.drawLabels(Ee,Ce,_e,ke,pe?we:null)}ae&&!ce&&De.remove()}(E,F,p,k,V,g,P),T.setClipUrl(E,P._clipPathId,p)}function se(de){var be=P.ab2xy(de[0],de[1],!0);return[y.c2p(be[0]),M.c2p(be[1])]}})}},33928:function(C,A,e){"use strict";var v=e(49084),w=e(21776).Ks,n=e(45464),T=e(31512),x=e(92880).extendFlat;C.exports=x({lon:T.lon,lat:T.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:T.text,hovertext:T.hovertext,hoverinfo:x({},n.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:w(),showlegend:x({},n.showlegend,{dflt:!1})},v("",{cLetter:"z",editTypeOverride:"calc"}))},90876:function(C,A,e){"use strict";var v=e(38248),w=e(3400).isArrayOrTypedArray,n=e(39032).BADNUM,T=e(47128),x=e(3400)._;C.exports=function(f,s){for(var t=s._length,o=new Array(t),r=s.z,i=w(r)&&r.length,a=0;a<t;a++){var u=o[a]={},l=s.lon[a],d=s.lat[a];if(u.lonlat=v(l)&&v(d)?[+l,+d]:[n,n],i){var c=r[a];u.z=v(c)?c:n}}return T(f,s,{vals:i?r:[0,1],containerStr:"",cLetter:"z"}),t&&(o[0].t={labels:{lat:x(f,"lat:")+" ",lon:x(f,"lon:")+" "}}),o}},4629:function(C,A,e){"use strict";var v=e(38248),w=e(3400),n=e(76308),T=e(8932),x=e(39032).BADNUM,f=e(44808).makeBlank;C.exports=function(s){var t=s[0].trace,o=t.visible===!0&&t._length!==0,r=t._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:f()};if(!o)return r;var i,a=[],u=t.z,l=t.radius,d=w.isArrayOrTypedArray(u)&&u.length,c=w.isArrayOrTypedArray(l);for(i=0;i<s.length;i++){var _=s[i],p=_.lonlat;if(p[0]!==x){var g={};if(d){var m=_.z;g.z=m!==x?m:0}c&&(g.r=v(l[i])&&l[i]>0?+l[i]:0),a.push({type:"Feature",geometry:{type:"Point",coordinates:p},properties:g})}}var b=T.extractOpts(t),y=b.reversescale?T.flipScale(b.colorscale):b.colorscale,M=y[0][1],h=["interpolate",["linear"],["heatmap-density"],0,n.opacity(M)<1?M:n.addOpacity(M,0)];for(i=1;i<y.length;i++)h.push(y[i][0],y[i][1]);var E=["interpolate",["linear"],["get","z"],b.min,0,b.max,1];return w.extendFlat(r.heatmap.paint,{"heatmap-weight":d?E:1/(b.max-b.min),"heatmap-color":h,"heatmap-radius":c?{type:"identity",property:"r"}:t.radius,"heatmap-opacity":t.opacity}),r.geojson={type:"FeatureCollection",features:a},r.heatmap.layout.visibility="visible",r}},97664:function(C,A,e){"use strict";var v=e(3400),w=e(27260),n=e(33928);C.exports=function(T,x,f,s){function t(a,u){return v.coerce(T,x,n,a,u)}var o=t("lon")||[],r=t("lat")||[],i=Math.min(o.length,r.length);i?(x._length=i,t("z"),t("radius"),t("below"),t("text"),t("hovertext"),t("hovertemplate"),w(T,x,s,t,{prefix:"",cLetter:"z"})):x.visible=!1}},96176:function(C){"use strict";C.exports=function(A,e){return A.lon=e.lon,A.lat=e.lat,A.z=e.z,A}},25336:function(C,A,e){"use strict";var v=e(54460),w=e(63312).hoverPoints,n=e(63312).getExtraText;C.exports=function(T,x,f){var s=w(T,x,f);if(s){var t=s[0],o=t.cd,r=o[0].trace,i=o[t.index];if(delete t.color,"z"in i){var a=t.subplot.mockAxis;t.z=i.z,t.zLabel=v.tickText(a,a.c2l(i.z),"hover").text}return t.extraText=n(r,i,o[0].t.labels),[t]}}},15088:function(C,A,e){"use strict";C.exports={attributes:e(33928),supplyDefaults:e(97664),colorbar:e(96288),formatLabels:e(11960),calc:e(90876),plot:e(35256),hoverPoints:e(25336),eventData:e(96176),getBelow:function(v,w){for(var n=w.getMapLayers(),T=0;T<n.length;T++){var x=n[T],f=x.id;if(x.type==="symbol"&&typeof f=="string"&&f.indexOf("plotly-")===-1)return f}},moduleType:"trace",name:"densitymapbox",basePlotModule:e(33688),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},35256:function(C,A,e){"use strict";var v=e(4629),w=e(47552).traceLayerPrefix;function n(x,f){this.type="densitymapbox",this.subplot=x,this.uid=f,this.sourceId="source-"+f,this.layerList=[["heatmap",w+f+"-heatmap"]],this.below=null}var T=n.prototype;T.update=function(x){var f=this.subplot,s=this.layerList,t=v(x),o=f.belowLookup["trace-"+this.uid];f.map.getSource(this.sourceId).setData(t.geojson),o!==this.below&&(this._removeLayers(),this._addLayers(t,o),this.below=o);for(var r=0;r<s.length;r++){var i=s[r],a=i[0],u=i[1],l=t[a];f.setOptions(u,"setLayoutProperty",l.layout),l.layout.visibility==="visible"&&f.setOptions(u,"setPaintProperty",l.paint)}},T._addLayers=function(x,f){for(var s=this.subplot,t=this.layerList,o=this.sourceId,r=0;r<t.length;r++){var i=t[r],a=i[0],u=x[a];s.addLayer({type:a,id:i[1],source:o,layout:u.layout,paint:u.paint},f)}},T._removeLayers=function(){for(var x=this.subplot.map,f=this.layerList,s=f.length-1;s>=0;s--)x.removeLayer(f[s][1])},T.dispose=function(){var x=this.subplot.map;this._removeLayers(),x.removeSource(this.sourceId)},C.exports=function(x,f){var s=f[0].trace,t=new n(x,s.uid),o=t.sourceId,r=v(f),i=t.below=x.belowLookup["trace-"+s.uid];return x.map.addSource(o,{type:"geojson",data:r.geojson}),t._addLayers(r,i),t}},74248:function(C,A,e){"use strict";var v=e(3400);C.exports=function(w,n){for(var T=0;T<w.length;T++)w[T].i=T;v.mergeArray(n.text,w,"tx"),v.mergeArray(n.hovertext,w,"htx");var x=n.marker;if(x){v.mergeArray(x.opacity,w,"mo"),v.mergeArray(x.color,w,"mc");var f=x.line;f&&(v.mergeArray(f.color,w,"mlc"),v.mergeArrayCastPositive(f.width,w,"mlw"))}}},20088:function(C,A,e){"use strict";var v,w=e(20832),n=e(52904).line,T=e(45464),x=e(29736).axisHoverFormat,f=e(21776).Ks,s=e(21776).Gw,t=e(74732),o=e(92880).extendFlat,r=e(76308);C.exports={x:w.x,x0:w.x0,dx:w.dx,y:w.y,y0:w.y0,dy:w.dy,xperiod:w.xperiod,yperiod:w.yperiod,xperiod0:w.xperiod0,yperiod0:w.yperiod0,xperiodalignment:w.xperiodalignment,yperiodalignment:w.yperiodalignment,xhoverformat:x("x"),yhoverformat:x("y"),hovertext:w.hovertext,hovertemplate:f({},{keys:t.eventDataKeys}),hoverinfo:o({},T.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:s({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),text:w.text,textposition:w.textposition,insidetextanchor:o({},w.insidetextanchor,{dflt:"middle"}),textangle:o({},w.textangle,{dflt:0}),textfont:w.textfont,insidetextfont:w.insidetextfont,outsidetextfont:w.outsidetextfont,constraintext:w.constraintext,cliponaxis:w.cliponaxis,orientation:o({},w.orientation,{}),offset:o({},w.offset,{arrayOk:!1}),width:o({},w.width,{arrayOk:!1}),marker:(v=o({},w.marker),delete v.pattern,delete v.cornerradius,v),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:o({},n.color,{dflt:r.defaultLine}),width:o({},n.width,{dflt:0,editType:"plot"}),dash:n.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:w.offsetgroup,alignmentgroup:w.alignmentgroup,zorder:w.zorder}},23096:function(C,A,e){"use strict";var v=e(54460),w=e(1220),n=e(74248),T=e(4500),x=e(39032).BADNUM;function f(s){return s===x?0:s}C.exports=function(s,t){var o,r,i,a,u,l,d,c,_=v.getFromId(s,t.xaxis||"x"),p=v.getFromId(s,t.yaxis||"y");t.orientation==="h"?(o=_.makeCalcdata(t,"x"),i=p.makeCalcdata(t,"y"),a=w(t,p,"y",i),u=!!t.yperiodalignment,l="y"):(o=p.makeCalcdata(t,"y"),i=_.makeCalcdata(t,"x"),a=w(t,_,"x",i),u=!!t.xperiodalignment,l="x"),r=a.vals;var g,m=Math.min(r.length,o.length),b=new Array(m);for(t._base=[],d=0;d<m;d++){o[d]<0&&(o[d]=x);var y=!1;o[d]!==x&&d+1<m&&o[d+1]!==x&&(y=!0),c=b[d]={p:r[d],s:o[d],cNext:y},t._base[d]=-.5*c.s,u&&(b[d].orig_p=i[d],b[d][l+"End"]=a.ends[d],b[d][l+"Start"]=a.starts[d]),t.ids&&(c.id=String(t.ids[d])),d===0&&(b[0].vTotal=0),b[0].vTotal+=f(c.s),c.begR=f(c.s)/f(b[0].s)}for(d=0;d<m;d++)(c=b[d]).s!==x&&(c.sumR=c.s/b[0].vTotal,c.difR=g!==void 0?c.s/g:1,g=c.s);return n(b,t),T(b,t),b}},74732:function(C){"use strict";C.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},4804:function(C,A,e){"use strict";var v=e(96376).setGroupPositions;C.exports=function(w,n){var T,x,f=w._fullLayout,s=w._fullData,t=w.calcdata,o=n.xaxis,r=n.yaxis,i=[],a=[],u=[];for(x=0;x<s.length;x++){var l=s[x],d=l.orientation==="h";l.visible===!0&&l.xaxis===o._id&&l.yaxis===r._id&&l.type==="funnel"&&(T=t[x],d?u.push(T):a.push(T),i.push(T))}var c={mode:f.funnelmode,norm:f.funnelnorm,gap:f.funnelgap,groupgap:f.funnelgroupgap};for(v(w,o,r,a,c),v(w,r,o,u,c),x=0;x<i.length;x++){T=i[x];for(var _=0;_<T.length;_++)_+1<T.length&&(T[_].nextP0=T[_+1].p0,T[_].nextS0=T[_+1].s0,T[_].nextP1=T[_+1].p1,T[_].nextS1=T[_+1].s1)}}},45432:function(C,A,e){"use strict";var v=e(3400),w=e(20011),n=e(31508).handleText,T=e(43980),x=e(31147),f=e(20088),s=e(76308);C.exports={supplyDefaults:function(t,o,r,i){function a(c,_){return v.coerce(t,o,f,c,_)}if(T(t,o,i,a)){x(t,o,i,a),a("xhoverformat"),a("yhoverformat"),a("orientation",o.y&&!o.x?"v":"h"),a("offset"),a("width");var u=a("text");a("hovertext"),a("hovertemplate");var l=a("textposition");n(t,o,i,a,l,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),o.textposition==="none"||o.texttemplate||a("textinfo",v.isArrayOrTypedArray(u)?"text+value":"value");var d=a("marker.color",r);a("marker.line.color",s.defaultLine),a("marker.line.width"),a("connector.visible")&&(a("connector.fillcolor",function(c){var _=v.isArrayOrTypedArray(c)?"#000":c;return s.addOpacity(_,.5*s.opacity(_))}(d)),a("connector.line.width")&&(a("connector.line.color"),a("connector.line.dash"))),a("zorder")}else o.visible=!1},crossTraceDefaults:function(t,o){var r,i;function a(l){return v.coerce(i._input,i,f,l)}if(o.funnelmode==="group")for(var u=0;u<t.length;u++)r=(i=t[u])._input,w(r,i,o,a)}}},34580:function(C){"use strict";C.exports=function(A,e){return A.x="xVal"in e?e.xVal:e.x,A.y="yVal"in e?e.yVal:e.y,"percentInitial"in e&&(A.percentInitial=e.percentInitial),"percentPrevious"in e&&(A.percentPrevious=e.percentPrevious),"percentTotal"in e&&(A.percentTotal=e.percentTotal),e.xa&&(A.xaxis=e.xa),e.ya&&(A.yaxis=e.ya),A}},31488:function(C,A,e){"use strict";var v=e(76308).opacity,w=e(63400).hoverOnBars,n=e(3400).formatPercent;C.exports=function(T,x,f,s,t){var o=w(T,x,f,s,t);if(o){var r=o.cd,i=r[0].trace,a=i.orientation==="h",u=r[o.index];o[(a?"x":"y")+"LabelVal"]=u.s,o.percentInitial=u.begR,o.percentInitialLabel=n(u.begR,1),o.percentPrevious=u.difR,o.percentPreviousLabel=n(u.difR,1),o.percentTotal=u.sumR,o.percentTotalLabel=n(u.sumR,1);var l=u.hi||i.hoverinfo,d=[];if(l&&l!=="none"&&l!=="skip"){var c=l==="all",_=l.split("+"),p=function(g){return c||_.indexOf(g)!==-1};p("percent initial")&&d.push(o.percentInitialLabel+" of initial"),p("percent previous")&&d.push(o.percentPreviousLabel+" of previous"),p("percent total")&&d.push(o.percentTotalLabel+" of total")}return o.extraText=d.join("<br>"),o.color=function(g,m){var b=g.marker,y=m.mc||b.color,M=m.mlc||b.line.color,h=m.mlw||b.line.width;return v(y)?y:v(M)&&h?M:void 0}(i,u),[o]}}},94704:function(C,A,e){"use strict";C.exports={attributes:e(20088),layoutAttributes:e(7076),supplyDefaults:e(45432).supplyDefaults,crossTraceDefaults:e(45432).crossTraceDefaults,supplyLayoutDefaults:e(11631),calc:e(23096),crossTraceCalc:e(4804),plot:e(42200),style:e(44544).style,hoverPoints:e(31488),eventData:e(34580),selectPoints:e(45784),moduleType:"trace",name:"funnel",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},7076:function(C){"use strict";C.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},11631:function(C,A,e){"use strict";var v=e(3400),w=e(7076);C.exports=function(n,T,x){var f=!1;function s(r,i){return v.coerce(n,T,w,r,i)}for(var t=0;t<x.length;t++){var o=x[t];if(o.visible&&o.type==="funnel"){f=!0;break}}f&&(s("funnelmode"),s("funnelgap",.2),s("funnelgroupgap"))}},42200:function(C,A,e){"use strict";var v=e(33428),w=e(3400),n=e(43616),T=e(39032).BADNUM,x=e(98184),f=e(82744).clearMinTextSize;function s(t,o,r,i){var a=[],u=[],l=i?o:r,d=i?r:o;return a[0]=l.c2p(t.s0,!0),u[0]=d.c2p(t.p0,!0),a[1]=l.c2p(t.s1,!0),u[1]=d.c2p(t.p1,!0),a[2]=l.c2p(t.nextS0,!0),u[2]=d.c2p(t.nextP0,!0),a[3]=l.c2p(t.nextS1,!0),u[3]=d.c2p(t.nextP1,!0),i?[a,u]:[u,a]}C.exports=function(t,o,r,i){var a=t._fullLayout;f("funnel",a),function(u,l,d,c){var _=l.xaxis,p=l.yaxis;w.makeTraceGroups(c,d,"trace bars").each(function(g){var m=v.select(this),b=g[0].trace,y=w.ensureSingle(m,"g","regions");if(b.connector&&b.connector.visible){var M=b.orientation==="h",h=y.selectAll("g.region").data(w.identity);h.enter().append("g").classed("region",!0),h.exit().remove();var E=h.size();h.each(function(k,D){if(D===E-1||k.cNext){var P=s(k,_,p,M),L=P[0],O=P[1],N="";L[0]!==T&&O[0]!==T&&L[1]!==T&&O[1]!==T&&L[2]!==T&&O[2]!==T&&L[3]!==T&&O[3]!==T&&(N+=M?"M"+L[0]+","+O[1]+"L"+L[2]+","+O[2]+"H"+L[3]+"L"+L[1]+","+O[1]+"Z":"M"+L[1]+","+O[1]+"L"+L[2]+","+O[3]+"V"+O[2]+"L"+L[1]+","+O[0]+"Z"),N===""&&(N="M0,0Z"),w.ensureSingle(v.select(this),"path").attr("d",N).call(n.setClipUrl,l.layerClipId,u)}})}else y.remove()})}(t,o,r,i),function(u,l,d,c){var _=l.xaxis,p=l.yaxis;w.makeTraceGroups(c,d,"trace bars").each(function(g){var m=v.select(this),b=g[0].trace,y=w.ensureSingle(m,"g","lines");if(b.connector&&b.connector.visible&&b.connector.line.width){var M=b.orientation==="h",h=y.selectAll("g.line").data(w.identity);h.enter().append("g").classed("line",!0),h.exit().remove();var E=h.size();h.each(function(k,D){if(D===E-1||k.cNext){var P=s(k,_,p,M),L=P[0],O=P[1],N="";L[3]!==void 0&&O[3]!==void 0&&(M?(N+="M"+L[0]+","+O[1]+"L"+L[2]+","+O[2],N+="M"+L[1]+","+O[1]+"L"+L[3]+","+O[2]):(N+="M"+L[1]+","+O[1]+"L"+L[2]+","+O[3],N+="M"+L[1]+","+O[0]+"L"+L[2]+","+O[2])),N===""&&(N="M0,0Z"),w.ensureSingle(v.select(this),"path").attr("d",N).call(n.setClipUrl,l.layerClipId,u)}})}else y.remove()})}(t,o,r,i),x.plot(t,o,r,i,{mode:a.funnelmode,norm:a.funnelmode,gap:a.funnelgap,groupgap:a.funnelgroupgap})}},44544:function(C,A,e){"use strict";var v=e(33428),w=e(43616),n=e(76308),T=e(13448).DESELECTDIM,x=e(60100),f=e(82744).resizeText,s=x.styleTextPoints;C.exports={style:function(t,o,r){var i=r||v.select(t).selectAll('g[class^="funnellayer"]').selectAll("g.trace");f(t,i,"funnel"),i.style("opacity",function(a){return a[0].trace.opacity}),i.each(function(a){var u=v.select(this),l=a[0].trace;u.selectAll(".point > path").each(function(d){if(!d.isBlank){var c=l.marker;v.select(this).call(n.fill,d.mc||c.color).call(n.stroke,d.mlc||c.line.color).call(w.dashLine,c.line.dash,d.mlw||c.line.width).style("opacity",l.selectedpoints&&!d.selected?T:1)}}),s(u,l,t),u.selectAll(".regions").each(function(){v.select(this).selectAll("path").style("stroke-width",0).call(n.fill,l.connector.fillcolor)}),u.selectAll(".lines").each(function(){var d=l.connector.line;w.lineGroupStyle(v.select(this).selectAll("path"),d.width,d.color,d.dash)})})}}},22332:function(C,A,e){"use strict";var v=e(74996),w=e(45464),n=e(86968).u,T=e(21776).Ks,x=e(21776).Gw,f=e(92880).extendFlat;C.exports={labels:v.labels,label0:v.label0,dlabel:v.dlabel,values:v.values,marker:{colors:v.marker.colors,line:{color:f({},v.marker.line.color,{dflt:null}),width:f({},v.marker.line.width,{dflt:1}),editType:"calc"},pattern:v.marker.pattern,editType:"calc"},text:v.text,hovertext:v.hovertext,scalegroup:f({},v.scalegroup,{}),textinfo:f({},v.textinfo,{flags:["label","text","value","percent"]}),texttemplate:x({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:f({},w.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:T({},{keys:["label","color","value","text","percent"]}),textposition:f({},v.textposition,{values:["inside","none"],dflt:"inside"}),textfont:v.textfont,insidetextfont:v.insidetextfont,title:{text:v.title.text,font:v.title.font,position:f({},v.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:n({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},91248:function(C,A,e){"use strict";var v=e(7316);A.name="funnelarea",A.plot=function(w,n,T,x){v.plotBasePlot(A.name,w,n,T,x)},A.clean=function(w,n,T,x){v.cleanBasePlot(A.name,w,n,T,x)}},54e3:function(C,A,e){"use strict";var v=e(45768);C.exports={calc:function(w,n){return v.calc(w,n)},crossTraceCalc:function(w){v.crossTraceCalc(w,{type:"funnelarea"})}}},92688:function(C,A,e){"use strict";var v=e(3400),w=e(22332),n=e(86968).Q,T=e(31508).handleText,x=e(74174).handleLabelsAndValues,f=e(74174).handleMarkerDefaults;C.exports=function(s,t,o,r){function i(m,b){return v.coerce(s,t,w,m,b)}var a=i("labels"),u=i("values"),l=x(a,u),d=l.len;if(t._hasLabels=l.hasLabels,t._hasValues=l.hasValues,!t._hasLabels&&t._hasValues&&(i("label0"),i("dlabel")),d){t._length=d,f(s,t,r,i),i("scalegroup");var c,_=i("text"),p=i("texttemplate");if(p||(c=i("textinfo",Array.isArray(_)?"text+percent":"percent")),i("hovertext"),i("hovertemplate"),p||c&&c!=="none"){var g=i("textposition");T(s,t,r,i,g,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}else c==="none"&&i("textposition","none");n(t,r,i),i("title.text")&&(i("title.position"),v.coerceFont(i,"title.font",r.font)),i("aspectratio"),i("baseratio")}else t.visible=!1}},62396:function(C,A,e){"use strict";C.exports={moduleType:"trace",name:"funnelarea",basePlotModule:e(91248),categories:["pie-like","funnelarea","showLegend"],attributes:e(22332),layoutAttributes:e(61280),supplyDefaults:e(92688),supplyLayoutDefaults:e(35384),calc:e(54e3).calc,crossTraceCalc:e(54e3).crossTraceCalc,plot:e(39472),style:e(62096),styleOne:e(10528),meta:{}}},61280:function(C,A,e){"use strict";var v=e(85204).hiddenlabels;C.exports={hiddenlabels:v,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},35384:function(C,A,e){"use strict";var v=e(3400),w=e(61280);C.exports=function(n,T){function x(f,s){return v.coerce(n,T,w,f,s)}x("hiddenlabels"),x("funnelareacolorway",T.colorway),x("extendfunnelareacolors")}},39472:function(C,A,e){"use strict";var v=e(33428),w=e(43616),n=e(3400),T=n.strScale,x=n.strTranslate,f=e(72736),s=e(98184).toMoveInsideBar,t=e(82744),o=t.recordMinTextSize,r=t.clearMinTextSize,i=e(69656),a=e(37820),u=a.attachFxHandlers,l=a.determineInsideTextFont,d=a.layoutAreas,c=a.prerenderTitles,_=a.positionTitleOutside,p=a.formatSliceLabel;function g(m,b){return"l"+(b[0]-m[0])+","+(b[1]-m[1])}C.exports=function(m,b){var y=m._context.staticPlot,M=m._fullLayout;r("funnelarea",M),c(b,m),d(b,M._size),n.makeTraceGroups(M._funnelarealayer,b,"trace").each(function(h){var E=v.select(this),k=h[0],D=k.trace;(function(P){if(P.length){var L=P[0],O=L.trace,N=O.aspectratio,V=O.baseratio;V>.999&&(V=.999);var F,j,Z,z=Math.pow(V,2),H=L.vTotal,U=H,re=H*z/(1-z)/H,ee=[];for(ee.push(Ae()),j=P.length-1;j>-1;j--)if(!(Z=P[j]).hidden){var J=Z.v/U;re+=J,ee.push(Ae())}var Q=1/0,ne=-1/0;for(j=0;j<ee.length;j++)F=ee[j],Q=Math.min(Q,F[1]),ne=Math.max(ne,F[1]);for(j=0;j<ee.length;j++)ee[j][1]-=(ne+Q)/2;var K=ee[ee.length-1][0],oe=L.r,le=(ne-Q)/2,se=oe/K,de=oe/le*N;for(L.r=de*le,j=0;j<ee.length;j++)ee[j][0]*=se,ee[j][1]*=de;var be,_e,xe=[-(F=ee[0])[0],F[1]],ve=[F[0],F[1]],ye=0;for(j=P.length-1;j>-1;j--)if(!(Z=P[j]).hidden){var me=ee[ye+=1][0],Me=ee[ye][1];Z.TL=[-me,Me],Z.TR=[me,Me],Z.BL=xe,Z.BR=ve,Z.pxmid=(be=Z.TR,_e=Z.BR,[.5*(be[0]+_e[0]),.5*(be[1]+_e[1])]),xe=Z.TL,ve=Z.TR}}function Ae(){var ce,ae={x:ce=Math.sqrt(re),y:-ce};return[ae.x,ae.y]}})(h),E.each(function(){var P=v.select(this).selectAll("g.slice").data(h);P.enter().append("g").classed("slice",!0),P.exit().remove(),P.each(function(O,N){if(O.hidden)v.select(this).selectAll("path,g").remove();else{O.pointNumber=O.i,O.curveNumber=D.index;var V=k.cx,F=k.cy,j=v.select(this),Z=j.selectAll("path.surface").data([O]);Z.enter().append("path").classed("surface",!0).style({"pointer-events":y?"none":"all"}),j.call(u,m,h);var z="M"+(V+O.TR[0])+","+(F+O.TR[1])+g(O.TR,O.BR)+g(O.BR,O.BL)+g(O.BL,O.TL)+"Z";Z.attr("d",z),p(m,O,k);var H=i.castOption(D.textposition,O.pts),U=j.selectAll("g.slicetext").data(O.text&&H!=="none"?[0]:[]);U.enter().append("g").classed("slicetext",!0),U.exit().remove(),U.each(function(){var re=n.ensureSingle(v.select(this),"text","",function(se){se.attr("data-notex",1)}),ee=n.ensureUniformFontSize(m,l(D,O,M.font));re.text(O.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(w.font,ee).call(f.convertToTspans,m);var J,Q,ne,K=w.bBox(re.node()),oe=Math.min(O.BL[1],O.BR[1])+F,le=Math.max(O.TL[1],O.TR[1])+F;Q=Math.max(O.TL[0],O.BL[0])+V,ne=Math.min(O.TR[0],O.BR[0])+V,(J=s(Q,ne,oe,le,K,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=ee.size,o(D.type,J,M),h[N].transform=J,n.setTransormAndDisplay(re,J)})}});var L=v.select(this).selectAll("g.titletext").data(D.title.text?[0]:[]);L.enter().append("g").classed("titletext",!0),L.exit().remove(),L.each(function(){var O=n.ensureSingle(v.select(this),"text","",function(F){F.attr("data-notex",1)}),N=D.title.text;D._meta&&(N=n.templateString(N,D._meta)),O.text(N).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(w.font,D.title.font).call(f.convertToTspans,m);var V=_(k,M._size);O.attr("transform",x(V.x,V.y)+T(Math.min(1,V.scale))+x(V.tx,V.ty))})})})}},62096:function(C,A,e){"use strict";var v=e(33428),w=e(10528),n=e(82744).resizeText;C.exports=function(T){var x=T._fullLayout._funnelarealayer.selectAll(".trace");n(T,x,"funnelarea"),x.each(function(f){var s=f[0].trace,t=v.select(this);t.style({opacity:s.opacity}),t.selectAll("path.surface").each(function(o){v.select(this).call(w,o,s,T)})})}},83328:function(C,A,e){"use strict";var v=e(52904),w=e(45464),n=e(25376),T=e(29736).axisHoverFormat,x=e(21776).Ks,f=e(21776).Gw,s=e(49084),t=e(92880).extendFlat;C.exports=t({z:{valType:"data_array",editType:"calc"},x:t({},v.x,{impliedEdits:{xtype:"array"}}),x0:t({},v.x0,{impliedEdits:{xtype:"scaled"}}),dx:t({},v.dx,{impliedEdits:{xtype:"scaled"}}),y:t({},v.y,{impliedEdits:{ytype:"array"}}),y0:t({},v.y0,{impliedEdits:{ytype:"scaled"}}),dy:t({},v.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:t({},v.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:t({},v.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:t({},v.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:t({},v.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:t({},v.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:t({},v.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:x(),texttemplate:f({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:n({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:t({},w.showlegend,{dflt:!1}),zorder:v.zorder},{transforms:void 0},s("",{cLetter:"z",autoColorDflt:!1}))},19512:function(C,A,e){"use strict";var v=e(24040),w=e(3400),n=e(54460),T=e(1220),x=e(55480),f=e(47128),s=e(2872),t=e(26136),o=e(70448),r=e(11240),i=e(35744),a=e(39032).BADNUM;function u(l){for(var d=[],c=l.length,_=0;_<c;_++){var p=l[_];p!==a&&d.push(p)}return d}C.exports=function(l,d){var c,_,p,g,m,b,y,M,h,E,k,D=n.getFromId(l,d.xaxis||"x"),P=n.getFromId(l,d.yaxis||"y"),L=v.traceIs(d,"contour"),O=v.traceIs(d,"histogram"),N=v.traceIs(d,"gl2d"),V=L?"best":d.zsmooth;if(D._minDtick=0,P._minDtick=0,O)g=(k=x(l,d)).orig_x,c=k.x,_=k.x0,p=k.dx,M=k.orig_y,m=k.y,b=k.y0,y=k.dy,h=k.z;else{var F=d.z;w.isArray1D(F)?(s(d,D,P,"x","y",["z"]),c=d._x,m=d._y,F=d._z):(g=d.x?D.makeCalcdata(d,"x"):[],M=d.y?P.makeCalcdata(d,"y"):[],c=T(d,D,"x",g).vals,m=T(d,P,"y",M).vals,d._x=c,d._y=m),_=d.x0,p=d.dx,b=d.y0,y=d.dy,h=t(F,d,D,P)}function j(ne){V=d._input.zsmooth=d.zsmooth=!1,w.warn('cannot use zsmooth: "fast": '+ne)}function Z(ne){if(ne.length>1){var K=(ne[ne.length-1]-ne[0])/(ne.length-1),oe=Math.abs(K/100);for(E=0;E<ne.length-1;E++)if(Math.abs(ne[E+1]-ne[E]-K)>oe)return!1}return!0}(D.rangebreaks||P.rangebreaks)&&(h=function(ne,K,oe){for(var le=[],se=-1,de=0;de<oe.length;de++)if(K[de]!==a){le[++se]=[];for(var be=0;be<oe[de].length;be++)ne[be]!==a&&le[se].push(oe[de][be])}return le}(c,m,h),O||(c=u(c),m=u(m),d._x=c,d._y=m)),O||!L&&!d.connectgaps||(d._emptypoints=r(h),o(h,d._emptypoints)),d._islinear=!1,D.type==="log"||P.type==="log"?V==="fast"&&j("log axis found"):Z(c)?Z(m)?d._islinear=!0:V==="fast"&&j("y scale is not linear"):V==="fast"&&j("x scale is not linear");var z=w.maxRowLength(h),H=d.xtype==="scaled"?"":c,U=i(d,H,_,p,z,D),re=d.ytype==="scaled"?"":m,ee=i(d,re,b,y,h.length,P);N||(d._extremes[D._id]=n.findExtremes(D,U),d._extremes[P._id]=n.findExtremes(P,ee));var J={x:U,y:ee,z:h,text:d._text||d.text,hovertext:d._hovertext||d.hovertext};if(d.xperiodalignment&&g&&(J.orig_x=g),d.yperiodalignment&&M&&(J.orig_y=M),H&&H.length===U.length-1&&(J.xCenter=H),re&&re.length===ee.length-1&&(J.yCenter=re),O&&(J.xRanges=k.xRanges,J.yRanges=k.yRanges,J.pts=k.pts),L||f(l,d,{vals:h,cLetter:"z"}),L&&d.contours&&d.contours.coloring==="heatmap"){var Q={type:d.type==="contour"?"heatmap":"histogram2d",xcalendar:d.xcalendar,ycalendar:d.ycalendar};J.xfill=i(Q,H,_,p,z,D),J.yfill=i(Q,re,b,y,h.length,P)}return[J]}},26136:function(C,A,e){"use strict";var v=e(38248),w=e(3400),n=e(39032).BADNUM;C.exports=function(T,x,f,s){var t,o,r,i,a,u;function l(m){if(v(m))return+m}if(x&&x.transpose){for(t=0,a=0;a<T.length;a++)t=Math.max(t,T[a].length);if(t===0)return!1;r=function(m){return m.length},i=function(m,b,y){return(m[y]||[])[b]}}else t=T.length,r=function(m,b){return m[b].length},i=function(m,b,y){return(m[b]||[])[y]};var d=function(m,b,y){return b===n||y===n?n:i(m,b,y)};function c(m){if(x&&x.type!=="carpet"&&x.type!=="contourcarpet"&&m&&m.type==="category"&&x["_"+m._id.charAt(0)].length){var b=m._id.charAt(0),y={},M=x["_"+b+"CategoryMap"]||x[b];for(a=0;a<M.length;a++)y[M[a]]=a;return function(h){var E=y[m._categories[h]];return E+1?E:n}}return w.identity}var _=c(f),p=c(s);s&&s.type==="category"&&(t=s._categories.length);var g=new Array(t);for(a=0;a<t;a++)for(o=f&&f.type==="category"?f._categories.length:r(T,a),g[a]=new Array(o),u=0;u<o;u++)g[a][u]=l(d(T,p(a),_(u)));return g}},96288:function(C){"use strict";C.exports={min:"zmin",max:"zmax"}},2872:function(C,A,e){"use strict";var v=e(3400),w=e(39032).BADNUM,n=e(1220);C.exports=function(T,x,f,s,t,o){var r=T._length,i=x.makeCalcdata(T,s),a=f.makeCalcdata(T,t);i=n(T,x,s,i).vals,a=n(T,f,t,a).vals;var u,l,d,c,_=T.text,p=_!==void 0&&v.isArray1D(_),g=T.hovertext,m=g!==void 0&&v.isArray1D(g),b=v.distinctVals(i),y=b.vals,M=v.distinctVals(a),h=M.vals,E=[],k=h.length,D=y.length;for(u=0;u<o.length;u++)E[u]=v.init2dArray(k,D);p&&(d=v.init2dArray(k,D)),m&&(c=v.init2dArray(k,D));var P=v.init2dArray(k,D);for(u=0;u<r;u++)if(i[u]!==w&&a[u]!==w){var L=v.findBin(i[u]+b.minDiff/2,y),O=v.findBin(a[u]+M.minDiff/2,h);for(l=0;l<o.length;l++){var N=T[o[l]];E[l][O][L]=N[u],P[O][L]=u}p&&(d[O][L]=_[u]),m&&(c[O][L]=g[u])}for(T["_"+s]=y,T["_"+t]=h,l=0;l<o.length;l++)T["_"+o[l]]=E[l];p&&(T._text=d),m&&(T._hovertext=c),x&&x.type==="category"&&(T["_"+s+"CategoryMap"]=y.map(function(V){return x._categories[V]})),f&&f.type==="category"&&(T["_"+t+"CategoryMap"]=h.map(function(V){return f._categories[V]})),T._after2before=P}},24480:function(C,A,e){"use strict";var v=e(3400),w=e(51264),n=e(39096),T=e(31147),x=e(82748),f=e(27260),s=e(83328);C.exports=function(t,o,r,i){function a(u,l){return v.coerce(t,o,s,u,l)}w(t,o,a,i)?(T(t,o,i,a),a("xhoverformat"),a("yhoverformat"),a("text"),a("hovertext"),a("hovertemplate"),n(a,i),x(t,o,a,i),a("hoverongaps"),a("connectgaps",v.isArray1D(o.z)&&o.zsmooth!==!1),f(t,o,i,a,{prefix:"",cLetter:"z"}),a("zorder")):o.visible=!1}},11240:function(C,A,e){"use strict";var v=e(3400).maxRowLength;C.exports=function(w){var n,T,x,f,s,t,o,r,i=[],a={},u=[],l=w[0],d=[],c=[0,0,0],_=v(w);for(T=0;T<w.length;T++)for(n=d,d=l,l=w[T+1]||[],x=0;x<_;x++)d[x]===void 0&&((t=(d[x-1]!==void 0?1:0)+(d[x+1]!==void 0?1:0)+(n[x]!==void 0?1:0)+(l[x]!==void 0?1:0))?(T===0&&t++,x===0&&t++,T===w.length-1&&t++,x===d.length-1&&t++,t<4&&(a[[T,x]]=[T,x,t]),i.push([T,x,t])):u.push([T,x]));for(;u.length;){for(o={},r=!1,s=u.length-1;s>=0;s--)(t=((a[[(T=(f=u[s])[0])-1,x=f[1]]]||c)[2]+(a[[T+1,x]]||c)[2]+(a[[T,x-1]]||c)[2]+(a[[T,x+1]]||c)[2])/20)&&(o[f]=[T,x,t],u.splice(s,1),r=!0);if(!r)throw"findEmpties iterated with no new neighbors";for(f in o)a[f]=o[f],i.push(o[f])}return i.sort(function(p,g){return g[2]-p[2]})}},55512:function(C,A,e){"use strict";var v=e(93024),w=e(3400),n=w.isArrayOrTypedArray,T=e(54460),x=e(8932).extractOpts;C.exports=function(f,s,t,o,r){r||(r={});var i,a,u,l,d=r.isContour,c=f.cd[0],_=c.trace,p=f.xa,g=f.ya,m=c.x,b=c.y,y=c.z,M=c.xCenter,h=c.yCenter,E=c.zmask,k=_.zhoverformat,D=m,P=b;if(f.index!==!1){try{u=Math.round(f.index[1]),l=Math.round(f.index[0])}catch{return void w.error("Error hovering on heatmap, pointNumber must be [row,col], found:",f.index)}if(u<0||u>=y[0].length||l<0||l>y.length)return}else{if(v.inbox(s-m[0],s-m[m.length-1],0)>0||v.inbox(t-b[0],t-b[b.length-1],0)>0)return;if(d){var L;for(D=[2*m[0]-m[1]],L=1;L<m.length;L++)D.push((m[L]+m[L-1])/2);for(D.push([2*m[m.length-1]-m[m.length-2]]),P=[2*b[0]-b[1]],L=1;L<b.length;L++)P.push((b[L]+b[L-1])/2);P.push([2*b[b.length-1]-b[b.length-2]])}u=Math.max(0,Math.min(D.length-2,w.findBin(s,D))),l=Math.max(0,Math.min(P.length-2,w.findBin(t,P)))}var O,N,V=p.c2p(m[u]),F=p.c2p(m[u+1]),j=g.c2p(b[l]),Z=g.c2p(b[l+1]);d?(O=c.orig_x||m,N=c.orig_y||b,F=V,i=O[u],Z=j,a=N[l]):(O=c.orig_x||M||m,N=c.orig_y||h||b,i=M?O[u]:(O[u]+O[u+1])/2,a=h?N[l]:(N[l]+N[l+1])/2,p&&p.type==="category"&&(i=m[u]),g&&g.type==="category"&&(a=b[l]),_.zsmooth&&(V=F=p.c2p(i),j=Z=g.c2p(a)));var z=y[l][u];if(E&&!E[l][u]&&(z=void 0),z!==void 0||_.hoverongaps){var H;n(c.hovertext)&&n(c.hovertext[l])?H=c.hovertext[l][u]:n(c.text)&&n(c.text[l])&&(H=c.text[l][u]);var U=x(_),re={type:"linear",range:[U.min,U.max],hoverformat:k,_separators:p._separators,_numFormat:p._numFormat},ee=T.tickText(re,z,"hover").text;return[w.extendFlat(f,{index:_._after2before?_._after2before[l][u]:[l,u],distance:f.maxHoverDistance,spikeDistance:f.maxSpikeDistance,x0:V,x1:F,y0:j,y1:Z,xLabelVal:i,yLabelVal:a,zLabelVal:z,zLabel:ee,text:H})]}}},81932:function(C,A,e){"use strict";C.exports={attributes:e(83328),supplyDefaults:e(24480),calc:e(19512),plot:e(41420),colorbar:e(96288),style:e(41648),hoverPoints:e(55512),moduleType:"trace",name:"heatmap",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},70448:function(C,A,e){"use strict";var v=e(3400),w=[[-1,0],[1,0],[0,-1],[0,1]];function n(x){return .5-.25*Math.min(1,.5*x)}function T(x,f,s){var t,o,r,i,a,u,l,d,c,_,p,g,m,b=0;for(i=0;i<f.length;i++){for(o=(t=f[i])[0],r=t[1],p=x[o][r],_=0,c=0,a=0;a<4;a++)(l=x[o+(u=w[a])[0]])&&(d=l[r+u[1]])!==void 0&&(_===0?g=m=d:(g=Math.min(g,d),m=Math.max(m,d)),c++,_+=d);if(c===0)throw"iterateInterp2d order is wrong: no defined neighbors";x[o][r]=_/c,p===void 0?c<4&&(b=1):(x[o][r]=(1+s)*x[o][r]-s*p,m>g&&(b=Math.max(b,Math.abs(x[o][r]-p)/(m-g))))}return b}C.exports=function(x,f){var s,t=1;for(T(x,f),s=0;s<f.length&&!(f[s][2]<4);s++);for(f=f.slice(s),s=0;s<100&&t>.01;s++)t=T(x,f,n(t));return t>.01&&v.log("interp2d didn't converge quickly",t),x}},39096:function(C,A,e){"use strict";var v=e(3400);C.exports=function(w,n){w("texttemplate");var T=v.extendFlat({},n.font,{color:"auto",size:"auto"});v.coerceFont(w,"textfont",T)}},35744:function(C,A,e){"use strict";var v=e(24040),w=e(3400).isArrayOrTypedArray;C.exports=function(n,T,x,f,s,t){var o,r,i,a=[],u=v.traceIs(n,"contour"),l=v.traceIs(n,"histogram"),d=v.traceIs(n,"gl2d");if(w(T)&&T.length>1&&!l&&t.type!=="category"){var c=T.length;if(!(c<=s))return u?T.slice(0,s):T.slice(0,s+1);if(u||d)a=Array.from(T).slice(0,s);else if(s===1)a=t.type==="log"?[.5*T[0],2*T[0]]:[T[0]-.5,T[0]+.5];else if(t.type==="log"){for(a=[Math.pow(T[0],1.5)/Math.pow(T[1],.5)],i=1;i<c;i++)a.push(Math.sqrt(T[i-1]*T[i]));a.push(Math.pow(T[c-1],1.5)/Math.pow(T[c-2],.5))}else{for(a=[1.5*T[0]-.5*T[1]],i=1;i<c;i++)a.push(.5*(T[i-1]+T[i]));a.push(1.5*T[c-1]-.5*T[c-2])}if(c<s){var _,p=a[a.length-1];if(t.type==="log")for(_=p/a[a.length-2],i=c;i<s;i++)p*=_,a.push(p);else for(_=p-a[a.length-2],i=c;i<s;i++)p+=_,a.push(p)}}else{var g=n[t._id.charAt(0)+"calendar"];for(o=l?t.r2c(x,0,g):w(T)&&T.length===1?T[0]:x===void 0?0:(t.type==="log"?t.d2c:t.r2c)(x,0,g),r=f||1,i=u||d?0:-.5;i<s;i++)a.push(o+r*i)}return a}},41420:function(C,A,e){"use strict";var v=e(33428),w=e(49760),n=e(24040),T=e(43616),x=e(54460),f=e(3400),s=e(72736),t=e(76688),o=e(76308),r=e(8932).extractOpts,i=e(8932).makeColorScaleFuncFromTrace,a=e(9616),u=e(84284).LINE_SPACING,l=e(9188),d=e(2264).STYLE,c="heatmap-label";function _(y){return y.selectAll("g."+c)}function p(y){_(y).remove()}function g(y,M){var h=M.length-2,E=f.constrain(f.findBin(y,M),0,h),k=M[E],D=M[E+1],P=f.constrain(E+(y-k)/(D-k)-.5,0,h),L=Math.round(P),O=Math.abs(P-L);return P&&P!==h&&O?{bin0:L,frac:O,bin1:Math.round(L+O/(P-L))}:{bin0:L,bin1:L,frac:0}}function m(y,M){var h=M.length-1,E=f.constrain(f.findBin(y,M),0,h),k=M[E],D=(y-k)/(M[E+1]-k)||0;return D<=0?{bin0:E,bin1:E,frac:0}:D<.5?{bin0:E,bin1:E+1,frac:D}:{bin0:E+1,bin1:E,frac:1-D}}function b(y,M,h){y[M]=h[0],y[M+1]=h[1],y[M+2]=h[2],y[M+3]=Math.round(255*h[3])}C.exports=function(y,M,h,E){var k=M.xaxis,D=M.yaxis;f.makeTraceGroups(E,h,"hm").each(function(P){var L,O,N,V,F,j,Z,z,H=v.select(this),U=P[0],re=U.trace,ee=re.xgap||0,J=re.ygap||0,Q=U.z,ne=U.x,K=U.y,oe=U.xCenter,le=U.yCenter,se=n.traceIs(re,"contour"),de=se?"best":re.zsmooth,be=Q.length,_e=f.maxRowLength(Q),xe=!1,ve=!1;for(j=0;L===void 0&&j<ne.length-1;)L=k.c2p(ne[j]),j++;for(j=ne.length-1;O===void 0&&j>0;)O=k.c2p(ne[j]),j--;for(O<L&&(N=O,O=L,L=N,xe=!0),j=0;V===void 0&&j<K.length-1;)V=D.c2p(K[j]),j++;for(j=K.length-1;F===void 0&&j>0;)F=D.c2p(K[j]),j--;F<V&&(N=V,V=F,F=N,ve=!0),se&&(oe=ne,le=K,ne=U.xfill,K=U.yfill);var ye="default";if(de?ye=de==="best"?"smooth":"fast":re._islinear&&ee===0&&J===0&&l()&&(ye="fast"),ye!=="fast"){var me=de==="best"?0:.5;L=Math.max(-me*k._length,L),O=Math.min((1+me)*k._length,O),V=Math.max(-me*D._length,V),F=Math.min((1+me)*D._length,F)}var Me,Ae,ce=Math.round(O-L),ae=Math.round(F-V);if(L>=k._length||O<=0||V>=D._length||F<=0)return H.selectAll("image").data([]).exit().remove(),void p(H);ye==="fast"?(Me=_e,Ae=be):(Me=ce,Ae=ae);var pe=document.createElement("canvas");pe.width=Me,pe.height=Ae;var De,ke,Ee=pe.getContext("2d",{willReadFrequently:!0}),Ie=i(re,{noNumericCheck:!0,returnArray:!0});ye==="fast"?(De=xe?function(ur){return _e-1-ur}:f.identity,ke=ve?function(ur){return be-1-ur}:f.identity):(De=function(ur){return f.constrain(Math.round(k.c2p(ne[ur])-L),0,ce)},ke=function(ur){return f.constrain(Math.round(D.c2p(K[ur])-V),0,ae)});var Re,Ne,ge,we,Ce=ke(0),ze=[Ce,Ce],Pe=xe?0:1,Ue=ve?0:1,Ge=0,Xe=0,st=0,at=0;function vt(ur,en){if(ur!==void 0){var on=Ie(ur);return on[0]=Math.round(on[0]),on[1]=Math.round(on[1]),on[2]=Math.round(on[2]),Ge+=en,Xe+=on[0]*en,st+=on[1]*en,at+=on[2]*en,on}return[0,0,0,0]}function xt(ur,en,on,Dn){var yn=ur[on.bin0];if(yn===void 0)return vt(void 0,1);var Ln,Wn=ur[on.bin1],Un=en[on.bin0],Xn=en[on.bin1],pr=Wn-yn||0,Kt=Un-yn||0;return Ln=Wn===void 0?Xn===void 0?0:Un===void 0?2*(Xn-yn):2*(2*Xn-Un-yn)/3:Xn===void 0?Un===void 0?0:2*(2*yn-Wn-Un)/3:Un===void 0?2*(2*Xn-Wn-yn)/3:Xn+yn-Wn-Un,vt(yn+on.frac*pr+Dn.frac*(Kt+on.frac*Ln))}if(ye!=="default"){var gt,rt=0;try{gt=new Uint8Array(Me*Ae*4)}catch{gt=new Array(Me*Ae*4)}if(ye==="smooth"){var tt,Mt,Pt,Rt=oe||ne,St=le||K,Ye=new Array(Rt.length),Ke=new Array(St.length),Ve=new Array(ce),$e=oe?m:g,lt=le?m:g;for(j=0;j<Rt.length;j++)Ye[j]=Math.round(k.c2p(Rt[j])-L);for(j=0;j<St.length;j++)Ke[j]=Math.round(D.c2p(St[j])-V);for(j=0;j<ce;j++)Ve[j]=$e(j,Ye);for(Z=0;Z<ae;Z++)for(Mt=Q[(tt=lt(Z,Ke)).bin0],Pt=Q[tt.bin1],j=0;j<ce;j++,rt+=4)b(gt,rt,we=xt(Mt,Pt,Ve[j],tt))}else for(Z=0;Z<be;Z++)for(ge=Q[Z],ze=ke(Z),j=0;j<_e;j++)we=vt(ge[j],1),b(gt,rt=4*(ze*_e+De(j)),we);var it=Ee.createImageData(Me,Ae);try{it.data.set(gt)}catch{var Be=it.data,je=Be.length;for(Z=0;Z<je;Z++)Be[Z]=gt[Z]}Ee.putImageData(it,0,0)}else{var ot=Math.floor(ee/2),Ze=Math.floor(J/2);for(Z=0;Z<be;Z++)if(ge=Q[Z],ze.reverse(),ze[Ue]=ke(Z+1),ze[0]!==ze[1]&&ze[0]!==void 0&&ze[1]!==void 0)for(Re=[Ne=De(0),Ne],j=0;j<_e;j++)Re.reverse(),Re[Pe]=De(j+1),Re[0]!==Re[1]&&Re[0]!==void 0&&Re[1]!==void 0&&(we=vt(ge[j],(Re[1]-Re[0])*(ze[1]-ze[0])),Ee.fillStyle="rgba("+we.join(",")+")",Ee.fillRect(Re[0]+ot,ze[0]+Ze,Re[1]-Re[0]-ee,ze[1]-ze[0]-J))}Xe=Math.round(Xe/Ge),st=Math.round(st/Ge),at=Math.round(at/Ge);var dt=w("rgb("+Xe+","+st+","+at+")");y._hmpixcount=(y._hmpixcount||0)+Ge,y._hmlumcount=(y._hmlumcount||0)+Ge*dt.getLuminance();var mt=H.selectAll("image").data(P);mt.enter().append("svg:image").attr({xmlns:a.svg,preserveAspectRatio:"none"}),mt.attr({height:ae,width:ce,x:L,y:V,"xlink:href":pe.toDataURL("image/png")}),ye!=="fast"||de||mt.attr("style",d),p(H);var yt=re.texttemplate;if(yt){var ht=r(re),kt={type:"linear",range:[ht.min,ht.max],_separators:k._separators,_numFormat:k._numFormat},_t=re.type==="histogram2dcontour",Et=re.type==="contour",Lt=Et?be-1:be,Ot=Et?1:0,Ft=Et?_e-1:_e,Zt=[];for(j=Et?1:0;j<Lt;j++){var Ht;if(Et)Ht=U.y[j];else if(_t){if(j===0||j===be-1)continue;Ht=U.y[j]}else if(U.yCenter)Ht=U.yCenter[j];else{if(j+1===be&&U.y[j+1]===void 0)continue;Ht=(U.y[j]+U.y[j+1])/2}var Ut=Math.round(D.c2p(Ht));if(!(0>Ut||Ut>D._length))for(Z=Ot;Z<Ft;Z++){var Wt;if(Et)Wt=U.x[Z];else if(_t){if(Z===0||Z===_e-1)continue;Wt=U.x[Z]}else if(U.xCenter)Wt=U.xCenter[Z];else{if(Z+1===_e&&U.x[Z+1]===void 0)continue;Wt=(U.x[Z]+U.x[Z+1])/2}var nn=Math.round(k.c2p(Wt));if(!(0>nn||nn>k._length)){var On=t({x:Wt,y:Ht},re,y._fullLayout);On.x=Wt,On.y=Ht;var kn=U.z[j][Z];kn===void 0?(On.z="",On.zLabel=""):(On.z=kn,On.zLabel=x.tickText(kt,kn,"hover").text);var gn=U.text&&U.text[j]&&U.text[j][Z];gn!==void 0&&gn!==!1||(gn=""),On.text=gn;var Jt=f.texttemplateString(yt,On,y._fullLayout._d3locale,On,re._meta||{});if(Jt){var un=Jt.split("<br>"),tn=un.length,hn=0;for(z=0;z<tn;z++)hn=Math.max(hn,un[z].length);Zt.push({l:tn,c:hn,t:Jt,x:nn,y:Ut,z:kn})}}}}var bn=re.textfont,wn=bn.size,Pn=y._fullLayout.font.size;if(!wn||wn==="auto"){var Cn=1/0,Mn=1/0,Bn=0,Nn=0;for(z=0;z<Zt.length;z++){var rr=Zt[z];if(Bn=Math.max(Bn,rr.l),Nn=Math.max(Nn,rr.c),z<Zt.length-1){var Yn=Zt[z+1],ir=Math.abs(Yn.x-rr.x),Zn=Math.abs(Yn.y-rr.y);ir&&(Cn=Math.min(Cn,ir)),Zn&&(Mn=Math.min(Mn,Zn))}}isFinite(Cn)&&isFinite(Mn)?(Cn-=ee,Mn-=J,Cn/=Nn,Mn/=Bn,Cn/=u/2,Mn/=u,wn=Math.min(Math.floor(Cn),Math.floor(Mn),Pn)):wn=Pn}if(wn<=0||!isFinite(wn))return;_(H).data(Zt).enter().append("g").classed(c,1).append("text").attr("text-anchor","middle").each(function(ur){var en=v.select(this),on=bn.color;on&&on!=="auto"||(on=o.contrast(ur.z===void 0?y._fullLayout.plot_bgcolor:"rgba("+Ie(ur.z).join()+")")),en.attr("data-notex",1).call(s.positionText,function(Dn){return Dn.x}(ur),function(Dn){return Dn.y-wn*(Dn.l*u/2-1)}(ur)).call(T.font,{family:bn.family,size:wn,color:on,weight:bn.weight,style:bn.style,variant:bn.variant}).text(ur.t).call(s.convertToTspans,y)})}})}},41648:function(C,A,e){"use strict";var v=e(33428);C.exports=function(w){v.select(w).selectAll(".hm image").style("opacity",function(n){return n.trace.opacity})}},82748:function(C){"use strict";C.exports=function(A,e,v){v("zsmooth")===!1&&(v("xgap"),v("ygap")),v("zhoverformat")}},51264:function(C,A,e){"use strict";var v=e(38248),w=e(3400),n=e(24040);function T(x,f){var s=f(x);return(s?f(x+"type","array"):"scaled")==="scaled"&&(f(x+"0"),f("d"+x)),s}C.exports=function(x,f,s,t,o,r){var i,a,u=s("z");if(o=o||"x",r=r||"y",u===void 0||!u.length)return 0;if(w.isArray1D(u)){i=s(o),a=s(r);var l=w.minRowLength(i),d=w.minRowLength(a);if(l===0||d===0)return 0;f._length=Math.min(l,d,u.length)}else{if(i=T(o,s),a=T(r,s),!function(c){for(var _,p=!0,g=!1,m=!1,b=0;b<c.length;b++){if(_=c[b],!w.isArrayOrTypedArray(_)){p=!1;break}_.length>0&&(g=!0);for(var y=0;y<_.length;y++)if(v(_[y])){m=!0;break}}return p&&g&&m}(u))return 0;s("transpose"),f._length=null}return x.type==="heatmapgl"||n.getComponentMethod("calendars","handleTraceDefaults")(x,f,[o,r],t),!0}},74512:function(C,A,e){"use strict";for(var v=e(83328),w=e(49084),n=e(92880).extendFlat,T=e(67824).overrideAll,x=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],f={},s=0;s<x.length;s++){var t=x[s];f[t]=v[t]}f.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},n(f,w("",{cLetter:"z",autoColorDflt:!1})),C.exports=T(f,"calc","nested")},84656:function(C,A,e){"use strict";var v=e(67792).gl_heatmap2d,w=e(54460),n=e(43080);function T(f,s){this.scene=f,this.uid=s,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=v(f.glplot,this.options),this.heatmap._trace=this}var x=T.prototype;x.handlePick=function(f){var s=this.options,t=s.shape,o=f.pointId,r=o%t[0],i=Math.floor(o/t[0]),a=o;return{trace:this,dataCoord:f.dataCoord,traceCoord:[s.x[r],s.y[i],s.z[a]],textLabel:this.textLabels[o],name:this.name,pointIndex:[i,r],hoverinfo:this.hoverinfo}},x.update=function(f,s){var t=s[0];this.index=f.index,this.name=f.name,this.hoverinfo=f.hoverinfo;var o=t.z;this.options.z=[].concat.apply([],o);var r=o[0].length,i=o.length;this.options.shape=[r,i],this.options.x=t.x,this.options.y=t.y,this.options.zsmooth=f.zsmooth;var a=function(_){for(var p=_.colorscale,g=_.zmin,m=_.zmax,b=p.length,y=new Array(b),M=new Array(4*b),h=0;h<b;h++){var E=p[h],k=n(E[1]);y[h]=g+E[0]*(m-g);for(var D=0;D<4;D++)M[4*h+D]=k[D]}return{colorLevels:y,colorValues:M}}(f);this.options.colorLevels=a.colorLevels,this.options.colorValues=a.colorValues,this.textLabels=[].concat.apply([],f.text),this.heatmap.update(this.options);var u,l,d=this.scene.xaxis,c=this.scene.yaxis;f.zsmooth===!1&&(u={ppad:t.x[1]-t.x[0]},l={ppad:t.y[1]-t.y[0]}),f._extremes[d._id]=w.findExtremes(d,t.x,u),f._extremes[c._id]=w.findExtremes(c,t.y,l)},x.dispose=function(){this.heatmap.dispose()},C.exports=function(f,s,t){var o=new T(f,s.uid);return o.update(s,t),o}},86464:function(C,A,e){"use strict";var v=e(3400),w=e(51264),n=e(27260),T=e(74512);C.exports=function(x,f,s,t){function o(r,i){return v.coerce(x,f,T,r,i)}w(x,f,o,t)?(o("text"),o("zsmooth"),n(x,f,t,o,{prefix:"",cLetter:"z"})):f.visible=!1}},45536:function(C,A,e){"use strict";["*heatmapgl* trace is deprecated!","Please consider switching to the *heatmap* or *image* trace types.","Alternatively you could contribute/sponsor rewriting this trace type","based on cartesian features and using regl framework."].join(" "),C.exports={attributes:e(74512),supplyDefaults:e(86464),colorbar:e(96288),calc:e(19512),plot:e(84656),moduleType:"trace",name:"heatmapgl",basePlotModule:e(39952),categories:["gl","gl2d","2dMap"],meta:{}}},40196:function(C,A,e){"use strict";var v=e(20832),w=e(29736).axisHoverFormat,n=e(21776).Ks,T=e(21776).Gw,x=e(25376),f=e(11120),s=e(73316),t=e(92880).extendFlat;C.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:w("x"),yhoverformat:w("y"),text:t({},v.text,{}),hovertext:t({},v.hovertext,{}),orientation:v.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:f("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:f("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:n({},{keys:s.eventDataKeys}),texttemplate:T({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:t({},v.textposition,{arrayOk:!1}),textfont:x({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:x({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:x({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:v.insidetextanchor,textangle:v.textangle,cliponaxis:v.cliponaxis,constraintext:v.constraintext,marker:v.marker,offsetgroup:v.offsetgroup,alignmentgroup:v.alignmentgroup,selected:v.selected,unselected:v.unselected,_deprecated:{bardir:v._deprecated.bardir},zorder:v.zorder}},2e3:function(C){"use strict";C.exports=function(A,e){for(var v=A.length,w=0,n=0;n<v;n++)e[n]?(A[n]/=e[n],w+=A[n]):A[n]=null;return w}},11120:function(C){"use strict";C.exports=function(A,e){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},16964:function(C,A,e){"use strict";var v=e(38248);C.exports={count:function(w,n,T){return T[w]++,1},sum:function(w,n,T,x){var f=x[n];return v(f)?(f=Number(f),T[w]+=f,f):0},avg:function(w,n,T,x,f){var s=x[n];return v(s)&&(s=Number(s),T[w]+=s,f[w]++),0},min:function(w,n,T,x){var f=x[n];if(v(f)){if(f=Number(f),!v(T[w]))return T[w]=f,f;if(T[w]>f){var s=f-T[w];return T[w]=f,s}}return 0},max:function(w,n,T,x){var f=x[n];if(v(f)){if(f=Number(f),!v(T[w]))return T[w]=f,f;if(T[w]<f){var s=f-T[w];return T[w]=f,s}}return 0}}},67712:function(C,A,e){"use strict";var v=e(39032),w=v.ONEAVGYEAR,n=v.ONEAVGMONTH,T=v.ONEDAY,x=v.ONEHOUR,f=v.ONEMIN,s=v.ONESEC,t=e(54460).tickIncrement;function o(u,l,d,c){if(u*l<=0)return 1/0;for(var _=Math.abs(l-u),p=d.type==="date",g=r(_,p),m=0;m<10;m++){var b=r(80*g,p);if(g===b||!i(b,u,l,p,d,c))break;g=b}return g}function r(u,l){return l&&u>s?u>T?u>1.1*w?w:u>1.1*n?n:T:u>x?x:u>f?f:s:Math.pow(10,Math.floor(Math.log(u)/Math.LN10))}function i(u,l,d,c,_,p){if(c&&u>T){var g=a(l,_,p),m=a(d,_,p),b=u===w?0:1;return g[b]!==m[b]}return Math.floor(d/u)-Math.floor(l/u)>.1}function a(u,l,d){var c=l.c2d(u,w,d).split("-");return c[0]===""&&(c.unshift(),c[0]="-"+c[0]),c}C.exports=function(u,l,d,c,_){var p,g,m=-1.1*l,b=-.1*l,y=u-b,M=d[0],h=d[1],E=Math.min(o(M+b,M+y,c,_),o(h+b,h+y,c,_)),k=Math.min(o(M+m,M+b,c,_),o(h+m,h+b,c,_));if(E>k&&k<Math.abs(h-M)/4e3?(p=E,g=!1):(p=Math.min(E,k),g=!0),c.type==="date"&&p>T){var D=p===w?1:6,P=p===w?"M12":"M1";return function(L,O){var N=c.c2d(L,w,_),V=N.indexOf("-",D);V>0&&(N=N.substr(0,V));var F=c.d2c(N,0,_);if(F<L){var j=t(F,P,!1,_);(F+j)/2<L+u&&(F=j)}return O&&g?t(F,P,!0,_):F}}return function(L,O){var N=p*Math.round(L/p);return N+p/10<L&&N+.9*p<L+u&&(N+=p),O&&g&&(N-=p),N}}},35852:function(C,A,e){"use strict";var v=e(38248),w=e(3400),n=e(24040),T=e(54460),x=e(84664),f=e(16964),s=e(10648),t=e(2e3),o=e(67712);function r(i,a,u,l,d){var c,_,p,g,m,b,y,M=l+"bins",h=i._fullLayout,E=a["_"+l+"bingroup"],k=h._histogramBinOpts[E],D=h.barmode==="overlay",P=function(ve){return u.r2c(ve,0,g)},L=function(ve){return u.c2r(ve,0,g)},O=u.type==="date"?function(ve){return ve||ve===0?w.cleanDate(ve,null,g):null}:function(ve){return v(ve)?Number(ve):null};function N(ve,ye,me){ye[ve+"Found"]?(ye[ve]=O(ye[ve]),ye[ve]===null&&(ye[ve]=me[ve])):(b[ve]=ye[ve]=me[ve],w.nestedProperty(_[0],M+"."+ve).set(me[ve]))}if(a["_"+l+"autoBinFinished"])delete a["_"+l+"autoBinFinished"];else{_=k.traces;var V=[],F=!0,j=!1,Z=!1;for(c=0;c<_.length;c++)if((p=_[c]).visible){var z=k.dirs[c];m=p["_"+z+"pos0"]=u.makeCalcdata(p,z),V=w.concat(V,m),delete p["_"+l+"autoBinFinished"],a.visible===!0&&(F?F=!1:(delete p._autoBin,p["_"+l+"autoBinFinished"]=1),n.traceIs(p,"2dMap")&&(j=!0),p.type==="histogram2dcontour"&&(Z=!0))}g=_[0][l+"calendar"];var H=T.autoBin(V,u,k.nbins,j,g,k.sizeFound&&k.size),U=_[0]._autoBin={};if(b=U[k.dirs[0]]={},Z&&(k.size||(H.start=L(T.tickIncrement(P(H.start),H.size,!0,g))),k.end===void 0&&(H.end=L(T.tickIncrement(P(H.end),H.size,!1,g)))),D&&!n.traceIs(a,"2dMap")&&H._dataSpan===0&&u.type!=="category"&&u.type!=="multicategory"&&a.bingroup===""&&a.xbins===void 0){if(d)return[H,m,!0];H=function(ve,ye,me,Me,Ae){var ce,ae,pe,De=ve._fullLayout,ke=function(Xe,st){for(var at=st.xaxis,vt=st.yaxis,xt=st.orientation,gt=[],rt=Xe._fullData,tt=0;tt<rt.length;tt++){var Mt=rt[tt];Mt.type==="histogram"&&Mt.visible===!0&&Mt.orientation===xt&&Mt.xaxis===at&&Mt.yaxis===vt&&gt.push(Mt)}return gt}(ve,ye),Ee=!1,Ie=1/0,Re=[ye];for(ce=0;ce<ke.length;ce++)if((ae=ke[ce])===ye)Ee=!0;else if(Ee){var Ne=r(ve,ae,me,Me,!0),ge=Ne[0],we=Ne[2];ae["_"+Me+"autoBinFinished"]=1,ae["_"+Me+"pos0"]=Ne[1],we?Re.push(ae):Ie=Math.min(Ie,ge.size)}else pe=De._histogramBinOpts[ae["_"+Me+"bingroup"]],Ie=Math.min(Ie,pe.size||ae[Ae].size);var Ce=new Array(Re.length);for(ce=0;ce<Re.length;ce++)for(var ze=Re[ce]["_"+Me+"pos0"],Pe=0;Pe<ze.length;Pe++)if(ze[Pe]!==void 0){Ce[ce]=ze[Pe];break}for(isFinite(Ie)||(Ie=w.distinctVals(Ce).minDiff),ce=0;ce<Re.length;ce++){var Ue=(ae=Re[ce])[Me+"calendar"],Ge={start:me.c2r(Ce[ce]-Ie/2,0,Ue),end:me.c2r(Ce[ce]+Ie/2,0,Ue),size:Ie};ae._input[Ae]=ae[Ae]=Ge,(pe=De._histogramBinOpts[ae["_"+Me+"bingroup"]])&&w.extendFlat(pe,Ge)}return ye[Ae]}(i,a,u,l,M)}(y=p.cumulative||{}).enabled&&y.currentbin!=="include"&&(y.direction==="decreasing"?H.start=L(T.tickIncrement(P(H.start),H.size,!0,g)):H.end=L(T.tickIncrement(P(H.end),H.size,!1,g))),k.size=H.size,k.sizeFound||(b.size=H.size,w.nestedProperty(_[0],M+".size").set(H.size)),N("start",k,H),N("end",k,H)}m=a["_"+l+"pos0"],delete a["_"+l+"pos0"];var re=a._input[M]||{},ee=w.extendFlat({},k),J=k.start,Q=u.r2l(re.start),ne=Q!==void 0;if((k.startFound||ne)&&Q!==u.r2l(J)){var K=ne?Q:w.aggNums(Math.min,null,m),oe={type:u.type==="category"||u.type==="multicategory"?"linear":u.type,r2l:u.r2l,dtick:k.size,tick0:J,calendar:g,range:[K,T.tickIncrement(K,k.size,!1,g)].map(u.l2r)},le=T.tickFirst(oe);le>u.r2l(K)&&(le=T.tickIncrement(le,k.size,!0,g)),ee.start=u.l2r(le),ne||w.nestedProperty(a,M+".start").set(ee.start)}var se=k.end,de=u.r2l(re.end),be=de!==void 0;if((k.endFound||be)&&de!==u.r2l(se)){var _e=be?de:w.aggNums(Math.max,null,m);ee.end=u.l2r(_e),be||w.nestedProperty(a,M+".start").set(ee.end)}var xe="autobin"+l;return a._input[xe]===!1&&(a._input[M]=w.extendFlat({},a[M]||{}),delete a._input[xe],delete a[xe]),[ee,m]}C.exports={calc:function(i,a){var u,l,d,c,_=[],p=[],g=a.orientation==="h",m=T.getFromId(i,g?a.yaxis:a.xaxis),b=g?"y":"x",y={x:"y",y:"x"}[b],M=a[b+"calendar"],h=a.cumulative,E=r(i,a,m,b),k=E[0],D=E[1],P=typeof k.size=="string",L=[],O=P?L:k,N=[],V=[],F=[],j=0,Z=a.histnorm,z=a.histfunc,H=Z.indexOf("density")!==-1;h.enabled&&H&&(Z=Z.replace(/ ?density$/,""),H=!1);var U,re=z==="max"||z==="min"?null:0,ee=f.count,J=s[Z],Q=!1,ne=function(ae){return m.r2c(ae,0,M)};for(w.isArrayOrTypedArray(a[y])&&z!=="count"&&(U=a[y],Q=z==="avg",ee=f[z]),u=ne(k.start),d=ne(k.end)+(u-T.tickIncrement(u,k.size,!1,M))/1e6;u<d&&_.length<1e6&&(l=T.tickIncrement(u,k.size,!1,M),_.push((u+l)/2),p.push(re),F.push([]),L.push(u),H&&N.push(1/(l-u)),Q&&V.push(0),!(l<=u));)u=l;L.push(u),P||m.type!=="date"||(O={start:ne(O.start),end:ne(O.end),size:O.size}),i._fullLayout._roundFnOpts||(i._fullLayout._roundFnOpts={});var K=a["_"+b+"bingroup"],oe={leftGap:1/0,rightGap:1/0};K&&(i._fullLayout._roundFnOpts[K]||(i._fullLayout._roundFnOpts[K]=oe),oe=i._fullLayout._roundFnOpts[K]);var le,se=p.length,de=!0,be=oe.leftGap,_e=oe.rightGap,xe={};for(u=0;u<D.length;u++){var ve=D[u];(c=w.findBin(ve,O))>=0&&c<se&&(j+=ee(c,u,p,U,V),de&&F[c].length&&ve!==D[F[c][0]]&&(de=!1),F[c].push(u),xe[u]=c,be=Math.min(be,ve-L[c]),_e=Math.min(_e,L[c+1]-ve))}oe.leftGap=be,oe.rightGap=_e,de||(le=function(ae,pe){return function(){var De=i._fullLayout._roundFnOpts[K];return o(De.leftGap,De.rightGap,L,m,M)(ae,pe)}}),Q&&(j=t(p,V)),J&&J(p,j,N),h.enabled&&function(ae,pe,De){var ke,Ee,Ie;function Re(ge){Ie=ae[ge],ae[ge]/=2}function Ne(ge){Ee=ae[ge],ae[ge]=Ie+Ee/2,Ie+=Ee}if(De==="half")if(pe==="increasing")for(Re(0),ke=1;ke<ae.length;ke++)Ne(ke);else for(Re(ae.length-1),ke=ae.length-2;ke>=0;ke--)Ne(ke);else if(pe==="increasing"){for(ke=1;ke<ae.length;ke++)ae[ke]+=ae[ke-1];De==="exclude"&&(ae.unshift(0),ae.pop())}else{for(ke=ae.length-2;ke>=0;ke--)ae[ke]+=ae[ke+1];De==="exclude"&&(ae.push(0),ae.shift())}}(p,h.direction,h.currentbin);var ye=Math.min(_.length,p.length),me=[],Me=0,Ae=ye-1;for(u=0;u<ye;u++)if(p[u]){Me=u;break}for(u=ye-1;u>=Me;u--)if(p[u]){Ae=u;break}for(u=Me;u<=Ae;u++)if(v(_[u])&&v(p[u])){var ce={p:_[u],s:p[u],b:0};h.enabled||(ce.pts=F[u],de?ce.ph0=ce.ph1=F[u].length?D[F[u][0]]:_[u]:(a._computePh=!0,ce.ph0=le(L[u]),ce.ph1=le(L[u+1],!0))),me.push(ce)}return me.length===1&&(me[0].width1=T.tickIncrement(me[0].p,k.size,!1,M)-me[0].p),x(me,a),w.isArrayOrTypedArray(a.selectedpoints)&&w.tagSelected(me,a,xe),me},calcAllAutoBins:r}},73316:function(C){"use strict";C.exports={eventDataKeys:["binNumber"]}},80536:function(C,A,e){"use strict";var v=e(3400),w=e(79811),n=e(24040).traceIs,T=e(20011),x=e(31508).validateCornerradius,f=v.nestedProperty,s=e(71888).getAxisGroup,t=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],o=["x","y"];C.exports=function(r,i){var a,u,l,d,c,_,p,g=i._histogramBinOpts={},m=[],b={},y=[];function M(re,ee){return v.coerce(a._input,a,a._module.attributes,re,ee)}function h(re){return re.orientation==="v"?"x":"y"}function E(re,ee,J){var Q=re.uid+"__"+J;ee||(ee=Q);var ne=function(se,de){return w.getFromTrace({_fullLayout:i},se,de).type}(re,J),K=re[J+"calendar"]||"",oe=g[ee],le=!0;oe&&(ne===oe.axType&&K===oe.calendar?(le=!1,oe.traces.push(re),oe.dirs.push(J)):(ee=Q,ne!==oe.axType&&v.warn(["Attempted to group the bins of trace",re.index,"set on a","type:"+ne,"axis","with bins on","type:"+oe.axType,"axis."].join(" ")),K!==oe.calendar&&v.warn(["Attempted to group the bins of trace",re.index,"set with a",K,"calendar","with bins",oe.calendar?"on a "+oe.calendar+" calendar":"w/o a set calendar"].join(" ")))),le&&(g[ee]={traces:[re],dirs:[J],axType:ne,calendar:re[J+"calendar"]||""}),re["_"+J+"bingroup"]=ee}for(c=0;c<r.length;c++)if(a=r[c],n(a,"histogram")){if(m.push(a),delete a._xautoBinFinished,delete a._yautoBinFinished,a.type==="histogram"){var k=M("marker.cornerradius",i.barcornerradius);a.marker&&(a.marker.cornerradius=x(k))}n(a,"2dMap")||T(a._input,a,i,M)}var D=i._alignmentOpts||{};for(c=0;c<m.length;c++){if(a=m[c],l="",!n(a,"2dMap")){if(d=h(a),i.barmode==="group"&&a.alignmentgroup){var P=a[d+"axis"],L=s(i,P)+a.orientation;(D[L]||{})[a.alignmentgroup]&&(l=L)}l||i.barmode==="overlay"||(l=s(i,a.xaxis)+s(i,a.yaxis)+h(a))}l?(b[l]||(b[l]=[]),b[l].push(a)):y.push(a)}for(l in b)if((u=b[l]).length!==1){var O=!1;for(u.length&&(a=u[0],O=M("bingroup")),l=O||l,c=0;c<u.length;c++){var N=(a=u[c])._input.bingroup;N&&N!==l&&v.warn(["Trace",a.index,"must match","within bingroup",l+".","Ignoring its bingroup:",N,"setting."].join(" ")),a.bingroup=l,E(a,l,h(a))}}else y.push(u[0]);for(c=0;c<y.length;c++){a=y[c];var V=M("bingroup");if(n(a,"2dMap"))for(p=0;p<2;p++){var F=M((d=o[p])+"bingroup",V?V+"__"+d:null);E(a,F,d)}else E(a,V,h(a))}for(l in g){var j=g[l];for(u=j.traces,_=0;_<t.length;_++){var Z,z,H=t[_],U=H.name;if(U!=="nbins"||!j.sizeFound){for(c=0;c<u.length;c++){if(a=u[c],d=j.dirs[c],Z=H.aStr[d],f(a._input,Z).get()!==void 0){j[U]=M(Z),j[U+"Found"]=!0;break}(z=(a._autoBin||{})[d]||{})[U]&&f(a,Z).set(z[U])}if(U==="start"||U==="end")for(;c<u.length;c++)(a=u[c])["_"+d+"bingroup"]&&M(Z,(z=(a._autoBin||{})[d]||{})[U]);U!=="nbins"||j.sizeFound||j.nbinsFound||(a=u[0],j[U]=M(Z))}}}}},6616:function(C,A,e){"use strict";var v=e(24040),w=e(3400),n=e(76308),T=e(31508).handleText,x=e(55592),f=e(40196);C.exports=function(s,t,o,r){function i(b,y){return w.coerce(s,t,f,b,y)}var a=i("x"),u=i("y");i("cumulative.enabled")&&(i("cumulative.direction"),i("cumulative.currentbin")),i("text");var l=i("textposition");T(s,t,r,i,l,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat");var d=i("orientation",u&&!a?"h":"v"),c=d==="v"?"x":"y",_=d==="v"?"y":"x",p=a&&u?Math.min(w.minRowLength(a)&&w.minRowLength(u)):w.minRowLength(t[c]||[]);if(p){t._length=p,v.getComponentMethod("calendars","handleTraceDefaults")(s,t,["x","y"],r),t[_]&&i("histfunc"),i("histnorm"),i("autobin"+c),x(s,t,i,o,r),w.coerceSelectionMarkerOpacity(t,i);var g=(t.marker.line||{}).color,m=v.getComponentMethod("errorbars","supplyDefaults");m(s,t,g||n.defaultLine,{axis:"y"}),m(s,t,g||n.defaultLine,{axis:"x",inherit:"y"}),i("zorder")}else t.visible=!1}},84980:function(C){"use strict";C.exports=function(A,e,v,w,n){if(A.x="xVal"in e?e.xVal:e.x,A.y="yVal"in e?e.yVal:e.y,"zLabelVal"in e&&(A.z=e.zLabelVal),e.xa&&(A.xaxis=e.xa),e.ya&&(A.yaxis=e.ya),!(v.cumulative||{}).enabled){var T,x=Array.isArray(n)?w[0].pts[n[0]][n[1]]:w[n].pts;if(A.pointNumbers=x,A.binNumber=A.pointNumber,delete A.pointNumber,delete A.pointIndex,v._indexToPoints){T=[];for(var f=0;f<x.length;f++)T=T.concat(v._indexToPoints[x[f]])}else T=x;A.pointIndices=T}return A}},43339:function(C,A,e){"use strict";var v=e(63400).hoverPoints,w=e(54460).hoverLabelText;C.exports=function(n,T,x,f,s){var t=v(n,T,x,f,s);if(t){var o=(n=t[0]).cd[n.index],r=n.cd[0].trace;if(!r.cumulative.enabled){var i=r.orientation==="h"?"y":"x";n[i+"Label"]=w(n[i+"a"],[o.ph0,o.ph1],r[i+"hoverformat"])}return t}}},42600:function(C,A,e){"use strict";C.exports={attributes:e(40196),layoutAttributes:e(39324),supplyDefaults:e(6616),crossTraceDefaults:e(80536),supplyLayoutDefaults:e(37156),calc:e(35852).calc,crossTraceCalc:e(96376).crossTraceCalc,plot:e(98184).plot,layerName:"barlayer",style:e(60100).style,styleOnSelect:e(60100).styleOnSelect,colorbar:e(5528),hoverPoints:e(43339),selectPoints:e(45784),eventData:e(84980),moduleType:"trace",name:"histogram",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},10648:function(C){"use strict";C.exports={percent:function(A,e){for(var v=A.length,w=100/e,n=0;n<v;n++)A[n]*=w},probability:function(A,e){for(var v=A.length,w=0;w<v;w++)A[w]/=e},density:function(A,e,v,w){var n=A.length;w=w||1;for(var T=0;T<n;T++)A[T]*=v[T]*w},"probability density":function(A,e,v,w){var n=A.length;w&&(e/=w);for(var T=0;T<n;T++)A[T]*=v[T]/e}}},37008:function(C,A,e){"use strict";var v=e(40196),w=e(11120),n=e(83328),T=e(45464),x=e(29736).axisHoverFormat,f=e(21776).Ks,s=e(21776).Gw,t=e(49084),o=e(92880).extendFlat;C.exports=o({x:v.x,y:v.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:v.histnorm,histfunc:v.histfunc,nbinsx:v.nbinsx,xbins:w("x"),nbinsy:v.nbinsy,ybins:w("y"),autobinx:v.autobinx,autobiny:v.autobiny,bingroup:o({},v.bingroup,{}),xbingroup:o({},v.bingroup,{}),ybingroup:o({},v.bingroup,{}),xgap:n.xgap,ygap:n.ygap,zsmooth:n.zsmooth,xhoverformat:x("x"),yhoverformat:x("y"),zhoverformat:x("z",1),hovertemplate:f({},{keys:"z"}),texttemplate:s({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:n.textfont,showlegend:o({},T.showlegend,{dflt:!1})},t("",{cLetter:"z",autoColorDflt:!1}))},55480:function(C,A,e){"use strict";var v=e(3400),w=e(54460),n=e(16964),T=e(10648),x=e(2e3),f=e(67712),s=e(35852).calcAllAutoBins;function t(i,a,u,l){var d,c=new Array(i);if(l)for(d=0;d<i;d++)c[d]=1/(a[d+1]-a[d]);else{var _=1/u;for(d=0;d<i;d++)c[d]=_}return c}function o(i,a){return{start:i(a.start),end:i(a.end),size:a.size}}function r(i,a,u,l,d,c){var _,p=i.length-1,g=new Array(p),m=f(u,l,i,d,c);for(_=0;_<p;_++){var b=(a||[])[_];g[_]=b===void 0?[m(i[_]),m(i[_+1],!0)]:[b,b]}return g}C.exports=function(i,a){var u,l,d,c,_=w.getFromId(i,a.xaxis),p=w.getFromId(i,a.yaxis),g=a.xcalendar,m=a.ycalendar,b=function(vt){return _.r2c(vt,0,g)},y=function(vt){return p.r2c(vt,0,m)},M=s(i,a,_,"x"),h=M[0],E=M[1],k=s(i,a,p,"y"),D=k[0],P=k[1],L=a._length;E.length>L&&E.splice(L,E.length-L),P.length>L&&P.splice(L,P.length-L);var O=[],N=[],V=[],F=typeof h.size=="string",j=typeof D.size=="string",Z=[],z=[],H=F?Z:h,U=j?z:D,re=0,ee=[],J=[],Q=a.histnorm,ne=a.histfunc,K=Q.indexOf("density")!==-1,oe=ne==="max"||ne==="min"?null:0,le=n.count,se=T[Q],de=!1,be=[],_e=[],xe="z"in a?a.z:"marker"in a&&Array.isArray(a.marker.color)?a.marker.color:"";xe&&ne!=="count"&&(de=ne==="avg",le=n[ne]);var ve=h.size,ye=b(h.start),me=b(h.end)+(ye-w.tickIncrement(ye,ve,!1,g))/1e6;for(u=ye;u<me;u=w.tickIncrement(u,ve,!1,g))N.push(oe),Z.push(u),de&&V.push(0);Z.push(u);var Me,Ae=N.length,ce=(u-ye)/Ae,ae=(Me=ye+ce/2,_.c2r(Me,0,g)),pe=D.size,De=y(D.start),ke=y(D.end)+(De-w.tickIncrement(De,pe,!1,m))/1e6;for(u=De;u<ke;u=w.tickIncrement(u,pe,!1,m)){O.push(N.slice()),z.push(u);var Ee=new Array(Ae);for(l=0;l<Ae;l++)Ee[l]=[];J.push(Ee),de&&ee.push(V.slice())}z.push(u);var Ie=O.length,Re=(u-De)/Ie,Ne=function(vt){return p.c2r(vt,0,m)}(De+Re/2);K&&(be=t(N.length,H,ce,F),_e=t(O.length,U,Re,j)),F||_.type!=="date"||(H=o(b,H)),j||p.type!=="date"||(U=o(y,U));var ge=!0,we=!0,Ce=new Array(Ae),ze=new Array(Ie),Pe=1/0,Ue=1/0,Ge=1/0,Xe=1/0;for(u=0;u<L;u++){var st=E[u],at=P[u];d=v.findBin(st,H),c=v.findBin(at,U),d>=0&&d<Ae&&c>=0&&c<Ie&&(re+=le(d,u,O[c],xe,ee[c]),J[c][d].push(u),ge&&(Ce[d]===void 0?Ce[d]=st:Ce[d]!==st&&(ge=!1)),we&&(ze[c]===void 0?ze[c]=at:ze[c]!==at&&(we=!1)),Pe=Math.min(Pe,st-Z[d]),Ue=Math.min(Ue,Z[d+1]-st),Ge=Math.min(Ge,at-z[c]),Xe=Math.min(Xe,z[c+1]-at))}if(de)for(c=0;c<Ie;c++)re+=x(O[c],ee[c]);if(se)for(c=0;c<Ie;c++)se(O[c],re,be,_e[c]);return{x:E,xRanges:r(Z,ge&&Ce,Pe,Ue,_,g),x0:ae,dx:ce,y:P,yRanges:r(z,we&&ze,Ge,Xe,p,m),y0:Ne,dy:Re,z:O,pts:J}}},99784:function(C,A,e){"use strict";var v=e(3400),w=e(56408),n=e(82748),T=e(27260),x=e(39096),f=e(37008);C.exports=function(s,t,o,r){function i(a,u){return v.coerce(s,t,f,a,u)}w(s,t,i,r),t.visible!==!1&&(n(s,t,i,r),T(s,t,r,i,{prefix:"",cLetter:"z"}),i("hovertemplate"),x(i,r),i("xhoverformat"),i("yhoverformat"))}},59576:function(C,A,e){"use strict";var v=e(55512),w=e(54460).hoverLabelText;C.exports=function(n,T,x,f,s){var t=v(n,T,x,f,s);if(t){var o=(n=t[0]).index,r=o[0],i=o[1],a=n.cd[0],u=a.trace,l=a.xRanges[i],d=a.yRanges[r];return n.xLabel=w(n.xa,[l[0],l[1]],u.xhoverformat),n.yLabel=w(n.ya,[d[0],d[1]],u.yhoverformat),t}}},21536:function(C,A,e){"use strict";C.exports={attributes:e(37008),supplyDefaults:e(99784),crossTraceDefaults:e(80536),calc:e(19512),plot:e(41420),layerName:"heatmaplayer",colorbar:e(96288),style:e(41648),hoverPoints:e(59576),eventData:e(84980),moduleType:"trace",name:"histogram2d",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},56408:function(C,A,e){"use strict";var v=e(24040),w=e(3400);C.exports=function(n,T,x,f){var s=x("x"),t=x("y"),o=w.minRowLength(s),r=w.minRowLength(t);o&&r?(T._length=Math.min(o,r),v.getComponentMethod("calendars","handleTraceDefaults")(n,T,["x","y"],f),(x("z")||x("marker.color"))&&x("histfunc"),x("histnorm"),x("autobinx"),x("autobiny")):T.visible=!1}},81220:function(C,A,e){"use strict";var v=e(37008),w=e(67104),n=e(49084),T=e(29736).axisHoverFormat,x=e(92880).extendFlat;C.exports=x({x:v.x,y:v.y,z:v.z,marker:v.marker,histnorm:v.histnorm,histfunc:v.histfunc,nbinsx:v.nbinsx,xbins:v.xbins,nbinsy:v.nbinsy,ybins:v.ybins,autobinx:v.autobinx,autobiny:v.autobiny,bingroup:v.bingroup,xbingroup:v.xbingroup,ybingroup:v.ybingroup,autocontour:w.autocontour,ncontours:w.ncontours,contours:w.contours,line:{color:w.line.color,width:x({},w.line.width,{dflt:.5}),dash:w.line.dash,smoothing:w.line.smoothing,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:v.hovertemplate,texttemplate:w.texttemplate,textfont:w.textfont},n("",{cLetter:"z",editTypeOverride:"calc"}))},3704:function(C,A,e){"use strict";var v=e(3400),w=e(56408),n=e(84952),T=e(97680),x=e(39096),f=e(81220);C.exports=function(s,t,o,r){function i(a,u){return v.coerce(s,t,f,a,u)}w(s,t,i,r),t.visible!==!1&&(n(s,t,i,function(a){return v.coerce2(s,t,f,a)}),T(s,t,i,r),i("xhoverformat"),i("yhoverformat"),i("hovertemplate"),t.contours&&t.contours.coloring==="heatmap"&&x(i,r))}},65664:function(C,A,e){"use strict";C.exports={attributes:e(81220),supplyDefaults:e(3704),crossTraceDefaults:e(80536),calc:e(20688),plot:e(23676).plot,layerName:"contourlayer",style:e(52440),colorbar:e(55296),hoverPoints:e(38200),moduleType:"trace",name:"histogram2dcontour",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},97376:function(C,A,e){"use strict";var v=e(21776).Ks,w=e(21776).Gw,n=e(49084),T=e(86968).u,x=e(74996),f=e(424),s=e(40516),t=e(32984),o=e(92880).extendFlat,r=e(98192).c;C.exports={labels:f.labels,parents:f.parents,values:f.values,branchvalues:f.branchvalues,count:f.count,level:f.level,maxdepth:f.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:s.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:o({colors:f.marker.colors,line:f.marker.line,pattern:r,editType:"calc"},n("marker",{colorAttr:"colors",anim:!1})),leaf:f.leaf,pathbar:s.pathbar,text:x.text,textinfo:f.textinfo,texttemplate:w({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),hovertext:x.hovertext,hoverinfo:f.hoverinfo,hovertemplate:v({},{keys:t.eventDataKeys}),textfont:x.textfont,insidetextfont:x.insidetextfont,outsidetextfont:s.outsidetextfont,textposition:s.textposition,sort:x.sort,root:f.root,domain:T({name:"icicle",trace:!0,editType:"calc"})}},59564:function(C,A,e){"use strict";var v=e(7316);A.name="icicle",A.plot=function(w,n,T,x){v.plotBasePlot(A.name,w,n,T,x)},A.clean=function(w,n,T,x){v.cleanBasePlot(A.name,w,n,T,x)}},73876:function(C,A,e){"use strict";var v=e(3776);A.r=function(w,n){return v.calc(w,n)},A.q=function(w){return v._runCrossTraceCalc("icicle",w)}},7045:function(C,A,e){"use strict";var v=e(3400),w=e(97376),n=e(76308),T=e(86968).Q,x=e(31508).handleText,f=e(78048).TEXTPAD,s=e(74174).handleMarkerDefaults,t=e(8932),o=t.hasColorscale,r=t.handleDefaults;C.exports=function(i,a,u,l){function d(y,M){return v.coerce(i,a,w,y,M)}var c=d("labels"),_=d("parents");if(c&&c.length&&_&&_.length){var p=d("values");p&&p.length?d("branchvalues"):d("count"),d("level"),d("maxdepth"),d("tiling.orientation"),d("tiling.flip"),d("tiling.pad");var g=d("text");d("texttemplate"),a.texttemplate||d("textinfo",v.isArrayOrTypedArray(g)?"text+label":"label"),d("hovertext"),d("hovertemplate");var m=d("pathbar.visible");x(i,a,l,d,"auto",{hasPathbar:m,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),d("textposition"),s(i,a,l,d);var b=a._hasColorscale=o(i,"marker","colors")||(i.marker||{}).coloraxis;b&&r(i,a,l,d,{prefix:"marker.",cLetter:"c"}),d("leaf.opacity",b?1:.7),a._hovered={marker:{line:{width:2,color:n.contrast(l.paper_bgcolor)}}},m&&(d("pathbar.thickness",a.pathbar.textfont.size+2*f),d("pathbar.side"),d("pathbar.edgeshape")),d("sort"),d("root.color"),T(a,l,d),a._length=null}else a.visible=!1}},67880:function(C,A,e){"use strict";var v=e(33428),w=e(3400),n=e(43616),T=e(72736),x=e(25132),f=e(47192).styleOne,s=e(32984),t=e(78176),o=e(45716),r=e(96488).formatSliceLabel,i=!1;C.exports=function(a,u,l,d,c){var _=c.width,p=c.height,g=c.viewX,m=c.viewY,b=c.pathSlice,y=c.toMoveInsideSlice,M=c.strTransform,h=c.hasTransition,E=c.handleSlicesExit,k=c.makeUpdateSliceInterpolator,D=c.makeUpdateTextInterpolator,P=c.prevEntry,L=a._context.staticPlot,O=a._fullLayout,N=u[0].trace,V=N.textposition.indexOf("left")!==-1,F=N.textposition.indexOf("right")!==-1,j=N.textposition.indexOf("bottom")!==-1,Z=x(l,[_,p],{flipX:N.tiling.flip.indexOf("x")>-1,flipY:N.tiling.flip.indexOf("y")>-1,orientation:N.tiling.orientation,pad:{inner:N.tiling.pad},maxDepth:N._maxDepth}).descendants(),z=1/0,H=-1/0;Z.forEach(function(Q){var ne=Q.depth;ne>=N._maxDepth?(Q.x0=Q.x1=(Q.x0+Q.x1)/2,Q.y0=Q.y1=(Q.y0+Q.y1)/2):(z=Math.min(z,ne),H=Math.max(H,ne))}),d=d.data(Z,t.getPtId),N._maxVisibleLayers=isFinite(H)?H-z+1:0,d.enter().append("g").classed("slice",!0),E(d,i,{},[_,p],b),d.order();var U=null;if(h&&P){var re=t.getPtId(P);d.each(function(Q){U===null&&t.getPtId(Q)===re&&(U={x0:Q.x0,x1:Q.x1,y0:Q.y0,y1:Q.y1})})}var ee=function(){return U||{x0:0,x1:_,y0:0,y1:p}},J=d;return h&&(J=J.transition().each("end",function(){var Q=v.select(this);t.setSliceCursor(Q,a,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),J.each(function(Q){Q._x0=g(Q.x0),Q._x1=g(Q.x1),Q._y0=m(Q.y0),Q._y1=m(Q.y1),Q._hoverX=g(Q.x1-N.tiling.pad),Q._hoverY=m(j?Q.y1-N.tiling.pad/2:Q.y0+N.tiling.pad/2);var ne=v.select(this),K=w.ensureSingle(ne,"path","surface",function(de){de.style("pointer-events",L?"none":"all")});h?K.transition().attrTween("d",function(de){var be=k(de,i,ee(),[_,p],{orientation:N.tiling.orientation,flipX:N.tiling.flip.indexOf("x")>-1,flipY:N.tiling.flip.indexOf("y")>-1});return function(_e){return b(be(_e))}}):K.attr("d",b),ne.call(o,l,a,u,{styleOne:f,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,a,{isTransitioning:a._transitioning}),K.call(f,Q,N,a,{hovered:!1}),Q.x0===Q.x1||Q.y0===Q.y1?Q._text="":Q._text=r(Q,l,N,u,O)||"";var oe=w.ensureSingle(ne,"g","slicetext"),le=w.ensureSingle(oe,"text","",function(de){de.attr("data-notex",1)}),se=w.ensureUniformFontSize(a,t.determineTextFont(N,Q,O.font));le.text(Q._text||" ").classed("slicetext",!0).attr("text-anchor",F?"end":V?"start":"middle").call(n.font,se).call(T.convertToTspans,a),Q.textBB=n.bBox(le.node()),Q.transform=y(Q,{fontSize:se.size}),Q.transform.fontSize=se.size,h?le.transition().attrTween("transform",function(de){var be=D(de,i,ee(),[_,p]);return function(_e){return M(be(_e))}}):le.attr("transform",M(Q))}),U}},29044:function(C,A,e){"use strict";C.exports={moduleType:"trace",name:"icicle",basePlotModule:e(59564),categories:[],animatable:!0,attributes:e(97376),layoutAttributes:e(90676),supplyDefaults:e(7045),supplyLayoutDefaults:e(4304),calc:e(73876).r,crossTraceCalc:e(73876).q,plot:e(38364),style:e(47192).style,colorbar:e(5528),meta:{}}},90676:function(C){"use strict";C.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},4304:function(C,A,e){"use strict";var v=e(3400),w=e(90676);C.exports=function(n,T){function x(f,s){return v.coerce(n,T,w,f,s)}x("iciclecolorway",T.colorway),x("extendiciclecolors")}},25132:function(C,A,e){"use strict";var v=e(74148),w=e(83024);C.exports=function(n,T,x){var f=x.flipX,s=x.flipY,t=x.orientation==="h",o=x.maxDepth,r=T[0],i=T[1];o&&(r=(n.height+1)*T[0]/Math.min(n.height+1,o),i=(n.height+1)*T[1]/Math.min(n.height+1,o));var a=v.partition().padding(x.pad.inner).size(t?[T[1],r]:[T[0],i])(n);return(t||f||s)&&w(a,T,{swapXY:t,flipX:f,flipY:s}),a}},38364:function(C,A,e){"use strict";var v=e(95808),w=e(67880);C.exports=function(n,T,x,f){return v(n,T,x,f,{type:"icicle",drawDescendants:w})}},47192:function(C,A,e){"use strict";var v=e(33428),w=e(76308),n=e(3400),T=e(82744).resizeText,x=e(60404);function f(s,t,o,r){var i=t.data.data,a=!t.children,u=i.i,l=n.castOption(o,u,"marker.line.color")||w.defaultLine,d=n.castOption(o,u,"marker.line.width")||0;s.call(x,t,o,r).style("stroke-width",d).call(w.stroke,l).style("opacity",a?o.leaf.opacity:null)}C.exports={style:function(s){var t=s._fullLayout._iciclelayer.selectAll(".trace");T(s,t,"icicle"),t.each(function(o){var r=v.select(this),i=o[0].trace;r.style("opacity",i.opacity),r.selectAll("path.surface").each(function(a){v.select(this).call(f,a,i,s)})})},styleOne:f}},95188:function(C,A,e){"use strict";for(var v=e(45464),w=e(52904).zorder,n=e(21776).Ks,T=e(92880).extendFlat,x=e(47797).colormodel,f=["rgb","rgba","rgba256","hsl","hsla"],s=[],t=[],o=0;o<f.length;o++){var r=x[f[o]];s.push("For the `"+f[o]+"` colormodel, it is ["+(r.zminDflt||r.min).join(", ")+"]."),t.push("For the `"+f[o]+"` colormodel, it is ["+(r.zmaxDflt||r.max).join(", ")+"].")}C.exports=T({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:f,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:T({},v.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:n({},{keys:["z","color","colormodel"]}),zorder:w,transforms:void 0})},93336:function(C,A,e){"use strict";var v=e(3400),w=e(47797),n=e(38248),T=e(54460),x=e(3400).maxRowLength,f=e(18712).i;function s(o,r,i,a){return function(u){return v.constrain((u-o)*r,i,a)}}function t(o,r){return function(i){return v.constrain(i,o,r)}}C.exports=function(o,r){var i,a;if(r._hasZ)i=r.z.length,a=x(r.z);else if(r._hasSource){var u=f(r.source);i=u.height,a=u.width}var l,d=T.getFromId(o,r.xaxis||"x"),c=T.getFromId(o,r.yaxis||"y"),_=d.d2c(r.x0)-r.dx/2,p=c.d2c(r.y0)-r.dy/2,g=[_,_+a*r.dx],m=[p,p+i*r.dy];if(d&&d.type==="log")for(l=0;l<a;l++)g.push(_+l*r.dx);if(c&&c.type==="log")for(l=0;l<i;l++)m.push(p+l*r.dy);return r._extremes[d._id]=T.findExtremes(d,g),r._extremes[c._id]=T.findExtremes(c,m),r._scaler=function(b){var y=w.colormodel[b.colormodel],M=(y.colormodel||b.colormodel).length;b._sArray=[];for(var h=0;h<M;h++)y.min[h]!==b.zmin[h]||y.max[h]!==b.zmax[h]?b._sArray.push(s(b.zmin[h],(y.max[h]-y.min[h])/(b.zmax[h]-b.zmin[h]),y.min[h],y.max[h])):b._sArray.push(t(y.min[h],y.max[h]));return function(E){for(var k=E.slice(0,M),D=0;D<M;D++){var P=k[D];if(!n(P))return!1;k[D]=b._sArray[D](P)}return k}}(r),[{x0:_,y0:p,z:r.z,w:a,h:i}]}},47797:function(C){"use strict";C.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(A){return A.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(A){return A.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(A){return A.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(A){var e=A.slice(0,3);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["\xB0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(A){var e=A.slice(0,4);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["\xB0","%","%",""]}}}},13188:function(C,A,e){"use strict";var v=e(3400),w=e(95188),n=e(47797),T=e(81792).IMAGE_URL_PREFIX;C.exports=function(x,f){function s(r,i){return v.coerce(x,f,w,r,i)}s("source"),f.source&&!f.source.match(T)&&delete f.source,f._hasSource=!!f.source;var t,o=s("z");f._hasZ=!(o===void 0||!o.length||!o[0]||!o[0].length),f._hasZ||f._hasSource?(s("x0"),s("y0"),s("dx"),s("dy"),f._hasZ?(s("colormodel","rgb"),s("zmin",(t=n.colormodel[f.colormodel]).zminDflt||t.min),s("zmax",t.zmaxDflt||t.max)):f._hasSource&&(f.colormodel="rgba256",t=n.colormodel[f.colormodel],f.zmin=t.zminDflt,f.zmax=t.zmaxDflt),s("zsmooth"),s("text"),s("hovertext"),s("hovertemplate"),f._length=null,s("zorder")):f.visible=!1}},79972:function(C){"use strict";C.exports=function(A,e){return"xVal"in e&&(A.x=e.xVal),"yVal"in e&&(A.y=e.yVal),e.xa&&(A.xaxis=e.xa),e.ya&&(A.yaxis=e.ya),A.color=e.color,A.colormodel=e.trace.colormodel,A.z||(A.z=e.color),A}},18712:function(C,A,e){"use strict";var v=e(19480),w=e(81792).IMAGE_URL_PREFIX,n=e(33576).Buffer;A.i=function(T){var x=T.replace(w,""),f=new n(x,"base64");return v(f)}},24892:function(C,A,e){"use strict";var v=e(93024),w=e(3400),n=w.isArrayOrTypedArray,T=e(47797);C.exports=function(x,f,s){var t=x.cd[0],o=t.trace,r=x.xa,i=x.ya;if(!(v.inbox(f-t.x0,f-(t.x0+t.w*o.dx),0)>0||v.inbox(s-t.y0,s-(t.y0+t.h*o.dy),0)>0)){var a,u=Math.floor((f-t.x0)/o.dx),l=Math.floor(Math.abs(s-t.y0)/o.dy);if(o._hasZ?a=t.z[l][u]:o._hasSource&&(a=o._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(u,l,1,1).data),a){var d,c=t.hi||o.hoverinfo;if(c){var _=c.split("+");_.indexOf("all")!==-1&&(_=["color"]),_.indexOf("color")!==-1&&(d=!0)}var p,g=T.colormodel[o.colormodel],m=g.colormodel||o.colormodel,b=m.length,y=o._scaler(a),M=g.suffix,h=[];(o.hovertemplate||d)&&(h.push("["+[y[0]+M[0],y[1]+M[1],y[2]+M[2]].join(", ")),b===4&&h.push(", "+y[3]+M[3]),h.push("]"),h=h.join(""),x.extraText=m.toUpperCase()+": "+h),n(o.hovertext)&&n(o.hovertext[l])?p=o.hovertext[l][u]:n(o.text)&&n(o.text[l])&&(p=o.text[l][u]);var E=i.c2p(t.y0+(l+.5)*o.dy),k=t.x0+(u+.5)*o.dx,D=t.y0+(l+.5)*o.dy,P="["+a.slice(0,o.colormodel.length).join(", ")+"]";return[w.extendFlat(x,{index:[l,u],x0:r.c2p(t.x0+u*o.dx),x1:r.c2p(t.x0+(u+1)*o.dx),y0:E,y1:E,color:y,xVal:k,xLabelVal:k,yVal:D,yLabelVal:D,zLabelVal:P,text:p,hovertemplateLabels:{zLabel:P,colorLabel:h,"color[0]Label":y[0]+M[0],"color[1]Label":y[1]+M[1],"color[2]Label":y[2]+M[2],"color[3]Label":y[3]+M[3]}})]}}}},48928:function(C,A,e){"use strict";C.exports={attributes:e(95188),supplyDefaults:e(13188),calc:e(93336),plot:e(63715),style:e(28576),hoverPoints:e(24892),eventData:e(79972),moduleType:"trace",name:"image",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},63715:function(C,A,e){"use strict";var v=e(33428),w=e(3400),n=w.strTranslate,T=e(9616),x=e(47797),f=e(9188),s=e(2264).STYLE;C.exports=function(t,o,r,i){var a=o.xaxis,u=o.yaxis,l=!t._context._exportedPlot&&f();w.makeTraceGroups(i,r,"im").each(function(d){var c=v.select(this),_=d[0],p=_.trace,g=(p.zsmooth==="fast"||p.zsmooth===!1&&l)&&!p._hasZ&&p._hasSource&&a.type==="linear"&&u.type==="linear";p._realImage=g;var m,b,y,M,h,E,k=_.z,D=_.x0,P=_.y0,L=_.w,O=_.h,N=p.dx,V=p.dy;for(E=0;m===void 0&&E<L;)m=a.c2p(D+E*N),E++;for(E=L;b===void 0&&E>0;)b=a.c2p(D+E*N),E--;for(E=0;M===void 0&&E<O;)M=u.c2p(P+E*V),E++;for(E=O;h===void 0&&E>0;)h=u.c2p(P+E*V),E--;b<m&&(y=b,b=m,m=y),h<M&&(y=M,M=h,h=y),g||(m=Math.max(-.5*a._length,m),b=Math.min(1.5*a._length,b),M=Math.max(-.5*u._length,M),h=Math.min(1.5*u._length,h));var F=Math.round(b-m),j=Math.round(h-M);if(F<=0||j<=0)c.selectAll("image").data([]).exit().remove();else{var Z=c.selectAll("image").data([d]);Z.enter().append("svg:image").attr({xmlns:T.svg,preserveAspectRatio:"none"}),Z.exit().remove();var z=p.zsmooth===!1?s:"";if(g){var H=w.simpleMap(a.range,a.r2l),U=w.simpleMap(u.range,u.r2l),re=H[1]<H[0],ee=U[1]>U[0];if(re||ee){var J=m+F/2,Q=M+j/2;z+="transform:"+n(J+"px",Q+"px")+"scale("+(re?-1:1)+","+(ee?-1:1)+")"+n(-J+"px",-Q+"px")+";"}}Z.attr("style",z);var ne=new Promise(function(oe){if(p._hasZ)oe();else if(p._hasSource)if(p._canvas&&p._canvas.el.width===L&&p._canvas.el.height===O&&p._canvas.source===p.source)oe();else{var le=document.createElement("canvas");le.width=L,le.height=O;var se=le.getContext("2d",{willReadFrequently:!0});p._image=p._image||new Image;var de=p._image;de.onload=function(){se.drawImage(de,0,0),p._canvas={el:le,source:p.source},oe()},de.setAttribute("src",p.source)}}).then(function(){var oe,le;if(p._hasZ)le=K(function(de,be){var _e=k[be][de];return w.isTypedArray(_e)&&(_e=Array.from(_e)),_e}),oe=le.toDataURL("image/png");else if(p._hasSource)if(g)oe=p.source;else{var se=p._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,L,O).data;le=K(function(de,be){var _e=4*(be*L+de);return[se[_e],se[_e+1],se[_e+2],se[_e+3]]}),oe=le.toDataURL("image/png")}Z.attr({"xlink:href":oe,height:j,width:F,x:m,y:M})});t._promises.push(ne)}function K(oe){var le=document.createElement("canvas");le.width=F,le.height=j;var se,de=le.getContext("2d",{willReadFrequently:!0}),be=function(pe){return w.constrain(Math.round(a.c2p(D+pe*N)-m),0,F)},_e=function(pe){return w.constrain(Math.round(u.c2p(P+pe*V)-M),0,j)},xe=x.colormodel[p.colormodel],ve=xe.colormodel||p.colormodel,ye=xe.fmt;for(E=0;E<_.w;E++){var me=be(E),Me=be(E+1);if(Me!==me&&!isNaN(Me)&&!isNaN(me))for(var Ae=0;Ae<_.h;Ae++){var ce=_e(Ae),ae=_e(Ae+1);ae===ce||isNaN(ae)||isNaN(ce)||!oe(E,Ae)||(se=p._scaler(oe(E,Ae)),de.fillStyle=se?ve+"("+ye(se).join(",")+")":"rgba(0,0,0,0)",de.fillRect(me,ce,Me-me,ae-ce))}}return le}})}},28576:function(C,A,e){"use strict";var v=e(33428);C.exports=function(w){v.select(w).selectAll(".im image").style("opacity",function(n){return n[0].trace.opacity})}},89864:function(C,A,e){"use strict";var v=e(92880).extendFlat,w=e(92880).extendDeep,n=e(67824).overrideAll,T=e(25376),x=e(22548),f=e(86968).u,s=e(94724),t=e(31780).templatedArray,o=e(48164),r=e(29736).descriptionOnlyNumbers,i=T({editType:"plot",colorEditType:"plot"}),a={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:x.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},u={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},l=t("step",w({},a,{range:u}));C.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:f({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:v({},i,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:r("value")},font:v({},i,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:r("value")},increasing:{symbol:{valType:"string",dflt:o.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:o.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:o.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:o.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:v({},i,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:w({},a,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:x.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:n({range:u,visible:v({},s.visible,{dflt:!0}),tickmode:s.minor.tickmode,nticks:s.nticks,tick0:s.tick0,dtick:s.dtick,tickvals:s.tickvals,ticktext:s.ticktext,ticks:v({},s.ticks,{dflt:"outside"}),ticklen:s.ticklen,tickwidth:s.tickwidth,tickcolor:s.tickcolor,ticklabelstep:s.ticklabelstep,showticklabels:s.showticklabels,labelalias:s.labelalias,tickfont:T({}),tickangle:s.tickangle,tickformat:s.tickformat,tickformatstops:s.tickformatstops,tickprefix:s.tickprefix,showtickprefix:s.showtickprefix,ticksuffix:s.ticksuffix,showticksuffix:s.showticksuffix,separatethousands:s.separatethousands,exponentformat:s.exponentformat,minexponent:s.minexponent,showexponent:s.showexponent,editType:"plot"},"plot"),steps:l,threshold:{line:{color:v({},a.line.color,{}),width:v({},a.line.width,{dflt:1}),editType:"plot"},thickness:v({},a.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},92728:function(C,A,e){"use strict";var v=e(7316);A.name="indicator",A.plot=function(w,n,T,x){v.plotBasePlot(A.name,w,n,T,x)},A.clean=function(w,n,T,x){v.cleanBasePlot(A.name,w,n,T,x)}},79136:function(C){"use strict";C.exports={calc:function(A,e){var v=[],w=e.value;typeof e._lastValue!="number"&&(e._lastValue=e.value);var n=e._lastValue,T=n;return e._hasDelta&&typeof e.delta.reference=="number"&&(T=e.delta.reference),v[0]={y:w,lastY:n,delta:w-T,relativeDelta:(w-T)/T},v}}},12096:function(C){"use strict";C.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},20424:function(C,A,e){"use strict";var v=e(3400),w=e(89864),n=e(86968).Q,T=e(31780),x=e(51272),f=e(12096),s=e(26332),t=e(25404),o=e(95936),r=e(42568);function i(a,u){function l(d,c){return v.coerce(a,u,w.gauge.steps,d,c)}l("color"),l("line.color"),l("line.width"),l("range"),l("thickness")}C.exports={supplyDefaults:function(a,u,l,d){function c(N,V){return v.coerce(a,u,w,N,V)}n(u,d,c),c("mode"),u._hasNumber=u.mode.indexOf("number")!==-1,u._hasDelta=u.mode.indexOf("delta")!==-1,u._hasGauge=u.mode.indexOf("gauge")!==-1;var _=c("value");u._range=[0,typeof _=="number"?1.5*_:1];var p,g,m=new Array(2);if(u._hasNumber){c("number.valueformat");var b=v.extendFlat({},d.font);b.size=void 0,v.coerceFont(c,"number.font",b),u.number.font.size===void 0&&(u.number.font.size=f.defaultNumberFontSize,m[0]=!0),c("number.prefix"),c("number.suffix"),p=u.number.font.size}if(u._hasDelta){var y=v.extendFlat({},d.font);y.size=void 0,v.coerceFont(c,"delta.font",y),u.delta.font.size===void 0&&(u.delta.font.size=(u._hasNumber?.5:1)*(p||f.defaultNumberFontSize),m[1]=!0),c("delta.reference",u.value),c("delta.relative"),c("delta.valueformat",u.delta.relative?"2%":""),c("delta.increasing.symbol"),c("delta.increasing.color"),c("delta.decreasing.symbol"),c("delta.decreasing.color"),c("delta.position"),c("delta.prefix"),c("delta.suffix"),g=u.delta.font.size}u._scaleNumbers=(!u._hasNumber||m[0])&&(!u._hasDelta||m[1])||!1;var M,h,E,k,D=v.extendFlat({},d.font);function P(N,V){return v.coerce(M,h,w.gauge,N,V)}function L(N,V){return v.coerce(E,k,w.gauge.axis,N,V)}if(D.size=.25*(p||g||f.defaultNumberFontSize),v.coerceFont(c,"title.font",D),c("title.text"),u._hasGauge){(M=a.gauge)||(M={}),h=T.newContainer(u,"gauge"),P("shape"),(u._isBullet=u.gauge.shape==="bullet")||c("title.align","center"),(u._isAngular=u.gauge.shape==="angular")||c("align","center"),P("bgcolor",d.paper_bgcolor),P("borderwidth"),P("bordercolor"),P("bar.color"),P("bar.line.color"),P("bar.line.width"),P("bar.thickness",f.valueThickness*(u.gauge.shape==="bullet"?.5:1)),x(M,h,{name:"steps",handleItemDefaults:i}),P("threshold.value"),P("threshold.thickness"),P("threshold.line.width"),P("threshold.line.color"),E={},M&&(E=M.axis||{}),k=T.newContainer(h,"axis"),L("visible"),u._range=L("range",u._range);var O={font:d.font,noAutotickangles:!0,outerTicks:!0};s(E,k,L,"linear"),r(E,k,L,"linear",O),o(E,k,L,"linear",O),t(E,k,L,O)}else c("title.align","center"),c("align","center"),u._isAngular=u._isBullet=!1;u._length=null}}},43480:function(C,A,e){"use strict";C.exports={moduleType:"trace",name:"indicator",basePlotModule:e(92728),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:e(89864),supplyDefaults:e(20424).supplyDefaults,calc:e(79136).calc,plot:e(97864),meta:{}}},97864:function(C,A,e){"use strict";var v=e(33428),w=e(67756).qy,n=e(67756).Gz,T=e(3400),x=T.strScale,f=T.strTranslate,s=T.rad2deg,t=e(84284).MID_SHIFT,o=e(43616),r=e(12096),i=e(72736),a=e(54460),u=e(28336),l=e(37668),d=e(94724),c=e(76308),_={left:"start",center:"middle",right:"end"},p={left:0,center:.5,right:1},g=/[yzafpnmkMGTPEZY]/;function m(k){return k&&k.duration>0}function b(k){k.each(function(D){c.stroke(v.select(this),D.line.color)}).each(function(D){c.fill(v.select(this),D.color)}).style("stroke-width",function(D){return D.line.width})}function y(k,D,P){var L=k._fullLayout,O=T.extendFlat({type:"linear",ticks:"outside",range:P,showline:!0},D),N={type:"linear",_id:"x"+D._id},V={letter:"x",font:L.font,noAutotickangles:!0,noHover:!0,noTickson:!0};function F(j,Z){return T.coerce(O,N,d,j,Z)}return u(O,N,F,V,L),l(O,N,F,V),N}function M(k,D,P){return[Math.min(D/k.width,P/k.height),k,D+"x"+P]}function h(k,D,P,L){var O=document.createElementNS("http://www.w3.org/2000/svg","text"),N=v.select(O);return N.text(k).attr("x",0).attr("y",0).attr("text-anchor",P).attr("data-unformatted",k).call(i.convertToTspans,L).call(o.font,D),o.bBox(N.node())}function E(k,D,P,L,O,N){var V="_cache"+D;k[V]&&k[V].key===O||(k[V]={key:O,value:P});var F=T.aggNums(N,null,[k[V].value,L],2);return k[V].value=F,F}C.exports=function(k,D,P,L){var O,N=k._fullLayout;m(P)&&L&&(O=L()),T.makeTraceGroups(N._indicatorlayer,D,"trace").each(function(V){var F,j,Z,z,H,U=V[0].trace,re=v.select(this),ee=U._hasGauge,J=U._isAngular,Q=U._isBullet,ne=U.domain,K={w:N._size.w*(ne.x[1]-ne.x[0]),h:N._size.h*(ne.y[1]-ne.y[0]),l:N._size.l+N._size.w*ne.x[0],r:N._size.r+N._size.w*(1-ne.x[1]),t:N._size.t+N._size.h*(1-ne.y[1]),b:N._size.b+N._size.h*ne.y[0]},oe=K.l+K.w/2,le=K.t+K.h/2,se=Math.min(K.w/2,K.h),de=r.innerRadius*se,be=U.align||"center";if(j=le,ee){if(J&&(F=oe,j=le+se/2,Z=function(ce){return function(ae,pe){return[pe/Math.sqrt(ae.width/2*(ae.width/2)+ae.height*ae.height),ae,pe]}(ce,.9*de)}),Q){var _e=r.bulletPadding,xe=1-r.bulletNumberDomainSize+_e;F=K.l+(xe+(1-xe)*p[be])*K.w,Z=function(ce){return M(ce,(r.bulletNumberDomainSize-_e)*K.w,K.h)}}}else F=K.l+p[be]*K.w,Z=function(ce){return M(ce,K.w,K.h)};(function(ce,ae,pe,De){var ke,Ee,Ie,Re=pe[0].trace,Ne=De.numbersX,ge=De.numbersY,we=Re.align||"center",Ce=_[we],ze=De.transitionOpts,Pe=De.onComplete,Ue=T.ensureSingle(ae,"g","numbers"),Ge=[];Re._hasNumber&&Ge.push("number"),Re._hasDelta&&(Ge.push("delta"),Re.delta.position==="left"&&Ge.reverse());var Xe=Ue.selectAll("text").data(Ge);function st(Pt,Rt,St,Ye){if(!Pt.match("s")||St>=0==Ye>=0||Rt(St).slice(-1).match(g)||Rt(Ye).slice(-1).match(g))return Rt;var Ke=Pt.slice().replace("s","f").replace(/\d+/,function($e){return parseInt($e)-1}),Ve=y(ce,{tickformat:Ke});return function($e){return Math.abs($e)<1?a.tickText(Ve,$e).text:Rt($e)}}Xe.enter().append("text"),Xe.attr("text-anchor",function(){return Ce}).attr("class",function(Pt){return Pt}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),Xe.exit().remove();var at,vt=Re.mode+Re.align;if(Re._hasDelta&&(at=function(){var Pt=y(ce,{tickformat:Re.delta.valueformat},Re._range);Pt.setScale(),a.prepTicks(Pt);var Rt=function(Be){return a.tickText(Pt,Be).text},St=Re.delta.suffix,Ye=Re.delta.prefix,Ke=function(Be){return Re.delta.relative?Be.relativeDelta:Be.delta},Ve=function(Be,je){return Be===0||typeof Be!="number"||isNaN(Be)?"-":(Be>0?Re.delta.increasing.symbol:Re.delta.decreasing.symbol)+Ye+je(Be)+St},$e=function(Be){return Be.delta>=0?Re.delta.increasing.color:Re.delta.decreasing.color};Re._deltaLastValue===void 0&&(Re._deltaLastValue=Ke(pe[0]));var lt=Ue.select("text.delta");function it(){lt.text(Ve(Ke(pe[0]),Rt)).call(c.fill,$e(pe[0])).call(i.convertToTspans,ce)}return lt.call(o.font,Re.delta.font).call(c.fill,$e({delta:Re._deltaLastValue})),m(ze)?lt.transition().duration(ze.duration).ease(ze.easing).tween("text",function(){var Be=v.select(this),je=Ke(pe[0]),ot=Re._deltaLastValue,Ze=st(Re.delta.valueformat,Rt,ot,je),dt=n(ot,je);return Re._deltaLastValue=je,function(mt){Be.text(Ve(dt(mt),Ze)),Be.call(c.fill,$e({delta:dt(mt)}))}}).each("end",function(){it(),Pe&&Pe()}).each("interrupt",function(){it(),Pe&&Pe()}):it(),Ee=h(Ve(Ke(pe[0]),Rt),Re.delta.font,Ce,ce),lt}(),vt+=Re.delta.position+Re.delta.font.size+Re.delta.font.family+Re.delta.valueformat,vt+=Re.delta.increasing.symbol+Re.delta.decreasing.symbol,Ie=Ee),Re._hasNumber&&(function(){var Pt=y(ce,{tickformat:Re.number.valueformat},Re._range);Pt.setScale(),a.prepTicks(Pt);var Rt=function($e){return a.tickText(Pt,$e).text},St=Re.number.suffix,Ye=Re.number.prefix,Ke=Ue.select("text.number");function Ve(){var $e=typeof pe[0].y=="number"?Ye+Rt(pe[0].y)+St:"-";Ke.text($e).call(o.font,Re.number.font).call(i.convertToTspans,ce)}m(ze)?Ke.transition().duration(ze.duration).ease(ze.easing).each("end",function(){Ve(),Pe&&Pe()}).each("interrupt",function(){Ve(),Pe&&Pe()}).attrTween("text",function(){var $e=v.select(this),lt=n(pe[0].lastY,pe[0].y);Re._lastValue=pe[0].y;var it=st(Re.number.valueformat,Rt,pe[0].lastY,pe[0].y);return function(Be){$e.text(Ye+it(lt(Be))+St)}}):Ve(),ke=h(Ye+Rt(pe[0].y)+St,Re.number.font,Ce,ce)}(),vt+=Re.number.font.size+Re.number.font.family+Re.number.valueformat+Re.number.suffix+Re.number.prefix,Ie=ke),Re._hasDelta&&Re._hasNumber){var xt,gt,rt=[(ke.left+ke.right)/2,(ke.top+ke.bottom)/2],tt=[(Ee.left+Ee.right)/2,(Ee.top+Ee.bottom)/2],Mt=.75*Re.delta.font.size;Re.delta.position==="left"&&(xt=E(Re,"deltaPos",0,-1*(ke.width*p[Re.align]+Ee.width*(1-p[Re.align])+Mt),vt,Math.min),gt=rt[1]-tt[1],Ie={width:ke.width+Ee.width+Mt,height:Math.max(ke.height,Ee.height),left:Ee.left+xt,right:ke.right,top:Math.min(ke.top,Ee.top+gt),bottom:Math.max(ke.bottom,Ee.bottom+gt)}),Re.delta.position==="right"&&(xt=E(Re,"deltaPos",0,ke.width*(1-p[Re.align])+Ee.width*p[Re.align]+Mt,vt,Math.max),gt=rt[1]-tt[1],Ie={width:ke.width+Ee.width+Mt,height:Math.max(ke.height,Ee.height),left:ke.left,right:Ee.right+xt,top:Math.min(ke.top,Ee.top+gt),bottom:Math.max(ke.bottom,Ee.bottom+gt)}),Re.delta.position==="bottom"&&(xt=null,gt=Ee.height,Ie={width:Math.max(ke.width,Ee.width),height:ke.height+Ee.height,left:Math.min(ke.left,Ee.left),right:Math.max(ke.right,Ee.right),top:ke.bottom-ke.height,bottom:ke.bottom+Ee.height}),Re.delta.position==="top"&&(xt=null,gt=ke.top,Ie={width:Math.max(ke.width,Ee.width),height:ke.height+Ee.height,left:Math.min(ke.left,Ee.left),right:Math.max(ke.right,Ee.right),top:ke.bottom-ke.height-Ee.height,bottom:ke.bottom}),at.attr({dx:xt,dy:gt})}(Re._hasNumber||Re._hasDelta)&&Ue.attr("transform",function(){var Pt=De.numbersScaler(Ie);vt+=Pt[2];var Rt,St=E(Re,"numbersScale",1,Pt[0],vt,Math.min);Re._scaleNumbers||(St=1),Rt=Re._isAngular?ge-St*Ie.bottom:ge-St*(Ie.top+Ie.bottom)/2,Re._numbersTop=St*Ie.top+Rt;var Ye=Ie[we];we==="center"&&(Ye=(Ie.left+Ie.right)/2);var Ke=Ne-St*Ye;return Ke=E(Re,"numbersTranslate",0,Ke,vt,Math.max),f(Ke,Rt)+x(St)})})(k,re,V,{numbersX:F,numbersY:j,numbersScaler:Z,transitionOpts:P,onComplete:O}),ee&&(z={range:U.gauge.axis.range,color:U.gauge.bgcolor,line:{color:U.gauge.bordercolor,width:0},thickness:1},H={range:U.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:U.gauge.bordercolor,width:U.gauge.borderwidth},thickness:1});var ve=re.selectAll("g.angular").data(J?V:[]);ve.exit().remove();var ye=re.selectAll("g.angularaxis").data(J?V:[]);ye.exit().remove(),J&&function(ce,ae,pe,De){var ke,Ee,Ie,Re,Ne=pe[0].trace,ge=De.size,we=De.radius,Ce=De.innerRadius,ze=De.gaugeBg,Pe=De.gaugeOutline,Ue=[ge.l+ge.w/2,ge.t+ge.h/2+we/2],Ge=De.gauge,Xe=De.layer,st=De.transitionOpts,at=De.onComplete,vt=Math.PI/2;function xt(mt){var yt=Ne.gauge.axis.range[0],ht=(mt-yt)/(Ne.gauge.axis.range[1]-yt)*Math.PI-vt;return ht<-vt?-vt:ht>vt?vt:ht}function gt(mt){return v.svg.arc().innerRadius((Ce+we)/2-mt/2*(we-Ce)).outerRadius((Ce+we)/2+mt/2*(we-Ce)).startAngle(-vt)}function rt(mt){mt.attr("d",function(yt){return gt(yt.thickness).startAngle(xt(yt.range[0])).endAngle(xt(yt.range[1]))()})}Ge.enter().append("g").classed("angular",!0),Ge.attr("transform",f(Ue[0],Ue[1])),Xe.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),Xe.selectAll("g.xangularaxistick,path,text").remove(),(ke=y(ce,Ne.gauge.axis)).type="linear",ke.range=Ne.gauge.axis.range,ke._id="xangularaxis",ke.ticklabeloverflow="allow",ke.setScale();var tt=function(mt){return(ke.range[0]-mt.x)/(ke.range[1]-ke.range[0])*Math.PI+Math.PI},Mt={},Pt=a.makeLabelFns(ke,0).labelStandoff;Mt.xFn=function(mt){var yt=tt(mt);return Math.cos(yt)*Pt},Mt.yFn=function(mt){var yt=tt(mt),ht=Math.sin(yt)>0?.2:1;return-Math.sin(yt)*(Pt+mt.fontSize*ht)+Math.abs(Math.cos(yt))*(mt.fontSize*t)},Mt.anchorFn=function(mt){var yt=tt(mt),ht=Math.cos(yt);return Math.abs(ht)<.1?"middle":ht>0?"start":"end"},Mt.heightFn=function(mt,yt,ht){var kt=tt(mt);return-.5*(1+Math.sin(kt))*ht};var Rt=function(mt){return f(Ue[0]+we*Math.cos(mt),Ue[1]-we*Math.sin(mt))};if(Ie=function(mt){return Rt(tt(mt))},Ee=a.calcTicks(ke),Re=a.getTickSigns(ke)[2],ke.visible){Re=ke.ticks==="inside"?-1:1;var St=(ke.linewidth||1)/2;a.drawTicks(ce,ke,{vals:Ee,layer:Xe,path:"M"+Re*St+",0h"+Re*ke.ticklen,transFn:function(mt){var yt=tt(mt);return Rt(yt)+"rotate("+-s(yt)+")"}}),a.drawLabels(ce,ke,{vals:Ee,layer:Xe,transFn:Ie,labelFns:Mt})}var Ye=[ze].concat(Ne.gauge.steps),Ke=Ge.selectAll("g.bg-arc").data(Ye);Ke.enter().append("g").classed("bg-arc",!0).append("path"),Ke.select("path").call(rt).call(b),Ke.exit().remove();var Ve=gt(Ne.gauge.bar.thickness),$e=Ge.selectAll("g.value-arc").data([Ne.gauge.bar]);$e.enter().append("g").classed("value-arc",!0).append("path");var lt,it,Be,je=$e.select("path");m(st)?(je.transition().duration(st.duration).ease(st.easing).each("end",function(){at&&at()}).each("interrupt",function(){at&&at()}).attrTween("d",(lt=Ve,it=xt(pe[0].lastY),Be=xt(pe[0].y),function(){var mt=w(it,Be);return function(yt){return lt.endAngle(mt(yt))()}})),Ne._lastValue=pe[0].y):je.attr("d",typeof pe[0].y=="number"?Ve.endAngle(xt(pe[0].y)):"M0,0Z"),je.call(b),$e.exit().remove(),Ye=[];var ot=Ne.gauge.threshold.value;(ot||ot===0)&&Ye.push({range:[ot,ot],color:Ne.gauge.threshold.color,line:{color:Ne.gauge.threshold.line.color,width:Ne.gauge.threshold.line.width},thickness:Ne.gauge.threshold.thickness});var Ze=Ge.selectAll("g.threshold-arc").data(Ye);Ze.enter().append("g").classed("threshold-arc",!0).append("path"),Ze.select("path").call(rt).call(b),Ze.exit().remove();var dt=Ge.selectAll("g.gauge-outline").data([Pe]);dt.enter().append("g").classed("gauge-outline",!0).append("path"),dt.select("path").call(rt).call(b),dt.exit().remove()}(k,0,V,{radius:se,innerRadius:de,gauge:ve,layer:ye,size:K,gaugeBg:z,gaugeOutline:H,transitionOpts:P,onComplete:O});var me=re.selectAll("g.bullet").data(Q?V:[]);me.exit().remove();var Me=re.selectAll("g.bulletaxis").data(Q?V:[]);Me.exit().remove(),Q&&function(ce,ae,pe,De){var ke,Ee,Ie,Re,Ne,ge=pe[0].trace,we=De.gauge,Ce=De.layer,ze=De.gaugeBg,Pe=De.gaugeOutline,Ue=De.size,Ge=ge.domain,Xe=De.transitionOpts,st=De.onComplete;we.enter().append("g").classed("bullet",!0),we.attr("transform",f(Ue.l,Ue.t)),Ce.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),Ce.selectAll("g.xbulletaxistick,path,text").remove();var at=Ue.h,vt=ge.gauge.bar.thickness*at,xt=Ge.x[0],gt=Ge.x[0]+(Ge.x[1]-Ge.x[0])*(ge._hasNumber||ge._hasDelta?1-r.bulletNumberDomainSize:1);function rt(Ke){Ke.attr("width",function(Ve){return Math.max(0,ke.c2p(Ve.range[1])-ke.c2p(Ve.range[0]))}).attr("x",function(Ve){return ke.c2p(Ve.range[0])}).attr("y",function(Ve){return .5*(1-Ve.thickness)*at}).attr("height",function(Ve){return Ve.thickness*at})}(ke=y(ce,ge.gauge.axis))._id="xbulletaxis",ke.domain=[xt,gt],ke.setScale(),Ee=a.calcTicks(ke),Ie=a.makeTransTickFn(ke),Re=a.getTickSigns(ke)[2],Ne=Ue.t+Ue.h,ke.visible&&(a.drawTicks(ce,ke,{vals:ke.ticks==="inside"?a.clipEnds(ke,Ee):Ee,layer:Ce,path:a.makeTickPath(ke,Ne,Re),transFn:Ie}),a.drawLabels(ce,ke,{vals:Ee,layer:Ce,transFn:Ie,labelFns:a.makeLabelFns(ke,Ne)}));var tt=[ze].concat(ge.gauge.steps),Mt=we.selectAll("g.bg-bullet").data(tt);Mt.enter().append("g").classed("bg-bullet",!0).append("rect"),Mt.select("rect").call(rt).call(b),Mt.exit().remove();var Pt=we.selectAll("g.value-bullet").data([ge.gauge.bar]);Pt.enter().append("g").classed("value-bullet",!0).append("rect"),Pt.select("rect").attr("height",vt).attr("y",(at-vt)/2).call(b),m(Xe)?Pt.select("rect").transition().duration(Xe.duration).ease(Xe.easing).each("end",function(){st&&st()}).each("interrupt",function(){st&&st()}).attr("width",Math.max(0,ke.c2p(Math.min(ge.gauge.axis.range[1],pe[0].y)))):Pt.select("rect").attr("width",typeof pe[0].y=="number"?Math.max(0,ke.c2p(Math.min(ge.gauge.axis.range[1],pe[0].y))):0),Pt.exit().remove();var Rt=pe.filter(function(){return ge.gauge.threshold.value||ge.gauge.threshold.value===0}),St=we.selectAll("g.threshold-bullet").data(Rt);St.enter().append("g").classed("threshold-bullet",!0).append("line"),St.select("line").attr("x1",ke.c2p(ge.gauge.threshold.value)).attr("x2",ke.c2p(ge.gauge.threshold.value)).attr("y1",(1-ge.gauge.threshold.thickness)/2*at).attr("y2",(1-(1-ge.gauge.threshold.thickness)/2)*at).call(c.stroke,ge.gauge.threshold.line.color).style("stroke-width",ge.gauge.threshold.line.width),St.exit().remove();var Ye=we.selectAll("g.gauge-outline").data([Pe]);Ye.enter().append("g").classed("gauge-outline",!0).append("rect"),Ye.select("rect").call(rt).call(b),Ye.exit().remove()}(k,0,V,{gauge:me,layer:Me,size:K,gaugeBg:z,gaugeOutline:H,transitionOpts:P,onComplete:O});var Ae=re.selectAll("text.title").data(V);Ae.exit().remove(),Ae.enter().append("text").classed("title",!0),Ae.attr("text-anchor",function(){return Q?_.right:_[U.title.align]}).text(U.title.text).call(o.font,U.title.font).call(i.convertToTspans,k),Ae.attr("transform",function(){var ce,ae=K.l+K.w*p[U.title.align],pe=r.titlePadding,De=o.bBox(Ae.node());return ee?(J&&(ce=U.gauge.axis.visible?o.bBox(ye.node()).top-pe-De.bottom:K.t+K.h/2-se/2-De.bottom-pe),Q&&(ce=j-(De.top+De.bottom)/2,ae=K.l-r.bulletPadding*K.w)):ce=U._numbersTop-pe-De.bottom,f(ae,ce)})})}},50048:function(C,A,e){"use strict";var v=e(49084),w=e(29736).axisHoverFormat,n=e(21776).Ks,T=e(52948),x=e(45464),f=e(92880).extendFlat,s=e(67824).overrideAll,t=C.exports=s(f({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:n(),xhoverformat:w("x"),yhoverformat:w("y"),zhoverformat:w("z"),valuehoverformat:w("value",1),showlegend:f({},x.showlegend,{dflt:!1})},v("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,lightposition:T.lightposition,lighting:T.lighting,flatshading:T.flatshading,contour:T.contour,hoverinfo:f({},x.hoverinfo)}),"calc","nested");t.flatshading.dflt=!0,t.lighting.facenormalsepsilon.dflt=0,t.x.editType=t.y.editType=t.z.editType=t.value.editType="calc+clearAxisTypes",t.transforms=void 0},62624:function(C,A,e){"use strict";var v=e(47128),w=e(3832).processGrid,n=e(3832).filter;C.exports=function(T,x){x._len=Math.min(x.x.length,x.y.length,x.z.length,x.value.length),x._x=n(x.x,x._len),x._y=n(x.y,x._len),x._z=n(x.z,x._len),x._value=n(x.value,x._len);var f=w(x);x._gridFill=f.fill,x._Xs=f.Xs,x._Ys=f.Ys,x._Zs=f.Zs,x._len=f.len;for(var s=1/0,t=-1/0,o=0;o<x._len;o++){var r=x._value[o];s=Math.min(s,r),t=Math.max(t,r)}x._minValues=s,x._maxValues=t,x._vMin=x.isomin===void 0||x.isomin===null?s:x.isomin,x._vMax=x.isomax===void 0||x.isomin===null?t:x.isomax,v(T,x,{vals:[x._vMin,x._vMax],containerStr:"",cLetter:"c"})}},31460:function(C,A,e){"use strict";var v=e(67792).gl_mesh3d,w=e(33040).parseColorScale,n=e(3400).isArrayOrTypedArray,T=e(43080),x=e(8932).extractOpts,f=e(52094),s=function(a,u){for(var l=u.length-1;l>0;l--){var d=Math.min(u[l],u[l-1]),c=Math.max(u[l],u[l-1]);if(c>d&&d<a&&a<=c)return{id:l,distRatio:(c-a)/(c-d)}}return{id:0,distRatio:0}};function t(a,u,l){this.scene=a,this.uid=l,this.mesh=u,this.name="",this.data=null,this.showContour=!1}var o=t.prototype;o.handlePick=function(a){if(a.object===this.mesh){var u=a.data.index,l=this.data._meshX[u],d=this.data._meshY[u],c=this.data._meshZ[u],_=this.data._Ys.length,p=this.data._Zs.length,g=s(l,this.data._Xs).id,m=s(d,this.data._Ys).id,b=s(c,this.data._Zs).id,y=a.index=b+p*m+p*_*g;a.traceCoordinate=[this.data._meshX[y],this.data._meshY[y],this.data._meshZ[y],this.data._value[y]];var M=this.data.hovertext||this.data.text;return n(M)&&M[y]!==void 0?a.textLabel=M[y]:M&&(a.textLabel=M),!0}},o.update=function(a){var u=this.scene,l=u.fullSceneLayout;function d(p,g,m,b){return g.map(function(y){return p.d2l(y,0,b)*m})}this.data=i(a);var c={positions:f(d(l.xaxis,a._meshX,u.dataScale[0],a.xcalendar),d(l.yaxis,a._meshY,u.dataScale[1],a.ycalendar),d(l.zaxis,a._meshZ,u.dataScale[2],a.zcalendar)),cells:f(a._meshI,a._meshJ,a._meshK),lightPosition:[a.lightposition.x,a.lightposition.y,a.lightposition.z],ambient:a.lighting.ambient,diffuse:a.lighting.diffuse,specular:a.lighting.specular,roughness:a.lighting.roughness,fresnel:a.lighting.fresnel,vertexNormalsEpsilon:a.lighting.vertexnormalsepsilon,faceNormalsEpsilon:a.lighting.facenormalsepsilon,opacity:a.opacity,contourEnable:a.contour.show,contourColor:T(a.contour.color).slice(0,3),contourWidth:a.contour.width,useFacetNormals:a.flatshading},_=x(a);c.vertexIntensity=a._meshIntensity,c.vertexIntensityBounds=[_.min,_.max],c.colormap=w(a),this.mesh.update(c)},o.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var r=["xyz","xzy","yxz","yzx","zxy","zyx"];function i(a){a._meshI=[],a._meshJ=[],a._meshK=[];var u,l,d,c,_,p,g,m=a.surface.show,b=a.spaceframe.show,y=a.surface.fill,M=a.spaceframe.fill,h=!1,E=!1,k=0,D=a._Xs,P=a._Ys,L=a._Zs,O=D.length,N=P.length,V=L.length,F=r.indexOf(a._gridFill.replace(/-/g,"").replace(/\+/g,"")),j=function(Ce,ze,Pe){switch(F){case 5:return Pe+V*ze+V*N*Ce;case 4:return Pe+V*Ce+V*O*ze;case 3:return ze+N*Pe+N*V*Ce;case 2:return ze+N*Ce+N*O*Pe;case 1:return Ce+O*Pe+O*V*ze;default:return Ce+O*ze+O*N*Pe}},Z=a._minValues,z=a._maxValues,H=a._vMin,U=a._vMax;function re(Ce,ze,Pe){for(var Ue=p.length,Ge=l;Ge<Ue;Ge++)if(Ce===d[Ge]&&ze===c[Ge]&&Pe===_[Ge])return Ge;return-1}function ee(){l=u}function J(){d=[],c=[],_=[],p=[],u=0,ee()}function Q(Ce,ze,Pe,Ue){return d.push(Ce),c.push(ze),_.push(Pe),p.push(Ue),++u-1}function ne(Ce,ze,Pe){for(var Ue=[],Ge=0;Ge<Ce.length;Ge++)Ue[Ge]=Ce[Ge]*(1-Pe)+Pe*ze[Ge];return Ue}function K(Ce){g=Ce}function oe(Ce,ze){return Ce==="all"||Ce===null||Ce.indexOf(ze)>-1}function le(Ce,ze){return Ce===null?ze:Ce}function se(Ce,ze,Pe){ee();var Ue,Ge,Xe,st=[ze],at=[Pe];if(g>=1)st=[ze],at=[Pe];else if(g>0){var vt=function(Ye,Ke){var Ve=Ye[0],$e=Ye[1],lt=Ye[2],it=function(ht,kt,_t){for(var Et=[],Lt=0;Lt<ht.length;Lt++)Et[Lt]=(ht[Lt]+kt[Lt]+_t[Lt])/3;return Et}(Ve,$e,lt),Be=Math.sqrt(1-g),je=ne(it,Ve,Be),ot=ne(it,$e,Be),Ze=ne(it,lt,Be),dt=Ke[0],mt=Ke[1],yt=Ke[2];return{xyzv:[[Ve,$e,ot],[ot,je,Ve],[$e,lt,Ze],[Ze,ot,$e],[lt,Ve,je],[je,Ze,lt]],abc:[[dt,mt,-1],[-1,-1,dt],[mt,yt,-1],[-1,-1,mt],[yt,dt,-1],[-1,-1,yt]]}}(ze,Pe);st=vt.xyzv,at=vt.abc}for(var xt=0;xt<st.length;xt++){ze=st[xt],Pe=at[xt];for(var gt=[],rt=0;rt<3;rt++){var tt=ze[rt][0],Mt=ze[rt][1],Pt=ze[rt][2],Rt=ze[rt][3],St=Pe[rt]>-1?Pe[rt]:re(tt,Mt,Pt);gt[rt]=St>-1?St:Q(tt,Mt,Pt,le(Ce,Rt))}Ue=gt[0],Ge=gt[1],Xe=gt[2],a._meshI.push(Ue),a._meshJ.push(Ge),a._meshK.push(Xe),++k}}function de(Ce,ze,Pe,Ue){var Ge=Ce[3];Ge<Pe&&(Ge=Pe),Ge>Ue&&(Ge=Ue);for(var Xe=(Ce[3]-Ge)/(Ce[3]-ze[3]+1e-9),st=[],at=0;at<4;at++)st[at]=(1-Xe)*Ce[at]+Xe*ze[at];return st}function be(Ce,ze,Pe){return Ce>=ze&&Ce<=Pe}function _e(Ce){var ze=.001*(U-H);return Ce>=H-ze&&Ce<=U+ze}function xe(Ce){for(var ze=[],Pe=0;Pe<4;Pe++){var Ue=Ce[Pe];ze.push([a._x[Ue],a._y[Ue],a._z[Ue],a._value[Ue]])}return ze}var ve=3;function ye(Ce,ze,Pe,Ue,Ge,Xe){Xe||(Xe=1),Pe=[-1,-1,-1];var st=!1,at=[be(ze[0][3],Ue,Ge),be(ze[1][3],Ue,Ge),be(ze[2][3],Ue,Ge)];if(!at[0]&&!at[1]&&!at[2])return!1;var vt=function(gt,rt,tt){return _e(rt[0][3])&&_e(rt[1][3])&&_e(rt[2][3])?(se(gt,rt,tt),!0):Xe<ve&&ye(gt,rt,tt,H,U,++Xe)};if(at[0]&&at[1]&&at[2])return vt(Ce,ze,Pe)||st;var xt=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(gt){if(at[gt[0]]&&at[gt[1]]&&!at[gt[2]]){var rt=ze[gt[0]],tt=ze[gt[1]],Mt=ze[gt[2]],Pt=de(Mt,rt,Ue,Ge),Rt=de(Mt,tt,Ue,Ge);st=vt(Ce,[Rt,Pt,rt],[-1,-1,Pe[gt[0]]])||st,st=vt(Ce,[rt,tt,Rt],[Pe[gt[0]],Pe[gt[1]],-1])||st,xt=!0}}),xt||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(gt){if(at[gt[0]]&&!at[gt[1]]&&!at[gt[2]]){var rt=ze[gt[0]],tt=ze[gt[1]],Mt=ze[gt[2]],Pt=de(tt,rt,Ue,Ge),Rt=de(Mt,rt,Ue,Ge);st=vt(Ce,[Rt,Pt,rt],[-1,-1,Pe[gt[0]]])||st,xt=!0}}),st}function me(Ce,ze,Pe,Ue){var Ge=!1,Xe=xe(ze),st=[be(Xe[0][3],Pe,Ue),be(Xe[1][3],Pe,Ue),be(Xe[2][3],Pe,Ue),be(Xe[3][3],Pe,Ue)];if(!(st[0]||st[1]||st[2]||st[3]))return Ge;if(st[0]&&st[1]&&st[2]&&st[3])return E&&(Ge=function(vt,xt,gt){var rt=function(tt,Mt,Pt){se(vt,[xt[tt],xt[Mt],xt[Pt]],[gt[tt],gt[Mt],gt[Pt]])};rt(0,1,2),rt(3,0,1),rt(2,3,0),rt(1,2,3)}(Ce,Xe,ze)||Ge),Ge;var at=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(vt){if(st[vt[0]]&&st[vt[1]]&&st[vt[2]]&&!st[vt[3]]){var xt=Xe[vt[0]],gt=Xe[vt[1]],rt=Xe[vt[2]],tt=Xe[vt[3]];if(E)Ge=se(Ce,[xt,gt,rt],[ze[vt[0]],ze[vt[1]],ze[vt[2]]])||Ge;else{var Mt=de(tt,xt,Pe,Ue),Pt=de(tt,gt,Pe,Ue),Rt=de(tt,rt,Pe,Ue);Ge=se(null,[Mt,Pt,Rt],[-1,-1,-1])||Ge}at=!0}}),at||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(vt){if(st[vt[0]]&&st[vt[1]]&&!st[vt[2]]&&!st[vt[3]]){var xt=Xe[vt[0]],gt=Xe[vt[1]],rt=Xe[vt[2]],tt=Xe[vt[3]],Mt=de(rt,xt,Pe,Ue),Pt=de(rt,gt,Pe,Ue),Rt=de(tt,gt,Pe,Ue),St=de(tt,xt,Pe,Ue);E?(Ge=se(Ce,[xt,St,Mt],[ze[vt[0]],-1,-1])||Ge,Ge=se(Ce,[gt,Pt,Rt],[ze[vt[1]],-1,-1])||Ge):Ge=function(Ye,Ke,Ve){var $e=function(lt,it,Be){se(null,[Ke[lt],Ke[it],Ke[Be]],[Ve[lt],Ve[it],Ve[Be]])};$e(0,1,2),$e(2,3,0)}(0,[Mt,Pt,Rt,St],[-1,-1,-1,-1])||Ge,at=!0}}),at||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(vt){if(st[vt[0]]&&!st[vt[1]]&&!st[vt[2]]&&!st[vt[3]]){var xt=Xe[vt[0]],gt=Xe[vt[1]],rt=Xe[vt[2]],tt=Xe[vt[3]],Mt=de(gt,xt,Pe,Ue),Pt=de(rt,xt,Pe,Ue),Rt=de(tt,xt,Pe,Ue);E?(Ge=se(Ce,[xt,Mt,Pt],[ze[vt[0]],-1,-1])||Ge,Ge=se(Ce,[xt,Pt,Rt],[ze[vt[0]],-1,-1])||Ge,Ge=se(Ce,[xt,Rt,Mt],[ze[vt[0]],-1,-1])||Ge):Ge=se(null,[Mt,Pt,Rt],[-1,-1,-1])||Ge,at=!0}})),Ge}function Me(Ce,ze,Pe,Ue,Ge,Xe,st,at,vt,xt,gt){var rt=!1;return h&&(oe(Ce,"A")&&(rt=me(null,[ze,Pe,Ue,Xe],xt,gt)||rt),oe(Ce,"B")&&(rt=me(null,[Pe,Ue,Ge,vt],xt,gt)||rt),oe(Ce,"C")&&(rt=me(null,[Pe,Xe,st,vt],xt,gt)||rt),oe(Ce,"D")&&(rt=me(null,[Ue,Xe,at,vt],xt,gt)||rt),oe(Ce,"E")&&(rt=me(null,[Pe,Ue,Xe,vt],xt,gt)||rt)),E&&(rt=me(Ce,[Pe,Ue,Xe,vt],xt,gt)||rt),rt}function Ae(Ce,ze,Pe,Ue,Ge,Xe,st,at){return[at[0]===!0||ye(Ce,xe([ze,Pe,Ue]),[ze,Pe,Ue],Xe,st),at[1]===!0||ye(Ce,xe([Ue,Ge,ze]),[Ue,Ge,ze],Xe,st)]}function ce(Ce,ze,Pe,Ue,Ge,Xe,st,at,vt){return at?Ae(Ce,ze,Pe,Ge,Ue,Xe,st,vt):Ae(Ce,Pe,Ge,Ue,ze,Xe,st,vt)}function ae(Ce,ze,Pe,Ue,Ge,Xe,st){var at,vt,xt,gt,rt=!1,tt=function(){rt=ye(Ce,[at,vt,xt],[-1,-1,-1],Ge,Xe)||rt,rt=ye(Ce,[xt,gt,at],[-1,-1,-1],Ge,Xe)||rt},Mt=st[0],Pt=st[1],Rt=st[2];return Mt&&(at=ne(xe([j(ze,Pe-0,Ue-0)])[0],xe([j(ze-1,Pe-0,Ue-0)])[0],Mt),vt=ne(xe([j(ze,Pe-0,Ue-1)])[0],xe([j(ze-1,Pe-0,Ue-1)])[0],Mt),xt=ne(xe([j(ze,Pe-1,Ue-1)])[0],xe([j(ze-1,Pe-1,Ue-1)])[0],Mt),gt=ne(xe([j(ze,Pe-1,Ue-0)])[0],xe([j(ze-1,Pe-1,Ue-0)])[0],Mt),tt()),Pt&&(at=ne(xe([j(ze-0,Pe,Ue-0)])[0],xe([j(ze-0,Pe-1,Ue-0)])[0],Pt),vt=ne(xe([j(ze-0,Pe,Ue-1)])[0],xe([j(ze-0,Pe-1,Ue-1)])[0],Pt),xt=ne(xe([j(ze-1,Pe,Ue-1)])[0],xe([j(ze-1,Pe-1,Ue-1)])[0],Pt),gt=ne(xe([j(ze-1,Pe,Ue-0)])[0],xe([j(ze-1,Pe-1,Ue-0)])[0],Pt),tt()),Rt&&(at=ne(xe([j(ze-0,Pe-0,Ue)])[0],xe([j(ze-0,Pe-0,Ue-1)])[0],Rt),vt=ne(xe([j(ze-0,Pe-1,Ue)])[0],xe([j(ze-0,Pe-1,Ue-1)])[0],Rt),xt=ne(xe([j(ze-1,Pe-1,Ue)])[0],xe([j(ze-1,Pe-1,Ue-1)])[0],Rt),gt=ne(xe([j(ze-1,Pe-0,Ue)])[0],xe([j(ze-1,Pe-0,Ue-1)])[0],Rt),tt()),rt}function pe(Ce,ze,Pe,Ue,Ge,Xe,st,at,vt,xt,gt,rt){var tt=Ce;return rt?(h&&Ce==="even"&&(tt=null),Me(tt,ze,Pe,Ue,Ge,Xe,st,at,vt,xt,gt)):(h&&Ce==="odd"&&(tt=null),Me(tt,vt,at,st,Xe,Ge,Ue,Pe,ze,xt,gt))}function De(Ce,ze,Pe,Ue,Ge){for(var Xe=[],st=0,at=0;at<ze.length;at++)for(var vt=ze[at],xt=1;xt<V;xt++)for(var gt=1;gt<N;gt++)Xe.push(ce(Ce,j(vt,gt-1,xt-1),j(vt,gt-1,xt),j(vt,gt,xt-1),j(vt,gt,xt),Pe,Ue,(vt+gt+xt)%2,Ge&&Ge[st]?Ge[st]:[])),st++;return Xe}function ke(Ce,ze,Pe,Ue,Ge){for(var Xe=[],st=0,at=0;at<ze.length;at++)for(var vt=ze[at],xt=1;xt<O;xt++)for(var gt=1;gt<V;gt++)Xe.push(ce(Ce,j(xt-1,vt,gt-1),j(xt,vt,gt-1),j(xt-1,vt,gt),j(xt,vt,gt),Pe,Ue,(xt+vt+gt)%2,Ge&&Ge[st]?Ge[st]:[])),st++;return Xe}function Ee(Ce,ze,Pe,Ue,Ge){for(var Xe=[],st=0,at=0;at<ze.length;at++)for(var vt=ze[at],xt=1;xt<N;xt++)for(var gt=1;gt<O;gt++)Xe.push(ce(Ce,j(gt-1,xt-1,vt),j(gt-1,xt,vt),j(gt,xt-1,vt),j(gt,xt,vt),Pe,Ue,(gt+xt+vt)%2,Ge&&Ge[st]?Ge[st]:[])),st++;return Xe}function Ie(Ce,ze,Pe){for(var Ue=1;Ue<V;Ue++)for(var Ge=1;Ge<N;Ge++)for(var Xe=1;Xe<O;Xe++)pe(Ce,j(Xe-1,Ge-1,Ue-1),j(Xe-1,Ge-1,Ue),j(Xe-1,Ge,Ue-1),j(Xe-1,Ge,Ue),j(Xe,Ge-1,Ue-1),j(Xe,Ge-1,Ue),j(Xe,Ge,Ue-1),j(Xe,Ge,Ue),ze,Pe,(Xe+Ge+Ue)%2)}function Re(Ce,ze,Pe,Ue,Ge,Xe){for(var st=[],at=0,vt=0;vt<ze.length;vt++)for(var xt=ze[vt],gt=1;gt<V;gt++)for(var rt=1;rt<N;rt++)st.push(ae(Ce,xt,rt,gt,Pe,Ue,Ge[vt],Xe&&Xe[at]&&Xe[at])),at++;return st}function Ne(Ce,ze,Pe,Ue,Ge,Xe){for(var st=[],at=0,vt=0;vt<ze.length;vt++)for(var xt=ze[vt],gt=1;gt<O;gt++)for(var rt=1;rt<V;rt++)st.push(ae(Ce,gt,xt,rt,Pe,Ue,Ge[vt],Xe&&Xe[at]&&Xe[at])),at++;return st}function ge(Ce,ze,Pe,Ue,Ge,Xe){for(var st=[],at=0,vt=0;vt<ze.length;vt++)for(var xt=ze[vt],gt=1;gt<N;gt++)for(var rt=1;rt<O;rt++)st.push(ae(Ce,rt,gt,xt,Pe,Ue,Ge[vt],Xe&&Xe[at]&&Xe[at])),at++;return st}function we(Ce,ze){for(var Pe=[],Ue=Ce;Ue<ze;Ue++)Pe.push(Ue);return Pe}return function(){J(),function(){for(var vt=0;vt<O;vt++)for(var xt=0;xt<N;xt++)for(var gt=0;gt<V;gt++){var rt=j(vt,xt,gt);Q(a._x[rt],a._y[rt],a._z[rt],a._value[rt])}}();var Ce=null;if(b&&M&&(K(M),E=!0,Ie(Ce,H,U),E=!1),m&&y){K(y);for(var ze=a.surface.pattern,Pe=a.surface.count,Ue=0;Ue<Pe;Ue++){var Ge=Pe===1?.5:Ue/(Pe-1),Xe=(1-Ge)*H+Ge*U,st=Math.abs(Xe-Z)>Math.abs(Xe-z)?[Z,Xe]:[Xe,z];h=!0,Ie(ze,st[0],st[1]),h=!1}}var at=[[Math.min(H,z),Math.max(H,z)],[Math.min(Z,U),Math.max(Z,U)]];["x","y","z"].forEach(function(vt){for(var xt=[],gt=0;gt<at.length;gt++){var rt=0,tt=at[gt][0],Mt=at[gt][1],Pt=a.slices[vt];if(Pt.show&&Pt.fill){K(Pt.fill);var Rt=[],St=[],Ye=[];if(Pt.locations.length)for(var Ke=0;Ke<Pt.locations.length;Ke++){var Ve=s(Pt.locations[Ke],vt==="x"?D:vt==="y"?P:L);Ve.distRatio===0?Rt.push(Ve.id):Ve.id>0&&(St.push(Ve.id),vt==="x"?Ye.push([Ve.distRatio,0,0]):vt==="y"?Ye.push([0,Ve.distRatio,0]):Ye.push([0,0,Ve.distRatio]))}else Rt=we(1,vt==="x"?O-1:vt==="y"?N-1:V-1);St.length>0&&(xt[rt]=vt==="x"?Re(Ce,St,tt,Mt,Ye,xt[rt]):vt==="y"?Ne(Ce,St,tt,Mt,Ye,xt[rt]):ge(Ce,St,tt,Mt,Ye,xt[rt]),rt++),Rt.length>0&&(xt[rt]=vt==="x"?De(Ce,Rt,tt,Mt,xt[rt]):vt==="y"?ke(Ce,Rt,tt,Mt,xt[rt]):Ee(Ce,Rt,tt,Mt,xt[rt]),rt++)}var $e=a.caps[vt];$e.show&&$e.fill&&(K($e.fill),xt[rt]=vt==="x"?De(Ce,[0,O-1],tt,Mt,xt[rt]):vt==="y"?ke(Ce,[0,N-1],tt,Mt,xt[rt]):Ee(Ce,[0,V-1],tt,Mt,xt[rt]),rt++)}}),k===0&&J(),a._meshX=d,a._meshY=c,a._meshZ=_,a._meshIntensity=p,a._Xs=D,a._Ys=P,a._Zs=L}(),a}C.exports={findNearestOnAxis:s,generateIsoMeshes:i,createIsosurfaceTrace:function(a,u){var l=a.glplot.gl,d=v({gl:l}),c=new t(a,d,u.uid);return d._trace=c,c.update(u),a.glplot.add(d),c}}},70548:function(C,A,e){"use strict";var v=e(3400),w=e(24040),n=e(50048),T=e(27260);function x(f,s,t,o,r){var i=r("isomin"),a=r("isomax");a!=null&&i!=null&&i>a&&(s.isomin=null,s.isomax=null);var u=r("x"),l=r("y"),d=r("z"),c=r("value");u&&u.length&&l&&l.length&&d&&d.length&&c&&c.length?(w.getComponentMethod("calendars","handleTraceDefaults")(f,s,["x","y","z"],o),r("valuehoverformat"),["x","y","z"].forEach(function(_){r(_+"hoverformat");var p="caps."+_;r(p+".show")&&r(p+".fill");var g="slices."+_;r(g+".show")&&(r(g+".fill"),r(g+".locations"))}),r("spaceframe.show")&&r("spaceframe.fill"),r("surface.show")&&(r("surface.count"),r("surface.fill"),r("surface.pattern")),r("contour.show")&&(r("contour.color"),r("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(_){r(_)}),T(f,s,o,r,{prefix:"",cLetter:"c"}),s._length=null):s.visible=!1}C.exports={supplyDefaults:function(f,s,t,o){x(f,s,0,o,function(r,i){return v.coerce(f,s,n,r,i)})},supplyIsoDefaults:x}},6296:function(C,A,e){"use strict";C.exports={attributes:e(50048),supplyDefaults:e(70548).supplyDefaults,calc:e(62624),colorbar:{min:"cmin",max:"cmax"},plot:e(31460).createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:e(12536),categories:["gl3d","showLegend"],meta:{}}},52948:function(C,A,e){"use strict";var v=e(49084),w=e(29736).axisHoverFormat,n=e(21776).Ks,T=e(16716),x=e(45464),f=e(92880).extendFlat;C.exports=f({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:n({editType:"calc"}),xhoverformat:w("x"),yhoverformat:w("y"),zhoverformat:w("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},v("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:f({},T.contours.x.show,{}),color:T.contours.x.color,width:T.contours.x.width,editType:"calc"},lightposition:{x:f({},T.lightposition.x,{dflt:1e5}),y:f({},T.lightposition.y,{dflt:1e5}),z:f({},T.lightposition.z,{dflt:0}),editType:"calc"},lighting:f({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},T.lighting),hoverinfo:f({},x.hoverinfo,{editType:"calc"}),showlegend:f({},x.showlegend,{dflt:!1})})},1876:function(C,A,e){"use strict";var v=e(47128);C.exports=function(w,n){n.intensity&&v(w,n,{vals:n.intensity,containerStr:"",cLetter:"c"})}},576:function(C,A,e){"use strict";var v=e(67792).gl_mesh3d,w=e(67792).delaunay_triangulate,n=e(67792).alpha_shape,T=e(67792).convex_hull,x=e(33040).parseColorScale,f=e(3400).isArrayOrTypedArray,s=e(43080),t=e(8932).extractOpts,o=e(52094);function r(c,_,p){this.scene=c,this.uid=p,this.mesh=_,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var i=r.prototype;function a(c){for(var _=[],p=c.length,g=0;g<p;g++)_[g]=s(c[g]);return _}function u(c,_,p,g){for(var m=[],b=_.length,y=0;y<b;y++)m[y]=c.d2l(_[y],0,g)*p;return m}function l(c){for(var _=[],p=c.length,g=0;g<p;g++)_[g]=Math.round(c[g]);return _}function d(c,_){for(var p=c.length,g=0;g<p;g++)if(c[g]<=-.5||c[g]>=_-.5)return!1;return!0}i.handlePick=function(c){if(c.object===this.mesh){var _=c.index=c.data.index;c.data._cellCenter?c.traceCoordinate=c.data.dataCoordinate:c.traceCoordinate=[this.data.x[_],this.data.y[_],this.data.z[_]];var p=this.data.hovertext||this.data.text;return f(p)&&p[_]!==void 0?c.textLabel=p[_]:p&&(c.textLabel=p),!0}},i.update=function(c){var _=this.scene,p=_.fullSceneLayout;this.data=c;var g,m=c.x.length,b=o(u(p.xaxis,c.x,_.dataScale[0],c.xcalendar),u(p.yaxis,c.y,_.dataScale[1],c.ycalendar),u(p.zaxis,c.z,_.dataScale[2],c.zcalendar));if(c.i&&c.j&&c.k){if(c.i.length!==c.j.length||c.j.length!==c.k.length||!d(c.i,m)||!d(c.j,m)||!d(c.k,m))return;g=o(l(c.i),l(c.j),l(c.k))}else g=c.alphahull===0?T(b):c.alphahull>0?n(c.alphahull,b):function(E,k){for(var D=["x","y","z"].indexOf(E),P=[],L=k.length,O=0;O<L;O++)P[O]=[k[O][(D+1)%3],k[O][(D+2)%3]];return w(P)}(c.delaunayaxis,b);var y={positions:b,cells:g,lightPosition:[c.lightposition.x,c.lightposition.y,c.lightposition.z],ambient:c.lighting.ambient,diffuse:c.lighting.diffuse,specular:c.lighting.specular,roughness:c.lighting.roughness,fresnel:c.lighting.fresnel,vertexNormalsEpsilon:c.lighting.vertexnormalsepsilon,faceNormalsEpsilon:c.lighting.facenormalsepsilon,opacity:c.opacity,contourEnable:c.contour.show,contourColor:s(c.contour.color).slice(0,3),contourWidth:c.contour.width,useFacetNormals:c.flatshading};if(c.intensity){var M=t(c);this.color="#fff";var h=c.intensitymode;y[h+"Intensity"]=c.intensity,y[h+"IntensityBounds"]=[M.min,M.max],y.colormap=x(c)}else c.vertexcolor?(this.color=c.vertexcolor[0],y.vertexColors=a(c.vertexcolor)):c.facecolor?(this.color=c.facecolor[0],y.cellColors=a(c.facecolor)):(this.color=c.color,y.meshColor=s(c.color));this.mesh.update(y)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},C.exports=function(c,_){var p=c.glplot.gl,g=v({gl:p}),m=new r(c,g,_.uid);return g._trace=m,m.update(_),c.glplot.add(g),m}},74212:function(C,A,e){"use strict";var v=e(24040),w=e(3400),n=e(27260),T=e(52948);C.exports=function(x,f,s,t){function o(i,a){return w.coerce(x,f,T,i,a)}function r(i){var a=i.map(function(u){var l=o(u);return l&&w.isArrayOrTypedArray(l)?l:null});return a.every(function(u){return u&&u.length===a[0].length})&&a}r(["x","y","z"])?(r(["i","j","k"]),(!f.i||f.j&&f.k)&&(!f.j||f.k&&f.i)&&(!f.k||f.i&&f.j)?(v.getComponentMethod("calendars","handleTraceDefaults")(x,f,["x","y","z"],t),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(i){o(i)}),o("contour.show")&&(o("contour.color"),o("contour.width")),"intensity"in x?(o("intensity"),o("intensitymode"),n(x,f,t,o,{prefix:"",cLetter:"c"})):(f.showscale=!1,"facecolor"in x?o("facecolor"):"vertexcolor"in x?o("vertexcolor"):o("color",s)),o("text"),o("hovertext"),o("hovertemplate"),o("xhoverformat"),o("yhoverformat"),o("zhoverformat"),f._length=null):f.visible=!1):f.visible=!1}},7404:function(C,A,e){"use strict";C.exports={attributes:e(52948),supplyDefaults:e(74212),calc:e(1876),colorbar:{min:"cmin",max:"cmax"},plot:e(576),moduleType:"trace",name:"mesh3d",basePlotModule:e(12536),categories:["gl3d","showLegend"],meta:{}}},20279:function(C,A,e){"use strict";var v=e(3400).extendFlat,w=e(52904),n=e(29736).axisHoverFormat,T=e(98192).u,x=e(55756),f=e(48164),s=f.INCREASING.COLOR,t=f.DECREASING.COLOR,o=w.line;function r(i){return{line:{color:v({},o.color,{dflt:i}),width:o.width,dash:T,editType:"style"},editType:"style"}}C.exports={xperiod:w.xperiod,xperiod0:w.xperiod0,xperiodalignment:w.xperiodalignment,xhoverformat:n("x"),yhoverformat:n("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:v({},o.width,{}),dash:v({},T,{}),editType:"style"},increasing:r(s),decreasing:r(t),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:v({},x.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}}),zorder:w.zorder}},42812:function(C,A,e){"use strict";var v=e(3400),w=v._,n=e(54460),T=e(1220),x=e(39032).BADNUM;function f(t,o,r,i){return{o:t,h:o,l:r,c:i}}function s(t,o,r,i,a,u){for(var l=a.makeCalcdata(o,"open"),d=a.makeCalcdata(o,"high"),c=a.makeCalcdata(o,"low"),_=a.makeCalcdata(o,"close"),p=v.isArrayOrTypedArray(o.text),g=v.isArrayOrTypedArray(o.hovertext),m=!0,b=null,y=!!o.xperiodalignment,M=[],h=0;h<i.length;h++){var E=i[h],k=l[h],D=d[h],P=c[h],L=_[h];if(E!==x&&k!==x&&D!==x&&P!==x&&L!==x){L===k?b!==null&&L!==b&&(m=L>b):m=L>k,b=L;var O=u(k,D,P,L);O.pos=E,O.yc=(k+L)/2,O.i=h,O.dir=m?"increasing":"decreasing",O.x=O.pos,O.y=[P,D],y&&(O.orig_p=r[h]),p&&(O.tx=o.text[h]),g&&(O.htx=o.hovertext[h]),M.push(O)}else M.push({pos:E,empty:!0})}return o._extremes[a._id]=n.findExtremes(a,v.concat(c,d),{padded:!0}),M.length&&(M[0].t={labels:{open:w(t,"open:")+" ",high:w(t,"high:")+" ",low:w(t,"low:")+" ",close:w(t,"close:")+" "}}),M}C.exports={calc:function(t,o){var r=n.getFromId(t,o.xaxis),i=n.getFromId(t,o.yaxis),a=function(_,p,g){var m=g._minDiff;if(!m){var b,y=_._fullData,M=[];for(m=1/0,b=0;b<y.length;b++){var h=y[b];if(h.type==="ohlc"&&h.visible===!0&&h.xaxis===p._id){M.push(h);var E=p.makeCalcdata(h,"x");h._origX=E;var k=T(g,p,"x",E).vals;h._xcalc=k;var D=v.distinctVals(k).minDiff;D&&isFinite(D)&&(m=Math.min(m,D))}}for(m===1/0&&(m=1),b=0;b<M.length;b++)M[b]._minDiff=m}return m*g.tickwidth}(t,r,o),u=o._minDiff;o._minDiff=null;var l=o._origX;o._origX=null;var d=o._xcalc;o._xcalc=null;var c=s(t,o,l,d,i,f);return o._extremes[r._id]=n.findExtremes(r,d,{vpad:u/2}),c.length?(v.extendFlat(c[0].t,{wHover:u/2,tickLen:a}),c):[{t:{empty:!0}}]},calcCommon:s}},23860:function(C,A,e){"use strict";var v=e(3400),w=e(52744),n=e(31147),T=e(20279);function x(f,s,t,o){t(o+".line.color"),t(o+".line.width",s.line.width),t(o+".line.dash",s.line.dash)}C.exports=function(f,s,t,o){function r(i,a){return v.coerce(f,s,T,i,a)}w(f,s,r,o)?(n(f,s,o,r,{x:!0}),r("xhoverformat"),r("yhoverformat"),r("line.width"),r("line.dash"),x(0,s,r,"increasing"),x(0,s,r,"decreasing"),r("text"),r("hovertext"),r("tickwidth"),o._requestRangeslider[s.xaxis]=!0,r("zorder")):s.visible=!1}},18720:function(C,A,e){"use strict";var v=e(54460),w=e(3400),n=e(93024),T=e(76308),x=e(3400).fillText,f=e(48164),s={increasing:f.INCREASING.SYMBOL,decreasing:f.DECREASING.SYMBOL};function t(i,a,u,l){var d,c,_=i.cd,p=i.xa,g=_[0].trace,m=_[0].t,b=g.type,y=b==="ohlc"?"l":"min",M=b==="ohlc"?"h":"max",h=m.bPos||0,E=function(z){return z.pos+h-a},k=m.bdPos||m.tickLen,D=m.wHover,P=Math.min(1,k/Math.abs(p.r2c(p.range[1])-p.r2c(p.range[0])));function L(z){var H=E(z);return n.inbox(H-D,H+D,d)}function O(z){var H=z[y],U=z[M];return H===U||n.inbox(H-u,U-u,d)}function N(z){return(L(z)+O(z))/2}d=i.maxHoverDistance-P,c=i.maxSpikeDistance-P;var V=n.getDistanceFunction(l,L,O,N);if(n.getClosest(_,V,i),i.index===!1)return null;var F=_[i.index];if(F.empty)return null;var j=g[F.dir],Z=j.line.color;return T.opacity(Z)&&j.line.width?i.color=Z:i.color=j.fillcolor,i.x0=p.c2p(F.pos+h-k,!0),i.x1=p.c2p(F.pos+h+k,!0),i.xLabelVal=F.orig_p!==void 0?F.orig_p:F.pos,i.spikeDistance=N(F)*c/d,i.xSpike=p.c2p(F.pos,!0),i}function o(i,a,u,l){var d=i.cd,c=i.ya,_=d[0].trace,p=d[0].t,g=[],m=t(i,a,u,l);if(!m)return[];var b=d[m.index].hi||_.hoverinfo,y=b.split("+");if(b!=="all"&&y.indexOf("y")===-1)return[];for(var M=["high","open","close","low"],h={},E=0;E<M.length;E++){var k,D=M[E],P=_[D][m.index],L=c.c2p(P,!0);P in h?(k=h[P]).yLabel+="<br>"+p.labels[D]+v.hoverLabelText(c,P,_.yhoverformat):((k=w.extendFlat({},m)).y0=k.y1=L,k.yLabelVal=P,k.yLabel=p.labels[D]+v.hoverLabelText(c,P,_.yhoverformat),k.name="",g.push(k),h[P]=k)}return g}function r(i,a,u,l){var d=i.cd,c=i.ya,_=d[0].trace,p=d[0].t,g=t(i,a,u,l);if(!g)return[];var m=d[g.index],b=g.index=m.i,y=m.dir;function M(O){return p.labels[O]+v.hoverLabelText(c,_[O][b],_.yhoverformat)}var h=m.hi||_.hoverinfo,E=h.split("+"),k=h==="all",D=k||E.indexOf("y")!==-1,P=k||E.indexOf("text")!==-1,L=D?[M("open"),M("high"),M("low"),M("close")+"  "+s[y]]:[];return P&&x(m,_,L),g.extraText=L.join("<br>"),g.y0=g.y1=c.c2p(m.yc,!0),[g]}C.exports={hoverPoints:function(i,a,u,l){return i.cd[0].trace.hoverlabel.split?o(i,a,u,l):r(i,a,u,l)},hoverSplit:o,hoverOnPoints:r}},65456:function(C,A,e){"use strict";C.exports={moduleType:"trace",name:"ohlc",basePlotModule:e(57952),categories:["cartesian","svg","showLegend"],meta:{},attributes:e(20279),supplyDefaults:e(23860),calc:e(42812).calc,plot:e(36664),style:e(14008),hoverPoints:e(18720).hoverPoints,selectPoints:e(97384)}},52744:function(C,A,e){"use strict";var v=e(24040),w=e(3400);C.exports=function(n,T,x,f){var s=x("x"),t=x("open"),o=x("high"),r=x("low"),i=x("close");if(x("hoverlabel.split"),v.getComponentMethod("calendars","handleTraceDefaults")(n,T,["x"],f),t&&o&&r&&i){var a=Math.min(t.length,o.length,r.length,i.length);return s&&(a=Math.min(a,w.minRowLength(s))),T._length=a,a}}},36664:function(C,A,e){"use strict";var v=e(33428),w=e(3400);C.exports=function(n,T,x,f){var s=T.yaxis,t=T.xaxis,o=!!t.rangebreaks;w.makeTraceGroups(f,x,"trace ohlc").each(function(r){var i=v.select(this),a=r[0],u=a.t;if(a.trace.visible!==!0||u.empty)i.remove();else{var l=u.tickLen,d=i.selectAll("path").data(w.identity);d.enter().append("path"),d.exit().remove(),d.attr("d",function(c){if(c.empty)return"M0,0Z";var _=t.c2p(c.pos-l,!0),p=t.c2p(c.pos+l,!0),g=o?(_+p)/2:t.c2p(c.pos,!0);return"M"+_+","+s.c2p(c.o,!0)+"H"+g+"M"+g+","+s.c2p(c.h,!0)+"V"+s.c2p(c.l,!0)+"M"+p+","+s.c2p(c.c,!0)+"H"+g})}})}},97384:function(C){"use strict";C.exports=function(A,e){var v,w=A.cd,n=A.xaxis,T=A.yaxis,x=[],f=w[0].t.bPos||0;if(e===!1)for(v=0;v<w.length;v++)w[v].selected=0;else for(v=0;v<w.length;v++){var s=w[v];e.contains([n.c2p(s.pos+f),T.c2p(s.yc)],null,s.i,A)?(x.push({pointNumber:s.i,x:n.c2d(s.pos),y:T.c2d(s.yc)}),s.selected=1):s.selected=0}return x}},14008:function(C,A,e){"use strict";var v=e(33428),w=e(43616),n=e(76308);C.exports=function(T,x,f){var s=f||v.select(T).selectAll("g.ohlclayer").selectAll("g.trace");s.style("opacity",function(t){return t[0].trace.opacity}),s.each(function(t){var o=t[0].trace;v.select(this).selectAll("path").each(function(r){if(!r.empty){var i=o[r.dir].line;v.select(this).style("fill","none").call(n.stroke,i.color).call(w.dashLine,i.dash,i.width).style("opacity",o.selectedpoints&&!r.selected?.3:1)}})})}},72140:function(C,A,e){"use strict";var v=e(92880).extendFlat,w=e(45464),n=e(25376),T=e(49084),x=e(21776).Ks,f=e(86968).u,s=v({editType:"calc"},T("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:x({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});C.exports={domain:f({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:v({},w.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:x({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:n({editType:"calc"}),tickfont:n({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:s,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legend:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},91800:function(C,A,e){"use strict";var v=e(84888)._M,w=e(60268),n="parcats";A.name=n,A.plot=function(T,x,f,s){var t=v(T.calcdata,n);if(t.length){var o=t[0];w(T,o,f,s)}},A.clean=function(T,x,f,s){var t=s._has&&s._has("parcats"),o=x._has&&x._has("parcats");t&&!o&&s._paperdiv.selectAll(".parcats").remove()}},69136:function(C,A,e){"use strict";var v=e(71688).wrap,w=e(94288).hasColorscale,n=e(47128),T=e(68944),x=e(43616),f=e(3400),s=e(38248);function t(i,a,u){i.valueInds.push(a),i.count+=u}function o(i,a,u){return{categoryInds:i,color:a,rawColor:u,valueInds:[],count:0}}function r(i,a,u){i.valueInds.push(a),i.count+=u}C.exports=function(i,a){var u=f.filterVisible(a.dimensions);if(u.length===0)return[];var l,d,c,_=u.map(function(U){var re;if(U.categoryorder==="trace")re=null;else if(U.categoryorder==="array")re=U.categoryarray;else{re=T(U.values);for(var ee=!0,J=0;J<re.length;J++)if(!s(re[J])){ee=!1;break}re.sort(ee?f.sorterAsc:void 0),U.categoryorder==="category descending"&&(re=re.reverse())}return function(Q,ne){ne=ne==null?[]:ne.map(function(xe){return xe});var K={},oe={},le=[];ne.forEach(function(xe,ve){K[xe]=0,oe[xe]=ve});for(var se=0;se<Q.length;se++){var de,be=Q[se];K[be]===void 0?(K[be]=1,de=ne.push(be)-1,oe[be]=de):(K[be]++,de=oe[be]),le.push(de)}var _e=ne.map(function(xe){return K[xe]});return{uniqueValues:ne,uniqueCounts:_e,inds:le}}(U.values,re)});l=f.isArrayOrTypedArray(a.counts)?a.counts:[a.counts],function(U){var re,ee=U.map(function(J){return J.displayindex});if(function(J){for(var Q=new Array(J.length),ne=0;ne<J.length;ne++){if(J[ne]<0||J[ne]>=J.length||Q[J[ne]]!==void 0)return!1;Q[J[ne]]=!0}return!0}(ee))for(re=0;re<U.length;re++)U[re]._displayindex=U[re].displayindex;else for(re=0;re<U.length;re++)U[re]._displayindex=re}(u),u.forEach(function(U,re){(function(ee,J){ee._categoryarray=J.uniqueValues,ee.ticktext===null||ee.ticktext===void 0?ee._ticktext=[]:ee._ticktext=ee.ticktext.slice();for(var Q=ee._ticktext.length;Q<J.uniqueValues.length;Q++)ee._ticktext.push(J.uniqueValues[Q])})(U,_[re])});var p,g=a.line;g?(w(a,"line")&&n(i,a,{vals:a.line.color,containerStr:"line",cLetter:"c"}),p=x.tryColorscale(g)):p=f.identity;var m,b,y,M,h,E=u[0].values.length,k={},D=_.map(function(U){return U.inds});for(c=0,m=0;m<E;m++){var P=[];for(b=0;b<D.length;b++)P.push(D[b][m]);d=l[m%l.length],c+=d;var L=(y=m,M=void 0,h=void 0,f.isArrayOrTypedArray(g.color)?h=M=g.color[y%g.color.length]:M=g.color,{color:p(M),rawColor:h}),O=P+"-"+L.rawColor;k[O]===void 0&&(k[O]=o(P,L.color,L.rawColor)),r(k[O],m,d)}var N,V=u.map(function(U,re){return function(ee,J,Q,ne,K){return{dimensionInd:ee,containerInd:J,displayInd:Q,dimensionLabel:ne,count:K,categories:[],dragX:null}}(re,U._index,U._displayindex,U.label,c)});for(m=0;m<E;m++)for(d=l[m%l.length],b=0;b<V.length;b++){var F=V[b].containerInd,j=_[b].inds[m],Z=V[b].categories;if(Z[j]===void 0){var z=a.dimensions[F]._categoryarray[j],H=a.dimensions[F]._ticktext[j];Z[j]={dimensionInd:b,categoryInd:N=j,categoryValue:z,displayInd:N,categoryLabel:H,valueInds:[],count:0,dragY:null}}t(Z[j],m,d)}return v(function(U,re,ee){var J=U.map(function(Q){return Q.categories.length}).reduce(function(Q,ne){return Math.max(Q,ne)});return{dimensions:U,paths:re,trace:void 0,maxCats:J,count:ee}}(V,k,c))}},76671:function(C,A,e){"use strict";var v=e(3400),w=e(94288).hasColorscale,n=e(27260),T=e(86968).Q,x=e(51272),f=e(72140),s=e(26284),t=e(38116).isTypedArraySpec;function o(r,i){function a(g,m){return v.coerce(r,i,f.dimensions,g,m)}var u=a("values"),l=a("visible");if(u&&u.length||(l=i.visible=!1),l){a("label"),a("displayindex",i._index);var d,c=r.categoryarray,_=v.isArrayOrTypedArray(c)&&c.length>0||t(c);_&&(d="array");var p=a("categoryorder",d);p==="array"?(a("categoryarray"),a("ticktext")):(delete r.categoryarray,delete r.ticktext),_||p!=="array"||(i.categoryorder="trace")}}C.exports=function(r,i,a,u){function l(g,m){return v.coerce(r,i,f,g,m)}var d=x(r,i,{name:"dimensions",handleItemDefaults:o}),c=function(g,m,b,y,M){M("line.shape"),M("line.hovertemplate");var h=M("line.color",y.colorway[0]);if(w(g,"line")&&v.isArrayOrTypedArray(h)){if(h.length)return M("line.colorscale"),n(g,m,y,M,{prefix:"line.",cLetter:"c"}),h.length;m.line.color=b}return 1/0}(r,i,a,u,l);T(i,u,l),Array.isArray(d)&&d.length||(i.visible=!1),s(i,d,"values",c),l("hoveron"),l("hovertemplate"),l("arrangement"),l("bundlecolors"),l("sortpaths"),l("counts");var _={weight:u.font.weight,style:u.font.style,variant:u.font.variant,family:u.font.family,size:Math.round(u.font.size),color:u.font.color};v.coerceFont(l,"labelfont",_);var p={weight:u.font.weight,style:u.font.style,variant:u.font.variant,family:u.font.family,size:Math.round(u.font.size/1.2),color:u.font.color};v.coerceFont(l,"tickfont",p)}},22020:function(C,A,e){"use strict";C.exports={attributes:e(72140),supplyDefaults:e(76671),calc:e(69136),plot:e(60268),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:e(91800),categories:["noOpacity"],meta:{}}},51036:function(C,A,e){"use strict";var v=e(33428),w=e(67756).Gz,n=e(36424),T=e(93024),x=e(3400),f=x.strTranslate,s=e(43616),t=e(49760),o=e(72736);function r(ee,J,Q,ne){var K=J._context.staticPlot,oe=ee.map(Z.bind(0,J,Q)),le=ne.selectAll("g.parcatslayer").data([null]);le.enter().append("g").attr("class","parcatslayer").style("pointer-events",K?"none":"all");var se=le.selectAll("g.trace.parcats").data(oe,i),de=se.enter().append("g").attr("class","trace parcats");se.attr("transform",function(ce){return f(ce.x,ce.y)}),de.append("g").attr("class","paths");var be=se.select("g.paths").selectAll("path.path").data(function(ce){return ce.paths},i);be.attr("fill",function(ce){return ce.model.color});var _e=be.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(ce){return ce.model.color}).attr("fill-opacity",0);g(_e),be.attr("d",function(ce){return ce.svgD}),_e.empty()||be.sort(u),be.exit().remove(),be.on("mouseover",l).on("mouseout",d).on("click",p),de.append("g").attr("class","dimensions");var xe=se.select("g.dimensions").selectAll("g.dimension").data(function(ce){return ce.dimensions},i);xe.enter().append("g").attr("class","dimension"),xe.attr("transform",function(ce){return f(ce.x,0)}),xe.exit().remove();var ve=xe.selectAll("g.category").data(function(ce){return ce.categories},i),ye=ve.enter().append("g").attr("class","category");ve.attr("transform",function(ce){return f(0,ce.y)}),ye.append("rect").attr("class","catrect").attr("pointer-events","none"),ve.select("rect.catrect").attr("fill","none").attr("width",function(ce){return ce.width}).attr("height",function(ce){return ce.height}),b(ye);var me=ve.selectAll("rect.bandrect").data(function(ce){return ce.bands},i);me.each(function(){x.raiseToTop(this)}),me.attr("fill",function(ce){return ce.color});var Me=me.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(ce){return ce.color}).attr("fill-opacity",0);me.attr("fill",function(ce){return ce.color}).attr("width",function(ce){return ce.width}).attr("height",function(ce){return ce.height}).attr("y",function(ce){return ce.y}).attr("cursor",function(ce){return ce.parcatsViewModel.arrangement==="fixed"?"default":ce.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),y(Me),me.exit().remove(),ye.append("text").attr("class","catlabel").attr("pointer-events","none");var Ae=J._fullLayout.paper_bgcolor;ve.select("text.catlabel").attr("text-anchor",function(ce){return a(ce)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",o.makeTextShadow(Ae)).style("fill","rgb(0, 0, 0)").attr("x",function(ce){return a(ce)?ce.width+5:-5}).attr("y",function(ce){return ce.height/2}).text(function(ce){return ce.model.categoryLabel}).each(function(ce){s.font(v.select(this),ce.parcatsViewModel.categorylabelfont),o.convertToTspans(v.select(this),J)}),ye.append("text").attr("class","dimlabel"),ve.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(ce){return ce.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(ce){return ce.width/2}).attr("y",-5).text(function(ce,ae){return ae===0?ce.parcatsViewModel.model.dimensions[ce.model.dimensionInd].dimensionLabel:null}).each(function(ce){s.font(v.select(this),ce.parcatsViewModel.labelfont)}),ve.selectAll("rect.bandrect").on("mouseover",D).on("mouseout",P),ve.exit().remove(),xe.call(v.behavior.drag().origin(function(ce){return{x:ce.x,y:0}}).on("dragstart",L).on("drag",O).on("dragend",N)),se.each(function(ce){ce.traceSelection=v.select(this),ce.pathSelection=v.select(this).selectAll("g.paths").selectAll("path.path"),ce.dimensionSelection=v.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),se.exit().remove()}function i(ee){return ee.key}function a(ee){var J=ee.parcatsViewModel.dimensions.length,Q=ee.parcatsViewModel.dimensions[J-1].model.dimensionInd;return ee.model.dimensionInd===Q}function u(ee,J){return ee.model.rawColor>J.model.rawColor?1:ee.model.rawColor<J.model.rawColor?-1:0}function l(ee){if(!ee.parcatsViewModel.dragDimension&&ee.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){x.raiseToTop(this),m(v.select(this));var J=c(ee),Q=_(ee);if(ee.parcatsViewModel.graphDiv.emit("plotly_hover",{points:J,event:v.event,constraints:Q}),ee.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var ne,K,oe,le=v.mouse(this)[0],se=ee.parcatsViewModel.graphDiv,de=ee.parcatsViewModel.trace,be=se._fullLayout,_e=be._paperdiv.node().getBoundingClientRect(),xe=ee.parcatsViewModel.graphDiv.getBoundingClientRect();for(oe=0;oe<ee.leftXs.length-1;oe++)if(ee.leftXs[oe]+ee.dimWidths[oe]-2<=le&&le<=ee.leftXs[oe+1]+2){var ve=ee.parcatsViewModel.dimensions[oe],ye=ee.parcatsViewModel.dimensions[oe+1];ne=(ve.x+ve.width+ye.x)/2,K=(ee.topYs[oe]+ee.topYs[oe+1]+ee.height)/2;break}var me=ee.parcatsViewModel.x+ne,Me=ee.parcatsViewModel.y+K,Ae=t.mostReadable(ee.model.color,["black","white"]),ce=ee.model.count,ae=ce/ee.parcatsViewModel.model.count,pe={countLabel:ce,probabilityLabel:ae.toFixed(3)},De=[];ee.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&De.push(["Count:",pe.countLabel].join(" ")),ee.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&De.push(["P:",pe.probabilityLabel].join(" "));var ke=De.join("<br>"),Ee=v.mouse(se)[0];T.loneHover({trace:de,x:me-_e.left+xe.left,y:Me-_e.top+xe.top,text:ke,color:ee.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:Ae,idealAlign:Ee<me?"right":"left",hovertemplate:(de.line||{}).hovertemplate,hovertemplateLabels:pe,eventData:[{data:de._input,fullData:de,count:ce,probability:ae}]},{container:be._hoverlayer.node(),outerContainer:be._paper.node(),gd:se})}}}function d(ee){if(!ee.parcatsViewModel.dragDimension&&(g(v.select(this)),T.loneUnhover(ee.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),ee.parcatsViewModel.pathSelection.sort(u),ee.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var J=c(ee),Q=_(ee);ee.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:J,event:v.event,constraints:Q})}}function c(ee){for(var J=[],Q=V(ee.parcatsViewModel),ne=0;ne<ee.model.valueInds.length;ne++){var K=ee.model.valueInds[ne];J.push({curveNumber:Q,pointNumber:K})}return J}function _(ee){for(var J={},Q=ee.parcatsViewModel.model.dimensions,ne=0;ne<Q.length;ne++){var K=Q[ne],oe=K.categories[ee.model.categoryInds[ne]];J[K.containerInd]=oe.categoryValue}return ee.model.rawColor!==void 0&&(J.color=ee.model.rawColor),J}function p(ee){if(ee.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var J=c(ee),Q=_(ee);ee.parcatsViewModel.graphDiv.emit("plotly_click",{points:J,event:v.event,constraints:Q})}}function g(ee){ee.attr("fill",function(J){return J.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function m(ee){ee.attr("fill-opacity",.8).attr("stroke",function(J){return t.mostReadable(J.model.color,["black","white"])}).attr("stroke-width",.3)}function b(ee){ee.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function y(ee){ee.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function M(ee){var J=ee.parcatsViewModel.pathSelection,Q=ee.categoryViewModel.model.dimensionInd,ne=ee.categoryViewModel.model.categoryInd;return J.filter(function(K){return K.model.categoryInds[Q]===ne&&K.model.color===ee.color})}function h(ee,J,Q){var ne=v.select(ee).datum(),K=ne.categoryViewModel.model,oe=ne.parcatsViewModel.graphDiv,le=v.select(ee.parentNode).selectAll("rect.bandrect"),se=[];le.each(function(be){M(be).each(function(_e){Array.prototype.push.apply(se,c(_e))})});var de={};de[K.dimensionInd]=K.categoryValue,oe.emit(J,{points:se,event:Q,constraints:de})}function E(ee,J,Q){var ne=v.select(ee).datum(),K=ne.categoryViewModel.model,oe=ne.parcatsViewModel.graphDiv,le=M(ne),se=[];le.each(function(be){Array.prototype.push.apply(se,c(be))});var de={};de[K.dimensionInd]=K.categoryValue,ne.rawColor!==void 0&&(de.color=ne.rawColor),oe.emit(J,{points:se,event:Q,constraints:de})}function k(ee,J,Q){ee._fullLayout._calcInverseTransform(ee);var ne,K,oe=ee._fullLayout._invScaleX,le=ee._fullLayout._invScaleY,se=v.select(Q.parentNode).select("rect.catrect"),de=se.node().getBoundingClientRect(),be=se.datum(),_e=be.parcatsViewModel,xe=_e.model.dimensions[be.model.dimensionInd],ve=_e.trace,ye=de.top+de.height/2;_e.dimensions.length>1&&xe.displayInd===_e.dimensions.length-1?(ne=de.left,K="left"):(ne=de.left+de.width,K="right");var me=be.model.count,Me=be.model.categoryLabel,Ae=me/be.parcatsViewModel.model.count,ce={countLabel:me,categoryLabel:Me,probabilityLabel:Ae.toFixed(3)},ae=[];be.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&ae.push(["Count:",ce.countLabel].join(" ")),be.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&ae.push(["P("+ce.categoryLabel+"):",ce.probabilityLabel].join(" "));var pe=ae.join("<br>");return{trace:ve,x:oe*(ne-J.left),y:le*(ye-J.top),text:pe,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:K,hovertemplate:ve.hovertemplate,hovertemplateLabels:ce,eventData:[{data:ve._input,fullData:ve,count:me,category:Me,probability:Ae}]}}function D(ee){if(!ee.parcatsViewModel.dragDimension&&ee.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){if(v.mouse(this)[1]<-1)return;var J,Q=ee.parcatsViewModel.graphDiv,ne=Q._fullLayout,K=ne._paperdiv.node().getBoundingClientRect(),oe=ee.parcatsViewModel.hoveron,le=this;oe==="color"?(function(se){var de=v.select(se).datum(),be=M(de);m(be),be.each(function(){x.raiseToTop(this)}),v.select(se.parentNode).selectAll("rect.bandrect").filter(function(_e){return _e.color===de.color}).each(function(){x.raiseToTop(this),v.select(this).attr("stroke","black").attr("stroke-width",1.5)})}(le),E(le,"plotly_hover",v.event)):(function(se){v.select(se.parentNode).selectAll("rect.bandrect").each(function(de){var be=M(de);m(be),be.each(function(){x.raiseToTop(this)})}),v.select(se.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(le),h(le,"plotly_hover",v.event)),ee.parcatsViewModel.hoverinfoItems.indexOf("none")===-1&&(oe==="category"?J=k(Q,K,le):oe==="color"?J=function(se,de,be){se._fullLayout._calcInverseTransform(se);var _e,xe,ve=se._fullLayout._invScaleX,ye=se._fullLayout._invScaleY,me=be.getBoundingClientRect(),Me=v.select(be).datum(),Ae=Me.categoryViewModel,ce=Ae.parcatsViewModel,ae=ce.model.dimensions[Ae.model.dimensionInd],pe=ce.trace,De=me.y+me.height/2;ce.dimensions.length>1&&ae.displayInd===ce.dimensions.length-1?(_e=me.left,xe="left"):(_e=me.left+me.width,xe="right");var ke=Ae.model.categoryLabel,Ee=Me.parcatsViewModel.model.count,Ie=0;Me.categoryViewModel.bands.forEach(function(Xe){Xe.color===Me.color&&(Ie+=Xe.count)});var Re=Ae.model.count,Ne=0;ce.pathSelection.each(function(Xe){Xe.model.color===Me.color&&(Ne+=Xe.model.count)});var ge=Ie/Ee,we=Ie/Ne,Ce=Ie/Re,ze={countLabel:Ie,categoryLabel:ke,probabilityLabel:ge.toFixed(3)},Pe=[];Ae.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Pe.push(["Count:",ze.countLabel].join(" ")),Ae.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(Pe.push("P(color \u2229 "+ke+"): "+ze.probabilityLabel),Pe.push("P("+ke+" | color): "+we.toFixed(3)),Pe.push("P(color | "+ke+"): "+Ce.toFixed(3)));var Ue=Pe.join("<br>"),Ge=t.mostReadable(Me.color,["black","white"]);return{trace:pe,x:ve*(_e-de.left),y:ye*(De-de.top),text:Ue,color:Me.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:Ge,fontSize:10,idealAlign:xe,hovertemplate:pe.hovertemplate,hovertemplateLabels:ze,eventData:[{data:pe._input,fullData:pe,category:ke,count:Ee,probability:ge,categorycount:Re,colorcount:Ne,bandcolorcount:Ie}]}}(Q,K,le):oe==="dimension"&&(J=function(se,de,be){var _e=[];return v.select(be.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){_e.push(k(se,de,this))}),_e}(Q,K,le)),J&&T.loneHover(J,{container:ne._hoverlayer.node(),outerContainer:ne._paper.node(),gd:Q}))}}function P(ee){var J=ee.parcatsViewModel;J.dragDimension||(g(J.pathSelection),b(J.dimensionSelection.selectAll("g.category")),y(J.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),T.loneUnhover(J.graphDiv._fullLayout._hoverlayer.node()),J.pathSelection.sort(u),J.hoverinfoItems.indexOf("skip")!==-1)||(ee.parcatsViewModel.hoveron==="color"?E(this,"plotly_unhover",v.event):h(this,"plotly_unhover",v.event))}function L(ee){ee.parcatsViewModel.arrangement!=="fixed"&&(ee.dragDimensionDisplayInd=ee.model.displayInd,ee.initialDragDimensionDisplayInds=ee.parcatsViewModel.model.dimensions.map(function(J){return J.displayInd}),ee.dragHasMoved=!1,ee.dragCategoryDisplayInd=null,v.select(this).selectAll("g.category").select("rect.catrect").each(function(J){var Q=v.mouse(this)[0],ne=v.mouse(this)[1];-2<=Q&&Q<=J.width+2&&-2<=ne&&ne<=J.height+2&&(ee.dragCategoryDisplayInd=J.model.displayInd,ee.initialDragCategoryDisplayInds=ee.model.categories.map(function(K){return K.displayInd}),J.model.dragY=J.y,x.raiseToTop(this.parentNode),v.select(this.parentNode).selectAll("rect.bandrect").each(function(K){K.y<ne&&ne<=K.y+K.height&&(ee.potentialClickBand=this)}))}),ee.parcatsViewModel.dragDimension=ee,T.loneUnhover(ee.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function O(ee){if(ee.parcatsViewModel.arrangement!=="fixed"&&(ee.dragHasMoved=!0,ee.dragDimensionDisplayInd!==null)){var J=ee.dragDimensionDisplayInd,Q=J-1,ne=J+1,K=ee.parcatsViewModel.dimensions[J];if(ee.dragCategoryDisplayInd!==null){var oe=K.categories[ee.dragCategoryDisplayInd];oe.model.dragY+=v.event.dy;var le=oe.model.dragY,se=oe.model.displayInd,de=K.categories,be=de[se-1],_e=de[se+1];be!==void 0&&le<be.y+be.height/2&&(oe.model.displayInd=be.model.displayInd,be.model.displayInd=se),_e!==void 0&&le+oe.height>_e.y+_e.height/2&&(oe.model.displayInd=_e.model.displayInd,_e.model.displayInd=se),ee.dragCategoryDisplayInd=oe.model.displayInd}if(ee.dragCategoryDisplayInd===null||ee.parcatsViewModel.arrangement==="freeform"){K.model.dragX=v.event.x;var xe=ee.parcatsViewModel.dimensions[Q],ve=ee.parcatsViewModel.dimensions[ne];xe!==void 0&&K.model.dragX<xe.x+xe.width&&(K.model.displayInd=xe.model.displayInd,xe.model.displayInd=J),ve!==void 0&&K.model.dragX+K.width>ve.x&&(K.model.displayInd=ve.model.displayInd,ve.model.displayInd=ee.dragDimensionDisplayInd),ee.dragDimensionDisplayInd=K.model.displayInd}U(ee.parcatsViewModel),H(ee.parcatsViewModel),j(ee.parcatsViewModel),F(ee.parcatsViewModel)}}function N(ee){if(ee.parcatsViewModel.arrangement!=="fixed"&&ee.dragDimensionDisplayInd!==null){v.select(this).selectAll("text").attr("font-weight","normal");var J={},Q=V(ee.parcatsViewModel),ne=ee.parcatsViewModel.model.dimensions.map(function(_e){return _e.displayInd}),K=ee.initialDragDimensionDisplayInds.some(function(_e,xe){return _e!==ne[xe]});K&&ne.forEach(function(_e,xe){var ve=ee.parcatsViewModel.model.dimensions[xe].containerInd;J["dimensions["+ve+"].displayindex"]=_e});var oe=!1;if(ee.dragCategoryDisplayInd!==null){var le=ee.model.categories.map(function(_e){return _e.displayInd});if(oe=ee.initialDragCategoryDisplayInds.some(function(_e,xe){return _e!==le[xe]})){var se=ee.model.categories.slice().sort(function(_e,xe){return _e.displayInd-xe.displayInd}),de=se.map(function(_e){return _e.categoryValue}),be=se.map(function(_e){return _e.categoryLabel});J["dimensions["+ee.model.containerInd+"].categoryarray"]=[de],J["dimensions["+ee.model.containerInd+"].ticktext"]=[be],J["dimensions["+ee.model.containerInd+"].categoryorder"]="array"}}ee.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!ee.dragHasMoved&&ee.potentialClickBand&&(ee.parcatsViewModel.hoveron==="color"?E(ee.potentialClickBand,"plotly_click",v.event.sourceEvent):h(ee.potentialClickBand,"plotly_click",v.event.sourceEvent)),ee.model.dragX=null,ee.dragCategoryDisplayInd!==null&&(ee.parcatsViewModel.dimensions[ee.dragDimensionDisplayInd].categories[ee.dragCategoryDisplayInd].model.dragY=null,ee.dragCategoryDisplayInd=null),ee.dragDimensionDisplayInd=null,ee.parcatsViewModel.dragDimension=null,ee.dragHasMoved=null,ee.potentialClickBand=null,U(ee.parcatsViewModel),H(ee.parcatsViewModel),v.transition().duration(300).ease("cubic-in-out").each(function(){j(ee.parcatsViewModel,!0),F(ee.parcatsViewModel,!0)}).each("end",function(){(K||oe)&&n.restyle(ee.parcatsViewModel.graphDiv,J,[Q])})}}function V(ee){for(var J,Q=ee.graphDiv._fullData,ne=0;ne<Q.length;ne++)if(ee.key===Q[ne].uid){J=ne;break}return J}function F(ee,J){var Q;J===void 0&&(J=!1),ee.pathSelection.data(function(ne){return ne.paths},i),(Q=ee.pathSelection,J?Q.transition():Q).attr("d",function(ne){return ne.svgD})}function j(ee,J){function Q(le){return J?le.transition():le}J===void 0&&(J=!1),ee.dimensionSelection.data(function(le){return le.dimensions},i);var ne=ee.dimensionSelection.selectAll("g.category").data(function(le){return le.categories},i);Q(ee.dimensionSelection).attr("transform",function(le){return f(le.x,0)}),Q(ne).attr("transform",function(le){return f(0,le.y)}),ne.select(".dimlabel").text(function(le,se){return se===0?le.parcatsViewModel.model.dimensions[le.model.dimensionInd].dimensionLabel:null}),ne.select(".catlabel").attr("text-anchor",function(le){return a(le)?"start":"end"}).attr("x",function(le){return a(le)?le.width+5:-5}).each(function(le){var se,de;a(le)?(se=le.width+5,de="start"):(se=-5,de="end"),v.select(this).selectAll("tspan").attr("x",se).attr("text-anchor",de)});var K=ne.selectAll("rect.bandrect").data(function(le){return le.bands},i),oe=K.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(le){return le.color}).attr("fill-opacity",0);K.attr("fill",function(le){return le.color}).attr("width",function(le){return le.width}).attr("height",function(le){return le.height}).attr("y",function(le){return le.y}),y(oe),K.each(function(){x.raiseToTop(this)}),K.exit().remove()}function Z(ee,J,Q){var ne,K=Q[0],oe=J.margin||{l:80,r:80,t:100,b:80},le=K.trace,se=le.domain,de=J.width,be=J.height,_e=Math.floor(de*(se.x[1]-se.x[0])),xe=Math.floor(be*(se.y[1]-se.y[0])),ve=se.x[0]*de+oe.l,ye=J.height-se.y[1]*J.height+oe.t,me=le.line.shape;ne=le.hoverinfo==="all"?["count","probability"]:(le.hoverinfo||"").split("+");var Me={trace:le,key:le.uid,model:K,x:ve,y:ye,width:_e,height:xe,hoveron:le.hoveron,hoverinfoItems:ne,arrangement:le.arrangement,bundlecolors:le.bundlecolors,sortpaths:le.sortpaths,labelfont:le.labelfont,categorylabelfont:le.tickfont,pathShape:me,dragDimension:null,margin:oe,paths:[],dimensions:[],graphDiv:ee,traceSelection:null,pathSelection:null,dimensionSelection:null};return K.dimensions&&(U(Me),H(Me)),Me}function z(ee,J,Q,ne,K){var oe,le,se=[],de=[];for(le=0;le<Q.length-1;le++)oe=w(Q[le]+ee[le],ee[le+1]),se.push(oe(K)),de.push(oe(1-K));var be="M "+ee[0]+","+J[0];for(be+="l"+Q[0]+",0 ",le=1;le<Q.length;le++)be+="C"+se[le-1]+","+J[le-1]+" "+de[le-1]+","+J[le]+" "+ee[le]+","+J[le],be+="l"+Q[le]+",0 ";for(be+="l0,"+ne+" ",be+="l -"+Q[Q.length-1]+",0 ",le=Q.length-2;le>=0;le--)be+="C"+de[le]+","+(J[le+1]+ne)+" "+se[le]+","+(J[le]+ne)+" "+(ee[le]+Q[le])+","+(J[le]+ne),be+="l-"+Q[le]+",0 ";return be+"Z"}function H(ee){var J=ee.dimensions,Q=ee.model,ne=J.map(function(ze){return ze.categories.map(function(Pe){return Pe.y})}),K=ee.model.dimensions.map(function(ze){return ze.categories.map(function(Pe){return Pe.displayInd})}),oe=ee.model.dimensions.map(function(ze){return ze.displayInd}),le=ee.dimensions.map(function(ze){return ze.model.dimensionInd}),se=J.map(function(ze){return ze.x}),de=J.map(function(ze){return ze.width}),be=[];for(var _e in Q.paths)Q.paths.hasOwnProperty(_e)&&be.push(Q.paths[_e]);function xe(ze){var Pe=ze.categoryInds.map(function(Ue,Ge){return K[Ge][Ue]});return le.map(function(Ue){return Pe[Ue]})}be.sort(function(ze,Pe){var Ue=xe(ze),Ge=xe(Pe);return ee.sortpaths==="backward"&&(Ue.reverse(),Ge.reverse()),Ue.push(ze.valueInds[0]),Ge.push(Pe.valueInds[0]),ee.bundlecolors&&(Ue.unshift(ze.rawColor),Ge.unshift(Pe.rawColor)),Ue<Ge?-1:Ue>Ge?1:0});for(var ve=new Array(be.length),ye=J[0].model.count,me=J[0].categories.map(function(ze){return ze.height}).reduce(function(ze,Pe){return ze+Pe}),Me=0;Me<be.length;Me++){var Ae,ce=be[Me];Ae=ye>0?me*(ce.count/ye):0;for(var ae,pe=new Array(ne.length),De=0;De<ce.categoryInds.length;De++){var ke=ce.categoryInds[De],Ee=K[De][ke],Ie=oe[De];pe[Ie]=ne[Ie][Ee],ne[Ie][Ee]+=Ae;var Re=ee.dimensions[Ie].categories[Ee],Ne=Re.bands.length,ge=Re.bands[Ne-1];if(ge===void 0||ce.rawColor!==ge.rawColor){var we=ge===void 0?0:ge.y+ge.height;Re.bands.push({key:we,color:ce.color,rawColor:ce.rawColor,height:Ae,width:Re.width,count:ce.count,y:we,categoryViewModel:Re,parcatsViewModel:ee})}else{var Ce=Re.bands[Ne-1];Ce.height+=Ae,Ce.count+=ce.count}}ae=ee.pathShape==="hspline"?z(se,pe,de,Ae,.5):z(se,pe,de,Ae,0),ve[Me]={key:ce.valueInds[0],model:ce,height:Ae,leftXs:se,topYs:pe,dimWidths:de,svgD:ae,parcatsViewModel:ee}}ee.paths=ve}function U(ee){var J=ee.model.dimensions.map(function(le){return{displayInd:le.displayInd,dimensionInd:le.dimensionInd}});J.sort(function(le,se){return le.displayInd-se.displayInd});var Q=[];for(var ne in J){var K=J[ne].dimensionInd,oe=ee.model.dimensions[K];Q.push(re(ee,oe))}ee.dimensions=Q}function re(ee,J){var Q,ne=ee.model.dimensions.length,K=J.displayInd;Q=40+(ne>1?(ee.width-80-16)/(ne-1):0)*K;var oe,le,se,de,be,_e=[],xe=ee.model.maxCats,ve=J.categories.length,ye=J.count,me=ee.height-8*(xe-1),Me=8*(xe-ve)/2,Ae=J.categories.map(function(ce){return{displayInd:ce.displayInd,categoryInd:ce.categoryInd}});for(Ae.sort(function(ce,ae){return ce.displayInd-ae.displayInd}),be=0;be<ve;be++)de=Ae[be].categoryInd,le=J.categories[de],oe=ye>0?le.count/ye*me:0,se={key:le.valueInds[0],model:le,width:16,height:oe,y:le.dragY!==null?le.dragY:Me,bands:[],parcatsViewModel:ee},Me=Me+oe+8,_e.push(se);return{key:J.dimensionInd,x:J.dragX!==null?J.dragX:Q,y:0,width:16,model:J,categories:_e,parcatsViewModel:ee,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}C.exports=function(ee,J,Q,ne){r(Q,ee,ne,J)}},60268:function(C,A,e){"use strict";var v=e(51036);C.exports=function(w,n,T,x){var f=w._fullLayout,s=f._paper,t=f._size;v(w,s,n,{width:t.w,height:t.h,margin:{t:t.t,r:t.r,b:t.b,l:t.l}},T,x)}},82296:function(C,A,e){"use strict";var v=e(49084),w=e(94724),n=e(25376),T=e(86968).u,x=e(92880).extendFlat,f=e(31780).templatedArray;C.exports={domain:T({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:n({editType:"plot"}),tickfont:n({editType:"plot"}),rangefont:n({editType:"plot"}),dimensions:f("dimension",{label:{valType:"string",editType:"plot"},tickvals:x({},w.tickvals,{editType:"plot"}),ticktext:x({},w.ticktext,{editType:"plot"}),tickformat:x({},w.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:x({editType:"calc"},v("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},71864:function(C,A,e){"use strict";var v=e(30140),w=e(33428),n=e(71688).keyFun,T=e(71688).repeat,x=e(3400).sorterAsc,f=e(3400).strTranslate,s=v.bar.snapRatio;function t(k,D){return k*(1-s)+D*s}var o=v.bar.snapClose;function r(k,D){return k*(1-o)+D*o}function i(k,D,P,L){if(function(re,ee){for(var J=0;J<ee.length;J++)if(re>=ee[J][0]&&re<=ee[J][1])return!0;return!1}(P,L))return P;var O=k?-1:1,N=0,V=D.length-1;if(O<0){var F=N;N=V,V=F}for(var j=D[N],Z=j,z=N;O*z<O*V;z+=O){var H=z+O,U=D[H];if(O*P<O*r(j,U))return t(j,Z);if(O*P<O*U||H===V)return t(U,j);Z=j,j=U}}function a(k){k.attr("x",-v.bar.captureWidth/2).attr("width",v.bar.captureWidth)}function u(k){k.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function l(k){if(!k.brush.filterSpecified)return"0,"+k.height;for(var D,P,L,O=d(k.brush.filter.getConsolidated(),k.height),N=[0],V=O.length?O[0][0]:null,F=0;F<O.length;F++)P=(D=O[F])[1]-D[0],N.push(V),N.push(P),(L=F+1)<O.length&&(V=O[L][0]-D[1]);return N.push(k.height),N}function d(k,D){return k.map(function(P){return P.map(function(L){return Math.max(0,L*D)}).sort(x)})}function c(){w.select(document.body).style("cursor",null)}function _(k){k.attr("stroke-dasharray",l)}function p(k,D){var P=w.select(k).selectAll(".highlight, .highlight-shadow");_(D?P.transition().duration(v.bar.snapDuration).each("end",D):P)}function g(k,D){var P,L=k.brush,O=NaN,N={};if(L.filterSpecified){var V=k.height,F=L.filter.getConsolidated(),j=d(F,V),Z=NaN,z=NaN,H=NaN;for(P=0;P<=j.length;P++){var U=j[P];if(U&&U[0]<=D&&D<=U[1]){Z=P;break}if(z=P?P-1:NaN,U&&U[0]>D){H=P;break}}if(O=Z,isNaN(O)&&(O=isNaN(z)||isNaN(H)?isNaN(z)?H:z:D-j[z][1]<j[H][0]-D?z:H),!isNaN(O)){var re=j[O],ee=function(K,oe){var le=v.bar.handleHeight;if(!(oe>K[1]+le||oe<K[0]-le))return oe>=.9*K[1]+.1*K[0]?"n":oe<=.9*K[0]+.1*K[1]?"s":"ns"}(re,D);ee&&(N.interval=F[O],N.intervalPix=re,N.region=ee)}}if(k.ordinal&&!N.region){var J=k.unitTickvals,Q=k.unitToPaddedPx.invert(D);for(P=0;P<J.length;P++){var ne=[.25*J[Math.max(P-1,0)]+.75*J[P],.25*J[Math.min(P+1,J.length-1)]+.75*J[P]];if(Q>=ne[0]&&Q<=ne[1]){N.clickableOrdinalRange=ne;break}}}return N}function m(k,D){w.event.sourceEvent.stopPropagation();var P=D.height-w.mouse(k)[1]-2*v.verticalPadding,L=D.brush.svgBrush;L.wasDragged=!0,L._dragging=!0,L.grabbingBar?L.newExtent=[P-L.grabPoint,P+L.barLength-L.grabPoint].map(D.unitToPaddedPx.invert):L.newExtent=[L.startExtent,D.unitToPaddedPx.invert(P)].sort(x),D.brush.filterSpecified=!0,L.extent=L.stayingIntervals.concat([L.newExtent]),L.brushCallback(D),p(k.parentNode)}function b(k,D){var P=g(D,D.height-w.mouse(k)[1]-2*v.verticalPadding),L="crosshair";P.clickableOrdinalRange?L="pointer":P.region&&(L=P.region+"-resize"),w.select(document.body).style("cursor",L)}function y(k){k.on("mousemove",function(D){w.event.preventDefault(),D.parent.inBrushDrag||b(this,D)}).on("mouseleave",function(D){D.parent.inBrushDrag||c()}).call(w.behavior.drag().on("dragstart",function(D){(function(P,L){w.event.sourceEvent.stopPropagation();var O=L.height-w.mouse(P)[1]-2*v.verticalPadding,N=L.unitToPaddedPx.invert(O),V=L.brush,F=g(L,O),j=F.interval,Z=V.svgBrush;if(Z.wasDragged=!1,Z.grabbingBar=F.region==="ns",Z.grabbingBar){var z=j.map(L.unitToPaddedPx);Z.grabPoint=O-z[0]-v.verticalPadding,Z.barLength=z[1]-z[0]}Z.clickableOrdinalRange=F.clickableOrdinalRange,Z.stayingIntervals=L.multiselect&&V.filterSpecified?V.filter.getConsolidated():[],j&&(Z.stayingIntervals=Z.stayingIntervals.filter(function(H){return H[0]!==j[0]&&H[1]!==j[1]})),Z.startExtent=F.region?j[F.region==="s"?1:0]:N,L.parent.inBrushDrag=!0,Z.brushStartCallback()})(this,D)}).on("drag",function(D){m(this,D)}).on("dragend",function(D){(function(P,L){var O=L.brush,N=O.filter,V=O.svgBrush;V._dragging||(b(P,L),m(P,L),L.brush.svgBrush.wasDragged=!1),V._dragging=!1,w.event.sourceEvent.stopPropagation();var F=V.grabbingBar;if(V.grabbingBar=!1,V.grabLocation=void 0,L.parent.inBrushDrag=!1,c(),!V.wasDragged)return V.wasDragged=void 0,V.clickableOrdinalRange?O.filterSpecified&&L.multiselect?V.extent.push(V.clickableOrdinalRange):(V.extent=[V.clickableOrdinalRange],O.filterSpecified=!0):F?(V.extent=V.stayingIntervals,V.extent.length===0&&h(O)):h(O),V.brushCallback(L),p(P.parentNode),void V.brushEndCallback(O.filterSpecified?N.getConsolidated():[]);var j=function(){N.set(N.getConsolidated())};if(L.ordinal){var Z=L.unitTickvals;Z[Z.length-1]<Z[0]&&Z.reverse(),V.newExtent=[i(0,Z,V.newExtent[0],V.stayingIntervals),i(1,Z,V.newExtent[1],V.stayingIntervals)];var z=V.newExtent[1]>V.newExtent[0];V.extent=V.stayingIntervals.concat(z?[V.newExtent]:[]),V.extent.length||h(O),V.brushCallback(L),z?p(P.parentNode,j):(j(),p(P.parentNode))}else j();V.brushEndCallback(O.filterSpecified?N.getConsolidated():[])})(this,D)}))}function M(k,D){return k[0]-D[0]}function h(k){k.filterSpecified=!1,k.svgBrush.extent=[[-1/0,1/0]]}function E(k){for(var D,P=k.slice(),L=[],O=P.shift();O;){for(D=O.slice();(O=P.shift())&&O[0]<=D[1];)D[1]=Math.max(D[1],O[1]);L.push(D)}return L.length===1&&L[0][0]>L[0][1]&&(L=[]),L}C.exports={makeBrush:function(k,D,P,L,O,N){var V,F=function(){var j,Z,z=[];return{set:function(H){(z=H.map(function(U){return U.slice().sort(x)}).sort(M)).length===1&&z[0][0]===-1/0&&z[0][1]===1/0&&(z=[[0,-1]]),j=E(z),Z=z.reduce(function(U,re){return[Math.min(U[0],re[0]),Math.max(U[1],re[1])]},[1/0,-1/0])},get:function(){return z.slice()},getConsolidated:function(){return j},getBounds:function(){return Z}}}();return F.set(P),{filter:F,filterSpecified:D,svgBrush:{extent:[],brushStartCallback:L,brushCallback:(V=O,function(j){var Z=j.brush,z=function(U){return U.svgBrush.extent.map(function(re){return re.slice()})}(Z),H=z.slice();Z.filter.set(H),V()}),brushEndCallback:N}}},ensureAxisBrush:function(k,D,P){var L=k.selectAll("."+v.cn.axisBrush).data(T,n);L.enter().append("g").classed(v.cn.axisBrush,!0),function(O,N,V){var F=V._context.staticPlot,j=O.selectAll(".background").data(T);j.enter().append("rect").classed("background",!0).call(a).call(u).style("pointer-events",F?"none":"auto").attr("transform",f(0,v.verticalPadding)),j.call(y).attr("height",function(H){return H.height-v.verticalPadding});var Z=O.selectAll(".highlight-shadow").data(T);Z.enter().append("line").classed("highlight-shadow",!0).attr("x",-v.bar.width/2).attr("stroke-width",v.bar.width+v.bar.strokeWidth).attr("stroke",N).attr("opacity",v.bar.strokeOpacity).attr("stroke-linecap","butt"),Z.attr("y1",function(H){return H.height}).call(_);var z=O.selectAll(".highlight").data(T);z.enter().append("line").classed("highlight",!0).attr("x",-v.bar.width/2).attr("stroke-width",v.bar.width-v.bar.strokeWidth).attr("stroke",v.bar.fillColor).attr("opacity",v.bar.fillOpacity).attr("stroke-linecap","butt"),z.attr("y1",function(H){return H.height}).call(_)}(L,D,P)},cleanRanges:function(k,D){if(Array.isArray(k[0])?(k=k.map(function(L){return L.sort(x)}),k=D.multiselect?E(k.sort(M)):[k[0]]):k=[k.sort(x)],D.tickvals){var P=D.tickvals.slice().sort(x);if(!(k=k.map(function(L){var O=[i(0,P,L[0],[]),i(1,P,L[1],[])];if(O[1]>O[0])return O}).filter(function(L){return L})).length)return}return k.length>1?k:k[0]}}},61664:function(C,A,e){"use strict";C.exports={attributes:e(82296),supplyDefaults:e(60664),calc:e(95044),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:e(19976),categories:["gl","regl","noOpacity","noHover"],meta:{}}},19976:function(C,A,e){"use strict";var v=e(33428),w=e(84888)._M,n=e(24196),T=e(9616);A.name="parcoords",A.plot=function(x){var f=w(x.calcdata,"parcoords")[0];f.length&&n(x,f)},A.clean=function(x,f,s,t){var o=t._has&&t._has("parcoords"),r=f._has&&f._has("parcoords");o&&!r&&(t._paperdiv.selectAll(".parcoords").remove(),t._glimages.selectAll("*").remove())},A.toSVG=function(x){var f=x._fullLayout._glimages,s=v.select(x).selectAll(".svg-container");s.filter(function(t,o){return o===s.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var t=this,o=t.toDataURL("image/png");f.append("svg:image").attr({xmlns:T.svg,"xlink:href":o,preserveAspectRatio:"none",x:0,y:0,width:t.style.width,height:t.style.height})}),window.setTimeout(function(){v.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},95044:function(C,A,e){"use strict";var v=e(3400).isArrayOrTypedArray,w=e(8932),n=e(71688).wrap;C.exports=function(T,x){var f,s;return w.hasColorscale(x,"line")&&v(x.line.color)?(f=x.line.color,s=w.extractOpts(x.line).colorscale,w.calc(T,x,{vals:f,containerStr:"line",cLetter:"c"})):(f=function(t){for(var o=new Array(t),r=0;r<t;r++)o[r]=.5;return o}(x._length),s=[[0,x.line.color],[1,x.line.color]]),n({lineColor:f,cscale:s})}},30140:function(C){"use strict";C.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},60664:function(C,A,e){"use strict";var v=e(3400),w=e(94288).hasColorscale,n=e(27260),T=e(86968).Q,x=e(51272),f=e(54460),s=e(82296),t=e(71864),o=e(30140).maxDimensionCount,r=e(26284);function i(a,u,l,d){function c(b,y){return v.coerce(a,u,s.dimensions,b,y)}var _=c("values"),p=c("visible");if(_&&_.length||(p=u.visible=!1),p){c("label"),c("tickvals"),c("ticktext"),c("tickformat");var g=c("range");u._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:g},f.setConvert(u._ax,d.layout),c("multiselect");var m=c("constraintrange");m&&(u.constraintrange=t.cleanRanges(m,u))}}C.exports=function(a,u,l,d){function c(b,y){return v.coerce(a,u,s,b,y)}var _=a.dimensions;Array.isArray(_)&&_.length>o&&(v.log("parcoords traces support up to "+o+" dimensions at the moment"),_.splice(o));var p=x(a,u,{name:"dimensions",layout:d,handleItemDefaults:i}),g=function(b,y,M,h,E){var k=E("line.color",M);if(w(b,"line")&&v.isArrayOrTypedArray(k)){if(k.length)return E("line.colorscale"),n(b,y,h,E,{prefix:"line.",cLetter:"c"}),k.length;y.line.color=M}return 1/0}(a,u,l,d,c);T(u,d,c),Array.isArray(p)&&p.length||(u.visible=!1),r(u,p,"values",g);var m={weight:d.font.weight,style:d.font.style,variant:d.font.variant,family:d.font.family,size:Math.round(d.font.size/1.2),color:d.font.color};v.coerceFont(c,"labelfont",m),v.coerceFont(c,"tickfont",m),v.coerceFont(c,"rangefont",m),c("labelangle"),c("labelside"),c("unselected.line.color"),c("unselected.line.opacity")}},95724:function(C,A,e){"use strict";var v=e(3400).isTypedArray;A.convertTypedArray=function(w){return v(w)?Array.prototype.slice.call(w):w},A.isOrdinal=function(w){return!!w.tickvals},A.isVisible=function(w){return w.visible||!("visible"in w)}},29928:function(C,A,e){"use strict";var v=e(61664);v.plot=e(24196),C.exports=v},51352:function(C,A,e){"use strict";var v=["precision highp float;","","varying vec4 fragColor;","","attribute vec4 p01_04, p05_08, p09_12, p13_16,","               p17_20, p21_24, p25_28, p29_32,","               p33_36, p37_40, p41_44, p45_48,","               p49_52, p53_56, p57_60, colors;","","uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,","             loA, hiA, loB, hiB, loC, hiC, loD, hiD;","","uniform vec2 resolution, viewBoxPos, viewBoxSize;","uniform float maskHeight;","uniform float drwLayer; // 0: context, 1: focus, 2: pick","uniform vec4 contextColor;","uniform sampler2D maskTexture, palette;","","bool isPick    = (drwLayer > 1.5);","bool isContext = (drwLayer < 0.5);","","const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);","const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);","","float val(mat4 p, mat4 v) {","    return dot(matrixCompMult(p, v) * UNITS, UNITS);","}","","float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {","    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);","    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);","    return y1 * (1.0 - ratio) + y2 * ratio;","}","","int iMod(int a, int b) {","    return a - b * (a / b);","}","","bool fOutside(float p, float lo, float hi) {","    return (lo < hi) && (lo > p || p > hi);","}","","bool vOutside(vec4 p, vec4 lo, vec4 hi) {","    return (","        fOutside(p[0], lo[0], hi[0]) ||","        fOutside(p[1], lo[1], hi[1]) ||","        fOutside(p[2], lo[2], hi[2]) ||","        fOutside(p[3], lo[3], hi[3])","    );","}","","bool mOutside(mat4 p, mat4 lo, mat4 hi) {","    return (","        vOutside(p[0], lo[0], hi[0]) ||","        vOutside(p[1], lo[1], hi[1]) ||","        vOutside(p[2], lo[2], hi[2]) ||","        vOutside(p[3], lo[3], hi[3])","    );","}","","bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {","    return mOutside(A, loA, hiA) ||","           mOutside(B, loB, hiB) ||","           mOutside(C, loC, hiC) ||","           mOutside(D, loD, hiD);","}","","bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {","    mat4 pnts[4];","    pnts[0] = A;","    pnts[1] = B;","    pnts[2] = C;","    pnts[3] = D;","","    for(int i = 0; i < 4; ++i) {","        for(int j = 0; j < 4; ++j) {","            for(int k = 0; k < 4; ++k) {","                if(0 == iMod(","                    int(255.0 * texture2D(maskTexture,","                        vec2(","                            (float(i * 2 + j / 2) + 0.5) / 8.0,","                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight","                        ))[3]","                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),","                    2","                )) return true;","            }","        }","    }","    return false;","}","","vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {","    float x = 0.5 * sign(v) + 0.5;","    float y = axisY(x, A, B, C, D);","    float z = 1.0 - abs(v);","","    z += isContext ? 0.0 : 2.0 * float(","        outsideBoundingBox(A, B, C, D) ||","        outsideRasterMask(A, B, C, D)","    );","","    return vec4(","        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,","        z,","        1.0","    );","}","","void main() {","    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);","    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);","    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);","    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);","","    float v = colors[3];","","    gl_Position = position(isContext, v, A, B, C, D);","","    fragColor =","        isContext ? vec4(contextColor) :","        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));","}"].join(`
`),w=["precision highp float;","","varying vec4 fragColor;","","void main() {","    gl_FragColor = fragColor;","}"].join(`
`),n=e(30140).maxDimensionCount,T=e(3400),x=1e-6,f=new Uint8Array(4),s=new Uint8Array(4),t={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function o(p,g,m,b,y){var M=p._gl;M.enable(M.SCISSOR_TEST),M.scissor(g,m,b,y),p.clear({color:[0,0,0,0],depth:1})}function r(p,g,m,b,y,M){var h=M.key;m.drawCompleted||(function(E){E.read({x:0,y:0,width:1,height:1,data:f})}(p),m.drawCompleted=!0),function E(k){var D=Math.min(b,y-k*b);k===0&&(window.cancelAnimationFrame(m.currentRafs[h]),delete m.currentRafs[h],o(p,M.scissorX,M.scissorY,M.scissorWidth,M.viewBoxSize[1])),m.clearOnly||(M.count=2*D,M.offset=2*k*b,g(M),k*b+D<y&&(m.currentRafs[h]=window.requestAnimationFrame(function(){E(k+1)})),m.drawCompleted=!1)}(0)}function i(p,g){for(var m=new Array(256),b=0;b<256;b++)m[b]=p(b/255).concat(g);return m}function a(p,g){return(p>>>8*g)%256/255}function u(p,g,m){for(var b=new Array(8*g),y=0,M=0;M<g;M++)for(var h=0;h<2;h++)for(var E=0;E<4;E++){var k=4*p+E,D=m[64*M+k];k===63&&h===0&&(D*=-1),b[y++]=D}return b}function l(p){var g="0"+p;return g.substr(g.length-2)}function d(p){return p<n?"p"+l(p+1)+"_"+l(p+4):"colors"}function c(p,g,m,b,y,M,h,E,k,D,P,L,O,N){for(var V=[[],[]],F=0;F<64;F++)V[0][F]=F===y?1:0,V[1][F]=F===M?1:0;h*=N,E*=N,k*=N,D*=N;var j=p.lines.canvasOverdrag*N,Z=p.domain,z=p.canvasWidth*N,H=p.canvasHeight*N,U=p.pad.l*N,re=p.pad.b*N,ee=p.layoutHeight*N,J=p.layoutWidth*N,Q=p.deselectedLines.color,ne=p.deselectedLines.opacity;return T.extendFlat({key:P,resolution:[z,H],viewBoxPos:[h+j,E],viewBoxSize:[k,D],i0:y,i1:M,dim0A:V[0].slice(0,16),dim0B:V[0].slice(16,32),dim0C:V[0].slice(32,48),dim0D:V[0].slice(48,64),dim1A:V[1].slice(0,16),dim1B:V[1].slice(16,32),dim1C:V[1].slice(32,48),dim1D:V[1].slice(48,64),drwLayer:L,contextColor:[Q[0]/255,Q[1]/255,Q[2]/255,ne!=="auto"?Q[3]*ne:Math.max(.00392156862745098,Math.pow(1/p.lines.color.length,.3333333333333333))],scissorX:(b===g?0:h+j)+(U-j)+J*Z.x[0],scissorWidth:(b===m?z-h+j:k+.5)+(b===g?h+j:0),scissorY:E+re+ee*Z.y[0],scissorHeight:D,viewportX:U-j+J*Z.x[0],viewportY:re+ee*Z.y[0],viewportWidth:z,viewportHeight:H},O)}function _(p){var g=2047,m=Math.max(0,Math.floor(p[0]*g),0),b=Math.min(g,Math.ceil(p[1]*g),g);return[Math.min(m,b),Math.max(m,b)]}C.exports=function(p,g){var m,b,y,M,h,E=g.context,k=g.pick,D=g.regl,P=D._gl,L=P.getParameter(P.ALIASED_LINE_WIDTH_RANGE),O=Math.max(L[0],Math.min(L[1],g.viewModel.plotGlPixelRatio)),N={currentRafs:{},drawCompleted:!0,clearOnly:!1},V=function(H){for(var U={},re=0;re<=n;re+=4)U[d(re)]=H.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return U}(D),F=D.texture(t),j=[];z(g);var Z=D({profile:!1,blend:{enable:E,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!E,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:D.prop("scissorX"),y:D.prop("scissorY"),width:D.prop("scissorWidth"),height:D.prop("scissorHeight")}},viewport:{x:D.prop("viewportX"),y:D.prop("viewportY"),width:D.prop("viewportWidth"),height:D.prop("viewportHeight")},dither:!1,vert:v,frag:w,primitive:"lines",lineWidth:O,attributes:V,uniforms:{resolution:D.prop("resolution"),viewBoxPos:D.prop("viewBoxPos"),viewBoxSize:D.prop("viewBoxSize"),dim0A:D.prop("dim0A"),dim1A:D.prop("dim1A"),dim0B:D.prop("dim0B"),dim1B:D.prop("dim1B"),dim0C:D.prop("dim0C"),dim1C:D.prop("dim1C"),dim0D:D.prop("dim0D"),dim1D:D.prop("dim1D"),loA:D.prop("loA"),hiA:D.prop("hiA"),loB:D.prop("loB"),hiB:D.prop("hiB"),loC:D.prop("loC"),hiC:D.prop("hiC"),loD:D.prop("loD"),hiD:D.prop("hiD"),palette:F,contextColor:D.prop("contextColor"),maskTexture:D.prop("maskTexture"),drwLayer:D.prop("drwLayer"),maskHeight:D.prop("maskHeight")},offset:D.prop("offset"),count:D.prop("count")});function z(H){m=H.model,b=H.viewModel,y=b.dimensions.slice(),M=y[0]?y[0].values.length:0;var U=m.lines,re=k?U.color.map(function(J,Q){return Q/U.color.length}):U.color,ee=function(J,Q,ne){for(var K,oe=new Array(J*(n+4)),le=0,se=0;se<J;se++){for(var de=0;de<n;de++)oe[le++]=de<Q.length?Q[de].paddedUnitValues[se]:.5;oe[le++]=a(se,2),oe[le++]=a(se,1),oe[le++]=a(se,0),oe[le++]=(K=ne[se],Math.max(x,Math.min(.999999,K)))}return oe}(M,y,re);(function(J,Q,ne){for(var K=0;K<=n;K+=4)J[d(K)](u(K/4,Q,ne))})(V,M,ee),E||k||(F=D.texture(T.extendFlat({data:i(m.unitToColor,255)},t)))}return{render:function(H,U,re){var ee,J,Q,ne=H.length,K=1/0,oe=-1/0;for(ee=0;ee<ne;ee++)H[ee].dim0.canvasX<K&&(K=H[ee].dim0.canvasX,J=ee),H[ee].dim1.canvasX>oe&&(oe=H[ee].dim1.canvasX,Q=ee);ne===0&&o(D,0,0,m.canvasWidth,m.canvasHeight);var le=function(Ae){var ce,ae,pe,De=[[],[]];for(pe=0;pe<64;pe++){var ke=!Ae&&pe<y.length?y[pe].brush.filter.getBounds():[-1/0,1/0];De[0][pe]=ke[0],De[1][pe]=ke[1]}var Ee=new Array(16384);for(ce=0;ce<16384;ce++)Ee[ce]=255;if(!Ae)for(ce=0;ce<y.length;ce++){var Ie=ce%8,Re=(ce-Ie)/8,Ne=Math.pow(2,Ie),ge=y[ce].brush.filter.get();if(!(ge.length<2)){var we=_(ge[0])[1];for(ae=1;ae<ge.length;ae++){var Ce=_(ge[ae]);for(pe=we+1;pe<Ce[0];pe++)Ee[8*pe+Re]&=~Ne;we=Math.max(we,Ce[1])}}}var ze={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:Ee};return h?h(ze):h=D.texture(ze),{maskTexture:h,maskHeight:2048,loA:De[0].slice(0,16),loB:De[0].slice(16,32),loC:De[0].slice(32,48),loD:De[0].slice(48,64),hiA:De[1].slice(0,16),hiB:De[1].slice(16,32),hiC:De[1].slice(32,48),hiD:De[1].slice(48,64)}}(E);for(ee=0;ee<ne;ee++){var se=H[ee],de=se.dim0.crossfilterDimensionIndex,be=se.dim1.crossfilterDimensionIndex,_e=se.canvasX,xe=se.canvasY,ve=_e+se.panelSizeX,ye=se.plotGlPixelRatio;if(U||!j[de]||j[de][0]!==_e||j[de][1]!==ve){j[de]=[_e,ve];var me=c(m,J,Q,ee,de,be,_e,xe,se.panelSizeX,se.panelSizeY,se.dim0.crossfilterDimensionIndex,E?0:k?2:1,le,ye);N.clearOnly=re;var Me=U?m.lines.blockLineCount:M;r(D,Z,N,Me,M,me)}}},readPixel:function(H,U){return D.read({x:H,y:U,width:1,height:1,data:s}),s},readPixels:function(H,U,re,ee){var J=new Uint8Array(4*re*ee);return D.read({x:H,y:U,width:re,height:ee,data:J}),J},destroy:function(){for(var H in p.style["pointer-events"]="none",F.destroy(),h&&h.destroy(),V)V[H].destroy()},update:z}}},26284:function(C){"use strict";C.exports=function(A,e,v,w){var n,T;for(w||(w=1/0),n=0;n<e.length;n++)(T=e[n]).visible&&(w=Math.min(w,T[v].length));for(w===1/0&&(w=0),A._length=w,n=0;n<e.length;n++)(T=e[n]).visible&&(T._length=w);return w}},36336:function(C,A,e){"use strict";var v=e(33428),w=e(3400),n=w.isArrayOrTypedArray,T=w.numberFormat,x=e(96824),f=e(54460),s=w.strRotate,t=w.strTranslate,o=e(72736),r=e(43616),i=e(8932),a=e(71688),u=a.keyFun,l=a.repeat,d=a.unwrap,c=e(95724),_=e(30140),p=e(71864),g=e(51352);function m(Z,z,H){return w.aggNums(Z,null,z,H)}function b(Z,z){return M(m(Math.min,Z,z),m(Math.max,Z,z))}function y(Z){var z=Z.range;return z?M(z[0],z[1]):b(Z.values,Z._length)}function M(Z,z){return!isNaN(Z)&&isFinite(Z)||(Z=0),!isNaN(z)&&isFinite(z)||(z=0),Z===z&&(Z===0?(Z-=1,z+=1):(Z*=.9,z*=1.1)),[Z,z]}function h(Z,z,H,U,re){var ee,J,Q=y(H);return U?v.scale.ordinal().domain(U.map((ee=T(H.tickformat),J=re,J?function(ne,K){var oe=J[K];return oe??ee(ne)}:ee))).range(U.map(function(ne){var K=(ne-Q[0])/(Q[1]-Q[0]);return Z-z+K*(2*z-Z)})):v.scale.linear().domain(Q).range([Z-z,z])}function E(Z){if(Z.tickvals){var z=y(Z);return v.scale.ordinal().domain(Z.tickvals).range(Z.tickvals.map(function(H){return(H-z[0])/(z[1]-z[0])}))}}function k(Z){var z=Z.map(function(re){return re[0]}),H=Z.map(function(re){var ee=x(re[1]);return v.rgb("rgb("+ee[0]+","+ee[1]+","+ee[2]+")")}),U="rgb".split("").map(function(re){return v.scale.linear().clamp(!0).domain(z).range(H.map((ee=re,function(J){return J[ee]})));var ee});return function(re){return U.map(function(ee){return ee(re)})}}function D(Z){return Z.dimensions.some(function(z){return z.brush.filterSpecified})}function P(Z,z,H){var U=d(z),re=U.trace,ee=c.convertTypedArray(U.lineColor),J=re.line,Q={color:x(re.unselected.line.color),opacity:re.unselected.line.opacity},ne=i.extractOpts(J),K=ne.reversescale?i.flipScale(U.cscale):U.cscale,oe=re.domain,le=re.dimensions,se=Z.width,de=re.labelangle,be=re.labelside,_e=re.labelfont,xe=re.tickfont,ve=re.rangefont,ye=w.extendDeepNoArrays({},J,{color:ee.map(v.scale.linear().domain(y({values:ee,range:[ne.min,ne.max],_length:re._length}))),blockLineCount:_.blockLineCount,canvasOverdrag:_.overdrag*_.canvasPixelRatio}),me=Math.floor(se*(oe.x[1]-oe.x[0])),Me=Math.floor(Z.height*(oe.y[1]-oe.y[0])),Ae=Z.margin||{l:80,r:80,t:100,b:80},ce=me,ae=Me;return{key:H,colCount:le.filter(c.isVisible).length,dimensions:le,tickDistance:_.tickDistance,unitToColor:k(K),lines:ye,deselectedLines:Q,labelAngle:de,labelSide:be,labelFont:_e,tickFont:xe,rangeFont:ve,layoutWidth:se,layoutHeight:Z.height,domain:oe,translateX:oe.x[0]*se,translateY:Z.height-oe.y[1]*Z.height,pad:Ae,canvasWidth:ce*_.canvasPixelRatio+2*ye.canvasOverdrag,canvasHeight:ae*_.canvasPixelRatio,width:ce,height:ae,canvasPixelRatio:_.canvasPixelRatio}}function L(Z,z,H){var U=H.width,re=H.height,ee=H.dimensions,J=H.canvasPixelRatio,Q=function(se){return U*se/Math.max(1,H.colCount-1)},ne=_.verticalPadding/re,K=function(se,de){return v.scale.linear().range([de,se-de])}(re,_.verticalPadding),oe={key:H.key,xScale:Q,model:H,inBrushDrag:!1},le={};return oe.dimensions=ee.filter(c.isVisible).map(function(se,de){var be=function(Ie,Re){return v.scale.linear().domain(y(Ie)).range([Re,1-Re])}(se,ne),_e=le[se.label];le[se.label]=(_e||0)+1;var xe=se.label+(_e?"__"+_e:""),ve=se.constraintrange,ye=ve&&ve.length;ye&&!n(ve[0])&&(ve=[ve]);var me=ye?ve.map(function(Ie){return Ie.map(be)}):[[-1/0,1/0]],Me=se.values;Me.length>se._length&&(Me=Me.slice(0,se._length));var Ae,ce=se.tickvals;function ae(Ie,Re){return{val:Ie,text:Ae[Re]}}function pe(Ie,Re){return Ie.val-Re.val}if(n(ce)&&ce.length){w.isTypedArray(ce)&&(ce=Array.from(ce)),Ae=se.ticktext,n(Ae)&&Ae.length?Ae.length>ce.length?Ae=Ae.slice(0,ce.length):ce.length>Ae.length&&(ce=ce.slice(0,Ae.length)):Ae=ce.map(T(se.tickformat));for(var De=1;De<ce.length;De++)if(ce[De]<ce[De-1]){for(var ke=ce.map(ae).sort(pe),Ee=0;Ee<ce.length;Ee++)ce[Ee]=ke[Ee].val,Ae[Ee]=ke[Ee].text;break}}else ce=void 0;return Me=c.convertTypedArray(Me),{key:xe,label:se.label,tickFormat:se.tickformat,tickvals:ce,ticktext:Ae,ordinal:c.isOrdinal(se),multiselect:se.multiselect,xIndex:de,crossfilterDimensionIndex:de,visibleIndex:se._index,height:re,values:Me,paddedUnitValues:Me.map(be),unitTickvals:ce&&ce.map(be),xScale:Q,x:Q(de),canvasX:Q(de)*J,unitToPaddedPx:K,domainScale:h(re,_.verticalPadding,se,ce,Ae),ordinalScale:E(se),parent:oe,model:H,brush:p.makeBrush(Z,ye,me,function(){Z.linePickActive(!1)},function(){var Ie=oe;Ie.focusLayer&&Ie.focusLayer.render(Ie.panels,!0);var Re=D(Ie);!Z.contextShown()&&Re?(Ie.contextLayer&&Ie.contextLayer.render(Ie.panels,!0),Z.contextShown(!0)):Z.contextShown()&&!Re&&(Ie.contextLayer&&Ie.contextLayer.render(Ie.panels,!0,!0),Z.contextShown(!1))},function(Ie){if(oe.focusLayer.render(oe.panels,!0),oe.pickLayer&&oe.pickLayer.render(oe.panels,!0),Z.linePickActive(!0),z&&z.filterChanged){var Re=be.invert,Ne=Ie.map(function(ge){return ge.map(Re).sort(w.sorterAsc)}).sort(function(ge,we){return ge[0]-we[0]});z.filterChanged(oe.key,se._index,Ne)}})}}),oe}function O(Z){Z.classed(_.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function N(Z,z){var H=z==="top"?1:-1,U=Z*Math.PI/180;return{dir:H,dx:Math.sin(U),dy:Math.cos(U),degrees:Z}}function V(Z,z,H){for(var U=z.panels||(z.panels=[]),re=Z.data(),ee=0;ee<re.length-1;ee++){var J=U[ee]||(U[ee]={}),Q=re[ee],ne=re[ee+1];J.dim0=Q,J.dim1=ne,J.canvasX=Q.canvasX,J.panelSizeX=ne.canvasX-Q.canvasX,J.panelSizeY=z.model.canvasHeight,J.y=0,J.canvasY=0,J.plotGlPixelRatio=H}}function F(Z,z){return f.tickText(Z._ax,z,!1).text}function j(Z,z){if(Z.ordinal)return"";var H=Z.domainScale.domain(),U=H[z?H.length-1:0];return F(Z.model.dimensions[Z.visibleIndex],U)}C.exports=function(Z,z,H,U){var re=Z._context.staticPlot,ee=Z._fullLayout,J=ee._toppaper,Q=ee._glcontainer,ne=Z._context.plotGlPixelRatio,K=Z._fullLayout.paper_bgcolor;(function(Ie){for(var Re=0;Re<Ie.length;Re++)for(var Ne=0;Ne<Ie[Re].length;Ne++)for(var ge=Ie[Re][Ne].trace,we=ge.dimensions,Ce=0;Ce<we.length;Ce++){var ze=we[Ce].values,Pe=we[Ce]._ax;Pe&&(Pe.range?Pe.range=M(Pe.range[0],Pe.range[1]):Pe.range=b(ze,ge._length),Pe.dtick||(Pe.dtick=.01*(Math.abs(Pe.range[1]-Pe.range[0])||1)),Pe.tickformat=we[Ce].tickformat,f.calcTicks(Pe),Pe.cleanRange())}})(z);var oe,le,se=(oe=!0,le=!1,{linePickActive:function(Ie){return arguments.length?oe=!!Ie:oe},contextShown:function(Ie){return arguments.length?le=!!Ie:le}}),de=z.filter(function(Ie){return d(Ie).trace.visible}).map(P.bind(0,H)).map(L.bind(0,se,U));Q.each(function(Ie,Re){return w.extendFlat(Ie,de[Re])});var be=Q.selectAll(".gl-canvas").each(function(Ie){Ie.viewModel=de[0],Ie.viewModel.plotGlPixelRatio=ne,Ie.viewModel.paperColor=K,Ie.model=Ie.viewModel?Ie.viewModel.model:null}),_e=null;be.filter(function(Ie){return Ie.pick}).style("pointer-events",re?"none":"auto").on("mousemove",function(Ie){if(se.linePickActive()&&Ie.lineLayer&&U&&U.hover){var Re=v.event,Ne=this.width,ge=this.height,we=v.mouse(this),Ce=we[0],ze=we[1];if(Ce<0||ze<0||Ce>=Ne||ze>=ge)return;var Pe=Ie.lineLayer.readPixel(Ce,ge-1-ze),Ue=Pe[3]!==0,Ge=Ue?Pe[2]+256*(Pe[1]+256*Pe[0]):null,Xe={x:Ce,y:ze,clientX:Re.clientX,clientY:Re.clientY,dataIndex:Ie.model.key,curveNumber:Ge};Ge!==_e&&(Ue?U.hover(Xe):U.unhover&&U.unhover(Xe),_e=Ge)}}),be.style("opacity",function(Ie){return Ie.pick?0:1}),J.style("background","rgba(255, 255, 255, 0)");var xe=J.selectAll("."+_.cn.parcoords).data(de,u);xe.exit().remove(),xe.enter().append("g").classed(_.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),xe.attr("transform",function(Ie){return t(Ie.model.translateX,Ie.model.translateY)});var ve=xe.selectAll("."+_.cn.parcoordsControlView).data(l,u);ve.enter().append("g").classed(_.cn.parcoordsControlView,!0),ve.attr("transform",function(Ie){return t(Ie.model.pad.l,Ie.model.pad.t)});var ye=ve.selectAll("."+_.cn.yAxis).data(function(Ie){return Ie.dimensions},u);ye.enter().append("g").classed(_.cn.yAxis,!0),ve.each(function(Ie){V(ye,Ie,ne)}),be.each(function(Ie){if(Ie.viewModel){!Ie.lineLayer||U?Ie.lineLayer=g(this,Ie):Ie.lineLayer.update(Ie),(Ie.key||Ie.key===0)&&(Ie.viewModel[Ie.key]=Ie.lineLayer);var Re=!Ie.context||U;Ie.lineLayer.render(Ie.viewModel.panels,Re)}}),ye.attr("transform",function(Ie){return t(Ie.xScale(Ie.xIndex),0)}),ye.call(v.behavior.drag().origin(function(Ie){return Ie}).on("drag",function(Ie){var Re=Ie.parent;se.linePickActive(!1),Ie.x=Math.max(-_.overdrag,Math.min(Ie.model.width+_.overdrag,v.event.x)),Ie.canvasX=Ie.x*Ie.model.canvasPixelRatio,ye.sort(function(Ne,ge){return Ne.x-ge.x}).each(function(Ne,ge){Ne.xIndex=ge,Ne.x=Ie===Ne?Ne.x:Ne.xScale(Ne.xIndex),Ne.canvasX=Ne.x*Ne.model.canvasPixelRatio}),V(ye,Re,ne),ye.filter(function(Ne){return Math.abs(Ie.xIndex-Ne.xIndex)!==0}).attr("transform",function(Ne){return t(Ne.xScale(Ne.xIndex),0)}),v.select(this).attr("transform",t(Ie.x,0)),ye.each(function(Ne,ge,we){we===Ie.parent.key&&(Re.dimensions[ge]=Ne)}),Re.contextLayer&&Re.contextLayer.render(Re.panels,!1,!D(Re)),Re.focusLayer.render&&Re.focusLayer.render(Re.panels)}).on("dragend",function(Ie){var Re=Ie.parent;Ie.x=Ie.xScale(Ie.xIndex),Ie.canvasX=Ie.x*Ie.model.canvasPixelRatio,V(ye,Re,ne),v.select(this).attr("transform",function(Ne){return t(Ne.x,0)}),Re.contextLayer&&Re.contextLayer.render(Re.panels,!1,!D(Re)),Re.focusLayer&&Re.focusLayer.render(Re.panels),Re.pickLayer&&Re.pickLayer.render(Re.panels,!0),se.linePickActive(!0),U&&U.axesMoved&&U.axesMoved(Re.key,Re.dimensions.map(function(Ne){return Ne.crossfilterDimensionIndex}))})),ye.exit().remove();var me=ye.selectAll("."+_.cn.axisOverlays).data(l,u);me.enter().append("g").classed(_.cn.axisOverlays,!0),me.selectAll("."+_.cn.axis).remove();var Me=me.selectAll("."+_.cn.axis).data(l,u);Me.enter().append("g").classed(_.cn.axis,!0),Me.each(function(Ie){var Re=Ie.model.height/Ie.model.tickDistance,Ne=Ie.domainScale,ge=Ne.domain();v.select(this).call(v.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Re,Ie.tickFormat).tickValues(Ie.ordinal?ge:null).tickFormat(function(we){return c.isOrdinal(Ie)?we:F(Ie.model.dimensions[Ie.visibleIndex],we)}).scale(Ne)),r.font(Me.selectAll("text"),Ie.model.tickFont)}),Me.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),Me.selectAll("text").style("text-shadow",o.makeTextShadow(K)).style("cursor","default");var Ae=me.selectAll("."+_.cn.axisHeading).data(l,u);Ae.enter().append("g").classed(_.cn.axisHeading,!0);var ce=Ae.selectAll("."+_.cn.axisTitle).data(l,u);ce.enter().append("text").classed(_.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",re?"none":"auto"),ce.text(function(Ie){return Ie.label}).each(function(Ie){var Re=v.select(this);r.font(Re,Ie.model.labelFont),o.convertToTspans(Re,Z)}).attr("transform",function(Ie){var Re=N(Ie.model.labelAngle,Ie.model.labelSide),Ne=_.axisTitleOffset;return(Re.dir>0?"":t(0,2*Ne+Ie.model.height))+s(Re.degrees)+t(-Ne*Re.dx,-Ne*Re.dy)}).attr("text-anchor",function(Ie){var Re=N(Ie.model.labelAngle,Ie.model.labelSide);return 2*Math.abs(Re.dx)>Math.abs(Re.dy)?Re.dir*Re.dx<0?"start":"end":"middle"});var ae=me.selectAll("."+_.cn.axisExtent).data(l,u);ae.enter().append("g").classed(_.cn.axisExtent,!0);var pe=ae.selectAll("."+_.cn.axisExtentTop).data(l,u);pe.enter().append("g").classed(_.cn.axisExtentTop,!0),pe.attr("transform",t(0,-_.axisExtentOffset));var De=pe.selectAll("."+_.cn.axisExtentTopText).data(l,u);De.enter().append("text").classed(_.cn.axisExtentTopText,!0).call(O),De.text(function(Ie){return j(Ie,!0)}).each(function(Ie){r.font(v.select(this),Ie.model.rangeFont)});var ke=ae.selectAll("."+_.cn.axisExtentBottom).data(l,u);ke.enter().append("g").classed(_.cn.axisExtentBottom,!0),ke.attr("transform",function(Ie){return t(0,Ie.model.height+_.axisExtentOffset)});var Ee=ke.selectAll("."+_.cn.axisExtentBottomText).data(l,u);Ee.enter().append("text").classed(_.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(O),Ee.text(function(Ie){return j(Ie,!1)}).each(function(Ie){r.font(v.select(this),Ie.model.rangeFont)}),p.ensureAxisBrush(me,K,Z)}},24196:function(C,A,e){"use strict";var v=e(36336),w=e(5048),n=e(95724).isVisible,T={};function x(f,s,t){var o=s.indexOf(t),r=f.indexOf(o);return r===-1&&(r+=s.length),r}(C.exports=function(f,s){var t=f._fullLayout;if(w(f,[],T)){var o={},r={},i={},a={},u=t._size;s.forEach(function(l,d){var c=l[0].trace;i[d]=c.index;var _=a[d]=c._fullInput.index;o[d]=f.data[_].dimensions,r[d]=f.data[_].dimensions.slice()}),v(f,s,{width:u.w,height:u.h,margin:{t:u.t,r:u.r,b:u.b,l:u.l}},{filterChanged:function(l,d,c){var _=r[l][d],p=c.map(function(h){return h.slice()}),g="dimensions["+d+"].constraintrange",m=t._tracePreGUI[f._fullData[i[l]]._fullInput.uid];if(m[g]===void 0){var b=_.constraintrange;m[g]=b||null}var y=f._fullData[i[l]].dimensions[d];p.length?(p.length===1&&(p=p[0]),_.constraintrange=p,y.constraintrange=p.slice(),p=[p]):(delete _.constraintrange,delete y.constraintrange,p=null);var M={};M[g]=p,f.emit("plotly_restyle",[M,[a[l]]])},hover:function(l){f.emit("plotly_hover",l)},unhover:function(l){f.emit("plotly_unhover",l)},axesMoved:function(l,d){var c=function(_,p){return function(g,m){return x(_,p,g)-x(_,p,m)}}(d,r[l].filter(n));o[l].sort(c),r[l].filter(function(_){return!n(_)}).sort(function(_){return r[l].indexOf(_)}).forEach(function(_){o[l].splice(o[l].indexOf(_),1),o[l].splice(r[l].indexOf(_),0,_)}),f.emit("plotly_restyle",[{dimensions:[o[l]]},[a[l]]])}})}}).reglPrecompiled=T},74996:function(C,A,e){"use strict";var v=e(45464),w=e(86968).u,n=e(25376),T=e(22548),x=e(21776).Ks,f=e(21776).Gw,s=e(92880).extendFlat,t=e(98192).c,o=n({editType:"plot",arrayOk:!0,colorEditType:"plot"});C.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:T.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:t,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:s({},v.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:x({},{keys:["label","color","value","percent","text"]}),texttemplate:f({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:s({},o,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:s({},o,{}),outsidetextfont:s({},o,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:s({},o,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:w({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:s({},o,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},80036:function(C,A,e){"use strict";var v=e(7316);A.name="pie",A.plot=function(w,n,T,x){v.plotBasePlot(A.name,w,n,T,x)},A.clean=function(w,n,T,x){v.cleanBasePlot(A.name,w,n,T,x)}},45768:function(C,A,e){"use strict";var v=e(38248),w=e(49760),n=e(76308),T={};function x(s){return function(t,o){return!!t&&!!(t=w(t)).isValid()&&(t=n.addOpacity(t,t.getAlpha()),s[o]||(s[o]=t),t)}}function f(s,t){var o,r=JSON.stringify(s),i=t[r];if(!i){for(i=s.slice(),o=0;o<s.length;o++)i.push(w(s[o]).lighten(20).toHexString());for(o=0;o<s.length;o++)i.push(w(s[o]).darken(20).toHexString());t[r]=i}return i}C.exports={calc:function(s,t){var o,r,i=[],a=s._fullLayout,u=a.hiddenlabels||[],l=t.labels,d=t.marker.colors||[],c=t.values,_=t._length,p=t._hasValues&&_;if(t.dlabel)for(l=new Array(_),o=0;o<_;o++)l[o]=String(t.label0+o*t.dlabel);var g={},m=x(a["_"+t.type+"colormap"]),b=0,y=!1;for(o=0;o<_;o++){var M,h,E;if(p){if(M=c[o],!v(M))continue;M=+M}else M=1;(h=l[o])!==void 0&&h!==""||(h=o);var k=g[h=String(h)];k===void 0?(g[h]=i.length,(E=u.indexOf(h)!==-1)||(b+=M),i.push({v:M,label:h,color:m(d[o],h),i:o,pts:[o],hidden:E})):(y=!0,(r=i[k]).v+=M,r.pts.push(o),r.hidden||(b+=M),r.color===!1&&d[o]&&(r.color=m(d[o],h)))}return i=i.filter(function(D){return D.v>=0}),(t.type==="funnelarea"?y:t.sort)&&i.sort(function(D,P){return P.v-D.v}),i[0]&&(i[0].vTotal=b),i},crossTraceCalc:function(s,t){var o=(t||{}).type;o||(o="pie");var r=s._fullLayout,i=s.calcdata,a=r[o+"colorway"],u=r["_"+o+"colormap"];r["extend"+o+"colors"]&&(a=f(a,T));for(var l=0,d=0;d<i.length;d++){var c=i[d];if(c[0].trace.type===o)for(var _=0;_<c.length;_++){var p=c[_];p.color===!1&&(u[p.label]?p.color=u[p.label]:(u[p.label]=p.color=a[l%a.length],l++))}}},makePullColorFn:x,generateExtendedColors:f}},74174:function(C,A,e){"use strict";var v=e(38248),w=e(3400),n=e(74996),T=e(86968).Q,x=e(31508).handleText,f=e(3400).coercePattern;function s(o,r){var i=w.isArrayOrTypedArray(o),a=w.isArrayOrTypedArray(r),u=Math.min(i?o.length:1/0,a?r.length:1/0);if(isFinite(u)||(u=0),u&&a){for(var l,d=0;d<u;d++){var c=r[d];if(v(c)&&c>0){l=!0;break}}l||(u=0)}return{hasLabels:i,hasValues:a,len:u}}function t(o,r,i,a,u){a("marker.line.width")&&a("marker.line.color",u?void 0:i.paper_bgcolor);var l=a("marker.colors");f(a,"marker.pattern",l),o.marker&&!r.marker.pattern.fgcolor&&(r.marker.pattern.fgcolor=o.marker.colors),r.marker.pattern.bgcolor||(r.marker.pattern.bgcolor=i.paper_bgcolor)}C.exports={handleLabelsAndValues:s,handleMarkerDefaults:t,supplyDefaults:function(o,r,i,a){function u(y,M){return w.coerce(o,r,n,y,M)}var l=s(u("labels"),u("values")),d=l.len;if(r._hasLabels=l.hasLabels,r._hasValues=l.hasValues,!r._hasLabels&&r._hasValues&&(u("label0"),u("dlabel")),d){r._length=d,t(o,r,a,u,!0),u("scalegroup");var c,_=u("text"),p=u("texttemplate");if(p||(c=u("textinfo",w.isArrayOrTypedArray(_)?"text+percent":"percent")),u("hovertext"),u("hovertemplate"),p||c&&c!=="none"){var g=u("textposition");x(o,r,a,u,g,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(g)||g==="auto"||g==="outside")&&u("automargin"),(g==="inside"||g==="auto"||Array.isArray(g))&&u("insidetextorientation")}else c==="none"&&u("textposition","none");T(r,a,u);var m=u("hole");if(u("title.text")){var b=u("title.position",m?"middle center":"top center");m||b!=="middle center"||(r.title.position="top center"),w.coerceFont(u,"title.font",a.font)}u("sort"),u("direction"),u("rotation"),u("pull")}else r.visible=!1}}},53644:function(C,A,e){"use strict";var v=e(10624).appendArrayMultiPointValues;C.exports=function(w,n){var T={curveNumber:n.index,pointNumbers:w.pts,data:n._input,fullData:n,label:w.label,color:w.color,value:w.v,percent:w.percent,text:w.text,bbox:w.bbox,v:w.v};return w.pts.length===1&&(T.pointNumber=T.i=w.pts[0]),v(T,n,w.pts),n.type==="funnelarea"&&(delete T.v,delete T.i),T}},21552:function(C,A,e){"use strict";var v=e(43616),w=e(76308);C.exports=function(n,T,x,f){var s=x.marker.pattern;s&&s.shape?v.pointStyle(n,x,f,T):w.fill(n,T.color)}},69656:function(C,A,e){"use strict";var v=e(3400);function w(n){return n.indexOf("e")!==-1?n.replace(/[.]?0+e/,"e"):n.indexOf(".")!==-1?n.replace(/[.]?0+$/,""):n}A.formatPiePercent=function(n,T){var x=w((100*n).toPrecision(3));return v.numSeparate(x,T)+"%"},A.formatPieValue=function(n,T){var x=w(n.toPrecision(10));return v.numSeparate(x,T)},A.getFirstFilled=function(n,T){if(v.isArrayOrTypedArray(n))for(var x=0;x<T.length;x++){var f=n[T[x]];if(f||f===0||f==="")return f}},A.castOption=function(n,T){return v.isArrayOrTypedArray(n)?A.getFirstFilled(n,T):n||void 0},A.getRotationAngle=function(n){return(n==="auto"?0:n)*Math.PI/180}},75792:function(C,A,e){"use strict";C.exports={attributes:e(74996),supplyDefaults:e(74174).supplyDefaults,supplyLayoutDefaults:e(90248),layoutAttributes:e(85204),calc:e(45768).calc,crossTraceCalc:e(45768).crossTraceCalc,plot:e(37820).plot,style:e(22152),styleOne:e(10528),moduleType:"trace",name:"pie",basePlotModule:e(80036),categories:["pie-like","pie","showLegend"],meta:{}}},85204:function(C){"use strict";C.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},90248:function(C,A,e){"use strict";var v=e(3400),w=e(85204);C.exports=function(n,T){function x(f,s){return v.coerce(n,T,w,f,s)}x("hiddenlabels"),x("piecolorway",T.colorway),x("extendpiecolors")}},37820:function(C,A,e){"use strict";var v=e(33428),w=e(7316),n=e(93024),T=e(76308),x=e(43616),f=e(3400),s=f.strScale,t=f.strTranslate,o=e(72736),r=e(82744),i=r.recordMinTextSize,a=r.clearMinTextSize,u=e(78048).TEXTPAD,l=e(69656),d=e(53644),c=e(3400).isValidTextValue;function _(Z,z,H){var U=H[0],re=U.cx,ee=U.cy,J=U.trace,Q=J.type==="funnelarea";"_hasHoverLabel"in J||(J._hasHoverLabel=!1),"_hasHoverEvent"in J||(J._hasHoverEvent=!1),Z.on("mouseover",function(ne){var K=z._fullLayout,oe=z._fullData[J.index];if(!z._dragging&&K.hovermode!==!1){var le=oe.hoverinfo;if(Array.isArray(le)&&(le=n.castHoverinfo({hoverinfo:[l.castOption(le,ne.pts)],_module:J._module},K,0)),le==="all"&&(le="label+text+value+percent+name"),oe.hovertemplate||le!=="none"&&le!=="skip"&&le){var se=ne.rInscribed||0,de=re+ne.pxmid[0]*(1-se),be=ee+ne.pxmid[1]*(1-se),_e=K.separators,xe=[];if(le&&le.indexOf("label")!==-1&&xe.push(ne.label),ne.text=l.castOption(oe.hovertext||oe.text,ne.pts),le&&le.indexOf("text")!==-1){var ve=ne.text;f.isValidTextValue(ve)&&xe.push(ve)}ne.value=ne.v,ne.valueLabel=l.formatPieValue(ne.v,_e),le&&le.indexOf("value")!==-1&&xe.push(ne.valueLabel),ne.percent=ne.v/U.vTotal,ne.percentLabel=l.formatPiePercent(ne.percent,_e),le&&le.indexOf("percent")!==-1&&xe.push(ne.percentLabel);var ye=oe.hoverlabel,me=ye.font,Me=[];n.loneHover({trace:J,x0:de-se*U.r,x1:de+se*U.r,y:be,_x0:Q?re+ne.TL[0]:de-se*U.r,_x1:Q?re+ne.TR[0]:de+se*U.r,_y0:Q?ee+ne.TL[1]:be-se*U.r,_y1:Q?ee+ne.BL[1]:be+se*U.r,text:xe.join("<br>"),name:oe.hovertemplate||le.indexOf("name")!==-1?oe.name:void 0,idealAlign:ne.pxmid[0]<0?"left":"right",color:l.castOption(ye.bgcolor,ne.pts)||ne.color,borderColor:l.castOption(ye.bordercolor,ne.pts),fontFamily:l.castOption(me.family,ne.pts),fontSize:l.castOption(me.size,ne.pts),fontColor:l.castOption(me.color,ne.pts),nameLength:l.castOption(ye.namelength,ne.pts),textAlign:l.castOption(ye.align,ne.pts),hovertemplate:l.castOption(oe.hovertemplate,ne.pts),hovertemplateLabels:ne,eventData:[d(ne,oe)]},{container:K._hoverlayer.node(),outerContainer:K._paper.node(),gd:z,inOut_bbox:Me}),ne.bbox=Me[0],J._hasHoverLabel=!0}J._hasHoverEvent=!0,z.emit("plotly_hover",{points:[d(ne,oe)],event:v.event})}}),Z.on("mouseout",function(ne){var K=z._fullLayout,oe=z._fullData[J.index],le=v.select(this).datum();J._hasHoverEvent&&(ne.originalEvent=v.event,z.emit("plotly_unhover",{points:[d(le,oe)],event:v.event}),J._hasHoverEvent=!1),J._hasHoverLabel&&(n.loneUnhover(K._hoverlayer.node()),J._hasHoverLabel=!1)}),Z.on("click",function(ne){var K=z._fullLayout,oe=z._fullData[J.index];z._dragging||K.hovermode===!1||(z._hoverdata=[d(ne,oe)],n.click(z,v.event))})}function p(Z,z,H){var U=l.castOption(Z.insidetextfont.color,z.pts);!U&&Z._input.textfont&&(U=l.castOption(Z._input.textfont.color,z.pts));var re=l.castOption(Z.insidetextfont.family,z.pts)||l.castOption(Z.textfont.family,z.pts)||H.family,ee=l.castOption(Z.insidetextfont.size,z.pts)||l.castOption(Z.textfont.size,z.pts)||H.size,J=l.castOption(Z.insidetextfont.weight,z.pts)||l.castOption(Z.textfont.weight,z.pts)||H.weight,Q=l.castOption(Z.insidetextfont.style,z.pts)||l.castOption(Z.textfont.style,z.pts)||H.style,ne=l.castOption(Z.insidetextfont.variant,z.pts)||l.castOption(Z.textfont.variant,z.pts)||H.variant;return{color:U||T.contrast(z.color),family:re,size:ee,weight:J,style:Q,variant:ne}}function g(Z,z){for(var H,U,re=0;re<Z.length;re++)if((U=(H=Z[re][0]).trace).title.text){var ee=U.title.text;U._meta&&(ee=f.templateString(ee,U._meta));var J=x.tester.append("text").attr("data-notex",1).text(ee).call(x.font,U.title.font).call(o.convertToTspans,z),Q=x.bBox(J.node(),!0);H.titleBox={width:Q.width,height:Q.height},J.remove()}}function m(Z,z,H){var U=H.r||z.rpx1,re=z.rInscribed;if(z.startangle===z.stopangle)return{rCenter:1-re,scale:0,rotate:0,textPosAngle:0};var ee,J=z.ring,Q=J===1&&Math.abs(z.startangle-z.stopangle)===2*Math.PI,ne=z.halfangle,K=z.midangle,oe=H.trace.insidetextorientation,le=oe==="horizontal",se=oe==="tangential",de=oe==="radial",be=oe==="auto",_e=[];if(!be){var xe,ve=function(ae,pe){if(function(Ie,Re){var Ne=Ie.startangle,ge=Ie.stopangle;return Ne>Re&&Re>ge||Ne<Re&&Re<ge}(z,ae)){var De=Math.abs(ae-z.startangle),ke=Math.abs(ae-z.stopangle),Ee=De<ke?De:ke;(ee=pe==="tan"?y(Z,U,J,Ee,0):b(Z,U,J,Ee,Math.PI/2)).textPosAngle=ae,_e.push(ee)}};if(le||se){for(xe=4;xe>=-4;xe-=2)ve(Math.PI*xe,"tan");for(xe=4;xe>=-4;xe-=2)ve(Math.PI*(xe+1),"tan")}if(le||de){for(xe=4;xe>=-4;xe-=2)ve(Math.PI*(xe+1.5),"rad");for(xe=4;xe>=-4;xe-=2)ve(Math.PI*(xe+.5),"rad")}}if(Q||be||le){var ye=Math.sqrt(Z.width*Z.width+Z.height*Z.height);if((ee={scale:re*U*2/ye,rCenter:1-re,rotate:0}).textPosAngle=(z.startangle+z.stopangle)/2,ee.scale>=1)return ee;_e.push(ee)}(be||de)&&((ee=b(Z,U,J,ne,K)).textPosAngle=(z.startangle+z.stopangle)/2,_e.push(ee)),(be||se)&&((ee=y(Z,U,J,ne,K)).textPosAngle=(z.startangle+z.stopangle)/2,_e.push(ee));for(var me=0,Me=0,Ae=0;Ae<_e.length;Ae++){var ce=_e[Ae].scale;if(Me<ce&&(Me=ce,me=Ae),!be&&Me>=1)break}return _e[me]}function b(Z,z,H,U,re){z=Math.max(0,z-2*u);var ee=Z.width/Z.height,J=E(ee,U,z,H);return{scale:2*J/Z.height,rCenter:M(ee,J/z),rotate:h(re)}}function y(Z,z,H,U,re){z=Math.max(0,z-2*u);var ee=Z.height/Z.width,J=E(ee,U,z,H);return{scale:2*J/Z.width,rCenter:M(ee,J/z),rotate:h(re+Math.PI/2)}}function M(Z,z){return Math.cos(z)-Z*z}function h(Z){return(180/Math.PI*Z+720)%180-90}function E(Z,z,H,U){var re=Z+1/(2*Math.tan(z));return H*Math.min(1/(Math.sqrt(re*re+.5)+re),U/(Math.sqrt(Z*Z+U/2)+Z))}function k(Z,z){return Z.v!==z.vTotal||z.trace.hole?Math.min(1/(1+1/Math.sin(Z.halfangle)),Z.ring/2):1}function D(Z,z){var H=z.pxmid[0],U=z.pxmid[1],re=Z.width/2,ee=Z.height/2;return H<0&&(re*=-1),U<0&&(ee*=-1),{scale:1,rCenter:1,rotate:0,x:re+Math.abs(ee)*(re>0?1:-1)/2,y:ee/(1+H*H/(U*U)),outside:!0}}function P(Z,z){var H,U,re,ee=Z.trace,J={x:Z.cx,y:Z.cy},Q={tx:0,ty:0};Q.ty+=ee.title.font.size,re=O(ee),ee.title.position.indexOf("top")!==-1?(J.y-=(1+re)*Z.r,Q.ty-=Z.titleBox.height):ee.title.position.indexOf("bottom")!==-1&&(J.y+=(1+re)*Z.r);var ne,K=Z.r/((ne=Z.trace.aspectratio)===void 0?1:ne),oe=z.w*(ee.domain.x[1]-ee.domain.x[0])/2;return ee.title.position.indexOf("left")!==-1?(oe+=K,J.x-=(1+re)*K,Q.tx+=Z.titleBox.width/2):ee.title.position.indexOf("center")!==-1?oe*=2:ee.title.position.indexOf("right")!==-1&&(oe+=K,J.x+=(1+re)*K,Q.tx-=Z.titleBox.width/2),H=oe/Z.titleBox.width,U=L(Z,z)/Z.titleBox.height,{x:J.x,y:J.y,scale:Math.min(H,U),tx:Q.tx,ty:Q.ty}}function L(Z,z){var H=Z.trace,U=z.h*(H.domain.y[1]-H.domain.y[0]);return Math.min(Z.titleBox.height,U/2)}function O(Z){var z,H=Z.pull;if(!H)return 0;if(f.isArrayOrTypedArray(H))for(H=0,z=0;z<Z.pull.length;z++)Z.pull[z]>H&&(H=Z.pull[z]);return H}function N(Z,z){for(var H=[],U=0;U<Z.length;U++){var re=Z[U][0],ee=re.trace,J=ee.domain,Q=z.w*(J.x[1]-J.x[0]),ne=z.h*(J.y[1]-J.y[0]);ee.title.text&&ee.title.position!=="middle center"&&(ne-=L(re,z));var K=Q/2,oe=ne/2;ee.type!=="funnelarea"||ee.scalegroup||(oe/=ee.aspectratio),re.r=Math.min(K,oe)/(1+O(ee)),re.cx=z.l+z.w*(ee.domain.x[1]+ee.domain.x[0])/2,re.cy=z.t+z.h*(1-ee.domain.y[0])-ne/2,ee.title.text&&ee.title.position.indexOf("bottom")!==-1&&(re.cy-=L(re,z)),ee.scalegroup&&H.indexOf(ee.scalegroup)===-1&&H.push(ee.scalegroup)}(function(le,se){for(var de,be,_e,xe=0;xe<se.length;xe++){var ve=1/0,ye=se[xe];for(be=0;be<le.length;be++)if((_e=(de=le[be][0]).trace).scalegroup===ye){var me;if(_e.type==="pie")me=de.r*de.r;else if(_e.type==="funnelarea"){var Me,Ae;_e.aspectratio>1?Ae=(Me=de.r)/_e.aspectratio:Me=(Ae=de.r)*_e.aspectratio,me=(Me*=(1+_e.baseratio)/2)*Ae}ve=Math.min(ve,me/de.vTotal)}for(be=0;be<le.length;be++)if((_e=(de=le[be][0]).trace).scalegroup===ye){var ce=ve*de.vTotal;_e.type==="funnelarea"&&(ce/=(1+_e.baseratio)/2,ce/=_e.aspectratio),de.r=Math.sqrt(ce)}}})(Z,H)}function V(Z,z){return[Z*Math.sin(z),-Z*Math.cos(z)]}function F(Z,z,H){var U=Z._fullLayout,re=H.trace,ee=re.texttemplate,J=re.textinfo;if(!ee&&J&&J!=="none"){var Q,ne=J.split("+"),K=function(me){return ne.indexOf(me)!==-1},oe=K("label"),le=K("text"),se=K("value"),de=K("percent"),be=U.separators;if(Q=oe?[z.label]:[],le){var _e=l.getFirstFilled(re.text,z.pts);c(_e)&&Q.push(_e)}se&&Q.push(l.formatPieValue(z.v,be)),de&&Q.push(l.formatPiePercent(z.v/H.vTotal,be)),z.text=Q.join("<br>")}if(ee){var xe=f.castOption(re,z.i,"texttemplate");if(xe){var ve=function(me){return{label:me.label,value:me.v,valueLabel:l.formatPieValue(me.v,U.separators),percent:me.v/H.vTotal,percentLabel:l.formatPiePercent(me.v/H.vTotal,U.separators),color:me.color,text:me.text,customdata:f.castOption(re,me.i,"customdata")}}(z),ye=l.getFirstFilled(re.text,z.pts);(c(ye)||ye==="")&&(ve.text=ye),z.text=f.texttemplateString(xe,ve,Z._fullLayout._d3locale,ve,re._meta||{})}else z.text=""}}function j(Z,z){var H=Z.rotate*Math.PI/180,U=Math.cos(H),re=Math.sin(H),ee=(z.left+z.right)/2,J=(z.top+z.bottom)/2;Z.textX=ee*U-J*re,Z.textY=ee*re+J*U,Z.noCenter=!0}C.exports={plot:function(Z,z){var H=Z._context.staticPlot,U=Z._fullLayout,re=U._size;a("pie",U),g(z,Z),N(z,re);var ee=f.makeTraceGroups(U._pielayer,z,"trace").each(function(J){var Q=v.select(this),ne=J[0],K=ne.trace;(function(oe){var le,se,de,be=oe[0],_e=be.r,xe=be.trace,ve=l.getRotationAngle(xe.rotation),ye=2*Math.PI/be.vTotal,me="px0",Me="px1";if(xe.direction==="counterclockwise"){for(le=0;le<oe.length&&oe[le].hidden;le++);if(le===oe.length)return;ve+=ye*oe[le].v,ye*=-1,me="px1",Me="px0"}for(de=V(_e,ve),le=0;le<oe.length;le++)(se=oe[le]).hidden||(se[me]=de,se.startangle=ve,ve+=ye*se.v/2,se.pxmid=V(_e,ve),se.midangle=ve,de=V(_e,ve+=ye*se.v/2),se.stopangle=ve,se[Me]=de,se.largeArc=se.v>be.vTotal/2?1:0,se.halfangle=Math.PI*Math.min(se.v/be.vTotal,.5),se.ring=1-xe.hole,se.rInscribed=k(se,be))})(J),Q.attr("stroke-linejoin","round"),Q.each(function(){var oe=v.select(this).selectAll("g.slice").data(J);oe.enter().append("g").classed("slice",!0),oe.exit().remove();var le=[[[],[]],[[],[]]],se=!1;oe.each(function(Me,Ae){if(Me.hidden)v.select(this).selectAll("path,g").remove();else{Me.pointNumber=Me.i,Me.curveNumber=K.index,le[Me.pxmid[1]<0?0:1][Me.pxmid[0]<0?0:1].push(Me);var ce=ne.cx,ae=ne.cy,pe=v.select(this),De=pe.selectAll("path.surface").data([Me]);if(De.enter().append("path").classed("surface",!0).style({"pointer-events":H?"none":"all"}),pe.call(_,Z,J),K.pull){var ke=+l.castOption(K.pull,Me.pts)||0;ke>0&&(ce+=ke*Me.pxmid[0],ae+=ke*Me.pxmid[1])}Me.cxFinal=ce,Me.cyFinal=ae;var Ee=K.hole;if(Me.v===ne.vTotal){var Ie="M"+(ce+Me.px0[0])+","+(ae+Me.px0[1])+Ce(Me.px0,Me.pxmid,!0,1)+Ce(Me.pxmid,Me.px0,!0,1)+"Z";Ee?De.attr("d","M"+(ce+Ee*Me.px0[0])+","+(ae+Ee*Me.px0[1])+Ce(Me.px0,Me.pxmid,!1,Ee)+Ce(Me.pxmid,Me.px0,!1,Ee)+"Z"+Ie):De.attr("d",Ie)}else{var Re=Ce(Me.px0,Me.px1,!0,1);if(Ee){var Ne=1-Ee;De.attr("d","M"+(ce+Ee*Me.px1[0])+","+(ae+Ee*Me.px1[1])+Ce(Me.px1,Me.px0,!1,Ee)+"l"+Ne*Me.px0[0]+","+Ne*Me.px0[1]+Re+"Z")}else De.attr("d","M"+ce+","+ae+"l"+Me.px0[0]+","+Me.px0[1]+Re+"Z")}F(Z,Me,ne);var ge=l.castOption(K.textposition,Me.pts),we=pe.selectAll("g.slicetext").data(Me.text&&ge!=="none"?[0]:[]);we.enter().append("g").classed("slicetext",!0),we.exit().remove(),we.each(function(){var ze=f.ensureSingle(v.select(this),"text","",function(xt){xt.attr("data-notex",1)}),Pe=f.ensureUniformFontSize(Z,ge==="outside"?function(xt,gt,rt){return{color:l.castOption(xt.outsidetextfont.color,gt.pts)||l.castOption(xt.textfont.color,gt.pts)||rt.color,family:l.castOption(xt.outsidetextfont.family,gt.pts)||l.castOption(xt.textfont.family,gt.pts)||rt.family,size:l.castOption(xt.outsidetextfont.size,gt.pts)||l.castOption(xt.textfont.size,gt.pts)||rt.size,weight:l.castOption(xt.outsidetextfont.weight,gt.pts)||l.castOption(xt.textfont.weight,gt.pts)||rt.weight,style:l.castOption(xt.outsidetextfont.style,gt.pts)||l.castOption(xt.textfont.style,gt.pts)||rt.style,variant:l.castOption(xt.outsidetextfont.variant,gt.pts)||l.castOption(xt.textfont.variant,gt.pts)||rt.variant}}(K,Me,U.font):p(K,Me,U.font));ze.text(Me.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(x.font,Pe).call(o.convertToTspans,Z);var Ue,Ge=x.bBox(ze.node());if(ge==="outside")Ue=D(Ge,Me);else if(Ue=m(Ge,Me,ne),ge==="auto"&&Ue.scale<1){var Xe=f.ensureUniformFontSize(Z,K.outsidetextfont);ze.call(x.font,Xe),Ue=D(Ge=x.bBox(ze.node()),Me)}var st=Ue.textPosAngle,at=st===void 0?Me.pxmid:V(ne.r,st);if(Ue.targetX=ce+at[0]*Ue.rCenter+(Ue.x||0),Ue.targetY=ae+at[1]*Ue.rCenter+(Ue.y||0),j(Ue,Ge),Ue.outside){var vt=Ue.targetY;Me.yLabelMin=vt-Ge.height/2,Me.yLabelMid=vt,Me.yLabelMax=vt+Ge.height/2,Me.labelExtraX=0,Me.labelExtraY=0,se=!0}Ue.fontSize=Pe.size,i(K.type,Ue,U),J[Ae].transform=Ue,f.setTransormAndDisplay(ze,Ue)})}function Ce(ze,Pe,Ue,Ge){var Xe=Ge*(Pe[0]-ze[0]),st=Ge*(Pe[1]-ze[1]);return"a"+Ge*ne.r+","+Ge*ne.r+" 0 "+Me.largeArc+(Ue?" 1 ":" 0 ")+Xe+","+st}});var de=v.select(this).selectAll("g.titletext").data(K.title.text?[0]:[]);if(de.enter().append("g").classed("titletext",!0),de.exit().remove(),de.each(function(){var Me,Ae=f.ensureSingle(v.select(this),"text","",function(ae){ae.attr("data-notex",1)}),ce=K.title.text;K._meta&&(ce=f.templateString(ce,K._meta)),Ae.text(ce).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(x.font,K.title.font).call(o.convertToTspans,Z),Me=K.title.position==="middle center"?function(ae){var pe=Math.sqrt(ae.titleBox.width*ae.titleBox.width+ae.titleBox.height*ae.titleBox.height);return{x:ae.cx,y:ae.cy,scale:ae.trace.hole*ae.r*2/pe,tx:0,ty:-ae.titleBox.height/2+ae.trace.title.font.size}}(ne):P(ne,re),Ae.attr("transform",t(Me.x,Me.y)+s(Math.min(1,Me.scale))+t(Me.tx,Me.ty))}),se&&function(Me,Ae){var ce,ae,pe,De,ke,Ee,Ie,Re,Ne,ge,we,Ce,ze;function Pe(st,at){return st.pxmid[1]-at.pxmid[1]}function Ue(st,at){return at.pxmid[1]-st.pxmid[1]}function Ge(st,at){at||(at={});var vt,xt,gt,rt,tt=at.labelExtraY+(ae?at.yLabelMax:at.yLabelMin),Mt=ae?st.yLabelMin:st.yLabelMax,Pt=ae?st.yLabelMax:st.yLabelMin,Rt=st.cyFinal+ke(st.px0[1],st.px1[1]),St=tt-Mt;if(St*Ie>0&&(st.labelExtraY=St),f.isArrayOrTypedArray(Ae.pull))for(xt=0;xt<ge.length;xt++)(gt=ge[xt])===st||(l.castOption(Ae.pull,st.pts)||0)>=(l.castOption(Ae.pull,gt.pts)||0)||((st.pxmid[1]-gt.pxmid[1])*Ie>0?(St=gt.cyFinal+ke(gt.px0[1],gt.px1[1])-Mt-st.labelExtraY)*Ie>0&&(st.labelExtraY+=St):(Pt+st.labelExtraY-Rt)*Ie>0&&(vt=3*Ee*Math.abs(xt-ge.indexOf(st)),(rt=gt.cxFinal+De(gt.px0[0],gt.px1[0])+vt-(st.cxFinal+st.pxmid[0])-st.labelExtraX)*Ee>0&&(st.labelExtraX+=rt)))}for(ae=0;ae<2;ae++)for(pe=ae?Pe:Ue,ke=ae?Math.max:Math.min,Ie=ae?1:-1,ce=0;ce<2;ce++){for(De=ce?Math.max:Math.min,Ee=ce?1:-1,(Re=Me[ae][ce]).sort(pe),Ne=Me[1-ae][ce],ge=Ne.concat(Re),Ce=[],we=0;we<Re.length;we++)Re[we].yLabelMid!==void 0&&Ce.push(Re[we]);for(ze=!1,we=0;ae&&we<Ne.length;we++)if(Ne[we].yLabelMid!==void 0){ze=Ne[we];break}for(we=0;we<Ce.length;we++){var Xe=we&&Ce[we-1];ze&&!we&&(Xe=ze),Ge(Ce[we],Xe)}}}(le,K),function(Me,Ae){Me.each(function(ce){var ae=v.select(this);if(ce.labelExtraX||ce.labelExtraY){var pe=ae.select("g.slicetext text");ce.transform.targetX+=ce.labelExtraX,ce.transform.targetY+=ce.labelExtraY,f.setTransormAndDisplay(pe,ce.transform);var De=ce.cxFinal+ce.pxmid[0],ke="M"+De+","+(ce.cyFinal+ce.pxmid[1]),Ee=(ce.yLabelMax-ce.yLabelMin)*(ce.pxmid[0]<0?-1:1)/4;if(ce.labelExtraX){var Ie=ce.labelExtraX*ce.pxmid[1]/ce.pxmid[0],Re=ce.yLabelMid+ce.labelExtraY-(ce.cyFinal+ce.pxmid[1]);Math.abs(Ie)>Math.abs(Re)?ke+="l"+Re*ce.pxmid[0]/ce.pxmid[1]+","+Re+"H"+(De+ce.labelExtraX+Ee):ke+="l"+ce.labelExtraX+","+Ie+"v"+(Re-Ie)+"h"+Ee}else ke+="V"+(ce.yLabelMid+ce.labelExtraY)+"h"+Ee;f.ensureSingle(ae,"path","textline").call(T.stroke,Ae.outsidetextfont.color).attr({"stroke-width":Math.min(2,Ae.outsidetextfont.size/8),d:ke,fill:"none"})}else ae.select("path.textline").remove()})}(oe,K),se&&K.automargin){var be=x.bBox(Q.node()),_e=K.domain,xe=re.w*(_e.x[1]-_e.x[0]),ve=re.h*(_e.y[1]-_e.y[0]),ye=(.5*xe-ne.r)/re.w,me=(.5*ve-ne.r)/re.h;w.autoMargin(Z,"pie."+K.uid+".automargin",{xl:_e.x[0]-ye,xr:_e.x[1]+ye,yb:_e.y[0]-me,yt:_e.y[1]+me,l:Math.max(ne.cx-ne.r-be.left,0),r:Math.max(be.right-(ne.cx+ne.r),0),b:Math.max(be.bottom-(ne.cy+ne.r),0),t:Math.max(ne.cy-ne.r-be.top,0),pad:5})}})});setTimeout(function(){ee.selectAll("tspan").each(function(){var J=v.select(this);J.attr("dy")&&J.attr("dy",J.attr("dy"))})},0)},formatSliceLabel:F,transformInsideText:m,determineInsideTextFont:p,positionTitleOutside:P,prerenderTitles:g,layoutAreas:N,attachFxHandlers:_,computeTransform:j}},22152:function(C,A,e){"use strict";var v=e(33428),w=e(10528),n=e(82744).resizeText;C.exports=function(T){var x=T._fullLayout._pielayer.selectAll(".trace");n(T,x,"pie"),x.each(function(f){var s=f[0].trace,t=v.select(this);t.style({opacity:s.opacity}),t.selectAll("path.surface").each(function(o){v.select(this).call(w,o,s,T)})})}},10528:function(C,A,e){"use strict";var v=e(76308),w=e(69656).castOption,n=e(21552);C.exports=function(T,x,f,s){var t=f.marker.line,o=w(t.color,x.pts)||v.defaultLine,r=w(t.width,x.pts)||0;T.call(n,x,f,s).style("stroke-width",r).call(v.stroke,o)}},35484:function(C,A,e){"use strict";var v=e(52904);C.exports={x:v.x,y:v.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:v.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},11072:function(C,A,e){"use strict";var v=e(67792).gl_pointcloud2d,w=e(3400).isArrayOrTypedArray,n=e(43080),T=e(19280).findExtremes,x=e(44928);function f(t,o){this.scene=t,this.uid=o,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=v(t.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var s=f.prototype;s.handlePick=function(t){var o=this.idToIndex[t.pointId];return{trace:this,dataCoord:t.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*o],this.pickXYData[2*o+1]]:[this.pickXData[o],this.pickYData[o]],textLabel:w(this.textLabels)?this.textLabels[o]:this.textLabels,color:this.color,name:this.name,pointIndex:o,hoverinfo:this.hoverinfo}},s.update=function(t){this.index=t.index,this.textLabels=t.text,this.name=t.name,this.hoverinfo=t.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(t),this.color=x(t,{})},s.updateFast=function(t){var o,r,i,a,u,l,d=this.xData=this.pickXData=t.x,c=this.yData=this.pickYData=t.y,_=this.pickXYData=t.xy,p=t.xbounds&&t.ybounds,g=t.indices,m=this.bounds;if(_){if(i=_,o=_.length>>>1,p)m[0]=t.xbounds[0],m[2]=t.xbounds[1],m[1]=t.ybounds[0],m[3]=t.ybounds[1];else for(l=0;l<o;l++)a=i[2*l],u=i[2*l+1],a<m[0]&&(m[0]=a),a>m[2]&&(m[2]=a),u<m[1]&&(m[1]=u),u>m[3]&&(m[3]=u);if(g)r=g;else for(r=new Int32Array(o),l=0;l<o;l++)r[l]=l}else for(o=d.length,i=new Float32Array(2*o),r=new Int32Array(o),l=0;l<o;l++)a=d[l],u=c[l],r[l]=l,i[2*l]=a,i[2*l+1]=u,a<m[0]&&(m[0]=a),a>m[2]&&(m[2]=a),u<m[1]&&(m[1]=u),u>m[3]&&(m[3]=u);this.idToIndex=r,this.pointcloudOptions.idToIndex=r,this.pointcloudOptions.positions=i;var b=n(t.marker.color),y=n(t.marker.border.color),M=t.opacity*t.marker.opacity;b[3]*=M,this.pointcloudOptions.color=b;var h=t.marker.blend;h===null&&(h=d.length<100||c.length<100),this.pointcloudOptions.blend=h,y[3]*=M,this.pointcloudOptions.borderColor=y;var E=t.marker.sizemin,k=Math.max(t.marker.sizemax,t.marker.sizemin);this.pointcloudOptions.sizeMin=E,this.pointcloudOptions.sizeMax=k,this.pointcloudOptions.areaRatio=t.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var D=this.scene.xaxis,P=this.scene.yaxis,L=k/2||.5;t._extremes[D._id]=T(D,[m[0],m[2]],{ppad:L}),t._extremes[P._id]=T(P,[m[1],m[3]],{ppad:L})},s.dispose=function(){this.pointcloud.dispose()},C.exports=function(t,o){var r=new f(t,o.uid);return r.update(o),r}},41904:function(C,A,e){"use strict";var v=e(3400),w=e(35484);C.exports=function(n,T,x){function f(s,t){return v.coerce(n,T,w,s,t)}f("x"),f("y"),f("xbounds"),f("ybounds"),n.xy&&n.xy instanceof Float32Array&&(T.xy=n.xy),n.indices&&n.indices instanceof Int32Array&&(T.indices=n.indices),f("text"),f("marker.color",x),f("marker.opacity"),f("marker.blend"),f("marker.sizemin"),f("marker.sizemax"),f("marker.border.color",x),f("marker.border.arearatio"),T._length=null}},156:function(C,A,e){"use strict";["*pointcloud* trace is deprecated!","Please consider switching to the *scattergl* trace type."].join(" "),C.exports={attributes:e(35484),supplyDefaults:e(41904),calc:e(41484),plot:e(11072),moduleType:"trace",name:"pointcloud",basePlotModule:e(39952),categories:["gl","gl2d","showLegend"],meta:{}}},41440:function(C,A,e){"use strict";var v=e(25376),w=e(45464),n=e(22548),T=e(55756),x=e(86968).u,f=e(21776).Ks,s=e(49084),t=e(31780).templatedArray,o=e(29736).descriptionOnlyNumbers,r=e(92880).extendFlat,i=e(67824).overrideAll;(C.exports=i({hoverinfo:r({},w.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:T.hoverlabel,domain:x({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:o("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:v({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:n.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:f({},{keys:["value","label"]}),align:{valType:"enumerated",values:["justify","left","right","center"],dflt:"justify"}},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},hovercolor:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:n.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:f({},{keys:["value","label"]}),colorscales:t("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:r(s().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},10760:function(C,A,e){"use strict";var v=e(67824).overrideAll,w=e(84888)._M,n=e(59596),T=e(65460),x=e(93972),f=e(86476),s=e(22676).prepSelect,t=e(3400),o=e(24040),r="sankey";function i(a,u){var l=a._fullData[u],d=a._fullLayout,c=d.dragmode,_=d.dragmode==="pan"?"move":"crosshair",p=l._bgRect;if(p&&c!=="pan"&&c!=="zoom"){x(p,_);var g={_id:"x",c2p:t.identity,_offset:l._sankey.translateX,_length:l._sankey.width},m={_id:"y",c2p:t.identity,_offset:l._sankey.translateY,_length:l._sankey.height},b={gd:a,element:p.node(),plotinfo:{id:u,xaxis:g,yaxis:m,fillRangeItems:t.noop},subplot:u,xaxes:[g],yaxes:[m],doneFnCompleted:function(y){var M,h=a._fullData[u],E=h.node.groups.slice(),k=[];function D(N){for(var V=h._sankey.graph.nodes,F=0;F<V.length;F++)if(V[F].pointNumber===N)return V[F]}for(var P=0;P<y.length;P++){var L=D(y[P].pointNumber);if(L)if(L.group){for(var O=0;O<L.childrenNodes.length;O++)k.push(L.childrenNodes[O].pointNumber);E[L.pointNumber-h.node._count]=!1}else k.push(L.pointNumber)}M=E.filter(Boolean).concat([k]),o.call("_guiRestyle",a,{"node.groups":[M]},u)},prepFn:function(y,M,h){s(y,M,h,b,c)}};f.init(b)}}A.name=r,A.baseLayoutAttrOverrides=v({hoverlabel:T.hoverlabel},"plot","nested"),A.plot=function(a){var u=w(a.calcdata,r)[0];n(a,u),A.updateFx(a)},A.clean=function(a,u,l,d){var c=d._has&&d._has(r),_=u._has&&u._has(r);c&&!_&&(d._paperdiv.selectAll(".sankey").remove(),d._paperdiv.selectAll(".bgsankey").remove())},A.updateFx=function(a){for(var u=0;u<a._fullData.length;u++)i(a,u)}},48068:function(C,A,e){"use strict";var v=e(78484),w=e(3400),n=e(71688).wrap,T=w.isArrayOrTypedArray,x=w.isIndex,f=e(8932);C.exports=function(s,t){var o=function(r){var i,a=r.node,u=r.link,l=[],d=T(u.color),c=T(u.hovercolor),_=T(u.customdata),p={},g={},m=u.colorscales.length;for(i=0;i<m;i++){var b=u.colorscales[i],y=f.extractScale(b,{cLetter:"c"}),M=f.makeColorScaleFunc(y);g[b.label]=M}var h=0;for(i=0;i<u.value.length;i++)u.source[i]>h&&(h=u.source[i]),u.target[i]>h&&(h=u.target[i]);var E,k=h+1;r.node._count=k;var D=r.node.groups,P={};for(i=0;i<D.length;i++){var L=D[i];for(E=0;E<L.length;E++){var O=L[E],N=k+i;P.hasOwnProperty(O)?w.warn("Node "+O+" is already part of a group."):P[O]=N}}var V={source:[],target:[]};for(i=0;i<u.value.length;i++){var F=u.value[i],j=u.source[i],Z=u.target[i];if(F>0&&x(j,k)&&x(Z,k)&&(!P.hasOwnProperty(j)||!P.hasOwnProperty(Z)||P[j]!==P[Z])){P.hasOwnProperty(Z)&&(Z=P[Z]),P.hasOwnProperty(j)&&(j=P[j]),Z=+Z,p[j=+j]=p[Z]=!0;var z="";u.label&&u.label[i]&&(z=u.label[i]);var H=null;z&&g.hasOwnProperty(z)&&(H=g[z]),l.push({pointNumber:i,label:z,color:d?u.color[i]:u.color,hovercolor:c?u.hovercolor[i]:u.hovercolor,customdata:_?u.customdata[i]:u.customdata,concentrationscale:H,source:j,target:Z,value:+F}),V.source.push(j),V.target.push(Z)}}var U=k+D.length,re=T(a.color),ee=T(a.customdata),J=[];for(i=0;i<U;i++)if(p[i]){var Q=a.label[i];J.push({group:i>k-1,childrenNodes:[],pointNumber:i,label:Q,color:re?a.color[i]:a.color,customdata:ee?a.customdata[i]:a.customdata})}var ne=!1;return function(K,oe,le){for(var se=w.init2dArray(K,0),de=0;de<Math.min(oe.length,le.length);de++)if(w.isIndex(oe[de],K)&&w.isIndex(le[de],K)){if(oe[de]===le[de])return!0;se[oe[de]].push(le[de])}return v(se).components.some(function(be){return be.length>1})}(U,V.source,V.target)&&(ne=!0),{circular:ne,links:l,nodes:J,groups:D,groupLookup:P}}(t);return n({circular:o.circular,_nodes:o.nodes,_links:o.links,_groups:o.groups,_groupLookup:o.groupLookup})}},11820:function(C){"use strict";C.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},47140:function(C,A,e){"use strict";var v=e(3400),w=e(41440),n=e(76308),T=e(49760),x=e(86968).Q,f=e(16132),s=e(31780),t=e(51272);function o(r,i){function a(u,l){return v.coerce(r,i,w.link.colorscales,u,l)}a("label"),a("cmin"),a("cmax"),a("colorscale")}C.exports=function(r,i,a,u){function l(D,P){return v.coerce(r,i,w,D,P)}var d=v.extendDeep(u.hoverlabel,r.hoverlabel),c=r.node,_=s.newContainer(i,"node");function p(D,P){return v.coerce(c,_,w.node,D,P)}p("label"),p("groups"),p("x"),p("y"),p("pad"),p("thickness"),p("line.color"),p("line.width"),p("hoverinfo",r.hoverinfo),f(c,_,p,d),p("hovertemplate"),p("align");var g=u.colorway;p("color",_.label.map(function(D,P){return n.addOpacity(function(L){return g[L%g.length]}(P),.8)})),p("customdata");var m=r.link||{},b=s.newContainer(i,"link");function y(D,P){return v.coerce(m,b,w.link,D,P)}y("label"),y("arrowlen"),y("source"),y("target"),y("value"),y("line.color"),y("line.width"),y("hoverinfo",r.hoverinfo),f(m,b,y,d),y("hovertemplate");var M,h=T(u.paper_bgcolor).getLuminance()<.333,E=y("color",h?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)");function k(D){var P=T(D);if(!P.isValid())return D;var L=P.getAlpha();return L<=.8?P.setAlpha(L+.2):P=h?P.brighten():P.darken(),P.toRgbString()}y("hovercolor",Array.isArray(E)?E.map(k):k(E)),y("customdata"),t(m,b,{name:"colorscales",handleItemDefaults:o}),x(i,u,l),l("orientation"),l("valueformat"),l("valuesuffix"),_.x.length&&_.y.length&&(M="freeform"),l("arrangement",M),v.coerceFont(l,"textfont",v.extendFlat({},u.font)),i._length=null}},45499:function(C,A,e){"use strict";C.exports={attributes:e(41440),supplyDefaults:e(47140),calc:e(48068),plot:e(59596),moduleType:"trace",name:"sankey",basePlotModule:e(10760),selectPoints:e(81128),categories:["noOpacity"],meta:{}}},59596:function(C,A,e){"use strict";var v=e(33428),w=e(3400),n=w.numberFormat,T=e(83248),x=e(93024),f=e(76308),s=e(11820).cn,t=w._;function o(m){return m!==""}function r(m,b){return m.filter(function(y){return y.key===b.traceId})}function i(m,b){v.select(m).select("path").style("fill-opacity",b),v.select(m).select("rect").style("fill-opacity",b)}function a(m){v.select(m).select("text.name").style("fill","black")}function u(m){return function(b){return m.node.sourceLinks.indexOf(b.link)!==-1||m.node.targetLinks.indexOf(b.link)!==-1}}function l(m){return function(b){return b.node.sourceLinks.indexOf(m.link)!==-1||b.node.targetLinks.indexOf(m.link)!==-1}}function d(m,b,y){b&&y&&r(y,b).selectAll("."+s.sankeyLink).filter(u(b)).call(_.bind(0,b,y,!1))}function c(m,b,y){b&&y&&r(y,b).selectAll("."+s.sankeyLink).filter(u(b)).call(p.bind(0,b,y,!1))}function _(m,b,y,M){M.style("fill",function(h){if(!h.link.concentrationscale)return h.tinyColorHoverHue}).style("fill-opacity",function(h){if(!h.link.concentrationscale)return h.tinyColorHoverAlpha}),M.each(function(h){var E=h.link.label;E!==""&&r(b,m).selectAll("."+s.sankeyLink).filter(function(k){return k.link.label===E}).style("fill",function(k){if(!k.link.concentrationscale)return k.tinyColorHoverHue}).style("fill-opacity",function(k){if(!k.link.concentrationscale)return k.tinyColorHoverAlpha})}),y&&r(b,m).selectAll("."+s.sankeyNode).filter(l(m)).call(d)}function p(m,b,y,M){M.style("fill",function(h){return h.tinyColorHue}).style("fill-opacity",function(h){return h.tinyColorAlpha}),M.each(function(h){var E=h.link.label;E!==""&&r(b,m).selectAll("."+s.sankeyLink).filter(function(k){return k.link.label===E}).style("fill",function(k){return k.tinyColorHue}).style("fill-opacity",function(k){return k.tinyColorAlpha})}),y&&r(b,m).selectAll(s.sankeyNode).filter(l(m)).call(c)}function g(m,b){var y=m.hoverlabel||{},M=w.nestedProperty(y,b).get();return!Array.isArray(M)&&M}C.exports=function(m,b){for(var y=m._fullLayout,M=y._paper,h=y._size,E=0;E<m._fullData.length;E++)if(m._fullData[E].visible&&m._fullData[E].type===s.sankey&&!m._fullData[E]._viewInitial){var k=m._fullData[E].node;m._fullData[E]._viewInitial={node:{groups:k.groups.slice(),x:k.x.slice(),y:k.y.slice()}}}var D=t(m,"source:")+" ",P=t(m,"target:")+" ",L=t(m,"concentration:")+" ",O=t(m,"incoming flow count:")+" ",N=t(m,"outgoing flow count:")+" ";T(m,M,b,{width:h.w,height:h.h,margin:{t:h.t,r:h.r,b:h.b,l:h.l}},{linkEvents:{hover:function(V,F,j){m._fullLayout.hovermode!==!1&&(v.select(V).call(_.bind(0,F,j,!0)),F.link.trace.link.hoverinfo!=="skip"&&(F.link.fullData=F.link.trace,m.emit("plotly_hover",{event:v.event,points:[F.link]})))},follow:function(V,F){if(m._fullLayout.hovermode!==!1){var j=F.link.trace.link;if(j.hoverinfo!=="none"&&j.hoverinfo!=="skip"){for(var Z=[],z=0,H=0;H<F.flow.links.length;H++){var U=F.flow.links[H];if(m._fullLayout.hovermode!=="closest"||F.link.pointNumber===U.pointNumber){F.link.pointNumber===U.pointNumber&&(z=H),U.fullData=U.trace,j=F.link.trace.link;var re=J(U),ee={valueLabel:n(F.valueFormat)(U.value)+F.valueSuffix};Z.push({x:re[0],y:re[1],name:ee.valueLabel,text:[U.label||"",D+U.source.label,P+U.target.label,U.concentrationscale?L+n("%0.2f")(U.flow.labelConcentration):""].filter(o).join("<br>"),color:g(j,"bgcolor")||f.addOpacity(U.color,1),borderColor:g(j,"bordercolor"),fontFamily:g(j,"font.family"),fontSize:g(j,"font.size"),fontColor:g(j,"font.color"),fontWeight:g(j,"font.weight"),fontStyle:g(j,"font.style"),fontVariant:g(j,"font.variant"),nameLength:g(j,"namelength"),textAlign:g(j,"align"),idealAlign:v.event.x<re[0]?"right":"left",hovertemplate:j.hovertemplate,hovertemplateLabels:ee,eventData:[U]})}}x.loneHover(Z,{container:y._hoverlayer.node(),outerContainer:y._paper.node(),gd:m,anchorIndex:z}).each(function(){F.link.concentrationscale||i(this,.65),a(this)})}}function J(Q){var ne,K;Q.circular?(ne=(Q.circularPathData.leftInnerExtent+Q.circularPathData.rightInnerExtent)/2,K=Q.circularPathData.verticalFullExtent):(ne=(Q.source.x1+Q.target.x0)/2,K=(Q.y0+Q.y1)/2);var oe=[ne,K];return Q.trace.orientation==="v"&&oe.reverse(),oe[0]+=F.parent.translateX,oe[1]+=F.parent.translateY,oe}},unhover:function(V,F,j){m._fullLayout.hovermode!==!1&&(v.select(V).call(p.bind(0,F,j,!0)),F.link.trace.link.hoverinfo!=="skip"&&(F.link.fullData=F.link.trace,m.emit("plotly_unhover",{event:v.event,points:[F.link]})),x.loneUnhover(y._hoverlayer.node()))},select:function(V,F){var j=F.link;j.originalEvent=v.event,m._hoverdata=[j],x.click(m,{target:!0})}},nodeEvents:{hover:function(V,F,j){m._fullLayout.hovermode!==!1&&(v.select(V).call(d,F,j),F.node.trace.node.hoverinfo!=="skip"&&(F.node.fullData=F.node.trace,m.emit("plotly_hover",{event:v.event,points:[F.node]})))},follow:function(V,F){if(m._fullLayout.hovermode!==!1){var j=F.node.trace.node;if(j.hoverinfo!=="none"&&j.hoverinfo!=="skip"){var Z=v.select(V).select("."+s.nodeRect),z=m._fullLayout._paperdiv.node().getBoundingClientRect(),H=Z.node().getBoundingClientRect(),U=H.left-2-z.left,re=H.right+2-z.left,ee=H.top+H.height/4-z.top,J={valueLabel:n(F.valueFormat)(F.node.value)+F.valueSuffix};F.node.fullData=F.node.trace,m._fullLayout._calcInverseTransform(m);var Q=m._fullLayout._invScaleX,ne=m._fullLayout._invScaleY,K=x.loneHover({x0:Q*U,x1:Q*re,y:ne*ee,name:n(F.valueFormat)(F.node.value)+F.valueSuffix,text:[F.node.label,O+F.node.targetLinks.length,N+F.node.sourceLinks.length].filter(o).join("<br>"),color:g(j,"bgcolor")||F.tinyColorHue,borderColor:g(j,"bordercolor"),fontFamily:g(j,"font.family"),fontSize:g(j,"font.size"),fontColor:g(j,"font.color"),fontWeight:g(j,"font.weight"),fontStyle:g(j,"font.style"),fontVariant:g(j,"font.variant"),nameLength:g(j,"namelength"),textAlign:g(j,"align"),idealAlign:"left",hovertemplate:j.hovertemplate,hovertemplateLabels:J,eventData:[F.node]},{container:y._hoverlayer.node(),outerContainer:y._paper.node(),gd:m});i(K,.85),a(K)}}},unhover:function(V,F,j){m._fullLayout.hovermode!==!1&&(v.select(V).call(c,F,j),F.node.trace.node.hoverinfo!=="skip"&&(F.node.fullData=F.node.trace,m.emit("plotly_unhover",{event:v.event,points:[F.node]})),x.loneUnhover(y._hoverlayer.node()))},select:function(V,F,j){var Z=F.node;Z.originalEvent=v.event,m._hoverdata=[Z],v.select(V).call(c,F,j),x.click(m,{target:!0})}}})}},83248:function(C,A,e){"use strict";var v=e(49812),w=e(67756).Gz,n=e(33428),T=e(26800),x=e(48932),f=e(11820),s=e(49760),t=e(76308),o=e(43616),r=e(3400),i=r.strTranslate,a=r.strRotate,u=e(71688),l=u.keyFun,d=u.repeat,c=u.unwrap,_=e(72736),p=e(24040),g=e(84284),m=g.CAP_SHIFT,b=g.LINE_SPACING;function y(H,U,re){var ee,J=c(U),Q=J.trace,ne=Q.domain,K=Q.orientation==="h",oe=Q.node.pad,le=Q.node.thickness,se={justify:T.sankeyJustify,left:T.sankeyLeft,right:T.sankeyRight,center:T.sankeyCenter}[Q.node.align],de=H.width*(ne.x[1]-ne.x[0]),be=H.height*(ne.y[1]-ne.y[0]),_e=J._nodes,xe=J._links,ve=J.circular;(ee=ve?x.sankeyCircular().circularLinkGap(0):T.sankey()).iterations(f.sankeyIterations).size(K?[de,be]:[be,de]).nodeWidth(le).nodePadding(oe).nodeId(function(Ie){return Ie.pointNumber}).nodeAlign(se).nodes(_e).links(xe);var ye,me,Me,Ae=ee();for(var ce in ee.nodePadding()<oe&&r.warn("node.pad was reduced to ",ee.nodePadding()," to fit within the figure."),J._groupLookup){var ae,pe=parseInt(J._groupLookup[ce]);for(ye=0;ye<Ae.nodes.length;ye++)if(Ae.nodes[ye].pointNumber===pe){ae=Ae.nodes[ye];break}if(ae){var De={pointNumber:parseInt(ce),x0:ae.x0,x1:ae.x1,y0:ae.y0,y1:ae.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};Ae.nodes.unshift(De),ae.childrenNodes.unshift(De)}}if(function(){for(ye=0;ye<Ae.nodes.length;ye++){var Ie,Re,Ne=Ae.nodes[ye],ge={};for(me=0;me<Ne.targetLinks.length;me++)Ie=(Re=Ne.targetLinks[me]).source.pointNumber+":"+Re.target.pointNumber,ge.hasOwnProperty(Ie)||(ge[Ie]=[]),ge[Ie].push(Re);var we=Object.keys(ge);for(me=0;me<we.length;me++){var Ce=ge[Ie=we[me]],ze=0,Pe={};for(Me=0;Me<Ce.length;Me++)Pe[(Re=Ce[Me]).label]||(Pe[Re.label]=0),Pe[Re.label]+=Re.value,ze+=Re.value;for(Me=0;Me<Ce.length;Me++)(Re=Ce[Me]).flow={value:ze,labelConcentration:Pe[Re.label]/ze,concentration:Re.value/ze,links:Ce},Re.concentrationscale&&(Re.color=s(Re.concentrationscale(Re.flow.labelConcentration)))}var Ue=0;for(me=0;me<Ne.sourceLinks.length;me++)Ue+=Ne.sourceLinks[me].value;for(me=0;me<Ne.sourceLinks.length;me++)(Re=Ne.sourceLinks[me]).concentrationOut=Re.value/Ue;var Ge=0;for(me=0;me<Ne.targetLinks.length;me++)Ge+=Ne.targetLinks[me].value;for(me=0;me<Ne.targetLinks.length;me++)(Re=Ne.targetLinks[me]).concenrationIn=Re.value/Ge}}(),Q.node.x.length&&Q.node.y.length){for(ye=0;ye<Math.min(Q.node.x.length,Q.node.y.length,Ae.nodes.length);ye++)if(Q.node.x[ye]&&Q.node.y[ye]){var ke=[Q.node.x[ye]*de,Q.node.y[ye]*be];Ae.nodes[ye].x0=ke[0]-le/2,Ae.nodes[ye].x1=ke[0]+le/2;var Ee=Ae.nodes[ye].y1-Ae.nodes[ye].y0;Ae.nodes[ye].y0=ke[1]-Ee/2,Ae.nodes[ye].y1=ke[1]+Ee/2}Q.arrangement==="snap"&&function(Ie){var Re,Ne,ge=Ie.map(function(Ue,Ge){return{x0:Ue.x0,index:Ge}}).sort(function(Ue,Ge){return Ue.x0-Ge.x0}),we=[],Ce=-1,ze=-1/0;for(ye=0;ye<ge.length;ye++){var Pe=Ie[ge[ye].index];Pe.x0>ze+le&&(Ce+=1,Re=Pe.x0),ze=Pe.x0,we[Ce]||(we[Ce]=[]),we[Ce].push(Pe),Ne=Re-Pe.x0,Pe.x0+=Ne,Pe.x1+=Ne}return we}(_e=Ae.nodes).forEach(function(Ie){var Re,Ne,ge,we=0,Ce=Ie.length;for(Ie.sort(function(ze,Pe){return ze.y0-Pe.y0}),ge=0;ge<Ce;++ge)(Re=Ie[ge]).y0>=we||(Ne=we-Re.y0)>1e-6&&(Re.y0+=Ne,Re.y1+=Ne),we=Re.y1+oe}),ee.update(Ae)}return{circular:ve,key:re,trace:Q,guid:r.randstr(),horizontal:K,width:de,height:be,nodePad:Q.node.pad,nodeLineColor:Q.node.line.color,nodeLineWidth:Q.node.line.width,linkLineColor:Q.link.line.color,linkLineWidth:Q.link.line.width,linkArrowLength:Q.link.arrowlen,valueFormat:Q.valueformat,valueSuffix:Q.valuesuffix,textFont:Q.textfont,translateX:ne.x[0]*H.width+H.margin.l,translateY:H.height-ne.y[1]*H.height+H.margin.t,dragParallel:K?be:de,dragPerpendicular:K?de:be,arrangement:Q.arrangement,sankey:ee,graph:Ae,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function M(H,U,re){var ee=s(U.color),J=s(U.hovercolor),Q=U.source.label+"|"+U.target.label+"__"+re;return U.trace=H.trace,U.curveNumber=H.trace.index,{circular:H.circular,key:Q,traceId:H.key,pointNumber:U.pointNumber,link:U,tinyColorHue:t.tinyRGB(ee),tinyColorAlpha:ee.getAlpha(),tinyColorHoverHue:t.tinyRGB(J),tinyColorHoverAlpha:J.getAlpha(),linkPath:h,linkLineColor:H.linkLineColor,linkLineWidth:H.linkLineWidth,linkArrowLength:H.linkArrowLength,valueFormat:H.valueFormat,valueSuffix:H.valueSuffix,sankey:H.sankey,parent:H,interactionState:H.interactionState,flow:U.flow}}function h(){return function(H){var U=H.linkArrowLength;if(H.link.circular)return function(ye,me){var Me=ye.width/2,Ae=ye.circularPathData;return ye.circularLinkType==="top"?"M "+(Ae.targetX-me)+" "+(Ae.targetY+Me)+" L"+(Ae.rightInnerExtent-me)+" "+(Ae.targetY+Me)+"A"+(Ae.rightLargeArcRadius+Me)+" "+(Ae.rightSmallArcRadius+Me)+" 0 0 1 "+(Ae.rightFullExtent-Me-me)+" "+(Ae.targetY-Ae.rightSmallArcRadius)+"L"+(Ae.rightFullExtent-Me-me)+" "+Ae.verticalRightInnerExtent+"A"+(Ae.rightLargeArcRadius+Me)+" "+(Ae.rightLargeArcRadius+Me)+" 0 0 1 "+(Ae.rightInnerExtent-me)+" "+(Ae.verticalFullExtent-Me)+"L"+Ae.leftInnerExtent+" "+(Ae.verticalFullExtent-Me)+"A"+(Ae.leftLargeArcRadius+Me)+" "+(Ae.leftLargeArcRadius+Me)+" 0 0 1 "+(Ae.leftFullExtent+Me)+" "+Ae.verticalLeftInnerExtent+"L"+(Ae.leftFullExtent+Me)+" "+(Ae.sourceY-Ae.leftSmallArcRadius)+"A"+(Ae.leftLargeArcRadius+Me)+" "+(Ae.leftSmallArcRadius+Me)+" 0 0 1 "+Ae.leftInnerExtent+" "+(Ae.sourceY+Me)+"L"+Ae.sourceX+" "+(Ae.sourceY+Me)+"L"+Ae.sourceX+" "+(Ae.sourceY-Me)+"L"+Ae.leftInnerExtent+" "+(Ae.sourceY-Me)+"A"+(Ae.leftLargeArcRadius-Me)+" "+(Ae.leftSmallArcRadius-Me)+" 0 0 0 "+(Ae.leftFullExtent-Me)+" "+(Ae.sourceY-Ae.leftSmallArcRadius)+"L"+(Ae.leftFullExtent-Me)+" "+Ae.verticalLeftInnerExtent+"A"+(Ae.leftLargeArcRadius-Me)+" "+(Ae.leftLargeArcRadius-Me)+" 0 0 0 "+Ae.leftInnerExtent+" "+(Ae.verticalFullExtent+Me)+"L"+(Ae.rightInnerExtent-me)+" "+(Ae.verticalFullExtent+Me)+"A"+(Ae.rightLargeArcRadius-Me)+" "+(Ae.rightLargeArcRadius-Me)+" 0 0 0 "+(Ae.rightFullExtent+Me-me)+" "+Ae.verticalRightInnerExtent+"L"+(Ae.rightFullExtent+Me-me)+" "+(Ae.targetY-Ae.rightSmallArcRadius)+"A"+(Ae.rightLargeArcRadius-Me)+" "+(Ae.rightSmallArcRadius-Me)+" 0 0 0 "+(Ae.rightInnerExtent-me)+" "+(Ae.targetY-Me)+"L"+(Ae.targetX-me)+" "+(Ae.targetY-Me)+(me>0?"L"+Ae.targetX+" "+Ae.targetY:"")+"Z":"M "+(Ae.targetX-me)+" "+(Ae.targetY-Me)+" L"+(Ae.rightInnerExtent-me)+" "+(Ae.targetY-Me)+"A"+(Ae.rightLargeArcRadius+Me)+" "+(Ae.rightSmallArcRadius+Me)+" 0 0 0 "+(Ae.rightFullExtent-Me-me)+" "+(Ae.targetY+Ae.rightSmallArcRadius)+"L"+(Ae.rightFullExtent-Me-me)+" "+Ae.verticalRightInnerExtent+"A"+(Ae.rightLargeArcRadius+Me)+" "+(Ae.rightLargeArcRadius+Me)+" 0 0 0 "+(Ae.rightInnerExtent-me)+" "+(Ae.verticalFullExtent+Me)+"L"+Ae.leftInnerExtent+" "+(Ae.verticalFullExtent+Me)+"A"+(Ae.leftLargeArcRadius+Me)+" "+(Ae.leftLargeArcRadius+Me)+" 0 0 0 "+(Ae.leftFullExtent+Me)+" "+Ae.verticalLeftInnerExtent+"L"+(Ae.leftFullExtent+Me)+" "+(Ae.sourceY+Ae.leftSmallArcRadius)+"A"+(Ae.leftLargeArcRadius+Me)+" "+(Ae.leftSmallArcRadius+Me)+" 0 0 0 "+Ae.leftInnerExtent+" "+(Ae.sourceY-Me)+"L"+Ae.sourceX+" "+(Ae.sourceY-Me)+"L"+Ae.sourceX+" "+(Ae.sourceY+Me)+"L"+Ae.leftInnerExtent+" "+(Ae.sourceY+Me)+"A"+(Ae.leftLargeArcRadius-Me)+" "+(Ae.leftSmallArcRadius-Me)+" 0 0 1 "+(Ae.leftFullExtent-Me)+" "+(Ae.sourceY+Ae.leftSmallArcRadius)+"L"+(Ae.leftFullExtent-Me)+" "+Ae.verticalLeftInnerExtent+"A"+(Ae.leftLargeArcRadius-Me)+" "+(Ae.leftLargeArcRadius-Me)+" 0 0 1 "+Ae.leftInnerExtent+" "+(Ae.verticalFullExtent-Me)+"L"+(Ae.rightInnerExtent-me)+" "+(Ae.verticalFullExtent-Me)+"A"+(Ae.rightLargeArcRadius-Me)+" "+(Ae.rightLargeArcRadius-Me)+" 0 0 1 "+(Ae.rightFullExtent+Me-me)+" "+Ae.verticalRightInnerExtent+"L"+(Ae.rightFullExtent+Me-me)+" "+(Ae.targetY+Ae.rightSmallArcRadius)+"A"+(Ae.rightLargeArcRadius-Me)+" "+(Ae.rightSmallArcRadius-Me)+" 0 0 1 "+(Ae.rightInnerExtent-me)+" "+(Ae.targetY+Me)+"L"+(Ae.targetX-me)+" "+(Ae.targetY+Me)+(me>0?"L"+Ae.targetX+" "+Ae.targetY:"")+"Z"}(H.link,U);var re=Math.abs((H.link.target.x0-H.link.source.x1)/2);U>re&&(U=re);var ee=H.link.source.x1,J=H.link.target.x0-U,Q=w(ee,J),ne=Q(.5),K=Q(.5),oe=H.link.y0-H.link.width/2,le=H.link.y0+H.link.width/2,se=H.link.y1-H.link.width/2,de=H.link.y1+H.link.width/2,be="M"+ee+","+oe,_e="C"+ne+","+oe+" "+K+","+se+" "+J+","+se,xe="C"+K+","+de+" "+ne+","+le+" "+ee+","+le,ve=U>0?"L"+(J+U)+","+(se+H.link.width/2):"";return be+_e+(ve+="L"+J+","+de)+xe+"Z"}}function E(H,U){var re=s(U.color),ee=f.nodePadAcross,J=H.nodePad/2;U.dx=U.x1-U.x0,U.dy=U.y1-U.y0;var Q=U.dx,ne=Math.max(.5,U.dy),K="node_"+U.pointNumber;return U.group&&(K=r.randstr()),U.trace=H.trace,U.curveNumber=H.trace.index,{index:U.pointNumber,key:K,partOfGroup:U.partOfGroup||!1,group:U.group,traceId:H.key,trace:H.trace,node:U,nodePad:H.nodePad,nodeLineColor:H.nodeLineColor,nodeLineWidth:H.nodeLineWidth,textFont:H.textFont,size:H.horizontal?H.height:H.width,visibleWidth:Math.ceil(Q),visibleHeight:ne,zoneX:-ee,zoneY:-J,zoneWidth:Q+2*ee,zoneHeight:ne+2*J,labelY:H.horizontal?U.dy/2+1:U.dx/2+1,left:U.originalLayer===1,sizeAcross:H.width,forceLayouts:H.forceLayouts,horizontal:H.horizontal,darkBackground:re.getBrightness()<=128,tinyColorHue:t.tinyRGB(re),tinyColorAlpha:re.getAlpha(),valueFormat:H.valueFormat,valueSuffix:H.valueSuffix,sankey:H.sankey,graph:H.graph,arrangement:H.arrangement,uniqueNodeLabelPathId:[H.guid,H.key,K].join("_"),interactionState:H.interactionState,figure:H}}function k(H){H.attr("transform",function(U){return i(U.node.x0.toFixed(3),U.node.y0.toFixed(3))})}function D(H){H.call(k)}function P(H,U){H.call(D),U.attr("d",h())}function L(H){H.attr("width",function(U){return U.node.x1-U.node.x0}).attr("height",function(U){return U.visibleHeight})}function O(H){return H.link.width>1||H.linkLineWidth>0}function N(H){return i(H.translateX,H.translateY)+(H.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function V(H,U,re){H.on(".basic",null).on("mouseover.basic",function(ee){ee.interactionState.dragInProgress||ee.partOfGroup||(re.hover(this,ee,U),ee.interactionState.hovered=[this,ee])}).on("mousemove.basic",function(ee){ee.interactionState.dragInProgress||ee.partOfGroup||(re.follow(this,ee),ee.interactionState.hovered=[this,ee])}).on("mouseout.basic",function(ee){ee.interactionState.dragInProgress||ee.partOfGroup||(re.unhover(this,ee,U),ee.interactionState.hovered=!1)}).on("click.basic",function(ee){ee.interactionState.hovered&&(re.unhover(this,ee,U),ee.interactionState.hovered=!1),ee.interactionState.dragInProgress||ee.partOfGroup||re.select(this,ee,U)})}function F(H,U,re,ee){var J=n.behavior.drag().origin(function(Q){return{x:Q.node.x0+Q.visibleWidth/2,y:Q.node.y0+Q.visibleHeight/2}}).on("dragstart",function(Q){if(Q.arrangement!=="fixed"&&(r.ensureSingle(ee._fullLayout._infolayer,"g","dragcover",function(K){ee._fullLayout._dragCover=K}),r.raiseToTop(this),Q.interactionState.dragInProgress=Q.node,Z(Q.node),Q.interactionState.hovered&&(re.nodeEvents.unhover.apply(0,Q.interactionState.hovered),Q.interactionState.hovered=!1),Q.arrangement==="snap")){var ne=Q.traceId+"|"+Q.key;Q.forceLayouts[ne]?Q.forceLayouts[ne].alpha(1):function(K,oe,le,se){(function(be){for(var _e=0;_e<be.length;_e++)be[_e].y=(be[_e].y0+be[_e].y1)/2,be[_e].x=(be[_e].x0+be[_e].x1)/2})(le.graph.nodes);var de=le.graph.nodes.filter(function(be){return be.originalX===le.node.originalX}).filter(function(be){return!be.partOfGroup});le.forceLayouts[oe]=v.forceSimulation(de).alphaDecay(0).force("collide",v.forceCollide().radius(function(be){return be.dy/2+le.nodePad/2}).strength(1).iterations(f.forceIterations)).force("constrain",function(be,_e,xe,ve){return function(){for(var ye=0,me=0;me<xe.length;me++){var Me=xe[me];Me===ve.interactionState.dragInProgress?(Me.x=Me.lastDraggedX,Me.y=Me.lastDraggedY):(Me.vx=(Me.originalX-Me.x)/f.forceTicksPerFrame,Me.y=Math.min(ve.size-Me.dy/2,Math.max(Me.dy/2,Me.y))),ye=Math.max(ye,Math.abs(Me.vx),Math.abs(Me.vy))}!ve.interactionState.dragInProgress&&ye<.1&&ve.forceLayouts[_e].alpha()>0&&ve.forceLayouts[_e].alpha(0)}}(0,oe,de,le)).stop()}(0,ne,Q),function(K,oe,le,se,de){window.requestAnimationFrame(function be(){var _e;for(_e=0;_e<f.forceTicksPerFrame;_e++)le.forceLayouts[se].tick();if(function(ve){for(var ye=0;ye<ve.length;ye++)ve[ye].y0=ve[ye].y-ve[ye].dy/2,ve[ye].y1=ve[ye].y0+ve[ye].dy,ve[ye].x0=ve[ye].x-ve[ye].dx/2,ve[ye].x1=ve[ye].x0+ve[ye].dx}(le.graph.nodes),le.sankey.update(le.graph),P(K.filter(z(le)),oe),le.forceLayouts[se].alpha()>0)window.requestAnimationFrame(be);else{var xe=le.node.originalX;le.node.x0=xe-le.visibleWidth/2,le.node.x1=xe+le.visibleWidth/2,j(le,de)}})}(H,U,Q,ne,ee)}}).on("drag",function(Q){if(Q.arrangement!=="fixed"){var ne=n.event.x,K=n.event.y;Q.arrangement==="snap"?(Q.node.x0=ne-Q.visibleWidth/2,Q.node.x1=ne+Q.visibleWidth/2,Q.node.y0=K-Q.visibleHeight/2,Q.node.y1=K+Q.visibleHeight/2):(Q.arrangement==="freeform"&&(Q.node.x0=ne-Q.visibleWidth/2,Q.node.x1=ne+Q.visibleWidth/2),K=Math.max(0,Math.min(Q.size-Q.visibleHeight/2,K)),Q.node.y0=K-Q.visibleHeight/2,Q.node.y1=K+Q.visibleHeight/2),Z(Q.node),Q.arrangement!=="snap"&&(Q.sankey.update(Q.graph),P(H.filter(z(Q)),U))}}).on("dragend",function(Q){if(Q.arrangement!=="fixed"){Q.interactionState.dragInProgress=!1;for(var ne=0;ne<Q.node.childrenNodes.length;ne++)Q.node.childrenNodes[ne].x=Q.node.x,Q.node.childrenNodes[ne].y=Q.node.y;Q.arrangement!=="snap"&&j(Q,ee)}});H.on(".drag",null).call(J)}function j(H,U){for(var re=[],ee=[],J=0;J<H.graph.nodes.length;J++){var Q=(H.graph.nodes[J].x0+H.graph.nodes[J].x1)/2,ne=(H.graph.nodes[J].y0+H.graph.nodes[J].y1)/2;re.push(Q/H.figure.width),ee.push(ne/H.figure.height)}p.call("_guiRestyle",U,{"node.x":[re],"node.y":[ee]},H.trace.index).then(function(){U._fullLayout._dragCover&&U._fullLayout._dragCover.remove()})}function Z(H){H.lastDraggedX=H.x0+H.dx/2,H.lastDraggedY=H.y0+H.dy/2}function z(H){return function(U){return U.node.originalX===H.node.originalX}}C.exports=function(H,U,re,ee,J){var Q=H._context.staticPlot,ne=!1;r.ensureSingle(H._fullLayout._infolayer,"g","first-render",function(){ne=!0});var K=H._fullLayout._dragCover,oe=re.filter(function(ye){return c(ye).trace.visible}).map(y.bind(null,ee)),le=U.selectAll("."+f.cn.sankey).data(oe,l);le.exit().remove(),le.enter().append("g").classed(f.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",Q?"none":"auto").attr("transform",N),le.each(function(ye,me){H._fullData[me]._sankey=ye;var Me="bgsankey-"+ye.trace.uid+"-"+me;r.ensureSingle(H._fullLayout._draggers,"rect",Me),H._fullData[me]._bgRect=n.select("."+Me),H._fullData[me]._bgRect.style("pointer-events",Q?"none":"all").attr("width",ye.width).attr("height",ye.height).attr("x",ye.translateX).attr("y",ye.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),le.transition().ease(f.ease).duration(f.duration).attr("transform",N);var se=le.selectAll("."+f.cn.sankeyLinks).data(d,l);se.enter().append("g").classed(f.cn.sankeyLinks,!0).style("fill","none");var de=se.selectAll("."+f.cn.sankeyLink).data(function(ye){return ye.graph.links.filter(function(me){return me.value}).map(M.bind(null,ye))},l);de.enter().append("path").classed(f.cn.sankeyLink,!0).call(V,le,J.linkEvents),de.style("stroke",function(ye){return O(ye)?t.tinyRGB(s(ye.linkLineColor)):ye.tinyColorHue}).style("stroke-opacity",function(ye){return O(ye)?t.opacity(ye.linkLineColor):ye.tinyColorAlpha}).style("fill",function(ye){return ye.tinyColorHue}).style("fill-opacity",function(ye){return ye.tinyColorAlpha}).style("stroke-width",function(ye){return O(ye)?ye.linkLineWidth:1}).attr("d",h()),de.style("opacity",function(){return H._context.staticPlot||ne||K?1:0}).transition().ease(f.ease).duration(f.duration).style("opacity",1),de.exit().transition().ease(f.ease).duration(f.duration).style("opacity",0).remove();var be=le.selectAll("."+f.cn.sankeyNodeSet).data(d,l);be.enter().append("g").classed(f.cn.sankeyNodeSet,!0),be.style("cursor",function(ye){switch(ye.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var _e=be.selectAll("."+f.cn.sankeyNode).data(function(ye){var me=ye.graph.nodes;return function(Me){var Ae,ce=[];for(Ae=0;Ae<Me.length;Ae++)Me[Ae].originalX=(Me[Ae].x0+Me[Ae].x1)/2,Me[Ae].originalY=(Me[Ae].y0+Me[Ae].y1)/2,ce.indexOf(Me[Ae].originalX)===-1&&ce.push(Me[Ae].originalX);for(ce.sort(function(ae,pe){return ae-pe}),Ae=0;Ae<Me.length;Ae++)Me[Ae].originalLayerIndex=ce.indexOf(Me[Ae].originalX),Me[Ae].originalLayer=Me[Ae].originalLayerIndex/(ce.length-1)}(me),me.map(E.bind(null,ye))},l);_e.enter().append("g").classed(f.cn.sankeyNode,!0).call(k).style("opacity",function(ye){return!H._context.staticPlot&&!ne||ye.partOfGroup?0:1}),_e.call(V,le,J.nodeEvents).call(F,de,J,H),_e.transition().ease(f.ease).duration(f.duration).call(k).style("opacity",function(ye){return ye.partOfGroup?0:1}),_e.exit().transition().ease(f.ease).duration(f.duration).style("opacity",0).remove();var xe=_e.selectAll("."+f.cn.nodeRect).data(d);xe.enter().append("rect").classed(f.cn.nodeRect,!0).call(L),xe.style("stroke-width",function(ye){return ye.nodeLineWidth}).style("stroke",function(ye){return t.tinyRGB(s(ye.nodeLineColor))}).style("stroke-opacity",function(ye){return t.opacity(ye.nodeLineColor)}).style("fill",function(ye){return ye.tinyColorHue}).style("fill-opacity",function(ye){return ye.tinyColorAlpha}),xe.transition().ease(f.ease).duration(f.duration).call(L);var ve=_e.selectAll("."+f.cn.nodeLabel).data(d);ve.enter().append("text").classed(f.cn.nodeLabel,!0).style("cursor","default"),ve.attr("data-notex",1).text(function(ye){return ye.node.label}).each(function(ye){var me=n.select(this);o.font(me,ye.textFont),_.convertToTspans(me,H)}).style("text-shadow",_.makeTextShadow(H._fullLayout.paper_bgcolor)).attr("text-anchor",function(ye){return ye.horizontal&&ye.left?"end":"start"}).attr("transform",function(ye){var me=n.select(this),Me=_.lineCount(me),Ae=ye.textFont.size*((Me-1)*b-m),ce=ye.nodeLineWidth/2+3,ae=((ye.horizontal?ye.visibleHeight:ye.visibleWidth)-Ae)/2;ye.horizontal&&(ye.left?ce=-ce:ce+=ye.visibleWidth);var pe=ye.horizontal?"":"scale(-1,1)"+a(90);return i(ye.horizontal?ce:ae,ye.horizontal?ae:ce)+pe}),ve.transition().ease(f.ease).duration(f.duration)}},81128:function(C){"use strict";C.exports=function(A,e){for(var v=[],w=A.cd[0].trace,n=w._sankey.graph.nodes,T=0;T<n.length;T++){var x=n[T];if(!x.partOfGroup){var f=[(x.x0+x.x1)/2,(x.y0+x.y1)/2];w.orientation==="v"&&f.reverse(),e&&e.contains(f,!1,T,A)&&v.push({pointNumber:x.pointNumber})}}return v}},20148:function(C,A,e){"use strict";var v=e(3400);C.exports=function(w,n){for(var T=0;T<w.length;T++)w[T].i=T;v.mergeArray(n.text,w,"tx"),v.mergeArray(n.texttemplate,w,"txt"),v.mergeArray(n.hovertext,w,"htx"),v.mergeArray(n.customdata,w,"data"),v.mergeArray(n.textposition,w,"tp"),n.textfont&&(v.mergeArrayCastPositive(n.textfont.size,w,"ts"),v.mergeArray(n.textfont.color,w,"tc"),v.mergeArray(n.textfont.family,w,"tf"),v.mergeArray(n.textfont.weight,w,"tw"),v.mergeArray(n.textfont.style,w,"ty"),v.mergeArray(n.textfont.variant,w,"tv"));var x=n.marker;if(x){v.mergeArrayCastPositive(x.size,w,"ms"),v.mergeArrayCastPositive(x.opacity,w,"mo"),v.mergeArray(x.symbol,w,"mx"),v.mergeArray(x.angle,w,"ma"),v.mergeArray(x.standoff,w,"mf"),v.mergeArray(x.color,w,"mc");var f=x.line;x.line&&(v.mergeArray(f.color,w,"mlc"),v.mergeArrayCastPositive(f.width,w,"mlw"));var s=x.gradient;s&&s.type!=="none"&&(v.mergeArray(s.type,w,"mgt"),v.mergeArray(s.color,w,"mgc"))}}},52904:function(C,A,e){"use strict";var v=e(29736).axisHoverFormat,w=e(21776).Gw,n=e(21776).Ks,T=e(49084),x=e(25376),f=e(98192).u,s=e(98192).c,t=e(43616),o=e(88200),r=e(92880).extendFlat,i=e(98304);C.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:v("x"),yhoverformat:v("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:w({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:n({},{keys:o.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:r({},f,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:i(!0),fillgradient:r({type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],dflt:"none",editType:"calc"},start:{valType:"number",editType:"calc"},stop:{valType:"number",editType:"calc"},colorscale:{valType:"colorscale",editType:"style"},editType:"calc"}),fillpattern:s,marker:r({symbol:{valType:"enumerated",values:t.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:r({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},T("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},T("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:x({editType:"calc",colorEditType:"style",arrayOk:!0}),zorder:{valType:"integer",dflt:0,editType:"plot"}}},16356:function(C,A,e){"use strict";var v=e(38248),w=e(3400),n=e(54460),T=e(1220),x=e(39032).BADNUM,f=e(43028),s=e(90136),t=e(20148),o=e(4500);function r(d,c,_,p,g,m,b){var y=c._length,M=d._fullLayout,h=_._id,E=p._id,k=M._firstScatter[u(c)]===c.uid,D=(l(c,M,_,p)||{}).orientation,P=c.fill;_._minDtick=0,p._minDtick=0;var L={padded:!0},O={padded:!0};b&&(L.ppad=O.ppad=b);var N=y<2||g[0]!==g[y-1]||m[0]!==m[y-1];N&&(P==="tozerox"||P==="tonextx"&&(k||D==="h"))?L.tozero=!0:(c.error_y||{}).visible||P!=="tonexty"&&P!=="tozeroy"&&(f.hasMarkers(c)||f.hasText(c))||(L.padded=!1,L.ppad=0),N&&(P==="tozeroy"||P==="tonexty"&&(k||D==="v"))?O.tozero=!0:P!=="tonextx"&&P!=="tozerox"||(O.padded=!1),h&&(c._extremes[h]=n.findExtremes(_,g,L)),E&&(c._extremes[E]=n.findExtremes(p,m,O))}function i(d,c){if(f.hasMarkers(d)){var _,p=d.marker,g=1.6*(d.marker.sizeref||1);if(_=d.marker.sizemode==="area"?function(h){return Math.max(Math.sqrt((h||0)/g),3)}:function(h){return Math.max((h||0)/g,3)},w.isArrayOrTypedArray(p.size)){var m={type:"linear"};n.setConvert(m);for(var b=m.makeCalcdata(d.marker,"size"),y=new Array(c),M=0;M<c;M++)y[M]=_(b[M]);return y}return _(p.size)}}function a(d,c){var _=u(c),p=d._firstScatter;p[_]||(p[_]=c.uid)}function u(d){var c=d.stackgroup;return d.xaxis+d.yaxis+d.type+(c?"-"+c:"")}function l(d,c,_,p){var g=d.stackgroup;if(g){var m=c._scatterStackOpts[_._id+p._id][g],b=m.orientation==="v"?p:_;return b.type==="linear"||b.type==="log"?m:void 0}}C.exports={calc:function(d,c){var _,p,g,m,b,y,M=d._fullLayout,h=c._xA=n.getFromId(d,c.xaxis||"x","x"),E=c._yA=n.getFromId(d,c.yaxis||"y","y"),k=h.makeCalcdata(c,"x"),D=E.makeCalcdata(c,"y"),P=T(c,h,"x",k),L=T(c,E,"y",D),O=P.vals,N=L.vals,V=c._length,F=new Array(V),j=c.ids,Z=l(c,M,h,E),z=!1;a(M,c);var H,U="x",re="y";Z?(w.pushUnique(Z.traceIndices,c._expandedIndex),(_=Z.orientation==="v")?(re="s",H="x"):(U="s",H="y"),b=Z.stackgaps==="interpolate"):r(d,c,h,E,O,N,i(c,V));var ee=!!c.xperiodalignment,J=!!c.yperiodalignment;for(p=0;p<V;p++){var Q=F[p]={},ne=v(O[p]),K=v(N[p]);ne&&K?(Q[U]=O[p],Q[re]=N[p],ee&&(Q.orig_x=k[p],Q.xEnd=P.ends[p],Q.xStart=P.starts[p]),J&&(Q.orig_y=D[p],Q.yEnd=L.ends[p],Q.yStart=L.starts[p])):Z&&(_?ne:K)?(Q[H]=_?O[p]:N[p],Q.gap=!0,b?(Q.s=x,z=!0):Q.s=0):Q[U]=Q[re]=x,j&&(Q.id=String(j[p]))}if(t(F,c),s(d,c),o(F,c),Z){for(p=0;p<F.length;)F[p][H]===x?F.splice(p,1):p++;if(w.sort(F,function(de,be){return de[H]-be[H]||de.i-be.i}),z){for(p=0;p<F.length-1&&F[p].gap;)p++;for((y=F[p].s)||(y=F[p].s=0),g=0;g<p;g++)F[g].s=y;for(m=F.length-1;m>p&&F[m].gap;)m--;for(y=F[m].s,g=F.length-1;g>m;g--)F[g].s=y;for(;p<m;)if(F[++p].gap){for(g=p+1;F[g].gap;)g++;for(var oe=F[p-1][H],le=F[p-1].s,se=(F[g].s-le)/(F[g][H]-oe);p<g;)F[p].s=le+(F[p][H]-oe)*se,p++}}}return F},calcMarkerSize:i,calcAxisExpansion:r,setFirstScatter:a,getStackOpts:l}},4500:function(C,A,e){"use strict";var v=e(3400);C.exports=function(w,n){v.isArrayOrTypedArray(n.selectedpoints)&&v.tagSelected(w,n)}},90136:function(C,A,e){"use strict";var v=e(94288).hasColorscale,w=e(47128),n=e(43028);C.exports=function(T,x){n.hasLines(x)&&v(x,"line")&&w(T,x,{vals:x.line.color,containerStr:"line",cLetter:"c"}),n.hasMarkers(x)&&(v(x,"marker")&&w(T,x,{vals:x.marker.color,containerStr:"marker",cLetter:"c"}),v(x,"marker.line")&&w(T,x,{vals:x.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},88200:function(C){"use strict";C.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},96664:function(C,A,e){"use strict";var v=e(16356),w=e(96376).setGroupPositions;function n(T,x,f,s,t,o,r){t[s]=!0;var i={i:null,gap:!0,s:0};if(i[r]=f,T.splice(x,0,i),x&&f===T[x-1][r]){var a=T[x-1];i.s=a.s,i.i=a.i,i.gap=a.gap}else o&&(i.s=function(u,l,d,c){var _=u[l-1],p=u[l+1];return p?_?_.s+(p.s-_.s)*(d-_[c])/(p[c]-_[c]):p.s:_.s}(T,x,f,r));x||(T[0].t=T[1].t,T[0].trace=T[1].trace,delete T[1].t,delete T[1].trace)}C.exports=function(T,x){T._fullLayout.scattermode==="group"&&function(H,U){for(var re=U.xaxis,ee=U.yaxis,J=H._fullLayout,Q=H._fullData,ne=H.calcdata,K=[],oe=[],le=0;le<Q.length;le++){var se=Q[le];se.visible===!0&&se.type==="scatter"&&se.xaxis===re._id&&se.yaxis===ee._id&&(se.orientation==="h"?K.push(ne[le]):se.orientation==="v"&&oe.push(ne[le]))}var de={mode:J.scattermode,gap:J.scattergap};w(H,re,ee,oe,de),w(H,ee,re,K,de)}(T,x);var f=x.xaxis,s=x.yaxis,t=f._id+s._id,o=T._fullLayout._scatterStackOpts[t];if(o){var r,i,a,u,l,d,c,_,p,g,m,b,y,M,h,E=T.calcdata;for(var k in o){var D=(g=o[k]).traceIndices;if(D.length){for(m=g.stackgaps==="interpolate",b=g.groupnorm,g.orientation==="v"?(y="x",M="y"):(y="y",M="x"),h=new Array(D.length),r=0;r<h.length;r++)h[r]=!1;d=E[D[0]];var P=new Array(d.length);for(r=0;r<d.length;r++)P[r]=d[r][y];for(r=1;r<D.length;r++){for(l=E[D[r]],i=a=0;i<l.length;i++){for(c=l[i][y];c>P[a]&&a<P.length;a++)n(l,i,P[a],r,h,m,y),i++;if(c!==P[a]){for(u=0;u<r;u++)n(E[D[u]],a,c,u,h,m,y);P.splice(a,0,c)}a++}for(;a<P.length;a++)n(l,i,P[a],r,h,m,y),i++}var L=P.length;for(i=0;i<d.length;i++){for(_=d[i][M]=d[i].s,r=1;r<D.length;r++)(l=E[D[r]])[0].trace._rawLength=l[0].trace._length,l[0].trace._length=L,_+=l[i].s,l[i][M]=_;if(b)for(p=(b==="fraction"?_:_/100)||1,r=0;r<D.length;r++){var O=E[D[r]][i];O[M]/=p,O.sNorm=O.s/p}}for(r=0;r<D.length;r++){var N=(l=E[D[r]])[0].trace,V=v.calcMarkerSize(N,N._rawLength),F=Array.isArray(V);if(V&&h[r]||F){var j=V;for(V=new Array(L),i=0;i<L;i++)V[i]=l[i].gap?0:F?j[l[i].i]:j}var Z=new Array(L),z=new Array(L);for(i=0;i<L;i++)Z[i]=l[i].x,z[i]=l[i].y;v.calcAxisExpansion(T,N,f,s,Z,z,V),l[0].t.orientation=g.orientation}}}}}},35036:function(C,A,e){"use strict";var v=e(3400),w=e(20011),n=e(52904);C.exports=function(T,x){var f,s,t;function o(l){return v.coerce(s._input,s,n,l)}if(x.scattermode==="group")for(t=0;t<T.length;t++)(s=T[t]).type==="scatter"&&(f=s._input,w(f,s,x,o));for(t=0;t<T.length;t++){var r=T[t];if(r.type==="scatter"){var i=r.fill;if(i!=="none"&&i!=="toself"&&(r.opacity=void 0,i==="tonexty"||i==="tonextx"))for(var a=t-1;a>=0;a--){var u=T[a];if(u.type==="scatter"&&u.xaxis===r.xaxis&&u.yaxis===r.yaxis){u.opacity=void 0;break}}}}}},18800:function(C,A,e){"use strict";var v=e(3400),w=e(24040),n=e(52904),T=e(88200),x=e(43028),f=e(43980),s=e(31147),t=e(43912),o=e(74428),r=e(66828),i=e(11731),a=e(124),u=e(70840),l=e(3400).coercePattern;C.exports=function(d,c,_,p){function g(D,P){return v.coerce(d,c,n,D,P)}var m=f(d,c,p,g);if(m||(c.visible=!1),c.visible){s(d,c,p,g),g("xhoverformat"),g("yhoverformat"),g("zorder");var b=t(d,c,p,g);p.scattermode==="group"&&c.orientation===void 0&&g("orientation","v");var y=!b&&m<T.PTS_LINESONLY?"lines+markers":"lines";g("text"),g("hovertext"),g("mode",y),x.hasMarkers(c)&&o(d,c,_,p,g,{gradient:!0}),x.hasLines(c)&&(r(d,c,_,p,g,{backoff:!0}),i(d,c,g),g("connectgaps"),g("line.simplify")),x.hasText(c)&&(g("texttemplate"),a(d,c,p,g));var M=[];(x.hasMarkers(c)||x.hasText(c))&&(g("cliponaxis"),g("marker.maxdisplayed"),M.push("points")),g("fill",b?b.fillDflt:"none"),c.fill!=="none"&&(u(d,c,_,g,{moduleHasFillgradient:!0}),x.hasLines(c)||i(d,c,g),l(g,"fillpattern",c.fillcolor,!1));var h=(c.line||{}).color,E=(c.marker||{}).color;c.fill!=="tonext"&&c.fill!=="toself"||M.push("fills"),g("hoveron",M.join("+")||"points"),c.hoveron!=="fills"&&g("hovertemplate");var k=w.getComponentMethod("errorbars","supplyDefaults");k(d,c,h||E||_,{axis:"y"}),k(d,c,h||E||_,{axis:"x",inherit:"y"}),v.coerceSelectionMarkerOpacity(c,g)}}},98304:function(C){"use strict";C.exports=function(A){return{valType:"color",editType:"style",anim:!0}}},70840:function(C,A,e){"use strict";var v=e(76308),w=e(3400).isArrayOrTypedArray;C.exports=function(n,T,x,f,s){s||(s={});var t,o=!1;if(T.marker){var r=T.marker.color,i=(T.marker.line||{}).color;r&&!w(r)?o=r:i&&!w(i)&&(o=i)}if(s.moduleHasFillgradient&&f("fillgradient.type")!=="none"){f("fillgradient.start"),f("fillgradient.stop");var a=f("fillgradient.colorscale");a&&(t=function(u){for(var l=v.interpolate(u[0][1],u[1][1],.5),d=2;d<u.length;d++){var c=v.interpolate(u[d-1][1],u[d][1],.5);l=v.interpolate(l,c,u[d-1][0]/u[d][0])}return l}(a))}f("fillcolor",v.addOpacity((T.line||{}).color||o||t||x,.5))}},76688:function(C,A,e){"use strict";var v=e(54460);C.exports=function(w,n,T){var x={},f={_fullLayout:T},s=v.getFromTrace(f,n,"x"),t=v.getFromTrace(f,n,"y"),o=w.orig_x;o===void 0&&(o=w.x);var r=w.orig_y;return r===void 0&&(r=w.y),x.xLabel=v.tickText(s,s.c2l(o),!0).text,x.yLabel=v.tickText(t,t.c2l(r),!0).text,x}},44928:function(C,A,e){"use strict";var v=e(76308),w=e(43028);C.exports=function(n,T){var x,f;if(n.mode==="lines")return(x=n.line.color)&&v.opacity(x)?x:n.fillcolor;if(n.mode==="none")return n.fill?n.fillcolor:"";var s=T.mcc||(n.marker||{}).color,t=T.mlcc||((n.marker||{}).line||{}).color;return(f=s&&v.opacity(s)?s:t&&v.opacity(t)&&(T.mlw||((n.marker||{}).line||{}).width)?t:"")?v.opacity(f)<.3?v.addOpacity(f,.3):f:(x=(n.line||{}).color)&&v.opacity(x)&&w.hasLines(n)&&n.line.width?x:n.fillcolor}},20011:function(C,A,e){"use strict";var v=e(71888).getAxisGroup;C.exports=function(w,n,T,x){var f=n.orientation,s=n[{v:"x",h:"y"}[f]+"axis"],t=v(T,s)+f,o=T._alignmentOpts||{},r=x("alignmentgroup"),i=o[t];i||(i=o[t]={});var a=i[r];a?a.traces.push(n):a=i[r]={traces:[n],alignmentIndex:Object.keys(i).length,offsetGroups:{}};var u=x("offsetgroup"),l=a.offsetGroups,d=l[u];u&&(d||(d=l[u]={offsetIndex:Object.keys(l).length}),n._offsetIndex=d.offsetIndex)}},98723:function(C,A,e){"use strict";var v=e(3400),w=e(93024),n=e(24040),T=e(44928),x=e(76308),f=v.fillText;C.exports=function(s,t,o,r){var i=s.cd,a=i[0].trace,u=s.xa,l=s.ya,d=u.c2p(t),c=l.c2p(o),_=[d,c],p=a.hoveron||"",g=a.mode.indexOf("markers")!==-1?3:.5,m=!!a.xperiodalignment,b=!!a.yperiodalignment;if(p.indexOf("points")!==-1){var y=function(Z){var z=Math.max(g,Z.mrc||0),H=u.c2p(Z.x)-d,U=l.c2p(Z.y)-c;return Math.max(Math.sqrt(H*H+U*U)-z,1-g/z)},M=w.getDistanceFunction(r,function(Z){if(m){var z=u.c2p(Z.xStart),H=u.c2p(Z.xEnd);return d>=Math.min(z,H)&&d<=Math.max(z,H)?0:1/0}var U=Math.max(3,Z.mrc||0),re=1-1/U,ee=Math.abs(u.c2p(Z.x)-d);return ee<U?re*ee/U:ee-U+re},function(Z){if(b){var z=l.c2p(Z.yStart),H=l.c2p(Z.yEnd);return c>=Math.min(z,H)&&c<=Math.max(z,H)?0:1/0}var U=Math.max(3,Z.mrc||0),re=1-1/U,ee=Math.abs(l.c2p(Z.y)-c);return ee<U?re*ee/U:ee-U+re},y);if(w.getClosest(i,M,s),s.index!==!1){var h=i[s.index],E=u.c2p(h.x,!0),k=l.c2p(h.y,!0),D=h.mrc||1;s.index=h.i;var P=i[0].t.orientation,L=P&&(h.sNorm||h.s),O=P==="h"?L:h.orig_x!==void 0?h.orig_x:h.x,N=P==="v"?L:h.orig_y!==void 0?h.orig_y:h.y;return v.extendFlat(s,{color:T(a,h),x0:E-D,x1:E+D,xLabelVal:O,y0:k-D,y1:k+D,yLabelVal:N,spikeDistance:y(h),hovertemplate:a.hovertemplate}),f(h,a,s),n.getComponentMethod("errorbars","hoverInfo")(h,a,s),[s]}}function V(Z){if(!Z)return!1;var z=Z.node();try{var H=new DOMPoint(_[0],_[1]);return z.isPointInFill(H)}catch{var U=z.ownerSVGElement.createSVGPoint();return U.x=_[0],U.y=_[1],z.isPointInFill(U)}}if(p.indexOf("fills")!==-1&&a._fillElement&&V(a._fillElement)&&!V(a._fillExclusionElement)){var F=function(Z){var z,H,U,re,ee,J,Q,ne,K,oe=[],le=1/0,se=-1/0,de=1/0,be=-1/0;for(z=0;z<Z.length;z++){var _e=Z[z];_e.contains(_)&&(oe.push(_e),de=Math.min(de,_e.ymin),be=Math.max(be,_e.ymax))}if(oe.length===0)return null;for(H=((de=Math.max(de,0))+(be=Math.min(be,l._length)))/2,z=0;z<oe.length;z++)for(re=oe[z].pts,U=1;U<re.length;U++)(ne=re[U-1][1])>H!=(K=re[U][1])>=H&&(J=re[U-1][0],Q=re[U][0],K-ne&&(ee=J+(Q-J)*(H-ne)/(K-ne),le=Math.min(le,ee),se=Math.max(se,ee)));return{x0:le=Math.max(le,0),x1:se=Math.min(se,u._length),y0:H,y1:H}}(a._polygons);F===null&&(F={x0:_[0],x1:_[0],y0:_[1],y1:_[1]});var j=x.defaultLine;return x.opacity(a.fillcolor)?j=a.fillcolor:x.opacity((a.line||{}).color)&&(j=a.line.color),v.extendFlat(s,{distance:s.maxHoverDistance,x0:F.x0,x1:F.x1,y0:F.y0,y1:F.y1,color:j,hovertemplate:!1}),delete s.index,a.text&&!v.isArrayOrTypedArray(a.text)?s.text=String(a.text):s.text=a.name,[s]}}},65875:function(C,A,e){"use strict";var v=e(43028);C.exports={hasLines:v.hasLines,hasMarkers:v.hasMarkers,hasText:v.hasText,isBubble:v.isBubble,attributes:e(52904),layoutAttributes:e(55308),supplyDefaults:e(18800),crossTraceDefaults:e(35036),supplyLayoutDefaults:e(59748),calc:e(16356).calc,crossTraceCalc:e(96664),arraysToCalcdata:e(20148),plot:e(96504),colorbar:e(5528),formatLabels:e(76688),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(98723),selectPoints:e(91560),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:e(57952),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},55308:function(C){"use strict";C.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}},59748:function(C,A,e){"use strict";var v=e(3400),w=e(55308);C.exports=function(n,T){var x,f=T.barmode==="group";T.scattermode==="group"&&(x=f?T.bargap:.2,v.coerce(n,T,w,"scattergap",x))}},66828:function(C,A,e){"use strict";var v=e(3400).isArrayOrTypedArray,w=e(94288).hasColorscale,n=e(27260);C.exports=function(T,x,f,s,t,o){o||(o={});var r=(T.marker||{}).color;r&&r._inputArray&&(r=r._inputArray),t("line.color",f),w(T,"line")?n(T,x,s,t,{prefix:"line.",cLetter:"c"}):t("line.color",!v(r)&&r||f),t("line.width"),o.noDash||t("line.dash"),o.backoff&&t("line.backoff")}},52340:function(C,A,e){"use strict";var v=e(43616),w=e(39032),n=w.BADNUM,T=w.LOG_CLIP,x=T+.5,f=T-.5,s=e(3400),t=s.segmentsIntersect,o=s.constrain,r=e(88200);C.exports=function(i,a){var u,l,d,c,_,p,g,m,b,y,M,h,E,k,D,P,L,O,N=a.trace||{},V=a.xaxis,F=a.yaxis,j=V.type==="log",Z=F.type==="log",z=V._length,H=F._length,U=a.backoff,re=N.marker,ee=a.connectGaps,J=a.baseTolerance,Q=a.shape,ne=Q==="linear",K=N.fill&&N.fill!=="none",oe=[],le=r.minTolerance,se=i.length,de=new Array(se),be=0;function _e(St){var Ye=i[St];if(!Ye)return!1;var Ke=a.linearized?V.l2p(Ye.x):V.c2p(Ye.x),Ve=a.linearized?F.l2p(Ye.y):F.c2p(Ye.y);if(Ke===n){if(j&&(Ke=V.c2p(Ye.x,!0)),Ke===n)return!1;Z&&Ve===n&&(Ke*=Math.abs(V._m*H*(V._m>0?x:f)/(F._m*z*(F._m>0?x:f)))),Ke*=1e3}if(Ve===n){if(Z&&(Ve=F.c2p(Ye.y,!0)),Ve===n)return!1;Ve*=1e3}return[Ke,Ve]}function xe(St,Ye,Ke,Ve){var $e=Ke-St,lt=Ve-Ye,it=.5-St,Be=.5-Ye,je=$e*$e+lt*lt,ot=$e*it+lt*Be;if(ot>0&&ot<je){var Ze=it*lt-Be*$e;if(Ze*Ze<je)return!0}}function ve(St,Ye){var Ke=St[0]/z,Ve=St[1]/H,$e=Math.max(0,-Ke,Ke-1,-Ve,Ve-1);return $e&&L!==void 0&&xe(Ke,Ve,L,O)&&($e=0),$e&&Ye&&xe(Ke,Ve,Ye[0]/z,Ye[1]/H)&&($e=0),(1+r.toleranceGrowth*$e)*J}function ye(St,Ye){var Ke=St[0]-Ye[0],Ve=St[1]-Ye[1];return Math.sqrt(Ke*Ke+Ve*Ve)}var me,Me,Ae,ce,ae,pe,De,ke=r.maxScreensAway,Ee=-z*ke,Ie=z*(1+ke),Re=-H*ke,Ne=H*(1+ke),ge=[[Ee,Re,Ie,Re],[Ie,Re,Ie,Ne],[Ie,Ne,Ee,Ne],[Ee,Ne,Ee,Re]];function we(St){if(St[0]<Ee||St[0]>Ie||St[1]<Re||St[1]>Ne)return[o(St[0],Ee,Ie),o(St[1],Re,Ne)]}function Ce(St,Ye){return St[0]===Ye[0]&&(St[0]===Ee||St[0]===Ie)||St[1]===Ye[1]&&(St[1]===Re||St[1]===Ne)||void 0}function ze(St,Ye,Ke){return function(Ve,$e){var lt=we(Ve),it=we($e),Be=[];if(lt&&it&&Ce(lt,it))return Be;lt&&Be.push(lt),it&&Be.push(it);var je=2*s.constrain((Ve[St]+$e[St])/2,Ye,Ke)-((lt||Ve)[St]+(it||$e)[St]);return je&&((lt&&it?je>0==lt[St]>it[St]?lt:it:lt||it)[St]+=je),Be}}function Pe(St){var Ye=St[0],Ke=St[1],Ve=Ye===de[be-1][0],$e=Ke===de[be-1][1];if(!Ve||!$e)if(be>1){var lt=Ye===de[be-2][0],it=Ke===de[be-2][1];Ve&&(Ye===Ee||Ye===Ie)&&lt?it?be--:de[be-1]=St:$e&&(Ke===Re||Ke===Ne)&&it?lt?be--:de[be-1]=St:de[be++]=St}else de[be++]=St}function Ue(St){de[be-1][0]!==St[0]&&de[be-1][1]!==St[1]&&Pe([Ae,ce]),Pe(St),ae=null,Ae=ce=0}Q==="linear"||Q==="spline"?De=function(St,Ye){for(var Ke=[],Ve=0,$e=0;$e<4;$e++){var lt=ge[$e],it=t(St[0],St[1],Ye[0],Ye[1],lt[0],lt[1],lt[2],lt[3]);it&&(!Ve||Math.abs(it.x-Ke[0][0])>1||Math.abs(it.y-Ke[0][1])>1)&&(it=[it.x,it.y],Ve&&ye(it,St)<ye(Ke[0],St)?Ke.unshift(it):Ke.push(it),Ve++)}return Ke}:Q==="hv"||Q==="vh"?De=function(St,Ye){var Ke=[],Ve=we(St),$e=we(Ye);return Ve&&$e&&Ce(Ve,$e)||(Ve&&Ke.push(Ve),$e&&Ke.push($e)),Ke}:Q==="hvh"?De=ze(0,Ee,Ie):Q==="vhv"&&(De=ze(1,Re,Ne));var Ge=s.isArrayOrTypedArray(re);function Xe(St){if(St&&U&&(St.i=u,St.d=i,St.trace=N,St.marker=Ge?re[St.i]:re,St.backoff=U),L=St[0]/z,O=St[1]/H,me=St[0]<Ee?Ee:St[0]>Ie?Ie:0,Me=St[1]<Re?Re:St[1]>Ne?Ne:0,me||Me){if(be)if(ae){var Ye=De(ae,St);Ye.length>1&&(Ue(Ye[0]),de[be++]=Ye[1])}else pe=De(de[be-1],St)[0],de[be++]=pe;else de[be++]=[me||St[0],Me||St[1]];var Ke=de[be-1];me&&Me&&(Ke[0]!==me||Ke[1]!==Me)?(ae&&(Ae!==me&&ce!==Me?Pe(Ae&&ce?(Ve=ae,lt=($e=St)[0]-Ve[0],it=($e[1]-Ve[1])/lt,(Ve[1]*$e[0]-$e[1]*Ve[0])/lt>0?[it>0?Ee:Ie,Ne]:[it>0?Ie:Ee,Re]):[Ae||me,ce||Me]):Ae&&ce&&Pe([Ae,ce])),Pe([me,Me])):Ae-me&&ce-Me&&Pe([me||Ae,Me||ce]),ae=St,Ae=me,ce=Me}else ae&&Ue(De(ae,St)[0]),de[be++]=St;var Ve,$e,lt,it}for(u=0;u<se;u++)if(l=_e(u)){for(be=0,ae=null,Xe(l),u++;u<se;u++){if(!(c=_e(u))){if(ee)continue;break}if(ne&&a.simplify){var st=_e(u+1);if(y=ye(c,l),K&&(be===0||be===se-1)||!(y<ve(c,st)*le)){for(m=[(c[0]-l[0])/y,(c[1]-l[1])/y],_=l,M=y,h=k=D=0,g=!1,d=c,u++;u<i.length;u++){if(p=st,st=_e(u+1),!p){if(ee)continue;break}if(P=(b=[p[0]-l[0],p[1]-l[1]])[0]*m[1]-b[1]*m[0],k=Math.min(k,P),(D=Math.max(D,P))-k>ve(p,st))break;d=p,(E=b[0]*m[0]+b[1]*m[1])>M?(M=E,c=p,g=!1):E<h&&(h=E,_=p,g=!0)}if(g?(Xe(c),d!==_&&Xe(_)):(_!==l&&Xe(_),d!==c&&Xe(c)),Xe(d),u>=i.length||!p)break;Xe(p),l=p}}else Xe(c)}ae&&Pe([Ae||ae[0],ce||ae[1]]),oe.push(de.slice(0,be))}var at=Q.slice(Q.length-1);if(U&&at!=="h"&&at!=="v"){for(var vt=!1,xt=-1,gt=[],rt=0;rt<oe.length;rt++)for(var tt=0;tt<oe[rt].length-1;tt++){var Mt=oe[rt][tt],Pt=oe[rt][tt+1],Rt=v.applyBackoff(Pt,Mt);Rt[0]===Pt[0]&&Rt[1]===Pt[1]||(vt=!0),gt[xt+1]||(gt[++xt]=[Mt,[Rt[0],Rt[1]]])}return vt?gt:oe}return oe}},11731:function(C){"use strict";C.exports=function(A,e,v){v("line.shape")==="spline"&&v("line.smoothing")}},14328:function(C){"use strict";var A={tonextx:1,tonexty:1,tonext:1};C.exports=function(e,v,w){var n,T,x,f,s,t={},o=!1,r=-1,i=0,a=-1;for(T=0;T<w.length;T++)(x=(n=w[T][0].trace).stackgroup||"")?x in t?s=t[x]:(s=t[x]=i,i++):n.fill in A&&a>=0?s=a:(s=a=i,i++),s<r&&(o=!0),n._groupIndex=r=s;var u=w.slice();o&&u.sort(function(d,c){var _=d[0].trace,p=c[0].trace;return _._groupIndex-p._groupIndex||_.index-p.index});var l={};for(T=0;T<u.length;T++)x=(n=u[T][0].trace).stackgroup||"",n.visible===!0?(n._nexttrace=null,n.fill in A&&(f=l[x],n._prevtrace=f||null,f&&(f._nexttrace=n)),n._ownfill=n.fill&&(n.fill.substr(0,6)==="tozero"||n.fill==="toself"||n.fill.substr(0,2)==="to"&&!n._prevtrace),l[x]=n):n._prevtrace=n._nexttrace=n._ownfill=null;return u}},7152:function(C,A,e){"use strict";var v=e(38248);C.exports=function(w,n){n||(n=2);var T=w.marker,x=T.sizeref||1,f=T.sizemin||0,s=T.sizemode==="area"?function(t){return Math.sqrt(t/x)}:function(t){return t/x};return function(t){var o=s(t/n);return v(o)&&o>0?Math.max(o,f):0}}},5528:function(C){"use strict";C.exports={container:"marker",min:"cmin",max:"cmax"}},74428:function(C,A,e){"use strict";var v=e(76308),w=e(94288).hasColorscale,n=e(27260),T=e(43028);C.exports=function(x,f,s,t,o,r){var i=T.isBubble(x),a=(x.line||{}).color;r=r||{},a&&(s=a),o("marker.symbol"),o("marker.opacity",i?.7:1),o("marker.size"),r.noAngle||(o("marker.angle"),r.noAngleRef||o("marker.angleref"),r.noStandOff||o("marker.standoff")),o("marker.color",s),w(x,"marker")&&n(x,f,t,o,{prefix:"marker.",cLetter:"c"}),r.noSelect||(o("selected.marker.color"),o("unselected.marker.color"),o("selected.marker.size"),o("unselected.marker.size")),r.noLine||(o("marker.line.color",a&&!Array.isArray(a)&&f.marker.color!==a?a:i?v.background:v.defaultLine),w(x,"marker.line")&&n(x,f,t,o,{prefix:"marker.line.",cLetter:"c"}),o("marker.line.width",i?1:0)),i&&(o("marker.sizeref"),o("marker.sizemin"),o("marker.sizemode")),r.gradient&&o("marker.gradient.type")!=="none"&&o("marker.gradient.color")}},31147:function(C,A,e){"use strict";var v=e(3400).dateTick0,w=e(39032).ONEWEEK;function n(T,x){return v(x,T%w==0?1:0)}C.exports=function(T,x,f,s,t){if(t||(t={x:!0,y:!0}),t.x){var o=s("xperiod");o&&(s("xperiod0",n(o,x.xcalendar)),s("xperiodalignment"))}if(t.y){var r=s("yperiod");r&&(s("yperiod0",n(r,x.ycalendar)),s("yperiodalignment"))}}},96504:function(C,A,e){"use strict";var v=e(33428),w=e(24040),n=e(3400),T=n.ensureSingle,x=n.identity,f=e(43616),s=e(43028),t=e(52340),o=e(14328),r=e(92065).tester;function i(a,u,l,d,c,_,p){var g,m=a._context.staticPlot;(function(Pe,Ue,Ge,Xe,st){var at=Ge.xaxis,vt=Ge.yaxis,xt=v.extent(n.simpleMap(at.range,at.r2c)),gt=v.extent(n.simpleMap(vt.range,vt.r2c)),rt=Xe[0].trace;if(s.hasMarkers(rt)){var tt=rt.marker.maxdisplayed;if(tt!==0){var Mt=Xe.filter(function(Ye){return Ye.x>=xt[0]&&Ye.x<=xt[1]&&Ye.y>=gt[0]&&Ye.y<=gt[1]}),Pt=Math.ceil(Mt.length/tt),Rt=0;st.forEach(function(Ye,Ke){var Ve=Ye[0].trace;s.hasMarkers(Ve)&&Ve.marker.maxdisplayed>0&&Ke<Ue&&Rt++});var St=Math.round(Rt*Pt/3+Math.floor(Rt/3)*Pt/7.1);Xe.forEach(function(Ye){delete Ye.vis}),Mt.forEach(function(Ye,Ke){Math.round((Ke+St)%Pt)===0&&(Ye.vis=!0)})}}})(0,u,l,d,c);var b=!!p&&p.duration>0;function y(Pe){return b?Pe.transition():Pe}var M=l.xaxis,h=l.yaxis,E=d[0].trace,k=E.line,D=v.select(_),P=T(D,"g","errorbars"),L=T(D,"g","lines"),O=T(D,"g","points"),N=T(D,"g","text");if(w.getComponentMethod("errorbars","plot")(a,P,l,p),E.visible===!0){var V,F;y(D).style("opacity",E.opacity);var j,Z,z=E.fill.charAt(E.fill.length-1);z!=="x"&&z!=="y"&&(z=""),z==="y"?(j=1,Z=h.c2p(0,!0)):z==="x"&&(j=0,Z=M.c2p(0,!0)),d[0][l.isRangePlot?"nodeRangePlot3":"node3"]=D;var H,U,re="",ee=[],J=E._prevtrace,Q=null,ne=null;J&&(re=J._prevRevpath||"",F=J._nextFill,ee=J._ownPolygons,Q=J._fillsegments,ne=J._fillElement);var K,oe,le,se,de,be,_e="",xe="",ve=[];E._polygons=[];var ye=[],me=[],Me=n.noop;if(V=E._ownFill,s.hasLines(E)||E.fill!=="none"){F&&F.datum(d),["hv","vh","hvh","vhv"].indexOf(k.shape)!==-1?(K=f.steps(k.shape),oe=f.steps(k.shape.split("").reverse().join(""))):K=oe=k.shape==="spline"?function(Pe){var Ue=Pe[Pe.length-1];return Pe.length>1&&Pe[0][0]===Ue[0]&&Pe[0][1]===Ue[1]?f.smoothclosed(Pe.slice(1),k.smoothing):f.smoothopen(Pe,k.smoothing)}:function(Pe){return"M"+Pe.join("L")},le=function(Pe){return oe(Pe.reverse())},me=t(d,{xaxis:M,yaxis:h,trace:E,connectGaps:E.connectgaps,baseTolerance:Math.max(k.width||1,3)/4,shape:k.shape,backoff:k.backoff,simplify:k.simplify,fill:E.fill}),ye=new Array(me.length);var Ae=0;for(g=0;g<me.length;g++){var ce,ae=me[g];ce&&z?ce.push.apply(ce,ae):(ce=ae.slice(),ye[Ae]=ce,Ae++)}E._fillElement=null,E._fillExclusionElement=ne,E._fillsegments=ye.slice(0,Ae),ye=E._fillsegments,me.length&&(se=me[0][0].slice(),be=(de=me[me.length-1])[de.length-1].slice()),Me=function(Pe){return function(Ue){if(H=K(Ue),U=le(Ue),_e?z?(_e+="L"+H.substr(1),xe=U+"L"+xe.substr(1)):(_e+="Z"+H,xe=U+"Z"+xe):(_e=H,xe=U),s.hasLines(E)){var Ge=v.select(this);if(Ge.datum(d),Pe)y(Ge.style("opacity",0).attr("d",H).call(f.lineGroupStyle)).style("opacity",1);else{var Xe=y(Ge);Xe.attr("d",H),f.singleLineStyle(d,Xe)}}}}}var pe=L.selectAll(".js-line").data(me);y(pe.exit()).style("opacity",0).remove(),pe.each(Me(!1)),pe.enter().append("path").classed("js-line",!0).style("vector-effect",m?"none":"non-scaling-stroke").call(f.lineGroupStyle).each(Me(!0)),f.setClipUrl(pe,l.layerClipId,a);var De=function(){var Pe=new Array(ye.length);for(g=0;g<ye.length;g++)Pe[g]=r(ye[g]);return Pe},ke=function(Pe){var Ue,Ge;if(Pe&&Pe.length!==0){for(Ue=new Array(Pe.length-1+ye.length),Ge=0;Ge<Pe.length-1;Ge++)Ue[Ge]=r(Pe[Ge]);var Xe=Pe[Pe.length-1].slice();for(Xe.reverse(),Ge=0;Ge<ye.length;Ge++)Ue[Pe.length-1+Ge]=r(ye[Ge].concat(Xe))}else for(Ue=new Array(ye.length),Ge=0;Ge<ye.length;Ge++){var st=ye[Ge][0].slice(),at=ye[Ge][ye[Ge].length-1].slice();st[j]=at[j]=Z;var vt=[at,st].concat(ye[Ge]);Ue[Ge]=r(vt)}return Ue};me.length?(V?(V.datum(d),se&&be&&(z?(se[j]=be[j]=Z,y(V).attr("d","M"+be+"L"+se+"L"+_e.substr(1)).call(f.singleFillStyle,a),ve=ke(null)):(y(V).attr("d",_e+"Z").call(f.singleFillStyle,a),ve=De())),E._polygons=ve,E._fillElement=V):F&&(E.fill.substr(0,6)==="tonext"&&_e&&re?(E.fill==="tonext"?(y(F).attr("d",_e+"Z"+re+"Z").call(f.singleFillStyle,a),ve=De(),E._polygons=ve.concat(ee)):(y(F).attr("d",_e+"L"+re.substr(1)+"Z").call(f.singleFillStyle,a),ve=ke(Q),E._polygons=ve),E._fillElement=F):Ie(F)),E._prevRevpath=xe):(V?Ie(V):F&&Ie(F),E._prevRevpath=null),E._ownPolygons=ve,O.datum(d),N.datum(d),function(Pe,Ue,Ge){var Xe,st=Ge[0].trace,at=s.hasMarkers(st),vt=s.hasText(st),xt=Ce(st),gt=ze,rt=ze;if(at||vt){var tt=x,Mt=st.stackgroup,Pt=Mt&&a._fullLayout._scatterStackOpts[M._id+h._id][Mt].stackgaps==="infer zero";st.marker.maxdisplayed||st._needsCull?tt=Pt?Ne:Re:Mt&&!Pt&&(tt=ge),at&&(gt=tt),vt&&(rt=tt)}var Rt,St=(Xe=Pe.selectAll("path.point").data(gt,xt)).enter().append("path").classed("point",!0);b&&St.call(f.pointStyle,st,a).call(f.translatePoints,M,h).style("opacity",0).transition().style("opacity",1),Xe.order(),at&&(Rt=f.makePointStyleFns(st)),Xe.each(function(Ye){var Ke=v.select(this),Ve=y(Ke);f.translatePoint(Ye,Ve,M,h)?(f.singlePointStyle(Ye,Ve,st,Rt,a),l.layerClipId&&f.hideOutsideRangePoint(Ye,Ve,M,h,st.xcalendar,st.ycalendar),st.customdata&&Ke.classed("plotly-customdata",Ye.data!==null&&Ye.data!==void 0)):Ve.remove()}),b?Xe.exit().transition().style("opacity",0).remove():Xe.exit().remove(),(Xe=Ue.selectAll("g").data(rt,xt)).enter().append("g").classed("textpoint",!0).append("text"),Xe.order(),Xe.each(function(Ye){var Ke=v.select(this),Ve=y(Ke.select("text"));f.translatePoint(Ye,Ve,M,h)?l.layerClipId&&f.hideOutsideRangePoint(Ye,Ke,M,h,st.xcalendar,st.ycalendar):Ke.remove()}),Xe.selectAll("text").call(f.textPointStyle,st,a).each(function(Ye){var Ke=M.c2p(Ye.x),Ve=h.c2p(Ye.y);v.select(this).selectAll("tspan.line").each(function(){y(v.select(this)).attr({x:Ke,y:Ve})})}),Xe.exit().remove()}(O,N,d);var Ee=E.cliponaxis===!1?null:l.layerClipId;f.setClipUrl(O,Ee,a),f.setClipUrl(N,Ee,a)}function Ie(Pe){y(Pe).attr("d","M0,0Z")}function Re(Pe){return Pe.filter(function(Ue){return!Ue.gap&&Ue.vis})}function Ne(Pe){return Pe.filter(function(Ue){return Ue.vis})}function ge(Pe){return Pe.filter(function(Ue){return!Ue.gap})}function we(Pe){return Pe.id}function Ce(Pe){if(Pe.ids)return we}function ze(){return!1}}C.exports=function(a,u,l,d,c,_){var p,g,m=!c,b=!!c&&c.duration>0,y=o(a,u,l);(p=d.selectAll("g.trace").data(y,function(M){return M[0].trace.uid})).enter().append("g").attr("class",function(M){return"trace scatter trace"+M[0].trace.uid}).style("stroke-miterlimit",2),p.order(),function(M,h,E){h.each(function(k){var D=T(v.select(this),"g","fills");f.setClipUrl(D,E.layerClipId,M);var P=k[0].trace,L=[];P._ownfill&&L.push("_ownFill"),P._nexttrace&&L.push("_nextFill");var O=D.selectAll("g").data(L,x);O.enter().append("g"),O.exit().each(function(N){P[N]=null}).remove(),O.order().each(function(N){P[N]=T(v.select(this),"path","js-fill")})})}(a,p,u),b?(_&&(g=_()),v.transition().duration(c.duration).ease(c.easing).each("end",function(){g&&g()}).each("interrupt",function(){g&&g()}).each(function(){d.selectAll("g.trace").each(function(M,h){i(a,h,u,M,y,this,c)})})):p.each(function(M,h){i(a,h,u,M,y,this,c)}),m&&p.exit().remove(),d.selectAll("path:not([d])").remove()}},91560:function(C,A,e){"use strict";var v=e(43028);C.exports=function(w,n){var T,x,f,s,t=w.cd,o=w.xaxis,r=w.yaxis,i=[],a=t[0].trace;if(!v.hasMarkers(a)&&!v.hasText(a))return[];if(n===!1)for(T=0;T<t.length;T++)t[T].selected=0;else for(T=0;T<t.length;T++)x=t[T],f=o.c2p(x.x),s=r.c2p(x.y),x.i!==null&&n.contains([f,s],!1,T,w)?(i.push({pointNumber:x.i,x:o.c2d(x.x),y:r.c2d(x.y)}),x.selected=1):x.selected=0;return i}},43912:function(C){"use strict";var A=["orientation","groupnorm","stackgaps"];C.exports=function(e,v,w,n){var T=w._scatterStackOpts,x=n("stackgroup");if(x){var f=v.xaxis+v.yaxis,s=T[f];s||(s=T[f]={});var t=s[x],o=!1;t?t.traces.push(v):(t=s[x]={traceIndices:[],traces:[v]},o=!0);for(var r={orientation:v.x&&!v.y?"h":"v"},i=0;i<A.length;i++){var a=A[i],u=a+"Found";if(!t[u]){var l=e[a]!==void 0,d=a==="orientation";if((l||o)&&(t[a]=n(a,r[a]),d&&(t.fillDflt=t[a]==="h"?"tonextx":"tonexty"),l&&(t[u]=!0,!o&&(delete t.traces[0][a],d))))for(var c=0;c<t.traces.length-1;c++){var _=t.traces[c];_._input.fill!==_.fill&&(_.fill=t.fillDflt)}}}return t}}},49224:function(C,A,e){"use strict";var v=e(33428),w=e(43616),n=e(24040);function T(f,s,t){w.pointStyle(f.selectAll("path.point"),s,t)}function x(f,s,t){w.textPointStyle(f.selectAll("text"),s,t)}C.exports={style:function(f){var s=v.select(f).selectAll("g.trace.scatter");s.style("opacity",function(t){return t[0].trace.opacity}),s.selectAll("g.points").each(function(t){T(v.select(this),t.trace||t[0].trace,f)}),s.selectAll("g.text").each(function(t){x(v.select(this),t.trace||t[0].trace,f)}),s.selectAll("g.trace path.js-line").call(w.lineGroupStyle),s.selectAll("g.trace path.js-fill").call(w.fillGroupStyle,f,!1),n.getComponentMethod("errorbars","style")(s)},stylePoints:T,styleText:x,styleOnSelect:function(f,s,t){var o=s[0].trace;o.selectedpoints?(w.selectedPointStyle(t.selectAll("path.point"),o),w.selectedTextStyle(t.selectAll("text"),o)):(T(t,o,f),x(t,o,f))}}},43028:function(C,A,e){"use strict";var v=e(3400),w=e(38116).isTypedArraySpec;C.exports={hasLines:function(n){return n.visible&&n.mode&&n.mode.indexOf("lines")!==-1},hasMarkers:function(n){return n.visible&&(n.mode&&n.mode.indexOf("markers")!==-1||n.type==="splom")},hasText:function(n){return n.visible&&n.mode&&n.mode.indexOf("text")!==-1},isBubble:function(n){var T=n.marker;return v.isPlainObject(T)&&(v.isArrayOrTypedArray(T.size)||w(T.size))}}},124:function(C,A,e){"use strict";var v=e(3400);C.exports=function(w,n,T,x,f){f=f||{},x("textposition"),v.coerceFont(x,"textfont",f.font||T.font,f),f.noSelect||(x("selected.textfont.color"),x("unselected.textfont.color"))}},43980:function(C,A,e){"use strict";var v=e(3400),w=e(24040);C.exports=function(n,T,x,f){var s,t=f("x"),o=f("y");if(w.getComponentMethod("calendars","handleTraceDefaults")(n,T,["x","y"],x),t){var r=v.minRowLength(t);o?s=Math.min(r,v.minRowLength(o)):(s=r,f("y0"),f("dy"))}else{if(!o)return 0;s=v.minRowLength(o),f("x0"),f("dx")}return T._length=s,s}},91592:function(C,A,e){"use strict";var v=e(52904),w=e(25376),n=e(49084),T=e(29736).axisHoverFormat,x=e(21776).Ks,f=e(21776).Gw,s=e(45464),t=e(99168),o=e(87792),r=e(92880).extendFlat,i=e(67824).overrideAll,a=e(95376),u=v.line,l=v.marker,d=l.line,c=r({width:u.width,dash:{valType:"enumerated",values:a(t),dflt:"solid"}},n("line")),_=C.exports=i({x:v.x,y:v.y,z:{valType:"data_array"},text:r({},v.text,{}),texttemplate:f({},{}),hovertext:r({},v.hovertext,{}),hovertemplate:x(),xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z"),mode:r({},v.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:v.connectgaps,line:c,marker:r({symbol:{valType:"enumerated",values:a(o),dflt:"circle",arrayOk:!0},size:r({},l.size,{dflt:8}),sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode,opacity:r({},l.opacity,{arrayOk:!1}),colorbar:l.colorbar,line:r({width:r({},d.width,{arrayOk:!1})},n("marker.line"))},n("marker")),textposition:r({},v.textposition,{dflt:"top center"}),textfont:w({editType:"calc",colorEditType:"style",arrayOk:!0,variantValues:["normal","small-caps"]}),opacity:s.opacity,hoverinfo:r({},s.hoverinfo)},"calc","nested");_.x.editType=_.y.editType=_.z.editType="calc+clearAxisTypes"},41484:function(C,A,e){"use strict";var v=e(20148),w=e(90136);C.exports=function(n,T){var x=[{x:!1,y:!1,trace:T,t:{}}];return v(x,T),w(n,T),x}},45156:function(C,A,e){"use strict";var v=e(24040);function w(n,T,x,f){if(!T||!T.visible)return null;for(var s=v.getComponentMethod("errorbars","makeComputeError")(T),t=new Array(n.length),o=0;o<n.length;o++){var r=s(+n[o],o);if(f.type==="log"){var i=f.c2l(n[o]),a=n[o]-r[0],u=n[o]+r[1];if(t[o]=[(f.c2l(a,!0)-i)*x,(f.c2l(u,!0)-i)*x],a>0){var l=f.c2l(a);f._lowerLogErrorBound||(f._lowerLogErrorBound=l),f._lowerErrorBound=Math.min(f._lowerLogErrorBound,l)}}else t[o]=[-r[0]*x,r[1]*x]}return t}C.exports=function(n,T,x){var f=[w(n.x,n.error_x,T[0],x.xaxis),w(n.y,n.error_y,T[1],x.yaxis),w(n.z,n.error_z,T[2],x.zaxis)],s=function(u){for(var l=0;l<u.length;l++)if(u[l])return u[l].length;return 0}(f);if(s===0)return null;for(var t=new Array(s),o=0;o<s;o++){for(var r=[[0,0,0],[0,0,0]],i=0;i<3;i++)if(f[i])for(var a=0;a<2;a++)r[a][i]=f[i][o][a];t[o]=r}return t}},41064:function(C,A,e){"use strict";var v=e(67792).gl_line3d,w=e(67792).gl_scatter3d,n=e(67792).gl_error3d,T=e(67792).gl_mesh3d,x=e(67792).delaunay_triangulate,f=e(3400),s=e(43080),t=e(33040).formatColor,o=e(7152),r=e(99168),i=e(87792),a=e(54460),u=e(10624).appendArrayPointValue,l=e(45156);function d(h,E){this.scene=h,this.uid=E,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var c=d.prototype;function _(h){return h==null?0:h.indexOf("left")>-1?-1:h.indexOf("right")>-1?1:0}function p(h){return h==null?0:h.indexOf("top")>-1?-1:h.indexOf("bottom")>-1?1:0}function g(h,E){return E(4*h)}function m(h){return i[h]}function b(h,E,k,D,P){var L=null;if(f.isArrayOrTypedArray(h)){L=[];for(var O=0;O<E;O++)h[O]===void 0?L[O]=D:L[O]=k(h[O],P)}else L=k(h,f.identity);return L}function y(h){if(f.isArrayOrTypedArray(h)){var E=h[0];return f.isArrayOrTypedArray(E)&&(h=E),"rgb("+h.slice(0,3).map(function(k){return Math.round(255*k)})+")"}return null}function M(h){return f.isArrayOrTypedArray(h)?h.length===4&&typeof h[0]=="number"?y(h):h.map(y):null}c.handlePick=function(h){if(h.object&&(h.object===this.linePlot||h.object===this.delaunayMesh||h.object===this.textMarkers||h.object===this.scatterPlot)){var E=h.index=h.data.index;return h.object.highlight&&h.object.highlight(null),this.scatterPlot&&(h.object=this.scatterPlot,this.scatterPlot.highlight(h.data)),h.textLabel="",this.textLabels&&(f.isArrayOrTypedArray(this.textLabels)?(this.textLabels[E]||this.textLabels[E]===0)&&(h.textLabel=this.textLabels[E]):h.textLabel=this.textLabels),h.traceCoordinate=[this.data.x[E],this.data.y[E],this.data.z[E]],!0}},c.update=function(h){var E,k,D,P,L=this.scene.glplot.gl,O=r.solid;this.data=h;var N=function(j,Z){var z,H,U,re,ee,J,Q=[],ne=j.fullSceneLayout,K=j.dataScale,oe=ne.xaxis,le=ne.yaxis,se=ne.zaxis,de=Z.marker,be=Z.line,_e=Z.x||[],xe=Z.y||[],ve=Z.z||[],ye=_e.length,me=Z.xcalendar,Me=Z.ycalendar,Ae=Z.zcalendar;for(ee=0;ee<ye;ee++)z=oe.d2l(_e[ee],0,me)*K[0],H=le.d2l(xe[ee],0,Me)*K[1],U=se.d2l(ve[ee],0,Ae)*K[2],Q[ee]=[z,H,U];if(Array.isArray(Z.text))J=Z.text;else if(f.isTypedArray(Z.text))J=Array.from(Z.text);else if(Z.text!==void 0)for(J=new Array(ye),ee=0;ee<ye;ee++)J[ee]=Z.text;function ce(Ue,Ge){var Xe=ne[Ue];return a.tickText(Xe,Xe.d2l(Ge),!0).text}var ae=Z.texttemplate;if(ae){var pe=j.fullLayout._d3locale,De=Array.isArray(ae),ke=De?Math.min(ae.length,ye):ye,Ee=De?function(Ue){return ae[Ue]}:function(){return ae};for(J=new Array(ke),ee=0;ee<ke;ee++){var Ie={x:_e[ee],y:xe[ee],z:ve[ee]},Re={xLabel:ce("xaxis",_e[ee]),yLabel:ce("yaxis",xe[ee]),zLabel:ce("zaxis",ve[ee])},Ne={};u(Ne,Z,ee);var ge=Z._meta||{};J[ee]=f.texttemplateString(Ee(ee),Re,pe,Ne,Ie,ge)}}if(re={position:Q,mode:Z.mode,text:J},"line"in Z&&(re.lineColor=t(be,1,ye),re.lineWidth=be.width,re.lineDashes=be.dash),"marker"in Z){var we=o(Z);re.scatterColor=t(de,1,ye),re.scatterSize=b(de.size,ye,g,20,we),re.scatterMarker=b(de.symbol,ye,m,"\u25CF"),re.scatterLineWidth=de.line.width,re.scatterLineColor=t(de.line,1,ye),re.scatterAngle=0}"textposition"in Z&&(re.textOffset=function(Ue){var Ge=[0,0];if(Array.isArray(Ue))for(var Xe=0;Xe<Ue.length;Xe++)Ge[Xe]=[0,0],Ue[Xe]&&(Ge[Xe][0]=_(Ue[Xe]),Ge[Xe][1]=p(Ue[Xe]));else Ge[0]=_(Ue),Ge[1]=p(Ue);return Ge}(Z.textposition),re.textColor=t(Z.textfont,1,ye),re.textSize=b(Z.textfont.size,ye,f.identity,12),re.textFontFamily=Z.textfont.family,re.textFontWeight=Z.textfont.weight,re.textFontStyle=Z.textfont.style,re.textFontVariant=Z.textfont.variant,re.textAngle=0);var Ce=["x","y","z"];for(re.project=[!1,!1,!1],re.projectScale=[1,1,1],re.projectOpacity=[1,1,1],ee=0;ee<3;++ee){var ze=Z.projection[Ce[ee]];(re.project[ee]=ze.show)&&(re.projectOpacity[ee]=ze.opacity,re.projectScale[ee]=ze.scale)}re.errorBounds=l(Z,K,ne);var Pe=function(Ue){for(var Ge=[0,0,0],Xe=[[0,0,0],[0,0,0],[0,0,0]],st=[1,1,1],at=0;at<3;at++){var vt=Ue[at];vt&&vt.copy_zstyle!==!1&&Ue[2].visible!==!1&&(vt=Ue[2]),vt&&vt.visible&&(Ge[at]=vt.width/2,Xe[at]=s(vt.color),st[at]=vt.thickness)}return{capSize:Ge,color:Xe,lineWidth:st}}([Z.error_x,Z.error_y,Z.error_z]);return re.errorColor=Pe.color,re.errorLineWidth=Pe.lineWidth,re.errorCapSize=Pe.capSize,re.delaunayAxis=Z.surfaceaxis,re.delaunayColor=s(Z.surfacecolor),re}(this.scene,h);"mode"in N&&(this.mode=N.mode),"lineDashes"in N&&N.lineDashes in r&&(O=r[N.lineDashes]),this.color=M(N.scatterColor)||M(N.lineColor),this.dataPoints=N.position,E={gl:this.scene.glplot.gl,position:N.position,color:N.lineColor,lineWidth:N.lineWidth||1,dashes:O[0],dashScale:O[1],opacity:h.opacity,connectGaps:h.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(E):(this.linePlot=v(E),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var V=h.opacity;if(h.marker&&h.marker.opacity!==void 0&&(V*=h.marker.opacity),k={gl:this.scene.glplot.gl,position:N.position,color:N.scatterColor,size:N.scatterSize,glyph:N.scatterMarker,opacity:V,orthographic:!0,lineWidth:N.scatterLineWidth,lineColor:N.scatterLineColor,project:N.project,projectScale:N.projectScale,projectOpacity:N.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(k):(this.scatterPlot=w(k),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),P={gl:this.scene.glplot.gl,position:N.position,glyph:N.text,color:N.textColor,size:N.textSize,angle:N.textAngle,alignment:N.textOffset,font:N.textFontFamily,fontWeight:N.textFontWeight,fontStyle:N.textFontStyle,fontVariant:N.textFontVariant,orthographic:!0,lineWidth:0,project:!1,opacity:h.opacity},this.textLabels=h.hovertext||h.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(P):(this.textMarkers=w(P),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),D={gl:this.scene.glplot.gl,position:N.position,color:N.errorColor,error:N.errorBounds,lineWidth:N.errorLineWidth,capSize:N.errorCapSize,opacity:h.opacity},this.errorBars?N.errorBounds?this.errorBars.update(D):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):N.errorBounds&&(this.errorBars=n(D),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),N.delaunayAxis>=0){var F=function(j,Z,z){var H,U=(z+1)%3,re=(z+2)%3,ee=[],J=[];for(H=0;H<j.length;++H){var Q=j[H];!isNaN(Q[U])&&isFinite(Q[U])&&!isNaN(Q[re])&&isFinite(Q[re])&&(ee.push([Q[U],Q[re]]),J.push(H))}var ne=x(ee);for(H=0;H<ne.length;++H)for(var K=ne[H],oe=0;oe<K.length;++oe)K[oe]=J[K[oe]];return{positions:j,cells:ne,meshColor:Z}}(N.position,N.delaunayColor,N.delaunayAxis);F.opacity=h.opacity,this.delaunayMesh?this.delaunayMesh.update(F):(F.gl=L,this.delaunayMesh=T(F),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},c.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},C.exports=function(h,E){var k=new d(h,E.uid);return k.update(E),k}},83484:function(C,A,e){"use strict";var v=e(24040),w=e(3400),n=e(43028),T=e(74428),x=e(66828),f=e(124),s=e(91592);C.exports=function(t,o,r,i){function a(m,b){return w.coerce(t,o,s,m,b)}var u=function(m,b,y,M){var h=0,E=y("x"),k=y("y"),D=y("z");return v.getComponentMethod("calendars","handleTraceDefaults")(m,b,["x","y","z"],M),E&&k&&D&&(h=Math.min(E.length,k.length,D.length),b._length=b._xlength=b._ylength=b._zlength=h),h}(t,o,a,i);if(u){a("text"),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),a("mode"),n.hasMarkers(o)&&T(t,o,r,i,a,{noSelect:!0,noAngle:!0}),n.hasLines(o)&&(a("connectgaps"),x(t,o,r,i,a)),n.hasText(o)&&(a("texttemplate"),f(t,o,i,a,{noSelect:!0}));var l=(o.line||{}).color,d=(o.marker||{}).color;a("surfaceaxis")>=0&&a("surfacecolor",l||d);for(var c=["x","y","z"],_=0;_<3;++_){var p="projection."+c[_];a(p+".show")&&(a(p+".opacity"),a(p+".scale"))}var g=v.getComponentMethod("errorbars","supplyDefaults");g(t,o,l||d||r,{axis:"z"}),g(t,o,l||d||r,{axis:"y",inherit:"z"}),g(t,o,l||d||r,{axis:"x",inherit:"z"})}else o.visible=!1}},3296:function(C,A,e){"use strict";C.exports={plot:e(41064),attributes:e(91592),markerSymbols:e(87792),supplyDefaults:e(83484),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:e(41484),moduleType:"trace",name:"scatter3d",basePlotModule:e(12536),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},90372:function(C,A,e){"use strict";var v=e(98304),w=e(52904),n=e(45464),T=e(21776).Ks,x=e(21776).Gw,f=e(49084),s=e(92880).extendFlat,t=w.marker,o=w.line,r=t.line;C.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:s({},w.mode,{dflt:"markers"}),text:s({},w.text,{}),texttemplate:x({editType:"plot"},{keys:["a","b","text"]}),hovertext:s({},w.hovertext,{}),line:{color:o.color,width:o.width,dash:o.dash,backoff:o.backoff,shape:s({},o.shape,{values:["linear","spline"]}),smoothing:o.smoothing,editType:"calc"},connectgaps:w.connectgaps,fill:s({},w.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:v(),marker:s({symbol:t.symbol,opacity:t.opacity,maxdisplayed:t.maxdisplayed,angle:t.angle,angleref:t.angleref,standoff:t.standoff,size:t.size,sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,line:s({width:r.width,editType:"calc"},f("marker.line")),gradient:t.gradient,editType:"calc"},f("marker")),textfont:w.textfont,textposition:w.textposition,selected:w.selected,unselected:w.unselected,hoverinfo:s({},n.hoverinfo,{flags:["a","b","text","name"]}),hoveron:w.hoveron,hovertemplate:T(),zorder:w.zorder}},48228:function(C,A,e){"use strict";var v=e(38248),w=e(90136),n=e(20148),T=e(4500),x=e(16356).calcMarkerSize,f=e(50948);C.exports=function(s,t){var o=t._carpetTrace=f(s,t);if(o&&o.visible&&o.visible!=="legendonly"){var r;t.xaxis=o.xaxis,t.yaxis=o.yaxis;var i,a,u=t._length,l=new Array(u),d=!1;for(r=0;r<u;r++)if(i=t.a[r],a=t.b[r],v(i)&&v(a)){var c=o.ab2xy(+i,+a,!0),_=o.isVisible(+i,+a);_||(d=!0),l[r]={x:c[0],y:c[1],a:i,b:a,vis:_}}else l[r]={x:!1,y:!1};return t._needsCull=d,l[0].carpet=o,l[0].trace=t,x(t,u),w(s,t),n(l,t),T(l,t),l}}},6176:function(C,A,e){"use strict";var v=e(3400),w=e(88200),n=e(43028),T=e(74428),x=e(66828),f=e(11731),s=e(124),t=e(70840),o=e(90372);C.exports=function(r,i,a,u){function l(g,m){return v.coerce(r,i,o,g,m)}l("carpet"),i.xaxis="x",i.yaxis="y";var d=l("a"),c=l("b"),_=Math.min(d.length,c.length);if(_){i._length=_,l("text"),l("texttemplate"),l("hovertext"),l("mode",_<w.PTS_LINESONLY?"lines+markers":"lines"),n.hasMarkers(i)&&T(r,i,a,u,l,{gradient:!0}),n.hasLines(i)&&(x(r,i,a,u,l,{backoff:!0}),f(r,i,l),l("connectgaps")),n.hasText(i)&&s(r,i,u,l);var p=[];(n.hasMarkers(i)||n.hasText(i))&&(l("marker.maxdisplayed"),p.push("points")),l("fill"),i.fill!=="none"&&(t(r,i,a,l),n.hasLines(i)||f(r,i,l)),i.fill!=="tonext"&&i.fill!=="toself"||p.push("fills"),l("hoveron",p.join("+")||"points")!=="fills"&&l("hovertemplate"),l("zorder"),v.coerceSelectionMarkerOpacity(i,l)}else i.visible=!1}},89307:function(C){"use strict";C.exports=function(A,e,v,w,n){var T=w[n];return A.a=T.a,A.b=T.b,A.y=T.y,A}},52364:function(C){"use strict";C.exports=function(A,e){var v={},w=e._carpet,n=w.ab2ij([A.a,A.b]),T=Math.floor(n[0]),x=n[0]-T,f=Math.floor(n[1]),s=n[1]-f,t=w.evalxy([],T,f,x,s);return v.yLabel=t[1].toFixed(3),v}},58960:function(C,A,e){"use strict";var v=e(98723),w=e(3400).fillText;C.exports=function(n,T,x,f){var s=v(n,T,x,f);if(s&&s[0].index!==!1){var t=s[0];if(t.index===void 0){var o=1-t.y0/n.ya._length,r=n.xa._length,i=r*o/2,a=r-i;return t.x0=Math.max(Math.min(t.x0,a),i),t.x1=Math.max(Math.min(t.x1,a),i),s}var u=t.cd[t.index];t.a=u.a,t.b=u.b,t.xLabelVal=void 0,t.yLabelVal=void 0;var l=t.trace,d=l._carpet,c=l._module.formatLabels(u,l);t.yLabel=c.yLabel,delete t.text;var _=[];if(!l.hovertemplate){var p=(u.hi||l.hoverinfo).split("+");p.indexOf("all")!==-1&&(p=["a","b","text"]),p.indexOf("a")!==-1&&g(d.aaxis,u.a),p.indexOf("b")!==-1&&g(d.baxis,u.b),_.push("y: "+t.yLabel),p.indexOf("text")!==-1&&w(u,l,_),t.extraText=_.join("<br>")}return s}function g(m,b){var y;y=m.labelprefix&&m.labelprefix.length>0?m.labelprefix.replace(/ = $/,""):m._hovertitle,_.push(y+": "+b.toFixed(3)+m.labelsuffix)}}},4184:function(C,A,e){"use strict";C.exports={attributes:e(90372),supplyDefaults:e(6176),colorbar:e(5528),formatLabels:e(52364),calc:e(48228),plot:e(20036),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(58960),selectPoints:e(91560),eventData:e(89307),moduleType:"trace",name:"scattercarpet",basePlotModule:e(57952),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},20036:function(C,A,e){"use strict";var v=e(96504),w=e(54460),n=e(43616);C.exports=function(T,x,f,s){var t,o,r,i=f[0][0].carpet,a=w.getFromId(T,i.xaxis||"x"),u=w.getFromId(T,i.yaxis||"y"),l={xaxis:a,yaxis:u,plot:x.plot};for(t=0;t<f.length;t++)(o=f[t][0].trace)._xA=a,o._yA=u;for(v(T,l,f,s),t=0;t<f.length;t++)o=f[t][0].trace,r=s.selectAll("g.trace"+o.uid+" .js-line"),n.setClipUrl(r,f[t][0].carpet._clipPathId,T)}},6096:function(C,A,e){"use strict";var v=e(21776).Ks,w=e(21776).Gw,n=e(98304),T=e(52904),x=e(45464),f=e(49084),s=e(98192).u,t=e(92880).extendFlat,o=e(67824).overrideAll,r=T.marker,i=T.line,a=r.line;C.exports=o({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:t({},T.mode,{dflt:"markers"}),text:t({},T.text,{}),texttemplate:w({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:t({},T.hovertext,{}),textfont:T.textfont,textposition:T.textposition,line:{color:i.color,width:i.width,dash:s},connectgaps:T.connectgaps,marker:t({symbol:r.symbol,opacity:r.opacity,angle:r.angle,angleref:t({},r.angleref,{values:["previous","up","north"]}),standoff:r.standoff,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,colorbar:r.colorbar,line:t({width:a.width},f("marker.line")),gradient:r.gradient},f("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:n(),selected:T.selected,unselected:T.unselected,hoverinfo:t({},x.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:v()},"calc","nested")},25212:function(C,A,e){"use strict";var v=e(38248),w=e(39032).BADNUM,n=e(90136),T=e(20148),x=e(4500),f=e(3400).isArrayOrTypedArray,s=e(3400)._;function t(o){return o&&typeof o=="string"}C.exports=function(o,r){var i,a=f(r.locations),u=a?r.locations.length:r._length,l=new Array(u);i=r.geojson?function(m){return t(m)||v(m)}:t;for(var d=0;d<u;d++){var c=l[d]={};if(a){var _=r.locations[d];c.loc=i(_)?_:null}else{var p=r.lon[d],g=r.lat[d];v(p)&&v(g)?c.lonlat=[+p,+g]:c.lonlat=[w,w]}}return T(l,r),n(o,r),x(l,r),u&&(l[0].t={labels:{lat:s(o,"lat:")+" ",lon:s(o,"lon:")+" "}}),l}},86188:function(C,A,e){"use strict";var v=e(3400),w=e(43028),n=e(74428),T=e(66828),x=e(124),f=e(70840),s=e(6096);C.exports=function(t,o,r,i){function a(g,m){return v.coerce(t,o,s,g,m)}var u,l=a("locations");if(l&&l.length){var d,c=a("geojson");(typeof c=="string"&&c!==""||v.isPlainObject(c))&&(d="geojson-id"),a("locationmode",d)==="geojson-id"&&a("featureidkey"),u=l.length}else{var _=a("lon")||[],p=a("lat")||[];u=Math.min(_.length,p.length)}u?(o._length=u,a("text"),a("hovertext"),a("hovertemplate"),a("mode"),w.hasMarkers(o)&&n(t,o,r,i,a,{gradient:!0}),w.hasLines(o)&&(T(t,o,r,i,a),a("connectgaps")),w.hasText(o)&&(a("texttemplate"),x(t,o,i,a)),a("fill"),o.fill!=="none"&&f(t,o,r,a),v.coerceSelectionMarkerOpacity(o,a)):o.visible=!1}},58544:function(C){"use strict";C.exports=function(A,e,v,w,n){A.lon=e.lon,A.lat=e.lat,A.location=e.loc?e.loc:null;var T=w[n];return T.fIn&&T.fIn.properties&&(A.properties=T.fIn.properties),A}},56696:function(C,A,e){"use strict";var v=e(54460);C.exports=function(w,n,T){var x={},f=T[n.geo]._subplot.mockAxis,s=w.lonlat;return x.lonLabel=v.tickText(f,f.c2l(s[0]),!0).text,x.latLabel=v.tickText(f,f.c2l(s[1]),!0).text,x}},64292:function(C,A,e){"use strict";var v=e(93024),w=e(39032).BADNUM,n=e(44928),T=e(3400).fillText,x=e(6096);C.exports=function(f,s,t){var o=f.cd,r=o[0].trace,i=f.xa,a=f.ya,u=f.subplot,l=u.projection.isLonLatOverEdges,d=u.project;if(v.getClosest(o,function(y){var M=y.lonlat;if(M[0]===w||l(M))return 1/0;var h=d(M),E=d([s,t]),k=Math.abs(h[0]-E[0]),D=Math.abs(h[1]-E[1]),P=Math.max(3,y.mrc||0);return Math.max(Math.sqrt(k*k+D*D)-P,1-3/P)},f),f.index!==!1){var c=o[f.index],_=c.lonlat,p=[i.c2p(_),a.c2p(_)],g=c.mrc||1;f.x0=p[0]-g,f.x1=p[0]+g,f.y0=p[1]-g,f.y1=p[1]+g,f.loc=c.loc,f.lon=_[0],f.lat=_[1];var m={};m[r.geo]={_subplot:u};var b=r._module.formatLabels(c,r,m);return f.lonLabel=b.lonLabel,f.latLabel=b.latLabel,f.color=n(r,c),f.extraText=function(y,M,h,E){if(!y.hovertemplate){var k=M.hi||y.hoverinfo,D=k==="all"?x.hoverinfo.flags:k.split("+"),P=D.indexOf("location")!==-1&&Array.isArray(y.locations),L=D.indexOf("lon")!==-1,O=D.indexOf("lat")!==-1,N=D.indexOf("text")!==-1,V=[];return P?V.push(M.loc):L&&O?V.push("("+F(h.latLabel)+", "+F(h.lonLabel)+")"):L?V.push(E.lon+F(h.lonLabel)):O&&V.push(E.lat+F(h.latLabel)),N&&T(M,y,V),V.join("<br>")}function F(j){return j+"\xB0"}}(r,c,f,o[0].t.labels),f.hovertemplate=r.hovertemplate,[f]}}},36952:function(C,A,e){"use strict";C.exports={attributes:e(6096),supplyDefaults:e(86188),colorbar:e(5528),formatLabels:e(56696),calc:e(25212),calcGeoJSON:e(48691).calcGeoJSON,plot:e(48691).plot,style:e(25064),styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(64292),eventData:e(58544),selectPoints:e(8796),moduleType:"trace",name:"scattergeo",basePlotModule:e(10816),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},48691:function(C,A,e){"use strict";var v=e(33428),w=e(3400),n=e(59972).getTopojsonFeatures,T=e(44808),x=e(27144),f=e(19280).findExtremes,s=e(39032).BADNUM,t=e(16356).calcMarkerSize,o=e(43028),r=e(25064);C.exports={calcGeoJSON:function(i,a){var u,l,d=i[0].trace,c=a[d.geo],_=c._subplot,p=d._length;if(w.isArrayOrTypedArray(d.locations)){var g=d.locationmode,m=g==="geojson-id"?x.extractTraceFeature(i):n(d,_.topojson);for(u=0;u<p;u++){l=i[u];var b=g==="geojson-id"?l.fOut:x.locationToFeature(g,l.loc,m);l.lonlat=b?b.properties.ct:[s,s]}}var y,M,h={padded:!0};if(c.fitbounds==="geojson"&&d.locationmode==="geojson-id"){var E=x.computeBbox(x.getTraceGeojson(d));y=[E[0],E[2]],M=[E[1],E[3]]}else{for(y=new Array(p),M=new Array(p),u=0;u<p;u++)l=i[u],y[u]=l.lonlat[0],M[u]=l.lonlat[1];h.ppad=t(d,p)}d._extremes.lon=f(c.lonaxis._ax,y,h),d._extremes.lat=f(c.lataxis._ax,M,h)},plot:function(i,a,u){var l=a.layers.frontplot.select(".scatterlayer"),d=w.makeTraceGroups(l,u,"trace scattergeo");function c(_,p){_.lonlat[0]===s&&v.select(p).remove()}d.selectAll("*").remove(),d.each(function(_){var p=v.select(this),g=_[0].trace;if(o.hasLines(g)||g.fill!=="none"){var m=T.calcTraceToLineCoords(_),b=g.fill!=="none"?T.makePolygon(m):T.makeLine(m);p.selectAll("path.js-line").data([{geojson:b,trace:g}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}o.hasMarkers(g)&&p.selectAll("path.point").data(w.identity).enter().append("path").classed("point",!0).each(function(y){c(y,this)}),o.hasText(g)&&p.selectAll("g").data(w.identity).enter().append("g").append("text").each(function(y){c(y,this)}),r(i,_)})}}},8796:function(C,A,e){"use strict";var v=e(43028),w=e(39032).BADNUM;C.exports=function(n,T){var x,f,s,t,o,r=n.cd,i=n.xaxis,a=n.yaxis,u=[],l=r[0].trace;if(!v.hasMarkers(l)&&!v.hasText(l))return[];if(T===!1)for(o=0;o<r.length;o++)r[o].selected=0;else for(o=0;o<r.length;o++)(f=(x=r[o]).lonlat)[0]!==w&&(s=i.c2p(f),t=a.c2p(f),T.contains([s,t],null,o,n)?(u.push({pointNumber:o,lon:f[0],lat:f[1]}),x.selected=1):x.selected=0);return u}},25064:function(C,A,e){"use strict";var v=e(33428),w=e(43616),n=e(76308),T=e(49224),x=T.stylePoints,f=T.styleText;C.exports=function(s,t){t&&function(o,r){var i=r[0].trace,a=r[0].node3;a.style("opacity",r[0].trace.opacity),x(a,i,o),f(a,i,o),a.selectAll("path.js-line").style("fill","none").each(function(u){var l=v.select(this),d=u.trace,c=d.line||{};l.call(n.stroke,c.color).call(w.dashLine,c.dash||"",c.width||0),d.fill!=="none"&&l.call(n.fill,d.fillcolor)})}(s,t)}},2876:function(C,A,e){"use strict";var v=e(45464),w=e(25376),n=e(98304),T=e(52904),x=e(29736).axisHoverFormat,f=e(49084),s=e(95376),t=e(92880).extendFlat,o=e(67824).overrideAll,r=e(67072).DASHES,i=T.line,a=T.marker,u=a.line,l=C.exports=o({x:T.x,x0:T.x0,dx:T.dx,y:T.y,y0:T.y0,dy:T.dy,xperiod:T.xperiod,yperiod:T.yperiod,xperiod0:T.xperiod0,yperiod0:T.yperiod0,xperiodalignment:T.xperiodalignment,yperiodalignment:T.yperiodalignment,xhoverformat:x("x"),yhoverformat:x("y"),text:T.text,hovertext:T.hovertext,textposition:T.textposition,textfont:w({editType:"calc",colorEditType:"style",arrayOk:!0,variantValues:["normal","small-caps"]}),mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:i.color,width:i.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:s(r),dflt:"solid"}},marker:t({},f("marker"),{symbol:a.symbol,angle:a.angle,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,opacity:a.opacity,colorbar:a.colorbar,line:t({},f("marker.line"),{width:u.width})}),connectgaps:T.connectgaps,fill:t({},T.fill,{dflt:"none"}),fillcolor:n(),selected:{marker:T.selected.marker,textfont:T.selected.textfont},unselected:{marker:T.unselected.marker,textfont:T.unselected.textfont},opacity:v.opacity},"calc","nested");l.x.editType=l.y.editType=l.x0.editType=l.y0.editType="calc+clearAxisTypes",l.hovertemplate=T.hovertemplate,l.texttemplate=T.texttemplate},64628:function(C,A,e){"use strict";var v=e(41272);C.exports={moduleType:"trace",name:"scattergl",basePlotModule:e(57952),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:e(2876),supplyDefaults:e(80220),crossTraceDefaults:e(35036),colorbar:e(5528),formatLabels:e(99396),calc:e(24856),hoverPoints:v.hoverPoints,selectPoints:e(73224),meta:{}}},24856:function(C,A,e){"use strict";var v=e(3108),w=e(3400),n=e(79811),T=e(19280).findExtremes,x=e(1220),f=e(16356),s=f.calcMarkerSize,t=f.calcAxisExpansion,o=f.setFirstScatter,r=e(90136),i=e(84236),a=e(74588),u=e(39032).BADNUM,l=e(67072).TOO_MANY_POINTS;function d(c,_,p){var g=c._extremes[_._id],m=T(_,p._bnds,{padded:!0});g.min=g.min.concat(m.min),g.max=g.max.concat(m.max)}C.exports=function(c,_){var p,g=c._fullLayout,m=_._xA=n.getFromId(c,_.xaxis,"x"),b=_._yA=n.getFromId(c,_.yaxis,"y"),y=g._plots[_.xaxis+_.yaxis],M=_._length,h=M>=l,E=2*M,k={},D=m.makeCalcdata(_,"x"),P=b.makeCalcdata(_,"y"),L=x(_,m,"x",D),O=x(_,b,"y",P),N=L.vals,V=O.vals;_._x=N,_._y=V,_.xperiodalignment&&(_._origX=D,_._xStarts=L.starts,_._xEnds=L.ends),_.yperiodalignment&&(_._origY=P,_._yStarts=O.starts,_._yEnds=O.ends);var F=new Array(E),j=new Array(M);for(p=0;p<M;p++)F[2*p]=N[p]===u?NaN:N[p],F[2*p+1]=V[p]===u?NaN:V[p],j[p]=p;if(m.type==="log")for(p=0;p<E;p+=2)F[p]=m.c2l(F[p]);if(b.type==="log")for(p=1;p<E;p+=2)F[p]=b.c2l(F[p]);h&&m.type!=="log"&&b.type!=="log"?k.tree=v(F):k.ids=j,r(c,_);var Z,z=function(U,re,ee,J,Q,ne){var K=i.style(U,ee);if(K.marker&&(K.marker.positions=J),K.line&&J.length>1&&w.extendFlat(K.line,i.linePositions(U,ee,J)),K.errorX||K.errorY){var oe=i.errorBarPositions(U,ee,J,Q,ne);K.errorX&&w.extendFlat(K.errorX,oe.x),K.errorY&&w.extendFlat(K.errorY,oe.y)}return K.text&&(w.extendFlat(K.text,{positions:J},i.textPosition(U,ee,K.text,K.marker)),w.extendFlat(K.textSel,{positions:J},i.textPosition(U,ee,K.text,K.markerSel)),w.extendFlat(K.textUnsel,{positions:J},i.textPosition(U,ee,K.text,K.markerUnsel))),K}(c,0,_,F,N,V),H=a(c,y);return o(g,_),h?z.marker&&(Z=z.marker.sizeAvg||Math.max(z.marker.size,3)):Z=s(_,M),t(c,_,m,b,N,V,Z),z.errorX&&d(_,m,z.errorX),z.errorY&&d(_,b,z.errorY),z.fill&&!H.fill2d&&(H.fill2d=!0),z.marker&&!H.scatter2d&&(H.scatter2d=!0),z.line&&!H.line2d&&(H.line2d=!0),!z.errorX&&!z.errorY||H.error2d||(H.error2d=!0),z.text&&!H.glText&&(H.glText=!0),z.marker&&(z.marker.snap=M),H.lineOptions.push(z.line),H.errorXOptions.push(z.errorX),H.errorYOptions.push(z.errorY),H.fillOptions.push(z.fill),H.markerOptions.push(z.marker),H.markerSelectedOptions.push(z.markerSel),H.markerUnselectedOptions.push(z.markerUnsel),H.textOptions.push(z.text),H.textSelectedOptions.push(z.textSel),H.textUnselectedOptions.push(z.textUnsel),H.selectBatch.push([]),H.unselectBatch.push([]),k._scene=H,k.index=H.count,k.x=N,k.y=V,k.positions=F,H.count++,[{x:!1,y:!1,t:k,trace:_}]}},67072:function(C){"use strict";C.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},84236:function(C,A,e){"use strict";var v=e(38248),w=e(20472),n=e(72160),T=e(24040),x=e(3400),f=x.isArrayOrTypedArray,s=e(43616),t=e(79811),o=e(33040).formatColor,r=e(43028),i=e(7152),a=e(80088),u=e(67072),l=e(13448).DESELECTDIM,d={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},c=e(10624).appendArrayPointValue;function _(P,L){var O,N=P._fullLayout,V=L._length,F=L.textfont,j=L.textposition,Z=f(j)?j:[j],z=F.color,H=F.size,U=F.family,re=F.weight,ee=F.style,J=F.variant,Q={},ne=P._context.plotGlPixelRatio,K=L.texttemplate;if(K){Q.text=[];var oe=N._d3locale,le=Array.isArray(K),se=le?Math.min(K.length,V):V,de=le?function(Me){return K[Me]}:function(){return K};for(O=0;O<se;O++){var be={i:O},_e=L._module.formatLabels(be,L,N),xe={};c(xe,L,O);var ve=L._meta||{};Q.text.push(x.texttemplateString(de(O),_e,oe,xe,be,ve))}}else f(L.text)&&L.text.length<V?Q.text=L.text.slice():Q.text=L.text;if(f(Q.text))for(O=Q.text.length;O<V;O++)Q.text[O]="";for(Q.opacity=L.opacity,Q.font={},Q.align=[],Q.baseline=[],O=0;O<Z.length;O++){var ye=Z[O].split(/\s+/);switch(ye[1]){case"left":Q.align.push("right");break;case"right":Q.align.push("left");break;default:Q.align.push(ye[1])}switch(ye[0]){case"top":Q.baseline.push("bottom");break;case"bottom":Q.baseline.push("top");break;default:Q.baseline.push(ye[0])}}if(f(z))for(Q.color=new Array(V),O=0;O<V;O++)Q.color[O]=z[O];else Q.color=z;if(f(H)||Array.isArray(U)||Array.isArray(re)||Array.isArray(ee)||Array.isArray(J))for(Q.font=new Array(V),O=0;O<V;O++){var me=Q.font[O]={};me.size=(x.isTypedArray(H)?H[O]:f(H)?v(H[O])?H[O]:0:H)*ne,me.family=Array.isArray(U)?U[O]:U,me.weight=Array.isArray(re)?re[O]:re,me.style=Array.isArray(ee)?ee[O]:ee,me.variant=Array.isArray(J)?J[O]:J}else Q.font={size:H*ne,family:U,weight:re,style:ee,variant:J};return Q}function p(P,L){var O,N,V=L._length,F=L.marker,j={},Z=f(F.symbol),z=f(F.angle),H=f(F.color),U=f(F.line.color),re=f(F.opacity),ee=f(F.size),J=f(F.line.width);if(Z||(N=a.isOpenSymbol(F.symbol)),Z||H||U||re||z){j.symbols=new Array(V),j.angles=new Array(V),j.colors=new Array(V),j.borderColors=new Array(V);var Q=F.symbol,ne=F.angle,K=o(F,F.opacity,V),oe=o(F.line,F.opacity,V);if(!f(oe[0])){var le=oe;for(oe=Array(V),O=0;O<V;O++)oe[O]=le}if(!f(K[0])){var se=K;for(K=Array(V),O=0;O<V;O++)K[O]=se}if(!f(Q)){var de=Q;for(Q=Array(V),O=0;O<V;O++)Q[O]=de}if(!f(ne)){var be=ne;for(ne=Array(V),O=0;O<V;O++)ne[O]=be}for(j.symbols=Q,j.angles=ne,j.colors=K,j.borderColors=oe,O=0;O<V;O++)Z&&(N=a.isOpenSymbol(F.symbol[O])),N&&(oe[O]=K[O].slice(),K[O]=K[O].slice(),K[O][3]=0);for(j.opacity=L.opacity,j.markers=new Array(V),O=0;O<V;O++)j.markers[O]=D({mx:j.symbols[O],ma:j.angles[O]},L)}else N?(j.color=n(F.color,"uint8"),j.color[3]=0,j.borderColor=n(F.color,"uint8")):(j.color=n(F.color,"uint8"),j.borderColor=n(F.line.color,"uint8")),j.opacity=L.opacity*F.opacity,j.marker=D({mx:F.symbol,ma:F.angle},L);var _e,xe=i(L,1);if(ee||J){var ve,ye=j.sizes=new Array(V),me=j.borderSizes=new Array(V),Me=0;if(ee){for(O=0;O<V;O++)ye[O]=xe(F.size[O]),Me+=ye[O];ve=Me/V}else for(_e=xe(F.size),O=0;O<V;O++)ye[O]=_e;if(J)for(O=0;O<V;O++)me[O]=F.line.width[O];else for(_e=F.line.width,O=0;O<V;O++)me[O]=_e;j.sizeAvg=ve}else j.size=xe(F&&F.size||10),j.borderSizes=xe(F.line.width);return j}function g(P,L,O){var N=L.marker,V={};return O&&(O.marker&&O.marker.symbol?V=p(0,x.extendFlat({},N,O.marker)):O.marker&&(O.marker.size&&(V.size=O.marker.size),O.marker.color&&(V.colors=O.marker.color),O.marker.opacity!==void 0&&(V.opacity=O.marker.opacity))),V}function m(P,L,O){var N={};if(!O)return N;if(O.textfont){var V={opacity:1,text:L.text,texttemplate:L.texttemplate,textposition:L.textposition,textfont:x.extendFlat({},L.textfont)};O.textfont&&x.extendFlat(V.textfont,O.textfont),N=_(P,V)}return N}function b(P,L,O){var N={capSize:2*L.width*O,lineWidth:L.thickness*O,color:L.color};return L.copy_ystyle&&(N=P.error_y),N}var y=u.SYMBOL_SDF_SIZE,M=u.SYMBOL_SIZE,h=u.SYMBOL_STROKE,E={},k=s.symbolFuncs[0](.05*M);function D(P,L){var O,N,V=P.mx;if(V==="circle")return null;var F=s.symbolNumber(V),j=s.symbolFuncs[F%100],Z=!!s.symbolNoDot[F%100],z=!!s.symbolNoFill[F%100],H=a.isDotSymbol(V);if(P.ma&&(V+="_"+P.ma),E[V])return E[V];var U=s.getMarkerAngle(P,L);return O=H&&!Z?j(1.1*M,U)+k:j(M,U),N=w(O,{w:y,h:y,viewBox:[-M,-M,M,M],stroke:z?h:-h}),E[V]=N,N||null}C.exports={style:function(P,L){var O,N={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},V=P._context.plotGlPixelRatio;if(L.visible!==!0)return N;if(r.hasText(L)&&(N.text=_(P,L),N.textSel=m(P,L,L.selected),N.textUnsel=m(P,L,L.unselected)),r.hasMarkers(L)&&(N.marker=p(0,L),N.markerSel=g(0,L,L.selected),N.markerUnsel=g(0,L,L.unselected),!L.unselected&&f(L.marker.opacity))){var F=L.marker.opacity;for(N.markerUnsel.opacity=new Array(F.length),O=0;O<F.length;O++)N.markerUnsel.opacity[O]=l*F[O]}if(r.hasLines(L)){N.line={overlay:!0,thickness:L.line.width*V,color:L.line.color,opacity:L.opacity};var j=(u.DASHES[L.line.dash]||[1]).slice();for(O=0;O<j.length;++O)j[O]*=L.line.width*V;N.line.dashes=j}return L.error_x&&L.error_x.visible&&(N.errorX=b(L,L.error_x,V)),L.error_y&&L.error_y.visible&&(N.errorY=b(L,L.error_y,V)),L.fill&&L.fill!=="none"&&(N.fill={closed:!0,fill:L.fillcolor,thickness:0}),N},markerStyle:p,markerSelection:g,linePositions:function(P,L,O){var N,V,F=O.length,j=F/2;if(r.hasLines(L)&&j)if(L.line.shape==="hv"){for(N=[],V=0;V<j-1;V++)isNaN(O[2*V])||isNaN(O[2*V+1])?N.push(NaN,NaN,NaN,NaN):(N.push(O[2*V],O[2*V+1]),isNaN(O[2*V+2])||isNaN(O[2*V+3])?N.push(NaN,NaN):N.push(O[2*V+2],O[2*V+1]));N.push(O[F-2],O[F-1])}else if(L.line.shape==="hvh"){for(N=[],V=0;V<j-1;V++)if(isNaN(O[2*V])||isNaN(O[2*V+1])||isNaN(O[2*V+2])||isNaN(O[2*V+3]))isNaN(O[2*V])||isNaN(O[2*V+1])?N.push(NaN,NaN):N.push(O[2*V],O[2*V+1]),N.push(NaN,NaN);else{var Z=(O[2*V]+O[2*V+2])/2;N.push(O[2*V],O[2*V+1],Z,O[2*V+1],Z,O[2*V+3])}N.push(O[F-2],O[F-1])}else if(L.line.shape==="vhv"){for(N=[],V=0;V<j-1;V++)if(isNaN(O[2*V])||isNaN(O[2*V+1])||isNaN(O[2*V+2])||isNaN(O[2*V+3]))isNaN(O[2*V])||isNaN(O[2*V+1])?N.push(NaN,NaN):N.push(O[2*V],O[2*V+1]),N.push(NaN,NaN);else{var z=(O[2*V+1]+O[2*V+3])/2;N.push(O[2*V],O[2*V+1],O[2*V],z,O[2*V+2],z)}N.push(O[F-2],O[F-1])}else if(L.line.shape==="vh"){for(N=[],V=0;V<j-1;V++)isNaN(O[2*V])||isNaN(O[2*V+1])?N.push(NaN,NaN,NaN,NaN):(N.push(O[2*V],O[2*V+1]),isNaN(O[2*V+2])||isNaN(O[2*V+3])?N.push(NaN,NaN):N.push(O[2*V],O[2*V+3]));N.push(O[F-2],O[F-1])}else N=O;var H=!1;for(V=0;V<N.length;V++)if(isNaN(N[V])){H=!0;break}var U=H||N.length>u.TOO_MANY_POINTS||r.hasMarkers(L)?"rect":"round";if(H&&L.connectgaps){var re=N[0],ee=N[1];for(V=0;V<N.length;V+=2)isNaN(N[V])||isNaN(N[V+1])?(N[V]=re,N[V+1]=ee):(re=N[V],ee=N[V+1])}return{join:U,positions:N}},errorBarPositions:function(P,L,O,N,V){var F=T.getComponentMethod("errorbars","makeComputeError"),j=t.getFromId(P,L.xaxis,"x"),Z=t.getFromId(P,L.yaxis,"y"),z=O.length/2,H={};function U(re,ee){var J=ee._id.charAt(0),Q=L["error_"+J];if(Q&&Q.visible&&(ee.type==="linear"||ee.type==="log")){for(var ne=F(Q),K={x:0,y:1}[J],oe={x:[0,1,2,3],y:[2,3,0,1]}[J],le=new Float64Array(4*z),se=1/0,de=-1/0,be=0,_e=0;be<z;be++,_e+=4){var xe=re[be];if(v(xe)){var ve=O[2*be+K],ye=ne(xe,be),me=ye[0],Me=ye[1];if(v(me)&&v(Me)){var Ae=xe-me,ce=xe+Me;le[_e+oe[0]]=ve-ee.c2l(Ae),le[_e+oe[1]]=ee.c2l(ce)-ve,le[_e+oe[2]]=0,le[_e+oe[3]]=0,se=Math.min(se,xe-me),de=Math.max(de,xe+Me)}}}H[J]={positions:O,errors:le,_bnds:[se,de]}}}return U(N,j),U(V,Z),H},textPosition:function(P,L,O,N){var V,F=L._length,j={};if(r.hasMarkers(L)){var Z=O.font,z=O.align,H=O.baseline;for(j.offset=new Array(F),V=0;V<F;V++){var U=N.sizes?N.sizes[V]:N.size,re=f(Z)?Z[V].size:Z.size,ee=f(z)?z.length>1?z[V]:z[0]:z,J=f(H)?H.length>1?H[V]:H[0]:H,Q=d[ee],ne=d[J],K=U?U/.8+1:0,oe=-ne*K-.5*ne;j.offset[V]=[Q*K/re,oe/re]}}return j}}},80220:function(C,A,e){"use strict";var v=e(3400),w=e(24040),n=e(80088),T=e(2876),x=e(88200),f=e(43028),s=e(43980),t=e(31147),o=e(74428),r=e(66828),i=e(70840),a=e(124);C.exports=function(u,l,d,c){function _(E,k){return v.coerce(u,l,T,E,k)}var p=!!u.marker&&n.isOpenSymbol(u.marker.symbol),g=f.isBubble(u),m=s(u,l,c,_);if(m){t(u,l,c,_),_("xhoverformat"),_("yhoverformat");var b=m<x.PTS_LINESONLY?"lines+markers":"lines";_("text"),_("hovertext"),_("hovertemplate"),_("mode",b),f.hasMarkers(l)&&(o(u,l,d,c,_,{noAngleRef:!0,noStandOff:!0}),_("marker.line.width",p||g?1:0)),f.hasLines(l)&&(_("connectgaps"),r(u,l,d,c,_),_("line.shape")),f.hasText(l)&&(_("texttemplate"),a(u,l,c,_));var y=(l.line||{}).color,M=(l.marker||{}).color;_("fill"),l.fill!=="none"&&i(u,l,d,_);var h=w.getComponentMethod("errorbars","supplyDefaults");h(u,l,y||M||d,{axis:"y"}),h(u,l,y||M||d,{axis:"x",inherit:"y"}),v.coerceSelectionMarkerOpacity(l,_)}else l.visible=!1}},26768:function(C,A,e){"use strict";var v=e(3400),w=e(76308),n=e(13448).DESELECTDIM;C.exports={styleTextSelection:function(T){var x,f,s=T[0],t=s.trace,o=s.t,r=o._scene,i=o.index,a=r.selectBatch[i],u=r.unselectBatch[i],l=r.textOptions[i],d=r.textSelectedOptions[i]||{},c=r.textUnselectedOptions[i]||{},_=v.extendFlat({},l);if(a.length||u.length){var p=d.color,g=c.color,m=l.color,b=v.isArrayOrTypedArray(m);for(_.color=new Array(t._length),x=0;x<a.length;x++)f=a[x],_.color[f]=p||(b?m[f]:m);for(x=0;x<u.length;x++){f=u[x];var y=b?m[f]:m;_.color[f]=g||(p?y:w.addOpacity(y,n))}}r.glText[i].update(_)}}},99396:function(C,A,e){"use strict";var v=e(76688);C.exports=function(w,n,T){var x=w.i;return"x"in w||(w.x=n._x[x]),"y"in w||(w.y=n._y[x]),v(w,n,T)}},80088:function(C,A,e){"use strict";var v=e(67072);A.isOpenSymbol=function(w){return typeof w=="string"?v.OPEN_RE.test(w):w%200>100},A.isDotSymbol=function(w){return typeof w=="string"?v.DOT_RE.test(w):w>200}},41272:function(C,A,e){"use strict";var v=e(24040),w=e(3400),n=e(44928);function T(x,f,s,t){var o=x.xa,r=x.ya,i=x.distance,a=x.dxy,u=x.index,l={pointNumber:u,x:f[u],y:s[u]};l.tx=w.isArrayOrTypedArray(t.text)?t.text[u]:t.text,l.htx=Array.isArray(t.hovertext)?t.hovertext[u]:t.hovertext,l.data=Array.isArray(t.customdata)?t.customdata[u]:t.customdata,l.tp=Array.isArray(t.textposition)?t.textposition[u]:t.textposition;var d=t.textfont;d&&(l.ts=w.isArrayOrTypedArray(d.size)?d.size[u]:d.size,l.tc=w.isArrayOrTypedArray(d.color)?d.color[u]:d.color,l.tf=Array.isArray(d.family)?d.family[u]:d.family,l.tw=Array.isArray(d.weight)?d.weight[u]:d.weight,l.ty=Array.isArray(d.style)?d.style[u]:d.style,l.tv=Array.isArray(d.variant)?d.variant[u]:d.variant);var c=t.marker;c&&(l.ms=w.isArrayOrTypedArray(c.size)?c.size[u]:c.size,l.mo=w.isArrayOrTypedArray(c.opacity)?c.opacity[u]:c.opacity,l.mx=w.isArrayOrTypedArray(c.symbol)?c.symbol[u]:c.symbol,l.ma=w.isArrayOrTypedArray(c.angle)?c.angle[u]:c.angle,l.mc=w.isArrayOrTypedArray(c.color)?c.color[u]:c.color);var _=c&&c.line;_&&(l.mlc=Array.isArray(_.color)?_.color[u]:_.color,l.mlw=w.isArrayOrTypedArray(_.width)?_.width[u]:_.width);var p=c&&c.gradient;p&&p.type!=="none"&&(l.mgt=Array.isArray(p.type)?p.type[u]:p.type,l.mgc=Array.isArray(p.color)?p.color[u]:p.color);var g=o.c2p(l.x,!0),m=r.c2p(l.y,!0),b=l.mrc||1,y=t.hoverlabel;y&&(l.hbg=Array.isArray(y.bgcolor)?y.bgcolor[u]:y.bgcolor,l.hbc=Array.isArray(y.bordercolor)?y.bordercolor[u]:y.bordercolor,l.hts=w.isArrayOrTypedArray(y.font.size)?y.font.size[u]:y.font.size,l.htc=Array.isArray(y.font.color)?y.font.color[u]:y.font.color,l.htf=Array.isArray(y.font.family)?y.font.family[u]:y.font.family,l.hnl=w.isArrayOrTypedArray(y.namelength)?y.namelength[u]:y.namelength);var M=t.hoverinfo;M&&(l.hi=Array.isArray(M)?M[u]:M);var h=t.hovertemplate;h&&(l.ht=Array.isArray(h)?h[u]:h);var E={};E[x.index]=l;var k=t._origX,D=t._origY,P=w.extendFlat({},x,{color:n(t,l),x0:g-b,x1:g+b,xLabelVal:k?k[u]:l.x,y0:m-b,y1:m+b,yLabelVal:D?D[u]:l.y,cd:E,distance:i,spikeDistance:a,hovertemplate:l.ht});return l.htx?P.text=l.htx:l.tx?P.text=l.tx:t.text&&(P.text=t.text),w.fillText(l,t,P),v.getComponentMethod("errorbars","hoverInfo")(l,t,P),P}C.exports={hoverPoints:function(x,f,s,t){var o,r,i,a,u,l,d,c,_,p,g=x.cd,m=g[0].t,b=g[0].trace,y=x.xa,M=x.ya,h=m.x,E=m.y,k=y.c2p(f),D=M.c2p(s),P=x.distance;if(m.tree){var L=y.p2c(k-P),O=y.p2c(k+P),N=M.p2c(D-P),V=M.p2c(D+P);o=t==="x"?m.tree.range(Math.min(L,O),Math.min(M._rl[0],M._rl[1]),Math.max(L,O),Math.max(M._rl[0],M._rl[1])):m.tree.range(Math.min(L,O),Math.min(N,V),Math.max(L,O),Math.max(N,V))}else o=m.ids;var F=P;if(t==="x"){var j=!!b.xperiodalignment,Z=!!b.yperiodalignment;for(l=0;l<o.length;l++){if(a=h[r=o[l]],d=Math.abs(y.c2p(a)-k),j){var z=y.c2p(b._xStarts[r]),H=y.c2p(b._xEnds[r]);d=k>=Math.min(z,H)&&k<=Math.max(z,H)?0:1/0}if(d<F){if(F=d,u=E[r],c=M.c2p(u)-D,Z){var U=M.c2p(b._yStarts[r]),re=M.c2p(b._yEnds[r]);c=D>=Math.min(U,re)&&D<=Math.max(U,re)?0:1/0}p=Math.sqrt(d*d+c*c),i=o[l]}}}else for(l=o.length-1;l>-1;l--)a=h[r=o[l]],u=E[r],d=y.c2p(a)-k,c=M.c2p(u)-D,(_=Math.sqrt(d*d+c*c))<F&&(F=p=_,i=r);return x.index=i,x.distance=F,x.dxy=p,i===void 0?[x]:[T(x,h,E,b)]},calcHover:T}},38983:function(C,A,e){"use strict";var v=e(64628);v.plot=e(89876),C.exports=v},89876:function(C,A,e){"use strict";var v=e(38540),w=e(13472),n=e(24544),T=e(23352),x=e(3400),f=e(72760).selectMode,s=e(5048),t=e(43028),o=e(14328),r=e(26768).styleTextSelection,i={};function a(u,l,d,c){var _=u._size,p=u.width*c,g=u.height*c,m=_.l*c,b=_.b*c,y=_.r*c,M=_.t*c,h=_.w*c,E=_.h*c;return[m+l.domain[0]*h,b+d.domain[0]*E,p-y-(1-l.domain[1])*h,g-M-(1-d.domain[1])*E]}(C.exports=function(u,l,d){if(d.length){var c,_,p=u._fullLayout,g=l._scene,m=l.xaxis,b=l.yaxis;if(g)if(s(u,["ANGLE_instanced_arrays","OES_element_index_uint"],i)){var y=g.count,M=p._glcanvas.data()[0].regl;if(o(u,l,d),g.dirty){if(!g.line2d&&!g.error2d||g.scatter2d||g.fill2d||g.glText||M.clear({}),g.error2d===!0&&(g.error2d=n(M)),g.line2d===!0&&(g.line2d=w(M)),g.scatter2d===!0&&(g.scatter2d=v(M)),g.fill2d===!0&&(g.fill2d=w(M)),g.glText===!0)for(g.glText=new Array(y),c=0;c<y;c++)g.glText[c]=new T(M);if(g.glText){if(y>g.glText.length){var h=y-g.glText.length;for(c=0;c<h;c++)g.glText.push(new T(M))}else if(y<g.glText.length){var E=g.glText.length-y;g.glText.splice(y,E).forEach(function(oe){oe.destroy()})}for(c=0;c<y;c++)g.glText[c].update(g.textOptions[c])}if(g.line2d&&(g.line2d.update(g.lineOptions),g.lineOptions=g.lineOptions.map(function(oe){if(oe&&oe.positions){for(var le=oe.positions,se=0;se<le.length&&(isNaN(le[se])||isNaN(le[se+1]));)se+=2;for(var de=le.length-2;de>se&&(isNaN(le[de])||isNaN(le[de+1]));)de-=2;oe.positions=le.slice(se,de+2)}return oe}),g.line2d.update(g.lineOptions)),g.error2d){var k=(g.errorXOptions||[]).concat(g.errorYOptions||[]);g.error2d.update(k)}g.scatter2d&&g.scatter2d.update(g.markerOptions),g.fillOrder=x.repeat(null,y),g.fill2d&&(g.fillOptions=g.fillOptions.map(function(oe,le){var se=d[le];if(oe&&se&&se[0]&&se[0].trace){var de,be,_e=se[0],xe=_e.trace,ve=_e.t,ye=g.lineOptions[le],me=[];xe._ownfill&&me.push(le),xe._nexttrace&&me.push(le+1),me.length&&(g.fillOrder[le]=me);var Me,Ae,ce=[],ae=ye&&ye.positions||ve.positions;if(xe.fill==="tozeroy"){for(Me=0;Me<ae.length&&isNaN(ae[Me+1]);)Me+=2;for(Ae=ae.length-2;Ae>Me&&isNaN(ae[Ae+1]);)Ae-=2;ae[Me+1]!==0&&(ce=[ae[Me],0]),ce=ce.concat(ae.slice(Me,Ae+2)),ae[Ae+1]!==0&&(ce=ce.concat([ae[Ae],0]))}else if(xe.fill==="tozerox"){for(Me=0;Me<ae.length&&isNaN(ae[Me]);)Me+=2;for(Ae=ae.length-2;Ae>Me&&isNaN(ae[Ae]);)Ae-=2;ae[Me]!==0&&(ce=[0,ae[Me+1]]),ce=ce.concat(ae.slice(Me,Ae+2)),ae[Ae]!==0&&(ce=ce.concat([0,ae[Ae+1]]))}else if(xe.fill==="toself"||xe.fill==="tonext"){for(ce=[],de=0,oe.splitNull=!0,be=0;be<ae.length;be+=2)(isNaN(ae[be])||isNaN(ae[be+1]))&&((ce=ce.concat(ae.slice(de,be))).push(ae[de],ae[de+1]),ce.push(null,null),de=be+2);ce=ce.concat(ae.slice(de)),de&&ce.push(ae[de],ae[de+1])}else{var pe=xe._nexttrace;if(pe){var De=g.lineOptions[le+1];if(De){var ke=De.positions;if(xe.fill==="tonexty"){for(ce=ae.slice(),le=Math.floor(ke.length/2);le--;){var Ee=ke[2*le],Ie=ke[2*le+1];isNaN(Ee)||isNaN(Ie)||ce.push(Ee,Ie)}oe.fill=pe.fillcolor}}}}if(xe._prevtrace&&xe._prevtrace.fill==="tonext"){var Re=g.lineOptions[le-1].positions,Ne=ce.length/2,ge=[de=Ne];for(be=0;be<Re.length;be+=2)(isNaN(Re[be])||isNaN(Re[be+1]))&&(ge.push(be/2+Ne+1),de=be+2);ce=ce.concat(Re),oe.hole=ge}return oe.fillmode=xe.fill,oe.opacity=xe.opacity,oe.positions=ce,oe}}),g.fill2d.update(g.fillOptions))}var D=p.dragmode,P=f(D),L=p.clickmode.indexOf("select")>-1;for(c=0;c<y;c++){var O=d[c][0],N=O.trace,V=O.t,F=V.index,j=N._length,Z=V.x,z=V.y;if(N.selectedpoints||P||L){if(P||(P=!0),N.selectedpoints){var H=g.selectBatch[F]=x.selIndices2selPoints(N),U={};for(_=0;_<H.length;_++)U[H[_]]=1;var re=[];for(_=0;_<j;_++)U[_]||re.push(_);g.unselectBatch[F]=re}var ee=V.xpx=new Array(j),J=V.ypx=new Array(j);for(_=0;_<j;_++)ee[_]=m.c2p(Z[_]),J[_]=b.c2p(z[_])}else V.xpx=V.ypx=null}if(P){if(g.select2d||(g.select2d=v(p._glcanvas.data()[1].regl)),g.scatter2d){var Q=new Array(y);for(c=0;c<y;c++)Q[c]=g.selectBatch[c].length||g.unselectBatch[c].length?g.markerUnselectedOptions[c]:{};g.scatter2d.update(Q)}g.select2d&&(g.select2d.update(g.markerOptions),g.select2d.update(g.markerSelectedOptions)),g.glText&&d.forEach(function(oe){var le=((oe||[])[0]||{}).trace||{};t.hasText(le)&&r(oe)})}else g.scatter2d&&g.scatter2d.update(g.markerOptions);var ne={viewport:a(p,m,b,u._context.plotGlPixelRatio),range:[(m._rl||m.range)[0],(b._rl||b.range)[0],(m._rl||m.range)[1],(b._rl||b.range)[1]]},K=x.repeat(ne,g.count);g.fill2d&&g.fill2d.update(K),g.line2d&&g.line2d.update(K),g.error2d&&g.error2d.update(K.concat(K)),g.scatter2d&&g.scatter2d.update(K),g.select2d&&g.select2d.update(K),g.glText&&g.glText.forEach(function(oe){oe.update(ne)})}else g.init()}}).reglPrecompiled=i},74588:function(C,A,e){"use strict";var v=e(3400);C.exports=function(w,n){var T=n._scene,x={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},f={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return n._scene||((T=n._scene={}).init=function(){v.extendFlat(T,f,x)},T.init(),T.update=function(s){var t=v.repeat(s,T.count);if(T.fill2d&&T.fill2d.update(t),T.scatter2d&&T.scatter2d.update(t),T.line2d&&T.line2d.update(t),T.error2d&&T.error2d.update(t.concat(t)),T.select2d&&T.select2d.update(t),T.glText)for(var o=0;o<T.count;o++)T.glText[o].update(s)},T.draw=function(){for(var s=T.count,t=T.fill2d,o=T.error2d,r=T.line2d,i=T.scatter2d,a=T.glText,u=T.select2d,l=T.selectBatch,d=T.unselectBatch,c=0;c<s;c++){if(t&&T.fillOrder[c]&&t.draw(T.fillOrder[c]),r&&T.lineOptions[c]&&r.draw(c),o&&(T.errorXOptions[c]&&o.draw(c),T.errorYOptions[c]&&o.draw(c+s)),i&&T.markerOptions[c])if(d[c].length){var _=v.repeat([],T.count);_[c]=d[c],i.draw(_)}else l[c].length||i.draw(c);a[c]&&T.textOptions[c]&&a[c].render()}u&&u.draw(l),T.dirty=!1},T.destroy=function(){T.fill2d&&T.fill2d.destroy&&T.fill2d.destroy(),T.scatter2d&&T.scatter2d.destroy&&T.scatter2d.destroy(),T.error2d&&T.error2d.destroy&&T.error2d.destroy(),T.line2d&&T.line2d.destroy&&T.line2d.destroy(),T.select2d&&T.select2d.destroy&&T.select2d.destroy(),T.glText&&T.glText.forEach(function(s){s.destroy&&s.destroy()}),T.lineOptions=null,T.fillOptions=null,T.markerOptions=null,T.markerSelectedOptions=null,T.markerUnselectedOptions=null,T.errorXOptions=null,T.errorYOptions=null,T.textOptions=null,T.textSelectedOptions=null,T.textUnselectedOptions=null,T.selectBatch=null,T.unselectBatch=null,n._scene=null}),T.dirty||v.extendFlat(T,x),T}},73224:function(C,A,e){"use strict";var v=e(43028),w=e(26768).styleTextSelection;C.exports=function(n,T){var x=n.cd,f=n.xaxis,s=n.yaxis,t=[],o=x[0].trace,r=x[0].t,i=o._length,a=r.x,u=r.y,l=r._scene,d=r.index;if(!l)return t;var c=v.hasText(o),_=v.hasMarkers(o),p=!_&&!c;if(o.visible!==!0||p)return t;var g=[],m=[];if(T!==!1&&!T.degenerate)for(var b=0;b<i;b++)T.contains([r.xpx[b],r.ypx[b]],!1,b,n)?(g.push(b),t.push({pointNumber:b,x:f.c2d(a[b]),y:s.c2d(u[b])})):m.push(b);if(_){var y=l.scatter2d;if(g.length||m.length){if(!l.selectBatch[d].length&&!l.unselectBatch[d].length){var M=new Array(l.count);M[d]=l.markerUnselectedOptions[d],y.update.apply(y,M)}}else{var h=new Array(l.count);h[d]=l.markerOptions[d],y.update.apply(y,h)}}return l.selectBatch[d]=g,l.unselectBatch[d]=m,c&&w(x),t}},31512:function(C,A,e){"use strict";var v=e(21776).Ks,w=e(21776).Gw,n=e(98304),T=e(6096),x=e(52904),f=e(5232),s=e(45464),t=e(49084),o=e(92880).extendFlat,r=e(67824).overrideAll,i=e(5232),a=T.line,u=T.marker;C.exports=r({lon:T.lon,lat:T.lat,cluster:{enabled:{valType:"boolean"},maxzoom:o({},i.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:o({},u.opacity,{dflt:1})},mode:o({},x.mode,{dflt:"markers"}),text:o({},x.text,{}),texttemplate:w({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:o({},x.hovertext,{}),line:{color:a.color,width:a.width},connectgaps:x.connectgaps,marker:o({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:u.opacity,size:u.size,sizeref:u.sizeref,sizemin:u.sizemin,sizemode:u.sizemode},t("marker")),fill:T.fill,fillcolor:n(),textfont:f.layers.symbol.textfont,textposition:f.layers.symbol.textposition,below:{valType:"string"},selected:{marker:x.selected.marker},unselected:{marker:x.unselected.marker},hoverinfo:o({},s.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:v()},"calc","nested")},59392:function(C,A,e){"use strict";var v=e(38248),w=e(3400),n=e(39032).BADNUM,T=e(44808),x=e(8932),f=e(43616),s=e(7152),t=e(43028),o=e(89032),r=e(10624).appendArrayPointValue,i=e(72736).NEWLINES,a=e(72736).BR_TAG_ALL;function u(g){return{type:g,geojson:T.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function l(g,m){return w.isArrayOrTypedArray(g)?m?function(b){return v(g[b])?+g[b]:0}:function(b){return g[b]}:g?function(){return g}:d}function d(){return""}function c(g){return g[0]===n}function _(g,m){var b;if(w.isArrayOrTypedArray(g)&&w.isArrayOrTypedArray(m)){b=["step",["get","point_count"],g[0]];for(var y=1;y<g.length;y++)b.push(m[y-1],g[y])}else b=g;return b}function p(g){var m=g.textfont,b="";m.weight==="bold"&&(b+=" Bold"),m.style==="italic"&&(b+=" Italic");var y=m.family;return b&&(y=y.replace(" Regular",b)),y.split(", ")}C.exports=function(g,m){var b,y=m[0].trace,M=y.visible===!0&&y._length!==0,h=y.fill!=="none",E=t.hasLines(y),k=t.hasMarkers(y),D=t.hasText(y),P=k&&y.marker.symbol==="circle",L=k&&y.marker.symbol!=="circle",O=y.cluster&&y.cluster.enabled,N=u("fill"),V=u("line"),F=u("circle"),j=u("symbol"),Z={fill:N,line:V,circle:F,symbol:j};if(!M)return Z;if((h||E)&&(b=T.calcTraceToLineCoords(m)),h&&(N.geojson=T.makePolygon(b),N.layout.visibility="visible",w.extendFlat(N.paint,{"fill-color":y.fillcolor})),E&&(V.geojson=T.makeLine(b),V.layout.visibility="visible",w.extendFlat(V.paint,{"line-width":y.line.width,"line-color":y.line.color,"line-opacity":y.opacity})),P){var z=function(re){var ee,J,Q,ne,K=re[0].trace,oe=K.marker,le=K.selectedpoints,se=w.isArrayOrTypedArray(oe.color),de=w.isArrayOrTypedArray(oe.size),be=w.isArrayOrTypedArray(oe.opacity);function _e(ae){return K.opacity*ae}se&&(J=x.hasColorscale(K,"marker")?x.makeColorScaleFuncFromTrace(oe):w.identity),de&&(Q=s(K)),be&&(ne=function(ae){return _e(v(ae)?+w.constrain(ae,0,1):0)});var xe,ve,ye=[];for(ee=0;ee<re.length;ee++){var me=re[ee],Me=me.lonlat;if(!c(Me)){var Ae={};J&&(Ae.mcc=me.mcc=J(me.mc)),Q&&(Ae.mrc=me.mrc=Q(me.ms)),ne&&(Ae.mo=ne(me.mo)),le&&(Ae.selected=me.selected||0),ye.push({type:"Feature",id:ee+1,geometry:{type:"Point",coordinates:Me},properties:Ae})}}if(le)for(xe=f.makeSelectedPointStyleFns(K),ee=0;ee<ye.length;ee++){var ce=ye[ee].properties;xe.selectedOpacityFn&&(ce.mo=_e(xe.selectedOpacityFn(ce))),xe.selectedColorFn&&(ce.mcc=xe.selectedColorFn(ce)),xe.selectedSizeFn&&(ce.mrc=xe.selectedSizeFn(ce))}return{geojson:{type:"FeatureCollection",features:ye},mcc:se||xe&&xe.selectedColorFn?{type:"identity",property:"mcc"}:oe.color,mrc:de||xe&&xe.selectedSizeFn?{type:"identity",property:"mrc"}:(ve=oe.size,ve/2),mo:be||xe&&xe.selectedOpacityFn?{type:"identity",property:"mo"}:_e(oe.opacity)}}(m);F.geojson=z.geojson,F.layout.visibility="visible",O&&(F.filter=["!",["has","point_count"]],Z.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":_(y.cluster.color,y.cluster.step),"circle-radius":_(y.cluster.size,y.cluster.step),"circle-opacity":_(y.cluster.opacity,y.cluster.step)}},Z.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":p(y),"text-size":12}}),w.extendFlat(F.paint,{"circle-color":z.mcc,"circle-radius":z.mrc,"circle-opacity":z.mo})}if(P&&O&&(F.filter=["!",["has","point_count"]]),(L||D)&&(j.geojson=function(re,ee){for(var J=ee._fullLayout,Q=re[0].trace,ne=Q.marker||{},K=ne.symbol,oe=ne.angle,le=K!=="circle"?l(K):d,se=oe!=="auto"?l(oe,!0):d,de=t.hasText(Q)?l(Q.text):d,be=[],_e=0;_e<re.length;_e++){var xe=re[_e];if(!c(xe.lonlat)){var ve,ye=Q.texttemplate;if(ye){var me=Array.isArray(ye)?ye[_e]||"":ye,Me=Q._module.formatLabels(xe,Q,J),Ae={};r(Ae,Q,xe.i);var ce=Q._meta||{};ve=w.texttemplateString(me,Me,J._d3locale,Ae,xe,ce)}else ve=de(_e);ve&&(ve=ve.replace(i,"").replace(a,`
`)),be.push({type:"Feature",geometry:{type:"Point",coordinates:xe.lonlat},properties:{symbol:le(_e),angle:se(_e),text:ve}})}}return{type:"FeatureCollection",features:be}}(m,g),w.extendFlat(j.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),L&&(w.extendFlat(j.layout,{"icon-size":y.marker.size/10}),"angle"in y.marker&&y.marker.angle!=="auto"&&w.extendFlat(j.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),j.layout["icon-allow-overlap"]=y.marker.allowoverlap,w.extendFlat(j.paint,{"icon-opacity":y.opacity*y.marker.opacity,"icon-color":y.marker.color})),D)){var H=(y.marker||{}).size,U=o(y.textposition,H);w.extendFlat(j.layout,{"text-size":y.textfont.size,"text-anchor":U.anchor,"text-offset":U.offset,"text-font":p(y)}),w.extendFlat(j.paint,{"text-color":y.textfont.color,"text-opacity":y.opacity})}return Z}},15752:function(C,A,e){"use strict";var v=e(3400),w=e(43028),n=e(74428),T=e(66828),x=e(124),f=e(70840),s=e(31512),t=["Metropolis Black Italic","Metropolis Black","Metropolis Bold Italic","Metropolis Bold","Metropolis Extra Bold Italic","Metropolis Extra Bold","Metropolis Extra Light Italic","Metropolis Extra Light","Metropolis Light Italic","Metropolis Light","Metropolis Medium Italic","Metropolis Medium","Metropolis Regular Italic","Metropolis Regular","Metropolis Semi Bold Italic","Metropolis Semi Bold","Metropolis Thin Italic","Metropolis Thin","Open Sans Bold Italic","Open Sans Bold","Open Sans Extra Bold Italic","Open Sans Extra Bold","Open Sans Italic","Open Sans Light Italic","Open Sans Light","Open Sans Regular","Open Sans Semibold Italic","Open Sans Semibold","Klokantech Noto Sans Bold","Klokantech Noto Sans CJK Bold","Klokantech Noto Sans CJK Regular","Klokantech Noto Sans Italic","Klokantech Noto Sans Regular"];C.exports=function(o,r,i,a){function u(y,M){return v.coerce(o,r,s,y,M)}function l(y,M){return v.coerce2(o,r,s,y,M)}var d=function(y,M,h){var E=h("lon")||[],k=h("lat")||[],D=Math.min(E.length,k.length);return M._length=D,D}(0,r,u);if(d){if(u("text"),u("texttemplate"),u("hovertext"),u("hovertemplate"),u("mode"),u("below"),w.hasMarkers(r)){n(o,r,i,a,u,{noLine:!0,noAngle:!0}),u("marker.allowoverlap"),u("marker.angle");var c=r.marker;c.symbol!=="circle"&&(v.isArrayOrTypedArray(c.size)&&(c.size=c.size[0]),v.isArrayOrTypedArray(c.color)&&(c.color=c.color[0]))}w.hasLines(r)&&(T(o,r,i,a,u,{noDash:!0}),u("connectgaps"));var _=l("cluster.maxzoom"),p=l("cluster.step"),g=l("cluster.color",r.marker&&r.marker.color||i),m=l("cluster.size"),b=l("cluster.opacity");(u("cluster.enabled",_!==!1||p!==!1||g!==!1||m!==!1||b!==!1)||w.hasText(r))&&x(o,r,a,u,{noSelect:!0,noFontVariant:!0,font:{family:t.indexOf(a.font.family)!==-1?a.font.family:"Open Sans Regular",weight:a.font.weight,style:a.font.style,size:a.font.size,color:a.font.color}}),u("fill"),r.fill!=="none"&&f(o,r,i,u),v.coerceSelectionMarkerOpacity(r,u)}else r.visible=!1}},37920:function(C){"use strict";C.exports=function(A,e){return A.lon=e.lon,A.lat=e.lat,A}},11960:function(C,A,e){"use strict";var v=e(54460);C.exports=function(w,n,T){var x={},f=T[n.subplot]._subplot.mockAxis,s=w.lonlat;return x.lonLabel=v.tickText(f,f.c2l(s[0]),!0).text,x.latLabel=v.tickText(f,f.c2l(s[1]),!0).text,x}},63312:function(C,A,e){"use strict";var v=e(93024),w=e(3400),n=e(44928),T=w.fillText,x=e(39032).BADNUM,f=e(47552).traceLayerPrefix;function s(t,o,r){if(!t.hovertemplate){var i=(o.hi||t.hoverinfo).split("+"),a=i.indexOf("all")!==-1,u=i.indexOf("lon")!==-1,l=i.indexOf("lat")!==-1,d=o.lonlat,c=[];return a||u&&l?c.push("("+_(d[1])+", "+_(d[0])+")"):u?c.push(r.lon+_(d[0])):l&&c.push(r.lat+_(d[1])),(a||i.indexOf("text")!==-1)&&T(o,t,c),c.join("<br>")}function _(p){return p+"\xB0"}}C.exports={hoverPoints:function(t,o,r){var i=t.cd,a=i[0].trace,u=t.xa,l=t.ya,d=t.subplot,c=[],_=f+a.uid+"-circle",p=a.cluster&&a.cluster.enabled;if(p){var g=d.map.queryRenderedFeatures(null,{layers:[_]});c=g.map(function(O){return O.id})}var m=360*(o>=0?Math.floor((o+180)/360):Math.ceil((o-180)/360)),b=o-m;if(v.getClosest(i,function(O){var N=O.lonlat;if(N[0]===x||p&&c.indexOf(O.i+1)===-1)return 1/0;var V=w.modHalf(N[0],360),F=N[1],j=d.project([V,F]),Z=j.x-u.c2p([b,F]),z=j.y-l.c2p([V,r]),H=Math.max(3,O.mrc||0);return Math.max(Math.sqrt(Z*Z+z*z)-H,1-3/H)},t),t.index!==!1){var y=i[t.index],M=y.lonlat,h=[w.modHalf(M[0],360)+m,M[1]],E=u.c2p(h),k=l.c2p(h),D=y.mrc||1;t.x0=E-D,t.x1=E+D,t.y0=k-D,t.y1=k+D;var P={};P[a.subplot]={_subplot:d};var L=a._module.formatLabels(y,a,P);return t.lonLabel=L.lonLabel,t.latLabel=L.latLabel,t.color=n(a,y),t.extraText=s(a,y,i[0].t.labels),t.hovertemplate=a.hovertemplate,[t]}},getExtraText:s}},11572:function(C,A,e){"use strict";C.exports={attributes:e(31512),supplyDefaults:e(15752),colorbar:e(5528),formatLabels:e(11960),calc:e(25212),plot:e(9660),hoverPoints:e(63312).hoverPoints,eventData:e(37920),selectPoints:e(404),styleOnSelect:function(v,w){w&&w[0].trace._glTrace.update(w)},moduleType:"trace",name:"scattermapbox",basePlotModule:e(33688),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},9660:function(C,A,e){"use strict";var v=e(3400),w=e(59392),n=e(47552).traceLayerPrefix,T={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function x(s,t,o,r){this.type="scattermapbox",this.subplot=s,this.uid=t,this.clusterEnabled=o,this.isHidden=r,this.sourceIds={fill:"source-"+t+"-fill",line:"source-"+t+"-line",circle:"source-"+t+"-circle",symbol:"source-"+t+"-symbol",cluster:"source-"+t+"-circle",clusterCount:"source-"+t+"-circle"},this.layerIds={fill:n+t+"-fill",line:n+t+"-line",circle:n+t+"-circle",symbol:n+t+"-symbol",cluster:n+t+"-cluster",clusterCount:n+t+"-cluster-count"},this.below=null}var f=x.prototype;f.addSource=function(s,t,o){var r={type:"geojson",data:t.geojson};o&&o.enabled&&v.extendFlat(r,{cluster:!0,clusterMaxZoom:o.maxzoom});var i=this.subplot.map.getSource(this.sourceIds[s]);i?i.setData(t.geojson):this.subplot.map.addSource(this.sourceIds[s],r)},f.setSourceData=function(s,t){this.subplot.map.getSource(this.sourceIds[s]).setData(t.geojson)},f.addLayer=function(s,t,o){var r={type:t.type,id:this.layerIds[s],source:this.sourceIds[s],layout:t.layout,paint:t.paint};t.filter&&(r.filter=t.filter);for(var i,a=this.layerIds[s],u=this.subplot.getMapLayers(),l=0;l<u.length;l++)if(u[l].id===a){i=!0;break}i?(this.subplot.setOptions(a,"setLayoutProperty",r.layout),r.layout.visibility==="visible"&&this.subplot.setOptions(a,"setPaintProperty",r.paint)):this.subplot.addLayer(r,o)},f.update=function(s){var t=s[0].trace,o=this.subplot,r=o.map,i=w(o.gd,s),a=o.belowLookup["trace-"+this.uid],u=!(!t.cluster||!t.cluster.enabled),l=!!this.clusterEnabled,d=this;function c(b){l?function(y){for(var M=T.cluster,h=M.length-1;h>=0;h--){var E=M[h];r.removeLayer(d.layerIds[E])}y||r.removeSource(d.sourceIds.circle)}(b):function(y){for(var M=T.nonCluster,h=M.length-1;h>=0;h--){var E=M[h];r.removeLayer(d.layerIds[E]),y||r.removeSource(d.sourceIds[E])}}(b)}function _(b){u?function(y){y||d.addSource("circle",i.circle,t.cluster);for(var M=T.cluster,h=0;h<M.length;h++){var E=M[h],k=i[E];d.addLayer(E,k,a)}}(b):function(y){for(var M=T.nonCluster,h=0;h<M.length;h++){var E=M[h],k=i[E];y||d.addSource(E,k),d.addLayer(E,k,a)}}(b)}function p(){for(var b=u?T.cluster:T.nonCluster,y=0;y<b.length;y++){var M=b[y],h=i[M];h&&(o.setOptions(d.layerIds[M],"setLayoutProperty",h.layout),h.layout.visibility==="visible"&&(M!=="cluster"&&d.setSourceData(M,h),o.setOptions(d.layerIds[M],"setPaintProperty",h.paint)))}}var g=this.isHidden,m=t.visible!==!0;m?g||c():g?m||_():l!==u?(c(),_()):(this.below!==a&&(c(!0),_(!0)),p()),this.clusterEnabled=u,this.isHidden=m,this.below=a,s[0].trace._glTrace=this},f.dispose=function(){for(var s=this.subplot.map,t=this.clusterEnabled?T.cluster:T.nonCluster,o=t.length-1;o>=0;o--){var r=t[o];s.removeLayer(this.layerIds[r]),s.removeSource(this.sourceIds[r])}},C.exports=function(s,t){var o,r,i,a=t[0].trace,u=a.cluster&&a.cluster.enabled,l=a.visible!==!0,d=new x(s,a.uid,u,l),c=w(s.gd,t),_=d.below=s.belowLookup["trace-"+a.uid];if(u)for(d.addSource("circle",c.circle,a.cluster),o=0;o<T.cluster.length;o++)i=c[r=T.cluster[o]],d.addLayer(r,i,_);else for(o=0;o<T.nonCluster.length;o++)i=c[r=T.nonCluster[o]],d.addSource(r,i,a.cluster),d.addLayer(r,i,_);return t[0].trace._glTrace=d,d}},404:function(C,A,e){"use strict";var v=e(3400),w=e(43028),n=e(39032).BADNUM;C.exports=function(T,x){var f,s=T.cd,t=T.xaxis,o=T.yaxis,r=[],i=s[0].trace;if(!w.hasMarkers(i))return[];if(x===!1)for(f=0;f<s.length;f++)s[f].selected=0;else for(f=0;f<s.length;f++){var a=s[f],u=a.lonlat;if(u[0]!==n){var l=[v.modHalf(u[0],360),u[1]],d=[t.c2p(l),o.c2p(l)];x.contains(d,null,f,T)?(r.push({pointNumber:f,lon:u[0],lat:u[1]}),a.selected=1):a.selected=0}}return r}},8319:function(C,A,e){"use strict";var v=e(21776).Ks,w=e(21776).Gw,n=e(92880).extendFlat,T=e(98304),x=e(52904),f=e(45464),s=x.line;C.exports={mode:x.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:x.text,texttemplate:w({editType:"plot"},{keys:["r","theta","text"]}),hovertext:x.hovertext,line:{color:s.color,width:s.width,dash:s.dash,backoff:s.backoff,shape:n({},s.shape,{values:["linear","spline"]}),smoothing:s.smoothing,editType:"calc"},connectgaps:x.connectgaps,marker:x.marker,cliponaxis:n({},x.cliponaxis,{dflt:!1}),textposition:x.textposition,textfont:x.textfont,fill:n({},x.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T(),hoverinfo:n({},f.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:x.hoveron,hovertemplate:v(),selected:x.selected,unselected:x.unselected}},58320:function(C,A,e){"use strict";var v=e(38248),w=e(39032).BADNUM,n=e(54460),T=e(90136),x=e(20148),f=e(4500),s=e(16356).calcMarkerSize;C.exports=function(t,o){for(var r=t._fullLayout,i=o.subplot,a=r[i].radialaxis,u=r[i].angularaxis,l=a.makeCalcdata(o,"r"),d=u.makeCalcdata(o,"theta"),c=o._length,_=new Array(c),p=0;p<c;p++){var g=l[p],m=d[p],b=_[p]={};v(g)&&v(m)?(b.r=g,b.theta=m):b.r=w}var y=s(o,c);return o._extremes.x=n.findExtremes(a,l,{ppad:y}),T(t,o),x(_,o),f(_,o),_}},85968:function(C,A,e){"use strict";var v=e(3400),w=e(43028),n=e(74428),T=e(66828),x=e(11731),f=e(124),s=e(70840),t=e(88200).PTS_LINESONLY,o=e(8319);function r(i,a,u,l){var d,c=l("r"),_=l("theta");if(v.isTypedArray(c)&&(a.r=c=Array.from(c)),v.isTypedArray(_)&&(a.theta=_=Array.from(_)),c)_?d=Math.min(c.length,_.length):(d=c.length,l("theta0"),l("dtheta"));else{if(!_)return 0;d=a.theta.length,l("r0"),l("dr")}return a._length=d,d}C.exports={handleRThetaDefaults:r,supplyDefaults:function(i,a,u,l){function d(p,g){return v.coerce(i,a,o,p,g)}var c=r(0,a,0,d);if(c){d("thetaunit"),d("mode",c<t?"lines+markers":"lines"),d("text"),d("hovertext"),a.hoveron!=="fills"&&d("hovertemplate"),w.hasMarkers(a)&&n(i,a,u,l,d,{gradient:!0}),w.hasLines(a)&&(T(i,a,u,l,d,{backoff:!0}),x(i,a,d),d("connectgaps")),w.hasText(a)&&(d("texttemplate"),f(i,a,l,d));var _=[];(w.hasMarkers(a)||w.hasText(a))&&(d("cliponaxis"),d("marker.maxdisplayed"),_.push("points")),d("fill"),a.fill!=="none"&&(s(i,a,u,d),w.hasLines(a)||x(i,a,d)),a.fill!=="tonext"&&a.fill!=="toself"||_.push("fills"),d("hoveron",_.join("+")||"points"),v.coerceSelectionMarkerOpacity(a,d)}else a.visible=!1}}},22852:function(C,A,e){"use strict";var v=e(3400),w=e(54460);C.exports=function(n,T,x){var f,s,t={},o=x[T.subplot]._subplot;o?(f=o.radialAxis,s=o.angularAxis):(f=(o=x[T.subplot]).radialaxis,s=o.angularaxis);var r=f.c2l(n.r);t.rLabel=w.tickText(f,r,!0).text;var i=s.thetaunit==="degrees"?v.rad2deg(n.theta):n.theta;return t.thetaLabel=w.tickText(s,i,!0).text,t}},8504:function(C,A,e){"use strict";var v=e(98723);function w(n,T,x,f){var s=x.radialAxis,t=x.angularAxis;s._hovertitle="r",t._hovertitle="\u03B8";var o={};o[T.subplot]={_subplot:x};var r=T._module.formatLabels(n,T,o);f.rLabel=r.rLabel,f.thetaLabel=r.thetaLabel;var i=n.hi||T.hoverinfo,a=[];function u(d,c){a.push(d._hovertitle+": "+c)}if(!T.hovertemplate){var l=i.split("+");l.indexOf("all")!==-1&&(l=["r","theta","text"]),l.indexOf("r")!==-1&&u(s,f.rLabel),l.indexOf("theta")!==-1&&u(t,f.thetaLabel),l.indexOf("text")!==-1&&f.text&&(a.push(f.text),delete f.text),f.extraText=a.join("<br>")}}C.exports={hoverPoints:function(n,T,x,f){var s=v(n,T,x,f);if(s&&s[0].index!==!1){var t=s[0];if(t.index===void 0)return s;var o=n.subplot,r=t.cd[t.index],i=t.trace;if(o.isPtInside(r))return t.xLabelVal=void 0,t.yLabelVal=void 0,w(r,i,o,t),t.hovertemplate=i.hovertemplate,s}},makeHoverPointText:w}},76924:function(C,A,e){"use strict";C.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:e(40872),categories:["polar","symbols","showLegend","scatter-like"],attributes:e(8319),supplyDefaults:e(85968).supplyDefaults,colorbar:e(5528),formatLabels:e(22852),calc:e(58320),plot:e(43456),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(8504).hoverPoints,selectPoints:e(91560),meta:{}}},43456:function(C,A,e){"use strict";var v=e(96504),w=e(39032).BADNUM;C.exports=function(n,T,x){for(var f=T.layers.frontplot.select("g.scatterlayer"),s=T.xaxis,t=T.yaxis,o={xaxis:s,yaxis:t,plot:T.framework,layerClipId:T._hasClipOnAxisFalse?T.clipIds.forTraces:null},r=T.radialAxis,i=T.angularAxis,a=0;a<x.length;a++)for(var u=x[a],l=0;l<u.length;l++){l===0&&(u[0].trace._xA=s,u[0].trace._yA=t);var d=u[l],c=d.r;if(c===w)d.x=d.y=w;else{var _=r.c2g(c),p=i.c2g(d.theta);d.x=_*Math.cos(p),d.y=_*Math.sin(p)}}v(n,o,x,f)}},24396:function(C,A,e){"use strict";var v=e(8319),w=e(2876),n=e(21776).Gw;C.exports={mode:v.mode,r:v.r,theta:v.theta,r0:v.r0,dr:v.dr,theta0:v.theta0,dtheta:v.dtheta,thetaunit:v.thetaunit,text:v.text,texttemplate:n({editType:"plot"},{keys:["r","theta","text"]}),hovertext:v.hovertext,hovertemplate:v.hovertemplate,line:{color:w.line.color,width:w.line.width,dash:w.line.dash,editType:"calc"},connectgaps:w.connectgaps,marker:w.marker,fill:w.fill,fillcolor:w.fillcolor,textposition:w.textposition,textfont:w.textfont,hoverinfo:v.hoverinfo,selected:v.selected,unselected:v.unselected}},27160:function(C,A,e){"use strict";C.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:e(40872),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:e(24396),supplyDefaults:e(98608),colorbar:e(5528),formatLabels:e(94120),calc:e(66720),hoverPoints:e(1600).hoverPoints,selectPoints:e(73224),meta:{}}},66720:function(C,A,e){"use strict";var v=e(90136),w=e(16356).calcMarkerSize,n=e(84236),T=e(54460),x=e(67072).TOO_MANY_POINTS;C.exports=function(f,s){var t=f._fullLayout,o=s.subplot,r=t[o].radialaxis,i=t[o].angularaxis,a=s._r=r.makeCalcdata(s,"r"),u=s._theta=i.makeCalcdata(s,"theta"),l=s._length,d={};l<a.length&&(a=a.slice(0,l)),l<u.length&&(u=u.slice(0,l)),d.r=a,d.theta=u,v(f,s);var c,_=d.opts=n.style(f,s);return l<x?c=w(s,l):_.marker&&(c=2*(_.marker.sizeAvg||Math.max(_.marker.size,3))),s._extremes.x=T.findExtremes(r,a,{ppad:c}),[{x:!1,y:!1,t:d,trace:s}]}},98608:function(C,A,e){"use strict";var v=e(3400),w=e(43028),n=e(85968).handleRThetaDefaults,T=e(74428),x=e(66828),f=e(124),s=e(70840),t=e(88200).PTS_LINESONLY,o=e(24396);C.exports=function(r,i,a,u){function l(c,_){return v.coerce(r,i,o,c,_)}var d=n(r,i,u,l);d?(l("thetaunit"),l("mode",d<t?"lines+markers":"lines"),l("text"),l("hovertext"),i.hoveron!=="fills"&&l("hovertemplate"),w.hasMarkers(i)&&T(r,i,a,u,l,{noAngleRef:!0,noStandOff:!0}),w.hasLines(i)&&(x(r,i,a,u,l),l("connectgaps")),w.hasText(i)&&(l("texttemplate"),f(r,i,u,l)),l("fill"),i.fill!=="none"&&s(r,i,a,l),v.coerceSelectionMarkerOpacity(i,l)):i.visible=!1}},94120:function(C,A,e){"use strict";var v=e(22852);C.exports=function(w,n,T){var x=w.i;return"r"in w||(w.r=n._r[x]),"theta"in w||(w.theta=n._theta[x]),v(w,n,T)}},1600:function(C,A,e){"use strict";var v=e(41272),w=e(8504).makeHoverPointText;C.exports={hoverPoints:function(n,T,x,f){var s=n.cd[0].t,t=s.r,o=s.theta,r=v.hoverPoints(n,T,x,f);if(r&&r[0].index!==!1){var i=r[0];if(i.index===void 0)return r;var a=n.subplot,u=i.cd[i.index],l=i.trace;if(u.r=t[i.index],u.theta=o[i.index],a.isPtInside(u))return i.xLabelVal=void 0,i.yLabelVal=void 0,w(u,l,a,i),r}}}},62944:function(C,A,e){"use strict";var v=e(27160);v.plot=e(56512),C.exports=v},56512:function(C,A,e){"use strict";var v=e(3108),w=e(38248),n=e(89876),T=e(74588),x=e(84236),f=e(3400),s=e(67072).TOO_MANY_POINTS;C.exports=function(t,o,r){if(r.length){var i=o.radialAxis,a=o.angularAxis,u=T(t,o);return r.forEach(function(l){if(l&&l[0]&&l[0].trace){var d,c=l[0],_=c.trace,p=c.t,g=_._length,m=p.r,b=p.theta,y=p.opts,M=m.slice(),h=b.slice();for(d=0;d<m.length;d++)o.isPtInside({r:m[d],theta:b[d]})||(M[d]=NaN,h[d]=NaN);var E=new Array(2*g),k=Array(g),D=Array(g);for(d=0;d<g;d++){var P,L,O=M[d];if(w(O)){var N=i.c2g(O),V=a.c2g(h[d],_.thetaunit);P=N*Math.cos(V),L=N*Math.sin(V)}else P=L=NaN;k[d]=E[2*d]=P,D[d]=E[2*d+1]=L}p.tree=v(E),y.marker&&g>=s&&(y.marker.cluster=p.tree),y.marker&&(y.markerSel.positions=y.markerUnsel.positions=y.marker.positions=E),y.line&&E.length>1&&f.extendFlat(y.line,x.linePositions(t,_,E)),y.text&&(f.extendFlat(y.text,{positions:E},x.textPosition(t,_,y.text,y.marker)),f.extendFlat(y.textSel,{positions:E},x.textPosition(t,_,y.text,y.markerSel)),f.extendFlat(y.textUnsel,{positions:E},x.textPosition(t,_,y.text,y.markerUnsel))),y.fill&&!u.fill2d&&(u.fill2d=!0),y.marker&&!u.scatter2d&&(u.scatter2d=!0),y.line&&!u.line2d&&(u.line2d=!0),y.text&&!u.glText&&(u.glText=!0),u.lineOptions.push(y.line),u.fillOptions.push(y.fill),u.markerOptions.push(y.marker),u.markerSelectedOptions.push(y.markerSel),u.markerUnselectedOptions.push(y.markerUnsel),u.textOptions.push(y.text),u.textSelectedOptions.push(y.textSel),u.textUnselectedOptions.push(y.textUnsel),u.selectBatch.push([]),u.unselectBatch.push([]),p.x=k,p.y=D,p.rawx=k,p.rawy=D,p.r=m,p.theta=b,p.positions=E,p._scene=u,p.index=u.count,u.count++}}),n(t,o,r)}},C.exports.reglPrecompiled={}},69496:function(C,A,e){"use strict";var v=e(21776).Ks,w=e(21776).Gw,n=e(92880).extendFlat,T=e(98304),x=e(52904),f=e(45464),s=x.line;C.exports={mode:x.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:x.text,texttemplate:w({editType:"plot"},{keys:["real","imag","text"]}),hovertext:x.hovertext,line:{color:s.color,width:s.width,dash:s.dash,backoff:s.backoff,shape:n({},s.shape,{values:["linear","spline"]}),smoothing:s.smoothing,editType:"calc"},connectgaps:x.connectgaps,marker:x.marker,cliponaxis:n({},x.cliponaxis,{dflt:!1}),textposition:x.textposition,textfont:x.textfont,fill:n({},x.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T(),hoverinfo:n({},f.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:x.hoveron,hovertemplate:v(),selected:x.selected,unselected:x.unselected}},47507:function(C,A,e){"use strict";var v=e(38248),w=e(39032).BADNUM,n=e(90136),T=e(20148),x=e(4500),f=e(16356).calcMarkerSize;C.exports=function(s,t){for(var o=s._fullLayout,r=t.subplot,i=o[r].realaxis,a=o[r].imaginaryaxis,u=i.makeCalcdata(t,"real"),l=a.makeCalcdata(t,"imag"),d=t._length,c=new Array(d),_=0;_<d;_++){var p=u[_],g=l[_],m=c[_]={};v(p)&&v(g)?(m.real=p,m.imag=g):m.real=w}return f(t,d),n(s,t),T(c,t),x(c,t),c}},76716:function(C,A,e){"use strict";var v=e(3400),w=e(43028),n=e(74428),T=e(66828),x=e(11731),f=e(124),s=e(70840),t=e(88200).PTS_LINESONLY,o=e(69496);C.exports=function(r,i,a,u){function l(_,p){return v.coerce(r,i,o,_,p)}var d=function(_,p,g,m){var b,y=m("real"),M=m("imag");return y&&M&&(b=Math.min(y.length,M.length)),v.isTypedArray(y)&&(p.real=y=Array.from(y)),v.isTypedArray(M)&&(p.imag=M=Array.from(M)),p._length=b,b}(0,i,0,l);if(d){l("mode",d<t?"lines+markers":"lines"),l("text"),l("hovertext"),i.hoveron!=="fills"&&l("hovertemplate"),w.hasMarkers(i)&&n(r,i,a,u,l,{gradient:!0}),w.hasLines(i)&&(T(r,i,a,u,l,{backoff:!0}),x(r,i,l),l("connectgaps")),w.hasText(i)&&(l("texttemplate"),f(r,i,u,l));var c=[];(w.hasMarkers(i)||w.hasText(i))&&(l("cliponaxis"),l("marker.maxdisplayed"),c.push("points")),l("fill"),i.fill!=="none"&&(s(r,i,a,l),w.hasLines(i)||x(r,i,l)),i.fill!=="tonext"&&i.fill!=="toself"||c.push("fills"),l("hoveron",c.join("+")||"points"),v.coerceSelectionMarkerOpacity(i,l)}else i.visible=!1}},49504:function(C,A,e){"use strict";var v=e(54460);C.exports=function(w,n,T){var x={},f=T[n.subplot]._subplot;return x.realLabel=v.tickText(f.radialAxis,w.real,!0).text,x.imagLabel=v.tickText(f.angularAxis,w.imag,!0).text,x}},25292:function(C,A,e){"use strict";var v=e(98723);function w(n,T,x,f){var s=x.radialAxis,t=x.angularAxis;s._hovertitle="real",t._hovertitle="imag";var o={};o[T.subplot]={_subplot:x};var r=T._module.formatLabels(n,T,o);f.realLabel=r.realLabel,f.imagLabel=r.imagLabel;var i=n.hi||T.hoverinfo,a=[];function u(d,c){a.push(d._hovertitle+": "+c)}if(!T.hovertemplate){var l=i.split("+");l.indexOf("all")!==-1&&(l=["real","imag","text"]),l.indexOf("real")!==-1&&u(s,f.realLabel),l.indexOf("imag")!==-1&&u(t,f.imagLabel),l.indexOf("text")!==-1&&f.text&&(a.push(f.text),delete f.text),f.extraText=a.join("<br>")}}C.exports={hoverPoints:function(n,T,x,f){var s=v(n,T,x,f);if(s&&s[0].index!==!1){var t=s[0];if(t.index===void 0)return s;var o=n.subplot,r=t.cd[t.index],i=t.trace;if(o.isPtInside(r))return t.xLabelVal=void 0,t.yLabelVal=void 0,w(r,i,o,t),t.hovertemplate=i.hovertemplate,s}},makeHoverPointText:w}},95443:function(C,A,e){"use strict";C.exports={moduleType:"trace",name:"scattersmith",basePlotModule:e(47788),categories:["smith","symbols","showLegend","scatter-like"],attributes:e(69496),supplyDefaults:e(76716),colorbar:e(5528),formatLabels:e(49504),calc:e(47507),plot:e(34927),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(25292).hoverPoints,selectPoints:e(91560),meta:{}}},34927:function(C,A,e){"use strict";var v=e(96504),w=e(39032).BADNUM,n=e(36416).smith;C.exports=function(T,x,f){for(var s=x.layers.frontplot.select("g.scatterlayer"),t=x.xaxis,o=x.yaxis,r={xaxis:t,yaxis:o,plot:x.framework,layerClipId:x._hasClipOnAxisFalse?x.clipIds.forTraces:null},i=0;i<f.length;i++)for(var a=f[i],u=0;u<a.length;u++){u===0&&(a[0].trace._xA=t,a[0].trace._yA=o);var l=a[u],d=l.real;if(d===w)l.x=l.y=w;else{var c=n([d,l.imag]);l.x=c[0],l.y=c[1]}}v(T,r,f,s)}},5896:function(C,A,e){"use strict";var v=e(21776).Ks,w=e(21776).Gw,n=e(98304),T=e(52904),x=e(45464),f=e(49084),s=e(98192).u,t=e(92880).extendFlat,o=T.marker,r=T.line,i=o.line;C.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:t({},T.mode,{dflt:"markers"}),text:t({},T.text,{}),texttemplate:w({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:t({},T.hovertext,{}),line:{color:r.color,width:r.width,dash:s,backoff:r.backoff,shape:t({},r.shape,{values:["linear","spline"]}),smoothing:r.smoothing,editType:"calc"},connectgaps:T.connectgaps,cliponaxis:T.cliponaxis,fill:t({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:n(),marker:t({symbol:o.symbol,opacity:o.opacity,angle:o.angle,angleref:o.angleref,standoff:o.standoff,maxdisplayed:o.maxdisplayed,size:o.size,sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,line:t({width:i.width,editType:"calc"},f("marker.line")),gradient:o.gradient,editType:"calc"},f("marker")),textfont:T.textfont,textposition:T.textposition,selected:T.selected,unselected:T.unselected,hoverinfo:t({},x.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:T.hoveron,hovertemplate:v()}},34335:function(C,A,e){"use strict";var v=e(38248),w=e(90136),n=e(20148),T=e(4500),x=e(16356).calcMarkerSize,f=["a","b","c"],s={a:["b","c"],b:["a","c"],c:["a","b"]};C.exports=function(t,o){var r,i,a,u,l,d,c=t._fullLayout[o.subplot].sum,_=o.sum||c,p={a:o.a,b:o.b,c:o.c};for(r=0;r<f.length;r++)if(!p[a=f[r]]){for(l=p[s[a][0]],d=p[s[a][1]],u=new Array(l.length),i=0;i<l.length;i++)u[i]=_-l[i]-d[i];p[a]=u}var g,m,b,y,M,h,E=o._length,k=new Array(E);for(r=0;r<E;r++)g=p.a[r],m=p.b[r],b=p.c[r],v(g)&&v(m)&&v(b)?((y=c/((g=+g)+(m=+m)+(b=+b)))!=1&&(g*=y,m*=y,b*=y),h=g,M=b-m,k[r]={x:M,y:h,a:g,b:m,c:b}):k[r]={x:!1,y:!1};return x(o,E),w(t,o),n(k,o),T(k,o),k}},84256:function(C,A,e){"use strict";var v=e(3400),w=e(88200),n=e(43028),T=e(74428),x=e(66828),f=e(11731),s=e(124),t=e(70840),o=e(5896);C.exports=function(r,i,a,u){function l(m,b){return v.coerce(r,i,o,m,b)}var d,c=l("a"),_=l("b"),p=l("c");if(c?(d=c.length,_?(d=Math.min(d,_.length),p&&(d=Math.min(d,p.length))):d=p?Math.min(d,p.length):0):_&&p&&(d=Math.min(_.length,p.length)),d){i._length=d,l("sum"),l("text"),l("hovertext"),i.hoveron!=="fills"&&l("hovertemplate"),l("mode",d<w.PTS_LINESONLY?"lines+markers":"lines"),n.hasMarkers(i)&&T(r,i,a,u,l,{gradient:!0}),n.hasLines(i)&&(x(r,i,a,u,l,{backoff:!0}),f(r,i,l),l("connectgaps")),n.hasText(i)&&(l("texttemplate"),s(r,i,u,l));var g=[];(n.hasMarkers(i)||n.hasText(i))&&(l("cliponaxis"),l("marker.maxdisplayed"),g.push("points")),l("fill"),i.fill!=="none"&&(t(r,i,a,l),n.hasLines(i)||f(r,i,l)),i.fill!=="tonext"&&i.fill!=="toself"||g.push("fills"),l("hoveron",g.join("+")||"points"),v.coerceSelectionMarkerOpacity(i,l)}else i.visible=!1}},97476:function(C){"use strict";C.exports=function(A,e,v,w,n){if(e.xa&&(A.xaxis=e.xa),e.ya&&(A.yaxis=e.ya),w[n]){var T=w[n];A.a=T.a,A.b=T.b,A.c=T.c}else A.a=e.a,A.b=e.b,A.c=e.c;return A}},90404:function(C,A,e){"use strict";var v=e(54460);C.exports=function(w,n,T){var x={},f=T[n.subplot]._subplot;return x.aLabel=v.tickText(f.aaxis,w.a,!0).text,x.bLabel=v.tickText(f.baxis,w.b,!0).text,x.cLabel=v.tickText(f.caxis,w.c,!0).text,x}},26596:function(C,A,e){"use strict";var v=e(98723);C.exports=function(w,n,T,x){var f=v(w,n,T,x);if(f&&f[0].index!==!1){var s=f[0];if(s.index===void 0){var t=1-s.y0/w.ya._length,o=w.xa._length,r=o*t/2,i=o-r;return s.x0=Math.max(Math.min(s.x0,i),r),s.x1=Math.max(Math.min(s.x1,i),r),f}var a=s.cd[s.index],u=s.trace,l=s.subplot;s.a=a.a,s.b=a.b,s.c=a.c,s.xLabelVal=void 0,s.yLabelVal=void 0;var d={};d[u.subplot]={_subplot:l};var c=u._module.formatLabels(a,u,d);s.aLabel=c.aLabel,s.bLabel=c.bLabel,s.cLabel=c.cLabel;var _=a.hi||u.hoverinfo,p=[];if(!u.hovertemplate){var g=_.split("+");g.indexOf("all")!==-1&&(g=["a","b","c"]),g.indexOf("a")!==-1&&m(l.aaxis,s.aLabel),g.indexOf("b")!==-1&&m(l.baxis,s.bLabel),g.indexOf("c")!==-1&&m(l.caxis,s.cLabel)}return s.extraText=p.join("<br>"),s.hovertemplate=u.hovertemplate,f}function m(b,y){p.push(b._hovertitle+": "+y)}}},34864:function(C,A,e){"use strict";C.exports={attributes:e(5896),supplyDefaults:e(84256),colorbar:e(5528),formatLabels:e(90404),calc:e(34335),plot:e(88776),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(26596),selectPoints:e(91560),eventData:e(97476),moduleType:"trace",name:"scatterternary",basePlotModule:e(19352),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},88776:function(C,A,e){"use strict";var v=e(96504);C.exports=function(w,n,T){var x=n.plotContainer;x.select(".scatterlayer").selectAll("*").remove();for(var f=n.xaxis,s=n.yaxis,t={xaxis:f,yaxis:s,plot:x,layerClipId:n._hasClipOnAxisFalse?n.clipIdRelative:null},o=n.layers.frontplot.select("g.scatterlayer"),r=0;r<T.length;r++){var i=T[r];i.length&&(i[0].trace._xA=f,i[0].trace._yA=s)}v(w,t,T,o)}},44524:function(C,A,e){"use strict";var v=e(52904),w=e(49084),n=e(29736).axisHoverFormat,T=e(21776).Ks,x=e(2876),f=e(33816).idRegex,s=e(31780).templatedArray,t=e(92880).extendFlat,o=v.marker,r=o.line,i=t(w("marker.line",{editTypeOverride:"calc"}),{width:t({},r.width,{editType:"calc"}),editType:"calc"}),a=t(w("marker"),{symbol:o.symbol,angle:o.angle,size:t({},o.size,{editType:"markerSize"}),sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,opacity:o.opacity,colorbar:o.colorbar,line:i,editType:"calc"});function u(l){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:f[l],editType:"plot"}}}a.color.editType=a.cmin.editType=a.cmax.editType="style",C.exports={dimensions:s("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:t({},x.text,{}),hovertext:t({},x.hovertext,{}),hovertemplate:T(),xhoverformat:n("x"),yhoverformat:n("y"),marker:a,xaxes:u("x"),yaxes:u("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:x.selected.marker,editType:"calc"},unselected:{marker:x.unselected.marker,editType:"calc"},opacity:x.opacity}},28888:function(C,A,e){"use strict";var v=e(24040),w=e(12704);C.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:e(44524),supplyDefaults:e(69544),colorbar:e(5528),calc:e(66821),plot:e(54840),hoverPoints:e(72248).hoverPoints,selectPoints:e(62500),editStyle:e(83156),meta:{}},v.register(w)},99332:function(C,A,e){"use strict";var v=e(13472),w=e(24040),n=e(5048),T=e(84888)._M,x=e(57952),f=e(79811).getFromId,s=e(54460).shouldShowZeroLine,t="splom",o={};function r(a,u,l){for(var d=l.matrixOptions.data.length,c=u._visibleDims,_=l.viewOpts.ranges=new Array(d),p=0;p<c.length;p++){var g=c[p],m=_[p]=new Array(4),b=f(a,u._diag[g][0]);b&&(m[0]=b.r2l(b.range[0]),m[2]=b.r2l(b.range[1]));var y=f(a,u._diag[g][1]);y&&(m[1]=y.r2l(y.range[0]),m[3]=y.r2l(y.range[1]))}l.selectBatch.length||l.unselectBatch.length?l.matrix.update({ranges:_},{ranges:_}):l.matrix.update({ranges:_})}function i(a){var u=a._fullLayout,l=u._glcanvas.data()[0].regl,d=u._splomGrid;d||(d=u._splomGrid=v(l)),d.update(function(c){var _,p=c._context.plotGlPixelRatio,g=c._fullLayout,m=g._size,b=[0,0,g.width*p,g.height*p],y={};function M(U,re,ee,J,Q,ne){ee*=p,J*=p,Q*=p,ne*=p;var K=re[U+"color"],oe=re[U+"width"],le=String(K+oe);le in y?y[le].data.push(NaN,NaN,ee,J,Q,ne):y[le]={data:[ee,J,Q,ne],join:"rect",thickness:oe*p,color:K,viewport:b,range:b,overlay:!1}}for(_ in g._splomSubplots){var h,E,k=g._plots[_],D=k.xaxis,P=k.yaxis,L=D._gridVals,O=P._gridVals,N=D._offset,V=D._length,F=P._length,j=m.b+P.domain[0]*m.h,Z=-P._m,z=-Z*P.r2l(P.range[0],P.calendar);if(D.showgrid)for(_=0;_<L.length;_++)h=N+D.l2p(L[_].x),M("grid",D,h,j,h,j+F);if(P.showgrid)for(_=0;_<O.length;_++)M("grid",P,N,E=j+z+Z*O[_].x,N+V,E);s(c,D,P)&&(h=N+D.l2p(0),M("zeroline",D,h,j,h,j+F)),s(c,P,D)&&M("zeroline",P,N,E=j+z+0,N+V,E)}var H=[];for(_ in y)H.push(y[_]);return H}(a))}C.exports={name:t,attr:x.attr,attrRegex:x.attrRegex,layoutAttributes:x.layoutAttributes,supplyLayoutDefaults:x.supplyLayoutDefaults,drawFramework:x.drawFramework,plot:function(a){var u=a._fullLayout,l=w.getModule(t),d=T(a.calcdata,l)[0];n(a,["ANGLE_instanced_arrays","OES_element_index_uint"],o)&&(u._hasOnlyLargeSploms&&i(a),l.plot(a,{},d))},drag:function(a){var u=a.calcdata,l=a._fullLayout;l._hasOnlyLargeSploms&&i(a);for(var d=0;d<u.length;d++){var c=u[d][0].trace,_=l._splomScenes[c.uid];c.type==="splom"&&_&&_.matrix&&r(a,c,_)}},updateGrid:i,clean:function(a,u,l,d){var c,_={};if(d._splomScenes){for(c=0;c<a.length;c++){var p=a[c];p.type==="splom"&&(_[p.uid]=1)}for(c=0;c<l.length;c++){var g=l[c];if(!_[g.uid]){var m=d._splomScenes[g.uid];m&&m.destroy&&m.destroy(),d._splomScenes[g.uid]=null,delete d._splomScenes[g.uid]}}}Object.keys(d._splomScenes||{}).length===0&&delete d._splomScenes,d._splomGrid&&!u._hasOnlyLargeSploms&&d._hasOnlyLargeSploms&&(d._splomGrid.destroy(),d._splomGrid=null,delete d._splomGrid),x.clean(a,u,l,d)},updateFx:x.updateFx,toSVG:x.toSVG,reglPrecompiled:o}},66821:function(C,A,e){"use strict";var v=e(3400),w=e(79811),n=e(16356).calcMarkerSize,T=e(16356).calcAxisExpansion,x=e(90136),f=e(84236).markerSelection,s=e(84236).markerStyle,t=e(72308),o=e(39032).BADNUM,r=e(67072).TOO_MANY_POINTS;C.exports=function(i,a){var u,l,d,c,_,p,g=a.dimensions,m=a._length,b={},y=b.cdata=[],M=b.data=[],h=a._visibleDims=[];function E(D,P){for(var L=D.makeCalcdata({v:P.values,vcalendar:a.calendar},"v"),O=0;O<L.length;O++)L[O]=L[O]===o?NaN:L[O];y.push(L),M.push(D.type==="log"?v.simpleMap(L,D.c2l):L)}for(u=0;u<g.length;u++)if((d=g[u]).visible){if(c=w.getFromId(i,a._diag[u][0]),_=w.getFromId(i,a._diag[u][1]),c&&_&&c.type!==_.type){v.log("Skipping splom dimension "+u+" with conflicting axis types");continue}c?(E(c,d),_&&_.type==="category"&&(_._categories=c._categories.slice())):E(_,d),h.push(u)}for(x(i,a),v.extendFlat(b,s(i,a)),p=y.length*m>r?b.sizeAvg||Math.max(b.size,3):n(a,m),l=0;l<h.length;l++)d=g[u=h[l]],c=w.getFromId(i,a._diag[u][0])||{},_=w.getFromId(i,a._diag[u][1])||{},T(i,a,c,_,y[l],y[l],p);var k=t(i,a);return k.matrix||(k.matrix=!0),k.matrixOptions=b,k.selectedOptions=f(i,a,a.selected),k.unselectedOptions=f(i,a,a.unselected),[{x:!1,y:!1,t:{},trace:a}]}},69544:function(C,A,e){"use strict";var v=e(3400),w=e(51272),n=e(44524),T=e(43028),x=e(74428),f=e(26284),s=e(80088).isOpenSymbol;function t(o,r){function i(u,l){return v.coerce(o,r,n.dimensions,u,l)}i("label");var a=i("values");a&&a.length?i("visible"):r.visible=!1,i("axis.type"),i("axis.matches")}C.exports=function(o,r,i,a){function u(m,b){return v.coerce(o,r,n,m,b)}var l=w(o,r,{name:"dimensions",handleItemDefaults:t}),d=u("diagonal.visible"),c=u("showupperhalf"),_=u("showlowerhalf");if(f(r,l,"values")&&(d||c||_)){u("text"),u("hovertext"),u("hovertemplate"),u("xhoverformat"),u("yhoverformat"),x(o,r,i,a,u,{noAngleRef:!0,noStandOff:!0});var p=s(r.marker.symbol),g=T.isBubble(r);u("marker.line.width",p||g?1:0),function(m,b,y,M){var h,E,k=b.dimensions,D=k.length,P=b.showupperhalf,L=b.showlowerhalf,O=b.diagonal.visible,N=new Array(D),V=new Array(D);for(h=0;h<D;h++){var F=h?h+1:"";N[h]="x"+F,V[h]="y"+F}var j=M("xaxes",N),Z=M("yaxes",V),z=b._diag=new Array(D);b._xaxes={},b._yaxes={};var H=[],U=[];function re(de,be,_e,xe){if(de){var ve=de.charAt(0),ye=y._splomAxes[ve];if(b["_"+ve+"axes"][de]=1,xe.push(de),!(de in ye)){var me=ye[de]={};_e&&(me.label=_e.label||"",_e.visible&&_e.axis&&(_e.axis.type&&(me.type=_e.axis.type),_e.axis.matches&&(me.matches=be)))}}}var ee=!O&&!L,J=!O&&!P;for(b._axesDim={},h=0;h<D;h++){var Q=k[h],ne=h===0,K=h===D-1,oe=ne&&ee||K&&J?void 0:j[h],le=ne&&J||K&&ee?void 0:Z[h];re(oe,le,Q,H),re(le,oe,Q,U),z[h]=[oe,le],b._axesDim[oe]=h,b._axesDim[le]=h}for(h=0;h<H.length;h++)for(E=0;E<U.length;E++){var se=H[h]+U[E];h>E&&P||h<E&&L?y._splomSubplots[se]=1:h!==E||!O&&L&&P||(y._splomSubplots[se]=1)}(!L||!O&&P&&L)&&(y._splomGridDflt.xside="bottom",y._splomGridDflt.yside="left")}(0,r,a,u),v.coerceSelectionMarkerOpacity(r,u)}else r.visible=!1}},83156:function(C,A,e){"use strict";var v=e(3400),w=e(90136),n=e(84236).markerStyle;C.exports=function(T,x){var f=x.trace,s=T._fullLayout._splomScenes[f.uid];if(s){w(T,f),v.extendFlat(s.matrixOptions,n(T,f));var t=v.extendFlat({},s.matrixOptions,s.viewOpts);s.matrix.update(t,null)}}},50328:function(C,A){"use strict";A.getDimIndex=function(e,v){for(var w=v._id,n={x:0,y:1}[w.charAt(0)],T=e._visibleDims,x=0;x<T.length;x++){var f=T[x];if(e._diag[f][n]===w)return x}return!1}},72248:function(C,A,e){"use strict";var v=e(50328),w=e(41272).calcHover,n=e(54460).getFromId,T=e(92880).extendFlat;function x(f,s,t,o){var r=f.cd[0].trace,i=f.scene.matrixOptions.cdata,a=f.xa,u=f.ya,l=a.c2p(s),d=u.c2p(t),c=f.distance,_=v.getDimIndex(r,a),p=v.getDimIndex(r,u);if(_===!1||p===!1)return[f];for(var g,m,b=i[_],y=i[p],M=c,h=0;h<b.length;h++)if(!o||h===f.index){var E=b[h],k=y[h],D=a.c2p(E)-l,P=u.c2p(k)-d,L=Math.sqrt(D*D+P*P);(o||L<M)&&(M=m=L,g=h)}return f.index=g,f.distance=M,f.dxy=m,g===void 0?[f]:[w(f,b,y,r)]}C.exports={hoverPoints:function(f,s,t,o,r){r||(r={});var i=(o||"").charAt(0)==="x",a=(o||"").charAt(0)==="y",u=x(f,s,t);if((i||a)&&r.hoversubplots==="axis"&&u[0])for(var l=(i?f.xa:f.ya)._subplotsWith,d=r.gd,c=T({},f),_=0;_<l.length;_++){var p=l[_];if(p!==f.xa._id+f.ya._id){a?c.xa=n(d,p,"x"):c.ya=n(d,p,"y");var g=x(c,s,t,i||a);u=u.concat(g)}}return u}}},97924:function(C,A,e){"use strict";var v=e(28888);v.basePlotModule=e(99332),C.exports=v},54840:function(C,A,e){"use strict";var v=e(55795),w=e(3400),n=e(79811),T=e(72760).selectMode;function x(f,s){var t,o,r,i,a,u=f._fullLayout,l=u._size,d=s.trace,c=s.t,_=u._splomScenes[d.uid],p=_.matrixOptions,g=p.cdata,m=u._glcanvas.data()[0].regl,b=u.dragmode;if(g.length!==0){p.lower=d.showupperhalf,p.upper=d.showlowerhalf,p.diagonal=d.diagonal.visible;var y=d._visibleDims,M=g.length,h=_.viewOpts={};for(h.ranges=new Array(M),h.domains=new Array(M),a=0;a<y.length;a++){r=y[a];var E=h.ranges[a]=new Array(4),k=h.domains[a]=new Array(4);(t=n.getFromId(f,d._diag[r][0]))&&(E[0]=t._rl[0],E[2]=t._rl[1],k[0]=t.domain[0],k[2]=t.domain[1]),(o=n.getFromId(f,d._diag[r][1]))&&(E[1]=o._rl[0],E[3]=o._rl[1],k[1]=o.domain[0],k[3]=o.domain[1])}var D=f._context.plotGlPixelRatio,P=l.l*D,L=l.b*D,O=l.w*D,N=l.h*D;h.viewport=[P,L,O+P,N+L],_.matrix===!0&&(_.matrix=v(m));var V=u.clickmode.indexOf("select")>-1,F=!0;if(T(b)||d.selectedpoints||V){var j=d._length;if(d.selectedpoints){_.selectBatch=d.selectedpoints;var Z=d.selectedpoints,z={};for(r=0;r<Z.length;r++)z[Z[r]]=!0;var H=[];for(r=0;r<j;r++)z[r]||H.push(r);_.unselectBatch=H}var U=c.xpx=new Array(M),re=c.ypx=new Array(M);for(a=0;a<y.length;a++){if(r=y[a],t=n.getFromId(f,d._diag[r][0]))for(U[a]=new Array(j),i=0;i<j;i++)U[a][i]=t.c2p(g[a][i]);if(o=n.getFromId(f,d._diag[r][1]))for(re[a]=new Array(j),i=0;i<j;i++)re[a][i]=o.c2p(g[a][i])}if(_.selectBatch.length||_.unselectBatch.length){var ee=w.extendFlat({},p,_.unselectedOptions,h),J=w.extendFlat({},p,_.selectedOptions,h);_.matrix.update(ee,J),F=!1}}else c.xpx=c.ypx=null;if(F){var Q=w.extendFlat({},p,h);_.matrix.update(Q,null)}}}C.exports=function(f,s,t){if(t.length)for(var o=0;o<t.length;o++)x(f,t[o][0])}},72308:function(C,A,e){"use strict";var v=e(3400);C.exports=function(w,n){var T=w._fullLayout,x=n.uid,f=T._splomScenes;f||(f=T._splomScenes={});var s={dirty:!0,selectBatch:[],unselectBatch:[]},t=f[n.uid];return t||((t=f[x]=v.extendFlat({},s,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){t.matrix&&t.matrix.draw&&(t.selectBatch.length||t.unselectBatch.length?t.matrix.draw(t.unselectBatch,t.selectBatch):t.matrix.draw()),t.dirty=!1},t.destroy=function(){t.matrix&&t.matrix.destroy&&t.matrix.destroy(),t.matrixOptions=null,t.selectBatch=null,t.unselectBatch=null,t=null}),t.dirty||v.extendFlat(t,s),t}},62500:function(C,A,e){"use strict";var v=e(3400),w=v.pushUnique,n=e(43028),T=e(50328);C.exports=function(x,f){var s=x.cd,t=s[0].trace,o=s[0].t,r=x.scene,i=r.matrixOptions.cdata,a=x.xaxis,u=x.yaxis,l=[];if(!r)return l;var d=!n.hasMarkers(t)&&!n.hasText(t);if(t.visible!==!0||d)return l;var c=T.getDimIndex(t,a),_=T.getDimIndex(t,u);if(c===!1||_===!1)return l;var p=o.xpx[c],g=o.ypx[_],m=i[c],b=i[_],y=(x.scene.selectBatch||[]).slice(),M=[];if(f!==!1&&!f.degenerate)for(var h=0;h<m.length;h++)f.contains([p[h],g[h]],null,h,x)?(l.push({pointNumber:h,x:m[h],y:b[h]}),w(y,h)):y.indexOf(h)!==-1?w(y,h):M.push(h);var E=r.matrixOptions;return y.length||M.length?r.selectBatch.length||r.unselectBatch.length||r.matrix.update(r.unselectedOptions,v.extendFlat({},E,r.selectedOptions,r.viewOpts)):r.matrix.update(E,null),r.selectBatch=y,r.unselectBatch=M,l}},90167:function(C,A,e){"use strict";var v=e(49084),w=e(29736).axisHoverFormat,n=e(21776).Ks,T=e(52948),x=e(45464),f=e(92880).extendFlat,s={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:n({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:w("u",1),vhoverformat:w("v",1),whoverformat:w("w",1),xhoverformat:w("x"),yhoverformat:w("y"),zhoverformat:w("z"),showlegend:f({},x.showlegend,{dflt:!1})};f(s,v("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(t){s[t]=T[t]}),s.hoverinfo=f({},x.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),s.transforms=void 0,C.exports=s},3832:function(C,A,e){"use strict";var v=e(3400),w=e(47128);function n(f){var s,t,o,r,i,a,u,l,d,c,_,p,g=f._x,m=f._y,b=f._z,y=f._len,M=-1/0,h=1/0,E=-1/0,k=1/0,D=-1/0,P=1/0,L="";for(y&&(u=g[0],d=m[0],_=b[0]),y>1&&(l=g[y-1],c=m[y-1],p=b[y-1]),s=0;s<y;s++)M=Math.max(M,g[s]),h=Math.min(h,g[s]),E=Math.max(E,m[s]),k=Math.min(k,m[s]),D=Math.max(D,b[s]),P=Math.min(P,b[s]),r||g[s]===u||(r=!0,L+="x"),i||m[s]===d||(i=!0,L+="y"),a||b[s]===_||(a=!0,L+="z");r||(L+="x"),i||(L+="y"),a||(L+="z");var O=T(f._x),N=T(f._y),V=T(f._z);L=(L=(L=L.replace("x",(u>l?"-":"+")+"x")).replace("y",(d>c?"-":"+")+"y")).replace("z",(_>p?"-":"+")+"z");var F=function(){y=0,O=[],N=[],V=[]};(!y||y<O.length*N.length*V.length)&&F();var j=function(ve){return ve==="x"?g:ve==="y"?m:b},Z=function(ve){return ve==="x"?O:ve==="y"?N:V},z=function(ve){return ve[y-1]<ve[0]?-1:1},H=j(L[1]),U=j(L[3]),re=j(L[5]),ee=Z(L[1]).length,J=Z(L[3]).length,Q=Z(L[5]).length,ne=!1,K=function(ve,ye,me){return ee*(J*ve+ye)+me},oe=z(j(L[1])),le=z(j(L[3])),se=z(j(L[5]));for(s=0;s<Q-1;s++){for(t=0;t<J-1;t++){for(o=0;o<ee-1;o++){var de=K(s,t,o),be=K(s,t,o+1),_e=K(s,t+1,o),xe=K(s+1,t,o);if(H[de]*oe<H[be]*oe&&U[de]*le<U[_e]*le&&re[de]*se<re[xe]*se||(ne=!0),ne)break}if(ne)break}if(ne)break}return ne&&(v.warn("Encountered arbitrary coordinates! Unable to input data grid."),F()),{xMin:h,yMin:k,zMin:P,xMax:M,yMax:E,zMax:D,Xs:O,Ys:N,Zs:V,len:y,fill:L}}function T(f){return v.distinctVals(f).vals}function x(f,s){if(s===void 0&&(s=f.length),v.isTypedArray(f))return f.subarray(0,s);for(var t=[],o=0;o<s;o++)t[o]=+f[o];return t}C.exports={calc:function(f,s){s._len=Math.min(s.u.length,s.v.length,s.w.length,s.x.length,s.y.length,s.z.length),s._u=x(s.u,s._len),s._v=x(s.v,s._len),s._w=x(s.w,s._len),s._x=x(s.x,s._len),s._y=x(s.y,s._len),s._z=x(s.z,s._len);var t=n(s);s._gridFill=t.fill,s._Xs=t.Xs,s._Ys=t.Ys,s._Zs=t.Zs,s._len=t.len;var o,r,i,a=0;s.starts&&(o=x(s.starts.x||[]),r=x(s.starts.y||[]),i=x(s.starts.z||[]),a=Math.min(o.length,r.length,i.length)),s._startsX=o||[],s._startsY=r||[],s._startsZ=i||[];var u,l=0,d=1/0;for(u=0;u<s._len;u++){var c=s._u[u],_=s._v[u],p=s._w[u],g=Math.sqrt(c*c+_*_+p*p);l=Math.max(l,g),d=Math.min(d,g)}for(w(f,s,{vals:[d,l],containerStr:"",cLetter:"c"}),u=0;u<a;u++){var m=o[u];t.xMax=Math.max(t.xMax,m),t.xMin=Math.min(t.xMin,m);var b=r[u];t.yMax=Math.max(t.yMax,b),t.yMin=Math.min(t.yMin,b);var y=i[u];t.zMax=Math.max(t.zMax,y),t.zMin=Math.min(t.zMin,y)}s._slen=a,s._normMax=l,s._xbnds=[t.xMin,t.xMax],s._ybnds=[t.yMin,t.yMax],s._zbnds=[t.zMin,t.zMax]},filter:x,processGrid:n}},25668:function(C,A,e){"use strict";var v=e(67792).gl_streamtube3d,w=v.createTubeMesh,n=e(3400),T=e(33040).parseColorScale,x=e(8932).extractOpts,f=e(52094),s={xaxis:0,yaxis:1,zaxis:2};function t(u,l){this.scene=u,this.uid=l,this.mesh=null,this.data=null}var o=t.prototype;function r(u){var l=u.length;return l>2?u.slice(1,l-1):l===2?[(u[0]+u[1])/2]:u}function i(u){var l=u.length;return l===1?[.5,.5]:[u[1]-u[0],u[l-1]-u[l-2]]}function a(u,l){var d=u.fullSceneLayout,c=u.dataScale,_=l._len,p={};function g(ee,J){var Q=d[J],ne=c[s[J]];return n.simpleMap(ee,function(K){return Q.d2l(K)*ne})}if(p.vectors=f(g(l._u,"xaxis"),g(l._v,"yaxis"),g(l._w,"zaxis"),_),!_)return{positions:[],cells:[]};var m=g(l._Xs,"xaxis"),b=g(l._Ys,"yaxis"),y=g(l._Zs,"zaxis");if(p.meshgrid=[m,b,y],p.gridFill=l._gridFill,l._slen)p.startingPositions=f(g(l._startsX,"xaxis"),g(l._startsY,"yaxis"),g(l._startsZ,"zaxis"));else{for(var M=b[0],h=r(m),E=r(y),k=new Array(h.length*E.length),D=0,P=0;P<h.length;P++)for(var L=0;L<E.length;L++)k[D++]=[h[P],M,E[L]];p.startingPositions=k}p.colormap=T(l),p.tubeSize=l.sizeref,p.maxLength=l.maxdisplayed;var O=g(l._xbnds,"xaxis"),N=g(l._ybnds,"yaxis"),V=g(l._zbnds,"zaxis"),F=i(m),j=i(b),Z=i(y),z=[[O[0]-F[0],N[0]-j[0],V[0]-Z[0]],[O[1]+F[1],N[1]+j[1],V[1]+Z[1]]],H=v(p,z),U=x(l);H.vertexIntensityBounds=[U.min/l._normMax,U.max/l._normMax];var re=l.lightposition;return H.lightPosition=[re.x,re.y,re.z],H.ambient=l.lighting.ambient,H.diffuse=l.lighting.diffuse,H.specular=l.lighting.specular,H.roughness=l.lighting.roughness,H.fresnel=l.lighting.fresnel,H.opacity=l.opacity,l._pad=H.tubeScale*l.sizeref*2,H}o.handlePick=function(u){var l=this.scene.fullSceneLayout,d=this.scene.dataScale;function c(g,m){var b=l[m],y=d[s[m]];return b.l2c(g)/y}if(u.object===this.mesh){var _=u.data.position,p=u.data.velocity;return u.traceCoordinate=[c(_[0],"xaxis"),c(_[1],"yaxis"),c(_[2],"zaxis"),c(p[0],"xaxis"),c(p[1],"yaxis"),c(p[2],"zaxis"),u.data.intensity*this.data._normMax,u.data.divergence],u.textLabel=this.data.hovertext||this.data.text,!0}},o.update=function(u){this.data=u;var l=a(this.scene,u);this.mesh.update(l)},o.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},C.exports=function(u,l){var d=u.glplot.gl,c=a(u,l),_=w(d,c),p=new t(u,l.uid);return p.mesh=_,p.data=l,_._trace=p,u.glplot.add(_),p}},54304:function(C,A,e){"use strict";var v=e(3400),w=e(27260),n=e(90167);C.exports=function(T,x,f,s){function t(d,c){return v.coerce(T,x,n,d,c)}var o=t("u"),r=t("v"),i=t("w"),a=t("x"),u=t("y"),l=t("z");o&&o.length&&r&&r.length&&i&&i.length&&a&&a.length&&u&&u.length&&l&&l.length?(t("starts.x"),t("starts.y"),t("starts.z"),t("maxdisplayed"),t("sizeref"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),w(T,x,s,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),x._length=null):x.visible=!1}},15436:function(C,A,e){"use strict";C.exports={moduleType:"trace",name:"streamtube",basePlotModule:e(12536),categories:["gl3d","showLegend"],attributes:e(90167),supplyDefaults:e(54304),colorbar:{min:"cmin",max:"cmax"},calc:e(3832).calc,plot:e(25668),eventData:function(v,w){return v.tubex=v.x,v.tubey=v.y,v.tubez=v.z,v.tubeu=w.traceCoordinate[3],v.tubev=w.traceCoordinate[4],v.tubew=w.traceCoordinate[5],v.norm=w.traceCoordinate[6],v.divergence=w.traceCoordinate[7],delete v.x,delete v.y,delete v.z,v},meta:{}}},424:function(C,A,e){"use strict";var v=e(45464),w=e(21776).Ks,n=e(21776).Gw,T=e(49084),x=e(86968).u,f=e(74996),s=e(27328),t=e(92880).extendFlat,o=e(98192).c;C.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:t({colors:{valType:"data_array",editType:"calc"},line:{color:t({},f.marker.line.color,{dflt:null}),width:t({},f.marker.line.width,{dflt:1}),editType:"calc"},pattern:o,editType:"calc"},T("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:f.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:n({editType:"plot"},{keys:s.eventDataKeys.concat(["label","value"])}),hovertext:f.hovertext,hoverinfo:t({},v.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:w({},{keys:s.eventDataKeys}),textfont:f.textfont,insidetextorientation:f.insidetextorientation,insidetextfont:f.insidetextfont,outsidetextfont:t({},f.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:f.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:x({name:"sunburst",trace:!0,editType:"calc"})}},54904:function(C,A,e){"use strict";var v=e(7316);A.name="sunburst",A.plot=function(w,n,T,x){v.plotBasePlot(A.name,w,n,T,x)},A.clean=function(w,n,T,x){v.cleanBasePlot(A.name,w,n,T,x)}},3776:function(C,A,e){"use strict";var v=e(74148),w=e(38248),n=e(3400),T=e(8932).makeColorScaleFuncFromTrace,x=e(45768).makePullColorFn,f=e(45768).generateExtendedColors,s=e(8932).calc,t=e(39032).ALMOST_EQUAL,o={},r={},i={};function a(u,l,d){var c=0,_=u.children;if(_){for(var p=_.length,g=0;g<p;g++)c+=a(_[g],l,d);d.branches&&c++}else d.leaves&&c++;return u.value=u.data.data.value=c,l._values||(l._values=[]),l._values[u.data.data.i]=c,c}A.calc=function(u,l){var d,c,_,p,g,m,b=u._fullLayout,y=l.ids,M=n.isArrayOrTypedArray(y),h=l.labels,E=l.parents,k=l.values,D=n.isArrayOrTypedArray(k),P=[],L={},O={},N=function(se){return se||typeof se=="number"},V=function(se){return!D||w(k[se])&&k[se]>=0};M?(d=Math.min(y.length,E.length),c=function(se){return N(y[se])&&V(se)},_=function(se){return String(y[se])}):(d=Math.min(h.length,E.length),c=function(se){return N(h[se])&&V(se)},_=function(se){return String(h[se])}),D&&(d=Math.min(d,k.length));for(var F=0;F<d;F++)if(c(F)){var j=_(F),Z=N(E[F])?String(E[F]):"",z={i:F,id:j,pid:Z,label:N(h[F])?String(h[F]):""};D&&(z.v=+k[F]),P.push(z),g=j,L[p=Z]?L[p].push(g):L[p]=[g],O[g]=1}if(L[""]){if(L[""].length>1){for(var H=n.randstr(),U=0;U<P.length;U++)P[U].pid===""&&(P[U].pid=H);P.unshift({hasMultipleRoots:!0,id:H,pid:"",label:""})}}else{var re,ee=[];for(re in L)O[re]||ee.push(re);if(ee.length!==1)return n.warn(["Multiple implied roots, cannot build",l.type,"hierarchy of",l.name+".","These roots include:",ee.join(", ")].join(" "));re=ee[0],P.unshift({hasImpliedRoot:!0,id:re,pid:"",label:re})}try{m=v.stratify().id(function(se){return se.id}).parentId(function(se){return se.pid})(P)}catch(se){return n.warn(["Failed to build",l.type,"hierarchy of",l.name+".","Error:",se.message].join(" "))}var J=v.hierarchy(m),Q=!1;if(D)switch(l.branchvalues){case"remainder":J.sum(function(se){return se.data.v});break;case"total":J.each(function(se){var de=se.data.data,be=de.v;if(se.children){var _e=se.children.reduce(function(xe,ve){return xe+ve.data.data.v},0);if((de.hasImpliedRoot||de.hasMultipleRoots)&&(be=_e),be<_e*t)return Q=!0,n.warn(["Total value for node",se.data.data.id,"of",l.name,"is smaller than the sum of its children.",`
parent value =`,be,`
children sum =`,_e].join(" "))}se.value=be})}else a(J,l,{branches:l.count.indexOf("branches")!==-1,leaves:l.count.indexOf("leaves")!==-1});if(!Q){var ne,K;l.sort&&J.sort(function(se,de){return de.value-se.value});var oe=l.marker.colors||[],le=!!oe.length;return l._hasColorscale?(le||(oe=D?l.values:l._values),s(u,l,{vals:oe,containerStr:"marker",cLetter:"c"}),K=T(l.marker)):ne=x(b["_"+l.type+"colormap"]),J.each(function(se){var de=se.data.data;de.color=l._hasColorscale?K(oe[de.i]):ne(oe[de.i],de.id)}),P[0].hierarchy=J,P}},A._runCrossTraceCalc=function(u,l){var d=l._fullLayout,c=l.calcdata,_=d[u+"colorway"],p=d["_"+u+"colormap"];d["extend"+u+"colors"]&&(_=f(_,u==="icicle"?i:u==="treemap"?r:o));var g,m=0;function b(h){var E=h.data.data,k=E.id;E.color===!1&&(p[k]?E.color=p[k]:h.parent?h.parent.parent?E.color=h.parent.data.data.color:(p[k]=E.color=_[m%_.length],m++):E.color=g)}for(var y=0;y<c.length;y++){var M=c[y][0];M.trace.type===u&&M.hierarchy&&(g=M.trace.root.color,M.hierarchy.each(b))}},A.crossTraceCalc=function(u){return A._runCrossTraceCalc("sunburst",u)}},27328:function(C){"use strict";C.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},25244:function(C,A,e){"use strict";var v=e(3400),w=e(424),n=e(86968).Q,T=e(31508).handleText,x=e(74174).handleMarkerDefaults,f=e(8932),s=f.hasColorscale,t=f.handleDefaults;C.exports=function(o,r,i,a){function u(g,m){return v.coerce(o,r,w,g,m)}var l=u("labels"),d=u("parents");if(l&&l.length&&d&&d.length){var c=u("values");c&&c.length?u("branchvalues"):u("count"),u("level"),u("maxdepth"),x(o,r,a,u);var _=r._hasColorscale=s(o,"marker","colors")||(o.marker||{}).coloraxis;_&&t(o,r,a,u,{prefix:"marker.",cLetter:"c"}),u("leaf.opacity",_?1:.7);var p=u("text");u("texttemplate"),r.texttemplate||u("textinfo",v.isArrayOrTypedArray(p)?"text+label":"label"),u("hovertext"),u("hovertemplate"),T(o,r,a,u,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),u("insidetextorientation"),u("sort"),u("rotation"),u("root.color"),n(r,a,u),r._length=null}else r.visible=!1}},60404:function(C,A,e){"use strict";var v=e(43616),w=e(76308);C.exports=function(n,T,x,f,s){var t=T.data.data,o=t.i,r=s||t.color;if(o>=0){T.i=t.i;var i=x.marker;i.pattern&&i.colors&&i.pattern.shape||(i.color=r,T.color=r),v.pointStyle(n,x,f,T)}else w.fill(n,r)}},45716:function(C,A,e){"use strict";var v=e(33428),w=e(24040),n=e(10624).appendArrayPointValue,T=e(93024),x=e(3400),f=e(95924),s=e(78176),t=e(69656).formatPieValue;function o(r,i,a){for(var u=r.data.data,l={curveNumber:i.index,pointNumber:u.i,data:i._input,fullData:i},d=0;d<a.length;d++){var c=a[d];c in r&&(l[c]=r[c])}return"parentString"in r&&!s.isHierarchyRoot(r)&&(l.parent=r.parentString),n(l,i,u.i),l}C.exports=function(r,i,a,u,l){var d=u[0],c=d.trace,_=d.hierarchy,p=c.type==="sunburst",g=c.type==="treemap"||c.type==="icicle";"_hasHoverLabel"in c||(c._hasHoverLabel=!1),"_hasHoverEvent"in c||(c._hasHoverEvent=!1),r.on("mouseover",function(m){var b=a._fullLayout;if(!a._dragging&&b.hovermode!==!1){var y,M=a._fullData[c.index],h=m.data.data,E=h.i,k=s.isHierarchyRoot(m),D=s.getParent(_,m),P=s.getValue(m),L=function(oe){return x.castOption(M,E,oe)},O=L("hovertemplate"),N=T.castHoverinfo(M,b,E),V=b.separators;if(O||N&&N!=="none"&&N!=="skip"){var F,j;p&&(F=d.cx+m.pxmid[0]*(1-m.rInscribed),j=d.cy+m.pxmid[1]*(1-m.rInscribed)),g&&(F=m._hoverX,j=m._hoverY);var Z,z={},H=[],U=[],re=function(oe){return H.indexOf(oe)!==-1};N&&(H=N==="all"?M._module.attributes.hoverinfo.flags:N.split("+")),z.label=h.label,re("label")&&z.label&&U.push(z.label),h.hasOwnProperty("v")&&(z.value=h.v,z.valueLabel=t(z.value,V),re("value")&&U.push(z.valueLabel)),z.currentPath=m.currentPath=s.getPath(m.data),re("current path")&&!k&&U.push(z.currentPath);var ee=[],J=function(){ee.indexOf(Z)===-1&&(U.push(Z),ee.push(Z))};z.percentParent=m.percentParent=P/s.getValue(D),z.parent=m.parentString=s.getPtLabel(D),re("percent parent")&&(Z=s.formatPercent(z.percentParent,V)+" of "+z.parent,J()),z.percentEntry=m.percentEntry=P/s.getValue(i),z.entry=m.entry=s.getPtLabel(i),!re("percent entry")||k||m.onPathbar||(Z=s.formatPercent(z.percentEntry,V)+" of "+z.entry,J()),z.percentRoot=m.percentRoot=P/s.getValue(_),z.root=m.root=s.getPtLabel(_),re("percent root")&&!k&&(Z=s.formatPercent(z.percentRoot,V)+" of "+z.root,J()),z.text=L("hovertext")||L("text"),re("text")&&(Z=z.text,x.isValidTextValue(Z)&&U.push(Z)),y=[o(m,M,l.eventDataKeys)];var Q={trace:M,y:j,_x0:m._x0,_x1:m._x1,_y0:m._y0,_y1:m._y1,text:U.join("<br>"),name:O||re("name")?M.name:void 0,color:L("hoverlabel.bgcolor")||h.color,borderColor:L("hoverlabel.bordercolor"),fontFamily:L("hoverlabel.font.family"),fontSize:L("hoverlabel.font.size"),fontColor:L("hoverlabel.font.color"),fontWeight:L("hoverlabel.font.weight"),fontStyle:L("hoverlabel.font.style"),fontVariant:L("hoverlabel.font.variant"),nameLength:L("hoverlabel.namelength"),textAlign:L("hoverlabel.align"),hovertemplate:O,hovertemplateLabels:z,eventData:y};p&&(Q.x0=F-m.rInscribed*m.rpx1,Q.x1=F+m.rInscribed*m.rpx1,Q.idealAlign=m.pxmid[0]<0?"left":"right"),g&&(Q.x=F,Q.idealAlign=F<0?"left":"right");var ne=[];T.loneHover(Q,{container:b._hoverlayer.node(),outerContainer:b._paper.node(),gd:a,inOut_bbox:ne}),y[0].bbox=ne[0],c._hasHoverLabel=!0}if(g){var K=r.select("path.surface");l.styleOne(K,m,M,a,{hovered:!0})}c._hasHoverEvent=!0,a.emit("plotly_hover",{points:y||[o(m,M,l.eventDataKeys)],event:v.event})}}),r.on("mouseout",function(m){var b=a._fullLayout,y=a._fullData[c.index],M=v.select(this).datum();if(c._hasHoverEvent&&(m.originalEvent=v.event,a.emit("plotly_unhover",{points:[o(M,y,l.eventDataKeys)],event:v.event}),c._hasHoverEvent=!1),c._hasHoverLabel&&(T.loneUnhover(b._hoverlayer.node()),c._hasHoverLabel=!1),g){var h=r.select("path.surface");l.styleOne(h,M,y,a,{hovered:!1})}}),r.on("click",function(m){var b=a._fullLayout,y=a._fullData[c.index],M=p&&(s.isHierarchyRoot(m)||s.isLeaf(m)),h=s.getPtId(m),E=s.isEntry(m)?s.findEntryWithChild(_,h):s.findEntryWithLevel(_,h),k=s.getPtId(E),D={points:[o(m,y,l.eventDataKeys)],event:v.event};M||(D.nextLevel=k);var P=f.triggerHandler(a,"plotly_"+c.type+"click",D);if(P!==!1&&b.hovermode&&(a._hoverdata=[o(m,y,l.eventDataKeys)],T.click(a,v.event)),!M&&P!==!1&&!a._dragging&&!a._transitioning){w.call("_storeDirectGUIEdit",y,b._tracePreGUI[y.uid],{level:y.level});var L={data:[{level:k}],traces:[c.index]},O={frame:{redraw:!1,duration:l.transitionTime},transition:{duration:l.transitionTime,easing:l.transitionEasing},mode:"immediate",fromcurrent:!0};T.loneUnhover(b._hoverlayer.node()),w.call("animate",a,L,O)}})}},78176:function(C,A,e){"use strict";var v=e(3400),w=e(76308),n=e(93972),T=e(69656);function x(f){return f.data.data.pid}A.findEntryWithLevel=function(f,s){var t;return s&&f.eachAfter(function(o){if(A.getPtId(o)===s)return t=o.copy()}),t||f},A.findEntryWithChild=function(f,s){var t;return f.eachAfter(function(o){for(var r=o.children||[],i=0;i<r.length;i++){var a=r[i];if(A.getPtId(a)===s)return t=o.copy()}}),t||f},A.isEntry=function(f){return!f.parent},A.isLeaf=function(f){return!f.children},A.getPtId=function(f){return f.data.data.id},A.getPtLabel=function(f){return f.data.data.label},A.getValue=function(f){return f.value},A.isHierarchyRoot=function(f){return x(f)===""},A.setSliceCursor=function(f,s,t){var o=t.isTransitioning;if(!o){var r=f.datum();o=t.hideOnRoot&&A.isHierarchyRoot(r)||t.hideOnLeaves&&A.isLeaf(r)}n(f,o?null:"pointer")},A.getInsideTextFontKey=function(f,s,t,o,r){var i=(r||{}).onPathbar?"pathbar.textfont":"insidetextfont",a=t.data.data.i;return v.castOption(s,a,i+"."+f)||v.castOption(s,a,"textfont."+f)||o.size},A.getOutsideTextFontKey=function(f,s,t,o){var r=t.data.data.i;return v.castOption(s,r,"outsidetextfont."+f)||v.castOption(s,r,"textfont."+f)||o.size},A.isOutsideText=function(f,s){return!f._hasColorscale&&A.isHierarchyRoot(s)},A.determineTextFont=function(f,s,t,o){return A.isOutsideText(f,s)?function(r,i,a){return{color:A.getOutsideTextFontKey("color",r,i,a),family:A.getOutsideTextFontKey("family",r,i,a),size:A.getOutsideTextFontKey("size",r,i,a),weight:A.getOutsideTextFontKey("weight",r,i,a),style:A.getOutsideTextFontKey("style",r,i,a),variant:A.getOutsideTextFontKey("variant",r,i,a)}}(f,s,t):function(r,i,a,u){var l=(u||{}).onPathbar,d=i.data.data,c=d.i,_=v.castOption(r,c,(l?"pathbar.textfont":"insidetextfont")+".color");return!_&&r._input.textfont&&(_=v.castOption(r._input,c,"textfont.color")),{color:_||w.contrast(d.color),family:A.getInsideTextFontKey("family",r,i,a,u),size:A.getInsideTextFontKey("size",r,i,a,u),weight:A.getInsideTextFontKey("weight",r,i,a,u),style:A.getInsideTextFontKey("style",r,i,a,u),variant:A.getInsideTextFontKey("variant",r,i,a,u)}}(f,s,t,o)},A.hasTransition=function(f){return!!(f&&f.duration>0)},A.getMaxDepth=function(f){return f.maxdepth>=0?f.maxdepth:1/0},A.isHeader=function(f,s){return!(A.isLeaf(f)||f.depth===s._maxDepth-1)},A.getParent=function(f,s){return A.findEntryWithLevel(f,x(s))},A.listPath=function(f,s){var t=f.parent;if(!t)return[];var o=s?[t.data[s]]:[t];return A.listPath(t,s).concat(o)},A.getPath=function(f){return A.listPath(f,"label").join("/")+"/"},A.formatValue=T.formatPieValue,A.formatPercent=function(f,s){var t=v.formatPercent(f,0);return t==="0%"&&(t=T.formatPiePercent(f,s)),t}},5621:function(C,A,e){"use strict";C.exports={moduleType:"trace",name:"sunburst",basePlotModule:e(54904),categories:[],animatable:!0,attributes:e(424),layoutAttributes:e(84920),supplyDefaults:e(25244),supplyLayoutDefaults:e(28732),calc:e(3776).calc,crossTraceCalc:e(3776).crossTraceCalc,plot:e(96488).plot,style:e(85676).style,colorbar:e(5528),meta:{}}},84920:function(C){"use strict";C.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},28732:function(C,A,e){"use strict";var v=e(3400),w=e(84920);C.exports=function(n,T){function x(f,s){return v.coerce(n,T,w,f,s)}x("sunburstcolorway",T.colorway),x("extendsunburstcolors")}},96488:function(C,A,e){"use strict";var v=e(33428),w=e(74148),n=e(67756).qy,T=e(43616),x=e(3400),f=e(72736),s=e(82744),t=s.recordMinTextSize,o=s.clearMinTextSize,r=e(37820),i=e(69656).getRotationAngle,a=r.computeTransform,u=r.transformInsideText,l=e(85676).styleOne,d=e(60100).resizeText,c=e(45716),_=e(27328),p=e(78176);function g(b,y,M,h){var E=b._context.staticPlot,k=b._fullLayout,D=!k.uniformtext.mode&&p.hasTransition(h),P=v.select(M).selectAll("g.slice"),L=y[0],O=L.trace,N=L.hierarchy,V=p.findEntryWithLevel(N,O.level),F=p.getMaxDepth(O),j=k._size,Z=O.domain,z=j.w*(Z.x[1]-Z.x[0]),H=j.h*(Z.y[1]-Z.y[0]),U=.5*Math.min(z,H),re=L.cx=j.l+j.w*(Z.x[1]+Z.x[0])/2,ee=L.cy=j.t+j.h*(1-Z.y[0])-H/2;if(!V)return P.remove();var J=null,Q={};D&&P.each(function(ae){Q[p.getPtId(ae)]={rpx0:ae.rpx0,rpx1:ae.rpx1,x0:ae.x0,x1:ae.x1,transform:ae.transform},!J&&p.isEntry(ae)&&(J=ae)});var ne=function(ae){return w.partition().size([2*Math.PI,ae.height+1])(ae)}(V).descendants(),K=V.height+1,oe=0,le=F;L.hasMultipleRoots&&p.isHierarchyRoot(V)&&(ne=ne.slice(1),K-=1,oe=1,le+=1),ne=ne.filter(function(ae){return ae.y1<=le});var se=i(O.rotation);se&&ne.forEach(function(ae){ae.x0+=se,ae.x1+=se});var de=Math.min(K,F),be=function(ae){return(ae-oe)/de*U},_e=function(ae,pe){return[ae*Math.cos(pe),-ae*Math.sin(pe)]},xe=function(ae){return x.pathAnnulus(ae.rpx0,ae.rpx1,ae.x0,ae.x1,re,ee)},ve=function(ae){return re+m(ae)[0]*(ae.transform.rCenter||0)+(ae.transform.x||0)},ye=function(ae){return ee+m(ae)[1]*(ae.transform.rCenter||0)+(ae.transform.y||0)};(P=P.data(ne,p.getPtId)).enter().append("g").classed("slice",!0),D?P.exit().transition().each(function(){var ae=v.select(this);ae.select("path.surface").transition().attrTween("d",function(pe){var De=function(ke){var Ee,Ie=p.getPtId(ke),Re=Q[Ie],Ne=Q[p.getPtId(V)];if(Ne){var ge=(ke.x1>Ne.x1?2*Math.PI:0)+se;Ee=ke.rpx1<Ne.rpx1?{x0:ke.x0,x1:ke.x1,rpx0:0,rpx1:0}:{x0:ge,x1:ge,rpx0:ke.rpx0,rpx1:ke.rpx1}}else{var we,Ce=p.getPtId(ke.parent);P.each(function(Xe){if(p.getPtId(Xe)===Ce)return we=Xe});var ze,Pe=we.children;Pe.forEach(function(Xe,st){if(p.getPtId(Xe)===Ie)return ze=st});var Ue=Pe.length,Ge=n(we.x0,we.x1);Ee={rpx0:U,rpx1:U,x0:Ge(ze/Ue),x1:Ge((ze+1)/Ue)}}return n(Re,Ee)}(pe);return function(ke){return xe(De(ke))}}),ae.select("g.slicetext").attr("opacity",0)}).remove():P.exit().remove(),P.order();var me=null;if(D&&J){var Me=p.getPtId(J);P.each(function(ae){me===null&&p.getPtId(ae)===Me&&(me=ae.x1)})}var Ae=P;function ce(ae){var pe=ae.parent,De=Q[p.getPtId(pe)],ke={};if(De){var Ee=pe.children,Ie=Ee.indexOf(ae),Re=Ee.length,Ne=n(De.x0,De.x1);ke.x0=Ne(Ie/Re),ke.x1=Ne(Ie/Re)}else ke.x0=ke.x1=0;return ke}D&&(Ae=Ae.transition().each("end",function(){var ae=v.select(this);p.setSliceCursor(ae,b,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),Ae.each(function(ae){var pe=v.select(this),De=x.ensureSingle(pe,"path","surface",function(ge){ge.style("pointer-events",E?"none":"all")});ae.rpx0=be(ae.y0),ae.rpx1=be(ae.y1),ae.xmid=(ae.x0+ae.x1)/2,ae.pxmid=_e(ae.rpx1,ae.xmid),ae.midangle=-(ae.xmid-Math.PI/2),ae.startangle=-(ae.x0-Math.PI/2),ae.stopangle=-(ae.x1-Math.PI/2),ae.halfangle=.5*Math.min(x.angleDelta(ae.x0,ae.x1)||Math.PI,Math.PI),ae.ring=1-ae.rpx0/ae.rpx1,ae.rInscribed=function(ge){return ge.rpx0===0&&x.isFullCircle([ge.x0,ge.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(ge.halfangle)),ge.ring/2))}(ae),D?De.transition().attrTween("d",function(ge){var we=function(Ce){var ze,Pe=Q[p.getPtId(Ce)],Ue={x0:Ce.x0,x1:Ce.x1,rpx0:Ce.rpx0,rpx1:Ce.rpx1};if(Pe)ze=Pe;else if(J)if(Ce.parent)if(me){var Ge=(Ce.x1>me?2*Math.PI:0)+se;ze={x0:Ge,x1:Ge}}else ze={rpx0:U,rpx1:U},x.extendFlat(ze,ce(Ce));else ze={rpx0:0,rpx1:0};else ze={x0:se,x1:se};return n(ze,Ue)}(ge);return function(Ce){return xe(we(Ce))}}):De.attr("d",xe),pe.call(c,V,b,y,{eventDataKeys:_.eventDataKeys,transitionTime:_.CLICK_TRANSITION_TIME,transitionEasing:_.CLICK_TRANSITION_EASING}).call(p.setSliceCursor,b,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:b._transitioning}),De.call(l,ae,O,b);var ke=x.ensureSingle(pe,"g","slicetext"),Ee=x.ensureSingle(ke,"text","",function(ge){ge.attr("data-notex",1)}),Ie=x.ensureUniformFontSize(b,p.determineTextFont(O,ae,k.font));Ee.text(A.formatSliceLabel(ae,V,O,y,k)).classed("slicetext",!0).attr("text-anchor","middle").call(T.font,Ie).call(f.convertToTspans,b);var Re=T.bBox(Ee.node());ae.transform=u(Re,ae,L),ae.transform.targetX=ve(ae),ae.transform.targetY=ye(ae);var Ne=function(ge,we){var Ce=ge.transform;return a(Ce,we),Ce.fontSize=Ie.size,t(O.type,Ce,k),x.getTextTransform(Ce)};D?Ee.transition().attrTween("transform",function(ge){var we=function(Ce){var ze,Pe=Q[p.getPtId(Ce)],Ue=Ce.transform;if(Pe)ze=Pe;else if(ze={rpx1:Ce.rpx1,transform:{textPosAngle:Ue.textPosAngle,scale:0,rotate:Ue.rotate,rCenter:Ue.rCenter,x:Ue.x,y:Ue.y}},J)if(Ce.parent)if(me){var Ge=Ce.x1>me?2*Math.PI:0;ze.x0=ze.x1=Ge}else x.extendFlat(ze,ce(Ce));else ze.x0=ze.x1=se;else ze.x0=ze.x1=se;var Xe=n(ze.transform.textPosAngle,Ce.transform.textPosAngle),st=n(ze.rpx1,Ce.rpx1),at=n(ze.x0,Ce.x0),vt=n(ze.x1,Ce.x1),xt=n(ze.transform.scale,Ue.scale),gt=n(ze.transform.rotate,Ue.rotate),rt=Ue.rCenter===0?3:ze.transform.rCenter===0?1/3:1,tt=n(ze.transform.rCenter,Ue.rCenter);return function(Mt){var Pt=st(Mt),Rt=at(Mt),St=vt(Mt),Ye=function(Ve){return tt(Math.pow(Ve,rt))}(Mt),Ke={pxmid:_e(Pt,(Rt+St)/2),rpx1:Pt,transform:{textPosAngle:Xe(Mt),rCenter:Ye,x:Ue.x,y:Ue.y}};return t(O.type,Ue,k),{transform:{targetX:ve(Ke),targetY:ye(Ke),scale:xt(Mt),rotate:gt(Mt),rCenter:Ye}}}}(ge);return function(Ce){return Ne(we(Ce),Re)}}):Ee.attr("transform",Ne(ae,Re))})}function m(b){return y=b.rpx1,M=b.transform.textPosAngle,[y*Math.sin(M),-y*Math.cos(M)];var y,M}A.plot=function(b,y,M,h){var E,k,D=b._fullLayout,P=D._sunburstlayer,L=!M,O=!D.uniformtext.mode&&p.hasTransition(M);o("sunburst",D),(E=P.selectAll("g.trace.sunburst").data(y,function(N){return N[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),E.order(),O?(h&&(k=h()),v.transition().duration(M.duration).ease(M.easing).each("end",function(){k&&k()}).each("interrupt",function(){k&&k()}).each(function(){P.selectAll("g.trace").each(function(N){g(b,N,this,M)})})):(E.each(function(N){g(b,N,this,M)}),D.uniformtext.mode&&d(b,D._sunburstlayer.selectAll(".trace"),"sunburst")),L&&E.exit().remove()},A.formatSliceLabel=function(b,y,M,h,E){var k=M.texttemplate,D=M.textinfo;if(!(k||D&&D!=="none"))return"";var P=E.separators,L=h[0],O=b.data.data,N=L.hierarchy,V=p.isHierarchyRoot(b),F=p.getParent(N,b),j=p.getValue(b);if(!k){var Z,z=D.split("+"),H=function(le){return z.indexOf(le)!==-1},U=[];if(H("label")&&O.label&&U.push(O.label),O.hasOwnProperty("v")&&H("value")&&U.push(p.formatValue(O.v,P)),!V){H("current path")&&U.push(p.getPath(b.data));var re=0;H("percent parent")&&re++,H("percent entry")&&re++,H("percent root")&&re++;var ee=re>1;if(re){var J,Q=function(le){Z=p.formatPercent(J,P),ee&&(Z+=" of "+le),U.push(Z)};H("percent parent")&&!V&&(J=j/p.getValue(F),Q("parent")),H("percent entry")&&(J=j/p.getValue(y),Q("entry")),H("percent root")&&(J=j/p.getValue(N),Q("root"))}}return H("text")&&(Z=x.castOption(M,O.i,"text"),x.isValidTextValue(Z)&&U.push(Z)),U.join("<br>")}var ne=x.castOption(M,O.i,"texttemplate");if(!ne)return"";var K={};O.label&&(K.label=O.label),O.hasOwnProperty("v")&&(K.value=O.v,K.valueLabel=p.formatValue(O.v,P)),K.currentPath=p.getPath(b.data),V||(K.percentParent=j/p.getValue(F),K.percentParentLabel=p.formatPercent(K.percentParent,P),K.parent=p.getPtLabel(F)),K.percentEntry=j/p.getValue(y),K.percentEntryLabel=p.formatPercent(K.percentEntry,P),K.entry=p.getPtLabel(y),K.percentRoot=j/p.getValue(N),K.percentRootLabel=p.formatPercent(K.percentRoot,P),K.root=p.getPtLabel(N),O.hasOwnProperty("color")&&(K.color=O.color);var oe=x.castOption(M,O.i,"text");return(x.isValidTextValue(oe)||oe==="")&&(K.text=oe),K.customdata=x.castOption(M,O.i,"customdata"),x.texttemplateString(ne,K,E._d3locale,K,M._meta||{})}},85676:function(C,A,e){"use strict";var v=e(33428),w=e(76308),n=e(3400),T=e(82744).resizeText,x=e(60404);function f(s,t,o,r){var i=t.data.data,a=!t.children,u=i.i,l=n.castOption(o,u,"marker.line.color")||w.defaultLine,d=n.castOption(o,u,"marker.line.width")||0;s.call(x,t,o,r).style("stroke-width",d).call(w.stroke,l).style("opacity",a?o.leaf.opacity:null)}C.exports={style:function(s){var t=s._fullLayout._sunburstlayer.selectAll(".trace");T(s,t,"sunburst"),t.each(function(o){var r=v.select(this),i=o[0].trace;r.style("opacity",i.opacity),r.selectAll("path.surface").each(function(a){v.select(this).call(f,a,i,s)})})},styleOne:f}},16716:function(C,A,e){"use strict";var v=e(76308),w=e(49084),n=e(29736).axisHoverFormat,T=e(21776).Ks,x=e(45464),f=e(92880).extendFlat,s=e(67824).overrideAll;function t(r){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:v.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:v.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var o=C.exports=s(f({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:T(),xhoverformat:n("x"),yhoverformat:n("y"),zhoverformat:n("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},w("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:t(),y:t(),z:t()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:f({},w.zauto,{}),zmin:f({},w.zmin,{}),zmax:f({},w.zmax,{})},hoverinfo:f({},x.hoverinfo),showlegend:f({},x.showlegend,{dflt:!1})}),"calc","nested");o.x.editType=o.y.editType=o.z.editType="calc+clearAxisTypes",o.transforms=void 0},56576:function(C,A,e){"use strict";var v=e(47128);C.exports=function(w,n){n.surfacecolor?v(w,n,{vals:n.surfacecolor,containerStr:"",cLetter:"c"}):v(w,n,{vals:n.z,containerStr:"",cLetter:"c"})}},79164:function(C,A,e){"use strict";var v=e(67792).gl_surface3d,w=e(67792).ndarray,n=e(67792).ndarray_linear_interpolate.d2,T=e(70448),x=e(11240),f=e(3400).isArrayOrTypedArray,s=e(33040).parseColorScale,t=e(43080),o=e(8932).extractOpts;function r(M,h,E){this.scene=M,this.uid=E,this.surface=h,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var i=r.prototype;i.getXat=function(M,h,E,k){var D=f(this.data.x)?f(this.data.x[0])?this.data.x[h][M]:this.data.x[M]:M;return E===void 0?D:k.d2l(D,0,E)},i.getYat=function(M,h,E,k){var D=f(this.data.y)?f(this.data.y[0])?this.data.y[h][M]:this.data.y[h]:h;return E===void 0?D:k.d2l(D,0,E)},i.getZat=function(M,h,E,k){var D=this.data.z[h][M];return D===null&&this.data.connectgaps&&this.data._interpolatedZ&&(D=this.data._interpolatedZ[h][M]),E===void 0?D:k.d2l(D,0,E)},i.handlePick=function(M){if(M.object===this.surface){var h=(M.data.index[0]-1)/this.dataScaleX-1,E=(M.data.index[1]-1)/this.dataScaleY-1,k=Math.max(Math.min(Math.round(h),this.data.z[0].length-1),0),D=Math.max(Math.min(Math.round(E),this.data._ylength-1),0);M.index=[k,D],M.traceCoordinate=[this.getXat(k,D),this.getYat(k,D),this.getZat(k,D)],M.dataCoordinate=[this.getXat(k,D,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(k,D,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(k,D,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var P=0;P<3;P++)M.dataCoordinate[P]!=null&&(M.dataCoordinate[P]*=this.scene.dataScale[P]);var L=this.data.hovertext||this.data.text;return f(L)&&L[D]&&L[D][k]!==void 0?M.textLabel=L[D][k]:M.textLabel=L||"",M.data.dataCoordinate=M.dataCoordinate.slice(),this.surface.highlight(M.data),this.scene.glplot.spikes.position=M.dataCoordinate,!0}};var a=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function u(M,h){if(M<h)return 0;for(var E=0;Math.floor(M%h)===0;)M/=h,E++;return E}function l(M){for(var h=[],E=0;E<a.length;E++){var k=a[E];h.push(u(M,k))}return h}function d(M){for(var h=l(M),E=M,k=0;k<a.length;k++)if(h[k]>0){E=a[k];break}return E}function c(M,h){if(!(M<1||h<1)){for(var E=l(M),k=l(h),D=1,P=0;P<a.length;P++)D*=Math.pow(a[P],Math.max(E[P],k[P]));return D}}i.calcXnums=function(M){var h,E=[];for(h=1;h<M;h++){var k=this.getXat(h-1,0),D=this.getXat(h,0);E[h-1]=D!==k&&k!=null&&D!=null?Math.abs(D-k):0}var P=0;for(h=1;h<M;h++)P+=E[h-1];for(h=1;h<M;h++)E[h-1]===0?E[h-1]=1:E[h-1]=Math.round(P/E[h-1]);return E},i.calcYnums=function(M){var h,E=[];for(h=1;h<M;h++){var k=this.getYat(0,h-1),D=this.getYat(0,h);E[h-1]=D!==k&&k!=null&&D!=null?Math.abs(D-k):0}var P=0;for(h=1;h<M;h++)P+=E[h-1];for(h=1;h<M;h++)E[h-1]===0?E[h-1]=1:E[h-1]=Math.round(P/E[h-1]);return E};var _=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],p=_[9],g=_[13];function m(M,h,E){var k=E[8]+E[2]*h[0]+E[5]*h[1];return M[0]=(E[6]+E[0]*h[0]+E[3]*h[1])/k,M[1]=(E[7]+E[1]*h[0]+E[4]*h[1])/k,M}function b(M,h,E){return function(k,D,P,L){for(var O=[0,0],N=k.shape[0],V=k.shape[1],F=0;F<N;F++)for(var j=0;j<V;j++)P(O,[F,j],L),k.set(F,j,n(D,O[0],O[1]))}(M,h,m,E),M}function y(M,h){for(var E=!1,k=0;k<M.length;k++)if(h===M[k]){E=!0;break}E===!1&&M.push(h)}i.estimateScale=function(M,h){for(var E=1+function(D){if(D.length!==0){for(var P=1,L=0;L<D.length;L++)P=c(P,D[L]);return P}}(h===0?this.calcXnums(M):this.calcYnums(M));E<p;)E*=2;for(;E>g;)E--,E/=d(E),++E<p&&(E=g);var k=Math.round(E/M);return k>1?k:1},i.refineCoords=function(M){for(var h=this.dataScaleX,E=this.dataScaleY,k=M[0].shape[0],D=M[0].shape[1],P=0|Math.floor(M[0].shape[0]*h+1),L=0|Math.floor(M[0].shape[1]*E+1),O=1+k+1,N=1+D+1,V=w(new Float32Array(O*N),[O,N]),F=[1/h,0,0,0,1/E,0,0,0,1],j=0;j<M.length;++j){this.surface.padField(V,M[j]);var Z=w(new Float32Array(P*L),[P,L]);b(Z,V,F),M[j]=Z}},i.setContourLevels=function(){var M,h,E,k=[[],[],[]],D=[!1,!1,!1],P=!1;for(M=0;M<3;++M)if(this.showContour[M]&&(P=!0,this.contourSize[M]>0&&this.contourStart[M]!==null&&this.contourEnd[M]!==null&&this.contourEnd[M]>this.contourStart[M]))for(D[M]=!0,h=this.contourStart[M];h<this.contourEnd[M];h+=this.contourSize[M])E=h*this.scene.dataScale[M],y(k[M],E);if(P){var L=[[],[],[]];for(M=0;M<3;++M)this.showContour[M]&&(L[M]=D[M]?k[M]:this.scene.contourLevels[M]);this.surface.update({levels:L})}},i.update=function(M){var h,E,k,D,P=this.scene,L=P.fullSceneLayout,O=this.surface,N=s(M),V=P.dataScale,F=M.z[0].length,j=M._ylength,Z=P.contourLevels;this.data=M;var z=[];for(h=0;h<3;h++)for(z[h]=[],E=0;E<F;E++)z[h][E]=[];for(E=0;E<F;E++)for(k=0;k<j;k++)z[0][E][k]=this.getXat(E,k,M.xcalendar,L.xaxis),z[1][E][k]=this.getYat(E,k,M.ycalendar,L.yaxis),z[2][E][k]=this.getZat(E,k,M.zcalendar,L.zaxis);if(M.connectgaps)for(M._emptypoints=x(z[2]),T(z[2],M._emptypoints),M._interpolatedZ=[],E=0;E<F;E++)for(M._interpolatedZ[E]=[],k=0;k<j;k++)M._interpolatedZ[E][k]=z[2][E][k];for(h=0;h<3;h++)for(E=0;E<F;E++)for(k=0;k<j;k++)(D=z[h][E][k])==null?z[h][E][k]=NaN:D=z[h][E][k]*=V[h];for(h=0;h<3;h++)for(E=0;E<F;E++)for(k=0;k<j;k++)(D=z[h][E][k])!=null&&(this.minValues[h]>D&&(this.minValues[h]=D),this.maxValues[h]<D&&(this.maxValues[h]=D));for(h=0;h<3;h++)this.objectOffset[h]=.5*(this.minValues[h]+this.maxValues[h]);for(h=0;h<3;h++)for(E=0;E<F;E++)for(k=0;k<j;k++)(D=z[h][E][k])!=null&&(z[h][E][k]-=this.objectOffset[h]);var H=[w(new Float32Array(F*j),[F,j]),w(new Float32Array(F*j),[F,j]),w(new Float32Array(F*j),[F,j])];for(h=0;h<3;h++)for(E=0;E<F;E++)for(k=0;k<j;k++)H[h].set(E,k,z[h][E][k]);z=[];var U={colormap:N,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!M.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:M.opacityscale,opacity:M.opacity},re=o(M);if(U.intensityBounds=[re.min,re.max],M.surfacecolor){var ee=w(new Float32Array(F*j),[F,j]);for(E=0;E<F;E++)for(k=0;k<j;k++)ee.set(E,k,M.surfacecolor[k][E]);H.push(ee)}else U.intensityBounds[0]*=V[2],U.intensityBounds[1]*=V[2];(g<H[0].shape[0]||g<H[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(H[0].shape[0],0),this.dataScaleY=this.estimateScale(H[0].shape[1],1),this.dataScaleX===1&&this.dataScaleY===1||this.refineCoords(H)),M.surfacecolor&&(U.intensity=H.pop());var J=[!0,!0,!0],Q=["x","y","z"];for(h=0;h<3;++h){var ne=M.contours[Q[h]];J[h]=ne.highlight,U.showContour[h]=ne.show||ne.highlight,U.showContour[h]&&(U.contourProject[h]=[ne.project.x,ne.project.y,ne.project.z],ne.show?(this.showContour[h]=!0,U.levels[h]=Z[h],O.highlightColor[h]=U.contourColor[h]=t(ne.color),ne.usecolormap?O.highlightTint[h]=U.contourTint[h]=0:O.highlightTint[h]=U.contourTint[h]=1,U.contourWidth[h]=ne.width,this.contourStart[h]=ne.start,this.contourEnd[h]=ne.end,this.contourSize[h]=ne.size):(this.showContour[h]=!1,this.contourStart[h]=null,this.contourEnd[h]=null,this.contourSize[h]=0),ne.highlight&&(U.dynamicColor[h]=t(ne.highlightcolor),U.dynamicWidth[h]=ne.highlightwidth))}(function(K){var oe=K[0].rgb,le=K[K.length-1].rgb;return oe[0]===le[0]&&oe[1]===le[1]&&oe[2]===le[2]&&oe[3]===le[3]})(N)&&(U.vertexColor=!0),U.objectOffset=this.objectOffset,U.coords=H,O.update(U),O.visible=M.visible,O.enableDynamic=J,O.enableHighlight=J,O.snapToData=!0,"lighting"in M&&(O.ambientLight=M.lighting.ambient,O.diffuseLight=M.lighting.diffuse,O.specularLight=M.lighting.specular,O.roughness=M.lighting.roughness,O.fresnel=M.lighting.fresnel),"lightposition"in M&&(O.lightPosition=[M.lightposition.x,M.lightposition.y,M.lightposition.z])},i.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},C.exports=function(M,h){var E=M.glplot.gl,k=v({gl:E}),D=new r(M,k,h.uid);return k._trace=D,D.update(h),M.glplot.add(k),D}},60192:function(C,A,e){"use strict";var v=e(24040),w=e(3400),n=e(27260),T=e(16716);function x(s,t,o,r){var i=r("opacityscale");i==="max"?t.opacityscale=[[0,.1],[1,1]]:i==="min"?t.opacityscale=[[0,1],[1,.1]]:i==="extremes"?t.opacityscale=function(a,u){for(var l=[],d=0;d<32;d++){var c=d/31,_=.1+.9*(1-Math.pow(Math.sin(1*c*Math.PI),2));l.push([c,Math.max(0,Math.min(1,_))])}return l}():function(a){var u=0;if(!Array.isArray(a)||a.length<2||!a[0]||!a[a.length-1]||+a[0][0]!=0||+a[a.length-1][0]!=1)return!1;for(var l=0;l<a.length;l++){var d=a[l];if(d.length!==2||+d[0]<u)return!1;u=+d[0]}return!0}(i)||(t.opacityscale=void 0)}function f(s,t,o){t in s&&!(o in s)&&(s[o]=s[t])}C.exports={supplyDefaults:function(s,t,o,r){var i,a;function u(y,M){return w.coerce(s,t,T,y,M)}var l=u("x"),d=u("y"),c=u("z");if(!c||!c.length||l&&l.length<1||d&&d.length<1)t.visible=!1;else{t._xlength=Array.isArray(l)&&w.isArrayOrTypedArray(l[0])?c.length:c[0].length,t._ylength=c.length,v.getComponentMethod("calendars","handleTraceDefaults")(s,t,["x","y","z"],r),u("text"),u("hovertext"),u("hovertemplate"),u("xhoverformat"),u("yhoverformat"),u("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(y){u(y)});var _=u("surfacecolor"),p=["x","y","z"];for(i=0;i<3;++i){var g="contours."+p[i],m=u(g+".show"),b=u(g+".highlight");if(m||b)for(a=0;a<3;++a)u(g+".project."+p[a]);m&&(u(g+".color"),u(g+".width"),u(g+".usecolormap")),b&&(u(g+".highlightcolor"),u(g+".highlightwidth")),u(g+".start"),u(g+".end"),u(g+".size")}_||(f(s,"zmin","cmin"),f(s,"zmax","cmax"),f(s,"zauto","cauto")),n(s,t,r,u,{prefix:"",cLetter:"c"}),x(0,t,0,u),t._length=null}},opacityscaleDefaults:x}},91304:function(C,A,e){"use strict";C.exports={attributes:e(16716),supplyDefaults:e(60192).supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:e(56576),plot:e(79164),moduleType:"trace",name:"surface",basePlotModule:e(12536),categories:["gl3d","2dMap","showLegend"],meta:{}}},60520:function(C,A,e){"use strict";var v=e(13916),w=e(92880).extendFlat,n=e(67824).overrideAll,T=e(25376),x=e(86968).u,f=e(29736).descriptionOnlyNumbers;(C.exports=n({domain:x({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:f("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:w({},v.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:w({},T({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:f("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:w({},v.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:w({},T({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},85852:function(C,A,e){"use strict";var v=e(84888)._M,w=e(24752),n="table";A.name=n,A.plot=function(T){var x=v(T.calcdata,n)[0];x.length&&w(T,x)},A.clean=function(T,x,f,s){var t=s._has&&s._has(n),o=x._has&&x._has(n);t&&!o&&s._paperdiv.selectAll(".table").remove()}},39312:function(C,A,e){"use strict";var v=e(71688).wrap;C.exports=function(){return v({})}},23536:function(C){"use strict";C.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},55992:function(C,A,e){"use strict";var v=e(23536),w=e(92880).extendFlat,n=e(38248),T=e(38116).isTypedArray,x=e(38116).isArrayOrTypedArray;function f(u){if(x(u)){for(var l=0,d=0;d<u.length;d++)l=Math.max(l,f(u[d]));return l}return u}function s(u,l){return u+l}function t(u){var l,d=u.slice(),c=1/0,_=0;for(l=0;l<d.length;l++)T(d[l])?d[l]=Array.from(d[l]):x(d[l])||(d[l]=[d[l]]),c=Math.min(c,d[l].length),_=Math.max(_,d[l].length);if(c!==_)for(l=0;l<d.length;l++){var p=_-d[l].length;p&&(d[l]=d[l].concat(o(p)))}return d}function o(u){for(var l=new Array(u),d=0;d<u;d++)l[d]="";return l}function r(u){return u.calcdata.columns.reduce(function(l,d){return d.xIndex<u.xIndex?l+d.columnWidth:l},0)}function i(u,l){return Object.keys(u).map(function(d){return w({},u[d],{auxiliaryBlocks:l})})}function a(u,l){for(var d,c={},_=0,p=0,g={firstRowIndex:null,lastRowIndex:null,rows:[]},m=0,b=0,y=0;y<u.length;y++)d=u[y],g.rows.push({rowIndex:y,rowHeight:d}),((p+=d)>=l||y===u.length-1)&&(c[_]=g,g.key=b++,g.firstRowIndex=m,g.lastRowIndex=y,g={firstRowIndex:null,lastRowIndex:null,rows:[]},_+=p,m=y+1,p=0);return c}C.exports=function(u,l){var d=t(l.cells.values),c=function(j){return j.slice(l.header.values.length,j.length)},_=t(l.header.values);_.length&&!_[0].length&&(_[0]=[""],_=t(_));var p=_.concat(c(d).map(function(){return o((_[0]||[""]).length)})),g=l.domain,m=Math.floor(u._fullLayout._size.w*(g.x[1]-g.x[0])),b=Math.floor(u._fullLayout._size.h*(g.y[1]-g.y[0])),y=l.header.values.length?p[0].map(function(){return l.header.height}):[v.emptyHeaderHeight],M=d.length?d[0].map(function(){return l.cells.height}):[],h=y.reduce(s,0),E=a(M,b-h+v.uplift),k=i(a(y,h),[]),D=i(E,k),P={},L=l._fullInput.columnorder;x(L)&&(L=Array.from(L)),L=L.concat(c(d.map(function(j,Z){return Z})));var O=p.map(function(j,Z){var z=x(l.columnwidth)?l.columnwidth[Math.min(Z,l.columnwidth.length-1)]:l.columnwidth;return n(z)?Number(z):1}),N=O.reduce(s,0);O=O.map(function(j){return j/N*m});var V=Math.max(f(l.header.line.width),f(l.cells.line.width)),F={key:l.uid+u._context.staticPlot,translateX:g.x[0]*u._fullLayout._size.w,translateY:u._fullLayout._size.h*(1-g.y[1]),size:u._fullLayout._size,width:m,maxLineWidth:V,height:b,columnOrder:L,groupHeight:b,rowBlocks:D,headerRowBlocks:k,scrollY:0,cells:w({},l.cells,{values:d}),headerCells:w({},l.header,{values:p}),gdColumns:p.map(function(j){return j[0]}),gdColumnsOriginalOrder:p.map(function(j){return j[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:p.map(function(j,Z){var z=P[j];return P[j]=(z||0)+1,{key:j+"__"+P[j],label:j,specIndex:Z,xIndex:L[Z],xScale:r,x:void 0,calcdata:void 0,columnWidth:O[Z]}})};return F.columns.forEach(function(j){j.calcdata=F,j.x=r(j)}),F}},53056:function(C,A,e){"use strict";var v=e(92880).extendFlat;A.splitToPanels=function(w){var n=[0,0],T=v({},w,{key:"header",type:"header",page:0,prevPages:n,currentRepaint:[null,null],dragHandle:!0,values:w.calcdata.headerCells.values[w.specIndex],rowBlocks:w.calcdata.headerRowBlocks,calcdata:v({},w.calcdata,{cells:w.calcdata.headerCells})});return[v({},w,{key:"cells1",type:"cells",page:0,prevPages:n,currentRepaint:[null,null],dragHandle:!1,values:w.calcdata.cells.values[w.specIndex],rowBlocks:w.calcdata.rowBlocks}),v({},w,{key:"cells2",type:"cells",page:1,prevPages:n,currentRepaint:[null,null],dragHandle:!1,values:w.calcdata.cells.values[w.specIndex],rowBlocks:w.calcdata.rowBlocks}),T]},A.splitToCells=function(w){var n=function(T){var x=T.rowBlocks[T.page],f=x?x.rows[0].rowIndex:0;return[f,x?f+x.rows.length:0]}(w);return(w.values||[]).slice(n[0],n[1]).map(function(T,x){return{keyWithinBlock:x+(typeof T=="string"&&T.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:n[0]+x,column:w,calcdata:w.calcdata,page:w.page,rowBlocks:w.rowBlocks,value:T}})}},53212:function(C,A,e){"use strict";var v=e(3400),w=e(60520),n=e(86968).Q;C.exports=function(T,x,f,s){function t(o,r){return v.coerce(T,x,w,o,r)}n(x,s,t),t("columnwidth"),t("header.values"),t("header.format"),t("header.align"),t("header.prefix"),t("header.suffix"),t("header.height"),t("header.line.width"),t("header.line.color"),t("header.fill.color"),v.coerceFont(t,"header.font",v.extendFlat({},s.font)),function(o,r){for(var i=o.columnorder||[],a=o.header.values.length,u=i.slice(0,a),l=u.slice().sort(function(_,p){return _-p}),d=u.map(function(_){return l.indexOf(_)}),c=d.length;c<a;c++)d.push(c);r("columnorder",d)}(x,t),t("cells.values"),t("cells.format"),t("cells.align"),t("cells.prefix"),t("cells.suffix"),t("cells.height"),t("cells.line.width"),t("cells.line.color"),t("cells.fill.color"),v.coerceFont(t,"cells.font",v.extendFlat({},s.font)),x._length=null}},41724:function(C,A,e){"use strict";C.exports={attributes:e(60520),supplyDefaults:e(53212),calc:e(39312),plot:e(24752),moduleType:"trace",name:"table",basePlotModule:e(85852),categories:["noOpacity"],meta:{}}},24752:function(C,A,e){"use strict";var v=e(23536),w=e(33428),n=e(3400),T=n.numberFormat,x=e(71688),f=e(43616),s=e(72736),t=e(3400).raiseToTop,o=e(3400).strTranslate,r=e(3400).cancelTransition,i=e(55992),a=e(53056),u=e(76308);function l(U){return Math.ceil(U.calcdata.maxLineWidth/2)}function d(U,re){return"clip"+U._fullLayout._uid+"_scrollAreaBottomClip_"+re.key}function c(U,re){return"clip"+U._fullLayout._uid+"_columnBoundaryClippath_"+re.calcdata.key+"_"+re.specIndex}function _(U){return[].concat.apply([],U.map(function(re){return re})).map(function(re){return re.__data__})}function p(U,re,ee){var J=U.selectAll("."+v.cn.scrollbarKit).data(x.repeat,x.keyFun);J.enter().append("g").classed(v.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),J.each(function(le){var se=le.scrollbarState;se.totalHeight=function(de){var be=de.rowBlocks;return j(be,be.length-1)+(be.length?Z(be[be.length-1],1/0):1)}(le),se.scrollableAreaHeight=le.groupHeight-k(le),se.currentlyVisibleHeight=Math.min(se.totalHeight,se.scrollableAreaHeight),se.ratio=se.currentlyVisibleHeight/se.totalHeight,se.barLength=Math.max(se.ratio*se.currentlyVisibleHeight,v.goldenRatio*v.scrollbarWidth),se.barWiggleRoom=se.currentlyVisibleHeight-se.barLength,se.wiggleRoom=Math.max(0,se.totalHeight-se.scrollableAreaHeight),se.topY=se.barWiggleRoom===0?0:le.scrollY/se.wiggleRoom*se.barWiggleRoom,se.bottomY=se.topY+se.barLength,se.dragMultiplier=se.wiggleRoom/se.barWiggleRoom}).attr("transform",function(le){var se=le.width+v.scrollbarWidth/2+v.scrollbarOffset;return o(se,k(le))});var Q=J.selectAll("."+v.cn.scrollbar).data(x.repeat,x.keyFun);Q.enter().append("g").classed(v.cn.scrollbar,!0);var ne=Q.selectAll("."+v.cn.scrollbarSlider).data(x.repeat,x.keyFun);ne.enter().append("g").classed(v.cn.scrollbarSlider,!0),ne.attr("transform",function(le){return o(0,le.scrollbarState.topY||0)});var K=ne.selectAll("."+v.cn.scrollbarGlyph).data(x.repeat,x.keyFun);K.enter().append("line").classed(v.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",v.scrollbarWidth).attr("stroke-linecap","round").attr("y1",v.scrollbarWidth/2),K.attr("y2",function(le){return le.scrollbarState.barLength-v.scrollbarWidth/2}).attr("stroke-opacity",function(le){return le.columnDragInProgress||!le.scrollbarState.barWiggleRoom||ee?0:.4}),K.transition().delay(0).duration(0),K.transition().delay(v.scrollbarHideDelay).duration(v.scrollbarHideDuration).attr("stroke-opacity",0);var oe=Q.selectAll("."+v.cn.scrollbarCaptureZone).data(x.repeat,x.keyFun);oe.enter().append("line").classed(v.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",v.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(le){var se=w.event.y,de=this.getBoundingClientRect(),be=le.scrollbarState,_e=se-de.top,xe=w.scale.linear().domain([0,be.scrollableAreaHeight]).range([0,be.totalHeight]).clamp(!0);be.topY<=_e&&_e<=be.bottomY||P(re,U,null,xe(_e-be.barLength/2))(le)}).call(w.behavior.drag().origin(function(le){return w.event.stopPropagation(),le.scrollbarState.scrollbarScrollInProgress=!0,le}).on("drag",P(re,U)).on("dragend",function(){})),oe.attr("y2",function(le){return le.scrollbarState.scrollableAreaHeight}),re._context.staticPlot&&(K.remove(),oe.remove())}function g(U,re,ee,J){var Q=function(se){var de=se.selectAll("."+v.cn.columnCells).data(x.repeat,x.keyFun);return de.enter().append("g").classed(v.cn.columnCells,!0),de.exit().remove(),de}(ee),ne=function(se){var de=se.selectAll("."+v.cn.columnCell).data(a.splitToCells,function(be){return be.keyWithinBlock});return de.enter().append("g").classed(v.cn.columnCell,!0),de.exit().remove(),de}(Q);(function(se){se.each(function(de,be){var _e=de.calcdata.cells.font,xe=de.column.specIndex,ve={size:y(_e.size,xe,be),color:y(_e.color,xe,be),family:y(_e.family,xe,be),weight:y(_e.weight,xe,be),style:y(_e.style,xe,be),variant:y(_e.variant,xe,be)};de.rowNumber=de.key,de.align=y(de.calcdata.cells.align,xe,be),de.cellBorderWidth=y(de.calcdata.cells.line.width,xe,be),de.font=ve})})(ne);var K=function(se){var de=se.selectAll("."+v.cn.cellRect).data(x.repeat,function(be){return be.keyWithinBlock});return de.enter().append("rect").classed(v.cn.cellRect,!0),de}(ne);(function(se){se.attr("width",function(de){return de.column.columnWidth}).attr("stroke-width",function(de){return de.cellBorderWidth}).each(function(de){var be=w.select(this);u.stroke(be,y(de.calcdata.cells.line.color,de.column.specIndex,de.rowNumber)),u.fill(be,y(de.calcdata.cells.fill.color,de.column.specIndex,de.rowNumber))})})(K);var oe=function(se){var de=se.selectAll("."+v.cn.cellTextHolder).data(x.repeat,function(be){return be.keyWithinBlock});return de.enter().append("g").classed(v.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),de}(ne),le=function(se){var de=se.selectAll("."+v.cn.cellText).data(x.repeat,function(be){return be.keyWithinBlock});return de.enter().append("text").classed(v.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){w.event.stopPropagation()}),de}(oe);(function(se){se.each(function(de){f.font(w.select(this),de.font)})})(le),m(le,re,J,U),F(ne)}function m(U,re,ee,J){U.text(function(Q){var ne=Q.column.specIndex,K=Q.rowNumber,oe=Q.value,le=typeof oe=="string",se=le&&oe.match(/<br>/i),de=!le||se;Q.mayHaveMarkup=le&&oe.match(/[<&>]/);var be,_e=typeof(be=oe)=="string"&&be.match(v.latexCheck);Q.latex=_e;var xe,ve,ye=_e?"":y(Q.calcdata.cells.prefix,ne,K)||"",me=_e?"":y(Q.calcdata.cells.suffix,ne,K)||"",Me=_e?null:y(Q.calcdata.cells.format,ne,K)||null,Ae=ye+(Me?T(Me)(Q.value):Q.value)+me;if(Q.wrappingNeeded=!Q.wrapped&&!de&&!_e&&(xe=b(Ae)),Q.cellHeightMayIncrease=se||_e||Q.mayHaveMarkup||(xe===void 0?b(Ae):xe),Q.needsConvertToTspans=Q.mayHaveMarkup||Q.wrappingNeeded||Q.latex,Q.wrappingNeeded){var ce=(v.wrapSplitCharacter===" "?Ae.replace(/<a href=/gi,"<a_href="):Ae).split(v.wrapSplitCharacter),ae=v.wrapSplitCharacter===" "?ce.map(function(pe){return pe.replace(/<a_href=/gi,"<a href=")}):ce;Q.fragments=ae.map(function(pe){return{text:pe,width:null}}),Q.fragments.push({fragment:v.wrapSpacer,width:null}),ve=ae.join(v.lineBreaker)+v.lineBreaker+v.wrapSpacer}else delete Q.fragments,ve=Ae;return ve}).attr("dy",function(Q){return Q.needsConvertToTspans?0:"0.75em"}).each(function(Q){var ne=this,K=w.select(ne),oe=Q.wrappingNeeded?O:N;Q.needsConvertToTspans?s.convertToTspans(K,J,oe(ee,ne,re,J,Q)):w.select(ne.parentNode).attr("transform",function(le){return o(V(le),v.cellPad)}).attr("text-anchor",function(le){return{left:"start",center:"middle",right:"end"}[le.align]})})}function b(U){return U.indexOf(v.wrapSplitCharacter)!==-1}function y(U,re,ee){if(n.isArrayOrTypedArray(U)){var J=U[Math.min(re,U.length-1)];return n.isArrayOrTypedArray(J)?J[Math.min(ee,J.length-1)]:J}return U}function M(U,re,ee){U.transition().ease(v.releaseTransitionEase).duration(v.releaseTransitionDuration).attr("transform",o(re.x,ee))}function h(U){return U.type==="cells"}function E(U){return U.type==="header"}function k(U){return(U.rowBlocks.length?U.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(re,ee){return re+Z(ee,1/0)},0)}function D(U,re,ee){var J=_(re)[0];if(J!==void 0){var Q=J.rowBlocks,ne=J.calcdata,K=j(Q,Q.length),oe=J.calcdata.groupHeight-k(J),le=ne.scrollY=Math.max(0,Math.min(K-oe,ne.scrollY)),se=function(de,be,_e){for(var xe=[],ve=0,ye=0;ye<de.length;ye++){for(var me=de[ye],Me=me.rows,Ae=0,ce=0;ce<Me.length;ce++)Ae+=Me[ce].rowHeight;me.allRowsHeight=Ae,be<ve+Ae&&be+_e>ve&&xe.push(ye),ve+=Ae}return xe}(Q,le,oe);se.length===1&&(se[0]===Q.length-1?se.unshift(se[0]-1):se.push(se[0]+1)),se[0]%2&&se.reverse(),re.each(function(de,be){de.page=se[be],de.scrollY=le}),re.attr("transform",function(de){var be=j(de.rowBlocks,de.page)-de.scrollY;return o(0,be)}),U&&(L(U,ee,re,se,J.prevPages,J,0),L(U,ee,re,se,J.prevPages,J,1),p(ee,U))}}function P(U,re,ee,J){return function(Q){var ne=Q.calcdata?Q.calcdata:Q,K=re.filter(function(de){return ne.key===de.key}),oe=ee||ne.scrollbarState.dragMultiplier,le=ne.scrollY;ne.scrollY=J===void 0?ne.scrollY+oe*w.event.dy:J;var se=K.selectAll("."+v.cn.yColumn).selectAll("."+v.cn.columnBlock).filter(h);return D(U,se,K),ne.scrollY===le}}function L(U,re,ee,J,Q,ne,K){J[K]!==Q[K]&&(clearTimeout(ne.currentRepaint[K]),ne.currentRepaint[K]=setTimeout(function(){var oe=ee.filter(function(le,se){return se===K&&J[se]!==Q[se]});g(U,re,oe,ee),Q[K]=J[K]}))}function O(U,re,ee,J){return function(){var Q=w.select(re.parentNode);Q.each(function(ne){var K=ne.fragments;Q.selectAll("tspan.line").each(function(ve,ye){K[ye].width=this.getComputedTextLength()});var oe,le,se=K[K.length-1].width,de=K.slice(0,-1),be=[],_e=0,xe=ne.column.columnWidth-2*v.cellPad;for(ne.value="";de.length;)_e+(le=(oe=de.shift()).width+se)>xe&&(ne.value+=be.join(v.wrapSpacer)+v.lineBreaker,be=[],_e=0),be.push(oe.text),_e+=le;_e&&(ne.value+=be.join(v.wrapSpacer)),ne.wrapped=!0}),Q.selectAll("tspan.line").remove(),m(Q.select("."+v.cn.cellText),ee,U,J),w.select(re.parentNode.parentNode).call(F)}}function N(U,re,ee,J,Q){return function(){if(!Q.settledY){var ne=w.select(re.parentNode),K=H(Q),oe=Q.key-K.firstRowIndex,le=K.rows[oe].rowHeight,se=Q.cellHeightMayIncrease?re.parentNode.getBoundingClientRect().height+2*v.cellPad:le,de=Math.max(se,le);de-K.rows[oe].rowHeight&&(K.rows[oe].rowHeight=de,U.selectAll("."+v.cn.columnCell).call(F),D(null,U.filter(h),0),p(ee,J,!0)),ne.attr("transform",function(){var be=this,_e=be.parentNode.getBoundingClientRect(),xe=w.select(be.parentNode).select("."+v.cn.cellRect).node().getBoundingClientRect(),ve=be.transform.baseVal.consolidate(),ye=xe.top-_e.top+(ve?ve.matrix.f:v.cellPad);return o(V(Q,w.select(be.parentNode).select("."+v.cn.cellTextHolder).node().getBoundingClientRect().width),ye)}),Q.settledY=!0}}}function V(U,re){switch(U.align){case"left":default:return v.cellPad;case"right":return U.column.columnWidth-(re||0)-v.cellPad;case"center":return(U.column.columnWidth-(re||0))/2}}function F(U){U.attr("transform",function(re){var ee=re.rowBlocks[0].auxiliaryBlocks.reduce(function(Q,ne){return Q+Z(ne,1/0)},0),J=Z(H(re),re.key);return o(0,J+ee)}).selectAll("."+v.cn.cellRect).attr("height",function(re){return(ee=H(re),J=re.key,ee.rows[J-ee.firstRowIndex]).rowHeight;var ee,J})}function j(U,re){for(var ee=0,J=re-1;J>=0;J--)ee+=z(U[J]);return ee}function Z(U,re){for(var ee=0,J=0;J<U.rows.length&&U.rows[J].rowIndex<re;J++)ee+=U.rows[J].rowHeight;return ee}function z(U){var re=U.allRowsHeight;if(re!==void 0)return re;for(var ee=0,J=0;J<U.rows.length;J++)ee+=U.rows[J].rowHeight;return U.allRowsHeight=ee,ee}function H(U){return U.rowBlocks[U.page]}C.exports=function(U,re){var ee=!U._context.staticPlot,J=U._fullLayout._paper.selectAll("."+v.cn.table).data(re.map(function(me){var Me=x.unwrap(me).trace;return i(U,Me)}),x.keyFun);J.exit().remove(),J.enter().append("g").classed(v.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),J.attr("width",function(me){return me.width+me.size.l+me.size.r}).attr("height",function(me){return me.height+me.size.t+me.size.b}).attr("transform",function(me){return o(me.translateX,me.translateY)});var Q=J.selectAll("."+v.cn.tableControlView).data(x.repeat,x.keyFun),ne=Q.enter().append("g").classed(v.cn.tableControlView,!0).style("box-sizing","content-box");if(ee){var K="onwheel"in document?"wheel":"mousewheel";ne.on("mousemove",function(me){Q.filter(function(Me){return me===Me}).call(p,U)}).on(K,function(me){if(!me.scrollbarState.wheeling){me.scrollbarState.wheeling=!0;var Me=me.scrollY+w.event.deltaY;P(U,Q,null,Me)(me)||(w.event.stopPropagation(),w.event.preventDefault()),me.scrollbarState.wheeling=!1}}).call(p,U,!0)}Q.attr("transform",function(me){return o(me.size.l,me.size.t)});var oe=Q.selectAll("."+v.cn.scrollBackground).data(x.repeat,x.keyFun);oe.enter().append("rect").classed(v.cn.scrollBackground,!0).attr("fill","none"),oe.attr("width",function(me){return me.width}).attr("height",function(me){return me.height}),Q.each(function(me){f.setClipUrl(w.select(this),d(U,me),U)});var le=Q.selectAll("."+v.cn.yColumn).data(function(me){return me.columns},x.keyFun);le.enter().append("g").classed(v.cn.yColumn,!0),le.exit().remove(),le.attr("transform",function(me){return o(me.x,0)}),ee&&le.call(w.behavior.drag().origin(function(me){return M(w.select(this),me,-v.uplift),t(this),me.calcdata.columnDragInProgress=!0,p(Q.filter(function(Me){return me.calcdata.key===Me.key}),U),me}).on("drag",function(me){var Me=w.select(this),Ae=function(ce){return(me===ce?w.event.x:ce.x)+ce.columnWidth/2};me.x=Math.max(-v.overdrag,Math.min(me.calcdata.width+v.overdrag-me.columnWidth,w.event.x)),_(le).filter(function(ce){return ce.calcdata.key===me.calcdata.key}).sort(function(ce,ae){return Ae(ce)-Ae(ae)}).forEach(function(ce,ae){ce.xIndex=ae,ce.x=me===ce?ce.x:ce.xScale(ce)}),le.filter(function(ce){return me!==ce}).transition().ease(v.transitionEase).duration(v.transitionDuration).attr("transform",function(ce){return o(ce.x,0)}),Me.call(r).attr("transform",o(me.x,-v.uplift))}).on("dragend",function(me){var Me=w.select(this),Ae=me.calcdata;me.x=me.xScale(me),me.calcdata.columnDragInProgress=!1,M(Me,me,0),function(ce,ae,pe){var De=ae.gdColumnsOriginalOrder;ae.gdColumns.sort(function(ke,Ee){return pe[De.indexOf(ke)]-pe[De.indexOf(Ee)]}),ae.columnorder=pe,ce.emit("plotly_restyle")}(U,Ae,Ae.columns.map(function(ce){return ce.xIndex}))})),le.each(function(me){f.setClipUrl(w.select(this),c(U,me),U)});var se=le.selectAll("."+v.cn.columnBlock).data(a.splitToPanels,x.keyFun);se.enter().append("g").classed(v.cn.columnBlock,!0).attr("id",function(me){return me.key}),se.style("cursor",function(me){return me.dragHandle?"ew-resize":me.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var de=se.filter(E),be=se.filter(h);ee&&be.call(w.behavior.drag().origin(function(me){return w.event.stopPropagation(),me}).on("drag",P(U,Q,-1)).on("dragend",function(){})),g(U,Q,de,se),g(U,Q,be,se);var _e=Q.selectAll("."+v.cn.scrollAreaClip).data(x.repeat,x.keyFun);_e.enter().append("clipPath").classed(v.cn.scrollAreaClip,!0).attr("id",function(me){return d(U,me)});var xe=_e.selectAll("."+v.cn.scrollAreaClipRect).data(x.repeat,x.keyFun);xe.enter().append("rect").classed(v.cn.scrollAreaClipRect,!0).attr("x",-v.overdrag).attr("y",-v.uplift).attr("fill","none"),xe.attr("width",function(me){return me.width+2*v.overdrag}).attr("height",function(me){return me.height+v.uplift}),le.selectAll("."+v.cn.columnBoundary).data(x.repeat,x.keyFun).enter().append("g").classed(v.cn.columnBoundary,!0);var ve=le.selectAll("."+v.cn.columnBoundaryClippath).data(x.repeat,x.keyFun);ve.enter().append("clipPath").classed(v.cn.columnBoundaryClippath,!0),ve.attr("id",function(me){return c(U,me)});var ye=ve.selectAll("."+v.cn.columnBoundaryRect).data(x.repeat,x.keyFun);ye.enter().append("rect").classed(v.cn.columnBoundaryRect,!0).attr("fill","none"),ye.attr("width",function(me){return me.columnWidth+2*l(me)}).attr("height",function(me){return me.calcdata.height+2*l(me)+v.uplift}).attr("x",function(me){return-l(me)}).attr("y",function(me){return-l(me)}),D(null,be,Q)}},40516:function(C,A,e){"use strict";var v=e(21776).Ks,w=e(21776).Gw,n=e(49084),T=e(86968).u,x=e(74996),f=e(424),s=e(32984),t=e(92880).extendFlat,o=e(98192).c;C.exports={labels:f.labels,parents:f.parents,values:f.values,branchvalues:f.branchvalues,count:f.count,level:f.level,maxdepth:f.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:t({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:f.marker.colors,pattern:o,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:f.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},n("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:t({},x.textfont,{}),editType:"calc"},text:x.text,textinfo:f.textinfo,texttemplate:w({editType:"plot"},{keys:s.eventDataKeys.concat(["label","value"])}),hovertext:x.hovertext,hoverinfo:f.hoverinfo,hovertemplate:v({},{keys:s.eventDataKeys}),textfont:x.textfont,insidetextfont:x.insidetextfont,outsidetextfont:t({},x.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:x.sort,root:f.root,domain:T({name:"treemap",trace:!0,editType:"calc"})}},79516:function(C,A,e){"use strict";var v=e(7316);A.name="treemap",A.plot=function(w,n,T,x){v.plotBasePlot(A.name,w,n,T,x)},A.clean=function(w,n,T,x){v.cleanBasePlot(A.name,w,n,T,x)}},97840:function(C,A,e){"use strict";var v=e(3776);A.r=function(w,n){return v.calc(w,n)},A.q=function(w){return v._runCrossTraceCalc("treemap",w)}},32984:function(C){"use strict";C.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},34092:function(C,A,e){"use strict";var v=e(3400),w=e(40516),n=e(76308),T=e(86968).Q,x=e(31508).handleText,f=e(78048).TEXTPAD,s=e(74174).handleMarkerDefaults,t=e(8932),o=t.hasColorscale,r=t.handleDefaults;C.exports=function(i,a,u,l){function d(M,h){return v.coerce(i,a,w,M,h)}var c=d("labels"),_=d("parents");if(c&&c.length&&_&&_.length){var p=d("values");p&&p.length?d("branchvalues"):d("count"),d("level"),d("maxdepth"),d("tiling.packing")==="squarify"&&d("tiling.squarifyratio"),d("tiling.flip"),d("tiling.pad");var g=d("text");d("texttemplate"),a.texttemplate||d("textinfo",v.isArrayOrTypedArray(g)?"text+label":"label"),d("hovertext"),d("hovertemplate");var m=d("pathbar.visible");x(i,a,l,d,"auto",{hasPathbar:m,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),d("textposition");var b=a.textposition.indexOf("bottom")!==-1;s(i,a,l,d),(a._hasColorscale=o(i,"marker","colors")||(i.marker||{}).coloraxis)?r(i,a,l,d,{prefix:"marker.",cLetter:"c"}):d("marker.depthfade",!(a.marker.colors||[]).length);var y=2*a.textfont.size;d("marker.pad.t",b?y/4:y),d("marker.pad.l",y/4),d("marker.pad.r",y/4),d("marker.pad.b",b?y:y/4),d("marker.cornerradius"),a._hovered={marker:{line:{width:2,color:n.contrast(l.paper_bgcolor)}}},m&&(d("pathbar.thickness",a.pathbar.textfont.size+2*f),d("pathbar.side"),d("pathbar.edgeshape")),d("sort"),d("root.color"),T(a,l,d),a._length=null}else a.visible=!1}},95808:function(C,A,e){"use strict";var v=e(33428),w=e(78176),n=e(82744).clearMinTextSize,T=e(60100).resizeText,x=e(52960);C.exports=function(f,s,t,o,r){var i,a,u=r.type,l=r.drawDescendants,d=f._fullLayout,c=d["_"+u+"layer"],_=!t;n(u,d),(i=c.selectAll("g.trace."+u).data(s,function(p){return p[0].trace.uid})).enter().append("g").classed("trace",!0).classed(u,!0),i.order(),!d.uniformtext.mode&&w.hasTransition(t)?(o&&(a=o()),v.transition().duration(t.duration).ease(t.easing).each("end",function(){a&&a()}).each("interrupt",function(){a&&a()}).each(function(){c.selectAll("g.trace").each(function(p){x(f,p,this,t,l)})})):(i.each(function(p){x(f,p,this,t,l)}),d.uniformtext.mode&&T(f,c.selectAll(".trace"),u)),_&&i.exit().remove()}},27336:function(C,A,e){"use strict";var v=e(33428),w=e(3400),n=e(43616),T=e(72736),x=e(13832),f=e(66192).styleOne,s=e(32984),t=e(78176),o=e(45716),r=!0;C.exports=function(i,a,u,l,d){var c=d.barDifY,_=d.width,p=d.height,g=d.viewX,m=d.viewY,b=d.pathSlice,y=d.toMoveInsideSlice,M=d.strTransform,h=d.hasTransition,E=d.handleSlicesExit,k=d.makeUpdateSliceInterpolator,D=d.makeUpdateTextInterpolator,P={},L=i._context.staticPlot,O=i._fullLayout,N=a[0],V=N.trace,F=N.hierarchy,j=_/V._entryDepth,Z=t.listPath(u.data,"id"),z=x(F.copy(),[_,p],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(z=z.filter(function(U){var re=Z.indexOf(U.data.id);return re!==-1&&(U.x0=j*re,U.x1=j*(re+1),U.y0=c,U.y1=c+p,U.onPathbar=!0,!0)})).reverse(),(l=l.data(z,t.getPtId)).enter().append("g").classed("pathbar",!0),E(l,r,P,[_,p],b),l.order();var H=l;h&&(H=H.transition().each("end",function(){var U=v.select(this);t.setSliceCursor(U,i,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),H.each(function(U){U._x0=g(U.x0),U._x1=g(U.x1),U._y0=m(U.y0),U._y1=m(U.y1),U._hoverX=g(U.x1-Math.min(_,p)/2),U._hoverY=m(U.y1-p/2);var re=v.select(this),ee=w.ensureSingle(re,"path","surface",function(K){K.style("pointer-events",L?"none":"all")});h?ee.transition().attrTween("d",function(K){var oe=k(K,r,P,[_,p]);return function(le){return b(oe(le))}}):ee.attr("d",b),re.call(o,u,i,a,{styleOne:f,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,i,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:i._transitioning}),ee.call(f,U,V,i,{hovered:!1}),U._text=(t.getPtLabel(U)||"").split("<br>").join(" ")||"";var J=w.ensureSingle(re,"g","slicetext"),Q=w.ensureSingle(J,"text","",function(K){K.attr("data-notex",1)}),ne=w.ensureUniformFontSize(i,t.determineTextFont(V,U,O.font,{onPathbar:!0}));Q.text(U._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(n.font,ne).call(T.convertToTspans,i),U.textBB=n.bBox(Q.node()),U.transform=y(U,{fontSize:ne.size,onPathbar:!0}),U.transform.fontSize=ne.size,h?Q.transition().attrTween("transform",function(K){var oe=D(K,r,P,[_,p]);return function(le){return M(oe(le))}}):Q.attr("transform",M(U))})}},76477:function(C,A,e){"use strict";var v=e(33428),w=e(3400),n=e(43616),T=e(72736),x=e(13832),f=e(66192).styleOne,s=e(32984),t=e(78176),o=e(45716),r=e(96488).formatSliceLabel,i=!1;C.exports=function(a,u,l,d,c){var _=c.width,p=c.height,g=c.viewX,m=c.viewY,b=c.pathSlice,y=c.toMoveInsideSlice,M=c.strTransform,h=c.hasTransition,E=c.handleSlicesExit,k=c.makeUpdateSliceInterpolator,D=c.makeUpdateTextInterpolator,P=c.prevEntry,L=a._context.staticPlot,O=a._fullLayout,N=u[0].trace,V=N.textposition.indexOf("left")!==-1,F=N.textposition.indexOf("right")!==-1,j=N.textposition.indexOf("bottom")!==-1,Z=!j&&!N.marker.pad.t||j&&!N.marker.pad.b,z=x(l,[_,p],{packing:N.tiling.packing,squarifyratio:N.tiling.squarifyratio,flipX:N.tiling.flip.indexOf("x")>-1,flipY:N.tiling.flip.indexOf("y")>-1,pad:{inner:N.tiling.pad,top:N.marker.pad.t,left:N.marker.pad.l,right:N.marker.pad.r,bottom:N.marker.pad.b}}).descendants(),H=1/0,U=-1/0;z.forEach(function(ne){var K=ne.depth;K>=N._maxDepth?(ne.x0=ne.x1=(ne.x0+ne.x1)/2,ne.y0=ne.y1=(ne.y0+ne.y1)/2):(H=Math.min(H,K),U=Math.max(U,K))}),d=d.data(z,t.getPtId),N._maxVisibleLayers=isFinite(U)?U-H+1:0,d.enter().append("g").classed("slice",!0),E(d,i,{},[_,p],b),d.order();var re=null;if(h&&P){var ee=t.getPtId(P);d.each(function(ne){re===null&&t.getPtId(ne)===ee&&(re={x0:ne.x0,x1:ne.x1,y0:ne.y0,y1:ne.y1})})}var J=function(){return re||{x0:0,x1:_,y0:0,y1:p}},Q=d;return h&&(Q=Q.transition().each("end",function(){var ne=v.select(this);t.setSliceCursor(ne,a,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),Q.each(function(ne){var K=t.isHeader(ne,N);ne._x0=g(ne.x0),ne._x1=g(ne.x1),ne._y0=m(ne.y0),ne._y1=m(ne.y1),ne._hoverX=g(ne.x1-N.marker.pad.r),ne._hoverY=m(j?ne.y1-N.marker.pad.b/2:ne.y0+N.marker.pad.t/2);var oe=v.select(this),le=w.ensureSingle(oe,"path","surface",function(ve){ve.style("pointer-events",L?"none":"all")});h?le.transition().attrTween("d",function(ve){var ye=k(ve,i,J(),[_,p]);return function(me){return b(ye(me))}}):le.attr("d",b),oe.call(o,l,a,u,{styleOne:f,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,a,{isTransitioning:a._transitioning}),le.call(f,ne,N,a,{hovered:!1}),ne.x0===ne.x1||ne.y0===ne.y1?ne._text="":ne._text=K?Z?"":t.getPtLabel(ne)||"":r(ne,l,N,u,O)||"";var se=w.ensureSingle(oe,"g","slicetext"),de=w.ensureSingle(se,"text","",function(ve){ve.attr("data-notex",1)}),be=w.ensureUniformFontSize(a,t.determineTextFont(N,ne,O.font)),_e=ne._text||" ",xe=K&&_e.indexOf("<br>")===-1;de.text(_e).classed("slicetext",!0).attr("text-anchor",F?"end":V||xe?"start":"middle").call(n.font,be).call(T.convertToTspans,a),ne.textBB=n.bBox(de.node()),ne.transform=y(ne,{fontSize:be.size,isHeader:K}),ne.transform.fontSize=be.size,h?de.transition().attrTween("transform",function(ve){var ye=D(ve,i,J(),[_,p]);return function(me){return M(ye(me))}}):de.attr("transform",M(ne))}),re}},83024:function(C){"use strict";C.exports=function A(e,v,w){var n;w.swapXY&&(n=e.x0,e.x0=e.y0,e.y0=n,n=e.x1,e.x1=e.y1,e.y1=n),w.flipX&&(n=e.x0,e.x0=v[0]-e.x1,e.x1=v[0]-n),w.flipY&&(n=e.y0,e.y0=v[1]-e.y1,e.y1=v[1]-n);var T=e.children;if(T)for(var x=0;x<T.length;x++)A(T[x],v,w)}},31991:function(C,A,e){"use strict";C.exports={moduleType:"trace",name:"treemap",basePlotModule:e(79516),categories:[],animatable:!0,attributes:e(40516),layoutAttributes:e(45392),supplyDefaults:e(34092),supplyLayoutDefaults:e(77480),calc:e(97840).r,crossTraceCalc:e(97840).q,plot:e(53264),style:e(66192).style,colorbar:e(5528),meta:{}}},45392:function(C){"use strict";C.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},77480:function(C,A,e){"use strict";var v=e(3400),w=e(45392);C.exports=function(n,T){function x(f,s){return v.coerce(n,T,w,f,s)}x("treemapcolorway",T.colorway),x("extendtreemapcolors")}},13832:function(C,A,e){"use strict";var v=e(74148),w=e(83024);C.exports=function(n,T,x){var f,s=x.flipX,t=x.flipY,o=x.packing==="dice-slice",r=x.pad[t?"bottom":"top"],i=x.pad[s?"right":"left"],a=x.pad[s?"left":"right"],u=x.pad[t?"top":"bottom"];o&&(f=i,i=r,r=f,f=a,a=u,u=f);var l=v.treemap().tile(function(d,c){switch(d){case"squarify":return v.treemapSquarify.ratio(c);case"binary":return v.treemapBinary;case"dice":return v.treemapDice;case"slice":return v.treemapSlice;default:return v.treemapSliceDice}}(x.packing,x.squarifyratio)).paddingInner(x.pad.inner).paddingLeft(i).paddingRight(a).paddingTop(r).paddingBottom(u).size(o?[T[1],T[0]]:T)(n);return(o||s||t)&&w(l,T,{swapXY:o,flipX:s,flipY:t}),l}},53264:function(C,A,e){"use strict";var v=e(95808),w=e(76477);C.exports=function(n,T,x,f){return v(n,T,x,f,{type:"treemap",drawDescendants:w})}},52960:function(C,A,e){"use strict";var v=e(33428),w=e(67756).qy,n=e(78176),T=e(3400),x=e(78048).TEXTPAD,f=e(98184).toMoveInsideBar,s=e(82744).recordMinTextSize,t=e(32984),o=e(27336);function r(i){return n.isHierarchyRoot(i)?"":n.getPtId(i)}C.exports=function(i,a,u,l,d){var c=i._fullLayout,_=a[0],p=_.trace,g=p.type==="icicle",m=_.hierarchy,b=n.findEntryWithLevel(m,p.level),y=v.select(u),M=y.selectAll("g.pathbar"),h=y.selectAll("g.slice");if(!b)return M.remove(),void h.remove();var E=n.isHierarchyRoot(b),k=!c.uniformtext.mode&&n.hasTransition(l),D=n.getMaxDepth(p),P=c._size,L=p.domain,O=P.w*(L.x[1]-L.x[0]),N=P.h*(L.y[1]-L.y[0]),V=O,F=p.pathbar.thickness,j=p.marker.line.width+t.gapWithPathbar,Z=p.pathbar.visible?p.pathbar.side.indexOf("bottom")>-1?N+j:-(F+j):0,z={x0:V,x1:V,y0:Z,y1:Z+F},H=function(we,Ce,ze){var Pe=p.tiling.pad,Ue=function(at){return at-Pe<=Ce.x0},Ge=function(at){return at+Pe>=Ce.x1},Xe=function(at){return at-Pe<=Ce.y0},st=function(at){return at+Pe>=Ce.y1};return we.x0===Ce.x0&&we.x1===Ce.x1&&we.y0===Ce.y0&&we.y1===Ce.y1?{x0:we.x0,x1:we.x1,y0:we.y0,y1:we.y1}:{x0:Ue(we.x0-Pe)?0:Ge(we.x0-Pe)?ze[0]:we.x0,x1:Ue(we.x1+Pe)?0:Ge(we.x1+Pe)?ze[0]:we.x1,y0:Xe(we.y0-Pe)?0:st(we.y0-Pe)?ze[1]:we.y0,y1:Xe(we.y1+Pe)?0:st(we.y1+Pe)?ze[1]:we.y1}},U=null,re={},ee={},J=null,Q=function(we,Ce){return Ce?re[r(we)]:ee[r(we)]};_.hasMultipleRoots&&E&&D++,p._maxDepth=D,p._backgroundColor=c.paper_bgcolor,p._entryDepth=b.data.depth,p._atRootLevel=E;var ne=-O/2+P.l+P.w*(L.x[1]+L.x[0])/2,K=-N/2+P.t+P.h*(1-(L.y[1]+L.y[0])/2),oe=function(we){return ne+we},le=function(we){return K+we},se=le(0),de=oe(0),be=function(we){return de+we},_e=function(we){return se+we};function xe(we,Ce){return we+","+Ce}var ve=be(0),ye=function(we){we.x=Math.max(ve,we.x)},me=p.pathbar.edgeshape,Me=p[g?"tiling":"marker"].pad,Ae=function(we){return p.textposition.indexOf(we)!==-1},ce=Ae("top"),ae=Ae("left"),pe=Ae("right"),De=Ae("bottom"),ke=function(we,Ce){var ze=we.x0,Pe=we.x1,Ue=we.y0,Ge=we.y1,Xe=we.textBB,st=ce||Ce.isHeader&&!De?"start":De?"end":"middle",at=Ae("right"),vt=Ae("left")||Ce.onPathbar?-1:at?1:0;if(Ce.isHeader){if((ze+=(g?Me:Me.l)-x)>=(Pe-=(g?Me:Me.r)-x)){var xt=(ze+Pe)/2;ze=xt,Pe=xt}var gt;De?Ue<(gt=Ge-(g?Me:Me.b))&&gt<Ge&&(Ue=gt):Ue<(gt=Ue+(g?Me:Me.t))&&gt<Ge&&(Ge=gt)}var rt=f(ze,Pe,Ue,Ge,Xe,{isHorizontal:!1,constrained:!0,angle:0,anchor:st,leftToRight:vt});return rt.fontSize=Ce.fontSize,rt.targetX=oe(rt.targetX),rt.targetY=le(rt.targetY),isNaN(rt.targetX)||isNaN(rt.targetY)?{}:(ze!==Pe&&Ue!==Ge&&s(p.type,rt,c),{scale:rt.scale,rotate:rt.rotate,textX:rt.textX,textY:rt.textY,anchorX:rt.anchorX,anchorY:rt.anchorY,targetX:rt.targetX,targetY:rt.targetY})},Ee=function(we,Ce){for(var ze,Pe=0,Ue=we;!ze&&Pe<D;)Pe++,(Ue=Ue.parent)?ze=Q(Ue,Ce):Pe=D;return ze||{}},Ie=function(we,Ce,ze,Pe,Ue){var Ge,Xe=Q(we,Ce);if(Xe)Ge=Xe;else if(Ce)Ge=z;else if(U)if(we.parent){var st=J||ze;st&&!Ce?Ge=H(we,st,Pe):(Ge={},T.extendFlat(Ge,Ee(we,Ce)))}else Ge=T.extendFlat({},we),g&&(Ue.orientation==="h"?Ue.flipX?Ge.x0=we.x1:Ge.x1=0:Ue.flipY?Ge.y0=we.y1:Ge.y1=0);else Ge={};return w(Ge,{x0:we.x0,x1:we.x1,y0:we.y0,y1:we.y1})},Re=function(we,Ce,ze,Pe){var Ue=Q(we,Ce),Ge={},Xe=function(at,vt,xt,gt){if(vt)return re[r(m)]||z;var rt=ee[p.level]||xt;return function(tt){return tt.data.depth-b.data.depth<D}(at)?H(at,rt,gt):{}}(we,Ce,ze,Pe);T.extendFlat(Ge,{transform:ke({x0:Xe.x0,x1:Xe.x1,y0:Xe.y0,y1:Xe.y1,textBB:we.textBB,_text:we._text},{isHeader:n.isHeader(we,p)})}),Ue?Ge=Ue:we.parent&&T.extendFlat(Ge,Ee(we,Ce));var st=we.transform;return we.x0!==we.x1&&we.y0!==we.y1&&s(p.type,st,c),w(Ge,{transform:{scale:st.scale,rotate:st.rotate,textX:st.textX,textY:st.textY,anchorX:st.anchorX,anchorY:st.anchorY,targetX:st.targetX,targetY:st.targetY}})},Ne=function(we,Ce,ze,Pe,Ue){var Ge=Pe[0],Xe=Pe[1];k?we.exit().transition().each(function(){var st=v.select(this);st.select("path.surface").transition().attrTween("d",function(at){var vt=function(xt,gt,rt,tt){var Mt,Pt=Q(xt,gt);if(gt)Mt=z;else{var Rt=Q(b,gt);Mt=Rt?H(xt,Rt,tt):{}}return w(Pt,Mt)}(at,Ce,0,[Ge,Xe]);return function(xt){return Ue(vt(xt))}}),st.select("g.slicetext").attr("opacity",0)}).remove():we.exit().remove()},ge=function(we){var Ce=we.transform;return we.x0!==we.x1&&we.y0!==we.y1&&s(p.type,Ce,c),T.getTextTransform({textX:Ce.textX,textY:Ce.textY,anchorX:Ce.anchorX,anchorY:Ce.anchorY,targetX:Ce.targetX,targetY:Ce.targetY,scale:Ce.scale,rotate:Ce.rotate})};k&&(M.each(function(we){re[r(we)]={x0:we.x0,x1:we.x1,y0:we.y0,y1:we.y1},we.transform&&(re[r(we)].transform={textX:we.transform.textX,textY:we.transform.textY,anchorX:we.transform.anchorX,anchorY:we.transform.anchorY,targetX:we.transform.targetX,targetY:we.transform.targetY,scale:we.transform.scale,rotate:we.transform.rotate})}),h.each(function(we){ee[r(we)]={x0:we.x0,x1:we.x1,y0:we.y0,y1:we.y1},we.transform&&(ee[r(we)].transform={textX:we.transform.textX,textY:we.transform.textY,anchorX:we.transform.anchorX,anchorY:we.transform.anchorY,targetX:we.transform.targetX,targetY:we.transform.targetY,scale:we.transform.scale,rotate:we.transform.rotate}),!U&&n.isEntry(we)&&(U=we)})),J=d(i,a,b,h,{width:O,height:N,viewX:oe,viewY:le,pathSlice:function(we){var Ce=oe(we.x0),ze=oe(we.x1),Pe=le(we.y0),Ue=le(we.y1),Ge=ze-Ce,Xe=Ue-Pe;if(!Ge||!Xe)return"";var st=p.marker.cornerradius||0,at=Math.min(st,Ge/2,Xe/2);at&&we.data&&we.data.data&&we.data.data.label&&(ce&&(at=Math.min(at,Me.t)),ae&&(at=Math.min(at,Me.l)),pe&&(at=Math.min(at,Me.r)),De&&(at=Math.min(at,Me.b)));var vt=function(xt,gt){return at?"a"+xe(at,at)+" 0 0 1 "+xe(xt,gt):""};return"M"+xe(Ce,Pe+at)+vt(at,-at)+"L"+xe(ze-at,Pe)+vt(at,at)+"L"+xe(ze,Ue-at)+vt(-at,at)+"L"+xe(Ce+at,Ue)+vt(-at,-at)+"Z"},toMoveInsideSlice:ke,prevEntry:U,makeUpdateSliceInterpolator:Ie,makeUpdateTextInterpolator:Re,handleSlicesExit:Ne,hasTransition:k,strTransform:ge}),p.pathbar.visible?o(i,a,b,M,{barDifY:Z,width:V,height:F,viewX:be,viewY:_e,pathSlice:function(we){var Ce=be(Math.max(Math.min(we.x0,we.x0),0)),ze=be(Math.min(Math.max(we.x1,we.x1),V)),Pe=_e(we.y0),Ue=_e(we.y1),Ge=F/2,Xe={},st={};Xe.x=Ce,st.x=ze,Xe.y=st.y=(Pe+Ue)/2;var at={x:Ce,y:Pe},vt={x:ze,y:Pe},xt={x:ze,y:Ue},gt={x:Ce,y:Ue};return me===">"?(at.x-=Ge,vt.x-=Ge,xt.x-=Ge,gt.x-=Ge):me==="/"?(xt.x-=Ge,gt.x-=Ge,Xe.x-=Ge/2,st.x-=Ge/2):me==="\\"?(at.x-=Ge,vt.x-=Ge,Xe.x-=Ge/2,st.x-=Ge/2):me==="<"&&(Xe.x-=Ge,st.x-=Ge),ye(at),ye(gt),ye(Xe),ye(vt),ye(xt),ye(st),"M"+xe(at.x,at.y)+"L"+xe(vt.x,vt.y)+"L"+xe(st.x,st.y)+"L"+xe(xt.x,xt.y)+"L"+xe(gt.x,gt.y)+"L"+xe(Xe.x,Xe.y)+"Z"},toMoveInsideSlice:ke,makeUpdateSliceInterpolator:Ie,makeUpdateTextInterpolator:Re,handleSlicesExit:Ne,hasTransition:k,strTransform:ge}):M.remove()}},66192:function(C,A,e){"use strict";var v=e(33428),w=e(76308),n=e(3400),T=e(78176),x=e(82744).resizeText,f=e(60404);function s(t,o,r,i,a){var u,l,d=(a||{}).hovered,c=o.data.data,_=c.i,p=c.color,g=T.isHierarchyRoot(o),m=1;if(d)u=r._hovered.marker.line.color,l=r._hovered.marker.line.width;else if(g&&p===r.root.color)m=100,u="rgba(0,0,0,0)",l=0;else if(u=n.castOption(r,_,"marker.line.color")||w.defaultLine,l=n.castOption(r,_,"marker.line.width")||0,!r._hasColorscale&&!o.onPathbar){var b=r.marker.depthfade;if(b){var y,M=w.combine(w.addOpacity(r._backgroundColor,.75),p);if(b===!0){var h=T.getMaxDepth(r);y=isFinite(h)?T.isLeaf(o)?0:r._maxVisibleLayers-(o.data.depth-r._entryDepth):o.data.height+1}else y=o.data.depth-r._entryDepth,r._atRootLevel||y++;if(y>0)for(var E=0;E<y;E++){var k=.5*E/y;p=w.combine(w.addOpacity(M,k),p)}}}t.call(f,o,r,i,p).style("stroke-width",l).call(w.stroke,u).style("opacity",m)}C.exports={style:function(t){var o=t._fullLayout._treemaplayer.selectAll(".trace");x(t,o,"treemap"),o.each(function(r){var i=v.select(this),a=r[0].trace;i.style("opacity",a.opacity),i.selectAll("path.surface").each(function(u){v.select(this).call(s,u,a,t,{hovered:!1})})})},styleOne:s}},13988:function(C,A,e){"use strict";var v=e(63188),w=e(92880).extendFlat,n=e(29736).axisHoverFormat;C.exports={y:v.y,x:v.x,x0:v.x0,y0:v.y0,xhoverformat:n("x"),yhoverformat:n("y"),name:w({},v.name,{}),orientation:w({},v.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:v.fillcolor,points:w({},v.boxpoints,{}),jitter:w({},v.jitter,{}),pointpos:w({},v.pointpos,{}),width:w({},v.width,{}),marker:v.marker,text:v.text,hovertext:v.hovertext,hovertemplate:v.hovertemplate,quartilemethod:v.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:v.offsetgroup,alignmentgroup:v.alignmentgroup,selected:v.selected,unselected:v.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"},zorder:v.zorder}},67064:function(C,A,e){"use strict";var v=e(3400),w=e(54460),n=e(62555),T=e(63800),x=e(39032).BADNUM;function f(t,o,r){var i=o.max-o.min;if(!i)return t.bandwidth?t.bandwidth:0;if(t.bandwidth)return Math.max(t.bandwidth,i/1e4);var a=r.length,u=v.stdev(r,a-1,o.mean);return Math.max(function(l,d,c){return 1.059*Math.min(d,c/1.349)*Math.pow(l,-.2)}(a,u,o.q3-o.q1),i/100)}function s(t,o,r,i){var a,u=t.spanmode,l=t.span||[],d=[o.min,o.max],c=[o.min-2*i,o.max+2*i];function _(g){var m=l[g],b=r.type==="multicategory"?r.r2c(m):r.d2c(m,0,t[o.valLetter+"calendar"]);return b===x?c[g]:b}var p={type:"linear",range:a=u==="soft"?c:u==="hard"?d:[_(0),_(1)]};return w.setConvert(p),p.cleanRange(),a}C.exports=function(t,o){var r=n(t,o);if(r[0].t.empty)return r;for(var i=t._fullLayout,a=w.getFromId(t,o[o.orientation==="h"?"xaxis":"yaxis"]),u=1/0,l=-1/0,d=0,c=0,_=0;_<r.length;_++){var p=r[_],g=p.pts.map(T.extractVal),m=p.bandwidth=f(o,p,g),b=p.span=s(o,p,a,m);if(p.min===p.max&&m===0)b=p.span=[p.min,p.max],p.density=[{v:1,t:b[0]}],p.bandwidth=m,d=Math.max(d,1);else{var y=b[1]-b[0],M=Math.ceil(y/(m/3)),h=y/M;if(!isFinite(h)||!isFinite(M))return v.error("Something went wrong with computing the violin span"),r[0].t.empty=!0,r;var E=T.makeKDE(p,o,g);p.density=new Array(M);for(var k=0,D=b[0];D<b[1]+h/2;k++,D+=h){var P=E(D);p.density[k]={v:P,t:D},d=Math.max(d,P)}}c=Math.max(c,g.length),u=Math.min(u,b[0]),l=Math.max(l,b[1])}var L=w.findExtremes(a,[u,l],{padded:!0});if(o._extremes[a._id]=L,o.width)r[0].t.maxKDE=d;else{var O=i._violinScaleGroupStats,N=o.scalegroup,V=O[N];V?(V.maxKDE=Math.max(V.maxKDE,d),V.maxCount=Math.max(V.maxCount,c)):O[N]={maxKDE:d,maxCount:c}}return r[0].t.labels.kde=v._(t,"kde:"),r}},14348:function(C,A,e){"use strict";var v=e(96404).setPositionOffset,w=["v","h"];C.exports=function(n,T){for(var x=n.calcdata,f=T.xaxis,s=T.yaxis,t=0;t<w.length;t++){for(var o=w[t],r=o==="h"?s:f,i=[],a=0;a<x.length;a++){var u=x[a],l=u[0].t,d=u[0].trace;d.visible!==!0||d.type!=="violin"||l.empty||d.orientation!==o||d.xaxis!==f._id||d.yaxis!==s._id||i.push(a)}v("violin",n,i,r)}}},36240:function(C,A,e){"use strict";var v=e(3400),w=e(76308),n=e(90624),T=e(13988);C.exports=function(x,f,s,t){function o(y,M){return v.coerce(x,f,T,y,M)}function r(y,M){return v.coerce2(x,f,T,y,M)}if(n.handleSampleDefaults(x,f,o,t),f.visible!==!1){o("bandwidth"),o("side"),o("width")||(o("scalegroup",f.name),o("scalemode"));var i,a=o("span");Array.isArray(a)&&(i="manual"),o("spanmode",i);var u=o("line.color",(x.marker||{}).color||s),l=o("line.width"),d=o("fillcolor",w.addOpacity(f.line.color,.5));n.handlePointsDefaults(x,f,o,{prefix:""});var c=r("box.width"),_=r("box.fillcolor",d),p=r("box.line.color",u),g=r("box.line.width",l);o("box.visible",!!(c||_||p||g))||(f.box={visible:!1});var m=r("meanline.color",u),b=r("meanline.width",l);o("meanline.visible",!!(m||b))||(f.meanline={visible:!1}),o("quartilemethod"),o("zorder")}}},63800:function(C,A,e){"use strict";var v=e(3400),w=function(n){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*n*n)};A.makeKDE=function(n,T,x){var f=x.length,s=w,t=n.bandwidth,o=1/(f*t);return function(r){for(var i=0,a=0;a<f;a++)i+=s((r-x[a])/t);return o*i}},A.getPositionOnKdePath=function(n,T,x){var f,s;T.orientation==="h"?(f="y",s="x"):(f="x",s="y");var t=v.findPointOnPath(n.path,x,s,{pathLength:n.pathLength}),o=n.posCenterPx,r=t[f];return[r,T.side==="both"?2*o-r:o]},A.getKdeValue=function(n,T,x){var f=n.pts.map(A.extractVal);return A.makeKDE(n,T,f)(x)/n.posDensityScale},A.extractVal=function(n){return n.v}},78e3:function(C,A,e){"use strict";var v=e(76308),w=e(3400),n=e(54460),T=e(27576),x=e(63800);C.exports=function(f,s,t,o,r){r||(r={});var i,a,u=r.hoverLayer,l=f.cd,d=l[0].trace,c=d.hoveron,_=c.indexOf("violins")!==-1,p=c.indexOf("kde")!==-1,g=[];if(_||p){var m=T.hoverOnBoxes(f,s,t,o);if(p&&m.length>0){var b,y,M,h,E,k=f.xa,D=f.ya;d.orientation==="h"?(E=s,b="y",M=D,y="x",h=k):(E=t,b="x",M=k,y="y",h=D);var P=l[f.index];if(E>=P.span[0]&&E<=P.span[1]){var L=w.extendFlat({},f),O=h.c2p(E,!0),N=x.getKdeValue(P,d,E),V=x.getPositionOnKdePath(P,d,O),F=M._offset,j=M._length;L[b+"0"]=V[0],L[b+"1"]=V[1],L[y+"0"]=L[y+"1"]=O,L[y+"Label"]=y+": "+n.hoverLabelText(h,E,d[y+"hoverformat"])+", "+l[0].t.labels.kde+" "+N.toFixed(3);for(var Z=0,z=0;z<m.length;z++)if(m[z].attr==="med"){Z=z;break}L.spikeDistance=m[Z].spikeDistance;var H=b+"Spike";L[H]=m[Z][H],m[Z].spikeDistance=void 0,m[Z][H]=void 0,L.hovertemplate=!1,g.push(L),(a={})[b+"1"]=w.constrain(F+V[0],F,F+j),a[b+"2"]=w.constrain(F+V[1],F,F+j),a[y+"1"]=a[y+"2"]=h._offset+O}}_&&(g=g.concat(m))}c.indexOf("points")!==-1&&(i=T.hoverOnPoints(f,s,t));var U=u.selectAll(".violinline-"+d.uid).data(a?[0]:[]);return U.enter().append("line").classed("violinline-"+d.uid,!0).attr("stroke-width",1.5),U.exit().remove(),U.attr(a).call(v.stroke,f.color),o==="closest"?i?[i]:g:(i&&g.push(i),g)}},22869:function(C,A,e){"use strict";C.exports={attributes:e(13988),layoutAttributes:e(98228),supplyDefaults:e(36240),crossTraceDefaults:e(90624).crossTraceDefaults,supplyLayoutDefaults:e(8939),calc:e(67064),crossTraceCalc:e(14348),plot:e(5140),style:e(95908),styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(78e3),selectPoints:e(8264),moduleType:"trace",name:"violin",basePlotModule:e(57952),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},98228:function(C,A,e){"use strict";var v=e(16560),w=e(3400).extendFlat;C.exports={violinmode:w({},v.boxmode,{}),violingap:w({},v.boxgap,{}),violingroupgap:w({},v.boxgroupgap,{})}},8939:function(C,A,e){"use strict";var v=e(3400),w=e(98228),n=e(68832);C.exports=function(T,x,f){n._supply(T,x,f,function(s,t){return v.coerce(T,x,w,s,t)},"violin")}},5140:function(C,A,e){"use strict";var v=e(33428),w=e(3400),n=e(43616),T=e(18728),x=e(52340),f=e(63800);C.exports=function(s,t,o,r){var i=s._context.staticPlot,a=s._fullLayout,u=t.xaxis,l=t.yaxis;function d(c,_){var p=x(c,{xaxis:u,yaxis:l,trace:_,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return n.smoothopen(p[0],1)}w.makeTraceGroups(r,o,"trace violins").each(function(c){var _=v.select(this),p=c[0],g=p.t,m=p.trace;if(m.visible!==!0||g.empty)_.remove();else{var b=g.bPos,y=g.bdPos,M=t[g.valLetter+"axis"],h=t[g.posLetter+"axis"],E=m.side==="both",k=E||m.side==="positive",D=E||m.side==="negative",P=_.selectAll("path.violin").data(w.identity);P.enter().append("path").style("vector-effect",i?"none":"non-scaling-stroke").attr("class","violin"),P.exit().remove(),P.each(function(z){var H,U,re,ee,J,Q,ne,K,oe=v.select(this),le=z.density,se=le.length,de=h.c2l(z.pos+b,!0),be=h.l2p(de);if(m.width)H=g.maxKDE/y;else{var _e=a._violinScaleGroupStats[m.scalegroup];H=m.scalemode==="count"?_e.maxKDE/y*(_e.maxCount/z.pts.length):_e.maxKDE/y}if(k){for(ne=new Array(se),J=0;J<se;J++)(K=ne[J]={})[g.posLetter]=de+le[J].v/H,K[g.valLetter]=M.c2l(le[J].t,!0);U=d(ne,m)}if(D){for(ne=new Array(se),Q=0,J=se-1;Q<se;Q++,J--)(K=ne[Q]={})[g.posLetter]=de-le[J].v/H,K[g.valLetter]=M.c2l(le[J].t,!0);re=d(ne,m)}if(E)ee=U+"L"+re.substr(1)+"Z";else{var xe=[be,M.c2p(le[0].t)],ve=[be,M.c2p(le[se-1].t)];m.orientation==="h"&&(xe.reverse(),ve.reverse()),ee=k?"M"+xe+"L"+U.substr(1)+"L"+ve:"M"+ve+"L"+re.substr(1)+"L"+xe}oe.attr("d",ee),z.posCenterPx=be,z.posDensityScale=H*y,z.path=oe.node(),z.pathLength=z.path.getTotalLength()/(E?2:1)});var L,O,N,V=m.box,F=V.width,j=(V.line||{}).width;E?(L=y*F,O=0):k?(L=[0,y*F/2],O=j*{x:1,y:-1}[g.posLetter]):(L=[y*F/2,0],O=j*{x:-1,y:1}[g.posLetter]),T.plotBoxAndWhiskers(_,{pos:h,val:M},m,{bPos:b,bdPos:L,bPosPxOffset:O}),T.plotBoxMean(_,{pos:h,val:M},m,{bPos:b,bdPos:L,bPosPxOffset:O}),!m.box.visible&&m.meanline.visible&&(N=w.identity);var Z=_.selectAll("path.meanline").data(N||[]);Z.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect",i?"none":"non-scaling-stroke"),Z.exit().remove(),Z.each(function(z){var H=M.c2p(z.mean,!0),U=f.getPositionOnKdePath(z,m,H);v.select(this).attr("d",m.orientation==="h"?"M"+H+","+U[0]+"V"+U[1]:"M"+U[0]+","+H+"H"+U[1])}),T.plotPoints(_,{x:u,y:l},m,g)}})}},95908:function(C,A,e){"use strict";var v=e(33428),w=e(76308),n=e(49224).stylePoints;C.exports=function(T){var x=v.select(T).selectAll("g.trace.violins");x.style("opacity",function(f){return f[0].trace.opacity}),x.each(function(f){var s=f[0].trace,t=v.select(this),o=s.box||{},r=o.line||{},i=s.meanline||{},a=i.width;t.selectAll("path.violin").style("stroke-width",s.line.width+"px").call(w.stroke,s.line.color).call(w.fill,s.fillcolor),t.selectAll("path.box").style("stroke-width",r.width+"px").call(w.stroke,r.color).call(w.fill,o.fillcolor);var u={"stroke-width":a+"px","stroke-dasharray":2*a+"px,"+a+"px"};t.selectAll("path.mean").style(u).call(w.stroke,i.color),t.selectAll("path.meanline").style(u).call(w.stroke,i.color),n(t,s,T)})}},58168:function(C,A,e){"use strict";var v=e(49084),w=e(50048),n=e(16716),T=e(45464),x=e(92880).extendFlat,f=e(67824).overrideAll,s=C.exports=f(x({x:w.x,y:w.y,z:w.z,value:w.value,isomin:w.isomin,isomax:w.isomax,surface:w.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:w.slices,caps:w.caps,text:w.text,hovertext:w.hovertext,xhoverformat:w.xhoverformat,yhoverformat:w.yhoverformat,zhoverformat:w.zhoverformat,valuehoverformat:w.valuehoverformat,hovertemplate:w.hovertemplate},v("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:w.colorbar,opacity:w.opacity,opacityscale:n.opacityscale,lightposition:w.lightposition,lighting:w.lighting,flatshading:w.flatshading,contour:w.contour,hoverinfo:x({},T.hoverinfo),showlegend:x({},T.showlegend,{dflt:!1})}),"calc","nested");s.x.editType=s.y.editType=s.z.editType=s.value.editType="calc+clearAxisTypes",s.transforms=void 0},91976:function(C,A,e){"use strict";var v=e(67792).gl_mesh3d,w=e(33040).parseColorScale,n=e(3400).isArrayOrTypedArray,T=e(43080),x=e(8932).extractOpts,f=e(52094),s=e(31460).findNearestOnAxis,t=e(31460).generateIsoMeshes;function o(i,a,u){this.scene=i,this.uid=u,this.mesh=a,this.name="",this.data=null,this.showContour=!1}var r=o.prototype;r.handlePick=function(i){if(i.object===this.mesh){var a=i.data.index,u=this.data._meshX[a],l=this.data._meshY[a],d=this.data._meshZ[a],c=this.data._Ys.length,_=this.data._Zs.length,p=s(u,this.data._Xs).id,g=s(l,this.data._Ys).id,m=s(d,this.data._Zs).id,b=i.index=m+_*g+_*c*p;i.traceCoordinate=[this.data._meshX[b],this.data._meshY[b],this.data._meshZ[b],this.data._value[b]];var y=this.data.hovertext||this.data.text;return n(y)&&y[b]!==void 0?i.textLabel=y[b]:y&&(i.textLabel=y),!0}},r.update=function(i){var a=this.scene,u=a.fullSceneLayout;function l(_,p,g,m){return p.map(function(b){return _.d2l(b,0,m)*g})}this.data=t(i);var d={positions:f(l(u.xaxis,i._meshX,a.dataScale[0],i.xcalendar),l(u.yaxis,i._meshY,a.dataScale[1],i.ycalendar),l(u.zaxis,i._meshZ,a.dataScale[2],i.zcalendar)),cells:f(i._meshI,i._meshJ,i._meshK),lightPosition:[i.lightposition.x,i.lightposition.y,i.lightposition.z],ambient:i.lighting.ambient,diffuse:i.lighting.diffuse,specular:i.lighting.specular,roughness:i.lighting.roughness,fresnel:i.lighting.fresnel,vertexNormalsEpsilon:i.lighting.vertexnormalsepsilon,faceNormalsEpsilon:i.lighting.facenormalsepsilon,opacity:i.opacity,opacityscale:i.opacityscale,contourEnable:i.contour.show,contourColor:T(i.contour.color).slice(0,3),contourWidth:i.contour.width,useFacetNormals:i.flatshading},c=x(i);d.vertexIntensity=i._meshIntensity,d.vertexIntensityBounds=[c.min,c.max],d.colormap=w(i),this.mesh.update(d)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},C.exports=function(i,a){var u=i.glplot.gl,l=v({gl:u}),d=new o(i,l,a.uid);return l._trace=d,d.update(a),i.glplot.add(l),d}},12448:function(C,A,e){"use strict";var v=e(3400),w=e(58168),n=e(70548).supplyIsoDefaults,T=e(60192).opacityscaleDefaults;C.exports=function(x,f,s,t){function o(r,i){return v.coerce(x,f,w,r,i)}n(x,f,s,t,o),T(x,f,t,o)}},67776:function(C,A,e){"use strict";C.exports={attributes:e(58168),supplyDefaults:e(12448),calc:e(62624),colorbar:{min:"cmin",max:"cmax"},plot:e(91976),moduleType:"trace",name:"volume",basePlotModule:e(12536),categories:["gl3d","showLegend"],meta:{}}},65776:function(C,A,e){"use strict";var v=e(20832),w=e(52904).line,n=e(45464),T=e(29736).axisHoverFormat,x=e(21776).Ks,f=e(21776).Gw,s=e(10213),t=e(92880).extendFlat,o=e(76308);function r(i){return{marker:{color:t({},v.marker.color,{arrayOk:!1,editType:"style"}),line:{color:t({},v.marker.line.color,{arrayOk:!1,editType:"style"}),width:t({},v.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}C.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:v.x,x0:v.x0,dx:v.dx,y:v.y,y0:v.y0,dy:v.dy,xperiod:v.xperiod,yperiod:v.yperiod,xperiod0:v.xperiod0,yperiod0:v.yperiod0,xperiodalignment:v.xperiodalignment,yperiodalignment:v.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),hovertext:v.hovertext,hovertemplate:x({},{keys:s.eventDataKeys}),hoverinfo:t({},n.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:f({editType:"plot"},{keys:s.eventDataKeys.concat(["label"])}),text:v.text,textposition:v.textposition,insidetextanchor:v.insidetextanchor,textangle:v.textangle,textfont:v.textfont,insidetextfont:v.insidetextfont,outsidetextfont:v.outsidetextfont,constraintext:v.constraintext,cliponaxis:v.cliponaxis,orientation:v.orientation,offset:v.offset,width:v.width,increasing:r(),decreasing:r(),totals:r(),connector:{line:{color:t({},w.color,{dflt:o.defaultLine}),width:t({},w.width,{editType:"plot"}),dash:w.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:v.offsetgroup,alignmentgroup:v.alignmentgroup,zorder:v.zorder}},73540:function(C,A,e){"use strict";var v=e(54460),w=e(1220),n=e(3400).mergeArray,T=e(4500),x=e(39032).BADNUM;function f(t){return t==="a"||t==="absolute"}function s(t){return t==="t"||t==="total"}C.exports=function(t,o){var r,i,a,u,l,d,c=v.getFromId(t,o.xaxis||"x"),_=v.getFromId(t,o.yaxis||"y");o.orientation==="h"?(r=c.makeCalcdata(o,"x"),a=_.makeCalcdata(o,"y"),u=w(o,_,"y",a),l=!!o.yperiodalignment,d="y"):(r=_.makeCalcdata(o,"y"),a=c.makeCalcdata(o,"x"),u=w(o,c,"x",a),l=!!o.xperiodalignment,d="x"),i=u.vals;for(var p,g=Math.min(i.length,r.length),m=new Array(g),b=0,y=!1,M=0;M<g;M++){var h=r[M]||0,E=!1;(r[M]!==x||s(o.measure[M])||f(o.measure[M]))&&M+1<g&&(r[M+1]!==x||s(o.measure[M+1])||f(o.measure[M+1]))&&(E=!0);var k=m[M]={i:M,p:i[M],s:h,rawS:h,cNext:E};f(o.measure[M])?(b=k.s,k.isSum=!0,k.dir="totals",k.s=b):s(o.measure[M])?(k.isSum=!0,k.dir="totals",k.s=b):(k.isSum=!1,k.dir=k.rawS<0?"decreasing":"increasing",p=k.s,k.s=b+p,b+=p),k.dir==="totals"&&(y=!0),l&&(m[M].orig_p=a[M],m[M][d+"End"]=u.ends[M],m[M][d+"Start"]=u.starts[M]),o.ids&&(k.id=String(o.ids[M])),k.v=(o.base||0)+b}return m.length&&(m[0].hasTotals=y),n(o.text,m,"tx"),n(o.hovertext,m,"htx"),T(m,o),m}},10213:function(C){"use strict";C.exports={eventDataKeys:["initial","delta","final"]}},50152:function(C,A,e){"use strict";var v=e(96376).setGroupPositions;C.exports=function(w,n){var T,x,f=w._fullLayout,s=w._fullData,t=w.calcdata,o=n.xaxis,r=n.yaxis,i=[],a=[],u=[];for(x=0;x<s.length;x++){var l=s[x];l.visible===!0&&l.xaxis===o._id&&l.yaxis===r._id&&l.type==="waterfall"&&(T=t[x],l.orientation==="h"?u.push(T):a.push(T),i.push(T))}var d={mode:f.waterfallmode,norm:f.waterfallnorm,gap:f.waterfallgap,groupgap:f.waterfallgroupgap};for(v(w,o,r,a,d),v(w,r,o,u,d),x=0;x<i.length;x++){T=i[x];for(var c=0;c<T.length;c++){var _=T[c];_.isSum===!1&&(_.s0+=c===0?0:T[c-1].s),c+1<T.length&&(T[c].nextP0=T[c+1].p0,T[c].nextS0=T[c+1].s0)}}}},24224:function(C,A,e){"use strict";var v=e(3400),w=e(20011),n=e(31508).handleText,T=e(43980),x=e(31147),f=e(65776),s=e(76308),t=e(48164),o=t.INCREASING.COLOR,r=t.DECREASING.COLOR;function i(a,u,l){a(u+".marker.color",l),a(u+".marker.line.color",s.defaultLine),a(u+".marker.line.width")}C.exports={supplyDefaults:function(a,u,l,d){function c(p,g){return v.coerce(a,u,f,p,g)}if(T(a,u,d,c)){x(a,u,d,c),c("xhoverformat"),c("yhoverformat"),c("measure"),c("orientation",u.x&&!u.y?"h":"v"),c("base"),c("offset"),c("width"),c("text"),c("hovertext"),c("hovertemplate");var _=c("textposition");n(a,u,d,c,_,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),u.textposition!=="none"&&(c("texttemplate"),u.texttemplate||c("textinfo")),i(c,"increasing",o),i(c,"decreasing",r),i(c,"totals","#4499FF"),c("connector.visible")&&(c("connector.mode"),c("connector.line.width")&&(c("connector.line.color"),c("connector.line.dash"))),c("zorder")}else u.visible=!1},crossTraceDefaults:function(a,u){var l,d;function c(p){return v.coerce(d._input,d,f,p)}if(u.waterfallmode==="group")for(var _=0;_<a.length;_++)l=(d=a[_])._input,w(l,d,u,c)}}},53256:function(C){"use strict";C.exports=function(A,e){return A.x="xVal"in e?e.xVal:e.x,A.y="yVal"in e?e.yVal:e.y,"initial"in e&&(A.initial=e.initial),"delta"in e&&(A.delta=e.delta),"final"in e&&(A.final=e.final),e.xa&&(A.xaxis=e.xa),e.ya&&(A.yaxis=e.ya),A}},94196:function(C,A,e){"use strict";var v=e(54460).hoverLabelText,w=e(76308).opacity,n=e(63400).hoverOnBars,T=e(48164),x=T.INCREASING.SYMBOL,f=T.DECREASING.SYMBOL;C.exports=function(s,t,o,r,i){var a=n(s,t,o,r,i);if(a){var u=a.cd,l=u[0].trace,d=l.orientation==="h",c=d?"x":"y",_=d?s.xa:s.ya,p=u[a.index],g=p.isSum?p.b+p.s:p.rawS;a.initial=p.b+p.s-g,a.delta=g,a.final=a.initial+a.delta;var m=k(Math.abs(a.delta));a.deltaLabel=g<0?"("+m+")":m,a.finalLabel=k(a.final),a.initialLabel=k(a.initial);var b=p.hi||l.hoverinfo,y=[];if(b&&b!=="none"&&b!=="skip"){var M=b==="all",h=b.split("+"),E=function(D){return M||h.indexOf(D)!==-1};p.isSum||(!E("final")||E(d?"x":"y")||y.push(a.finalLabel),E("delta")&&(g<0?y.push(a.deltaLabel+" "+f):y.push(a.deltaLabel+" "+x)),E("initial")&&y.push("Initial: "+a.initialLabel))}return y.length&&(a.extraText=y.join("<br>")),a.color=function(D,P){var L=D[P.dir].marker,O=L.color,N=L.line.color,V=L.line.width;return w(O)?O:w(N)&&V?N:void 0}(l,p),[a]}function k(D){return v(_,D,l[c+"hoverformat"])}}},95952:function(C,A,e){"use strict";C.exports={attributes:e(65776),layoutAttributes:e(91352),supplyDefaults:e(24224).supplyDefaults,crossTraceDefaults:e(24224).crossTraceDefaults,supplyLayoutDefaults:e(59464),calc:e(73540),crossTraceCalc:e(50152),plot:e(64488),style:e(12252).style,hoverPoints:e(94196),eventData:e(53256),selectPoints:e(45784),moduleType:"trace",name:"waterfall",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},91352:function(C){"use strict";C.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},59464:function(C,A,e){"use strict";var v=e(3400),w=e(91352);C.exports=function(n,T,x){var f=!1;function s(r,i){return v.coerce(n,T,w,r,i)}for(var t=0;t<x.length;t++){var o=x[t];if(o.visible&&o.type==="waterfall"){f=!0;break}}f&&(s("waterfallmode"),s("waterfallgap",.2),s("waterfallgroupgap"))}},64488:function(C,A,e){"use strict";var v=e(33428),w=e(3400),n=e(43616),T=e(39032).BADNUM,x=e(98184),f=e(82744).clearMinTextSize;C.exports=function(s,t,o,r){var i=s._fullLayout;f("waterfall",i),x.plot(s,t,o,r,{mode:i.waterfallmode,norm:i.waterfallmode,gap:i.waterfallgap,groupgap:i.waterfallgroupgap}),function(a,u,l,d){var c=u.xaxis,_=u.yaxis;w.makeTraceGroups(d,l,"trace bars").each(function(p){var g=v.select(this),m=p[0].trace,b=w.ensureSingle(g,"g","lines");if(m.connector&&m.connector.visible){var y=m.orientation==="h",M=m.connector.mode,h=b.selectAll("g.line").data(w.identity);h.enter().append("g").classed("line",!0),h.exit().remove();var E=h.size();h.each(function(k,D){if(D===E-1||k.cNext){var P=function(V,F,j,Z){var z=[],H=[],U=Z?F:j,re=Z?j:F;return z[0]=U.c2p(V.s0,!0),H[0]=re.c2p(V.p0,!0),z[1]=U.c2p(V.s1,!0),H[1]=re.c2p(V.p1,!0),z[2]=U.c2p(V.nextS0,!0),H[2]=re.c2p(V.nextP0,!0),Z?[z,H]:[H,z]}(k,c,_,y),L=P[0],O=P[1],N="";L[0]!==T&&O[0]!==T&&L[1]!==T&&O[1]!==T&&(M==="spanning"&&!k.isSum&&D>0&&(N+=y?"M"+L[0]+","+O[1]+"V"+O[0]:"M"+L[1]+","+O[0]+"H"+L[0]),M!=="between"&&(k.isSum||D<E-1)&&(N+=y?"M"+L[1]+","+O[0]+"V"+O[1]:"M"+L[0]+","+O[1]+"H"+L[1]),L[2]!==T&&O[2]!==T&&(N+=y?"M"+L[1]+","+O[1]+"V"+O[2]:"M"+L[1]+","+O[1]+"H"+L[2])),N===""&&(N="M0,0Z"),w.ensureSingle(v.select(this),"path").attr("d",N).call(n.setClipUrl,u.layerClipId,a)}})}else b.remove()})}(s,t,o,r)}},12252:function(C,A,e){"use strict";var v=e(33428),w=e(43616),n=e(76308),T=e(13448).DESELECTDIM,x=e(60100),f=e(82744).resizeText,s=x.styleTextPoints;C.exports={style:function(t,o,r){var i=r||v.select(t).selectAll('g[class^="waterfalllayer"]').selectAll("g.trace");f(t,i,"waterfall"),i.style("opacity",function(a){return a[0].trace.opacity}),i.each(function(a){var u=v.select(this),l=a[0].trace;u.selectAll(".point > path").each(function(d){if(!d.isBlank){var c=l[d.dir].marker;v.select(this).call(n.fill,c.color).call(n.stroke,c.line.color).call(w.dashLine,c.line.dash,c.line.width).style("opacity",l.selectedpoints&&!d.selected?T:1)}}),s(u,l,t),u.selectAll(".lines").each(function(){var d=l.connector.line;w.lineGroupStyle(v.select(this).selectAll("path"),d.width,d.color,d.dash)})})}}},84224:function(C,A,e){"use strict";var v=e(54460),w=e(3400),n=e(73060),T=e(60468).W,x=e(39032).BADNUM;A.moduleType="transform",A.name="aggregate";var f=A.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},s=f.aggregations;function t(a,u,l,d){if(d.enabled){for(var c=d.target,_=w.nestedProperty(u,c),p=_.get(),g=function(y,M){var h=y.func,E=M.d2c,k=M.c2d;switch(h){case"count":return o;case"first":return r;case"last":return i;case"sum":return function(D,P){for(var L=0,O=0;O<P.length;O++){var N=E(D[P[O]]);N!==x&&(L+=N)}return k(L)};case"avg":return function(D,P){for(var L=0,O=0,N=0;N<P.length;N++){var V=E(D[P[N]]);V!==x&&(L+=V,O++)}return O?k(L/O):x};case"min":return function(D,P){for(var L=1/0,O=0;O<P.length;O++){var N=E(D[P[O]]);N!==x&&(L=Math.min(L,N))}return L===1/0?x:k(L)};case"max":return function(D,P){for(var L=-1/0,O=0;O<P.length;O++){var N=E(D[P[O]]);N!==x&&(L=Math.max(L,N))}return L===-1/0?x:k(L)};case"range":return function(D,P){for(var L=1/0,O=-1/0,N=0;N<P.length;N++){var V=E(D[P[N]]);V!==x&&(L=Math.min(L,V),O=Math.max(O,V))}return O===-1/0||L===1/0?x:k(O-L)};case"change":return function(D,P){var L=E(D[P[0]]),O=E(D[P[P.length-1]]);return L===x||O===x?x:k(O-L)};case"median":return function(D,P){for(var L=[],O=0;O<P.length;O++){var N=E(D[P[O]]);N!==x&&L.push(N)}if(!L.length)return x;L.sort(w.sorterAsc);var V=(L.length-1)/2;return k((L[Math.floor(V)]+L[Math.ceil(V)])/2)};case"mode":return function(D,P){for(var L={},O=0,N=x,V=0;V<P.length;V++){var F=E(D[P[V]]);if(F!==x){var j=L[F]=(L[F]||0)+1;j>O&&(O=j,N=F)}}return O?k(N):x};case"rms":return function(D,P){for(var L=0,O=0,N=0;N<P.length;N++){var V=E(D[P[N]]);V!==x&&(L+=V*V,O++)}return O?k(Math.sqrt(L/O)):x};case"stddev":return function(D,P){var L,O=0,N=0,V=1,F=x;for(L=0;L<P.length&&F===x;L++)F=E(D[P[L]]);if(F===x)return x;for(;L<P.length;L++){var j=E(D[P[L]]);if(j!==x){var Z=j-F;O+=Z,N+=Z*Z,V++}}var z=y.funcmode==="sample"?V-1:V;return z?Math.sqrt((N-O*O/V)/z):0}}}(d,v.getDataConversions(a,u,c,p)),m=new Array(l.length),b=0;b<l.length;b++)m[b]=g(p,l[b]);_.set(m),d.func==="count"&&w.pushUnique(u._arrayAttrs,c)}}function o(a,u){return u.length}function r(a,u){return a[u[0]]}function i(a,u){return a[u[u.length-1]]}A.supplyDefaults=function(a,u){var l,d={};function c(k,D){return w.coerce(a,d,f,k,D)}if(!c("enabled"))return d;var _=n.findArrayAttributes(u),p={};for(l=0;l<_.length;l++)p[_[l]]=1;var g=c("groups");if(!Array.isArray(g)){if(!p[g])return d.enabled=!1,d;p[g]=0}var m,b=a.aggregations||[],y=d.aggregations=new Array(b.length);function M(k,D){return w.coerce(b[l],m,s,k,D)}for(l=0;l<b.length;l++){m={_index:l};var h=M("target"),E=M("func");M("enabled")&&h&&(p[h]||E==="count"&&p[h]===void 0)?(E==="stddev"&&M("funcmode"),p[h]=0,y[l]=m):y[l]={enabled:!1,_index:l}}for(l=0;l<_.length;l++)p[_[l]]&&y.push({target:_[l],func:s.func.dflt,enabled:!0,_index:-1});return d},A.calcTransform=function(a,u,l){if(l.enabled){var d=l.groups,c=w.getTargetArray(u,{target:d});if(c){var _,p,g,m,b={},y={},M=[],h=T(u.transforms,l),E=c.length;for(u._length&&(E=Math.min(E,u._length)),_=0;_<E;_++)(g=b[p=c[_]])===void 0?(b[p]=M.length,m=[_],M.push(m),y[b[p]]=h(_)):(M[g].push(_),y[b[p]]=(y[b[p]]||[]).concat(h(_)));l._indexToPoints=y;var k=l.aggregations;for(_=0;_<k.length;_++)t(a,u,M,k[_]);typeof d=="string"&&t(a,u,M,{target:d,func:"first",enabled:!0}),u._length=M.length}}}},76744:function(C,A,e){"use strict";var v=e(3400),w=e(24040),n=e(54460),T=e(60468).W,x=e(69104),f=x.COMPARISON_OPS,s=x.INTERVAL_OPS,t=x.SET_OPS;A.moduleType="transform",A.name="filter",A.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(f).concat(s).concat(t),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},A.supplyDefaults=function(o){var r={};function i(l,d){return v.coerce(o,r,A.attributes,l,d)}if(i("enabled")){var a=i("target");if(v.isArrayOrTypedArray(a)&&a.length===0)return r.enabled=!1,r;i("preservegaps"),i("operation"),i("value");var u=w.getComponentMethod("calendars","handleDefaults");u(o,r,"valuecalendar",null),u(o,r,"targetcalendar",null)}return r},A.calcTransform=function(o,r,i){if(i.enabled){var a=v.getTargetArray(r,i);if(a){var u=i.target,l=a.length;r._length&&(l=Math.min(l,r._length));var d=i.targetcalendar,c=r._arrayAttrs,_=i.preservegaps;if(typeof u=="string"){var p=v.nestedProperty(r,u+"calendar").get();p&&(d=p)}var g,m,b=function(P,L,O){var N=P.operation,V=P.value,F=v.isArrayOrTypedArray(V);function j(U){return U.indexOf(N)!==-1}var Z,z=function(U){return L(U,0,P.valuecalendar)},H=function(U){return L(U,0,O)};switch(j(f)?Z=z(F?V[0]:V):j(s)?Z=F?[z(V[0]),z(V[1])]:[z(V),z(V)]:j(t)&&(Z=F?V.map(z):[z(V)]),N){case"=":return function(U){return H(U)===Z};case"!=":return function(U){return H(U)!==Z};case"<":return function(U){return H(U)<Z};case"<=":return function(U){return H(U)<=Z};case">":return function(U){return H(U)>Z};case">=":return function(U){return H(U)>=Z};case"[]":return function(U){var re=H(U);return re>=Z[0]&&re<=Z[1]};case"()":return function(U){var re=H(U);return re>Z[0]&&re<Z[1]};case"[)":return function(U){var re=H(U);return re>=Z[0]&&re<Z[1]};case"(]":return function(U){var re=H(U);return re>Z[0]&&re<=Z[1]};case"][":return function(U){var re=H(U);return re<=Z[0]||re>=Z[1]};case")(":return function(U){var re=H(U);return re<Z[0]||re>Z[1]};case"](":return function(U){var re=H(U);return re<=Z[0]||re>Z[1]};case")[":return function(U){var re=H(U);return re<Z[0]||re>=Z[1]};case"{}":return function(U){return Z.indexOf(H(U))!==-1};case"}{":return function(U){return Z.indexOf(H(U))===-1}}}(i,n.getDataToCoordFunc(o,r,u,a),d),y={},M={},h=0;_?(g=function(P){y[P.astr]=v.extendDeep([],P.get()),P.set(new Array(l))},m=function(P,L){var O=y[P.astr][L];P.get()[L]=O}):(g=function(P){y[P.astr]=v.extendDeep([],P.get()),P.set([])},m=function(P,L){var O=y[P.astr][L];P.get().push(O)}),D(g);for(var E=T(r.transforms,i),k=0;k<l;k++)b(a[k])?(D(m,k),M[h++]=E(k)):_&&h++;i._indexToPoints=M,r._length=h}}function D(P,L){for(var O=0;O<c.length;O++)P(v.nestedProperty(r,c[O]),L)}}},32028:function(C,A,e){"use strict";var v=e(3400),w=e(73060),n=e(7316),T=e(60468).W;function x(f,s){var t,o,r,i,a,u,l,d,c,_,p=s.transform,g=s.transformIndex,m=f.transforms[g].groups,b=T(f.transforms,p);if(!v.isArrayOrTypedArray(m)||m.length===0)return[f];var y=v.filterUnique(m),M=new Array(y.length),h=m.length,E=w.findArrayAttributes(f),k=p.styles||[],D={};for(t=0;t<k.length;t++)D[k[t].target]=k[t].value;p.styles&&(_=v.keyedContainer(p,"styles","target","value.name"));var P={},L={};for(t=0;t<y.length;t++){P[u=y[t]]=t,L[u]=0,(l=M[t]=v.extendDeepNoArrays({},f))._group=u,l.transforms[g]._indexToPoints={};var O=null;for(_&&(O=_.get(u)),l.name=O||O===""?O:v.templateString(p.nameformat,{trace:f.name,group:u}),d=l.transforms,l.transforms=[],o=0;o<d.length;o++)l.transforms[o]=v.extendDeepNoArrays({},d[o]);for(o=0;o<E.length;o++)v.nestedProperty(l,E[o]).set([])}for(r=0;r<E.length;r++){for(i=E[r],o=0,c=[];o<y.length;o++)c[o]=v.nestedProperty(M[o],i).get();for(a=v.nestedProperty(f,i).get(),o=0;o<h;o++)c[P[m[o]]].push(a[o])}for(o=0;o<h;o++)(l=M[P[m[o]]]).transforms[g]._indexToPoints[L[m[o]]]=b(o),L[m[o]]++;for(t=0;t<y.length;t++)u=y[t],l=M[t],n.clearExpandedTraceDefaultColors(l),l=v.extendDeepNoArrays(l,D[u]||{});return M}A.moduleType="transform",A.name="groupby",A.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},A.supplyDefaults=function(f,s,t){var o,r={};function i(c,_){return v.coerce(f,r,A.attributes,c,_)}if(!i("enabled"))return r;i("groups"),i("nameformat",t._dataLength>1?"%{group} (%{trace})":"%{group}");var a=f.styles,u=r.styles=[];if(a)for(o=0;o<a.length;o++){var l=u[o]={};v.coerce(a[o],u[o],A.attributes.styles,"target");var d=v.coerce(a[o],u[o],A.attributes.styles,"value");v.isPlainObject(d)?l.value=v.extendDeep({},d):d&&delete l.value}return r},A.transform=function(f,s){var t,o,r,i=[];for(o=0;o<f.length;o++)for(t=x(f[o],s),r=0;r<t.length;r++)i.push(t[r]);return i}},60468:function(C,A){"use strict";A.W=function(e,v){for(var w,n,T=0;T<e.length&&(w=e[T])!==v;T++)w._indexToPoints&&w.enabled!==!1&&(n=w._indexToPoints);var x=n?function(f){return n[f]}:function(f){return[f]};return x}},76272:function(C,A,e){"use strict";var v=e(3400),w=e(54460),n=e(60468).W,T=e(39032).BADNUM;A.moduleType="transform",A.name="sort",A.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},A.supplyDefaults=function(x){var f={};function s(t,o){return v.coerce(x,f,A.attributes,t,o)}return s("enabled")&&(s("target"),s("order")),f},A.calcTransform=function(x,f,s){if(s.enabled){var t=v.getTargetArray(f,s);if(t){var o=s.target,r=t.length;f._length&&(r=Math.min(r,f._length));var i,a,u=f._arrayAttrs,l=function(m,b,y,M){var h,E=new Array(M),k=new Array(M);for(h=0;h<M;h++)E[h]={v:b[h],i:h};for(E.sort(function(D,P){switch(D.order){case"ascending":return function(L,O){var N=P(L.v),V=P(O.v);return N===T?1:V===T?-1:N-V};case"descending":return function(L,O){var N=P(L.v),V=P(O.v);return N===T?1:V===T?-1:V-N}}}(m,y)),h=0;h<M;h++)k[h]=E[h].i;return k}(s,t,w.getDataToCoordFunc(x,f,o,t),r),d=n(f.transforms,s),c={};for(i=0;i<u.length;i++){var _=v.nestedProperty(f,u[i]),p=_.get(),g=new Array(r);for(a=0;a<r;a++)g[a]=p[l[a]];_.set(g)}for(a=0;a<r;a++)c[a]=d(l[a]);s._indexToPoints=c,f._length=r}}}},25788:function(C,A){"use strict";A.version="2.32.0"},67792:function(C,A,e){var v=e(4168);(function(){var w={1964:function(f,s,t){f.exports={alpha_shape:t(3502),convex_hull:t(7352),delaunay_triangulate:t(7642),gl_cone3d:t(6405),gl_error3d:t(9165),gl_heatmap2d:t(2510),gl_line3d:t(5714),gl_mesh3d:t(7201),gl_plot2d:t(1850),gl_plot3d:t(4100),gl_pointcloud2d:t(4696),gl_scatter3d:t(8418),gl_select_box:t(3161),gl_spikes2d:t(4098),gl_streamtube3d:t(7815),gl_surface3d:t(9499),ndarray:t(9618),ndarray_linear_interpolate:t(4317)}},4793:function(f,s,t){"use strict";function o(ge,we){for(var Ce=0;Ce<we.length;Ce++){var ze=we[Ce];ze.enumerable=ze.enumerable||!1,ze.configurable=!0,"value"in ze&&(ze.writable=!0),Object.defineProperty(ge,r(ze.key),ze)}}function r(ge){var we=function(Ce,ze){if(l(Ce)!="object"||!Ce)return Ce;var Pe=Ce[Symbol.toPrimitive];if(Pe!==void 0){var Ue=Pe.call(Ce,"string");if(l(Ue)!="object")return Ue;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Ce)}(ge);return l(we)=="symbol"?we:we+""}function i(){try{var ge=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(i=function(){return!!ge})()}function a(ge){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(we){return we.__proto__||Object.getPrototypeOf(we)},a(ge)}function u(ge,we){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Ce,ze){return Ce.__proto__=ze,Ce},u(ge,we)}function l(ge){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(we){return typeof we}:function(we){return we&&typeof Symbol=="function"&&we.constructor===Symbol&&we!==Symbol.prototype?"symbol":typeof we},l(ge)}var d=t(7507),c=t(3778),_=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;s.hp=m,s.IS=50;var p=2147483647;function g(ge){if(ge>p)throw new RangeError('The value "'+ge+'" is invalid for option "size"');var we=new Uint8Array(ge);return Object.setPrototypeOf(we,m.prototype),we}function m(ge,we,Ce){if(typeof ge=="number"){if(typeof we=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return M(ge)}return b(ge,we,Ce)}function b(ge,we,Ce){if(typeof ge=="string")return function(Ue,Ge){if(typeof Ge=="string"&&Ge!==""||(Ge="utf8"),!m.isEncoding(Ge))throw new TypeError("Unknown encoding: "+Ge);var Xe=0|D(Ue,Ge),st=g(Xe),at=st.write(Ue,Ge);return at!==Xe&&(st=st.slice(0,at)),st}(ge,we);if(ArrayBuffer.isView(ge))return function(Ue){if(ke(Ue,Uint8Array)){var Ge=new Uint8Array(Ue);return E(Ge.buffer,Ge.byteOffset,Ge.byteLength)}return h(Ue)}(ge);if(ge==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+l(ge));if(ke(ge,ArrayBuffer)||ge&&ke(ge.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ke(ge,SharedArrayBuffer)||ge&&ke(ge.buffer,SharedArrayBuffer)))return E(ge,we,Ce);if(typeof ge=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ze=ge.valueOf&&ge.valueOf();if(ze!=null&&ze!==ge)return m.from(ze,we,Ce);var Pe=function(Ue){if(m.isBuffer(Ue)){var Ge=0|k(Ue.length),Xe=g(Ge);return Xe.length===0||Ue.copy(Xe,0,0,Ge),Xe}return Ue.length!==void 0?typeof Ue.length!="number"||Ee(Ue.length)?g(0):h(Ue):Ue.type==="Buffer"&&Array.isArray(Ue.data)?h(Ue.data):void 0}(ge);if(Pe)return Pe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ge[Symbol.toPrimitive]=="function")return m.from(ge[Symbol.toPrimitive]("string"),we,Ce);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+l(ge))}function y(ge){if(typeof ge!="number")throw new TypeError('"size" argument must be of type number');if(ge<0)throw new RangeError('The value "'+ge+'" is invalid for option "size"')}function M(ge){return y(ge),g(ge<0?0:0|k(ge))}function h(ge){for(var we=ge.length<0?0:0|k(ge.length),Ce=g(we),ze=0;ze<we;ze+=1)Ce[ze]=255&ge[ze];return Ce}function E(ge,we,Ce){if(we<0||ge.byteLength<we)throw new RangeError('"offset" is outside of buffer bounds');if(ge.byteLength<we+(Ce||0))throw new RangeError('"length" is outside of buffer bounds');var ze;return ze=we===void 0&&Ce===void 0?new Uint8Array(ge):Ce===void 0?new Uint8Array(ge,we):new Uint8Array(ge,we,Ce),Object.setPrototypeOf(ze,m.prototype),ze}function k(ge){if(ge>=p)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+p.toString(16)+" bytes");return 0|ge}function D(ge,we){if(m.isBuffer(ge))return ge.length;if(ArrayBuffer.isView(ge)||ke(ge,ArrayBuffer))return ge.byteLength;if(typeof ge!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+l(ge));var Ce=ge.length,ze=arguments.length>2&&arguments[2]===!0;if(!ze&&Ce===0)return 0;for(var Pe=!1;;)switch(we){case"ascii":case"latin1":case"binary":return Ce;case"utf8":case"utf-8":return ae(ge).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*Ce;case"hex":return Ce>>>1;case"base64":return pe(ge).length;default:if(Pe)return ze?-1:ae(ge).length;we=(""+we).toLowerCase(),Pe=!0}}function P(ge,we,Ce){var ze=!1;if((we===void 0||we<0)&&(we=0),we>this.length||((Ce===void 0||Ce>this.length)&&(Ce=this.length),Ce<=0)||(Ce>>>=0)<=(we>>>=0))return"";for(ge||(ge="utf8");;)switch(ge){case"hex":return Q(this,we,Ce);case"utf8":case"utf-8":return U(this,we,Ce);case"ascii":return ee(this,we,Ce);case"latin1":case"binary":return J(this,we,Ce);case"base64":return H(this,we,Ce);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ne(this,we,Ce);default:if(ze)throw new TypeError("Unknown encoding: "+ge);ge=(ge+"").toLowerCase(),ze=!0}}function L(ge,we,Ce){var ze=ge[we];ge[we]=ge[Ce],ge[Ce]=ze}function O(ge,we,Ce,ze,Pe){if(ge.length===0)return-1;if(typeof Ce=="string"?(ze=Ce,Ce=0):Ce>2147483647?Ce=2147483647:Ce<-2147483648&&(Ce=-2147483648),Ee(Ce=+Ce)&&(Ce=Pe?0:ge.length-1),Ce<0&&(Ce=ge.length+Ce),Ce>=ge.length){if(Pe)return-1;Ce=ge.length-1}else if(Ce<0){if(!Pe)return-1;Ce=0}if(typeof we=="string"&&(we=m.from(we,ze)),m.isBuffer(we))return we.length===0?-1:N(ge,we,Ce,ze,Pe);if(typeof we=="number")return we&=255,typeof Uint8Array.prototype.indexOf=="function"?Pe?Uint8Array.prototype.indexOf.call(ge,we,Ce):Uint8Array.prototype.lastIndexOf.call(ge,we,Ce):N(ge,[we],Ce,ze,Pe);throw new TypeError("val must be string, number or Buffer")}function N(ge,we,Ce,ze,Pe){var Ue,Ge=1,Xe=ge.length,st=we.length;if(ze!==void 0&&((ze=String(ze).toLowerCase())==="ucs2"||ze==="ucs-2"||ze==="utf16le"||ze==="utf-16le")){if(ge.length<2||we.length<2)return-1;Ge=2,Xe/=2,st/=2,Ce/=2}function at(rt,tt){return Ge===1?rt[tt]:rt.readUInt16BE(tt*Ge)}if(Pe){var vt=-1;for(Ue=Ce;Ue<Xe;Ue++)if(at(ge,Ue)===at(we,vt===-1?0:Ue-vt)){if(vt===-1&&(vt=Ue),Ue-vt+1===st)return vt*Ge}else vt!==-1&&(Ue-=Ue-vt),vt=-1}else for(Ce+st>Xe&&(Ce=Xe-st),Ue=Ce;Ue>=0;Ue--){for(var xt=!0,gt=0;gt<st;gt++)if(at(ge,Ue+gt)!==at(we,gt)){xt=!1;break}if(xt)return Ue}return-1}function V(ge,we,Ce,ze){Ce=Number(Ce)||0;var Pe=ge.length-Ce;ze?(ze=Number(ze))>Pe&&(ze=Pe):ze=Pe;var Ue,Ge=we.length;for(ze>Ge/2&&(ze=Ge/2),Ue=0;Ue<ze;++Ue){var Xe=parseInt(we.substr(2*Ue,2),16);if(Ee(Xe))return Ue;ge[Ce+Ue]=Xe}return Ue}function F(ge,we,Ce,ze){return De(ae(we,ge.length-Ce),ge,Ce,ze)}function j(ge,we,Ce,ze){return De(function(Pe){for(var Ue=[],Ge=0;Ge<Pe.length;++Ge)Ue.push(255&Pe.charCodeAt(Ge));return Ue}(we),ge,Ce,ze)}function Z(ge,we,Ce,ze){return De(pe(we),ge,Ce,ze)}function z(ge,we,Ce,ze){return De(function(Pe,Ue){for(var Ge,Xe,st,at=[],vt=0;vt<Pe.length&&!((Ue-=2)<0);++vt)Xe=(Ge=Pe.charCodeAt(vt))>>8,st=Ge%256,at.push(st),at.push(Xe);return at}(we,ge.length-Ce),ge,Ce,ze)}function H(ge,we,Ce){return we===0&&Ce===ge.length?d.fromByteArray(ge):d.fromByteArray(ge.slice(we,Ce))}function U(ge,we,Ce){Ce=Math.min(ge.length,Ce);for(var ze=[],Pe=we;Pe<Ce;){var Ue=ge[Pe],Ge=null,Xe=Ue>239?4:Ue>223?3:Ue>191?2:1;if(Pe+Xe<=Ce){var st=void 0,at=void 0,vt=void 0,xt=void 0;switch(Xe){case 1:Ue<128&&(Ge=Ue);break;case 2:(192&(st=ge[Pe+1]))==128&&(xt=(31&Ue)<<6|63&st)>127&&(Ge=xt);break;case 3:st=ge[Pe+1],at=ge[Pe+2],(192&st)==128&&(192&at)==128&&(xt=(15&Ue)<<12|(63&st)<<6|63&at)>2047&&(xt<55296||xt>57343)&&(Ge=xt);break;case 4:st=ge[Pe+1],at=ge[Pe+2],vt=ge[Pe+3],(192&st)==128&&(192&at)==128&&(192&vt)==128&&(xt=(15&Ue)<<18|(63&st)<<12|(63&at)<<6|63&vt)>65535&&xt<1114112&&(Ge=xt)}}Ge===null?(Ge=65533,Xe=1):Ge>65535&&(Ge-=65536,ze.push(Ge>>>10&1023|55296),Ge=56320|1023&Ge),ze.push(Ge),Pe+=Xe}return function(gt){var rt=gt.length;if(rt<=re)return String.fromCharCode.apply(String,gt);for(var tt="",Mt=0;Mt<rt;)tt+=String.fromCharCode.apply(String,gt.slice(Mt,Mt+=re));return tt}(ze)}m.TYPED_ARRAY_SUPPORT=function(){try{var ge=new Uint8Array(1),we={foo:function(){return 42}};return Object.setPrototypeOf(we,Uint8Array.prototype),Object.setPrototypeOf(ge,we),ge.foo()===42}catch{return!1}}(),m.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.buffer}}),Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.byteOffset}}),m.poolSize=8192,m.from=function(ge,we,Ce){return b(ge,we,Ce)},Object.setPrototypeOf(m.prototype,Uint8Array.prototype),Object.setPrototypeOf(m,Uint8Array),m.alloc=function(ge,we,Ce){return function(ze,Pe,Ue){return y(ze),ze<=0?g(ze):Pe!==void 0?typeof Ue=="string"?g(ze).fill(Pe,Ue):g(ze).fill(Pe):g(ze)}(ge,we,Ce)},m.allocUnsafe=function(ge){return M(ge)},m.allocUnsafeSlow=function(ge){return M(ge)},m.isBuffer=function(ge){return ge!=null&&ge._isBuffer===!0&&ge!==m.prototype},m.compare=function(ge,we){if(ke(ge,Uint8Array)&&(ge=m.from(ge,ge.offset,ge.byteLength)),ke(we,Uint8Array)&&(we=m.from(we,we.offset,we.byteLength)),!m.isBuffer(ge)||!m.isBuffer(we))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ge===we)return 0;for(var Ce=ge.length,ze=we.length,Pe=0,Ue=Math.min(Ce,ze);Pe<Ue;++Pe)if(ge[Pe]!==we[Pe]){Ce=ge[Pe],ze=we[Pe];break}return Ce<ze?-1:ze<Ce?1:0},m.isEncoding=function(ge){switch(String(ge).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},m.concat=function(ge,we){if(!Array.isArray(ge))throw new TypeError('"list" argument must be an Array of Buffers');if(ge.length===0)return m.alloc(0);var Ce;if(we===void 0)for(we=0,Ce=0;Ce<ge.length;++Ce)we+=ge[Ce].length;var ze=m.allocUnsafe(we),Pe=0;for(Ce=0;Ce<ge.length;++Ce){var Ue=ge[Ce];if(ke(Ue,Uint8Array))Pe+Ue.length>ze.length?(m.isBuffer(Ue)||(Ue=m.from(Ue)),Ue.copy(ze,Pe)):Uint8Array.prototype.set.call(ze,Ue,Pe);else{if(!m.isBuffer(Ue))throw new TypeError('"list" argument must be an Array of Buffers');Ue.copy(ze,Pe)}Pe+=Ue.length}return ze},m.byteLength=D,m.prototype._isBuffer=!0,m.prototype.swap16=function(){var ge=this.length;if(ge%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var we=0;we<ge;we+=2)L(this,we,we+1);return this},m.prototype.swap32=function(){var ge=this.length;if(ge%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var we=0;we<ge;we+=4)L(this,we,we+3),L(this,we+1,we+2);return this},m.prototype.swap64=function(){var ge=this.length;if(ge%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var we=0;we<ge;we+=8)L(this,we,we+7),L(this,we+1,we+6),L(this,we+2,we+5),L(this,we+3,we+4);return this},m.prototype.toString=function(){var ge=this.length;return ge===0?"":arguments.length===0?U(this,0,ge):P.apply(this,arguments)},m.prototype.toLocaleString=m.prototype.toString,m.prototype.equals=function(ge){if(!m.isBuffer(ge))throw new TypeError("Argument must be a Buffer");return this===ge||m.compare(this,ge)===0},m.prototype.inspect=function(){var ge="",we=s.IS;return ge=this.toString("hex",0,we).replace(/(.{2})/g,"$1 ").trim(),this.length>we&&(ge+=" ... "),"<Buffer "+ge+">"},_&&(m.prototype[_]=m.prototype.inspect),m.prototype.compare=function(ge,we,Ce,ze,Pe){if(ke(ge,Uint8Array)&&(ge=m.from(ge,ge.offset,ge.byteLength)),!m.isBuffer(ge))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+l(ge));if(we===void 0&&(we=0),Ce===void 0&&(Ce=ge?ge.length:0),ze===void 0&&(ze=0),Pe===void 0&&(Pe=this.length),we<0||Ce>ge.length||ze<0||Pe>this.length)throw new RangeError("out of range index");if(ze>=Pe&&we>=Ce)return 0;if(ze>=Pe)return-1;if(we>=Ce)return 1;if(this===ge)return 0;for(var Ue=(Pe>>>=0)-(ze>>>=0),Ge=(Ce>>>=0)-(we>>>=0),Xe=Math.min(Ue,Ge),st=this.slice(ze,Pe),at=ge.slice(we,Ce),vt=0;vt<Xe;++vt)if(st[vt]!==at[vt]){Ue=st[vt],Ge=at[vt];break}return Ue<Ge?-1:Ge<Ue?1:0},m.prototype.includes=function(ge,we,Ce){return this.indexOf(ge,we,Ce)!==-1},m.prototype.indexOf=function(ge,we,Ce){return O(this,ge,we,Ce,!0)},m.prototype.lastIndexOf=function(ge,we,Ce){return O(this,ge,we,Ce,!1)},m.prototype.write=function(ge,we,Ce,ze){if(we===void 0)ze="utf8",Ce=this.length,we=0;else if(Ce===void 0&&typeof we=="string")ze=we,Ce=this.length,we=0;else{if(!isFinite(we))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");we>>>=0,isFinite(Ce)?(Ce>>>=0,ze===void 0&&(ze="utf8")):(ze=Ce,Ce=void 0)}var Pe=this.length-we;if((Ce===void 0||Ce>Pe)&&(Ce=Pe),ge.length>0&&(Ce<0||we<0)||we>this.length)throw new RangeError("Attempt to write outside buffer bounds");ze||(ze="utf8");for(var Ue=!1;;)switch(ze){case"hex":return V(this,ge,we,Ce);case"utf8":case"utf-8":return F(this,ge,we,Ce);case"ascii":case"latin1":case"binary":return j(this,ge,we,Ce);case"base64":return Z(this,ge,we,Ce);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,ge,we,Ce);default:if(Ue)throw new TypeError("Unknown encoding: "+ze);ze=(""+ze).toLowerCase(),Ue=!0}},m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var re=4096;function ee(ge,we,Ce){var ze="";Ce=Math.min(ge.length,Ce);for(var Pe=we;Pe<Ce;++Pe)ze+=String.fromCharCode(127&ge[Pe]);return ze}function J(ge,we,Ce){var ze="";Ce=Math.min(ge.length,Ce);for(var Pe=we;Pe<Ce;++Pe)ze+=String.fromCharCode(ge[Pe]);return ze}function Q(ge,we,Ce){var ze=ge.length;(!we||we<0)&&(we=0),(!Ce||Ce<0||Ce>ze)&&(Ce=ze);for(var Pe="",Ue=we;Ue<Ce;++Ue)Pe+=Ie[ge[Ue]];return Pe}function ne(ge,we,Ce){for(var ze=ge.slice(we,Ce),Pe="",Ue=0;Ue<ze.length-1;Ue+=2)Pe+=String.fromCharCode(ze[Ue]+256*ze[Ue+1]);return Pe}function K(ge,we,Ce){if(ge%1!=0||ge<0)throw new RangeError("offset is not uint");if(ge+we>Ce)throw new RangeError("Trying to access beyond buffer length")}function oe(ge,we,Ce,ze,Pe,Ue){if(!m.isBuffer(ge))throw new TypeError('"buffer" argument must be a Buffer instance');if(we>Pe||we<Ue)throw new RangeError('"value" argument is out of bounds');if(Ce+ze>ge.length)throw new RangeError("Index out of range")}function le(ge,we,Ce,ze,Pe){me(we,ze,Pe,ge,Ce,7);var Ue=Number(we&BigInt(4294967295));ge[Ce++]=Ue,Ue>>=8,ge[Ce++]=Ue,Ue>>=8,ge[Ce++]=Ue,Ue>>=8,ge[Ce++]=Ue;var Ge=Number(we>>BigInt(32)&BigInt(4294967295));return ge[Ce++]=Ge,Ge>>=8,ge[Ce++]=Ge,Ge>>=8,ge[Ce++]=Ge,Ge>>=8,ge[Ce++]=Ge,Ce}function se(ge,we,Ce,ze,Pe){me(we,ze,Pe,ge,Ce,7);var Ue=Number(we&BigInt(4294967295));ge[Ce+7]=Ue,Ue>>=8,ge[Ce+6]=Ue,Ue>>=8,ge[Ce+5]=Ue,Ue>>=8,ge[Ce+4]=Ue;var Ge=Number(we>>BigInt(32)&BigInt(4294967295));return ge[Ce+3]=Ge,Ge>>=8,ge[Ce+2]=Ge,Ge>>=8,ge[Ce+1]=Ge,Ge>>=8,ge[Ce]=Ge,Ce+8}function de(ge,we,Ce,ze,Pe,Ue){if(Ce+ze>ge.length)throw new RangeError("Index out of range");if(Ce<0)throw new RangeError("Index out of range")}function be(ge,we,Ce,ze,Pe){return we=+we,Ce>>>=0,Pe||de(ge,0,Ce,4),c.write(ge,we,Ce,ze,23,4),Ce+4}function _e(ge,we,Ce,ze,Pe){return we=+we,Ce>>>=0,Pe||de(ge,0,Ce,8),c.write(ge,we,Ce,ze,52,8),Ce+8}m.prototype.slice=function(ge,we){var Ce=this.length;(ge=~~ge)<0?(ge+=Ce)<0&&(ge=0):ge>Ce&&(ge=Ce),(we=we===void 0?Ce:~~we)<0?(we+=Ce)<0&&(we=0):we>Ce&&(we=Ce),we<ge&&(we=ge);var ze=this.subarray(ge,we);return Object.setPrototypeOf(ze,m.prototype),ze},m.prototype.readUintLE=m.prototype.readUIntLE=function(ge,we,Ce){ge>>>=0,we>>>=0,Ce||K(ge,we,this.length);for(var ze=this[ge],Pe=1,Ue=0;++Ue<we&&(Pe*=256);)ze+=this[ge+Ue]*Pe;return ze},m.prototype.readUintBE=m.prototype.readUIntBE=function(ge,we,Ce){ge>>>=0,we>>>=0,Ce||K(ge,we,this.length);for(var ze=this[ge+--we],Pe=1;we>0&&(Pe*=256);)ze+=this[ge+--we]*Pe;return ze},m.prototype.readUint8=m.prototype.readUInt8=function(ge,we){return ge>>>=0,we||K(ge,1,this.length),this[ge]},m.prototype.readUint16LE=m.prototype.readUInt16LE=function(ge,we){return ge>>>=0,we||K(ge,2,this.length),this[ge]|this[ge+1]<<8},m.prototype.readUint16BE=m.prototype.readUInt16BE=function(ge,we){return ge>>>=0,we||K(ge,2,this.length),this[ge]<<8|this[ge+1]},m.prototype.readUint32LE=m.prototype.readUInt32LE=function(ge,we){return ge>>>=0,we||K(ge,4,this.length),(this[ge]|this[ge+1]<<8|this[ge+2]<<16)+16777216*this[ge+3]},m.prototype.readUint32BE=m.prototype.readUInt32BE=function(ge,we){return ge>>>=0,we||K(ge,4,this.length),16777216*this[ge]+(this[ge+1]<<16|this[ge+2]<<8|this[ge+3])},m.prototype.readBigUInt64LE=Re(function(ge){Me(ge>>>=0,"offset");var we=this[ge],Ce=this[ge+7];we!==void 0&&Ce!==void 0||Ae(ge,this.length-8);var ze=we+this[++ge]*Math.pow(2,8)+this[++ge]*Math.pow(2,16)+this[++ge]*Math.pow(2,24),Pe=this[++ge]+this[++ge]*Math.pow(2,8)+this[++ge]*Math.pow(2,16)+Ce*Math.pow(2,24);return BigInt(ze)+(BigInt(Pe)<<BigInt(32))}),m.prototype.readBigUInt64BE=Re(function(ge){Me(ge>>>=0,"offset");var we=this[ge],Ce=this[ge+7];we!==void 0&&Ce!==void 0||Ae(ge,this.length-8);var ze=we*Math.pow(2,24)+this[++ge]*Math.pow(2,16)+this[++ge]*Math.pow(2,8)+this[++ge],Pe=this[++ge]*Math.pow(2,24)+this[++ge]*Math.pow(2,16)+this[++ge]*Math.pow(2,8)+Ce;return(BigInt(ze)<<BigInt(32))+BigInt(Pe)}),m.prototype.readIntLE=function(ge,we,Ce){ge>>>=0,we>>>=0,Ce||K(ge,we,this.length);for(var ze=this[ge],Pe=1,Ue=0;++Ue<we&&(Pe*=256);)ze+=this[ge+Ue]*Pe;return ze>=(Pe*=128)&&(ze-=Math.pow(2,8*we)),ze},m.prototype.readIntBE=function(ge,we,Ce){ge>>>=0,we>>>=0,Ce||K(ge,we,this.length);for(var ze=we,Pe=1,Ue=this[ge+--ze];ze>0&&(Pe*=256);)Ue+=this[ge+--ze]*Pe;return Ue>=(Pe*=128)&&(Ue-=Math.pow(2,8*we)),Ue},m.prototype.readInt8=function(ge,we){return ge>>>=0,we||K(ge,1,this.length),128&this[ge]?-1*(255-this[ge]+1):this[ge]},m.prototype.readInt16LE=function(ge,we){ge>>>=0,we||K(ge,2,this.length);var Ce=this[ge]|this[ge+1]<<8;return 32768&Ce?4294901760|Ce:Ce},m.prototype.readInt16BE=function(ge,we){ge>>>=0,we||K(ge,2,this.length);var Ce=this[ge+1]|this[ge]<<8;return 32768&Ce?4294901760|Ce:Ce},m.prototype.readInt32LE=function(ge,we){return ge>>>=0,we||K(ge,4,this.length),this[ge]|this[ge+1]<<8|this[ge+2]<<16|this[ge+3]<<24},m.prototype.readInt32BE=function(ge,we){return ge>>>=0,we||K(ge,4,this.length),this[ge]<<24|this[ge+1]<<16|this[ge+2]<<8|this[ge+3]},m.prototype.readBigInt64LE=Re(function(ge){Me(ge>>>=0,"offset");var we=this[ge],Ce=this[ge+7];we!==void 0&&Ce!==void 0||Ae(ge,this.length-8);var ze=this[ge+4]+this[ge+5]*Math.pow(2,8)+this[ge+6]*Math.pow(2,16)+(Ce<<24);return(BigInt(ze)<<BigInt(32))+BigInt(we+this[++ge]*Math.pow(2,8)+this[++ge]*Math.pow(2,16)+this[++ge]*Math.pow(2,24))}),m.prototype.readBigInt64BE=Re(function(ge){Me(ge>>>=0,"offset");var we=this[ge],Ce=this[ge+7];we!==void 0&&Ce!==void 0||Ae(ge,this.length-8);var ze=(we<<24)+this[++ge]*Math.pow(2,16)+this[++ge]*Math.pow(2,8)+this[++ge];return(BigInt(ze)<<BigInt(32))+BigInt(this[++ge]*Math.pow(2,24)+this[++ge]*Math.pow(2,16)+this[++ge]*Math.pow(2,8)+Ce)}),m.prototype.readFloatLE=function(ge,we){return ge>>>=0,we||K(ge,4,this.length),c.read(this,ge,!0,23,4)},m.prototype.readFloatBE=function(ge,we){return ge>>>=0,we||K(ge,4,this.length),c.read(this,ge,!1,23,4)},m.prototype.readDoubleLE=function(ge,we){return ge>>>=0,we||K(ge,8,this.length),c.read(this,ge,!0,52,8)},m.prototype.readDoubleBE=function(ge,we){return ge>>>=0,we||K(ge,8,this.length),c.read(this,ge,!1,52,8)},m.prototype.writeUintLE=m.prototype.writeUIntLE=function(ge,we,Ce,ze){ge=+ge,we>>>=0,Ce>>>=0,ze||oe(this,ge,we,Ce,Math.pow(2,8*Ce)-1,0);var Pe=1,Ue=0;for(this[we]=255&ge;++Ue<Ce&&(Pe*=256);)this[we+Ue]=ge/Pe&255;return we+Ce},m.prototype.writeUintBE=m.prototype.writeUIntBE=function(ge,we,Ce,ze){ge=+ge,we>>>=0,Ce>>>=0,ze||oe(this,ge,we,Ce,Math.pow(2,8*Ce)-1,0);var Pe=Ce-1,Ue=1;for(this[we+Pe]=255&ge;--Pe>=0&&(Ue*=256);)this[we+Pe]=ge/Ue&255;return we+Ce},m.prototype.writeUint8=m.prototype.writeUInt8=function(ge,we,Ce){return ge=+ge,we>>>=0,Ce||oe(this,ge,we,1,255,0),this[we]=255&ge,we+1},m.prototype.writeUint16LE=m.prototype.writeUInt16LE=function(ge,we,Ce){return ge=+ge,we>>>=0,Ce||oe(this,ge,we,2,65535,0),this[we]=255&ge,this[we+1]=ge>>>8,we+2},m.prototype.writeUint16BE=m.prototype.writeUInt16BE=function(ge,we,Ce){return ge=+ge,we>>>=0,Ce||oe(this,ge,we,2,65535,0),this[we]=ge>>>8,this[we+1]=255&ge,we+2},m.prototype.writeUint32LE=m.prototype.writeUInt32LE=function(ge,we,Ce){return ge=+ge,we>>>=0,Ce||oe(this,ge,we,4,4294967295,0),this[we+3]=ge>>>24,this[we+2]=ge>>>16,this[we+1]=ge>>>8,this[we]=255&ge,we+4},m.prototype.writeUint32BE=m.prototype.writeUInt32BE=function(ge,we,Ce){return ge=+ge,we>>>=0,Ce||oe(this,ge,we,4,4294967295,0),this[we]=ge>>>24,this[we+1]=ge>>>16,this[we+2]=ge>>>8,this[we+3]=255&ge,we+4},m.prototype.writeBigUInt64LE=Re(function(ge){return le(this,ge,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),m.prototype.writeBigUInt64BE=Re(function(ge){return se(this,ge,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),m.prototype.writeIntLE=function(ge,we,Ce,ze){if(ge=+ge,we>>>=0,!ze){var Pe=Math.pow(2,8*Ce-1);oe(this,ge,we,Ce,Pe-1,-Pe)}var Ue=0,Ge=1,Xe=0;for(this[we]=255&ge;++Ue<Ce&&(Ge*=256);)ge<0&&Xe===0&&this[we+Ue-1]!==0&&(Xe=1),this[we+Ue]=(ge/Ge>>0)-Xe&255;return we+Ce},m.prototype.writeIntBE=function(ge,we,Ce,ze){if(ge=+ge,we>>>=0,!ze){var Pe=Math.pow(2,8*Ce-1);oe(this,ge,we,Ce,Pe-1,-Pe)}var Ue=Ce-1,Ge=1,Xe=0;for(this[we+Ue]=255&ge;--Ue>=0&&(Ge*=256);)ge<0&&Xe===0&&this[we+Ue+1]!==0&&(Xe=1),this[we+Ue]=(ge/Ge>>0)-Xe&255;return we+Ce},m.prototype.writeInt8=function(ge,we,Ce){return ge=+ge,we>>>=0,Ce||oe(this,ge,we,1,127,-128),ge<0&&(ge=255+ge+1),this[we]=255&ge,we+1},m.prototype.writeInt16LE=function(ge,we,Ce){return ge=+ge,we>>>=0,Ce||oe(this,ge,we,2,32767,-32768),this[we]=255&ge,this[we+1]=ge>>>8,we+2},m.prototype.writeInt16BE=function(ge,we,Ce){return ge=+ge,we>>>=0,Ce||oe(this,ge,we,2,32767,-32768),this[we]=ge>>>8,this[we+1]=255&ge,we+2},m.prototype.writeInt32LE=function(ge,we,Ce){return ge=+ge,we>>>=0,Ce||oe(this,ge,we,4,2147483647,-2147483648),this[we]=255&ge,this[we+1]=ge>>>8,this[we+2]=ge>>>16,this[we+3]=ge>>>24,we+4},m.prototype.writeInt32BE=function(ge,we,Ce){return ge=+ge,we>>>=0,Ce||oe(this,ge,we,4,2147483647,-2147483648),ge<0&&(ge=4294967295+ge+1),this[we]=ge>>>24,this[we+1]=ge>>>16,this[we+2]=ge>>>8,this[we+3]=255&ge,we+4},m.prototype.writeBigInt64LE=Re(function(ge){return le(this,ge,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),m.prototype.writeBigInt64BE=Re(function(ge){return se(this,ge,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),m.prototype.writeFloatLE=function(ge,we,Ce){return be(this,ge,we,!0,Ce)},m.prototype.writeFloatBE=function(ge,we,Ce){return be(this,ge,we,!1,Ce)},m.prototype.writeDoubleLE=function(ge,we,Ce){return _e(this,ge,we,!0,Ce)},m.prototype.writeDoubleBE=function(ge,we,Ce){return _e(this,ge,we,!1,Ce)},m.prototype.copy=function(ge,we,Ce,ze){if(!m.isBuffer(ge))throw new TypeError("argument should be a Buffer");if(Ce||(Ce=0),ze||ze===0||(ze=this.length),we>=ge.length&&(we=ge.length),we||(we=0),ze>0&&ze<Ce&&(ze=Ce),ze===Ce||ge.length===0||this.length===0)return 0;if(we<0)throw new RangeError("targetStart out of bounds");if(Ce<0||Ce>=this.length)throw new RangeError("Index out of range");if(ze<0)throw new RangeError("sourceEnd out of bounds");ze>this.length&&(ze=this.length),ge.length-we<ze-Ce&&(ze=ge.length-we+Ce);var Pe=ze-Ce;return this===ge&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(we,Ce,ze):Uint8Array.prototype.set.call(ge,this.subarray(Ce,ze),we),Pe},m.prototype.fill=function(ge,we,Ce,ze){if(typeof ge=="string"){if(typeof we=="string"?(ze=we,we=0,Ce=this.length):typeof Ce=="string"&&(ze=Ce,Ce=this.length),ze!==void 0&&typeof ze!="string")throw new TypeError("encoding must be a string");if(typeof ze=="string"&&!m.isEncoding(ze))throw new TypeError("Unknown encoding: "+ze);if(ge.length===1){var Pe=ge.charCodeAt(0);(ze==="utf8"&&Pe<128||ze==="latin1")&&(ge=Pe)}}else typeof ge=="number"?ge&=255:typeof ge=="boolean"&&(ge=Number(ge));if(we<0||this.length<we||this.length<Ce)throw new RangeError("Out of range index");if(Ce<=we)return this;var Ue;if(we>>>=0,Ce=Ce===void 0?this.length:Ce>>>0,ge||(ge=0),typeof ge=="number")for(Ue=we;Ue<Ce;++Ue)this[Ue]=ge;else{var Ge=m.isBuffer(ge)?ge:m.from(ge,ze),Xe=Ge.length;if(Xe===0)throw new TypeError('The value "'+ge+'" is invalid for argument "value"');for(Ue=0;Ue<Ce-we;++Ue)this[Ue+we]=Ge[Ue%Xe]}return this};var xe={};function ve(ge,we,Ce){xe[ge]=function(ze){function Pe(){var Xe,st,at,vt;return function(xt,gt){if(!(xt instanceof gt))throw new TypeError("Cannot call a class as a function")}(this,Pe),st=this,at=a(at=Pe),Xe=function(xt,gt){if(gt&&(l(gt)==="object"||typeof gt=="function"))return gt;if(gt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(rt){if(rt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return rt}(xt)}(st,i()?Reflect.construct(at,vt||[],a(st).constructor):at.apply(st,vt)),Object.defineProperty(Xe,"message",{value:we.apply(Xe,arguments),writable:!0,configurable:!0}),Xe.name="".concat(Xe.name," [").concat(ge,"]"),Xe.stack,delete Xe.name,Xe}return function(Xe,st){if(typeof st!="function"&&st!==null)throw new TypeError("Super expression must either be null or a function");Xe.prototype=Object.create(st&&st.prototype,{constructor:{value:Xe,writable:!0,configurable:!0}}),Object.defineProperty(Xe,"prototype",{writable:!1}),st&&u(Xe,st)}(Pe,ze),Ue=Pe,(Ge=[{key:"code",get:function(){return ge},set:function(Xe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Xe,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(ge,"]: ").concat(this.message)}}])&&o(Ue.prototype,Ge),Object.defineProperty(Ue,"prototype",{writable:!1}),Ue;var Ue,Ge}(Ce)}function ye(ge){for(var we="",Ce=ge.length,ze=ge[0]==="-"?1:0;Ce>=ze+4;Ce-=3)we="_".concat(ge.slice(Ce-3,Ce)).concat(we);return"".concat(ge.slice(0,Ce)).concat(we)}function me(ge,we,Ce,ze,Pe,Ue){if(ge>Ce||ge<we){var Ge,Xe=typeof we=="bigint"?"n":"";throw Ge=Ue>3?we===0||we===BigInt(0)?">= 0".concat(Xe," and < 2").concat(Xe," ** ").concat(8*(Ue+1)).concat(Xe):">= -(2".concat(Xe," ** ").concat(8*(Ue+1)-1).concat(Xe,") and < 2 ** ")+"".concat(8*(Ue+1)-1).concat(Xe):">= ".concat(we).concat(Xe," and <= ").concat(Ce).concat(Xe),new xe.ERR_OUT_OF_RANGE("value",Ge,ge)}(function(st,at,vt){Me(at,"offset"),st[at]!==void 0&&st[at+vt]!==void 0||Ae(at,st.length-(vt+1))})(ze,Pe,Ue)}function Me(ge,we){if(typeof ge!="number")throw new xe.ERR_INVALID_ARG_TYPE(we,"number",ge)}function Ae(ge,we,Ce){throw Math.floor(ge)!==ge?(Me(ge,Ce),new xe.ERR_OUT_OF_RANGE(Ce||"offset","an integer",ge)):we<0?new xe.ERR_BUFFER_OUT_OF_BOUNDS:new xe.ERR_OUT_OF_RANGE(Ce||"offset",">= ".concat(Ce?1:0," and <= ").concat(we),ge)}ve("ERR_BUFFER_OUT_OF_BOUNDS",function(ge){return ge?"".concat(ge," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),ve("ERR_INVALID_ARG_TYPE",function(ge,we){return'The "'.concat(ge,'" argument must be of type number. Received type ').concat(l(we))},TypeError),ve("ERR_OUT_OF_RANGE",function(ge,we,Ce){var ze='The value of "'.concat(ge,'" is out of range.'),Pe=Ce;return Number.isInteger(Ce)&&Math.abs(Ce)>Math.pow(2,32)?Pe=ye(String(Ce)):typeof Ce=="bigint"&&(Pe=String(Ce),(Ce>Math.pow(BigInt(2),BigInt(32))||Ce<-Math.pow(BigInt(2),BigInt(32)))&&(Pe=ye(Pe)),Pe+="n"),ze+" It must be ".concat(we,". Received ").concat(Pe)},RangeError);var ce=/[^+/0-9A-Za-z-_]/g;function ae(ge,we){var Ce;we=we||1/0;for(var ze=ge.length,Pe=null,Ue=[],Ge=0;Ge<ze;++Ge){if((Ce=ge.charCodeAt(Ge))>55295&&Ce<57344){if(!Pe){if(Ce>56319){(we-=3)>-1&&Ue.push(239,191,189);continue}if(Ge+1===ze){(we-=3)>-1&&Ue.push(239,191,189);continue}Pe=Ce;continue}if(Ce<56320){(we-=3)>-1&&Ue.push(239,191,189),Pe=Ce;continue}Ce=65536+(Pe-55296<<10|Ce-56320)}else Pe&&(we-=3)>-1&&Ue.push(239,191,189);if(Pe=null,Ce<128){if((we-=1)<0)break;Ue.push(Ce)}else if(Ce<2048){if((we-=2)<0)break;Ue.push(Ce>>6|192,63&Ce|128)}else if(Ce<65536){if((we-=3)<0)break;Ue.push(Ce>>12|224,Ce>>6&63|128,63&Ce|128)}else{if(!(Ce<1114112))throw new Error("Invalid code point");if((we-=4)<0)break;Ue.push(Ce>>18|240,Ce>>12&63|128,Ce>>6&63|128,63&Ce|128)}}return Ue}function pe(ge){return d.toByteArray(function(we){if((we=(we=we.split("=")[0]).trim().replace(ce,"")).length<2)return"";for(;we.length%4!=0;)we+="=";return we}(ge))}function De(ge,we,Ce,ze){var Pe;for(Pe=0;Pe<ze&&!(Pe+Ce>=we.length||Pe>=ge.length);++Pe)we[Pe+Ce]=ge[Pe];return Pe}function ke(ge,we){return ge instanceof we||ge!=null&&ge.constructor!=null&&ge.constructor.name!=null&&ge.constructor.name===we.name}function Ee(ge){return ge!=ge}var Ie=function(){for(var ge="0123456789abcdef",we=new Array(256),Ce=0;Ce<16;++Ce)for(var ze=16*Ce,Pe=0;Pe<16;++Pe)we[ze+Pe]=ge[Ce]+ge[Pe];return we}();function Re(ge){return typeof BigInt>"u"?Ne:ge}function Ne(){throw new Error("BigInt not supported")}},9216:function(f){"use strict";f.exports=r,f.exports.isMobile=r,f.exports.default=r;var s=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,t=/CrOS/,o=/android|ipad|playbook|silk/i;function r(i){i||(i={});var a=i.ua;if(a||typeof navigator>"u"||(a=navigator.userAgent),a&&a.headers&&typeof a.headers["user-agent"]=="string"&&(a=a.headers["user-agent"]),typeof a!="string")return!1;var u=s.test(a)&&!t.test(a)||!!i.tablet&&o.test(a);return!u&&i.tablet&&i.featureDetect&&navigator&&navigator.maxTouchPoints>1&&a.indexOf("Macintosh")!==-1&&a.indexOf("Safari")!==-1&&(u=!0),u}},6296:function(f,s,t){"use strict";f.exports=function(l){var d=(l=l||{}).eye||[0,0,1],c=l.center||[0,0,0],_=l.up||[0,1,0],p=l.distanceLimits||[0,1/0],g=l.mode||"turntable",m=o(),b=r(),y=i();return m.setDistanceLimits(p[0],p[1]),m.lookAt(0,d,c,_),b.setDistanceLimits(p[0],p[1]),b.lookAt(0,d,c,_),y.setDistanceLimits(p[0],p[1]),y.lookAt(0,d,c,_),new a({turntable:m,orbit:b,matrix:y},g)};var o=t(7261),r=t(9977),i=t(4192);function a(l,d){this._controllerNames=Object.keys(l),this._controllerList=this._controllerNames.map(function(c){return l[c]}),this._mode=d,this._active=l[d],this._active||(this._mode="turntable",this._active=l.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var u=a.prototype;u.flush=function(l){for(var d=this._controllerList,c=0;c<d.length;++c)d[c].flush(l)},u.idle=function(l){for(var d=this._controllerList,c=0;c<d.length;++c)d[c].idle(l)},u.lookAt=function(l,d,c,_){for(var p=this._controllerList,g=0;g<p.length;++g)p[g].lookAt(l,d,c,_)},u.rotate=function(l,d,c,_){for(var p=this._controllerList,g=0;g<p.length;++g)p[g].rotate(l,d,c,_)},u.pan=function(l,d,c,_){for(var p=this._controllerList,g=0;g<p.length;++g)p[g].pan(l,d,c,_)},u.translate=function(l,d,c,_){for(var p=this._controllerList,g=0;g<p.length;++g)p[g].translate(l,d,c,_)},u.setMatrix=function(l,d){for(var c=this._controllerList,_=0;_<c.length;++_)c[_].setMatrix(l,d)},u.setDistanceLimits=function(l,d){for(var c=this._controllerList,_=0;_<c.length;++_)c[_].setDistanceLimits(l,d)},u.setDistance=function(l,d){for(var c=this._controllerList,_=0;_<c.length;++_)c[_].setDistance(l,d)},u.recalcMatrix=function(l){this._active.recalcMatrix(l)},u.getDistance=function(l){return this._active.getDistance(l)},u.getDistanceLimits=function(l){return this._active.getDistanceLimits(l)},u.lastT=function(){return this._active.lastT()},u.setMode=function(l){if(l!==this._mode){var d=this._controllerNames.indexOf(l);if(!(d<0)){var c=this._active,_=this._controllerList[d],p=Math.max(c.lastT(),_.lastT());c.recalcMatrix(p),_.setMatrix(p,c.computedMatrix),this._active=_,this._mode=l,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},u.getMode=function(){return this._mode}},7169:function(f,s,t){"use strict";var o=typeof WeakMap>"u"?t(1538):WeakMap,r=t(2762),i=t(8116),a=new o;f.exports=function(u){var l=a.get(u),d=l&&(l._triangleBuffer.handle||l._triangleBuffer.buffer);if(!d||!u.isBuffer(d)){var c=r(u,new Float32Array([-1,-1,-1,4,4,-1]));(l=i(u,[{buffer:c,type:u.FLOAT,size:2}]))._triangleBuffer=c,a.set(u,l)}l.bind(),u.drawArrays(u.TRIANGLES,0,3),l.unbind()}},1085:function(f,s,t){var o=t(1371);f.exports=function(r,i,a){i=typeof i=="number"?i:1,a=a||": ";var u=r.split(/\r?\n/),l=String(u.length+i-1).length;return u.map(function(d,c){var _=c+i,p=String(_).length;return o(_,l-p)+a+d}).join(`
`)}},3952:function(f,s,t){"use strict";f.exports=function(i){var a=i.length;if(a===0)return[];if(a===1)return[0];for(var u=i[0].length,l=[i[0]],d=[0],c=1;c<a;++c)if(l.push(i[c]),r(l,u)){if(d.push(c),d.length===u+1)return d}else l.pop();return d};var o=t(3250);function r(i,a){for(var u=new Array(a+1),l=0;l<i.length;++l)u[l]=i[l];for(l=0;l<=i.length;++l){for(var d=i.length;d<=a;++d){for(var c=new Array(a),_=0;_<a;++_)c[_]=Math.pow(d+1-l,_);u[d]=c}if(o.apply(void 0,u))return!0}return!1}},5995:function(f,s,t){"use strict";f.exports=function(i,a){return o(a).filter(function(u){for(var l=new Array(u.length),d=0;d<u.length;++d)l[d]=a[u[d]];return r(l)*i<1})};var o=t(7642),r=t(6037)},3502:function(f,s,t){f.exports=function(i,a){return r(o(i,a))};var o=t(5995),r=t(9127)},6468:function(f){f.exports=function(s){return atob(s)}},2642:function(f,s,t){"use strict";f.exports=function(i,a){for(var u=a.length,l=new Array(u+1),d=0;d<u;++d){for(var c=new Array(u+1),_=0;_<=u;++_)c[_]=i[_][d];l[d]=c}for(l[u]=new Array(u+1),d=0;d<=u;++d)l[u][d]=1;var p=new Array(u+1);for(d=0;d<u;++d)p[d]=a[d];p[u]=1;var g=o(l,p),m=r(g[u+1]);m===0&&(m=1);var b=new Array(u+1);for(d=0;d<=u;++d)b[d]=r(g[d])/m;return b};var o=t(727);function r(i){for(var a=0,u=0;u<i.length;++u)a+=i[u];return a}},7507:function(f,s){"use strict";s.byteLength=function(d){var c=u(d),_=c[0],p=c[1];return 3*(_+p)/4-p},s.toByteArray=function(d){var c,_,p=u(d),g=p[0],m=p[1],b=new r(function(h,E,k){return 3*(E+k)/4-k}(0,g,m)),y=0,M=m>0?g-4:g;for(_=0;_<M;_+=4)c=o[d.charCodeAt(_)]<<18|o[d.charCodeAt(_+1)]<<12|o[d.charCodeAt(_+2)]<<6|o[d.charCodeAt(_+3)],b[y++]=c>>16&255,b[y++]=c>>8&255,b[y++]=255&c;return m===2&&(c=o[d.charCodeAt(_)]<<2|o[d.charCodeAt(_+1)]>>4,b[y++]=255&c),m===1&&(c=o[d.charCodeAt(_)]<<10|o[d.charCodeAt(_+1)]<<4|o[d.charCodeAt(_+2)]>>2,b[y++]=c>>8&255,b[y++]=255&c),b},s.fromByteArray=function(d){for(var c,_=d.length,p=_%3,g=[],m=16383,b=0,y=_-p;b<y;b+=m)g.push(l(d,b,b+m>y?y:b+m));return p===1?(c=d[_-1],g.push(t[c>>2]+t[c<<4&63]+"==")):p===2&&(c=(d[_-2]<<8)+d[_-1],g.push(t[c>>10]+t[c>>4&63]+t[c<<2&63]+"=")),g.join("")};for(var t=[],o=[],r=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)t[a]=i[a],o[i.charCodeAt(a)]=a;function u(d){var c=d.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _=d.indexOf("=");return _===-1&&(_=c),[_,_===c?0:4-_%4]}function l(d,c,_){for(var p,g,m=[],b=c;b<_;b+=3)p=(d[b]<<16&16711680)+(d[b+1]<<8&65280)+(255&d[b+2]),m.push(t[(g=p)>>18&63]+t[g>>12&63]+t[g>>6&63]+t[63&g]);return m.join("")}o[45]=62,o[95]=63},3865:function(f,s,t){"use strict";var o=t(869);f.exports=function(r,i){return o(r[0].mul(i[1]).add(i[0].mul(r[1])),r[1].mul(i[1]))}},1318:function(f){"use strict";f.exports=function(s,t){return s[0].mul(t[1]).cmp(t[0].mul(s[1]))}},8697:function(f,s,t){"use strict";var o=t(869);f.exports=function(r,i){return o(r[0].mul(i[1]),r[1].mul(i[0]))}},7842:function(f,s,t){"use strict";var o=t(6330),r=t(1533),i=t(2651),a=t(4387),u=t(869),l=t(8697);f.exports=function d(c,_){if(o(c))return _?l(c,d(_)):[c[0].clone(),c[1].clone()];var p,g,m=0;if(r(c))p=c.clone();else if(typeof c=="string")p=a(c);else{if(c===0)return[i(0),i(1)];if(c===Math.floor(c))p=i(c);else{for(;c!==Math.floor(c);)c*=Math.pow(2,256),m-=256;p=i(c)}}if(o(_))p.mul(_[1]),g=_[0].clone();else if(r(_))g=_.clone();else if(typeof _=="string")g=a(_);else if(_)if(_===Math.floor(_))g=i(_);else{for(;_!==Math.floor(_);)_*=Math.pow(2,256),m+=256;g=i(_)}else g=i(1);return m>0?p=p.ushln(m):m<0&&(g=g.ushln(-m)),u(p,g)}},6330:function(f,s,t){"use strict";var o=t(1533);f.exports=function(r){return Array.isArray(r)&&r.length===2&&o(r[0])&&o(r[1])}},5716:function(f,s,t){"use strict";var o=t(6859);f.exports=function(r){return r.cmp(new o(0))}},1369:function(f,s,t){"use strict";var o=t(5716);f.exports=function(r){var i=r.length,a=r.words,u=0;if(i===1)u=a[0];else if(i===2)u=a[0]+67108864*a[1];else for(var l=0;l<i;l++)u+=a[l]*Math.pow(67108864,l);return o(r)*u}},4025:function(f,s,t){"use strict";var o=t(2361),r=t(8828).countTrailingZeros;f.exports=function(i){var a=r(o.lo(i));if(a<32)return a;var u=r(o.hi(i));return u>20?52:u+32}},1533:function(f,s,t){"use strict";t(6859),f.exports=function(o){return o&&typeof o=="object"&&!!o.words}},2651:function(f,s,t){"use strict";var o=t(6859),r=t(2361);f.exports=function(i){var a=r.exponent(i);return a<52?new o(i):new o(i*Math.pow(2,52-a)).ushln(a-52)}},869:function(f,s,t){"use strict";var o=t(2651),r=t(5716);f.exports=function(i,a){var u=r(i),l=r(a);if(u===0)return[o(0),o(1)];if(l===0)return[o(0),o(0)];l<0&&(i=i.neg(),a=a.neg());var d=i.gcd(a);return d.cmpn(1)?[i.div(d),a.div(d)]:[i,a]}},4387:function(f,s,t){"use strict";var o=t(6859);f.exports=function(r){return new o(r)}},6504:function(f,s,t){"use strict";var o=t(869);f.exports=function(r,i){return o(r[0].mul(i[0]),r[1].mul(i[1]))}},7721:function(f,s,t){"use strict";var o=t(5716);f.exports=function(r){return o(r[0])*o(r[1])}},5572:function(f,s,t){"use strict";var o=t(869);f.exports=function(r,i){return o(r[0].mul(i[1]).sub(r[1].mul(i[0])),r[1].mul(i[1]))}},946:function(f,s,t){"use strict";var o=t(1369),r=t(4025);f.exports=function(i){var a=i[0],u=i[1];if(a.cmpn(0)===0)return 0;var l=a.abs().divmod(u.abs()),d=l.div,c=o(d),_=l.mod,p=a.negative!==u.negative?-1:1;if(_.cmpn(0)===0)return p*c;if(c){var g=r(c)+4;return p*(c+(b=o(_.ushln(g).divRound(u)))*Math.pow(2,-g))}var m=u.bitLength()-_.bitLength()+53,b=o(_.ushln(m).divRound(u));return m<1023?p*b*Math.pow(2,-m):p*(b*=Math.pow(2,-1023))*Math.pow(2,1023-m)}},2478:function(f){"use strict";function s(u,l,d,c,_){for(var p=_+1;c<=_;){var g=c+_>>>1,m=u[g];(d!==void 0?d(m,l):m-l)>=0?(p=g,_=g-1):c=g+1}return p}function t(u,l,d,c,_){for(var p=_+1;c<=_;){var g=c+_>>>1,m=u[g];(d!==void 0?d(m,l):m-l)>0?(p=g,_=g-1):c=g+1}return p}function o(u,l,d,c,_){for(var p=c-1;c<=_;){var g=c+_>>>1,m=u[g];(d!==void 0?d(m,l):m-l)<0?(p=g,c=g+1):_=g-1}return p}function r(u,l,d,c,_){for(var p=c-1;c<=_;){var g=c+_>>>1,m=u[g];(d!==void 0?d(m,l):m-l)<=0?(p=g,c=g+1):_=g-1}return p}function i(u,l,d,c,_){for(;c<=_;){var p=c+_>>>1,g=u[p],m=d!==void 0?d(g,l):g-l;if(m===0)return p;m<=0?c=p+1:_=p-1}return-1}function a(u,l,d,c,_,p){return typeof d=="function"?p(u,l,d,c===void 0?0:0|c,_===void 0?u.length-1:0|_):p(u,l,void 0,d===void 0?0:0|d,c===void 0?u.length-1:0|c)}f.exports={ge:function(u,l,d,c,_){return a(u,l,d,c,_,s)},gt:function(u,l,d,c,_){return a(u,l,d,c,_,t)},lt:function(u,l,d,c,_){return a(u,l,d,c,_,o)},le:function(u,l,d,c,_){return a(u,l,d,c,_,r)},eq:function(u,l,d,c,_){return a(u,l,d,c,_,i)}}},8828:function(f,s){"use strict";function t(r){var i=32;return(r&=-r)&&i--,65535&r&&(i-=16),16711935&r&&(i-=8),252645135&r&&(i-=4),858993459&r&&(i-=2),1431655765&r&&(i-=1),i}s.INT_BITS=32,s.INT_MAX=2147483647,s.INT_MIN=-2147483648,s.sign=function(r){return(r>0)-(r<0)},s.abs=function(r){var i=r>>31;return(r^i)-i},s.min=function(r,i){return i^(r^i)&-(r<i)},s.max=function(r,i){return r^(r^i)&-(r<i)},s.isPow2=function(r){return!(r&r-1||!r)},s.log2=function(r){var i,a;return i=(r>65535)<<4,i|=a=((r>>>=i)>255)<<3,i|=a=((r>>>=a)>15)<<2,(i|=a=((r>>>=a)>3)<<1)|(r>>>=a)>>1},s.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},s.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},s.countTrailingZeros=t,s.nextPow2=function(r){return r+=r===0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,1+(r|=r>>>16)},s.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},s.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var o=new Array(256);(function(r){for(var i=0;i<256;++i){var a=i,u=i,l=7;for(a>>>=1;a;a>>>=1)u<<=1,u|=1&a,--l;r[i]=u<<l&255}})(o),s.reverse=function(r){return o[255&r]<<24|o[r>>>8&255]<<16|o[r>>>16&255]<<8|o[r>>>24&255]},s.interleave2=function(r,i){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i&=65535)|i<<8))|i<<4))|i<<2))|i<<1))<<1},s.deinterleave2=function(r,i){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>i&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},s.interleave3=function(r,i,a){return r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2),(r|=(i=1227133513&((i=3272356035&((i=251719695&((i=4278190335&((i&=1023)|i<<16))|i<<8))|i<<4))|i<<2))<<1)|(a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2))<<2},s.deinterleave3=function(r,i){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>i&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},s.nextCombination=function(r){var i=r|r-1;return i+1|(~i&-~i)-1>>>t(r)+1}},6859:function(f,s,t){(function(o,r){"use strict";function i(F,j){if(!F)throw new Error(j||"Assertion failed")}function a(F,j){F.super_=j;var Z=function(){};Z.prototype=j.prototype,F.prototype=new Z,F.prototype.constructor=F}function u(F,j,Z){if(u.isBN(F))return F;this.negative=0,this.words=null,this.length=0,this.red=null,F!==null&&(j!=="le"&&j!=="be"||(Z=j,j=10),this._init(F||0,j||10,Z||"be"))}var l;typeof o=="object"?o.exports=u:r.BN=u,u.BN=u,u.wordSize=26;try{l=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:t(7790).Buffer}catch{}function d(F,j){var Z=F.charCodeAt(j);return Z>=65&&Z<=70?Z-55:Z>=97&&Z<=102?Z-87:Z-48&15}function c(F,j,Z){var z=d(F,Z);return Z-1>=j&&(z|=d(F,Z-1)<<4),z}function _(F,j,Z,z){for(var H=0,U=Math.min(F.length,Z),re=j;re<U;re++){var ee=F.charCodeAt(re)-48;H*=z,H+=ee>=49?ee-49+10:ee>=17?ee-17+10:ee}return H}u.isBN=function(F){return F instanceof u||F!==null&&typeof F=="object"&&F.constructor.wordSize===u.wordSize&&Array.isArray(F.words)},u.max=function(F,j){return F.cmp(j)>0?F:j},u.min=function(F,j){return F.cmp(j)<0?F:j},u.prototype._init=function(F,j,Z){if(typeof F=="number")return this._initNumber(F,j,Z);if(typeof F=="object")return this._initArray(F,j,Z);j==="hex"&&(j=16),i(j===(0|j)&&j>=2&&j<=36);var z=0;(F=F.toString().replace(/\s+/g,""))[0]==="-"&&(z++,this.negative=1),z<F.length&&(j===16?this._parseHex(F,z,Z):(this._parseBase(F,j,z),Z==="le"&&this._initArray(this.toArray(),j,Z)))},u.prototype._initNumber=function(F,j,Z){F<0&&(this.negative=1,F=-F),F<67108864?(this.words=[67108863&F],this.length=1):F<4503599627370496?(this.words=[67108863&F,F/67108864&67108863],this.length=2):(i(F<9007199254740992),this.words=[67108863&F,F/67108864&67108863,1],this.length=3),Z==="le"&&this._initArray(this.toArray(),j,Z)},u.prototype._initArray=function(F,j,Z){if(i(typeof F.length=="number"),F.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(F.length/3),this.words=new Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var H,U,re=0;if(Z==="be")for(z=F.length-1,H=0;z>=0;z-=3)U=F[z]|F[z-1]<<8|F[z-2]<<16,this.words[H]|=U<<re&67108863,this.words[H+1]=U>>>26-re&67108863,(re+=24)>=26&&(re-=26,H++);else if(Z==="le")for(z=0,H=0;z<F.length;z+=3)U=F[z]|F[z+1]<<8|F[z+2]<<16,this.words[H]|=U<<re&67108863,this.words[H+1]=U>>>26-re&67108863,(re+=24)>=26&&(re-=26,H++);return this.strip()},u.prototype._parseHex=function(F,j,Z){this.length=Math.ceil((F.length-j)/6),this.words=new Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var H,U=0,re=0;if(Z==="be")for(z=F.length-1;z>=j;z-=2)H=c(F,j,z)<<U,this.words[re]|=67108863&H,U>=18?(U-=18,re+=1,this.words[re]|=H>>>26):U+=8;else for(z=(F.length-j)%2==0?j+1:j;z<F.length;z+=2)H=c(F,j,z)<<U,this.words[re]|=67108863&H,U>=18?(U-=18,re+=1,this.words[re]|=H>>>26):U+=8;this.strip()},u.prototype._parseBase=function(F,j,Z){this.words=[0],this.length=1;for(var z=0,H=1;H<=67108863;H*=j)z++;z--,H=H/j|0;for(var U=F.length-Z,re=U%z,ee=Math.min(U,U-re)+Z,J=0,Q=Z;Q<ee;Q+=z)J=_(F,Q,Q+z,j),this.imuln(H),this.words[0]+J<67108864?this.words[0]+=J:this._iaddn(J);if(re!==0){var ne=1;for(J=_(F,Q,F.length,j),Q=0;Q<re;Q++)ne*=j;this.imuln(ne),this.words[0]+J<67108864?this.words[0]+=J:this._iaddn(J)}this.strip()},u.prototype.copy=function(F){F.words=new Array(this.length);for(var j=0;j<this.length;j++)F.words[j]=this.words[j];F.length=this.length,F.negative=this.negative,F.red=this.red},u.prototype.clone=function(){var F=new u(null);return this.copy(F),F},u.prototype._expand=function(F){for(;this.length<F;)this.words[this.length++]=0;return this},u.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},u.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},u.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var p=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],m=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function b(F,j,Z){Z.negative=j.negative^F.negative;var z=F.length+j.length|0;Z.length=z,z=z-1|0;var H=0|F.words[0],U=0|j.words[0],re=H*U,ee=67108863&re,J=re/67108864|0;Z.words[0]=ee;for(var Q=1;Q<z;Q++){for(var ne=J>>>26,K=67108863&J,oe=Math.min(Q,j.length-1),le=Math.max(0,Q-F.length+1);le<=oe;le++){var se=Q-le|0;ne+=(re=(H=0|F.words[se])*(U=0|j.words[le])+K)/67108864|0,K=67108863&re}Z.words[Q]=0|K,J=0|ne}return J!==0?Z.words[Q]=0|J:Z.length--,Z.strip()}u.prototype.toString=function(F,j){var Z;if(j=0|j||1,(F=F||10)===16||F==="hex"){Z="";for(var z=0,H=0,U=0;U<this.length;U++){var re=this.words[U],ee=(16777215&(re<<z|H)).toString(16);Z=(H=re>>>24-z&16777215)!=0||U!==this.length-1?p[6-ee.length]+ee+Z:ee+Z,(z+=2)>=26&&(z-=26,U--)}for(H!==0&&(Z=H.toString(16)+Z);Z.length%j!=0;)Z="0"+Z;return this.negative!==0&&(Z="-"+Z),Z}if(F===(0|F)&&F>=2&&F<=36){var J=g[F],Q=m[F];Z="";var ne=this.clone();for(ne.negative=0;!ne.isZero();){var K=ne.modn(Q).toString(F);Z=(ne=ne.idivn(Q)).isZero()?K+Z:p[J-K.length]+K+Z}for(this.isZero()&&(Z="0"+Z);Z.length%j!=0;)Z="0"+Z;return this.negative!==0&&(Z="-"+Z),Z}i(!1,"Base should be between 2 and 36")},u.prototype.toNumber=function(){var F=this.words[0];return this.length===2?F+=67108864*this.words[1]:this.length===3&&this.words[2]===1?F+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-F:F},u.prototype.toJSON=function(){return this.toString(16)},u.prototype.toBuffer=function(F,j){return i(l!==void 0),this.toArrayLike(l,F,j)},u.prototype.toArray=function(F,j){return this.toArrayLike(Array,F,j)},u.prototype.toArrayLike=function(F,j,Z){var z=this.byteLength(),H=Z||Math.max(1,z);i(z<=H,"byte array longer than desired length"),i(H>0,"Requested array length <= 0"),this.strip();var U,re,ee=j==="le",J=new F(H),Q=this.clone();if(ee){for(re=0;!Q.isZero();re++)U=Q.andln(255),Q.iushrn(8),J[re]=U;for(;re<H;re++)J[re]=0}else{for(re=0;re<H-z;re++)J[re]=0;for(re=0;!Q.isZero();re++)U=Q.andln(255),Q.iushrn(8),J[H-re-1]=U}return J},Math.clz32?u.prototype._countBits=function(F){return 32-Math.clz32(F)}:u.prototype._countBits=function(F){var j=F,Z=0;return j>=4096&&(Z+=13,j>>>=13),j>=64&&(Z+=7,j>>>=7),j>=8&&(Z+=4,j>>>=4),j>=2&&(Z+=2,j>>>=2),Z+j},u.prototype._zeroBits=function(F){if(F===0)return 26;var j=F,Z=0;return!(8191&j)&&(Z+=13,j>>>=13),!(127&j)&&(Z+=7,j>>>=7),!(15&j)&&(Z+=4,j>>>=4),!(3&j)&&(Z+=2,j>>>=2),!(1&j)&&Z++,Z},u.prototype.bitLength=function(){var F=this.words[this.length-1],j=this._countBits(F);return 26*(this.length-1)+j},u.prototype.zeroBits=function(){if(this.isZero())return 0;for(var F=0,j=0;j<this.length;j++){var Z=this._zeroBits(this.words[j]);if(F+=Z,Z!==26)break}return F},u.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},u.prototype.toTwos=function(F){return this.negative!==0?this.abs().inotn(F).iaddn(1):this.clone()},u.prototype.fromTwos=function(F){return this.testn(F-1)?this.notn(F).iaddn(1).ineg():this.clone()},u.prototype.isNeg=function(){return this.negative!==0},u.prototype.neg=function(){return this.clone().ineg()},u.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},u.prototype.iuor=function(F){for(;this.length<F.length;)this.words[this.length++]=0;for(var j=0;j<F.length;j++)this.words[j]=this.words[j]|F.words[j];return this.strip()},u.prototype.ior=function(F){return i((this.negative|F.negative)==0),this.iuor(F)},u.prototype.or=function(F){return this.length>F.length?this.clone().ior(F):F.clone().ior(this)},u.prototype.uor=function(F){return this.length>F.length?this.clone().iuor(F):F.clone().iuor(this)},u.prototype.iuand=function(F){var j;j=this.length>F.length?F:this;for(var Z=0;Z<j.length;Z++)this.words[Z]=this.words[Z]&F.words[Z];return this.length=j.length,this.strip()},u.prototype.iand=function(F){return i((this.negative|F.negative)==0),this.iuand(F)},u.prototype.and=function(F){return this.length>F.length?this.clone().iand(F):F.clone().iand(this)},u.prototype.uand=function(F){return this.length>F.length?this.clone().iuand(F):F.clone().iuand(this)},u.prototype.iuxor=function(F){var j,Z;this.length>F.length?(j=this,Z=F):(j=F,Z=this);for(var z=0;z<Z.length;z++)this.words[z]=j.words[z]^Z.words[z];if(this!==j)for(;z<j.length;z++)this.words[z]=j.words[z];return this.length=j.length,this.strip()},u.prototype.ixor=function(F){return i((this.negative|F.negative)==0),this.iuxor(F)},u.prototype.xor=function(F){return this.length>F.length?this.clone().ixor(F):F.clone().ixor(this)},u.prototype.uxor=function(F){return this.length>F.length?this.clone().iuxor(F):F.clone().iuxor(this)},u.prototype.inotn=function(F){i(typeof F=="number"&&F>=0);var j=0|Math.ceil(F/26),Z=F%26;this._expand(j),Z>0&&j--;for(var z=0;z<j;z++)this.words[z]=67108863&~this.words[z];return Z>0&&(this.words[z]=~this.words[z]&67108863>>26-Z),this.strip()},u.prototype.notn=function(F){return this.clone().inotn(F)},u.prototype.setn=function(F,j){i(typeof F=="number"&&F>=0);var Z=F/26|0,z=F%26;return this._expand(Z+1),this.words[Z]=j?this.words[Z]|1<<z:this.words[Z]&~(1<<z),this.strip()},u.prototype.iadd=function(F){var j,Z,z;if(this.negative!==0&&F.negative===0)return this.negative=0,j=this.isub(F),this.negative^=1,this._normSign();if(this.negative===0&&F.negative!==0)return F.negative=0,j=this.isub(F),F.negative=1,j._normSign();this.length>F.length?(Z=this,z=F):(Z=F,z=this);for(var H=0,U=0;U<z.length;U++)j=(0|Z.words[U])+(0|z.words[U])+H,this.words[U]=67108863&j,H=j>>>26;for(;H!==0&&U<Z.length;U++)j=(0|Z.words[U])+H,this.words[U]=67108863&j,H=j>>>26;if(this.length=Z.length,H!==0)this.words[this.length]=H,this.length++;else if(Z!==this)for(;U<Z.length;U++)this.words[U]=Z.words[U];return this},u.prototype.add=function(F){var j;return F.negative!==0&&this.negative===0?(F.negative=0,j=this.sub(F),F.negative^=1,j):F.negative===0&&this.negative!==0?(this.negative=0,j=F.sub(this),this.negative=1,j):this.length>F.length?this.clone().iadd(F):F.clone().iadd(this)},u.prototype.isub=function(F){if(F.negative!==0){F.negative=0;var j=this.iadd(F);return F.negative=1,j._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(F),this.negative=1,this._normSign();var Z,z,H=this.cmp(F);if(H===0)return this.negative=0,this.length=1,this.words[0]=0,this;H>0?(Z=this,z=F):(Z=F,z=this);for(var U=0,re=0;re<z.length;re++)U=(j=(0|Z.words[re])-(0|z.words[re])+U)>>26,this.words[re]=67108863&j;for(;U!==0&&re<Z.length;re++)U=(j=(0|Z.words[re])+U)>>26,this.words[re]=67108863&j;if(U===0&&re<Z.length&&Z!==this)for(;re<Z.length;re++)this.words[re]=Z.words[re];return this.length=Math.max(this.length,re),Z!==this&&(this.negative=1),this.strip()},u.prototype.sub=function(F){return this.clone().isub(F)};var y=function(F,j,Z){var z,H,U,re=F.words,ee=j.words,J=Z.words,Q=0,ne=0|re[0],K=8191&ne,oe=ne>>>13,le=0|re[1],se=8191&le,de=le>>>13,be=0|re[2],_e=8191&be,xe=be>>>13,ve=0|re[3],ye=8191&ve,me=ve>>>13,Me=0|re[4],Ae=8191&Me,ce=Me>>>13,ae=0|re[5],pe=8191&ae,De=ae>>>13,ke=0|re[6],Ee=8191&ke,Ie=ke>>>13,Re=0|re[7],Ne=8191&Re,ge=Re>>>13,we=0|re[8],Ce=8191&we,ze=we>>>13,Pe=0|re[9],Ue=8191&Pe,Ge=Pe>>>13,Xe=0|ee[0],st=8191&Xe,at=Xe>>>13,vt=0|ee[1],xt=8191&vt,gt=vt>>>13,rt=0|ee[2],tt=8191&rt,Mt=rt>>>13,Pt=0|ee[3],Rt=8191&Pt,St=Pt>>>13,Ye=0|ee[4],Ke=8191&Ye,Ve=Ye>>>13,$e=0|ee[5],lt=8191&$e,it=$e>>>13,Be=0|ee[6],je=8191&Be,ot=Be>>>13,Ze=0|ee[7],dt=8191&Ze,mt=Ze>>>13,yt=0|ee[8],ht=8191&yt,kt=yt>>>13,_t=0|ee[9],Et=8191&_t,Lt=_t>>>13;Z.negative=F.negative^j.negative,Z.length=19;var Ot=(Q+(z=Math.imul(K,st))|0)+((8191&(H=(H=Math.imul(K,at))+Math.imul(oe,st)|0))<<13)|0;Q=((U=Math.imul(oe,at))+(H>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,z=Math.imul(se,st),H=(H=Math.imul(se,at))+Math.imul(de,st)|0,U=Math.imul(de,at);var Ft=(Q+(z=z+Math.imul(K,xt)|0)|0)+((8191&(H=(H=H+Math.imul(K,gt)|0)+Math.imul(oe,xt)|0))<<13)|0;Q=((U=U+Math.imul(oe,gt)|0)+(H>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,z=Math.imul(_e,st),H=(H=Math.imul(_e,at))+Math.imul(xe,st)|0,U=Math.imul(xe,at),z=z+Math.imul(se,xt)|0,H=(H=H+Math.imul(se,gt)|0)+Math.imul(de,xt)|0,U=U+Math.imul(de,gt)|0;var Zt=(Q+(z=z+Math.imul(K,tt)|0)|0)+((8191&(H=(H=H+Math.imul(K,Mt)|0)+Math.imul(oe,tt)|0))<<13)|0;Q=((U=U+Math.imul(oe,Mt)|0)+(H>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,z=Math.imul(ye,st),H=(H=Math.imul(ye,at))+Math.imul(me,st)|0,U=Math.imul(me,at),z=z+Math.imul(_e,xt)|0,H=(H=H+Math.imul(_e,gt)|0)+Math.imul(xe,xt)|0,U=U+Math.imul(xe,gt)|0,z=z+Math.imul(se,tt)|0,H=(H=H+Math.imul(se,Mt)|0)+Math.imul(de,tt)|0,U=U+Math.imul(de,Mt)|0;var Ht=(Q+(z=z+Math.imul(K,Rt)|0)|0)+((8191&(H=(H=H+Math.imul(K,St)|0)+Math.imul(oe,Rt)|0))<<13)|0;Q=((U=U+Math.imul(oe,St)|0)+(H>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,z=Math.imul(Ae,st),H=(H=Math.imul(Ae,at))+Math.imul(ce,st)|0,U=Math.imul(ce,at),z=z+Math.imul(ye,xt)|0,H=(H=H+Math.imul(ye,gt)|0)+Math.imul(me,xt)|0,U=U+Math.imul(me,gt)|0,z=z+Math.imul(_e,tt)|0,H=(H=H+Math.imul(_e,Mt)|0)+Math.imul(xe,tt)|0,U=U+Math.imul(xe,Mt)|0,z=z+Math.imul(se,Rt)|0,H=(H=H+Math.imul(se,St)|0)+Math.imul(de,Rt)|0,U=U+Math.imul(de,St)|0;var Ut=(Q+(z=z+Math.imul(K,Ke)|0)|0)+((8191&(H=(H=H+Math.imul(K,Ve)|0)+Math.imul(oe,Ke)|0))<<13)|0;Q=((U=U+Math.imul(oe,Ve)|0)+(H>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,z=Math.imul(pe,st),H=(H=Math.imul(pe,at))+Math.imul(De,st)|0,U=Math.imul(De,at),z=z+Math.imul(Ae,xt)|0,H=(H=H+Math.imul(Ae,gt)|0)+Math.imul(ce,xt)|0,U=U+Math.imul(ce,gt)|0,z=z+Math.imul(ye,tt)|0,H=(H=H+Math.imul(ye,Mt)|0)+Math.imul(me,tt)|0,U=U+Math.imul(me,Mt)|0,z=z+Math.imul(_e,Rt)|0,H=(H=H+Math.imul(_e,St)|0)+Math.imul(xe,Rt)|0,U=U+Math.imul(xe,St)|0,z=z+Math.imul(se,Ke)|0,H=(H=H+Math.imul(se,Ve)|0)+Math.imul(de,Ke)|0,U=U+Math.imul(de,Ve)|0;var Wt=(Q+(z=z+Math.imul(K,lt)|0)|0)+((8191&(H=(H=H+Math.imul(K,it)|0)+Math.imul(oe,lt)|0))<<13)|0;Q=((U=U+Math.imul(oe,it)|0)+(H>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,z=Math.imul(Ee,st),H=(H=Math.imul(Ee,at))+Math.imul(Ie,st)|0,U=Math.imul(Ie,at),z=z+Math.imul(pe,xt)|0,H=(H=H+Math.imul(pe,gt)|0)+Math.imul(De,xt)|0,U=U+Math.imul(De,gt)|0,z=z+Math.imul(Ae,tt)|0,H=(H=H+Math.imul(Ae,Mt)|0)+Math.imul(ce,tt)|0,U=U+Math.imul(ce,Mt)|0,z=z+Math.imul(ye,Rt)|0,H=(H=H+Math.imul(ye,St)|0)+Math.imul(me,Rt)|0,U=U+Math.imul(me,St)|0,z=z+Math.imul(_e,Ke)|0,H=(H=H+Math.imul(_e,Ve)|0)+Math.imul(xe,Ke)|0,U=U+Math.imul(xe,Ve)|0,z=z+Math.imul(se,lt)|0,H=(H=H+Math.imul(se,it)|0)+Math.imul(de,lt)|0,U=U+Math.imul(de,it)|0;var nn=(Q+(z=z+Math.imul(K,je)|0)|0)+((8191&(H=(H=H+Math.imul(K,ot)|0)+Math.imul(oe,je)|0))<<13)|0;Q=((U=U+Math.imul(oe,ot)|0)+(H>>>13)|0)+(nn>>>26)|0,nn&=67108863,z=Math.imul(Ne,st),H=(H=Math.imul(Ne,at))+Math.imul(ge,st)|0,U=Math.imul(ge,at),z=z+Math.imul(Ee,xt)|0,H=(H=H+Math.imul(Ee,gt)|0)+Math.imul(Ie,xt)|0,U=U+Math.imul(Ie,gt)|0,z=z+Math.imul(pe,tt)|0,H=(H=H+Math.imul(pe,Mt)|0)+Math.imul(De,tt)|0,U=U+Math.imul(De,Mt)|0,z=z+Math.imul(Ae,Rt)|0,H=(H=H+Math.imul(Ae,St)|0)+Math.imul(ce,Rt)|0,U=U+Math.imul(ce,St)|0,z=z+Math.imul(ye,Ke)|0,H=(H=H+Math.imul(ye,Ve)|0)+Math.imul(me,Ke)|0,U=U+Math.imul(me,Ve)|0,z=z+Math.imul(_e,lt)|0,H=(H=H+Math.imul(_e,it)|0)+Math.imul(xe,lt)|0,U=U+Math.imul(xe,it)|0,z=z+Math.imul(se,je)|0,H=(H=H+Math.imul(se,ot)|0)+Math.imul(de,je)|0,U=U+Math.imul(de,ot)|0;var On=(Q+(z=z+Math.imul(K,dt)|0)|0)+((8191&(H=(H=H+Math.imul(K,mt)|0)+Math.imul(oe,dt)|0))<<13)|0;Q=((U=U+Math.imul(oe,mt)|0)+(H>>>13)|0)+(On>>>26)|0,On&=67108863,z=Math.imul(Ce,st),H=(H=Math.imul(Ce,at))+Math.imul(ze,st)|0,U=Math.imul(ze,at),z=z+Math.imul(Ne,xt)|0,H=(H=H+Math.imul(Ne,gt)|0)+Math.imul(ge,xt)|0,U=U+Math.imul(ge,gt)|0,z=z+Math.imul(Ee,tt)|0,H=(H=H+Math.imul(Ee,Mt)|0)+Math.imul(Ie,tt)|0,U=U+Math.imul(Ie,Mt)|0,z=z+Math.imul(pe,Rt)|0,H=(H=H+Math.imul(pe,St)|0)+Math.imul(De,Rt)|0,U=U+Math.imul(De,St)|0,z=z+Math.imul(Ae,Ke)|0,H=(H=H+Math.imul(Ae,Ve)|0)+Math.imul(ce,Ke)|0,U=U+Math.imul(ce,Ve)|0,z=z+Math.imul(ye,lt)|0,H=(H=H+Math.imul(ye,it)|0)+Math.imul(me,lt)|0,U=U+Math.imul(me,it)|0,z=z+Math.imul(_e,je)|0,H=(H=H+Math.imul(_e,ot)|0)+Math.imul(xe,je)|0,U=U+Math.imul(xe,ot)|0,z=z+Math.imul(se,dt)|0,H=(H=H+Math.imul(se,mt)|0)+Math.imul(de,dt)|0,U=U+Math.imul(de,mt)|0;var kn=(Q+(z=z+Math.imul(K,ht)|0)|0)+((8191&(H=(H=H+Math.imul(K,kt)|0)+Math.imul(oe,ht)|0))<<13)|0;Q=((U=U+Math.imul(oe,kt)|0)+(H>>>13)|0)+(kn>>>26)|0,kn&=67108863,z=Math.imul(Ue,st),H=(H=Math.imul(Ue,at))+Math.imul(Ge,st)|0,U=Math.imul(Ge,at),z=z+Math.imul(Ce,xt)|0,H=(H=H+Math.imul(Ce,gt)|0)+Math.imul(ze,xt)|0,U=U+Math.imul(ze,gt)|0,z=z+Math.imul(Ne,tt)|0,H=(H=H+Math.imul(Ne,Mt)|0)+Math.imul(ge,tt)|0,U=U+Math.imul(ge,Mt)|0,z=z+Math.imul(Ee,Rt)|0,H=(H=H+Math.imul(Ee,St)|0)+Math.imul(Ie,Rt)|0,U=U+Math.imul(Ie,St)|0,z=z+Math.imul(pe,Ke)|0,H=(H=H+Math.imul(pe,Ve)|0)+Math.imul(De,Ke)|0,U=U+Math.imul(De,Ve)|0,z=z+Math.imul(Ae,lt)|0,H=(H=H+Math.imul(Ae,it)|0)+Math.imul(ce,lt)|0,U=U+Math.imul(ce,it)|0,z=z+Math.imul(ye,je)|0,H=(H=H+Math.imul(ye,ot)|0)+Math.imul(me,je)|0,U=U+Math.imul(me,ot)|0,z=z+Math.imul(_e,dt)|0,H=(H=H+Math.imul(_e,mt)|0)+Math.imul(xe,dt)|0,U=U+Math.imul(xe,mt)|0,z=z+Math.imul(se,ht)|0,H=(H=H+Math.imul(se,kt)|0)+Math.imul(de,ht)|0,U=U+Math.imul(de,kt)|0;var gn=(Q+(z=z+Math.imul(K,Et)|0)|0)+((8191&(H=(H=H+Math.imul(K,Lt)|0)+Math.imul(oe,Et)|0))<<13)|0;Q=((U=U+Math.imul(oe,Lt)|0)+(H>>>13)|0)+(gn>>>26)|0,gn&=67108863,z=Math.imul(Ue,xt),H=(H=Math.imul(Ue,gt))+Math.imul(Ge,xt)|0,U=Math.imul(Ge,gt),z=z+Math.imul(Ce,tt)|0,H=(H=H+Math.imul(Ce,Mt)|0)+Math.imul(ze,tt)|0,U=U+Math.imul(ze,Mt)|0,z=z+Math.imul(Ne,Rt)|0,H=(H=H+Math.imul(Ne,St)|0)+Math.imul(ge,Rt)|0,U=U+Math.imul(ge,St)|0,z=z+Math.imul(Ee,Ke)|0,H=(H=H+Math.imul(Ee,Ve)|0)+Math.imul(Ie,Ke)|0,U=U+Math.imul(Ie,Ve)|0,z=z+Math.imul(pe,lt)|0,H=(H=H+Math.imul(pe,it)|0)+Math.imul(De,lt)|0,U=U+Math.imul(De,it)|0,z=z+Math.imul(Ae,je)|0,H=(H=H+Math.imul(Ae,ot)|0)+Math.imul(ce,je)|0,U=U+Math.imul(ce,ot)|0,z=z+Math.imul(ye,dt)|0,H=(H=H+Math.imul(ye,mt)|0)+Math.imul(me,dt)|0,U=U+Math.imul(me,mt)|0,z=z+Math.imul(_e,ht)|0,H=(H=H+Math.imul(_e,kt)|0)+Math.imul(xe,ht)|0,U=U+Math.imul(xe,kt)|0;var Jt=(Q+(z=z+Math.imul(se,Et)|0)|0)+((8191&(H=(H=H+Math.imul(se,Lt)|0)+Math.imul(de,Et)|0))<<13)|0;Q=((U=U+Math.imul(de,Lt)|0)+(H>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,z=Math.imul(Ue,tt),H=(H=Math.imul(Ue,Mt))+Math.imul(Ge,tt)|0,U=Math.imul(Ge,Mt),z=z+Math.imul(Ce,Rt)|0,H=(H=H+Math.imul(Ce,St)|0)+Math.imul(ze,Rt)|0,U=U+Math.imul(ze,St)|0,z=z+Math.imul(Ne,Ke)|0,H=(H=H+Math.imul(Ne,Ve)|0)+Math.imul(ge,Ke)|0,U=U+Math.imul(ge,Ve)|0,z=z+Math.imul(Ee,lt)|0,H=(H=H+Math.imul(Ee,it)|0)+Math.imul(Ie,lt)|0,U=U+Math.imul(Ie,it)|0,z=z+Math.imul(pe,je)|0,H=(H=H+Math.imul(pe,ot)|0)+Math.imul(De,je)|0,U=U+Math.imul(De,ot)|0,z=z+Math.imul(Ae,dt)|0,H=(H=H+Math.imul(Ae,mt)|0)+Math.imul(ce,dt)|0,U=U+Math.imul(ce,mt)|0,z=z+Math.imul(ye,ht)|0,H=(H=H+Math.imul(ye,kt)|0)+Math.imul(me,ht)|0,U=U+Math.imul(me,kt)|0;var un=(Q+(z=z+Math.imul(_e,Et)|0)|0)+((8191&(H=(H=H+Math.imul(_e,Lt)|0)+Math.imul(xe,Et)|0))<<13)|0;Q=((U=U+Math.imul(xe,Lt)|0)+(H>>>13)|0)+(un>>>26)|0,un&=67108863,z=Math.imul(Ue,Rt),H=(H=Math.imul(Ue,St))+Math.imul(Ge,Rt)|0,U=Math.imul(Ge,St),z=z+Math.imul(Ce,Ke)|0,H=(H=H+Math.imul(Ce,Ve)|0)+Math.imul(ze,Ke)|0,U=U+Math.imul(ze,Ve)|0,z=z+Math.imul(Ne,lt)|0,H=(H=H+Math.imul(Ne,it)|0)+Math.imul(ge,lt)|0,U=U+Math.imul(ge,it)|0,z=z+Math.imul(Ee,je)|0,H=(H=H+Math.imul(Ee,ot)|0)+Math.imul(Ie,je)|0,U=U+Math.imul(Ie,ot)|0,z=z+Math.imul(pe,dt)|0,H=(H=H+Math.imul(pe,mt)|0)+Math.imul(De,dt)|0,U=U+Math.imul(De,mt)|0,z=z+Math.imul(Ae,ht)|0,H=(H=H+Math.imul(Ae,kt)|0)+Math.imul(ce,ht)|0,U=U+Math.imul(ce,kt)|0;var tn=(Q+(z=z+Math.imul(ye,Et)|0)|0)+((8191&(H=(H=H+Math.imul(ye,Lt)|0)+Math.imul(me,Et)|0))<<13)|0;Q=((U=U+Math.imul(me,Lt)|0)+(H>>>13)|0)+(tn>>>26)|0,tn&=67108863,z=Math.imul(Ue,Ke),H=(H=Math.imul(Ue,Ve))+Math.imul(Ge,Ke)|0,U=Math.imul(Ge,Ve),z=z+Math.imul(Ce,lt)|0,H=(H=H+Math.imul(Ce,it)|0)+Math.imul(ze,lt)|0,U=U+Math.imul(ze,it)|0,z=z+Math.imul(Ne,je)|0,H=(H=H+Math.imul(Ne,ot)|0)+Math.imul(ge,je)|0,U=U+Math.imul(ge,ot)|0,z=z+Math.imul(Ee,dt)|0,H=(H=H+Math.imul(Ee,mt)|0)+Math.imul(Ie,dt)|0,U=U+Math.imul(Ie,mt)|0,z=z+Math.imul(pe,ht)|0,H=(H=H+Math.imul(pe,kt)|0)+Math.imul(De,ht)|0,U=U+Math.imul(De,kt)|0;var hn=(Q+(z=z+Math.imul(Ae,Et)|0)|0)+((8191&(H=(H=H+Math.imul(Ae,Lt)|0)+Math.imul(ce,Et)|0))<<13)|0;Q=((U=U+Math.imul(ce,Lt)|0)+(H>>>13)|0)+(hn>>>26)|0,hn&=67108863,z=Math.imul(Ue,lt),H=(H=Math.imul(Ue,it))+Math.imul(Ge,lt)|0,U=Math.imul(Ge,it),z=z+Math.imul(Ce,je)|0,H=(H=H+Math.imul(Ce,ot)|0)+Math.imul(ze,je)|0,U=U+Math.imul(ze,ot)|0,z=z+Math.imul(Ne,dt)|0,H=(H=H+Math.imul(Ne,mt)|0)+Math.imul(ge,dt)|0,U=U+Math.imul(ge,mt)|0,z=z+Math.imul(Ee,ht)|0,H=(H=H+Math.imul(Ee,kt)|0)+Math.imul(Ie,ht)|0,U=U+Math.imul(Ie,kt)|0;var bn=(Q+(z=z+Math.imul(pe,Et)|0)|0)+((8191&(H=(H=H+Math.imul(pe,Lt)|0)+Math.imul(De,Et)|0))<<13)|0;Q=((U=U+Math.imul(De,Lt)|0)+(H>>>13)|0)+(bn>>>26)|0,bn&=67108863,z=Math.imul(Ue,je),H=(H=Math.imul(Ue,ot))+Math.imul(Ge,je)|0,U=Math.imul(Ge,ot),z=z+Math.imul(Ce,dt)|0,H=(H=H+Math.imul(Ce,mt)|0)+Math.imul(ze,dt)|0,U=U+Math.imul(ze,mt)|0,z=z+Math.imul(Ne,ht)|0,H=(H=H+Math.imul(Ne,kt)|0)+Math.imul(ge,ht)|0,U=U+Math.imul(ge,kt)|0;var wn=(Q+(z=z+Math.imul(Ee,Et)|0)|0)+((8191&(H=(H=H+Math.imul(Ee,Lt)|0)+Math.imul(Ie,Et)|0))<<13)|0;Q=((U=U+Math.imul(Ie,Lt)|0)+(H>>>13)|0)+(wn>>>26)|0,wn&=67108863,z=Math.imul(Ue,dt),H=(H=Math.imul(Ue,mt))+Math.imul(Ge,dt)|0,U=Math.imul(Ge,mt),z=z+Math.imul(Ce,ht)|0,H=(H=H+Math.imul(Ce,kt)|0)+Math.imul(ze,ht)|0,U=U+Math.imul(ze,kt)|0;var Pn=(Q+(z=z+Math.imul(Ne,Et)|0)|0)+((8191&(H=(H=H+Math.imul(Ne,Lt)|0)+Math.imul(ge,Et)|0))<<13)|0;Q=((U=U+Math.imul(ge,Lt)|0)+(H>>>13)|0)+(Pn>>>26)|0,Pn&=67108863,z=Math.imul(Ue,ht),H=(H=Math.imul(Ue,kt))+Math.imul(Ge,ht)|0,U=Math.imul(Ge,kt);var Cn=(Q+(z=z+Math.imul(Ce,Et)|0)|0)+((8191&(H=(H=H+Math.imul(Ce,Lt)|0)+Math.imul(ze,Et)|0))<<13)|0;Q=((U=U+Math.imul(ze,Lt)|0)+(H>>>13)|0)+(Cn>>>26)|0,Cn&=67108863;var Mn=(Q+(z=Math.imul(Ue,Et))|0)+((8191&(H=(H=Math.imul(Ue,Lt))+Math.imul(Ge,Et)|0))<<13)|0;return Q=((U=Math.imul(Ge,Lt))+(H>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,J[0]=Ot,J[1]=Ft,J[2]=Zt,J[3]=Ht,J[4]=Ut,J[5]=Wt,J[6]=nn,J[7]=On,J[8]=kn,J[9]=gn,J[10]=Jt,J[11]=un,J[12]=tn,J[13]=hn,J[14]=bn,J[15]=wn,J[16]=Pn,J[17]=Cn,J[18]=Mn,Q!==0&&(J[19]=Q,Z.length++),Z};function M(F,j,Z){return new h().mulp(F,j,Z)}function h(F,j){this.x=F,this.y=j}Math.imul||(y=b),u.prototype.mulTo=function(F,j){var Z,z=this.length+F.length;return Z=this.length===10&&F.length===10?y(this,F,j):z<63?b(this,F,j):z<1024?function(H,U,re){re.negative=U.negative^H.negative,re.length=H.length+U.length;for(var ee=0,J=0,Q=0;Q<re.length-1;Q++){var ne=J;J=0;for(var K=67108863&ee,oe=Math.min(Q,U.length-1),le=Math.max(0,Q-H.length+1);le<=oe;le++){var se=Q-le,de=(0|H.words[se])*(0|U.words[le]),be=67108863&de;K=67108863&(be=be+K|0),J+=(ne=(ne=ne+(de/67108864|0)|0)+(be>>>26)|0)>>>26,ne&=67108863}re.words[Q]=K,ee=ne,ne=J}return ee!==0?re.words[Q]=ee:re.length--,re.strip()}(this,F,j):M(this,F,j),Z},h.prototype.makeRBT=function(F){for(var j=new Array(F),Z=u.prototype._countBits(F)-1,z=0;z<F;z++)j[z]=this.revBin(z,Z,F);return j},h.prototype.revBin=function(F,j,Z){if(F===0||F===Z-1)return F;for(var z=0,H=0;H<j;H++)z|=(1&F)<<j-H-1,F>>=1;return z},h.prototype.permute=function(F,j,Z,z,H,U){for(var re=0;re<U;re++)z[re]=j[F[re]],H[re]=Z[F[re]]},h.prototype.transform=function(F,j,Z,z,H,U){this.permute(U,F,j,Z,z,H);for(var re=1;re<H;re<<=1)for(var ee=re<<1,J=Math.cos(2*Math.PI/ee),Q=Math.sin(2*Math.PI/ee),ne=0;ne<H;ne+=ee)for(var K=J,oe=Q,le=0;le<re;le++){var se=Z[ne+le],de=z[ne+le],be=Z[ne+le+re],_e=z[ne+le+re],xe=K*be-oe*_e;_e=K*_e+oe*be,be=xe,Z[ne+le]=se+be,z[ne+le]=de+_e,Z[ne+le+re]=se-be,z[ne+le+re]=de-_e,le!==ee&&(xe=J*K-Q*oe,oe=J*oe+Q*K,K=xe)}},h.prototype.guessLen13b=function(F,j){var Z=1|Math.max(j,F),z=1&Z,H=0;for(Z=Z/2|0;Z;Z>>>=1)H++;return 1<<H+1+z},h.prototype.conjugate=function(F,j,Z){if(!(Z<=1))for(var z=0;z<Z/2;z++){var H=F[z];F[z]=F[Z-z-1],F[Z-z-1]=H,H=j[z],j[z]=-j[Z-z-1],j[Z-z-1]=-H}},h.prototype.normalize13b=function(F,j){for(var Z=0,z=0;z<j/2;z++){var H=8192*Math.round(F[2*z+1]/j)+Math.round(F[2*z]/j)+Z;F[z]=67108863&H,Z=H<67108864?0:H/67108864|0}return F},h.prototype.convert13b=function(F,j,Z,z){for(var H=0,U=0;U<j;U++)H+=0|F[U],Z[2*U]=8191&H,H>>>=13,Z[2*U+1]=8191&H,H>>>=13;for(U=2*j;U<z;++U)Z[U]=0;i(H===0),i((-8192&H)==0)},h.prototype.stub=function(F){for(var j=new Array(F),Z=0;Z<F;Z++)j[Z]=0;return j},h.prototype.mulp=function(F,j,Z){var z=2*this.guessLen13b(F.length,j.length),H=this.makeRBT(z),U=this.stub(z),re=new Array(z),ee=new Array(z),J=new Array(z),Q=new Array(z),ne=new Array(z),K=new Array(z),oe=Z.words;oe.length=z,this.convert13b(F.words,F.length,re,z),this.convert13b(j.words,j.length,Q,z),this.transform(re,U,ee,J,z,H),this.transform(Q,U,ne,K,z,H);for(var le=0;le<z;le++){var se=ee[le]*ne[le]-J[le]*K[le];J[le]=ee[le]*K[le]+J[le]*ne[le],ee[le]=se}return this.conjugate(ee,J,z),this.transform(ee,J,oe,U,z,H),this.conjugate(oe,U,z),this.normalize13b(oe,z),Z.negative=F.negative^j.negative,Z.length=F.length+j.length,Z.strip()},u.prototype.mul=function(F){var j=new u(null);return j.words=new Array(this.length+F.length),this.mulTo(F,j)},u.prototype.mulf=function(F){var j=new u(null);return j.words=new Array(this.length+F.length),M(this,F,j)},u.prototype.imul=function(F){return this.clone().mulTo(F,this)},u.prototype.imuln=function(F){i(typeof F=="number"),i(F<67108864);for(var j=0,Z=0;Z<this.length;Z++){var z=(0|this.words[Z])*F,H=(67108863&z)+(67108863&j);j>>=26,j+=z/67108864|0,j+=H>>>26,this.words[Z]=67108863&H}return j!==0&&(this.words[Z]=j,this.length++),this},u.prototype.muln=function(F){return this.clone().imuln(F)},u.prototype.sqr=function(){return this.mul(this)},u.prototype.isqr=function(){return this.imul(this.clone())},u.prototype.pow=function(F){var j=function(U){for(var re=new Array(U.bitLength()),ee=0;ee<re.length;ee++){var J=ee/26|0,Q=ee%26;re[ee]=(U.words[J]&1<<Q)>>>Q}return re}(F);if(j.length===0)return new u(1);for(var Z=this,z=0;z<j.length&&j[z]===0;z++,Z=Z.sqr());if(++z<j.length)for(var H=Z.sqr();z<j.length;z++,H=H.sqr())j[z]!==0&&(Z=Z.mul(H));return Z},u.prototype.iushln=function(F){i(typeof F=="number"&&F>=0);var j,Z=F%26,z=(F-Z)/26,H=67108863>>>26-Z<<26-Z;if(Z!==0){var U=0;for(j=0;j<this.length;j++){var re=this.words[j]&H,ee=(0|this.words[j])-re<<Z;this.words[j]=ee|U,U=re>>>26-Z}U&&(this.words[j]=U,this.length++)}if(z!==0){for(j=this.length-1;j>=0;j--)this.words[j+z]=this.words[j];for(j=0;j<z;j++)this.words[j]=0;this.length+=z}return this.strip()},u.prototype.ishln=function(F){return i(this.negative===0),this.iushln(F)},u.prototype.iushrn=function(F,j,Z){var z;i(typeof F=="number"&&F>=0),z=j?(j-j%26)/26:0;var H=F%26,U=Math.min((F-H)/26,this.length),re=67108863^67108863>>>H<<H,ee=Z;if(z-=U,z=Math.max(0,z),ee){for(var J=0;J<U;J++)ee.words[J]=this.words[J];ee.length=U}if(U!==0)if(this.length>U)for(this.length-=U,J=0;J<this.length;J++)this.words[J]=this.words[J+U];else this.words[0]=0,this.length=1;var Q=0;for(J=this.length-1;J>=0&&(Q!==0||J>=z);J--){var ne=0|this.words[J];this.words[J]=Q<<26-H|ne>>>H,Q=ne&re}return ee&&Q!==0&&(ee.words[ee.length++]=Q),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},u.prototype.ishrn=function(F,j,Z){return i(this.negative===0),this.iushrn(F,j,Z)},u.prototype.shln=function(F){return this.clone().ishln(F)},u.prototype.ushln=function(F){return this.clone().iushln(F)},u.prototype.shrn=function(F){return this.clone().ishrn(F)},u.prototype.ushrn=function(F){return this.clone().iushrn(F)},u.prototype.testn=function(F){i(typeof F=="number"&&F>=0);var j=F%26,Z=(F-j)/26,z=1<<j;return!(this.length<=Z||!(this.words[Z]&z))},u.prototype.imaskn=function(F){i(typeof F=="number"&&F>=0);var j=F%26,Z=(F-j)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=Z)return this;if(j!==0&&Z++,this.length=Math.min(Z,this.length),j!==0){var z=67108863^67108863>>>j<<j;this.words[this.length-1]&=z}return this.strip()},u.prototype.maskn=function(F){return this.clone().imaskn(F)},u.prototype.iaddn=function(F){return i(typeof F=="number"),i(F<67108864),F<0?this.isubn(-F):this.negative!==0?this.length===1&&(0|this.words[0])<F?(this.words[0]=F-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(F),this.negative=1,this):this._iaddn(F)},u.prototype._iaddn=function(F){this.words[0]+=F;for(var j=0;j<this.length&&this.words[j]>=67108864;j++)this.words[j]-=67108864,j===this.length-1?this.words[j+1]=1:this.words[j+1]++;return this.length=Math.max(this.length,j+1),this},u.prototype.isubn=function(F){if(i(typeof F=="number"),i(F<67108864),F<0)return this.iaddn(-F);if(this.negative!==0)return this.negative=0,this.iaddn(F),this.negative=1,this;if(this.words[0]-=F,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var j=0;j<this.length&&this.words[j]<0;j++)this.words[j]+=67108864,this.words[j+1]-=1;return this.strip()},u.prototype.addn=function(F){return this.clone().iaddn(F)},u.prototype.subn=function(F){return this.clone().isubn(F)},u.prototype.iabs=function(){return this.negative=0,this},u.prototype.abs=function(){return this.clone().iabs()},u.prototype._ishlnsubmul=function(F,j,Z){var z,H,U=F.length+Z;this._expand(U);var re=0;for(z=0;z<F.length;z++){H=(0|this.words[z+Z])+re;var ee=(0|F.words[z])*j;re=((H-=67108863&ee)>>26)-(ee/67108864|0),this.words[z+Z]=67108863&H}for(;z<this.length-Z;z++)re=(H=(0|this.words[z+Z])+re)>>26,this.words[z+Z]=67108863&H;if(re===0)return this.strip();for(i(re===-1),re=0,z=0;z<this.length;z++)re=(H=-(0|this.words[z])+re)>>26,this.words[z]=67108863&H;return this.negative=1,this.strip()},u.prototype._wordDiv=function(F,j){var Z=(this.length,F.length),z=this.clone(),H=F,U=0|H.words[H.length-1];(Z=26-this._countBits(U))!=0&&(H=H.ushln(Z),z.iushln(Z),U=0|H.words[H.length-1]);var re,ee=z.length-H.length;if(j!=="mod"){(re=new u(null)).length=ee+1,re.words=new Array(re.length);for(var J=0;J<re.length;J++)re.words[J]=0}var Q=z.clone()._ishlnsubmul(H,1,ee);Q.negative===0&&(z=Q,re&&(re.words[ee]=1));for(var ne=ee-1;ne>=0;ne--){var K=67108864*(0|z.words[H.length+ne])+(0|z.words[H.length+ne-1]);for(K=Math.min(K/U|0,67108863),z._ishlnsubmul(H,K,ne);z.negative!==0;)K--,z.negative=0,z._ishlnsubmul(H,1,ne),z.isZero()||(z.negative^=1);re&&(re.words[ne]=K)}return re&&re.strip(),z.strip(),j!=="div"&&Z!==0&&z.iushrn(Z),{div:re||null,mod:z}},u.prototype.divmod=function(F,j,Z){return i(!F.isZero()),this.isZero()?{div:new u(0),mod:new u(0)}:this.negative!==0&&F.negative===0?(U=this.neg().divmod(F,j),j!=="mod"&&(z=U.div.neg()),j!=="div"&&(H=U.mod.neg(),Z&&H.negative!==0&&H.iadd(F)),{div:z,mod:H}):this.negative===0&&F.negative!==0?(U=this.divmod(F.neg(),j),j!=="mod"&&(z=U.div.neg()),{div:z,mod:U.mod}):this.negative&F.negative?(U=this.neg().divmod(F.neg(),j),j!=="div"&&(H=U.mod.neg(),Z&&H.negative!==0&&H.isub(F)),{div:U.div,mod:H}):F.length>this.length||this.cmp(F)<0?{div:new u(0),mod:this}:F.length===1?j==="div"?{div:this.divn(F.words[0]),mod:null}:j==="mod"?{div:null,mod:new u(this.modn(F.words[0]))}:{div:this.divn(F.words[0]),mod:new u(this.modn(F.words[0]))}:this._wordDiv(F,j);var z,H,U},u.prototype.div=function(F){return this.divmod(F,"div",!1).div},u.prototype.mod=function(F){return this.divmod(F,"mod",!1).mod},u.prototype.umod=function(F){return this.divmod(F,"mod",!0).mod},u.prototype.divRound=function(F){var j=this.divmod(F);if(j.mod.isZero())return j.div;var Z=j.div.negative!==0?j.mod.isub(F):j.mod,z=F.ushrn(1),H=F.andln(1),U=Z.cmp(z);return U<0||H===1&&U===0?j.div:j.div.negative!==0?j.div.isubn(1):j.div.iaddn(1)},u.prototype.modn=function(F){i(F<=67108863);for(var j=67108864%F,Z=0,z=this.length-1;z>=0;z--)Z=(j*Z+(0|this.words[z]))%F;return Z},u.prototype.idivn=function(F){i(F<=67108863);for(var j=0,Z=this.length-1;Z>=0;Z--){var z=(0|this.words[Z])+67108864*j;this.words[Z]=z/F|0,j=z%F}return this.strip()},u.prototype.divn=function(F){return this.clone().idivn(F)},u.prototype.egcd=function(F){i(F.negative===0),i(!F.isZero());var j=this,Z=F.clone();j=j.negative!==0?j.umod(F):j.clone();for(var z=new u(1),H=new u(0),U=new u(0),re=new u(1),ee=0;j.isEven()&&Z.isEven();)j.iushrn(1),Z.iushrn(1),++ee;for(var J=Z.clone(),Q=j.clone();!j.isZero();){for(var ne=0,K=1;!(j.words[0]&K)&&ne<26;++ne,K<<=1);if(ne>0)for(j.iushrn(ne);ne-- >0;)(z.isOdd()||H.isOdd())&&(z.iadd(J),H.isub(Q)),z.iushrn(1),H.iushrn(1);for(var oe=0,le=1;!(Z.words[0]&le)&&oe<26;++oe,le<<=1);if(oe>0)for(Z.iushrn(oe);oe-- >0;)(U.isOdd()||re.isOdd())&&(U.iadd(J),re.isub(Q)),U.iushrn(1),re.iushrn(1);j.cmp(Z)>=0?(j.isub(Z),z.isub(U),H.isub(re)):(Z.isub(j),U.isub(z),re.isub(H))}return{a:U,b:re,gcd:Z.iushln(ee)}},u.prototype._invmp=function(F){i(F.negative===0),i(!F.isZero());var j=this,Z=F.clone();j=j.negative!==0?j.umod(F):j.clone();for(var z,H=new u(1),U=new u(0),re=Z.clone();j.cmpn(1)>0&&Z.cmpn(1)>0;){for(var ee=0,J=1;!(j.words[0]&J)&&ee<26;++ee,J<<=1);if(ee>0)for(j.iushrn(ee);ee-- >0;)H.isOdd()&&H.iadd(re),H.iushrn(1);for(var Q=0,ne=1;!(Z.words[0]&ne)&&Q<26;++Q,ne<<=1);if(Q>0)for(Z.iushrn(Q);Q-- >0;)U.isOdd()&&U.iadd(re),U.iushrn(1);j.cmp(Z)>=0?(j.isub(Z),H.isub(U)):(Z.isub(j),U.isub(H))}return(z=j.cmpn(1)===0?H:U).cmpn(0)<0&&z.iadd(F),z},u.prototype.gcd=function(F){if(this.isZero())return F.abs();if(F.isZero())return this.abs();var j=this.clone(),Z=F.clone();j.negative=0,Z.negative=0;for(var z=0;j.isEven()&&Z.isEven();z++)j.iushrn(1),Z.iushrn(1);for(;;){for(;j.isEven();)j.iushrn(1);for(;Z.isEven();)Z.iushrn(1);var H=j.cmp(Z);if(H<0){var U=j;j=Z,Z=U}else if(H===0||Z.cmpn(1)===0)break;j.isub(Z)}return Z.iushln(z)},u.prototype.invm=function(F){return this.egcd(F).a.umod(F)},u.prototype.isEven=function(){return(1&this.words[0])==0},u.prototype.isOdd=function(){return(1&this.words[0])==1},u.prototype.andln=function(F){return this.words[0]&F},u.prototype.bincn=function(F){i(typeof F=="number");var j=F%26,Z=(F-j)/26,z=1<<j;if(this.length<=Z)return this._expand(Z+1),this.words[Z]|=z,this;for(var H=z,U=Z;H!==0&&U<this.length;U++){var re=0|this.words[U];H=(re+=H)>>>26,re&=67108863,this.words[U]=re}return H!==0&&(this.words[U]=H,this.length++),this},u.prototype.isZero=function(){return this.length===1&&this.words[0]===0},u.prototype.cmpn=function(F){var j,Z=F<0;if(this.negative!==0&&!Z)return-1;if(this.negative===0&&Z)return 1;if(this.strip(),this.length>1)j=1;else{Z&&(F=-F),i(F<=67108863,"Number is too big");var z=0|this.words[0];j=z===F?0:z<F?-1:1}return this.negative!==0?0|-j:j},u.prototype.cmp=function(F){if(this.negative!==0&&F.negative===0)return-1;if(this.negative===0&&F.negative!==0)return 1;var j=this.ucmp(F);return this.negative!==0?0|-j:j},u.prototype.ucmp=function(F){if(this.length>F.length)return 1;if(this.length<F.length)return-1;for(var j=0,Z=this.length-1;Z>=0;Z--){var z=0|this.words[Z],H=0|F.words[Z];if(z!==H){z<H?j=-1:z>H&&(j=1);break}}return j},u.prototype.gtn=function(F){return this.cmpn(F)===1},u.prototype.gt=function(F){return this.cmp(F)===1},u.prototype.gten=function(F){return this.cmpn(F)>=0},u.prototype.gte=function(F){return this.cmp(F)>=0},u.prototype.ltn=function(F){return this.cmpn(F)===-1},u.prototype.lt=function(F){return this.cmp(F)===-1},u.prototype.lten=function(F){return this.cmpn(F)<=0},u.prototype.lte=function(F){return this.cmp(F)<=0},u.prototype.eqn=function(F){return this.cmpn(F)===0},u.prototype.eq=function(F){return this.cmp(F)===0},u.red=function(F){return new N(F)},u.prototype.toRed=function(F){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),F.convertTo(this)._forceRed(F)},u.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},u.prototype._forceRed=function(F){return this.red=F,this},u.prototype.forceRed=function(F){return i(!this.red,"Already a number in reduction context"),this._forceRed(F)},u.prototype.redAdd=function(F){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,F)},u.prototype.redIAdd=function(F){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,F)},u.prototype.redSub=function(F){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,F)},u.prototype.redISub=function(F){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,F)},u.prototype.redShl=function(F){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,F)},u.prototype.redMul=function(F){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,F),this.red.mul(this,F)},u.prototype.redIMul=function(F){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,F),this.red.imul(this,F)},u.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},u.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},u.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},u.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},u.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},u.prototype.redPow=function(F){return i(this.red&&!F.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,F)};var E={k256:null,p224:null,p192:null,p25519:null};function k(F,j){this.name=F,this.p=new u(j,16),this.n=this.p.bitLength(),this.k=new u(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function D(){k.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function P(){k.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function L(){k.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function O(){k.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function N(F){if(typeof F=="string"){var j=u._prime(F);this.m=j.p,this.prime=j}else i(F.gtn(1),"modulus must be greater than 1"),this.m=F,this.prime=null}function V(F){N.call(this,F),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new u(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}k.prototype._tmp=function(){var F=new u(null);return F.words=new Array(Math.ceil(this.n/13)),F},k.prototype.ireduce=function(F){var j,Z=F;do this.split(Z,this.tmp),j=(Z=(Z=this.imulK(Z)).iadd(this.tmp)).bitLength();while(j>this.n);var z=j<this.n?-1:Z.ucmp(this.p);return z===0?(Z.words[0]=0,Z.length=1):z>0?Z.isub(this.p):Z.strip!==void 0?Z.strip():Z._strip(),Z},k.prototype.split=function(F,j){F.iushrn(this.n,0,j)},k.prototype.imulK=function(F){return F.imul(this.k)},a(D,k),D.prototype.split=function(F,j){for(var Z=4194303,z=Math.min(F.length,9),H=0;H<z;H++)j.words[H]=F.words[H];if(j.length=z,F.length<=9)return F.words[0]=0,void(F.length=1);var U=F.words[9];for(j.words[j.length++]=U&Z,H=10;H<F.length;H++){var re=0|F.words[H];F.words[H-10]=(re&Z)<<4|U>>>22,U=re}U>>>=22,F.words[H-10]=U,U===0&&F.length>10?F.length-=10:F.length-=9},D.prototype.imulK=function(F){F.words[F.length]=0,F.words[F.length+1]=0,F.length+=2;for(var j=0,Z=0;Z<F.length;Z++){var z=0|F.words[Z];j+=977*z,F.words[Z]=67108863&j,j=64*z+(j/67108864|0)}return F.words[F.length-1]===0&&(F.length--,F.words[F.length-1]===0&&F.length--),F},a(P,k),a(L,k),a(O,k),O.prototype.imulK=function(F){for(var j=0,Z=0;Z<F.length;Z++){var z=19*(0|F.words[Z])+j,H=67108863&z;z>>>=26,F.words[Z]=H,j=z}return j!==0&&(F.words[F.length++]=j),F},u._prime=function(F){if(E[F])return E[F];var j;if(F==="k256")j=new D;else if(F==="p224")j=new P;else if(F==="p192")j=new L;else{if(F!=="p25519")throw new Error("Unknown prime "+F);j=new O}return E[F]=j,j},N.prototype._verify1=function(F){i(F.negative===0,"red works only with positives"),i(F.red,"red works only with red numbers")},N.prototype._verify2=function(F,j){i((F.negative|j.negative)==0,"red works only with positives"),i(F.red&&F.red===j.red,"red works only with red numbers")},N.prototype.imod=function(F){return this.prime?this.prime.ireduce(F)._forceRed(this):F.umod(this.m)._forceRed(this)},N.prototype.neg=function(F){return F.isZero()?F.clone():this.m.sub(F)._forceRed(this)},N.prototype.add=function(F,j){this._verify2(F,j);var Z=F.add(j);return Z.cmp(this.m)>=0&&Z.isub(this.m),Z._forceRed(this)},N.prototype.iadd=function(F,j){this._verify2(F,j);var Z=F.iadd(j);return Z.cmp(this.m)>=0&&Z.isub(this.m),Z},N.prototype.sub=function(F,j){this._verify2(F,j);var Z=F.sub(j);return Z.cmpn(0)<0&&Z.iadd(this.m),Z._forceRed(this)},N.prototype.isub=function(F,j){this._verify2(F,j);var Z=F.isub(j);return Z.cmpn(0)<0&&Z.iadd(this.m),Z},N.prototype.shl=function(F,j){return this._verify1(F),this.imod(F.ushln(j))},N.prototype.imul=function(F,j){return this._verify2(F,j),this.imod(F.imul(j))},N.prototype.mul=function(F,j){return this._verify2(F,j),this.imod(F.mul(j))},N.prototype.isqr=function(F){return this.imul(F,F.clone())},N.prototype.sqr=function(F){return this.mul(F,F)},N.prototype.sqrt=function(F){if(F.isZero())return F.clone();var j=this.m.andln(3);if(i(j%2==1),j===3){var Z=this.m.add(new u(1)).iushrn(2);return this.pow(F,Z)}for(var z=this.m.subn(1),H=0;!z.isZero()&&z.andln(1)===0;)H++,z.iushrn(1);i(!z.isZero());var U=new u(1).toRed(this),re=U.redNeg(),ee=this.m.subn(1).iushrn(1),J=this.m.bitLength();for(J=new u(2*J*J).toRed(this);this.pow(J,ee).cmp(re)!==0;)J.redIAdd(re);for(var Q=this.pow(J,z),ne=this.pow(F,z.addn(1).iushrn(1)),K=this.pow(F,z),oe=H;K.cmp(U)!==0;){for(var le=K,se=0;le.cmp(U)!==0;se++)le=le.redSqr();i(se<oe);var de=this.pow(Q,new u(1).iushln(oe-se-1));ne=ne.redMul(de),Q=de.redSqr(),K=K.redMul(Q),oe=se}return ne},N.prototype.invm=function(F){var j=F._invmp(this.m);return j.negative!==0?(j.negative=0,this.imod(j).redNeg()):this.imod(j)},N.prototype.pow=function(F,j){if(j.isZero())return new u(1).toRed(this);if(j.cmpn(1)===0)return F.clone();var Z=new Array(16);Z[0]=new u(1).toRed(this),Z[1]=F;for(var z=2;z<Z.length;z++)Z[z]=this.mul(Z[z-1],F);var H=Z[0],U=0,re=0,ee=j.bitLength()%26;for(ee===0&&(ee=26),z=j.length-1;z>=0;z--){for(var J=j.words[z],Q=ee-1;Q>=0;Q--){var ne=J>>Q&1;H!==Z[0]&&(H=this.sqr(H)),ne!==0||U!==0?(U<<=1,U|=ne,(++re==4||z===0&&Q===0)&&(H=this.mul(H,Z[U]),re=0,U=0)):re=0}ee=26}return H},N.prototype.convertTo=function(F){var j=F.umod(this.m);return j===F?j.clone():j},N.prototype.convertFrom=function(F){var j=F.clone();return j.red=null,j},u.mont=function(F){return new V(F)},a(V,N),V.prototype.convertTo=function(F){return this.imod(F.ushln(this.shift))},V.prototype.convertFrom=function(F){var j=this.imod(F.mul(this.rinv));return j.red=null,j},V.prototype.imul=function(F,j){if(F.isZero()||j.isZero())return F.words[0]=0,F.length=1,F;var Z=F.imul(j),z=Z.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),H=Z.isub(z).iushrn(this.shift),U=H;return H.cmp(this.m)>=0?U=H.isub(this.m):H.cmpn(0)<0&&(U=H.iadd(this.m)),U._forceRed(this)},V.prototype.mul=function(F,j){if(F.isZero()||j.isZero())return new u(0)._forceRed(this);var Z=F.mul(j),z=Z.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),H=Z.isub(z).iushrn(this.shift),U=H;return H.cmp(this.m)>=0?U=H.isub(this.m):H.cmpn(0)<0&&(U=H.iadd(this.m)),U._forceRed(this)},V.prototype.invm=function(F){return this.imod(F._invmp(this.m).mul(this.r2))._forceRed(this)}})(f=t.nmd(f),this)},6204:function(f){"use strict";f.exports=function(s){var t,o,r,i=s.length,a=0;for(t=0;t<i;++t)a+=s[t].length;var u=new Array(a),l=0;for(t=0;t<i;++t){var d=s[t],c=d.length;for(o=0;o<c;++o){var _=u[l++]=new Array(c-1),p=0;for(r=0;r<c;++r)r!==o&&(_[p++]=d[r]);if(1&o){var g=_[1];_[1]=_[0],_[0]=g}}}return u}},6867:function(f,s,t){"use strict";f.exports=function(_,p,g){switch(arguments.length){case 1:return o=[],d(m=_,m,c,!0),o;case 2:return typeof p=="function"?d(_,_,p,!0):function(b,y){return o=[],d(b,y,c,!1),o}(_,p);case 3:return d(_,p,g,!1);default:throw new Error("box-intersect: Invalid arguments")}var m};var o,r=t(1888),i=t(855),a=t(7150);function u(_,p){for(var g=0;g<_;++g)if(!(p[g]<=p[g+_]))return!0;return!1}function l(_,p,g,m){for(var b=0,y=0,M=0,h=_.length;M<h;++M){var E=_[M];if(!u(p,E)){for(var k=0;k<2*p;++k)g[b++]=E[k];m[y++]=M}}return y}function d(_,p,g,m){var b=_.length,y=p.length;if(!(b<=0||y<=0)){var M=_[0].length>>>1;if(!(M<=0)){var h,E=r.mallocDouble(2*M*b),k=r.mallocInt32(b);if((b=l(_,M,E,k))>0){if(M===1&&m)i.init(b),h=i.sweepComplete(M,g,0,b,E,k,0,b,E,k);else{var D=r.mallocDouble(2*M*y),P=r.mallocInt32(y);(y=l(p,M,D,P))>0&&(i.init(b+y),h=M===1?i.sweepBipartite(M,g,0,b,E,k,0,y,D,P):a(M,g,m,b,E,k,y,D,P),r.free(D),r.free(P))}r.free(E),r.free(k)}return h}}}function c(_,p){o.push([_,p])}},2455:function(f,s){"use strict";function t(o){return o?function(r,i,a,u,l,d,c,_,p,g,m){return l-u>p-_?function(b,y,M,h,E,k,D,P,L,O,N){for(var V=2*b,F=h,j=V*h;F<E;++F,j+=V){var Z=k[y+j],z=k[y+j+b],H=D[F];e:for(var U=P,re=V*P;U<L;++U,re+=V){var ee=O[y+re],J=O[y+re+b],Q=N[U];if(!(J<Z||z<ee)){for(var ne=y+1;ne<b;++ne){var K=k[ne+j],oe=k[ne+b+j],le=O[ne+re],se=O[ne+b+re];if(oe<le||se<K)continue e}var de=M(H,Q);if(de!==void 0)return de}}}}(r,i,a,u,l,d,c,_,p,g,m):function(b,y,M,h,E,k,D,P,L,O,N){for(var V=2*b,F=P,j=V*P;F<L;++F,j+=V){var Z=O[y+j],z=O[y+j+b],H=N[F];e:for(var U=h,re=V*h;U<E;++U,re+=V){var ee=k[y+re],J=k[y+re+b],Q=D[U];if(!(z<ee||J<Z)){for(var ne=y+1;ne<b;++ne){var K=k[ne+re],oe=k[ne+b+re],le=O[ne+j],se=O[ne+b+j];if(oe<le||se<K)continue e}var de=M(Q,H);if(de!==void 0)return de}}}}(r,i,a,u,l,d,c,_,p,g,m)}:function(r,i,a,u,l,d,c,_,p,g,m,b){return d-l>g-p?u?function(y,M,h,E,k,D,P,L,O,N,V){for(var F=2*y,j=E,Z=F*E;j<k;++j,Z+=F){var z=D[M+Z],H=D[M+Z+y],U=P[j];e:for(var re=L,ee=F*L;re<O;++re,ee+=F){var J=N[M+ee],Q=V[re];if(!(J<=z||H<J)){for(var ne=M+1;ne<y;++ne){var K=D[ne+Z],oe=D[ne+y+Z],le=N[ne+ee],se=N[ne+y+ee];if(oe<le||se<K)continue e}var de=h(Q,U);if(de!==void 0)return de}}}}(r,i,a,l,d,c,_,p,g,m,b):function(y,M,h,E,k,D,P,L,O,N,V){for(var F=2*y,j=E,Z=F*E;j<k;++j,Z+=F){var z=D[M+Z],H=D[M+Z+y],U=P[j];e:for(var re=L,ee=F*L;re<O;++re,ee+=F){var J=N[M+ee],Q=V[re];if(!(J<z||H<J)){for(var ne=M+1;ne<y;++ne){var K=D[ne+Z],oe=D[ne+y+Z],le=N[ne+ee],se=N[ne+y+ee];if(oe<le||se<K)continue e}var de=h(U,Q);if(de!==void 0)return de}}}}(r,i,a,l,d,c,_,p,g,m,b):u?function(y,M,h,E,k,D,P,L,O,N,V){for(var F=2*y,j=L,Z=F*L;j<O;++j,Z+=F){var z=N[M+Z],H=V[j];e:for(var U=E,re=F*E;U<k;++U,re+=F){var ee=D[M+re],J=D[M+re+y],Q=P[U];if(!(z<=ee||J<z)){for(var ne=M+1;ne<y;++ne){var K=D[ne+re],oe=D[ne+y+re],le=N[ne+Z],se=N[ne+y+Z];if(oe<le||se<K)continue e}var de=h(H,Q);if(de!==void 0)return de}}}}(r,i,a,l,d,c,_,p,g,m,b):function(y,M,h,E,k,D,P,L,O,N,V){for(var F=2*y,j=L,Z=F*L;j<O;++j,Z+=F){var z=N[M+Z],H=V[j];e:for(var U=E,re=F*E;U<k;++U,re+=F){var ee=D[M+re],J=D[M+re+y],Q=P[U];if(!(z<ee||J<z)){for(var ne=M+1;ne<y;++ne){var K=D[ne+re],oe=D[ne+y+re],le=N[ne+Z],se=N[ne+y+Z];if(oe<le||se<K)continue e}var de=h(Q,H);if(de!==void 0)return de}}}}(r,i,a,l,d,c,_,p,g,m,b)}}s.partial=t(!1),s.full=t(!0)},7150:function(f,s,t){"use strict";f.exports=function(F,j,Z,z,H,U,re,ee,J){(function(ze,Pe){var Ue=8*r.log2(Pe+1)*(ze+1)|0,Ge=r.nextPow2(k*Ue);P.length<Ge&&(o.free(P),P=o.mallocInt32(Ge));var Xe=r.nextPow2(D*Ue);L.length<Xe&&(o.free(L),L=o.mallocDouble(Xe))})(F,z+re);var Q,ne=0,K=2*F;for(O(ne++,0,0,z,0,re,Z?16:0,-1/0,1/0),Z||O(ne++,0,0,re,0,z,1,-1/0,1/0);ne>0;){var oe=(ne-=1)*k,le=P[oe],se=P[oe+1],de=P[oe+2],be=P[oe+3],_e=P[oe+4],xe=P[oe+5],ve=ne*D,ye=L[ve],me=L[ve+1],Me=1&xe,Ae=!!(16&xe),ce=H,ae=U,pe=ee,De=J;if(Me&&(ce=ee,ae=J,pe=H,De=U),!(2&xe&&se>=(de=y(F,le,se,de,ce,ae,me))||4&xe&&(se=M(F,le,se,de,ce,ae,ye))>=de)){var ke=de-se,Ee=_e-be;if(Ae){if(F*ke*(ke+Ee)<g){if((Q=l.scanComplete(F,le,j,se,de,ce,ae,be,_e,pe,De))!==void 0)return Q;continue}}else{if(F*Math.min(ke,Ee)<_){if((Q=a(F,le,j,Me,se,de,ce,ae,be,_e,pe,De))!==void 0)return Q;continue}if(F*ke*Ee<p){if((Q=l.scanBipartite(F,le,j,Me,se,de,ce,ae,be,_e,pe,De))!==void 0)return Q;continue}}var Ie=m(F,le,se,de,ce,ae,ye,me);if(se<Ie)if(F*(Ie-se)<_){if((Q=u(F,le+1,j,se,Ie,ce,ae,be,_e,pe,De))!==void 0)return Q}else if(le===F-2){if((Q=Me?l.sweepBipartite(F,j,be,_e,pe,De,se,Ie,ce,ae):l.sweepBipartite(F,j,se,Ie,ce,ae,be,_e,pe,De))!==void 0)return Q}else O(ne++,le+1,se,Ie,be,_e,Me,-1/0,1/0),O(ne++,le+1,be,_e,se,Ie,1^Me,-1/0,1/0);if(Ie<de){var Re=d(F,le,be,_e,pe,De),Ne=pe[K*Re+le],ge=b(F,le,Re,_e,pe,De,Ne);if(ge<_e&&O(ne++,le,Ie,de,ge,_e,(4|Me)+(Ae?16:0),Ne,me),be<Re&&O(ne++,le,Ie,de,be,Re,(2|Me)+(Ae?16:0),ye,Ne),Re+1===ge){if((Q=Ae?V(F,le,j,Ie,de,ce,ae,Re,pe,De[Re]):N(F,le,j,Me,Ie,de,ce,ae,Re,pe,De[Re]))!==void 0)return Q}else if(Re<ge){var we;if(Ae){if(Ie<(we=h(F,le,Ie,de,ce,ae,Ne))){var Ce=b(F,le,Ie,we,ce,ae,Ne);if(le===F-2){if(Ie<Ce&&(Q=l.sweepComplete(F,j,Ie,Ce,ce,ae,Re,ge,pe,De))!==void 0||Ce<we&&(Q=l.sweepBipartite(F,j,Ce,we,ce,ae,Re,ge,pe,De))!==void 0)return Q}else Ie<Ce&&O(ne++,le+1,Ie,Ce,Re,ge,16,-1/0,1/0),Ce<we&&(O(ne++,le+1,Ce,we,Re,ge,0,-1/0,1/0),O(ne++,le+1,Re,ge,Ce,we,1,-1/0,1/0))}}else Ie<(we=Me?E(F,le,Ie,de,ce,ae,Ne):h(F,le,Ie,de,ce,ae,Ne))&&(le===F-2?Q=Me?l.sweepBipartite(F,j,Re,ge,pe,De,Ie,we,ce,ae):l.sweepBipartite(F,j,Ie,we,ce,ae,Re,ge,pe,De):(O(ne++,le+1,Ie,we,Re,ge,Me,-1/0,1/0),O(ne++,le+1,Re,ge,Ie,we,1^Me,-1/0,1/0)))}}}}};var o=t(1888),r=t(8828),i=t(2455),a=i.partial,u=i.full,l=t(855),d=t(3545),c=t(8105),_=128,p=1<<22,g=1<<22,m=c("!(lo>=p0)&&!(p1>=hi)"),b=c("lo===p0"),y=c("lo<p0"),M=c("hi<=p0"),h=c("lo<=p0&&p0<=hi"),E=c("lo<p0&&p0<=hi"),k=6,D=2,P=o.mallocInt32(1024),L=o.mallocDouble(1024);function O(F,j,Z,z,H,U,re,ee,J){var Q=k*F;P[Q]=j,P[Q+1]=Z,P[Q+2]=z,P[Q+3]=H,P[Q+4]=U,P[Q+5]=re;var ne=D*F;L[ne]=ee,L[ne+1]=J}function N(F,j,Z,z,H,U,re,ee,J,Q,ne){var K=2*F,oe=J*K,le=Q[oe+j];e:for(var se=H,de=H*K;se<U;++se,de+=K){var be=re[de+j],_e=re[de+j+F];if(!(le<be||_e<le||z&&le===be)){for(var xe,ve=ee[se],ye=j+1;ye<F;++ye){be=re[de+ye],_e=re[de+ye+F];var me=Q[oe+ye],Me=Q[oe+ye+F];if(_e<me||Me<be)continue e}if((xe=z?Z(ne,ve):Z(ve,ne))!==void 0)return xe}}}function V(F,j,Z,z,H,U,re,ee,J,Q){var ne=2*F,K=ee*ne,oe=J[K+j];e:for(var le=z,se=z*ne;le<H;++le,se+=ne){var de=re[le];if(de!==Q){var be=U[se+j],_e=U[se+j+F];if(!(oe<be||_e<oe)){for(var xe=j+1;xe<F;++xe){be=U[se+xe],_e=U[se+xe+F];var ve=J[K+xe],ye=J[K+xe+F];if(_e<ve||ye<be)continue e}var me=Z(de,Q);if(me!==void 0)return me}}}}},3545:function(f,s,t){"use strict";f.exports=function(a,u,l,d,c,_){if(d<=l+1)return l;for(var p=l,g=d,m=d+l>>>1,b=2*a,y=m,M=c[b*m+u];p<g;){if(g-p<r){i(a,u,p,g,c,_),M=c[b*m+u];break}var h=g-p,E=Math.random()*h+p|0,k=c[b*E+u],D=Math.random()*h+p|0,P=c[b*D+u],L=Math.random()*h+p|0,O=c[b*L+u];k<=P?O>=P?(y=D,M=P):k>=O?(y=E,M=k):(y=L,M=O):P>=O?(y=D,M=P):O>=k?(y=E,M=k):(y=L,M=O);for(var N=b*(g-1),V=b*y,F=0;F<b;++F,++N,++V){var j=c[N];c[N]=c[V],c[V]=j}var Z=_[g-1];for(_[g-1]=_[y],_[y]=Z,N=b*(g-1),V=b*(y=o(a,u,p,g-1,c,_,M)),F=0;F<b;++F,++N,++V)j=c[N],c[N]=c[V],c[V]=j;if(Z=_[g-1],_[g-1]=_[y],_[y]=Z,m<y){for(g=y-1;p<g&&c[b*(g-1)+u]===M;)g-=1;g+=1}else{if(!(y<m))break;for(p=y+1;p<g&&c[b*p+u]===M;)p+=1}}return o(a,u,l,m,c,_,c[b*m+u])};var o=t(8105)("lo<p0"),r=8;function i(a,u,l,d,c,_){for(var p=2*a,g=p*(l+1)+u,m=l+1;m<d;++m,g+=p)for(var b=c[g],y=m,M=p*(m-1);y>l&&c[M+u]>b;--y,M-=p){for(var h=M,E=M+p,k=0;k<p;++k,++h,++E){var D=c[h];c[h]=c[E],c[E]=D}var P=_[y];_[y]=_[y-1],_[y-1]=P}}},8105:function(f){"use strict";f.exports=function(t){return s[t]};var s={"lo===p0":function(t,o,r,i,a,u,l){for(var d=2*t,c=d*r,_=c,p=r,g=o,m=r;i>m;++m,c+=d)if(a[c+g]===l)if(p===m)p+=1,_+=d;else{for(var b=0;d>b;++b){var y=a[c+b];a[c+b]=a[_],a[_++]=y}var M=u[m];u[m]=u[p],u[p++]=M}return p},"lo<p0":function(t,o,r,i,a,u,l){for(var d=2*t,c=d*r,_=c,p=r,g=o,m=r;i>m;++m,c+=d)if(a[c+g]<l)if(p===m)p+=1,_+=d;else{for(var b=0;d>b;++b){var y=a[c+b];a[c+b]=a[_],a[_++]=y}var M=u[m];u[m]=u[p],u[p++]=M}return p},"lo<=p0":function(t,o,r,i,a,u,l){for(var d=2*t,c=d*r,_=c,p=r,g=t+o,m=r;i>m;++m,c+=d)if(a[c+g]<=l)if(p===m)p+=1,_+=d;else{for(var b=0;d>b;++b){var y=a[c+b];a[c+b]=a[_],a[_++]=y}var M=u[m];u[m]=u[p],u[p++]=M}return p},"hi<=p0":function(t,o,r,i,a,u,l){for(var d=2*t,c=d*r,_=c,p=r,g=t+o,m=r;i>m;++m,c+=d)if(a[c+g]<=l)if(p===m)p+=1,_+=d;else{for(var b=0;d>b;++b){var y=a[c+b];a[c+b]=a[_],a[_++]=y}var M=u[m];u[m]=u[p],u[p++]=M}return p},"lo<p0&&p0<=hi":function(t,o,r,i,a,u,l){for(var d=2*t,c=d*r,_=c,p=r,g=o,m=t+o,b=r;i>b;++b,c+=d){var y=a[c+g],M=a[c+m];if(y<l&&l<=M)if(p===b)p+=1,_+=d;else{for(var h=0;d>h;++h){var E=a[c+h];a[c+h]=a[_],a[_++]=E}var k=u[b];u[b]=u[p],u[p++]=k}}return p},"lo<=p0&&p0<=hi":function(t,o,r,i,a,u,l){for(var d=2*t,c=d*r,_=c,p=r,g=o,m=t+o,b=r;i>b;++b,c+=d){var y=a[c+g],M=a[c+m];if(y<=l&&l<=M)if(p===b)p+=1,_+=d;else{for(var h=0;d>h;++h){var E=a[c+h];a[c+h]=a[_],a[_++]=E}var k=u[b];u[b]=u[p],u[p++]=k}}return p},"!(lo>=p0)&&!(p1>=hi)":function(t,o,r,i,a,u,l,d){for(var c=2*t,_=c*r,p=_,g=r,m=o,b=t+o,y=r;i>y;++y,_+=c){var M=a[_+m],h=a[_+b];if(!(M>=l||d>=h))if(g===y)g+=1,p+=c;else{for(var E=0;c>E;++E){var k=a[_+E];a[_+E]=a[p],a[p++]=k}var D=u[y];u[y]=u[g],u[g++]=D}}return g}}},1811:function(f){"use strict";f.exports=function(c,_){_<=4*s?t(0,_-1,c):d(0,_-1,c)};var s=32;function t(c,_,p){for(var g=2*(c+1),m=c+1;m<=_;++m){for(var b=p[g++],y=p[g++],M=m,h=g-2;M-- >c;){var E=p[h-2],k=p[h-1];if(E<b||E===b&&k<y)break;p[h]=E,p[h+1]=k,h-=2}p[h]=b,p[h+1]=y}}function o(c,_,p){_*=2;var g=p[c*=2],m=p[c+1];p[c]=p[_],p[c+1]=p[_+1],p[_]=g,p[_+1]=m}function r(c,_,p){_*=2,p[c*=2]=p[_],p[c+1]=p[_+1]}function i(c,_,p,g){_*=2,p*=2;var m=g[c*=2],b=g[c+1];g[c]=g[_],g[c+1]=g[_+1],g[_]=g[p],g[_+1]=g[p+1],g[p]=m,g[p+1]=b}function a(c,_,p,g,m){_*=2,m[c*=2]=m[_],m[_]=p,m[c+1]=m[_+1],m[_+1]=g}function u(c,_,p){_*=2;var g=p[c*=2],m=p[_];return!(g<m)&&(g!==m||p[c+1]>p[_+1])}function l(c,_,p,g){var m=g[c*=2];return m<_||m===_&&g[c+1]<p}function d(c,_,p){var g=(_-c+1)/6|0,m=c+g,b=_-g,y=c+_>>1,M=y-g,h=y+g,E=m,k=M,D=y,P=h,L=b,O=c+1,N=_-1,V=0;u(E,k,p)&&(V=E,E=k,k=V),u(P,L,p)&&(V=P,P=L,L=V),u(E,D,p)&&(V=E,E=D,D=V),u(k,D,p)&&(V=k,k=D,D=V),u(E,P,p)&&(V=E,E=P,P=V),u(D,P,p)&&(V=D,D=P,P=V),u(k,L,p)&&(V=k,k=L,L=V),u(k,D,p)&&(V=k,k=D,D=V),u(P,L,p)&&(V=P,P=L,L=V);for(var F=p[2*k],j=p[2*k+1],Z=p[2*P],z=p[2*P+1],H=2*E,U=2*D,re=2*L,ee=2*m,J=2*y,Q=2*b,ne=0;ne<2;++ne){var K=p[H+ne],oe=p[U+ne],le=p[re+ne];p[ee+ne]=K,p[J+ne]=oe,p[Q+ne]=le}r(M,c,p),r(h,_,p);for(var se=O;se<=N;++se)if(l(se,F,j,p))se!==O&&o(se,O,p),++O;else if(!l(se,Z,z,p))for(;;){if(l(N,Z,z,p)){l(N,F,j,p)?(i(se,O,N,p),++O,--N):(o(se,N,p),--N);break}if(--N<se)break}a(c,O-1,F,j,p),a(_,N+1,Z,z,p),O-2-c<=s?t(c,O-2,p):d(c,O-2,p),_-(N+2)<=s?t(N+2,_,p):d(N+2,_,p),N-O<=s?t(O,N,p):d(O,N,p)}},855:function(f,s,t){"use strict";f.exports={init:function(M){var h=r.nextPow2(M);l.length<h&&(o.free(l),l=o.mallocInt32(h)),d.length<h&&(o.free(d),d=o.mallocInt32(h)),c.length<h&&(o.free(c),c=o.mallocInt32(h)),_.length<h&&(o.free(_),_=o.mallocInt32(h)),p.length<h&&(o.free(p),p=o.mallocInt32(h)),g.length<h&&(o.free(g),g=o.mallocInt32(h));var E=8*h;m.length<E&&(o.free(m),m=o.mallocDouble(E))},sweepBipartite:function(M,h,E,k,D,P,L,O,N,V){for(var F=0,j=2*M,Z=M-1,z=j-1,H=E;H<k;++H){var U=P[H],re=j*H;m[F++]=D[re+Z],m[F++]=-(U+1),m[F++]=D[re+z],m[F++]=U}for(H=L;H<O;++H){U=V[H]+a;var ee=j*H;m[F++]=N[ee+Z],m[F++]=-U,m[F++]=N[ee+z],m[F++]=U}var J=F>>>1;i(m,J);var Q=0,ne=0;for(H=0;H<J;++H){var K=0|m[2*H+1];if(K>=a)b(c,_,ne--,K=K-a|0);else if(K>=0)b(l,d,Q--,K);else if(K<=-a){K=-K-a|0;for(var oe=0;oe<Q;++oe)if((le=h(l[oe],K))!==void 0)return le;y(c,_,ne++,K)}else{for(K=-K-1|0,oe=0;oe<ne;++oe){var le;if((le=h(K,c[oe]))!==void 0)return le}y(l,d,Q++,K)}}},sweepComplete:function(M,h,E,k,D,P,L,O,N,V){for(var F=0,j=2*M,Z=M-1,z=j-1,H=E;H<k;++H){var U=P[H]+1<<1,re=j*H;m[F++]=D[re+Z],m[F++]=-U,m[F++]=D[re+z],m[F++]=U}for(H=L;H<O;++H){U=V[H]+1<<1;var ee=j*H;m[F++]=N[ee+Z],m[F++]=1|-U,m[F++]=N[ee+z],m[F++]=1|U}var J=F>>>1;i(m,J);var Q=0,ne=0,K=0;for(H=0;H<J;++H){var oe=0|m[2*H+1],le=1&oe;if(H<J-1&&oe>>1==m[2*H+3]>>1&&(le=2,H+=1),oe<0){for(var se=-(oe>>1)-1,de=0;de<K;++de)if((be=h(p[de],se))!==void 0)return be;if(le!==0){for(de=0;de<Q;++de)if((be=h(l[de],se))!==void 0)return be}if(le!==1)for(de=0;de<ne;++de){var be;if((be=h(c[de],se))!==void 0)return be}le===0?y(l,d,Q++,se):le===1?y(c,_,ne++,se):le===2&&y(p,g,K++,se)}else se=(oe>>1)-1,le===0?b(l,d,Q--,se):le===1?b(c,_,ne--,se):le===2&&b(p,g,K--,se)}},scanBipartite:function(M,h,E,k,D,P,L,O,N,V,F,j){var Z=0,z=2*M,H=h,U=h+M,re=1,ee=1;k?ee=a:re=a;for(var J=D;J<P;++J){var Q=J+re,ne=z*J;m[Z++]=L[ne+H],m[Z++]=-Q,m[Z++]=L[ne+U],m[Z++]=Q}for(J=N;J<V;++J){Q=J+ee;var K=z*J;m[Z++]=F[K+H],m[Z++]=-Q}var oe=Z>>>1;i(m,oe);var le=0;for(J=0;J<oe;++J){var se=0|m[2*J+1];if(se<0){var de=!1;if((Q=-se)>=a?(de=!k,Q-=a):(de=!!k,Q-=1),de)y(l,d,le++,Q);else{var be=j[Q],_e=z*Q,xe=F[_e+h+1],ve=F[_e+h+1+M];e:for(var ye=0;ye<le;++ye){var me=l[ye],Me=z*me;if(!(ve<L[Me+h+1]||L[Me+h+1+M]<xe)){for(var Ae=h+2;Ae<M;++Ae)if(F[_e+Ae+M]<L[Me+Ae]||L[Me+Ae+M]<F[_e+Ae])continue e;var ce,ae=O[me];if((ce=k?E(be,ae):E(ae,be))!==void 0)return ce}}}}else b(l,d,le--,se-re)}},scanComplete:function(M,h,E,k,D,P,L,O,N,V,F){for(var j=0,Z=2*M,z=h,H=h+M,U=k;U<D;++U){var re=U+a,ee=Z*U;m[j++]=P[ee+z],m[j++]=-re,m[j++]=P[ee+H],m[j++]=re}for(U=O;U<N;++U){re=U+1;var J=Z*U;m[j++]=V[J+z],m[j++]=-re}var Q=j>>>1;i(m,Q);var ne=0;for(U=0;U<Q;++U){var K=0|m[2*U+1];if(K<0)if((re=-K)>=a)l[ne++]=re-a;else{var oe=F[re-=1],le=Z*re,se=V[le+h+1],de=V[le+h+1+M];e:for(var be=0;be<ne;++be){var _e=l[be],xe=L[_e];if(xe===oe)break;var ve=Z*_e;if(!(de<P[ve+h+1]||P[ve+h+1+M]<se)){for(var ye=h+2;ye<M;++ye)if(V[le+ye+M]<P[ve+ye]||P[ve+ye+M]<V[le+ye])continue e;var me=E(xe,oe);if(me!==void 0)return me}}}else{for(re=K-a,be=ne-1;be>=0;--be)if(l[be]===re){for(ye=be+1;ye<ne;++ye)l[ye-1]=l[ye];break}--ne}}}};var o=t(1888),r=t(8828),i=t(1811),a=1<<28,u=1024,l=o.mallocInt32(u),d=o.mallocInt32(u),c=o.mallocInt32(u),_=o.mallocInt32(u),p=o.mallocInt32(u),g=o.mallocInt32(u),m=o.mallocDouble(8192);function b(M,h,E,k){var D=h[k],P=M[E-1];M[D]=P,h[P]=D}function y(M,h,E,k){M[E]=k,h[k]=E}},2538:function(f,s,t){"use strict";var o=t(8902),r=t(5542),i=t(2272),a=t(5023);function u(c){return[Math.min(c[0],c[1]),Math.max(c[0],c[1])]}function l(c,_){return c[0]-_[0]||c[1]-_[1]}function d(c,_,p){return _ in c?c[_]:p}f.exports=function(c,_,p){Array.isArray(_)?(p=p||{},_=_||[]):(p=_||{},_=[]);var g=!!d(p,"delaunay",!0),m=!!d(p,"interior",!0),b=!!d(p,"exterior",!0),y=!!d(p,"infinity",!1);if(!m&&!b||c.length===0)return[];var M=o(c,_);if(g||m!==b||y){for(var h=r(c.length,function(D){return D.map(u).sort(l)}(_)),E=0;E<M.length;++E){var k=M[E];h.addTriangle(k[0],k[1],k[2])}return g&&i(c,h),b?m?y?a(h,0,y):h.cells():a(h,1,y):a(h,-1)}return M}},2272:function(f,s,t){"use strict";var o=t(2646)[4];function r(i,a,u,l,d,c){var _=a.opposite(l,d);if(!(_<0)){if(d<l){var p=l;l=d,d=p,p=c,c=_,_=p}a.isConstraint(l,d)||o(i[l],i[d],i[c],i[_])<0&&u.push(l,d)}}t(2478),f.exports=function(i,a){for(var u=[],l=i.length,d=a.stars,c=0;c<l;++c)for(var _=d[c],p=1;p<_.length;p+=2)if(!((y=_[p])<c||a.isConstraint(c,y))){for(var g=_[p-1],m=-1,b=1;b<_.length;b+=2)if(_[b-1]===y){m=_[b];break}m<0||o(i[c],i[y],i[g],i[m])<0&&u.push(c,y)}for(;u.length>0;){for(var y=u.pop(),M=(g=-1,m=-1,_=d[c=u.pop()],1);M<_.length;M+=2){var h=_[M-1],E=_[M];h===y?m=E:E===y&&(g=h)}g<0||m<0||o(i[c],i[y],i[g],i[m])>=0||(a.flip(c,y),r(i,a,u,g,c,m),r(i,a,u,c,m,g),r(i,a,u,m,y,g),r(i,a,u,y,g,m))}}},5023:function(f,s,t){"use strict";var o,r=t(2478);function i(u,l,d,c,_,p,g){this.cells=u,this.neighbor=l,this.flags=c,this.constraint=d,this.active=_,this.next=p,this.boundary=g}function a(u,l){return u[0]-l[0]||u[1]-l[1]||u[2]-l[2]}f.exports=function(u,l,d){var c=function(L,O){for(var N=L.cells(),V=N.length,F=0;F<V;++F){var j=(K=N[F])[0],Z=K[1],z=K[2];Z<z?Z<j&&(K[0]=Z,K[1]=z,K[2]=j):z<j&&(K[0]=z,K[1]=j,K[2]=Z)}N.sort(a);var H=new Array(V);for(F=0;F<H.length;++F)H[F]=0;var U=[],re=[],ee=new Array(3*V),J=new Array(3*V),Q=null;O&&(Q=[]);var ne=new i(N,ee,J,H,U,re,Q);for(F=0;F<V;++F)for(var K=N[F],oe=0;oe<3;++oe){j=K[oe],Z=K[(oe+1)%3];var le=ee[3*F+oe]=ne.locate(Z,j,L.opposite(Z,j)),se=J[3*F+oe]=L.isConstraint(j,Z);le<0&&(se?re.push(F):(U.push(F),H[F]=1),O&&Q.push([Z,j,-1]))}return ne}(u,d);if(l===0)return d?c.cells.concat(c.boundary):c.cells;for(var _=1,p=c.active,g=c.next,m=c.flags,b=c.cells,y=c.constraint,M=c.neighbor;p.length>0||g.length>0;){for(;p.length>0;){var h=p.pop();if(m[h]!==-_){m[h]=_,b[h];for(var E=0;E<3;++E){var k=M[3*h+E];k>=0&&m[k]===0&&(y[3*h+E]?g.push(k):(p.push(k),m[k]=_))}}}var D=g;g=p,p=D,g.length=0,_=-_}var P=function(L,O,N){for(var V=0,F=0;F<L.length;++F)O[F]===N&&(L[V++]=L[F]);return L.length=V,L}(b,m,l);return d?P.concat(c.boundary):P},i.prototype.locate=(o=[0,0,0],function(u,l,d){var c=u,_=l,p=d;return l<d?l<u&&(c=l,_=d,p=u):d<u&&(c=d,_=u,p=l),c<0?-1:(o[0]=c,o[1]=_,o[2]=p,r.eq(this.cells,o,a))})},8902:function(f,s,t){"use strict";var o=t(2478),r=t(3250)[3];function i(g,m,b,y,M){this.a=g,this.b=m,this.idx=b,this.lowerIds=y,this.upperIds=M}function a(g,m,b,y){this.a=g,this.b=m,this.type=b,this.idx=y}function u(g,m){var b=g.a[0]-m.a[0]||g.a[1]-m.a[1]||g.type-m.type;return b||(g.type!==0&&(b=r(g.a,g.b,m.b))?b:g.idx-m.idx)}function l(g,m){return r(g.a,g.b,m)}function d(g,m,b,y,M){for(var h=o.lt(m,y,l),E=o.gt(m,y,l),k=h;k<E;++k){for(var D=m[k],P=D.lowerIds,L=P.length;L>1&&r(b[P[L-2]],b[P[L-1]],y)>0;)g.push([P[L-1],P[L-2],M]),L-=1;P.length=L,P.push(M);var O=D.upperIds;for(L=O.length;L>1&&r(b[O[L-2]],b[O[L-1]],y)<0;)g.push([O[L-2],O[L-1],M]),L-=1;O.length=L,O.push(M)}}function c(g,m){var b;return(b=g.a[0]<m.a[0]?r(g.a,g.b,m.a):r(m.b,m.a,g.a))?b:(b=m.b[0]<g.b[0]?r(g.a,g.b,m.b):r(m.b,m.a,g.b))||g.idx-m.idx}function _(g,m,b){var y=o.le(g,b,c),M=g[y],h=M.upperIds,E=h[h.length-1];M.upperIds=[E],g.splice(y+1,0,new i(b.a,b.b,b.idx,[E],h))}function p(g,m,b){var y=b.a;b.a=b.b,b.b=y;var M=o.eq(g,b,c),h=g[M];g[M-1].upperIds=h.upperIds,g.splice(M,1)}f.exports=function(g,m){for(var b=g.length,y=m.length,M=[],h=0;h<b;++h)M.push(new a(g[h],null,0,h));for(h=0;h<y;++h){var E=m[h],k=g[E[0]],D=g[E[1]];k[0]<D[0]?M.push(new a(k,D,2,h),new a(D,k,1,h)):k[0]>D[0]&&M.push(new a(D,k,2,h),new a(k,D,1,h))}M.sort(u);for(var P=M[0].a[0]-(1+Math.abs(M[0].a[0]))*Math.pow(2,-52),L=[new i([P,1],[P,0],-1,[],[],[],[])],O=[],N=(h=0,M.length);h<N;++h){var V=M[h],F=V.type;F===0?d(O,L,g,V.a,V.idx):F===2?_(L,0,V):p(L,0,V)}return O}},5542:function(f,s,t){"use strict";var o=t(2478);function r(u,l){this.stars=u,this.edges=l}f.exports=function(u,l){for(var d=new Array(u),c=0;c<u;++c)d[c]=[];return new r(d,l)};var i=r.prototype;function a(u,l,d){for(var c=1,_=u.length;c<_;c+=2)if(u[c-1]===l&&u[c]===d)return u[c-1]=u[_-2],u[c]=u[_-1],void(u.length=_-2)}i.isConstraint=function(){var u=[0,0];function l(d,c){return d[0]-c[0]||d[1]-c[1]}return function(d,c){return u[0]=Math.min(d,c),u[1]=Math.max(d,c),o.eq(this.edges,u,l)>=0}}(),i.removeTriangle=function(u,l,d){var c=this.stars;a(c[u],l,d),a(c[l],d,u),a(c[d],u,l)},i.addTriangle=function(u,l,d){var c=this.stars;c[u].push(l,d),c[l].push(d,u),c[d].push(u,l)},i.opposite=function(u,l){for(var d=this.stars[l],c=1,_=d.length;c<_;c+=2)if(d[c]===u)return d[c-1];return-1},i.flip=function(u,l){var d=this.opposite(u,l),c=this.opposite(l,u);this.removeTriangle(u,l,d),this.removeTriangle(l,u,c),this.addTriangle(u,c,d),this.addTriangle(l,d,c)},i.edges=function(){for(var u=this.stars,l=[],d=0,c=u.length;d<c;++d)for(var _=u[d],p=0,g=_.length;p<g;p+=2)l.push([_[p],_[p+1]]);return l},i.cells=function(){for(var u=this.stars,l=[],d=0,c=u.length;d<c;++d)for(var _=u[d],p=0,g=_.length;p<g;p+=2){var m=_[p],b=_[p+1];d<Math.min(m,b)&&l.push([d,m,b])}return l}},2419:function(f){"use strict";f.exports=function(s){for(var t=1,o=1;o<s.length;++o)for(var r=0;r<o;++r)if(s[o]<s[r])t=-t;else if(s[r]===s[o])return 0;return t}},3628:function(f,s,t){"use strict";var o=t(1338),r=t(727);function i(l,d){for(var c=0,_=l.length,p=0;p<_;++p)c+=l[p]*d[p];return c}function a(l){var d=l.length;if(d===0)return[];l[0].length;var c=o([l.length+1,l.length+1],1),_=o([l.length+1],1);c[d][d]=0;for(var p=0;p<d;++p){for(var g=0;g<=p;++g)c[g][p]=c[p][g]=2*i(l[p],l[g]);_[p]=i(l[p],l[p])}var m=r(c,_),b=0,y=m[d+1];for(p=0;p<y.length;++p)b+=y[p];var M=new Array(d);for(p=0;p<d;++p){y=m[p];var h=0;for(g=0;g<y.length;++g)h+=y[g];M[p]=h/b}return M}function u(l){if(l.length===0)return[];for(var d=l[0].length,c=o([d]),_=a(l),p=0;p<l.length;++p)for(var g=0;g<d;++g)c[g]+=l[p][g]*_[p];return c}u.barycenetric=a,f.exports=u},6037:function(f,s,t){f.exports=function(r){for(var i=o(r),a=0,u=0;u<r.length;++u)for(var l=r[u],d=0;d<i.length;++d)a+=Math.pow(l[d]-i[d],2);return Math.sqrt(a/r.length)};var o=t(3628)},332:function(f,s,t){"use strict";f.exports=function(E,k,D){var P;if(D){P=k;for(var L=new Array(k.length),O=0;O<k.length;++O){var N=k[O];L[O]=[N[0],N[1],D[O]]}k=L}for(var V=function(F,j,Z){var z=m(F,[],g(F));return M(j,z,Z),!!z}(E,k,!!D);h(E,k,!!D);)V=!0;if(D&&V)for(P.length=0,D.length=0,O=0;O<k.length;++O)N=k[O],P.push([N[0],N[1]]),D.push(N[2]);return V};var o=t(1755),r=t(6867),i=t(1125),a=t(7842),u=t(1318),l=t(946),d=t(5838),c=t(1278),_=t(3637);function p(E){var k=l(E);return[c(k,-1/0),c(k,1/0)]}function g(E){for(var k=new Array(E.length),D=0;D<E.length;++D){var P=E[D];k[D]=[c(P[0],-1/0),c(P[1],-1/0),c(P[0],1/0),c(P[1],1/0)]}return k}function m(E,k,D){for(var P=k.length,L=new o(P),O=[],N=0;N<k.length;++N){var V=k[N],F=p(V[0]),j=p(V[1]);O.push([c(F[0],-1/0),c(j[0],-1/0),c(F[1],1/0),c(j[1],1/0)])}r(O,function(re,ee){L.link(re,ee)});var Z=!0,z=new Array(P);for(N=0;N<P;++N)(U=L.find(N))!==N&&(Z=!1,E[U]=[Math.min(E[N][0],E[U][0]),Math.min(E[N][1],E[U][1])]);if(Z)return null;var H=0;for(N=0;N<P;++N){var U;(U=L.find(N))===N?(z[N]=H,E[H++]=E[N]):z[N]=-1}for(E.length=H,N=0;N<P;++N)z[N]<0&&(z[N]=z[L.find(N)]);return z}function b(E,k){return E[0]-k[0]||E[1]-k[1]}function y(E,k){return E[0]-k[0]||E[1]-k[1]||(E[2]<k[2]?-1:E[2]>k[2]?1:0)}function M(E,k,D){if(E.length!==0){if(k)for(var P=0;P<E.length;++P){var L=k[(N=E[P])[0]],O=k[N[1]];N[0]=Math.min(L,O),N[1]=Math.max(L,O)}else for(P=0;P<E.length;++P){var N;L=(N=E[P])[0],O=N[1],N[0]=Math.min(L,O),N[1]=Math.max(L,O)}D?E.sort(y):E.sort(b);var V=1;for(P=1;P<E.length;++P){var F=E[P-1],j=E[P];(j[0]!==F[0]||j[1]!==F[1]||D&&j[2]!==F[2])&&(E[V++]=j)}E.length=V}}function h(E,k,D){var P=function(F,j){for(var Z=new Array(j.length),z=0;z<j.length;++z){var H=j[z],U=F[H[0]],re=F[H[1]];Z[z]=[c(Math.min(U[0],re[0]),-1/0),c(Math.min(U[1],re[1]),-1/0),c(Math.max(U[0],re[0]),1/0),c(Math.max(U[1],re[1]),1/0)]}return Z}(E,k),L=function(F,j,Z){var z=[];return r(Z,function(H,U){var re=j[H],ee=j[U];if(re[0]!==ee[0]&&re[0]!==ee[1]&&re[1]!==ee[0]&&re[1]!==ee[1]){var J=F[re[0]],Q=F[re[1]],ne=F[ee[0]],K=F[ee[1]];i(J,Q,ne,K)&&z.push([H,U])}}),z}(E,k,P),O=function(F,j,Z,z){var H=[];return r(Z,z,function(U,re){var ee=j[U];if(ee[0]!==re&&ee[1]!==re){var J=F[re],Q=F[ee[0]],ne=F[ee[1]];i(Q,ne,J,J)&&H.push([U,re])}}),H}(E,k,P,g(E)),N=function(F,j,Z,z,H){var U,re,ee=F.map(function(ce){return[a(ce[0]),a(ce[1])]});for(U=0;U<Z.length;++U){var J=Z[U];re=J[0];var Q=J[1],ne=j[re],K=j[Q],oe=_(d(F[ne[0]]),d(F[ne[1]]),d(F[K[0]]),d(F[K[1]]));if(oe){var le=F.length;F.push([l(oe[0]),l(oe[1])]),ee.push(oe),z.push([re,le],[Q,le])}}for(z.sort(function(ce,ae){if(ce[0]!==ae[0])return ce[0]-ae[0];var pe=ee[ce[1]],De=ee[ae[1]];return u(pe[0],De[0])||u(pe[1],De[1])}),U=z.length-1;U>=0;--U){var se=j[re=(Me=z[U])[0]],de=se[0],be=se[1],_e=F[de],xe=F[be];if((_e[0]-xe[0]||_e[1]-xe[1])<0){var ve=de;de=be,be=ve}se[0]=de;var ye,me=se[1]=Me[1];for(H&&(ye=se[2]);U>0&&z[U-1][0]===re;){var Me,Ae=(Me=z[--U])[1];H?j.push([me,Ae,ye]):j.push([me,Ae]),me=Ae}H?j.push([me,be,ye]):j.push([me,be])}return ee}(E,k,L,O,D),V=m(E,N);return M(k,V,D),!!V||L.length>0||O.length>0}},3637:function(f,s,t){"use strict";f.exports=function(_,p,g,m){var b=u(p,_),y=u(m,g),M=c(b,y);if(a(M)===0)return null;var h=c(y,u(_,g)),E=r(h,M),k=d(b,E);return l(_,k)};var o=t(6504),r=t(8697),i=t(5572),a=t(7721),u=t(544),l=t(2653),d=t(8987);function c(_,p){return i(o(_[0],p[1]),o(_[1],p[0]))}},3642:function(f){f.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},6729:function(f,s,t){"use strict";var o=t(3642),r=t(395);function i(l){return[l[0]/255,l[1]/255,l[2]/255,l[3]]}function a(l){for(var d,c="#",_=0;_<3;++_)c+=("00"+(d=(d=l[_]).toString(16))).substr(d.length);return c}function u(l){return"rgba("+l.join(",")+")"}f.exports=function(l){var d,c,_,p,g,m,b,y,M,h;if(l||(l={}),y=(l.nshades||72)-1,b=l.format||"hex",(m=l.colormap)||(m="jet"),typeof m=="string"){if(m=m.toLowerCase(),!o[m])throw Error(m+" not a supported colorscale");g=o[m]}else{if(!Array.isArray(m))throw Error("unsupported colormap option",m);g=m.slice()}if(g.length>y+1)throw new Error(m+" map requires nshades to be at least size "+g.length);M=Array.isArray(l.alpha)?l.alpha.length!==2?[1,1]:l.alpha.slice():typeof l.alpha=="number"?[l.alpha,l.alpha]:[1,1],d=g.map(function(L){return Math.round(L.index*y)}),M[0]=Math.min(Math.max(M[0],0),1),M[1]=Math.min(Math.max(M[1],0),1);var E=g.map(function(L,O){var N=g[O].index,V=g[O].rgb.slice();return V.length===4&&V[3]>=0&&V[3]<=1||(V[3]=M[0]+(M[1]-M[0])*N),V}),k=[];for(h=0;h<d.length-1;++h){p=d[h+1]-d[h],c=E[h],_=E[h+1];for(var D=0;D<p;D++){var P=D/p;k.push([Math.round(r(c[0],_[0],P)),Math.round(r(c[1],_[1],P)),Math.round(r(c[2],_[2],P)),r(c[3],_[3],P)])}}return k.push(g[g.length-1].rgb.concat(M[1])),b==="hex"?k=k.map(a):b==="rgbaString"?k=k.map(u):b==="float"&&(k=k.map(i)),k}},3140:function(f,s,t){"use strict";f.exports=function(d,c,_,p){var g=o(c,_,p);if(g===0){var m=r(o(d,c,_)),b=r(o(d,c,p));if(m===b){if(m===0){var y=l(d,c,_);return y===l(d,c,p)?0:y?1:-1}return 0}return b===0?m>0||l(d,c,p)?-1:1:m===0?b>0||l(d,c,_)?1:-1:r(b-m)}var M=o(d,c,_);return M>0?g>0&&o(d,c,p)>0?1:-1:M<0?g>0||o(d,c,p)>0?1:-1:o(d,c,p)>0||l(d,c,_)?1:-1};var o=t(3250),r=t(8572),i=t(9362),a=t(5382),u=t(8210);function l(d,c,_){var p=i(d[0],-c[0]),g=i(d[1],-c[1]),m=i(_[0],-c[0]),b=i(_[1],-c[1]),y=u(a(p,m),a(g,b));return y[y.length-1]>=0}},8572:function(f){"use strict";f.exports=function(s){return s<0?-1:s>0?1:0}},8507:function(f){f.exports=function(o,r){var i=o.length,a=o.length-r.length;if(a)return a;switch(i){case 0:return 0;case 1:return o[0]-r[0];case 2:return o[0]+o[1]-r[0]-r[1]||s(o[0],o[1])-s(r[0],r[1]);case 3:var u=o[0]+o[1],l=r[0]+r[1];if(a=u+o[2]-(l+r[2]))return a;var d=s(o[0],o[1]),c=s(r[0],r[1]);return s(d,o[2])-s(c,r[2])||s(d+o[2],u)-s(c+r[2],l);case 4:var _=o[0],p=o[1],g=o[2],m=o[3],b=r[0],y=r[1],M=r[2],h=r[3];return _+p+g+m-(b+y+M+h)||s(_,p,g,m)-s(b,y,M,h,b)||s(_+p,_+g,_+m,p+g,p+m,g+m)-s(b+y,b+M,b+h,y+M,y+h,M+h)||s(_+p+g,_+p+m,_+g+m,p+g+m)-s(b+y+M,b+y+h,b+M+h,y+M+h);default:for(var E=o.slice().sort(t),k=r.slice().sort(t),D=0;D<i;++D)if(a=E[D]-k[D])return a;return 0}};var s=Math.min;function t(o,r){return o-r}},3788:function(f,s,t){"use strict";var o=t(8507),r=t(2419);f.exports=function(i,a){return o(i,a)||r(i)-r(a)}},7352:function(f,s,t){"use strict";var o=t(5721),r=t(4750),i=t(2690);f.exports=function(a){var u=a.length;if(u===0)return[];if(u===1)return[[0]];var l=a[0].length;return l===0?[]:l===1?o(a):l===2?r(a):i(a,l)}},5721:function(f){"use strict";f.exports=function(s){for(var t=0,o=0,r=1;r<s.length;++r)s[r][0]<s[t][0]&&(t=r),s[r][0]>s[o][0]&&(o=r);return t<o?[[t],[o]]:t>o?[[o],[t]]:[[t]]}},4750:function(f,s,t){"use strict";f.exports=function(r){var i=o(r),a=i.length;if(a<=2)return[];for(var u=new Array(a),l=i[a-1],d=0;d<a;++d){var c=i[d];u[d]=[l,c],l=c}return u};var o=t(3090)},2690:function(f,s,t){"use strict";f.exports=function(i,a){try{return o(i,!0)}catch{var u=r(i);if(u.length<=a)return[];var l=function(c,_){for(var p=c.length,g=new Array(p),m=0;m<_.length;++m)g[m]=c[_[m]];var b=_.length;for(m=0;m<p;++m)_.indexOf(m)<0&&(g[b++]=c[m]);return g}(i,u);return function(c,_){for(var p=c.length,g=_.length,m=0;m<p;++m)for(var b=c[m],y=0;y<b.length;++y){var M=b[y];if(M<g)b[y]=_[M];else{M-=g;for(var h=0;h<g;++h)M>=_[h]&&(M+=1);b[y]=M}}return c}(o(l,!0),u)}};var o=t(8954),r=t(3952)},4769:function(f){"use strict";f.exports=function(s,t,o,r,i,a){var u=i-1,l=i*i,d=u*u,c=(1+2*i)*d,_=i*d,p=l*(3-2*i),g=l*u;if(s.length){a||(a=new Array(s.length));for(var m=s.length-1;m>=0;--m)a[m]=c*s[m]+_*t[m]+p*o[m]+g*r[m];return a}return c*s+_*t+p*o+g*r},f.exports.derivative=function(s,t,o,r,i,a){var u=6*i*i-6*i,l=3*i*i-4*i+1,d=-6*i*i+6*i,c=3*i*i-2*i;if(s.length){a||(a=new Array(s.length));for(var _=s.length-1;_>=0;--_)a[_]=u*s[_]+l*t[_]+d*o[_]+c*r[_];return a}return u*s+l*t+d*o[_]+c*r}},7642:function(f,s,t){"use strict";var o=t(8954),r=t(1682);function i(u,l){this.point=u,this.index=l}function a(u,l){for(var d=u.point,c=l.point,_=d.length,p=0;p<_;++p){var g=c[p]-d[p];if(g)return g}return 0}f.exports=function(u,l){var d=u.length;if(d===0)return[];var c=u[0].length;if(c<1)return[];if(c===1)return function(N,V,F){if(N===1)return F?[[-1,0]]:[];var j=V.map(function(re,ee){return[re[0],ee]});j.sort(function(re,ee){return re[0]-ee[0]});for(var Z=new Array(N-1),z=1;z<N;++z){var H=j[z-1],U=j[z];Z[z-1]=[H[1],U[1]]}return F&&Z.push([-1,Z[0][1]],[Z[N-1][1],-1]),Z}(d,u,l);for(var _=new Array(d),p=1,g=0;g<d;++g){for(var m=u[g],b=new Array(c+1),y=0,M=0;M<c;++M){var h=m[M];b[M]=h,y+=h*h}b[c]=y,_[g]=new i(b,g),p=Math.max(y,p)}r(_,a),d=_.length;var E=new Array(d+c+1),k=new Array(d+c+1),D=(c+1)*(c+1)*p,P=new Array(c+1);for(g=0;g<=c;++g)P[g]=0;for(P[c]=D,E[0]=P.slice(),k[0]=-1,g=0;g<=c;++g)(b=P.slice())[g]=1,E[g+1]=b,k[g+1]=-1;for(g=0;g<d;++g){var L=_[g];E[g+c+1]=L.point,k[g+c+1]=L.index}var O=o(E,!1);if(O=l?O.filter(function(N){for(var V=0,F=0;F<=c;++F){var j=k[N[F]];if(j<0&&++V>=2)return!1;N[F]=j}return!0}):O.filter(function(N){for(var V=0;V<=c;++V){var F=k[N[V]];if(F<0)return!1;N[V]=F}return!0}),1&c)for(g=0;g<O.length;++g)b=(L=O[g])[0],L[0]=L[1],L[1]=b;return O}},2361:function(f){var s=!1;if(typeof Float64Array<"u"){var t=new Float64Array(1),o=new Uint32Array(t.buffer);t[0]=1,s=!0,o[1]===1072693248?(f.exports=function(i){return t[0]=i,[o[0],o[1]]},f.exports.pack=function(i,a){return o[0]=i,o[1]=a,t[0]},f.exports.lo=function(i){return t[0]=i,o[0]},f.exports.hi=function(i){return t[0]=i,o[1]}):o[0]===1072693248?(f.exports=function(i){return t[0]=i,[o[1],o[0]]},f.exports.pack=function(i,a){return o[1]=i,o[0]=a,t[0]},f.exports.lo=function(i){return t[0]=i,o[1]},f.exports.hi=function(i){return t[0]=i,o[0]}):s=!1}if(!s){var r=new Buffer(8);f.exports=function(i){return r.writeDoubleLE(i,0,!0),[r.readUInt32LE(0,!0),r.readUInt32LE(4,!0)]},f.exports.pack=function(i,a){return r.writeUInt32LE(i,0,!0),r.writeUInt32LE(a,4,!0),r.readDoubleLE(0,!0)},f.exports.lo=function(i){return r.writeDoubleLE(i,0,!0),r.readUInt32LE(0,!0)},f.exports.hi=function(i){return r.writeDoubleLE(i,0,!0),r.readUInt32LE(4,!0)}}f.exports.sign=function(i){return f.exports.hi(i)>>>31},f.exports.exponent=function(i){return(f.exports.hi(i)<<1>>>21)-1023},f.exports.fraction=function(i){var a=f.exports.lo(i),u=f.exports.hi(i),l=1048575&u;return 2146435072&u&&(l+=1048576),[a,l]},f.exports.denormalized=function(i){return!(2146435072&f.exports.hi(i))}},1338:function(f){"use strict";function s(t,o,r){var i=0|t[r];if(i<=0)return[];var a,u=new Array(i);if(r===t.length-1)for(a=0;a<i;++a)u[a]=o;else for(a=0;a<i;++a)u[a]=s(t,o,r+1);return u}f.exports=function(t,o){switch(o===void 0&&(o=0),typeof t){case"number":if(t>0)return function(r,i){var a,u;for(a=new Array(r),u=0;u<r;++u)a[u]=i;return a}(0|t,o);break;case"object":if(typeof t.length=="number")return s(t,o,0)}return[]}},3134:function(f,s,t){"use strict";f.exports=function(r,i){var a=r.length;if(typeof i!="number"){i=0;for(var u=0;u<a;++u){var l=r[u];i=Math.max(i,l[0],l[1])}i=1+(0|i)}i|=0;var d=new Array(i);for(u=0;u<i;++u)d[u]=[];for(u=0;u<a;++u)d[(l=r[u])[0]].push(l[1]),d[l[1]].push(l[0]);for(var c=0;c<i;++c)o(d[c],function(_,p){return _-p});return d};var o=t(1682)},5033:function(f){"use strict";f.exports=function(s,t,o){var r=t||0,i=o||1;return[[s[12]+s[0],s[13]+s[1],s[14]+s[2],s[15]+s[3]],[s[12]-s[0],s[13]-s[1],s[14]-s[2],s[15]-s[3]],[s[12]+s[4],s[13]+s[5],s[14]+s[6],s[15]+s[7]],[s[12]-s[4],s[13]-s[5],s[14]-s[6],s[15]-s[7]],[r*s[12]+s[8],r*s[13]+s[9],r*s[14]+s[10],r*s[15]+s[11]],[i*s[12]-s[8],i*s[13]-s[9],i*s[14]-s[10],i*s[15]-s[11]]]}},9215:function(f,s,t){"use strict";f.exports=function(d,c,_){switch(arguments.length){case 0:return new a([0],[0],0);case 1:return typeof d=="number"?new a(p=l(d),p,0):new a(d,l(d.length),0);case 2:var p;if(typeof c=="number")return new a(d,p=l(d.length),+c);_=0;case 3:if(d.length!==c.length)throw new Error("state and velocity lengths must match");return new a(d,c,_)}};var o=t(4769),r=t(2478);function i(d,c,_){return Math.min(c,Math.max(d,_))}function a(d,c,_){this.dimension=d.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var p=0;p<this.dimension;++p)this.bounds[0][p]=-1/0,this.bounds[1][p]=1/0;this._state=d.slice().reverse(),this._velocity=c.slice().reverse(),this._time=[_],this._scratch=[d.slice(),d.slice(),d.slice(),d.slice(),d.slice()]}var u=a.prototype;function l(d){for(var c=new Array(d),_=0;_<d;++_)c[_]=0;return c}u.flush=function(d){var c=r.gt(this._time,d)-1;c<=0||(this._time.splice(0,c),this._state.splice(0,c*this.dimension),this._velocity.splice(0,c*this.dimension))},u.curve=function(d){var c=this._time,_=c.length,p=r.le(c,d),g=this._scratch[0],m=this._state,b=this._velocity,y=this.dimension,M=this.bounds;if(p<0)for(var h=y-1,E=0;E<y;++E,--h)g[E]=m[h];else if(p>=_-1){h=m.length-1;var k=d-c[_-1];for(E=0;E<y;++E,--h)g[E]=m[h]+k*b[h]}else{h=y*(p+1)-1;var D=c[p],P=c[p+1]-D||1,L=this._scratch[1],O=this._scratch[2],N=this._scratch[3],V=this._scratch[4],F=!0;for(E=0;E<y;++E,--h)L[E]=m[h],N[E]=b[h]*P,O[E]=m[h+y],V[E]=b[h+y]*P,F=F&&L[E]===O[E]&&N[E]===V[E]&&N[E]===0;if(F)for(E=0;E<y;++E)g[E]=L[E];else o(L,N,O,V,(d-D)/P,g)}var j=M[0],Z=M[1];for(E=0;E<y;++E)g[E]=i(j[E],Z[E],g[E]);return g},u.dcurve=function(d){var c=this._time,_=c.length,p=r.le(c,d),g=this._scratch[0],m=this._state,b=this._velocity,y=this.dimension;if(p>=_-1)for(var M=m.length-1,h=(c[_-1],0);h<y;++h,--M)g[h]=b[M];else{M=y*(p+1)-1;var E=c[p],k=c[p+1]-E||1,D=this._scratch[1],P=this._scratch[2],L=this._scratch[3],O=this._scratch[4],N=!0;for(h=0;h<y;++h,--M)D[h]=m[M],L[h]=b[M]*k,P[h]=m[M+y],O[h]=b[M+y]*k,N=N&&D[h]===P[h]&&L[h]===O[h]&&L[h]===0;if(N)for(h=0;h<y;++h)g[h]=0;else for(o.derivative(D,L,P,O,(d-E)/k,g),h=0;h<y;++h)g[h]/=k}return g},u.lastT=function(){var d=this._time;return d[d.length-1]},u.stable=function(){for(var d=this._velocity,c=d.length,_=this.dimension-1;_>=0;--_)if(d[--c])return!1;return!0},u.jump=function(d){var c=this.lastT(),_=this.dimension;if(!(d<c||arguments.length!==_+1)){var p=this._state,g=this._velocity,m=p.length-this.dimension,b=this.bounds,y=b[0],M=b[1];this._time.push(c,d);for(var h=0;h<2;++h)for(var E=0;E<_;++E)p.push(p[m++]),g.push(0);for(this._time.push(d),E=_;E>0;--E)p.push(i(y[E-1],M[E-1],arguments[E])),g.push(0)}},u.push=function(d){var c=this.lastT(),_=this.dimension;if(!(d<c||arguments.length!==_+1)){var p=this._state,g=this._velocity,m=p.length-this.dimension,b=d-c,y=this.bounds,M=y[0],h=y[1],E=b>1e-6?1/b:0;this._time.push(d);for(var k=_;k>0;--k){var D=i(M[k-1],h[k-1],arguments[k]);p.push(D),g.push((D-p[m++])*E)}}},u.set=function(d){var c=this.dimension;if(!(d<this.lastT()||arguments.length!==c+1)){var _=this._state,p=this._velocity,g=this.bounds,m=g[0],b=g[1];this._time.push(d);for(var y=c;y>0;--y)_.push(i(m[y-1],b[y-1],arguments[y])),p.push(0)}},u.move=function(d){var c=this.lastT(),_=this.dimension;if(!(d<=c||arguments.length!==_+1)){var p=this._state,g=this._velocity,m=p.length-this.dimension,b=this.bounds,y=b[0],M=b[1],h=d-c,E=h>1e-6?1/h:0;this._time.push(d);for(var k=_;k>0;--k){var D=arguments[k];p.push(i(y[k-1],M[k-1],p[m++]+D)),g.push(D*E)}}},u.idle=function(d){var c=this.lastT();if(!(d<c)){var _=this.dimension,p=this._state,g=this._velocity,m=p.length-_,b=this.bounds,y=b[0],M=b[1],h=d-c;this._time.push(d);for(var E=_-1;E>=0;--E)p.push(i(y[E],M[E],p[m]+h*g[m])),g.push(0),m+=1}}},3840:function(f){"use strict";function s(m,b,y,M,h,E){this._color=m,this.key=b,this.value=y,this.left=M,this.right=h,this._count=E}function t(m){return new s(m._color,m.key,m.value,m.left,m.right,m._count)}function o(m,b){return new s(m,b.key,b.value,b.left,b.right,b._count)}function r(m){m._count=1+(m.left?m.left._count:0)+(m.right?m.right._count:0)}function i(m,b){this._compare=m,this.root=b}f.exports=function(m){return new i(m||g,null)};var a=i.prototype;function u(m,b){var y;return b.left&&(y=u(m,b.left))?y:(y=m(b.key,b.value))||(b.right?u(m,b.right):void 0)}function l(m,b,y,M){if(b(m,M.key)<=0){var h;if(M.left&&(h=l(m,b,y,M.left))||(h=y(M.key,M.value)))return h}if(M.right)return l(m,b,y,M.right)}function d(m,b,y,M,h){var E,k=y(m,h.key),D=y(b,h.key);if(k<=0&&(h.left&&(E=d(m,b,y,M,h.left))||D>0&&(E=M(h.key,h.value))))return E;if(D>0&&h.right)return d(m,b,y,M,h.right)}function c(m,b){this.tree=m,this._stack=b}Object.defineProperty(a,"keys",{get:function(){var m=[];return this.forEach(function(b,y){m.push(b)}),m}}),Object.defineProperty(a,"values",{get:function(){var m=[];return this.forEach(function(b,y){m.push(y)}),m}}),Object.defineProperty(a,"length",{get:function(){return this.root?this.root._count:0}}),a.insert=function(m,b){for(var y=this._compare,M=this.root,h=[],E=[];M;){var k=y(m,M.key);h.push(M),E.push(k),M=k<=0?M.left:M.right}h.push(new s(0,m,b,null,null,1));for(var D=h.length-2;D>=0;--D)M=h[D],E[D]<=0?h[D]=new s(M._color,M.key,M.value,h[D+1],M.right,M._count+1):h[D]=new s(M._color,M.key,M.value,M.left,h[D+1],M._count+1);for(D=h.length-1;D>1;--D){var P=h[D-1];if(M=h[D],P._color===1||M._color===1)break;var L=h[D-2];if(L.left===P)if(P.left===M){if(!(O=L.right)||O._color!==0){L._color=0,L.left=P.right,P._color=1,P.right=L,h[D-2]=P,h[D-1]=M,r(L),r(P),D>=3&&((N=h[D-3]).left===L?N.left=P:N.right=P);break}P._color=1,L.right=o(1,O),L._color=0,D-=1}else{if(!(O=L.right)||O._color!==0){P.right=M.left,L._color=0,L.left=M.right,M._color=1,M.left=P,M.right=L,h[D-2]=M,h[D-1]=P,r(L),r(P),r(M),D>=3&&((N=h[D-3]).left===L?N.left=M:N.right=M);break}P._color=1,L.right=o(1,O),L._color=0,D-=1}else if(P.right===M){if(!(O=L.left)||O._color!==0){L._color=0,L.right=P.left,P._color=1,P.left=L,h[D-2]=P,h[D-1]=M,r(L),r(P),D>=3&&((N=h[D-3]).right===L?N.right=P:N.left=P);break}P._color=1,L.left=o(1,O),L._color=0,D-=1}else{var O;if(!(O=L.left)||O._color!==0){var N;P.left=M.right,L._color=0,L.right=M.left,M._color=1,M.right=P,M.left=L,h[D-2]=M,h[D-1]=P,r(L),r(P),r(M),D>=3&&((N=h[D-3]).right===L?N.right=M:N.left=M);break}P._color=1,L.left=o(1,O),L._color=0,D-=1}}return h[0]._color=1,new i(y,h[0])},a.forEach=function(m,b,y){if(this.root)switch(arguments.length){case 1:return u(m,this.root);case 2:return l(b,this._compare,m,this.root);case 3:return this._compare(b,y)>=0?void 0:d(b,y,this._compare,m,this.root)}},Object.defineProperty(a,"begin",{get:function(){for(var m=[],b=this.root;b;)m.push(b),b=b.left;return new c(this,m)}}),Object.defineProperty(a,"end",{get:function(){for(var m=[],b=this.root;b;)m.push(b),b=b.right;return new c(this,m)}}),a.at=function(m){if(m<0)return new c(this,[]);for(var b=this.root,y=[];;){if(y.push(b),b.left){if(m<b.left._count){b=b.left;continue}m-=b.left._count}if(!m)return new c(this,y);if(m-=1,!b.right||m>=b.right._count)break;b=b.right}return new c(this,[])},a.ge=function(m){for(var b=this._compare,y=this.root,M=[],h=0;y;){var E=b(m,y.key);M.push(y),E<=0&&(h=M.length),y=E<=0?y.left:y.right}return M.length=h,new c(this,M)},a.gt=function(m){for(var b=this._compare,y=this.root,M=[],h=0;y;){var E=b(m,y.key);M.push(y),E<0&&(h=M.length),y=E<0?y.left:y.right}return M.length=h,new c(this,M)},a.lt=function(m){for(var b=this._compare,y=this.root,M=[],h=0;y;){var E=b(m,y.key);M.push(y),E>0&&(h=M.length),y=E<=0?y.left:y.right}return M.length=h,new c(this,M)},a.le=function(m){for(var b=this._compare,y=this.root,M=[],h=0;y;){var E=b(m,y.key);M.push(y),E>=0&&(h=M.length),y=E<0?y.left:y.right}return M.length=h,new c(this,M)},a.find=function(m){for(var b=this._compare,y=this.root,M=[];y;){var h=b(m,y.key);if(M.push(y),h===0)return new c(this,M);y=h<=0?y.left:y.right}return new c(this,[])},a.remove=function(m){var b=this.find(m);return b?b.remove():this},a.get=function(m){for(var b=this._compare,y=this.root;y;){var M=b(m,y.key);if(M===0)return y.value;y=M<=0?y.left:y.right}};var _=c.prototype;function p(m,b){m.key=b.key,m.value=b.value,m.left=b.left,m.right=b.right,m._color=b._color,m._count=b._count}function g(m,b){return m<b?-1:m>b?1:0}Object.defineProperty(_,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(_,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),_.clone=function(){return new c(this.tree,this._stack.slice())},_.remove=function(){var m=this._stack;if(m.length===0)return this.tree;var b=new Array(m.length),y=m[m.length-1];b[b.length-1]=new s(y._color,y.key,y.value,y.left,y.right,y._count);for(var M=m.length-2;M>=0;--M)(y=m[M]).left===m[M+1]?b[M]=new s(y._color,y.key,y.value,b[M+1],y.right,y._count):b[M]=new s(y._color,y.key,y.value,y.left,b[M+1],y._count);if((y=b[b.length-1]).left&&y.right){var h=b.length;for(y=y.left;y.right;)b.push(y),y=y.right;var E=b[h-1];for(b.push(new s(y._color,E.key,E.value,y.left,y.right,y._count)),b[h-1].key=y.key,b[h-1].value=y.value,M=b.length-2;M>=h;--M)y=b[M],b[M]=new s(y._color,y.key,y.value,y.left,b[M+1],y._count);b[h-1].left=b[h]}if((y=b[b.length-1])._color===0){var k=b[b.length-2];for(k.left===y?k.left=null:k.right===y&&(k.right=null),b.pop(),M=0;M<b.length;++M)b[M]._count--;return new i(this.tree._compare,b[0])}if(y.left||y.right){for(y.left?p(y,y.left):y.right&&p(y,y.right),y._color=1,M=0;M<b.length-1;++M)b[M]._count--;return new i(this.tree._compare,b[0])}if(b.length===1)return new i(this.tree._compare,null);for(M=0;M<b.length;++M)b[M]._count--;var D=b[b.length-2];return function(P){for(var L,O,N,V,F=P.length-1;F>=0;--F){if(L=P[F],F===0)return void(L._color=1);if((O=P[F-1]).left===L){if((N=O.right).right&&N.right._color===0)return V=(N=O.right=t(N)).right=t(N.right),O.right=N.left,N.left=O,N.right=V,N._color=O._color,L._color=1,O._color=1,V._color=1,r(O),r(N),F>1&&((j=P[F-2]).left===O?j.left=N:j.right=N),void(P[F-1]=N);if(N.left&&N.left._color===0)return V=(N=O.right=t(N)).left=t(N.left),O.right=V.left,N.left=V.right,V.left=O,V.right=N,V._color=O._color,O._color=1,N._color=1,L._color=1,r(O),r(N),r(V),F>1&&((j=P[F-2]).left===O?j.left=V:j.right=V),void(P[F-1]=V);if(N._color===1){if(O._color===0)return O._color=1,void(O.right=o(0,N));O.right=o(0,N);continue}N=t(N),O.right=N.left,N.left=O,N._color=O._color,O._color=0,r(O),r(N),F>1&&((j=P[F-2]).left===O?j.left=N:j.right=N),P[F-1]=N,P[F]=O,F+1<P.length?P[F+1]=L:P.push(L),F+=2}else{if((N=O.left).left&&N.left._color===0)return V=(N=O.left=t(N)).left=t(N.left),O.left=N.right,N.right=O,N.left=V,N._color=O._color,L._color=1,O._color=1,V._color=1,r(O),r(N),F>1&&((j=P[F-2]).right===O?j.right=N:j.left=N),void(P[F-1]=N);if(N.right&&N.right._color===0)return V=(N=O.left=t(N)).right=t(N.right),O.left=V.right,N.right=V.left,V.right=O,V.left=N,V._color=O._color,O._color=1,N._color=1,L._color=1,r(O),r(N),r(V),F>1&&((j=P[F-2]).right===O?j.right=V:j.left=V),void(P[F-1]=V);if(N._color===1){if(O._color===0)return O._color=1,void(O.left=o(0,N));O.left=o(0,N);continue}var j;N=t(N),O.left=N.right,N.right=O,N._color=O._color,O._color=0,r(O),r(N),F>1&&((j=P[F-2]).right===O?j.right=N:j.left=N),P[F-1]=N,P[F]=O,F+1<P.length?P[F+1]=L:P.push(L),F+=2}}}(b),D.left===y?D.left=null:D.right=null,new i(this.tree._compare,b[0])},Object.defineProperty(_,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(_,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(_,"index",{get:function(){var m=0,b=this._stack;if(b.length===0){var y=this.tree.root;return y?y._count:0}b[b.length-1].left&&(m=b[b.length-1].left._count);for(var M=b.length-2;M>=0;--M)b[M+1]===b[M].right&&(++m,b[M].left&&(m+=b[M].left._count));return m},enumerable:!0}),_.next=function(){var m=this._stack;if(m.length!==0){var b=m[m.length-1];if(b.right)for(b=b.right;b;)m.push(b),b=b.left;else for(m.pop();m.length>0&&m[m.length-1].right===b;)b=m[m.length-1],m.pop()}},Object.defineProperty(_,"hasNext",{get:function(){var m=this._stack;if(m.length===0)return!1;if(m[m.length-1].right)return!0;for(var b=m.length-1;b>0;--b)if(m[b-1].left===m[b])return!0;return!1}}),_.update=function(m){var b=this._stack;if(b.length===0)throw new Error("Can't update empty node!");var y=new Array(b.length),M=b[b.length-1];y[y.length-1]=new s(M._color,M.key,m,M.left,M.right,M._count);for(var h=b.length-2;h>=0;--h)(M=b[h]).left===b[h+1]?y[h]=new s(M._color,M.key,M.value,y[h+1],M.right,M._count):y[h]=new s(M._color,M.key,M.value,M.left,y[h+1],M._count);return new i(this.tree._compare,y[0])},_.prev=function(){var m=this._stack;if(m.length!==0){var b=m[m.length-1];if(b.left)for(b=b.left;b;)m.push(b),b=b.right;else for(m.pop();m.length>0&&m[m.length-1].left===b;)b=m[m.length-1],m.pop()}},Object.defineProperty(_,"hasPrev",{get:function(){var m=this._stack;if(m.length===0)return!1;if(m[m.length-1].left)return!0;for(var b=m.length-1;b>0;--b)if(m[b-1].right===m[b])return!0;return!1}})},3837:function(f,s,t){"use strict";f.exports=function(k,D){var P=new c(k);return P.update(D),P};var o=t(4935),r=t(501),i=t(5304),a=t(6429),u=t(6444),l=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function d(k,D){return k[0]=D[0],k[1]=D[1],k[2]=D[2],k}function c(k){this.gl=k,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickFontStyle=["normal","normal","normal"],this.tickFontWeight=["normal","normal","normal"],this.tickFontVariant=["normal","normal","normal"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["sans-serif","sans-serif","sans-serif"],this.labelFontStyle=["normal","normal","normal"],this.labelFontWeight=["normal","normal","normal"],this.labelFontVariant=["normal","normal","normal"],this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=i(k)}var _=c.prototype;function p(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}_.update=function(k){function D(J,Q,ne){if(ne in k){var K,oe=k[ne],le=this[ne];(J?Array.isArray(oe)&&Array.isArray(oe[0]):Array.isArray(oe))?this[ne]=K=[Q(oe[0]),Q(oe[1]),Q(oe[2])]:this[ne]=K=[Q(oe),Q(oe),Q(oe)];for(var se=0;se<3;++se)if(K[se]!==le[se])return!0}return!1}k=k||{};var P,L=D.bind(this,!1,Number),O=D.bind(this,!1,Boolean),N=D.bind(this,!1,String),V=D.bind(this,!0,function(J){if(Array.isArray(J)){if(J.length===3)return[+J[0],+J[1],+J[2],1];if(J.length===4)return[+J[0],+J[1],+J[2],+J[3]]}return[0,0,0,1]}),F=!1,j=!1;if("bounds"in k)for(var Z=k.bounds,z=0;z<2;++z)for(var H=0;H<3;++H)Z[z][H]!==this.bounds[z][H]&&(j=!0),this.bounds[z][H]=Z[z][H];if("ticks"in k)for(P=k.ticks,F=!0,this.autoTicks=!1,z=0;z<3;++z)this.tickSpacing[z]=0;else L("tickSpacing")&&(this.autoTicks=!0,j=!0);if(this._firstInit&&("ticks"in k||"tickSpacing"in k||(this.autoTicks=!0),j=!0,F=!0,this._firstInit=!1),j&&this.autoTicks&&(P=u.create(this.bounds,this.tickSpacing),F=!0),F){for(z=0;z<3;++z)P[z].sort(function(J,Q){return J.x-Q.x});u.equal(P,this.ticks)?F=!1:this.ticks=P}O("tickEnable"),N("tickFont")&&(F=!0),N("tickFontStyle")&&(F=!0),N("tickFontWeight")&&(F=!0),N("tickFontVariant")&&(F=!0),L("tickSize"),L("tickAngle"),L("tickPad"),V("tickColor");var U=N("labels");N("labelFont")&&(U=!0),N("labelFontStyle")&&(U=!0),N("labelFontWeight")&&(U=!0),N("labelFontVariant")&&(U=!0),O("labelEnable"),L("labelSize"),L("labelPad"),V("labelColor"),O("lineEnable"),O("lineMirror"),L("lineWidth"),V("lineColor"),O("lineTickEnable"),O("lineTickMirror"),L("lineTickLength"),L("lineTickWidth"),V("lineTickColor"),O("gridEnable"),L("gridWidth"),V("gridColor"),O("zeroEnable"),V("zeroLineColor"),L("zeroLineWidth"),O("backgroundEnable"),V("backgroundColor");var re=[{family:this.labelFont[0],style:this.labelFontStyle[0],weight:this.labelFontWeight[0],variant:this.labelFontVariant[0]},{family:this.labelFont[1],style:this.labelFontStyle[1],weight:this.labelFontWeight[1],variant:this.labelFontVariant[1]},{family:this.labelFont[2],style:this.labelFontStyle[2],weight:this.labelFontWeight[2],variant:this.labelFontVariant[2]}],ee=[{family:this.tickFont[0],style:this.tickFontStyle[0],weight:this.tickFontWeight[0],variant:this.tickFontVariant[0]},{family:this.tickFont[1],style:this.tickFontStyle[1],weight:this.tickFontWeight[1],variant:this.tickFontVariant[1]},{family:this.tickFont[2],style:this.tickFontStyle[2],weight:this.tickFontWeight[2],variant:this.tickFontVariant[2]}];this._text?this._text&&(U||F)&&this._text.update(this.bounds,this.labels,re,this.ticks,ee):this._text=o(this.gl,this.bounds,this.labels,re,this.ticks,ee),this._lines&&F&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=r(this.gl,this.bounds,this.ticks))};var g=[new p,new p,new p];function m(k,D,P,L,O){for(var N=k.primalOffset,V=k.primalMinor,F=k.mirrorOffset,j=k.mirrorMinor,Z=L[D],z=0;z<3;++z)if(D!==z){var H=N,U=F,re=V,ee=j;Z&1<<z&&(H=F,U=N,re=j,ee=V),H[z]=P[0][z],U[z]=P[1][z],O[z]>0?(re[z]=-1,ee[z]=0):(re[z]=0,ee[z]=1)}}var b=[0,0,0],y={model:l,view:l,projection:l,_ortho:!1};_.isOpaque=function(){return!0},_.isTransparent=function(){return!1},_.drawTransparent=function(k){};var M=[0,0,0],h=[0,0,0],E=[0,0,0];_.draw=function(k){k=k||y;for(var D=this.gl,P=k.model||l,L=k.view||l,O=k.projection||l,N=this.bounds,V=k._ortho||!1,F=a(P,L,O,N,V),j=F.cubeEdges,Z=F.axis,z=L[12],H=L[13],U=L[14],re=L[15],ee=(V?2:1)*this.pixelRatio*(O[3]*z+O[7]*H+O[11]*U+O[15]*re)/D.drawingBufferHeight,J=0;J<3;++J)this.lastCubeProps.cubeEdges[J]=j[J],this.lastCubeProps.axis[J]=Z[J];var Q=g;for(J=0;J<3;++J)m(g[J],J,this.bounds,j,Z);D=this.gl;var ne,K,oe,le=b;for(J=0;J<3;++J)this.backgroundEnable[J]?le[J]=Z[J]:le[J]=0;for(this._background.draw(P,L,O,N,le,this.backgroundColor),this._lines.bind(P,L,O,this),J=0;J<3;++J){var se=[0,0,0];Z[J]>0?se[J]=N[1][J]:se[J]=N[0][J];for(var de=0;de<2;++de){var be=(J+1+de)%3,_e=(J+1+(1^de))%3;this.gridEnable[be]&&this._lines.drawGrid(be,_e,this.bounds,se,this.gridColor[be],this.gridWidth[be]*this.pixelRatio)}for(de=0;de<2;++de)be=(J+1+de)%3,_e=(J+1+(1^de))%3,this.zeroEnable[_e]&&Math.min(N[0][_e],N[1][_e])<=0&&Math.max(N[0][_e],N[1][_e])>=0&&this._lines.drawZero(be,_e,this.bounds,se,this.zeroLineColor[_e],this.zeroLineWidth[_e]*this.pixelRatio)}for(J=0;J<3;++J){this.lineEnable[J]&&this._lines.drawAxisLine(J,this.bounds,Q[J].primalOffset,this.lineColor[J],this.lineWidth[J]*this.pixelRatio),this.lineMirror[J]&&this._lines.drawAxisLine(J,this.bounds,Q[J].mirrorOffset,this.lineColor[J],this.lineWidth[J]*this.pixelRatio);var xe=d(M,Q[J].primalMinor),ve=d(h,Q[J].mirrorMinor),ye=this.lineTickLength;for(de=0;de<3;++de){var me=ee/P[5*de];xe[de]*=ye[de]*me,ve[de]*=ye[de]*me}this.lineTickEnable[J]&&this._lines.drawAxisTicks(J,Q[J].primalOffset,xe,this.lineTickColor[J],this.lineTickWidth[J]*this.pixelRatio),this.lineTickMirror[J]&&this._lines.drawAxisTicks(J,Q[J].mirrorOffset,ve,this.lineTickColor[J],this.lineTickWidth[J]*this.pixelRatio)}function Me(ke){(oe=[0,0,0])[ke]=1}function Ae(ke,Ee,Ie){var Re=(ke+1)%3,Ne=(ke+2)%3,ge=Ee[Re],we=Ee[Ne],Ce=Ie[Re],ze=Ie[Ne];ge>0&&ze>0||ge>0&&ze<0||ge<0&&ze>0||ge<0&&ze<0?Me(Re):(we>0&&Ce>0||we>0&&Ce<0||we<0&&Ce>0||we<0&&Ce<0)&&Me(Ne)}for(this._lines.unbind(),this._text.bind(P,L,O,this.pixelRatio),J=0;J<3;++J){var ce=Q[J].primalMinor,ae=Q[J].mirrorMinor,pe=d(E,Q[J].primalOffset);for(de=0;de<3;++de)this.lineTickEnable[J]&&(pe[de]+=ee*ce[de]*Math.max(this.lineTickLength[de],0)/P[5*de]);var De=[0,0,0];if(De[J]=1,this.tickEnable[J]){for(this.tickAngle[J]===-3600?(this.tickAngle[J]=0,this.tickAlign[J]="auto"):this.tickAlign[J]=-1,K=1,(ne=[this.tickAlign[J],.5,K])[0]==="auto"?ne[0]=0:ne[0]=parseInt(""+ne[0]),oe=[0,0,0],Ae(J,ce,ae),de=0;de<3;++de)pe[de]+=ee*ce[de]*this.tickPad[de]/P[5*de];this._text.drawTicks(J,this.tickSize[J],this.tickAngle[J],pe,this.tickColor[J],De,oe,ne)}if(this.labelEnable[J]){for(K=0,oe=[0,0,0],this.labels[J].length>4&&(Me(J),K=1),(ne=[this.labelAlign[J],.5,K])[0]==="auto"?ne[0]=0:ne[0]=parseInt(""+ne[0]),de=0;de<3;++de)pe[de]+=ee*ce[de]*this.labelPad[de]/P[5*de];pe[J]+=.5*(N[0][J]+N[1][J]),this._text.drawLabel(J,this.labelSize[J],this.labelAngle[J],pe,this.labelColor[J],[0,0,0],oe,ne)}}this._text.unbind()},_.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},5304:function(f,s,t){"use strict";f.exports=function(l){for(var d=[],c=[],_=0,p=0;p<3;++p)for(var g=(p+1)%3,m=(p+2)%3,b=[0,0,0],y=[0,0,0],M=-1;M<=1;M+=2){c.push(_,_+2,_+1,_+1,_+2,_+3),b[p]=M,y[p]=M;for(var h=-1;h<=1;h+=2){b[g]=h;for(var E=-1;E<=1;E+=2)b[m]=E,d.push(b[0],b[1],b[2],y[0],y[1],y[2]),_+=1}var k=g;g=m,m=k}var D=o(l,new Float32Array(d)),P=o(l,new Uint16Array(c),l.ELEMENT_ARRAY_BUFFER),L=r(l,[{buffer:D,type:l.FLOAT,size:3,offset:0,stride:24},{buffer:D,type:l.FLOAT,size:3,offset:12,stride:24}],P),O=i(l);return O.attributes.position.location=0,O.attributes.normal.location=1,new a(l,D,L,O)};var o=t(2762),r=t(8116),i=t(1879).bg;function a(l,d,c,_){this.gl=l,this.buffer=d,this.vao=c,this.shader=_}var u=a.prototype;u.draw=function(l,d,c,_,p,g){for(var m=!1,b=0;b<3;++b)m=m||p[b];if(m){var y=this.gl;y.enable(y.POLYGON_OFFSET_FILL),y.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:l,view:d,projection:c,bounds:_,enable:p,colors:g},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),y.disable(y.POLYGON_OFFSET_FILL)}},u.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},6429:function(f,s,t){"use strict";f.exports=function(h,E,k,D,P){r(u,E,h),r(u,k,u);for(var L=0,O=0;O<2;++O){c[2]=D[O][2];for(var N=0;N<2;++N){c[1]=D[N][1];for(var V=0;V<2;++V)c[0]=D[V][0],p(l[L],c,u),L+=1}}var F=-1;for(O=0;O<8;++O){for(var j=l[O][3],Z=0;Z<3;++Z)d[O][Z]=l[O][Z]/j;P&&(d[O][2]*=-1),j<0&&(F<0||d[O][2]<d[F][2])&&(F=O)}if(F<0){F=0;for(var z=0;z<3;++z){for(var H=(z+2)%3,U=(z+1)%3,re=-1,ee=-1,J=0;J<2;++J){var Q=(K=J<<z)+(J<<H)+(1-J<<U),ne=K+(1-J<<H)+(J<<U);a(d[K],d[Q],d[ne],_)<0||(J?re=1:ee=1)}if(re<0||ee<0)ee>re&&(F|=1<<z);else{for(J=0;J<2;++J){Q=(K=J<<z)+(J<<H)+(1-J<<U),ne=K+(1-J<<H)+(J<<U);var K,oe=m([l[K],l[Q],l[ne],l[K+(1<<H)+(1<<U)]]);J?re=oe:ee=oe}ee>re&&(F|=1<<z)}}}var le=7^F,se=-1;for(O=0;O<8;++O)O!==F&&O!==le&&(se<0||d[se][1]>d[O][1])&&(se=O);var de=-1;for(O=0;O<3;++O)(_e=se^1<<O)!==F&&_e!==le&&(de<0&&(de=_e),(U=d[_e])[0]<d[de][0]&&(de=_e));var be=-1;for(O=0;O<3;++O){var _e;(_e=se^1<<O)!==F&&_e!==le&&_e!==de&&(be<0&&(be=_e),(U=d[_e])[0]>d[be][0]&&(be=_e))}var xe=b;xe[0]=xe[1]=xe[2]=0,xe[o.log2(de^se)]=se&de,xe[o.log2(se^be)]=se&be;var ve=7^be;ve===F||ve===le?(ve=7^de,xe[o.log2(be^ve)]=ve&be):xe[o.log2(de^ve)]=ve&de;var ye=y,me=F;for(z=0;z<3;++z)ye[z]=me&1<<z?-1:1;return M};var o=t(8828),r=t(6760),i=t(5202),a=t(3250),u=new Array(16),l=new Array(8),d=new Array(8),c=new Array(3),_=[0,0,0];function p(h,E,k){for(var D=0;D<4;++D){h[D]=k[12+D];for(var P=0;P<3;++P)h[D]+=E[P]*k[4*P+D]}}(function(){for(var h=0;h<8;++h)l[h]=[1,1,1,1],d[h]=[1,1,1]})();var g=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function m(h){for(var E=0;E<g.length;++E)if((h=i.positive(h,g[E])).length<3)return 0;var k=h[0],D=k[0]/k[3],P=k[1]/k[3],L=0;for(E=1;E+1<h.length;++E){var O=h[E],N=h[E+1],V=O[0]/O[3]-D,F=O[1]/O[3]-P,j=N[0]/N[3]-D,Z=N[1]/N[3]-P;L+=Math.abs(V*Z-F*j)}return L}var b=[1,1,1],y=[0,0,0],M={cubeEdges:b,axis:y}},501:function(f,s,t){"use strict";f.exports=function(b,y,M){var h=[],E=[0,0,0],k=[0,0,0],D=[0,0,0],P=[0,0,0];h.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var L=0;L<3;++L){for(var O=h.length/3|0,N=0;N<M[L].length;++N){var V=+M[L][N].x;h.push(V,0,1,V,1,1,V,0,-1,V,0,-1,V,1,1,V,1,-1)}var F=h.length/3|0;E[L]=O,k[L]=F-O,O=h.length/3|0;for(var j=0;j<M[L].length;++j)V=+M[L][j].x,h.push(V,0,1,V,1,1,V,0,-1,V,0,-1,V,1,1,V,1,-1);F=h.length/3|0,D[L]=O,P[L]=F-O}var Z=o(b,new Float32Array(h)),z=r(b,[{buffer:Z,type:b.FLOAT,size:3,stride:0,offset:0}]),H=i(b);return H.attributes.position.location=0,new g(b,Z,z,H,k,E,P,D)};var o=t(2762),r=t(8116),i=t(1879).n,a=[0,0,0],u=[0,0,0],l=[0,0,0],d=[0,0,0],c=[1,1];function _(b){return b[0]=b[1]=b[2]=0,b}function p(b,y){return b[0]=y[0],b[1]=y[1],b[2]=y[2],b}function g(b,y,M,h,E,k,D,P){this.gl=b,this.vertBuffer=y,this.vao=M,this.shader=h,this.tickCount=E,this.tickOffset=k,this.gridCount=D,this.gridOffset=P}var m=g.prototype;m.bind=function(b,y,M){this.shader.bind(),this.shader.uniforms.model=b,this.shader.uniforms.view=y,this.shader.uniforms.projection=M,c[0]=this.gl.drawingBufferWidth,c[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=c,this.vao.bind()},m.unbind=function(){this.vao.unbind()},m.drawAxisLine=function(b,y,M,h,E){var k=_(u);this.shader.uniforms.majorAxis=u,k[b]=y[1][b]-y[0][b],this.shader.uniforms.minorAxis=k;var D,P=p(d,M);P[b]+=y[0][b],this.shader.uniforms.offset=P,this.shader.uniforms.lineWidth=E,this.shader.uniforms.color=h,(D=_(l))[(b+2)%3]=1,this.shader.uniforms.screenAxis=D,this.vao.draw(this.gl.TRIANGLES,6),(D=_(l))[(b+1)%3]=1,this.shader.uniforms.screenAxis=D,this.vao.draw(this.gl.TRIANGLES,6)},m.drawAxisTicks=function(b,y,M,h,E){if(this.tickCount[b]){var k=_(a);k[b]=1,this.shader.uniforms.majorAxis=k,this.shader.uniforms.offset=y,this.shader.uniforms.minorAxis=M,this.shader.uniforms.color=h,this.shader.uniforms.lineWidth=E;var D=_(l);D[b]=1,this.shader.uniforms.screenAxis=D,this.vao.draw(this.gl.TRIANGLES,this.tickCount[b],this.tickOffset[b])}},m.drawGrid=function(b,y,M,h,E,k){if(this.gridCount[b]){var D=_(u);D[y]=M[1][y]-M[0][y],this.shader.uniforms.minorAxis=D;var P=p(d,h);P[y]+=M[0][y],this.shader.uniforms.offset=P;var L=_(a);L[b]=1,this.shader.uniforms.majorAxis=L;var O=_(l);O[b]=1,this.shader.uniforms.screenAxis=O,this.shader.uniforms.lineWidth=k,this.shader.uniforms.color=E,this.vao.draw(this.gl.TRIANGLES,this.gridCount[b],this.gridOffset[b])}},m.drawZero=function(b,y,M,h,E,k){var D=_(u);this.shader.uniforms.majorAxis=D,D[b]=M[1][b]-M[0][b],this.shader.uniforms.minorAxis=D;var P=p(d,h);P[b]+=M[0][b],this.shader.uniforms.offset=P;var L=_(l);L[y]=1,this.shader.uniforms.screenAxis=L,this.shader.uniforms.lineWidth=k,this.shader.uniforms.color=E,this.vao.draw(this.gl.TRIANGLES,6)},m.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},1879:function(f,s,t){"use strict";var o=t(3236),r=t(9405),i=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),a=o([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);s.n=function(_){return r(_,i,a,null,[{name:"position",type:"vec3"}])};var u=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),l=o([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);s.Q=function(_){return r(_,u,l,null,[{name:"position",type:"vec3"}])};var d=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),c=o([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);s.bg=function(_){return r(_,d,c,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},4935:function(f,s,t){"use strict";f.exports=function(p,g,m,b,y,M){var h=o(p),E=r(p,[{buffer:h,size:3}]),k=a(p);k.attributes.position.location=0;var D=new d(p,k,h,E);return D.update(g,m,b,y,M),D};var o=t(2762),r=t(8116),i=t(4359),a=t(1879).Q,u=window||v.global||{},l=u.__TEXT_CACHE||{};function d(p,g,m,b){this.gl=p,this.shader=g,this.buffer=m,this.vao=b,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}u.__TEXT_CACHE={};var c=d.prototype,_=[0,0];c.bind=function(p,g,m,b){this.vao.bind(),this.shader.bind();var y=this.shader.uniforms;y.model=p,y.view=g,y.projection=m,y.pixelScale=b,_[0]=this.gl.drawingBufferWidth,_[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=_},c.unbind=function(){this.vao.unbind()},c.update=function(p,g,m,b,y){var M=[];function h(F,j,Z,z,H,U){var re=[Z.style,Z.weight,Z.variant,Z.family].join("_"),ee=l[re];ee||(ee=l[re]={});var J=ee[j];J||(J=ee[j]=function(_e,xe){try{return i(_e,xe)}catch(ve){return console.warn('error vectorizing text:"'+_e+'" error:',ve),{cells:[],positions:[]}}}(j,{triangles:!0,font:Z.family,fontStyle:Z.style,fontWeight:Z.weight,fontVariant:Z.variant,textAlign:"center",textBaseline:"middle",lineSpacing:H,styletags:U}));for(var Q=(z||12)/12,ne=J.positions,K=J.cells,oe=0,le=K.length;oe<le;++oe)for(var se=K[oe],de=2;de>=0;--de){var be=ne[se[de]];M.push(Q*be[0],-Q*be[1],F)}}for(var E=[0,0,0],k=[0,0,0],D=[0,0,0],P=[0,0,0],L={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},O=0;O<3;++O){D[O]=M.length/3|0,h(.5*(p[0][O]+p[1][O]),g[O],m[O],12,1.25,L),P[O]=(M.length/3|0)-D[O],E[O]=M.length/3|0;for(var N=0;N<b[O].length;++N)if(b[O][N].text){var V={family:b[O][N].font||y[O].family,style:y[O].fontStyle||y[O].style,weight:y[O].fontWeight||y[O].weight,variant:y[O].fontVariant||y[O].variant};h(b[O][N].x,b[O][N].text,V,b[O][N].fontSize||12,1.25,L)}k[O]=(M.length/3|0)-E[O]}this.buffer.update(M),this.tickOffset=E,this.tickCount=k,this.labelOffset=D,this.labelCount=P},c.drawTicks=function(p,g,m,b,y,M,h,E){this.tickCount[p]&&(this.shader.uniforms.axis=M,this.shader.uniforms.color=y,this.shader.uniforms.angle=m,this.shader.uniforms.scale=g,this.shader.uniforms.offset=b,this.shader.uniforms.alignDir=h,this.shader.uniforms.alignOpt=E,this.vao.draw(this.gl.TRIANGLES,this.tickCount[p],this.tickOffset[p]))},c.drawLabel=function(p,g,m,b,y,M,h,E){this.labelCount[p]&&(this.shader.uniforms.axis=M,this.shader.uniforms.color=y,this.shader.uniforms.angle=m,this.shader.uniforms.scale=g,this.shader.uniforms.offset=b,this.shader.uniforms.alignDir=h,this.shader.uniforms.alignOpt=E,this.vao.draw(this.gl.TRIANGLES,this.labelCount[p],this.labelOffset[p]))},c.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}},6444:function(f,s){"use strict";function t(o,r){var i=o+"",a=i.indexOf("."),u=0;a>=0&&(u=i.length-a-1);var l=Math.pow(10,u),d=Math.round(o*r*l),c=d+"";if(c.indexOf("e")>=0)return c;var _=d/l,p=d%l;d<0?(_=0|-Math.ceil(_),p=0|-p):(_=0|Math.floor(_),p|=0);var g=""+_;if(d<0&&(g="-"+g),u){for(var m=""+p;m.length<u;)m="0"+m;return g+"."+m}return g}s.create=function(o,r){for(var i=[],a=0;a<3;++a){for(var u=[],l=(o[0][a],o[1][a],0);l*r[a]<=o[1][a];++l)u.push({x:l*r[a],text:t(r[a],l)});for(l=-1;l*r[a]>=o[0][a];--l)u.push({x:l*r[a],text:t(r[a],l)});i.push(u)}return i},s.equal=function(o,r){for(var i=0;i<3;++i){if(o[i].length!==r[i].length)return!1;for(var a=0;a<o[i].length;++a){var u=o[i][a],l=r[i][a];if(u.x!==l.x||u.text!==l.text||u.font!==l.font||u.fontColor!==l.fontColor||u.fontSize!==l.fontSize||u.dx!==l.dx||u.dy!==l.dy)return!1}}return!0}},5445:function(f,s,t){"use strict";f.exports=function(M,h,E,k,D){var P=h.model||d,L=h.view||d,O=h.projection||d,N=h._ortho||!1,V=M.bounds,F=(D=D||i(P,L,O,V,N)).axis;a(c,L,P),a(c,O,c);for(var j=b,Z=0;Z<3;++Z)j[Z].lo=1/0,j[Z].hi=-1/0,j[Z].pixelsPerDataUnit=1/0;var z=o(u(c,c));u(c,c);for(var H=0;H<3;++H){var U=(H+1)%3,re=(H+2)%3,ee=y;e:for(Z=0;Z<2;++Z){var J=[];if(F[H]<0!=!!Z){ee[H]=V[Z][H];for(var Q=0;Q<2;++Q){ee[U]=V[Q^Z][U];for(var ne=0;ne<2;++ne)ee[re]=V[ne^Q^Z][re],J.push(ee.slice())}var K=N?5:4;for(Q=K;Q===K;++Q){if(J.length===0)continue e;J=r.positive(J,z[Q])}for(Q=0;Q<J.length;++Q){re=J[Q];var oe=m(y,c,re,E,k);for(ne=0;ne<3;++ne)j[ne].lo=Math.min(j[ne].lo,re[ne]),j[ne].hi=Math.max(j[ne].hi,re[ne]),ne!==H&&(j[ne].pixelsPerDataUnit=Math.min(j[ne].pixelsPerDataUnit,Math.abs(oe[ne])))}}}}return j};var o=t(5033),r=t(5202),i=t(6429),a=t(6760),u=t(5665),l=t(5352),d=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),c=new Float32Array(16);function _(M,h,E){this.lo=M,this.hi=h,this.pixelsPerDataUnit=E}var p=[0,0,0,1],g=[0,0,0,1];function m(M,h,E,k,D){for(var P=0;P<3;++P){for(var L=p,O=g,N=0;N<3;++N)O[N]=L[N]=E[N];O[3]=L[3]=1,O[P]+=1,l(O,O,h),O[3]<0&&(M[P]=1/0),L[P]-=1,l(L,L,h),L[3]<0&&(M[P]=1/0);var V=(L[0]/L[3]-O[0]/O[3])*k,F=(L[1]/L[3]-O[1]/O[3])*D;M[P]=.25*Math.sqrt(V*V+F*F)}return M}var b=[new _(1/0,-1/0,1/0),new _(1/0,-1/0,1/0),new _(1/0,-1/0,1/0)],y=[0,0,0]},2762:function(f,s,t){"use strict";var o=t(1888),r=t(5298),i=t(9618),a=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function u(_,p,g,m,b){this.gl=_,this.type=p,this.handle=g,this.length=m,this.usage=b}var l=u.prototype;function d(_,p,g,m,b,y){var M=b.length*b.BYTES_PER_ELEMENT;if(y<0)return _.bufferData(p,b,m),M;if(M+y>g)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return _.bufferSubData(p,y,b),g}function c(_,p){for(var g=o.malloc(_.length,p),m=_.length,b=0;b<m;++b)g[b]=_[b];return g}l.bind=function(){this.gl.bindBuffer(this.type,this.handle)},l.unbind=function(){this.gl.bindBuffer(this.type,null)},l.dispose=function(){this.gl.deleteBuffer(this.handle)},l.update=function(_,p){if(typeof p!="number"&&(p=-1),this.bind(),typeof _=="object"&&_.shape!==void 0){var g=_.dtype;if(a.indexOf(g)<0&&(g="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(g=gl.getExtension("OES_element_index_uint")&&g!=="uint16"?"uint32":"uint16"),g===_.dtype&&function(M,h){for(var E=1,k=h.length-1;k>=0;--k){if(h[k]!==E)return!1;E*=M[k]}return!0}(_.shape,_.stride))_.offset===0&&_.data.length===_.shape[0]?this.length=d(this.gl,this.type,this.length,this.usage,_.data,p):this.length=d(this.gl,this.type,this.length,this.usage,_.data.subarray(_.offset,_.shape[0]),p);else{var m=o.malloc(_.size,g),b=i(m,_.shape);r.assign(b,_),this.length=d(this.gl,this.type,this.length,this.usage,p<0?m:m.subarray(0,_.size),p),o.free(m)}}else if(Array.isArray(_)){var y;y=this.type===this.gl.ELEMENT_ARRAY_BUFFER?c(_,"uint16"):c(_,"float32"),this.length=d(this.gl,this.type,this.length,this.usage,p<0?y:y.subarray(0,_.length),p),o.free(y)}else if(typeof _=="object"&&typeof _.length=="number")this.length=d(this.gl,this.type,this.length,this.usage,_,p);else{if(typeof _!="number"&&_!==void 0)throw new Error("gl-buffer: Invalid data type");if(p>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(_|=0)<=0&&(_=1),this.gl.bufferData(this.type,0|_,this.usage),this.length=_}},f.exports=function(_,p,g,m){if(g=g||_.ARRAY_BUFFER,m=m||_.DYNAMIC_DRAW,g!==_.ARRAY_BUFFER&&g!==_.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(m!==_.DYNAMIC_DRAW&&m!==_.STATIC_DRAW&&m!==_.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var b=_.createBuffer(),y=new u(_,g,b,0,m);return y.update(p),y}},6405:function(f,s,t){"use strict";var o=t(2931);f.exports=function(i,a){var u=i.positions,l=i.vectors,d={positions:[],vertexIntensity:[],vertexIntensityBounds:i.vertexIntensityBounds,vectors:[],cells:[],coneOffset:i.coneOffset,colormap:i.colormap};if(i.positions.length===0)return a&&(a[0]=[0,0,0],a[1]=[0,0,0]),d;for(var c=0,_=1/0,p=-1/0,g=1/0,m=-1/0,b=1/0,y=-1/0,M=null,h=null,E=[],k=1/0,D=!1,P=i.coneSizemode==="raw",L=0;L<u.length;L++){var O=u[L];_=Math.min(O[0],_),p=Math.max(O[0],p),g=Math.min(O[1],g),m=Math.max(O[1],m),b=Math.min(O[2],b),y=Math.max(O[2],y);var N=l[L];if(o.length(N)>c&&(c=o.length(N)),L&&!P){var V=2*o.distance(M,O)/(o.length(h)+o.length(N));V?(k=Math.min(k,V),D=!1):D=!0}D||(M=O,h=N),E.push(N)}var F=[_,g,b],j=[p,m,y];a&&(a[0]=F,a[1]=j),c===0&&(c=1);var Z=1/c;isFinite(k)||(k=1),d.vectorScale=k;var z=i.coneSize||(P?1:.5);i.absoluteConeSize&&(z=i.absoluteConeSize*Z),d.coneScale=z,L=0;for(var H=0;L<u.length;L++)for(var U=(O=u[L])[0],re=O[1],ee=O[2],J=E[L],Q=o.length(J)*Z,ne=0;ne<8;ne++){d.positions.push([U,re,ee,H++]),d.positions.push([U,re,ee,H++]),d.positions.push([U,re,ee,H++]),d.positions.push([U,re,ee,H++]),d.positions.push([U,re,ee,H++]),d.positions.push([U,re,ee,H++]),d.vectors.push(J),d.vectors.push(J),d.vectors.push(J),d.vectors.push(J),d.vectors.push(J),d.vectors.push(J),d.vertexIntensity.push(Q,Q,Q),d.vertexIntensity.push(Q,Q,Q);var K=d.positions.length;d.cells.push([K-6,K-5,K-4],[K-3,K-2,K-1])}return d};var r=t(614);f.exports.createMesh=t(9060),f.exports.createConeMesh=function(i,a){return f.exports.createMesh(i,a,{shaders:r,traceType:"cone"})}},9060:function(f,s,t){"use strict";var o=t(9405),r=t(2762),i=t(8116),a=t(7766),u=t(6760),l=t(7608),d=t(9618),c=t(6729),_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function p(m,b,y,M,h,E,k,D,P,L,O){this.gl=m,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=b,this.dirty=!0,this.triShader=y,this.pickShader=M,this.trianglePositions=h,this.triangleVectors=E,this.triangleColors=D,this.triangleUVs=P,this.triangleIds=k,this.triangleVAO=L,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=O,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=_,this._view=_,this._projection=_,this._resolution=[1,1]}var g=p.prototype;g.isOpaque=function(){return this.opacity>=1},g.isTransparent=function(){return this.opacity<1},g.pickSlots=1,g.setPickBase=function(m){this.pickId=m},g.update=function(m){m=m||{};var b=this.gl;this.dirty=!0,"lightPosition"in m&&(this.lightPosition=m.lightPosition),"opacity"in m&&(this.opacity=m.opacity),"ambient"in m&&(this.ambientLight=m.ambient),"diffuse"in m&&(this.diffuseLight=m.diffuse),"specular"in m&&(this.specularLight=m.specular),"roughness"in m&&(this.roughness=m.roughness),"fresnel"in m&&(this.fresnel=m.fresnel),m.tubeScale!==void 0&&(this.tubeScale=m.tubeScale),m.vectorScale!==void 0&&(this.vectorScale=m.vectorScale),m.coneScale!==void 0&&(this.coneScale=m.coneScale),m.coneOffset!==void 0&&(this.coneOffset=m.coneOffset),m.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=b.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=b.LINEAR,this.texture.setPixels(function(oe){for(var le=c({colormap:oe,nshades:256,format:"rgba"}),se=new Uint8Array(1024),de=0;de<256;++de){for(var be=le[de],_e=0;_e<3;++_e)se[4*de+_e]=be[_e];se[4*de+3]=255*be[3]}return d(se,[256,256,4],[4,0,1])}(m.colormap)),this.texture.generateMipmap());var y=m.cells,M=m.positions,h=m.vectors;if(M&&y&&h){var E=[],k=[],D=[],P=[],L=[];this.cells=y,this.positions=M,this.vectors=h;var O=m.meshColor||[1,1,1,1],N=m.vertexIntensity,V=1/0,F=-1/0;if(N)if(m.vertexIntensityBounds)V=+m.vertexIntensityBounds[0],F=+m.vertexIntensityBounds[1];else for(var j=0;j<N.length;++j){var Z=N[j];V=Math.min(V,Z),F=Math.max(F,Z)}else for(j=0;j<M.length;++j)Z=M[j][2],V=Math.min(V,Z),F=Math.max(F,Z);for(this.intensity=N||function(oe){for(var le=oe.length,se=new Array(le),de=0;de<le;++de)se[de]=oe[de][2];return se}(M),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],j=0;j<M.length;++j)for(var z=M[j],H=0;H<3;++H)!isNaN(z[H])&&isFinite(z[H])&&(this.bounds[0][H]=Math.min(this.bounds[0][H],z[H]),this.bounds[1][H]=Math.max(this.bounds[1][H],z[H]));var U=0;e:for(j=0;j<y.length;++j){var re=y[j];if(re.length===3){for(H=0;H<3;++H){z=M[J=re[H]];for(var ee=0;ee<3;++ee)if(isNaN(z[ee])||!isFinite(z[ee]))continue e}for(H=0;H<3;++H){var J;z=M[J=re[2-H]],E.push(z[0],z[1],z[2],z[3]);var Q=h[J];k.push(Q[0],Q[1],Q[2],Q[3]||0);var ne,K=O;K.length===3?D.push(K[0],K[1],K[2],1):D.push(K[0],K[1],K[2],K[3]),ne=N?[(N[J]-V)/(F-V),0]:[(z[2]-V)/(F-V),0],P.push(ne[0],ne[1]),L.push(j)}U+=1}}this.triangleCount=U,this.trianglePositions.update(E),this.triangleVectors.update(k),this.triangleColors.update(D),this.triangleUVs.update(P),this.triangleIds.update(new Uint32Array(L))}},g.drawTransparent=g.draw=function(m){m=m||{};for(var b=this.gl,y=m.model||_,M=m.view||_,h=m.projection||_,E=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],k=0;k<3;++k)E[0][k]=Math.max(E[0][k],this.clipBounds[0][k]),E[1][k]=Math.min(E[1][k],this.clipBounds[1][k]);var D={model:y,view:M,projection:h,inverseModel:_.slice(),clipBounds:E,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};D.inverseModel=l(D.inverseModel,D.model),b.disable(b.CULL_FACE),this.texture.bind(0);var P=new Array(16);for(u(P,D.view,D.model),u(P,D.projection,P),l(P,P),k=0;k<3;++k)D.eyePosition[k]=P[12+k]/P[15];var L=P[15];for(k=0;k<3;++k)L+=this.lightPosition[k]*P[4*k+3];for(k=0;k<3;++k){for(var O=P[12+k],N=0;N<3;++N)O+=P[4*N+k]*this.lightPosition[N];D.lightPosition[k]=O/L}if(this.triangleCount>0){var V=this.triShader;V.bind(),V.uniforms=D,this.triangleVAO.bind(),b.drawArrays(b.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},g.drawPick=function(m){m=m||{};for(var b=this.gl,y=m.model||_,M=m.view||_,h=m.projection||_,E=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],k=0;k<3;++k)E[0][k]=Math.max(E[0][k],this.clipBounds[0][k]),E[1][k]=Math.min(E[1][k],this.clipBounds[1][k]);this._model=[].slice.call(y),this._view=[].slice.call(M),this._projection=[].slice.call(h),this._resolution=[b.drawingBufferWidth,b.drawingBufferHeight];var D={model:y,view:M,projection:h,clipBounds:E,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},P=this.pickShader;P.bind(),P.uniforms=D,this.triangleCount>0&&(this.triangleVAO.bind(),b.drawArrays(b.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},g.pick=function(m){if(!m||m.id!==this.pickId)return null;var b=m.value[0]+256*m.value[1]+65536*m.value[2],y=this.cells[b],M=this.positions[y[1]].slice(0,3),h={position:M,dataCoordinate:M,index:Math.floor(y[1]/48)};return this.traceType==="cone"?h.index=Math.floor(y[1]/48):this.traceType==="streamtube"&&(h.intensity=this.intensity[y[1]],h.velocity=this.vectors[y[1]].slice(0,3),h.divergence=this.vectors[y[1]][3],h.index=b),h},g.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},f.exports=function(m,b,y){var M=y.shaders;arguments.length===1&&(m=(b=m).gl);var h=function(F,j){var Z=o(F,j.meshShader.vertex,j.meshShader.fragment,null,j.meshShader.attributes);return Z.attributes.position.location=0,Z.attributes.color.location=2,Z.attributes.uv.location=3,Z.attributes.vector.location=4,Z}(m,M),E=function(F,j){var Z=o(F,j.pickShader.vertex,j.pickShader.fragment,null,j.pickShader.attributes);return Z.attributes.position.location=0,Z.attributes.id.location=1,Z.attributes.vector.location=4,Z}(m,M),k=a(m,d(new Uint8Array([255,255,255,255]),[1,1,4]));k.generateMipmap(),k.minFilter=m.LINEAR_MIPMAP_LINEAR,k.magFilter=m.LINEAR;var D=r(m),P=r(m),L=r(m),O=r(m),N=r(m),V=new p(m,k,h,E,D,P,N,L,O,i(m,[{buffer:D,type:m.FLOAT,size:4},{buffer:N,type:m.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:L,type:m.FLOAT,size:4},{buffer:O,type:m.FLOAT,size:2},{buffer:P,type:m.FLOAT,size:4}]),y.traceType||"cone");return V.update(b),V}},614:function(f,s,t){var o=t(3236),r=o([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),i=o([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),a=o([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),u=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);s.meshShader={vertex:r,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},s.pickShader={vertex:a,fragment:u,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},737:function(f){f.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},5171:function(f,s,t){var o=t(737);f.exports=function(r){return o[r]}},9165:function(f,s,t){"use strict";f.exports=function(p){var g=p.gl,m=o(g),b=r(g,[{buffer:m,type:g.FLOAT,size:3,offset:0,stride:40},{buffer:m,type:g.FLOAT,size:4,offset:12,stride:40},{buffer:m,type:g.FLOAT,size:3,offset:28,stride:40}]),y=i(g);y.attributes.position.location=0,y.attributes.color.location=1,y.attributes.offset.location=2;var M=new u(g,m,b,y);return M.update(p),M};var o=t(2762),r=t(8116),i=t(3436),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function u(p,g,m,b){this.gl=p,this.shader=b,this.buffer=g,this.vao=m,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var l=u.prototype;function d(p,g){for(var m=0;m<3;++m)p[0][m]=Math.min(p[0][m],g[m]),p[1][m]=Math.max(p[1][m],g[m])}l.isOpaque=function(){return!this.hasAlpha},l.isTransparent=function(){return this.hasAlpha},l.drawTransparent=l.draw=function(p){var g=this.gl,m=this.shader.uniforms;this.shader.bind();var b=m.view=p.view||a,y=m.projection=p.projection||a;m.model=p.model||a,m.clipBounds=this.clipBounds,m.opacity=this.opacity;var M=b[12],h=b[13],E=b[14],k=b[15],D=(p._ortho?2:1)*this.pixelRatio*(y[3]*M+y[7]*h+y[11]*E+y[15]*k)/g.drawingBufferHeight;this.vao.bind();for(var P=0;P<3;++P)g.lineWidth(this.lineWidth[P]*this.pixelRatio),m.capSize=this.capSize[P]*D,this.lineCount[P]&&g.drawArrays(g.LINES,this.lineOffset[P],this.lineCount[P]);this.vao.unbind()};var c=function(){for(var p=new Array(3),g=0;g<3;++g){for(var m=[],b=1;b<=2;++b)for(var y=-1;y<=1;y+=2){var M=[0,0,0];M[(b+g)%3]=y,m.push(M)}p[g]=m}return p}();function _(p,g,m,b){for(var y=c[b],M=0;M<y.length;++M){var h=y[M];p.push(g[0],g[1],g[2],m[0],m[1],m[2],m[3],h[0],h[1],h[2])}return y.length}l.update=function(p){"lineWidth"in(p=p||{})&&(this.lineWidth=p.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in p&&(this.capSize=p.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in p&&(this.opacity=+p.opacity,this.opacity<1&&(this.hasAlpha=!0));var g=p.color||[[0,0,0],[0,0,0],[0,0,0]],m=p.position,b=p.error;if(Array.isArray(g[0])||(g=[g,g,g]),m&&b){var y=[],M=m.length,h=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var E=0;E<3;++E){this.lineOffset[E]=h;e:for(var k=0;k<M;++k){for(var D=m[k],P=0;P<3;++P)if(isNaN(D[P])||!isFinite(D[P]))continue e;var L,O=b[k],N=g[E];Array.isArray(N[0])&&(N=g[k]),N.length===3?N=[N[0],N[1],N[2],1]:N.length===4&&(N=[N[0],N[1],N[2],N[3]],!this.hasAlpha&&N[3]<1&&(this.hasAlpha=!0)),!isNaN(O[0][E])&&!isNaN(O[1][E])&&(O[0][E]<0&&((L=D.slice())[E]+=O[0][E],y.push(D[0],D[1],D[2],N[0],N[1],N[2],N[3],0,0,0,L[0],L[1],L[2],N[0],N[1],N[2],N[3],0,0,0),d(this.bounds,L),h+=2+_(y,L,N,E)),O[1][E]>0&&((L=D.slice())[E]+=O[1][E],y.push(D[0],D[1],D[2],N[0],N[1],N[2],N[3],0,0,0,L[0],L[1],L[2],N[0],N[1],N[2],N[3],0,0,0),d(this.bounds,L),h+=2+_(y,L,N,E)))}this.lineCount[E]=h-this.lineOffset[E]}this.buffer.update(y)}},l.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},3436:function(f,s,t){"use strict";var o=t(3236),r=t(9405),i=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),a=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);f.exports=function(u){return r(u,i,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},2260:function(f,s,t){"use strict";var o=t(7766);f.exports=function(M,h,E,k){r||(r=M.FRAMEBUFFER_UNSUPPORTED,i=M.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,a=M.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,u=M.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var D=M.getExtension("WEBGL_draw_buffers");if(!l&&D&&function(j,Z){var z=j.getParameter(Z.MAX_COLOR_ATTACHMENTS_WEBGL);l=new Array(z+1);for(var H=0;H<=z;++H){for(var U=new Array(z),re=0;re<H;++re)U[re]=j.COLOR_ATTACHMENT0+re;for(re=H;re<z;++re)U[re]=j.NONE;l[H]=U}}(M,D),Array.isArray(h)&&(k=E,E=0|h[1],h=0|h[0]),typeof h!="number")throw new Error("gl-fbo: Missing shape parameter");var P=M.getParameter(M.MAX_RENDERBUFFER_SIZE);if(h<0||h>P||E<0||E>P)throw new Error("gl-fbo: Parameters are too large for FBO");var L=1;if("color"in(k=k||{})){if((L=Math.max(0|k.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(L>1){if(!D)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(L>M.getParameter(D.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+L+" draw buffers")}}var O=M.UNSIGNED_BYTE,N=M.getExtension("OES_texture_float");if(k.float&&L>0){if(!N)throw new Error("gl-fbo: Context does not support floating point textures");O=M.FLOAT}else k.preferFloat&&L>0&&N&&(O=M.FLOAT);var V=!0;"depth"in k&&(V=!!k.depth);var F=!1;return"stencil"in k&&(F=!!k.stencil),new m(M,h,E,O,L,V,F,D)};var r,i,a,u,l=null;function d(M){return[M.getParameter(M.FRAMEBUFFER_BINDING),M.getParameter(M.RENDERBUFFER_BINDING),M.getParameter(M.TEXTURE_BINDING_2D)]}function c(M,h){M.bindFramebuffer(M.FRAMEBUFFER,h[0]),M.bindRenderbuffer(M.RENDERBUFFER,h[1]),M.bindTexture(M.TEXTURE_2D,h[2])}function _(M){switch(M){case r:throw new Error("gl-fbo: Framebuffer unsupported");case i:throw new Error("gl-fbo: Framebuffer incomplete attachment");case a:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case u:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function p(M,h,E,k,D,P){if(!k)return null;var L=o(M,h,E,D,k);return L.magFilter=M.NEAREST,L.minFilter=M.NEAREST,L.mipSamples=1,L.bind(),M.framebufferTexture2D(M.FRAMEBUFFER,P,M.TEXTURE_2D,L.handle,0),L}function g(M,h,E,k,D){var P=M.createRenderbuffer();return M.bindRenderbuffer(M.RENDERBUFFER,P),M.renderbufferStorage(M.RENDERBUFFER,k,h,E),M.framebufferRenderbuffer(M.FRAMEBUFFER,D,M.RENDERBUFFER,P),P}function m(M,h,E,k,D,P,L,O){this.gl=M,this._shape=[0|h,0|E],this._destroyed=!1,this._ext=O,this.color=new Array(D);for(var N=0;N<D;++N)this.color[N]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=k,this._useDepth=P,this._useStencil=L;var V=this,F=[0|h,0|E];Object.defineProperties(F,{0:{get:function(){return V._shape[0]},set:function(j){return V.width=j}},1:{get:function(){return V._shape[1]},set:function(j){return V.height=j}}}),this._shapeVector=F,function(j){var Z=d(j.gl),z=j.gl,H=j.handle=z.createFramebuffer(),U=j._shape[0],re=j._shape[1],ee=j.color.length,J=j._ext,Q=j._useStencil,ne=j._useDepth,K=j._colorType;z.bindFramebuffer(z.FRAMEBUFFER,H);for(var oe=0;oe<ee;++oe)j.color[oe]=p(z,U,re,K,z.RGBA,z.COLOR_ATTACHMENT0+oe);ee===0?(j._color_rb=g(z,U,re,z.RGBA4,z.COLOR_ATTACHMENT0),J&&J.drawBuffersWEBGL(l[0])):ee>1&&J.drawBuffersWEBGL(l[ee]);var le=z.getExtension("WEBGL_depth_texture");le?Q?j.depth=p(z,U,re,le.UNSIGNED_INT_24_8_WEBGL,z.DEPTH_STENCIL,z.DEPTH_STENCIL_ATTACHMENT):ne&&(j.depth=p(z,U,re,z.UNSIGNED_SHORT,z.DEPTH_COMPONENT,z.DEPTH_ATTACHMENT)):ne&&Q?j._depth_rb=g(z,U,re,z.DEPTH_STENCIL,z.DEPTH_STENCIL_ATTACHMENT):ne?j._depth_rb=g(z,U,re,z.DEPTH_COMPONENT16,z.DEPTH_ATTACHMENT):Q&&(j._depth_rb=g(z,U,re,z.STENCIL_INDEX,z.STENCIL_ATTACHMENT));var se=z.checkFramebufferStatus(z.FRAMEBUFFER);if(se!==z.FRAMEBUFFER_COMPLETE){for(j._destroyed=!0,z.bindFramebuffer(z.FRAMEBUFFER,null),z.deleteFramebuffer(j.handle),j.handle=null,j.depth&&(j.depth.dispose(),j.depth=null),j._depth_rb&&(z.deleteRenderbuffer(j._depth_rb),j._depth_rb=null),oe=0;oe<j.color.length;++oe)j.color[oe].dispose(),j.color[oe]=null;j._color_rb&&(z.deleteRenderbuffer(j._color_rb),j._color_rb=null),c(z,Z),_(se)}c(z,Z)}(this)}var b=m.prototype;function y(M,h,E){if(M._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(M._shape[0]!==h||M._shape[1]!==E){var k=M.gl,D=k.getParameter(k.MAX_RENDERBUFFER_SIZE);if(h<0||h>D||E<0||E>D)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");M._shape[0]=h,M._shape[1]=E;for(var P=d(k),L=0;L<M.color.length;++L)M.color[L].shape=M._shape;M._color_rb&&(k.bindRenderbuffer(k.RENDERBUFFER,M._color_rb),k.renderbufferStorage(k.RENDERBUFFER,k.RGBA4,M._shape[0],M._shape[1])),M.depth&&(M.depth.shape=M._shape),M._depth_rb&&(k.bindRenderbuffer(k.RENDERBUFFER,M._depth_rb),M._useDepth&&M._useStencil?k.renderbufferStorage(k.RENDERBUFFER,k.DEPTH_STENCIL,M._shape[0],M._shape[1]):M._useDepth?k.renderbufferStorage(k.RENDERBUFFER,k.DEPTH_COMPONENT16,M._shape[0],M._shape[1]):M._useStencil&&k.renderbufferStorage(k.RENDERBUFFER,k.STENCIL_INDEX,M._shape[0],M._shape[1])),k.bindFramebuffer(k.FRAMEBUFFER,M.handle);var O=k.checkFramebufferStatus(k.FRAMEBUFFER);O!==k.FRAMEBUFFER_COMPLETE&&(M.dispose(),c(k,P),_(O)),c(k,P)}}Object.defineProperties(b,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(M){if(Array.isArray(M)||(M=[0|M,0|M]),M.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var h=0|M[0],E=0|M[1];return y(this,h,E),[h,E]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(M){return y(this,M|=0,this._shape[1]),M},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(M){return M|=0,y(this,this._shape[0],M),M},enumerable:!1}}),b.bind=function(){if(!this._destroyed){var M=this.gl;M.bindFramebuffer(M.FRAMEBUFFER,this.handle),M.viewport(0,0,this._shape[0],this._shape[1])}},b.dispose=function(){if(!this._destroyed){this._destroyed=!0;var M=this.gl;M.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(M.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var h=0;h<this.color.length;++h)this.color[h].dispose(),this.color[h]=null;this._color_rb&&(M.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},2992:function(f,s,t){var o=t(3387).sprintf,r=t(5171),i=t(1848),a=t(1085);f.exports=function(u,l,d){"use strict";var c=i(l)||"of unknown name (see npm glsl-shader-name)",_="unknown type";d!==void 0&&(_=d===r.FRAGMENT_SHADER?"fragment":"vertex");for(var p=o(`Error compiling %s shader %s:
`,_,c),g=o("%s%s",p,u),m=u.split(`
`),b={},y=0;y<m.length;y++){var M=m[y];if(M!==""&&M!=="\0"){var h=parseInt(M.split(":")[2]);if(isNaN(h))throw new Error(o("Could not parse error: %s",M));b[h]=M}}var E=a(l).split(`
`);for(y=0;y<E.length;y++)if((b[y+3]||b[y+2]||b[y+1])&&(p+=E[y]+`
`,b[y+1])){var k=b[y+1];k=k.substr(k.split(":",3).join(":").length+1).trim(),p+=o(`^^^ %s

`,k)}return{long:p.trim(),short:g.trim()}}},2510:function(f,s,t){"use strict";f.exports=function(g,m){var b=g.gl,y=new d(g,a(b,l.vertex,l.fragment),a(b,l.pickVertex,l.pickFragment),u(b),u(b),u(b),u(b));return y.update(m),g.addObject(y),y};var o=t(2478),r=t(7762),i=t(1888),a=t(9405),u=t(2762),l=t(6768);function d(g,m,b,y,M,h,E){this.plot=g,this.shader=m,this.pickShader=b,this.positionBuffer=y,this.weightBuffer=M,this.colorBuffer=h,this.idBuffer=E,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var c,_=d.prototype,p=[0,0,1,0,0,1,1,0,1,1,0,1];_.draw=(c=[1,0,0,0,1,0,0,0,1],function(){var g=this.plot,m=this.shader,b=this.bounds,y=this.numVertices;if(!(y<=0)){var M=g.gl,h=g.dataBox,E=b[2]-b[0],k=b[3]-b[1],D=h[2]-h[0],P=h[3]-h[1];c[0]=2*E/D,c[4]=2*k/P,c[6]=2*(b[0]-h[0])/D-1,c[7]=2*(b[1]-h[1])/P-1,m.bind();var L=m.uniforms;L.viewTransform=c,L.shape=this.shape;var O=m.attributes;this.positionBuffer.bind(),O.position.pointer(),this.weightBuffer.bind(),O.weight.pointer(M.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),O.color.pointer(M.UNSIGNED_BYTE,!0),M.drawArrays(M.TRIANGLES,0,y)}}),_.drawPick=function(){var g=[1,0,0,0,1,0,0,0,1],m=[0,0,0,0];return function(b){var y=this.plot,M=this.pickShader,h=this.bounds,E=this.numVertices;if(!(E<=0)){var k=y.gl,D=y.dataBox,P=h[2]-h[0],L=h[3]-h[1],O=D[2]-D[0],N=D[3]-D[1];g[0]=2*P/O,g[4]=2*L/N,g[6]=2*(h[0]-D[0])/O-1,g[7]=2*(h[1]-D[1])/N-1;for(var V=0;V<4;++V)m[V]=b>>8*V&255;this.pickOffset=b,M.bind();var F=M.uniforms;F.viewTransform=g,F.pickOffset=m,F.shape=this.shape;var j=M.attributes;return this.positionBuffer.bind(),j.position.pointer(),this.weightBuffer.bind(),j.weight.pointer(k.UNSIGNED_BYTE,!1),this.idBuffer.bind(),j.pickId.pointer(k.UNSIGNED_BYTE,!1),k.drawArrays(k.TRIANGLES,0,E),b+this.shape[0]*this.shape[1]}}}(),_.pick=function(g,m,b){var y=this.pickOffset,M=this.shape[0]*this.shape[1];if(b<y||b>=y+M)return null;var h=b-y,E=this.xData,k=this.yData;return{object:this,pointId:h,dataCoord:[E[h%this.shape[0]],k[h/this.shape[0]|0]]}},_.update=function(g){var m=(g=g||{}).shape||[0,0],b=g.x||r(m[0]),y=g.y||r(m[1]),M=g.z||new Float32Array(m[0]*m[1]),h=g.zsmooth!==!1;this.xData=b,this.yData=y;var E,k,D,P,L=g.colorLevels||[0],O=g.colorValues||[0,0,0,1],N=L.length,V=this.bounds;h?(E=V[0]=b[0],k=V[1]=y[0],D=V[2]=b[b.length-1],P=V[3]=y[y.length-1]):(E=V[0]=b[0]+(b[1]-b[0])/2,k=V[1]=y[0]+(y[1]-y[0])/2,D=V[2]=b[b.length-1]+(b[b.length-1]-b[b.length-2])/2,P=V[3]=y[y.length-1]+(y[y.length-1]-y[y.length-2])/2);var F=1/(D-E),j=1/(P-k),Z=m[0],z=m[1];this.shape=[Z,z];var H=(h?(Z-1)*(z-1):Z*z)*(p.length>>>1);this.numVertices=H;for(var U=i.mallocUint8(4*H),re=i.mallocFloat32(2*H),ee=i.mallocUint8(2*H),J=i.mallocUint32(H),Q=0,ne=h?Z-1:Z,K=h?z-1:z,oe=0;oe<K;++oe){var le,se;h?(le=j*(y[oe]-k),se=j*(y[oe+1]-k)):(le=oe<z-1?j*(y[oe]-(y[oe+1]-y[oe])/2-k):j*(y[oe]-(y[oe]-y[oe-1])/2-k),se=oe<z-1?j*(y[oe]+(y[oe+1]-y[oe])/2-k):j*(y[oe]+(y[oe]-y[oe-1])/2-k));for(var de=0;de<ne;++de){var be,_e;h?(be=F*(b[de]-E),_e=F*(b[de+1]-E)):(be=de<Z-1?F*(b[de]-(b[de+1]-b[de])/2-E):F*(b[de]-(b[de]-b[de-1])/2-E),_e=de<Z-1?F*(b[de]+(b[de+1]-b[de])/2-E):F*(b[de]+(b[de]-b[de-1])/2-E));for(var xe=0;xe<p.length;xe+=2){var ve,ye,me,Me,Ae=p[xe],ce=p[xe+1],ae=M[h?(oe+ce)*Z+(de+Ae):oe*Z+de],pe=o.le(L,ae);if(pe<0)ve=O[0],ye=O[1],me=O[2],Me=O[3];else if(pe===N-1)ve=O[4*N-4],ye=O[4*N-3],me=O[4*N-2],Me=O[4*N-1];else{var De=(ae-L[pe])/(L[pe+1]-L[pe]),ke=1-De,Ee=4*pe,Ie=4*(pe+1);ve=ke*O[Ee]+De*O[Ie],ye=ke*O[Ee+1]+De*O[Ie+1],me=ke*O[Ee+2]+De*O[Ie+2],Me=ke*O[Ee+3]+De*O[Ie+3]}U[4*Q]=255*ve,U[4*Q+1]=255*ye,U[4*Q+2]=255*me,U[4*Q+3]=255*Me,re[2*Q]=.5*be+.5*_e,re[2*Q+1]=.5*le+.5*se,ee[2*Q]=Ae,ee[2*Q+1]=ce,J[Q]=oe*Z+de,Q+=1}}}this.positionBuffer.update(re),this.weightBuffer.update(ee),this.colorBuffer.update(U),this.idBuffer.update(J),i.free(re),i.free(U),i.free(ee),i.free(J)},_.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},6768:function(f,s,t){"use strict";var o=t(3236);f.exports={fragment:o([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:o([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},7319:function(f,s,t){var o=t(3236),r=t(9405),i=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),a=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),u=o([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),l=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];s.createShader=function(d){return r(d,i,a,null,l)},s.createPickShader=function(d){return r(d,i,u,null,l)}},5714:function(f,s,t){"use strict";f.exports=function(E){var k=E.gl||E.scene&&E.scene.gl,D=_(k);D.attributes.position.location=0,D.attributes.nextPosition.location=1,D.attributes.arcLength.location=2,D.attributes.lineWidth.location=3,D.attributes.color.location=4;var P=p(k);P.attributes.position.location=0,P.attributes.nextPosition.location=1,P.attributes.arcLength.location=2,P.attributes.lineWidth.location=3,P.attributes.color.location=4;for(var L=o(k),O=r(k,[{buffer:L,size:3,offset:0,stride:48},{buffer:L,size:3,offset:12,stride:48},{buffer:L,size:1,offset:24,stride:48},{buffer:L,size:1,offset:28,stride:48},{buffer:L,size:4,offset:32,stride:48}]),N=d(new Array(1024),[256,1,4]),V=0;V<1024;++V)N.data[V]=255;var F=i(k,N);F.wrap=k.REPEAT;var j=new M(k,D,P,L,O,F);return j.update(E),j};var o=t(2762),r=t(8116),i=t(7766),a=new Uint8Array(4),u=new Float32Array(a.buffer),l=t(2478),d=t(9618),c=t(7319),_=c.createShader,p=c.createPickShader,g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function m(E,k){for(var D=0,P=0;P<3;++P){var L=E[P]-k[P];D+=L*L}return Math.sqrt(D)}function b(E){for(var k=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],D=0;D<3;++D)k[0][D]=Math.max(E[0][D],k[0][D]),k[1][D]=Math.min(E[1][D],k[1][D]);return k}function y(E,k,D,P){this.arcLength=E,this.position=k,this.index=D,this.dataCoordinate=P}function M(E,k,D,P,L,O){this.gl=E,this.shader=k,this.pickShader=D,this.buffer=P,this.vao=L,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=O,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var h=M.prototype;h.isTransparent=function(){return this.hasAlpha},h.isOpaque=function(){return!this.hasAlpha},h.pickSlots=1,h.setPickBase=function(E){this.pickId=E},h.drawTransparent=h.draw=function(E){if(this.vertexCount){var k=this.gl,D=this.shader,P=this.vao;D.bind(),D.uniforms={model:E.model||g,view:E.view||g,projection:E.projection||g,clipBounds:b(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[k.drawingBufferWidth,k.drawingBufferHeight],pixelRatio:this.pixelRatio},P.bind(),P.draw(k.TRIANGLE_STRIP,this.vertexCount),P.unbind()}},h.drawPick=function(E){if(this.vertexCount){var k=this.gl,D=this.pickShader,P=this.vao;D.bind(),D.uniforms={model:E.model||g,view:E.view||g,projection:E.projection||g,pickId:this.pickId,clipBounds:b(this.clipBounds),screenShape:[k.drawingBufferWidth,k.drawingBufferHeight],pixelRatio:this.pixelRatio},P.bind(),P.draw(k.TRIANGLE_STRIP,this.vertexCount),P.unbind()}},h.update=function(E){var k,D;this.dirty=!0;var P=!!E.connectGaps;"dashScale"in E&&(this.dashScale=E.dashScale),this.hasAlpha=!1,"opacity"in E&&(this.opacity=+E.opacity,this.opacity<1&&(this.hasAlpha=!0));var L=[],O=[],N=[],V=0,F=0,j=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],Z=E.position||E.positions;if(Z){var z=E.color||E.colors||[0,0,0,1],H=E.lineWidth||1,U=!1;e:for(k=1;k<Z.length;++k){var re,ee,J,Q=Z[k-1],ne=Z[k];for(O.push(V),N.push(Q.slice()),D=0;D<3;++D){if(isNaN(Q[D])||isNaN(ne[D])||!isFinite(Q[D])||!isFinite(ne[D])){if(!P&&L.length>0){for(var K=0;K<24;++K)L.push(L[L.length-12]);F+=2,U=!0}continue e}j[0][D]=Math.min(j[0][D],Q[D],ne[D]),j[1][D]=Math.max(j[1][D],Q[D],ne[D])}Array.isArray(z[0])?(re=z.length>k-1?z[k-1]:z.length>0?z[z.length-1]:[0,0,0,1],ee=z.length>k?z[k]:z.length>0?z[z.length-1]:[0,0,0,1]):re=ee=z,re.length===3&&(re=[re[0],re[1],re[2],1]),ee.length===3&&(ee=[ee[0],ee[1],ee[2],1]),!this.hasAlpha&&re[3]<1&&(this.hasAlpha=!0),J=Array.isArray(H)?H.length>k-1?H[k-1]:H.length>0?H[H.length-1]:[0,0,0,1]:H;var oe=V;if(V+=m(Q,ne),U){for(D=0;D<2;++D)L.push(Q[0],Q[1],Q[2],ne[0],ne[1],ne[2],oe,J,re[0],re[1],re[2],re[3]);F+=2,U=!1}L.push(Q[0],Q[1],Q[2],ne[0],ne[1],ne[2],oe,J,re[0],re[1],re[2],re[3],Q[0],Q[1],Q[2],ne[0],ne[1],ne[2],oe,-J,re[0],re[1],re[2],re[3],ne[0],ne[1],ne[2],Q[0],Q[1],Q[2],V,-J,ee[0],ee[1],ee[2],ee[3],ne[0],ne[1],ne[2],Q[0],Q[1],Q[2],V,J,ee[0],ee[1],ee[2],ee[3]),F+=4}}if(this.buffer.update(L),O.push(V),N.push(Z[Z.length-1].slice()),this.bounds=j,this.vertexCount=F,this.points=N,this.arcLength=O,"dashes"in E){var le=E.dashes.slice();for(le.unshift(0),k=1;k<le.length;++k)le[k]=le[k-1]+le[k];var se=d(new Array(1024),[256,1,4]);for(k=0;k<256;++k){for(D=0;D<4;++D)se.set(k,0,D,0);1&l.le(le,le[le.length-1]*k/255)?se.set(k,0,0,0):se.set(k,0,0,255)}this.texture.setPixels(se)}},h.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},h.pick=function(E){if(!E||E.id!==this.pickId)return null;var k=function(Z,z,H,U){return a[0]=0,a[1]=H,a[2]=z,a[3]=Z,u[0]}(E.value[0],E.value[1],E.value[2]),D=l.le(this.arcLength,k);if(D<0)return null;if(D===this.arcLength.length-1)return new y(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),D);for(var P=this.points[D],L=this.points[Math.min(D+1,this.points.length-1)],O=(k-this.arcLength[D])/(this.arcLength[D+1]-this.arcLength[D]),N=1-O,V=[0,0,0],F=0;F<3;++F)V[F]=N*P[F]+O*L[F];var j=Math.min(O<.5?D:D+1,this.points.length-1);return new y(k,V,j,this.points[j])}},1903:function(f){f.exports=function(s){var t=new Float32Array(16);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t}},6864:function(f){f.exports=function(){var s=new Float32Array(16);return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},9921:function(f){f.exports=function(s){var t=s[0],o=s[1],r=s[2],i=s[3],a=s[4],u=s[5],l=s[6],d=s[7],c=s[8],_=s[9],p=s[10],g=s[11],m=s[12],b=s[13],y=s[14],M=s[15];return(t*u-o*a)*(p*M-g*y)-(t*l-r*a)*(_*M-g*b)+(t*d-i*a)*(_*y-p*b)+(o*l-r*u)*(c*M-g*m)-(o*d-i*u)*(c*y-p*m)+(r*d-i*l)*(c*b-_*m)}},7399:function(f){f.exports=function(s,t){var o=t[0],r=t[1],i=t[2],a=t[3],u=o+o,l=r+r,d=i+i,c=o*u,_=r*u,p=r*l,g=i*u,m=i*l,b=i*d,y=a*u,M=a*l,h=a*d;return s[0]=1-p-b,s[1]=_+h,s[2]=g-M,s[3]=0,s[4]=_-h,s[5]=1-c-b,s[6]=m+y,s[7]=0,s[8]=g+M,s[9]=m-y,s[10]=1-c-p,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},6743:function(f){f.exports=function(s,t,o){var r=t[0],i=t[1],a=t[2],u=t[3],l=r+r,d=i+i,c=a+a,_=r*l,p=r*d,g=r*c,m=i*d,b=i*c,y=a*c,M=u*l,h=u*d,E=u*c;return s[0]=1-(m+y),s[1]=p+E,s[2]=g-h,s[3]=0,s[4]=p-E,s[5]=1-(_+y),s[6]=b+M,s[7]=0,s[8]=g+h,s[9]=b-M,s[10]=1-(_+m),s[11]=0,s[12]=o[0],s[13]=o[1],s[14]=o[2],s[15]=1,s}},7894:function(f){f.exports=function(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},7608:function(f){f.exports=function(s,t){var o=t[0],r=t[1],i=t[2],a=t[3],u=t[4],l=t[5],d=t[6],c=t[7],_=t[8],p=t[9],g=t[10],m=t[11],b=t[12],y=t[13],M=t[14],h=t[15],E=o*l-r*u,k=o*d-i*u,D=o*c-a*u,P=r*d-i*l,L=r*c-a*l,O=i*c-a*d,N=_*y-p*b,V=_*M-g*b,F=_*h-m*b,j=p*M-g*y,Z=p*h-m*y,z=g*h-m*M,H=E*z-k*Z+D*j+P*F-L*V+O*N;return H?(H=1/H,s[0]=(l*z-d*Z+c*j)*H,s[1]=(i*Z-r*z-a*j)*H,s[2]=(y*O-M*L+h*P)*H,s[3]=(g*L-p*O-m*P)*H,s[4]=(d*F-u*z-c*V)*H,s[5]=(o*z-i*F+a*V)*H,s[6]=(M*D-b*O-h*k)*H,s[7]=(_*O-g*D+m*k)*H,s[8]=(u*Z-l*F+c*N)*H,s[9]=(r*F-o*Z-a*N)*H,s[10]=(b*L-y*D+h*E)*H,s[11]=(p*D-_*L-m*E)*H,s[12]=(l*V-u*j-d*N)*H,s[13]=(o*j-r*V+i*N)*H,s[14]=(y*k-b*P-M*E)*H,s[15]=(_*P-p*k+g*E)*H,s):null}},6582:function(f,s,t){var o=t(7894);f.exports=function(r,i,a,u){var l,d,c,_,p,g,m,b,y,M,h=i[0],E=i[1],k=i[2],D=u[0],P=u[1],L=u[2],O=a[0],N=a[1],V=a[2];return Math.abs(h-O)<1e-6&&Math.abs(E-N)<1e-6&&Math.abs(k-V)<1e-6?o(r):(m=h-O,b=E-N,y=k-V,l=P*(y*=M=1/Math.sqrt(m*m+b*b+y*y))-L*(b*=M),d=L*(m*=M)-D*y,c=D*b-P*m,(M=Math.sqrt(l*l+d*d+c*c))?(l*=M=1/M,d*=M,c*=M):(l=0,d=0,c=0),_=b*c-y*d,p=y*l-m*c,g=m*d-b*l,(M=Math.sqrt(_*_+p*p+g*g))?(_*=M=1/M,p*=M,g*=M):(_=0,p=0,g=0),r[0]=l,r[1]=_,r[2]=m,r[3]=0,r[4]=d,r[5]=p,r[6]=b,r[7]=0,r[8]=c,r[9]=g,r[10]=y,r[11]=0,r[12]=-(l*h+d*E+c*k),r[13]=-(_*h+p*E+g*k),r[14]=-(m*h+b*E+y*k),r[15]=1,r)}},6760:function(f){f.exports=function(s,t,o){var r=t[0],i=t[1],a=t[2],u=t[3],l=t[4],d=t[5],c=t[6],_=t[7],p=t[8],g=t[9],m=t[10],b=t[11],y=t[12],M=t[13],h=t[14],E=t[15],k=o[0],D=o[1],P=o[2],L=o[3];return s[0]=k*r+D*l+P*p+L*y,s[1]=k*i+D*d+P*g+L*M,s[2]=k*a+D*c+P*m+L*h,s[3]=k*u+D*_+P*b+L*E,k=o[4],D=o[5],P=o[6],L=o[7],s[4]=k*r+D*l+P*p+L*y,s[5]=k*i+D*d+P*g+L*M,s[6]=k*a+D*c+P*m+L*h,s[7]=k*u+D*_+P*b+L*E,k=o[8],D=o[9],P=o[10],L=o[11],s[8]=k*r+D*l+P*p+L*y,s[9]=k*i+D*d+P*g+L*M,s[10]=k*a+D*c+P*m+L*h,s[11]=k*u+D*_+P*b+L*E,k=o[12],D=o[13],P=o[14],L=o[15],s[12]=k*r+D*l+P*p+L*y,s[13]=k*i+D*d+P*g+L*M,s[14]=k*a+D*c+P*m+L*h,s[15]=k*u+D*_+P*b+L*E,s}},4040:function(f){f.exports=function(s,t,o,r,i,a,u){var l=1/(t-o),d=1/(r-i),c=1/(a-u);return s[0]=-2*l,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*d,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*c,s[11]=0,s[12]=(t+o)*l,s[13]=(i+r)*d,s[14]=(u+a)*c,s[15]=1,s}},4772:function(f){f.exports=function(s,t,o,r,i){var a=1/Math.tan(t/2),u=1/(r-i);return s[0]=a/o,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=a,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=(i+r)*u,s[11]=-1,s[12]=0,s[13]=0,s[14]=2*i*r*u,s[15]=0,s}},6079:function(f){f.exports=function(s,t,o,r){var i,a,u,l,d,c,_,p,g,m,b,y,M,h,E,k,D,P,L,O,N,V,F,j,Z=r[0],z=r[1],H=r[2],U=Math.sqrt(Z*Z+z*z+H*H);return Math.abs(U)<1e-6?null:(Z*=U=1/U,z*=U,H*=U,i=Math.sin(o),u=1-(a=Math.cos(o)),l=t[0],d=t[1],c=t[2],_=t[3],p=t[4],g=t[5],m=t[6],b=t[7],y=t[8],M=t[9],h=t[10],E=t[11],k=Z*Z*u+a,D=z*Z*u+H*i,P=H*Z*u-z*i,L=Z*z*u-H*i,O=z*z*u+a,N=H*z*u+Z*i,V=Z*H*u+z*i,F=z*H*u-Z*i,j=H*H*u+a,s[0]=l*k+p*D+y*P,s[1]=d*k+g*D+M*P,s[2]=c*k+m*D+h*P,s[3]=_*k+b*D+E*P,s[4]=l*L+p*O+y*N,s[5]=d*L+g*O+M*N,s[6]=c*L+m*O+h*N,s[7]=_*L+b*O+E*N,s[8]=l*V+p*F+y*j,s[9]=d*V+g*F+M*j,s[10]=c*V+m*F+h*j,s[11]=_*V+b*F+E*j,t!==s&&(s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s)}},5567:function(f){f.exports=function(s,t,o){var r=Math.sin(o),i=Math.cos(o),a=t[4],u=t[5],l=t[6],d=t[7],c=t[8],_=t[9],p=t[10],g=t[11];return t!==s&&(s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[4]=a*i+c*r,s[5]=u*i+_*r,s[6]=l*i+p*r,s[7]=d*i+g*r,s[8]=c*i-a*r,s[9]=_*i-u*r,s[10]=p*i-l*r,s[11]=g*i-d*r,s}},2408:function(f){f.exports=function(s,t,o){var r=Math.sin(o),i=Math.cos(o),a=t[0],u=t[1],l=t[2],d=t[3],c=t[8],_=t[9],p=t[10],g=t[11];return t!==s&&(s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[0]=a*i-c*r,s[1]=u*i-_*r,s[2]=l*i-p*r,s[3]=d*i-g*r,s[8]=a*r+c*i,s[9]=u*r+_*i,s[10]=l*r+p*i,s[11]=d*r+g*i,s}},7089:function(f){f.exports=function(s,t,o){var r=Math.sin(o),i=Math.cos(o),a=t[0],u=t[1],l=t[2],d=t[3],c=t[4],_=t[5],p=t[6],g=t[7];return t!==s&&(s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[0]=a*i+c*r,s[1]=u*i+_*r,s[2]=l*i+p*r,s[3]=d*i+g*r,s[4]=c*i-a*r,s[5]=_*i-u*r,s[6]=p*i-l*r,s[7]=g*i-d*r,s}},2504:function(f){f.exports=function(s,t,o){var r=o[0],i=o[1],a=o[2];return s[0]=t[0]*r,s[1]=t[1]*r,s[2]=t[2]*r,s[3]=t[3]*r,s[4]=t[4]*i,s[5]=t[5]*i,s[6]=t[6]*i,s[7]=t[7]*i,s[8]=t[8]*a,s[9]=t[9]*a,s[10]=t[10]*a,s[11]=t[11]*a,s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s}},7656:function(f){f.exports=function(s,t,o){var r,i,a,u,l,d,c,_,p,g,m,b,y=o[0],M=o[1],h=o[2];return t===s?(s[12]=t[0]*y+t[4]*M+t[8]*h+t[12],s[13]=t[1]*y+t[5]*M+t[9]*h+t[13],s[14]=t[2]*y+t[6]*M+t[10]*h+t[14],s[15]=t[3]*y+t[7]*M+t[11]*h+t[15]):(r=t[0],i=t[1],a=t[2],u=t[3],l=t[4],d=t[5],c=t[6],_=t[7],p=t[8],g=t[9],m=t[10],b=t[11],s[0]=r,s[1]=i,s[2]=a,s[3]=u,s[4]=l,s[5]=d,s[6]=c,s[7]=_,s[8]=p,s[9]=g,s[10]=m,s[11]=b,s[12]=r*y+l*M+p*h+t[12],s[13]=i*y+d*M+g*h+t[13],s[14]=a*y+c*M+m*h+t[14],s[15]=u*y+_*M+b*h+t[15]),s}},5665:function(f){f.exports=function(s,t){if(s===t){var o=t[1],r=t[2],i=t[3],a=t[6],u=t[7],l=t[11];s[1]=t[4],s[2]=t[8],s[3]=t[12],s[4]=o,s[6]=t[9],s[7]=t[13],s[8]=r,s[9]=a,s[11]=t[14],s[12]=i,s[13]=u,s[14]=l}else s[0]=t[0],s[1]=t[4],s[2]=t[8],s[3]=t[12],s[4]=t[1],s[5]=t[5],s[6]=t[9],s[7]=t[13],s[8]=t[2],s[9]=t[6],s[10]=t[10],s[11]=t[14],s[12]=t[3],s[13]=t[7],s[14]=t[11],s[15]=t[15];return s}},7626:function(f,s,t){"use strict";var o=t(2642),r=t(9346);function i(l,d){for(var c=[0,0,0,0],_=0;_<4;++_)for(var p=0;p<4;++p)c[p]+=l[4*_+p]*d[_];return c}function a(l,d,c,_,p){for(var g=i(_,i(c,i(d,[l[0],l[1],l[2],1]))),m=0;m<3;++m)g[m]/=g[3];return[.5*p[0]*(1+g[0]),.5*p[1]*(1-g[1])]}function u(l,d){for(var c=[0,0,0],_=0;_<l.length;++_)for(var p=l[_],g=d[_],m=0;m<3;++m)c[m]+=g*p[m];return c}f.exports=function(l,d,c,_,p,g){if(l.length===1)return[0,l[0].slice()];for(var m=new Array(l.length),b=0;b<l.length;++b)m[b]=a(l[b],c,_,p,g);var y=0,M=1/0;for(b=0;b<m.length;++b){for(var h=0,E=0;E<2;++E)h+=Math.pow(m[b][E]-d[E],2);h<M&&(M=h,y=b)}var k=function(P,L){if(P.length===2){for(var O=0,N=0,V=0;V<2;++V)O+=Math.pow(L[V]-P[0][V],2),N+=Math.pow(L[V]-P[1][V],2);return(O=Math.sqrt(O))+(N=Math.sqrt(N))<1e-6?[1,0]:[N/(O+N),O/(N+O)]}if(P.length===3){var F=[0,0];return r(P[0],P[1],P[2],L,F),o(P,F)}return[]}(m,d),D=0;for(b=0;b<3;++b){if(k[b]<-.001||k[b]>1.0001)return null;D+=k[b]}return Math.abs(D-1)>.001?null:[y,u(l,k),k]}},840:function(f,s,t){var o=t(3236),r=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),i=o([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),a=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),u=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),l=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),d=o([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),c=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),_=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),p=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),g=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),m=o([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);s.meshShader={vertex:r,fragment:i,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},s.wireShader={vertex:a,fragment:u,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},s.pointShader={vertex:l,fragment:d,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},s.pickShader={vertex:c,fragment:_,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},s.pointPickShader={vertex:p,fragment:_,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},s.contourShader={vertex:g,fragment:m,attributes:[{name:"position",type:"vec3"}]}},7201:function(f,s,t){"use strict";var o=t(9405),r=t(2762),i=t(8116),a=t(7766),u=t(8406),l=t(6760),d=t(7608),c=t(9618),_=t(6729),p=t(7765),g=t(1888),m=t(840),b=t(7626),y=m.meshShader,M=m.wireShader,h=m.pointShader,E=m.pickShader,k=m.pointPickShader,D=m.contourShader,P=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function L(z,H,U,re,ee,J,Q,ne,K,oe,le,se,de,be,_e,xe,ve,ye,me,Me,Ae,ce,ae,pe,De,ke,Ee){this.gl=z,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=H,this.dirty=!0,this.triShader=U,this.lineShader=re,this.pointShader=ee,this.pickShader=J,this.pointPickShader=Q,this.contourShader=ne,this.trianglePositions=K,this.triangleColors=le,this.triangleNormals=de,this.triangleUVs=se,this.triangleIds=oe,this.triangleVAO=be,this.triangleCount=0,this.lineWidth=1,this.edgePositions=_e,this.edgeColors=ve,this.edgeUVs=ye,this.edgeIds=xe,this.edgeVAO=me,this.edgeCount=0,this.pointPositions=Me,this.pointColors=ce,this.pointUVs=ae,this.pointSizes=pe,this.pointIds=Ae,this.pointVAO=De,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=ke,this.contourVAO=Ee,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=P,this._view=P,this._projection=P,this._resolution=[1,1]}var O=L.prototype;function N(z,H){if(!H||!H.length)return 1;for(var U=0;U<H.length;++U){if(H.length<2)return 1;if(H[U][0]===z)return H[U][1];if(H[U][0]>z&&U>0){var re=(H[U][0]-z)/(H[U][0]-H[U-1][0]);return H[U][1]*(1-re)+re*H[U-1][1]}}return 1}function V(z){var H=o(z,h.vertex,h.fragment);return H.attributes.position.location=0,H.attributes.color.location=2,H.attributes.uv.location=3,H.attributes.pointSize.location=4,H}function F(z){var H=o(z,E.vertex,E.fragment);return H.attributes.position.location=0,H.attributes.id.location=1,H}function j(z){var H=o(z,k.vertex,k.fragment);return H.attributes.position.location=0,H.attributes.id.location=1,H.attributes.pointSize.location=4,H}function Z(z){var H=o(z,D.vertex,D.fragment);return H.attributes.position.location=0,H}O.isOpaque=function(){return!this.hasAlpha},O.isTransparent=function(){return this.hasAlpha},O.pickSlots=1,O.setPickBase=function(z){this.pickId=z},O.highlight=function(z){if(z&&this.contourEnable){for(var H=p(this.cells,this.intensity,z.intensity),U=H.cells,re=H.vertexIds,ee=H.vertexWeights,J=U.length,Q=g.mallocFloat32(6*J),ne=0,K=0;K<J;++K)for(var oe=U[K],le=0;le<2;++le){var se=oe[0];oe.length===2&&(se=oe[le]);for(var de=re[se][0],be=re[se][1],_e=ee[se],xe=1-_e,ve=this.positions[de],ye=this.positions[be],me=0;me<3;++me)Q[ne++]=_e*ve[me]+xe*ye[me]}this.contourCount=ne/3|0,this.contourPositions.update(Q.subarray(0,ne)),g.free(Q)}else this.contourCount=0},O.update=function(z){z=z||{};var H=this.gl;this.dirty=!0,"contourEnable"in z&&(this.contourEnable=z.contourEnable),"contourColor"in z&&(this.contourColor=z.contourColor),"lineWidth"in z&&(this.lineWidth=z.lineWidth),"lightPosition"in z&&(this.lightPosition=z.lightPosition),this.hasAlpha=!1,"opacity"in z&&(this.opacity=z.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in z&&(this.opacityscale=z.opacityscale,this.hasAlpha=!0),"ambient"in z&&(this.ambientLight=z.ambient),"diffuse"in z&&(this.diffuseLight=z.diffuse),"specular"in z&&(this.specularLight=z.specular),"roughness"in z&&(this.roughness=z.roughness),"fresnel"in z&&(this.fresnel=z.fresnel),z.texture?(this.texture.dispose(),this.texture=a(H,z.texture)):z.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=H.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=H.LINEAR,this.texture.setPixels(function(Pt,Rt){for(var St=_({colormap:Pt,nshades:256,format:"rgba"}),Ye=new Uint8Array(1024),Ke=0;Ke<256;++Ke){for(var Ve=St[Ke],$e=0;$e<3;++$e)Ye[4*Ke+$e]=Ve[$e];Ye[4*Ke+3]=Rt?255*N(Ke/255,Rt):255*Ve[3]}return c(Ye,[256,256,4],[4,0,1])}(z.colormap,this.opacityscale)),this.texture.generateMipmap());var U=z.cells,re=z.positions;if(re&&U){var ee=[],J=[],Q=[],ne=[],K=[],oe=[],le=[],se=[],de=[],be=[],_e=[],xe=[],ve=[],ye=[];this.cells=U,this.positions=re;var me=z.vertexNormals,Me=z.cellNormals,Ae=z.vertexNormalsEpsilon===void 0?1e-6:z.vertexNormalsEpsilon,ce=z.faceNormalsEpsilon===void 0?1e-6:z.faceNormalsEpsilon;z.useFacetNormals&&!Me&&(Me=u.faceNormals(U,re,ce)),Me||me||(me=u.vertexNormals(U,re,Ae));var ae=z.vertexColors,pe=z.cellColors,De=z.meshColor||[1,1,1,1],ke=z.vertexUVs,Ee=z.vertexIntensity,Ie=z.cellUVs,Re=z.cellIntensity,Ne=1/0,ge=-1/0;if(!ke&&!Ie)if(Ee)if(z.vertexIntensityBounds)Ne=+z.vertexIntensityBounds[0],ge=+z.vertexIntensityBounds[1];else for(var we=0;we<Ee.length;++we){var Ce=Ee[we];Ne=Math.min(Ne,Ce),ge=Math.max(ge,Ce)}else if(Re)if(z.cellIntensityBounds)Ne=+z.cellIntensityBounds[0],ge=+z.cellIntensityBounds[1];else for(we=0;we<Re.length;++we)Ce=Re[we],Ne=Math.min(Ne,Ce),ge=Math.max(ge,Ce);else for(we=0;we<re.length;++we)Ce=re[we][2],Ne=Math.min(Ne,Ce),ge=Math.max(ge,Ce);this.intensity=Ee||Re||function(Pt){for(var Rt=Pt.length,St=new Array(Rt),Ye=0;Ye<Rt;++Ye)St[Ye]=Pt[Ye][2];return St}(re),this.pickVertex=!(Re||pe);var ze=z.pointSizes,Pe=z.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],we=0;we<re.length;++we)for(var Ue=re[we],Ge=0;Ge<3;++Ge)!isNaN(Ue[Ge])&&isFinite(Ue[Ge])&&(this.bounds[0][Ge]=Math.min(this.bounds[0][Ge],Ue[Ge]),this.bounds[1][Ge]=Math.max(this.bounds[1][Ge],Ue[Ge]));var Xe=0,st=0,at=0;e:for(we=0;we<U.length;++we){var vt=U[we];switch(vt.length){case 1:for(Ue=re[gt=vt[0]],Ge=0;Ge<3;++Ge)if(isNaN(Ue[Ge])||!isFinite(Ue[Ge]))continue e;be.push(Ue[0],Ue[1],Ue[2]),rt=ae?ae[gt]:pe?pe[we]:De,this.opacityscale&&Ee?J.push(rt[0],rt[1],rt[2],this.opacity*N((Ee[gt]-Ne)/(ge-Ne),this.opacityscale)):rt.length===3?_e.push(rt[0],rt[1],rt[2],this.opacity):(_e.push(rt[0],rt[1],rt[2],rt[3]*this.opacity),rt[3]<1&&(this.hasAlpha=!0)),tt=ke?ke[gt]:Ee?[(Ee[gt]-Ne)/(ge-Ne),0]:Ie?Ie[we]:Re?[(Re[we]-Ne)/(ge-Ne),0]:[(Ue[2]-Ne)/(ge-Ne),0],xe.push(tt[0],tt[1]),ze?ve.push(ze[gt]):ve.push(Pe),ye.push(we),at+=1;break;case 2:for(Ge=0;Ge<2;++Ge){Ue=re[gt=vt[Ge]];for(var xt=0;xt<3;++xt)if(isNaN(Ue[xt])||!isFinite(Ue[xt]))continue e}for(Ge=0;Ge<2;++Ge)Ue=re[gt=vt[Ge]],oe.push(Ue[0],Ue[1],Ue[2]),rt=ae?ae[gt]:pe?pe[we]:De,this.opacityscale&&Ee?J.push(rt[0],rt[1],rt[2],this.opacity*N((Ee[gt]-Ne)/(ge-Ne),this.opacityscale)):rt.length===3?le.push(rt[0],rt[1],rt[2],this.opacity):(le.push(rt[0],rt[1],rt[2],rt[3]*this.opacity),rt[3]<1&&(this.hasAlpha=!0)),tt=ke?ke[gt]:Ee?[(Ee[gt]-Ne)/(ge-Ne),0]:Ie?Ie[we]:Re?[(Re[we]-Ne)/(ge-Ne),0]:[(Ue[2]-Ne)/(ge-Ne),0],se.push(tt[0],tt[1]),de.push(we);st+=1;break;case 3:for(Ge=0;Ge<3;++Ge)for(Ue=re[gt=vt[Ge]],xt=0;xt<3;++xt)if(isNaN(Ue[xt])||!isFinite(Ue[xt]))continue e;for(Ge=0;Ge<3;++Ge){var gt,rt,tt,Mt;Ue=re[gt=vt[2-Ge]],ee.push(Ue[0],Ue[1],Ue[2]),(rt=ae?ae[gt]:pe?pe[we]:De)?this.opacityscale&&Ee?J.push(rt[0],rt[1],rt[2],this.opacity*N((Ee[gt]-Ne)/(ge-Ne),this.opacityscale)):rt.length===3?J.push(rt[0],rt[1],rt[2],this.opacity):(J.push(rt[0],rt[1],rt[2],rt[3]*this.opacity),rt[3]<1&&(this.hasAlpha=!0)):J.push(.5,.5,.5,1),tt=ke?ke[gt]:Ee?[(Ee[gt]-Ne)/(ge-Ne),0]:Ie?Ie[we]:Re?[(Re[we]-Ne)/(ge-Ne),0]:[(Ue[2]-Ne)/(ge-Ne),0],ne.push(tt[0],tt[1]),Mt=me?me[gt]:Me[we],Q.push(Mt[0],Mt[1],Mt[2]),K.push(we)}Xe+=1}}this.pointCount=at,this.edgeCount=st,this.triangleCount=Xe,this.pointPositions.update(be),this.pointColors.update(_e),this.pointUVs.update(xe),this.pointSizes.update(ve),this.pointIds.update(new Uint32Array(ye)),this.edgePositions.update(oe),this.edgeColors.update(le),this.edgeUVs.update(se),this.edgeIds.update(new Uint32Array(de)),this.trianglePositions.update(ee),this.triangleColors.update(J),this.triangleUVs.update(ne),this.triangleNormals.update(Q),this.triangleIds.update(new Uint32Array(K))}},O.drawTransparent=O.draw=function(z){z=z||{};for(var H=this.gl,U=z.model||P,re=z.view||P,ee=z.projection||P,J=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],Q=0;Q<3;++Q)J[0][Q]=Math.max(J[0][Q],this.clipBounds[0][Q]),J[1][Q]=Math.min(J[1][Q],this.clipBounds[1][Q]);var ne={model:U,view:re,projection:ee,inverseModel:P.slice(),clipBounds:J,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};ne.inverseModel=d(ne.inverseModel,ne.model),H.disable(H.CULL_FACE),this.texture.bind(0);var K=new Array(16);for(l(K,ne.view,ne.model),l(K,ne.projection,K),d(K,K),Q=0;Q<3;++Q)ne.eyePosition[Q]=K[12+Q]/K[15];var oe,le=K[15];for(Q=0;Q<3;++Q)le+=this.lightPosition[Q]*K[4*Q+3];for(Q=0;Q<3;++Q){for(var se=K[12+Q],de=0;de<3;++de)se+=K[4*de+Q]*this.lightPosition[de];ne.lightPosition[Q]=se/le}this.triangleCount>0&&((oe=this.triShader).bind(),oe.uniforms=ne,this.triangleVAO.bind(),H.drawArrays(H.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((oe=this.lineShader).bind(),oe.uniforms=ne,this.edgeVAO.bind(),H.lineWidth(this.lineWidth*this.pixelRatio),H.drawArrays(H.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((oe=this.pointShader).bind(),oe.uniforms=ne,this.pointVAO.bind(),H.drawArrays(H.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((oe=this.contourShader).bind(),oe.uniforms=ne,this.contourVAO.bind(),H.drawArrays(H.LINES,0,this.contourCount),this.contourVAO.unbind())},O.drawPick=function(z){z=z||{};for(var H=this.gl,U=z.model||P,re=z.view||P,ee=z.projection||P,J=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],Q=0;Q<3;++Q)J[0][Q]=Math.max(J[0][Q],this.clipBounds[0][Q]),J[1][Q]=Math.min(J[1][Q],this.clipBounds[1][Q]);this._model=[].slice.call(U),this._view=[].slice.call(re),this._projection=[].slice.call(ee),this._resolution=[H.drawingBufferWidth,H.drawingBufferHeight];var ne,K={model:U,view:re,projection:ee,clipBounds:J,pickId:this.pickId/255};(ne=this.pickShader).bind(),ne.uniforms=K,this.triangleCount>0&&(this.triangleVAO.bind(),H.drawArrays(H.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),H.lineWidth(this.lineWidth*this.pixelRatio),H.drawArrays(H.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((ne=this.pointPickShader).bind(),ne.uniforms=K,this.pointVAO.bind(),H.drawArrays(H.POINTS,0,this.pointCount),this.pointVAO.unbind())},O.pick=function(z){if(!z||z.id!==this.pickId)return null;for(var H=z.value[0]+256*z.value[1]+65536*z.value[2],U=this.cells[H],re=this.positions,ee=new Array(U.length),J=0;J<U.length;++J)ee[J]=re[U[J]];var Q=z.coord[0],ne=z.coord[1];if(!this.pickVertex){var K=this.positions[U[0]],oe=this.positions[U[1]],le=this.positions[U[2]],se=[(K[0]+oe[0]+le[0])/3,(K[1]+oe[1]+le[1])/3,(K[2]+oe[2]+le[2])/3];return{_cellCenter:!0,position:[Q,ne],index:H,cell:U,cellId:H,intensity:this.intensity[H],dataCoordinate:se}}var de=b(ee,[Q*this.pixelRatio,this._resolution[1]-ne*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!de)return null;var be=de[2],_e=0;for(J=0;J<U.length;++J)_e+=be[J]*this.intensity[U[J]];return{position:de[1],index:U[de[0]],cell:U,cellId:H,intensity:_e,dataCoordinate:this.positions[U[de[0]]]}},O.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},f.exports=function(z,H){if(arguments.length===1&&(z=(H=z).gl),!(z.getExtension("OES_standard_derivatives")||z.getExtension("MOZ_OES_standard_derivatives")||z.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var U=function(Re){var Ne=o(Re,y.vertex,y.fragment);return Ne.attributes.position.location=0,Ne.attributes.color.location=2,Ne.attributes.uv.location=3,Ne.attributes.normal.location=4,Ne}(z),re=function(Re){var Ne=o(Re,M.vertex,M.fragment);return Ne.attributes.position.location=0,Ne.attributes.color.location=2,Ne.attributes.uv.location=3,Ne}(z),ee=V(z),J=F(z),Q=j(z),ne=Z(z),K=a(z,c(new Uint8Array([255,255,255,255]),[1,1,4]));K.generateMipmap(),K.minFilter=z.LINEAR_MIPMAP_LINEAR,K.magFilter=z.LINEAR;var oe=r(z),le=r(z),se=r(z),de=r(z),be=r(z),_e=i(z,[{buffer:oe,type:z.FLOAT,size:3},{buffer:be,type:z.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:le,type:z.FLOAT,size:4},{buffer:se,type:z.FLOAT,size:2},{buffer:de,type:z.FLOAT,size:3}]),xe=r(z),ve=r(z),ye=r(z),me=r(z),Me=i(z,[{buffer:xe,type:z.FLOAT,size:3},{buffer:me,type:z.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ve,type:z.FLOAT,size:4},{buffer:ye,type:z.FLOAT,size:2}]),Ae=r(z),ce=r(z),ae=r(z),pe=r(z),De=r(z),ke=i(z,[{buffer:Ae,type:z.FLOAT,size:3},{buffer:De,type:z.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ce,type:z.FLOAT,size:4},{buffer:ae,type:z.FLOAT,size:2},{buffer:pe,type:z.FLOAT,size:1}]),Ee=r(z),Ie=new L(z,K,U,re,ee,J,Q,ne,oe,be,le,se,de,_e,xe,me,ve,ye,Me,Ae,De,ce,ae,pe,ke,Ee,i(z,[{buffer:Ee,type:z.FLOAT,size:3}]));return Ie.update(H),Ie}},8120:function(f,s,t){"use strict";f.exports=function(c){var _=c.gl;return new a(c,o(_,[0,0,0,1,1,0,1,1]),r(_,i.boxVert,i.lineFrag))};var o=t(2762),r=t(9405),i=t(3603);function a(c,_,p){this.plot=c,this.vbo=_,this.shader=p}var u,l,d=a.prototype;d.bind=function(){var c=this.shader;this.vbo.bind(),this.shader.bind(),c.attributes.coord.pointer(),c.uniforms.screenBox=this.plot.screenBox},d.drawBox=(u=[0,0],l=[0,0],function(c,_,p,g,m){var b=this.plot,y=this.shader,M=b.gl;u[0]=c,u[1]=_,l[0]=p,l[1]=g,y.uniforms.lo=u,y.uniforms.hi=l,y.uniforms.color=m,M.drawArrays(M.TRIANGLE_STRIP,0,4)}),d.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},1913:function(f,s,t){"use strict";f.exports=function(b){var y=b.gl;return new u(b,o(y),r(y,a.gridVert,a.gridFrag),r(y,a.tickVert,a.gridFrag))};var o=t(2762),r=t(9405),i=t(2478),a=t(3603);function u(b,y,M,h){this.plot=b,this.vbo=y,this.shader=M,this.tickShader=h,this.ticks=[[],[]]}function l(b,y){return b-y}var d,c,_,p,g,m=u.prototype;m.draw=(d=[0,0],c=[0,0],_=[0,0],function(){for(var b=this.plot,y=this.vbo,M=this.shader,h=this.ticks,E=b.gl,k=b._tickBounds,D=b.dataBox,P=b.viewBox,L=b.gridLineWidth,O=b.gridLineColor,N=b.gridLineEnable,V=b.pixelRatio,F=0;F<2;++F){var j=k[F],Z=k[F+2]-j,z=.5*(D[F+2]+D[F]),H=D[F+2]-D[F];c[F]=2*Z/H,d[F]=2*(j-z)/H}M.bind(),y.bind(),M.attributes.dataCoord.pointer(),M.uniforms.dataShift=d,M.uniforms.dataScale=c;var U=0;for(F=0;F<2;++F){_[0]=_[1]=0,_[F]=1,M.uniforms.dataAxis=_,M.uniforms.lineWidth=L[F]/(P[F+2]-P[F])*V,M.uniforms.color=O[F];var re=6*h[F].length;N[F]&&re&&E.drawArrays(E.TRIANGLES,U,re),U+=re}}),m.drawTickMarks=function(){var b=[0,0],y=[0,0],M=[1,0],h=[0,1],E=[0,0],k=[0,0];return function(){for(var D=this.plot,P=this.vbo,L=this.tickShader,O=this.ticks,N=D.gl,V=D._tickBounds,F=D.dataBox,j=D.viewBox,Z=D.pixelRatio,z=D.screenBox,H=z[2]-z[0],U=z[3]-z[1],re=j[2]-j[0],ee=j[3]-j[1],J=0;J<2;++J){var Q=V[J],ne=V[J+2]-Q,K=.5*(F[J+2]+F[J]),oe=F[J+2]-F[J];y[J]=2*ne/oe,b[J]=2*(Q-K)/oe}y[0]*=re/H,b[0]*=re/H,y[1]*=ee/U,b[1]*=ee/U,L.bind(),P.bind(),L.attributes.dataCoord.pointer();var le=L.uniforms;le.dataShift=b,le.dataScale=y;var se=D.tickMarkLength,de=D.tickMarkWidth,be=D.tickMarkColor,_e=6*O[0].length,xe=Math.min(i.ge(O[0],(F[0]-V[0])/(V[2]-V[0]),l),O[0].length),ve=Math.min(i.gt(O[0],(F[2]-V[0])/(V[2]-V[0]),l),O[0].length),ye=0+6*xe,me=6*Math.max(0,ve-xe),Me=Math.min(i.ge(O[1],(F[1]-V[1])/(V[3]-V[1]),l),O[1].length),Ae=Math.min(i.gt(O[1],(F[3]-V[1])/(V[3]-V[1]),l),O[1].length),ce=_e+6*Me,ae=6*Math.max(0,Ae-Me);E[0]=2*(j[0]-se[1])/H-1,E[1]=(j[3]+j[1])/U-1,k[0]=se[1]*Z/H,k[1]=de[1]*Z/U,ae&&(le.color=be[1],le.tickScale=k,le.dataAxis=h,le.screenOffset=E,N.drawArrays(N.TRIANGLES,ce,ae)),E[0]=(j[2]+j[0])/H-1,E[1]=2*(j[1]-se[0])/U-1,k[0]=de[0]*Z/H,k[1]=se[0]*Z/U,me&&(le.color=be[0],le.tickScale=k,le.dataAxis=M,le.screenOffset=E,N.drawArrays(N.TRIANGLES,ye,me)),E[0]=2*(j[2]+se[3])/H-1,E[1]=(j[3]+j[1])/U-1,k[0]=se[3]*Z/H,k[1]=de[3]*Z/U,ae&&(le.color=be[3],le.tickScale=k,le.dataAxis=h,le.screenOffset=E,N.drawArrays(N.TRIANGLES,ce,ae)),E[0]=(j[2]+j[0])/H-1,E[1]=2*(j[3]+se[2])/U-1,k[0]=de[2]*Z/H,k[1]=se[2]*Z/U,me&&(le.color=be[2],le.tickScale=k,le.dataAxis=M,le.screenOffset=E,N.drawArrays(N.TRIANGLES,ye,me))}}(),m.update=(p=[1,1,-1,-1,1,-1],g=[1,-1,1,1,-1,-1],function(b){for(var y=b.ticks,M=b.bounds,h=new Float32Array(18*(y[0].length+y[1].length)),E=(this.plot.zeroLineEnable,0),k=[[],[]],D=0;D<2;++D)for(var P=k[D],L=y[D],O=M[D],N=M[D+2],V=0;V<L.length;++V){var F=(L[V].x-O)/(N-O);P.push(F);for(var j=0;j<6;++j)h[E++]=F,h[E++]=p[j],h[E++]=g[j]}this.ticks=k,this.vbo.update(h)}),m.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},4747:function(f,s,t){"use strict";f.exports=function(c){var _=c.gl;return new a(c,o(_,[-1,-1,-1,1,1,-1,1,1]),r(_,i.lineVert,i.lineFrag))};var o=t(2762),r=t(9405),i=t(3603);function a(c,_,p){this.plot=c,this.vbo=_,this.shader=p}var u,l,d=a.prototype;d.bind=function(){var c=this.shader;this.vbo.bind(),this.shader.bind(),c.attributes.coord.pointer(),c.uniforms.screenBox=this.plot.screenBox},d.drawLine=(u=[0,0],l=[0,0],function(c,_,p,g,m,b){var y=this.plot,M=this.shader,h=y.gl;u[0]=c,u[1]=_,l[0]=p,l[1]=g,M.uniforms.start=u,M.uniforms.end=l,M.uniforms.width=m*y.pixelRatio,M.uniforms.color=b,h.drawArrays(h.TRIANGLE_STRIP,0,4)}),d.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},3603:function(f,s,t){"use strict";var o=t(3236),r=o([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);f.exports={lineVert:o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:r,textVert:o([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:r,gridVert:o([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:r,boxVert:o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:o([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},2142:function(f,s,t){"use strict";f.exports=function(y){var M=y.gl;return new l(y,o(M),r(M,u.textVert,u.textFrag))};var o=t(2762),r=t(9405),i=t(529),a=t(2478),u=t(3603);function l(y,M,h){this.plot=y,this.vbo=M,this.shader=h,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var d,c,_,p,g,m,b=l.prototype;b.drawTicks=(d=[0,0],c=[0,0],_=[0,0],function(y){var M=this.plot,h=this.shader,E=this.tickX[y],k=this.tickOffset[y],D=M.gl,P=M.viewBox,L=M.dataBox,O=M.screenBox,N=M.pixelRatio,V=M.tickEnable,F=M.tickPad,j=M.tickColor,Z=M.tickAngle,z=M.labelEnable,H=M.labelPad,U=M.labelColor,re=M.labelAngle,ee=this.labelOffset[y],J=this.labelCount[y],Q=a.lt(E,L[y]),ne=a.le(E,L[y+2]);d[0]=d[1]=0,d[y]=1,c[y]=(P[2+y]+P[y])/(O[2+y]-O[y])-1;var K=2/O[2+(1^y)]-O[1^y];c[1^y]=K*P[1^y]-1,V[y]&&(c[1^y]-=K*N*F[y],Q<ne&&k[ne]>k[Q]&&(h.uniforms.dataAxis=d,h.uniforms.screenOffset=c,h.uniforms.color=j[y],h.uniforms.angle=Z[y],D.drawArrays(D.TRIANGLES,k[Q],k[ne]-k[Q]))),z[y]&&J&&(c[1^y]-=K*N*H[y],h.uniforms.dataAxis=_,h.uniforms.screenOffset=c,h.uniforms.color=U[y],h.uniforms.angle=re[y],D.drawArrays(D.TRIANGLES,ee,J)),c[1^y]=K*P[2+(1^y)]-1,V[y+2]&&(c[1^y]+=K*N*F[y+2],Q<ne&&k[ne]>k[Q]&&(h.uniforms.dataAxis=d,h.uniforms.screenOffset=c,h.uniforms.color=j[y+2],h.uniforms.angle=Z[y+2],D.drawArrays(D.TRIANGLES,k[Q],k[ne]-k[Q]))),z[y+2]&&J&&(c[1^y]+=K*N*H[y+2],h.uniforms.dataAxis=_,h.uniforms.screenOffset=c,h.uniforms.color=U[y+2],h.uniforms.angle=re[y+2],D.drawArrays(D.TRIANGLES,ee,J))}),b.drawTitle=function(){var y=[0,0],M=[0,0];return function(){var h=this.plot,E=this.shader,k=h.gl,D=h.screenBox,P=h.titleCenter,L=h.titleAngle,O=h.titleColor,N=h.pixelRatio;if(this.titleCount){for(var V=0;V<2;++V)M[V]=2*(P[V]*N-D[V])/(D[2+V]-D[V])-1;E.bind(),E.uniforms.dataAxis=y,E.uniforms.screenOffset=M,E.uniforms.angle=L,E.uniforms.color=O,k.drawArrays(k.TRIANGLES,this.titleOffset,this.titleCount)}}}(),b.bind=(p=[0,0],g=[0,0],m=[0,0],function(){var y=this.plot,M=this.shader,h=y._tickBounds,E=y.dataBox,k=y.screenBox,D=y.viewBox;M.bind();for(var P=0;P<2;++P){var L=h[P],O=h[P+2]-L,N=.5*(E[P+2]+E[P]),V=E[P+2]-E[P],F=D[P],j=D[P+2]-F,Z=k[P],z=k[P+2]-Z;g[P]=2*O/V*j/z,p[P]=2*(L-N)/V*j/z}m[1]=2*y.pixelRatio/(k[3]-k[1]),m[0]=m[1]*(k[3]-k[1])/(k[2]-k[0]),M.uniforms.dataScale=g,M.uniforms.dataShift=p,M.uniforms.textScale=m,this.vbo.bind(),M.attributes.textCoordinate.pointer()}),b.update=function(y){var M,h,E,k,D,P=[],L=y.ticks,O=y.bounds;for(D=0;D<2;++D){var N=[Math.floor(P.length/3)],V=[-1/0],F=L[D];for(M=0;M<F.length;++M){var j=F[M],Z=j.x,z=j.text,H=j.font||"sans-serif",U=j.fontStyle||"normal",re=j.fontWeight||"normal",ee=j.fontVariant||"normal";k=j.fontSize||12;for(var J=1/(O[D+2]-O[D]),Q=O[D],ne=z.split(`
`),K=0;K<ne.length;K++)for(E=i(H,ne[K],{fontStyle:U,fontWeight:re,fontVariant:ee}).data,h=0;h<E.length;h+=2)P.push(E[h]*k,-E[h+1]*k-K*k*1.2,(Z-Q)*J);N.push(Math.floor(P.length/3)),V.push(Z)}this.tickOffset[D]=N,this.tickX[D]=V}for(D=0;D<2;++D){for(this.labelOffset[D]=Math.floor(P.length/3),E=i(y.labelFont[D],y.labels[D],{fontStyle:y.labelFontStyle[D],fontWeight:y.labelFontWeight[D],fontVariant:y.labelFontVariant[D],textAlign:"center"}).data,k=y.labelSize[D],M=0;M<E.length;M+=2)P.push(E[M]*k,-E[M+1]*k,0);this.labelCount[D]=Math.floor(P.length/3)-this.labelOffset[D]}for(this.titleOffset=Math.floor(P.length/3),E=i(y.titleFont,y.title,{fontStyle:y.titleFontStyle,fontWeight:y.titleFontWeight,fontVariant:y.titleFontVariant}).data,k=y.titleSize,M=0;M<E.length;M+=2)P.push(E[M]*k,-E[M+1]*k,0);this.titleCount=Math.floor(P.length/3)-this.titleOffset,this.vbo.update(P)},b.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},1850:function(f,s,t){"use strict";f.exports=function(p){var g=p.gl,m=new l(g,o(g,[g.drawingBufferWidth,g.drawingBufferHeight]));return m.grid=r(m),m.text=i(m),m.line=a(m),m.box=u(m),m.update(p),m};var o=t(3589),r=t(1913),i=t(2142),a=t(4747),u=t(8120);function l(p,g){this.gl=p,this.pickBuffer=g,this.screenBox=[0,0,p.drawingBufferWidth,p.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var d=l.prototype;function c(p){for(var g=p.slice(),m=0;m<g.length;++m)g[m]=g[m].slice();return g}function _(p,g){return p.x-g.x}d.setDirty=function(){this.dirty=this.pickDirty=!0},d.setOverlayDirty=function(){this.dirty=!0},d.nextDepthValue=function(){return this._depthCounter++/65536},d.draw=function(){var p=this.gl,g=this.screenBox,m=this.viewBox,b=this.dataBox,y=this.pixelRatio,M=this.grid,h=this.line,E=this.text,k=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,p.bindFramebuffer(p.FRAMEBUFFER,null),p.enable(p.SCISSOR_TEST),p.disable(p.DEPTH_TEST),p.depthFunc(p.LESS),p.depthMask(!1),p.enable(p.BLEND),p.blendEquation(p.FUNC_ADD,p.FUNC_ADD),p.blendFunc(p.ONE,p.ONE_MINUS_SRC_ALPHA),this.borderColor){p.scissor(g[0],g[1],g[2]-g[0],g[3]-g[1]);var D=this.borderColor;p.clearColor(D[0]*D[3],D[1]*D[3],D[2]*D[3],D[3]),p.clear(p.COLOR_BUFFER_BIT|p.DEPTH_BUFFER_BIT)}p.scissor(m[0],m[1],m[2]-m[0],m[3]-m[1]),p.viewport(m[0],m[1],m[2]-m[0],m[3]-m[1]);var P=this.backgroundColor;p.clearColor(P[0]*P[3],P[1]*P[3],P[2]*P[3],P[3]),p.clear(p.COLOR_BUFFER_BIT),M.draw();var L=this.zeroLineEnable,O=this.zeroLineColor,N=this.zeroLineWidth;if(L[0]||L[1]){h.bind();for(var V=0;V<2;++V)if(L[V]&&b[V]<=0&&b[V+2]>=0){var F=g[V]-b[V]*(g[V+2]-g[V])/(b[V+2]-b[V]);V===0?h.drawLine(F,g[1],F,g[3],N[V],O[V]):h.drawLine(g[0],F,g[2],F,N[V],O[V])}}for(V=0;V<k.length;++V)k[V].draw();p.viewport(g[0],g[1],g[2]-g[0],g[3]-g[1]),p.scissor(g[0],g[1],g[2]-g[0],g[3]-g[1]),this.grid.drawTickMarks(),h.bind();var j=this.borderLineEnable,Z=this.borderLineWidth,z=this.borderLineColor;for(j[1]&&h.drawLine(m[0],m[1]-.5*Z[1]*y,m[0],m[3]+.5*Z[3]*y,Z[1],z[1]),j[0]&&h.drawLine(m[0]-.5*Z[0]*y,m[1],m[2]+.5*Z[2]*y,m[1],Z[0],z[0]),j[3]&&h.drawLine(m[2],m[1]-.5*Z[1]*y,m[2],m[3]+.5*Z[3]*y,Z[3],z[3]),j[2]&&h.drawLine(m[0]-.5*Z[0]*y,m[3],m[2]+.5*Z[2]*y,m[3],Z[2],z[2]),E.bind(),V=0;V<2;++V)E.drawTicks(V);this.titleEnable&&E.drawTitle();var H=this.overlays;for(V=0;V<H.length;++V)H[V].draw();p.disable(p.SCISSOR_TEST),p.disable(p.BLEND),p.depthMask(!0)}},d.drawPick=function(){if(!this.static){var p=this.pickBuffer;this.gl,this._pickTimeout=null,p.begin();for(var g=1,m=this.objects,b=0;b<m.length;++b)g=m[b].drawPick(g);p.end()}},d.pick=function(p,g){if(!this.static){var m=this.pixelRatio,b=this.pickPixelRatio,y=this.viewBox,M=0|Math.round((p-y[0]/m)*b),h=0|Math.round((g-y[1]/m)*b),E=this.pickBuffer.query(M,h,this.pickRadius);if(!E)return null;for(var k=E.id+(E.value[0]<<8)+(E.value[1]<<16)+(E.value[2]<<24),D=this.objects,P=0;P<D.length;++P){var L=D[P].pick(M,h,k);if(L)return L}return null}},d.setScreenBox=function(p){var g=this.screenBox,m=this.pixelRatio;g[0]=0|Math.round(p[0]*m),g[1]=0|Math.round(p[1]*m),g[2]=0|Math.round(p[2]*m),g[3]=0|Math.round(p[3]*m),this.setDirty()},d.setDataBox=function(p){var g=this.dataBox;(g[0]!==p[0]||g[1]!==p[1]||g[2]!==p[2]||g[3]!==p[3])&&(g[0]=p[0],g[1]=p[1],g[2]=p[2],g[3]=p[3],this.setDirty())},d.setViewBox=function(p){var g=this.pixelRatio,m=this.viewBox;m[0]=0|Math.round(p[0]*g),m[1]=0|Math.round(p[1]*g),m[2]=0|Math.round(p[2]*g),m[3]=0|Math.round(p[3]*g);var b=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((p[2]-p[0])*b),0|Math.round((p[3]-p[1])*b)],this.setDirty()},d.update=function(p){p=p||{};var g=this.gl;this.pixelRatio=p.pixelRatio||1;var m=this.pixelRatio;this.pickPixelRatio=Math.max(m,1),this.setScreenBox(p.screenBox||[0,0,g.drawingBufferWidth/m,g.drawingBufferHeight/m]),this.screenBox,this.setViewBox(p.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/m,.125*(this.screenBox[3]-this.screenBox[1])/m,.875*(this.screenBox[2]-this.screenBox[0])/m,.875*(this.screenBox[3]-this.screenBox[1])/m]);var b=this.viewBox,y=(b[2]-b[0])/(b[3]-b[1]);this.setDataBox(p.dataBox||[-10,-10/y,10,10/y]),this.borderColor=p.borderColor!==!1&&(p.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(p.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(p.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(p.gridLineWidth||[1,1]).slice(),this.gridLineColor=c(p.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(p.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(p.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=c(p.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(p.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(p.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=c(p.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(p.titleCenter||[.5*(b[0]+b[2])/m,(b[3]+120)/m]).slice(),this.titleEnable=!("titleEnable"in p)||!!p.titleEnable,this.titleAngle=p.titleAngle||0,this.titleColor=(p.titleColor||[0,0,0,1]).slice(),this.labelPad=(p.labelPad||[15,15,15,15]).slice(),this.labelAngle=(p.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(p.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=c(p.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(p.tickPad||[15,15,15,15]).slice(),this.tickAngle=(p.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(p.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=c(p.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(p.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(p.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=c(p.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var M=p.ticks||[[],[]],h=this._tickBounds;h[0]=h[1]=1/0,h[2]=h[3]=-1/0;for(var E=0;E<2;++E){var k=M[E].slice(0);k.length!==0&&(k.sort(_),h[E]=Math.min(h[E],k[0].x),h[E+2]=Math.max(h[E+2],k[k.length-1].x))}this.grid.update({bounds:h,ticks:M}),this.text.update({bounds:h,ticks:M,labels:p.labels||["x","y"],labelSize:p.labelSize||[12,12],labelFont:p.labelFont||["sans-serif","sans-serif"],labelFontStyle:p.labelFontStyle||["normal","normal"],labelFontWeight:p.labelFontWeight||["normal","normal"],labelFontVariant:p.labelFontVariant||["normal","normal"],title:p.title||"",titleSize:p.titleSize||18,titleFont:p.titleFont||"sans-serif",titleFontStyle:p.titleFontStyle||"normal",titleFontWeight:p.titleFontWeight||"normal",titleFontVariant:p.titleFontVariant||"normal"}),this.static=!!p.static,this.setDirty()},d.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var p=this.objects.length-1;p>=0;--p)this.objects[p].dispose();for(this.objects.length=0,p=this.overlays.length-1;p>=0;--p)this.overlays[p].dispose();this.overlays.length=0,this.gl=null},d.addObject=function(p){this.objects.indexOf(p)<0&&(this.objects.push(p),this.setDirty())},d.removeObject=function(p){for(var g=this.objects,m=0;m<g.length;++m)if(g[m]===p){g.splice(m,1),this.setDirty();break}},d.addOverlay=function(p){this.overlays.indexOf(p)<0&&(this.overlays.push(p),this.setOverlayDirty())},d.removeOverlay=function(p){for(var g=this.overlays,m=0;m<g.length;++m)if(g[m]===p){g.splice(m,1),this.setOverlayDirty();break}}},4437:function(f,s,t){"use strict";f.exports=function(d,c){d=d||document.body;var _=[.01,1/0];"distanceLimits"in(c=c||{})&&(_[0]=c.distanceLimits[0],_[1]=c.distanceLimits[1]),"zoomMin"in c&&(_[0]=c.zoomMin),"zoomMax"in c&&(_[1]=c.zoomMax);var p=r({center:c.center||[0,0,0],up:c.up||[0,1,0],eye:c.eye||[0,0,10],mode:c.mode||"orbit",distanceLimits:_}),g=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],m=0,b=d.clientWidth,y=d.clientHeight,M={keyBindingMode:"rotate",enableWheel:!0,view:p,element:d,delay:c.delay||16,rotateSpeed:c.rotateSpeed||1,zoomSpeed:c.zoomSpeed||1,translateSpeed:c.translateSpeed||1,flipX:!!c.flipX,flipY:!!c.flipY,modes:p.modes,_ortho:c._ortho||c.projection&&c.projection.type==="orthographic"||!1,tick:function(){var h=o(),E=this.delay,k=h-2*E;p.idle(h-E),p.recalcMatrix(k),p.flush(h-(100+2*E));for(var D=!0,P=p.computedMatrix,L=0;L<16;++L)D=D&&g[L]===P[L],g[L]=P[L];var O=d.clientWidth===b&&d.clientHeight===y;return b=d.clientWidth,y=d.clientHeight,D?!O:(m=Math.exp(p.computedRadius[0]),!0)},lookAt:function(h,E,k){p.lookAt(p.lastT(),h,E,k)},rotate:function(h,E,k){p.rotate(p.lastT(),h,E,k)},pan:function(h,E,k){p.pan(p.lastT(),h,E,k)},translate:function(h,E,k){p.translate(p.lastT(),h,E,k)}};return Object.defineProperties(M,{matrix:{get:function(){return p.computedMatrix},set:function(h){return p.setMatrix(p.lastT(),h),p.computedMatrix},enumerable:!0},mode:{get:function(){return p.getMode()},set:function(h){var E=p.computedUp.slice(),k=p.computedEye.slice(),D=p.computedCenter.slice();if(p.setMode(h),h==="turntable"){var P=o();p._active.lookAt(P,k,D,E),p._active.lookAt(P+500,k,D,[0,0,1]),p._active.flush(P)}return p.getMode()},enumerable:!0},center:{get:function(){return p.computedCenter},set:function(h){return p.lookAt(p.lastT(),null,h),p.computedCenter},enumerable:!0},eye:{get:function(){return p.computedEye},set:function(h){return p.lookAt(p.lastT(),h),p.computedEye},enumerable:!0},up:{get:function(){return p.computedUp},set:function(h){return p.lookAt(p.lastT(),null,null,h),p.computedUp},enumerable:!0},distance:{get:function(){return m},set:function(h){return p.setDistance(p.lastT(),h),h},enumerable:!0},distanceLimits:{get:function(){return p.getDistanceLimits(_)},set:function(h){return p.setDistanceLimits(h),h},enumerable:!0}}),d.addEventListener("contextmenu",function(h){return h.preventDefault(),!1}),M._lastX=-1,M._lastY=-1,M._lastMods={shift:!1,control:!1,alt:!1,meta:!1},M.enableMouseListeners=function(){function h(E,k,D,P){var L=M.keyBindingMode;if(L!==!1){var O=L==="rotate",N=L==="pan",V=L==="zoom",F=!!P.control,j=!!P.alt,Z=!!P.shift,z=!!(1&E),H=!!(2&E),U=!!(4&E),re=1/d.clientHeight,ee=re*(k-M._lastX),J=re*(D-M._lastY),Q=M.flipX?1:-1,ne=M.flipY?1:-1,K=Math.PI*M.rotateSpeed,oe=o();if(M._lastX!==-1&&M._lastY!==-1&&((O&&z&&!F&&!j&&!Z||z&&!F&&!j&&Z)&&p.rotate(oe,Q*K*ee,-ne*K*J,0),(N&&z&&!F&&!j&&!Z||H||z&&F&&!j&&!Z)&&p.pan(oe,-M.translateSpeed*ee*m,M.translateSpeed*J*m,0),V&&z&&!F&&!j&&!Z||U||z&&!F&&j&&!Z)){var le=-M.zoomSpeed*J/window.innerHeight*(oe-p.lastT())*100;p.pan(oe,0,0,m*(Math.exp(le)-1))}return M._lastX=k,M._lastY=D,M._lastMods=P,!0}}M.mouseListener=i(d,h),d.addEventListener("touchstart",function(E){var k=u(E.changedTouches[0],d);h(0,k[0],k[1],M._lastMods),h(1,k[0],k[1],M._lastMods)},!!l&&{passive:!0}),d.addEventListener("touchmove",function(E){var k=u(E.changedTouches[0],d);h(1,k[0],k[1],M._lastMods),E.preventDefault()},!!l&&{passive:!1}),d.addEventListener("touchend",function(E){h(0,M._lastX,M._lastY,M._lastMods)},!!l&&{passive:!0}),M.wheelListener=a(d,function(E,k){if(M.keyBindingMode!==!1&&M.enableWheel){var D=M.flipX?1:-1,P=M.flipY?1:-1,L=o();if(Math.abs(E)>Math.abs(k))p.rotate(L,0,0,-E*D*Math.PI*M.rotateSpeed/window.innerWidth);else if(!M._ortho){var O=-M.zoomSpeed*P*k/window.innerHeight*(L-p.lastT())/20;p.pan(L,0,0,m*(Math.exp(O)-1))}}},!0)},M.enableMouseListeners(),M};var o=t(3025),r=t(6296),i=t(351),a=t(8512),u=t(24),l=t(7520)},799:function(f,s,t){var o=t(3236),r=t(9405),i=o([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),a=o([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);f.exports=function(u){return r(u,i,a,null,[{name:"position",type:"vec2"}])}},4100:function(f,s,t){"use strict";var o=t(4437),r=t(3837),i=t(5445),a=t(4449),u=t(3589),l=t(2260),d=t(7169),c=t(351),_=t(4772),p=t(4040),g=t(799),m=t(9216)({tablet:!0,featureDetect:!0});function b(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function y(h){var E=Math.round(Math.log(Math.abs(h))/Math.log(10));if(E<0){var k=Math.round(Math.pow(10,-E));return Math.ceil(h*k)/k}return E>0?(k=Math.round(Math.pow(10,E)),Math.ceil(h/k)*k):Math.ceil(h)}function M(h){return typeof h!="boolean"||h}f.exports={createScene:function(h){(h=h||{}).camera=h.camera||{};var E=h.canvas;E||(E=document.createElement("canvas"),h.container?h.container.appendChild(E):document.body.appendChild(E));var k=h.gl;if(k||(h.glOptions&&(m=!!h.glOptions.preserveDrawingBuffer),k=function(me,Me){var Ae=null;try{(Ae=me.getContext("webgl",Me))||(Ae=me.getContext("experimental-webgl",Me))}catch{return null}return Ae}(E,h.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:m})),!k)throw new Error("webgl not supported");var D=h.bounds||[[-10,-10,-10],[10,10,10]],P=new b,L=l(k,k.drawingBufferWidth,k.drawingBufferHeight,{preferFloat:!m}),O=g(k),N=h.cameraObject&&h.cameraObject._ortho===!0||h.camera.projection&&h.camera.projection.type==="orthographic"||!1,V={eye:h.camera.eye||[2,0,0],center:h.camera.center||[0,0,0],up:h.camera.up||[0,1,0],zoomMin:h.camera.zoomMax||.1,zoomMax:h.camera.zoomMin||100,mode:h.camera.mode||"turntable",_ortho:N},F=h.axes||{},j=r(k,F);j.enable=!F.disable;var Z=h.spikes||{},z=a(k,Z),H=[],U=[],re=[],ee=[],J=!0,Q=!0,ne={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},K=(Q=!0,[k.drawingBufferWidth,k.drawingBufferHeight]),oe=h.cameraObject||o(E,V),le={gl:k,contextLost:!1,pixelRatio:h.pixelRatio||1,canvas:E,selection:P,camera:oe,axes:j,axesPixels:null,spikes:z,bounds:D,objects:H,shape:K,aspect:h.aspectRatio||[1,1,1],pickRadius:h.pickRadius||10,zNear:h.zNear||.01,zFar:h.zFar||1e3,fovy:h.fovy||Math.PI/4,clearColor:h.clearColor||[0,0,0,0],autoResize:M(h.autoResize),autoBounds:M(h.autoBounds),autoScale:!!h.autoScale,autoCenter:M(h.autoCenter),clipToBounds:M(h.clipToBounds),snapToData:!!h.snapToData,onselect:h.onselect||null,onrender:h.onrender||null,onclick:h.onclick||null,cameraParams:ne,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(me){this.aspect[0]=me.x,this.aspect[1]=me.y,this.aspect[2]=me.z,Q=!0},setBounds:function(me,Me){this.bounds[0][me]=Me.min,this.bounds[1][me]=Me.max},setClearColor:function(me){this.clearColor=me},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},se=[k.drawingBufferWidth/le.pixelRatio|0,k.drawingBufferHeight/le.pixelRatio|0];function de(){if(!le._stopped&&le.autoResize){var me=E.parentNode,Me=1,Ae=1;me&&me!==document.body?(Me=me.clientWidth,Ae=me.clientHeight):(Me=window.innerWidth,Ae=window.innerHeight);var ce=0|Math.ceil(Me*le.pixelRatio),ae=0|Math.ceil(Ae*le.pixelRatio);if(ce!==E.width||ae!==E.height){E.width=ce,E.height=ae;var pe=E.style;pe.position=pe.position||"absolute",pe.left="0px",pe.top="0px",pe.width=Me+"px",pe.height=Ae+"px",J=!0}}}function be(){for(var me=H.length,Me=ee.length,Ae=0;Ae<Me;++Ae)re[Ae]=0;e:for(Ae=0;Ae<me;++Ae){var ce=H[Ae],ae=ce.pickSlots;if(ae){for(var pe=0;pe<Me;++pe)if(re[pe]+ae<255){U[Ae]=pe,ce.setPickBase(re[pe]+1),re[pe]+=ae;continue e}var De=u(k,K);U[Ae]=Me,ee.push(De),re.push(ae),ce.setPickBase(1),Me+=1}else U[Ae]=-1}for(;Me>0&&re[Me-1]===0;)re.pop(),ee.pop().dispose()}function _e(){if(le.contextLost)return!0;k.isContextLost()&&(le.contextLost=!0,le.mouseListener.enabled=!1,le.selection.object=null,le.oncontextloss&&le.oncontextloss())}le.autoResize&&de(),window.addEventListener("resize",de),le.update=function(me){le._stopped||(me=me||{},J=!0,Q=!0)},le.add=function(me){le._stopped||(me.axes=j,H.push(me),U.push(-1),J=!0,Q=!0,be())},le.remove=function(me){if(!le._stopped){var Me=H.indexOf(me);Me<0||(H.splice(Me,1),U.pop(),J=!0,Q=!0,be())}},le.dispose=function(){if(!le._stopped&&(le._stopped=!0,window.removeEventListener("resize",de),E.removeEventListener("webglcontextlost",_e),le.mouseListener.enabled=!1,!le.contextLost)){j.dispose(),z.dispose();for(var me=0;me<H.length;++me)H[me].dispose();for(L.dispose(),me=0;me<ee.length;++me)ee[me].dispose();O.dispose(),k=null,j=null,z=null,H=[]}},le._mouseRotating=!1,le._prevButtons=0,le.enableMouseListeners=function(){le.mouseListener=c(E,function(me,Me,Ae){if(!le._stopped){var ce=ee.length,ae=H.length,pe=P.object;P.distance=1/0,P.mouse[0]=Me,P.mouse[1]=Ae,P.object=null,P.screen=null,P.dataCoordinate=P.dataPosition=null;var De=!1;if(me&&le._prevButtons)le._mouseRotating=!0;else{le._mouseRotating&&(Q=!0),le._mouseRotating=!1;for(var ke=0;ke<ce;++ke){var Ee=ee[ke].query(Me,se[1]-Ae-1,le.pickRadius);if(Ee){if(Ee.distance>P.distance)continue;for(var Ie=0;Ie<ae;++Ie){var Re=H[Ie];if(U[Ie]===ke){var Ne=Re.pick(Ee);Ne&&(P.buttons=me,P.screen=Ee.coord,P.distance=Ee.distance,P.object=Re,P.index=Ne.distance,P.dataPosition=Ne.position,P.dataCoordinate=Ne.dataCoordinate,P.data=Ne,De=!0)}}}}}pe&&pe!==P.object&&(pe.highlight&&pe.highlight(null),J=!0),P.object&&(P.object.highlight&&P.object.highlight(P.data),J=!0),(De=De||P.object!==pe)&&le.onselect&&le.onselect(P),1&me&&!(1&le._prevButtons)&&le.onclick&&le.onclick(P),le._prevButtons=me}})},E.addEventListener("webglcontextlost",_e);var xe=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],ve=[xe[0].slice(),xe[1].slice()];function ye(){if(!_e()){de();var me=le.camera.tick();ne.view=le.camera.matrix,J=J||me,Q=Q||me,j.pixelRatio=le.pixelRatio,z.pixelRatio=le.pixelRatio;var Me=H.length,Ae=xe[0],ce=xe[1];Ae[0]=Ae[1]=Ae[2]=1/0,ce[0]=ce[1]=ce[2]=-1/0;for(var ae=0;ae<Me;++ae){(Pe=H[ae]).pixelRatio=le.pixelRatio,Pe.axes=le.axes,J=J||!!Pe.dirty,Q=Q||!!Pe.dirty;var pe=Pe.bounds;if(pe)for(var De=pe[0],ke=pe[1],Ee=0;Ee<3;++Ee)Ae[Ee]=Math.min(Ae[Ee],De[Ee]),ce[Ee]=Math.max(ce[Ee],ke[Ee])}var Ie=le.bounds;if(le.autoBounds)for(Ee=0;Ee<3;++Ee){if(ce[Ee]<Ae[Ee])Ae[Ee]=-1,ce[Ee]=1;else{Ae[Ee]===ce[Ee]&&(Ae[Ee]-=1,ce[Ee]+=1);var Re=.05*(ce[Ee]-Ae[Ee]);Ae[Ee]=Ae[Ee]-Re,ce[Ee]=ce[Ee]+Re}Ie[0][Ee]=Ae[Ee],Ie[1][Ee]=ce[Ee]}var Ne=!1;for(Ee=0;Ee<3;++Ee)Ne=Ne||ve[0][Ee]!==Ie[0][Ee]||ve[1][Ee]!==Ie[1][Ee],ve[0][Ee]=Ie[0][Ee],ve[1][Ee]=Ie[1][Ee];if(Q=Q||Ne,J=J||Ne){if(Ne){var ge=[0,0,0];for(ae=0;ae<3;++ae)ge[ae]=y((Ie[1][ae]-Ie[0][ae])/10);j.autoTicks?j.update({bounds:Ie,tickSpacing:ge}):j.update({bounds:Ie})}var we=k.drawingBufferWidth,Ce=k.drawingBufferHeight;for(K[0]=we,K[1]=Ce,se[0]=0|Math.max(we/le.pixelRatio,1),se[1]=0|Math.max(Ce/le.pixelRatio,1),function(Ue,Ge){var Xe=Ue.bounds,st=Ue.cameraParams,at=st.projection,vt=st.model,xt=Ue.gl.drawingBufferWidth,gt=Ue.gl.drawingBufferHeight,rt=Ue.zNear,tt=Ue.zFar,Mt=Ue.fovy,Pt=xt/gt;Ge?(p(at,-Pt,Pt,-1,1,rt,tt),st._ortho=!0):(_(at,Mt,Pt,rt,tt),st._ortho=!1);for(var Rt=0;Rt<16;++Rt)vt[Rt]=0;vt[15]=1;var St=0;for(Rt=0;Rt<3;++Rt)St=Math.max(St,Xe[1][Rt]-Xe[0][Rt]);for(Rt=0;Rt<3;++Rt)Ue.autoScale?vt[5*Rt]=Ue.aspect[Rt]/(Xe[1][Rt]-Xe[0][Rt]):vt[5*Rt]=1/St,Ue.autoCenter&&(vt[12+Rt]=.5*-vt[5*Rt]*(Xe[0][Rt]+Xe[1][Rt]))}(le,N),ae=0;ae<Me;++ae)(Pe=H[ae]).axesBounds=Ie,le.clipToBounds&&(Pe.clipBounds=Ie);P.object&&(le.snapToData?z.position=P.dataCoordinate:z.position=P.dataPosition,z.bounds=Ie),Q&&(Q=!1,function(){if(!_e()){k.colorMask(!0,!0,!0,!0),k.depthMask(!0),k.disable(k.BLEND),k.enable(k.DEPTH_TEST),k.depthFunc(k.LEQUAL);for(var Ue=H.length,Ge=ee.length,Xe=0;Xe<Ge;++Xe){var st=ee[Xe];st.shape=se,st.begin();for(var at=0;at<Ue;++at)if(U[at]===Xe){var vt=H[at];vt.drawPick&&(vt.pixelRatio=1,vt.drawPick(ne))}st.end()}}}()),le.axesPixels=i(le.axes,ne,we,Ce),le.onrender&&le.onrender(),k.bindFramebuffer(k.FRAMEBUFFER,null),k.viewport(0,0,we,Ce),le.clearRGBA(),k.depthMask(!0),k.colorMask(!0,!0,!0,!0),k.enable(k.DEPTH_TEST),k.depthFunc(k.LEQUAL),k.disable(k.BLEND),k.disable(k.CULL_FACE);var ze=!1;for(j.enable&&(ze=ze||j.isTransparent(),j.draw(ne)),z.axes=j,P.object&&z.draw(ne),k.disable(k.CULL_FACE),ae=0;ae<Me;++ae)(Pe=H[ae]).axes=j,Pe.pixelRatio=le.pixelRatio,Pe.isOpaque&&Pe.isOpaque()&&Pe.draw(ne),Pe.isTransparent&&Pe.isTransparent()&&(ze=!0);if(ze){for(L.shape=K,L.bind(),k.clear(k.DEPTH_BUFFER_BIT),k.colorMask(!1,!1,!1,!1),k.depthMask(!0),k.depthFunc(k.LESS),j.enable&&j.isTransparent()&&j.drawTransparent(ne),ae=0;ae<Me;++ae)(Pe=H[ae]).isOpaque&&Pe.isOpaque()&&Pe.draw(ne);for(k.enable(k.BLEND),k.blendEquation(k.FUNC_ADD),k.blendFunc(k.ONE,k.ONE_MINUS_SRC_ALPHA),k.colorMask(!0,!0,!0,!0),k.depthMask(!1),k.clearColor(0,0,0,0),k.clear(k.COLOR_BUFFER_BIT),j.isTransparent()&&j.drawTransparent(ne),ae=0;ae<Me;++ae){var Pe;(Pe=H[ae]).isTransparent&&Pe.isTransparent()&&Pe.drawTransparent(ne)}k.bindFramebuffer(k.FRAMEBUFFER,null),k.blendFunc(k.ONE,k.ONE_MINUS_SRC_ALPHA),k.disable(k.DEPTH_TEST),O.bind(),L.color[0].bind(0),O.uniforms.accumBuffer=0,d(k),k.disable(k.BLEND)}for(J=!1,ae=0;ae<Me;++ae)H[ae].dirty=!1}}}return le.enableMouseListeners(),function me(){le._stopped||le.contextLost||(ye(),requestAnimationFrame(me))}(),le.redraw=function(){le._stopped||(J=!0,ye())},le},createCamera:o}},6640:function(f,s,t){var o=t(3236);s.pointVertex=o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),s.pointFragment=o([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),s.pickVertex=o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),s.pickFragment=o([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},4696:function(f,s,t){"use strict";var o=t(9405),r=t(2762),i=t(1888),a=t(6640);function u(_,p,g,m,b){this.plot=_,this.offsetBuffer=p,this.pickBuffer=g,this.shader=m,this.pickShader=b,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}f.exports=function(_,p){var g=_.gl,m=new u(_,r(g),r(g),o(g,a.pointVertex,a.pointFragment),o(g,a.pickVertex,a.pickFragment));return m.update(p),_.addObject(m),m};var l,d,c=u.prototype;c.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},c.update=function(_){var p;function g(k,D){return k in _?_[k]:D}_=_||{},this.sizeMin=g("sizeMin",.5),this.sizeMax=g("sizeMax",20),this.color=g("color",[1,0,0,1]).slice(),this.areaRatio=g("areaRatio",1),this.borderColor=g("borderColor",[0,0,0,1]).slice(),this.blend=g("blend",!1);var m=_.positions.length>>>1,b=_.positions instanceof Float32Array,y=_.idToIndex instanceof Int32Array&&_.idToIndex.length>=m,M=_.positions,h=b?M:i.mallocFloat32(M.length),E=y?_.idToIndex:i.mallocInt32(m);if(b||h.set(M),!y)for(h.set(M),p=0;p<m;p++)E[p]=p;this.points=M,this.offsetBuffer.update(h),this.pickBuffer.update(E),b||i.free(h),y||i.free(E),this.pointCount=m,this.pickOffset=0},c.unifiedDraw=(l=[1,0,0,0,1,0,0,0,1],d=[0,0,0,0],function(_){var p=_!==void 0,g=p?this.pickShader:this.shader,m=this.plot.gl,b=this.plot.dataBox;if(this.pointCount===0)return _;var y=b[2]-b[0],M=b[3]-b[1],h=function(P,L){var O,N=0,V=P.length>>>1;for(O=0;O<V;O++){var F=P[2*O],j=P[2*O+1];F>=L[0]&&F<=L[2]&&j>=L[1]&&j<=L[3]&&N++}return N}(this.points,b),E=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(h,.33333)));l[0]=2/y,l[4]=2/M,l[6]=-2*b[0]/y-1,l[7]=-2*b[1]/M-1,this.offsetBuffer.bind(),g.bind(),g.attributes.position.pointer(),g.uniforms.matrix=l,g.uniforms.color=this.color,g.uniforms.borderColor=this.borderColor,g.uniforms.pointCloud=E<5,g.uniforms.pointSize=E,g.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),p&&(d[0]=255&_,d[1]=_>>8&255,d[2]=_>>16&255,d[3]=_>>24&255,this.pickBuffer.bind(),g.attributes.pickId.pointer(m.UNSIGNED_BYTE),g.uniforms.pickOffset=d,this.pickOffset=_);var k=m.getParameter(m.BLEND),D=m.getParameter(m.DITHER);return k&&!this.blend&&m.disable(m.BLEND),D&&m.disable(m.DITHER),m.drawArrays(m.POINTS,0,this.pointCount),k&&!this.blend&&m.enable(m.BLEND),D&&m.enable(m.DITHER),_+this.pointCount}),c.draw=c.unifiedDraw,c.drawPick=c.unifiedDraw,c.pick=function(_,p,g){var m=this.pickOffset,b=this.pointCount;if(g<m||g>=m+b)return null;var y=g-m,M=this.points;return{object:this,pointId:y,dataCoord:[M[2*y],M[2*y+1]]}}},783:function(f){f.exports=function(s,t,o,r){var i,a,u,l,d,c=t[0],_=t[1],p=t[2],g=t[3],m=o[0],b=o[1],y=o[2],M=o[3];return(a=c*m+_*b+p*y+g*M)<0&&(a=-a,m=-m,b=-b,y=-y,M=-M),1-a>1e-6?(i=Math.acos(a),u=Math.sin(i),l=Math.sin((1-r)*i)/u,d=Math.sin(r*i)/u):(l=1-r,d=r),s[0]=l*c+d*m,s[1]=l*_+d*b,s[2]=l*p+d*y,s[3]=l*g+d*M,s}},5964:function(f){"use strict";f.exports=function(s){return s||s===0?s.toString():""}},9366:function(f,s,t){"use strict";var o=t(4359);f.exports=function(i,a,u){var l=[a.style,a.weight,a.variant,a.family].join("_"),d=r[l];if(d||(d=r[l]={}),i in d)return d[i];var c={textAlign:"center",textBaseline:"middle",lineHeight:1,font:a.family,fontStyle:a.style,fontWeight:a.weight,fontVariant:a.variant,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},_=o(i,c);c.triangles=!1;var p,g,m=o(i,c);if(u&&u!==1){for(p=0;p<_.positions.length;++p)for(g=0;g<_.positions[p].length;++g)_.positions[p][g]/=u;for(p=0;p<m.positions.length;++p)for(g=0;g<m.positions[p].length;++g)m.positions[p][g]/=u}var b=[[1/0,1/0],[-1/0,-1/0]],y=m.positions.length;for(p=0;p<y;++p){var M=m.positions[p];for(g=0;g<2;++g)b[0][g]=Math.min(b[0][g],M[g]),b[1][g]=Math.max(b[1][g],M[g])}return d[i]=[_,m,b]};var r={}},1283:function(f,s,t){var o=t(9405),r=t(3236),i=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),a=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),u=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),l=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),d=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),c=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],_={vertex:i,fragment:l,attributes:c},p={vertex:a,fragment:l,attributes:c},g={vertex:u,fragment:l,attributes:c},m={vertex:i,fragment:d,attributes:c},b={vertex:a,fragment:d,attributes:c},y={vertex:u,fragment:d,attributes:c};function M(h,E){var k=o(h,E),D=k.attributes;return D.position.location=0,D.color.location=1,D.glyph.location=2,D.id.location=3,k}s.createPerspective=function(h){return M(h,_)},s.createOrtho=function(h){return M(h,p)},s.createProject=function(h){return M(h,g)},s.createPickPerspective=function(h){return M(h,m)},s.createPickOrtho=function(h){return M(h,b)},s.createPickProject=function(h){return M(h,y)}},8418:function(f,s,t){"use strict";var o=t(5219),r=t(2762),i=t(8116),a=t(1888),u=t(6760),l=t(1283),d=t(9366),c=t(5964),_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function p(U,re){var ee=U[0],J=U[1],Q=U[2],ne=U[3];return U[0]=re[0]*ee+re[4]*J+re[8]*Q+re[12]*ne,U[1]=re[1]*ee+re[5]*J+re[9]*Q+re[13]*ne,U[2]=re[2]*ee+re[6]*J+re[10]*Q+re[14]*ne,U[3]=re[3]*ee+re[7]*J+re[11]*Q+re[15]*ne,U}function g(U,re,ee,J){return p(J,J),p(J,J),p(J,J)}function m(U,re){this.index=U,this.dataCoordinate=this.position=re}function b(U){return U===!0||U>1?1:U}function y(U,re,ee,J,Q,ne,K,oe,le,se,de,be){this.gl=U,this.pixelRatio=1,this.shader=re,this.orthoShader=ee,this.projectShader=J,this.pointBuffer=Q,this.colorBuffer=ne,this.glyphBuffer=K,this.idBuffer=oe,this.vao=le,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[.6666666666666666,.6666666666666666,.6666666666666666],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=se,this.pickOrthoShader=de,this.pickProjectShader=be,this.points=[],this._selectResult=new m(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}f.exports=function(U){var re=U.gl,ee=l.createPerspective(re),J=l.createOrtho(re),Q=l.createProject(re),ne=l.createPickPerspective(re),K=l.createPickOrtho(re),oe=l.createPickProject(re),le=r(re),se=r(re),de=r(re),be=r(re),_e=new y(re,ee,J,Q,le,se,de,be,i(re,[{buffer:le,size:3,type:re.FLOAT},{buffer:se,size:4,type:re.FLOAT},{buffer:de,size:2,type:re.FLOAT},{buffer:be,size:4,type:re.UNSIGNED_BYTE,normalized:!0}]),ne,K,oe);return _e.update(U),_e};var M=y.prototype;M.pickSlots=1,M.setPickBase=function(U){this.pickId=U},M.isTransparent=function(){if(this.hasAlpha)return!0;for(var U=0;U<3;++U)if(this.axesProject[U]&&this.projectHasAlpha)return!0;return!1},M.isOpaque=function(){if(!this.hasAlpha)return!0;for(var U=0;U<3;++U)if(this.axesProject[U]&&!this.projectHasAlpha)return!0;return!1};var h=[0,0],E=[0,0,0],k=[0,0,0],D=[0,0,0,1],P=[0,0,0,1],L=_.slice(),O=[0,0,0],N=[[0,0,0],[0,0,0]];function V(U){return U[0]=U[1]=U[2]=0,U}function F(U,re){return U[0]=re[0],U[1]=re[1],U[2]=re[2],U[3]=1,U}function j(U,re,ee,J){return U[0]=re[0],U[1]=re[1],U[2]=re[2],U[ee]=J,U}var Z=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function z(U,re,ee,J,Q,ne,K){var oe=ee.gl;if((ne===ee.projectHasAlpha||K)&&function(se,de,be,_e){var xe,ve=de.axesProject,ye=de.gl,me=se.uniforms,Me=be.model||_,Ae=be.view||_,ce=be.projection||_,ae=de.axesBounds,pe=function(Xe){for(var st=N,at=0;at<2;++at)for(var vt=0;vt<3;++vt)st[at][vt]=Math.max(Math.min(Xe[at][vt],1e8),-1e8);return st}(de.clipBounds);xe=de.axes&&de.axes.lastCubeProps?de.axes.lastCubeProps.axis:[1,1,1],h[0]=2/ye.drawingBufferWidth,h[1]=2/ye.drawingBufferHeight,se.bind(),me.view=Ae,me.projection=ce,me.screenSize=h,me.highlightId=de.highlightId,me.highlightScale=de.highlightScale,me.clipBounds=pe,me.pickGroup=de.pickId/255,me.pixelRatio=_e;for(var De=0;De<3;++De)if(ve[De]){me.scale=de.projectScale[De],me.opacity=de.projectOpacity[De];for(var ke=L,Ee=0;Ee<16;++Ee)ke[Ee]=0;for(Ee=0;Ee<4;++Ee)ke[5*Ee]=1;ke[5*De]=0,xe[De]<0?ke[12+De]=ae[0][De]:ke[12+De]=ae[1][De],u(ke,Me,ke),me.model=ke;var Ie=(De+1)%3,Re=(De+2)%3,Ne=V(E),ge=V(k);Ne[Ie]=1,ge[Re]=1;var we=g(0,0,0,F(D,Ne)),Ce=g(0,0,0,F(P,ge));if(Math.abs(we[1])>Math.abs(Ce[1])){var ze=we;we=Ce,Ce=ze,ze=Ne,Ne=ge,ge=ze;var Pe=Ie;Ie=Re,Re=Pe}we[0]<0&&(Ne[Ie]=-1),Ce[1]>0&&(ge[Re]=-1);var Ue=0,Ge=0;for(Ee=0;Ee<4;++Ee)Ue+=Math.pow(Me[4*Ie+Ee],2),Ge+=Math.pow(Me[4*Re+Ee],2);Ne[Ie]/=Math.sqrt(Ue),ge[Re]/=Math.sqrt(Ge),me.axes[0]=Ne,me.axes[1]=ge,me.fragClipBounds[0]=j(O,pe[0],De,-1e8),me.fragClipBounds[1]=j(O,pe[1],De,1e8),de.vao.bind(),de.vao.draw(ye.TRIANGLES,de.vertexCount),de.lineWidth>0&&(ye.lineWidth(de.lineWidth*_e),de.vao.draw(ye.LINES,de.lineVertexCount,de.vertexCount)),de.vao.unbind()}}(re,ee,J,Q),ne===ee.hasAlpha||K){U.bind();var le=U.uniforms;le.model=J.model||_,le.view=J.view||_,le.projection=J.projection||_,h[0]=2/oe.drawingBufferWidth,h[1]=2/oe.drawingBufferHeight,le.screenSize=h,le.highlightId=ee.highlightId,le.highlightScale=ee.highlightScale,le.fragClipBounds=Z,le.clipBounds=ee.axes.bounds,le.opacity=ee.opacity,le.pickGroup=ee.pickId/255,le.pixelRatio=Q,ee.vao.bind(),ee.vao.draw(oe.TRIANGLES,ee.vertexCount),ee.lineWidth>0&&(oe.lineWidth(ee.lineWidth*Q),ee.vao.draw(oe.LINES,ee.lineVertexCount,ee.vertexCount)),ee.vao.unbind()}}function H(U,re,ee,J){var Q;Q=Array.isArray(U)?re<U.length?U[re]:void 0:U,Q=c(Q);var ne=!0;o(Q)&&(Q="\u25BC",ne=!1),ee||(ee={});var K=ee.family;Array.isArray(K)&&(K=K[re]),K||(K="normal");var oe=ee.weight;Array.isArray(oe)&&(oe=oe[re]),oe||(oe="normal");var le=ee.style;Array.isArray(le)&&(le=le[re]),le||(le="normal");var se=ee.variant;Array.isArray(se)&&(se=se[re]),se||(se="normal");var de=d(Q,{family:K,weight:oe,style:le,variant:se},J);return{mesh:(de=d(Q,ee,J))[0],lines:de[1],bounds:de[2],visible:ne}}M.draw=function(U){z(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,U,this.pixelRatio,!1,!1)},M.drawTransparent=function(U){z(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,U,this.pixelRatio,!0,!1)},M.drawPick=function(U){z(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,U,1,!0,!0)},M.pick=function(U){if(!U||U.id!==this.pickId)return null;var re=U.value[2]+(U.value[1]<<8)+(U.value[0]<<16);if(re>=this.pointCount||re<0)return null;var ee=this.points[re],J=this._selectResult;J.index=re;for(var Q=0;Q<3;++Q)J.position[Q]=J.dataCoordinate[Q]=ee[Q];return J},M.highlight=function(U){if(U){var re=U.index,ee=255&re,J=re>>8&255,Q=re>>16&255;this.highlightId=[ee/255,J/255,Q/255,0]}else this.highlightId=[1,1,1,1]},M.update=function(U){if("perspective"in(U=U||{})&&(this.useOrtho=!U.perspective),"orthographic"in U&&(this.useOrtho=!!U.orthographic),"lineWidth"in U&&(this.lineWidth=U.lineWidth),"project"in U)if(Array.isArray(U.project))this.axesProject=U.project;else{var re=!!U.project;this.axesProject=[re,re,re]}if("projectScale"in U)if(Array.isArray(U.projectScale))this.projectScale=U.projectScale.slice();else{var ee=+U.projectScale;this.projectScale=[ee,ee,ee]}if(this.projectHasAlpha=!1,"projectOpacity"in U){Array.isArray(U.projectOpacity)?this.projectOpacity=U.projectOpacity.slice():(ee=+U.projectOpacity,this.projectOpacity=[ee,ee,ee]);for(var J=0;J<3;++J)this.projectOpacity[J]=b(this.projectOpacity[J]),this.projectOpacity[J]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in U&&(this.opacity=b(U.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var Q,ne,K=U.position,oe={family:U.font||"normal",style:U.fontStyle||"normal",weight:U.fontWeight||"normal",variant:U.fontVariant||"normal"},le=U.alignment||[0,0];if(le.length===2)Q=le[0],ne=le[1];else for(Q=[],ne=[],J=0;J<le.length;++J)Q[J]=le[J][0],ne[J]=le[J][1];var se=[1/0,1/0,1/0],de=[-1/0,-1/0,-1/0],be=U.glyph,_e=U.color,xe=U.size,ve=U.angle,ye=U.lineColor,me=-1,Me=0,Ae=0,ce=0;if(K.length){ce=K.length;e:for(J=0;J<ce;++J){for(var ae=K[J],pe=0;pe<3;++pe)if(isNaN(ae[pe])||!isFinite(ae[pe]))continue e;var De=(st=H(be,J,oe,this.pixelRatio)).mesh,ke=st.lines,Ee=st.bounds;Me+=3*De.cells.length,Ae+=2*ke.edges.length}}var Ie=Me+Ae,Re=a.mallocFloat(3*Ie),Ne=a.mallocFloat(4*Ie),ge=a.mallocFloat(2*Ie),we=a.mallocUint32(Ie);if(Ie>0){var Ce=0,ze=Me,Pe=[0,0,0,1],Ue=[0,0,0,1],Ge=Array.isArray(_e)&&Array.isArray(_e[0]),Xe=Array.isArray(ye)&&Array.isArray(ye[0]);e:for(J=0;J<ce;++J){for(me+=1,ae=K[J],pe=0;pe<3;++pe){if(isNaN(ae[pe])||!isFinite(ae[pe]))continue e;de[pe]=Math.max(de[pe],ae[pe]),se[pe]=Math.min(se[pe],ae[pe])}De=(st=H(be,J,oe,this.pixelRatio)).mesh,ke=st.lines,Ee=st.bounds;var st,at=st.visible;if(at)if(Array.isArray(_e)){if((vt=Ge?J<_e.length?_e[J]:[0,0,0,0]:_e).length===3){for(pe=0;pe<3;++pe)Pe[pe]=vt[pe];Pe[3]=1}else if(vt.length===4){for(pe=0;pe<4;++pe)Pe[pe]=vt[pe];!this.hasAlpha&&vt[3]<1&&(this.hasAlpha=!0)}}else Pe[0]=Pe[1]=Pe[2]=0,Pe[3]=1;else Pe=[1,1,1,0];if(at)if(Array.isArray(ye)){var vt;if((vt=Xe?J<ye.length?ye[J]:[0,0,0,0]:ye).length===3){for(pe=0;pe<3;++pe)Ue[pe]=vt[pe];Ue[pe]=1}else if(vt.length===4){for(pe=0;pe<4;++pe)Ue[pe]=vt[pe];!this.hasAlpha&&vt[3]<1&&(this.hasAlpha=!0)}}else Ue[0]=Ue[1]=Ue[2]=0,Ue[3]=1;else Ue=[1,1,1,0];var xt=.5;at?Array.isArray(xe)?xt=J<xe.length?+xe[J]:12:xe?xt=+xe:this.useOrtho&&(xt=12):xt=0;var gt=0;Array.isArray(ve)?gt=J<ve.length?+ve[J]:0:ve&&(gt=+ve);var rt=Math.cos(gt),tt=Math.sin(gt);for(ae=K[J],pe=0;pe<3;++pe)de[pe]=Math.max(de[pe],ae[pe]),se[pe]=Math.min(se[pe],ae[pe]);var Mt=Q,Pt=ne;Mt=0,Array.isArray(Q)?Mt=J<Q.length?Q[J]:0:Q&&(Mt=Q),Pt=0,Array.isArray(ne)?Pt=J<ne.length?ne[J]:0:ne&&(Pt=ne);var Rt=[Mt*=Mt>0?1-Ee[0][0]:Mt<0?1+Ee[1][0]:1,Pt*=Pt>0?1-Ee[0][1]:Pt<0?1+Ee[1][1]:1],St=De.cells||[],Ye=De.positions||[];for(pe=0;pe<St.length;++pe)for(var Ke=St[pe],Ve=0;Ve<3;++Ve){for(var $e=0;$e<3;++$e)Re[3*Ce+$e]=ae[$e];for($e=0;$e<4;++$e)Ne[4*Ce+$e]=Pe[$e];we[Ce]=me;var lt=Ye[Ke[Ve]];ge[2*Ce]=xt*(rt*lt[0]-tt*lt[1]+Rt[0]),ge[2*Ce+1]=xt*(tt*lt[0]+rt*lt[1]+Rt[1]),Ce+=1}for(St=ke.edges,Ye=ke.positions,pe=0;pe<St.length;++pe)for(Ke=St[pe],Ve=0;Ve<2;++Ve){for($e=0;$e<3;++$e)Re[3*ze+$e]=ae[$e];for($e=0;$e<4;++$e)Ne[4*ze+$e]=Ue[$e];we[ze]=me,lt=Ye[Ke[Ve]],ge[2*ze]=xt*(rt*lt[0]-tt*lt[1]+Rt[0]),ge[2*ze+1]=xt*(tt*lt[0]+rt*lt[1]+Rt[1]),ze+=1}}}this.bounds=[se,de],this.points=K,this.pointCount=K.length,this.vertexCount=Me,this.lineVertexCount=Ae,this.pointBuffer.update(Re),this.colorBuffer.update(Ne),this.glyphBuffer.update(ge),this.idBuffer.update(we),a.free(Re),a.free(Ne),a.free(ge),a.free(we)},M.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},4298:function(f,s,t){"use strict";var o=t(3236);s.boxVertex=o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),s.boxFragment=o([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},3161:function(f,s,t){"use strict";var o=t(9405),r=t(2762),i=t(4298);function a(l,d,c){this.plot=l,this.boxBuffer=d,this.boxShader=c,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}f.exports=function(l,d){var c=l.gl,_=new a(l,r(c,[0,0,0,1,1,0,1,1]),o(c,i.boxVertex,i.boxFragment));return _.update(d),l.addOverlay(_),_};var u=a.prototype;u.draw=function(){if(this.enabled){var l=this.plot,d=this.selectBox,c=this.borderWidth,_=(this.innerFill,this.innerColor),p=(this.outerFill,this.outerColor),g=this.borderColor,m=l.box,b=l.screenBox,y=l.dataBox,M=l.viewBox,h=l.pixelRatio,E=(d[0]-y[0])*(M[2]-M[0])/(y[2]-y[0])+M[0],k=(d[1]-y[1])*(M[3]-M[1])/(y[3]-y[1])+M[1],D=(d[2]-y[0])*(M[2]-M[0])/(y[2]-y[0])+M[0],P=(d[3]-y[1])*(M[3]-M[1])/(y[3]-y[1])+M[1];if(E=Math.max(E,M[0]),k=Math.max(k,M[1]),D=Math.min(D,M[2]),P=Math.min(P,M[3]),!(D<E||P<k)){m.bind();var L=b[2]-b[0],O=b[3]-b[1];if(this.outerFill&&(m.drawBox(0,0,L,k,p),m.drawBox(0,k,E,P,p),m.drawBox(0,P,L,O,p),m.drawBox(D,k,L,P,p)),this.innerFill&&m.drawBox(E,k,D,P,_),c>0){var N=c*h;m.drawBox(E-N,k-N,D+N,k+N,g),m.drawBox(E-N,P-N,D+N,P+N,g),m.drawBox(E-N,k-N,E+N,P+N,g),m.drawBox(D-N,k-N,D+N,P+N,g)}}}},u.update=function(l){l=l||{},this.innerFill=!!l.innerFill,this.outerFill=!!l.outerFill,this.innerColor=(l.innerColor||[0,0,0,.5]).slice(),this.outerColor=(l.outerColor||[0,0,0,.5]).slice(),this.borderColor=(l.borderColor||[0,0,0,1]).slice(),this.borderWidth=l.borderWidth||0,this.selectBox=(l.selectBox||this.selectBox).slice()},u.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},3589:function(f,s,t){"use strict";f.exports=function(c,_){var p=_[0],g=_[1];return new l(c,o(c,p,g,{}),r.mallocUint8(p*g*4))};var o=t(2260),r=t(1888),i=t(9618),a=t(8828).nextPow2;function u(c,_,p,g,m){this.coord=[c,_],this.id=p,this.value=g,this.distance=m}function l(c,_,p){this.gl=c,this.fbo=_,this.buffer=p,this._readTimeout=null;var g=this;this._readCallback=function(){g.gl&&(_.bind(),c.readPixels(0,0,_.shape[0],_.shape[1],c.RGBA,c.UNSIGNED_BYTE,g.buffer),g._readTimeout=null)}}var d=l.prototype;Object.defineProperty(d,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(c){if(this.gl){this.fbo.shape=c;var _=this.fbo.shape[0],p=this.fbo.shape[1];if(p*_*4>this.buffer.length){r.free(this.buffer);for(var g=this.buffer=r.mallocUint8(a(p*_*4)),m=0;m<p*_*4;++m)g[m]=255}return c}}}),d.begin=function(){var c=this.gl;this.shape,c&&(this.fbo.bind(),c.clearColor(1,1,1,1),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT))},d.end=function(){var c=this.gl;c&&(c.bindFramebuffer(c.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},d.query=function(c,_,p){if(!this.gl)return null;var g=this.fbo.shape.slice();c|=0,_|=0,typeof p!="number"&&(p=1);var m=0|Math.min(Math.max(c-p,0),g[0]),b=0|Math.min(Math.max(c+p,0),g[0]),y=0|Math.min(Math.max(_-p,0),g[1]),M=0|Math.min(Math.max(_+p,0),g[1]);if(b<=m||M<=y)return null;var h=[b-m,M-y],E=i(this.buffer,[h[0],h[1],4],[4,4*g[0],1],4*(m+g[0]*y)),k=function(L,O,N){for(var V=1e8,F=-1,j=-1,Z=L.shape[0],z=L.shape[1],H=0;H<Z;H++)for(var U=0;U<z;U++){var re=L.get(H,U,0),ee=L.get(H,U,1),J=L.get(H,U,2),Q=L.get(H,U,3);if(re<255||ee<255||J<255||Q<255){var ne=O-H,K=N-U,oe=ne*ne+K*K;oe<V&&(V=oe,F=H,j=U)}}return[F,j,V]}(E.hi(h[0],h[1],1),p,p),D=k[0],P=k[1];return D<0||Math.pow(this.radius,2)<k[2]?null:new u(D+m|0,P+y|0,E.get(D,P,0),[E.get(D,P,1),E.get(D,P,2),E.get(D,P,3)],Math.sqrt(k[2]))},d.dispose=function(){this.gl&&(this.fbo.dispose(),r.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},9405:function(f,s,t){"use strict";var o=t(3327),r=t(8731),i=t(216),a=t(5091),u=t(2145),l=t(8866);function d(p){this.gl=p,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var c=d.prototype;function _(p,g){return p.name<g.name?-1:1}c.bind=function(){var p;this.program||this._relink();var g=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),m=this.gl.lastAttribCount;if(g>m)for(p=m;p<g;p++)this.gl.enableVertexAttribArray(p);else if(m>g)for(p=g;p<m;p++)this.gl.disableVertexAttribArray(p);this.gl.lastAttribCount=g,this.gl.useProgram(this.program)},c.dispose=function(){for(var p=this.gl.lastAttribCount,g=0;g<p;g++)this.gl.disableVertexAttribArray(g);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},c.update=function(p,g,m,b){if(!g||arguments.length===1){var y=p;p=y.vertex,g=y.fragment,m=y.uniforms,b=y.attributes}var M=this,h=M.gl,E=M._vref;M._vref=a.shader(h,h.VERTEX_SHADER,p),E&&E.dispose(),M.vertShader=M._vref.shader;var k=this._fref;if(M._fref=a.shader(h,h.FRAGMENT_SHADER,g),k&&k.dispose(),M.fragShader=M._fref.shader,!m||!b){var D=h.createProgram();if(h.attachShader(D,M.fragShader),h.attachShader(D,M.vertShader),h.linkProgram(D),!h.getProgramParameter(D,h.LINK_STATUS)){var P=h.getProgramInfoLog(D);throw new l(P,"Error linking program:"+P)}m=m||u.uniforms(h,D),b=b||u.attributes(h,D),h.deleteProgram(D)}(b=b.slice()).sort(_);var L,O=[],N=[],V=[];for(L=0;L<b.length;++L){var F=b[L];if(F.type.indexOf("mat")>=0){for(var j=0|F.type.charAt(F.type.length-1),Z=new Array(j),z=0;z<j;++z)Z[z]=V.length,N.push(F.name+"["+z+"]"),typeof F.location=="number"?V.push(F.location+z):Array.isArray(F.location)&&F.location.length===j&&typeof F.location[z]=="number"?V.push(0|F.location[z]):V.push(-1);O.push({name:F.name,type:F.type,locations:Z})}else O.push({name:F.name,type:F.type,locations:[V.length]}),N.push(F.name),typeof F.location=="number"?V.push(0|F.location):V.push(-1)}var H=0;for(L=0;L<V.length;++L)if(V[L]<0){for(;V.indexOf(H)>=0;)H+=1;V[L]=H}var U=new Array(m.length);function re(){M.program=a.program(h,M._vref,M._fref,N,V);for(var ee=0;ee<m.length;++ee)U[ee]=h.getUniformLocation(M.program,m[ee].name)}re(),M._relink=re,M.types={uniforms:i(m),attributes:i(b)},M.attributes=r(h,M,O,V),Object.defineProperty(M,"uniforms",o(h,M,m,U))},f.exports=function(p,g,m,b,y){var M=new d(p);return M.update(g,m,b,y),M}},8866:function(f){function s(t,o,r){this.shortMessage=o||"",this.longMessage=r||"",this.rawError=t||"",this.message="gl-shader: "+(o||t||"")+(r?`
`+r:""),this.stack=new Error().stack}s.prototype=new Error,s.prototype.name="GLError",s.prototype.constructor=s,f.exports=s},8731:function(f,s,t){"use strict";f.exports=function(d,c,_,p){for(var g={},m=0,b=_.length;m<b;++m){var y=_[m],M=y.name,h=y.type,E=y.locations;switch(h){case"bool":case"int":case"float":u(d,c,E[0],p,1,g,M);break;default:if(h.indexOf("vec")>=0){if((k=h.charCodeAt(h.length-1)-48)<2||k>4)throw new o("","Invalid data type for attribute "+M+": "+h);u(d,c,E[0],p,k,g,M)}else{if(!(h.indexOf("mat")>=0))throw new o("","Unknown data type for attribute "+M+": "+h);var k;if((k=h.charCodeAt(h.length-1)-48)<2||k>4)throw new o("","Invalid data type for attribute "+M+": "+h);l(d,c,E,p,k,g,M)}}}return g};var o=t(8866);function r(d,c,_,p,g,m){this._gl=d,this._wrapper=c,this._index=_,this._locations=p,this._dimension=g,this._constFunc=m}var i=r.prototype;i.pointer=function(d,c,_,p){var g=this,m=g._gl,b=g._locations[g._index];m.vertexAttribPointer(b,g._dimension,d||m.FLOAT,!!c,_||0,p||0),m.enableVertexAttribArray(b)},i.set=function(d,c,_,p){return this._constFunc(this._locations[this._index],d,c,_,p)},Object.defineProperty(i,"location",{get:function(){return this._locations[this._index]},set:function(d){return d!==this._locations[this._index]&&(this._locations[this._index]=0|d,this._wrapper.program=null),0|d}});var a=[function(d,c,_){return _.length===void 0?d.vertexAttrib1f(c,_):d.vertexAttrib1fv(c,_)},function(d,c,_,p){return _.length===void 0?d.vertexAttrib2f(c,_,p):d.vertexAttrib2fv(c,_)},function(d,c,_,p,g){return _.length===void 0?d.vertexAttrib3f(c,_,p,g):d.vertexAttrib3fv(c,_)},function(d,c,_,p,g,m){return _.length===void 0?d.vertexAttrib4f(c,_,p,g,m):d.vertexAttrib4fv(c,_)}];function u(d,c,_,p,g,m,b){var y=a[g],M=new r(d,c,_,p,g,y);Object.defineProperty(m,b,{set:function(h){return d.disableVertexAttribArray(p[_]),y(d,p[_],h),h},get:function(){return M},enumerable:!0})}function l(d,c,_,p,g,m,b){for(var y=new Array(g),M=new Array(g),h=0;h<g;++h)u(d,c,_[h],p,g,y,h),M[h]=y[h];Object.defineProperty(y,"location",{set:function(D){if(Array.isArray(D))for(var P=0;P<g;++P)M[P].location=D[P];else for(P=0;P<g;++P)M[P].location=D+P;return D},get:function(){for(var D=new Array(g),P=0;P<g;++P)D[P]=p[_[P]];return D},enumerable:!0}),y.pointer=function(D,P,L,O){D=D||d.FLOAT,P=!!P,L=L||g*g,O=O||0;for(var N=0;N<g;++N){var V=p[_[N]];d.vertexAttribPointer(V,g,D,P,L,O+N*g),d.enableVertexAttribArray(V)}};var E=new Array(g),k=d["vertexAttrib"+g+"fv"];Object.defineProperty(m,b,{set:function(D){for(var P=0;P<g;++P){var L=p[_[P]];if(d.disableVertexAttribArray(L),Array.isArray(D[0]))k.call(d,L,D[P]);else{for(var O=0;O<g;++O)E[O]=D[g*P+O];k.call(d,L,E)}}return D},get:function(){return y},enumerable:!0})}},3327:function(f,s,t){"use strict";var o=t(216),r=t(8866);function i(u){return function(){return u}}function a(u,l){for(var d=new Array(u),c=0;c<u;++c)d[c]=l;return d}f.exports=function(u,l,d,c){function _(y){return function(M){for(var h=p("",y),E=0;E<h.length;++E){var k=h[E],D=k[0],P=k[1];if(c[P]){var L=M;if(typeof D=="string"&&(D.indexOf(".")===0||D.indexOf("[")===0)){var O=D;if(D.indexOf(".")===0&&(O=D.slice(1)),O.indexOf("]")===O.length-1){var N=O.indexOf("["),V=O.slice(0,N),F=O.slice(N+1,O.length-1);L=V?M[V][F]:M[F]}else L=M[O]}var j,Z=d[P].type;switch(Z){case"bool":case"int":case"sampler2D":case"samplerCube":u.uniform1i(c[P],L);break;case"float":u.uniform1f(c[P],L);break;default:var z=Z.indexOf("vec");if(!(0<=z&&z<=1&&Z.length===4+z)){if(Z.indexOf("mat")===0&&Z.length===4){if((j=Z.charCodeAt(Z.length-1)-48)<2||j>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+Z);u["uniformMatrix"+j+"fv"](c[P],!1,L);break}throw new r("","Unknown uniform data type for "+name+": "+Z)}if((j=Z.charCodeAt(Z.length-1)-48)<2||j>4)throw new r("","Invalid data type");switch(Z.charAt(0)){case"b":case"i":u["uniform"+j+"iv"](c[P],L);break;case"v":u["uniform"+j+"fv"](c[P],L);break;default:throw new r("","Unrecognized data type for vector "+name+": "+Z)}}}}}}function p(y,M){if(typeof M!="object")return[[y,M]];var h=[];for(var E in M){var k=M[E],D=y;parseInt(E)+""===E?D+="["+E+"]":D+="."+E,typeof k=="object"?h.push.apply(h,p(D,k)):h.push([D,k])}return h}function g(y,M,h){if(typeof h=="object"){var E=m(h);Object.defineProperty(y,M,{get:i(E),set:_(h),enumerable:!0,configurable:!1})}else c[h]?Object.defineProperty(y,M,{get:(k=h,function(D,P,L){return D.getUniform(P.program,L[k])}),set:_(h),enumerable:!0,configurable:!1}):y[M]=function(D){switch(D){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var P=D.indexOf("vec");if(0<=P&&P<=1&&D.length===4+P){if((L=D.charCodeAt(D.length-1)-48)<2||L>4)throw new r("","Invalid data type");return D.charAt(0)==="b"?a(L,!1):a(L,0)}if(D.indexOf("mat")===0&&D.length===4){var L;if((L=D.charCodeAt(D.length-1)-48)<2||L>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+D);return a(L*L,0)}throw new r("","Unknown uniform data type for "+name+": "+D)}}(d[h].type);var k}function m(y){var M;if(Array.isArray(y)){M=new Array(y.length);for(var h=0;h<y.length;++h)g(M,h,y[h])}else for(var E in M={},y)g(M,E,y[E]);return M}var b=o(d,!0);return{get:i(m(b)),set:_(b),enumerable:!0,configurable:!0}}},216:function(f){"use strict";f.exports=function(s,t){for(var o={},r=0;r<s.length;++r)for(var i=s[r].name.split("."),a=o,u=0;u<i.length;++u){var l=i[u].split("[");if(l.length>1){l[0]in a||(a[l[0]]=[]),a=a[l[0]];for(var d=1;d<l.length;++d){var c=parseInt(l[d]);d<l.length-1||u<i.length-1?(c in a||(d<l.length-1?a[c]=[]:a[c]={}),a=a[c]):a[c]=t?r:s[r].type}}else u<i.length-1?(l[0]in a||(a[l[0]]={}),a=a[l[0]]):a[l[0]]=t?r:s[r].type}return o}},2145:function(f,s){"use strict";s.uniforms=function(i,a){for(var u=i.getProgramParameter(a,i.ACTIVE_UNIFORMS),l=[],d=0;d<u;++d){var c=i.getActiveUniform(a,d);if(c){var _=r(i,c.type);if(c.size>1)for(var p=0;p<c.size;++p)l.push({name:c.name.replace("[0]","["+p+"]"),type:_});else l.push({name:c.name,type:_})}}return l},s.attributes=function(i,a){for(var u=i.getProgramParameter(a,i.ACTIVE_ATTRIBUTES),l=[],d=0;d<u;++d){var c=i.getActiveAttrib(a,d);c&&l.push({name:c.name,type:r(i,c.type)})}return l};var t={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},o=null;function r(i,a){if(!o){var u=Object.keys(t);o={};for(var l=0;l<u.length;++l){var d=u[l];o[i[d]]=t[d]}}return o[a]}},5091:function(f,s,t){"use strict";s.shader=function(_,p,g){return c(_).getShaderReference(p,g)},s.program=function(_,p,g,m,b){return c(_).getProgram(p,g,m,b)};var o=t(8866),r=t(2992),i=new(typeof WeakMap>"u"?t(606):WeakMap),a=0;function u(_,p,g,m,b,y,M){this.id=_,this.src=p,this.type=g,this.shader=m,this.count=y,this.programs=[],this.cache=M}function l(_){this.gl=_,this.shaders=[{},{}],this.programs={}}u.prototype.dispose=function(){if(--this.count==0){for(var _=this.cache,p=_.gl,g=this.programs,m=0,b=g.length;m<b;++m){var y=_.programs[g[m]];y&&(delete _.programs[m],p.deleteProgram(y))}p.deleteShader(this.shader),delete _.shaders[this.type===p.FRAGMENT_SHADER|0][this.src]}};var d=l.prototype;function c(_){var p=i.get(_);return p||(p=new l(_),i.set(_,p)),p}d.getShaderReference=function(_,p){var g=this.gl,m=this.shaders[_===g.FRAGMENT_SHADER|0],b=m[p];if(b&&g.isShader(b.shader))b.count+=1;else{var y=function(M,h,E){var k=M.createShader(h);if(M.shaderSource(k,E),M.compileShader(k),!M.getShaderParameter(k,M.COMPILE_STATUS)){var D=M.getShaderInfoLog(k);try{var P=r(D,E,h)}catch(L){throw console.warn("Failed to format compiler error: "+L),new o(D,`Error compiling shader:
`+D)}throw new o(D,P.short,P.long)}return k}(g,_,p);b=m[p]=new u(a++,p,_,y,[],1,this)}return b},d.getProgram=function(_,p,g,m){var b=[_.id,p.id,g.join(":"),m.join(":")].join("@"),y=this.programs[b];return y&&this.gl.isProgram(y)||(this.programs[b]=y=function(M,h,E,k,D){var P=M.createProgram();M.attachShader(P,h),M.attachShader(P,E);for(var L=0;L<k.length;++L)M.bindAttribLocation(P,D[L],k[L]);if(M.linkProgram(P),!M.getProgramParameter(P,M.LINK_STATUS)){var O=M.getProgramInfoLog(P);throw new o(O,"Error linking program: "+O)}return P}(this.gl,_.shader,p.shader,g,m),_.programs.push(b),p.programs.push(b)),y}},4098:function(f){"use strict";function s(o){this.plot=o,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}f.exports=function(o,r){var i=new s(o);return i.update(r),o.addOverlay(i),i};var t=s.prototype;t.update=function(o){o=o||{},this.enable=(o.enable||[!0,!0,!1,!1]).slice(),this.width=(o.width||[1,1,1,1]).slice(),this.color=(o.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(r){return r.slice()}),this.center=(o.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},t.draw=function(){var o=this.enable,r=this.width,i=this.color,a=this.center,u=this.plot,l=u.line,d=u.dataBox,c=u.viewBox;if(l.bind(),d[0]<=a[0]&&a[0]<=d[2]&&d[1]<=a[1]&&a[1]<=d[3]){var _=c[0]+(a[0]-d[0])/(d[2]-d[0])*(c[2]-c[0]),p=c[1]+(a[1]-d[1])/(d[3]-d[1])*(c[3]-c[1]);o[0]&&l.drawLine(_,p,c[0],p,r[0],i[0]),o[1]&&l.drawLine(_,p,_,c[1],r[1],i[1]),o[2]&&l.drawLine(_,p,c[2],p,r[2],i[2]),o[3]&&l.drawLine(_,p,_,c[3],r[3],i[3])}},t.dispose=function(){this.plot.removeOverlay(this)}},1493:function(f,s,t){"use strict";var o=t(3236),r=t(9405),i=o([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),a=o([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);f.exports=function(u){return r(u,i,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},4449:function(f,s,t){"use strict";var o=t(2762),r=t(8116),i=t(1493);f.exports=function(p,g){var m=[];function b(k,D,P,L,O,N){var V=[k,D,P,0,0,0,1];V[L+3]=1,V[L]=O,m.push.apply(m,V),V[6]=-1,m.push.apply(m,V),V[L]=N,m.push.apply(m,V),m.push.apply(m,V),V[6]=1,m.push.apply(m,V),V[L]=O,m.push.apply(m,V)}b(0,0,0,0,0,1),b(0,0,0,1,0,1),b(0,0,0,2,0,1),b(1,0,0,1,-1,1),b(1,0,0,2,-1,1),b(0,1,0,0,-1,1),b(0,1,0,2,-1,1),b(0,0,1,0,-1,1),b(0,0,1,1,-1,1);var y=o(p,m),M=r(p,[{type:p.FLOAT,buffer:y,size:3,offset:0,stride:28},{type:p.FLOAT,buffer:y,size:3,offset:12,stride:28},{type:p.FLOAT,buffer:y,size:1,offset:24,stride:28}]),h=i(p);h.attributes.position.location=0,h.attributes.color.location=1,h.attributes.weight.location=2;var E=new u(p,y,M,h);return E.update(g),E};var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function u(p,g,m,b){this.gl=p,this.buffer=g,this.vao=m,this.shader=b,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var l=u.prototype,d=[0,0,0],c=[0,0,0],_=[0,0];l.isTransparent=function(){return!1},l.drawTransparent=function(p){},l.draw=function(p){var g=this.gl,m=this.vao,b=this.shader;m.bind(),b.bind();var y,M=p.model||a,h=p.view||a,E=p.projection||a;this.axes&&(y=this.axes.lastCubeProps.axis);for(var k=d,D=c,P=0;P<3;++P)y&&y[P]<0?(k[P]=this.bounds[0][P],D[P]=this.bounds[1][P]):(k[P]=this.bounds[1][P],D[P]=this.bounds[0][P]);for(_[0]=g.drawingBufferWidth,_[1]=g.drawingBufferHeight,b.uniforms.model=M,b.uniforms.view=h,b.uniforms.projection=E,b.uniforms.coordinates=[this.position,k,D],b.uniforms.colors=this.colors,b.uniforms.screenShape=_,P=0;P<3;++P)b.uniforms.lineWidth=this.lineWidth[P]*this.pixelRatio,this.enabled[P]&&(m.draw(g.TRIANGLES,6,6*P),this.drawSides[P]&&m.draw(g.TRIANGLES,12,18+12*P));m.unbind()},l.update=function(p){p&&("bounds"in p&&(this.bounds=p.bounds),"position"in p&&(this.position=p.position),"lineWidth"in p&&(this.lineWidth=p.lineWidth),"colors"in p&&(this.colors=p.colors),"enabled"in p&&(this.enabled=p.enabled),"drawSides"in p&&(this.drawSides=p.drawSides))},l.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},6740:function(f,s,t){var o=t(3236),r=o([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),i=o([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),a=o([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),u=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);s.meshShader={vertex:r,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},s.pickShader={vertex:a,fragment:u,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7815:function(f,s,t){"use strict";var o=t(2931),r=t(9970),i=["xyz","xzy","yxz","yzx","zxy","zyx"],a=function(_,p){var g,m=_.length;for(g=0;g<m;g++){var b=_[g];if(b===p)return g;if(b>p)return g-1}return g},u=function(_,p,g){return _<p?p:_>g?g:_},l=function(_){var p=1/0;_.sort(function(y,M){return y-M});for(var g=_.length,m=1;m<g;m++){var b=Math.abs(_[m]-_[m-1]);b<p&&(p=b)}return p};f.exports=function(_,p){var g=_.startingPositions,m=_.maxLength||1e3,b=_.tubeSize||1,y=_.absoluteTubeSize,M=_.gridFill||"+x+y+z",h={};M.indexOf("-x")!==-1&&(h.reversedX=!0),M.indexOf("-y")!==-1&&(h.reversedY=!0),M.indexOf("-z")!==-1&&(h.reversedZ=!0),h.filled=i.indexOf(M.replace(/-/g,"").replace(/\+/g,""));var E=_.getVelocity||function(ye){return function(me,Me,Ae){var ce=Me.vectors,ae=Me.meshgrid,pe=me[0],De=me[1],ke=me[2],Ee=ae[0].length,Ie=ae[1].length,Re=ae[2].length,Ne=a(ae[0],pe),ge=a(ae[1],De),we=a(ae[2],ke),Ce=Ne+1,ze=ge+1,Pe=we+1;if(Ne=u(Ne,0,Ee-1),Ce=u(Ce,0,Ee-1),ge=u(ge,0,Ie-1),ze=u(ze,0,Ie-1),we=u(we,0,Re-1),Pe=u(Pe,0,Re-1),Ne<0||ge<0||we<0||Ce>Ee-1||ze>Ie-1||Pe>Re-1)return o.create();var Ue,Ge,Xe,st,at,vt,xt=ae[0][Ne],gt=ae[0][Ce],rt=ae[1][ge],tt=ae[1][ze],Mt=ae[2][we],Pt=(pe-xt)/(gt-xt),Rt=(De-rt)/(tt-rt),St=(ke-Mt)/(ae[2][Pe]-Mt);switch(isFinite(Pt)||(Pt=.5),isFinite(Rt)||(Rt=.5),isFinite(St)||(St=.5),Ae.reversedX&&(Ne=Ee-1-Ne,Ce=Ee-1-Ce),Ae.reversedY&&(ge=Ie-1-ge,ze=Ie-1-ze),Ae.reversedZ&&(we=Re-1-we,Pe=Re-1-Pe),Ae.filled){case 5:at=we,vt=Pe,Xe=ge*Re,st=ze*Re,Ue=Ne*Re*Ie,Ge=Ce*Re*Ie;break;case 4:at=we,vt=Pe,Ue=Ne*Re,Ge=Ce*Re,Xe=ge*Re*Ee,st=ze*Re*Ee;break;case 3:Xe=ge,st=ze,at=we*Ie,vt=Pe*Ie,Ue=Ne*Ie*Re,Ge=Ce*Ie*Re;break;case 2:Xe=ge,st=ze,Ue=Ne*Ie,Ge=Ce*Ie,at=we*Ie*Ee,vt=Pe*Ie*Ee;break;case 1:Ue=Ne,Ge=Ce,at=we*Ee,vt=Pe*Ee,Xe=ge*Ee*Re,st=ze*Ee*Re;break;default:Ue=Ne,Ge=Ce,Xe=ge*Ee,st=ze*Ee,at=we*Ee*Ie,vt=Pe*Ee*Ie}var Ye=ce[Ue+Xe+at],Ke=ce[Ue+Xe+vt],Ve=ce[Ue+st+at],$e=ce[Ue+st+vt],lt=ce[Ge+Xe+at],it=ce[Ge+Xe+vt],Be=ce[Ge+st+at],je=ce[Ge+st+vt],ot=o.create(),Ze=o.create(),dt=o.create(),mt=o.create();o.lerp(ot,Ye,lt,Pt),o.lerp(Ze,Ke,it,Pt),o.lerp(dt,Ve,Be,Pt),o.lerp(mt,$e,je,Pt);var yt=o.create(),ht=o.create();o.lerp(yt,ot,dt,Rt),o.lerp(ht,Ze,mt,Rt);var kt=o.create();return o.lerp(kt,yt,ht,St),kt}(ye,_,h)},k=_.getDivergence||function(ye,me){var Me=o.create(),Ae=1e-4;o.add(Me,ye,[Ae,0,0]);var ce=E(Me);o.subtract(ce,ce,me),o.scale(ce,ce,1/Ae),o.add(Me,ye,[0,Ae,0]);var ae=E(Me);o.subtract(ae,ae,me),o.scale(ae,ae,1/Ae),o.add(Me,ye,[0,0,Ae]);var pe=E(Me);return o.subtract(pe,pe,me),o.scale(pe,pe,1/Ae),o.add(Me,ce,ae),o.add(Me,Me,pe),Me},D=[],P=p[0][0],L=p[0][1],O=p[0][2],N=p[1][0],V=p[1][1],F=p[1][2],j=function(ye){var me=ye[0],Me=ye[1],Ae=ye[2];return!(me<P||me>N||Me<L||Me>V||Ae<O||Ae>F)},Z=10*o.distance(p[0],p[1])/m,z=Z*Z,H=1,U=0,re=g.length;re>1&&(H=function(ye){for(var me=[],Me=[],Ae=[],ce={},ae={},pe={},De=ye.length,ke=0;ke<De;ke++){var Ee=ye[ke],Ie=Ee[0],Re=Ee[1],Ne=Ee[2];ce[Ie]||(me.push(Ie),ce[Ie]=!0),ae[Re]||(Me.push(Re),ae[Re]=!0),pe[Ne]||(Ae.push(Ne),pe[Ne]=!0)}var ge=l(me),we=l(Me),Ce=l(Ae),ze=Math.min(ge,we,Ce);return isFinite(ze)?ze:1}(g));for(var ee=0;ee<re;ee++){var J=o.create();o.copy(J,g[ee]);var Q=[J],ne=[],K=E(J),oe=J;ne.push(K);var le=[],se=k(J,K),de=o.length(se);isFinite(de)&&de>U&&(U=de),le.push(de),D.push({points:Q,velocities:ne,divergences:le});for(var be=0;be<100*m&&Q.length<m&&j(J);){be++;var _e=o.clone(K),xe=o.squaredLength(_e);if(xe===0)break;xe>z&&o.scale(_e,_e,Z/Math.sqrt(xe)),o.add(_e,_e,J),K=E(_e),o.squaredDistance(oe,_e)-z>-1e-4*z&&(Q.push(_e),oe=_e,ne.push(K),se=k(_e,K),de=o.length(se),isFinite(de)&&de>U&&(U=de),le.push(de)),J=_e}}var ve=function(ye,me,Me,Ae){for(var ce=0,ae=0;ae<ye.length;ae++)for(var pe=ye[ae].velocities,De=0;De<pe.length;De++)ce=Math.max(ce,o.length(pe[De]));var ke=ye.map(function(Ue){return function(Ge,Xe,st,at){for(var vt=Ge.points,xt=Ge.velocities,gt=Ge.divergences,rt=[],tt=[],Mt=[],Pt=[],Rt=[],St=[],Ye=0,Ke=0,Ve=r.create(),$e=r.create(),lt=0;lt<vt.length;lt++){var it=vt[lt],Be=xt[lt],je=gt[lt];Xe===0&&(je=.05*st),Ke=o.length(Be)/at,Ve=r.create(),o.copy(Ve,Be),Ve[3]=je;for(var ot=0;ot<8;ot++)Rt[ot]=[it[0],it[1],it[2],ot];if(Pt.length>0)for(ot=0;ot<8;ot++){var Ze=(ot+1)%8;rt.push(Pt[ot],Rt[ot],Rt[Ze],Rt[Ze],Pt[Ze],Pt[ot]),Mt.push($e,Ve,Ve,Ve,$e,$e),St.push(Ye,Ke,Ke,Ke,Ye,Ye);var dt=rt.length;tt.push([dt-6,dt-5,dt-4],[dt-3,dt-2,dt-1])}var mt=Pt;Pt=Rt,Rt=mt;var yt=$e;$e=Ve,Ve=yt;var ht=Ye;Ye=Ke,Ke=ht}return{positions:rt,cells:tt,vectors:Mt,vertexIntensity:St}}(Ue,Me,Ae,ce)}),Ee=[],Ie=[],Re=[],Ne=[];for(ae=0;ae<ke.length;ae++){var ge=ke[ae],we=Ee.length;for(Ee=Ee.concat(ge.positions),Re=Re.concat(ge.vectors),Ne=Ne.concat(ge.vertexIntensity),De=0;De<ge.cells.length;De++){var Ce=ge.cells[De],ze=[];Ie.push(ze);for(var Pe=0;Pe<Ce.length;Pe++)ze.push(Ce[Pe]+we)}}return{positions:Ee,cells:Ie,vectors:Re,vertexIntensity:Ne,colormap:me}}(D,_.colormap,U,H);return y?ve.tubeScale=y:(U===0&&(U=1),ve.tubeScale=.5*b*H/U),ve};var d=t(6740),c=t(6405).createMesh;f.exports.createTubeMesh=function(_,p){return c(_,p,{shaders:d,traceType:"streamtube"})}},990:function(f,s,t){var o=t(9405),r=t(3236),i=r([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),a=r([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color \u2014 in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),u=r([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),l=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);s.createShader=function(d){var c=o(d,i,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c.attributes.normal.location=2,c},s.createPickShader=function(d){var c=o(d,i,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c.attributes.normal.location=2,c},s.createContourShader=function(d){var c=o(d,u,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c},s.createPickContourShader=function(d){var c=o(d,u,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c}},9499:function(f,s,t){"use strict";f.exports=function(se){var de=se.gl,be=h(de),_e=k(de),xe=E(de),ve=D(de),ye=r(de),me=i(de,[{buffer:ye,size:4,stride:P,offset:0},{buffer:ye,size:3,stride:P,offset:16},{buffer:ye,size:3,stride:P,offset:28}]),Me=r(de),Ae=i(de,[{buffer:Me,size:4,stride:20,offset:0},{buffer:Me,size:1,stride:20,offset:16}]),ce=r(de),ae=i(de,[{buffer:ce,size:2,type:de.FLOAT}]),pe=a(de,1,F,de.RGBA,de.UNSIGNED_BYTE);pe.minFilter=de.LINEAR,pe.magFilter=de.LINEAR;var De=new j(de,[0,0],[[0,0,0],[0,0,0]],be,_e,ye,me,pe,xe,ve,Me,Ae,ce,ae,[0,0,0]),ke={levels:[[],[],[]]};for(var Ee in se)ke[Ee]=se[Ee];return ke.colormap=ke.colormap||"jet",De.update(ke),De};var o=t(8828),r=t(2762),i=t(8116),a=t(7766),u=t(1888),l=t(6729),d=t(5298),c=t(9994),_=t(9618),p=t(3711),g=t(6760),m=t(7608),b=t(2478),y=t(6199),M=t(990),h=M.createShader,E=M.createContourShader,k=M.createPickShader,D=M.createPickContourShader,P=40,L=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],O=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],N=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function V(se,de,be,_e,xe){this.position=se,this.index=de,this.uv=be,this.level=_e,this.dataCoordinate=xe}(function(){for(var se=0;se<3;++se){var de=N[se],be=(se+2)%3;de[(se+1)%3+0]=1,de[be+3]=1,de[se+6]=1}})();var F=256;function j(se,de,be,_e,xe,ve,ye,me,Me,Ae,ce,ae,pe,De,ke){this.gl=se,this.shape=de,this.bounds=be,this.objectOffset=ke,this.intensityBounds=[],this._shader=_e,this._pickShader=xe,this._coordinateBuffer=ve,this._vao=ye,this._colorMap=me,this._contourShader=Me,this._contourPickShader=Ae,this._contourBuffer=ce,this._contourVAO=ae,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new V([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=pe,this._dynamicVAO=De,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[_(u.mallocFloat(1024),[0,0]),_(u.mallocFloat(1024),[0,0]),_(u.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var Z=j.prototype;Z.genColormap=function(se,de){var be=!1,_e=c([l({colormap:se,nshades:F,format:"rgba"}).map(function(xe,ve){var ye=de?function(me,Me){if(!Me||!Me.length)return 1;for(var Ae=0;Ae<Me.length;++Ae){if(Me.length<2)return 1;if(Me[Ae][0]===me)return Me[Ae][1];if(Me[Ae][0]>me&&Ae>0){var ce=(Me[Ae][0]-me)/(Me[Ae][0]-Me[Ae-1][0]);return Me[Ae][1]*(1-ce)+ce*Me[Ae-1][1]}}return 1}(ve/255,de):xe[3];return ye<1&&(be=!0),[xe[0],xe[1],xe[2],255*ye]})]);return d.divseq(_e,255),this.hasAlphaScale=be,_e},Z.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},Z.isOpaque=function(){return!this.isTransparent()},Z.pickSlots=1,Z.setPickBase=function(se){this.pickId=se};var z=[0,0,0],H={showSurface:!1,showContour:!1,projections:[L.slice(),L.slice(),L.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function U(se,de){var be,_e,xe,ve=de.axes&&de.axes.lastCubeProps.axis||z,ye=de.showSurface,me=de.showContour;for(be=0;be<3;++be)for(ye=ye||de.surfaceProject[be],_e=0;_e<3;++_e)me=me||de.contourProject[be][_e];for(be=0;be<3;++be){var Me=H.projections[be];for(_e=0;_e<16;++_e)Me[_e]=0;for(_e=0;_e<4;++_e)Me[5*_e]=1;Me[5*be]=0,Me[12+be]=de.axesBounds[+(ve[be]>0)][be],g(Me,se.model,Me);var Ae=H.clipBounds[be];for(xe=0;xe<2;++xe)for(_e=0;_e<3;++_e)Ae[xe][_e]=se.clipBounds[xe][_e];Ae[0][be]=-1e8,Ae[1][be]=1e8}return H.showSurface=ye,H.showContour=me,H}var re={model:L,view:L,projection:L,inverseModel:L.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},ee=L.slice(),J=[1,0,0,0,1,0,0,0,1];function Q(se,de){se=se||{};var be=this.gl;be.disable(be.CULL_FACE),this._colorMap.bind(0);var _e=re;_e.model=se.model||L,_e.view=se.view||L,_e.projection=se.projection||L,_e.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],_e.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],_e.objectOffset=this.objectOffset,_e.contourColor=this.contourColor[0],_e.inverseModel=m(_e.inverseModel,_e.model);for(var xe=0;xe<2;++xe)for(var ve=_e.clipBounds[xe],ye=0;ye<3;++ye)ve[ye]=Math.min(Math.max(this.clipBounds[xe][ye],-1e8),1e8);_e.kambient=this.ambientLight,_e.kdiffuse=this.diffuseLight,_e.kspecular=this.specularLight,_e.roughness=this.roughness,_e.fresnel=this.fresnel,_e.opacity=this.opacity,_e.height=0,_e.permutation=J,_e.vertexColor=this.vertexColor;var me=ee;for(g(me,_e.view,_e.model),g(me,_e.projection,me),m(me,me),xe=0;xe<3;++xe)_e.eyePosition[xe]=me[12+xe]/me[15];var Me=me[15];for(xe=0;xe<3;++xe)Me+=this.lightPosition[xe]*me[4*xe+3];for(xe=0;xe<3;++xe){var Ae=me[12+xe];for(ye=0;ye<3;++ye)Ae+=me[4*ye+xe]*this.lightPosition[ye];_e.lightPosition[xe]=Ae/Me}var ce=U(_e,this);if(ce.showSurface){for(this._shader.bind(),this._shader.uniforms=_e,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(be.TRIANGLES,this._vertexCount),xe=0;xe<3;++xe)this.surfaceProject[xe]&&this.vertexCount&&(this._shader.uniforms.model=ce.projections[xe],this._shader.uniforms.clipBounds=ce.clipBounds[xe],this._vao.draw(be.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ce.showContour){var ae=this._contourShader;_e.kambient=1,_e.kdiffuse=0,_e.kspecular=0,_e.opacity=1,ae.bind(),ae.uniforms=_e;var pe=this._contourVAO;for(pe.bind(),xe=0;xe<3;++xe)for(ae.uniforms.permutation=N[xe],be.lineWidth(this.contourWidth[xe]*this.pixelRatio),ye=0;ye<this.contourLevels[xe].length;++ye)ye===this.highlightLevel[xe]?(ae.uniforms.contourColor=this.highlightColor[xe],ae.uniforms.contourTint=this.highlightTint[xe]):ye!==0&&ye-1!==this.highlightLevel[xe]||(ae.uniforms.contourColor=this.contourColor[xe],ae.uniforms.contourTint=this.contourTint[xe]),this._contourCounts[xe][ye]&&(ae.uniforms.height=this.contourLevels[xe][ye],pe.draw(be.LINES,this._contourCounts[xe][ye],this._contourOffsets[xe][ye]));for(xe=0;xe<3;++xe)for(ae.uniforms.model=ce.projections[xe],ae.uniforms.clipBounds=ce.clipBounds[xe],ye=0;ye<3;++ye)if(this.contourProject[xe][ye]){ae.uniforms.permutation=N[ye],be.lineWidth(this.contourWidth[ye]*this.pixelRatio);for(var De=0;De<this.contourLevels[ye].length;++De)De===this.highlightLevel[ye]?(ae.uniforms.contourColor=this.highlightColor[ye],ae.uniforms.contourTint=this.highlightTint[ye]):De!==0&&De-1!==this.highlightLevel[ye]||(ae.uniforms.contourColor=this.contourColor[ye],ae.uniforms.contourTint=this.contourTint[ye]),this._contourCounts[ye][De]&&(ae.uniforms.height=this.contourLevels[ye][De],pe.draw(be.LINES,this._contourCounts[ye][De],this._contourOffsets[ye][De]))}for(pe.unbind(),(pe=this._dynamicVAO).bind(),xe=0;xe<3;++xe)if(this._dynamicCounts[xe]!==0)for(ae.uniforms.model=_e.model,ae.uniforms.clipBounds=_e.clipBounds,ae.uniforms.permutation=N[xe],be.lineWidth(this.dynamicWidth[xe]*this.pixelRatio),ae.uniforms.contourColor=this.dynamicColor[xe],ae.uniforms.contourTint=this.dynamicTint[xe],ae.uniforms.height=this.dynamicLevel[xe],pe.draw(be.LINES,this._dynamicCounts[xe],this._dynamicOffsets[xe]),ye=0;ye<3;++ye)this.contourProject[ye][xe]&&(ae.uniforms.model=ce.projections[ye],ae.uniforms.clipBounds=ce.clipBounds[ye],pe.draw(be.LINES,this._dynamicCounts[xe],this._dynamicOffsets[xe]));pe.unbind()}}Z.draw=function(se){return Q.call(this,se,!1)},Z.drawTransparent=function(se){return Q.call(this,se,!0)};var ne={model:L,view:L,projection:L,inverseModel:L,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function K(se,de){return Array.isArray(se)?[de(se[0]),de(se[1]),de(se[2])]:[de(se),de(se),de(se)]}function oe(se){return Array.isArray(se)?se.length===3?[se[0],se[1],se[2],1]:[se[0],se[1],se[2],se[3]]:[0,0,0,1]}function le(se){if(Array.isArray(se)){if(Array.isArray(se))return[oe(se[0]),oe(se[1]),oe(se[2])];var de=oe(se);return[de.slice(),de.slice(),de.slice()]}}Z.drawPick=function(se){se=se||{};var de=this.gl;de.disable(de.CULL_FACE);var be=ne;be.model=se.model||L,be.view=se.view||L,be.projection=se.projection||L,be.shape=this._field[2].shape,be.pickId=this.pickId/255,be.lowerBound=this.bounds[0],be.upperBound=this.bounds[1],be.objectOffset=this.objectOffset,be.permutation=J;for(var _e=0;_e<2;++_e)for(var xe=be.clipBounds[_e],ve=0;ve<3;++ve)xe[ve]=Math.min(Math.max(this.clipBounds[_e][ve],-1e8),1e8);var ye=U(be,this);if(ye.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=be,this._vao.bind(),this._vao.draw(de.TRIANGLES,this._vertexCount),_e=0;_e<3;++_e)this.surfaceProject[_e]&&(this._pickShader.uniforms.model=ye.projections[_e],this._pickShader.uniforms.clipBounds=ye.clipBounds[_e],this._vao.draw(de.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ye.showContour){var me=this._contourPickShader;me.bind(),me.uniforms=be;var Me=this._contourVAO;for(Me.bind(),ve=0;ve<3;++ve)for(de.lineWidth(this.contourWidth[ve]*this.pixelRatio),me.uniforms.permutation=N[ve],_e=0;_e<this.contourLevels[ve].length;++_e)this._contourCounts[ve][_e]&&(me.uniforms.height=this.contourLevels[ve][_e],Me.draw(de.LINES,this._contourCounts[ve][_e],this._contourOffsets[ve][_e]));for(_e=0;_e<3;++_e)for(me.uniforms.model=ye.projections[_e],me.uniforms.clipBounds=ye.clipBounds[_e],ve=0;ve<3;++ve)if(this.contourProject[_e][ve]){me.uniforms.permutation=N[ve],de.lineWidth(this.contourWidth[ve]*this.pixelRatio);for(var Ae=0;Ae<this.contourLevels[ve].length;++Ae)this._contourCounts[ve][Ae]&&(me.uniforms.height=this.contourLevels[ve][Ae],Me.draw(de.LINES,this._contourCounts[ve][Ae],this._contourOffsets[ve][Ae]))}Me.unbind()}},Z.pick=function(se){if(!se||se.id!==this.pickId)return null;var de=this._field[2].shape,be=this._pickResult,_e=de[0]*(se.value[0]+(se.value[2]>>4)/16)/255,xe=Math.floor(_e),ve=_e-xe,ye=de[1]*(se.value[1]+(15&se.value[2])/16)/255,me=Math.floor(ye),Me=ye-me;xe+=1,me+=1;var Ae=be.position;Ae[0]=Ae[1]=Ae[2]=0;for(var ce=0;ce<2;++ce)for(var ae=ce?ve:1-ve,pe=0;pe<2;++pe)for(var De=xe+ce,ke=me+pe,Ee=ae*(pe?Me:1-Me),Ie=0;Ie<3;++Ie)Ae[Ie]+=this._field[Ie].get(De,ke)*Ee;for(var Re=this._pickResult.level,Ne=0;Ne<3;++Ne)if(Re[Ne]=b.le(this.contourLevels[Ne],Ae[Ne]),Re[Ne]<0)this.contourLevels[Ne].length>0&&(Re[Ne]=0);else if(Re[Ne]<this.contourLevels[Ne].length-1){var ge=this.contourLevels[Ne][Re[Ne]],we=this.contourLevels[Ne][Re[Ne]+1];Math.abs(ge-Ae[Ne])>Math.abs(we-Ae[Ne])&&(Re[Ne]+=1)}for(be.index[0]=ve<.5?xe:xe+1,be.index[1]=Me<.5?me:me+1,be.uv[0]=_e/de[0],be.uv[1]=ye/de[1],Ie=0;Ie<3;++Ie)be.dataCoordinate[Ie]=this._field[Ie].get(be.index[0],be.index[1]);return be},Z.padField=function(se,de){var be=de.shape.slice(),_e=se.shape.slice();d.assign(se.lo(1,1).hi(be[0],be[1]),de),d.assign(se.lo(1).hi(be[0],1),de.hi(be[0],1)),d.assign(se.lo(1,_e[1]-1).hi(be[0],1),de.lo(0,be[1]-1).hi(be[0],1)),d.assign(se.lo(0,1).hi(1,be[1]),de.hi(1)),d.assign(se.lo(_e[0]-1,1).hi(1,be[1]),de.lo(be[0]-1)),se.set(0,0,de.get(0,0)),se.set(0,_e[1]-1,de.get(0,be[1]-1)),se.set(_e[0]-1,0,de.get(be[0]-1,0)),se.set(_e[0]-1,_e[1]-1,de.get(be[0]-1,be[1]-1))},Z.update=function(se){se=se||{},this.objectOffset=se.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in se&&(this.contourWidth=K(se.contourWidth,Number)),"showContour"in se&&(this.showContour=K(se.showContour,Boolean)),"showSurface"in se&&(this.showSurface=!!se.showSurface),"contourTint"in se&&(this.contourTint=K(se.contourTint,Boolean)),"contourColor"in se&&(this.contourColor=le(se.contourColor)),"contourProject"in se&&(this.contourProject=K(se.contourProject,function(un){return K(un,Boolean)})),"surfaceProject"in se&&(this.surfaceProject=se.surfaceProject),"dynamicColor"in se&&(this.dynamicColor=le(se.dynamicColor)),"dynamicTint"in se&&(this.dynamicTint=K(se.dynamicTint,Number)),"dynamicWidth"in se&&(this.dynamicWidth=K(se.dynamicWidth,Number)),"opacity"in se&&(this.opacity=se.opacity),"opacityscale"in se&&(this.opacityscale=se.opacityscale),"colorBounds"in se&&(this.colorBounds=se.colorBounds),"vertexColor"in se&&(this.vertexColor=se.vertexColor?1:0),"colormap"in se&&this._colorMap.setPixels(this.genColormap(se.colormap,this.opacityscale));var de=se.field||se.coords&&se.coords[2]||null,be=!1;if(de||(de=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in se||"coords"in se){var _e=(de.shape[0]+2)*(de.shape[1]+2);_e>this._field[2].data.length&&(u.freeFloat(this._field[2].data),this._field[2].data=u.mallocFloat(o.nextPow2(_e))),this._field[2]=_(this._field[2].data,[de.shape[0]+2,de.shape[1]+2]),this.padField(this._field[2],de),this.shape=de.shape.slice();for(var xe=this.shape,ve=0;ve<2;++ve)this._field[2].size>this._field[ve].data.length&&(u.freeFloat(this._field[ve].data),this._field[ve].data=u.mallocFloat(this._field[2].size)),this._field[ve]=_(this._field[ve].data,[xe[0]+2,xe[1]+2]);if(se.coords){var ye=se.coords;if(!Array.isArray(ye)||ye.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(ve=0;ve<2;++ve){var me=ye[ve];for(pe=0;pe<2;++pe)if(me.shape[pe]!==xe[pe])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[ve],me)}}else if(se.ticks){var Me=se.ticks;if(!Array.isArray(Me)||Me.length!==2)throw new Error("gl-surface: invalid ticks");for(ve=0;ve<2;++ve){var Ae=Me[ve];if((Array.isArray(Ae)||Ae.length)&&(Ae=_(Ae)),Ae.shape[0]!==xe[ve])throw new Error("gl-surface: invalid tick length");var ce=_(Ae.data,xe);ce.stride[ve]=Ae.stride[0],ce.stride[1^ve]=0,this.padField(this._field[ve],ce)}}else{for(ve=0;ve<2;++ve){var ae=[0,0];ae[ve]=1,this._field[ve]=_(this._field[ve].data,[xe[0]+2,xe[1]+2],ae,0)}this._field[0].set(0,0,0);for(var pe=0;pe<xe[0];++pe)this._field[0].set(pe+1,0,pe);for(this._field[0].set(xe[0]+1,0,xe[0]-1),this._field[1].set(0,0,0),pe=0;pe<xe[1];++pe)this._field[1].set(0,pe+1,pe);this._field[1].set(0,xe[1]+1,xe[1]-1)}var De=this._field,ke=_(u.mallocFloat(3*De[2].size*2),[3,xe[0]+2,xe[1]+2,2]);for(ve=0;ve<3;++ve)y(ke.pick(ve),De[ve],"mirror");var Ee=_(u.mallocFloat(3*De[2].size),[xe[0]+2,xe[1]+2,3]);for(ve=0;ve<xe[0]+2;++ve)for(pe=0;pe<xe[1]+2;++pe){var Ie=ke.get(0,ve,pe,0),Re=ke.get(0,ve,pe,1),Ne=ke.get(1,ve,pe,0),ge=ke.get(1,ve,pe,1),we=ke.get(2,ve,pe,0),Ce=ke.get(2,ve,pe,1),ze=Ne*Ce-ge*we,Pe=we*Re-Ce*Ie,Ue=Ie*ge-Re*Ne,Ge=Math.sqrt(ze*ze+Pe*Pe+Ue*Ue);Ge<1e-8?(Ge=Math.max(Math.abs(ze),Math.abs(Pe),Math.abs(Ue)))<1e-8?(Ue=1,Pe=ze=0,Ge=1):Ge=1/Ge:Ge=1/Math.sqrt(Ge),Ee.set(ve,pe,0,ze*Ge),Ee.set(ve,pe,1,Pe*Ge),Ee.set(ve,pe,2,Ue*Ge)}u.free(ke.data);var Xe=[1/0,1/0,1/0],st=[-1/0,-1/0,-1/0],at=1/0,vt=-1/0,xt=(xe[0]-1)*(xe[1]-1)*6,gt=u.mallocFloat(o.nextPow2(10*xt)),rt=0,tt=0;for(ve=0;ve<xe[0]-1;++ve)e:for(pe=0;pe<xe[1]-1;++pe){for(var Mt=0;Mt<2;++Mt)for(var Pt=0;Pt<2;++Pt)for(var Rt=0;Rt<3;++Rt){var St=this._field[Rt].get(1+ve+Mt,1+pe+Pt);if(isNaN(St)||!isFinite(St))continue e}for(Rt=0;Rt<6;++Rt){var Ye=ve+O[Rt][0],Ke=pe+O[Rt][1],Ve=this._field[0].get(Ye+1,Ke+1),$e=this._field[1].get(Ye+1,Ke+1);St=this._field[2].get(Ye+1,Ke+1),ze=Ee.get(Ye+1,Ke+1,0),Pe=Ee.get(Ye+1,Ke+1,1),Ue=Ee.get(Ye+1,Ke+1,2),se.intensity&&(lt=se.intensity.get(Ye,Ke));var lt=se.intensity?se.intensity.get(Ye,Ke):St+this.objectOffset[2];gt[rt++]=Ye,gt[rt++]=Ke,gt[rt++]=Ve,gt[rt++]=$e,gt[rt++]=St,gt[rt++]=0,gt[rt++]=lt,gt[rt++]=ze,gt[rt++]=Pe,gt[rt++]=Ue,Xe[0]=Math.min(Xe[0],Ve+this.objectOffset[0]),Xe[1]=Math.min(Xe[1],$e+this.objectOffset[1]),Xe[2]=Math.min(Xe[2],St+this.objectOffset[2]),at=Math.min(at,lt),st[0]=Math.max(st[0],Ve+this.objectOffset[0]),st[1]=Math.max(st[1],$e+this.objectOffset[1]),st[2]=Math.max(st[2],St+this.objectOffset[2]),vt=Math.max(vt,lt),tt+=1}}for(se.intensityBounds&&(at=+se.intensityBounds[0],vt=+se.intensityBounds[1]),ve=6;ve<rt;ve+=10)gt[ve]=(gt[ve]-at)/(vt-at);this._vertexCount=tt,this._coordinateBuffer.update(gt.subarray(0,rt)),u.freeFloat(gt),u.free(Ee.data),this.bounds=[Xe,st],this.intensity=se.intensity||this._field[2],this.intensityBounds[0]===at&&this.intensityBounds[1]===vt||(be=!0),this.intensityBounds=[at,vt]}if("levels"in se){var it=se.levels;for(it=Array.isArray(it[0])?it.slice():[[],[],it],ve=0;ve<3;++ve)it[ve]=it[ve].slice(),it[ve].sort(function(un,tn){return un-tn});for(ve=0;ve<3;++ve)for(pe=0;pe<it[ve].length;++pe)it[ve][pe]-=this.objectOffset[ve];e:for(ve=0;ve<3;++ve){if(it[ve].length!==this.contourLevels[ve].length){be=!0;break}for(pe=0;pe<it[ve].length;++pe)if(it[ve][pe]!==this.contourLevels[ve][pe]){be=!0;break e}}this.contourLevels=it}if(be){De=this._field,xe=this.shape;for(var Be=[],je=0;je<3;++je){var ot=this.contourLevels[je],Ze=[],dt=[],mt=[0,0,0];for(ve=0;ve<ot.length;++ve){var yt=p(this._field[je],ot[ve]);Ze.push(Be.length/5|0),tt=0;e:for(pe=0;pe<yt.cells.length;++pe){var ht=yt.cells[pe];for(Rt=0;Rt<2;++Rt){var kt=yt.positions[ht[Rt]],_t=kt[0],Et=0|Math.floor(_t),Lt=_t-Et,Ot=kt[1],Ft=0|Math.floor(Ot),Zt=Ot-Ft,Ht=!1;t:for(var Ut=0;Ut<3;++Ut){mt[Ut]=0;var Wt=(je+Ut+1)%3;for(Mt=0;Mt<2;++Mt){var nn=Mt?Lt:1-Lt;for(Ye=0|Math.min(Math.max(Et+Mt,0),xe[0]),Pt=0;Pt<2;++Pt){var On=Pt?Zt:1-Zt;if(Ke=0|Math.min(Math.max(Ft+Pt,0),xe[1]),St=Ut<2?this._field[Wt].get(Ye,Ke):(this.intensity.get(Ye,Ke)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(St)||isNaN(St)){Ht=!0;break t}var kn=nn*On;mt[Ut]+=kn*St}}}if(Ht){if(Rt>0){for(var gn=0;gn<5;++gn)Be.pop();tt-=1}continue e}Be.push(mt[0],mt[1],kt[0],kt[1],mt[2]),tt+=1}}dt.push(tt)}this._contourOffsets[je]=Ze,this._contourCounts[je]=dt}var Jt=u.mallocFloat(Be.length);for(ve=0;ve<Be.length;++ve)Jt[ve]=Be[ve];this._contourBuffer.update(Jt),u.freeFloat(Jt)}},Z.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var se=0;se<3;++se)u.freeFloat(this._field[se].data)},Z.highlight=function(se){var de,be;if(!se)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(de=0;de<3;++de)this.enableHighlight[de]?this.highlightLevel[de]=se.level[de]:this.highlightLevel[de]=-1;for(be=this.snapToData?se.dataCoordinate:se.position,de=0;de<3;++de)be[de]-=this.objectOffset[de];if(this.enableDynamic[0]&&be[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&be[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&be[2]!==this.dynamicLevel[2]){for(var _e=0,xe=this.shape,ve=u.mallocFloat(12*xe[0]*xe[1]),ye=0;ye<3;++ye)if(this.enableDynamic[ye]){this.dynamicLevel[ye]=be[ye];var me=(ye+1)%3,Me=(ye+2)%3,Ae=this._field[ye],ce=this._field[me],ae=this._field[Me],pe=p(Ae,be[ye]),De=pe.cells,ke=pe.positions;for(this._dynamicOffsets[ye]=_e,de=0;de<De.length;++de)for(var Ee=De[de],Ie=0;Ie<2;++Ie){var Re=ke[Ee[Ie]],Ne=+Re[0],ge=0|Ne,we=0|Math.min(ge+1,xe[0]),Ce=Ne-ge,ze=1-Ce,Pe=+Re[1],Ue=0|Pe,Ge=0|Math.min(Ue+1,xe[1]),Xe=Pe-Ue,st=1-Xe,at=ze*st,vt=ze*Xe,xt=Ce*st,gt=Ce*Xe,rt=at*ce.get(ge,Ue)+vt*ce.get(ge,Ge)+xt*ce.get(we,Ue)+gt*ce.get(we,Ge),tt=at*ae.get(ge,Ue)+vt*ae.get(ge,Ge)+xt*ae.get(we,Ue)+gt*ae.get(we,Ge);if(isNaN(rt)||isNaN(tt)){Ie&&(_e-=1);break}ve[2*_e+0]=rt,ve[2*_e+1]=tt,_e+=1}this._dynamicCounts[ye]=_e-this._dynamicOffsets[ye]}else this.dynamicLevel[ye]=NaN,this._dynamicCounts[ye]=0;this._dynamicBuffer.update(ve.subarray(0,2*_e)),u.freeFloat(ve)}}},7766:function(f,s,t){"use strict";var o=t(9618),r=t(5298),i=t(1888);f.exports=function(M){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(a||function(k){a=[k.LINEAR,k.NEAREST_MIPMAP_LINEAR,k.LINEAR_MIPMAP_NEAREST,k.LINEAR_MIPMAP_NEAREST],u=[k.NEAREST,k.LINEAR,k.NEAREST_MIPMAP_NEAREST,k.NEAREST_MIPMAP_LINEAR,k.LINEAR_MIPMAP_NEAREST,k.LINEAR_MIPMAP_LINEAR],l=[k.REPEAT,k.CLAMP_TO_EDGE,k.MIRRORED_REPEAT]}(M),typeof arguments[1]=="number")return y(M,arguments[1],arguments[2],arguments[3]||M.RGBA,arguments[4]||M.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return y(M,0|arguments[1][0],0|arguments[1][1],arguments[2]||M.RGBA,arguments[3]||M.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var h=arguments[1],E=d(h)?h:h.raw;if(E)return function(k,D,P,L,O,N){var V=b(k);return k.texImage2D(k.TEXTURE_2D,0,O,O,N,D),new p(k,V,P,L,O,N)}(M,E,0|h.width,0|h.height,arguments[2]||M.RGBA,arguments[3]||M.UNSIGNED_BYTE);if(h.shape&&h.data&&h.stride)return function(k,D){var P=D.dtype,L=D.shape.slice(),O=k.getParameter(k.MAX_TEXTURE_SIZE);if(L[0]<0||L[0]>O||L[1]<0||L[1]>O)throw new Error("gl-texture2d: Invalid texture size");var N=m(L,D.stride.slice()),V=0;P==="float32"?V=k.FLOAT:P==="float64"?(V=k.FLOAT,N=!1,P="float32"):P==="uint8"?V=k.UNSIGNED_BYTE:(V=k.UNSIGNED_BYTE,N=!1,P="uint8");var F,j,Z=0;if(L.length===2)Z=k.LUMINANCE,L=[L[0],L[1],1],D=o(D.data,L,[D.stride[0],D.stride[1],1],D.offset);else{if(L.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(L[2]===1)Z=k.ALPHA;else if(L[2]===2)Z=k.LUMINANCE_ALPHA;else if(L[2]===3)Z=k.RGB;else{if(L[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");Z=k.RGBA}}V!==k.FLOAT||k.getExtension("OES_texture_float")||(V=k.UNSIGNED_BYTE,N=!1);var z=D.size;if(N)F=D.offset===0&&D.data.length===z?D.data:D.data.subarray(D.offset,D.offset+z);else{var H=[L[2],L[2]*L[0],1];j=i.malloc(z,P);var U=o(j,L,H,0);P!=="float32"&&P!=="float64"||V!==k.UNSIGNED_BYTE?r.assign(U,D):c(U,D),F=j.subarray(0,z)}var re=b(k);return k.texImage2D(k.TEXTURE_2D,0,Z,L[0],L[1],0,Z,V,F),N||i.free(j),new p(k,re,L[0],L[1],Z,V)}(M,h)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var a=null,u=null,l=null;function d(M){return typeof HTMLCanvasElement<"u"&&M instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&M instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&M instanceof HTMLVideoElement||typeof ImageData<"u"&&M instanceof ImageData}var c=function(M,h){r.muls(M,h,255)};function _(M,h,E){var k=M.gl,D=k.getParameter(k.MAX_TEXTURE_SIZE);if(h<0||h>D||E<0||E>D)throw new Error("gl-texture2d: Invalid texture size");return M._shape=[h,E],M.bind(),k.texImage2D(k.TEXTURE_2D,0,M.format,h,E,0,M.format,M.type,null),M._mipLevels=[0],M}function p(M,h,E,k,D,P){this.gl=M,this.handle=h,this.format=D,this.type=P,this._shape=[E,k],this._mipLevels=[0],this._magFilter=M.NEAREST,this._minFilter=M.NEAREST,this._wrapS=M.CLAMP_TO_EDGE,this._wrapT=M.CLAMP_TO_EDGE,this._anisoSamples=1;var L=this,O=[this._wrapS,this._wrapT];Object.defineProperties(O,[{get:function(){return L._wrapS},set:function(V){return L.wrapS=V}},{get:function(){return L._wrapT},set:function(V){return L.wrapT=V}}]),this._wrapVector=O;var N=[this._shape[0],this._shape[1]];Object.defineProperties(N,[{get:function(){return L._shape[0]},set:function(V){return L.width=V}},{get:function(){return L._shape[1]},set:function(V){return L.height=V}}]),this._shapeVector=N}var g=p.prototype;function m(M,h){return M.length===3?h[2]===1&&h[1]===M[0]*M[2]&&h[0]===M[2]:h[0]===1&&h[1]===M[0]}function b(M){var h=M.createTexture();return M.bindTexture(M.TEXTURE_2D,h),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MIN_FILTER,M.NEAREST),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MAG_FILTER,M.NEAREST),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_S,M.CLAMP_TO_EDGE),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_T,M.CLAMP_TO_EDGE),h}function y(M,h,E,k,D){var P=M.getParameter(M.MAX_TEXTURE_SIZE);if(h<0||h>P||E<0||E>P)throw new Error("gl-texture2d: Invalid texture shape");if(D===M.FLOAT&&!M.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var L=b(M);return M.texImage2D(M.TEXTURE_2D,0,k,h,E,0,k,D,null),new p(M,L,h,E,k,D)}Object.defineProperties(g,{minFilter:{get:function(){return this._minFilter},set:function(M){this.bind();var h=this.gl;if(this.type===h.FLOAT&&a.indexOf(M)>=0&&(h.getExtension("OES_texture_float_linear")||(M=h.NEAREST)),u.indexOf(M)<0)throw new Error("gl-texture2d: Unknown filter mode "+M);return h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,M),this._minFilter=M}},magFilter:{get:function(){return this._magFilter},set:function(M){this.bind();var h=this.gl;if(this.type===h.FLOAT&&a.indexOf(M)>=0&&(h.getExtension("OES_texture_float_linear")||(M=h.NEAREST)),u.indexOf(M)<0)throw new Error("gl-texture2d: Unknown filter mode "+M);return h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,M),this._magFilter=M}},mipSamples:{get:function(){return this._anisoSamples},set:function(M){var h=this._anisoSamples;if(this._anisoSamples=0|Math.max(M,1),h!==this._anisoSamples){var E=this.gl.getExtension("EXT_texture_filter_anisotropic");E&&this.gl.texParameterf(this.gl.TEXTURE_2D,E.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(M){if(this.bind(),l.indexOf(M)<0)throw new Error("gl-texture2d: Unknown wrap mode "+M);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,M),this._wrapS=M}},wrapT:{get:function(){return this._wrapT},set:function(M){if(this.bind(),l.indexOf(M)<0)throw new Error("gl-texture2d: Unknown wrap mode "+M);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,M),this._wrapT=M}},wrap:{get:function(){return this._wrapVector},set:function(M){if(Array.isArray(M)||(M=[M,M]),M.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var h=0;h<2;++h)if(l.indexOf(M[h])<0)throw new Error("gl-texture2d: Unknown wrap mode "+M);this._wrapS=M[0],this._wrapT=M[1];var E=this.gl;return this.bind(),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,this._wrapS),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,this._wrapT),M}},shape:{get:function(){return this._shapeVector},set:function(M){if(Array.isArray(M)){if(M.length!==2)throw new Error("gl-texture2d: Invalid texture shape")}else M=[0|M,0|M];return _(this,0|M[0],0|M[1]),[0|M[0],0|M[1]]}},width:{get:function(){return this._shape[0]},set:function(M){return _(this,M|=0,this._shape[1]),M}},height:{get:function(){return this._shape[1]},set:function(M){return M|=0,_(this,this._shape[0],M),M}}}),g.bind=function(M){var h=this.gl;return M!==void 0&&h.activeTexture(h.TEXTURE0+(0|M)),h.bindTexture(h.TEXTURE_2D,this.handle),M!==void 0?0|M:h.getParameter(h.ACTIVE_TEXTURE)-h.TEXTURE0},g.dispose=function(){this.gl.deleteTexture(this.handle)},g.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var M=Math.min(this._shape[0],this._shape[1]),h=0;M>0;++h,M>>>=1)this._mipLevels.indexOf(h)<0&&this._mipLevels.push(h)},g.setPixels=function(M,h,E,k){var D=this.gl;this.bind(),Array.isArray(h)?(k=E,E=0|h[1],h=0|h[0]):(h=h||0,E=E||0),k=k||0;var P=d(M)?M:M.raw;if(P)this._mipLevels.indexOf(k)<0?(D.texImage2D(D.TEXTURE_2D,0,this.format,this.format,this.type,P),this._mipLevels.push(k)):D.texSubImage2D(D.TEXTURE_2D,k,h,E,this.format,this.type,P);else{if(!(M.shape&&M.stride&&M.data))throw new Error("gl-texture2d: Unsupported data type");if(M.shape.length<2||h+M.shape[1]>this._shape[1]>>>k||E+M.shape[0]>this._shape[0]>>>k||h<0||E<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");(function(L,O,N,V,F,j,Z,z){var H=z.dtype,U=z.shape.slice();if(U.length<2||U.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var re=0,ee=0,J=m(U,z.stride.slice());if(H==="float32"?re=L.FLOAT:H==="float64"?(re=L.FLOAT,J=!1,H="float32"):H==="uint8"?re=L.UNSIGNED_BYTE:(re=L.UNSIGNED_BYTE,J=!1,H="uint8"),U.length===2)ee=L.LUMINANCE,U=[U[0],U[1],1],z=o(z.data,U,[z.stride[0],z.stride[1],1],z.offset);else{if(U.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(U[2]===1)ee=L.ALPHA;else if(U[2]===2)ee=L.LUMINANCE_ALPHA;else if(U[2]===3)ee=L.RGB;else{if(U[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");ee=L.RGBA}U[2]}if(ee!==L.LUMINANCE&&ee!==L.ALPHA||F!==L.LUMINANCE&&F!==L.ALPHA||(ee=F),ee!==F)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var Q=z.size,ne=Z.indexOf(V)<0;if(ne&&Z.push(V),re===j&&J)z.offset===0&&z.data.length===Q?ne?L.texImage2D(L.TEXTURE_2D,V,F,U[0],U[1],0,F,j,z.data):L.texSubImage2D(L.TEXTURE_2D,V,O,N,U[0],U[1],F,j,z.data):ne?L.texImage2D(L.TEXTURE_2D,V,F,U[0],U[1],0,F,j,z.data.subarray(z.offset,z.offset+Q)):L.texSubImage2D(L.TEXTURE_2D,V,O,N,U[0],U[1],F,j,z.data.subarray(z.offset,z.offset+Q));else{var K;K=j===L.FLOAT?i.mallocFloat32(Q):i.mallocUint8(Q);var oe=o(K,U,[U[2],U[2]*U[0],1]);re===L.FLOAT&&j===L.UNSIGNED_BYTE?c(oe,z):r.assign(oe,z),ne?L.texImage2D(L.TEXTURE_2D,V,F,U[0],U[1],0,F,j,K.subarray(0,Q)):L.texSubImage2D(L.TEXTURE_2D,V,O,N,U[0],U[1],F,j,K.subarray(0,Q)),j===L.FLOAT?i.freeFloat32(K):i.freeUint8(K)}})(D,h,E,k,this.format,this.type,this._mipLevels,M)}}},1433:function(f){"use strict";f.exports=function(s,t,o){t?t.bind():s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,null);var r=0|s.getParameter(s.MAX_VERTEX_ATTRIBS);if(o){if(o.length>r)throw new Error("gl-vao: Too many vertex attributes");for(var i=0;i<o.length;++i){var a=o[i];if(a.buffer){var u=a.buffer,l=a.size||4,d=a.type||s.FLOAT,c=!!a.normalized,_=a.stride||0,p=a.offset||0;u.bind(),s.enableVertexAttribArray(i),s.vertexAttribPointer(i,l,d,c,_,p)}else{if(typeof a=="number")s.vertexAttrib1f(i,a);else if(a.length===1)s.vertexAttrib1f(i,a[0]);else if(a.length===2)s.vertexAttrib2f(i,a[0],a[1]);else if(a.length===3)s.vertexAttrib3f(i,a[0],a[1],a[2]);else{if(a.length!==4)throw new Error("gl-vao: Invalid vertex attribute");s.vertexAttrib4f(i,a[0],a[1],a[2],a[3])}s.disableVertexAttribArray(i)}}for(;i<r;++i)s.disableVertexAttribArray(i)}else for(s.bindBuffer(s.ARRAY_BUFFER,null),i=0;i<r;++i)s.disableVertexAttribArray(i)}},870:function(f,s,t){"use strict";var o=t(1433);function r(i){this.gl=i,this._elements=null,this._attributes=null,this._elementsType=i.UNSIGNED_SHORT}r.prototype.bind=function(){o(this.gl,this._elements,this._attributes)},r.prototype.update=function(i,a,u){this._elements=a,this._attributes=i,this._elementsType=u||this.gl.UNSIGNED_SHORT},r.prototype.dispose=function(){},r.prototype.unbind=function(){},r.prototype.draw=function(i,a,u){u=u||0;var l=this.gl;this._elements?l.drawElements(i,a,this._elementsType,u):l.drawArrays(i,u,a)},f.exports=function(i){return new r(i)}},7518:function(f,s,t){"use strict";var o=t(1433);function r(a,u,l,d,c,_){this.location=a,this.dimension=u,this.a=l,this.b=d,this.c=c,this.d=_}function i(a,u,l){this.gl=a,this._ext=u,this.handle=l,this._attribs=[],this._useElements=!1,this._elementsType=a.UNSIGNED_SHORT}r.prototype.bind=function(a){switch(this.dimension){case 1:a.vertexAttrib1f(this.location,this.a);break;case 2:a.vertexAttrib2f(this.location,this.a,this.b);break;case 3:a.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:a.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},i.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var a=0;a<this._attribs.length;++a)this._attribs[a].bind(this.gl)},i.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},i.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},i.prototype.update=function(a,u,l){if(this.bind(),o(this.gl,u,a),this.unbind(),this._attribs.length=0,a)for(var d=0;d<a.length;++d){var c=a[d];typeof c=="number"?this._attribs.push(new r(d,1,c)):Array.isArray(c)&&this._attribs.push(new r(d,c.length,c[0],c[1],c[2],c[3]))}this._useElements=!!u,this._elementsType=l||this.gl.UNSIGNED_SHORT},i.prototype.draw=function(a,u,l){l=l||0;var d=this.gl;this._useElements?d.drawElements(a,u,this._elementsType,l):d.drawArrays(a,l,u)},f.exports=function(a,u){return new i(a,u,u.createVertexArrayOES())}},8116:function(f,s,t){"use strict";var o=t(7518),r=t(870);function i(a){this.bindVertexArrayOES=a.bindVertexArray.bind(a),this.createVertexArrayOES=a.createVertexArray.bind(a),this.deleteVertexArrayOES=a.deleteVertexArray.bind(a)}f.exports=function(a,u,l,d){var c,_=a.createVertexArray?new i(a):a.getExtension("OES_vertex_array_object");return(c=_?o(a,_):r(a)).update(u,l,d),c}},5632:function(f){f.exports=function(s,t,o){return s[0]=t[0]+o[0],s[1]=t[1]+o[1],s[2]=t[2]+o[2],s}},8192:function(f,s,t){f.exports=function(a,u){var l=o(a[0],a[1],a[2]),d=o(u[0],u[1],u[2]);r(l,l),r(d,d);var c=i(l,d);return c>1?0:Math.acos(c)};var o=t(2825),r=t(3536),i=t(244)},9226:function(f){f.exports=function(s,t){return s[0]=Math.ceil(t[0]),s[1]=Math.ceil(t[1]),s[2]=Math.ceil(t[2]),s}},3126:function(f){f.exports=function(s){var t=new Float32Array(3);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t}},3990:function(f){f.exports=function(s,t){return s[0]=t[0],s[1]=t[1],s[2]=t[2],s}},1091:function(f){f.exports=function(){var s=new Float32Array(3);return s[0]=0,s[1]=0,s[2]=0,s}},5911:function(f){f.exports=function(s,t,o){var r=t[0],i=t[1],a=t[2],u=o[0],l=o[1],d=o[2];return s[0]=i*d-a*l,s[1]=a*u-r*d,s[2]=r*l-i*u,s}},5455:function(f,s,t){f.exports=t(7056)},7056:function(f){f.exports=function(s,t){var o=t[0]-s[0],r=t[1]-s[1],i=t[2]-s[2];return Math.sqrt(o*o+r*r+i*i)}},4008:function(f,s,t){f.exports=t(6690)},6690:function(f){f.exports=function(s,t,o){return s[0]=t[0]/o[0],s[1]=t[1]/o[1],s[2]=t[2]/o[2],s}},244:function(f){f.exports=function(s,t){return s[0]*t[0]+s[1]*t[1]+s[2]*t[2]}},2613:function(f){f.exports=1e-6},9922:function(f,s,t){f.exports=function(r,i){var a=r[0],u=r[1],l=r[2],d=i[0],c=i[1],_=i[2];return Math.abs(a-d)<=o*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(u-c)<=o*Math.max(1,Math.abs(u),Math.abs(c))&&Math.abs(l-_)<=o*Math.max(1,Math.abs(l),Math.abs(_))};var o=t(2613)},9265:function(f){f.exports=function(s,t){return s[0]===t[0]&&s[1]===t[1]&&s[2]===t[2]}},2681:function(f){f.exports=function(s,t){return s[0]=Math.floor(t[0]),s[1]=Math.floor(t[1]),s[2]=Math.floor(t[2]),s}},5137:function(f,s,t){f.exports=function(r,i,a,u,l,d){var c,_;for(i||(i=3),a||(a=0),_=u?Math.min(u*i+a,r.length):r.length,c=a;c<_;c+=i)o[0]=r[c],o[1]=r[c+1],o[2]=r[c+2],l(o,o,d),r[c]=o[0],r[c+1]=o[1],r[c+2]=o[2];return r};var o=t(1091)()},2825:function(f){f.exports=function(s,t,o){var r=new Float32Array(3);return r[0]=s,r[1]=t,r[2]=o,r}},2931:function(f,s,t){f.exports={EPSILON:t(2613),create:t(1091),clone:t(3126),angle:t(8192),fromValues:t(2825),copy:t(3990),set:t(1463),equals:t(9922),exactEquals:t(9265),add:t(5632),subtract:t(6843),sub:t(2229),multiply:t(5847),mul:t(4505),divide:t(6690),div:t(4008),min:t(8107),max:t(7417),floor:t(2681),ceil:t(9226),round:t(2447),scale:t(6621),scaleAndAdd:t(8489),distance:t(7056),dist:t(5455),squaredDistance:t(2953),sqrDist:t(6141),length:t(1387),len:t(868),squaredLength:t(3066),sqrLen:t(5486),negate:t(5093),inverse:t(811),normalize:t(3536),dot:t(244),cross:t(5911),lerp:t(6658),random:t(7636),transformMat4:t(5673),transformMat3:t(492),transformQuat:t(264),rotateX:t(6894),rotateY:t(109),rotateZ:t(8692),forEach:t(5137)}},811:function(f){f.exports=function(s,t){return s[0]=1/t[0],s[1]=1/t[1],s[2]=1/t[2],s}},868:function(f,s,t){f.exports=t(1387)},1387:function(f){f.exports=function(s){var t=s[0],o=s[1],r=s[2];return Math.sqrt(t*t+o*o+r*r)}},6658:function(f){f.exports=function(s,t,o,r){var i=t[0],a=t[1],u=t[2];return s[0]=i+r*(o[0]-i),s[1]=a+r*(o[1]-a),s[2]=u+r*(o[2]-u),s}},7417:function(f){f.exports=function(s,t,o){return s[0]=Math.max(t[0],o[0]),s[1]=Math.max(t[1],o[1]),s[2]=Math.max(t[2],o[2]),s}},8107:function(f){f.exports=function(s,t,o){return s[0]=Math.min(t[0],o[0]),s[1]=Math.min(t[1],o[1]),s[2]=Math.min(t[2],o[2]),s}},4505:function(f,s,t){f.exports=t(5847)},5847:function(f){f.exports=function(s,t,o){return s[0]=t[0]*o[0],s[1]=t[1]*o[1],s[2]=t[2]*o[2],s}},5093:function(f){f.exports=function(s,t){return s[0]=-t[0],s[1]=-t[1],s[2]=-t[2],s}},3536:function(f){f.exports=function(s,t){var o=t[0],r=t[1],i=t[2],a=o*o+r*r+i*i;return a>0&&(a=1/Math.sqrt(a),s[0]=t[0]*a,s[1]=t[1]*a,s[2]=t[2]*a),s}},7636:function(f){f.exports=function(s,t){t=t||1;var o=2*Math.random()*Math.PI,r=2*Math.random()-1,i=Math.sqrt(1-r*r)*t;return s[0]=Math.cos(o)*i,s[1]=Math.sin(o)*i,s[2]=r*t,s}},6894:function(f){f.exports=function(s,t,o,r){var i=o[1],a=o[2],u=t[1]-i,l=t[2]-a,d=Math.sin(r),c=Math.cos(r);return s[0]=t[0],s[1]=i+u*c-l*d,s[2]=a+u*d+l*c,s}},109:function(f){f.exports=function(s,t,o,r){var i=o[0],a=o[2],u=t[0]-i,l=t[2]-a,d=Math.sin(r),c=Math.cos(r);return s[0]=i+l*d+u*c,s[1]=t[1],s[2]=a+l*c-u*d,s}},8692:function(f){f.exports=function(s,t,o,r){var i=o[0],a=o[1],u=t[0]-i,l=t[1]-a,d=Math.sin(r),c=Math.cos(r);return s[0]=i+u*c-l*d,s[1]=a+u*d+l*c,s[2]=t[2],s}},2447:function(f){f.exports=function(s,t){return s[0]=Math.round(t[0]),s[1]=Math.round(t[1]),s[2]=Math.round(t[2]),s}},6621:function(f){f.exports=function(s,t,o){return s[0]=t[0]*o,s[1]=t[1]*o,s[2]=t[2]*o,s}},8489:function(f){f.exports=function(s,t,o,r){return s[0]=t[0]+o[0]*r,s[1]=t[1]+o[1]*r,s[2]=t[2]+o[2]*r,s}},1463:function(f){f.exports=function(s,t,o,r){return s[0]=t,s[1]=o,s[2]=r,s}},6141:function(f,s,t){f.exports=t(2953)},5486:function(f,s,t){f.exports=t(3066)},2953:function(f){f.exports=function(s,t){var o=t[0]-s[0],r=t[1]-s[1],i=t[2]-s[2];return o*o+r*r+i*i}},3066:function(f){f.exports=function(s){var t=s[0],o=s[1],r=s[2];return t*t+o*o+r*r}},2229:function(f,s,t){f.exports=t(6843)},6843:function(f){f.exports=function(s,t,o){return s[0]=t[0]-o[0],s[1]=t[1]-o[1],s[2]=t[2]-o[2],s}},492:function(f){f.exports=function(s,t,o){var r=t[0],i=t[1],a=t[2];return s[0]=r*o[0]+i*o[3]+a*o[6],s[1]=r*o[1]+i*o[4]+a*o[7],s[2]=r*o[2]+i*o[5]+a*o[8],s}},5673:function(f){f.exports=function(s,t,o){var r=t[0],i=t[1],a=t[2],u=o[3]*r+o[7]*i+o[11]*a+o[15];return u=u||1,s[0]=(o[0]*r+o[4]*i+o[8]*a+o[12])/u,s[1]=(o[1]*r+o[5]*i+o[9]*a+o[13])/u,s[2]=(o[2]*r+o[6]*i+o[10]*a+o[14])/u,s}},264:function(f){f.exports=function(s,t,o){var r=t[0],i=t[1],a=t[2],u=o[0],l=o[1],d=o[2],c=o[3],_=c*r+l*a-d*i,p=c*i+d*r-u*a,g=c*a+u*i-l*r,m=-u*r-l*i-d*a;return s[0]=_*c+m*-u+p*-d-g*-l,s[1]=p*c+m*-l+g*-u-_*-d,s[2]=g*c+m*-d+_*-l-p*-u,s}},4361:function(f){f.exports=function(s,t,o){return s[0]=t[0]+o[0],s[1]=t[1]+o[1],s[2]=t[2]+o[2],s[3]=t[3]+o[3],s}},2335:function(f){f.exports=function(s){var t=new Float32Array(4);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t}},2933:function(f){f.exports=function(s,t){return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s}},7536:function(f){f.exports=function(){var s=new Float32Array(4);return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s}},4691:function(f){f.exports=function(s,t){var o=t[0]-s[0],r=t[1]-s[1],i=t[2]-s[2],a=t[3]-s[3];return Math.sqrt(o*o+r*r+i*i+a*a)}},1373:function(f){f.exports=function(s,t,o){return s[0]=t[0]/o[0],s[1]=t[1]/o[1],s[2]=t[2]/o[2],s[3]=t[3]/o[3],s}},3750:function(f){f.exports=function(s,t){return s[0]*t[0]+s[1]*t[1]+s[2]*t[2]+s[3]*t[3]}},3390:function(f){f.exports=function(s,t,o,r){var i=new Float32Array(4);return i[0]=s,i[1]=t,i[2]=o,i[3]=r,i}},9970:function(f,s,t){f.exports={create:t(7536),clone:t(2335),fromValues:t(3390),copy:t(2933),set:t(4578),add:t(4361),subtract:t(6860),multiply:t(3576),divide:t(1373),min:t(2334),max:t(160),scale:t(9288),scaleAndAdd:t(4844),distance:t(4691),squaredDistance:t(7960),length:t(6808),squaredLength:t(483),negate:t(1498),inverse:t(4494),normalize:t(5177),dot:t(3750),lerp:t(2573),random:t(9131),transformMat4:t(5352),transformQuat:t(4041)}},4494:function(f){f.exports=function(s,t){return s[0]=1/t[0],s[1]=1/t[1],s[2]=1/t[2],s[3]=1/t[3],s}},6808:function(f){f.exports=function(s){var t=s[0],o=s[1],r=s[2],i=s[3];return Math.sqrt(t*t+o*o+r*r+i*i)}},2573:function(f){f.exports=function(s,t,o,r){var i=t[0],a=t[1],u=t[2],l=t[3];return s[0]=i+r*(o[0]-i),s[1]=a+r*(o[1]-a),s[2]=u+r*(o[2]-u),s[3]=l+r*(o[3]-l),s}},160:function(f){f.exports=function(s,t,o){return s[0]=Math.max(t[0],o[0]),s[1]=Math.max(t[1],o[1]),s[2]=Math.max(t[2],o[2]),s[3]=Math.max(t[3],o[3]),s}},2334:function(f){f.exports=function(s,t,o){return s[0]=Math.min(t[0],o[0]),s[1]=Math.min(t[1],o[1]),s[2]=Math.min(t[2],o[2]),s[3]=Math.min(t[3],o[3]),s}},3576:function(f){f.exports=function(s,t,o){return s[0]=t[0]*o[0],s[1]=t[1]*o[1],s[2]=t[2]*o[2],s[3]=t[3]*o[3],s}},1498:function(f){f.exports=function(s,t){return s[0]=-t[0],s[1]=-t[1],s[2]=-t[2],s[3]=-t[3],s}},5177:function(f){f.exports=function(s,t){var o=t[0],r=t[1],i=t[2],a=t[3],u=o*o+r*r+i*i+a*a;return u>0&&(u=1/Math.sqrt(u),s[0]=o*u,s[1]=r*u,s[2]=i*u,s[3]=a*u),s}},9131:function(f,s,t){var o=t(5177),r=t(9288);f.exports=function(i,a){return a=a||1,i[0]=Math.random(),i[1]=Math.random(),i[2]=Math.random(),i[3]=Math.random(),o(i,i),r(i,i,a),i}},9288:function(f){f.exports=function(s,t,o){return s[0]=t[0]*o,s[1]=t[1]*o,s[2]=t[2]*o,s[3]=t[3]*o,s}},4844:function(f){f.exports=function(s,t,o,r){return s[0]=t[0]+o[0]*r,s[1]=t[1]+o[1]*r,s[2]=t[2]+o[2]*r,s[3]=t[3]+o[3]*r,s}},4578:function(f){f.exports=function(s,t,o,r,i){return s[0]=t,s[1]=o,s[2]=r,s[3]=i,s}},7960:function(f){f.exports=function(s,t){var o=t[0]-s[0],r=t[1]-s[1],i=t[2]-s[2],a=t[3]-s[3];return o*o+r*r+i*i+a*a}},483:function(f){f.exports=function(s){var t=s[0],o=s[1],r=s[2],i=s[3];return t*t+o*o+r*r+i*i}},6860:function(f){f.exports=function(s,t,o){return s[0]=t[0]-o[0],s[1]=t[1]-o[1],s[2]=t[2]-o[2],s[3]=t[3]-o[3],s}},5352:function(f){f.exports=function(s,t,o){var r=t[0],i=t[1],a=t[2],u=t[3];return s[0]=o[0]*r+o[4]*i+o[8]*a+o[12]*u,s[1]=o[1]*r+o[5]*i+o[9]*a+o[13]*u,s[2]=o[2]*r+o[6]*i+o[10]*a+o[14]*u,s[3]=o[3]*r+o[7]*i+o[11]*a+o[15]*u,s}},4041:function(f){f.exports=function(s,t,o){var r=t[0],i=t[1],a=t[2],u=o[0],l=o[1],d=o[2],c=o[3],_=c*r+l*a-d*i,p=c*i+d*r-u*a,g=c*a+u*i-l*r,m=-u*r-l*i-d*a;return s[0]=_*c+m*-u+p*-d-g*-l,s[1]=p*c+m*-l+g*-u-_*-d,s[2]=g*c+m*-d+_*-l-p*-u,s[3]=t[3],s}},1848:function(f,s,t){var o=t(4905),r=t(6468);f.exports=function(i){for(var a=Array.isArray(i)?i:o(i),u=0;u<a.length;u++){var l=a[u];if(l.type==="preprocessor"){var d=l.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(d&&d[2]){var c=d[1],_=d[2];return(c?r(_):_).trim()}}}}},5874:function(f,s,t){f.exports=function(L){var O,N,V,F=0,j=0,Z=l,z=[],H=[],U=1,re=0,ee=0,J=!1,Q=!1,ne="",K=i,oe=o;(L=L||{}).version==="300 es"&&(K=u,oe=a);var le={},se={};for(F=0;F<K.length;F++)le[K[F]]=!0;for(F=0;F<oe.length;F++)se[oe[F]]=!0;return function(pe){return H=[],pe!==null?function(De){var ke;for(F=0,De.toString&&(De=De.toString()),ne+=De.replace(/\r\n/g,`
`),V=ne.length;O=ne[F],F<V;){switch(ke=F,Z){case c:F=ve();break;case _:case p:F=xe();break;case g:F=ye();break;case m:F=Ae();break;case D:F=Me();break;case b:F=ce();break;case d:F=ae();break;case E:F=_e();break;case l:F=be()}ke!==F&&(ne[ke]===`
`?(re=0,++U):++re)}return j+=F,ne=ne.slice(F),H}(pe):(z.length&&de(z.join("")),Z=k,de("(eof)"),H)};function de(pe){pe.length&&H.push({type:P[Z],data:pe,position:ee,line:U,column:re})}function be(){return z=z.length?[]:z,N==="/"&&O==="*"?(ee=j+F-1,Z=c,N=O,F+1):N==="/"&&O==="/"?(ee=j+F-1,Z=_,N=O,F+1):O==="#"?(Z=p,ee=j+F,F):/\s/.test(O)?(Z=E,ee=j+F,F):(J=/\d/.test(O),Q=/[^\w_]/.test(O),ee=j+F,Z=J?m:Q?g:d,F)}function _e(){return/[^\s]/g.test(O)?(de(z.join("")),Z=l,F):(z.push(O),N=O,F+1)}function xe(){return O!=="\r"&&O!==`
`||N==="\\"?(z.push(O),N=O,F+1):(de(z.join("")),Z=l,F)}function ve(){return O==="/"&&N==="*"?(z.push(O),de(z.join("")),Z=l,F+1):(z.push(O),N=O,F+1)}function ye(){if(N==="."&&/\d/.test(O))return Z=b,F;if(N==="/"&&O==="*")return Z=c,F;if(N==="/"&&O==="/")return Z=_,F;if(O==="."&&z.length){for(;me(z););return Z=b,F}if(O===";"||O===")"||O==="("){if(z.length)for(;me(z););return de(O),Z=l,F+1}var pe=z.length===2&&O!=="=";if(/[\w_\d\s]/.test(O)||pe){for(;me(z););return Z=l,F}return z.push(O),N=O,F+1}function me(pe){for(var De,ke,Ee=0;;){if(De=r.indexOf(pe.slice(0,pe.length+Ee).join("")),ke=r[De],De===-1){if(Ee--+pe.length>0)continue;ke=pe.slice(0,1).join("")}return de(ke),ee+=ke.length,(z=z.slice(ke.length)).length}}function Me(){return/[^a-fA-F0-9]/.test(O)?(de(z.join("")),Z=l,F):(z.push(O),N=O,F+1)}function Ae(){return O==="."||/[eE]/.test(O)?(z.push(O),Z=b,N=O,F+1):O==="x"&&z.length===1&&z[0]==="0"?(Z=D,z.push(O),N=O,F+1):/[^\d]/.test(O)?(de(z.join("")),Z=l,F):(z.push(O),N=O,F+1)}function ce(){return O==="f"&&(z.push(O),N=O,F+=1),/[eE]/.test(O)?(z.push(O),N=O,F+1):(O!=="-"&&O!=="+"||!/[eE]/.test(N))&&/[^\d]/.test(O)?(de(z.join("")),Z=l,F):(z.push(O),N=O,F+1)}function ae(){if(/[^\d\w_]/.test(O)){var pe=z.join("");return Z=se[pe]?h:le[pe]?M:y,de(z.join("")),Z=l,F}return z.push(O),N=O,F+1}};var o=t(620),r=t(7827),i=t(6852),a=t(7932),u=t(3508),l=999,d=9999,c=0,_=1,p=2,g=3,m=4,b=5,y=6,M=7,h=8,E=9,k=10,D=11,P=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},3508:function(f,s,t){var o=t(6852);o=o.slice().filter(function(r){return!/^(gl\_|texture)/.test(r)}),f.exports=o.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},6852:function(f){f.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},7932:function(f,s,t){var o=t(620);f.exports=o.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},620:function(f){f.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},7827:function(f){f.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},4905:function(f,s,t){var o=t(5874);f.exports=function(r,i){var a=o(i),u=[];return(u=u.concat(a(r))).concat(a(null))}},3236:function(f){f.exports=function(s){typeof s=="string"&&(s=[s]);for(var t=[].slice.call(arguments,1),o=[],r=0;r<s.length-1;r++)o.push(s[r],t[r]||"");return o.push(s[r]),o.join("")}},7520:function(f,s,t){"use strict";var o=t(9507);f.exports=o&&function(){var r=!1;try{var i=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("test",null,i),window.removeEventListener("test",null,i)}catch{r=!1}return r}()},3778:function(f,s){s.read=function(t,o,r,i,a){var u,l,d=8*a-i-1,c=(1<<d)-1,_=c>>1,p=-7,g=r?a-1:0,m=r?-1:1,b=t[o+g];for(g+=m,u=b&(1<<-p)-1,b>>=-p,p+=d;p>0;u=256*u+t[o+g],g+=m,p-=8);for(l=u&(1<<-p)-1,u>>=-p,p+=i;p>0;l=256*l+t[o+g],g+=m,p-=8);if(u===0)u=1-_;else{if(u===c)return l?NaN:1/0*(b?-1:1);l+=Math.pow(2,i),u-=_}return(b?-1:1)*l*Math.pow(2,u-i)},s.write=function(t,o,r,i,a,u){var l,d,c,_=8*u-a-1,p=(1<<_)-1,g=p>>1,m=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=i?0:u-1,y=i?1:-1,M=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(d=isNaN(o)?1:0,l=p):(l=Math.floor(Math.log(o)/Math.LN2),o*(c=Math.pow(2,-l))<1&&(l--,c*=2),(o+=l+g>=1?m/c:m*Math.pow(2,1-g))*c>=2&&(l++,c/=2),l+g>=p?(d=0,l=p):l+g>=1?(d=(o*c-1)*Math.pow(2,a),l+=g):(d=o*Math.pow(2,g-1)*Math.pow(2,a),l=0));a>=8;t[r+b]=255&d,b+=y,d/=256,a-=8);for(l=l<<a|d,_+=a;_>0;t[r+b]=255&l,b+=y,l/=256,_-=8);t[r+b-y]|=128*M}},8954:function(f,s,t){"use strict";f.exports=function(_,p){var g=_.length;if(g===0)throw new Error("Must have at least d+1 points");var m=_[0].length;if(g<=m)throw new Error("Must input at least d+1 points");var b=_.slice(0,m+1),y=o.apply(void 0,b);if(y===0)throw new Error("Input not in general position");for(var M=new Array(m+1),h=0;h<=m;++h)M[h]=h;y<0&&(M[0]=1,M[1]=0);var E=new i(M,new Array(m+1),!1),k=E.adjacent,D=new Array(m+2);for(h=0;h<=m;++h){for(var P=M.slice(),L=0;L<=m;++L)L===h&&(P[L]=-1);var O=P[0];P[0]=P[1],P[1]=O;var N=new i(P,new Array(m+1),!0);k[h]=N,D[h]=N}for(D[m+1]=E,h=0;h<=m;++h){P=k[h].vertices;var V=k[h].adjacent;for(L=0;L<=m;++L){var F=P[L];if(F<0)V[L]=E;else for(var j=0;j<=m;++j)k[j].vertices.indexOf(F)<0&&(V[L]=k[j])}}var Z=new d(m,b,D),z=!!p;for(h=m+1;h<g;++h)Z.insert(_[h],z);return Z.boundary()};var o=t(3250),r=t(6803).Fw;function i(_,p,g){this.vertices=_,this.adjacent=p,this.boundary=g,this.lastVisited=-1}function a(_,p,g){this.vertices=_,this.cell=p,this.index=g}function u(_,p){return r(_.vertices,p.vertices)}i.prototype.flip=function(){var _=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=_;var p=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=p};var l=[];function d(_,p,g){this.dimension=_,this.vertices=p,this.simplices=g,this.interior=g.filter(function(M){return!M.boundary}),this.tuple=new Array(_+1);for(var m=0;m<=_;++m)this.tuple[m]=this.vertices[m];var b,y=l[_];y||(y=l[_]=((b=o[_+1])||(b=o),function(M){return function(){var h=this.tuple;return M.apply(this,h)}}(b))),this.orient=y}var c=d.prototype;c.handleBoundaryDegeneracy=function(_,p){var g=this.dimension,m=this.vertices.length-1,b=this.tuple,y=this.vertices,M=[_];for(_.lastVisited=-m;M.length>0;)for(var h=(_=M.pop()).adjacent,E=0;E<=g;++E){var k=h[E];if(k.boundary&&!(k.lastVisited<=-m)){for(var D=k.vertices,P=0;P<=g;++P){var L=D[P];b[P]=L<0?p:y[L]}var O=this.orient();if(O>0)return k;k.lastVisited=-m,O===0&&M.push(k)}}return null},c.walk=function(_,p){var g=this.vertices.length-1,m=this.dimension,b=this.vertices,y=this.tuple,M=p?this.interior.length*Math.random()|0:this.interior.length-1,h=this.interior[M];e:for(;!h.boundary;){for(var E=h.vertices,k=h.adjacent,D=0;D<=m;++D)y[D]=b[E[D]];for(h.lastVisited=g,D=0;D<=m;++D){var P=k[D];if(!(P.lastVisited>=g)){var L=y[D];y[D]=_;var O=this.orient();if(y[D]=L,O<0){h=P;continue e}P.boundary?P.lastVisited=-g:P.lastVisited=g}}return}return h},c.addPeaks=function(_,p){var g=this.vertices.length-1,m=this.dimension,b=this.vertices,y=this.tuple,M=this.interior,h=this.simplices,E=[p];p.lastVisited=g,p.vertices[p.vertices.indexOf(-1)]=g,p.boundary=!1,M.push(p);for(var k=[];E.length>0;){var D=(p=E.pop()).vertices,P=p.adjacent,L=D.indexOf(g);if(!(L<0)){for(var O=0;O<=m;++O)if(O!==L){var N=P[O];if(N.boundary&&!(N.lastVisited>=g)){var V=N.vertices;if(N.lastVisited!==-g){for(var F=0,j=0;j<=m;++j)V[j]<0?(F=j,y[j]=_):y[j]=b[V[j]];if(this.orient()>0){V[F]=g,N.boundary=!1,M.push(N),E.push(N),N.lastVisited=g;continue}N.lastVisited=-g}var Z=N.adjacent,z=D.slice(),H=P.slice(),U=new i(z,H,!0);h.push(U);var re=Z.indexOf(p);if(!(re<0))for(Z[re]=U,H[L]=N,z[O]=-1,H[O]=p,P[O]=U,U.flip(),j=0;j<=m;++j){var ee=z[j];if(!(ee<0||ee===g)){for(var J=new Array(m-1),Q=0,ne=0;ne<=m;++ne){var K=z[ne];K<0||ne===j||(J[Q++]=K)}k.push(new a(J,U,j))}}}}}}for(k.sort(u),O=0;O+1<k.length;O+=2){var oe=k[O],le=k[O+1],se=oe.index,de=le.index;se<0||de<0||(oe.cell.adjacent[oe.index]=le.cell,le.cell.adjacent[le.index]=oe.cell)}},c.insert=function(_,p){var g=this.vertices;g.push(_);var m=this.walk(_,p);if(m){for(var b=this.dimension,y=this.tuple,M=0;M<=b;++M){var h=m.vertices[M];y[M]=h<0?_:g[h]}var E=this.orient(y);E<0||(E!==0||(m=this.handleBoundaryDegeneracy(m,_)))&&this.addPeaks(_,m)}},c.boundary=function(){for(var _=this.dimension,p=[],g=this.simplices,m=g.length,b=0;b<m;++b){var y=g[b];if(y.boundary){for(var M=new Array(_),h=y.vertices,E=0,k=0,D=0;D<=_;++D)h[D]>=0?M[E++]=h[D]:k=1&D;if(k===(1&_)){var P=M[0];M[0]=M[1],M[1]=P}p.push(M)}}return p}},3352:function(f,s,t){"use strict";var o=t(2478);function r(E,k,D,P,L){this.mid=E,this.left=k,this.right=D,this.leftPoints=P,this.rightPoints=L,this.count=(k?k.count:0)+(D?D.count:0)+P.length}f.exports=function(E){return E&&E.length!==0?new M(y(E)):new M(null)};var i=r.prototype;function a(E,k){E.mid=k.mid,E.left=k.left,E.right=k.right,E.leftPoints=k.leftPoints,E.rightPoints=k.rightPoints,E.count=k.count}function u(E,k){var D=y(k);E.mid=D.mid,E.left=D.left,E.right=D.right,E.leftPoints=D.leftPoints,E.rightPoints=D.rightPoints,E.count=D.count}function l(E,k){var D=E.intervals([]);D.push(k),u(E,D)}function d(E,k){var D=E.intervals([]),P=D.indexOf(k);return P<0?0:(D.splice(P,1),u(E,D),1)}function c(E,k,D){for(var P=0;P<E.length&&E[P][0]<=k;++P){var L=D(E[P]);if(L)return L}}function _(E,k,D){for(var P=E.length-1;P>=0&&E[P][1]>=k;--P){var L=D(E[P]);if(L)return L}}function p(E,k){for(var D=0;D<E.length;++D){var P=k(E[D]);if(P)return P}}function g(E,k){return E-k}function m(E,k){return E[0]-k[0]||E[1]-k[1]}function b(E,k){return E[1]-k[1]||E[0]-k[0]}function y(E){if(E.length===0)return null;for(var k=[],D=0;D<E.length;++D)k.push(E[D][0],E[D][1]);k.sort(g);var P=k[k.length>>1],L=[],O=[],N=[];for(D=0;D<E.length;++D){var V=E[D];V[1]<P?L.push(V):P<V[0]?O.push(V):N.push(V)}var F=N,j=N.slice();return F.sort(m),j.sort(b),new r(P,y(L),y(O),F,j)}function M(E){this.root=E}i.intervals=function(E){return E.push.apply(E,this.leftPoints),this.left&&this.left.intervals(E),this.right&&this.right.intervals(E),E},i.insert=function(E){var k=this.count-this.leftPoints.length;if(this.count+=1,E[1]<this.mid)this.left?4*(this.left.count+1)>3*(k+1)?l(this,E):this.left.insert(E):this.left=y([E]);else if(E[0]>this.mid)this.right?4*(this.right.count+1)>3*(k+1)?l(this,E):this.right.insert(E):this.right=y([E]);else{var D=o.ge(this.leftPoints,E,m),P=o.ge(this.rightPoints,E,b);this.leftPoints.splice(D,0,E),this.rightPoints.splice(P,0,E)}},i.remove=function(E){var k=this.count-this.leftPoints;if(E[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(k-1)?d(this,E):(O=this.left.remove(E))===2?(this.left=null,this.count-=1,1):(O===1&&(this.count-=1),O):0;if(E[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(k-1)?d(this,E):(O=this.right.remove(E))===2?(this.right=null,this.count-=1,1):(O===1&&(this.count-=1),O):0;if(this.count===1)return this.leftPoints[0]===E?2:0;if(this.leftPoints.length===1&&this.leftPoints[0]===E){if(this.left&&this.right){for(var D=this,P=this.left;P.right;)D=P,P=P.right;if(D===this)P.right=this.right;else{var L=this.left,O=this.right;D.count-=P.count,D.right=P.left,P.left=L,P.right=O}a(this,P),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?a(this,this.left):a(this,this.right);return 1}for(L=o.ge(this.leftPoints,E,m);L<this.leftPoints.length&&this.leftPoints[L][0]===E[0];++L)if(this.leftPoints[L]===E){for(this.count-=1,this.leftPoints.splice(L,1),O=o.ge(this.rightPoints,E,b);O<this.rightPoints.length&&this.rightPoints[O][1]===E[1];++O)if(this.rightPoints[O]===E)return this.rightPoints.splice(O,1),1}return 0},i.queryPoint=function(E,k){return E<this.mid?this.left&&(D=this.left.queryPoint(E,k))?D:c(this.leftPoints,E,k):E>this.mid?this.right&&(D=this.right.queryPoint(E,k))?D:_(this.rightPoints,E,k):p(this.leftPoints,k);var D},i.queryInterval=function(E,k,D){var P;return E<this.mid&&this.left&&(P=this.left.queryInterval(E,k,D))||k>this.mid&&this.right&&(P=this.right.queryInterval(E,k,D))?P:k<this.mid?c(this.leftPoints,k,D):E>this.mid?_(this.rightPoints,E,D):p(this.leftPoints,D)};var h=M.prototype;h.insert=function(E){this.root?this.root.insert(E):this.root=new r(E[0],null,null,[E],[E])},h.remove=function(E){if(this.root){var k=this.root.remove(E);return k===2&&(this.root=null),k!==0}return!1},h.queryPoint=function(E,k){if(this.root)return this.root.queryPoint(E,k)},h.queryInterval=function(E,k,D){if(E<=k&&this.root)return this.root.queryInterval(E,k,D)},Object.defineProperty(h,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(h,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},7762:function(f){"use strict";f.exports=function(s){for(var t=new Array(s),o=0;o<s;++o)t[o]=o;return t}},9507:function(f){f.exports=!0},7163:function(f){function s(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}f.exports=function(t){return t!=null&&(s(t)||function(o){return typeof o.readFloatLE=="function"&&typeof o.slice=="function"&&s(o.slice(0,0))}(t)||!!t._isBuffer)}},5219:function(f){"use strict";f.exports=function(s){for(var t,o=s.length,r=0;r<o;r++)if(((t=s.charCodeAt(r))<9||t>13)&&t!==32&&t!==133&&t!==160&&t!==5760&&t!==6158&&(t<8192||t>8205)&&t!==8232&&t!==8233&&t!==8239&&t!==8287&&t!==8288&&t!==12288&&t!==65279)return!1;return!0}},395:function(f){f.exports=function(s,t,o){return s*(1-o)+t*o}},2652:function(f,s,t){var o=t(4335),r=t(6864),i=t(1903),a=t(9921),u=t(7608),l=t(5665),d={length:t(1387),normalize:t(3536),dot:t(244),cross:t(5911)},c=r(),_=r(),p=[0,0,0,0],g=[[0,0,0],[0,0,0],[0,0,0]],m=[0,0,0];function b(y,M,h,E,k){y[0]=M[0]*E+h[0]*k,y[1]=M[1]*E+h[1]*k,y[2]=M[2]*E+h[2]*k}f.exports=function(y,M,h,E,k,D){if(M||(M=[0,0,0]),h||(h=[0,0,0]),E||(E=[0,0,0]),k||(k=[0,0,0,1]),D||(D=[0,0,0,1]),!o(c,y)||(i(_,c),_[3]=0,_[7]=0,_[11]=0,_[15]=1,Math.abs(a(_)<1e-8)))return!1;var P,L,O,N,V,F,j,Z=c[3],z=c[7],H=c[11],U=c[12],re=c[13],ee=c[14],J=c[15];if(Z!==0||z!==0||H!==0){if(p[0]=Z,p[1]=z,p[2]=H,p[3]=J,!u(_,_))return!1;l(_,_),P=k,O=_,N=(L=p)[0],V=L[1],F=L[2],j=L[3],P[0]=O[0]*N+O[4]*V+O[8]*F+O[12]*j,P[1]=O[1]*N+O[5]*V+O[9]*F+O[13]*j,P[2]=O[2]*N+O[6]*V+O[10]*F+O[14]*j,P[3]=O[3]*N+O[7]*V+O[11]*F+O[15]*j}else k[0]=k[1]=k[2]=0,k[3]=1;if(M[0]=U,M[1]=re,M[2]=ee,function(ne,K){ne[0][0]=K[0],ne[0][1]=K[1],ne[0][2]=K[2],ne[1][0]=K[4],ne[1][1]=K[5],ne[1][2]=K[6],ne[2][0]=K[8],ne[2][1]=K[9],ne[2][2]=K[10]}(g,c),h[0]=d.length(g[0]),d.normalize(g[0],g[0]),E[0]=d.dot(g[0],g[1]),b(g[1],g[1],g[0],1,-E[0]),h[1]=d.length(g[1]),d.normalize(g[1],g[1]),E[0]/=h[1],E[1]=d.dot(g[0],g[2]),b(g[2],g[2],g[0],1,-E[1]),E[2]=d.dot(g[1],g[2]),b(g[2],g[2],g[1],1,-E[2]),h[2]=d.length(g[2]),d.normalize(g[2],g[2]),E[1]/=h[2],E[2]/=h[2],d.cross(m,g[1],g[2]),d.dot(g[0],m)<0)for(var Q=0;Q<3;Q++)h[Q]*=-1,g[Q][0]*=-1,g[Q][1]*=-1,g[Q][2]*=-1;return D[0]=.5*Math.sqrt(Math.max(1+g[0][0]-g[1][1]-g[2][2],0)),D[1]=.5*Math.sqrt(Math.max(1-g[0][0]+g[1][1]-g[2][2],0)),D[2]=.5*Math.sqrt(Math.max(1-g[0][0]-g[1][1]+g[2][2],0)),D[3]=.5*Math.sqrt(Math.max(1+g[0][0]+g[1][1]+g[2][2],0)),g[2][1]>g[1][2]&&(D[0]=-D[0]),g[0][2]>g[2][0]&&(D[1]=-D[1]),g[1][0]>g[0][1]&&(D[2]=-D[2]),!0}},4335:function(f){f.exports=function(s,t){var o=t[15];if(o===0)return!1;for(var r=1/o,i=0;i<16;i++)s[i]=t[i]*r;return!0}},7442:function(f,s,t){var o=t(6658),r=t(7182),i=t(2652),a=t(9921),u=t(8648),l=_(),d=_(),c=_();function _(){return{translate:p(),scale:p(1),skew:p(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function p(g){return[g||0,g||0,g||0]}f.exports=function(g,m,b,y){if(a(m)===0||a(b)===0)return!1;var M=i(m,l.translate,l.scale,l.skew,l.perspective,l.quaternion),h=i(b,d.translate,d.scale,d.skew,d.perspective,d.quaternion);return!(!M||!h||(o(c.translate,l.translate,d.translate,y),o(c.skew,l.skew,d.skew,y),o(c.scale,l.scale,d.scale,y),o(c.perspective,l.perspective,d.perspective,y),u(c.quaternion,l.quaternion,d.quaternion,y),r(g,c.translate,c.scale,c.skew,c.perspective,c.quaternion),0))}},7182:function(f,s,t){var o={identity:t(7894),translate:t(7656),multiply:t(6760),create:t(6864),scale:t(2504),fromRotationTranslation:t(6743)},r=(o.create(),o.create());f.exports=function(i,a,u,l,d,c){return o.identity(i),o.fromRotationTranslation(i,c,a),i[3]=d[0],i[7]=d[1],i[11]=d[2],i[15]=d[3],o.identity(r),l[2]!==0&&(r[9]=l[2],o.multiply(i,i,r)),l[1]!==0&&(r[9]=0,r[8]=l[1],o.multiply(i,i,r)),l[0]!==0&&(r[8]=0,r[4]=l[0],o.multiply(i,i,r)),o.scale(i,i,u),i}},4192:function(f,s,t){"use strict";var o=t(2478),r=t(7442),i=t(7608),a=t(5567),u=t(2408),l=t(7089),d=t(6582),c=t(7656),_=(t(2504),t(3536)),p=[0,0,0];function g(y){this._components=y.slice(),this._time=[0],this.prevMatrix=y.slice(),this.nextMatrix=y.slice(),this.computedMatrix=y.slice(),this.computedInverse=y.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}f.exports=function(y){return new g((y=y||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var m=g.prototype;m.recalcMatrix=function(y){var M=this._time,h=o.le(M,y),E=this.computedMatrix;if(!(h<0)){var k=this._components;if(h===M.length-1)for(var D=16*h,P=0;P<16;++P)E[P]=k[D++];else{var L=M[h+1]-M[h],O=(D=16*h,this.prevMatrix),N=!0;for(P=0;P<16;++P)O[P]=k[D++];var V=this.nextMatrix;for(P=0;P<16;++P)V[P]=k[D++],N=N&&O[P]===V[P];if(L<1e-6||N)for(P=0;P<16;++P)E[P]=O[P];else r(E,O,V,(y-M[h])/L)}var F=this.computedUp;F[0]=E[1],F[1]=E[5],F[2]=E[9],_(F,F);var j=this.computedInverse;i(j,E);var Z=this.computedEye,z=j[15];Z[0]=j[12]/z,Z[1]=j[13]/z,Z[2]=j[14]/z;var H=this.computedCenter,U=Math.exp(this.computedRadius[0]);for(P=0;P<3;++P)H[P]=Z[P]-E[2+4*P]*U}},m.idle=function(y){if(!(y<this.lastT())){for(var M=this._components,h=M.length-16,E=0;E<16;++E)M.push(M[h++]);this._time.push(y)}},m.flush=function(y){var M=o.gt(this._time,y)-2;M<0||(this._time.splice(0,M),this._components.splice(0,16*M))},m.lastT=function(){return this._time[this._time.length-1]},m.lookAt=function(y,M,h,E){this.recalcMatrix(y),M=M||this.computedEye,h=h||p,E=E||this.computedUp,this.setMatrix(y,d(this.computedMatrix,M,h,E));for(var k=0,D=0;D<3;++D)k+=Math.pow(h[D]-M[D],2);k=Math.log(Math.sqrt(k)),this.computedRadius[0]=k},m.rotate=function(y,M,h,E){this.recalcMatrix(y);var k=this.computedInverse;M&&u(k,k,M),h&&a(k,k,h),E&&l(k,k,E),this.setMatrix(y,i(this.computedMatrix,k))};var b=[0,0,0];m.pan=function(y,M,h,E){b[0]=-(M||0),b[1]=-(h||0),b[2]=-(E||0),this.recalcMatrix(y);var k=this.computedInverse;c(k,k,b),this.setMatrix(y,i(k,k))},m.translate=function(y,M,h,E){b[0]=M||0,b[1]=h||0,b[2]=E||0,this.recalcMatrix(y);var k=this.computedMatrix;c(k,k,b),this.setMatrix(y,k)},m.setMatrix=function(y,M){if(!(y<this.lastT())){this._time.push(y);for(var h=0;h<16;++h)this._components.push(M[h])}},m.setDistance=function(y,M){this.computedRadius[0]=M},m.setDistanceLimits=function(y,M){var h=this._limits;h[0]=y,h[1]=M},m.getDistanceLimits=function(y){var M=this._limits;return y?(y[0]=M[0],y[1]=M[1],y):M}},3090:function(f,s,t){"use strict";f.exports=function(r){var i=r.length;if(i<3){for(var a=new Array(i),u=0;u<i;++u)a[u]=u;return i===2&&r[0][0]===r[1][0]&&r[0][1]===r[1][1]?[0]:a}var l=new Array(i);for(u=0;u<i;++u)l[u]=u;l.sort(function(M,h){return r[M][0]-r[h][0]||r[M][1]-r[h][1]});var d=[l[0],l[1]],c=[l[0],l[1]];for(u=2;u<i;++u){for(var _=l[u],p=r[_],g=d.length;g>1&&o(r[d[g-2]],r[d[g-1]],p)<=0;)g-=1,d.pop();for(d.push(_),g=c.length;g>1&&o(r[c[g-2]],r[c[g-1]],p)>=0;)g-=1,c.pop();c.push(_)}a=new Array(c.length+d.length-2);for(var m=0,b=(u=0,d.length);u<b;++u)a[m++]=d[u];for(var y=c.length-2;y>0;--y)a[m++]=c[y];return a};var o=t(3250)[3]},351:function(f,s,t){"use strict";f.exports=function(r,i){i||(i=r,r=window);var a=0,u=0,l=0,d={shift:!1,alt:!1,control:!1,meta:!1},c=!1;function _(D){var P=!1;return"altKey"in D&&(P=P||D.altKey!==d.alt,d.alt=!!D.altKey),"shiftKey"in D&&(P=P||D.shiftKey!==d.shift,d.shift=!!D.shiftKey),"ctrlKey"in D&&(P=P||D.ctrlKey!==d.control,d.control=!!D.ctrlKey),"metaKey"in D&&(P=P||D.metaKey!==d.meta,d.meta=!!D.metaKey),P}function p(D,P){var L=o.x(P),O=o.y(P);"buttons"in P&&(D=0|P.buttons),(D!==a||L!==u||O!==l||_(P))&&(a=0|D,u=L||0,l=O||0,i&&i(a,u,l,d))}function g(D){p(0,D)}function m(){(a||u||l||d.shift||d.alt||d.meta||d.control)&&(u=l=0,a=0,d.shift=d.alt=d.control=d.meta=!1,i&&i(0,0,0,d))}function b(D){_(D)&&i&&i(a,u,l,d)}function y(D){o.buttons(D)===0?p(0,D):p(a,D)}function M(D){p(a|o.buttons(D),D)}function h(D){p(a&~o.buttons(D),D)}function E(){c||(c=!0,r.addEventListener("mousemove",y),r.addEventListener("mousedown",M),r.addEventListener("mouseup",h),r.addEventListener("mouseleave",g),r.addEventListener("mouseenter",g),r.addEventListener("mouseout",g),r.addEventListener("mouseover",g),r.addEventListener("blur",m),r.addEventListener("keyup",b),r.addEventListener("keydown",b),r.addEventListener("keypress",b),r!==window&&(window.addEventListener("blur",m),window.addEventListener("keyup",b),window.addEventListener("keydown",b),window.addEventListener("keypress",b)))}E();var k={element:r};return Object.defineProperties(k,{enabled:{get:function(){return c},set:function(D){D?E():c&&(c=!1,r.removeEventListener("mousemove",y),r.removeEventListener("mousedown",M),r.removeEventListener("mouseup",h),r.removeEventListener("mouseleave",g),r.removeEventListener("mouseenter",g),r.removeEventListener("mouseout",g),r.removeEventListener("mouseover",g),r.removeEventListener("blur",m),r.removeEventListener("keyup",b),r.removeEventListener("keydown",b),r.removeEventListener("keypress",b),r!==window&&(window.removeEventListener("blur",m),window.removeEventListener("keyup",b),window.removeEventListener("keydown",b),window.removeEventListener("keypress",b)))},enumerable:!0},buttons:{get:function(){return a},enumerable:!0},x:{get:function(){return u},enumerable:!0},y:{get:function(){return l},enumerable:!0},mods:{get:function(){return d},enumerable:!0}}),k};var o=t(4687)},24:function(f){var s={left:0,top:0};f.exports=function(t,o,r){o=o||t.currentTarget||t.srcElement,Array.isArray(r)||(r=[0,0]);var i,a=t.clientX||0,u=t.clientY||0,l=(i=o)===window||i===document||i===document.body?s:i.getBoundingClientRect();return r[0]=a-l.left,r[1]=u-l.top,r}},4687:function(f,s){"use strict";function t(o){return o.target||o.srcElement||window}s.buttons=function(o){if(typeof o=="object"){if("buttons"in o)return o.buttons;if("which"in o){if((r=o.which)===2)return 4;if(r===3)return 2;if(r>0)return 1<<r-1}else if("button"in o){var r;if((r=o.button)===1)return 4;if(r===2)return 2;if(r>=0)return 1<<r}}return 0},s.element=t,s.x=function(o){if(typeof o=="object"){if("offsetX"in o)return o.offsetX;var r=t(o).getBoundingClientRect();return o.clientX-r.left}return 0},s.y=function(o){if(typeof o=="object"){if("offsetY"in o)return o.offsetY;var r=t(o).getBoundingClientRect();return o.clientY-r.top}return 0}},8512:function(f,s,t){"use strict";var o=t(665);f.exports=function(r,i,a){typeof r=="function"&&(a=!!i,i=r,r=window);var u=o("ex",r),l=function(d){a&&d.preventDefault();var c=d.deltaX||0,_=d.deltaY||0,p=d.deltaZ||0,g=1;switch(d.deltaMode){case 1:g=u;break;case 2:g=window.innerHeight}if(_*=g,p*=g,(c*=g)||_||p)return i(c,_,p,d)};return r.addEventListener("wheel",l),l}},2640:function(f,s,t){"use strict";var o=t(1888);f.exports=function(i){function a(p){throw new Error("ndarray-extract-contour: "+p)}typeof i!="object"&&a("Must specify arguments");var u=i.order;Array.isArray(u)||a("Must specify order");var l=i.arrayArguments||1;l<1&&a("Must have at least one array argument"),(i.scalarArguments||0)<0&&a("Scalar arg count must be > 0"),typeof i.vertex!="function"&&a("Must specify vertex creation function"),typeof i.cell!="function"&&a("Must specify cell creation function"),typeof i.phase!="function"&&a("Must specify phase function");for(var d=i.getters||[],c=new Array(l),_=0;_<l;++_)d.indexOf(_)>=0?c[_]=!0:c[_]=!1;return function(p,g,m,b,y,M){var h=[M,y].join(",");return(0,r[h])(p,g,m,o.mallocUint32,o.freeUint32)}(i.vertex,i.cell,i.phase,0,u,c)};var r={"false,0,1":function(i,a,u,l,d){return function(c,_,p,g){var m,b=0|c.shape[0],y=0|c.shape[1],M=c.data,h=0|c.offset,E=0|c.stride[0],k=0|c.stride[1],D=h,P=0|-E,L=0,O=0|-k,N=0,V=-E-k|0,F=0,j=0|E,Z=k-E*b|0,z=0,H=0,U=0,re=2*b|0,ee=l(re),J=l(re),Q=0,ne=0,K=-1,oe=-1,le=0,se=0|-b,de=0|b,be=0,_e=-b-1|0,xe=b-1|0,ve=0,ye=0,me=0;for(z=0;z<b;++z)ee[Q++]=u(M[D],_,p,g),D+=j;if(D+=Z,y>0){if(H=1,ee[Q++]=u(M[D],_,p,g),D+=j,b>0)for(z=1,m=M[D],ne=ee[Q]=u(m,_,p,g),le=ee[Q+K],be=ee[Q+se],ve=ee[Q+_e],ne===le&&ne===be&&ne===ve||(L=M[D+P],N=M[D+O],F=M[D+V],i(z,H,m,L,N,F,ne,le,be,ve,_,p,g),ye=J[Q]=U++),Q+=1,D+=j,z=2;z<b;++z)m=M[D],ne=ee[Q]=u(m,_,p,g),le=ee[Q+K],be=ee[Q+se],ve=ee[Q+_e],ne===le&&ne===be&&ne===ve||(L=M[D+P],N=M[D+O],F=M[D+V],i(z,H,m,L,N,F,ne,le,be,ve,_,p,g),ye=J[Q]=U++,ve!==le&&a(J[Q+K],ye,F,L,ve,le,_,p,g)),Q+=1,D+=j;for(D+=Z,Q=0,me=K,K=oe,oe=me,me=se,se=de,de=me,me=_e,_e=xe,xe=me,H=2;H<y;++H){if(ee[Q++]=u(M[D],_,p,g),D+=j,b>0)for(z=1,m=M[D],ne=ee[Q]=u(m,_,p,g),le=ee[Q+K],be=ee[Q+se],ve=ee[Q+_e],ne===le&&ne===be&&ne===ve||(L=M[D+P],N=M[D+O],F=M[D+V],i(z,H,m,L,N,F,ne,le,be,ve,_,p,g),ye=J[Q]=U++,ve!==be&&a(J[Q+se],ye,N,F,be,ve,_,p,g)),Q+=1,D+=j,z=2;z<b;++z)m=M[D],ne=ee[Q]=u(m,_,p,g),le=ee[Q+K],be=ee[Q+se],ve=ee[Q+_e],ne===le&&ne===be&&ne===ve||(L=M[D+P],N=M[D+O],F=M[D+V],i(z,H,m,L,N,F,ne,le,be,ve,_,p,g),ye=J[Q]=U++,ve!==be&&a(J[Q+se],ye,N,F,be,ve,_,p,g),ve!==le&&a(J[Q+K],ye,F,L,ve,le,_,p,g)),Q+=1,D+=j;1&H&&(Q=0),me=K,K=oe,oe=me,me=se,se=de,de=me,me=_e,_e=xe,xe=me,D+=Z}}d(J),d(ee)}},"false,1,0":function(i,a,u,l,d){return function(c,_,p,g){var m,b=0|c.shape[0],y=0|c.shape[1],M=c.data,h=0|c.offset,E=0|c.stride[0],k=0|c.stride[1],D=h,P=0|-E,L=0,O=0|-k,N=0,V=-E-k|0,F=0,j=0|k,Z=E-k*y|0,z=0,H=0,U=0,re=2*y|0,ee=l(re),J=l(re),Q=0,ne=0,K=-1,oe=-1,le=0,se=0|-y,de=0|y,be=0,_e=-y-1|0,xe=y-1|0,ve=0,ye=0,me=0;for(H=0;H<y;++H)ee[Q++]=u(M[D],_,p,g),D+=j;if(D+=Z,b>0){if(z=1,ee[Q++]=u(M[D],_,p,g),D+=j,y>0)for(H=1,m=M[D],ne=ee[Q]=u(m,_,p,g),be=ee[Q+se],le=ee[Q+K],ve=ee[Q+_e],ne===be&&ne===le&&ne===ve||(L=M[D+P],N=M[D+O],F=M[D+V],i(z,H,m,L,N,F,ne,be,le,ve,_,p,g),ye=J[Q]=U++),Q+=1,D+=j,H=2;H<y;++H)m=M[D],ne=ee[Q]=u(m,_,p,g),be=ee[Q+se],le=ee[Q+K],ve=ee[Q+_e],ne===be&&ne===le&&ne===ve||(L=M[D+P],N=M[D+O],F=M[D+V],i(z,H,m,L,N,F,ne,be,le,ve,_,p,g),ye=J[Q]=U++,ve!==le&&a(J[Q+K],ye,N,F,le,ve,_,p,g)),Q+=1,D+=j;for(D+=Z,Q=0,me=se,se=de,de=me,me=K,K=oe,oe=me,me=_e,_e=xe,xe=me,z=2;z<b;++z){if(ee[Q++]=u(M[D],_,p,g),D+=j,y>0)for(H=1,m=M[D],ne=ee[Q]=u(m,_,p,g),be=ee[Q+se],le=ee[Q+K],ve=ee[Q+_e],ne===be&&ne===le&&ne===ve||(L=M[D+P],N=M[D+O],F=M[D+V],i(z,H,m,L,N,F,ne,be,le,ve,_,p,g),ye=J[Q]=U++,ve!==be&&a(J[Q+se],ye,F,L,ve,be,_,p,g)),Q+=1,D+=j,H=2;H<y;++H)m=M[D],ne=ee[Q]=u(m,_,p,g),be=ee[Q+se],le=ee[Q+K],ve=ee[Q+_e],ne===be&&ne===le&&ne===ve||(L=M[D+P],N=M[D+O],F=M[D+V],i(z,H,m,L,N,F,ne,be,le,ve,_,p,g),ye=J[Q]=U++,ve!==le&&a(J[Q+K],ye,N,F,le,ve,_,p,g),ve!==be&&a(J[Q+se],ye,F,L,ve,be,_,p,g)),Q+=1,D+=j;1&z&&(Q=0),me=se,se=de,de=me,me=K,K=oe,oe=me,me=_e,_e=xe,xe=me,D+=Z}}d(J),d(ee)}}}},6199:function(f,s,t){"use strict";var o=t(1338),r={zero:function(b,y,M,h){var E=b[0];h|=0;var k=0,D=M[0];for(k=0;k<E;++k)y[h]=0,h+=D},fdTemplate1:function(b,y,M,h,E,k,D){var P=b[0],L=M[0],O=-1*L,N=L;h|=0,D|=0;var V=0,F=L,j=k[0];for(V=0;V<P;++V)E[D]=.5*(y[h+O]-y[h+N]),h+=F,D+=j},fdTemplate2:function(b,y,M,h,E,k,D,P,L,O){var N=b[0],V=b[1],F=M[0],j=M[1],Z=k[0],z=k[1],H=L[0],U=L[1],re=-1*F,ee=F,J=-1*j,Q=j;h|=0,D|=0,O|=0;var ne=0,K=0,oe=j,le=F-V*j,se=z,de=Z-V*z,be=U,_e=H-V*U;for(K=0;K<N;++K){for(ne=0;ne<V;++ne)E[D]=.5*(y[h+re]-y[h+ee]),P[O]=.5*(y[h+J]-y[h+Q]),h+=oe,D+=se,O+=be;h+=le,D+=de,O+=_e}}},i={cdiff:function(b){var y={};return function(M,h,E){var k=M.dtype,D=M.order,P=h.dtype,L=h.order,O=E.dtype,N=E.order,V=[k,D.join(),P,L.join(),O,N.join()].join(),F=y[V];return F||(y[V]=F=b([k,D,P,L,O,N])),F(M.shape.slice(0),M.data,M.stride,0|M.offset,h.data,h.stride,0|h.offset,E.data,E.stride,0|E.offset)}},zero:function(b){var y={};return function(M){var h=M.dtype,E=M.order,k=[h,E.join()].join(),D=y[k];return D||(y[k]=D=b([h,E])),D(M.shape.slice(0),M.data,M.stride,0|M.offset)}},fdTemplate1:function(b){var y={};return function(M,h){var E=M.dtype,k=M.order,D=h.dtype,P=h.order,L=[E,k.join(),D,P.join()].join(),O=y[L];return O||(y[L]=O=b([E,k,D,P])),O(M.shape.slice(0),M.data,M.stride,0|M.offset,h.data,h.stride,0|h.offset)}},fdTemplate2:function(b){var y={};return function(M,h,E){var k=M.dtype,D=M.order,P=h.dtype,L=h.order,O=E.dtype,N=E.order,V=[k,D.join(),P,L.join(),O,N.join()].join(),F=y[V];return F||(y[V]=F=b([k,D,P,L,O,N])),F(M.shape.slice(0),M.data,M.stride,0|M.offset,h.data,h.stride,0|h.offset,E.data,E.stride,0|E.offset)}}};function a(b){return(0,i[b.funcName])(u.bind(void 0,b))}function u(b){return r[b.funcName]}function l(b){return a({funcName:b.funcName})}var d={},c={},_=l({funcName:"cdiff"}),p=l({funcName:"zero"});function g(b){return b in d?d[b]:d[b]=l({funcName:"fdTemplate"+b})}function m(b,y,M,h){return function(E,k){var D=k.shape.slice();return D[0]>2&&D[1]>2&&h(k.pick(-1,-1).lo(1,1).hi(D[0]-2,D[1]-2),E.pick(-1,-1,0).lo(1,1).hi(D[0]-2,D[1]-2),E.pick(-1,-1,1).lo(1,1).hi(D[0]-2,D[1]-2)),D[1]>2&&(M(k.pick(0,-1).lo(1).hi(D[1]-2),E.pick(0,-1,1).lo(1).hi(D[1]-2)),y(E.pick(0,-1,0).lo(1).hi(D[1]-2))),D[1]>2&&(M(k.pick(D[0]-1,-1).lo(1).hi(D[1]-2),E.pick(D[0]-1,-1,1).lo(1).hi(D[1]-2)),y(E.pick(D[0]-1,-1,0).lo(1).hi(D[1]-2))),D[0]>2&&(M(k.pick(-1,0).lo(1).hi(D[0]-2),E.pick(-1,0,0).lo(1).hi(D[0]-2)),y(E.pick(-1,0,1).lo(1).hi(D[0]-2))),D[0]>2&&(M(k.pick(-1,D[1]-1).lo(1).hi(D[0]-2),E.pick(-1,D[1]-1,0).lo(1).hi(D[0]-2)),y(E.pick(-1,D[1]-1,1).lo(1).hi(D[0]-2))),E.set(0,0,0,0),E.set(0,0,1,0),E.set(D[0]-1,0,0,0),E.set(D[0]-1,0,1,0),E.set(0,D[1]-1,0,0),E.set(0,D[1]-1,1,0),E.set(D[0]-1,D[1]-1,0,0),E.set(D[0]-1,D[1]-1,1,0),E}}f.exports=function(b,y,M){return Array.isArray(M)||(M=o(y.dimension,typeof M=="string"?M:"clamp")),y.size===0?b:y.dimension===0?(b.set(0),b):function(h){var E=h.join();if(L=c[E])return L;for(var k=h.length,D=[_,p],P=1;P<=k;++P)D.push(g(P));var L=m.apply(void 0,D);return c[E]=L,L}(M)(b,y)}},4317:function(f){"use strict";function s(i,a){var u=Math.floor(a),l=a-u,d=0<=u&&u<i.shape[0],c=0<=u+1&&u+1<i.shape[0];return(1-l)*(d?+i.get(u):0)+l*(c?+i.get(u+1):0)}function t(i,a,u){var l=Math.floor(a),d=a-l,c=0<=l&&l<i.shape[0],_=0<=l+1&&l+1<i.shape[0],p=Math.floor(u),g=u-p,m=0<=p&&p<i.shape[1],b=0<=p+1&&p+1<i.shape[1],y=c&&m?i.get(l,p):0,M=c&&b?i.get(l,p+1):0;return(1-g)*((1-d)*y+d*(_&&m?i.get(l+1,p):0))+g*((1-d)*M+d*(_&&b?i.get(l+1,p+1):0))}function o(i,a,u,l){var d=Math.floor(a),c=a-d,_=0<=d&&d<i.shape[0],p=0<=d+1&&d+1<i.shape[0],g=Math.floor(u),m=u-g,b=0<=g&&g<i.shape[1],y=0<=g+1&&g+1<i.shape[1],M=Math.floor(l),h=l-M,E=0<=M&&M<i.shape[2],k=0<=M+1&&M+1<i.shape[2],D=_&&b&&E?i.get(d,g,M):0,P=_&&y&&E?i.get(d,g+1,M):0,L=p&&b&&E?i.get(d+1,g,M):0,O=p&&y&&E?i.get(d+1,g+1,M):0,N=_&&b&&k?i.get(d,g,M+1):0,V=_&&y&&k?i.get(d,g+1,M+1):0;return(1-h)*((1-m)*((1-c)*D+c*L)+m*((1-c)*P+c*O))+h*((1-m)*((1-c)*N+c*(p&&b&&k?i.get(d+1,g,M+1):0))+m*((1-c)*V+c*(p&&y&&k?i.get(d+1,g+1,M+1):0)))}function r(i){var a,u,l=0|i.shape.length,d=new Array(l),c=new Array(l),_=new Array(l),p=new Array(l);for(a=0;a<l;++a)u=+arguments[a+1],d[a]=Math.floor(u),c[a]=u-d[a],_[a]=0<=d[a]&&d[a]<i.shape[a],p[a]=0<=d[a]+1&&d[a]+1<i.shape[a];var g,m,b,y=0;e:for(a=0;a<1<<l;++a){for(m=1,b=i.offset,g=0;g<l;++g)if(a&1<<g){if(!p[g])continue e;m*=c[g],b+=i.stride[g]*(d[g]+1)}else{if(!_[g])continue e;m*=1-c[g],b+=i.stride[g]*d[g]}y+=m*i.data[b]}return y}f.exports=function(i,a,u,l){switch(i.shape.length){case 0:return 0;case 1:return s(i,a);case 2:return t(i,a,u);case 3:return o(i,a,u,l);default:return r.apply(void 0,arguments)}},f.exports.d1=s,f.exports.d2=t,f.exports.d3=o},5298:function(f,s){"use strict";var t={"float64,2,1,0":function(){return function(u,l,d,c,_){var p=u[0],g=u[1],m=u[2],b=d[0],y=d[1],M=d[2];c|=0;var h=0,E=0,k=0,D=M,P=y-m*M,L=b-g*y;for(k=0;k<p;++k){for(E=0;E<g;++E){for(h=0;h<m;++h)l[c]/=_,c+=D;c+=P}c+=L}}},"uint8,2,0,1,float64,2,1,0":function(){return function(u,l,d,c,_,p,g,m){for(var b=u[0],y=u[1],M=u[2],h=d[0],E=d[1],k=d[2],D=p[0],P=p[1],L=p[2],O=c|=0,N=g|=0,V=0|u[0];V>0;){V<64?(b=V,V=0):(b=64,V-=64);for(var F=0|u[1];F>0;){F<64?(y=F,F=0):(y=64,F-=64),c=O+V*h+F*E,g=N+V*D+F*P;var j=0,Z=0,z=0,H=k,U=h-M*k,re=E-b*h,ee=L,J=D-M*L,Q=P-b*D;for(z=0;z<y;++z){for(Z=0;Z<b;++Z){for(j=0;j<M;++j)l[c]=_[g]*m,c+=H,g+=ee;c+=U,g+=J}c+=re,g+=Q}}}}},"float32,1,0,float32,1,0":function(){return function(u,l,d,c,_,p,g){var m=u[0],b=u[1],y=d[0],M=d[1],h=p[0],E=p[1];c|=0,g|=0;var k=0,D=0,P=M,L=y-b*M,O=E,N=h-b*E;for(D=0;D<m;++D){for(k=0;k<b;++k)l[c]=_[g],c+=P,g+=O;c+=L,g+=N}}},"float32,1,0,float32,0,1":function(){return function(u,l,d,c,_,p,g){for(var m=u[0],b=u[1],y=d[0],M=d[1],h=p[0],E=p[1],k=c|=0,D=g|=0,P=0|u[1];P>0;){P<64?(b=P,P=0):(b=64,P-=64);for(var L=0|u[0];L>0;){L<64?(m=L,L=0):(m=64,L-=64),c=k+P*M+L*y,g=D+P*E+L*h;var O=0,N=0,V=M,F=y-b*M,j=E,Z=h-b*E;for(N=0;N<m;++N){for(O=0;O<b;++O)l[c]=_[g],c+=V,g+=j;c+=F,g+=Z}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(u,l,d,c,_,p,g){for(var m=u[0],b=u[1],y=u[2],M=d[0],h=d[1],E=d[2],k=p[0],D=p[1],P=p[2],L=c|=0,O=g|=0,N=0|u[2];N>0;){N<64?(y=N,N=0):(y=64,N-=64);for(var V=0|u[0];V>0;){V<64?(m=V,V=0):(m=64,V-=64);for(var F=0|u[1];F>0;){F<64?(b=F,F=0):(b=64,F-=64),c=L+N*E+V*M+F*h,g=O+N*P+V*k+F*D;var j=0,Z=0,z=0,H=E,U=M-y*E,re=h-m*M,ee=P,J=k-y*P,Q=D-m*k;for(z=0;z<b;++z){for(Z=0;Z<m;++Z){for(j=0;j<y;++j)l[c]=_[g],c+=H,g+=ee;c+=U,g+=J}c+=re,g+=Q}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(u,l,d,c,_,p,g){var m=u[0],b=u[1],y=u[2],M=d[0],h=d[1],E=d[2],k=p[0],D=p[1],P=p[2];c|=0,g|=0;var L=0,O=0,N=0,V=E,F=M-y*E,j=h-m*M,Z=P,z=k-y*P,H=D-m*k;for(N=0;N<b;++N){for(O=0;O<m;++O){for(L=0;L<y;++L)l[c]=_[g],c+=V,g+=Z;c+=F,g+=z}c+=j,g+=H}}}},o=function(u,l){var d=l.join(",");return(0,t[d])()},r={mul:function(u){var l={};return function(d,c,_){var p=d.dtype,g=d.order,m=c.dtype,b=c.order,y=_.dtype,M=_.order,h=[p,g.join(),m,b.join(),y,M.join()].join(),E=l[h];return E||(l[h]=E=u([p,g,m,b,y,M])),E(d.shape.slice(0),d.data,d.stride,0|d.offset,c.data,c.stride,0|c.offset,_.data,_.stride,0|_.offset)}},muls:function(u){var l={};return function(d,c,_){var p=d.dtype,g=d.order,m=c.dtype,b=c.order,y=[p,g.join(),m,b.join()].join(),M=l[y];return M||(l[y]=M=u([p,g,m,b])),M(d.shape.slice(0),d.data,d.stride,0|d.offset,c.data,c.stride,0|c.offset,_)}},mulseq:function(u){var l={};return function(d,c){var _=d.dtype,p=d.order,g=[_,p.join()].join(),m=l[g];return m||(l[g]=m=u([_,p])),m(d.shape.slice(0),d.data,d.stride,0|d.offset,c)}},div:function(u){var l={};return function(d,c,_){var p=d.dtype,g=d.order,m=c.dtype,b=c.order,y=_.dtype,M=_.order,h=[p,g.join(),m,b.join(),y,M.join()].join(),E=l[h];return E||(l[h]=E=u([p,g,m,b,y,M])),E(d.shape.slice(0),d.data,d.stride,0|d.offset,c.data,c.stride,0|c.offset,_.data,_.stride,0|_.offset)}},divs:function(u){var l={};return function(d,c,_){var p=d.dtype,g=d.order,m=c.dtype,b=c.order,y=[p,g.join(),m,b.join()].join(),M=l[y];return M||(l[y]=M=u([p,g,m,b])),M(d.shape.slice(0),d.data,d.stride,0|d.offset,c.data,c.stride,0|c.offset,_)}},divseq:function(u){var l={};return function(d,c){var _=d.dtype,p=d.order,g=[_,p.join()].join(),m=l[g];return m||(l[g]=m=u([_,p])),m(d.shape.slice(0),d.data,d.stride,0|d.offset,c)}},assign:function(u){var l={};return function(d,c){var _=d.dtype,p=d.order,g=c.dtype,m=c.order,b=[_,p.join(),g,m.join()].join(),y=l[b];return y||(l[b]=y=u([_,p,g,m])),y(d.shape.slice(0),d.data,d.stride,0|d.offset,c.data,c.stride,0|c.offset)}}};function i(u){return l={funcName:u.funcName},(0,r[l.funcName])(o.bind(void 0,l));var l}var a={mul:"*",div:"/"};(function(){for(var u in a)s[u]=i({funcName:u}),s[u+"s"]=i({funcName:u+"s"}),s[u+"seq"]=i({funcName:u+"seq"})})(),s.assign=i({funcName:"assign"})},9994:function(f,s,t){"use strict";var o=t(9618),r=t(8277);f.exports=function(i,a){for(var u=[],l=i,d=1;Array.isArray(l);)u.push(l.length),d*=l.length,l=l[0];return u.length===0?o():(a||(a=o(new Float64Array(d),u)),r(a,i),a)}},8277:function(f){"use strict";f.exports=function(s){var t={};return function(o,r){var i=o.dtype,a=o.order,u=[i,a.join()].join(),l=t[u];return l||(t[u]=l=s([i,a])),l(o.shape.slice(0),o.data,o.stride,0|o.offset,r)}}((function(){return function(s,t,o,r,i){var a=s[0],u=s[1],l=s[2],d=o[0],c=o[1],_=o[2],p=[0,0,0];r|=0;var g=0,m=0,b=0,y=_,M=c-l*_,h=d-u*c;for(b=0;b<a;++b){for(m=0;m<u;++m){for(g=0;g<l;++g){var E,k=i;for(E=0;E<p.length-1;++E)k=k[p[E]];t[r]=k[p[p.length-1]],r+=y,++p[2]}r+=M,p[2]-=l,++p[1]}r+=h,p[1]-=u,++p[0]}}}).bind(void 0,{funcName:"convert"}))},7640:function(f,s,t){"use strict";var o=t(1888);function r(l){return l==="uint32"?[o.mallocUint32,o.freeUint32]:null}var i={"uint32,1,0":function(l,d){return function(c,_,p,g,m,b,y,M,h,E,k){var D,P,L,O,N,V,F,j,Z=c*m+g,z=l(M);for(D=c+1;D<=_;++D){for(P=D,L=Z+=m,N=0,V=Z,O=0;O<M;++O)z[N++]=p[V],V+=h;e:for(;P-- >c;){N=0,V=L-m;t:for(O=0;O<M;++O){if((F=p[V])<(j=z[N]))break e;if(F>j)break t;V+=E,N+=k}for(N=L,V=L-m,O=0;O<M;++O)p[N]=p[V],N+=h,V+=h;L-=m}for(N=L,V=0,O=0;O<M;++O)p[N]=z[V++],N+=h}d(z)}}},a={"uint32,1,0":function(l,d,c){return function _(p,g,m,b,y,M,h,E,k,D,P){var L,O,N,V,F,j,Z,z,H,U,re,ee,J,Q,ne,K,oe,le,se,de,be,_e,xe,ve,ye,me=(g-p+1)/6|0,Me=p+me,Ae=g-me,ce=p+g>>1,ae=ce-me,pe=ce+me,De=Me,ke=ae,Ee=ce,Ie=pe,Re=Ae,Ne=p+1,ge=g-1,we=!0,Ce=0,ze=0,Pe=0,Ue=E,Ge=d(Ue),Xe=d(Ue);re=y*De,ee=y*ke,ye=b;e:for(U=0;U<E;++U){if(z=ee+ye,(Pe=m[Z=re+ye]-m[z])>0){O=De,De=ke,ke=O;break e}if(Pe<0)break e;ye+=D}re=y*Ie,ee=y*Re,ye=b;e:for(U=0;U<E;++U){if(z=ee+ye,(Pe=m[Z=re+ye]-m[z])>0){O=Ie,Ie=Re,Re=O;break e}if(Pe<0)break e;ye+=D}re=y*De,ee=y*Ee,ye=b;e:for(U=0;U<E;++U){if(z=ee+ye,(Pe=m[Z=re+ye]-m[z])>0){O=De,De=Ee,Ee=O;break e}if(Pe<0)break e;ye+=D}re=y*ke,ee=y*Ee,ye=b;e:for(U=0;U<E;++U){if(z=ee+ye,(Pe=m[Z=re+ye]-m[z])>0){O=ke,ke=Ee,Ee=O;break e}if(Pe<0)break e;ye+=D}re=y*De,ee=y*Ie,ye=b;e:for(U=0;U<E;++U){if(z=ee+ye,(Pe=m[Z=re+ye]-m[z])>0){O=De,De=Ie,Ie=O;break e}if(Pe<0)break e;ye+=D}re=y*Ee,ee=y*Ie,ye=b;e:for(U=0;U<E;++U){if(z=ee+ye,(Pe=m[Z=re+ye]-m[z])>0){O=Ee,Ee=Ie,Ie=O;break e}if(Pe<0)break e;ye+=D}re=y*ke,ee=y*Re,ye=b;e:for(U=0;U<E;++U){if(z=ee+ye,(Pe=m[Z=re+ye]-m[z])>0){O=ke,ke=Re,Re=O;break e}if(Pe<0)break e;ye+=D}re=y*ke,ee=y*Ee,ye=b;e:for(U=0;U<E;++U){if(z=ee+ye,(Pe=m[Z=re+ye]-m[z])>0){O=ke,ke=Ee,Ee=O;break e}if(Pe<0)break e;ye+=D}re=y*Ie,ee=y*Re,ye=b;e:for(U=0;U<E;++U){if(z=ee+ye,(Pe=m[Z=re+ye]-m[z])>0){O=Ie,Ie=Re,Re=O;break e}if(Pe<0)break e;ye+=D}for(re=y*De,ee=y*ke,J=y*Ee,Q=y*Ie,ne=y*Re,K=y*Me,oe=y*ce,le=y*Ae,ve=0,ye=b,U=0;U<E;++U)Z=re+ye,z=ee+ye,H=J+ye,se=Q+ye,de=ne+ye,be=K+ye,_e=oe+ye,xe=le+ye,Ge[ve]=m[z],Xe[ve]=m[se],we=we&&Ge[ve]===Xe[ve],N=m[Z],V=m[H],F=m[de],m[be]=N,m[_e]=V,m[xe]=F,++ve,ye+=k;for(re=y*ae,ee=y*p,ye=b,U=0;U<E;++U)z=ee+ye,m[Z=re+ye]=m[z],ye+=k;for(re=y*pe,ee=y*g,ye=b,U=0;U<E;++U)z=ee+ye,m[Z=re+ye]=m[z],ye+=k;if(we)for(j=Ne;j<=ge;++j){for(Z=b+j*y,ve=0,U=0;U<E&&(Pe=m[Z]-Ge[ve])==0;++U)ve+=P,Z+=D;if(Pe!==0)if(Pe<0){if(j!==Ne)for(re=y*j,ee=y*Ne,ye=b,U=0;U<E;++U)z=ee+ye,L=m[Z=re+ye],m[Z]=m[z],m[z]=L,ye+=k;++Ne}else for(;;){for(Z=b+ge*y,ve=0,U=0;U<E&&(Pe=m[Z]-Ge[ve])==0;++U)ve+=P,Z+=D;if(!(Pe>0)){if(Pe<0){for(re=y*j,ee=y*Ne,J=y*ge,ye=b,U=0;U<E;++U)z=ee+ye,H=J+ye,L=m[Z=re+ye],m[Z]=m[z],m[z]=m[H],m[H]=L,ye+=k;++Ne,--ge;break}for(re=y*j,ee=y*ge,ye=b,U=0;U<E;++U)z=ee+ye,L=m[Z=re+ye],m[Z]=m[z],m[z]=L,ye+=k;--ge;break}ge--}}else for(j=Ne;j<=ge;++j){for(Z=b+j*y,ve=0,U=0;U<E&&(Ce=m[Z]-Ge[ve])==0;++U)ve+=P,Z+=D;if(Ce<0){if(j!==Ne)for(re=y*j,ee=y*Ne,ye=b,U=0;U<E;++U)z=ee+ye,L=m[Z=re+ye],m[Z]=m[z],m[z]=L,ye+=k;++Ne}else{for(Z=b+j*y,ve=0,U=0;U<E&&(ze=m[Z]-Xe[ve])==0;++U)ve+=P,Z+=D;if(ze>0)for(;;){for(Z=b+ge*y,ve=0,U=0;U<E&&(Pe=m[Z]-Xe[ve])==0;++U)ve+=P,Z+=D;if(!(Pe>0)){for(Z=b+ge*y,ve=0,U=0;U<E&&(Pe=m[Z]-Ge[ve])==0;++U)ve+=P,Z+=D;if(Pe<0){for(re=y*j,ee=y*Ne,J=y*ge,ye=b,U=0;U<E;++U)z=ee+ye,H=J+ye,L=m[Z=re+ye],m[Z]=m[z],m[z]=m[H],m[H]=L,ye+=k;++Ne,--ge}else{for(re=y*j,ee=y*ge,ye=b,U=0;U<E;++U)z=ee+ye,L=m[Z=re+ye],m[Z]=m[z],m[z]=L,ye+=k;--ge}break}if(--ge<j)break}}}for(re=y*p,ee=y*(Ne-1),ve=0,ye=b,U=0;U<E;++U)z=ee+ye,m[Z=re+ye]=m[z],m[z]=Ge[ve],++ve,ye+=k;for(re=y*g,ee=y*(ge+1),ve=0,ye=b,U=0;U<E;++U)z=ee+ye,m[Z=re+ye]=m[z],m[z]=Xe[ve],++ve,ye+=k;if(Ne-2-p<=32?l(p,Ne-2,m,b,y,M,h,E,k,D,P):_(p,Ne-2,m,b,y,M,h,E,k,D,P),g-(ge+2)<=32?l(ge+2,g,m,b,y,M,h,E,k,D,P):_(ge+2,g,m,b,y,M,h,E,k,D,P),we)return c(Ge),void c(Xe);if(Ne<Me&&ge>Ae){e:for(;;){for(Z=b+Ne*y,ve=0,ye=b,U=0;U<E;++U){if(m[Z]!==Ge[ve])break e;++ve,Z+=k}++Ne}e:for(;;){for(Z=b+ge*y,ve=0,ye=b,U=0;U<E;++U){if(m[Z]!==Xe[ve])break e;++ve,Z+=k}--ge}for(j=Ne;j<=ge;++j){for(Z=b+j*y,ve=0,U=0;U<E&&(Ce=m[Z]-Ge[ve])==0;++U)ve+=P,Z+=D;if(Ce===0){if(j!==Ne)for(re=y*j,ee=y*Ne,ye=b,U=0;U<E;++U)z=ee+ye,L=m[Z=re+ye],m[Z]=m[z],m[z]=L,ye+=k;++Ne}else{for(Z=b+j*y,ve=0,U=0;U<E&&(ze=m[Z]-Xe[ve])==0;++U)ve+=P,Z+=D;if(ze===0)for(;;){for(Z=b+ge*y,ve=0,U=0;U<E&&(Pe=m[Z]-Xe[ve])==0;++U)ve+=P,Z+=D;if(Pe!==0){for(Z=b+ge*y,ve=0,U=0;U<E&&(Pe=m[Z]-Ge[ve])==0;++U)ve+=P,Z+=D;if(Pe<0){for(re=y*j,ee=y*Ne,J=y*ge,ye=b,U=0;U<E;++U)z=ee+ye,H=J+ye,L=m[Z=re+ye],m[Z]=m[z],m[z]=m[H],m[H]=L,ye+=k;++Ne,--ge}else{for(re=y*j,ee=y*ge,ye=b,U=0;U<E;++U)z=ee+ye,L=m[Z=re+ye],m[Z]=m[z],m[z]=L,ye+=k;--ge}break}if(--ge<j)break}}}}c(Ge),c(Xe),ge-Ne<=32?l(Ne,ge,m,b,y,M,h,E,k,D,P):_(Ne,ge,m,b,y,M,h,E,k,D,P)}}},u={"uint32,1,0":function(l,d){return function(c){var _=c.data,p=0|c.offset,g=c.shape,m=c.stride,b=0|m[0],y=0|g[0],M=0|m[1],h=0|g[1],E=M,k=M;y<=32?l(0,y-1,_,p,b,M,y,h,E,k,1):d(0,y-1,_,p,b,M,y,h,E,k,1)}}};f.exports=function(l,d){var c=[d,l].join(","),_=u[c],p=function(m,b){var y=r(b),M=[b,m].join(","),h=i[M];return y?h(y[0],y[1]):h()}(l,d),g=function(m,b,y){var M=r(b),h=[b,m].join(","),E=a[h];return m.length>1&&M?E(y,M[0],M[1]):E(y)}(l,d,p);return _(p,g)}},446:function(f,s,t){"use strict";var o=t(7640),r={};f.exports=function(i){var a=i.order,u=i.dtype,l=[a,u].join(":"),d=r[l];return d||(r[l]=d=o(a,u)),d(i),i}},9618:function(f,s,t){var o=t(7163),r=typeof Float64Array<"u";function i(c,_){return c[0]-_[0]}function a(){var c,_=this.stride,p=new Array(_.length);for(c=0;c<p.length;++c)p[c]=[Math.abs(_[c]),c];p.sort(i);var g=new Array(p.length);for(c=0;c<g.length;++c)g[c]=p[c][1];return g}var u={T:function(c){function _(g){this.data=g}var p=_.prototype;return p.dtype=c,p.index=function(){return-1},p.size=0,p.dimension=-1,p.shape=p.stride=p.order=[],p.lo=p.hi=p.transpose=p.step=function(){return new _(this.data)},p.get=p.set=function(){},p.pick=function(){return null},function(g){return new _(g)}},0:function(c,_){function p(m,b){this.data=m,this.offset=b}var g=p.prototype;return g.dtype=c,g.index=function(){return this.offset},g.dimension=0,g.size=1,g.shape=g.stride=g.order=[],g.lo=g.hi=g.transpose=g.step=function(){return new p(this.data,this.offset)},g.pick=function(){return _(this.data)},g.valueOf=g.get=function(){return c==="generic"?this.data.get(this.offset):this.data[this.offset]},g.set=function(m){return c==="generic"?this.data.set(this.offset,m):this.data[this.offset]=m},function(m,b,y,M){return new p(m,M)}},1:function(c,_,p){function g(b,y,M,h){this.data=b,this.shape=[y],this.stride=[M],this.offset=0|h}var m=g.prototype;return m.dtype=c,m.dimension=1,Object.defineProperty(m,"size",{get:function(){return this.shape[0]}}),m.order=[0],m.set=function(b,y){return c==="generic"?this.data.set(this.offset+this.stride[0]*b,y):this.data[this.offset+this.stride[0]*b]=y},m.get=function(b){return c==="generic"?this.data.get(this.offset+this.stride[0]*b):this.data[this.offset+this.stride[0]*b]},m.index=function(b){return this.offset+this.stride[0]*b},m.hi=function(b){return new g(this.data,typeof b!="number"||b<0?this.shape[0]:0|b,this.stride[0],this.offset)},m.lo=function(b){var y=this.offset,M=0,h=this.shape[0],E=this.stride[0];return typeof b=="number"&&b>=0&&(y+=E*(M=0|b),h-=M),new g(this.data,h,E,y)},m.step=function(b){var y=this.shape[0],M=this.stride[0],h=this.offset,E=0,k=Math.ceil;return typeof b=="number"&&((E=0|b)<0?(h+=M*(y-1),y=k(-y/E)):y=k(y/E),M*=E),new g(this.data,y,M,h)},m.transpose=function(b){b=b===void 0?0:0|b;var y=this.shape,M=this.stride;return new g(this.data,y[b],M[b],this.offset)},m.pick=function(b){var y=[],M=[],h=this.offset;return typeof b=="number"&&b>=0?h=h+this.stride[0]*b|0:(y.push(this.shape[0]),M.push(this.stride[0])),(0,_[y.length+1])(this.data,y,M,h)},function(b,y,M,h){return new g(b,y[0],M[0],h)}},2:function(c,_,p){function g(b,y,M,h,E,k){this.data=b,this.shape=[y,M],this.stride=[h,E],this.offset=0|k}var m=g.prototype;return m.dtype=c,m.dimension=2,Object.defineProperty(m,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(m,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),m.set=function(b,y,M){return c==="generic"?this.data.set(this.offset+this.stride[0]*b+this.stride[1]*y,M):this.data[this.offset+this.stride[0]*b+this.stride[1]*y]=M},m.get=function(b,y){return c==="generic"?this.data.get(this.offset+this.stride[0]*b+this.stride[1]*y):this.data[this.offset+this.stride[0]*b+this.stride[1]*y]},m.index=function(b,y){return this.offset+this.stride[0]*b+this.stride[1]*y},m.hi=function(b,y){return new g(this.data,typeof b!="number"||b<0?this.shape[0]:0|b,typeof y!="number"||y<0?this.shape[1]:0|y,this.stride[0],this.stride[1],this.offset)},m.lo=function(b,y){var M=this.offset,h=0,E=this.shape[0],k=this.shape[1],D=this.stride[0],P=this.stride[1];return typeof b=="number"&&b>=0&&(M+=D*(h=0|b),E-=h),typeof y=="number"&&y>=0&&(M+=P*(h=0|y),k-=h),new g(this.data,E,k,D,P,M)},m.step=function(b,y){var M=this.shape[0],h=this.shape[1],E=this.stride[0],k=this.stride[1],D=this.offset,P=0,L=Math.ceil;return typeof b=="number"&&((P=0|b)<0?(D+=E*(M-1),M=L(-M/P)):M=L(M/P),E*=P),typeof y=="number"&&((P=0|y)<0?(D+=k*(h-1),h=L(-h/P)):h=L(h/P),k*=P),new g(this.data,M,h,E,k,D)},m.transpose=function(b,y){b=b===void 0?0:0|b,y=y===void 0?1:0|y;var M=this.shape,h=this.stride;return new g(this.data,M[b],M[y],h[b],h[y],this.offset)},m.pick=function(b,y){var M=[],h=[],E=this.offset;return typeof b=="number"&&b>=0?E=E+this.stride[0]*b|0:(M.push(this.shape[0]),h.push(this.stride[0])),typeof y=="number"&&y>=0?E=E+this.stride[1]*y|0:(M.push(this.shape[1]),h.push(this.stride[1])),(0,_[M.length+1])(this.data,M,h,E)},function(b,y,M,h){return new g(b,y[0],y[1],M[0],M[1],h)}},3:function(c,_,p){function g(b,y,M,h,E,k,D,P){this.data=b,this.shape=[y,M,h],this.stride=[E,k,D],this.offset=0|P}var m=g.prototype;return m.dtype=c,m.dimension=3,Object.defineProperty(m,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(m,"order",{get:function(){var b=Math.abs(this.stride[0]),y=Math.abs(this.stride[1]),M=Math.abs(this.stride[2]);return b>y?y>M?[2,1,0]:b>M?[1,2,0]:[1,0,2]:b>M?[2,0,1]:M>y?[0,1,2]:[0,2,1]}}),m.set=function(b,y,M,h){return c==="generic"?this.data.set(this.offset+this.stride[0]*b+this.stride[1]*y+this.stride[2]*M,h):this.data[this.offset+this.stride[0]*b+this.stride[1]*y+this.stride[2]*M]=h},m.get=function(b,y,M){return c==="generic"?this.data.get(this.offset+this.stride[0]*b+this.stride[1]*y+this.stride[2]*M):this.data[this.offset+this.stride[0]*b+this.stride[1]*y+this.stride[2]*M]},m.index=function(b,y,M){return this.offset+this.stride[0]*b+this.stride[1]*y+this.stride[2]*M},m.hi=function(b,y,M){return new g(this.data,typeof b!="number"||b<0?this.shape[0]:0|b,typeof y!="number"||y<0?this.shape[1]:0|y,typeof M!="number"||M<0?this.shape[2]:0|M,this.stride[0],this.stride[1],this.stride[2],this.offset)},m.lo=function(b,y,M){var h=this.offset,E=0,k=this.shape[0],D=this.shape[1],P=this.shape[2],L=this.stride[0],O=this.stride[1],N=this.stride[2];return typeof b=="number"&&b>=0&&(h+=L*(E=0|b),k-=E),typeof y=="number"&&y>=0&&(h+=O*(E=0|y),D-=E),typeof M=="number"&&M>=0&&(h+=N*(E=0|M),P-=E),new g(this.data,k,D,P,L,O,N,h)},m.step=function(b,y,M){var h=this.shape[0],E=this.shape[1],k=this.shape[2],D=this.stride[0],P=this.stride[1],L=this.stride[2],O=this.offset,N=0,V=Math.ceil;return typeof b=="number"&&((N=0|b)<0?(O+=D*(h-1),h=V(-h/N)):h=V(h/N),D*=N),typeof y=="number"&&((N=0|y)<0?(O+=P*(E-1),E=V(-E/N)):E=V(E/N),P*=N),typeof M=="number"&&((N=0|M)<0?(O+=L*(k-1),k=V(-k/N)):k=V(k/N),L*=N),new g(this.data,h,E,k,D,P,L,O)},m.transpose=function(b,y,M){b=b===void 0?0:0|b,y=y===void 0?1:0|y,M=M===void 0?2:0|M;var h=this.shape,E=this.stride;return new g(this.data,h[b],h[y],h[M],E[b],E[y],E[M],this.offset)},m.pick=function(b,y,M){var h=[],E=[],k=this.offset;return typeof b=="number"&&b>=0?k=k+this.stride[0]*b|0:(h.push(this.shape[0]),E.push(this.stride[0])),typeof y=="number"&&y>=0?k=k+this.stride[1]*y|0:(h.push(this.shape[1]),E.push(this.stride[1])),typeof M=="number"&&M>=0?k=k+this.stride[2]*M|0:(h.push(this.shape[2]),E.push(this.stride[2])),(0,_[h.length+1])(this.data,h,E,k)},function(b,y,M,h){return new g(b,y[0],y[1],y[2],M[0],M[1],M[2],h)}},4:function(c,_,p){function g(b,y,M,h,E,k,D,P,L,O){this.data=b,this.shape=[y,M,h,E],this.stride=[k,D,P,L],this.offset=0|O}var m=g.prototype;return m.dtype=c,m.dimension=4,Object.defineProperty(m,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(m,"order",{get:p}),m.set=function(b,y,M,h,E){return c==="generic"?this.data.set(this.offset+this.stride[0]*b+this.stride[1]*y+this.stride[2]*M+this.stride[3]*h,E):this.data[this.offset+this.stride[0]*b+this.stride[1]*y+this.stride[2]*M+this.stride[3]*h]=E},m.get=function(b,y,M,h){return c==="generic"?this.data.get(this.offset+this.stride[0]*b+this.stride[1]*y+this.stride[2]*M+this.stride[3]*h):this.data[this.offset+this.stride[0]*b+this.stride[1]*y+this.stride[2]*M+this.stride[3]*h]},m.index=function(b,y,M,h){return this.offset+this.stride[0]*b+this.stride[1]*y+this.stride[2]*M+this.stride[3]*h},m.hi=function(b,y,M,h){return new g(this.data,typeof b!="number"||b<0?this.shape[0]:0|b,typeof y!="number"||y<0?this.shape[1]:0|y,typeof M!="number"||M<0?this.shape[2]:0|M,typeof h!="number"||h<0?this.shape[3]:0|h,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},m.lo=function(b,y,M,h){var E=this.offset,k=0,D=this.shape[0],P=this.shape[1],L=this.shape[2],O=this.shape[3],N=this.stride[0],V=this.stride[1],F=this.stride[2],j=this.stride[3];return typeof b=="number"&&b>=0&&(E+=N*(k=0|b),D-=k),typeof y=="number"&&y>=0&&(E+=V*(k=0|y),P-=k),typeof M=="number"&&M>=0&&(E+=F*(k=0|M),L-=k),typeof h=="number"&&h>=0&&(E+=j*(k=0|h),O-=k),new g(this.data,D,P,L,O,N,V,F,j,E)},m.step=function(b,y,M,h){var E=this.shape[0],k=this.shape[1],D=this.shape[2],P=this.shape[3],L=this.stride[0],O=this.stride[1],N=this.stride[2],V=this.stride[3],F=this.offset,j=0,Z=Math.ceil;return typeof b=="number"&&((j=0|b)<0?(F+=L*(E-1),E=Z(-E/j)):E=Z(E/j),L*=j),typeof y=="number"&&((j=0|y)<0?(F+=O*(k-1),k=Z(-k/j)):k=Z(k/j),O*=j),typeof M=="number"&&((j=0|M)<0?(F+=N*(D-1),D=Z(-D/j)):D=Z(D/j),N*=j),typeof h=="number"&&((j=0|h)<0?(F+=V*(P-1),P=Z(-P/j)):P=Z(P/j),V*=j),new g(this.data,E,k,D,P,L,O,N,V,F)},m.transpose=function(b,y,M,h){b=b===void 0?0:0|b,y=y===void 0?1:0|y,M=M===void 0?2:0|M,h=h===void 0?3:0|h;var E=this.shape,k=this.stride;return new g(this.data,E[b],E[y],E[M],E[h],k[b],k[y],k[M],k[h],this.offset)},m.pick=function(b,y,M,h){var E=[],k=[],D=this.offset;return typeof b=="number"&&b>=0?D=D+this.stride[0]*b|0:(E.push(this.shape[0]),k.push(this.stride[0])),typeof y=="number"&&y>=0?D=D+this.stride[1]*y|0:(E.push(this.shape[1]),k.push(this.stride[1])),typeof M=="number"&&M>=0?D=D+this.stride[2]*M|0:(E.push(this.shape[2]),k.push(this.stride[2])),typeof h=="number"&&h>=0?D=D+this.stride[3]*h|0:(E.push(this.shape[3]),k.push(this.stride[3])),(0,_[E.length+1])(this.data,E,k,D)},function(b,y,M,h){return new g(b,y[0],y[1],y[2],y[3],M[0],M[1],M[2],M[3],h)}},5:function(c,_,p){function g(b,y,M,h,E,k,D,P,L,O,N,V){this.data=b,this.shape=[y,M,h,E,k],this.stride=[D,P,L,O,N],this.offset=0|V}var m=g.prototype;return m.dtype=c,m.dimension=5,Object.defineProperty(m,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(m,"order",{get:p}),m.set=function(b,y,M,h,E,k){return c==="generic"?this.data.set(this.offset+this.stride[0]*b+this.stride[1]*y+this.stride[2]*M+this.stride[3]*h+this.stride[4]*E,k):this.data[this.offset+this.stride[0]*b+this.stride[1]*y+this.stride[2]*M+this.stride[3]*h+this.stride[4]*E]=k},m.get=function(b,y,M,h,E){return c==="generic"?this.data.get(this.offset+this.stride[0]*b+this.stride[1]*y+this.stride[2]*M+this.stride[3]*h+this.stride[4]*E):this.data[this.offset+this.stride[0]*b+this.stride[1]*y+this.stride[2]*M+this.stride[3]*h+this.stride[4]*E]},m.index=function(b,y,M,h,E){return this.offset+this.stride[0]*b+this.stride[1]*y+this.stride[2]*M+this.stride[3]*h+this.stride[4]*E},m.hi=function(b,y,M,h,E){return new g(this.data,typeof b!="number"||b<0?this.shape[0]:0|b,typeof y!="number"||y<0?this.shape[1]:0|y,typeof M!="number"||M<0?this.shape[2]:0|M,typeof h!="number"||h<0?this.shape[3]:0|h,typeof E!="number"||E<0?this.shape[4]:0|E,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},m.lo=function(b,y,M,h,E){var k=this.offset,D=0,P=this.shape[0],L=this.shape[1],O=this.shape[2],N=this.shape[3],V=this.shape[4],F=this.stride[0],j=this.stride[1],Z=this.stride[2],z=this.stride[3],H=this.stride[4];return typeof b=="number"&&b>=0&&(k+=F*(D=0|b),P-=D),typeof y=="number"&&y>=0&&(k+=j*(D=0|y),L-=D),typeof M=="number"&&M>=0&&(k+=Z*(D=0|M),O-=D),typeof h=="number"&&h>=0&&(k+=z*(D=0|h),N-=D),typeof E=="number"&&E>=0&&(k+=H*(D=0|E),V-=D),new g(this.data,P,L,O,N,V,F,j,Z,z,H,k)},m.step=function(b,y,M,h,E){var k=this.shape[0],D=this.shape[1],P=this.shape[2],L=this.shape[3],O=this.shape[4],N=this.stride[0],V=this.stride[1],F=this.stride[2],j=this.stride[3],Z=this.stride[4],z=this.offset,H=0,U=Math.ceil;return typeof b=="number"&&((H=0|b)<0?(z+=N*(k-1),k=U(-k/H)):k=U(k/H),N*=H),typeof y=="number"&&((H=0|y)<0?(z+=V*(D-1),D=U(-D/H)):D=U(D/H),V*=H),typeof M=="number"&&((H=0|M)<0?(z+=F*(P-1),P=U(-P/H)):P=U(P/H),F*=H),typeof h=="number"&&((H=0|h)<0?(z+=j*(L-1),L=U(-L/H)):L=U(L/H),j*=H),typeof E=="number"&&((H=0|E)<0?(z+=Z*(O-1),O=U(-O/H)):O=U(O/H),Z*=H),new g(this.data,k,D,P,L,O,N,V,F,j,Z,z)},m.transpose=function(b,y,M,h,E){b=b===void 0?0:0|b,y=y===void 0?1:0|y,M=M===void 0?2:0|M,h=h===void 0?3:0|h,E=E===void 0?4:0|E;var k=this.shape,D=this.stride;return new g(this.data,k[b],k[y],k[M],k[h],k[E],D[b],D[y],D[M],D[h],D[E],this.offset)},m.pick=function(b,y,M,h,E){var k=[],D=[],P=this.offset;return typeof b=="number"&&b>=0?P=P+this.stride[0]*b|0:(k.push(this.shape[0]),D.push(this.stride[0])),typeof y=="number"&&y>=0?P=P+this.stride[1]*y|0:(k.push(this.shape[1]),D.push(this.stride[1])),typeof M=="number"&&M>=0?P=P+this.stride[2]*M|0:(k.push(this.shape[2]),D.push(this.stride[2])),typeof h=="number"&&h>=0?P=P+this.stride[3]*h|0:(k.push(this.shape[3]),D.push(this.stride[3])),typeof E=="number"&&E>=0?P=P+this.stride[4]*E|0:(k.push(this.shape[4]),D.push(this.stride[4])),(0,_[k.length+1])(this.data,k,D,P)},function(b,y,M,h){return new g(b,y[0],y[1],y[2],y[3],y[4],M[0],M[1],M[2],M[3],M[4],h)}}};function l(c,_){var p=_===-1?"T":String(_),g=u[p];return _===-1?g(c):_===0?g(c,d[c][0]):g(c,d[c],a)}var d={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};f.exports=function(c,_,p,g){if(c===void 0)return(0,d.array[0])([]);typeof c=="number"&&(c=[c]),_===void 0&&(_=[c.length]);var m=_.length;if(p===void 0){p=new Array(m);for(var b=m-1,y=1;b>=0;--b)p[b]=y,y*=_[b]}if(g===void 0)for(g=0,b=0;b<m;++b)p[b]<0&&(g-=(_[b]-1)*p[b]);for(var M=function(E){if(o(E))return"buffer";if(r)switch(Object.prototype.toString.call(E)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(E)?"array":"generic"}(c),h=d[M];h.length<=m+1;)h.push(l(M,h.length-1));return(0,h[m+1])(c,_,p,g)}},1278:function(f,s,t){"use strict";var o=t(2361),r=Math.pow(2,-1074),i=-1>>>0;f.exports=function(a,u){if(isNaN(a)||isNaN(u))return NaN;if(a===u)return a;if(a===0)return u<0?-r:r;var l=o.hi(a),d=o.lo(a);return u>a==a>0?d===i?(l+=1,d=0):d+=1:d===0?(d=i,l-=1):d-=1,o.pack(d,l)}},8406:function(f,s){s.vertexNormals=function(t,o,r){for(var i=o.length,a=new Array(i),u=r===void 0?1e-6:r,l=0;l<i;++l)a[l]=[0,0,0];for(l=0;l<t.length;++l)for(var d=t[l],c=0,_=d[d.length-1],p=d[0],g=0;g<d.length;++g){c=_,_=p,p=d[(g+1)%d.length];for(var m=o[c],b=o[_],y=o[p],M=new Array(3),h=0,E=new Array(3),k=0,D=0;D<3;++D)M[D]=m[D]-b[D],h+=M[D]*M[D],E[D]=y[D]-b[D],k+=E[D]*E[D];if(h*k>u){var P=a[_],L=1/Math.sqrt(h*k);for(D=0;D<3;++D){var O=(D+1)%3,N=(D+2)%3;P[D]+=L*(E[O]*M[N]-E[N]*M[O])}}}for(l=0;l<i;++l){P=a[l];var V=0;for(D=0;D<3;++D)V+=P[D]*P[D];if(V>u)for(L=1/Math.sqrt(V),D=0;D<3;++D)P[D]*=L;else for(D=0;D<3;++D)P[D]=0}return a},s.faceNormals=function(t,o,r){for(var i=t.length,a=new Array(i),u=r===void 0?1e-6:r,l=0;l<i;++l){for(var d=t[l],c=new Array(3),_=0;_<3;++_)c[_]=o[d[_]];var p=new Array(3),g=new Array(3);for(_=0;_<3;++_)p[_]=c[1][_]-c[0][_],g[_]=c[2][_]-c[0][_];var m=new Array(3),b=0;for(_=0;_<3;++_){var y=(_+1)%3,M=(_+2)%3;m[_]=p[y]*g[M]-p[M]*g[y],b+=m[_]*m[_]}for(b=b>u?1/Math.sqrt(b):0,_=0;_<3;++_)m[_]*=b;a[l]=m}return a}},4081:function(f){"use strict";f.exports=function(s,t,o,r,i,a,u,l,d,c){var _=t+a+c;if(p>0){var p=Math.sqrt(_+1);s[0]=.5*(u-d)/p,s[1]=.5*(l-r)/p,s[2]=.5*(o-a)/p,s[3]=.5*p}else{var g=Math.max(t,a,c);p=Math.sqrt(2*g-_+1),t>=g?(s[0]=.5*p,s[1]=.5*(i+o)/p,s[2]=.5*(l+r)/p,s[3]=.5*(u-d)/p):a>=g?(s[0]=.5*(o+i)/p,s[1]=.5*p,s[2]=.5*(d+u)/p,s[3]=.5*(l-r)/p):(s[0]=.5*(r+l)/p,s[1]=.5*(u+d)/p,s[2]=.5*p,s[3]=.5*(o-i)/p)}return s}},9977:function(f,s,t){"use strict";f.exports=function(g){var m=(g=g||{}).center||[0,0,0],b=g.rotation||[0,0,0,1],y=g.radius||1;m=[].slice.call(m,0,3),c(b=[].slice.call(b,0,4),b);var M=new _(b,m,Math.log(y));return M.setDistanceLimits(g.zoomMin,g.zoomMax),("eye"in g||"up"in g)&&M.lookAt(0,g.eye,g.center,g.up),M};var o=t(9215),r=t(6582),i=t(7399),a=t(7608),u=t(4081);function l(g,m,b){return Math.sqrt(Math.pow(g,2)+Math.pow(m,2)+Math.pow(b,2))}function d(g,m,b,y){return Math.sqrt(Math.pow(g,2)+Math.pow(m,2)+Math.pow(b,2)+Math.pow(y,2))}function c(g,m){var b=m[0],y=m[1],M=m[2],h=m[3],E=d(b,y,M,h);E>1e-6?(g[0]=b/E,g[1]=y/E,g[2]=M/E,g[3]=h/E):(g[0]=g[1]=g[2]=0,g[3]=1)}function _(g,m,b){this.radius=o([b]),this.center=o(m),this.rotation=o(g),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var p=_.prototype;p.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},p.recalcMatrix=function(g){this.radius.curve(g),this.center.curve(g),this.rotation.curve(g);var m=this.computedRotation;c(m,m);var b=this.computedMatrix;i(b,m);var y=this.computedCenter,M=this.computedEye,h=this.computedUp,E=Math.exp(this.computedRadius[0]);M[0]=y[0]+E*b[2],M[1]=y[1]+E*b[6],M[2]=y[2]+E*b[10],h[0]=b[1],h[1]=b[5],h[2]=b[9];for(var k=0;k<3;++k){for(var D=0,P=0;P<3;++P)D+=b[k+4*P]*M[P];b[12+k]=-D}},p.getMatrix=function(g,m){this.recalcMatrix(g);var b=this.computedMatrix;if(m){for(var y=0;y<16;++y)m[y]=b[y];return m}return b},p.idle=function(g){this.center.idle(g),this.radius.idle(g),this.rotation.idle(g)},p.flush=function(g){this.center.flush(g),this.radius.flush(g),this.rotation.flush(g)},p.pan=function(g,m,b,y){m=m||0,b=b||0,y=y||0,this.recalcMatrix(g);var M=this.computedMatrix,h=M[1],E=M[5],k=M[9],D=l(h,E,k);h/=D,E/=D,k/=D;var P=M[0],L=M[4],O=M[8],N=P*h+L*E+O*k,V=l(P-=h*N,L-=E*N,O-=k*N);P/=V,L/=V,O/=V;var F=M[2],j=M[6],Z=M[10],z=F*h+j*E+Z*k,H=F*P+j*L+Z*O,U=l(F-=z*h+H*P,j-=z*E+H*L,Z-=z*k+H*O);F/=U,j/=U,Z/=U;var re=P*m+h*b,ee=L*m+E*b,J=O*m+k*b;this.center.move(g,re,ee,J);var Q=Math.exp(this.computedRadius[0]);Q=Math.max(1e-4,Q+y),this.radius.set(g,Math.log(Q))},p.rotate=function(g,m,b,y){this.recalcMatrix(g),m=m||0,b=b||0;var M=this.computedMatrix,h=M[0],E=M[4],k=M[8],D=M[1],P=M[5],L=M[9],O=M[2],N=M[6],V=M[10],F=m*h+b*D,j=m*E+b*P,Z=m*k+b*L,z=-(N*Z-V*j),H=-(V*F-O*Z),U=-(O*j-N*F),re=Math.sqrt(Math.max(0,1-Math.pow(z,2)-Math.pow(H,2)-Math.pow(U,2))),ee=d(z,H,U,re);ee>1e-6?(z/=ee,H/=ee,U/=ee,re/=ee):(z=H=U=0,re=1);var J=this.computedRotation,Q=J[0],ne=J[1],K=J[2],oe=J[3],le=Q*re+oe*z+ne*U-K*H,se=ne*re+oe*H+K*z-Q*U,de=K*re+oe*U+Q*H-ne*z,be=oe*re-Q*z-ne*H-K*U;if(y){z=O,H=N,U=V;var _e=Math.sin(y)/l(z,H,U);z*=_e,H*=_e,U*=_e,be=be*(re=Math.cos(m))-(le=le*re+be*z+se*U-de*H)*z-(se=se*re+be*H+de*z-le*U)*H-(de=de*re+be*U+le*H-se*z)*U}var xe=d(le,se,de,be);xe>1e-6?(le/=xe,se/=xe,de/=xe,be/=xe):(le=se=de=0,be=1),this.rotation.set(g,le,se,de,be)},p.lookAt=function(g,m,b,y){this.recalcMatrix(g),b=b||this.computedCenter,m=m||this.computedEye,y=y||this.computedUp;var M=this.computedMatrix;r(M,m,b,y);var h=this.computedRotation;u(h,M[0],M[1],M[2],M[4],M[5],M[6],M[8],M[9],M[10]),c(h,h),this.rotation.set(g,h[0],h[1],h[2],h[3]);for(var E=0,k=0;k<3;++k)E+=Math.pow(b[k]-m[k],2);this.radius.set(g,.5*Math.log(Math.max(E,1e-6))),this.center.set(g,b[0],b[1],b[2])},p.translate=function(g,m,b,y){this.center.move(g,m||0,b||0,y||0)},p.setMatrix=function(g,m){var b=this.computedRotation;u(b,m[0],m[1],m[2],m[4],m[5],m[6],m[8],m[9],m[10]),c(b,b),this.rotation.set(g,b[0],b[1],b[2],b[3]);var y=this.computedMatrix;a(y,m);var M=y[15];if(Math.abs(M)>1e-6){var h=y[12]/M,E=y[13]/M,k=y[14]/M;this.recalcMatrix(g);var D=Math.exp(this.computedRadius[0]);this.center.set(g,h-y[2]*D,E-y[6]*D,k-y[10]*D),this.radius.idle(g)}else this.center.idle(g),this.radius.idle(g)},p.setDistance=function(g,m){m>0&&this.radius.set(g,Math.log(m))},p.setDistanceLimits=function(g,m){g=g>0?Math.log(g):-1/0,m=m>0?Math.log(m):1/0,m=Math.max(m,g),this.radius.bounds[0][0]=g,this.radius.bounds[1][0]=m},p.getDistanceLimits=function(g){var m=this.radius.bounds;return g?(g[0]=Math.exp(m[0][0]),g[1]=Math.exp(m[1][0]),g):[Math.exp(m[0][0]),Math.exp(m[1][0])]},p.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},p.fromJSON=function(g){var m=this.lastT(),b=g.center;b&&this.center.set(m,b[0],b[1],b[2]);var y=g.rotation;y&&this.rotation.set(m,y[0],y[1],y[2],y[3]);var M=g.distance;M&&M>0&&this.radius.set(m,Math.log(M)),this.setDistanceLimits(g.zoomMin,g.zoomMax)}},1371:function(f,s,t){"use strict";var o=t(3233);f.exports=function(r,i,a){return o(a=a!==void 0?a+"":" ",i)+r}},3202:function(f){f.exports=function(s,t){t||(t=[0,""]),s=String(s);var o=parseFloat(s,10);return t[0]=o,t[1]=s.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},3088:function(f,s,t){"use strict";f.exports=function(r,i){for(var a=0|i.length,u=r.length,l=[new Array(a),new Array(a)],d=0;d<a;++d)l[0][d]=[],l[1][d]=[];for(d=0;d<u;++d){var c=r[d];l[0][c[0]].push(c),l[1][c[1]].push(c)}var _=[];for(d=0;d<a;++d)l[0][d].length+l[1][d].length===0&&_.push([d]);function p(E,k){var D=l[k][E[k]];D.splice(D.indexOf(E),1)}function g(E,k,D){for(var P,L,O,N=0;N<2;++N)if(l[N][k].length>0){P=l[N][k][0],O=N;break}L=P[1^O];for(var V=0;V<2;++V)for(var F=l[V][k],j=0;j<F.length;++j){var Z=F[j],z=Z[1^V];o(i[E],i[k],i[L],i[z])>0&&(P=Z,L=z,O=V)}return D||P&&p(P,O),L}function m(E,k){var D=l[k][E][0],P=[E];p(D,k);for(var L=D[1^k];;){for(;L!==E;)P.push(L),L=g(P[P.length-2],L,!1);if(l[0][E].length+l[1][E].length===0)break;var O=P[P.length-1],N=E,V=P[1],F=g(O,N,!0);if(o(i[O],i[N],i[V],i[F])<0)break;P.push(E),L=g(O,N)}return P}function b(E,k){return k[1]===k[k.length-1]}for(d=0;d<a;++d)for(var y=0;y<2;++y){for(var M=[];l[y][d].length>0;){l[0][d].length;var h=m(d,y);b(0,h)?M.push.apply(M,h):(M.length>0&&_.push(M),M=h)}M.length>0&&_.push(M)}return _};var o=t(3140)},5609:function(f,s,t){"use strict";f.exports=function(r,i){for(var a=o(r,i.length),u=new Array(i.length),l=new Array(i.length),d=[],c=0;c<i.length;++c){var _=a[c].length;l[c]=_,u[c]=!0,_<=1&&d.push(c)}for(;d.length>0;){u[y=d.pop()]=!1;var p=a[y];for(c=0;c<p.length;++c){var g=p[c];--l[g]==0&&d.push(g)}}var m=new Array(i.length),b=[];for(c=0;c<i.length;++c)if(u[c]){var y=b.length;m[c]=y,b.push(i[c])}else m[c]=-1;var M=[];for(c=0;c<r.length;++c){var h=r[c];u[h[0]]&&u[h[1]]&&M.push([m[h[0]],m[h[1]]])}return[M,b]};var o=t(3134)},2095:function(f,s,t){"use strict";f.exports=function(_,p){var g=d(_,p);_=g[0];for(var m=(p=g[1]).length,b=(_.length,o(_,p.length)),y=0;y<m;++y)if(b[y].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var M=r(_,p),h=(M=M.filter(function(me){for(var Me=me.length,Ae=[0],ce=0;ce<Me;++ce){var ae=p[me[ce]],pe=p[me[(ce+1)%Me]],De=a(-ae[0],ae[1]),ke=a(-ae[0],pe[1]),Ee=a(pe[0],ae[1]),Ie=a(pe[0],pe[1]);Ae=u(Ae,u(u(De,ke),u(Ee,Ie)))}return Ae[Ae.length-1]>0})).length,E=new Array(h),k=new Array(h);for(y=0;y<h;++y){E[y]=y;var D=new Array(h),P=M[y].map(function(me){return p[me]}),L=i([P]),O=0;e:for(var N=0;N<h;++N)if(D[N]=0,y!==N){for(var V=(ve=M[N]).length,F=0;F<V;++F){var j=L(p[ve[F]]);if(j!==0){j<0&&(D[N]=1,O+=1);continue e}}D[N]=1,O+=1}k[y]=[O,y,D]}for(k.sort(function(me,Me){return Me[0]-me[0]}),y=0;y<h;++y){var Z=(D=k[y])[1],z=D[2];for(N=0;N<h;++N)z[N]&&(E[N]=Z)}var H=function(me){for(var Me=new Array(me),Ae=0;Ae<me;++Ae)Me[Ae]=[];return Me}(h);for(y=0;y<h;++y)H[y].push(E[y]),H[E[y]].push(y);var U={},re=c(m,!1);for(y=0;y<h;++y)for(V=(ve=M[y]).length,N=0;N<V;++N){var ee=ve[N],J=ve[(N+1)%V],Q=Math.min(ee,J)+":"+Math.max(ee,J);if(Q in U){var ne=U[Q];H[ne].push(y),H[y].push(ne),re[ee]=re[J]=!0}else U[Q]=y}function K(me){for(var Me=me.length,Ae=0;Ae<Me;++Ae)if(!re[me[Ae]])return!1;return!0}var oe=[],le=c(h,-1);for(y=0;y<h;++y)E[y]!==y||K(M[y])?le[y]=-1:(oe.push(y),le[y]=0);for(g=[];oe.length>0;){var se=oe.pop(),de=H[se];l(de,function(me,Me){return me-Me});var be,_e=de.length,xe=le[se];for(xe===0&&(be=[ve=M[se]]),y=0;y<_e;++y){var ve,ye=de[y];le[ye]>=0||(le[ye]=1^xe,oe.push(ye),xe===0&&(K(ve=M[ye])||(ve.reverse(),be.push(ve))))}xe===0&&g.push(be)}return g};var o=t(3134),r=t(3088),i=t(5085),a=t(5250),u=t(8210),l=t(1682),d=t(5609);function c(_,p){for(var g=new Array(_),m=0;m<_;++m)g[m]=p;return g}},5085:function(f,s,t){f.exports=function(c){for(var _=c.length,p=[],g=[],m=0;m<_;++m)for(var b=c[m],y=b.length,M=y-1,h=0;h<y;M=h++){var E=b[M],k=b[h];E[0]===k[0]?g.push([E,k]):p.push([E,k])}if(p.length===0)return g.length===0?d:(D=l(g),function(O){return D(O[0],O[1])?0:1});var D,P=r(p),L=function(O,N){return function(V){var F=a.le(N,V[0]);if(F<0)return 1;var j=O[F];if(!j){if(!(F>0&&N[F]===V[0]))return 1;j=O[F-1]}for(var Z=1;j;){var z=j.key,H=o(V,z[0],z[1]);if(z[0][0]<z[1][0])if(H<0)j=j.left;else{if(!(H>0))return 0;Z=-1,j=j.right}else if(H>0)j=j.left;else{if(!(H<0))return 0;Z=1,j=j.right}}return Z}}(P.slabs,P.coordinates);return g.length===0?L:function(O,N){return function(V){return O(V[0],V[1])?0:N(V)}}(l(g),L)};var o=t(3250)[3],r=t(4209),i=t(3352),a=t(2478);function u(){return!0}function l(c){for(var _={},p=0;p<c.length;++p){var g=c[p],m=g[0][0],b=g[0][1],y=g[1][1],M=[Math.min(b,y),Math.max(b,y)];m in _?_[m].push(M):_[m]=[M]}var h={},E=Object.keys(_);for(p=0;p<E.length;++p){var k=_[E[p]];h[E[p]]=i(k)}return function(D){return function(P,L){var O=D[P];return!!O&&!!O.queryPoint(L,u)}}(h)}function d(c){return 1}},9346:function(f){"use strict";var s=new Float64Array(4),t=new Float64Array(4),o=new Float64Array(4);f.exports=function(r,i,a,u,l){s.length<u.length&&(s=new Float64Array(u.length),t=new Float64Array(u.length),o=new Float64Array(u.length));for(var d=0;d<u.length;++d)s[d]=r[d]-u[d],t[d]=i[d]-r[d],o[d]=a[d]-r[d];var c=0,_=0,p=0,g=0,m=0,b=0;for(d=0;d<u.length;++d){var y=t[d],M=o[d],h=s[d];c+=y*y,_+=y*M,p+=M*M,g+=h*y,m+=h*M,b+=h*h}var E,k,D,P,L,O=Math.abs(c*p-_*_),N=_*m-p*g,V=_*g-c*m;if(N+V<=O)if(N<0)V<0&&g<0?(V=0,-g>=c?(N=1,E=c+2*g+b):E=g*(N=-g/c)+b):(N=0,m>=0?(V=0,E=b):-m>=p?(V=1,E=p+2*m+b):E=m*(V=-m/p)+b);else if(V<0)V=0,g>=0?(N=0,E=b):-g>=c?(N=1,E=c+2*g+b):E=g*(N=-g/c)+b;else{var F=1/O;E=(N*=F)*(c*N+_*(V*=F)+2*g)+V*(_*N+p*V+2*m)+b}else N<0?(D=p+m)>(k=_+g)?(P=D-k)>=(L=c-2*_+p)?(N=1,V=0,E=c+2*g+b):E=(N=P/L)*(c*N+_*(V=1-N)+2*g)+V*(_*N+p*V+2*m)+b:(N=0,D<=0?(V=1,E=p+2*m+b):m>=0?(V=0,E=b):E=m*(V=-m/p)+b):V<0?(D=c+g)>(k=_+m)?(P=D-k)>=(L=c-2*_+p)?(V=1,N=0,E=p+2*m+b):E=(N=1-(V=P/L))*(c*N+_*V+2*g)+V*(_*N+p*V+2*m)+b:(V=0,D<=0?(N=1,E=c+2*g+b):g>=0?(N=0,E=b):E=g*(N=-g/c)+b):(P=p+m-_-g)<=0?(N=0,V=1,E=p+2*m+b):P>=(L=c-2*_+p)?(N=1,V=0,E=c+2*g+b):E=(N=P/L)*(c*N+_*(V=1-N)+2*g)+V*(_*N+p*V+2*m)+b;var j=1-N-V;for(d=0;d<u.length;++d)l[d]=j*r[d]+N*i[d]+V*a[d];return E<0?0:E}},8648:function(f,s,t){f.exports=t(783)},2653:function(f,s,t){"use strict";var o=t(3865);f.exports=function(r,i){for(var a=r.length,u=new Array(a),l=0;l<a;++l)u[l]=o(r[l],i[l]);return u}},5838:function(f,s,t){"use strict";f.exports=function(r){for(var i=new Array(r.length),a=0;a<r.length;++a)i[a]=o(r[a]);return i};var o=t(7842)},8987:function(f,s,t){"use strict";var o=t(7842),r=t(6504);f.exports=function(i,a){for(var u=o(a),l=i.length,d=new Array(l),c=0;c<l;++c)d[c]=r(i[c],u);return d}},544:function(f,s,t){"use strict";var o=t(5572);f.exports=function(r,i){for(var a=r.length,u=new Array(a),l=0;l<a;++l)u[l]=o(r[l],i[l]);return u}},5771:function(f,s,t){"use strict";var o=t(8507),r=t(3788),i=t(2419);f.exports=function(a){a.sort(r);for(var u=a.length,l=0,d=0;d<u;++d){var c=a[d],_=i(c);if(_!==0){if(l>0){var p=a[l-1];if(o(c,p)===0&&i(p)!==_){l-=1;continue}}a[l++]=c}}return a.length=l,a}},3233:function(f){"use strict";var s,t="";f.exports=function(o,r){if(typeof o!="string")throw new TypeError("expected a string");if(r===1)return o;if(r===2)return o+o;var i=o.length*r;if(s!==o||s===void 0)s=o,t="";else if(t.length>=i)return t.substr(0,i);for(;i>t.length&&r>1;)1&r&&(t+=o),r>>=1,o+=o;return t=(t+=o).substr(0,i)}},3025:function(f,s,t){f.exports=t.g.performance&&t.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},7004:function(f){"use strict";f.exports=function(s){for(var t=s.length,o=s[s.length-1],r=t,i=t-2;i>=0;--i){var a=o;(d=(l=s[i])-((o=a+l)-a))&&(s[--r]=o,o=d)}var u=0;for(i=r;i<t;++i){var l,d;(d=(l=o)-((o=(a=s[i])+l)-a))&&(s[u++]=d)}return s[u++]=o,s.length=u,s}},2962:function(f,s,t){"use strict";var o=t(5250),r=t(8210),i=t(3012),a=t(7004);function u(m,b,y,M){return function(h){return M(m(y(h[0][0],h[1][1]),y(-h[0][1],h[1][0])))}}function l(m,b,y,M){return function(h){return M(m(b(m(y(h[1][1],h[2][2]),y(-h[1][2],h[2][1])),h[0][0]),m(b(m(y(h[1][0],h[2][2]),y(-h[1][2],h[2][0])),-h[0][1]),b(m(y(h[1][0],h[2][1]),y(-h[1][1],h[2][0])),h[0][2]))))}}function d(m,b,y,M){return function(h){return M(m(m(b(m(b(m(y(h[2][2],h[3][3]),y(-h[2][3],h[3][2])),h[1][1]),m(b(m(y(h[2][1],h[3][3]),y(-h[2][3],h[3][1])),-h[1][2]),b(m(y(h[2][1],h[3][2]),y(-h[2][2],h[3][1])),h[1][3]))),h[0][0]),b(m(b(m(y(h[2][2],h[3][3]),y(-h[2][3],h[3][2])),h[1][0]),m(b(m(y(h[2][0],h[3][3]),y(-h[2][3],h[3][0])),-h[1][2]),b(m(y(h[2][0],h[3][2]),y(-h[2][2],h[3][0])),h[1][3]))),-h[0][1])),m(b(m(b(m(y(h[2][1],h[3][3]),y(-h[2][3],h[3][1])),h[1][0]),m(b(m(y(h[2][0],h[3][3]),y(-h[2][3],h[3][0])),-h[1][1]),b(m(y(h[2][0],h[3][1]),y(-h[2][1],h[3][0])),h[1][3]))),h[0][2]),b(m(b(m(y(h[2][1],h[3][2]),y(-h[2][2],h[3][1])),h[1][0]),m(b(m(y(h[2][0],h[3][2]),y(-h[2][2],h[3][0])),-h[1][1]),b(m(y(h[2][0],h[3][1]),y(-h[2][1],h[3][0])),h[1][2]))),-h[0][3]))))}}function c(m,b,y,M){return function(h){return M(m(m(b(m(m(b(m(b(m(y(h[3][3],h[4][4]),y(-h[3][4],h[4][3])),h[2][2]),m(b(m(y(h[3][2],h[4][4]),y(-h[3][4],h[4][2])),-h[2][3]),b(m(y(h[3][2],h[4][3]),y(-h[3][3],h[4][2])),h[2][4]))),h[1][1]),b(m(b(m(y(h[3][3],h[4][4]),y(-h[3][4],h[4][3])),h[2][1]),m(b(m(y(h[3][1],h[4][4]),y(-h[3][4],h[4][1])),-h[2][3]),b(m(y(h[3][1],h[4][3]),y(-h[3][3],h[4][1])),h[2][4]))),-h[1][2])),m(b(m(b(m(y(h[3][2],h[4][4]),y(-h[3][4],h[4][2])),h[2][1]),m(b(m(y(h[3][1],h[4][4]),y(-h[3][4],h[4][1])),-h[2][2]),b(m(y(h[3][1],h[4][2]),y(-h[3][2],h[4][1])),h[2][4]))),h[1][3]),b(m(b(m(y(h[3][2],h[4][3]),y(-h[3][3],h[4][2])),h[2][1]),m(b(m(y(h[3][1],h[4][3]),y(-h[3][3],h[4][1])),-h[2][2]),b(m(y(h[3][1],h[4][2]),y(-h[3][2],h[4][1])),h[2][3]))),-h[1][4]))),h[0][0]),b(m(m(b(m(b(m(y(h[3][3],h[4][4]),y(-h[3][4],h[4][3])),h[2][2]),m(b(m(y(h[3][2],h[4][4]),y(-h[3][4],h[4][2])),-h[2][3]),b(m(y(h[3][2],h[4][3]),y(-h[3][3],h[4][2])),h[2][4]))),h[1][0]),b(m(b(m(y(h[3][3],h[4][4]),y(-h[3][4],h[4][3])),h[2][0]),m(b(m(y(h[3][0],h[4][4]),y(-h[3][4],h[4][0])),-h[2][3]),b(m(y(h[3][0],h[4][3]),y(-h[3][3],h[4][0])),h[2][4]))),-h[1][2])),m(b(m(b(m(y(h[3][2],h[4][4]),y(-h[3][4],h[4][2])),h[2][0]),m(b(m(y(h[3][0],h[4][4]),y(-h[3][4],h[4][0])),-h[2][2]),b(m(y(h[3][0],h[4][2]),y(-h[3][2],h[4][0])),h[2][4]))),h[1][3]),b(m(b(m(y(h[3][2],h[4][3]),y(-h[3][3],h[4][2])),h[2][0]),m(b(m(y(h[3][0],h[4][3]),y(-h[3][3],h[4][0])),-h[2][2]),b(m(y(h[3][0],h[4][2]),y(-h[3][2],h[4][0])),h[2][3]))),-h[1][4]))),-h[0][1])),m(b(m(m(b(m(b(m(y(h[3][3],h[4][4]),y(-h[3][4],h[4][3])),h[2][1]),m(b(m(y(h[3][1],h[4][4]),y(-h[3][4],h[4][1])),-h[2][3]),b(m(y(h[3][1],h[4][3]),y(-h[3][3],h[4][1])),h[2][4]))),h[1][0]),b(m(b(m(y(h[3][3],h[4][4]),y(-h[3][4],h[4][3])),h[2][0]),m(b(m(y(h[3][0],h[4][4]),y(-h[3][4],h[4][0])),-h[2][3]),b(m(y(h[3][0],h[4][3]),y(-h[3][3],h[4][0])),h[2][4]))),-h[1][1])),m(b(m(b(m(y(h[3][1],h[4][4]),y(-h[3][4],h[4][1])),h[2][0]),m(b(m(y(h[3][0],h[4][4]),y(-h[3][4],h[4][0])),-h[2][1]),b(m(y(h[3][0],h[4][1]),y(-h[3][1],h[4][0])),h[2][4]))),h[1][3]),b(m(b(m(y(h[3][1],h[4][3]),y(-h[3][3],h[4][1])),h[2][0]),m(b(m(y(h[3][0],h[4][3]),y(-h[3][3],h[4][0])),-h[2][1]),b(m(y(h[3][0],h[4][1]),y(-h[3][1],h[4][0])),h[2][3]))),-h[1][4]))),h[0][2]),m(b(m(m(b(m(b(m(y(h[3][2],h[4][4]),y(-h[3][4],h[4][2])),h[2][1]),m(b(m(y(h[3][1],h[4][4]),y(-h[3][4],h[4][1])),-h[2][2]),b(m(y(h[3][1],h[4][2]),y(-h[3][2],h[4][1])),h[2][4]))),h[1][0]),b(m(b(m(y(h[3][2],h[4][4]),y(-h[3][4],h[4][2])),h[2][0]),m(b(m(y(h[3][0],h[4][4]),y(-h[3][4],h[4][0])),-h[2][2]),b(m(y(h[3][0],h[4][2]),y(-h[3][2],h[4][0])),h[2][4]))),-h[1][1])),m(b(m(b(m(y(h[3][1],h[4][4]),y(-h[3][4],h[4][1])),h[2][0]),m(b(m(y(h[3][0],h[4][4]),y(-h[3][4],h[4][0])),-h[2][1]),b(m(y(h[3][0],h[4][1]),y(-h[3][1],h[4][0])),h[2][4]))),h[1][2]),b(m(b(m(y(h[3][1],h[4][2]),y(-h[3][2],h[4][1])),h[2][0]),m(b(m(y(h[3][0],h[4][2]),y(-h[3][2],h[4][0])),-h[2][1]),b(m(y(h[3][0],h[4][1]),y(-h[3][1],h[4][0])),h[2][2]))),-h[1][4]))),-h[0][3]),b(m(m(b(m(b(m(y(h[3][2],h[4][3]),y(-h[3][3],h[4][2])),h[2][1]),m(b(m(y(h[3][1],h[4][3]),y(-h[3][3],h[4][1])),-h[2][2]),b(m(y(h[3][1],h[4][2]),y(-h[3][2],h[4][1])),h[2][3]))),h[1][0]),b(m(b(m(y(h[3][2],h[4][3]),y(-h[3][3],h[4][2])),h[2][0]),m(b(m(y(h[3][0],h[4][3]),y(-h[3][3],h[4][0])),-h[2][2]),b(m(y(h[3][0],h[4][2]),y(-h[3][2],h[4][0])),h[2][3]))),-h[1][1])),m(b(m(b(m(y(h[3][1],h[4][3]),y(-h[3][3],h[4][1])),h[2][0]),m(b(m(y(h[3][0],h[4][3]),y(-h[3][3],h[4][0])),-h[2][1]),b(m(y(h[3][0],h[4][1]),y(-h[3][1],h[4][0])),h[2][3]))),h[1][2]),b(m(b(m(y(h[3][1],h[4][2]),y(-h[3][2],h[4][1])),h[2][0]),m(b(m(y(h[3][0],h[4][2]),y(-h[3][2],h[4][0])),-h[2][1]),b(m(y(h[3][0],h[4][1]),y(-h[3][1],h[4][0])),h[2][2]))),-h[1][3]))),h[0][4])))))}}function _(m){return(m===2?u:m===3?l:m===4?d:m===5?c:void 0)(r,i,o,a)}var p=[function(){return[0]},function(m){return[m[0][0]]}];function g(m,b,y,M,h,E,k,D){return function(P){switch(P.length){case 0:return m(P);case 1:return b(P);case 2:return y(P);case 3:return M(P);case 4:return h(P);case 5:return E(P)}var L=k[P.length];return L||(L=k[P.length]=D(P.length)),L(P)}}(function(){for(;p.length<6;)p.push(_(p.length));f.exports=g.apply(void 0,p.concat([p,_]));for(var m=0;m<p.length;++m)f.exports[m]=p[m]})()},1944:function(f,s,t){"use strict";var o=t(5250),r=t(8210);f.exports=function(i,a){for(var u=o(i[0],a[0]),l=1;l<i.length;++l)u=r(u,o(i[l],a[l]));return u}},2646:function(f,s,t){"use strict";var o=t(5250),r=t(8210),i=t(8545),a=t(3012);function u(b){return(b===3?l:b===4?d:b===5?c:_)(r,i,o,a)}function l(b,y,M,h){return function(E,k,D){var P=M(E[0],E[0]),L=h(P,k[0]),O=h(P,D[0]),N=M(k[0],k[0]),V=h(N,E[0]),F=h(N,D[0]),j=M(D[0],D[0]),Z=h(j,E[0]),z=h(j,k[0]),H=b(y(z,F),y(V,L)),U=y(Z,O),re=y(H,U);return re[re.length-1]}}function d(b,y,M,h){return function(E,k,D,P){var L=b(M(E[0],E[0]),M(E[1],E[1])),O=h(L,k[0]),N=h(L,D[0]),V=h(L,P[0]),F=b(M(k[0],k[0]),M(k[1],k[1])),j=h(F,E[0]),Z=h(F,D[0]),z=h(F,P[0]),H=b(M(D[0],D[0]),M(D[1],D[1])),U=h(H,E[0]),re=h(H,k[0]),ee=h(H,P[0]),J=b(M(P[0],P[0]),M(P[1],P[1])),Q=h(J,E[0]),ne=h(J,k[0]),K=h(J,D[0]),oe=b(b(h(y(K,ee),k[1]),b(h(y(ne,z),-D[1]),h(y(re,Z),P[1]))),b(h(y(ne,z),E[1]),b(h(y(Q,V),-k[1]),h(y(j,O),P[1])))),le=b(b(h(y(K,ee),E[1]),b(h(y(Q,V),-D[1]),h(y(U,N),P[1]))),b(h(y(re,Z),E[1]),b(h(y(U,N),-k[1]),h(y(j,O),D[1])))),se=y(oe,le);return se[se.length-1]}}function c(b,y,M,h){return function(E,k,D,P,L){var O=b(M(E[0],E[0]),b(M(E[1],E[1]),M(E[2],E[2]))),N=h(O,k[0]),V=h(O,D[0]),F=h(O,P[0]),j=h(O,L[0]),Z=b(M(k[0],k[0]),b(M(k[1],k[1]),M(k[2],k[2]))),z=h(Z,E[0]),H=h(Z,D[0]),U=h(Z,P[0]),re=h(Z,L[0]),ee=b(M(D[0],D[0]),b(M(D[1],D[1]),M(D[2],D[2]))),J=h(ee,E[0]),Q=h(ee,k[0]),ne=h(ee,P[0]),K=h(ee,L[0]),oe=b(M(P[0],P[0]),b(M(P[1],P[1]),M(P[2],P[2]))),le=h(oe,E[0]),se=h(oe,k[0]),de=h(oe,D[0]),be=h(oe,L[0]),_e=b(M(L[0],L[0]),b(M(L[1],L[1]),M(L[2],L[2]))),xe=h(_e,E[0]),ve=h(_e,k[0]),ye=h(_e,D[0]),me=h(_e,P[0]),Me=b(b(b(h(b(h(y(me,be),D[1]),b(h(y(ye,K),-P[1]),h(y(de,ne),L[1]))),k[2]),b(h(b(h(y(me,be),k[1]),b(h(y(ve,re),-P[1]),h(y(se,U),L[1]))),-D[2]),h(b(h(y(ye,K),k[1]),b(h(y(ve,re),-D[1]),h(y(Q,H),L[1]))),P[2]))),b(h(b(h(y(de,ne),k[1]),b(h(y(se,U),-D[1]),h(y(Q,H),P[1]))),-L[2]),b(h(b(h(y(me,be),k[1]),b(h(y(ve,re),-P[1]),h(y(se,U),L[1]))),E[2]),h(b(h(y(me,be),E[1]),b(h(y(xe,j),-P[1]),h(y(le,F),L[1]))),-k[2])))),b(b(h(b(h(y(ve,re),E[1]),b(h(y(xe,j),-k[1]),h(y(z,N),L[1]))),P[2]),b(h(b(h(y(se,U),E[1]),b(h(y(le,F),-k[1]),h(y(z,N),P[1]))),-L[2]),h(b(h(y(de,ne),k[1]),b(h(y(se,U),-D[1]),h(y(Q,H),P[1]))),E[2]))),b(h(b(h(y(de,ne),E[1]),b(h(y(le,F),-D[1]),h(y(J,V),P[1]))),-k[2]),b(h(b(h(y(se,U),E[1]),b(h(y(le,F),-k[1]),h(y(z,N),P[1]))),D[2]),h(b(h(y(Q,H),E[1]),b(h(y(J,V),-k[1]),h(y(z,N),D[1]))),-P[2]))))),Ae=b(b(b(h(b(h(y(me,be),D[1]),b(h(y(ye,K),-P[1]),h(y(de,ne),L[1]))),E[2]),h(b(h(y(me,be),E[1]),b(h(y(xe,j),-P[1]),h(y(le,F),L[1]))),-D[2])),b(h(b(h(y(ye,K),E[1]),b(h(y(xe,j),-D[1]),h(y(J,V),L[1]))),P[2]),h(b(h(y(de,ne),E[1]),b(h(y(le,F),-D[1]),h(y(J,V),P[1]))),-L[2]))),b(b(h(b(h(y(ye,K),k[1]),b(h(y(ve,re),-D[1]),h(y(Q,H),L[1]))),E[2]),h(b(h(y(ye,K),E[1]),b(h(y(xe,j),-D[1]),h(y(J,V),L[1]))),-k[2])),b(h(b(h(y(ve,re),E[1]),b(h(y(xe,j),-k[1]),h(y(z,N),L[1]))),D[2]),h(b(h(y(Q,H),E[1]),b(h(y(J,V),-k[1]),h(y(z,N),D[1]))),-L[2])))),ce=y(Me,Ae);return ce[ce.length-1]}}function _(b,y,M,h){return function(E,k,D,P,L,O){var N=b(b(M(E[0],E[0]),M(E[1],E[1])),b(M(E[2],E[2]),M(E[3],E[3]))),V=h(N,k[0]),F=h(N,D[0]),j=h(N,P[0]),Z=h(N,L[0]),z=h(N,O[0]),H=b(b(M(k[0],k[0]),M(k[1],k[1])),b(M(k[2],k[2]),M(k[3],k[3]))),U=h(H,E[0]),re=h(H,D[0]),ee=h(H,P[0]),J=h(H,L[0]),Q=h(H,O[0]),ne=b(b(M(D[0],D[0]),M(D[1],D[1])),b(M(D[2],D[2]),M(D[3],D[3]))),K=h(ne,E[0]),oe=h(ne,k[0]),le=h(ne,P[0]),se=h(ne,L[0]),de=h(ne,O[0]),be=b(b(M(P[0],P[0]),M(P[1],P[1])),b(M(P[2],P[2]),M(P[3],P[3]))),_e=h(be,E[0]),xe=h(be,k[0]),ve=h(be,D[0]),ye=h(be,L[0]),me=h(be,O[0]),Me=b(b(M(L[0],L[0]),M(L[1],L[1])),b(M(L[2],L[2]),M(L[3],L[3]))),Ae=h(Me,E[0]),ce=h(Me,k[0]),ae=h(Me,D[0]),pe=h(Me,P[0]),De=h(Me,O[0]),ke=b(b(M(O[0],O[0]),M(O[1],O[1])),b(M(O[2],O[2]),M(O[3],O[3]))),Ee=h(ke,E[0]),Ie=h(ke,k[0]),Re=h(ke,D[0]),Ne=h(ke,P[0]),ge=h(ke,L[0]),we=b(b(b(h(b(b(h(b(h(y(ge,De),P[1]),b(h(y(Ne,me),-L[1]),h(y(pe,ye),O[1]))),D[2]),h(b(h(y(ge,De),D[1]),b(h(y(Re,de),-L[1]),h(y(ae,se),O[1]))),-P[2])),b(h(b(h(y(Ne,me),D[1]),b(h(y(Re,de),-P[1]),h(y(ve,le),O[1]))),L[2]),h(b(h(y(pe,ye),D[1]),b(h(y(ae,se),-P[1]),h(y(ve,le),L[1]))),-O[2]))),k[3]),b(h(b(b(h(b(h(y(ge,De),P[1]),b(h(y(Ne,me),-L[1]),h(y(pe,ye),O[1]))),k[2]),h(b(h(y(ge,De),k[1]),b(h(y(Ie,Q),-L[1]),h(y(ce,J),O[1]))),-P[2])),b(h(b(h(y(Ne,me),k[1]),b(h(y(Ie,Q),-P[1]),h(y(xe,ee),O[1]))),L[2]),h(b(h(y(pe,ye),k[1]),b(h(y(ce,J),-P[1]),h(y(xe,ee),L[1]))),-O[2]))),-D[3]),h(b(b(h(b(h(y(ge,De),D[1]),b(h(y(Re,de),-L[1]),h(y(ae,se),O[1]))),k[2]),h(b(h(y(ge,De),k[1]),b(h(y(Ie,Q),-L[1]),h(y(ce,J),O[1]))),-D[2])),b(h(b(h(y(Re,de),k[1]),b(h(y(Ie,Q),-D[1]),h(y(oe,re),O[1]))),L[2]),h(b(h(y(ae,se),k[1]),b(h(y(ce,J),-D[1]),h(y(oe,re),L[1]))),-O[2]))),P[3]))),b(b(h(b(b(h(b(h(y(Ne,me),D[1]),b(h(y(Re,de),-P[1]),h(y(ve,le),O[1]))),k[2]),h(b(h(y(Ne,me),k[1]),b(h(y(Ie,Q),-P[1]),h(y(xe,ee),O[1]))),-D[2])),b(h(b(h(y(Re,de),k[1]),b(h(y(Ie,Q),-D[1]),h(y(oe,re),O[1]))),P[2]),h(b(h(y(ve,le),k[1]),b(h(y(xe,ee),-D[1]),h(y(oe,re),P[1]))),-O[2]))),-L[3]),h(b(b(h(b(h(y(pe,ye),D[1]),b(h(y(ae,se),-P[1]),h(y(ve,le),L[1]))),k[2]),h(b(h(y(pe,ye),k[1]),b(h(y(ce,J),-P[1]),h(y(xe,ee),L[1]))),-D[2])),b(h(b(h(y(ae,se),k[1]),b(h(y(ce,J),-D[1]),h(y(oe,re),L[1]))),P[2]),h(b(h(y(ve,le),k[1]),b(h(y(xe,ee),-D[1]),h(y(oe,re),P[1]))),-L[2]))),O[3])),b(h(b(b(h(b(h(y(ge,De),P[1]),b(h(y(Ne,me),-L[1]),h(y(pe,ye),O[1]))),k[2]),h(b(h(y(ge,De),k[1]),b(h(y(Ie,Q),-L[1]),h(y(ce,J),O[1]))),-P[2])),b(h(b(h(y(Ne,me),k[1]),b(h(y(Ie,Q),-P[1]),h(y(xe,ee),O[1]))),L[2]),h(b(h(y(pe,ye),k[1]),b(h(y(ce,J),-P[1]),h(y(xe,ee),L[1]))),-O[2]))),E[3]),h(b(b(h(b(h(y(ge,De),P[1]),b(h(y(Ne,me),-L[1]),h(y(pe,ye),O[1]))),E[2]),h(b(h(y(ge,De),E[1]),b(h(y(Ee,z),-L[1]),h(y(Ae,Z),O[1]))),-P[2])),b(h(b(h(y(Ne,me),E[1]),b(h(y(Ee,z),-P[1]),h(y(_e,j),O[1]))),L[2]),h(b(h(y(pe,ye),E[1]),b(h(y(Ae,Z),-P[1]),h(y(_e,j),L[1]))),-O[2]))),-k[3])))),b(b(b(h(b(b(h(b(h(y(ge,De),k[1]),b(h(y(Ie,Q),-L[1]),h(y(ce,J),O[1]))),E[2]),h(b(h(y(ge,De),E[1]),b(h(y(Ee,z),-L[1]),h(y(Ae,Z),O[1]))),-k[2])),b(h(b(h(y(Ie,Q),E[1]),b(h(y(Ee,z),-k[1]),h(y(U,V),O[1]))),L[2]),h(b(h(y(ce,J),E[1]),b(h(y(Ae,Z),-k[1]),h(y(U,V),L[1]))),-O[2]))),P[3]),h(b(b(h(b(h(y(Ne,me),k[1]),b(h(y(Ie,Q),-P[1]),h(y(xe,ee),O[1]))),E[2]),h(b(h(y(Ne,me),E[1]),b(h(y(Ee,z),-P[1]),h(y(_e,j),O[1]))),-k[2])),b(h(b(h(y(Ie,Q),E[1]),b(h(y(Ee,z),-k[1]),h(y(U,V),O[1]))),P[2]),h(b(h(y(xe,ee),E[1]),b(h(y(_e,j),-k[1]),h(y(U,V),P[1]))),-O[2]))),-L[3])),b(h(b(b(h(b(h(y(pe,ye),k[1]),b(h(y(ce,J),-P[1]),h(y(xe,ee),L[1]))),E[2]),h(b(h(y(pe,ye),E[1]),b(h(y(Ae,Z),-P[1]),h(y(_e,j),L[1]))),-k[2])),b(h(b(h(y(ce,J),E[1]),b(h(y(Ae,Z),-k[1]),h(y(U,V),L[1]))),P[2]),h(b(h(y(xe,ee),E[1]),b(h(y(_e,j),-k[1]),h(y(U,V),P[1]))),-L[2]))),O[3]),h(b(b(h(b(h(y(Ne,me),D[1]),b(h(y(Re,de),-P[1]),h(y(ve,le),O[1]))),k[2]),h(b(h(y(Ne,me),k[1]),b(h(y(Ie,Q),-P[1]),h(y(xe,ee),O[1]))),-D[2])),b(h(b(h(y(Re,de),k[1]),b(h(y(Ie,Q),-D[1]),h(y(oe,re),O[1]))),P[2]),h(b(h(y(ve,le),k[1]),b(h(y(xe,ee),-D[1]),h(y(oe,re),P[1]))),-O[2]))),E[3]))),b(b(h(b(b(h(b(h(y(Ne,me),D[1]),b(h(y(Re,de),-P[1]),h(y(ve,le),O[1]))),E[2]),h(b(h(y(Ne,me),E[1]),b(h(y(Ee,z),-P[1]),h(y(_e,j),O[1]))),-D[2])),b(h(b(h(y(Re,de),E[1]),b(h(y(Ee,z),-D[1]),h(y(K,F),O[1]))),P[2]),h(b(h(y(ve,le),E[1]),b(h(y(_e,j),-D[1]),h(y(K,F),P[1]))),-O[2]))),-k[3]),h(b(b(h(b(h(y(Ne,me),k[1]),b(h(y(Ie,Q),-P[1]),h(y(xe,ee),O[1]))),E[2]),h(b(h(y(Ne,me),E[1]),b(h(y(Ee,z),-P[1]),h(y(_e,j),O[1]))),-k[2])),b(h(b(h(y(Ie,Q),E[1]),b(h(y(Ee,z),-k[1]),h(y(U,V),O[1]))),P[2]),h(b(h(y(xe,ee),E[1]),b(h(y(_e,j),-k[1]),h(y(U,V),P[1]))),-O[2]))),D[3])),b(h(b(b(h(b(h(y(Re,de),k[1]),b(h(y(Ie,Q),-D[1]),h(y(oe,re),O[1]))),E[2]),h(b(h(y(Re,de),E[1]),b(h(y(Ee,z),-D[1]),h(y(K,F),O[1]))),-k[2])),b(h(b(h(y(Ie,Q),E[1]),b(h(y(Ee,z),-k[1]),h(y(U,V),O[1]))),D[2]),h(b(h(y(oe,re),E[1]),b(h(y(K,F),-k[1]),h(y(U,V),D[1]))),-O[2]))),-P[3]),h(b(b(h(b(h(y(ve,le),k[1]),b(h(y(xe,ee),-D[1]),h(y(oe,re),P[1]))),E[2]),h(b(h(y(ve,le),E[1]),b(h(y(_e,j),-D[1]),h(y(K,F),P[1]))),-k[2])),b(h(b(h(y(xe,ee),E[1]),b(h(y(_e,j),-k[1]),h(y(U,V),P[1]))),D[2]),h(b(h(y(oe,re),E[1]),b(h(y(K,F),-k[1]),h(y(U,V),D[1]))),-P[2]))),O[3]))))),Ce=b(b(b(h(b(b(h(b(h(y(ge,De),P[1]),b(h(y(Ne,me),-L[1]),h(y(pe,ye),O[1]))),D[2]),h(b(h(y(ge,De),D[1]),b(h(y(Re,de),-L[1]),h(y(ae,se),O[1]))),-P[2])),b(h(b(h(y(Ne,me),D[1]),b(h(y(Re,de),-P[1]),h(y(ve,le),O[1]))),L[2]),h(b(h(y(pe,ye),D[1]),b(h(y(ae,se),-P[1]),h(y(ve,le),L[1]))),-O[2]))),E[3]),b(h(b(b(h(b(h(y(ge,De),P[1]),b(h(y(Ne,me),-L[1]),h(y(pe,ye),O[1]))),E[2]),h(b(h(y(ge,De),E[1]),b(h(y(Ee,z),-L[1]),h(y(Ae,Z),O[1]))),-P[2])),b(h(b(h(y(Ne,me),E[1]),b(h(y(Ee,z),-P[1]),h(y(_e,j),O[1]))),L[2]),h(b(h(y(pe,ye),E[1]),b(h(y(Ae,Z),-P[1]),h(y(_e,j),L[1]))),-O[2]))),-D[3]),h(b(b(h(b(h(y(ge,De),D[1]),b(h(y(Re,de),-L[1]),h(y(ae,se),O[1]))),E[2]),h(b(h(y(ge,De),E[1]),b(h(y(Ee,z),-L[1]),h(y(Ae,Z),O[1]))),-D[2])),b(h(b(h(y(Re,de),E[1]),b(h(y(Ee,z),-D[1]),h(y(K,F),O[1]))),L[2]),h(b(h(y(ae,se),E[1]),b(h(y(Ae,Z),-D[1]),h(y(K,F),L[1]))),-O[2]))),P[3]))),b(b(h(b(b(h(b(h(y(Ne,me),D[1]),b(h(y(Re,de),-P[1]),h(y(ve,le),O[1]))),E[2]),h(b(h(y(Ne,me),E[1]),b(h(y(Ee,z),-P[1]),h(y(_e,j),O[1]))),-D[2])),b(h(b(h(y(Re,de),E[1]),b(h(y(Ee,z),-D[1]),h(y(K,F),O[1]))),P[2]),h(b(h(y(ve,le),E[1]),b(h(y(_e,j),-D[1]),h(y(K,F),P[1]))),-O[2]))),-L[3]),h(b(b(h(b(h(y(pe,ye),D[1]),b(h(y(ae,se),-P[1]),h(y(ve,le),L[1]))),E[2]),h(b(h(y(pe,ye),E[1]),b(h(y(Ae,Z),-P[1]),h(y(_e,j),L[1]))),-D[2])),b(h(b(h(y(ae,se),E[1]),b(h(y(Ae,Z),-D[1]),h(y(K,F),L[1]))),P[2]),h(b(h(y(ve,le),E[1]),b(h(y(_e,j),-D[1]),h(y(K,F),P[1]))),-L[2]))),O[3])),b(h(b(b(h(b(h(y(ge,De),D[1]),b(h(y(Re,de),-L[1]),h(y(ae,se),O[1]))),k[2]),h(b(h(y(ge,De),k[1]),b(h(y(Ie,Q),-L[1]),h(y(ce,J),O[1]))),-D[2])),b(h(b(h(y(Re,de),k[1]),b(h(y(Ie,Q),-D[1]),h(y(oe,re),O[1]))),L[2]),h(b(h(y(ae,se),k[1]),b(h(y(ce,J),-D[1]),h(y(oe,re),L[1]))),-O[2]))),E[3]),h(b(b(h(b(h(y(ge,De),D[1]),b(h(y(Re,de),-L[1]),h(y(ae,se),O[1]))),E[2]),h(b(h(y(ge,De),E[1]),b(h(y(Ee,z),-L[1]),h(y(Ae,Z),O[1]))),-D[2])),b(h(b(h(y(Re,de),E[1]),b(h(y(Ee,z),-D[1]),h(y(K,F),O[1]))),L[2]),h(b(h(y(ae,se),E[1]),b(h(y(Ae,Z),-D[1]),h(y(K,F),L[1]))),-O[2]))),-k[3])))),b(b(b(h(b(b(h(b(h(y(ge,De),k[1]),b(h(y(Ie,Q),-L[1]),h(y(ce,J),O[1]))),E[2]),h(b(h(y(ge,De),E[1]),b(h(y(Ee,z),-L[1]),h(y(Ae,Z),O[1]))),-k[2])),b(h(b(h(y(Ie,Q),E[1]),b(h(y(Ee,z),-k[1]),h(y(U,V),O[1]))),L[2]),h(b(h(y(ce,J),E[1]),b(h(y(Ae,Z),-k[1]),h(y(U,V),L[1]))),-O[2]))),D[3]),h(b(b(h(b(h(y(Re,de),k[1]),b(h(y(Ie,Q),-D[1]),h(y(oe,re),O[1]))),E[2]),h(b(h(y(Re,de),E[1]),b(h(y(Ee,z),-D[1]),h(y(K,F),O[1]))),-k[2])),b(h(b(h(y(Ie,Q),E[1]),b(h(y(Ee,z),-k[1]),h(y(U,V),O[1]))),D[2]),h(b(h(y(oe,re),E[1]),b(h(y(K,F),-k[1]),h(y(U,V),D[1]))),-O[2]))),-L[3])),b(h(b(b(h(b(h(y(ae,se),k[1]),b(h(y(ce,J),-D[1]),h(y(oe,re),L[1]))),E[2]),h(b(h(y(ae,se),E[1]),b(h(y(Ae,Z),-D[1]),h(y(K,F),L[1]))),-k[2])),b(h(b(h(y(ce,J),E[1]),b(h(y(Ae,Z),-k[1]),h(y(U,V),L[1]))),D[2]),h(b(h(y(oe,re),E[1]),b(h(y(K,F),-k[1]),h(y(U,V),D[1]))),-L[2]))),O[3]),h(b(b(h(b(h(y(pe,ye),D[1]),b(h(y(ae,se),-P[1]),h(y(ve,le),L[1]))),k[2]),h(b(h(y(pe,ye),k[1]),b(h(y(ce,J),-P[1]),h(y(xe,ee),L[1]))),-D[2])),b(h(b(h(y(ae,se),k[1]),b(h(y(ce,J),-D[1]),h(y(oe,re),L[1]))),P[2]),h(b(h(y(ve,le),k[1]),b(h(y(xe,ee),-D[1]),h(y(oe,re),P[1]))),-L[2]))),E[3]))),b(b(h(b(b(h(b(h(y(pe,ye),D[1]),b(h(y(ae,se),-P[1]),h(y(ve,le),L[1]))),E[2]),h(b(h(y(pe,ye),E[1]),b(h(y(Ae,Z),-P[1]),h(y(_e,j),L[1]))),-D[2])),b(h(b(h(y(ae,se),E[1]),b(h(y(Ae,Z),-D[1]),h(y(K,F),L[1]))),P[2]),h(b(h(y(ve,le),E[1]),b(h(y(_e,j),-D[1]),h(y(K,F),P[1]))),-L[2]))),-k[3]),h(b(b(h(b(h(y(pe,ye),k[1]),b(h(y(ce,J),-P[1]),h(y(xe,ee),L[1]))),E[2]),h(b(h(y(pe,ye),E[1]),b(h(y(Ae,Z),-P[1]),h(y(_e,j),L[1]))),-k[2])),b(h(b(h(y(ce,J),E[1]),b(h(y(Ae,Z),-k[1]),h(y(U,V),L[1]))),P[2]),h(b(h(y(xe,ee),E[1]),b(h(y(_e,j),-k[1]),h(y(U,V),P[1]))),-L[2]))),D[3])),b(h(b(b(h(b(h(y(ae,se),k[1]),b(h(y(ce,J),-D[1]),h(y(oe,re),L[1]))),E[2]),h(b(h(y(ae,se),E[1]),b(h(y(Ae,Z),-D[1]),h(y(K,F),L[1]))),-k[2])),b(h(b(h(y(ce,J),E[1]),b(h(y(Ae,Z),-k[1]),h(y(U,V),L[1]))),D[2]),h(b(h(y(oe,re),E[1]),b(h(y(K,F),-k[1]),h(y(U,V),D[1]))),-L[2]))),-P[3]),h(b(b(h(b(h(y(ve,le),k[1]),b(h(y(xe,ee),-D[1]),h(y(oe,re),P[1]))),E[2]),h(b(h(y(ve,le),E[1]),b(h(y(_e,j),-D[1]),h(y(K,F),P[1]))),-k[2])),b(h(b(h(y(xe,ee),E[1]),b(h(y(_e,j),-k[1]),h(y(U,V),P[1]))),D[2]),h(b(h(y(oe,re),E[1]),b(h(y(K,F),-k[1]),h(y(U,V),D[1]))),-P[2]))),L[3]))))),ze=y(we,Ce);return ze[ze.length-1]}}var p=[function(){return 0},function(){return 0},function(){return 0}];function g(b){var y=p[b.length];return y||(y=p[b.length]=u(b.length)),y.apply(void 0,b)}function m(b,y,M,h,E,k,D,P){return function(L,O,N,V,F,j){switch(arguments.length){case 0:case 1:return 0;case 2:return h(L,O);case 3:return E(L,O,N);case 4:return k(L,O,N,V);case 5:return D(L,O,N,V,F);case 6:return P(L,O,N,V,F,j)}for(var Z=new Array(arguments.length),z=0;z<arguments.length;++z)Z[z]=arguments[z];return b(Z)}}(function(){for(;p.length<=6;)p.push(u(p.length));f.exports=m.apply(void 0,[g].concat(p));for(var b=0;b<=6;++b)f.exports[b]=p[b]})()},727:function(f,s,t){"use strict";var o=t(2962);function r(p){return(p===2?i:p===3?a:p===4?u:p===5?l:d)(p<6?o[p]:o)}function i(p){return function(g,m){return[p([[+m[0],+g[0][1]],[+m[1],+g[1][1]]]),p([[+g[0][0],+m[0]],[+g[1][0],+m[1]]]),p(g)]}}function a(p){return function(g,m){return[p([[+m[0],+g[0][1],+g[0][2]],[+m[1],+g[1][1],+g[1][2]],[+m[2],+g[2][1],+g[2][2]]]),p([[+g[0][0],+m[0],+g[0][2]],[+g[1][0],+m[1],+g[1][2]],[+g[2][0],+m[2],+g[2][2]]]),p([[+g[0][0],+g[0][1],+m[0]],[+g[1][0],+g[1][1],+m[1]],[+g[2][0],+g[2][1],+m[2]]]),p(g)]}}function u(p){return function(g,m){return[p([[+m[0],+g[0][1],+g[0][2],+g[0][3]],[+m[1],+g[1][1],+g[1][2],+g[1][3]],[+m[2],+g[2][1],+g[2][2],+g[2][3]],[+m[3],+g[3][1],+g[3][2],+g[3][3]]]),p([[+g[0][0],+m[0],+g[0][2],+g[0][3]],[+g[1][0],+m[1],+g[1][2],+g[1][3]],[+g[2][0],+m[2],+g[2][2],+g[2][3]],[+g[3][0],+m[3],+g[3][2],+g[3][3]]]),p([[+g[0][0],+g[0][1],+m[0],+g[0][3]],[+g[1][0],+g[1][1],+m[1],+g[1][3]],[+g[2][0],+g[2][1],+m[2],+g[2][3]],[+g[3][0],+g[3][1],+m[3],+g[3][3]]]),p([[+g[0][0],+g[0][1],+g[0][2],+m[0]],[+g[1][0],+g[1][1],+g[1][2],+m[1]],[+g[2][0],+g[2][1],+g[2][2],+m[2]],[+g[3][0],+g[3][1],+g[3][2],+m[3]]]),p(g)]}}function l(p){return function(g,m){return[p([[+m[0],+g[0][1],+g[0][2],+g[0][3],+g[0][4]],[+m[1],+g[1][1],+g[1][2],+g[1][3],+g[1][4]],[+m[2],+g[2][1],+g[2][2],+g[2][3],+g[2][4]],[+m[3],+g[3][1],+g[3][2],+g[3][3],+g[3][4]],[+m[4],+g[4][1],+g[4][2],+g[4][3],+g[4][4]]]),p([[+g[0][0],+m[0],+g[0][2],+g[0][3],+g[0][4]],[+g[1][0],+m[1],+g[1][2],+g[1][3],+g[1][4]],[+g[2][0],+m[2],+g[2][2],+g[2][3],+g[2][4]],[+g[3][0],+m[3],+g[3][2],+g[3][3],+g[3][4]],[+g[4][0],+m[4],+g[4][2],+g[4][3],+g[4][4]]]),p([[+g[0][0],+g[0][1],+m[0],+g[0][3],+g[0][4]],[+g[1][0],+g[1][1],+m[1],+g[1][3],+g[1][4]],[+g[2][0],+g[2][1],+m[2],+g[2][3],+g[2][4]],[+g[3][0],+g[3][1],+m[3],+g[3][3],+g[3][4]],[+g[4][0],+g[4][1],+m[4],+g[4][3],+g[4][4]]]),p([[+g[0][0],+g[0][1],+g[0][2],+m[0],+g[0][4]],[+g[1][0],+g[1][1],+g[1][2],+m[1],+g[1][4]],[+g[2][0],+g[2][1],+g[2][2],+m[2],+g[2][4]],[+g[3][0],+g[3][1],+g[3][2],+m[3],+g[3][4]],[+g[4][0],+g[4][1],+g[4][2],+m[4],+g[4][4]]]),p([[+g[0][0],+g[0][1],+g[0][2],+g[0][3],+m[0]],[+g[1][0],+g[1][1],+g[1][2],+g[1][3],+m[1]],[+g[2][0],+g[2][1],+g[2][2],+g[2][3],+m[2]],[+g[3][0],+g[3][1],+g[3][2],+g[3][3],+m[3]],[+g[4][0],+g[4][1],+g[4][2],+g[4][3],+m[4]]]),p(g)]}}function d(p){return function(g,m){return[p([[+m[0],+g[0][1],+g[0][2],+g[0][3],+g[0][4],+g[0][5]],[+m[1],+g[1][1],+g[1][2],+g[1][3],+g[1][4],+g[1][5]],[+m[2],+g[2][1],+g[2][2],+g[2][3],+g[2][4],+g[2][5]],[+m[3],+g[3][1],+g[3][2],+g[3][3],+g[3][4],+g[3][5]],[+m[4],+g[4][1],+g[4][2],+g[4][3],+g[4][4],+g[4][5]],[+m[5],+g[5][1],+g[5][2],+g[5][3],+g[5][4],+g[5][5]]]),p([[+g[0][0],+m[0],+g[0][2],+g[0][3],+g[0][4],+g[0][5]],[+g[1][0],+m[1],+g[1][2],+g[1][3],+g[1][4],+g[1][5]],[+g[2][0],+m[2],+g[2][2],+g[2][3],+g[2][4],+g[2][5]],[+g[3][0],+m[3],+g[3][2],+g[3][3],+g[3][4],+g[3][5]],[+g[4][0],+m[4],+g[4][2],+g[4][3],+g[4][4],+g[4][5]],[+g[5][0],+m[5],+g[5][2],+g[5][3],+g[5][4],+g[5][5]]]),p([[+g[0][0],+g[0][1],+m[0],+g[0][3],+g[0][4],+g[0][5]],[+g[1][0],+g[1][1],+m[1],+g[1][3],+g[1][4],+g[1][5]],[+g[2][0],+g[2][1],+m[2],+g[2][3],+g[2][4],+g[2][5]],[+g[3][0],+g[3][1],+m[3],+g[3][3],+g[3][4],+g[3][5]],[+g[4][0],+g[4][1],+m[4],+g[4][3],+g[4][4],+g[4][5]],[+g[5][0],+g[5][1],+m[5],+g[5][3],+g[5][4],+g[5][5]]]),p([[+g[0][0],+g[0][1],+g[0][2],+m[0],+g[0][4],+g[0][5]],[+g[1][0],+g[1][1],+g[1][2],+m[1],+g[1][4],+g[1][5]],[+g[2][0],+g[2][1],+g[2][2],+m[2],+g[2][4],+g[2][5]],[+g[3][0],+g[3][1],+g[3][2],+m[3],+g[3][4],+g[3][5]],[+g[4][0],+g[4][1],+g[4][2],+m[4],+g[4][4],+g[4][5]],[+g[5][0],+g[5][1],+g[5][2],+m[5],+g[5][4],+g[5][5]]]),p([[+g[0][0],+g[0][1],+g[0][2],+g[0][3],+m[0],+g[0][5]],[+g[1][0],+g[1][1],+g[1][2],+g[1][3],+m[1],+g[1][5]],[+g[2][0],+g[2][1],+g[2][2],+g[2][3],+m[2],+g[2][5]],[+g[3][0],+g[3][1],+g[3][2],+g[3][3],+m[3],+g[3][5]],[+g[4][0],+g[4][1],+g[4][2],+g[4][3],+m[4],+g[4][5]],[+g[5][0],+g[5][1],+g[5][2],+g[5][3],+m[5],+g[5][5]]]),p([[+g[0][0],+g[0][1],+g[0][2],+g[0][3],+g[0][4],+m[0]],[+g[1][0],+g[1][1],+g[1][2],+g[1][3],+g[1][4],+m[1]],[+g[2][0],+g[2][1],+g[2][2],+g[2][3],+g[2][4],+m[2]],[+g[3][0],+g[3][1],+g[3][2],+g[3][3],+g[3][4],+m[3]],[+g[4][0],+g[4][1],+g[4][2],+g[4][3],+g[4][4],+m[4]],[+g[5][0],+g[5][1],+g[5][2],+g[5][3],+g[5][4],+m[5]]]),p(g)]}}var c=[function(){return[[0]]},function(p,g){return[[g[0]],[p[0][0]]]}];function _(p,g,m,b,y,M,h,E){return function(k,D){switch(k.length){case 0:return p(k,D);case 1:return g(k,D);case 2:return m(k,D);case 3:return b(k,D);case 4:return y(k,D);case 5:return M(k,D)}var P=h[k.length];return P||(P=h[k.length]=E(k.length)),P(k,D)}}(function(){for(;c.length<6;)c.push(r(c.length));f.exports=_.apply(void 0,c.concat([c,r]));for(var p=0;p<6;++p)f.exports[p]=c[p]})()},3250:function(f,s,t){"use strict";var o=t(5250),r=t(8210),i=t(3012),a=t(8545);function u(y,M,h,E){return function(k,D,P){var L=y(y(M(D[1],P[0]),M(-P[1],D[0])),y(M(k[1],D[0]),M(-D[1],k[0]))),O=y(M(k[1],P[0]),M(-P[1],k[0])),N=E(L,O);return N[N.length-1]}}function l(y,M,h,E){return function(k,D,P,L){var O=y(y(h(y(M(P[1],L[0]),M(-L[1],P[0])),D[2]),y(h(y(M(D[1],L[0]),M(-L[1],D[0])),-P[2]),h(y(M(D[1],P[0]),M(-P[1],D[0])),L[2]))),y(h(y(M(D[1],L[0]),M(-L[1],D[0])),k[2]),y(h(y(M(k[1],L[0]),M(-L[1],k[0])),-D[2]),h(y(M(k[1],D[0]),M(-D[1],k[0])),L[2])))),N=y(y(h(y(M(P[1],L[0]),M(-L[1],P[0])),k[2]),y(h(y(M(k[1],L[0]),M(-L[1],k[0])),-P[2]),h(y(M(k[1],P[0]),M(-P[1],k[0])),L[2]))),y(h(y(M(D[1],P[0]),M(-P[1],D[0])),k[2]),y(h(y(M(k[1],P[0]),M(-P[1],k[0])),-D[2]),h(y(M(k[1],D[0]),M(-D[1],k[0])),P[2])))),V=E(O,N);return V[V.length-1]}}function d(y,M,h,E){return function(k,D,P,L,O){var N=y(y(y(h(y(h(y(M(L[1],O[0]),M(-O[1],L[0])),P[2]),y(h(y(M(P[1],O[0]),M(-O[1],P[0])),-L[2]),h(y(M(P[1],L[0]),M(-L[1],P[0])),O[2]))),D[3]),y(h(y(h(y(M(L[1],O[0]),M(-O[1],L[0])),D[2]),y(h(y(M(D[1],O[0]),M(-O[1],D[0])),-L[2]),h(y(M(D[1],L[0]),M(-L[1],D[0])),O[2]))),-P[3]),h(y(h(y(M(P[1],O[0]),M(-O[1],P[0])),D[2]),y(h(y(M(D[1],O[0]),M(-O[1],D[0])),-P[2]),h(y(M(D[1],P[0]),M(-P[1],D[0])),O[2]))),L[3]))),y(h(y(h(y(M(P[1],L[0]),M(-L[1],P[0])),D[2]),y(h(y(M(D[1],L[0]),M(-L[1],D[0])),-P[2]),h(y(M(D[1],P[0]),M(-P[1],D[0])),L[2]))),-O[3]),y(h(y(h(y(M(L[1],O[0]),M(-O[1],L[0])),D[2]),y(h(y(M(D[1],O[0]),M(-O[1],D[0])),-L[2]),h(y(M(D[1],L[0]),M(-L[1],D[0])),O[2]))),k[3]),h(y(h(y(M(L[1],O[0]),M(-O[1],L[0])),k[2]),y(h(y(M(k[1],O[0]),M(-O[1],k[0])),-L[2]),h(y(M(k[1],L[0]),M(-L[1],k[0])),O[2]))),-D[3])))),y(y(h(y(h(y(M(D[1],O[0]),M(-O[1],D[0])),k[2]),y(h(y(M(k[1],O[0]),M(-O[1],k[0])),-D[2]),h(y(M(k[1],D[0]),M(-D[1],k[0])),O[2]))),L[3]),y(h(y(h(y(M(D[1],L[0]),M(-L[1],D[0])),k[2]),y(h(y(M(k[1],L[0]),M(-L[1],k[0])),-D[2]),h(y(M(k[1],D[0]),M(-D[1],k[0])),L[2]))),-O[3]),h(y(h(y(M(P[1],L[0]),M(-L[1],P[0])),D[2]),y(h(y(M(D[1],L[0]),M(-L[1],D[0])),-P[2]),h(y(M(D[1],P[0]),M(-P[1],D[0])),L[2]))),k[3]))),y(h(y(h(y(M(P[1],L[0]),M(-L[1],P[0])),k[2]),y(h(y(M(k[1],L[0]),M(-L[1],k[0])),-P[2]),h(y(M(k[1],P[0]),M(-P[1],k[0])),L[2]))),-D[3]),y(h(y(h(y(M(D[1],L[0]),M(-L[1],D[0])),k[2]),y(h(y(M(k[1],L[0]),M(-L[1],k[0])),-D[2]),h(y(M(k[1],D[0]),M(-D[1],k[0])),L[2]))),P[3]),h(y(h(y(M(D[1],P[0]),M(-P[1],D[0])),k[2]),y(h(y(M(k[1],P[0]),M(-P[1],k[0])),-D[2]),h(y(M(k[1],D[0]),M(-D[1],k[0])),P[2]))),-L[3]))))),V=y(y(y(h(y(h(y(M(L[1],O[0]),M(-O[1],L[0])),P[2]),y(h(y(M(P[1],O[0]),M(-O[1],P[0])),-L[2]),h(y(M(P[1],L[0]),M(-L[1],P[0])),O[2]))),k[3]),h(y(h(y(M(L[1],O[0]),M(-O[1],L[0])),k[2]),y(h(y(M(k[1],O[0]),M(-O[1],k[0])),-L[2]),h(y(M(k[1],L[0]),M(-L[1],k[0])),O[2]))),-P[3])),y(h(y(h(y(M(P[1],O[0]),M(-O[1],P[0])),k[2]),y(h(y(M(k[1],O[0]),M(-O[1],k[0])),-P[2]),h(y(M(k[1],P[0]),M(-P[1],k[0])),O[2]))),L[3]),h(y(h(y(M(P[1],L[0]),M(-L[1],P[0])),k[2]),y(h(y(M(k[1],L[0]),M(-L[1],k[0])),-P[2]),h(y(M(k[1],P[0]),M(-P[1],k[0])),L[2]))),-O[3]))),y(y(h(y(h(y(M(P[1],O[0]),M(-O[1],P[0])),D[2]),y(h(y(M(D[1],O[0]),M(-O[1],D[0])),-P[2]),h(y(M(D[1],P[0]),M(-P[1],D[0])),O[2]))),k[3]),h(y(h(y(M(P[1],O[0]),M(-O[1],P[0])),k[2]),y(h(y(M(k[1],O[0]),M(-O[1],k[0])),-P[2]),h(y(M(k[1],P[0]),M(-P[1],k[0])),O[2]))),-D[3])),y(h(y(h(y(M(D[1],O[0]),M(-O[1],D[0])),k[2]),y(h(y(M(k[1],O[0]),M(-O[1],k[0])),-D[2]),h(y(M(k[1],D[0]),M(-D[1],k[0])),O[2]))),P[3]),h(y(h(y(M(D[1],P[0]),M(-P[1],D[0])),k[2]),y(h(y(M(k[1],P[0]),M(-P[1],k[0])),-D[2]),h(y(M(k[1],D[0]),M(-D[1],k[0])),P[2]))),-O[3])))),F=E(N,V);return F[F.length-1]}}function c(y){return(y===3?u:y===4?l:d)(r,o,i,a)}var _=c(3),p=c(4),g=[function(){return 0},function(){return 0},function(y,M){return M[0]-y[0]},function(y,M,h){var E,k=(y[1]-h[1])*(M[0]-h[0]),D=(y[0]-h[0])*(M[1]-h[1]),P=k-D;if(k>0){if(D<=0)return P;E=k+D}else{if(!(k<0)||D>=0)return P;E=-(k+D)}var L=33306690738754716e-32*E;return P>=L||P<=-L?P:_(y,M,h)},function(y,M,h,E){var k=y[0]-E[0],D=M[0]-E[0],P=h[0]-E[0],L=y[1]-E[1],O=M[1]-E[1],N=h[1]-E[1],V=y[2]-E[2],F=M[2]-E[2],j=h[2]-E[2],Z=D*N,z=P*O,H=P*L,U=k*N,re=k*O,ee=D*L,J=V*(Z-z)+F*(H-U)+j*(re-ee),Q=7771561172376103e-31*((Math.abs(Z)+Math.abs(z))*Math.abs(V)+(Math.abs(H)+Math.abs(U))*Math.abs(F)+(Math.abs(re)+Math.abs(ee))*Math.abs(j));return J>Q||-J>Q?J:p(y,M,h,E)}];function m(y){var M=g[y.length];return M||(M=g[y.length]=c(y.length)),M.apply(void 0,y)}function b(y,M,h,E,k,D,P){return function(L,O,N,V,F){switch(arguments.length){case 0:case 1:return 0;case 2:return E(L,O);case 3:return k(L,O,N);case 4:return D(L,O,N,V);case 5:return P(L,O,N,V,F)}for(var j=new Array(arguments.length),Z=0;Z<arguments.length;++Z)j[Z]=arguments[Z];return y(j)}}(function(){for(;g.length<=5;)g.push(c(g.length));f.exports=b.apply(void 0,[m].concat(g));for(var y=0;y<=5;++y)f.exports[y]=g[y]})()},5382:function(f,s,t){"use strict";var o=t(8210),r=t(3012);f.exports=function(i,a){if(i.length===1)return r(a,i[0]);if(a.length===1)return r(i,a[0]);if(i.length===0||a.length===0)return[0];var u=[0];if(i.length<a.length)for(var l=0;l<i.length;++l)u=o(u,r(a,i[l]));else for(l=0;l<a.length;++l)u=o(u,r(i,a[l]));return u}},3012:function(f,s,t){"use strict";var o=t(5250),r=t(9362);f.exports=function(i,a){var u=i.length;if(u===1){var l=o(i[0],a);return l[0]?l:[l[1]]}var d=new Array(2*u),c=[.1,.1],_=[.1,.1],p=0;o(i[0],a,c),c[0]&&(d[p++]=c[0]);for(var g=1;g<u;++g){o(i[g],a,_);var m=c[1];r(m,_[0],c),c[0]&&(d[p++]=c[0]);var b=_[1],y=c[1],M=b+y,h=y-(M-b);c[1]=M,h&&(d[p++]=h)}return c[1]&&(d[p++]=c[1]),p===0&&(d[p++]=0),d.length=p,d}},1125:function(f,s,t){"use strict";f.exports=function(r,i,a,u){var l=o(r,a,u),d=o(i,a,u);if(l>0&&d>0||l<0&&d<0)return!1;var c=o(a,r,i),_=o(u,r,i);return!(c>0&&_>0||c<0&&_<0)&&(l!==0||d!==0||c!==0||_!==0||function(p,g,m,b){for(var y=0;y<2;++y){var M=p[y],h=g[y],E=Math.min(M,h),k=Math.max(M,h),D=m[y],P=b[y],L=Math.min(D,P);if(Math.max(D,P)<E||k<L)return!1}return!0}(r,i,a,u))};var o=t(3250)[3]},8545:function(f){"use strict";f.exports=function(s,t){var o=0|s.length,r=0|t.length;if(o===1&&r===1)return function(L,O){var N=L+O,V=N-L,F=L-(N-V)+(O-V);return F?[F,N]:[N]}(s[0],-t[0]);var i,a,u=new Array(o+r),l=0,d=0,c=0,_=Math.abs,p=s[d],g=_(p),m=-t[c],b=_(m);g<b?(a=p,(d+=1)<o&&(g=_(p=s[d]))):(a=m,(c+=1)<r&&(b=_(m=-t[c]))),d<o&&g<b||c>=r?(i=p,(d+=1)<o&&(g=_(p=s[d]))):(i=m,(c+=1)<r&&(b=_(m=-t[c])));for(var y,M,h=i+a,E=h-i,k=a-E,D=k,P=h;d<o&&c<r;)g<b?(i=p,(d+=1)<o&&(g=_(p=s[d]))):(i=m,(c+=1)<r&&(b=_(m=-t[c]))),(k=(a=D)-(E=(h=i+a)-i))&&(u[l++]=k),D=P-((y=P+h)-(M=y-P))+(h-M),P=y;for(;d<o;)(k=(a=D)-(E=(h=(i=p)+a)-i))&&(u[l++]=k),D=P-((y=P+h)-(M=y-P))+(h-M),P=y,(d+=1)<o&&(p=s[d]);for(;c<r;)(k=(a=D)-(E=(h=(i=m)+a)-i))&&(u[l++]=k),D=P-((y=P+h)-(M=y-P))+(h-M),P=y,(c+=1)<r&&(m=-t[c]);return D&&(u[l++]=D),P&&(u[l++]=P),l||(u[l++]=0),u.length=l,u}},8210:function(f){"use strict";f.exports=function(s,t){var o=0|s.length,r=0|t.length;if(o===1&&r===1)return function(L,O){var N=L+O,V=N-L,F=L-(N-V)+(O-V);return F?[F,N]:[N]}(s[0],t[0]);var i,a,u=new Array(o+r),l=0,d=0,c=0,_=Math.abs,p=s[d],g=_(p),m=t[c],b=_(m);g<b?(a=p,(d+=1)<o&&(g=_(p=s[d]))):(a=m,(c+=1)<r&&(b=_(m=t[c]))),d<o&&g<b||c>=r?(i=p,(d+=1)<o&&(g=_(p=s[d]))):(i=m,(c+=1)<r&&(b=_(m=t[c])));for(var y,M,h=i+a,E=h-i,k=a-E,D=k,P=h;d<o&&c<r;)g<b?(i=p,(d+=1)<o&&(g=_(p=s[d]))):(i=m,(c+=1)<r&&(b=_(m=t[c]))),(k=(a=D)-(E=(h=i+a)-i))&&(u[l++]=k),D=P-((y=P+h)-(M=y-P))+(h-M),P=y;for(;d<o;)(k=(a=D)-(E=(h=(i=p)+a)-i))&&(u[l++]=k),D=P-((y=P+h)-(M=y-P))+(h-M),P=y,(d+=1)<o&&(p=s[d]);for(;c<r;)(k=(a=D)-(E=(h=(i=m)+a)-i))&&(u[l++]=k),D=P-((y=P+h)-(M=y-P))+(h-M),P=y,(c+=1)<r&&(m=t[c]);return D&&(u[l++]=D),P&&(u[l++]=P),l||(u[l++]=0),u.length=l,u}},9127:function(f,s,t){"use strict";f.exports=function(i){return r(o(i))};var o=t(6204),r=t(5771)},7765:function(f,s,t){"use strict";f.exports=function(u,l,d,c){if(d=d||0,c===void 0&&(c=function(h){for(var E=h.length,k=0,D=0;D<E;++D)k=0|Math.max(k,h[D].length);return k-1}(u)),u.length===0||c<1)return{cells:[],vertexIds:[],vertexWeights:[]};var _=function(h,E){for(var k=h.length,D=r.mallocUint8(k),P=0;P<k;++P)D[P]=h[P]<E|0;return D}(l,+d),p=function(h,E){for(var k=h.length,D=E*(E+1)/2*k|0,P=r.mallocUint32(2*D),L=0,O=0;O<k;++O)for(var N=h[O],V=(E=N.length,0);V<E;++V)for(var F=0;F<V;++F){var j=N[F],Z=N[V];P[L++]=0|Math.min(j,Z),P[L++]=0|Math.max(j,Z)}i(o(P,[L/2|0,2]));var z=2;for(O=2;O<L;O+=2)P[O-2]===P[O]&&P[O-1]===P[O+1]||(P[z++]=P[O],P[z++]=P[O+1]);return o(P,[z/2|0,2])}(u,c),g=function(h,E,k,D){for(var P=h.data,L=h.shape[0],O=r.mallocDouble(L),N=0,V=0;V<L;++V){var F=P[2*V],j=P[2*V+1];if(k[F]!==k[j]){var Z=E[F],z=E[j];P[2*N]=F,P[2*N+1]=j,O[N++]=(z-D)/(z-Z)}}return h.shape[0]=N,o(O,[N])}(p,l,_,+d),m=function(h,E){var k=r.mallocInt32(2*E),D=h.shape[0],P=h.data;k[0]=0;for(var L=0,O=0;O<D;++O){var N=P[2*O];if(N!==L){for(k[2*L+1]=O;++L<N;)k[2*L]=O,k[2*L+1]=O;k[2*L]=O}}for(k[2*L+1]=D;++L<E;)k[2*L]=k[2*L+1]=D;return k}(p,0|l.length),b=a(c)(u,p.data,m,_),y=function(h){for(var E=0|h.shape[0],k=h.data,D=new Array(E),P=0;P<E;++P)D[P]=[k[2*P],k[2*P+1]];return D}(p),M=[].slice.call(g.data,0,g.shape[0]);return r.free(_),r.free(p.data),r.free(g.data),r.free(m),{cells:b,vertexIds:y,vertexWeights:M}};var o=t(9618),r=t(1888),i=t(446),a=t(1570)},1570:function(f){"use strict";f.exports=function(t){return s[t]()};var s=[function(){return function(t,o,r,i){for(var a=t.length,u=0;u<a;++u)t[u].length;return[]}},function(){function t(o,r,i,a){for(var u=0|Math.min(i,a),l=0|Math.max(i,a),d=o[2*u],c=o[2*u+1];d<c;){var _=d+c>>1,p=r[2*_+1];if(p===l)return _;l<p?c=_:d=_+1}return d}return function(o,r,i,a){for(var u=o.length,l=[],d=0;d<u;++d){var c=o[d];if(c.length===2){var _=(a[c[0]]<<0)+(a[c[1]]<<1);if(_===0||_===3)continue;switch(_){case 0:case 3:break;case 1:l.push([t(i,r,c[0],c[1])]);break;case 2:l.push([t(i,r,c[1],c[0])])}}}return l}},function(){function t(o,r,i,a){for(var u=0|Math.min(i,a),l=0|Math.max(i,a),d=o[2*u],c=o[2*u+1];d<c;){var _=d+c>>1,p=r[2*_+1];if(p===l)return _;l<p?c=_:d=_+1}return d}return function(o,r,i,a){for(var u=o.length,l=[],d=0;d<u;++d){var c=o[d],_=c.length;if(_===3){if((p=(a[c[0]]<<0)+(a[c[1]]<<1)+(a[c[2]]<<2))==0||p===7)continue;switch(p){case 0:case 7:break;case 1:l.push([t(i,r,c[0],c[2]),t(i,r,c[0],c[1])]);break;case 2:l.push([t(i,r,c[1],c[0]),t(i,r,c[1],c[2])]);break;case 3:l.push([t(i,r,c[0],c[2]),t(i,r,c[1],c[2])]);break;case 4:l.push([t(i,r,c[2],c[1]),t(i,r,c[2],c[0])]);break;case 5:l.push([t(i,r,c[2],c[1]),t(i,r,c[0],c[1])]);break;case 6:l.push([t(i,r,c[1],c[0]),t(i,r,c[2],c[0])])}}else if(_===2){var p;if((p=(a[c[0]]<<0)+(a[c[1]]<<1))==0||p===3)continue;switch(p){case 0:case 3:break;case 1:l.push([t(i,r,c[0],c[1])]);break;case 2:l.push([t(i,r,c[1],c[0])])}}}return l}},function(){function t(o,r,i,a){for(var u=0|Math.min(i,a),l=0|Math.max(i,a),d=o[2*u],c=o[2*u+1];d<c;){var _=d+c>>1,p=r[2*_+1];if(p===l)return _;l<p?c=_:d=_+1}return d}return function(o,r,i,a){for(var u=o.length,l=[],d=0;d<u;++d){var c=o[d],_=c.length;if(_===4){if((p=(a[c[0]]<<0)+(a[c[1]]<<1)+(a[c[2]]<<2)+(a[c[3]]<<3))==0||p===15)continue;switch(p){case 0:case 15:break;case 1:l.push([t(i,r,c[0],c[1]),t(i,r,c[0],c[2]),t(i,r,c[0],c[3])]);break;case 2:l.push([t(i,r,c[1],c[2]),t(i,r,c[1],c[0]),t(i,r,c[1],c[3])]);break;case 3:l.push([t(i,r,c[1],c[2]),t(i,r,c[0],c[2]),t(i,r,c[0],c[3])],[t(i,r,c[1],c[3]),t(i,r,c[1],c[2]),t(i,r,c[0],c[3])]);break;case 4:l.push([t(i,r,c[2],c[0]),t(i,r,c[2],c[1]),t(i,r,c[2],c[3])]);break;case 5:l.push([t(i,r,c[0],c[1]),t(i,r,c[2],c[1]),t(i,r,c[0],c[3])],[t(i,r,c[2],c[1]),t(i,r,c[2],c[3]),t(i,r,c[0],c[3])]);break;case 6:l.push([t(i,r,c[2],c[0]),t(i,r,c[1],c[0]),t(i,r,c[1],c[3])],[t(i,r,c[2],c[3]),t(i,r,c[2],c[0]),t(i,r,c[1],c[3])]);break;case 7:l.push([t(i,r,c[0],c[3]),t(i,r,c[1],c[3]),t(i,r,c[2],c[3])]);break;case 8:l.push([t(i,r,c[3],c[1]),t(i,r,c[3],c[0]),t(i,r,c[3],c[2])]);break;case 9:l.push([t(i,r,c[3],c[1]),t(i,r,c[0],c[1]),t(i,r,c[0],c[2])],[t(i,r,c[3],c[2]),t(i,r,c[3],c[1]),t(i,r,c[0],c[2])]);break;case 10:l.push([t(i,r,c[1],c[0]),t(i,r,c[3],c[0]),t(i,r,c[1],c[2])],[t(i,r,c[3],c[0]),t(i,r,c[3],c[2]),t(i,r,c[1],c[2])]);break;case 11:l.push([t(i,r,c[1],c[2]),t(i,r,c[0],c[2]),t(i,r,c[3],c[2])]);break;case 12:l.push([t(i,r,c[3],c[0]),t(i,r,c[2],c[0]),t(i,r,c[2],c[1])],[t(i,r,c[3],c[1]),t(i,r,c[3],c[0]),t(i,r,c[2],c[1])]);break;case 13:l.push([t(i,r,c[0],c[1]),t(i,r,c[2],c[1]),t(i,r,c[3],c[1])]);break;case 14:l.push([t(i,r,c[2],c[0]),t(i,r,c[1],c[0]),t(i,r,c[3],c[0])])}}else if(_===3){if((p=(a[c[0]]<<0)+(a[c[1]]<<1)+(a[c[2]]<<2))==0||p===7)continue;switch(p){case 0:case 7:break;case 1:l.push([t(i,r,c[0],c[2]),t(i,r,c[0],c[1])]);break;case 2:l.push([t(i,r,c[1],c[0]),t(i,r,c[1],c[2])]);break;case 3:l.push([t(i,r,c[0],c[2]),t(i,r,c[1],c[2])]);break;case 4:l.push([t(i,r,c[2],c[1]),t(i,r,c[2],c[0])]);break;case 5:l.push([t(i,r,c[2],c[1]),t(i,r,c[0],c[1])]);break;case 6:l.push([t(i,r,c[1],c[0]),t(i,r,c[2],c[0])])}}else if(_===2){var p;if((p=(a[c[0]]<<0)+(a[c[1]]<<1))==0||p===3)continue;switch(p){case 0:case 3:break;case 1:l.push([t(i,r,c[0],c[1])]);break;case 2:l.push([t(i,r,c[1],c[0])])}}}return l}}]},6803:function(f,s,t){"use strict";t(8828),t(1755);function o(r,i){var a=r.length,u=r.length-i.length,l=Math.min;if(u)return u;switch(a){case 0:return 0;case 1:return r[0]-i[0];case 2:return(_=r[0]+r[1]-i[0]-i[1])||l(r[0],r[1])-l(i[0],i[1]);case 3:var d=r[0]+r[1],c=i[0]+i[1];if(_=d+r[2]-(c+i[2]))return _;var _,p=l(r[0],r[1]),g=l(i[0],i[1]);return(_=l(p,r[2])-l(g,i[2]))||l(p+r[2],d)-l(g+i[2],c);default:var m=r.slice(0);m.sort();var b=i.slice(0);b.sort();for(var y=0;y<a;++y)if(u=m[y]-b[y])return u;return 0}}s.Fw=o},3105:function(f,s){"use strict";function t(r){var i=32;return(r&=-r)&&i--,65535&r&&(i-=16),16711935&r&&(i-=8),252645135&r&&(i-=4),858993459&r&&(i-=2),1431655765&r&&(i-=1),i}s.INT_BITS=32,s.INT_MAX=2147483647,s.INT_MIN=-2147483648,s.sign=function(r){return(r>0)-(r<0)},s.abs=function(r){var i=r>>31;return(r^i)-i},s.min=function(r,i){return i^(r^i)&-(r<i)},s.max=function(r,i){return r^(r^i)&-(r<i)},s.isPow2=function(r){return!(r&r-1||!r)},s.log2=function(r){var i,a;return i=(r>65535)<<4,i|=a=((r>>>=i)>255)<<3,i|=a=((r>>>=a)>15)<<2,(i|=a=((r>>>=a)>3)<<1)|(r>>>=a)>>1},s.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},s.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},s.countTrailingZeros=t,s.nextPow2=function(r){return r+=r===0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,1+(r|=r>>>16)},s.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},s.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var o=new Array(256);(function(r){for(var i=0;i<256;++i){var a=i,u=i,l=7;for(a>>>=1;a;a>>>=1)u<<=1,u|=1&a,--l;r[i]=u<<l&255}})(o),s.reverse=function(r){return o[255&r]<<24|o[r>>>8&255]<<16|o[r>>>16&255]<<8|o[r>>>24&255]},s.interleave2=function(r,i){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i&=65535)|i<<8))|i<<4))|i<<2))|i<<1))<<1},s.deinterleave2=function(r,i){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>i&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},s.interleave3=function(r,i,a){return r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2),(r|=(i=1227133513&((i=3272356035&((i=251719695&((i=4278190335&((i&=1023)|i<<16))|i<<8))|i<<4))|i<<2))<<1)|(a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2))<<2},s.deinterleave3=function(r,i){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>i&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},s.nextCombination=function(r){var i=r|r-1;return i+1|(~i&-~i)-1>>>t(r)+1}},2014:function(f,s,t){"use strict";var o=t(3105),r=t(4623);function i(p,g){var m=p.length,b=p.length-g.length,y=Math.min;if(b)return b;switch(m){case 0:return 0;case 1:return p[0]-g[0];case 2:return(E=p[0]+p[1]-g[0]-g[1])||y(p[0],p[1])-y(g[0],g[1]);case 3:var M=p[0]+p[1],h=g[0]+g[1];if(E=M+p[2]-(h+g[2]))return E;var E,k=y(p[0],p[1]),D=y(g[0],g[1]);return(E=y(k,p[2])-y(D,g[2]))||y(k+p[2],M)-y(D+g[2],h);default:var P=p.slice(0);P.sort();var L=g.slice(0);L.sort();for(var O=0;O<m;++O)if(b=P[O]-L[O])return b;return 0}}function a(p,g){return i(p[0],g[0])}function u(p,g){if(g){for(var m=p.length,b=new Array(m),y=0;y<m;++y)b[y]=[p[y],g[y]];for(b.sort(a),y=0;y<m;++y)p[y]=b[y][0],g[y]=b[y][1];return p}return p.sort(i),p}function l(p){if(p.length===0)return[];for(var g=1,m=p.length,b=1;b<m;++b){var y=p[b];if(i(y,p[b-1])){if(b===g){g++;continue}p[g++]=y}}return p.length=g,p}function d(p,g){for(var m=0,b=p.length-1,y=-1;m<=b;){var M=m+b>>1,h=i(p[M],g);h<=0?(h===0&&(y=M),m=M+1):h>0&&(b=M-1)}return y}function c(p,g){for(var m=new Array(p.length),b=0,y=m.length;b<y;++b)m[b]=[];for(var M=[],h=(b=0,g.length);b<h;++b)for(var E=g[b],k=E.length,D=1,P=1<<k;D<P;++D){M.length=o.popCount(D);for(var L=0,O=0;O<k;++O)D&1<<O&&(M[L++]=E[O]);var N=d(p,M);if(!(N<0))for(;m[N++].push(b),!(N>=p.length||i(p[N],M)!==0););}return m}function _(p,g){if(g<0)return[];for(var m=[],b=(1<<g+1)-1,y=0;y<p.length;++y)for(var M=p[y],h=b;h<1<<M.length;h=o.nextCombination(h)){for(var E=new Array(g+1),k=0,D=0;D<M.length;++D)h&1<<D&&(E[k++]=M[D]);m.push(E)}return u(m)}s.dimension=function(p){for(var g=0,m=Math.max,b=0,y=p.length;b<y;++b)g=m(g,p[b].length);return g-1},s.countVertices=function(p){for(var g=-1,m=Math.max,b=0,y=p.length;b<y;++b)for(var M=p[b],h=0,E=M.length;h<E;++h)g=m(g,M[h]);return g+1},s.cloneCells=function(p){for(var g=new Array(p.length),m=0,b=p.length;m<b;++m)g[m]=p[m].slice(0);return g},s.compareCells=i,s.normalize=u,s.unique=l,s.findCell=d,s.incidence=c,s.dual=function(p,g){if(!g)return c(l(_(p,0)),p);for(var m=new Array(g),b=0;b<g;++b)m[b]=[];b=0;for(var y=p.length;b<y;++b)for(var M=p[b],h=0,E=M.length;h<E;++h)m[M[h]].push(b);return m},s.explode=function(p){for(var g=[],m=0,b=p.length;m<b;++m)for(var y=p[m],M=0|y.length,h=1,E=1<<M;h<E;++h){for(var k=[],D=0;D<M;++D)h>>>D&1&&k.push(y[D]);g.push(k)}return u(g)},s.skeleton=_,s.boundary=function(p){for(var g=[],m=0,b=p.length;m<b;++m)for(var y=p[m],M=0,h=y.length;M<h;++M){for(var E=new Array(y.length-1),k=0,D=0;k<h;++k)k!==M&&(E[D++]=y[k]);g.push(E)}return u(g)},s.connectedComponents=function(p,g){return g?function(m,b){for(var y=new r(b),M=0;M<m.length;++M)for(var h=m[M],E=0;E<h.length;++E)for(var k=E+1;k<h.length;++k)y.link(h[E],h[k]);var D=[],P=y.ranks;for(M=0;M<P.length;++M)P[M]=-1;for(M=0;M<m.length;++M){var L=y.find(m[M][0]);P[L]<0?(P[L]=D.length,D.push([m[M].slice(0)])):D[P[L]].push(m[M].slice(0))}return D}(p,g):function(m){for(var b=l(u(_(m,0))),y=new r(b.length),M=0;M<m.length;++M)for(var h=m[M],E=0;E<h.length;++E)for(var k=d(b,[h[E]]),D=E+1;D<h.length;++D)y.link(k,d(b,[h[D]]));var P=[],L=y.ranks;for(M=0;M<L.length;++M)L[M]=-1;for(M=0;M<m.length;++M){var O=y.find(d(b,[m[M][0]]));L[O]<0?(L[O]=P.length,P.push([m[M].slice(0)])):P[L[O]].push(m[M].slice(0))}return P}(p)}},4623:function(f){"use strict";function s(t){this.roots=new Array(t),this.ranks=new Array(t);for(var o=0;o<t;++o)this.roots[o]=o,this.ranks[o]=0}f.exports=s,s.prototype.length=function(){return this.roots.length},s.prototype.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},s.prototype.find=function(t){for(var o=this.roots;o[t]!==t;){var r=o[t];o[t]=o[r],t=r}return t},s.prototype.link=function(t,o){var r=this.find(t),i=this.find(o);if(r!==i){var a=this.ranks,u=this.roots,l=a[r],d=a[i];l<d?u[r]=i:d<l?u[i]=r:(u[i]=r,++a[r])}}},5878:function(f,s,t){"use strict";f.exports=function(i,a,u){for(var l=a.length,d=i.length,c=new Array(l),_=new Array(l),p=new Array(l),g=new Array(l),m=0;m<l;++m)c[m]=_[m]=-1,p[m]=1/0,g[m]=!1;for(m=0;m<d;++m){var b=i[m];if(b.length!==2)throw new Error("Input must be a graph");var y=b[1],M=b[0];_[M]!==-1?_[M]=-2:_[M]=y,c[y]!==-1?c[y]=-2:c[y]=M}function h(ee){if(g[ee])return 1/0;var J,Q,ne,K=c[ee],oe=_[ee];return K<0||oe<0?1/0:(J=a[ee],Q=a[K],ne=a[oe],Math.abs(o(J,Q,ne))/Math.sqrt(Math.pow(Q[0]-ne[0],2)+Math.pow(Q[1]-ne[1],2)))}function E(ee,J){var Q=F[ee],ne=F[J];F[ee]=ne,F[J]=Q,j[Q]=J,j[ne]=ee}function k(ee){return p[F[ee]]}function D(ee){return 1&ee?ee-1>>1:(ee>>1)-1}function P(ee){for(var J=k(ee);;){var Q=J,ne=2*ee+1,K=2*(ee+1),oe=ee;if(ne<Z){var le=k(ne);le<Q&&(oe=ne,Q=le)}if(K<Z&&k(K)<Q&&(oe=K),oe===ee)return ee;E(ee,oe),ee=oe}}function L(ee){for(var J=k(ee);ee>0;){var Q=D(ee);if(!(Q>=0&&J<k(Q)))return ee;E(ee,Q),ee=Q}}function O(){if(Z>0){var ee=F[0];return E(0,Z-1),Z-=1,P(0),ee}return-1}function N(ee,J){var Q=F[ee];return p[Q]===J?ee:(p[Q]=-1/0,L(ee),O(),p[Q]=J,L((Z+=1)-1))}function V(ee){if(!g[ee]){g[ee]=!0;var J=c[ee],Q=_[ee];c[Q]>=0&&(c[Q]=J),_[J]>=0&&(_[J]=Q),j[J]>=0&&N(j[J],h(J)),j[Q]>=0&&N(j[Q],h(Q))}}var F=[],j=new Array(l);for(m=0;m<l;++m)(p[m]=h(m))<1/0?(j[m]=F.length,F.push(m)):j[m]=-1;var Z=F.length;for(m=Z>>1;m>=0;--m)P(m);for(;;){var z=O();if(z<0||p[z]>u)break;V(z)}var H=[];for(m=0;m<l;++m)g[m]||(j[m]=H.length,H.push(a[m].slice()));function U(ee,J){if(ee[J]<0)return J;var Q=J,ne=J;do{var K=ee[ne];if(!g[ne]||K<0||K===ne||(K=ee[ne=K],!g[ne]||K<0||K===ne))break;ne=K,Q=ee[Q]}while(Q!==ne);for(var oe=J;oe!==ne;oe=ee[oe])ee[oe]=ne;return ne}H.length;var re=[];return i.forEach(function(ee){var J=U(c,ee[0]),Q=U(_,ee[1]);if(J>=0&&Q>=0&&J!==Q){var ne=j[J],K=j[Q];ne!==K&&re.push([ne,K])}}),r.unique(r.normalize(re)),{positions:H,edges:re}};var o=t(3250),r=t(2014)},1303:function(f,s,t){"use strict";f.exports=function(i,a){var u,l,d,c;if(a[0][0]<a[1][0])u=a[0],l=a[1];else{if(!(a[0][0]>a[1][0]))return r(a,i);u=a[1],l=a[0]}if(i[0][0]<i[1][0])d=i[0],c=i[1];else{if(!(i[0][0]>i[1][0]))return-r(i,a);d=i[1],c=i[0]}var _=o(u,l,c),p=o(u,l,d);if(_<0){if(p<=0)return _}else if(_>0){if(p>=0)return _}else if(p)return p;if(_=o(c,d,l),p=o(c,d,u),_<0){if(p<=0)return _}else if(_>0){if(p>=0)return _}else if(p)return p;return l[0]-c[0]};var o=t(3250);function r(i,a){var u,l,d,c;if(a[0][0]<a[1][0])u=a[0],l=a[1];else{if(!(a[0][0]>a[1][0])){var _=Math.min(i[0][1],i[1][1]),p=Math.max(i[0][1],i[1][1]),g=Math.min(a[0][1],a[1][1]),m=Math.max(a[0][1],a[1][1]);return p<g?p-g:_>m?_-m:p-m}u=a[1],l=a[0]}i[0][1]<i[1][1]?(d=i[0],c=i[1]):(d=i[1],c=i[0]);var b=o(l,u,d);return b||(b=o(l,u,c))||c-l}},4209:function(f,s,t){"use strict";f.exports=function(p){for(var g=p.length,m=2*g,b=new Array(m),y=0;y<g;++y){var M=p[y],h=M[0][0]<M[1][0];b[2*y]=new _(M[0][0],M,h,y),b[2*y+1]=new _(M[1][0],M,!h,y)}b.sort(function(V,F){var j=V.x-F.x;return j||(j=V.create-F.create)||Math.min(V.segment[0][1],V.segment[1][1])-Math.min(F.segment[0][1],F.segment[1][1])});var E=r(a),k=[],D=[],P=[];for(y=0;y<m;){for(var L=b[y].x,O=[];y<m;){var N=b[y];if(N.x!==L)break;y+=1,N.segment[0][0]===N.x&&N.segment[1][0]===N.x?N.create&&(N.segment[0][1]<N.segment[1][1]?(O.push(new c(N.segment[0][1],N.index,!0,!0)),O.push(new c(N.segment[1][1],N.index,!1,!1))):(O.push(new c(N.segment[1][1],N.index,!0,!1)),O.push(new c(N.segment[0][1],N.index,!1,!0)))):E=N.create?E.insert(N.segment,N.index):E.remove(N.segment)}k.push(E.root),D.push(L),P.push(O)}return new u(k,D,P)};var o=t(2478),r=t(3840),i=t(3250),a=t(1303);function u(p,g,m){this.slabs=p,this.coordinates=g,this.horizontal=m}function l(p,g){return p.y-g}function d(p,g){for(var m=null;p;){var b,y,M=p.key;M[0][0]<M[1][0]?(b=M[0],y=M[1]):(b=M[1],y=M[0]);var h=i(b,y,g);if(h<0)p=p.left;else if(h>0)if(g[0]!==M[1][0])m=p,p=p.right;else{if(E=d(p.right,g))return E;p=p.left}else{if(g[0]!==M[1][0])return p;var E;if(E=d(p.right,g))return E;p=p.left}}return m}function c(p,g,m,b){this.y=p,this.index=g,this.start=m,this.closed=b}function _(p,g,m,b){this.x=p,this.segment=g,this.create=m,this.index=b}u.prototype.castUp=function(p){var g=o.le(this.coordinates,p[0]);if(g<0)return-1;this.slabs[g];var m=d(this.slabs[g],p),b=-1;if(m&&(b=m.value),this.coordinates[g]===p[0]){var y=null;if(m&&(y=m.key),g>0){var M=d(this.slabs[g-1],p);M&&(y?a(M.key,y)>0&&(y=M.key,b=M.value):(b=M.value,y=M.key))}var h=this.horizontal[g];if(h.length>0){var E=o.ge(h,p[1],l);if(E<h.length){var k=h[E];if(p[1]===k.y){if(k.closed)return k.index;for(;E<h.length-1&&h[E+1].y===p[1];)if((k=h[E+=1]).closed)return k.index;if(k.y===p[1]&&!k.start){if((E+=1)>=h.length)return b;k=h[E]}}if(k.start)if(y){var D=i(y[0],y[1],[p[0],k.y]);y[0][0]>y[1][0]&&(D=-D),D>0&&(b=k.index)}else b=k.index;else k.y!==p[1]&&(b=k.index)}}}return b}},5202:function(f,s,t){"use strict";var o=t(1944),r=t(8210);function i(u,l){var d=r(o(u,l),[l[l.length-1]]);return d[d.length-1]}function a(u,l,d,c){var _=-l/(c-l);_<0?_=0:_>1&&(_=1);for(var p=1-_,g=u.length,m=new Array(g),b=0;b<g;++b)m[b]=_*u[b]+p*d[b];return m}f.exports=function(u,l){for(var d=[],c=[],_=i(u[u.length-1],l),p=u[u.length-1],g=u[0],m=0;m<u.length;++m,p=g){var b=i(g=u[m],l);if(_<0&&b>0||_>0&&b<0){var y=a(p,b,g,_);d.push(y),c.push(y.slice())}b<0?c.push(g.slice()):b>0?d.push(g.slice()):(d.push(g.slice()),c.push(g.slice())),_=b}return{positive:d,negative:c}},f.exports.positive=function(u,l){for(var d=[],c=i(u[u.length-1],l),_=u[u.length-1],p=u[0],g=0;g<u.length;++g,_=p){var m=i(p=u[g],l);(c<0&&m>0||c>0&&m<0)&&d.push(a(_,m,p,c)),m>=0&&d.push(p.slice()),c=m}return d},f.exports.negative=function(u,l){for(var d=[],c=i(u[u.length-1],l),_=u[u.length-1],p=u[0],g=0;g<u.length;++g,_=p){var m=i(p=u[g],l);(c<0&&m>0||c>0&&m<0)&&d.push(a(_,m,p,c)),m<=0&&d.push(p.slice()),c=m}return d}},3387:function(f,s,t){var o;(function(){"use strict";var r={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function i(l){return function(d,c){var _,p,g,m,b,y,M,h,E,k=1,D=d.length,P="";for(p=0;p<D;p++)if(typeof d[p]=="string")P+=d[p];else if(typeof d[p]=="object"){if((m=d[p]).keys)for(_=c[k],g=0;g<m.keys.length;g++){if(_==null)throw new Error(i('[sprintf] Cannot access property "%s" of undefined value "%s"',m.keys[g],m.keys[g-1]));_=_[m.keys[g]]}else _=m.param_no?c[m.param_no]:c[k++];if(r.not_type.test(m.type)&&r.not_primitive.test(m.type)&&_ instanceof Function&&(_=_()),r.numeric_arg.test(m.type)&&typeof _!="number"&&isNaN(_))throw new TypeError(i("[sprintf] expecting number but found %T",_));switch(r.number.test(m.type)&&(h=_>=0),m.type){case"b":_=parseInt(_,10).toString(2);break;case"c":_=String.fromCharCode(parseInt(_,10));break;case"d":case"i":_=parseInt(_,10);break;case"j":_=JSON.stringify(_,null,m.width?parseInt(m.width):0);break;case"e":_=m.precision?parseFloat(_).toExponential(m.precision):parseFloat(_).toExponential();break;case"f":_=m.precision?parseFloat(_).toFixed(m.precision):parseFloat(_);break;case"g":_=m.precision?String(Number(_.toPrecision(m.precision))):parseFloat(_);break;case"o":_=(parseInt(_,10)>>>0).toString(8);break;case"s":_=String(_),_=m.precision?_.substring(0,m.precision):_;break;case"t":_=String(!!_),_=m.precision?_.substring(0,m.precision):_;break;case"T":_=Object.prototype.toString.call(_).slice(8,-1).toLowerCase(),_=m.precision?_.substring(0,m.precision):_;break;case"u":_=parseInt(_,10)>>>0;break;case"v":_=_.valueOf(),_=m.precision?_.substring(0,m.precision):_;break;case"x":_=(parseInt(_,10)>>>0).toString(16);break;case"X":_=(parseInt(_,10)>>>0).toString(16).toUpperCase()}r.json.test(m.type)?P+=_:(!r.number.test(m.type)||h&&!m.sign?E="":(E=h?"+":"-",_=_.toString().replace(r.sign,"")),y=m.pad_char?m.pad_char==="0"?"0":m.pad_char.charAt(1):" ",M=m.width-(E+_).length,b=m.width&&M>0?y.repeat(M):"",P+=m.align?E+_+b:y==="0"?E+b+_:b+E+_)}return P}(function(d){if(u[d])return u[d];for(var c,_=d,p=[],g=0;_;){if((c=r.text.exec(_))!==null)p.push(c[0]);else if((c=r.modulo.exec(_))!==null)p.push("%");else{if((c=r.placeholder.exec(_))===null)throw new SyntaxError("[sprintf] unexpected placeholder");if(c[2]){g|=1;var m=[],b=c[2],y=[];if((y=r.key.exec(b))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");for(m.push(y[1]);(b=b.substring(y[0].length))!=="";)if((y=r.key_access.exec(b))!==null)m.push(y[1]);else{if((y=r.index_access.exec(b))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");m.push(y[1])}c[2]=m}else g|=2;if(g===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");p.push({placeholder:c[0],param_no:c[1],keys:c[2],sign:c[3],pad_char:c[4],align:c[5],width:c[6],precision:c[7],type:c[8]})}_=_.substring(c[0].length)}return u[d]=p}(l),arguments)}function a(l,d){return i.apply(null,[l].concat(d||[]))}var u=Object.create(null);s.sprintf=i,s.vsprintf=a,typeof window<"u"&&(window.sprintf=i,window.vsprintf=a,(o=(function(){return{sprintf:i,vsprintf:a}}).call(s,t,s,f))===void 0||(f.exports=o))})()},3711:function(f,s,t){"use strict";f.exports=function(u,l){if(u.dimension<=0)return{positions:[],cells:[]};if(u.dimension===1)return function(_,p){for(var g=r(_,p),m=g.length,b=new Array(m),y=new Array(m),M=0;M<m;++M)b[M]=[g[M]],y[M]=[M];return{positions:b,cells:y}}(u,l);var d=u.order.join()+"-"+u.dtype,c=a[d];return l=+l||0,c||(c=a[d]=function(_,p){var g=_.length+"d",m=i[g];if(m)return m(o,_,p)}(u.order,u.dtype)),c(u,l)};var o=t(2640),r=t(781),i={"2d":function(u,l,d){var c=u({order:l,scalarArguments:3,getters:d==="generic"?[0]:void 0,phase:function(_,p,g,m){return _>m|0},vertex:function(_,p,g,m,b,y,M,h,E,k,D,P,L){var O=(M<<0)+(h<<1)+(E<<2)+(k<<3)|0;if(O!==0&&O!==15)switch(O){case 0:case 15:D.push([_-.5,p-.5]);break;case 1:D.push([_-.25-.25*(m+g-2*L)/(g-m),p-.25-.25*(b+g-2*L)/(g-b)]);break;case 2:D.push([_-.75-.25*(-m-g+2*L)/(m-g),p-.25-.25*(y+m-2*L)/(m-y)]);break;case 3:D.push([_-.5,p-.5-.5*(b+g+y+m-4*L)/(g-b+m-y)]);break;case 4:D.push([_-.25-.25*(y+b-2*L)/(b-y),p-.75-.25*(-b-g+2*L)/(b-g)]);break;case 5:D.push([_-.5-.5*(m+g+y+b-4*L)/(g-m+b-y),p-.5]);break;case 6:D.push([_-.5-.25*(-m-g+y+b)/(m-g+b-y),p-.5-.25*(-b-g+y+m)/(b-g+m-y)]);break;case 7:D.push([_-.75-.25*(y+b-2*L)/(b-y),p-.75-.25*(y+m-2*L)/(m-y)]);break;case 8:D.push([_-.75-.25*(-y-b+2*L)/(y-b),p-.75-.25*(-y-m+2*L)/(y-m)]);break;case 9:D.push([_-.5-.25*(m+g+-y-b)/(g-m+y-b),p-.5-.25*(b+g+-y-m)/(g-b+y-m)]);break;case 10:D.push([_-.5-.5*(-m-g-y-b+4*L)/(m-g+y-b),p-.5]);break;case 11:D.push([_-.25-.25*(-y-b+2*L)/(y-b),p-.75-.25*(b+g-2*L)/(g-b)]);break;case 12:D.push([_-.5,p-.5-.5*(-b-g-y-m+4*L)/(b-g+y-m)]);break;case 13:D.push([_-.75-.25*(m+g-2*L)/(g-m),p-.25-.25*(-y-m+2*L)/(y-m)]);break;case 14:D.push([_-.25-.25*(-m-g+2*L)/(m-g),p-.25-.25*(-b-g+2*L)/(b-g)])}},cell:function(_,p,g,m,b,y,M,h,E){b?h.push([_,p]):h.push([p,_])}});return function(_,p){var g=[],m=[];return c(_,g,m,p),{positions:g,cells:m}}}},a={}},529:function(f,s,t){"use strict";f.exports=function a(u,l,d){var c=(d=d||{}).fontStyle||"normal",_=d.fontWeight||"normal",p=d.fontVariant||"normal",g=[c,_,p,u].join("_"),m=i[g];m||(m=i[g]={" ":{data:new Float32Array(0),shape:.2}});var b=m[l];if(!b)if(l.length<=1||!/\d/.test(l))b=m[l]=function(V){for(var F=V.cells,j=V.positions,Z=new Float32Array(6*F.length),z=0,H=0,U=0;U<F.length;++U)for(var re=F[U],ee=0;ee<3;++ee){var J=j[re[ee]];Z[z++]=J[0],Z[z++]=J[1]+1.4,H=Math.max(J[0],H)}return{data:Z,shape:H}}(o(l,{triangles:!0,font:u,fontStyle:c,fontWeight:_,fontVariant:p,textAlign:d.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var y=l.split(/(\d|\s)/),M=new Array(y.length),h=0,E=0,k=0;k<y.length;++k)M[k]=a(u,y[k]),h+=M[k].data.length,E+=M[k].shape,k>0&&(E+=.02);var D=new Float32Array(h),P=0,L=-.5*E;for(k=0;k<M.length;++k){for(var O=M[k].data,N=0;N<O.length;N+=2)D[P++]=O[N]+L,D[P++]=O[N+1];L+=M[k].shape+.02}b=m[l]={data:D,shape:E}}return b};var o=t(4359),r=window||v.global||{},i=r.__TEXT_CACHE||{};r.__TEXT_CACHE={}},665:function(f,s,t){"use strict";var o=t(3202);f.exports=a;var r=96;function i(u,l){var d=o(getComputedStyle(u).getPropertyValue(l));return d[0]*a(d[1],u)}function a(u,l){switch(l=l||document.body,u=(u||"px").trim().toLowerCase(),l!==window&&l!==document||(l=document.body),u){case"%":return l.clientHeight/100;case"ch":case"ex":return function(d,c){var _=document.createElement("div");_.style["font-size"]="128"+d,c.appendChild(_);var p=i(_,"font-size")/128;return c.removeChild(_),p}(u,l);case"em":return i(l,"font-size");case"rem":return i(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return r;case"cm":return r/2.54;case"mm":return r/25.4;case"pt":return r/72;case"pc":return r/6}return 1}},7261:function(f,s,t){"use strict";f.exports=function(b){var y=(b=b||{}).center||[0,0,0],M=b.up||[0,1,0],h=b.right||_(M),E=b.radius||1,k=b.theta||0,D=b.phi||0;if(y=[].slice.call(y,0,3),M=[].slice.call(M,0,3),u(M,M),h=[].slice.call(h,0,3),u(h,h),"eye"in b){var P=b.eye,L=[P[0]-y[0],P[1]-y[1],P[2]-y[2]];a(h,L,M),d(h[0],h[1],h[2])<1e-6?h=_(M):u(h,h),E=d(L[0],L[1],L[2]);var O=l(M,L)/E,N=l(h,L)/E;D=Math.acos(O),k=Math.acos(N)}return E=Math.log(E),new p(b.zoomMin,b.zoomMax,y,M,h,E,k,D)};var o=t(9215),r=t(7608),i=t(6079),a=t(5911),u=t(3536),l=t(244);function d(b,y,M){return Math.sqrt(Math.pow(b,2)+Math.pow(y,2)+Math.pow(M,2))}function c(b){return Math.min(1,Math.max(-1,b))}function _(b){var y=Math.abs(b[0]),M=Math.abs(b[1]),h=Math.abs(b[2]),E=[0,0,0];y>Math.max(M,h)?E[2]=1:M>Math.max(y,h)?E[0]=1:E[1]=1;for(var k=0,D=0,P=0;P<3;++P)k+=b[P]*b[P],D+=E[P]*b[P];for(P=0;P<3;++P)E[P]-=D/k*b[P];return u(E,E),E}function p(b,y,M,h,E,k,D,P){this.center=o(M),this.up=o(h),this.right=o(E),this.radius=o([k]),this.angle=o([D,P]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(b,y),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var L=0;L<16;++L)this.computedMatrix[L]=.5;this.recalcMatrix(0)}var g=p.prototype;g.setDistanceLimits=function(b,y){b=b>0?Math.log(b):-1/0,y=y>0?Math.log(y):1/0,y=Math.max(y,b),this.radius.bounds[0][0]=b,this.radius.bounds[1][0]=y},g.getDistanceLimits=function(b){var y=this.radius.bounds[0];return b?(b[0]=Math.exp(y[0][0]),b[1]=Math.exp(y[1][0]),b):[Math.exp(y[0][0]),Math.exp(y[1][0])]},g.recalcMatrix=function(b){this.center.curve(b),this.up.curve(b),this.right.curve(b),this.radius.curve(b),this.angle.curve(b);for(var y=this.computedUp,M=this.computedRight,h=0,E=0,k=0;k<3;++k)E+=y[k]*M[k],h+=y[k]*y[k];var D=Math.sqrt(h),P=0;for(k=0;k<3;++k)M[k]-=y[k]*E/h,P+=M[k]*M[k],y[k]/=D;var L=Math.sqrt(P);for(k=0;k<3;++k)M[k]/=L;var O=this.computedToward;a(O,y,M),u(O,O);var N=Math.exp(this.computedRadius[0]),V=this.computedAngle[0],F=this.computedAngle[1],j=Math.cos(V),Z=Math.sin(V),z=Math.cos(F),H=Math.sin(F),U=this.computedCenter,re=j*z,ee=Z*z,J=H,Q=-j*H,ne=-Z*H,K=z,oe=this.computedEye,le=this.computedMatrix;for(k=0;k<3;++k){var se=re*M[k]+ee*O[k]+J*y[k];le[4*k+1]=Q*M[k]+ne*O[k]+K*y[k],le[4*k+2]=se,le[4*k+3]=0}var de=le[1],be=le[5],_e=le[9],xe=le[2],ve=le[6],ye=le[10],me=be*ye-_e*ve,Me=_e*xe-de*ye,Ae=de*ve-be*xe,ce=d(me,Me,Ae);for(me/=ce,Me/=ce,Ae/=ce,le[0]=me,le[4]=Me,le[8]=Ae,k=0;k<3;++k)oe[k]=U[k]+le[2+4*k]*N;for(k=0;k<3;++k){P=0;for(var ae=0;ae<3;++ae)P+=le[k+4*ae]*oe[ae];le[12+k]=-P}le[15]=1},g.getMatrix=function(b,y){this.recalcMatrix(b);var M=this.computedMatrix;if(y){for(var h=0;h<16;++h)y[h]=M[h];return y}return M};var m=[0,0,0];g.rotate=function(b,y,M,h){if(this.angle.move(b,y,M),h){this.recalcMatrix(b);var E=this.computedMatrix;m[0]=E[2],m[1]=E[6],m[2]=E[10];for(var k=this.computedUp,D=this.computedRight,P=this.computedToward,L=0;L<3;++L)E[4*L]=k[L],E[4*L+1]=D[L],E[4*L+2]=P[L];for(i(E,E,h,m),L=0;L<3;++L)k[L]=E[4*L],D[L]=E[4*L+1];this.up.set(b,k[0],k[1],k[2]),this.right.set(b,D[0],D[1],D[2])}},g.pan=function(b,y,M,h){y=y||0,M=M||0,h=h||0,this.recalcMatrix(b);var E=this.computedMatrix,k=(Math.exp(this.computedRadius[0]),E[1]),D=E[5],P=E[9],L=d(k,D,P);k/=L,D/=L,P/=L;var O=E[0],N=E[4],V=E[8],F=O*k+N*D+V*P,j=d(O-=k*F,N-=D*F,V-=P*F),Z=(O/=j)*y+k*M,z=(N/=j)*y+D*M,H=(V/=j)*y+P*M;this.center.move(b,Z,z,H);var U=Math.exp(this.computedRadius[0]);U=Math.max(1e-4,U+h),this.radius.set(b,Math.log(U))},g.translate=function(b,y,M,h){this.center.move(b,y||0,M||0,h||0)},g.setMatrix=function(b,y,M,h){var E=1;typeof M=="number"&&(E=0|M),(E<0||E>3)&&(E=1);var k=(E+2)%3;y||(this.recalcMatrix(b),y=this.computedMatrix);var D=y[E],P=y[E+4],L=y[E+8];if(h){var O=Math.abs(D),N=Math.abs(P),V=Math.abs(L),F=Math.max(O,N,V);O===F?(D=D<0?-1:1,P=L=0):V===F?(L=L<0?-1:1,D=P=0):(P=P<0?-1:1,D=L=0)}else{var j=d(D,P,L);D/=j,P/=j,L/=j}var Z,z,H=y[k],U=y[k+4],re=y[k+8],ee=H*D+U*P+re*L,J=d(H-=D*ee,U-=P*ee,re-=L*ee),Q=P*(re/=J)-L*(U/=J),ne=L*(H/=J)-D*re,K=D*U-P*H,oe=d(Q,ne,K);if(Q/=oe,ne/=oe,K/=oe,this.center.jump(b,Ee,Ie,Re),this.radius.idle(b),this.up.jump(b,D,P,L),this.right.jump(b,H,U,re),E===2){var le=y[1],se=y[5],de=y[9],be=le*H+se*U+de*re,_e=le*Q+se*ne+de*K;Z=me<0?-Math.PI/2:Math.PI/2,z=Math.atan2(_e,be)}else{var xe=y[2],ve=y[6],ye=y[10],me=xe*D+ve*P+ye*L,Me=xe*H+ve*U+ye*re,Ae=xe*Q+ve*ne+ye*K;Z=Math.asin(c(me)),z=Math.atan2(Ae,Me)}this.angle.jump(b,z,Z),this.recalcMatrix(b);var ce=y[2],ae=y[6],pe=y[10],De=this.computedMatrix;r(De,y);var ke=De[15],Ee=De[12]/ke,Ie=De[13]/ke,Re=De[14]/ke,Ne=Math.exp(this.computedRadius[0]);this.center.jump(b,Ee-ce*Ne,Ie-ae*Ne,Re-pe*Ne)},g.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},g.idle=function(b){this.center.idle(b),this.up.idle(b),this.right.idle(b),this.radius.idle(b),this.angle.idle(b)},g.flush=function(b){this.center.flush(b),this.up.flush(b),this.right.flush(b),this.radius.flush(b),this.angle.flush(b)},g.setDistance=function(b,y){y>0&&this.radius.set(b,Math.log(y))},g.lookAt=function(b,y,M,h){this.recalcMatrix(b),y=y||this.computedEye,M=M||this.computedCenter;var E=(h=h||this.computedUp)[0],k=h[1],D=h[2],P=d(E,k,D);if(!(P<1e-6)){E/=P,k/=P,D/=P;var L=y[0]-M[0],O=y[1]-M[1],N=y[2]-M[2],V=d(L,O,N);if(!(V<1e-6)){L/=V,O/=V,N/=V;var F=this.computedRight,j=F[0],Z=F[1],z=F[2],H=E*j+k*Z+D*z,U=d(j-=H*E,Z-=H*k,z-=H*D);if(!(U<.01&&(U=d(j=k*N-D*O,Z=D*L-E*N,z=E*O-k*L))<1e-6)){j/=U,Z/=U,z/=U,this.up.set(b,E,k,D),this.right.set(b,j,Z,z),this.center.set(b,M[0],M[1],M[2]),this.radius.set(b,Math.log(V));var re=k*z-D*Z,ee=D*j-E*z,J=E*Z-k*j,Q=d(re,ee,J),ne=E*L+k*O+D*N,K=j*L+Z*O+z*N,oe=(re/=Q)*L+(ee/=Q)*O+(J/=Q)*N,le=Math.asin(c(ne)),se=Math.atan2(oe,K),de=this.angle._state,be=de[de.length-1],_e=de[de.length-2];be%=2*Math.PI;var xe=Math.abs(be+2*Math.PI-se),ve=Math.abs(be-se),ye=Math.abs(be-2*Math.PI-se);xe<ve&&(be+=2*Math.PI),ye<ve&&(be-=2*Math.PI),this.angle.jump(this.angle.lastT(),be,_e),this.angle.set(b,se,le)}}}}},5250:function(f){"use strict";f.exports=function(t,o,r){var i=t*o,a=s*t,u=a-(a-t),l=t-u,d=s*o,c=d-(d-o),_=o-c,p=l*_-(i-u*c-l*c-u*_);return r?(r[0]=p,r[1]=i,r):[p,i]};var s=+(Math.pow(2,27)+1)},9362:function(f){"use strict";f.exports=function(s,t,o){var r=s+t,i=r-s,a=t-i,u=s-(r-i);return o?(o[0]=u+a,o[1]=r,o):[u+a,r]}},1888:function(f,s,t){"use strict";var o=t(8828),r=t(1338),i=t(4793).hp;t.g.__TYPEDARRAY_POOL||(t.g.__TYPEDARRAY_POOL={UINT8:r([32,0]),UINT16:r([32,0]),UINT32:r([32,0]),BIGUINT64:r([32,0]),INT8:r([32,0]),INT16:r([32,0]),INT32:r([32,0]),BIGINT64:r([32,0]),FLOAT:r([32,0]),DOUBLE:r([32,0]),DATA:r([32,0]),UINT8C:r([32,0]),BUFFER:r([32,0])});var a=typeof Uint8ClampedArray<"u",u=typeof BigUint64Array<"u",l=typeof BigInt64Array<"u",d=t.g.__TYPEDARRAY_POOL;d.UINT8C||(d.UINT8C=r([32,0])),d.BIGUINT64||(d.BIGUINT64=r([32,0])),d.BIGINT64||(d.BIGINT64=r([32,0])),d.BUFFER||(d.BUFFER=r([32,0]));var c=d.DATA,_=d.BUFFER;function p(F){if(F){var j=F.length||F.byteLength,Z=o.log2(j);c[Z].push(F)}}function g(F){F=o.nextPow2(F);var j=o.log2(F),Z=c[j];return Z.length>0?Z.pop():new ArrayBuffer(F)}function m(F){return new Uint8Array(g(F),0,F)}function b(F){return new Uint16Array(g(2*F),0,F)}function y(F){return new Uint32Array(g(4*F),0,F)}function M(F){return new Int8Array(g(F),0,F)}function h(F){return new Int16Array(g(2*F),0,F)}function E(F){return new Int32Array(g(4*F),0,F)}function k(F){return new Float32Array(g(4*F),0,F)}function D(F){return new Float64Array(g(8*F),0,F)}function P(F){return a?new Uint8ClampedArray(g(F),0,F):m(F)}function L(F){return u?new BigUint64Array(g(8*F),0,F):null}function O(F){return l?new BigInt64Array(g(8*F),0,F):null}function N(F){return new DataView(g(F),0,F)}function V(F){F=o.nextPow2(F);var j=o.log2(F),Z=_[j];return Z.length>0?Z.pop():new i(F)}s.free=function(F){if(i.isBuffer(F))_[o.log2(F.length)].push(F);else{if(Object.prototype.toString.call(F)!=="[object ArrayBuffer]"&&(F=F.buffer),!F)return;var j=F.length||F.byteLength,Z=0|o.log2(j);c[Z].push(F)}},s.freeUint8=s.freeUint16=s.freeUint32=s.freeBigUint64=s.freeInt8=s.freeInt16=s.freeInt32=s.freeBigInt64=s.freeFloat32=s.freeFloat=s.freeFloat64=s.freeDouble=s.freeUint8Clamped=s.freeDataView=function(F){p(F.buffer)},s.freeArrayBuffer=p,s.freeBuffer=function(F){_[o.log2(F.length)].push(F)},s.malloc=function(F,j){if(j===void 0||j==="arraybuffer")return g(F);switch(j){case"uint8":return m(F);case"uint16":return b(F);case"uint32":return y(F);case"int8":return M(F);case"int16":return h(F);case"int32":return E(F);case"float":case"float32":return k(F);case"double":case"float64":return D(F);case"uint8_clamped":return P(F);case"bigint64":return O(F);case"biguint64":return L(F);case"buffer":return V(F);case"data":case"dataview":return N(F);default:return null}return null},s.mallocArrayBuffer=g,s.mallocUint8=m,s.mallocUint16=b,s.mallocUint32=y,s.mallocInt8=M,s.mallocInt16=h,s.mallocInt32=E,s.mallocFloat32=s.mallocFloat=k,s.mallocFloat64=s.mallocDouble=D,s.mallocUint8Clamped=P,s.mallocBigUint64=L,s.mallocBigInt64=O,s.mallocDataView=N,s.mallocBuffer=V,s.clearCache=function(){for(var F=0;F<32;++F)d.UINT8[F].length=0,d.UINT16[F].length=0,d.UINT32[F].length=0,d.INT8[F].length=0,d.INT16[F].length=0,d.INT32[F].length=0,d.FLOAT[F].length=0,d.DOUBLE[F].length=0,d.BIGUINT64[F].length=0,d.BIGINT64[F].length=0,d.UINT8C[F].length=0,c[F].length=0,_[F].length=0}},1755:function(f){"use strict";function s(o){this.roots=new Array(o),this.ranks=new Array(o);for(var r=0;r<o;++r)this.roots[r]=r,this.ranks[r]=0}f.exports=s;var t=s.prototype;Object.defineProperty(t,"length",{get:function(){return this.roots.length}}),t.makeSet=function(){var o=this.roots.length;return this.roots.push(o),this.ranks.push(0),o},t.find=function(o){for(var r=o,i=this.roots;i[o]!==o;)o=i[o];for(;i[r]!==o;){var a=i[r];i[r]=o,r=a}return o},t.link=function(o,r){var i=this.find(o),a=this.find(r);if(i!==a){var u=this.ranks,l=this.roots,d=u[i],c=u[a];d<c?l[i]=a:c<d?l[a]=i:(l[a]=i,++u[i])}}},1682:function(f){"use strict";f.exports=function(s,t,o){return s.length===0?s:t?(o||s.sort(t),function(r,i){for(var a=1,u=r.length,l=r[0],d=r[0],c=1;c<u;++c)if(d=l,i(l=r[c],d)){if(c===a){a++;continue}r[a++]=l}return r.length=a,r}(s,t)):(o||s.sort(),function(r){for(var i=1,a=r.length,u=r[0],l=r[0],d=1;d<a;++d,l=u)if(l=u,(u=r[d])!==l){if(d===i){i++;continue}r[i++]=u}return r.length=i,r}(s))}},4359:function(f,s,t){"use strict";f.exports=function(a,u){return typeof u=="object"&&u!==null||(u={}),o(a,u.canvas||r,u.context||i,u)};var o=t(7718),r=null,i=null;typeof document<"u"&&((r=document.createElement("canvas")).width=8192,r.height=1024,i=r.getContext("2d"))},7718:function(f,s,t){f.exports=function(L,O,N,V){var F=64,j=1.25,Z={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return V&&(V.size&&V.size>0&&(F=V.size),V.lineSpacing&&V.lineSpacing>0&&(j=V.lineSpacing),V.styletags&&V.styletags.breaklines&&(Z.breaklines=!!V.styletags.breaklines),V.styletags&&V.styletags.bolds&&(Z.bolds=!!V.styletags.bolds),V.styletags&&V.styletags.italics&&(Z.italics=!!V.styletags.italics),V.styletags&&V.styletags.subscripts&&(Z.subscripts=!!V.styletags.subscripts),V.styletags&&V.styletags.superscripts&&(Z.superscripts=!!V.styletags.superscripts)),N.font=[V.fontStyle,V.fontVariant,V.fontWeight,F+"px",V.font].filter(function(z){return z}).join(" "),N.textAlign="start",N.textBaseline="alphabetic",N.direction="ltr",P(function(z,H,U,re,ee,J){U=U.replace(/\n/g,""),U=J.breaklines===!0?U.replace(/\<br\>/g,`
`):U.replace(/\<br\>/g," ");var Q="",ne=[];for(se=0;se<U.length;++se)ne[se]=Q;J.bolds===!0&&(ne=E(d,c,U,ne)),J.italics===!0&&(ne=E(_,p,U,ne)),J.superscripts===!0&&(ne=E(g,b,U,ne)),J.subscripts===!0&&(ne=E(y,h,U,ne));var K=[],oe="";for(se=0;se<U.length;++se)ne[se]!==null&&(oe+=U[se],K.push(ne[se]));var le,se,de,be,_e,xe=oe.split(`
`),ve=xe.length,ye=Math.round(ee*re),me=re,Me=2*re,Ae=0,ce=ve*ye+Me;z.height<ce&&(z.height=ce),H.fillStyle="#000",H.fillRect(0,0,z.width,z.height),H.fillStyle="#fff";var ae=0,pe="";function De(){if(pe!==""){var Ce=H.measureText(pe).width;H.fillText(pe,me+de,Me+be),de+=Ce}}function ke(){return Math.round(_e)+"px "}function Ee(Ce,ze){var Pe=""+H.font;if(J.subscripts===!0){var Ue=Ce.indexOf(M),Ge=ze.indexOf(M),Xe=Ue>-1?parseInt(Ce[1+Ue]):0,st=Ge>-1?parseInt(ze[1+Ge]):0;Xe!==st&&(Pe=Pe.replace(ke(),"?px "),_e*=Math.pow(.75,st-Xe),Pe=Pe.replace("?px ",ke())),be+=.25*ye*(st-Xe)}if(J.superscripts===!0){var at=Ce.indexOf(m),vt=ze.indexOf(m),xt=at>-1?parseInt(Ce[1+at]):0,gt=vt>-1?parseInt(ze[1+vt]):0;xt!==gt&&(Pe=Pe.replace(ke(),"?px "),_e*=Math.pow(.75,gt-xt),Pe=Pe.replace("?px ",ke())),be-=.25*ye*(gt-xt)}if(J.bolds===!0){var rt=Ce.indexOf(c)>-1,tt=ze.indexOf(c)>-1;!rt&&tt&&(Pe=Mt?Pe.replace("italic ","italic bold "):"bold "+Pe),rt&&!tt&&(Pe=Pe.replace("bold ",""))}if(J.italics===!0){var Mt=Ce.indexOf(p)>-1,Pt=ze.indexOf(p)>-1;!Mt&&Pt&&(Pe="italic "+Pe),Mt&&!Pt&&(Pe=Pe.replace("italic ",""))}H.font=Pe}for(le=0;le<ve;++le){var Ie=xe[le]+`
`;for(de=0,be=le*ye,_e=re,pe="",se=0;se<Ie.length;++se){var Re=se+ae<K.length?K[se+ae]:K[K.length-1];Q===Re?pe+=Ie[se]:(De(),pe=Ie[se],Re!==void 0&&(Ee(Q,Re),Q=Re))}De(),ae+=Ie.length;var Ne=0|Math.round(de+2*me);Ae<Ne&&(Ae=Ne)}var ge=Ae,we=Me+ye*ve;return r(H.getImageData(0,0,ge,we).data,[we,ge,4]).pick(-1,-1,0).transpose(1,0)}(O,N,L,F,j,Z),V,F)},f.exports.processPixels=P;var o=t(3711),r=t(9618),i=t(5878),a=t(332),u=t(2538),l=t(2095),d="b",c="b|",_="i",p="i|",g="sup",m="+",b="+1",y="sub",M="-",h="-1";function E(L,O,N,V){for(var F="<"+L+">",j="</"+L+">",Z=F.length,z=j.length,H=O[0]===m||O[0]===M,U=0,re=-z;U>-1&&(U=N.indexOf(F,U))!==-1&&(re=N.indexOf(j,U+Z))!==-1&&!(re<=U);){for(var ee=U;ee<re+z;++ee)if(ee<U+Z||ee>=re)V[ee]=null,N=N.substr(0,ee)+" "+N.substr(ee+1);else if(V[ee]!==null){var J=V[ee].indexOf(O[0]);J===-1?V[ee]+=O:H&&(V[ee]=V[ee].substr(0,J+1)+(1+parseInt(V[ee][J+1]))+V[ee].substr(J+2))}var Q=U+Z,ne=N.substr(Q,re-Q).indexOf(F);U=ne!==-1?ne:re+z}return V}function k(L,O){var N=o(L,128);return O?i(N.cells,N.positions,.25):{edges:N.cells,positions:N.positions}}function D(L,O,N,V){var F=k(L,V),j=function(le,se,de){for(var be=se.textAlign||"start",_e=se.textBaseline||"alphabetic",xe=[1<<30,1<<30],ve=[0,0],ye=le.length,me=0;me<ye;++me)for(var Me=le[me],Ae=0;Ae<2;++Ae)xe[Ae]=0|Math.min(xe[Ae],Me[Ae]),ve[Ae]=0|Math.max(ve[Ae],Me[Ae]);var ce=0;switch(be){case"center":ce=-.5*(xe[0]+ve[0]);break;case"right":case"end":ce=-ve[0];break;case"left":case"start":ce=-xe[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+be+"'")}var ae=0;switch(_e){case"hanging":case"top":ae=-xe[1];break;case"middle":ae=-.5*(xe[1]+ve[1]);break;case"alphabetic":case"ideographic":ae=-3*de;break;case"bottom":ae=-ve[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+_e+"'")}var pe=1/de;return"lineHeight"in se?pe*=+se.lineHeight:"width"in se?pe=se.width/(ve[0]-xe[0]):"height"in se&&(pe=se.height/(ve[1]-xe[1])),le.map(function(De){return[pe*(De[0]+ce),pe*(De[1]+ae)]})}(F.positions,O,N),Z=F.edges,z=O.orientation==="ccw";if(a(j,Z),O.polygons||O.polygon||O.polyline){for(var H=l(Z,j),U=new Array(H.length),re=0;re<H.length;++re){for(var ee=H[re],J=new Array(ee.length),Q=0;Q<ee.length;++Q){for(var ne=ee[Q],K=new Array(ne.length),oe=0;oe<ne.length;++oe)K[oe]=j[ne[oe]].slice();z&&K.reverse(),J[Q]=K}U[re]=J}return U}return O.triangles||O.triangulate||O.triangle?{cells:u(j,Z,{delaunay:!1,exterior:!1,interior:!0}),positions:j}:{edges:Z,positions:j}}function P(L,O,N){try{return D(L,O,N,!0)}catch{}try{return D(L,O,N,!1)}catch{}return O.polygons||O.polyline||O.polygon?[]:O.triangles||O.triangulate||O.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},1538:function(f){(function(){"use strict";if(typeof ses>"u"||!ses.ok||ses.ok()){typeof ses<"u"&&(ses.weakMapPermitHostObjects=y);var s=!1;if(typeof WeakMap=="function"){var t=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var o=new t,r=Object.freeze({});if(o.set(r,1),o.get(r)===1)return void(f.exports=WeakMap);s=!0}}var i=Object.getOwnPropertyNames,a=Object.defineProperty,u=Object.isExtensible,l="weakmap:",d=l+"ident:"+Math.random()+"___";if(typeof crypto<"u"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var c=new ArrayBuffer(25),_=new Uint8Array(c);crypto.getRandomValues(_),d=l+"rand:"+Array.prototype.map.call(_,function(D){return(D%36).toString(36)}).join("")+"___"}if(a(Object,"getOwnPropertyNames",{value:function(D){return i(D).filter(M)}}),"getPropertyNames"in Object){var p=Object.getPropertyNames;a(Object,"getPropertyNames",{value:function(D){return p(D).filter(M)}})}(function(){var D=Object.freeze;a(Object,"freeze",{value:function(O){return h(O),D(O)}});var P=Object.seal;a(Object,"seal",{value:function(O){return h(O),P(O)}});var L=Object.preventExtensions;a(Object,"preventExtensions",{value:function(O){return h(O),L(O)}})})();var g=!1,m=0,b=function(){this instanceof b||k();var D=[],P=[],L=m++;return Object.create(b.prototype,{get___:{value:E(function(O,N){var V,F=h(O);return F?L in F?F[L]:N:(V=D.indexOf(O))>=0?P[V]:N})},has___:{value:E(function(O){var N=h(O);return N?L in N:D.indexOf(O)>=0})},set___:{value:E(function(O,N){var V,F=h(O);return F?F[L]=N:(V=D.indexOf(O))>=0?P[V]=N:(V=D.length,P[V]=N,D[V]=O),this})},delete___:{value:E(function(O){var N,V,F=h(O);return F?L in F&&delete F[L]:!((N=D.indexOf(O))<0||(V=D.length-1,D[N]=void 0,P[N]=P[V],D[N]=D[V],D.length=V,P.length=V,0))})}})};b.prototype=Object.create(Object.prototype,{get:{value:function(D,P){return this.get___(D,P)},writable:!0,configurable:!0},has:{value:function(D){return this.has___(D)},writable:!0,configurable:!0},set:{value:function(D,P){return this.set___(D,P)},writable:!0,configurable:!0},delete:{value:function(D){return this.delete___(D)},writable:!0,configurable:!0}}),typeof t=="function"?function(){function D(){this instanceof b||k();var P,L=new t,O=void 0,N=!1;return P=s?function(V,F){return L.set(V,F),L.has(V)||(O||(O=new b),O.set(V,F)),this}:function(V,F){if(N)try{L.set(V,F)}catch{O||(O=new b),O.set___(V,F)}else L.set(V,F);return this},Object.create(b.prototype,{get___:{value:E(function(V,F){return O?L.has(V)?L.get(V):O.get___(V,F):L.get(V,F)})},has___:{value:E(function(V){return L.has(V)||!!O&&O.has___(V)})},set___:{value:E(P)},delete___:{value:E(function(V){var F=!!L.delete(V);return O&&O.delete___(V)||F})},permitHostObjects___:{value:E(function(V){if(V!==y)throw new Error("bogus call to permitHostObjects___");N=!0})}})}s&&typeof Proxy<"u"&&(Proxy=void 0),D.prototype=b.prototype,f.exports=D,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),f.exports=b)}function y(D){D.permitHostObjects___&&D.permitHostObjects___(y)}function M(D){return!(D.substr(0,8)==l&&D.substr(D.length-3)==="___")}function h(D){if(D!==Object(D))throw new TypeError("Not an object: "+D);var P=D[d];if(P&&P.key===D)return P;if(u(D)){P={key:D};try{return a(D,d,{value:P,writable:!1,enumerable:!1,configurable:!1}),P}catch{return}}}function E(D){return D.prototype=null,Object.freeze(D)}function k(){g||typeof console>"u"||(g=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}})()},236:function(f,s,t){var o=t(8284);f.exports=function(){var r={};return function(i){if((typeof i!="object"||i===null)&&typeof i!="function")throw new Error("Weakmap-shim: Key must be object");var a=i.valueOf(r);return a&&a.identity===r?a:o(i,r)}}},8284:function(f){f.exports=function(s,t){var o={identity:t},r=s.valueOf;return Object.defineProperty(s,"valueOf",{value:function(i){return i!==t?r.apply(this,arguments):o},writable:!0}),o}},606:function(f,s,t){var o=t(236);f.exports=function(){var r=o();return{get:function(i,a){var u=r(i);return u.hasOwnProperty("value")?u.value:a},set:function(i,a){return r(i).value=a,this},has:function(i){return"value"in r(i)},delete:function(i){return delete r(i).value}}}},3349:function(f){"use strict";f.exports=function(s){var t={};return function(o,r,i){var a=o.dtype,u=o.order,l=[a,u.join()].join(),d=t[l];return d||(t[l]=d=s([a,u])),d(o.shape.slice(0),o.data,o.stride,0|o.offset,r,i)}}((function(){return function(s,t,o,r,i,a){var u=s[0],l=o[0],d=[0],c=l;r|=0;var _=0,p=l;for(_=0;_<u;++_){var g=t[r]-a,m=t[r+c]-a;g>=0!=m>=0&&i.push(d[0]+.5+.5*(g+m)/(g-m)),r+=p,++d[0]}}}).bind(void 0,{funcName:"zeroCrossings"}))},781:function(f,s,t){"use strict";f.exports=function(r,i){var a=[];return i=+i||0,o(r.hi(r.shape[0]-1),a,i),a};var o=t(3349)},7790:function(){}},n={};function T(f){var s=n[f];if(s!==void 0)return s.exports;var t=n[f]={id:f,loaded:!1,exports:{}};return w[f].call(t.exports,t,t.exports,T),t.loaded=!0,t.exports}T.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),T.nmd=function(f){return f.paths=[],f.children||(f.children=[]),f};var x=T(1964);C.exports=x})()},33576:function(C,A,e){"use strict";function v(ce,ae){for(var pe=0;pe<ae.length;pe++){var De=ae[pe];De.enumerable=De.enumerable||!1,De.configurable=!0,"value"in De&&(De.writable=!0),Object.defineProperty(ce,(ke=function(Ee,Ie){if(x(Ee)!=="object"||Ee===null)return Ee;var Re=Ee[Symbol.toPrimitive];if(Re!==void 0){var Ne=Re.call(Ee,"string");if(x(Ne)!=="object")return Ne;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Ee)}(De.key),x(ke)==="symbol"?ke:String(ke)),De)}var ke}function w(ce){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ae){return ae.__proto__||Object.getPrototypeOf(ae)},w(ce)}function n(ce){if(ce===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ce}function T(ce,ae){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(pe,De){return pe.__proto__=De,pe},T(ce,ae)}function x(ce){return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ae){return typeof ae}:function(ae){return ae&&typeof Symbol=="function"&&ae.constructor===Symbol&&ae!==Symbol.prototype?"symbol":typeof ae},x(ce)}var f=e(59968),s=e(35984),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;A.Buffer=i,A.SlowBuffer=function(ce){return+ce!=ce&&(ce=0),i.alloc(+ce)},A.INSPECT_MAX_BYTES=50;var o=2147483647;function r(ce){if(ce>o)throw new RangeError('The value "'+ce+'" is invalid for option "size"');var ae=new Uint8Array(ce);return Object.setPrototypeOf(ae,i.prototype),ae}function i(ce,ae,pe){if(typeof ce=="number"){if(typeof ae=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return l(ce)}return a(ce,ae,pe)}function a(ce,ae,pe){if(typeof ce=="string")return function(Ee,Ie){if(typeof Ie=="string"&&Ie!==""||(Ie="utf8"),!i.isEncoding(Ie))throw new TypeError("Unknown encoding: "+Ie);var Re=0|p(Ee,Ie),Ne=r(Re),ge=Ne.write(Ee,Ie);return ge!==Re&&(Ne=Ne.slice(0,ge)),Ne}(ce,ae);if(ArrayBuffer.isView(ce))return function(Ee){if(ve(Ee,Uint8Array)){var Ie=new Uint8Array(Ee);return c(Ie.buffer,Ie.byteOffset,Ie.byteLength)}return d(Ee)}(ce);if(ce==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+x(ce));if(ve(ce,ArrayBuffer)||ce&&ve(ce.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ve(ce,SharedArrayBuffer)||ce&&ve(ce.buffer,SharedArrayBuffer)))return c(ce,ae,pe);if(typeof ce=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var De=ce.valueOf&&ce.valueOf();if(De!=null&&De!==ce)return i.from(De,ae,pe);var ke=function(Ee){if(i.isBuffer(Ee)){var Ie=0|_(Ee.length),Re=r(Ie);return Re.length===0||Ee.copy(Re,0,0,Ie),Re}return Ee.length!==void 0?typeof Ee.length!="number"||ye(Ee.length)?r(0):d(Ee):Ee.type==="Buffer"&&Array.isArray(Ee.data)?d(Ee.data):void 0}(ce);if(ke)return ke;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ce[Symbol.toPrimitive]=="function")return i.from(ce[Symbol.toPrimitive]("string"),ae,pe);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+x(ce))}function u(ce){if(typeof ce!="number")throw new TypeError('"size" argument must be of type number');if(ce<0)throw new RangeError('The value "'+ce+'" is invalid for option "size"')}function l(ce){return u(ce),r(ce<0?0:0|_(ce))}function d(ce){for(var ae=ce.length<0?0:0|_(ce.length),pe=r(ae),De=0;De<ae;De+=1)pe[De]=255&ce[De];return pe}function c(ce,ae,pe){if(ae<0||ce.byteLength<ae)throw new RangeError('"offset" is outside of buffer bounds');if(ce.byteLength<ae+(pe||0))throw new RangeError('"length" is outside of buffer bounds');var De;return De=ae===void 0&&pe===void 0?new Uint8Array(ce):pe===void 0?new Uint8Array(ce,ae):new Uint8Array(ce,ae,pe),Object.setPrototypeOf(De,i.prototype),De}function _(ce){if(ce>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|ce}function p(ce,ae){if(i.isBuffer(ce))return ce.length;if(ArrayBuffer.isView(ce)||ve(ce,ArrayBuffer))return ce.byteLength;if(typeof ce!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+x(ce));var pe=ce.length,De=arguments.length>2&&arguments[2]===!0;if(!De&&pe===0)return 0;for(var ke=!1;;)switch(ae){case"ascii":case"latin1":case"binary":return pe;case"utf8":case"utf-8":return be(ce).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*pe;case"hex":return pe>>>1;case"base64":return _e(ce).length;default:if(ke)return De?-1:be(ce).length;ae=(""+ae).toLowerCase(),ke=!0}}function g(ce,ae,pe){var De=!1;if((ae===void 0||ae<0)&&(ae=0),ae>this.length||((pe===void 0||pe>this.length)&&(pe=this.length),pe<=0)||(pe>>>=0)<=(ae>>>=0))return"";for(ce||(ce="utf8");;)switch(ce){case"hex":return F(this,ae,pe);case"utf8":case"utf-8":return L(this,ae,pe);case"ascii":return N(this,ae,pe);case"latin1":case"binary":return V(this,ae,pe);case"base64":return P(this,ae,pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,ae,pe);default:if(De)throw new TypeError("Unknown encoding: "+ce);ce=(ce+"").toLowerCase(),De=!0}}function m(ce,ae,pe){var De=ce[ae];ce[ae]=ce[pe],ce[pe]=De}function b(ce,ae,pe,De,ke){if(ce.length===0)return-1;if(typeof pe=="string"?(De=pe,pe=0):pe>2147483647?pe=2147483647:pe<-2147483648&&(pe=-2147483648),ye(pe=+pe)&&(pe=ke?0:ce.length-1),pe<0&&(pe=ce.length+pe),pe>=ce.length){if(ke)return-1;pe=ce.length-1}else if(pe<0){if(!ke)return-1;pe=0}if(typeof ae=="string"&&(ae=i.from(ae,De)),i.isBuffer(ae))return ae.length===0?-1:y(ce,ae,pe,De,ke);if(typeof ae=="number")return ae&=255,typeof Uint8Array.prototype.indexOf=="function"?ke?Uint8Array.prototype.indexOf.call(ce,ae,pe):Uint8Array.prototype.lastIndexOf.call(ce,ae,pe):y(ce,[ae],pe,De,ke);throw new TypeError("val must be string, number or Buffer")}function y(ce,ae,pe,De,ke){var Ee,Ie=1,Re=ce.length,Ne=ae.length;if(De!==void 0&&((De=String(De).toLowerCase())==="ucs2"||De==="ucs-2"||De==="utf16le"||De==="utf-16le")){if(ce.length<2||ae.length<2)return-1;Ie=2,Re/=2,Ne/=2,pe/=2}function ge(Pe,Ue){return Ie===1?Pe[Ue]:Pe.readUInt16BE(Ue*Ie)}if(ke){var we=-1;for(Ee=pe;Ee<Re;Ee++)if(ge(ce,Ee)===ge(ae,we===-1?0:Ee-we)){if(we===-1&&(we=Ee),Ee-we+1===Ne)return we*Ie}else we!==-1&&(Ee-=Ee-we),we=-1}else for(pe+Ne>Re&&(pe=Re-Ne),Ee=pe;Ee>=0;Ee--){for(var Ce=!0,ze=0;ze<Ne;ze++)if(ge(ce,Ee+ze)!==ge(ae,ze)){Ce=!1;break}if(Ce)return Ee}return-1}function M(ce,ae,pe,De){pe=Number(pe)||0;var ke=ce.length-pe;De?(De=Number(De))>ke&&(De=ke):De=ke;var Ee,Ie=ae.length;for(De>Ie/2&&(De=Ie/2),Ee=0;Ee<De;++Ee){var Re=parseInt(ae.substr(2*Ee,2),16);if(ye(Re))return Ee;ce[pe+Ee]=Re}return Ee}function h(ce,ae,pe,De){return xe(be(ae,ce.length-pe),ce,pe,De)}function E(ce,ae,pe,De){return xe(function(ke){for(var Ee=[],Ie=0;Ie<ke.length;++Ie)Ee.push(255&ke.charCodeAt(Ie));return Ee}(ae),ce,pe,De)}function k(ce,ae,pe,De){return xe(_e(ae),ce,pe,De)}function D(ce,ae,pe,De){return xe(function(ke,Ee){for(var Ie,Re,Ne,ge=[],we=0;we<ke.length&&!((Ee-=2)<0);++we)Re=(Ie=ke.charCodeAt(we))>>8,Ne=Ie%256,ge.push(Ne),ge.push(Re);return ge}(ae,ce.length-pe),ce,pe,De)}function P(ce,ae,pe){return ae===0&&pe===ce.length?f.fromByteArray(ce):f.fromByteArray(ce.slice(ae,pe))}function L(ce,ae,pe){pe=Math.min(ce.length,pe);for(var De=[],ke=ae;ke<pe;){var Ee=ce[ke],Ie=null,Re=Ee>239?4:Ee>223?3:Ee>191?2:1;if(ke+Re<=pe){var Ne=void 0,ge=void 0,we=void 0,Ce=void 0;switch(Re){case 1:Ee<128&&(Ie=Ee);break;case 2:(192&(Ne=ce[ke+1]))==128&&(Ce=(31&Ee)<<6|63&Ne)>127&&(Ie=Ce);break;case 3:Ne=ce[ke+1],ge=ce[ke+2],(192&Ne)==128&&(192&ge)==128&&(Ce=(15&Ee)<<12|(63&Ne)<<6|63&ge)>2047&&(Ce<55296||Ce>57343)&&(Ie=Ce);break;case 4:Ne=ce[ke+1],ge=ce[ke+2],we=ce[ke+3],(192&Ne)==128&&(192&ge)==128&&(192&we)==128&&(Ce=(15&Ee)<<18|(63&Ne)<<12|(63&ge)<<6|63&we)>65535&&Ce<1114112&&(Ie=Ce)}}Ie===null?(Ie=65533,Re=1):Ie>65535&&(Ie-=65536,De.push(Ie>>>10&1023|55296),Ie=56320|1023&Ie),De.push(Ie),ke+=Re}return function(ze){var Pe=ze.length;if(Pe<=O)return String.fromCharCode.apply(String,ze);for(var Ue="",Ge=0;Ge<Pe;)Ue+=String.fromCharCode.apply(String,ze.slice(Ge,Ge+=O));return Ue}(De)}A.kMaxLength=o,i.TYPED_ARRAY_SUPPORT=function(){try{var ce=new Uint8Array(1),ae={foo:function(){return 42}};return Object.setPrototypeOf(ae,Uint8Array.prototype),Object.setPrototypeOf(ce,ae),ce.foo()===42}catch{return!1}}(),i.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}}),i.poolSize=8192,i.from=function(ce,ae,pe){return a(ce,ae,pe)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array),i.alloc=function(ce,ae,pe){return function(De,ke,Ee){return u(De),De<=0?r(De):ke!==void 0?typeof Ee=="string"?r(De).fill(ke,Ee):r(De).fill(ke):r(De)}(ce,ae,pe)},i.allocUnsafe=function(ce){return l(ce)},i.allocUnsafeSlow=function(ce){return l(ce)},i.isBuffer=function(ce){return ce!=null&&ce._isBuffer===!0&&ce!==i.prototype},i.compare=function(ce,ae){if(ve(ce,Uint8Array)&&(ce=i.from(ce,ce.offset,ce.byteLength)),ve(ae,Uint8Array)&&(ae=i.from(ae,ae.offset,ae.byteLength)),!i.isBuffer(ce)||!i.isBuffer(ae))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ce===ae)return 0;for(var pe=ce.length,De=ae.length,ke=0,Ee=Math.min(pe,De);ke<Ee;++ke)if(ce[ke]!==ae[ke]){pe=ce[ke],De=ae[ke];break}return pe<De?-1:De<pe?1:0},i.isEncoding=function(ce){switch(String(ce).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(ce,ae){if(!Array.isArray(ce))throw new TypeError('"list" argument must be an Array of Buffers');if(ce.length===0)return i.alloc(0);var pe;if(ae===void 0)for(ae=0,pe=0;pe<ce.length;++pe)ae+=ce[pe].length;var De=i.allocUnsafe(ae),ke=0;for(pe=0;pe<ce.length;++pe){var Ee=ce[pe];if(ve(Ee,Uint8Array))ke+Ee.length>De.length?(i.isBuffer(Ee)||(Ee=i.from(Ee)),Ee.copy(De,ke)):Uint8Array.prototype.set.call(De,Ee,ke);else{if(!i.isBuffer(Ee))throw new TypeError('"list" argument must be an Array of Buffers');Ee.copy(De,ke)}ke+=Ee.length}return De},i.byteLength=p,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var ce=this.length;if(ce%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ae=0;ae<ce;ae+=2)m(this,ae,ae+1);return this},i.prototype.swap32=function(){var ce=this.length;if(ce%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ae=0;ae<ce;ae+=4)m(this,ae,ae+3),m(this,ae+1,ae+2);return this},i.prototype.swap64=function(){var ce=this.length;if(ce%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ae=0;ae<ce;ae+=8)m(this,ae,ae+7),m(this,ae+1,ae+6),m(this,ae+2,ae+5),m(this,ae+3,ae+4);return this},i.prototype.toString=function(){var ce=this.length;return ce===0?"":arguments.length===0?L(this,0,ce):g.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(ce){if(!i.isBuffer(ce))throw new TypeError("Argument must be a Buffer");return this===ce||i.compare(this,ce)===0},i.prototype.inspect=function(){var ce="",ae=A.INSPECT_MAX_BYTES;return ce=this.toString("hex",0,ae).replace(/(.{2})/g,"$1 ").trim(),this.length>ae&&(ce+=" ... "),"<Buffer "+ce+">"},t&&(i.prototype[t]=i.prototype.inspect),i.prototype.compare=function(ce,ae,pe,De,ke){if(ve(ce,Uint8Array)&&(ce=i.from(ce,ce.offset,ce.byteLength)),!i.isBuffer(ce))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+x(ce));if(ae===void 0&&(ae=0),pe===void 0&&(pe=ce?ce.length:0),De===void 0&&(De=0),ke===void 0&&(ke=this.length),ae<0||pe>ce.length||De<0||ke>this.length)throw new RangeError("out of range index");if(De>=ke&&ae>=pe)return 0;if(De>=ke)return-1;if(ae>=pe)return 1;if(this===ce)return 0;for(var Ee=(ke>>>=0)-(De>>>=0),Ie=(pe>>>=0)-(ae>>>=0),Re=Math.min(Ee,Ie),Ne=this.slice(De,ke),ge=ce.slice(ae,pe),we=0;we<Re;++we)if(Ne[we]!==ge[we]){Ee=Ne[we],Ie=ge[we];break}return Ee<Ie?-1:Ie<Ee?1:0},i.prototype.includes=function(ce,ae,pe){return this.indexOf(ce,ae,pe)!==-1},i.prototype.indexOf=function(ce,ae,pe){return b(this,ce,ae,pe,!0)},i.prototype.lastIndexOf=function(ce,ae,pe){return b(this,ce,ae,pe,!1)},i.prototype.write=function(ce,ae,pe,De){if(ae===void 0)De="utf8",pe=this.length,ae=0;else if(pe===void 0&&typeof ae=="string")De=ae,pe=this.length,ae=0;else{if(!isFinite(ae))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");ae>>>=0,isFinite(pe)?(pe>>>=0,De===void 0&&(De="utf8")):(De=pe,pe=void 0)}var ke=this.length-ae;if((pe===void 0||pe>ke)&&(pe=ke),ce.length>0&&(pe<0||ae<0)||ae>this.length)throw new RangeError("Attempt to write outside buffer bounds");De||(De="utf8");for(var Ee=!1;;)switch(De){case"hex":return M(this,ce,ae,pe);case"utf8":case"utf-8":return h(this,ce,ae,pe);case"ascii":case"latin1":case"binary":return E(this,ce,ae,pe);case"base64":return k(this,ce,ae,pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,ce,ae,pe);default:if(Ee)throw new TypeError("Unknown encoding: "+De);De=(""+De).toLowerCase(),Ee=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var O=4096;function N(ce,ae,pe){var De="";pe=Math.min(ce.length,pe);for(var ke=ae;ke<pe;++ke)De+=String.fromCharCode(127&ce[ke]);return De}function V(ce,ae,pe){var De="";pe=Math.min(ce.length,pe);for(var ke=ae;ke<pe;++ke)De+=String.fromCharCode(ce[ke]);return De}function F(ce,ae,pe){var De=ce.length;(!ae||ae<0)&&(ae=0),(!pe||pe<0||pe>De)&&(pe=De);for(var ke="",Ee=ae;Ee<pe;++Ee)ke+=me[ce[Ee]];return ke}function j(ce,ae,pe){for(var De=ce.slice(ae,pe),ke="",Ee=0;Ee<De.length-1;Ee+=2)ke+=String.fromCharCode(De[Ee]+256*De[Ee+1]);return ke}function Z(ce,ae,pe){if(ce%1!=0||ce<0)throw new RangeError("offset is not uint");if(ce+ae>pe)throw new RangeError("Trying to access beyond buffer length")}function z(ce,ae,pe,De,ke,Ee){if(!i.isBuffer(ce))throw new TypeError('"buffer" argument must be a Buffer instance');if(ae>ke||ae<Ee)throw new RangeError('"value" argument is out of bounds');if(pe+De>ce.length)throw new RangeError("Index out of range")}function H(ce,ae,pe,De,ke){oe(ae,De,ke,ce,pe,7);var Ee=Number(ae&BigInt(4294967295));ce[pe++]=Ee,Ee>>=8,ce[pe++]=Ee,Ee>>=8,ce[pe++]=Ee,Ee>>=8,ce[pe++]=Ee;var Ie=Number(ae>>BigInt(32)&BigInt(4294967295));return ce[pe++]=Ie,Ie>>=8,ce[pe++]=Ie,Ie>>=8,ce[pe++]=Ie,Ie>>=8,ce[pe++]=Ie,pe}function U(ce,ae,pe,De,ke){oe(ae,De,ke,ce,pe,7);var Ee=Number(ae&BigInt(4294967295));ce[pe+7]=Ee,Ee>>=8,ce[pe+6]=Ee,Ee>>=8,ce[pe+5]=Ee,Ee>>=8,ce[pe+4]=Ee;var Ie=Number(ae>>BigInt(32)&BigInt(4294967295));return ce[pe+3]=Ie,Ie>>=8,ce[pe+2]=Ie,Ie>>=8,ce[pe+1]=Ie,Ie>>=8,ce[pe]=Ie,pe+8}function re(ce,ae,pe,De,ke,Ee){if(pe+De>ce.length)throw new RangeError("Index out of range");if(pe<0)throw new RangeError("Index out of range")}function ee(ce,ae,pe,De,ke){return ae=+ae,pe>>>=0,ke||re(ce,0,pe,4),s.write(ce,ae,pe,De,23,4),pe+4}function J(ce,ae,pe,De,ke){return ae=+ae,pe>>>=0,ke||re(ce,0,pe,8),s.write(ce,ae,pe,De,52,8),pe+8}i.prototype.slice=function(ce,ae){var pe=this.length;(ce=~~ce)<0?(ce+=pe)<0&&(ce=0):ce>pe&&(ce=pe),(ae=ae===void 0?pe:~~ae)<0?(ae+=pe)<0&&(ae=0):ae>pe&&(ae=pe),ae<ce&&(ae=ce);var De=this.subarray(ce,ae);return Object.setPrototypeOf(De,i.prototype),De},i.prototype.readUintLE=i.prototype.readUIntLE=function(ce,ae,pe){ce>>>=0,ae>>>=0,pe||Z(ce,ae,this.length);for(var De=this[ce],ke=1,Ee=0;++Ee<ae&&(ke*=256);)De+=this[ce+Ee]*ke;return De},i.prototype.readUintBE=i.prototype.readUIntBE=function(ce,ae,pe){ce>>>=0,ae>>>=0,pe||Z(ce,ae,this.length);for(var De=this[ce+--ae],ke=1;ae>0&&(ke*=256);)De+=this[ce+--ae]*ke;return De},i.prototype.readUint8=i.prototype.readUInt8=function(ce,ae){return ce>>>=0,ae||Z(ce,1,this.length),this[ce]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(ce,ae){return ce>>>=0,ae||Z(ce,2,this.length),this[ce]|this[ce+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(ce,ae){return ce>>>=0,ae||Z(ce,2,this.length),this[ce]<<8|this[ce+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(ce,ae){return ce>>>=0,ae||Z(ce,4,this.length),(this[ce]|this[ce+1]<<8|this[ce+2]<<16)+16777216*this[ce+3]},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(ce,ae){return ce>>>=0,ae||Z(ce,4,this.length),16777216*this[ce]+(this[ce+1]<<16|this[ce+2]<<8|this[ce+3])},i.prototype.readBigUInt64LE=Me(function(ce){le(ce>>>=0,"offset");var ae=this[ce],pe=this[ce+7];ae!==void 0&&pe!==void 0||se(ce,this.length-8);var De=ae+this[++ce]*Math.pow(2,8)+this[++ce]*Math.pow(2,16)+this[++ce]*Math.pow(2,24),ke=this[++ce]+this[++ce]*Math.pow(2,8)+this[++ce]*Math.pow(2,16)+pe*Math.pow(2,24);return BigInt(De)+(BigInt(ke)<<BigInt(32))}),i.prototype.readBigUInt64BE=Me(function(ce){le(ce>>>=0,"offset");var ae=this[ce],pe=this[ce+7];ae!==void 0&&pe!==void 0||se(ce,this.length-8);var De=ae*Math.pow(2,24)+this[++ce]*Math.pow(2,16)+this[++ce]*Math.pow(2,8)+this[++ce],ke=this[++ce]*Math.pow(2,24)+this[++ce]*Math.pow(2,16)+this[++ce]*Math.pow(2,8)+pe;return(BigInt(De)<<BigInt(32))+BigInt(ke)}),i.prototype.readIntLE=function(ce,ae,pe){ce>>>=0,ae>>>=0,pe||Z(ce,ae,this.length);for(var De=this[ce],ke=1,Ee=0;++Ee<ae&&(ke*=256);)De+=this[ce+Ee]*ke;return De>=(ke*=128)&&(De-=Math.pow(2,8*ae)),De},i.prototype.readIntBE=function(ce,ae,pe){ce>>>=0,ae>>>=0,pe||Z(ce,ae,this.length);for(var De=ae,ke=1,Ee=this[ce+--De];De>0&&(ke*=256);)Ee+=this[ce+--De]*ke;return Ee>=(ke*=128)&&(Ee-=Math.pow(2,8*ae)),Ee},i.prototype.readInt8=function(ce,ae){return ce>>>=0,ae||Z(ce,1,this.length),128&this[ce]?-1*(255-this[ce]+1):this[ce]},i.prototype.readInt16LE=function(ce,ae){ce>>>=0,ae||Z(ce,2,this.length);var pe=this[ce]|this[ce+1]<<8;return 32768&pe?4294901760|pe:pe},i.prototype.readInt16BE=function(ce,ae){ce>>>=0,ae||Z(ce,2,this.length);var pe=this[ce+1]|this[ce]<<8;return 32768&pe?4294901760|pe:pe},i.prototype.readInt32LE=function(ce,ae){return ce>>>=0,ae||Z(ce,4,this.length),this[ce]|this[ce+1]<<8|this[ce+2]<<16|this[ce+3]<<24},i.prototype.readInt32BE=function(ce,ae){return ce>>>=0,ae||Z(ce,4,this.length),this[ce]<<24|this[ce+1]<<16|this[ce+2]<<8|this[ce+3]},i.prototype.readBigInt64LE=Me(function(ce){le(ce>>>=0,"offset");var ae=this[ce],pe=this[ce+7];ae!==void 0&&pe!==void 0||se(ce,this.length-8);var De=this[ce+4]+this[ce+5]*Math.pow(2,8)+this[ce+6]*Math.pow(2,16)+(pe<<24);return(BigInt(De)<<BigInt(32))+BigInt(ae+this[++ce]*Math.pow(2,8)+this[++ce]*Math.pow(2,16)+this[++ce]*Math.pow(2,24))}),i.prototype.readBigInt64BE=Me(function(ce){le(ce>>>=0,"offset");var ae=this[ce],pe=this[ce+7];ae!==void 0&&pe!==void 0||se(ce,this.length-8);var De=(ae<<24)+this[++ce]*Math.pow(2,16)+this[++ce]*Math.pow(2,8)+this[++ce];return(BigInt(De)<<BigInt(32))+BigInt(this[++ce]*Math.pow(2,24)+this[++ce]*Math.pow(2,16)+this[++ce]*Math.pow(2,8)+pe)}),i.prototype.readFloatLE=function(ce,ae){return ce>>>=0,ae||Z(ce,4,this.length),s.read(this,ce,!0,23,4)},i.prototype.readFloatBE=function(ce,ae){return ce>>>=0,ae||Z(ce,4,this.length),s.read(this,ce,!1,23,4)},i.prototype.readDoubleLE=function(ce,ae){return ce>>>=0,ae||Z(ce,8,this.length),s.read(this,ce,!0,52,8)},i.prototype.readDoubleBE=function(ce,ae){return ce>>>=0,ae||Z(ce,8,this.length),s.read(this,ce,!1,52,8)},i.prototype.writeUintLE=i.prototype.writeUIntLE=function(ce,ae,pe,De){ce=+ce,ae>>>=0,pe>>>=0,De||z(this,ce,ae,pe,Math.pow(2,8*pe)-1,0);var ke=1,Ee=0;for(this[ae]=255&ce;++Ee<pe&&(ke*=256);)this[ae+Ee]=ce/ke&255;return ae+pe},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(ce,ae,pe,De){ce=+ce,ae>>>=0,pe>>>=0,De||z(this,ce,ae,pe,Math.pow(2,8*pe)-1,0);var ke=pe-1,Ee=1;for(this[ae+ke]=255&ce;--ke>=0&&(Ee*=256);)this[ae+ke]=ce/Ee&255;return ae+pe},i.prototype.writeUint8=i.prototype.writeUInt8=function(ce,ae,pe){return ce=+ce,ae>>>=0,pe||z(this,ce,ae,1,255,0),this[ae]=255&ce,ae+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(ce,ae,pe){return ce=+ce,ae>>>=0,pe||z(this,ce,ae,2,65535,0),this[ae]=255&ce,this[ae+1]=ce>>>8,ae+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(ce,ae,pe){return ce=+ce,ae>>>=0,pe||z(this,ce,ae,2,65535,0),this[ae]=ce>>>8,this[ae+1]=255&ce,ae+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(ce,ae,pe){return ce=+ce,ae>>>=0,pe||z(this,ce,ae,4,4294967295,0),this[ae+3]=ce>>>24,this[ae+2]=ce>>>16,this[ae+1]=ce>>>8,this[ae]=255&ce,ae+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(ce,ae,pe){return ce=+ce,ae>>>=0,pe||z(this,ce,ae,4,4294967295,0),this[ae]=ce>>>24,this[ae+1]=ce>>>16,this[ae+2]=ce>>>8,this[ae+3]=255&ce,ae+4},i.prototype.writeBigUInt64LE=Me(function(ce){return H(this,ce,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeBigUInt64BE=Me(function(ce){return U(this,ce,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeIntLE=function(ce,ae,pe,De){if(ce=+ce,ae>>>=0,!De){var ke=Math.pow(2,8*pe-1);z(this,ce,ae,pe,ke-1,-ke)}var Ee=0,Ie=1,Re=0;for(this[ae]=255&ce;++Ee<pe&&(Ie*=256);)ce<0&&Re===0&&this[ae+Ee-1]!==0&&(Re=1),this[ae+Ee]=(ce/Ie>>0)-Re&255;return ae+pe},i.prototype.writeIntBE=function(ce,ae,pe,De){if(ce=+ce,ae>>>=0,!De){var ke=Math.pow(2,8*pe-1);z(this,ce,ae,pe,ke-1,-ke)}var Ee=pe-1,Ie=1,Re=0;for(this[ae+Ee]=255&ce;--Ee>=0&&(Ie*=256);)ce<0&&Re===0&&this[ae+Ee+1]!==0&&(Re=1),this[ae+Ee]=(ce/Ie>>0)-Re&255;return ae+pe},i.prototype.writeInt8=function(ce,ae,pe){return ce=+ce,ae>>>=0,pe||z(this,ce,ae,1,127,-128),ce<0&&(ce=255+ce+1),this[ae]=255&ce,ae+1},i.prototype.writeInt16LE=function(ce,ae,pe){return ce=+ce,ae>>>=0,pe||z(this,ce,ae,2,32767,-32768),this[ae]=255&ce,this[ae+1]=ce>>>8,ae+2},i.prototype.writeInt16BE=function(ce,ae,pe){return ce=+ce,ae>>>=0,pe||z(this,ce,ae,2,32767,-32768),this[ae]=ce>>>8,this[ae+1]=255&ce,ae+2},i.prototype.writeInt32LE=function(ce,ae,pe){return ce=+ce,ae>>>=0,pe||z(this,ce,ae,4,2147483647,-2147483648),this[ae]=255&ce,this[ae+1]=ce>>>8,this[ae+2]=ce>>>16,this[ae+3]=ce>>>24,ae+4},i.prototype.writeInt32BE=function(ce,ae,pe){return ce=+ce,ae>>>=0,pe||z(this,ce,ae,4,2147483647,-2147483648),ce<0&&(ce=4294967295+ce+1),this[ae]=ce>>>24,this[ae+1]=ce>>>16,this[ae+2]=ce>>>8,this[ae+3]=255&ce,ae+4},i.prototype.writeBigInt64LE=Me(function(ce){return H(this,ce,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeBigInt64BE=Me(function(ce){return U(this,ce,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeFloatLE=function(ce,ae,pe){return ee(this,ce,ae,!0,pe)},i.prototype.writeFloatBE=function(ce,ae,pe){return ee(this,ce,ae,!1,pe)},i.prototype.writeDoubleLE=function(ce,ae,pe){return J(this,ce,ae,!0,pe)},i.prototype.writeDoubleBE=function(ce,ae,pe){return J(this,ce,ae,!1,pe)},i.prototype.copy=function(ce,ae,pe,De){if(!i.isBuffer(ce))throw new TypeError("argument should be a Buffer");if(pe||(pe=0),De||De===0||(De=this.length),ae>=ce.length&&(ae=ce.length),ae||(ae=0),De>0&&De<pe&&(De=pe),De===pe||ce.length===0||this.length===0)return 0;if(ae<0)throw new RangeError("targetStart out of bounds");if(pe<0||pe>=this.length)throw new RangeError("Index out of range");if(De<0)throw new RangeError("sourceEnd out of bounds");De>this.length&&(De=this.length),ce.length-ae<De-pe&&(De=ce.length-ae+pe);var ke=De-pe;return this===ce&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(ae,pe,De):Uint8Array.prototype.set.call(ce,this.subarray(pe,De),ae),ke},i.prototype.fill=function(ce,ae,pe,De){if(typeof ce=="string"){if(typeof ae=="string"?(De=ae,ae=0,pe=this.length):typeof pe=="string"&&(De=pe,pe=this.length),De!==void 0&&typeof De!="string")throw new TypeError("encoding must be a string");if(typeof De=="string"&&!i.isEncoding(De))throw new TypeError("Unknown encoding: "+De);if(ce.length===1){var ke=ce.charCodeAt(0);(De==="utf8"&&ke<128||De==="latin1")&&(ce=ke)}}else typeof ce=="number"?ce&=255:typeof ce=="boolean"&&(ce=Number(ce));if(ae<0||this.length<ae||this.length<pe)throw new RangeError("Out of range index");if(pe<=ae)return this;var Ee;if(ae>>>=0,pe=pe===void 0?this.length:pe>>>0,ce||(ce=0),typeof ce=="number")for(Ee=ae;Ee<pe;++Ee)this[Ee]=ce;else{var Ie=i.isBuffer(ce)?ce:i.from(ce,De),Re=Ie.length;if(Re===0)throw new TypeError('The value "'+ce+'" is invalid for argument "value"');for(Ee=0;Ee<pe-ae;++Ee)this[Ee+ae]=Ie[Ee%Re]}return this};var Q={};function ne(ce,ae,pe){Q[ce]=function(De){function ke(){var Re;return function(Ne,ge){if(!(Ne instanceof ge))throw new TypeError("Cannot call a class as a function")}(this,ke),Re=function(Ne,ge,we){return ge=w(ge),function(Ce,ze){if(ze&&(x(ze)==="object"||typeof ze=="function"))return ze;if(ze!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n(Ce)}(Ne,function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{return!1}}()?Reflect.construct(ge,we||[],w(Ne).constructor):ge.apply(Ne,we))}(this,ke),Object.defineProperty(n(Re),"message",{value:ae.apply(n(Re),arguments),writable:!0,configurable:!0}),Re.name="".concat(Re.name," [").concat(ce,"]"),Re.stack,delete Re.name,Re}var Ee,Ie;return function(Re,Ne){if(typeof Ne!="function"&&Ne!==null)throw new TypeError("Super expression must either be null or a function");Re.prototype=Object.create(Ne&&Ne.prototype,{constructor:{value:Re,writable:!0,configurable:!0}}),Object.defineProperty(Re,"prototype",{writable:!1}),Ne&&T(Re,Ne)}(ke,De),Ee=ke,(Ie=[{key:"code",get:function(){return ce},set:function(Re){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Re,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(ce,"]: ").concat(this.message)}}])&&v(Ee.prototype,Ie),Object.defineProperty(Ee,"prototype",{writable:!1}),ke}(pe)}function K(ce){for(var ae="",pe=ce.length,De=ce[0]==="-"?1:0;pe>=De+4;pe-=3)ae="_".concat(ce.slice(pe-3,pe)).concat(ae);return"".concat(ce.slice(0,pe)).concat(ae)}function oe(ce,ae,pe,De,ke,Ee){if(ce>pe||ce<ae){var Ie,Re=typeof ae=="bigint"?"n":"";throw Ie=Ee>3?ae===0||ae===BigInt(0)?">= 0".concat(Re," and < 2").concat(Re," ** ").concat(8*(Ee+1)).concat(Re):">= -(2".concat(Re," ** ").concat(8*(Ee+1)-1).concat(Re,") and < 2 ** ")+"".concat(8*(Ee+1)-1).concat(Re):">= ".concat(ae).concat(Re," and <= ").concat(pe).concat(Re),new Q.ERR_OUT_OF_RANGE("value",Ie,ce)}(function(Ne,ge,we){le(ge,"offset"),Ne[ge]!==void 0&&Ne[ge+we]!==void 0||se(ge,Ne.length-(we+1))})(De,ke,Ee)}function le(ce,ae){if(typeof ce!="number")throw new Q.ERR_INVALID_ARG_TYPE(ae,"number",ce)}function se(ce,ae,pe){throw Math.floor(ce)!==ce?(le(ce,pe),new Q.ERR_OUT_OF_RANGE(pe||"offset","an integer",ce)):ae<0?new Q.ERR_BUFFER_OUT_OF_BOUNDS:new Q.ERR_OUT_OF_RANGE(pe||"offset",">= ".concat(pe?1:0," and <= ").concat(ae),ce)}ne("ERR_BUFFER_OUT_OF_BOUNDS",function(ce){return ce?"".concat(ce," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),ne("ERR_INVALID_ARG_TYPE",function(ce,ae){return'The "'.concat(ce,'" argument must be of type number. Received type ').concat(x(ae))},TypeError),ne("ERR_OUT_OF_RANGE",function(ce,ae,pe){var De='The value of "'.concat(ce,'" is out of range.'),ke=pe;return Number.isInteger(pe)&&Math.abs(pe)>Math.pow(2,32)?ke=K(String(pe)):typeof pe=="bigint"&&(ke=String(pe),(pe>Math.pow(BigInt(2),BigInt(32))||pe<-Math.pow(BigInt(2),BigInt(32)))&&(ke=K(ke)),ke+="n"),De+" It must be ".concat(ae,". Received ").concat(ke)},RangeError);var de=/[^+/0-9A-Za-z-_]/g;function be(ce,ae){var pe;ae=ae||1/0;for(var De=ce.length,ke=null,Ee=[],Ie=0;Ie<De;++Ie){if((pe=ce.charCodeAt(Ie))>55295&&pe<57344){if(!ke){if(pe>56319){(ae-=3)>-1&&Ee.push(239,191,189);continue}if(Ie+1===De){(ae-=3)>-1&&Ee.push(239,191,189);continue}ke=pe;continue}if(pe<56320){(ae-=3)>-1&&Ee.push(239,191,189),ke=pe;continue}pe=65536+(ke-55296<<10|pe-56320)}else ke&&(ae-=3)>-1&&Ee.push(239,191,189);if(ke=null,pe<128){if((ae-=1)<0)break;Ee.push(pe)}else if(pe<2048){if((ae-=2)<0)break;Ee.push(pe>>6|192,63&pe|128)}else if(pe<65536){if((ae-=3)<0)break;Ee.push(pe>>12|224,pe>>6&63|128,63&pe|128)}else{if(!(pe<1114112))throw new Error("Invalid code point");if((ae-=4)<0)break;Ee.push(pe>>18|240,pe>>12&63|128,pe>>6&63|128,63&pe|128)}}return Ee}function _e(ce){return f.toByteArray(function(ae){if((ae=(ae=ae.split("=")[0]).trim().replace(de,"")).length<2)return"";for(;ae.length%4!=0;)ae+="=";return ae}(ce))}function xe(ce,ae,pe,De){var ke;for(ke=0;ke<De&&!(ke+pe>=ae.length||ke>=ce.length);++ke)ae[ke+pe]=ce[ke];return ke}function ve(ce,ae){return ce instanceof ae||ce!=null&&ce.constructor!=null&&ce.constructor.name!=null&&ce.constructor.name===ae.name}function ye(ce){return ce!=ce}var me=function(){for(var ce="0123456789abcdef",ae=new Array(256),pe=0;pe<16;++pe)for(var De=16*pe,ke=0;ke<16;++ke)ae[De+ke]=ce[pe]+ce[ke];return ae}();function Me(ce){return typeof BigInt>"u"?Ae:ce}function Ae(){throw new Error("BigInt not supported")}},25928:function(C){"use strict";C.exports=w,C.exports.isMobile=w,C.exports.default=w;var A=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,e=/CrOS/,v=/android|ipad|playbook|silk/i;function w(n){n||(n={});var T=n.ua;if(T||typeof navigator>"u"||(T=navigator.userAgent),T&&T.headers&&typeof T.headers["user-agent"]=="string"&&(T=T.headers["user-agent"]),typeof T!="string")return!1;var x=A.test(T)&&!e.test(T)||!!n.tablet&&v.test(T);return!x&&n.tablet&&n.featureDetect&&navigator&&navigator.maxTouchPoints>1&&T.indexOf("Macintosh")!==-1&&T.indexOf("Safari")!==-1&&(x=!0),x}},48932:function(C,A,e){"use strict";e.r(A),e.d(A,{sankeyCenter:function(){return r},sankeyCircular:function(){return P},sankeyJustify:function(){return o},sankeyLeft:function(){return s},sankeyRight:function(){return t}});var v=e(84706),w=e(34712),n=e(10132),T=e(6688),x=e.n(T);function f(xe){return xe.target.depth}function s(xe){return xe.depth}function t(xe,ve){return ve-1-xe.height}function o(xe,ve){return xe.sourceLinks.length?xe.depth:ve-1}function r(xe){return xe.targetLinks.length?xe.depth:xe.sourceLinks.length?(0,v.SY)(xe.sourceLinks,f)-1:0}function i(xe){return function(){return xe}}var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(xe){return typeof xe}:function(xe){return xe&&typeof Symbol=="function"&&xe.constructor===Symbol&&xe!==Symbol.prototype?"symbol":typeof xe};function u(xe,ve){return d(xe.source,ve.source)||xe.index-ve.index}function l(xe,ve){return d(xe.target,ve.target)||xe.index-ve.index}function d(xe,ve){return xe.partOfCycle===ve.partOfCycle?xe.y0-ve.y0:xe.circularLinkType==="top"||ve.circularLinkType==="bottom"?-1:1}function c(xe){return xe.value}function _(xe){return(xe.y0+xe.y1)/2}function p(xe){return _(xe.source)}function g(xe){return _(xe.target)}function m(xe){return xe.index}function b(xe){return xe.nodes}function y(xe){return xe.links}function M(xe,ve){var ye=xe.get(ve);if(!ye)throw new Error("missing: "+ve);return ye}function h(xe,ve){return ve(xe)}var E=25,k=10,D=.3;function P(){var xe,ve,ye=0,me=0,Me=1,Ae=1,ce=24,ae=m,pe=o,De=b,ke=y,Ee=32,Ie=2,Re=null;function Ne(){var we={nodes:De.apply(null,arguments),links:ke.apply(null,arguments)};(function(ze){ze.nodes.forEach(function(Ue,Ge){Ue.index=Ge,Ue.sourceLinks=[],Ue.targetLinks=[]});var Pe=(0,w.kH)(ze.nodes,ae);ze.links.forEach(function(Ue,Ge){Ue.index=Ge;var Xe=Ue.source,st=Ue.target;(Xe===void 0?"undefined":a(Xe))!=="object"&&(Xe=Ue.source=M(Pe,Xe)),(st===void 0?"undefined":a(st))!=="object"&&(st=Ue.target=M(Pe,st)),Xe.sourceLinks.push(Ue),st.targetLinks.push(Ue)})})(we),function(ze,Pe,Ue){var Ge=0;if(Ue===null){for(var Xe=[],st=0;st<ze.links.length;st++){var at=ze.links[st],vt=at.source.index,xt=at.target.index;Xe[vt]||(Xe[vt]=[]),Xe[xt]||(Xe[xt]=[]),Xe[vt].indexOf(xt)===-1&&Xe[vt].push(xt)}var gt=x()(Xe);gt.sort(function(Mt,Pt){return Mt.length-Pt.length});var rt={};for(st=0;st<gt.length;st++){var tt=gt[st].slice(-2);rt[tt[0]]||(rt[tt[0]]={}),rt[tt[0]][tt[1]]=!0}ze.links.forEach(function(Mt){var Pt=Mt.target.index,Rt=Mt.source.index;Pt===Rt||rt[Rt]&&rt[Rt][Pt]?(Mt.circular=!0,Mt.circularLinkID=Ge,Ge+=1):Mt.circular=!1})}else ze.links.forEach(function(Mt){Mt.source[Ue]<Mt.target[Ue]?Mt.circular=!1:(Mt.circular=!0,Mt.circularLinkID=Ge,Ge+=1)})}(we,0,Re),function(ze){ze.nodes.forEach(function(Pe){Pe.partOfCycle=!1,Pe.value=Math.max((0,v.oh)(Pe.sourceLinks,c),(0,v.oh)(Pe.targetLinks,c)),Pe.sourceLinks.forEach(function(Ue){Ue.circular&&(Pe.partOfCycle=!0,Pe.circularLinkType=Ue.circularLinkType)}),Pe.targetLinks.forEach(function(Ue){Ue.circular&&(Pe.partOfCycle=!0,Pe.circularLinkType=Ue.circularLinkType)})})}(we),function(ze){var Pe,Ue,Ge;for(Pe=ze.nodes,Ue=[],Ge=0;Pe.length;++Ge,Pe=Ue,Ue=[])Pe.forEach(function(Xe){Xe.depth=Ge,Xe.sourceLinks.forEach(function(st){Ue.indexOf(st.target)<0&&!st.circular&&Ue.push(st.target)})});for(Pe=ze.nodes,Ue=[],Ge=0;Pe.length;++Ge,Pe=Ue,Ue=[])Pe.forEach(function(Xe){Xe.height=Ge,Xe.targetLinks.forEach(function(st){Ue.indexOf(st.source)<0&&!st.circular&&Ue.push(st.source)})});ze.nodes.forEach(function(Xe){Xe.column=Math.floor(pe.call(null,Xe,Ge))})}(we),L(we,ae),function(ze,Pe,Ue){var Ge=(0,w.UJ)().key(function(xt){return xt.column}).sortKeys(v.XE).entries(ze.nodes).map(function(xt){return xt.values});(function(xt){if(ve){var gt=1/0;Ge.forEach(function(Pt){var Rt=Ae*ve/(Pt.length+1);gt=Rt<gt?Rt:gt}),xe=gt}var rt=(0,v.SY)(Ge,function(Pt){return(Ae-me-(Pt.length-1)*xe)/(0,v.oh)(Pt,c)});rt*=D,ze.links.forEach(function(Pt){Pt.width=Pt.value*rt});var tt=function(Pt){var Rt=0,St=0,Ye=0,Ke=0,Ve=(0,v.kv)(Pt.nodes,function($e){return $e.column});return Pt.links.forEach(function($e){$e.circular&&($e.circularLinkType=="top"?Rt+=$e.width:St+=$e.width,$e.target.column==0&&(Ke+=$e.width),$e.source.column==Ve&&(Ye+=$e.width))}),{top:Rt=Rt>0?Rt+E+k:Rt,bottom:St=St>0?St+E+k:St,left:Ke=Ke>0?Ke+E+k:Ke,right:Ye=Ye>0?Ye+E+k:Ye}}(ze),Mt=function(Pt,Rt){var St=(0,v.kv)(Pt.nodes,function(lt){return lt.column}),Ye=Me-ye,Ke=Ae-me,Ve=Ye/(Ye+Rt.right+Rt.left),$e=Ke/(Ke+Rt.top+Rt.bottom);return ye=ye*Ve+Rt.left,Me=Rt.right==0?Me:Me*Ve,me=me*$e+Rt.top,Ae*=$e,Pt.nodes.forEach(function(lt){lt.x0=ye+lt.column*((Me-ye-ce)/St),lt.x1=lt.x0+ce}),$e}(ze,tt);rt*=Mt,ze.links.forEach(function(Pt){Pt.width=Pt.value*rt}),Ge.forEach(function(Pt){var Rt=Pt.length;Pt.forEach(function(St,Ye){St.depth==Ge.length-1&&Rt==1||St.depth==0&&Rt==1?(St.y0=Ae/2-St.value*rt,St.y1=St.y0+St.value*rt):St.partOfCycle?N(St,xt)==0?(St.y0=Ae/2+Ye,St.y1=St.y0+St.value*rt):St.circularLinkType=="top"?(St.y0=me+Ye,St.y1=St.y0+St.value*rt):(St.y0=Ae-St.value*rt-Ye,St.y1=St.y0+St.value*rt):tt.top==0||tt.bottom==0?(St.y0=(Ae-me)/Rt*Ye,St.y1=St.y0+St.value*rt):(St.y0=(Ae-me)/2-Rt/2+Ye,St.y1=St.y0+St.value*rt)})})})(Ue),vt();for(var Xe=1,st=Pe;st>0;--st)at(Xe*=.99,Ue),vt();function at(xt,gt){var rt=Ge.length;Ge.forEach(function(tt){var Mt=tt.length,Pt=tt[0].depth;tt.forEach(function(Rt){var St;if((Rt.sourceLinks.length||Rt.targetLinks.length)&&!(Rt.partOfCycle&&N(Rt,gt)>0))if(Pt==0&&Mt==1)St=Rt.y1-Rt.y0,Rt.y0=Ae/2-St/2,Rt.y1=Ae/2+St/2;else if(Pt==rt-1&&Mt==1)St=Rt.y1-Rt.y0,Rt.y0=Ae/2-St/2,Rt.y1=Ae/2+St/2;else{var Ye=(0,v.mo)(Rt.sourceLinks,g),Ke=(0,v.mo)(Rt.targetLinks,p),Ve=((Ye&&Ke?(Ye+Ke)/2:Ye||Ke)-_(Rt))*xt;Rt.y0+=Ve,Rt.y1+=Ve}})})}function vt(){Ge.forEach(function(xt){var gt,rt,tt,Mt=me,Pt=xt.length;for(xt.sort(d),tt=0;tt<Pt;++tt)(rt=Mt-(gt=xt[tt]).y0)>0&&(gt.y0+=rt,gt.y1+=rt),Mt=gt.y1+xe;if((rt=Mt-xe-Ae)>0)for(Mt=gt.y0-=rt,gt.y1-=rt,tt=Pt-2;tt>=0;--tt)(rt=(gt=xt[tt]).y1+xe-Mt)>0&&(gt.y0-=rt,gt.y1-=rt),Mt=gt.y0})}}(we,Ee,ae),ge(we);for(var Ce=0;Ce<4;Ce++)le(we,Ae,ae),se(we,0,ae),K(we,me,Ae,ae),le(we,Ae,ae),se(we,0,ae);return function(ze,Pe,Ue){var Ge=ze.nodes,Xe=ze.links,st=!1,at=!1;if(Xe.forEach(function(gt){gt.circularLinkType=="top"?st=!0:gt.circularLinkType=="bottom"&&(at=!0)}),st==0||at==0){var vt=(0,v.SY)(Ge,function(gt){return gt.y0}),xt=(Ue-Pe)/((0,v.kv)(Ge,function(gt){return gt.y1})-vt);Ge.forEach(function(gt){var rt=(gt.y1-gt.y0)*xt;gt.y0=(gt.y0-vt)*xt,gt.y1=gt.y0+rt}),Xe.forEach(function(gt){gt.y0=(gt.y0-vt)*xt,gt.y1=(gt.y1-vt)*xt,gt.width=gt.width*xt})}}(we,me,Ae),j(we,Ie,Ae,ae),we}function ge(we){we.nodes.forEach(function(Ce){Ce.sourceLinks.sort(l),Ce.targetLinks.sort(u)}),we.nodes.forEach(function(Ce){var ze=Ce.y0,Pe=ze,Ue=Ce.y1,Ge=Ue;Ce.sourceLinks.forEach(function(Xe){Xe.circular?(Xe.y0=Ue-Xe.width/2,Ue-=Xe.width):(Xe.y0=ze+Xe.width/2,ze+=Xe.width)}),Ce.targetLinks.forEach(function(Xe){Xe.circular?(Xe.y1=Ge-Xe.width/2,Ge-=Xe.width):(Xe.y1=Pe+Xe.width/2,Pe+=Xe.width)})})}return Ne.nodeId=function(we){return arguments.length?(ae=typeof we=="function"?we:i(we),Ne):ae},Ne.nodeAlign=function(we){return arguments.length?(pe=typeof we=="function"?we:i(we),Ne):pe},Ne.nodeWidth=function(we){return arguments.length?(ce=+we,Ne):ce},Ne.nodePadding=function(we){return arguments.length?(xe=+we,Ne):xe},Ne.nodes=function(we){return arguments.length?(De=typeof we=="function"?we:i(we),Ne):De},Ne.links=function(we){return arguments.length?(ke=typeof we=="function"?we:i(we),Ne):ke},Ne.size=function(we){return arguments.length?(ye=me=0,Me=+we[0],Ae=+we[1],Ne):[Me-ye,Ae-me]},Ne.extent=function(we){return arguments.length?(ye=+we[0][0],Me=+we[1][0],me=+we[0][1],Ae=+we[1][1],Ne):[[ye,me],[Me,Ae]]},Ne.iterations=function(we){return arguments.length?(Ee=+we,Ne):Ee},Ne.circularLinkGap=function(we){return arguments.length?(Ie=+we,Ne):Ie},Ne.nodePaddingRatio=function(we){return arguments.length?(ve=+we,Ne):ve},Ne.sortNodes=function(we){return arguments.length?(Re=we,Ne):Re},Ne.update=function(we){return L(we,ae),ge(we),we.links.forEach(function(Ce){Ce.circular&&(Ce.circularLinkType=Ce.y0+Ce.y1<Ae?"top":"bottom",Ce.source.circularLinkType=Ce.circularLinkType,Ce.target.circularLinkType=Ce.circularLinkType)}),le(we,Ae,ae,!1),se(we,0,ae),j(we,Ie,Ae,ae),we},Ne}function L(xe,ve){var ye=0,me=0;xe.links.forEach(function(Me){Me.circular&&(Me.source.circularLinkType||Me.target.circularLinkType?Me.circularLinkType=Me.source.circularLinkType?Me.source.circularLinkType:Me.target.circularLinkType:Me.circularLinkType=ye<me?"top":"bottom",Me.circularLinkType=="top"?ye+=1:me+=1,xe.nodes.forEach(function(Ae){h(Ae,ve)!=h(Me.source,ve)&&h(Ae,ve)!=h(Me.target,ve)||(Ae.circularLinkType=Me.circularLinkType)}))}),xe.links.forEach(function(Me){Me.circular&&(Me.source.circularLinkType==Me.target.circularLinkType&&(Me.circularLinkType=Me.source.circularLinkType),_e(Me,ve)&&(Me.circularLinkType=Me.source.circularLinkType))})}function O(xe){var ve=Math.abs(xe.y1-xe.y0),ye=Math.abs(xe.target.x0-xe.source.x1);return Math.atan(ye/ve)}function N(xe,ve){var ye=0;xe.sourceLinks.forEach(function(Me){ye=Me.circular&&!_e(Me,ve)?ye+1:ye});var me=0;return xe.targetLinks.forEach(function(Me){me=Me.circular&&!_e(Me,ve)?me+1:me}),ye+me}function V(xe){var ve=xe.source.sourceLinks,ye=0;ve.forEach(function(Ae){ye=Ae.circular?ye+1:ye});var me=xe.target.targetLinks,Me=0;return me.forEach(function(Ae){Me=Ae.circular?Me+1:Me}),!(ye>1||Me>1)}function F(xe,ve,ye){return xe.sort(Z),xe.forEach(function(me,Me){var Ae,ce,ae=0;if(_e(me,ye)&&V(me))me.circularPathData.verticalBuffer=ae+me.width/2;else{for(var pe=0;pe<Me;pe++)if(Ae=xe[Me],ce=xe[pe],!(Ae.source.column<ce.target.column||Ae.target.column>ce.source.column)){var De=xe[pe].circularPathData.verticalBuffer+xe[pe].width/2+ve;ae=De>ae?De:ae}me.circularPathData.verticalBuffer=ae+me.width/2}}),xe}function j(xe,ve,ye,me){var Me=(0,v.SY)(xe.links,function(Ae){return Ae.source.y0});xe.links.forEach(function(Ae){Ae.circular&&(Ae.circularPathData={})}),F(xe.links.filter(function(Ae){return Ae.circularLinkType=="top"}),ve,me),F(xe.links.filter(function(Ae){return Ae.circularLinkType=="bottom"}),ve,me),xe.links.forEach(function(Ae){if(Ae.circular){if(Ae.circularPathData.arcRadius=Ae.width+k,Ae.circularPathData.leftNodeBuffer=5,Ae.circularPathData.rightNodeBuffer=5,Ae.circularPathData.sourceWidth=Ae.source.x1-Ae.source.x0,Ae.circularPathData.sourceX=Ae.source.x0+Ae.circularPathData.sourceWidth,Ae.circularPathData.targetX=Ae.target.x0,Ae.circularPathData.sourceY=Ae.y0,Ae.circularPathData.targetY=Ae.y1,_e(Ae,me)&&V(Ae))Ae.circularPathData.leftSmallArcRadius=k+Ae.width/2,Ae.circularPathData.leftLargeArcRadius=k+Ae.width/2,Ae.circularPathData.rightSmallArcRadius=k+Ae.width/2,Ae.circularPathData.rightLargeArcRadius=k+Ae.width/2,Ae.circularLinkType=="bottom"?(Ae.circularPathData.verticalFullExtent=Ae.source.y1+E+Ae.circularPathData.verticalBuffer,Ae.circularPathData.verticalLeftInnerExtent=Ae.circularPathData.verticalFullExtent-Ae.circularPathData.leftLargeArcRadius,Ae.circularPathData.verticalRightInnerExtent=Ae.circularPathData.verticalFullExtent-Ae.circularPathData.rightLargeArcRadius):(Ae.circularPathData.verticalFullExtent=Ae.source.y0-E-Ae.circularPathData.verticalBuffer,Ae.circularPathData.verticalLeftInnerExtent=Ae.circularPathData.verticalFullExtent+Ae.circularPathData.leftLargeArcRadius,Ae.circularPathData.verticalRightInnerExtent=Ae.circularPathData.verticalFullExtent+Ae.circularPathData.rightLargeArcRadius);else{var ce=Ae.source.column,ae=Ae.circularLinkType,pe=xe.links.filter(function(Ee){return Ee.source.column==ce&&Ee.circularLinkType==ae});Ae.circularLinkType=="bottom"?pe.sort(H):pe.sort(z);var De=0;pe.forEach(function(Ee,Ie){Ee.circularLinkID==Ae.circularLinkID&&(Ae.circularPathData.leftSmallArcRadius=k+Ae.width/2+De,Ae.circularPathData.leftLargeArcRadius=k+Ae.width/2+Ie*ve+De),De+=Ee.width}),ce=Ae.target.column,pe=xe.links.filter(function(Ee){return Ee.target.column==ce&&Ee.circularLinkType==ae}),Ae.circularLinkType=="bottom"?pe.sort(re):pe.sort(U),De=0,pe.forEach(function(Ee,Ie){Ee.circularLinkID==Ae.circularLinkID&&(Ae.circularPathData.rightSmallArcRadius=k+Ae.width/2+De,Ae.circularPathData.rightLargeArcRadius=k+Ae.width/2+Ie*ve+De),De+=Ee.width}),Ae.circularLinkType=="bottom"?(Ae.circularPathData.verticalFullExtent=Math.max(ye,Ae.source.y1,Ae.target.y1)+E+Ae.circularPathData.verticalBuffer,Ae.circularPathData.verticalLeftInnerExtent=Ae.circularPathData.verticalFullExtent-Ae.circularPathData.leftLargeArcRadius,Ae.circularPathData.verticalRightInnerExtent=Ae.circularPathData.verticalFullExtent-Ae.circularPathData.rightLargeArcRadius):(Ae.circularPathData.verticalFullExtent=Me-E-Ae.circularPathData.verticalBuffer,Ae.circularPathData.verticalLeftInnerExtent=Ae.circularPathData.verticalFullExtent+Ae.circularPathData.leftLargeArcRadius,Ae.circularPathData.verticalRightInnerExtent=Ae.circularPathData.verticalFullExtent+Ae.circularPathData.rightLargeArcRadius)}Ae.circularPathData.leftInnerExtent=Ae.circularPathData.sourceX+Ae.circularPathData.leftNodeBuffer,Ae.circularPathData.rightInnerExtent=Ae.circularPathData.targetX-Ae.circularPathData.rightNodeBuffer,Ae.circularPathData.leftFullExtent=Ae.circularPathData.sourceX+Ae.circularPathData.leftLargeArcRadius+Ae.circularPathData.leftNodeBuffer,Ae.circularPathData.rightFullExtent=Ae.circularPathData.targetX-Ae.circularPathData.rightLargeArcRadius-Ae.circularPathData.rightNodeBuffer}if(Ae.circular)Ae.path=function(Ee){return Ee.circularLinkType=="top"?"M"+Ee.circularPathData.sourceX+" "+Ee.circularPathData.sourceY+" L"+Ee.circularPathData.leftInnerExtent+" "+Ee.circularPathData.sourceY+" A"+Ee.circularPathData.leftLargeArcRadius+" "+Ee.circularPathData.leftSmallArcRadius+" 0 0 0 "+Ee.circularPathData.leftFullExtent+" "+(Ee.circularPathData.sourceY-Ee.circularPathData.leftSmallArcRadius)+" L"+Ee.circularPathData.leftFullExtent+" "+Ee.circularPathData.verticalLeftInnerExtent+" A"+Ee.circularPathData.leftLargeArcRadius+" "+Ee.circularPathData.leftLargeArcRadius+" 0 0 0 "+Ee.circularPathData.leftInnerExtent+" "+Ee.circularPathData.verticalFullExtent+" L"+Ee.circularPathData.rightInnerExtent+" "+Ee.circularPathData.verticalFullExtent+" A"+Ee.circularPathData.rightLargeArcRadius+" "+Ee.circularPathData.rightLargeArcRadius+" 0 0 0 "+Ee.circularPathData.rightFullExtent+" "+Ee.circularPathData.verticalRightInnerExtent+" L"+Ee.circularPathData.rightFullExtent+" "+(Ee.circularPathData.targetY-Ee.circularPathData.rightSmallArcRadius)+" A"+Ee.circularPathData.rightLargeArcRadius+" "+Ee.circularPathData.rightSmallArcRadius+" 0 0 0 "+Ee.circularPathData.rightInnerExtent+" "+Ee.circularPathData.targetY+" L"+Ee.circularPathData.targetX+" "+Ee.circularPathData.targetY:"M"+Ee.circularPathData.sourceX+" "+Ee.circularPathData.sourceY+" L"+Ee.circularPathData.leftInnerExtent+" "+Ee.circularPathData.sourceY+" A"+Ee.circularPathData.leftLargeArcRadius+" "+Ee.circularPathData.leftSmallArcRadius+" 0 0 1 "+Ee.circularPathData.leftFullExtent+" "+(Ee.circularPathData.sourceY+Ee.circularPathData.leftSmallArcRadius)+" L"+Ee.circularPathData.leftFullExtent+" "+Ee.circularPathData.verticalLeftInnerExtent+" A"+Ee.circularPathData.leftLargeArcRadius+" "+Ee.circularPathData.leftLargeArcRadius+" 0 0 1 "+Ee.circularPathData.leftInnerExtent+" "+Ee.circularPathData.verticalFullExtent+" L"+Ee.circularPathData.rightInnerExtent+" "+Ee.circularPathData.verticalFullExtent+" A"+Ee.circularPathData.rightLargeArcRadius+" "+Ee.circularPathData.rightLargeArcRadius+" 0 0 1 "+Ee.circularPathData.rightFullExtent+" "+Ee.circularPathData.verticalRightInnerExtent+" L"+Ee.circularPathData.rightFullExtent+" "+(Ee.circularPathData.targetY+Ee.circularPathData.rightSmallArcRadius)+" A"+Ee.circularPathData.rightLargeArcRadius+" "+Ee.circularPathData.rightSmallArcRadius+" 0 0 1 "+Ee.circularPathData.rightInnerExtent+" "+Ee.circularPathData.targetY+" L"+Ee.circularPathData.targetX+" "+Ee.circularPathData.targetY}(Ae);else{var ke=(0,n.ak)().source(function(Ee){return[Ee.source.x0+(Ee.source.x1-Ee.source.x0),Ee.y0]}).target(function(Ee){return[Ee.target.x0,Ee.y1]});Ae.path=ke(Ae)}})}function Z(xe,ve){return ee(xe)==ee(ve)?xe.circularLinkType=="bottom"?H(xe,ve):z(xe,ve):ee(ve)-ee(xe)}function z(xe,ve){return xe.y0-ve.y0}function H(xe,ve){return ve.y0-xe.y0}function U(xe,ve){return xe.y1-ve.y1}function re(xe,ve){return ve.y1-xe.y1}function ee(xe){return xe.target.column-xe.source.column}function J(xe){return xe.target.x0-xe.source.x1}function Q(xe,ve){var ye=O(xe),me=J(ve)/Math.tan(ye);return be(xe)=="up"?xe.y1+me:xe.y1-me}function ne(xe,ve){var ye=O(xe),me=J(ve)/Math.tan(ye);return be(xe)=="up"?xe.y1-me:xe.y1+me}function K(xe,ve,ye,me){xe.links.forEach(function(Me){if(!Me.circular&&Me.target.column-Me.source.column>1){var Ae=Me.source.column+1,ce=Me.target.column-1,ae=1,pe=ce-Ae+1;for(ae=1;Ae<=ce;Ae++,ae++)xe.nodes.forEach(function(De){if(De.column==Ae){var ke,Ee=ae/(pe+1),Ie=Math.pow(1-Ee,3),Re=3*Ee*Math.pow(1-Ee,2),Ne=3*Math.pow(Ee,2)*(1-Ee),ge=Math.pow(Ee,3),we=Ie*Me.y0+Re*Me.y0+Ne*Me.y1+ge*Me.y1,Ce=we-Me.width/2,ze=we+Me.width/2;Ce>De.y0&&Ce<De.y1?(ke=De.y1-Ce+10,ke=De.circularLinkType=="bottom"?ke:-ke,De=oe(De,ke,ve,ye),xe.nodes.forEach(function(Pe){var Ue,Ge;h(Pe,me)!=h(De,me)&&Pe.column==De.column&&(Ge=Pe,(Ue=De).y0>Ge.y0&&Ue.y0<Ge.y1||Ue.y1>Ge.y0&&Ue.y1<Ge.y1||Ue.y0<Ge.y0&&Ue.y1>Ge.y1)&&oe(Pe,ke,ve,ye)})):(ze>De.y0&&ze<De.y1||Ce<De.y0&&ze>De.y1)&&(ke=ze-De.y0+10,De=oe(De,ke,ve,ye),xe.nodes.forEach(function(Pe){h(Pe,me)!=h(De,me)&&Pe.column==De.column&&Pe.y0<De.y1&&Pe.y1>De.y1&&oe(Pe,ke,ve,ye)}))}})}})}function oe(xe,ve,ye,me){return xe.y0+ve>=ye&&xe.y1+ve<=me&&(xe.y0=xe.y0+ve,xe.y1=xe.y1+ve,xe.targetLinks.forEach(function(Me){Me.y1=Me.y1+ve}),xe.sourceLinks.forEach(function(Me){Me.y0=Me.y0+ve})),xe}function le(xe,ve,ye,me){xe.nodes.forEach(function(Me){me&&Me.y+(Me.y1-Me.y0)>ve&&(Me.y=Me.y-(Me.y+(Me.y1-Me.y0)-ve));var Ae=xe.links.filter(function(pe){return h(pe.source,ye)==h(Me,ye)}),ce=Ae.length;ce>1&&Ae.sort(function(pe,De){if(!pe.circular&&!De.circular){if(pe.target.column==De.target.column||!de(pe,De))return pe.y1-De.y1;if(pe.target.column>De.target.column){var ke=ne(De,pe);return pe.y1-ke}if(De.target.column>pe.target.column)return ne(pe,De)-De.y1}return pe.circular&&!De.circular?pe.circularLinkType=="top"?-1:1:De.circular&&!pe.circular?De.circularLinkType=="top"?1:-1:pe.circular&&De.circular?pe.circularLinkType===De.circularLinkType&&pe.circularLinkType=="top"?pe.target.column===De.target.column?pe.target.y1-De.target.y1:De.target.column-pe.target.column:pe.circularLinkType===De.circularLinkType&&pe.circularLinkType=="bottom"?pe.target.column===De.target.column?De.target.y1-pe.target.y1:pe.target.column-De.target.column:pe.circularLinkType=="top"?-1:1:void 0});var ae=Me.y0;Ae.forEach(function(pe){pe.y0=ae+pe.width/2,ae+=pe.width}),Ae.forEach(function(pe,De){if(pe.circularLinkType=="bottom"){for(var ke=De+1,Ee=0;ke<ce;ke++)Ee+=Ae[ke].width;pe.y0=Me.y1-Ee-pe.width/2}})})}function se(xe,ve,ye){xe.nodes.forEach(function(me){var Me=xe.links.filter(function(ae){return h(ae.target,ye)==h(me,ye)}),Ae=Me.length;Ae>1&&Me.sort(function(ae,pe){if(!ae.circular&&!pe.circular){if(ae.source.column==pe.source.column||!de(ae,pe))return ae.y0-pe.y0;if(pe.source.column<ae.source.column){var De=Q(pe,ae);return ae.y0-De}if(ae.source.column<pe.source.column)return Q(ae,pe)-pe.y0}return ae.circular&&!pe.circular?ae.circularLinkType=="top"?-1:1:pe.circular&&!ae.circular?pe.circularLinkType=="top"?1:-1:ae.circular&&pe.circular?ae.circularLinkType===pe.circularLinkType&&ae.circularLinkType=="top"?ae.source.column===pe.source.column?ae.source.y1-pe.source.y1:ae.source.column-pe.source.column:ae.circularLinkType===pe.circularLinkType&&ae.circularLinkType=="bottom"?ae.source.column===pe.source.column?ae.source.y1-pe.source.y1:pe.source.column-ae.source.column:ae.circularLinkType=="top"?-1:1:void 0});var ce=me.y0;Me.forEach(function(ae){ae.y1=ce+ae.width/2,ce+=ae.width}),Me.forEach(function(ae,pe){if(ae.circularLinkType=="bottom"){for(var De=pe+1,ke=0;De<Ae;De++)ke+=Me[De].width;ae.y1=me.y1-ke-ae.width/2}})})}function de(xe,ve){return be(xe)==be(ve)}function be(xe){return xe.y0-xe.y1>0?"up":"down"}function _e(xe,ve){return h(xe.source,ve)==h(xe.target,ve)}},26800:function(C,A,e){"use strict";e.r(A),e.d(A,{sankey:function(){return m},sankeyCenter:function(){return s},sankeyJustify:function(){return f},sankeyLeft:function(){return T},sankeyLinkHorizontal:function(){return h},sankeyRight:function(){return x}});var v=e(84706),w=e(34712);function n(E){return E.target.depth}function T(E){return E.depth}function x(E,k){return k-1-E.height}function f(E,k){return E.sourceLinks.length?E.depth:k-1}function s(E){return E.targetLinks.length?E.depth:E.sourceLinks.length?(0,v.SY)(E.sourceLinks,n)-1:0}function t(E){return function(){return E}}function o(E,k){return i(E.source,k.source)||E.index-k.index}function r(E,k){return i(E.target,k.target)||E.index-k.index}function i(E,k){return E.y0-k.y0}function a(E){return E.value}function u(E){return(E.y0+E.y1)/2}function l(E){return u(E.source)*E.value}function d(E){return u(E.target)*E.value}function c(E){return E.index}function _(E){return E.nodes}function p(E){return E.links}function g(E,k){var D=E.get(k);if(!D)throw new Error("missing: "+k);return D}function m(){var E=0,k=0,D=1,P=1,L=24,O=8,N=c,V=f,F=_,j=p,Z=32;function z(){var U={nodes:F.apply(null,arguments),links:j.apply(null,arguments)};return function(re){re.nodes.forEach(function(J,Q){J.index=Q,J.sourceLinks=[],J.targetLinks=[]});var ee=(0,w.kH)(re.nodes,N);re.links.forEach(function(J,Q){J.index=Q;var ne=J.source,K=J.target;typeof ne!="object"&&(ne=J.source=g(ee,ne)),typeof K!="object"&&(K=J.target=g(ee,K)),ne.sourceLinks.push(J),K.targetLinks.push(J)})}(U),function(re){re.nodes.forEach(function(ee){ee.value=Math.max((0,v.oh)(ee.sourceLinks,a),(0,v.oh)(ee.targetLinks,a))})}(U),function(re){var ee,J,Q;for(ee=re.nodes,J=[],Q=0;ee.length;++Q,ee=J,J=[])ee.forEach(function(K){K.depth=Q,K.sourceLinks.forEach(function(oe){J.indexOf(oe.target)<0&&J.push(oe.target)})});for(ee=re.nodes,J=[],Q=0;ee.length;++Q,ee=J,J=[])ee.forEach(function(K){K.height=Q,K.targetLinks.forEach(function(oe){J.indexOf(oe.source)<0&&J.push(oe.source)})});var ne=(D-E-L)/(Q-1);re.nodes.forEach(function(K){K.x1=(K.x0=E+Math.max(0,Math.min(Q-1,Math.floor(V.call(null,K,Q))))*ne)+L})}(U),function(re){var ee=(0,w.UJ)().key(function(le){return le.x0}).sortKeys(v.XE).entries(re.nodes).map(function(le){return le.values});(function(){var le=(0,v.kv)(ee,function(be){return be.length}),se=.6666666666666666*(P-k)/(le-1);O>se&&(O=se);var de=(0,v.SY)(ee,function(be){return(P-k-(be.length-1)*O)/(0,v.oh)(be,a)});ee.forEach(function(be){be.forEach(function(_e,xe){_e.y1=(_e.y0=xe)+_e.value*de})}),re.links.forEach(function(be){be.width=be.value*de})})(),oe();for(var J=1,Q=Z;Q>0;--Q)K(J*=.99),oe(),ne(J),oe();function ne(le){ee.forEach(function(se){se.forEach(function(de){if(de.targetLinks.length){var be=((0,v.oh)(de.targetLinks,l)/(0,v.oh)(de.targetLinks,a)-u(de))*le;de.y0+=be,de.y1+=be}})})}function K(le){ee.slice().reverse().forEach(function(se){se.forEach(function(de){if(de.sourceLinks.length){var be=((0,v.oh)(de.sourceLinks,d)/(0,v.oh)(de.sourceLinks,a)-u(de))*le;de.y0+=be,de.y1+=be}})})}function oe(){ee.forEach(function(le){var se,de,be,_e=k,xe=le.length;for(le.sort(i),be=0;be<xe;++be)(de=_e-(se=le[be]).y0)>0&&(se.y0+=de,se.y1+=de),_e=se.y1+O;if((de=_e-O-P)>0)for(_e=se.y0-=de,se.y1-=de,be=xe-2;be>=0;--be)(de=(se=le[be]).y1+O-_e)>0&&(se.y0-=de,se.y1-=de),_e=se.y0})}}(U),H(U),U}function H(U){U.nodes.forEach(function(re){re.sourceLinks.sort(r),re.targetLinks.sort(o)}),U.nodes.forEach(function(re){var ee=re.y0,J=ee;re.sourceLinks.forEach(function(Q){Q.y0=ee+Q.width/2,ee+=Q.width}),re.targetLinks.forEach(function(Q){Q.y1=J+Q.width/2,J+=Q.width})})}return z.update=function(U){return H(U),U},z.nodeId=function(U){return arguments.length?(N=typeof U=="function"?U:t(U),z):N},z.nodeAlign=function(U){return arguments.length?(V=typeof U=="function"?U:t(U),z):V},z.nodeWidth=function(U){return arguments.length?(L=+U,z):L},z.nodePadding=function(U){return arguments.length?(O=+U,z):O},z.nodes=function(U){return arguments.length?(F=typeof U=="function"?U:t(U),z):F},z.links=function(U){return arguments.length?(j=typeof U=="function"?U:t(U),z):j},z.size=function(U){return arguments.length?(E=k=0,D=+U[0],P=+U[1],z):[D-E,P-k]},z.extent=function(U){return arguments.length?(E=+U[0][0],D=+U[1][0],k=+U[0][1],P=+U[1][1],z):[[E,k],[D,P]]},z.iterations=function(U){return arguments.length?(Z=+U,z):Z},z}var b=e(10132);function y(E){return[E.source.x1,E.y0]}function M(E){return[E.target.x0,E.y1]}function h(){return(0,b.ak)().source(y).target(M)}},33428:function(C,A,e){var v,w;(function(){var n={version:"3.8.0"},T=[].slice,x=function(I){return T.call(I)},f=self.document;function s(I){return I&&(I.ownerDocument||I.document||I).documentElement}function t(I){return I&&(I.ownerDocument&&I.ownerDocument.defaultView||I.document&&I||I.defaultView)}if(f)try{x(f.documentElement.childNodes)[0].nodeType}catch{x=function(G){for(var te=G.length,ie=new Array(te);te--;)ie[te]=G[te];return ie}}if(Date.now||(Date.now=function(){return+new Date}),f)try{f.createElement("DIV").style.setProperty("opacity",0,"")}catch{var o=this.Element.prototype,r=o.setAttribute,i=o.setAttributeNS,a=this.CSSStyleDeclaration.prototype,u=a.setProperty;o.setAttribute=function(G,te){r.call(this,G,te+"")},o.setAttributeNS=function(G,te,ie){i.call(this,G,te,ie+"")},a.setProperty=function(G,te,ie){u.call(this,G,te+"",ie)}}function l(I,G){return I<G?-1:I>G?1:I>=G?0:NaN}function d(I){return I===null?NaN:+I}function c(I){return!isNaN(I)}function _(I){return{left:function(G,te,ie,he){for(arguments.length<3&&(ie=0),arguments.length<4&&(he=G.length);ie<he;){var Te=ie+he>>>1;I(G[Te],te)<0?ie=Te+1:he=Te}return ie},right:function(G,te,ie,he){for(arguments.length<3&&(ie=0),arguments.length<4&&(he=G.length);ie<he;){var Te=ie+he>>>1;I(G[Te],te)>0?he=Te:ie=Te+1}return ie}}}n.ascending=l,n.descending=function(I,G){return G<I?-1:G>I?1:G>=I?0:NaN},n.min=function(I,G){var te,ie,he=-1,Te=I.length;if(arguments.length===1){for(;++he<Te;)if((ie=I[he])!=null&&ie>=ie){te=ie;break}for(;++he<Te;)(ie=I[he])!=null&&te>ie&&(te=ie)}else{for(;++he<Te;)if((ie=G.call(I,I[he],he))!=null&&ie>=ie){te=ie;break}for(;++he<Te;)(ie=G.call(I,I[he],he))!=null&&te>ie&&(te=ie)}return te},n.max=function(I,G){var te,ie,he=-1,Te=I.length;if(arguments.length===1){for(;++he<Te;)if((ie=I[he])!=null&&ie>=ie){te=ie;break}for(;++he<Te;)(ie=I[he])!=null&&ie>te&&(te=ie)}else{for(;++he<Te;)if((ie=G.call(I,I[he],he))!=null&&ie>=ie){te=ie;break}for(;++he<Te;)(ie=G.call(I,I[he],he))!=null&&ie>te&&(te=ie)}return te},n.extent=function(I,G){var te,ie,he,Te=-1,Le=I.length;if(arguments.length===1){for(;++Te<Le;)if((ie=I[Te])!=null&&ie>=ie){te=he=ie;break}for(;++Te<Le;)(ie=I[Te])!=null&&(te>ie&&(te=ie),he<ie&&(he=ie))}else{for(;++Te<Le;)if((ie=G.call(I,I[Te],Te))!=null&&ie>=ie){te=he=ie;break}for(;++Te<Le;)(ie=G.call(I,I[Te],Te))!=null&&(te>ie&&(te=ie),he<ie&&(he=ie))}return[te,he]},n.sum=function(I,G){var te,ie=0,he=I.length,Te=-1;if(arguments.length===1)for(;++Te<he;)c(te=+I[Te])&&(ie+=te);else for(;++Te<he;)c(te=+G.call(I,I[Te],Te))&&(ie+=te);return ie},n.mean=function(I,G){var te,ie=0,he=I.length,Te=-1,Le=he;if(arguments.length===1)for(;++Te<he;)c(te=d(I[Te]))?ie+=te:--Le;else for(;++Te<he;)c(te=d(G.call(I,I[Te],Te)))?ie+=te:--Le;if(Le)return ie/Le},n.quantile=function(I,G){var te=(I.length-1)*G+1,ie=Math.floor(te),he=+I[ie-1],Te=te-ie;return Te?he+Te*(I[ie]-he):he},n.median=function(I,G){var te,ie=[],he=I.length,Te=-1;if(arguments.length===1)for(;++Te<he;)c(te=d(I[Te]))&&ie.push(te);else for(;++Te<he;)c(te=d(G.call(I,I[Te],Te)))&&ie.push(te);if(ie.length)return n.quantile(ie.sort(l),.5)},n.variance=function(I,G){var te,ie,he=I.length,Te=0,Le=0,Fe=-1,qe=0;if(arguments.length===1)for(;++Fe<he;)c(te=d(I[Fe]))&&(Le+=(ie=te-Te)*(te-(Te+=ie/++qe)));else for(;++Fe<he;)c(te=d(G.call(I,I[Fe],Fe)))&&(Le+=(ie=te-Te)*(te-(Te+=ie/++qe)));if(qe>1)return Le/(qe-1)},n.deviation=function(){var I=n.variance.apply(this,arguments);return I&&Math.sqrt(I)};var p=_(l);function g(I){return I.length}n.bisectLeft=p.left,n.bisect=n.bisectRight=p.right,n.bisector=function(I){return _(I.length===1?function(G,te){return l(I(G),te)}:I)},n.shuffle=function(I,G,te){(Te=arguments.length)<3&&(te=I.length,Te<2&&(G=0));for(var ie,he,Te=te-G;Te;)he=Math.random()*Te--|0,ie=I[Te+G],I[Te+G]=I[he+G],I[he+G]=ie;return I},n.permute=function(I,G){for(var te=G.length,ie=new Array(te);te--;)ie[te]=I[G[te]];return ie},n.pairs=function(I){for(var G=0,te=I.length-1,ie=I[0],he=new Array(te<0?0:te);G<te;)he[G]=[ie,ie=I[++G]];return he},n.transpose=function(I){if(!(he=I.length))return[];for(var G=-1,te=n.min(I,g),ie=new Array(te);++G<te;)for(var he,Te=-1,Le=ie[G]=new Array(he);++Te<he;)Le[Te]=I[Te][G];return ie},n.zip=function(){return n.transpose(arguments)},n.keys=function(I){var G=[];for(var te in I)G.push(te);return G},n.values=function(I){var G=[];for(var te in I)G.push(I[te]);return G},n.entries=function(I){var G=[];for(var te in I)G.push({key:te,value:I[te]});return G},n.merge=function(I){for(var G,te,ie,he=I.length,Te=-1,Le=0;++Te<he;)Le+=I[Te].length;for(te=new Array(Le);--he>=0;)for(G=(ie=I[he]).length;--G>=0;)te[--Le]=ie[G];return te};var m=Math.abs;function b(I,G){for(var te in G)Object.defineProperty(I.prototype,te,{value:G[te],enumerable:!1})}function y(){this._=Object.create(null)}n.range=function(I,G,te){if(arguments.length<3&&(te=1,arguments.length<2&&(G=I,I=0)),(G-I)/te==1/0)throw new Error("infinite range");var ie,he=[],Te=function(Fe){for(var qe=1;Fe*qe%1;)qe*=10;return qe}(m(te)),Le=-1;if(I*=Te,G*=Te,(te*=Te)<0)for(;(ie=I+te*++Le)>G;)he.push(ie/Te);else for(;(ie=I+te*++Le)<G;)he.push(ie/Te);return he},n.map=function(I,G){var te=new y;if(I instanceof y)I.forEach(function(Fe,qe){te.set(Fe,qe)});else if(Array.isArray(I)){var ie,he=-1,Te=I.length;if(arguments.length===1)for(;++he<Te;)te.set(he,I[he]);else for(;++he<Te;)te.set(G.call(I,ie=I[he],he),ie)}else for(var Le in I)te.set(Le,I[Le]);return te};var M="__proto__",h="\0";function E(I){return(I+="")===M||I[0]===h?h+I:I}function k(I){return(I+="")[0]===h?I.slice(1):I}function D(I){return E(I)in this._}function P(I){return(I=E(I))in this._&&delete this._[I]}function L(){var I=[];for(var G in this._)I.push(k(G));return I}function O(){var I=0;for(var G in this._)++I;return I}function N(){for(var I in this._)return!1;return!0}function V(){this._=Object.create(null)}function F(I){return I}function j(I,G,te){return function(){var ie=te.apply(G,arguments);return ie===G?I:ie}}function Z(I,G){if(G in I)return G;G=G.charAt(0).toUpperCase()+G.slice(1);for(var te=0,ie=z.length;te<ie;++te){var he=z[te]+G;if(he in I)return he}}b(y,{has:D,get:function(I){return this._[E(I)]},set:function(I,G){return this._[E(I)]=G},remove:P,keys:L,values:function(){var I=[];for(var G in this._)I.push(this._[G]);return I},entries:function(){var I=[];for(var G in this._)I.push({key:k(G),value:this._[G]});return I},size:O,empty:N,forEach:function(I){for(var G in this._)I.call(this,k(G),this._[G])}}),n.nest=function(){var I,G,te={},ie=[],he=[];function Te(Fe,qe,We){if(We>=ie.length)return G?G.call(te,qe):I?qe.sort(I):qe;for(var nt,ft,pt,wt,Ct=-1,At=qe.length,zt=ie[We++],It=new y;++Ct<At;)(wt=It.get(nt=zt(ft=qe[Ct])))?wt.push(ft):It.set(nt,[ft]);return Fe?(ft=Fe(),pt=function(Xt,Gt){ft.set(Xt,Te(Fe,Gt,We))}):(ft={},pt=function(Xt,Gt){ft[Xt]=Te(Fe,Gt,We)}),It.forEach(pt),ft}function Le(Fe,qe){if(qe>=ie.length)return Fe;var We=[],nt=he[qe++];return Fe.forEach(function(ft,pt){We.push({key:ft,values:Le(pt,qe)})}),nt?We.sort(function(ft,pt){return nt(ft.key,pt.key)}):We}return te.map=function(Fe,qe){return Te(qe,Fe,0)},te.entries=function(Fe){return Le(Te(n.map,Fe,0),0)},te.key=function(Fe){return ie.push(Fe),te},te.sortKeys=function(Fe){return he[ie.length-1]=Fe,te},te.sortValues=function(Fe){return I=Fe,te},te.rollup=function(Fe){return G=Fe,te},te},n.set=function(I){var G=new V;if(I)for(var te=0,ie=I.length;te<ie;++te)G.add(I[te]);return G},b(V,{has:D,add:function(I){return this._[E(I+="")]=!0,I},remove:P,values:L,size:O,empty:N,forEach:function(I){for(var G in this._)I.call(this,k(G))}}),n.behavior={},n.rebind=function(I,G){for(var te,ie=1,he=arguments.length;++ie<he;)I[te=arguments[ie]]=j(I,G,G[te]);return I};var z=["webkit","ms","moz","Moz","o","O"];function H(){}function U(){}function re(I){var G=[],te=new y;function ie(){for(var he,Te=G,Le=-1,Fe=Te.length;++Le<Fe;)(he=Te[Le].on)&&he.apply(this,arguments);return I}return ie.on=function(he,Te){var Le,Fe=te.get(he);return arguments.length<2?Fe&&Fe.on:(Fe&&(Fe.on=null,G=G.slice(0,Le=G.indexOf(Fe)).concat(G.slice(Le+1)),te.remove(he)),Te&&G.push(te.set(he,{on:Te})),I)},ie}function ee(){n.event.preventDefault()}function J(){for(var I,G=n.event;I=G.sourceEvent;)G=I;return G}function Q(I){for(var G=new U,te=0,ie=arguments.length;++te<ie;)G[arguments[te]]=re(G);return G.of=function(he,Te){return function(Le){try{var Fe=Le.sourceEvent=n.event;Le.target=I,n.event=Le,G[Le.type].apply(he,Te)}finally{n.event=Fe}}},G}n.dispatch=function(){for(var I=new U,G=-1,te=arguments.length;++G<te;)I[arguments[G]]=re(I);return I},U.prototype.on=function(I,G){var te=I.indexOf("."),ie="";if(te>=0&&(ie=I.slice(te+1),I=I.slice(0,te)),I)return arguments.length<2?this[I].on(ie):this[I].on(ie,G);if(arguments.length===2){if(G==null)for(I in this)this.hasOwnProperty(I)&&this[I].on(ie,null);return this}},n.event=null,n.requote=function(I){return I.replace(ne,"\\$&")};var ne=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,K={}.__proto__?function(I,G){I.__proto__=G}:function(I,G){for(var te in G)I[te]=G[te]};function oe(I){return K(I,be),I}var le=function(I,G){return G.querySelector(I)},se=function(I,G){return G.querySelectorAll(I)},de=function(I,G){var te=I.matches||I[Z(I,"matchesSelector")];return de=function(ie,he){return te.call(ie,he)},de(I,G)};typeof Sizzle=="function"&&(le=function(I,G){return Sizzle(I,G)[0]||null},se=Sizzle,de=Sizzle.matchesSelector),n.selection=function(){return n.select(f.documentElement)};var be=n.selection.prototype=[];function _e(I){return typeof I=="function"?I:function(){return le(I,this)}}function xe(I){return typeof I=="function"?I:function(){return se(I,this)}}be.select=function(I){var G,te,ie,he,Te=[];I=_e(I);for(var Le=-1,Fe=this.length;++Le<Fe;){Te.push(G=[]),G.parentNode=(ie=this[Le]).parentNode;for(var qe=-1,We=ie.length;++qe<We;)(he=ie[qe])?(G.push(te=I.call(he,he.__data__,qe,Le)),te&&"__data__"in he&&(te.__data__=he.__data__)):G.push(null)}return oe(Te)},be.selectAll=function(I){var G,te,ie=[];I=xe(I);for(var he=-1,Te=this.length;++he<Te;)for(var Le=this[he],Fe=-1,qe=Le.length;++Fe<qe;)(te=Le[Fe])&&(ie.push(G=x(I.call(te,te.__data__,Fe,he))),G.parentNode=te);return oe(ie)};var ve="http://www.w3.org/1999/xhtml",ye={svg:"http://www.w3.org/2000/svg",xhtml:ve,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function me(I,G){return I=n.ns.qualify(I),G==null?I.local?function(){this.removeAttributeNS(I.space,I.local)}:function(){this.removeAttribute(I)}:typeof G=="function"?I.local?function(){var te=G.apply(this,arguments);te==null?this.removeAttributeNS(I.space,I.local):this.setAttributeNS(I.space,I.local,te)}:function(){var te=G.apply(this,arguments);te==null?this.removeAttribute(I):this.setAttribute(I,te)}:I.local?function(){this.setAttributeNS(I.space,I.local,G)}:function(){this.setAttribute(I,G)}}function Me(I){return I.trim().replace(/\s+/g," ")}function Ae(I){return new RegExp("(?:^|\\s+)"+n.requote(I)+"(?:\\s+|$)","g")}function ce(I){return(I+"").trim().split(/^|\s+/)}function ae(I,G){var te=(I=ce(I).map(pe)).length;return typeof G=="function"?function(){for(var ie=-1,he=G.apply(this,arguments);++ie<te;)I[ie](this,he)}:function(){for(var ie=-1;++ie<te;)I[ie](this,G)}}function pe(I){var G=Ae(I);return function(te,ie){if(he=te.classList)return ie?he.add(I):he.remove(I);var he=te.getAttribute("class")||"";ie?(G.lastIndex=0,G.test(he)||te.setAttribute("class",Me(he+" "+I))):te.setAttribute("class",Me(he.replace(G," ")))}}function De(I,G,te){return G==null?function(){this.style.removeProperty(I)}:typeof G=="function"?function(){var ie=G.apply(this,arguments);ie==null?this.style.removeProperty(I):this.style.setProperty(I,ie,te)}:function(){this.style.setProperty(I,G,te)}}function ke(I,G){return G==null?function(){delete this[I]}:typeof G=="function"?function(){var te=G.apply(this,arguments);te==null?delete this[I]:this[I]=te}:function(){this[I]=G}}function Ee(I){return typeof I=="function"?I:(I=n.ns.qualify(I)).local?function(){return this.ownerDocument.createElementNS(I.space,I.local)}:function(){var G=this.ownerDocument,te=this.namespaceURI;return te===ve&&G.documentElement.namespaceURI===ve?G.createElement(I):G.createElementNS(te,I)}}function Ie(){var I=this.parentNode;I&&I.removeChild(this)}function Re(I){return{__data__:I}}function Ne(I){return function(){return de(this,I)}}function ge(I){return arguments.length||(I=l),function(G,te){return G&&te?I(G.__data__,te.__data__):!G-!te}}function we(I,G){for(var te=0,ie=I.length;te<ie;te++)for(var he,Te=I[te],Le=0,Fe=Te.length;Le<Fe;Le++)(he=Te[Le])&&G(he,Le,te);return I}function Ce(I){return K(I,ze),I}n.ns={prefix:ye,qualify:function(I){var G=I.indexOf(":"),te=I;return G>=0&&(te=I.slice(0,G))!=="xmlns"&&(I=I.slice(G+1)),ye.hasOwnProperty(te)?{space:ye[te],local:I}:I}},be.attr=function(I,G){if(arguments.length<2){if(typeof I=="string"){var te=this.node();return(I=n.ns.qualify(I)).local?te.getAttributeNS(I.space,I.local):te.getAttribute(I)}for(G in I)this.each(me(G,I[G]));return this}return this.each(me(I,G))},be.classed=function(I,G){if(arguments.length<2){if(typeof I=="string"){var te=this.node(),ie=(I=ce(I)).length,he=-1;if(G=te.classList){for(;++he<ie;)if(!G.contains(I[he]))return!1}else for(G=te.getAttribute("class");++he<ie;)if(!Ae(I[he]).test(G))return!1;return!0}for(G in I)this.each(ae(G,I[G]));return this}return this.each(ae(I,G))},be.style=function(I,G,te){var ie=arguments.length;if(ie<3){if(typeof I!="string"){for(te in ie<2&&(G=""),I)this.each(De(te,I[te],G));return this}if(ie<2){var he=this.node();return t(he).getComputedStyle(he,null).getPropertyValue(I)}te=""}return this.each(De(I,G,te))},be.property=function(I,G){if(arguments.length<2){if(typeof I=="string")return this.node()[I];for(G in I)this.each(ke(G,I[G]));return this}return this.each(ke(I,G))},be.text=function(I){return arguments.length?this.each(typeof I=="function"?function(){var G=I.apply(this,arguments);this.textContent=G??""}:I==null?function(){this.textContent=""}:function(){this.textContent=I}):this.node().textContent},be.html=function(I){return arguments.length?this.each(typeof I=="function"?function(){var G=I.apply(this,arguments);this.innerHTML=G??""}:I==null?function(){this.innerHTML=""}:function(){this.innerHTML=I}):this.node().innerHTML},be.append=function(I){return I=Ee(I),this.select(function(){return this.appendChild(I.apply(this,arguments))})},be.insert=function(I,G){return I=Ee(I),G=_e(G),this.select(function(){return this.insertBefore(I.apply(this,arguments),G.apply(this,arguments)||null)})},be.remove=function(){return this.each(Ie)},be.data=function(I,G){var te,ie,he=-1,Te=this.length;if(!arguments.length){for(I=new Array(Te=(te=this[0]).length);++he<Te;)(ie=te[he])&&(I[he]=ie.__data__);return I}function Le(nt,ft){var pt,wt,Ct,At=nt.length,zt=ft.length,It=Math.min(At,zt),Xt=new Array(zt),Gt=new Array(zt),Vt=new Array(At);if(G){var pn,vn=new y,Sn=new Array(At);for(pt=-1;++pt<At;)(wt=nt[pt])&&(vn.has(pn=G.call(wt,wt.__data__,pt))?Vt[pt]=wt:vn.set(pn,wt),Sn[pt]=pn);for(pt=-1;++pt<zt;)(wt=vn.get(pn=G.call(ft,Ct=ft[pt],pt)))?wt!==!0&&(Xt[pt]=wt,wt.__data__=Ct):Gt[pt]=Re(Ct),vn.set(pn,!0);for(pt=-1;++pt<At;)pt in Sn&&vn.get(Sn[pt])!==!0&&(Vt[pt]=nt[pt])}else{for(pt=-1;++pt<It;)wt=nt[pt],Ct=ft[pt],wt?(wt.__data__=Ct,Xt[pt]=wt):Gt[pt]=Re(Ct);for(;pt<zt;++pt)Gt[pt]=Re(ft[pt]);for(;pt<At;++pt)Vt[pt]=nt[pt]}Gt.update=Xt,Gt.parentNode=Xt.parentNode=Vt.parentNode=nt.parentNode,Fe.push(Gt),qe.push(Xt),We.push(Vt)}var Fe=Ce([]),qe=oe([]),We=oe([]);if(typeof I=="function")for(;++he<Te;)Le(te=this[he],I.call(te,te.parentNode.__data__,he));else for(;++he<Te;)Le(te=this[he],I);return qe.enter=function(){return Fe},qe.exit=function(){return We},qe},be.datum=function(I){return arguments.length?this.property("__data__",I):this.property("__data__")},be.filter=function(I){var G,te,ie,he=[];typeof I!="function"&&(I=Ne(I));for(var Te=0,Le=this.length;Te<Le;Te++){he.push(G=[]),G.parentNode=(te=this[Te]).parentNode;for(var Fe=0,qe=te.length;Fe<qe;Fe++)(ie=te[Fe])&&I.call(ie,ie.__data__,Fe,Te)&&G.push(ie)}return oe(he)},be.order=function(){for(var I=-1,G=this.length;++I<G;)for(var te,ie=this[I],he=ie.length-1,Te=ie[he];--he>=0;)(te=ie[he])&&(Te&&Te!==te.nextSibling&&Te.parentNode.insertBefore(te,Te),Te=te);return this},be.sort=function(I){I=ge.apply(this,arguments);for(var G=-1,te=this.length;++G<te;)this[G].sort(I);return this.order()},be.each=function(I){return we(this,function(G,te,ie){I.call(G,G.__data__,te,ie)})},be.call=function(I){var G=x(arguments);return I.apply(G[0]=this,G),this},be.empty=function(){return!this.node()},be.node=function(){for(var I=0,G=this.length;I<G;I++)for(var te=this[I],ie=0,he=te.length;ie<he;ie++){var Te=te[ie];if(Te)return Te}return null},be.size=function(){var I=0;return we(this,function(){++I}),I};var ze=[];function Pe(I,G,te){var ie="__on"+I,he=I.indexOf("."),Te=Ge;he>0&&(I=I.slice(0,he));var Le=Ue.get(I);function Fe(){var qe=this[ie];qe&&(this.removeEventListener(I,qe,qe.$),delete this[ie])}return Le&&(I=Le,Te=Xe),he?G?function(){var qe=Te(G,x(arguments));Fe.call(this),this.addEventListener(I,this[ie]=qe,qe.$=te),qe._=G}:Fe:G?H:function(){var qe,We=new RegExp("^__on([^.]+)"+n.requote(I)+"$");for(var nt in this)if(qe=nt.match(We)){var ft=this[nt];this.removeEventListener(qe[1],ft,ft.$),delete this[nt]}}}n.selection.enter=Ce,n.selection.enter.prototype=ze,ze.append=be.append,ze.empty=be.empty,ze.node=be.node,ze.call=be.call,ze.size=be.size,ze.select=function(I){for(var G,te,ie,he,Te,Le=[],Fe=-1,qe=this.length;++Fe<qe;){ie=(he=this[Fe]).update,Le.push(G=[]),G.parentNode=he.parentNode;for(var We=-1,nt=he.length;++We<nt;)(Te=he[We])?(G.push(ie[We]=te=I.call(he.parentNode,Te.__data__,We,Fe)),te.__data__=Te.__data__):G.push(null)}return oe(Le)},ze.insert=function(I,G){var te,ie,he;return arguments.length<2&&(te=this,G=function(Te,Le,Fe){var qe,We=te[Fe].update,nt=We.length;for(Fe!=he&&(he=Fe,ie=0),Le>=ie&&(ie=Le+1);!(qe=We[ie])&&++ie<nt;);return qe}),be.insert.call(this,I,G)},n.select=function(I){var G;return typeof I=="string"?(G=[le(I,f)]).parentNode=f.documentElement:(G=[I]).parentNode=s(I),oe([G])},n.selectAll=function(I){var G;return typeof I=="string"?(G=x(se(I,f))).parentNode=f.documentElement:(G=x(I)).parentNode=null,oe([G])},be.on=function(I,G,te){var ie=arguments.length;if(ie<3){if(typeof I!="string"){for(te in ie<2&&(G=!1),I)this.each(Pe(te,I[te],G));return this}if(ie<2)return(ie=this.node()["__on"+I])&&ie._;te=!1}return this.each(Pe(I,G,te))};var Ue=n.map({mouseenter:"mouseover",mouseleave:"mouseout"});function Ge(I,G){return function(te){var ie=n.event;n.event=te,G[0]=this.__data__;try{I.apply(this,G)}finally{n.event=ie}}}function Xe(I,G){var te=Ge(I,G);return function(ie){var he=this,Te=ie.relatedTarget;Te&&(Te===he||8&Te.compareDocumentPosition(he))||te.call(he,ie)}}f&&Ue.forEach(function(I){"on"+I in f&&Ue.remove(I)});var st,at=0;function vt(I){var G=".dragsuppress-"+ ++at,te="click"+G,ie=n.select(t(I)).on("touchmove"+G,ee).on("dragstart"+G,ee).on("selectstart"+G,ee);if(st==null&&(st=!("onselectstart"in I)&&Z(I.style,"userSelect")),st){var he=s(I).style,Te=he[st];he[st]="none"}return function(Le){if(ie.on(G,null),st&&(he[st]=Te),Le){var Fe=function(){ie.on(te,null)};ie.on(te,function(){ee(),Fe()},!0),setTimeout(Fe,0)}}}n.mouse=function(I){return gt(I,J())};var xt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function gt(I,G){G.changedTouches&&(G=G.changedTouches[0]);var te=I.ownerSVGElement||I;if(te.createSVGPoint){var ie=te.createSVGPoint();if(xt<0){var he=t(I);if(he.scrollX||he.scrollY){var Te=(te=n.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();xt=!(Te.f||Te.e),te.remove()}}return xt?(ie.x=G.pageX,ie.y=G.pageY):(ie.x=G.clientX,ie.y=G.clientY),[(ie=ie.matrixTransform(I.getScreenCTM().inverse())).x,ie.y]}var Le=I.getBoundingClientRect();return[G.clientX-Le.left-I.clientLeft,G.clientY-Le.top-I.clientTop]}function rt(){return n.event.changedTouches[0].identifier}n.touch=function(I,G,te){if(arguments.length<3&&(te=G,G=J().changedTouches),G){for(var ie,he=0,Te=G.length;he<Te;++he)if((ie=G[he]).identifier===te)return gt(I,ie)}},n.behavior.drag=function(){var I=Q(he,"drag","dragstart","dragend"),G=null,te=Te(H,n.mouse,t,"mousemove","mouseup"),ie=Te(rt,n.touch,F,"touchmove","touchend");function he(){this.on("mousedown.drag",te).on("touchstart.drag",ie)}function Te(Le,Fe,qe,We,nt){return function(){var ft,pt=this,wt=n.event.target.correspondingElement||n.event.target,Ct=pt.parentNode,At=I.of(pt,arguments),zt=0,It=Le(),Xt=".drag"+(It==null?"":"-"+It),Gt=n.select(qe(wt)).on(We+Xt,function(){var vn,Sn,In=Fe(Ct,It);In&&(vn=In[0]-pn[0],Sn=In[1]-pn[1],zt|=vn|Sn,pn=In,At({type:"drag",x:In[0]+ft[0],y:In[1]+ft[1],dx:vn,dy:Sn}))}).on(nt+Xt,function(){Fe(Ct,It)&&(Gt.on(We+Xt,null).on(nt+Xt,null),Vt(zt),At({type:"dragend"}))}),Vt=vt(wt),pn=Fe(Ct,It);ft=G?[(ft=G.apply(pt,arguments)).x-pn[0],ft.y-pn[1]]:[0,0],At({type:"dragstart"})}}return he.origin=function(Le){return arguments.length?(G=Le,he):G},n.rebind(he,I,"on")},n.touches=function(I,G){return arguments.length<2&&(G=J().touches),G?x(G).map(function(te){var ie=gt(I,te);return ie.identifier=te.identifier,ie}):[]};var tt=1e-6,Mt=tt*tt,Pt=Math.PI,Rt=2*Pt,St=Rt-tt,Ye=Pt/2,Ke=Pt/180,Ve=180/Pt;function $e(I){return I>1?Ye:I<-1?-Ye:Math.asin(I)}function lt(I){return((I=Math.exp(I))+1/I)/2}var it=Math.SQRT2;n.interpolateZoom=function(I,G){var te,ie,he=I[0],Te=I[1],Le=I[2],Fe=G[0],qe=G[1],We=G[2],nt=Fe-he,ft=qe-Te,pt=nt*nt+ft*ft;if(pt<Mt)ie=Math.log(We/Le)/it,te=function(Xt){return[he+Xt*nt,Te+Xt*ft,Le*Math.exp(it*Xt*ie)]};else{var wt=Math.sqrt(pt),Ct=(We*We-Le*Le+4*pt)/(2*Le*2*wt),At=(We*We-Le*Le-4*pt)/(2*We*2*wt),zt=Math.log(Math.sqrt(Ct*Ct+1)-Ct),It=Math.log(Math.sqrt(At*At+1)-At);ie=(It-zt)/it,te=function(Xt){var Gt,Vt=Xt*ie,pn=lt(zt),vn=Le/(2*wt)*(pn*(Gt=it*Vt+zt,((Gt=Math.exp(2*Gt))-1)/(Gt+1))-function(Sn){return((Sn=Math.exp(Sn))-1/Sn)/2}(zt));return[he+vn*nt,Te+vn*ft,Le*pn/lt(it*Vt+zt)]}}return te.duration=1e3*ie,te},n.behavior.zoom=function(){var I,G,te,ie,he,Te,Le,Fe,qe,We={x:0,y:0,k:1},nt=[960,500],ft=ot,pt=250,wt=0,Ct="mousedown.zoom",At="mousemove.zoom",zt="mouseup.zoom",It="touchstart.zoom",Xt=Q(Gt,"zoomstart","zoom","zoomend");function Gt(er){er.on(Ct,Gn).on(je+".zoom",xr).on("dblclick.zoom",Er).on(It,lr)}function Vt(er){return[(er[0]-We.x)/We.k,(er[1]-We.y)/We.k]}function pn(er){We.k=Math.max(ft[0],Math.min(ft[1],er))}function vn(er,sr){sr=function(wr){return[wr[0]*We.k+We.x,wr[1]*We.k+We.y]}(sr),We.x+=er[0]-sr[0],We.y+=er[1]-sr[1]}function Sn(er,sr,wr,fr){er.__chart__={x:We.x,y:We.y,k:We.k},pn(Math.pow(2,fr)),vn(G=sr,wr),er=n.select(er),pt>0&&(er=er.transition().duration(pt)),er.call(Gt.event)}function In(){Le&&Le.domain(Te.range().map(function(er){return(er-We.x)/We.k}).map(Te.invert)),qe&&qe.domain(Fe.range().map(function(er){return(er-We.y)/We.k}).map(Fe.invert))}function Vn(er){wt++||er({type:"zoomstart"})}function nr(er){In(),er({type:"zoom",scale:We.k,translate:[We.x,We.y]})}function cr(er){--wt||(er({type:"zoomend"}),G=null)}function Gn(){var er=this,sr=Xt.of(er,arguments),wr=0,fr=n.select(t(er)).on(At,function(){wr=1,vn(n.mouse(er),Ar),nr(sr)}).on(zt,function(){fr.on(At,null).on(zt,null),Ir(wr),cr(sr)}),Ar=Vt(n.mouse(er)),Ir=vt(er);Jo.call(er),Vn(sr)}function lr(){var er,sr=this,wr=Xt.of(sr,arguments),fr={},Ar=0,Ir=".zoom-"+n.event.changedTouches[0].identifier,Vr="touchmove"+Ir,Ur="touchend"+Ir,Wr=[],Kr=n.select(sr),ki=vt(sr);function qi(){var Oi=n.touches(sr);return er=We.k,Oi.forEach(function(ei){ei.identifier in fr&&(fr[ei.identifier]=Vt(ei))}),Oi}function Do(){var Oi=n.event.target;n.select(Oi).on(Vr,fo).on(Ur,To),Wr.push(Oi);for(var ei=n.event.changedTouches,Bi=0,vi=ei.length;Bi<vi;++Bi)fr[ei[Bi].identifier]=null;var oi=qi(),ji=Date.now();if(oi.length===1){if(ji-he<500){var Gi=oi[0];Sn(sr,Gi,fr[Gi.identifier],Math.floor(Math.log(We.k)/Math.LN2)+1),ee()}he=ji}else if(oi.length>1){Gi=oi[0];var io=oi[1],dl=Gi[0]-io[0],pl=Gi[1]-io[1];Ar=dl*dl+pl*pl}}function fo(){var Oi,ei,Bi,vi,oi=n.touches(sr);Jo.call(sr);for(var ji=0,Gi=oi.length;ji<Gi;++ji,vi=null)if(Bi=oi[ji],vi=fr[Bi.identifier]){if(ei)break;Oi=Bi,ei=vi}if(vi){var io=(io=Bi[0]-Oi[0])*io+(io=Bi[1]-Oi[1])*io,dl=Ar&&Math.sqrt(io/Ar);Oi=[(Oi[0]+Bi[0])/2,(Oi[1]+Bi[1])/2],ei=[(ei[0]+vi[0])/2,(ei[1]+vi[1])/2],pn(dl*er)}he=null,vn(Oi,ei),nr(wr)}function To(){if(n.event.touches.length){for(var Oi=n.event.changedTouches,ei=0,Bi=Oi.length;ei<Bi;++ei)delete fr[Oi[ei].identifier];for(var vi in fr)return void qi()}n.selectAll(Wr).on(Ir,null),Kr.on(Ct,Gn).on(It,lr),ki(),cr(wr)}Do(),Vn(wr),Kr.on(Ct,null).on(It,Do)}function xr(){var er=Xt.of(this,arguments);ie?clearTimeout(ie):(Jo.call(this),I=Vt(G=te||n.mouse(this)),Vn(er)),ie=setTimeout(function(){ie=null,cr(er)},50),ee(),pn(Math.pow(2,.002*Be())*We.k),vn(G,I),nr(er)}function Er(){var er=n.mouse(this),sr=Math.log(We.k)/Math.LN2;Sn(this,er,Vt(er),n.event.shiftKey?Math.ceil(sr)-1:Math.floor(sr)+1)}return je||(je="onwheel"in f?(Be=function(){return-n.event.deltaY*(n.event.deltaMode?120:1)},"wheel"):"onmousewheel"in f?(Be=function(){return n.event.wheelDelta},"mousewheel"):(Be=function(){return-n.event.detail},"MozMousePixelScroll")),Gt.event=function(er){er.each(function(){var sr=Xt.of(this,arguments),wr=We;Zi?n.select(this).transition().each("start.zoom",function(){We=this.__chart__||{x:0,y:0,k:1},Vn(sr)}).tween("zoom:zoom",function(){var fr=nt[0],Ar=nt[1],Ir=G?G[0]:fr/2,Vr=G?G[1]:Ar/2,Ur=n.interpolateZoom([(Ir-We.x)/We.k,(Vr-We.y)/We.k,fr/We.k],[(Ir-wr.x)/wr.k,(Vr-wr.y)/wr.k,fr/wr.k]);return function(Wr){var Kr=Ur(Wr),ki=fr/Kr[2];this.__chart__=We={x:Ir-Kr[0]*ki,y:Vr-Kr[1]*ki,k:ki},nr(sr)}}).each("interrupt.zoom",function(){cr(sr)}).each("end.zoom",function(){cr(sr)}):(this.__chart__=We,Vn(sr),nr(sr),cr(sr))})},Gt.translate=function(er){return arguments.length?(We={x:+er[0],y:+er[1],k:We.k},In(),Gt):[We.x,We.y]},Gt.scale=function(er){return arguments.length?(We={x:We.x,y:We.y,k:null},pn(+er),In(),Gt):We.k},Gt.scaleExtent=function(er){return arguments.length?(ft=er==null?ot:[+er[0],+er[1]],Gt):ft},Gt.center=function(er){return arguments.length?(te=er&&[+er[0],+er[1]],Gt):te},Gt.size=function(er){return arguments.length?(nt=er&&[+er[0],+er[1]],Gt):nt},Gt.duration=function(er){return arguments.length?(pt=+er,Gt):pt},Gt.x=function(er){return arguments.length?(Le=er,Te=er.copy(),We={x:0,y:0,k:1},Gt):Le},Gt.y=function(er){return arguments.length?(qe=er,Fe=er.copy(),We={x:0,y:0,k:1},Gt):qe},n.rebind(Gt,Xt,"on")};var Be,je,ot=[0,1/0];function Ze(){}function dt(I,G,te){return this instanceof dt?(this.h=+I,this.s=+G,void(this.l=+te)):arguments.length<2?I instanceof dt?new dt(I.h,I.s,I.l):hn(""+I,bn,dt):new dt(I,G,te)}n.color=Ze,Ze.prototype.toString=function(){return this.rgb()+""},n.hsl=dt;var mt=dt.prototype=new Ze;function yt(I,G,te){var ie,he;function Te(Le){return Math.round(255*function(Fe){return Fe>360?Fe-=360:Fe<0&&(Fe+=360),Fe<60?ie+(he-ie)*Fe/60:Fe<180?he:Fe<240?ie+(he-ie)*(240-Fe)/60:ie}(Le))}return I=isNaN(I)?0:(I%=360)<0?I+360:I,G=isNaN(G)||G<0?0:G>1?1:G,ie=2*(te=te<0?0:te>1?1:te)-(he=te<=.5?te*(1+G):te+G-te*G),new kn(Te(I+120),Te(I),Te(I-120))}function ht(I,G,te){return this instanceof ht?(this.h=+I,this.c=+G,void(this.l=+te)):arguments.length<2?I instanceof ht?new ht(I.h,I.c,I.l):function(ie,he,Te){return ie>0?new ht(Math.atan2(Te,he)*Ve,Math.sqrt(he*he+Te*Te),ie):new ht(NaN,NaN,ie)}(I instanceof Et?I.l:(I=wn((I=n.rgb(I)).r,I.g,I.b)).l,I.a,I.b):new ht(I,G,te)}mt.brighter=function(I){return I=Math.pow(.7,arguments.length?I:1),new dt(this.h,this.s,this.l/I)},mt.darker=function(I){return I=Math.pow(.7,arguments.length?I:1),new dt(this.h,this.s,I*this.l)},mt.rgb=function(){return yt(this.h,this.s,this.l)},n.hcl=ht;var kt=ht.prototype=new Ze;function _t(I,G,te){return isNaN(I)&&(I=0),isNaN(G)&&(G=0),new Et(te,Math.cos(I*=Ke)*G,Math.sin(I)*G)}function Et(I,G,te){return this instanceof Et?(this.l=+I,this.a=+G,void(this.b=+te)):arguments.length<2?I instanceof Et?new Et(I.l,I.a,I.b):I instanceof ht?_t(I.h,I.c,I.l):wn((I=kn(I)).r,I.g,I.b):new Et(I,G,te)}kt.brighter=function(I){return new ht(this.h,this.c,Math.min(100,this.l+Lt*(arguments.length?I:1)))},kt.darker=function(I){return new ht(this.h,this.c,Math.max(0,this.l-Lt*(arguments.length?I:1)))},kt.rgb=function(){return _t(this.h,this.c,this.l).rgb()},n.lab=Et;var Lt=18,Ot=.95047,Ft=1,Zt=1.08883,Ht=Et.prototype=new Ze;function Ut(I,G,te){var ie=(I+16)/116,he=ie+G/500,Te=ie-te/200;return new kn(On(3.2404542*(he=Wt(he)*Ot)-1.5371385*(ie=Wt(ie)*Ft)-.4985314*(Te=Wt(Te)*Zt)),On(-.969266*he+1.8760108*ie+.041556*Te),On(.0556434*he-.2040259*ie+1.0572252*Te))}function Wt(I){return I>.206893034?I*I*I:(I-.13793103448275862)/7.787037}function nn(I){return I>.008856?Math.pow(I,.3333333333333333):7.787037*I+.13793103448275862}function On(I){return Math.round(255*(I<=.00304?12.92*I:1.055*Math.pow(I,.4166666666666667)-.055))}function kn(I,G,te){return this instanceof kn?(this.r=~~I,this.g=~~G,void(this.b=~~te)):arguments.length<2?I instanceof kn?new kn(I.r,I.g,I.b):hn(""+I,kn,yt):new kn(I,G,te)}function gn(I){return new kn(I>>16,I>>8&255,255&I)}function Jt(I){return gn(I)+""}Ht.brighter=function(I){return new Et(Math.min(100,this.l+Lt*(arguments.length?I:1)),this.a,this.b)},Ht.darker=function(I){return new Et(Math.max(0,this.l-Lt*(arguments.length?I:1)),this.a,this.b)},Ht.rgb=function(){return Ut(this.l,this.a,this.b)},n.rgb=kn;var un=kn.prototype=new Ze;function tn(I){return I<16?"0"+Math.max(0,I).toString(16):Math.min(255,I).toString(16)}function hn(I,G,te){var ie,he,Te,Le=0,Fe=0,qe=0;if(ie=/([a-z]+)\((.*)\)/.exec(I=I.toLowerCase()))switch(he=ie[2].split(","),ie[1]){case"hsl":return te(parseFloat(he[0]),parseFloat(he[1])/100,parseFloat(he[2])/100);case"rgb":return G(Cn(he[0]),Cn(he[1]),Cn(he[2]))}return(Te=Mn.get(I))?G(Te.r,Te.g,Te.b):(I==null||I.charAt(0)!=="#"||isNaN(Te=parseInt(I.slice(1),16))||(I.length===4?(Le=(3840&Te)>>4,Le|=Le>>4,Fe=240&Te,Fe|=Fe>>4,qe=15&Te,qe|=qe<<4):I.length===7&&(Le=(16711680&Te)>>16,Fe=(65280&Te)>>8,qe=255&Te)),G(Le,Fe,qe))}function bn(I,G,te){var ie,he,Te=Math.min(I/=255,G/=255,te/=255),Le=Math.max(I,G,te),Fe=Le-Te,qe=(Le+Te)/2;return Fe?(he=qe<.5?Fe/(Le+Te):Fe/(2-Le-Te),ie=I==Le?(G-te)/Fe+(G<te?6:0):G==Le?(te-I)/Fe+2:(I-G)/Fe+4,ie*=60):(ie=NaN,he=qe>0&&qe<1?0:ie),new dt(ie,he,qe)}function wn(I,G,te){var ie=nn((.4124564*(I=Pn(I))+.3575761*(G=Pn(G))+.1804375*(te=Pn(te)))/Ot),he=nn((.2126729*I+.7151522*G+.072175*te)/Ft);return Et(116*he-16,500*(ie-he),200*(he-nn((.0193339*I+.119192*G+.9503041*te)/Zt)))}function Pn(I){return(I/=255)<=.04045?I/12.92:Math.pow((I+.055)/1.055,2.4)}function Cn(I){var G=parseFloat(I);return I.charAt(I.length-1)==="%"?Math.round(2.55*G):G}un.brighter=function(I){I=Math.pow(.7,arguments.length?I:1);var G=this.r,te=this.g,ie=this.b,he=30;return G||te||ie?(G&&G<he&&(G=he),te&&te<he&&(te=he),ie&&ie<he&&(ie=he),new kn(Math.min(255,G/I),Math.min(255,te/I),Math.min(255,ie/I))):new kn(he,he,he)},un.darker=function(I){return new kn((I=Math.pow(.7,arguments.length?I:1))*this.r,I*this.g,I*this.b)},un.hsl=function(){return bn(this.r,this.g,this.b)},un.toString=function(){return"#"+tn(this.r)+tn(this.g)+tn(this.b)};var Mn=n.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function Bn(I){return typeof I=="function"?I:function(){return I}}function Nn(I){return function(G,te,ie){return arguments.length===2&&typeof te=="function"&&(ie=te,te=null),rr(G,te,I,ie)}}function rr(I,G,te,ie){var he={},Te=n.dispatch("beforesend","progress","load","error"),Le={},Fe=new XMLHttpRequest,qe=null;function We(){var nt,ft=Fe.status;if(!ft&&function(pt){var wt=pt.responseType;return wt&&wt!=="text"?pt.response:pt.responseText}(Fe)||ft>=200&&ft<300||ft===304){try{nt=te.call(he,Fe)}catch(pt){return void Te.error.call(he,pt)}Te.load.call(he,nt)}else Te.error.call(he,Fe)}return self.XDomainRequest&&!("withCredentials"in Fe)&&/^(http(s)?:)?\/\//.test(I)&&(Fe=new XDomainRequest),"onload"in Fe?Fe.onload=Fe.onerror=We:Fe.onreadystatechange=function(){Fe.readyState>3&&We()},Fe.onprogress=function(nt){var ft=n.event;n.event=nt;try{Te.progress.call(he,Fe)}finally{n.event=ft}},he.header=function(nt,ft){return nt=(nt+"").toLowerCase(),arguments.length<2?Le[nt]:(ft==null?delete Le[nt]:Le[nt]=ft+"",he)},he.mimeType=function(nt){return arguments.length?(G=nt==null?null:nt+"",he):G},he.responseType=function(nt){return arguments.length?(qe=nt,he):qe},he.response=function(nt){return te=nt,he},["get","post"].forEach(function(nt){he[nt]=function(){return he.send.apply(he,[nt].concat(x(arguments)))}}),he.send=function(nt,ft,pt){if(arguments.length===2&&typeof ft=="function"&&(pt=ft,ft=null),Fe.open(nt,I,!0),G==null||"accept"in Le||(Le.accept=G+",*/*"),Fe.setRequestHeader)for(var wt in Le)Fe.setRequestHeader(wt,Le[wt]);return G!=null&&Fe.overrideMimeType&&Fe.overrideMimeType(G),qe!=null&&(Fe.responseType=qe),pt!=null&&he.on("error",pt).on("load",function(Ct){pt(null,Ct)}),Te.beforesend.call(he,Fe),Fe.send(ft??null),he},he.abort=function(){return Fe.abort(),he},n.rebind(he,Te,"on"),ie==null?he:he.get(function(nt){return nt.length===1?function(ft,pt){nt(ft==null?pt:null)}:nt}(ie))}Mn.forEach(function(I,G){Mn.set(I,gn(G))}),n.functor=Bn,n.xhr=Nn(F),n.dsv=function(I,G){var te=new RegExp('["'+I+`
]`),ie=I.charCodeAt(0);function he(We,nt,ft){arguments.length<3&&(ft=nt,nt=null);var pt=rr(We,G,nt==null?Te:Le(nt),ft);return pt.row=function(wt){return arguments.length?pt.response((nt=wt)==null?Te:Le(wt)):nt},pt}function Te(We){return he.parse(We.responseText)}function Le(We){return function(nt){return he.parse(nt.responseText,We)}}function Fe(We){return We.map(qe).join(I)}function qe(We){return te.test(We)?'"'+We.replace(/\"/g,'""')+'"':We}return he.parse=function(We,nt){var ft;return he.parseRows(We,function(pt,wt){if(ft)return ft(pt,wt-1);var Ct=function(At){for(var zt={},It=pt.length,Xt=0;Xt<It;++Xt)zt[pt[Xt]]=At[Xt];return zt};ft=nt?function(At,zt){return nt(Ct(At),zt)}:Ct})},he.parseRows=function(We,nt){var ft,pt,wt={},Ct={},At=[],zt=We.length,It=0,Xt=0;function Gt(){if(It>=zt)return Ct;if(pt)return pt=!1,wt;var pn=It;if(We.charCodeAt(pn)===34){for(var vn=pn;vn++<zt;)if(We.charCodeAt(vn)===34){if(We.charCodeAt(vn+1)!==34)break;++vn}return It=vn+2,(Sn=We.charCodeAt(vn+1))===13?(pt=!0,We.charCodeAt(vn+2)===10&&++It):Sn===10&&(pt=!0),We.slice(pn+1,vn).replace(/""/g,'"')}for(;It<zt;){var Sn,In=1;if((Sn=We.charCodeAt(It++))===10)pt=!0;else if(Sn===13)pt=!0,We.charCodeAt(It)===10&&(++It,++In);else if(Sn!==ie)continue;return We.slice(pn,It-In)}return We.slice(pn)}for(;(ft=Gt())!==Ct;){for(var Vt=[];ft!==wt&&ft!==Ct;)Vt.push(ft),ft=Gt();nt&&(Vt=nt(Vt,Xt++))==null||At.push(Vt)}return At},he.format=function(We){if(Array.isArray(We[0]))return he.formatRows(We);var nt=new V,ft=[];return We.forEach(function(pt){for(var wt in pt)nt.has(wt)||ft.push(nt.add(wt))}),[ft.map(qe).join(I)].concat(We.map(function(pt){return ft.map(function(wt){return qe(pt[wt])}).join(I)})).join(`
`)},he.formatRows=function(We){return We.map(Fe).join(`
`)},he},n.csv=n.dsv(",","text/csv"),n.tsv=n.dsv("	","text/tab-separated-values");var Yn,ir,Zn,ur,en=this[Z(this,"requestAnimationFrame")]||function(I){setTimeout(I,17)};function on(I,G,te){var ie=arguments.length;ie<2&&(G=0),ie<3&&(te=Date.now());var he={c:I,t:te+G,n:null};return ir?ir.n=he:Yn=he,ir=he,Zn||(ur=clearTimeout(ur),Zn=1,en(Dn)),he}function Dn(){var I=yn(),G=Ln()-I;G>24?(isFinite(G)&&(clearTimeout(ur),ur=setTimeout(Dn,G)),Zn=0):(Zn=1,en(Dn))}function yn(){for(var I=Date.now(),G=Yn;G;)I>=G.t&&G.c(I-G.t)&&(G.c=null),G=G.n;return I}function Ln(){for(var I,G=Yn,te=1/0;G;)G.c?(G.t<te&&(te=G.t),G=(I=G).n):G=I?I.n=G.n:Yn=G.n;return ir=I,te}function Wn(I){return I[0]}function Un(I){return I[1]}function Xn(I){for(var G,te,ie,he=I.length,Te=[0,1],Le=2,Fe=2;Fe<he;Fe++){for(;Le>1&&(G=I[Te[Le-2]],te=I[Te[Le-1]],ie=I[Fe],(te[0]-G[0])*(ie[1]-G[1])-(te[1]-G[1])*(ie[0]-G[0])<=0);)--Le;Te[Le++]=Fe}return Te.slice(0,Le)}function pr(I,G){return I[0]-G[0]||I[1]-G[1]}n.timer=function(){on.apply(this,arguments)},n.timer.flush=function(){yn(),Ln()},n.round=function(I,G){return G?Math.round(I*(G=Math.pow(10,G)))/G:Math.round(I)},n.geom={},n.geom.hull=function(I){var G=Wn,te=Un;if(arguments.length)return ie(I);function ie(he){if(he.length<3)return[];var Te,Le=Bn(G),Fe=Bn(te),qe=he.length,We=[],nt=[];for(Te=0;Te<qe;Te++)We.push([+Le.call(this,he[Te],Te),+Fe.call(this,he[Te],Te),Te]);for(We.sort(pr),Te=0;Te<qe;Te++)nt.push([We[Te][0],-We[Te][1]]);var ft=Xn(We),pt=Xn(nt),wt=pt[0]===ft[0],Ct=pt[pt.length-1]===ft[ft.length-1],At=[];for(Te=ft.length-1;Te>=0;--Te)At.push(he[We[ft[Te]][2]]);for(Te=+wt;Te<pt.length-Ct;++Te)At.push(he[We[pt[Te]][2]]);return At}return ie.x=function(he){return arguments.length?(G=he,ie):G},ie.y=function(he){return arguments.length?(te=he,ie):te},ie},n.geom.polygon=function(I){return K(I,Kt),I};var Kt=n.geom.polygon.prototype=[];function mn(I,G,te){return(te[0]-G[0])*(I[1]-G[1])<(te[1]-G[1])*(I[0]-G[0])}function Dt(I,G,te,ie){var he=I[0],Te=te[0],Le=G[0]-he,Fe=ie[0]-Te,qe=I[1],We=te[1],nt=G[1]-qe,ft=ie[1]-We,pt=(Fe*(qe-We)-ft*(he-Te))/(ft*Le-Fe*nt);return[he+pt*Le,qe+pt*nt]}function Bt(I){var G=I[0],te=I[I.length-1];return!(G[0]-te[0]||G[1]-te[1])}Kt.area=function(){for(var I,G=-1,te=this.length,ie=this[te-1],he=0;++G<te;)I=ie,ie=this[G],he+=I[1]*ie[0]-I[0]*ie[1];return .5*he},Kt.centroid=function(I){var G,te,ie=-1,he=this.length,Te=0,Le=0,Fe=this[he-1];for(arguments.length||(I=-1/(6*this.area()));++ie<he;)G=Fe,Fe=this[ie],te=G[0]*Fe[1]-Fe[0]*G[1],Te+=(G[0]+Fe[0])*te,Le+=(G[1]+Fe[1])*te;return[Te*I,Le*I]},Kt.clip=function(I){for(var G,te,ie,he,Te,Le,Fe=Bt(I),qe=-1,We=this.length-Bt(this),nt=this[We-1];++qe<We;){for(G=I.slice(),I.length=0,he=this[qe],Te=G[(ie=G.length-Fe)-1],te=-1;++te<ie;)mn(Le=G[te],nt,he)?(mn(Te,nt,he)||I.push(Dt(Te,Le,nt,he)),I.push(Le)):mn(Te,nt,he)&&I.push(Dt(Te,Le,nt,he)),Te=Le;Fe&&I.push(I[0]),nt=he}return I};var Qt,fn,dn,xn,sn,$t=[],Yt=[];function rn(){wi(this),this.edge=this.site=this.circle=null}function ln(I){var G=$t.pop()||new rn;return G.site=I,G}function An(I){hr(I),dn.remove(I),$t.push(I),wi(I)}function En(I){var G=I.circle,te=G.x,ie=G.cy,he={x:te,y:ie},Te=I.P,Le=I.N,Fe=[I];An(I);for(var qe=Te;qe.circle&&m(te-qe.circle.x)<tt&&m(ie-qe.circle.cy)<tt;)Te=qe.P,Fe.unshift(qe),An(qe),qe=Te;Fe.unshift(qe),hr(qe);for(var We=Le;We.circle&&m(te-We.circle.x)<tt&&m(ie-We.circle.cy)<tt;)Le=We.N,Fe.push(We),An(We),We=Le;Fe.push(We),hr(We);var nt,ft=Fe.length;for(nt=1;nt<ft;++nt)We=Fe[nt],qe=Fe[nt-1],mr(We.edge,qe.site,We.site,he);qe=Fe[0],(We=Fe[ft-1]).edge=ar(qe.site,We.site,null,he),Jn(qe),Jn(We)}function Rn(I){for(var G,te,ie,he,Te=I.x,Le=I.y,Fe=dn._;Fe;)if((ie=jn(Fe,Le)-Te)>tt)Fe=Fe.L;else{if(!((he=Te-Qn(Fe,Le))>tt)){ie>-tt?(G=Fe.P,te=Fe):he>-tt?(G=Fe,te=Fe.N):G=te=Fe;break}if(!Fe.R){G=Fe;break}Fe=Fe.R}var qe=ln(I);if(dn.insert(G,qe),G||te){if(G===te)return hr(G),te=ln(G.site),dn.insert(qe,te),qe.edge=te.edge=ar(G.site,qe.site),Jn(G),void Jn(te);if(te){hr(G),hr(te);var We=G.site,nt=We.x,ft=We.y,pt=I.x-nt,wt=I.y-ft,Ct=te.site,At=Ct.x-nt,zt=Ct.y-ft,It=2*(pt*zt-wt*At),Xt=pt*pt+wt*wt,Gt=At*At+zt*zt,Vt={x:(zt*Xt-wt*Gt)/It+nt,y:(pt*Gt-At*Xt)/It+ft};mr(te.edge,We,Ct,Vt),qe.edge=ar(We,I,null,Vt),te.edge=ar(I,Ct,null,Vt),Jn(G),Jn(te)}else qe.edge=ar(G.site,qe.site)}}function jn(I,G){var te=I.site,ie=te.x,he=te.y,Te=he-G;if(!Te)return ie;var Le=I.P;if(!Le)return-1/0;var Fe=(te=Le.site).x,qe=te.y,We=qe-G;if(!We)return Fe;var nt=Fe-ie,ft=1/Te-1/We,pt=nt/We;return ft?(-pt+Math.sqrt(pt*pt-2*ft*(nt*nt/(-2*We)-qe+We/2+he-Te/2)))/ft+ie:(ie+Fe)/2}function Qn(I,G){var te=I.N;if(te)return jn(te,G);var ie=I.site;return ie.y===G?ie.x:1/0}function qn(I){this.site=I,this.edges=[]}function Kn(I,G){return G.angle-I.angle}function tr(){wi(this),this.x=this.y=this.arc=this.site=this.cy=null}function Jn(I){var G=I.P,te=I.N;if(G&&te){var ie=G.site,he=I.site,Te=te.site;if(ie!==Te){var Le=he.x,Fe=he.y,qe=ie.x-Le,We=ie.y-Fe,nt=Te.x-Le,ft=2*(qe*(zt=Te.y-Fe)-We*nt);if(!(ft>=-Mt)){var pt=qe*qe+We*We,wt=nt*nt+zt*zt,Ct=(zt*pt-We*wt)/ft,At=(qe*wt-nt*pt)/ft,zt=At+Fe,It=Yt.pop()||new tr;It.arc=I,It.site=he,It.x=Ct+Le,It.y=zt+Math.sqrt(Ct*Ct+At*At),It.cy=zt,I.circle=It;for(var Xt=null,Gt=sn._;Gt;)if(It.y<Gt.y||It.y===Gt.y&&It.x<=Gt.x){if(!Gt.L){Xt=Gt.P;break}Gt=Gt.L}else{if(!Gt.R){Xt=Gt;break}Gt=Gt.R}sn.insert(Xt,It),Xt||(xn=It)}}}}function hr(I){var G=I.circle;G&&(G.P||(xn=G.N),sn.remove(G),Yt.push(G),wi(G),I.circle=null)}function br(I,G){var te=I.b;if(te)return!0;var ie,he,Te=I.a,Le=G[0][0],Fe=G[1][0],qe=G[0][1],We=G[1][1],nt=I.l,ft=I.r,pt=nt.x,wt=nt.y,Ct=ft.x,At=ft.y,zt=(pt+Ct)/2,It=(wt+At)/2;if(At===wt){if(zt<Le||zt>=Fe)return;if(pt>Ct){if(Te){if(Te.y>=We)return}else Te={x:zt,y:qe};te={x:zt,y:We}}else{if(Te){if(Te.y<qe)return}else Te={x:zt,y:We};te={x:zt,y:qe}}}else if(he=It-(ie=(pt-Ct)/(At-wt))*zt,ie<-1||ie>1)if(pt>Ct){if(Te){if(Te.y>=We)return}else Te={x:(qe-he)/ie,y:qe};te={x:(We-he)/ie,y:We}}else{if(Te){if(Te.y<qe)return}else Te={x:(We-he)/ie,y:We};te={x:(qe-he)/ie,y:qe}}else if(wt<At){if(Te){if(Te.x>=Fe)return}else Te={x:Le,y:ie*Le+he};te={x:Fe,y:ie*Fe+he}}else{if(Te){if(Te.x<Le)return}else Te={x:Fe,y:ie*Fe+he};te={x:Le,y:ie*Le+he}}return I.a=Te,I.b=te,!0}function gr(I,G){this.l=I,this.r=G,this.a=this.b=null}function ar(I,G,te,ie){var he=new gr(I,G);return Qt.push(he),te&&mr(he,I,G,te),ie&&mr(he,G,I,ie),fn[I.i].edges.push(new kr(he,I,G)),fn[G.i].edges.push(new kr(he,G,I)),he}function mr(I,G,te,ie){I.a||I.b?I.l===te?I.b=ie:I.a=ie:(I.a=ie,I.l=G,I.r=te)}function kr(I,G,te){var ie=I.a,he=I.b;this.edge=I,this.site=G,this.angle=te?Math.atan2(te.y-G.y,te.x-G.x):I.l===G?Math.atan2(he.x-ie.x,ie.y-he.y):Math.atan2(ie.x-he.x,he.y-ie.y)}function Pr(){this._=null}function wi(I){I.U=I.C=I.L=I.R=I.P=I.N=null}function Ti(I,G){var te=G,ie=G.R,he=te.U;he?he.L===te?he.L=ie:he.R=ie:I._=ie,ie.U=he,te.U=ie,te.R=ie.L,te.R&&(te.R.U=te),ie.L=te}function Qi(I,G){var te=G,ie=G.L,he=te.U;he?he.L===te?he.L=ie:he.R=ie:I._=ie,ie.U=he,te.U=ie,te.L=ie.R,te.L&&(te.L.U=te),ie.R=te}function bi(I){for(;I.L;)I=I.L;return I}function zi(I,G){var te,ie,he,Te=I.sort(Oo).pop();for(Qt=[],fn=new Array(I.length),dn=new Pr,sn=new Pr;;)if(he=xn,Te&&(!he||Te.y<he.y||Te.y===he.y&&Te.x<he.x))Te.x===te&&Te.y===ie||(fn[Te.i]=new qn(Te),Rn(Te),te=Te.x,ie=Te.y),Te=I.pop();else{if(!he)break;En(he.arc)}G&&(function(Fe){for(var qe,We,nt,ft,pt,wt=Qt,Ct=(We=Fe[0][0],nt=Fe[0][1],ft=Fe[1][0],pt=Fe[1][1],function(zt){var It,Xt=zt.a,Gt=zt.b,Vt=Xt.x,pn=Xt.y,vn=0,Sn=1,In=Gt.x-Vt,Vn=Gt.y-pn;if(It=We-Vt,In||!(It>0)){if(It/=In,In<0){if(It<vn)return;It<Sn&&(Sn=It)}else if(In>0){if(It>Sn)return;It>vn&&(vn=It)}if(It=ft-Vt,In||!(It<0)){if(It/=In,In<0){if(It>Sn)return;It>vn&&(vn=It)}else if(In>0){if(It<vn)return;It<Sn&&(Sn=It)}if(It=nt-pn,Vn||!(It>0)){if(It/=Vn,Vn<0){if(It<vn)return;It<Sn&&(Sn=It)}else if(Vn>0){if(It>Sn)return;It>vn&&(vn=It)}if(It=pt-pn,Vn||!(It<0)){if(It/=Vn,Vn<0){if(It>Sn)return;It>vn&&(vn=It)}else if(Vn>0){if(It<vn)return;It<Sn&&(Sn=It)}return vn>0&&(zt.a={x:Vt+vn*In,y:pn+vn*Vn}),Sn<1&&(zt.b={x:Vt+Sn*In,y:pn+Sn*Vn}),zt}}}}}),At=wt.length;At--;)(!br(qe=wt[At],Fe)||!Ct(qe)||m(qe.a.x-qe.b.x)<tt&&m(qe.a.y-qe.b.y)<tt)&&(qe.a=qe.b=null,wt.splice(At,1))}(G),function(Fe){for(var qe,We,nt,ft,pt,wt,Ct,At,zt,It,Xt=Fe[0][0],Gt=Fe[1][0],Vt=Fe[0][1],pn=Fe[1][1],vn=fn,Sn=vn.length;Sn--;)if((pt=vn[Sn])&&pt.prepare())for(At=(Ct=pt.edges).length,wt=0;wt<At;)nt=(It=Ct[wt].end()).x,ft=It.y,qe=(zt=Ct[++wt%At].start()).x,We=zt.y,(m(nt-qe)>tt||m(ft-We)>tt)&&(Ct.splice(wt,0,new kr((In=pt.site,Vn=It,nr=m(nt-Xt)<tt&&pn-ft>tt?{x:Xt,y:m(qe-Xt)<tt?We:pn}:m(ft-pn)<tt&&Gt-nt>tt?{x:m(We-pn)<tt?qe:Gt,y:pn}:m(nt-Gt)<tt&&ft-Vt>tt?{x:Gt,y:m(qe-Gt)<tt?We:Vt}:m(ft-Vt)<tt&&nt-Xt>tt?{x:m(We-Vt)<tt?qe:Xt,y:Vt}:null,cr=void 0,(cr=new gr(In,null)).a=Vn,cr.b=nr,Qt.push(cr),cr),pt.site,null)),++At);var In,Vn,nr,cr}(G));var Le={cells:fn,edges:Qt};return dn=sn=Qt=fn=null,Le}function Oo(I,G){return G.y-I.y||G.x-I.x}qn.prototype.prepare=function(){for(var I,G=this.edges,te=G.length;te--;)(I=G[te].edge).b&&I.a||G.splice(te,1);return G.sort(Kn),G.length},kr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Pr.prototype={insert:function(I,G){var te,ie,he;if(I){if(G.P=I,G.N=I.N,I.N&&(I.N.P=G),I.N=G,I.R){for(I=I.R;I.L;)I=I.L;I.L=G}else I.R=G;te=I}else this._?(I=bi(this._),G.P=null,G.N=I,I.P=I.L=G,te=I):(G.P=G.N=null,this._=G,te=null);for(G.L=G.R=null,G.U=te,G.C=!0,I=G;te&&te.C;)te===(ie=te.U).L?(he=ie.R)&&he.C?(te.C=he.C=!1,ie.C=!0,I=ie):(I===te.R&&(Ti(this,te),te=(I=te).U),te.C=!1,ie.C=!0,Qi(this,ie)):(he=ie.L)&&he.C?(te.C=he.C=!1,ie.C=!0,I=ie):(I===te.L&&(Qi(this,te),te=(I=te).U),te.C=!1,ie.C=!0,Ti(this,ie)),te=I.U;this._.C=!1},remove:function(I){I.N&&(I.N.P=I.P),I.P&&(I.P.N=I.N),I.N=I.P=null;var G,te,ie,he=I.U,Te=I.L,Le=I.R;if(te=Te?Le?bi(Le):Te:Le,he?he.L===I?he.L=te:he.R=te:this._=te,Te&&Le?(ie=te.C,te.C=I.C,te.L=Te,Te.U=te,te!==Le?(he=te.U,te.U=I.U,I=te.R,he.L=I,te.R=Le,Le.U=te):(te.U=he,he=te,I=te.R)):(ie=I.C,I=te),I&&(I.U=he),!ie)if(I&&I.C)I.C=!1;else{do{if(I===this._)break;if(I===he.L){if((G=he.R).C&&(G.C=!1,he.C=!0,Ti(this,he),G=he.R),G.L&&G.L.C||G.R&&G.R.C){G.R&&G.R.C||(G.L.C=!1,G.C=!0,Qi(this,G),G=he.R),G.C=he.C,he.C=G.R.C=!1,Ti(this,he),I=this._;break}}else if((G=he.L).C&&(G.C=!1,he.C=!0,Qi(this,he),G=he.L),G.L&&G.L.C||G.R&&G.R.C){G.L&&G.L.C||(G.R.C=!1,G.C=!0,Ti(this,G),G=he.L),G.C=he.C,he.C=G.L.C=!1,Qi(this,he),I=this._;break}G.C=!0,I=he,he=he.U}while(!I.C);I&&(I.C=!1)}}},n.geom.voronoi=function(I){var G=Wn,te=Un,ie=G,he=te,Te=Rr;if(I)return Le(I);function Le(qe){var We=new Array(qe.length),nt=Te[0][0],ft=Te[0][1],pt=Te[1][0],wt=Te[1][1];return zi(Fe(qe),Te).cells.forEach(function(Ct,At){var zt=Ct.edges,It=Ct.site;(We[At]=zt.length?zt.map(function(Xt){var Gt=Xt.start();return[Gt.x,Gt.y]}):It.x>=nt&&It.x<=pt&&It.y>=ft&&It.y<=wt?[[nt,wt],[pt,wt],[pt,ft],[nt,ft]]:[]).point=qe[At]}),We}function Fe(qe){return qe.map(function(We,nt){return{x:Math.round(ie(We,nt)/tt)*tt,y:Math.round(he(We,nt)/tt)*tt,i:nt}})}return Le.links=function(qe){return zi(Fe(qe)).edges.filter(function(We){return We.l&&We.r}).map(function(We){return{source:qe[We.l.i],target:qe[We.r.i]}})},Le.triangles=function(qe){var We=[];return zi(Fe(qe)).cells.forEach(function(nt,ft){for(var pt,wt,Ct,At,zt=nt.site,It=nt.edges.sort(Kn),Xt=-1,Gt=It.length,Vt=It[Gt-1].edge,pn=Vt.l===zt?Vt.r:Vt.l;++Xt<Gt;)pt=pn,pn=(Vt=It[Xt].edge).l===zt?Vt.r:Vt.l,ft<pt.i&&ft<pn.i&&(Ct=pt,At=pn,((wt=zt).x-At.x)*(Ct.y-wt.y)-(wt.x-Ct.x)*(At.y-wt.y)<0)&&We.push([qe[ft],qe[pt.i],qe[pn.i]])}),We},Le.x=function(qe){return arguments.length?(ie=Bn(G=qe),Le):G},Le.y=function(qe){return arguments.length?(he=Bn(te=qe),Le):te},Le.clipExtent=function(qe){return arguments.length?(Te=qe??Rr,Le):Te===Rr?null:Te},Le.size=function(qe){return arguments.length?Le.clipExtent(qe&&[[0,0],qe]):Te===Rr?null:Te&&Te[1]},Le};var Rr=[[-1e6,-1e6],[1e6,1e6]];function so(I){return I.x}function aa(I){return I.y}function ro(I,G,te,ie,he,Te){if(!I(G,te,ie,he,Te)){var Le=.5*(te+he),Fe=.5*(ie+Te),qe=G.nodes;qe[0]&&ro(I,qe[0],te,ie,Le,Fe),qe[1]&&ro(I,qe[1],Le,ie,he,Fe),qe[2]&&ro(I,qe[2],te,Fe,Le,Te),qe[3]&&ro(I,qe[3],Le,Fe,he,Te)}}function Za(I,G){I=n.rgb(I),G=n.rgb(G);var te=I.r,ie=I.g,he=I.b,Te=G.r-te,Le=G.g-ie,Fe=G.b-he;return function(qe){return"#"+tn(Math.round(te+Te*qe))+tn(Math.round(ie+Le*qe))+tn(Math.round(he+Fe*qe))}}function fs(I,G){var te,ie={},he={};for(te in I)te in G?ie[te]=sa(I[te],G[te]):he[te]=I[te];for(te in G)te in I||(he[te]=G[te]);return function(Te){for(te in ie)he[te]=ie[te](Te);return he}}function _o(I,G){return I=+I,G=+G,function(te){return I*(1-te)+G*te}}function Ra(I,G){var te,ie,he,Te=Fa.lastIndex=hs.lastIndex=0,Le=-1,Fe=[],qe=[];for(I+="",G+="";(te=Fa.exec(I))&&(ie=hs.exec(G));)(he=ie.index)>Te&&(he=G.slice(Te,he),Fe[Le]?Fe[Le]+=he:Fe[++Le]=he),(te=te[0])===(ie=ie[0])?Fe[Le]?Fe[Le]+=ie:Fe[++Le]=ie:(Fe[++Le]=null,qe.push({i:Le,x:_o(te,ie)})),Te=hs.lastIndex;return Te<G.length&&(he=G.slice(Te),Fe[Le]?Fe[Le]+=he:Fe[++Le]=he),Fe.length<2?qe[0]?(G=qe[0].x,function(We){return G(We)+""}):function(){return G}:(G=qe.length,function(We){for(var nt,ft=0;ft<G;++ft)Fe[(nt=qe[ft]).i]=nt.x(We);return Fe.join("")})}n.geom.delaunay=function(I){return n.geom.voronoi().triangles(I)},n.geom.quadtree=function(I,G,te,ie,he){var Te,Le=Wn,Fe=Un;if(Te=arguments.length)return Le=so,Fe=aa,Te===3&&(he=te,ie=G,te=G=0),qe(I);function qe(We){var nt,ft,pt,wt,Ct,At,zt,It,Xt,Gt=Bn(Le),Vt=Bn(Fe);if(G!=null)At=G,zt=te,It=ie,Xt=he;else if(It=Xt=-(At=zt=1/0),ft=[],pt=[],Ct=We.length,Te)for(wt=0;wt<Ct;++wt)(nt=We[wt]).x<At&&(At=nt.x),nt.y<zt&&(zt=nt.y),nt.x>It&&(It=nt.x),nt.y>Xt&&(Xt=nt.y),ft.push(nt.x),pt.push(nt.y);else for(wt=0;wt<Ct;++wt){var pn=+Gt(nt=We[wt],wt),vn=+Vt(nt,wt);pn<At&&(At=pn),vn<zt&&(zt=vn),pn>It&&(It=pn),vn>Xt&&(Xt=vn),ft.push(pn),pt.push(vn)}var Sn=It-At,In=Xt-zt;function Vn(Gn,lr,xr,Er,er,sr,wr,fr){if(!isNaN(xr)&&!isNaN(Er))if(Gn.leaf){var Ar=Gn.x,Ir=Gn.y;if(Ar!=null)if(m(Ar-xr)+m(Ir-Er)<.01)nr(Gn,lr,xr,Er,er,sr,wr,fr);else{var Vr=Gn.point;Gn.x=Gn.y=Gn.point=null,nr(Gn,Vr,Ar,Ir,er,sr,wr,fr),nr(Gn,lr,xr,Er,er,sr,wr,fr)}else Gn.x=xr,Gn.y=Er,Gn.point=lr}else nr(Gn,lr,xr,Er,er,sr,wr,fr)}function nr(Gn,lr,xr,Er,er,sr,wr,fr){var Ar=.5*(er+wr),Ir=.5*(sr+fr),Vr=xr>=Ar,Ur=Er>=Ir,Wr=Ur<<1|Vr;Gn.leaf=!1,Vr?er=Ar:wr=Ar,Ur?sr=Ir:fr=Ir,Vn(Gn=Gn.nodes[Wr]||(Gn.nodes[Wr]={leaf:!0,nodes:[],point:null,x:null,y:null}),lr,xr,Er,er,sr,wr,fr)}Sn>In?Xt=zt+Sn:It=At+In;var cr={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(Gn){Vn(cr,Gn,+Gt(Gn,++wt),+Vt(Gn,wt),At,zt,It,Xt)}};if(cr.visit=function(Gn){ro(Gn,cr,At,zt,It,Xt)},cr.find=function(Gn){return function(lr,xr,Er,er,sr,wr,fr){var Ar,Ir=1/0;return function Vr(Ur,Wr,Kr,ki,qi){if(!(Wr>wr||Kr>fr||ki<er||qi<sr)){if(Do=Ur.point){var Do,fo=xr-Ur.x,To=Er-Ur.y,Oi=fo*fo+To*To;if(Oi<Ir){var ei=Math.sqrt(Ir=Oi);er=xr-ei,sr=Er-ei,wr=xr+ei,fr=Er+ei,Ar=Do}}for(var Bi=Ur.nodes,vi=.5*(Wr+ki),oi=.5*(Kr+qi),ji=(Er>=oi)<<1|xr>=vi,Gi=ji+4;ji<Gi;++ji)if(Ur=Bi[3&ji])switch(3&ji){case 0:Vr(Ur,Wr,Kr,vi,oi);break;case 1:Vr(Ur,vi,Kr,ki,oi);break;case 2:Vr(Ur,Wr,oi,vi,qi);break;case 3:Vr(Ur,vi,oi,ki,qi)}}}(lr,er,sr,wr,fr),Ar}(cr,Gn[0],Gn[1],At,zt,It,Xt)},wt=-1,G==null){for(;++wt<Ct;)Vn(cr,We[wt],ft[wt],pt[wt],At,zt,It,Xt);--wt}else We.forEach(cr.add);return ft=pt=We=nt=null,cr}return qe.x=function(We){return arguments.length?(Le=We,qe):Le},qe.y=function(We){return arguments.length?(Fe=We,qe):Fe},qe.extent=function(We){return arguments.length?(We==null?G=te=ie=he=null:(G=+We[0][0],te=+We[0][1],ie=+We[1][0],he=+We[1][1]),qe):G==null?null:[[G,te],[ie,he]]},qe.size=function(We){return arguments.length?(We==null?G=te=ie=he=null:(G=te=0,ie=+We[0],he=+We[1]),qe):G==null?null:[ie-G,he-te]},qe},n.interpolateRgb=Za,n.interpolateObject=fs,n.interpolateNumber=_o,n.interpolateString=Ra;var Fa=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hs=new RegExp(Fa.source,"g");function sa(I,G){for(var te,ie=n.interpolators.length;--ie>=0&&!(te=n.interpolators[ie](I,G)););return te}function ya(I,G){var te,ie=[],he=[],Te=I.length,Le=G.length,Fe=Math.min(I.length,G.length);for(te=0;te<Fe;++te)ie.push(sa(I[te],G[te]));for(;te<Te;++te)he[te]=I[te];for(;te<Le;++te)he[te]=G[te];return function(qe){for(te=0;te<Fe;++te)he[te]=ie[te](qe);return he}}n.interpolate=sa,n.interpolators=[function(I,G){var te=typeof G;return(te==="string"?Mn.has(G.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(G)?Za:Ra:G instanceof Ze?Za:Array.isArray(G)?ya:te==="object"&&isNaN(G)?fs:_o)(I,G)}],n.interpolateArray=ya;var xa=function(){return F},gi=n.map({linear:xa,poly:function(I){return function(G){return Math.pow(G,I)}},quad:function(){return ba},cubic:function(){return ds},sin:function(){return ps},exp:function(){return Ka},circle:function(){return gs},elastic:function(I,G){var te;return arguments.length<2&&(G=.45),arguments.length?te=G/Rt*Math.asin(1/I):(I=1,te=G/4),function(ie){return 1+I*Math.pow(2,-10*ie)*Math.sin((ie-te)*Rt/G)}},back:function(I){return I||(I=1.70158),function(G){return G*G*((I+1)*G-I)}},bounce:function(){return Ba}}),lo=n.map({in:F,out:Xa,"in-out":Na,"out-in":function(I){return Na(Xa(I))}});function Xa(I){return function(G){return 1-I(1-G)}}function Na(I){return function(G){return .5*(G<.5?I(2*G):2-I(2-2*G))}}function ba(I){return I*I}function ds(I){return I*I*I}function za(I){if(I<=0)return 0;if(I>=1)return 1;var G=I*I,te=G*I;return 4*(I<.5?te:3*(I-G)+te-.75)}function ps(I){return 1-Math.cos(I*Ye)}function Ka(I){return Math.pow(2,10*(I-1))}function gs(I){return 1-Math.sqrt(1-I*I)}function Ba(I){return I<.36363636363636365?7.5625*I*I:I<.7272727272727273?7.5625*(I-=.5454545454545454)*I+.75:I<.9090909090909091?7.5625*(I-=.8181818181818182)*I+.9375:7.5625*(I-=.9545454545454546)*I+.984375}function _u(I,G){return G-=I,function(te){return Math.round(I+G*te)}}function Xl(I){var G,te,ie,he=[I.a,I.b],Te=[I.c,I.d],Le=zu(he),Fe=Ls(he,Te),qe=zu(((G=Te)[0]+=(ie=-Fe)*(te=he)[0],G[1]+=ie*te[1],G))||0;he[0]*Te[1]<Te[0]*he[1]&&(he[0]*=-1,he[1]*=-1,Le*=-1,Fe*=-1),this.rotate=(Le?Math.atan2(he[1],he[0]):Math.atan2(-Te[0],Te[1]))*Ve,this.translate=[I.e,I.f],this.scale=[Le,qe],this.skew=qe?Math.atan2(Fe,qe)*Ve:0}function Ls(I,G){return I[0]*G[0]+I[1]*G[1]}function zu(I){var G=Math.sqrt(Ls(I,I));return G&&(I[0]/=G,I[1]/=G),G}n.ease=function(I){var G,te=I.indexOf("-"),ie=te>=0?I.slice(0,te):I,he=te>=0?I.slice(te+1):"in";return ie=gi.get(ie)||xa,he=lo.get(he)||F,G=he(ie.apply(null,T.call(arguments,1))),function(Te){return Te<=0?0:Te>=1?1:G(Te)}},n.interpolateHcl=function(I,G){I=n.hcl(I),G=n.hcl(G);var te=I.h,ie=I.c,he=I.l,Te=G.h-te,Le=G.c-ie,Fe=G.l-he;return isNaN(Le)&&(Le=0,ie=isNaN(ie)?G.c:ie),isNaN(Te)?(Te=0,te=isNaN(te)?G.h:te):Te>180?Te-=360:Te<-180&&(Te+=360),function(qe){return _t(te+Te*qe,ie+Le*qe,he+Fe*qe)+""}},n.interpolateHsl=function(I,G){I=n.hsl(I),G=n.hsl(G);var te=I.h,ie=I.s,he=I.l,Te=G.h-te,Le=G.s-ie,Fe=G.l-he;return isNaN(Le)&&(Le=0,ie=isNaN(ie)?G.s:ie),isNaN(Te)?(Te=0,te=isNaN(te)?G.h:te):Te>180?Te-=360:Te<-180&&(Te+=360),function(qe){return yt(te+Te*qe,ie+Le*qe,he+Fe*qe)+""}},n.interpolateLab=function(I,G){I=n.lab(I),G=n.lab(G);var te=I.l,ie=I.a,he=I.b,Te=G.l-te,Le=G.a-ie,Fe=G.b-he;return function(qe){return Ut(te+Te*qe,ie+Le*qe,he+Fe*qe)+""}},n.interpolateRound=_u,n.transform=function(I){var G=f.createElementNS(n.ns.prefix.svg,"g");return(n.transform=function(te){if(te!=null){G.setAttribute("transform",te);var ie=G.transform.baseVal.consolidate()}return new Xl(ie?ie.matrix:Bu)})(I)},Xl.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Bu={a:1,b:0,c:0,d:1,e:0,f:0};function Os(I){return I.length?I.pop()+",":""}function ju(I,G){var te=[],ie=[];return I=n.transform(I),G=n.transform(G),function(he,Te,Le,Fe){if(he[0]!==Te[0]||he[1]!==Te[1]){var qe=Le.push("translate(",null,",",null,")");Fe.push({i:qe-4,x:_o(he[0],Te[0])},{i:qe-2,x:_o(he[1],Te[1])})}else(Te[0]||Te[1])&&Le.push("translate("+Te+")")}(I.translate,G.translate,te,ie),function(he,Te,Le,Fe){he!==Te?(he-Te>180?Te+=360:Te-he>180&&(he+=360),Fe.push({i:Le.push(Os(Le)+"rotate(",null,")")-2,x:_o(he,Te)})):Te&&Le.push(Os(Le)+"rotate("+Te+")")}(I.rotate,G.rotate,te,ie),function(he,Te,Le,Fe){he!==Te?Fe.push({i:Le.push(Os(Le)+"skewX(",null,")")-2,x:_o(he,Te)}):Te&&Le.push(Os(Le)+"skewX("+Te+")")}(I.skew,G.skew,te,ie),function(he,Te,Le,Fe){if(he[0]!==Te[0]||he[1]!==Te[1]){var qe=Le.push(Os(Le)+"scale(",null,",",null,")");Fe.push({i:qe-4,x:_o(he[0],Te[0])},{i:qe-2,x:_o(he[1],Te[1])})}else Te[0]===1&&Te[1]===1||Le.push(Os(Le)+"scale("+Te+")")}(I.scale,G.scale,te,ie),I=G=null,function(he){for(var Te,Le=-1,Fe=ie.length;++Le<Fe;)te[(Te=ie[Le]).i]=Te.x(he);return te.join("")}}function cc(I,G){return G=(G-=I=+I)||1/G,function(te){return(te-I)/G}}function fc(I,G){return G=(G-=I=+I)||1/G,function(te){return Math.max(0,Math.min(1,(te-I)/G))}}function Ps(I){for(var G=I.source,te=I.target,ie=function(Le,Fe){if(Le===Fe)return Le;for(var qe=ja(Le),We=ja(Fe),nt=qe.pop(),ft=We.pop(),pt=null;nt===ft;)pt=nt,nt=qe.pop(),ft=We.pop();return pt}(G,te),he=[G];G!==ie;)G=G.parent,he.push(G);for(var Te=he.length;te!==ie;)he.splice(Te,0,te),te=te.parent;return he}function ja(I){for(var G=[],te=I.parent;te!=null;)G.push(I),I=te,te=te.parent;return G.push(I),G}function tl(I){I.fixed|=2}function Rs(I){I.fixed&=-7}function Al(I){I.fixed|=4,I.px=I.x,I.py=I.y}function Fs(I){I.fixed&=-5}function _a(I,G,te){var ie=0,he=0;if(I.charge=0,!I.leaf)for(var Te,Le=I.nodes,Fe=Le.length,qe=-1;++qe<Fe;)(Te=Le[qe])!=null&&(_a(Te,G,te),I.charge+=Te.charge,ie+=Te.charge*Te.cx,he+=Te.charge*Te.cy);if(I.point){I.leaf||(I.point.x+=Math.random()-.5,I.point.y+=Math.random()-.5);var We=G*te[I.point.index];I.charge+=I.pointCharge=We,ie+=We*I.point.x,he+=We*I.point.y}I.cx=ie/I.charge,I.cy=he/I.charge}n.interpolateTransform=ju,n.layout={},n.layout.bundle=function(){return function(I){for(var G=[],te=-1,ie=I.length;++te<ie;)G.push(Ps(I[te]));return G}},n.layout.chord=function(){var I,G,te,ie,he,Te,Le,Fe={},qe=0;function We(){var ft,pt,wt,Ct,At,zt={},It=[],Xt=n.range(ie),Gt=[];for(I=[],G=[],ft=0,Ct=-1;++Ct<ie;){for(pt=0,At=-1;++At<ie;)pt+=te[Ct][At];It.push(pt),Gt.push(n.range(ie)),ft+=pt}for(he&&Xt.sort(function(cr,Gn){return he(It[cr],It[Gn])}),Te&&Gt.forEach(function(cr,Gn){cr.sort(function(lr,xr){return Te(te[Gn][lr],te[Gn][xr])})}),ft=(Rt-qe*ie)/ft,pt=0,Ct=-1;++Ct<ie;){for(wt=pt,At=-1;++At<ie;){var Vt=Xt[Ct],pn=Gt[Vt][At],vn=te[Vt][pn],Sn=pt,In=pt+=vn*ft;zt[Vt+"-"+pn]={index:Vt,subindex:pn,startAngle:Sn,endAngle:In,value:vn}}G[Vt]={index:Vt,startAngle:wt,endAngle:pt,value:It[Vt]},pt+=qe}for(Ct=-1;++Ct<ie;)for(At=Ct-1;++At<ie;){var Vn=zt[Ct+"-"+At],nr=zt[At+"-"+Ct];(Vn.value||nr.value)&&I.push(Vn.value<nr.value?{source:nr,target:Vn}:{source:Vn,target:nr})}Le&&nt()}function nt(){I.sort(function(ft,pt){return Le((ft.source.value+ft.target.value)/2,(pt.source.value+pt.target.value)/2)})}return Fe.matrix=function(ft){return arguments.length?(ie=(te=ft)&&te.length,I=G=null,Fe):te},Fe.padding=function(ft){return arguments.length?(qe=ft,I=G=null,Fe):qe},Fe.sortGroups=function(ft){return arguments.length?(he=ft,I=G=null,Fe):he},Fe.sortSubgroups=function(ft){return arguments.length?(Te=ft,I=null,Fe):Te},Fe.sortChords=function(ft){return arguments.length?(Le=ft,I&&nt(),Fe):Le},Fe.chords=function(){return I||We(),I},Fe.groups=function(){return G||We(),G},Fe},n.layout.force=function(){var I,G,te,ie,he,Te,Le={},Fe=n.dispatch("start","tick","end"),qe=[1,1],We=.9,nt=wu,ft=ms,pt=-30,wt=Ja,Ct=.1,At=.64,zt=[],It=[];function Xt(Vt){return function(pn,vn,Sn,In){if(pn.point!==Vt){var Vn=pn.cx-Vt.x,nr=pn.cy-Vt.y,cr=In-vn,Gn=Vn*Vn+nr*nr;if(cr*cr/At<Gn){if(Gn<wt){var lr=pn.charge/Gn;Vt.px-=Vn*lr,Vt.py-=nr*lr}return!0}pn.point&&Gn&&Gn<wt&&(lr=pn.pointCharge/Gn,Vt.px-=Vn*lr,Vt.py-=nr*lr)}return!pn.charge}}function Gt(Vt){Vt.px=n.event.x,Vt.py=n.event.y,Le.resume()}return Le.tick=function(){if((te*=.99)<.005)return I=null,Fe.end({type:"end",alpha:te=0}),!0;var Vt,pn,vn,Sn,In,Vn,nr,cr,Gn,lr=zt.length,xr=It.length;for(pn=0;pn<xr;++pn)Sn=(vn=It[pn]).source,(Vn=(cr=(In=vn.target).x-Sn.x)*cr+(Gn=In.y-Sn.y)*Gn)&&(cr*=Vn=te*he[pn]*((Vn=Math.sqrt(Vn))-ie[pn])/Vn,Gn*=Vn,In.x-=cr*(nr=Sn.weight+In.weight?Sn.weight/(Sn.weight+In.weight):.5),In.y-=Gn*nr,Sn.x+=cr*(nr=1-nr),Sn.y+=Gn*nr);if((nr=te*Ct)&&(cr=qe[0]/2,Gn=qe[1]/2,pn=-1,nr))for(;++pn<lr;)(vn=zt[pn]).x+=(cr-vn.x)*nr,vn.y+=(Gn-vn.y)*nr;if(pt)for(_a(Vt=n.geom.quadtree(zt),te,Te),pn=-1;++pn<lr;)(vn=zt[pn]).fixed||Vt.visit(Xt(vn));for(pn=-1;++pn<lr;)(vn=zt[pn]).fixed?(vn.x=vn.px,vn.y=vn.py):(vn.x-=(vn.px-(vn.px=vn.x))*We,vn.y-=(vn.py-(vn.py=vn.y))*We);Fe.tick({type:"tick",alpha:te})},Le.nodes=function(Vt){return arguments.length?(zt=Vt,Le):zt},Le.links=function(Vt){return arguments.length?(It=Vt,Le):It},Le.size=function(Vt){return arguments.length?(qe=Vt,Le):qe},Le.linkDistance=function(Vt){return arguments.length?(nt=typeof Vt=="function"?Vt:+Vt,Le):nt},Le.distance=Le.linkDistance,Le.linkStrength=function(Vt){return arguments.length?(ft=typeof Vt=="function"?Vt:+Vt,Le):ft},Le.friction=function(Vt){return arguments.length?(We=+Vt,Le):We},Le.charge=function(Vt){return arguments.length?(pt=typeof Vt=="function"?Vt:+Vt,Le):pt},Le.chargeDistance=function(Vt){return arguments.length?(wt=Vt*Vt,Le):Math.sqrt(wt)},Le.gravity=function(Vt){return arguments.length?(Ct=+Vt,Le):Ct},Le.theta=function(Vt){return arguments.length?(At=Vt*Vt,Le):Math.sqrt(At)},Le.alpha=function(Vt){return arguments.length?(Vt=+Vt,te?Vt>0?te=Vt:(I.c=null,I.t=NaN,I=null,Fe.end({type:"end",alpha:te=0})):Vt>0&&(Fe.start({type:"start",alpha:te=Vt}),I=on(Le.tick)),Le):te},Le.start=function(){var Vt,pn,vn,Sn=zt.length,In=It.length,Vn=qe[0],nr=qe[1];for(Vt=0;Vt<Sn;++Vt)(vn=zt[Vt]).index=Vt,vn.weight=0;for(Vt=0;Vt<In;++Vt)typeof(vn=It[Vt]).source=="number"&&(vn.source=zt[vn.source]),typeof vn.target=="number"&&(vn.target=zt[vn.target]),++vn.source.weight,++vn.target.weight;for(Vt=0;Vt<Sn;++Vt)vn=zt[Vt],isNaN(vn.x)&&(vn.x=cr("x",Vn)),isNaN(vn.y)&&(vn.y=cr("y",nr)),isNaN(vn.px)&&(vn.px=vn.x),isNaN(vn.py)&&(vn.py=vn.y);if(ie=[],typeof nt=="function")for(Vt=0;Vt<In;++Vt)ie[Vt]=+nt.call(this,It[Vt],Vt);else for(Vt=0;Vt<In;++Vt)ie[Vt]=nt;if(he=[],typeof ft=="function")for(Vt=0;Vt<In;++Vt)he[Vt]=+ft.call(this,It[Vt],Vt);else for(Vt=0;Vt<In;++Vt)he[Vt]=ft;if(Te=[],typeof pt=="function")for(Vt=0;Vt<Sn;++Vt)Te[Vt]=+pt.call(this,zt[Vt],Vt);else for(Vt=0;Vt<Sn;++Vt)Te[Vt]=pt;function cr(Gn,lr){if(!pn){for(pn=new Array(Sn),sr=0;sr<Sn;++sr)pn[sr]=[];for(sr=0;sr<In;++sr){var xr=It[sr];pn[xr.source.index].push(xr.target),pn[xr.target.index].push(xr.source)}}for(var Er,er=pn[Vt],sr=-1,wr=er.length;++sr<wr;)if(!isNaN(Er=er[sr][Gn]))return Er;return Math.random()*lr}return Le.resume()},Le.resume=function(){return Le.alpha(.1)},Le.stop=function(){return Le.alpha(0)},Le.drag=function(){if(G||(G=n.behavior.drag().origin(F).on("dragstart.force",tl).on("drag.force",Gt).on("dragend.force",Rs)),!arguments.length)return G;this.on("mouseover.force",Al).on("mouseout.force",Fs).call(G)},n.rebind(Le,Fe,"on")};var wu=20,ms=1,Ja=1/0;function Qa(I,G){return n.rebind(I,G,"sort","children","value"),I.nodes=I,I.links=rl,I}function vs(I,G){for(var te=[I];(I=te.pop())!=null;)if(G(I),(he=I.children)&&(ie=he.length))for(var ie,he;--ie>=0;)te.push(he[ie])}function $r(I,G){for(var te=[I],ie=[];(I=te.pop())!=null;)if(ie.push(I),(Te=I.children)&&(he=Te.length))for(var he,Te,Le=-1;++Le<he;)te.push(Te[Le]);for(;(I=ie.pop())!=null;)G(I)}function nl(I){return I.children}function hc(I){return I.value}function Kl(I,G){return G.value-I.value}function rl(I){return n.merge(I.map(function(G){return(G.children||[]).map(function(te){return{source:G,target:te}})}))}n.layout.hierarchy=function(){var I=Kl,G=nl,te=hc;function ie(he){var Te,Le=[he],Fe=[];for(he.depth=0;(Te=Le.pop())!=null;)if(Fe.push(Te),(We=G.call(ie,Te,Te.depth))&&(qe=We.length)){for(var qe,We,nt;--qe>=0;)Le.push(nt=We[qe]),nt.parent=Te,nt.depth=Te.depth+1;te&&(Te.value=0),Te.children=We}else te&&(Te.value=+te.call(ie,Te,Te.depth)||0),delete Te.children;return $r(he,function(ft){var pt,wt;I&&(pt=ft.children)&&pt.sort(I),te&&(wt=ft.parent)&&(wt.value+=ft.value)}),Fe}return ie.sort=function(he){return arguments.length?(I=he,ie):I},ie.children=function(he){return arguments.length?(G=he,ie):G},ie.value=function(he){return arguments.length?(te=he,ie):te},ie.revalue=function(he){return te&&(vs(he,function(Te){Te.children&&(Te.value=0)}),$r(he,function(Te){var Le;Te.children||(Te.value=+te.call(ie,Te,Te.depth)||0),(Le=Te.parent)&&(Le.value+=Te.value)})),he},ie},n.layout.partition=function(){var I=n.layout.hierarchy(),G=[1,1];function te(Te,Le,Fe,qe){var We=Te.children;if(Te.x=Le,Te.y=Te.depth*qe,Te.dx=Fe,Te.dy=qe,We&&(nt=We.length)){var nt,ft,pt,wt=-1;for(Fe=Te.value?Fe/Te.value:0;++wt<nt;)te(ft=We[wt],Le,pt=ft.value*Fe,qe),Le+=pt}}function ie(Te){var Le=Te.children,Fe=0;if(Le&&(qe=Le.length))for(var qe,We=-1;++We<qe;)Fe=Math.max(Fe,ie(Le[We]));return 1+Fe}function he(Te,Le){var Fe=I.call(this,Te,Le);return te(Fe[0],0,G[0],G[1]/ie(Fe[0])),Fe}return he.size=function(Te){return arguments.length?(G=Te,he):G},Qa(he,I)},n.layout.pie=function(){var I=Number,G=Vu,te=0,ie=Rt,he=0;function Te(Le){var Fe,qe=Le.length,We=Le.map(function(Xt,Gt){return+I.call(Te,Xt,Gt)}),nt=+(typeof te=="function"?te.apply(this,arguments):te),ft=(typeof ie=="function"?ie.apply(this,arguments):ie)-nt,pt=Math.min(Math.abs(ft)/qe,+(typeof he=="function"?he.apply(this,arguments):he)),wt=pt*(ft<0?-1:1),Ct=n.sum(We),At=Ct?(ft-qe*wt)/Ct:0,zt=n.range(qe),It=[];return G!=null&&zt.sort(G===Vu?function(Xt,Gt){return We[Gt]-We[Xt]}:function(Xt,Gt){return G(Le[Xt],Le[Gt])}),zt.forEach(function(Xt){It[Xt]={data:Le[Xt],value:Fe=We[Xt],startAngle:nt,endAngle:nt+=Fe*At+wt,padAngle:pt}}),It}return Te.value=function(Le){return arguments.length?(I=Le,Te):I},Te.sort=function(Le){return arguments.length?(G=Le,Te):G},Te.startAngle=function(Le){return arguments.length?(te=Le,Te):te},Te.endAngle=function(Le){return arguments.length?(ie=Le,Te):ie},Te.padAngle=function(Le){return arguments.length?(he=Le,Te):he},Te};var Vu={};function dc(I){return I.x}function Jl(I){return I.y}function pc(I,G,te){I.y0=G,I.y=te}n.layout.stack=function(){var I=F,G=es,te=wa,ie=pc,he=dc,Te=Jl;function Le(Fe,qe){if(!(pt=Fe.length))return Fe;var We=Fe.map(function(Xt,Gt){return I.call(Le,Xt,Gt)}),nt=We.map(function(Xt){return Xt.map(function(Gt,Vt){return[he.call(Le,Gt,Vt),Te.call(Le,Gt,Vt)]})}),ft=G.call(Le,nt,qe);We=n.permute(We,ft),nt=n.permute(nt,ft);var pt,wt,Ct,At,zt=te.call(Le,nt,qe),It=We[0].length;for(Ct=0;Ct<It;++Ct)for(ie.call(Le,We[0][Ct],At=zt[Ct],nt[0][Ct][1]),wt=1;wt<pt;++wt)ie.call(Le,We[wt][Ct],At+=nt[wt-1][Ct][1],nt[wt][Ct][1]);return Fe}return Le.values=function(Fe){return arguments.length?(I=Fe,Le):I},Le.order=function(Fe){return arguments.length?(G=typeof Fe=="function"?Fe:ys.get(Fe)||es,Le):G},Le.offset=function(Fe){return arguments.length?(te=typeof Fe=="function"?Fe:Ns.get(Fe)||wa,Le):te},Le.x=function(Fe){return arguments.length?(he=Fe,Le):he},Le.y=function(Fe){return arguments.length?(Te=Fe,Le):Te},Le.out=function(Fe){return arguments.length?(ie=Fe,Le):ie},Le};var ys=n.map({"inside-out":function(I){var G,te,ie=I.length,he=I.map(il),Te=I.map(Uu),Le=n.range(ie).sort(function(ft,pt){return he[ft]-he[pt]}),Fe=0,qe=0,We=[],nt=[];for(G=0;G<ie;++G)te=Le[G],Fe<qe?(Fe+=Te[te],We.push(te)):(qe+=Te[te],nt.push(te));return nt.reverse().concat(We)},reverse:function(I){return n.range(I.length).reverse()},default:es}),Ns=n.map({silhouette:function(I){var G,te,ie,he=I.length,Te=I[0].length,Le=[],Fe=0,qe=[];for(te=0;te<Te;++te){for(G=0,ie=0;G<he;G++)ie+=I[G][te][1];ie>Fe&&(Fe=ie),Le.push(ie)}for(te=0;te<Te;++te)qe[te]=(Fe-Le[te])/2;return qe},wiggle:function(I){var G,te,ie,he,Te,Le,Fe,qe,We,nt=I.length,ft=I[0],pt=ft.length,wt=[];for(wt[0]=qe=We=0,te=1;te<pt;++te){for(G=0,he=0;G<nt;++G)he+=I[G][te][1];for(G=0,Te=0,Fe=ft[te][0]-ft[te-1][0];G<nt;++G){for(ie=0,Le=(I[G][te][1]-I[G][te-1][1])/(2*Fe);ie<G;++ie)Le+=(I[ie][te][1]-I[ie][te-1][1])/Fe;Te+=Le*I[G][te][1]}wt[te]=qe-=he?Te/he*Fe:0,qe<We&&(We=qe)}for(te=0;te<pt;++te)wt[te]-=We;return wt},expand:function(I){var G,te,ie,he=I.length,Te=I[0].length,Le=1/he,Fe=[];for(te=0;te<Te;++te){for(G=0,ie=0;G<he;G++)ie+=I[G][te][1];if(ie)for(G=0;G<he;G++)I[G][te][1]/=ie;else for(G=0;G<he;G++)I[G][te][1]=Le}for(te=0;te<Te;++te)Fe[te]=0;return Fe},zero:wa});function es(I){return n.range(I.length)}function wa(I){for(var G=-1,te=I[0].length,ie=[];++G<te;)ie[G]=0;return ie}function il(I){for(var G,te=1,ie=0,he=I[0][1],Te=I.length;te<Te;++te)(G=I[te][1])>he&&(ie=te,he=G);return ie}function Uu(I){return I.reduce(kl,0)}function kl(I,G){return I+G[1]}function Ql(I,G){return Xo(I,Math.ceil(Math.log(G.length)/Math.LN2+1))}function Xo(I,G){for(var te=-1,ie=+I[0],he=(I[1]-ie)/G,Te=[];++te<=G;)Te[te]=he*te+ie;return Te}function eu(I){return[n.min(I),n.max(I)]}function Hu(I,G){return I.value-G.value}function ol(I,G){var te=I._pack_next;I._pack_next=G,G._pack_prev=I,G._pack_next=te,te._pack_prev=G}function zs(I,G){I._pack_next=G,G._pack_prev=I}function al(I,G){var te=G.x-I.x,ie=G.y-I.y,he=I.r+G.r;return .999*he*he>te*te+ie*ie}function Bs(I){if((G=I.children)&&(qe=G.length)){var G,te,ie,he,Te,Le,Fe,qe,We=1/0,nt=-1/0,ft=1/0,pt=-1/0;if(G.forEach(js),(te=G[0]).x=-te.r,te.y=0,Gt(te),qe>1&&((ie=G[1]).x=ie.r,ie.y=0,Gt(ie),qe>2))for(fi(te,ie,he=G[2]),Gt(he),ol(te,he),te._pack_prev=he,ol(he,ie),ie=te._pack_next,Te=3;Te<qe;Te++){fi(te,ie,he=G[Te]);var wt=0,Ct=1,At=1;for(Le=ie._pack_next;Le!==ie;Le=Le._pack_next,Ct++)if(al(Le,he)){wt=1;break}if(wt==1)for(Fe=te._pack_prev;Fe!==Le._pack_prev&&!al(Fe,he);Fe=Fe._pack_prev,At++);wt?(Ct<At||Ct==At&&ie.r<te.r?zs(te,ie=Le):zs(te=Fe,ie),Te--):(ol(te,he),ie=he,Gt(he))}var zt=(We+nt)/2,It=(ft+pt)/2,Xt=0;for(Te=0;Te<qe;Te++)(he=G[Te]).x-=zt,he.y-=It,Xt=Math.max(Xt,he.r+Math.sqrt(he.x*he.x+he.y*he.y));I.r=Xt,G.forEach(Sl)}function Gt(Vt){We=Math.min(Vt.x-Vt.r,We),nt=Math.max(Vt.x+Vt.r,nt),ft=Math.min(Vt.y-Vt.r,ft),pt=Math.max(Vt.y+Vt.r,pt)}}function js(I){I._pack_next=I._pack_prev=I}function Sl(I){delete I._pack_next,delete I._pack_prev}function tu(I,G,te,ie){var he=I.children;if(I.x=G+=ie*I.x,I.y=te+=ie*I.y,I.r*=ie,he)for(var Te=-1,Le=he.length;++Te<Le;)tu(he[Te],G,te,ie)}function fi(I,G,te){var ie=I.r+te.r,he=G.x-I.x,Te=G.y-I.y;if(ie&&(he||Te)){var Le=G.r+te.r,Fe=he*he+Te*Te,qe=.5+((ie*=ie)-(Le*=Le))/(2*Fe),We=Math.sqrt(Math.max(0,2*Le*(ie+Fe)-(ie-=Fe)*ie-Le*Le))/(2*Fe);te.x=I.x+qe*he+We*Te,te.y=I.y+qe*Te-We*he}else te.x=I.x+ie,te.y=I.y}function xs(I,G){return I.parent==G.parent?1:2}function wo(I){var G=I.children;return G.length?G[0]:I.t}function Ta(I){var G,te=I.children;return(G=te.length)?te[G-1]:I.t}function ni(I,G,te){var ie=te/(G.i-I.i);G.c-=ie,G.s+=te,I.c+=ie,G.z+=te,G.m+=te}function ui(I,G,te){return I.a.parent===G.parent?I.a:te}function Ko(I){var G=I.children;return G&&G.length?Ko(G[0]):I}function sl(I){var G,te=I.children;return te&&(G=te.length)?sl(te[G-1]):I}function El(I){return{x:I.x,y:I.y,dx:I.dx,dy:I.dy}}function nu(I,G){var te=I.x+G[3],ie=I.y+G[0],he=I.dx-G[1]-G[3],Te=I.dy-G[0]-G[2];return he<0&&(te+=he/2,he=0),Te<0&&(ie+=Te/2,Te=0),{x:te,y:ie,dx:he,dy:Te}}function Cl(I){var G=I[0],te=I[I.length-1];return G<te?[G,te]:[te,G]}function Dl(I){return I.rangeExtent?I.rangeExtent():Cl(I.range())}function la(I,G,te,ie){var he=te(I[0],I[1]),Te=ie(G[0],G[1]);return function(Le){return Te(he(Le))}}function bs(I,G){var te,ie=0,he=I.length-1,Te=I[ie],Le=I[he];return Le<Te&&(te=ie,ie=he,he=te,te=Te,Te=Le,Le=te),I[ie]=G.floor(Te),I[he]=G.ceil(Le),I}function _s(I){return I?{floor:function(G){return Math.floor(G/I)*I},ceil:function(G){return Math.ceil(G/I)*I}}:Eo}n.layout.histogram=function(){var I=!0,G=Number,te=eu,ie=Ql;function he(Te,Le){for(var Fe,qe,We=[],nt=Te.map(G,this),ft=te.call(this,nt,Le),pt=ie.call(this,ft,nt,Le),wt=(Le=-1,nt.length),Ct=pt.length-1,At=I?1:1/wt;++Le<Ct;)(Fe=We[Le]=[]).dx=pt[Le+1]-(Fe.x=pt[Le]),Fe.y=0;if(Ct>0)for(Le=-1;++Le<wt;)(qe=nt[Le])>=ft[0]&&qe<=ft[1]&&((Fe=We[n.bisect(pt,qe,1,Ct)-1]).y+=At,Fe.push(Te[Le]));return We}return he.value=function(Te){return arguments.length?(G=Te,he):G},he.range=function(Te){return arguments.length?(te=Bn(Te),he):te},he.bins=function(Te){return arguments.length?(ie=typeof Te=="number"?function(Le){return Xo(Le,Te)}:Bn(Te),he):ie},he.frequency=function(Te){return arguments.length?(I=!!Te,he):I},he},n.layout.pack=function(){var I,G=n.layout.hierarchy().sort(Hu),te=0,ie=[1,1];function he(Te,Le){var Fe=G.call(this,Te,Le),qe=Fe[0],We=ie[0],nt=ie[1],ft=I==null?Math.sqrt:typeof I=="function"?I:function(){return I};if(qe.x=qe.y=0,$r(qe,function(wt){wt.r=+ft(wt.value)}),$r(qe,Bs),te){var pt=te*(I?1:Math.max(2*qe.r/We,2*qe.r/nt))/2;$r(qe,function(wt){wt.r+=pt}),$r(qe,Bs),$r(qe,function(wt){wt.r-=pt})}return tu(qe,We/2,nt/2,I?1:1/Math.max(2*qe.r/We,2*qe.r/nt)),Fe}return he.size=function(Te){return arguments.length?(ie=Te,he):ie},he.radius=function(Te){return arguments.length?(I=Te==null||typeof Te=="function"?Te:+Te,he):I},he.padding=function(Te){return arguments.length?(te=+Te,he):te},Qa(he,G)},n.layout.tree=function(){var I=n.layout.hierarchy().sort(null).value(null),G=xs,te=[1,1],ie=null;function he(qe,We){var nt=I.call(this,qe,We),ft=nt[0],pt=function(Gt){for(var Vt,pn={A:null,children:[Gt]},vn=[pn];(Vt=vn.pop())!=null;)for(var Sn,In=Vt.children,Vn=0,nr=In.length;Vn<nr;++Vn)vn.push((In[Vn]=Sn={_:In[Vn],parent:Vt,children:(Sn=In[Vn].children)&&Sn.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Vn}).a=Sn);return pn.children[0]}(ft);if($r(pt,Te),pt.parent.m=-pt.z,vs(pt,Le),ie)vs(ft,Fe);else{var wt=ft,Ct=ft,At=ft;vs(ft,function(Gt){Gt.x<wt.x&&(wt=Gt),Gt.x>Ct.x&&(Ct=Gt),Gt.depth>At.depth&&(At=Gt)});var zt=G(wt,Ct)/2-wt.x,It=te[0]/(Ct.x+G(Ct,wt)/2+zt),Xt=te[1]/(At.depth||1);vs(ft,function(Gt){Gt.x=(Gt.x+zt)*It,Gt.y=Gt.depth*Xt})}return nt}function Te(qe){var We=qe.children,nt=qe.parent.children,ft=qe.i?nt[qe.i-1]:null;if(We.length){(function(wt){for(var Ct,At=0,zt=0,It=wt.children,Xt=It.length;--Xt>=0;)(Ct=It[Xt]).z+=At,Ct.m+=At,At+=Ct.s+(zt+=Ct.c)})(qe);var pt=(We[0].z+We[We.length-1].z)/2;ft?(qe.z=ft.z+G(qe._,ft._),qe.m=qe.z-pt):qe.z=pt}else ft&&(qe.z=ft.z+G(qe._,ft._));qe.parent.A=function(wt,Ct,At){if(Ct){for(var zt,It=wt,Xt=wt,Gt=Ct,Vt=It.parent.children[0],pn=It.m,vn=Xt.m,Sn=Gt.m,In=Vt.m;Gt=Ta(Gt),It=wo(It),Gt&&It;)Vt=wo(Vt),(Xt=Ta(Xt)).a=wt,(zt=Gt.z+Sn-It.z-pn+G(Gt._,It._))>0&&(ni(ui(Gt,wt,At),wt,zt),pn+=zt,vn+=zt),Sn+=Gt.m,pn+=It.m,In+=Vt.m,vn+=Xt.m;Gt&&!Ta(Xt)&&(Xt.t=Gt,Xt.m+=Sn-vn),It&&!wo(Vt)&&(Vt.t=It,Vt.m+=pn-In,At=wt)}return At}(qe,ft,qe.parent.A||nt[0])}function Le(qe){qe._.x=qe.z+qe.parent.m,qe.m+=qe.parent.m}function Fe(qe){qe.x*=te[0],qe.y=qe.depth*te[1]}return he.separation=function(qe){return arguments.length?(G=qe,he):G},he.size=function(qe){return arguments.length?(ie=(te=qe)==null?Fe:null,he):ie?null:te},he.nodeSize=function(qe){return arguments.length?(ie=(te=qe)==null?null:Fe,he):ie?te:null},Qa(he,I)},n.layout.cluster=function(){var I=n.layout.hierarchy().sort(null).value(null),G=xs,te=[1,1],ie=!1;function he(Te,Le){var Fe,qe=I.call(this,Te,Le),We=qe[0],nt=0;$r(We,function(At){var zt=At.children;zt&&zt.length?(At.x=function(It){return It.reduce(function(Xt,Gt){return Xt+Gt.x},0)/It.length}(zt),At.y=function(It){return 1+n.max(It,function(Xt){return Xt.y})}(zt)):(At.x=Fe?nt+=G(At,Fe):0,At.y=0,Fe=At)});var ft=Ko(We),pt=sl(We),wt=ft.x-G(ft,pt)/2,Ct=pt.x+G(pt,ft)/2;return $r(We,ie?function(At){At.x=(At.x-We.x)*te[0],At.y=(We.y-At.y)*te[1]}:function(At){At.x=(At.x-wt)/(Ct-wt)*te[0],At.y=(1-(We.y?At.y/We.y:1))*te[1]}),qe}return he.separation=function(Te){return arguments.length?(G=Te,he):G},he.size=function(Te){return arguments.length?(ie=(te=Te)==null,he):ie?null:te},he.nodeSize=function(Te){return arguments.length?(ie=(te=Te)!=null,he):ie?te:null},Qa(he,I)},n.layout.treemap=function(){var I,G=n.layout.hierarchy(),te=Math.round,ie=[1,1],he=null,Te=El,Le=!1,Fe="squarify",qe=.5*(1+Math.sqrt(5));function We(At,zt){for(var It,Xt,Gt=-1,Vt=At.length;++Gt<Vt;)Xt=(It=At[Gt]).value*(zt<0?0:zt),It.area=isNaN(Xt)||Xt<=0?0:Xt}function nt(At){var zt=At.children;if(zt&&zt.length){var It,Xt,Gt,Vt=Te(At),pn=[],vn=zt.slice(),Sn=1/0,In=Fe==="slice"?Vt.dx:Fe==="dice"?Vt.dy:Fe==="slice-dice"?1&At.depth?Vt.dy:Vt.dx:Math.min(Vt.dx,Vt.dy);for(We(vn,Vt.dx*Vt.dy/At.value),pn.area=0;(Gt=vn.length)>0;)pn.push(It=vn[Gt-1]),pn.area+=It.area,Fe!=="squarify"||(Xt=pt(pn,In))<=Sn?(vn.pop(),Sn=Xt):(pn.area-=pn.pop().area,wt(pn,In,Vt,!1),In=Math.min(Vt.dx,Vt.dy),pn.length=pn.area=0,Sn=1/0);pn.length&&(wt(pn,In,Vt,!0),pn.length=pn.area=0),zt.forEach(nt)}}function ft(At){var zt=At.children;if(zt&&zt.length){var It,Xt=Te(At),Gt=zt.slice(),Vt=[];for(We(Gt,Xt.dx*Xt.dy/At.value),Vt.area=0;It=Gt.pop();)Vt.push(It),Vt.area+=It.area,It.z!=null&&(wt(Vt,It.z?Xt.dx:Xt.dy,Xt,!Gt.length),Vt.length=Vt.area=0);zt.forEach(ft)}}function pt(At,zt){for(var It,Xt=At.area,Gt=0,Vt=1/0,pn=-1,vn=At.length;++pn<vn;)(It=At[pn].area)&&(It<Vt&&(Vt=It),It>Gt&&(Gt=It));return zt*=zt,(Xt*=Xt)?Math.max(zt*Gt*qe/Xt,Xt/(zt*Vt*qe)):1/0}function wt(At,zt,It,Xt){var Gt,Vt=-1,pn=At.length,vn=It.x,Sn=It.y,In=zt?te(At.area/zt):0;if(zt==It.dx){for((Xt||In>It.dy)&&(In=It.dy);++Vt<pn;)(Gt=At[Vt]).x=vn,Gt.y=Sn,Gt.dy=In,vn+=Gt.dx=Math.min(It.x+It.dx-vn,In?te(Gt.area/In):0);Gt.z=!0,Gt.dx+=It.x+It.dx-vn,It.y+=In,It.dy-=In}else{for((Xt||In>It.dx)&&(In=It.dx);++Vt<pn;)(Gt=At[Vt]).x=vn,Gt.y=Sn,Gt.dx=In,Sn+=Gt.dy=Math.min(It.y+It.dy-Sn,In?te(Gt.area/In):0);Gt.z=!1,Gt.dy+=It.y+It.dy-Sn,It.x+=In,It.dx-=In}}function Ct(At){var zt=I||G(At),It=zt[0];return It.x=It.y=0,It.value?(It.dx=ie[0],It.dy=ie[1]):It.dx=It.dy=0,I&&G.revalue(It),We([It],It.dx*It.dy/It.value),(I?ft:nt)(It),Le&&(I=zt),zt}return Ct.size=function(At){return arguments.length?(ie=At,Ct):ie},Ct.padding=function(At){if(!arguments.length)return he;function zt(Xt){return nu(Xt,At)}var It;return Te=(he=At)==null?El:(It=typeof At)=="function"?function(Xt){var Gt=At.call(Ct,Xt,Xt.depth);return Gt==null?El(Xt):nu(Xt,typeof Gt=="number"?[Gt,Gt,Gt,Gt]:Gt)}:(It==="number"&&(At=[At,At,At,At]),zt),Ct},Ct.round=function(At){return arguments.length?(te=At?Math.round:Number,Ct):te!=Number},Ct.sticky=function(At){return arguments.length?(Le=At,I=null,Ct):Le},Ct.ratio=function(At){return arguments.length?(qe=At,Ct):qe},Ct.mode=function(At){return arguments.length?(Fe=At+"",Ct):Fe},Qa(Ct,G)},n.random={normal:function(I,G){var te=arguments.length;return te<2&&(G=1),te<1&&(I=0),function(){var ie,he,Te;do Te=(ie=2*Math.random()-1)*ie+(he=2*Math.random()-1)*he;while(!Te||Te>1);return I+G*ie*Math.sqrt(-2*Math.log(Te)/Te)}},logNormal:function(){var I=n.random.normal.apply(n,arguments);return function(){return Math.exp(I())}},bates:function(I){var G=n.random.irwinHall(I);return function(){return G()/I}},irwinHall:function(I){return function(){for(var G=0,te=0;te<I;te++)G+=Math.random();return G}}},n.scale={};var Eo={floor:F,ceil:F};function Il(I,G,te,ie){var he=[],Te=[],Le=0,Fe=Math.min(I.length,G.length)-1;for(I[Fe]<I[0]&&(I=I.slice().reverse(),G=G.slice().reverse());++Le<=Fe;)he.push(te(I[Le-1],I[Le])),Te.push(ie(G[Le-1],G[Le]));return function(qe){var We=n.bisect(I,qe,1,Fe)-1;return Te[We](he[We](qe))}}function ua(I,G,te,ie){var he,Te;function Le(){var qe=Math.min(I.length,G.length)>2?Il:la,We=ie?fc:cc;return he=qe(I,G,We,te),Te=qe(G,I,We,sa),Fe}function Fe(qe){return he(qe)}return Fe.invert=function(qe){return Te(qe)},Fe.domain=function(qe){return arguments.length?(I=qe.map(Number),Le()):I},Fe.range=function(qe){return arguments.length?(G=qe,Le()):G},Fe.rangeRound=function(qe){return Fe.range(qe).interpolate(_u)},Fe.clamp=function(qe){return arguments.length?(ie=qe,Le()):ie},Fe.interpolate=function(qe){return arguments.length?(te=qe,Le()):te},Fe.ticks=function(qe){return mo(I,qe)},Fe.tickFormat=function(qe,We){return d3_scale_linearTickFormat(I,qe,We)},Fe.nice=function(qe){return go(I,qe),Le()},Fe.copy=function(){return ua(I,G,te,ie)},Le()}function uo(I,G){return n.rebind(I,G,"range","rangeRound","interpolate","clamp")}function go(I,G){return bs(I,_s(_i(I,G)[2])),bs(I,_s(_i(I,G)[2])),I}function _i(I,G){G==null&&(G=10);var te=Cl(I),ie=te[1]-te[0],he=Math.pow(10,Math.floor(Math.log(ie/G)/Math.LN10)),Te=G/ie*he;return Te<=.15?he*=10:Te<=.35?he*=5:Te<=.75&&(he*=2),te[0]=Math.ceil(te[0]/he)*he,te[1]=Math.floor(te[1]/he)*he+.5*he,te[2]=he,te}function mo(I,G){return n.range.apply(n,_i(I,G))}function Va(I,G,te,ie){function he(Fe){return(te?Math.log(Fe<0?0:Fe):-Math.log(Fe>0?0:-Fe))/Math.log(G)}function Te(Fe){return te?Math.pow(G,Fe):-Math.pow(G,-Fe)}function Le(Fe){return I(he(Fe))}return Le.invert=function(Fe){return Te(I.invert(Fe))},Le.domain=function(Fe){return arguments.length?(te=Fe[0]>=0,I.domain((ie=Fe.map(Number)).map(he)),Le):ie},Le.base=function(Fe){return arguments.length?(G=+Fe,I.domain(ie.map(he)),Le):G},Le.nice=function(){var Fe=bs(ie.map(he),te?Math:Vs);return I.domain(Fe),ie=Fe.map(Te),Le},Le.ticks=function(){var Fe=Cl(ie),qe=[],We=Fe[0],nt=Fe[1],ft=Math.floor(he(We)),pt=Math.ceil(he(nt)),wt=G%1?2:G;if(isFinite(pt-ft)){if(te){for(;ft<pt;ft++)for(var Ct=1;Ct<wt;Ct++)qe.push(Te(ft)*Ct);qe.push(Te(ft))}else for(qe.push(Te(ft));ft++<pt;)for(Ct=wt-1;Ct>0;Ct--)qe.push(Te(ft)*Ct);for(ft=0;qe[ft]<We;ft++);for(pt=qe.length;qe[pt-1]>nt;pt--);qe=qe.slice(ft,pt)}return qe},Le.copy=function(){return Va(I.copy(),G,te,ie)},uo(Le,I)}n.scale.linear=function(){return ua([0,1],[0,1],sa,!1)},n.scale.log=function(){return Va(n.scale.linear().domain([0,1]),10,!0,[1,10])};var Vs={floor:function(I){return-Math.ceil(-I)},ceil:function(I){return-Math.floor(-I)}};function Ma(I,G,te){var ie=ws(G),he=ws(1/G);function Te(Le){return I(ie(Le))}return Te.invert=function(Le){return he(I.invert(Le))},Te.domain=function(Le){return arguments.length?(I.domain((te=Le.map(Number)).map(ie)),Te):te},Te.ticks=function(Le){return mo(te,Le)},Te.tickFormat=function(Le,Fe){return d3_scale_linearTickFormat(te,Le,Fe)},Te.nice=function(Le){return Te.domain(go(te,Le))},Te.exponent=function(Le){return arguments.length?(ie=ws(G=Le),he=ws(1/G),I.domain(te.map(ie)),Te):G},Te.copy=function(){return Ma(I.copy(),G,te)},uo(Te,I)}function ws(I){return function(G){return G<0?-Math.pow(-G,I):Math.pow(G,I)}}function Po(I,G){var te,ie,he;function Te(Fe){return ie[((te.get(Fe)||(G.t==="range"?te.set(Fe,I.push(Fe)):NaN))-1)%ie.length]}function Le(Fe,qe){return n.range(I.length).map(function(We){return Fe+qe*We})}return Te.domain=function(Fe){if(!arguments.length)return I;I=[],te=new y;for(var qe,We=-1,nt=Fe.length;++We<nt;)te.has(qe=Fe[We])||te.set(qe,I.push(qe));return Te[G.t].apply(Te,G.a)},Te.range=function(Fe){return arguments.length?(ie=Fe,he=0,G={t:"range",a:arguments},Te):ie},Te.rangePoints=function(Fe,qe){arguments.length<2&&(qe=0);var We=Fe[0],nt=Fe[1],ft=I.length<2?(We=(We+nt)/2,0):(nt-We)/(I.length-1+qe);return ie=Le(We+ft*qe/2,ft),he=0,G={t:"rangePoints",a:arguments},Te},Te.rangeRoundPoints=function(Fe,qe){arguments.length<2&&(qe=0);var We=Fe[0],nt=Fe[1],ft=I.length<2?(We=nt=Math.round((We+nt)/2),0):(nt-We)/(I.length-1+qe)|0;return ie=Le(We+Math.round(ft*qe/2+(nt-We-(I.length-1+qe)*ft)/2),ft),he=0,G={t:"rangeRoundPoints",a:arguments},Te},Te.rangeBands=function(Fe,qe,We){arguments.length<2&&(qe=0),arguments.length<3&&(We=qe);var nt=Fe[1]<Fe[0],ft=Fe[nt-0],pt=(Fe[1-nt]-ft)/(I.length-qe+2*We);return ie=Le(ft+pt*We,pt),nt&&ie.reverse(),he=pt*(1-qe),G={t:"rangeBands",a:arguments},Te},Te.rangeRoundBands=function(Fe,qe,We){arguments.length<2&&(qe=0),arguments.length<3&&(We=qe);var nt=Fe[1]<Fe[0],ft=Fe[nt-0],pt=Fe[1-nt],wt=Math.floor((pt-ft)/(I.length-qe+2*We));return ie=Le(ft+Math.round((pt-ft-(I.length-qe)*wt)/2),wt),nt&&ie.reverse(),he=Math.round(wt*(1-qe)),G={t:"rangeRoundBands",a:arguments},Te},Te.rangeBand=function(){return he},Te.rangeExtent=function(){return Cl(G.a[0])},Te.copy=function(){return Po(I,G)},Te.domain(I)}n.scale.pow=function(){return Ma(n.scale.linear(),1,[0,1])},n.scale.sqrt=function(){return n.scale.pow().exponent(.5)},n.scale.ordinal=function(){return Po([],{t:"range",a:[[]]})},n.scale.category10=function(){return n.scale.ordinal().range(Us)},n.scale.category20=function(){return n.scale.ordinal().range(ts)},n.scale.category20b=function(){return n.scale.ordinal().range(ca)},n.scale.category20c=function(){return n.scale.ordinal().range(fa)};var Us=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Jt),ts=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Jt),ca=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Jt),fa=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Jt);function Mi(I,G){var te;function ie(){var Te=0,Le=G.length;for(te=[];++Te<Le;)te[Te-1]=n.quantile(I,Te/Le);return he}function he(Te){if(!isNaN(Te=+Te))return G[n.bisect(te,Te)]}return he.domain=function(Te){return arguments.length?(I=Te.map(d).filter(c).sort(l),ie()):I},he.range=function(Te){return arguments.length?(G=Te,ie()):G},he.quantiles=function(){return te},he.invertExtent=function(Te){return(Te=G.indexOf(Te))<0?[NaN,NaN]:[Te>0?te[Te-1]:I[0],Te<te.length?te[Te]:I[I.length-1]]},he.copy=function(){return Mi(I,G)},ie()}function Aa(I,G,te){var ie,he;function Te(Fe){return te[Math.max(0,Math.min(he,Math.floor(ie*(Fe-I))))]}function Le(){return ie=te.length/(G-I),he=te.length-1,Te}return Te.domain=function(Fe){return arguments.length?(I=+Fe[0],G=+Fe[Fe.length-1],Le()):[I,G]},Te.range=function(Fe){return arguments.length?(te=Fe,Le()):te},Te.invertExtent=function(Fe){return[Fe=(Fe=te.indexOf(Fe))<0?NaN:Fe/ie+I,Fe+1/ie]},Te.copy=function(){return Aa(I,G,te)},Le()}function Mr(I,G){function te(ie){if(ie<=ie)return G[n.bisect(I,ie)]}return te.domain=function(ie){return arguments.length?(I=ie,te):I},te.range=function(ie){return arguments.length?(G=ie,te):G},te.invertExtent=function(ie){return ie=G.indexOf(ie),[I[ie-1],I[ie]]},te.copy=function(){return Mr(I,G)},te}function Ll(I){function G(te){return+te}return G.invert=G,G.domain=G.range=function(te){return arguments.length?(I=te.map(G),G):I},G.ticks=function(te){return mo(I,te)},G.tickFormat=function(te,ie){return d3_scale_linearTickFormat(I,te,ie)},G.copy=function(){return Ll(I)},G}function Tu(){return 0}n.scale.quantile=function(){return Mi([],[])},n.scale.quantize=function(){return Aa(0,1,[0,1])},n.scale.threshold=function(){return Mr([.5],[0,1])},n.scale.identity=function(){return Ll([0,1])},n.svg={},n.svg.arc=function(){var I=Ms,G=Hs,te=Tu,ie=Ts,he=ll,Te=yr,Le=Ol;function Fe(){var We=Math.max(0,+I.apply(this,arguments)),nt=Math.max(0,+G.apply(this,arguments)),ft=he.apply(this,arguments)-Ye,pt=Te.apply(this,arguments)-Ye,wt=Math.abs(pt-ft),Ct=ft>pt?0:1;if(nt<We&&(At=nt,nt=We,We=At),wt>=St)return qe(nt,Ct)+(We?qe(We,1-Ct):"")+"Z";var At,zt,It,Xt,Gt,Vt,pn,vn,Sn,In,Vn,nr,cr=0,Gn=0,lr=[];if((Xt=(+Le.apply(this,arguments)||0)/2)&&(It=ie===Ts?Math.sqrt(We*We+nt*nt):+ie.apply(this,arguments),Ct||(Gn*=-1),nt&&(Gn=$e(It/nt*Math.sin(Xt))),We&&(cr=$e(It/We*Math.sin(Xt)))),nt){Gt=nt*Math.cos(ft+Gn),Vt=nt*Math.sin(ft+Gn),pn=nt*Math.cos(pt-Gn),vn=nt*Math.sin(pt-Gn);var xr=Math.abs(pt-ft-2*Gn)<=Pt?0:1;if(Gn&&ns(Gt,Vt,pn,vn)===Ct^xr){var Er=(ft+pt)/2;Gt=nt*Math.cos(Er),Vt=nt*Math.sin(Er),pn=vn=null}}else Gt=Vt=0;if(We){Sn=We*Math.cos(pt-cr),In=We*Math.sin(pt-cr),Vn=We*Math.cos(ft+cr),nr=We*Math.sin(ft+cr);var er=Math.abs(ft-pt+2*cr)<=Pt?0:1;if(cr&&ns(Sn,In,Vn,nr)===1-Ct^er){var sr=(ft+pt)/2;Sn=We*Math.cos(sr),In=We*Math.sin(sr),Vn=nr=null}}else Sn=In=0;if(wt>tt&&(At=Math.min(Math.abs(nt-We)/2,+te.apply(this,arguments)))>.001){zt=We<nt^Ct?0:1;var wr=At,fr=At;if(wt<Pt){var Ar=Vn==null?[Sn,In]:pn==null?[Gt,Vt]:Dt([Gt,Vt],[Vn,nr],[pn,vn],[Sn,In]),Ir=Gt-Ar[0],Vr=Vt-Ar[1],Ur=pn-Ar[0],Wr=vn-Ar[1],Kr=1/Math.sin(Math.acos((Ir*Ur+Vr*Wr)/(Math.sqrt(Ir*Ir+Vr*Vr)*Math.sqrt(Ur*Ur+Wr*Wr)))/2),ki=Math.sqrt(Ar[0]*Ar[0]+Ar[1]*Ar[1]);fr=Math.min(At,(We-ki)/(Kr-1)),wr=Math.min(At,(nt-ki)/(Kr+1))}if(pn!=null){var qi=co(Vn==null?[Sn,In]:[Vn,nr],[Gt,Vt],nt,wr,Ct),Do=co([pn,vn],[Sn,In],nt,wr,Ct);At===wr?lr.push("M",qi[0],"A",wr,",",wr," 0 0,",zt," ",qi[1],"A",nt,",",nt," 0 ",1-Ct^ns(qi[1][0],qi[1][1],Do[1][0],Do[1][1]),",",Ct," ",Do[1],"A",wr,",",wr," 0 0,",zt," ",Do[0]):lr.push("M",qi[0],"A",wr,",",wr," 0 1,",zt," ",Do[0])}else lr.push("M",Gt,",",Vt);if(Vn!=null){var fo=co([Gt,Vt],[Vn,nr],We,-fr,Ct),To=co([Sn,In],pn==null?[Gt,Vt]:[pn,vn],We,-fr,Ct);At===fr?lr.push("L",To[0],"A",fr,",",fr," 0 0,",zt," ",To[1],"A",We,",",We," 0 ",Ct^ns(To[1][0],To[1][1],fo[1][0],fo[1][1]),",",1-Ct," ",fo[1],"A",fr,",",fr," 0 0,",zt," ",fo[0]):lr.push("L",To[0],"A",fr,",",fr," 0 0,",zt," ",fo[0])}else lr.push("L",Sn,",",In)}else lr.push("M",Gt,",",Vt),pn!=null&&lr.push("A",nt,",",nt," 0 ",xr,",",Ct," ",pn,",",vn),lr.push("L",Sn,",",In),Vn!=null&&lr.push("A",We,",",We," 0 ",er,",",1-Ct," ",Vn,",",nr);return lr.push("Z"),lr.join("")}function qe(We,nt){return"M0,"+We+"A"+We+","+We+" 0 1,"+nt+" 0,"+-We+"A"+We+","+We+" 0 1,"+nt+" 0,"+We}return Fe.innerRadius=function(We){return arguments.length?(I=Bn(We),Fe):I},Fe.outerRadius=function(We){return arguments.length?(G=Bn(We),Fe):G},Fe.cornerRadius=function(We){return arguments.length?(te=Bn(We),Fe):te},Fe.padRadius=function(We){return arguments.length?(ie=We==Ts?Ts:Bn(We),Fe):ie},Fe.startAngle=function(We){return arguments.length?(he=Bn(We),Fe):he},Fe.endAngle=function(We){return arguments.length?(Te=Bn(We),Fe):Te},Fe.padAngle=function(We){return arguments.length?(Le=Bn(We),Fe):Le},Fe.centroid=function(){var We=(+I.apply(this,arguments)+ +G.apply(this,arguments))/2,nt=(+he.apply(this,arguments)+ +Te.apply(this,arguments))/2-Ye;return[Math.cos(nt)*We,Math.sin(nt)*We]},Fe};var Ts="auto";function Ms(I){return I.innerRadius}function Hs(I){return I.outerRadius}function ll(I){return I.startAngle}function yr(I){return I.endAngle}function Ol(I){return I&&I.padAngle}function ns(I,G,te,ie){return(I-te)*G-(G-ie)*I>0?0:1}function co(I,G,te,ie,he){var Te=I[0]-G[0],Le=I[1]-G[1],Fe=(he?ie:-ie)/Math.sqrt(Te*Te+Le*Le),qe=Fe*Le,We=-Fe*Te,nt=I[0]+qe,ft=I[1]+We,pt=G[0]+qe,wt=G[1]+We,Ct=(nt+pt)/2,At=(ft+wt)/2,zt=pt-nt,It=wt-ft,Xt=zt*zt+It*It,Gt=te-ie,Vt=nt*wt-pt*ft,pn=(It<0?-1:1)*Math.sqrt(Math.max(0,Gt*Gt*Xt-Vt*Vt)),vn=(Vt*It-zt*pn)/Xt,Sn=(-Vt*zt-It*pn)/Xt,In=(Vt*It+zt*pn)/Xt,Vn=(-Vt*zt+It*pn)/Xt,nr=vn-Ct,cr=Sn-At,Gn=In-Ct,lr=Vn-At;return nr*nr+cr*cr>Gn*Gn+lr*lr&&(vn=In,Sn=Vn),[[vn-qe,Sn-We],[vn*te/Gt,Sn*te/Gt]]}function As(){return!0}function ka(I){var G=Wn,te=Un,ie=As,he=Co,Te=he.key,Le=.7;function Fe(qe){var We,nt=[],ft=[],pt=-1,wt=qe.length,Ct=Bn(G),At=Bn(te);function zt(){nt.push("M",he(I(ft),Le))}for(;++pt<wt;)ie.call(this,We=qe[pt],pt)?ft.push([+Ct.call(this,We,pt),+At.call(this,We,pt)]):ft.length&&(zt(),ft=[]);return ft.length&&zt(),nt.length?nt.join(""):null}return Fe.x=function(qe){return arguments.length?(G=qe,Fe):G},Fe.y=function(qe){return arguments.length?(te=qe,Fe):te},Fe.defined=function(qe){return arguments.length?(ie=qe,Fe):ie},Fe.interpolate=function(qe){return arguments.length?(Te=typeof qe=="function"?he=qe:(he=ha.get(qe)||Co).key,Fe):Te},Fe.tension=function(qe){return arguments.length?(Le=qe,Fe):Le},Fe}n.svg.line=function(){return ka(F)};var ha=n.map({linear:Co,"linear-closed":Ua,step:function(I){for(var G=0,te=I.length,ie=I[0],he=[ie[0],",",ie[1]];++G<te;)he.push("H",(ie[0]+(ie=I[G])[0])/2,"V",ie[1]);return te>1&&he.push("H",ie[0]),he.join("")},"step-before":da,"step-after":rs,basis:Qr,"basis-open":function(I){if(I.length<4)return Co(I);for(var G,te=[],ie=-1,he=I.length,Te=[0],Le=[0];++ie<3;)G=I[ie],Te.push(G[0]),Le.push(G[1]);for(te.push(vo(Fo,Te)+","+vo(Fo,Le)),--ie;++ie<he;)G=I[ie],Te.shift(),Te.push(G[0]),Le.shift(),Le.push(G[1]),ul(te,Te,Le);return te.join("")},"basis-closed":function(I){for(var G,te,ie=-1,he=I.length,Te=he+4,Le=[],Fe=[];++ie<4;)te=I[ie%he],Le.push(te[0]),Fe.push(te[1]);for(G=[vo(Fo,Le),",",vo(Fo,Fe)],--ie;++ie<Te;)te=I[ie%he],Le.shift(),Le.push(te[0]),Fe.shift(),Fe.push(te[1]),ul(G,Le,Fe);return G.join("")},bundle:function(I,G){var te=I.length-1;if(te)for(var ie,he,Te=I[0][0],Le=I[0][1],Fe=I[te][0]-Te,qe=I[te][1]-Le,We=-1;++We<=te;)he=We/te,(ie=I[We])[0]=G*ie[0]+(1-G)*(Te+he*Fe),ie[1]=G*ie[1]+(1-G)*(Le+he*qe);return Qr(I)},cardinal:function(I,G){return I.length<3?Co(I):I[0]+Pl(I,ks(I,G))},"cardinal-open":function(I,G){return I.length<4?Co(I):I[1]+Pl(I.slice(1,-1),ks(I,G))},"cardinal-closed":function(I,G){return I.length<3?Ua(I):I[0]+Pl((I.push(I[0]),I),ks([I[I.length-2]].concat(I,[I[1]]),G))},monotone:function(I){return I.length<3?Co(I):I[0]+Pl(I,function(G){for(var te,ie,he,Te,Le=[],Fe=function(nt){for(var ft=0,pt=nt.length-1,wt=[],Ct=nt[0],At=nt[1],zt=wt[0]=cl(Ct,At);++ft<pt;)wt[ft]=(zt+(zt=cl(Ct=At,At=nt[ft+1])))/2;return wt[ft]=zt,wt}(G),qe=-1,We=G.length-1;++qe<We;)te=cl(G[qe],G[qe+1]),m(te)<tt?Fe[qe]=Fe[qe+1]=0:(Te=(ie=Fe[qe]/te)*ie+(he=Fe[qe+1]/te)*he)>9&&(Te=3*te/Math.sqrt(Te),Fe[qe]=Te*ie,Fe[qe+1]=Te*he);for(qe=-1;++qe<=We;)Te=(G[Math.min(We,qe+1)][0]-G[Math.max(0,qe-1)][0])/(6*(1+Fe[qe]*Fe[qe])),Le.push([Te||0,Fe[qe]*Te||0]);return Le}(I))}});function Co(I){return I.length>1?I.join("L"):I+"Z"}function Ua(I){return I.join("L")+"Z"}function da(I){for(var G=0,te=I.length,ie=I[0],he=[ie[0],",",ie[1]];++G<te;)he.push("V",(ie=I[G])[1],"H",ie[0]);return he.join("")}function rs(I){for(var G=0,te=I.length,ie=I[0],he=[ie[0],",",ie[1]];++G<te;)he.push("H",(ie=I[G])[0],"V",ie[1]);return he.join("")}function Pl(I,G){if(G.length<1||I.length!=G.length&&I.length!=G.length+2)return Co(I);var te=I.length!=G.length,ie="",he=I[0],Te=I[1],Le=G[0],Fe=Le,qe=1;if(te&&(ie+="Q"+(Te[0]-2*Le[0]/3)+","+(Te[1]-2*Le[1]/3)+","+Te[0]+","+Te[1],he=I[1],qe=2),G.length>1){Fe=G[1],Te=I[qe],qe++,ie+="C"+(he[0]+Le[0])+","+(he[1]+Le[1])+","+(Te[0]-Fe[0])+","+(Te[1]-Fe[1])+","+Te[0]+","+Te[1];for(var We=2;We<G.length;We++,qe++)Te=I[qe],Fe=G[We],ie+="S"+(Te[0]-Fe[0])+","+(Te[1]-Fe[1])+","+Te[0]+","+Te[1]}if(te){var nt=I[qe];ie+="Q"+(Te[0]+2*Fe[0]/3)+","+(Te[1]+2*Fe[1]/3)+","+nt[0]+","+nt[1]}return ie}function ks(I,G){for(var te,ie=[],he=(1-G)/2,Te=I[0],Le=I[1],Fe=1,qe=I.length;++Fe<qe;)te=Te,Te=Le,Le=I[Fe],ie.push([he*(Le[0]-te[0]),he*(Le[1]-te[1])]);return ie}function Qr(I){if(I.length<3)return Co(I);var G=1,te=I.length,ie=I[0],he=ie[0],Te=ie[1],Le=[he,he,he,(ie=I[1])[0]],Fe=[Te,Te,Te,ie[1]],qe=[he,",",Te,"L",vo(Fo,Le),",",vo(Fo,Fe)];for(I.push(I[te-1]);++G<=te;)ie=I[G],Le.shift(),Le.push(ie[0]),Fe.shift(),Fe.push(ie[1]),ul(qe,Le,Fe);return I.pop(),qe.push("L",ie),qe.join("")}function vo(I,G){return I[0]*G[0]+I[1]*G[1]+I[2]*G[2]+I[3]*G[3]}ha.forEach(function(I,G){G.key=I,G.closed=/-closed$/.test(I)});var Ro=[0,2/3,1/3,0],Ha=[0,1/3,2/3,0],Fo=[0,1/6,2/3,1/6];function ul(I,G,te){I.push("C",vo(Ro,G),",",vo(Ro,te),",",vo(Ha,G),",",vo(Ha,te),",",vo(Fo,G),",",vo(Fo,te))}function cl(I,G){return(G[1]-I[1])/(G[0]-I[0])}function No(I){for(var G,te,ie,he=-1,Te=I.length;++he<Te;)te=(G=I[he])[0],ie=G[1]-Ye,G[0]=te*Math.cos(ie),G[1]=te*Math.sin(ie);return I}function Xr(I){var G=Wn,te=Wn,ie=0,he=Un,Te=As,Le=Co,Fe=Le.key,qe=Le,We="L",nt=.7;function ft(pt){var wt,Ct,At,zt=[],It=[],Xt=[],Gt=-1,Vt=pt.length,pn=Bn(G),vn=Bn(ie),Sn=G===te?function(){return Ct}:Bn(te),In=ie===he?function(){return At}:Bn(he);function Vn(){zt.push("M",Le(I(Xt),nt),We,qe(I(It.reverse()),nt),"Z")}for(;++Gt<Vt;)Te.call(this,wt=pt[Gt],Gt)?(It.push([Ct=+pn.call(this,wt,Gt),At=+vn.call(this,wt,Gt)]),Xt.push([+Sn.call(this,wt,Gt),+In.call(this,wt,Gt)])):It.length&&(Vn(),It=[],Xt=[]);return It.length&&Vn(),zt.length?zt.join(""):null}return ft.x=function(pt){return arguments.length?(G=te=pt,ft):te},ft.x0=function(pt){return arguments.length?(G=pt,ft):G},ft.x1=function(pt){return arguments.length?(te=pt,ft):te},ft.y=function(pt){return arguments.length?(ie=he=pt,ft):he},ft.y0=function(pt){return arguments.length?(ie=pt,ft):ie},ft.y1=function(pt){return arguments.length?(he=pt,ft):he},ft.defined=function(pt){return arguments.length?(Te=pt,ft):Te},ft.interpolate=function(pt){return arguments.length?(Fe=typeof pt=="function"?Le=pt:(Le=ha.get(pt)||Co).key,qe=Le.reverse||Le,We=Le.closed?"M":"L",ft):Fe},ft.tension=function(pt){return arguments.length?(nt=pt,ft):nt},ft}function qa(I){return I.source}function qs(I){return I.target}function Sa(I){return I.radius}function fl(I){return[I.x,I.y]}function hl(){return 64}function Ea(){return"circle"}function Ai(I){var G=Math.sqrt(I/Pt);return"M0,"+G+"A"+G+","+G+" 0 1,1 0,"+-G+"A"+G+","+G+" 0 1,1 0,"+G+"Z"}n.svg.line.radial=function(){var I=ka(No);return I.radius=I.x,delete I.x,I.angle=I.y,delete I.y,I},da.reverse=rs,rs.reverse=da,n.svg.area=function(){return Xr(F)},n.svg.area.radial=function(){var I=Xr(No);return I.radius=I.x,delete I.x,I.innerRadius=I.x0,delete I.x0,I.outerRadius=I.x1,delete I.x1,I.angle=I.y,delete I.y,I.startAngle=I.y0,delete I.y0,I.endAngle=I.y1,delete I.y1,I},n.svg.chord=function(){var I=qa,G=qs,te=Sa,ie=ll,he=yr;function Te(We,nt){var ft,pt,wt=Le(this,I,We,nt),Ct=Le(this,G,We,nt);return"M"+wt.p0+Fe(wt.r,wt.p1,wt.a1-wt.a0)+(pt=Ct,((ft=wt).a0==pt.a0&&ft.a1==pt.a1?qe(wt.r,wt.p1,wt.r,wt.p0):qe(wt.r,wt.p1,Ct.r,Ct.p0)+Fe(Ct.r,Ct.p1,Ct.a1-Ct.a0)+qe(Ct.r,Ct.p1,wt.r,wt.p0))+"Z")}function Le(We,nt,ft,pt){var wt=nt.call(We,ft,pt),Ct=te.call(We,wt,pt),At=ie.call(We,wt,pt)-Ye,zt=he.call(We,wt,pt)-Ye;return{r:Ct,a0:At,a1:zt,p0:[Ct*Math.cos(At),Ct*Math.sin(At)],p1:[Ct*Math.cos(zt),Ct*Math.sin(zt)]}}function Fe(We,nt,ft){return"A"+We+","+We+" 0 "+ +(ft>Pt)+",1 "+nt}function qe(We,nt,ft,pt){return"Q 0,0 "+pt}return Te.radius=function(We){return arguments.length?(te=Bn(We),Te):te},Te.source=function(We){return arguments.length?(I=Bn(We),Te):I},Te.target=function(We){return arguments.length?(G=Bn(We),Te):G},Te.startAngle=function(We){return arguments.length?(ie=Bn(We),Te):ie},Te.endAngle=function(We){return arguments.length?(he=Bn(We),Te):he},Te},n.svg.diagonal=function(){var I=qa,G=qs,te=fl;function ie(he,Te){var Le=I.call(this,he,Te),Fe=G.call(this,he,Te),qe=(Le.y+Fe.y)/2,We=[Le,{x:Le.x,y:qe},{x:Fe.x,y:qe},Fe];return"M"+(We=We.map(te))[0]+"C"+We[1]+" "+We[2]+" "+We[3]}return ie.source=function(he){return arguments.length?(I=Bn(he),ie):I},ie.target=function(he){return arguments.length?(G=Bn(he),ie):G},ie.projection=function(he){return arguments.length?(te=he,ie):te},ie},n.svg.diagonal.radial=function(){var I=n.svg.diagonal(),G=fl,te=I.projection;return I.projection=function(ie){return arguments.length?te(function(he){return function(){var Te=he.apply(this,arguments),Le=Te[0],Fe=Te[1]-Ye;return[Le*Math.cos(Fe),Le*Math.sin(Fe)]}}(G=ie)):G},I},n.svg.symbol=function(){var I=Ea,G=hl;function te(ie,he){return(Gs.get(I.call(this,ie,he))||Ai)(G.call(this,ie,he))}return te.type=function(ie){return arguments.length?(I=Bn(ie),te):I},te.size=function(ie){return arguments.length?(G=Bn(ie),te):G},te};var Gs=n.map({circle:Ai,cross:function(I){var G=Math.sqrt(I/5)/2;return"M"+-3*G+","+-G+"H"+-G+"V"+-3*G+"H"+G+"V"+-G+"H"+3*G+"V"+G+"H"+G+"V"+3*G+"H"+-G+"V"+G+"H"+-3*G+"Z"},diamond:function(I){var G=Math.sqrt(I/(2*Or)),te=G*Or;return"M0,"+-G+"L"+te+",0 0,"+G+" "+-te+",0Z"},square:function(I){var G=Math.sqrt(I)/2;return"M"+-G+","+-G+"L"+G+","+-G+" "+G+","+G+" "+-G+","+G+"Z"},"triangle-down":function(I){var G=Math.sqrt(I/Sr),te=G*Sr/2;return"M0,"+te+"L"+G+","+-te+" "+-G+","+-te+"Z"},"triangle-up":function(I){var G=Math.sqrt(I/Sr),te=G*Sr/2;return"M0,"+-te+"L"+G+","+te+" "+-G+","+te+"Z"}});n.svg.symbolTypes=Gs.keys();var Sr=Math.sqrt(3),Or=Math.tan(30*Ke);be.transition=function(I){for(var G,te,ie=Zi||++qu,he=Li(I),Te=[],Le=Wa||{time:Date.now(),ease:za,delay:0,duration:250},Fe=-1,qe=this.length;++Fe<qe;){Te.push(G=[]);for(var We=this[Fe],nt=-1,ft=We.length;++nt<ft;)(te=We[nt])&&Ho(te,nt,he,ie,Le),G.push(te)}return is(Te,he,ie)},be.interrupt=function(I){return this.each(I==null?Jo:Ga(Li(I)))};var Jo=Ga(Li());function Ga(I){return function(){var G,te,ie;(G=this[I])&&(ie=G[te=G.active])&&(ie.timer.c=null,ie.timer.t=NaN,--G.count?delete G[te]:delete this[I],G.active+=.5,ie.event&&ie.event.interrupt.call(this,this.__data__,ie.index))}}function is(I,G,te){return K(I,hi),I.namespace=G,I.id=te,I}var Zi,Wa,hi=[],qu=0;function Qo(I,G,te,ie){var he=I.id,Te=I.namespace;return we(I,typeof te=="function"?function(Le,Fe,qe){Le[Te][he].tween.set(G,ie(te.call(Le,Le.__data__,Fe,qe)))}:(te=ie(te),function(Le){Le[Te][he].tween.set(G,te)}))}function mi(I){return I==null&&(I=""),function(){this.textContent=I}}function Li(I){return I==null?"__transition__":"__transition_"+I+"__"}function Ho(I,G,te,ie,he){var Te,Le,Fe,qe,We,nt=I[te]||(I[te]={active:0,count:0}),ft=nt[ie];function pt(Ct){var At=nt.active,zt=nt[At];for(var It in zt&&(zt.timer.c=null,zt.timer.t=NaN,--nt.count,delete nt[At],zt.event&&zt.event.interrupt.call(I,I.__data__,zt.index)),nt)if(+It<ie){var Xt=nt[It];Xt.timer.c=null,Xt.timer.t=NaN,--nt.count,delete nt[It]}Le.c=wt,on(function(){return Le.c&&wt(Ct||1)&&(Le.c=null,Le.t=NaN),1},0,Te),nt.active=ie,ft.event&&ft.event.start.call(I,I.__data__,G),We=[],ft.tween.forEach(function(Gt,Vt){(Vt=Vt.call(I,I.__data__,G))&&We.push(Vt)}),qe=ft.ease,Fe=ft.duration}function wt(Ct){for(var At=Ct/Fe,zt=qe(At),It=We.length;It>0;)We[--It].call(I,zt);if(At>=1)return ft.event&&ft.event.end.call(I,I.__data__,G),--nt.count?delete nt[ie]:delete I[te],1}ft||(Te=he.time,Le=on(function(Ct){var At=ft.delay;if(Le.t=At+Te,At<=Ct)return pt(Ct-At);Le.c=pt},0,Te),ft=nt[ie]={tween:new y,time:Te,timer:Le,delay:he.delay,duration:he.duration,ease:he.ease,index:G},he=null,++nt.count)}hi.call=be.call,hi.empty=be.empty,hi.node=be.node,hi.size=be.size,n.transition=function(I,G){return I&&I.transition?Zi?I.transition(G):I:n.selection().transition(I)},n.transition.prototype=hi,hi.select=function(I){var G,te,ie,he=this.id,Te=this.namespace,Le=[];I=_e(I);for(var Fe=-1,qe=this.length;++Fe<qe;){Le.push(G=[]);for(var We=this[Fe],nt=-1,ft=We.length;++nt<ft;)(ie=We[nt])&&(te=I.call(ie,ie.__data__,nt,Fe))?("__data__"in ie&&(te.__data__=ie.__data__),Ho(te,nt,Te,he,ie[Te][he]),G.push(te)):G.push(null)}return is(Le,Te,he)},hi.selectAll=function(I){var G,te,ie,he,Te,Le=this.id,Fe=this.namespace,qe=[];I=xe(I);for(var We=-1,nt=this.length;++We<nt;)for(var ft=this[We],pt=-1,wt=ft.length;++pt<wt;)if(ie=ft[pt]){Te=ie[Fe][Le],te=I.call(ie,ie.__data__,pt,We),qe.push(G=[]);for(var Ct=-1,At=te.length;++Ct<At;)(he=te[Ct])&&Ho(he,Ct,Fe,Le,Te),G.push(he)}return is(qe,Fe,Le)},hi.filter=function(I){var G,te,ie=[];typeof I!="function"&&(I=Ne(I));for(var he=0,Te=this.length;he<Te;he++){ie.push(G=[]);for(var Le,Fe=0,qe=(Le=this[he]).length;Fe<qe;Fe++)(te=Le[Fe])&&I.call(te,te.__data__,Fe,he)&&G.push(te)}return is(ie,this.namespace,this.id)},hi.tween=function(I,G){var te=this.id,ie=this.namespace;return arguments.length<2?this.node()[ie][te].tween.get(I):we(this,G==null?function(he){he[ie][te].tween.remove(I)}:function(he){he[ie][te].tween.set(I,G)})},hi.attr=function(I,G){if(arguments.length<2){for(G in I)this.attr(G,I[G]);return this}var te=I=="transform"?ju:sa,ie=n.ns.qualify(I);function he(){this.removeAttribute(ie)}function Te(){this.removeAttributeNS(ie.space,ie.local)}return Qo(this,"attr."+I,G,ie.local?function(Le){return Le==null?Te:(Le+="",function(){var Fe,qe=this.getAttributeNS(ie.space,ie.local);return qe!==Le&&(Fe=te(qe,Le),function(We){this.setAttributeNS(ie.space,ie.local,Fe(We))})})}:function(Le){return Le==null?he:(Le+="",function(){var Fe,qe=this.getAttribute(ie);return qe!==Le&&(Fe=te(qe,Le),function(We){this.setAttribute(ie,Fe(We))})})})},hi.attrTween=function(I,G){var te=n.ns.qualify(I);return this.tween("attr."+I,te.local?function(ie,he){var Te=G.call(this,ie,he,this.getAttributeNS(te.space,te.local));return Te&&function(Le){this.setAttributeNS(te.space,te.local,Te(Le))}}:function(ie,he){var Te=G.call(this,ie,he,this.getAttribute(te));return Te&&function(Le){this.setAttribute(te,Te(Le))}})},hi.style=function(I,G,te){var ie=arguments.length;if(ie<3){if(typeof I!="string"){for(te in ie<2&&(G=""),I)this.style(te,I[te],G);return this}te=""}function he(){this.style.removeProperty(I)}return Qo(this,"style."+I,G,function(Te){return Te==null?he:(Te+="",function(){var Le,Fe=t(this).getComputedStyle(this,null).getPropertyValue(I);return Fe!==Te&&(Le=sa(Fe,Te),function(qe){this.style.setProperty(I,Le(qe),te)})})})},hi.styleTween=function(I,G,te){return arguments.length<3&&(te=""),this.tween("style."+I,function(ie,he){var Te=G.call(this,ie,he,t(this).getComputedStyle(this,null).getPropertyValue(I));return Te&&function(Le){this.style.setProperty(I,Te(Le),te)}})},hi.text=function(I){return Qo(this,"text",I,mi)},hi.remove=function(){var I=this.namespace;return this.each("end.transition",function(){var G;this[I].count<2&&(G=this.parentNode)&&G.removeChild(this)})},hi.ease=function(I){var G=this.id,te=this.namespace;return arguments.length<1?this.node()[te][G].ease:(typeof I!="function"&&(I=n.ease.apply(n,arguments)),we(this,function(ie){ie[te][G].ease=I}))},hi.delay=function(I){var G=this.id,te=this.namespace;return arguments.length<1?this.node()[te][G].delay:we(this,typeof I=="function"?function(ie,he,Te){ie[te][G].delay=+I.call(ie,ie.__data__,he,Te)}:(I=+I,function(ie){ie[te][G].delay=I}))},hi.duration=function(I){var G=this.id,te=this.namespace;return arguments.length<1?this.node()[te][G].duration:we(this,typeof I=="function"?function(ie,he,Te){ie[te][G].duration=Math.max(1,I.call(ie,ie.__data__,he,Te))}:(I=Math.max(1,I),function(ie){ie[te][G].duration=I}))},hi.each=function(I,G){var te=this.id,ie=this.namespace;if(arguments.length<2){var he=Wa,Te=Zi;try{Zi=te,we(this,function(Le,Fe,qe){Wa=Le[ie][te],I.call(Le,Le.__data__,Fe,qe)})}finally{Wa=he,Zi=Te}}else we(this,function(Le){var Fe=Le[ie][te];(Fe.event||(Fe.event=n.dispatch("start","end","interrupt"))).on(I,G)});return this},hi.transition=function(){for(var I,G,te,ie=this.id,he=++qu,Te=this.namespace,Le=[],Fe=0,qe=this.length;Fe<qe;Fe++){Le.push(I=[]);for(var We,nt=0,ft=(We=this[Fe]).length;nt<ft;nt++)(G=We[nt])&&Ho(G,nt,Te,he,{time:(te=G[Te][ie]).time,ease:te.ease,delay:te.delay+te.duration,duration:te.duration}),I.push(G)}return is(Le,Te,he)},n.svg.axis=function(){var I,G=n.scale.linear(),te=Ss,ie=6,he=6,Te=3,Le=[10],Fe=null;function qe(We){We.each(function(){var nt,ft=n.select(this),pt=this.__chart__||G,wt=this.__chart__=G.copy(),Ct=Fe??(wt.ticks?wt.ticks.apply(wt,Le):wt.domain()),At=I??(wt.tickFormat?wt.tickFormat.apply(wt,Le):F),zt=ft.selectAll(".tick").data(Ct,wt),It=zt.enter().insert("g",".domain").attr("class","tick").style("opacity",tt),Xt=n.transition(zt.exit()).style("opacity",tt).remove(),Gt=n.transition(zt.order()).style("opacity",1),Vt=Math.max(ie,0)+Te,pn=Dl(wt),vn=ft.selectAll(".domain").data([0]),Sn=(vn.enter().append("path").attr("class","domain"),n.transition(vn));It.append("line"),It.append("text");var In,Vn,nr,cr,Gn=It.select("line"),lr=Gt.select("line"),xr=zt.select("text").text(At),Er=It.select("text"),er=Gt.select("text"),sr=te==="top"||te==="left"?-1:1;if(te==="bottom"||te==="top"?(nt=Je,In="x",nr="y",Vn="x2",cr="y2",xr.attr("dy",sr<0?"0em":".71em").style("text-anchor","middle"),Sn.attr("d","M"+pn[0]+","+sr*he+"V0H"+pn[1]+"V"+sr*he)):(nt=et,In="y",nr="x",Vn="y2",cr="x2",xr.attr("dy",".32em").style("text-anchor",sr<0?"end":"start"),Sn.attr("d","M"+sr*he+","+pn[0]+"H0V"+pn[1]+"H"+sr*he)),Gn.attr(cr,sr*ie),Er.attr(nr,sr*Vt),lr.attr(Vn,0).attr(cr,sr*ie),er.attr(In,0).attr(nr,sr*Vt),wt.rangeBand){var wr=wt,fr=wr.rangeBand()/2;pt=wt=function(Ar){return wr(Ar)+fr}}else pt.rangeBand?pt=wt:Xt.call(nt,wt,pt);It.call(nt,pt,wt),Gt.call(nt,wt,wt)})}return qe.scale=function(We){return arguments.length?(G=We,qe):G},qe.orient=function(We){return arguments.length?(te=We in Mu?We+"":Ss,qe):te},qe.ticks=function(){return arguments.length?(Le=x(arguments),qe):Le},qe.tickValues=function(We){return arguments.length?(Fe=We,qe):Fe},qe.tickFormat=function(We){return arguments.length?(I=We,qe):I},qe.tickSize=function(We){var nt=arguments.length;return nt?(ie=+We,he=+arguments[nt-1],qe):ie},qe.innerTickSize=function(We){return arguments.length?(ie=+We,qe):ie},qe.outerTickSize=function(We){return arguments.length?(he=+We,qe):he},qe.tickPadding=function(We){return arguments.length?(Te=+We,qe):Te},qe.tickSubdivide=function(){return arguments.length&&qe},qe};var Ss="bottom",Mu={top:1,right:1,bottom:1,left:1};function Je(I,G,te){I.attr("transform",function(ie){var he=G(ie);return"translate("+(isFinite(he)?he:te(ie))+",0)"})}function et(I,G,te){I.attr("transform",function(ie){var he=G(ie);return"translate(0,"+(isFinite(he)?he:te(ie))+")"})}n.svg.brush=function(){var I,G,te=Q(nt,"brushstart","brush","brushend"),ie=null,he=null,Te=[0,0],Le=[0,0],Fe=!0,qe=!0,We=B[0];function nt(At){At.each(function(){var zt=n.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",Ct).on("touchstart.brush",Ct),It=zt.selectAll(".background").data([0]);It.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),zt.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var Xt=zt.selectAll(".resize").data(We,F);Xt.exit().remove(),Xt.enter().append("g").attr("class",function(vn){return"resize "+vn}).style("cursor",function(vn){return ut[vn]}).append("rect").attr("x",function(vn){return/[ew]$/.test(vn)?-3:null}).attr("y",function(vn){return/^[ns]/.test(vn)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),Xt.style("display",nt.empty()?"none":null);var Gt,Vt=n.transition(zt),pn=n.transition(It);ie&&(Gt=Dl(ie),pn.attr("x",Gt[0]).attr("width",Gt[1]-Gt[0]),pt(Vt)),he&&(Gt=Dl(he),pn.attr("y",Gt[0]).attr("height",Gt[1]-Gt[0]),wt(Vt)),ft(Vt)})}function ft(At){At.selectAll(".resize").attr("transform",function(zt){return"translate("+Te[+/e$/.test(zt)]+","+Le[+/^s/.test(zt)]+")"})}function pt(At){At.select(".extent").attr("x",Te[0]),At.selectAll(".extent,.n>rect,.s>rect").attr("width",Te[1]-Te[0])}function wt(At){At.select(".extent").attr("y",Le[0]),At.selectAll(".extent,.e>rect,.w>rect").attr("height",Le[1]-Le[0])}function Ct(){var At,zt,It=this,Xt=n.select(n.event.target),Gt=te.of(It,arguments),Vt=n.select(It),pn=Xt.datum(),vn=!/^(n|s)$/.test(pn)&&ie,Sn=!/^(e|w)$/.test(pn)&&he,In=Xt.classed("extent"),Vn=vt(It),nr=n.mouse(It),cr=n.select(t(It)).on("keydown.brush",function(){n.event.keyCode==32&&(In||(At=null,nr[0]-=Te[1],nr[1]-=Le[1],In=2),ee())}).on("keyup.brush",function(){n.event.keyCode==32&&In==2&&(nr[0]+=Te[1],nr[1]+=Le[1],In=0,ee())});if(n.event.changedTouches?cr.on("touchmove.brush",xr).on("touchend.brush",er):cr.on("mousemove.brush",xr).on("mouseup.brush",er),Vt.interrupt().selectAll("*").interrupt(),In)nr[0]=Te[0]-nr[0],nr[1]=Le[0]-nr[1];else if(pn){var Gn=+/w$/.test(pn),lr=+/^n/.test(pn);zt=[Te[1-Gn]-nr[0],Le[1-lr]-nr[1]],nr[0]=Te[Gn],nr[1]=Le[lr]}else n.event.altKey&&(At=nr.slice());function xr(){var sr=n.mouse(It),wr=!1;zt&&(sr[0]+=zt[0],sr[1]+=zt[1]),In||(n.event.altKey?(At||(At=[(Te[0]+Te[1])/2,(Le[0]+Le[1])/2]),nr[0]=Te[+(sr[0]<At[0])],nr[1]=Le[+(sr[1]<At[1])]):At=null),vn&&Er(sr,ie,0)&&(pt(Vt),wr=!0),Sn&&Er(sr,he,1)&&(wt(Vt),wr=!0),wr&&(ft(Vt),Gt({type:"brush",mode:In?"move":"resize"}))}function Er(sr,wr,fr){var Ar,Ir,Vr=Dl(wr),Ur=Vr[0],Wr=Vr[1],Kr=nr[fr],ki=fr?Le:Te,qi=ki[1]-ki[0];if(In&&(Ur-=Kr,Wr-=qi+Kr),Ar=(fr?qe:Fe)?Math.max(Ur,Math.min(Wr,sr[fr])):sr[fr],In?Ir=(Ar+=Kr)+qi:(At&&(Kr=Math.max(Ur,Math.min(Wr,2*At[fr]-Ar))),Kr<Ar?(Ir=Ar,Ar=Kr):Ir=Kr),ki[0]!=Ar||ki[1]!=Ir)return fr?G=null:I=null,ki[0]=Ar,ki[1]=Ir,!0}function er(){xr(),Vt.style("pointer-events","all").selectAll(".resize").style("display",nt.empty()?"none":null),n.select("body").style("cursor",null),cr.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),Vn(),Gt({type:"brushend"})}Vt.style("pointer-events","none").selectAll(".resize").style("display",null),n.select("body").style("cursor",Xt.style("cursor")),Gt({type:"brushstart"}),xr()}return nt.event=function(At){At.each(function(){var zt=te.of(this,arguments),It={x:Te,y:Le,i:I,j:G},Xt=this.__chart__||It;this.__chart__=It,Zi?n.select(this).transition().each("start.brush",function(){I=Xt.i,G=Xt.j,Te=Xt.x,Le=Xt.y,zt({type:"brushstart"})}).tween("brush:brush",function(){var Gt=ya(Te,It.x),Vt=ya(Le,It.y);return I=G=null,function(pn){Te=It.x=Gt(pn),Le=It.y=Vt(pn),zt({type:"brush",mode:"resize"})}}).each("end.brush",function(){I=It.i,G=It.j,zt({type:"brush",mode:"resize"}),zt({type:"brushend"})}):(zt({type:"brushstart"}),zt({type:"brush",mode:"resize"}),zt({type:"brushend"}))})},nt.x=function(At){return arguments.length?(We=B[!(ie=At)<<1|!he],nt):ie},nt.y=function(At){return arguments.length?(We=B[!ie<<1|!(he=At)],nt):he},nt.clamp=function(At){return arguments.length?(ie&&he?(Fe=!!At[0],qe=!!At[1]):ie?Fe=!!At:he&&(qe=!!At),nt):ie&&he?[Fe,qe]:ie?Fe:he?qe:null},nt.extent=function(At){var zt,It,Xt,Gt,Vt;return arguments.length?(ie&&(zt=At[0],It=At[1],he&&(zt=zt[0],It=It[0]),I=[zt,It],ie.invert&&(zt=ie(zt),It=ie(It)),It<zt&&(Vt=zt,zt=It,It=Vt),zt==Te[0]&&It==Te[1]||(Te=[zt,It])),he&&(Xt=At[0],Gt=At[1],ie&&(Xt=Xt[1],Gt=Gt[1]),G=[Xt,Gt],he.invert&&(Xt=he(Xt),Gt=he(Gt)),Gt<Xt&&(Vt=Xt,Xt=Gt,Gt=Vt),Xt==Le[0]&&Gt==Le[1]||(Le=[Xt,Gt])),nt):(ie&&(I?(zt=I[0],It=I[1]):(zt=Te[0],It=Te[1],ie.invert&&(zt=ie.invert(zt),It=ie.invert(It)),It<zt&&(Vt=zt,zt=It,It=Vt))),he&&(G?(Xt=G[0],Gt=G[1]):(Xt=Le[0],Gt=Le[1],he.invert&&(Xt=he.invert(Xt),Gt=he.invert(Gt)),Gt<Xt&&(Vt=Xt,Xt=Gt,Gt=Vt))),ie&&he?[[zt,Xt],[It,Gt]]:ie?[zt,It]:he&&[Xt,Gt])},nt.clear=function(){return nt.empty()||(Te=[0,0],Le=[0,0],I=G=null),nt},nt.empty=function(){return!!ie&&Te[0]==Te[1]||!!he&&Le[0]==Le[1]},n.rebind(nt,te,"on")};var ut={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},B=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function $(I){return JSON.parse(I.responseText)}function W(I){var G=f.createRange();return G.selectNode(f.body),G.createContextualFragment(I.responseText)}n.text=Nn(function(I){return I.responseText}),n.json=function(I,G){return rr(I,"application/json",$,G)},n.html=function(I,G){return rr(I,"text/html",W,G)},n.xml=Nn(function(I){return I.responseXML}),(w=typeof(v=n)=="function"?v.call(A,e,A,C):v)===void 0||(C.exports=w)}).apply(self)},3480:function(C){C.exports=function(){"use strict";var A,e,v;function w(n,T){if(A)if(e){var x="var sharedChunk = {}; ("+A+")(sharedChunk); ("+e+")(sharedChunk);",f={};A(f),v=T(f),typeof window<"u"&&(v.workerUrl=window.URL.createObjectURL(new Blob([x],{type:"text/javascript"})))}else e=T;else A=T}return w(0,function(n){function T(S,R){return S(R={exports:{}},R.exports),R.exports}var x="1.13.4",f=s;function s(S,R,X,fe){this.cx=3*S,this.bx=3*(X-S)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*R,this.by=3*(fe-R)-this.cy,this.ay=1-this.cy-this.by,this.p1x=S,this.p1y=fe,this.p2x=X,this.p2y=fe}s.prototype.sampleCurveX=function(S){return((this.ax*S+this.bx)*S+this.cx)*S},s.prototype.sampleCurveY=function(S){return((this.ay*S+this.by)*S+this.cy)*S},s.prototype.sampleCurveDerivativeX=function(S){return(3*this.ax*S+2*this.bx)*S+this.cx},s.prototype.solveCurveX=function(S,R){var X,fe,Se,Oe,He;for(R===void 0&&(R=1e-6),Se=S,He=0;He<8;He++){if(Oe=this.sampleCurveX(Se)-S,Math.abs(Oe)<R)return Se;var Qe=this.sampleCurveDerivativeX(Se);if(Math.abs(Qe)<1e-6)break;Se-=Oe/Qe}if((Se=S)<(X=0))return X;if(Se>(fe=1))return fe;for(;X<fe;){if(Oe=this.sampleCurveX(Se),Math.abs(Oe-S)<R)return Se;S>Oe?X=Se:fe=Se,Se=.5*(fe-X)+X}return Se},s.prototype.solve=function(S,R){return this.sampleCurveY(this.solveCurveX(S,R))};var t=o;function o(S,R){this.x=S,this.y=R}o.prototype={clone:function(){return new o(this.x,this.y)},add:function(S){return this.clone()._add(S)},sub:function(S){return this.clone()._sub(S)},multByPoint:function(S){return this.clone()._multByPoint(S)},divByPoint:function(S){return this.clone()._divByPoint(S)},mult:function(S){return this.clone()._mult(S)},div:function(S){return this.clone()._div(S)},rotate:function(S){return this.clone()._rotate(S)},rotateAround:function(S,R){return this.clone()._rotateAround(S,R)},matMult:function(S){return this.clone()._matMult(S)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(S){return this.x===S.x&&this.y===S.y},dist:function(S){return Math.sqrt(this.distSqr(S))},distSqr:function(S){var R=S.x-this.x,X=S.y-this.y;return R*R+X*X},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(S){return Math.atan2(this.y-S.y,this.x-S.x)},angleWith:function(S){return this.angleWithSep(S.x,S.y)},angleWithSep:function(S,R){return Math.atan2(this.x*R-this.y*S,this.x*S+this.y*R)},_matMult:function(S){var R=S[0]*this.x+S[1]*this.y,X=S[2]*this.x+S[3]*this.y;return this.x=R,this.y=X,this},_add:function(S){return this.x+=S.x,this.y+=S.y,this},_sub:function(S){return this.x-=S.x,this.y-=S.y,this},_mult:function(S){return this.x*=S,this.y*=S,this},_div:function(S){return this.x/=S,this.y/=S,this},_multByPoint:function(S){return this.x*=S.x,this.y*=S.y,this},_divByPoint:function(S){return this.x/=S.x,this.y/=S.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var S=this.y;return this.y=this.x,this.x=-S,this},_rotate:function(S){var R=Math.cos(S),X=Math.sin(S),fe=R*this.x-X*this.y,Se=X*this.x+R*this.y;return this.x=fe,this.y=Se,this},_rotateAround:function(S,R){var X=Math.cos(S),fe=Math.sin(S),Se=R.x+X*(this.x-R.x)-fe*(this.y-R.y),Oe=R.y+fe*(this.x-R.x)+X*(this.y-R.y);return this.x=Se,this.y=Oe,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(S){return S instanceof o?S:Array.isArray(S)?new o(S[0],S[1]):S};var r=typeof self<"u"?self:{},i=Math.pow(2,53)-1;function a(S,R,X,fe){var Se=new f(S,R,X,fe);return function(Oe){return Se.solve(Oe)}}var u=a(.25,.1,.25,1);function l(S,R,X){return Math.min(X,Math.max(R,S))}function d(S,R,X){var fe=X-R,Se=((S-R)%fe+fe)%fe+R;return Se===R?X:Se}function c(S){for(var R=[],X=arguments.length-1;X-- >0;)R[X]=arguments[X+1];for(var fe=0,Se=R;fe<Se.length;fe+=1){var Oe=Se[fe];for(var He in Oe)S[He]=Oe[He]}return S}var _=1;function p(){return _++}function g(){return function S(R){return R?(R^16*Math.random()>>R/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,S)}()}function m(S){return!!S&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(S)}function b(S,R){S.forEach(function(X){R[X]&&(R[X]=R[X].bind(R))})}function y(S,R){return S.indexOf(R,S.length-R.length)!==-1}function M(S,R,X){var fe={};for(var Se in S)fe[Se]=R.call(X||this,S[Se],Se,S);return fe}function h(S,R,X){var fe={};for(var Se in S)R.call(X||this,S[Se],Se,S)&&(fe[Se]=S[Se]);return fe}function E(S){return Array.isArray(S)?S.map(E):typeof S=="object"&&S?M(S,E):S}var k={};function D(S){k[S]||(typeof console<"u"&&console.warn(S),k[S]=!0)}function P(S,R,X){return(X.y-S.y)*(R.x-S.x)>(R.y-S.y)*(X.x-S.x)}function L(S){for(var R=0,X=0,fe=S.length,Se=fe-1,Oe=void 0,He=void 0;X<fe;Se=X++)Oe=S[X],R+=((He=S[Se]).x-Oe.x)*(Oe.y+He.y);return R}function O(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function N(S){var R={};if(S.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(fe,Se,Oe,He){var Qe=Oe||He;return R[Se]=!Qe||Qe.toLowerCase(),""}),R["max-age"]){var X=parseInt(R["max-age"],10);isNaN(X)?delete R["max-age"]:R["max-age"]=X}return R}var V=null;function F(S){if(V==null){var R=S.navigator?S.navigator.userAgent:null;V=!!S.safari||!(!R||!(/\b(iPad|iPhone|iPod)\b/.test(R)||R.match("Safari")&&!R.match("Chrome")))}return V}function j(S){try{var R=r[S];return R.setItem("_mapbox_test_",1),R.removeItem("_mapbox_test_"),!0}catch{return!1}}var Z,z,H,U,re=r.performance&&r.performance.now?r.performance.now.bind(r.performance):Date.now.bind(Date),ee=r.requestAnimationFrame||r.mozRequestAnimationFrame||r.webkitRequestAnimationFrame||r.msRequestAnimationFrame,J=r.cancelAnimationFrame||r.mozCancelAnimationFrame||r.webkitCancelAnimationFrame||r.msCancelAnimationFrame,Q={now:re,frame:function(S){var R=ee(S);return{cancel:function(){return J(R)}}},getImageData:function(S,R){R===void 0&&(R=0);var X=r.document.createElement("canvas"),fe=X.getContext("2d");if(!fe)throw new Error("failed to create canvas 2d context");return X.width=S.width,X.height=S.height,fe.drawImage(S,0,0,S.width,S.height),fe.getImageData(-R,-R,S.width+2*R,S.height+2*R)},resolveURL:function(S){return Z||(Z=r.document.createElement("a")),Z.href=S,Z.href},hardwareConcurrency:r.navigator&&r.navigator.hardwareConcurrency||4,get devicePixelRatio(){return r.devicePixelRatio},get prefersReducedMotion(){return!!r.matchMedia&&(z==null&&(z=r.matchMedia("(prefers-reduced-motion: reduce)")),z.matches)}},ne={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},K={supported:!1,testSupport:function(S){!oe&&U&&(le?se(S):H=S)}},oe=!1,le=!1;function se(S){var R=S.createTexture();S.bindTexture(S.TEXTURE_2D,R);try{if(S.texImage2D(S.TEXTURE_2D,0,S.RGBA,S.RGBA,S.UNSIGNED_BYTE,U),S.isContextLost())return;K.supported=!0}catch{}S.deleteTexture(R),oe=!0}r.document&&((U=r.document.createElement("img")).onload=function(){H&&se(H),H=null,le=!0},U.onerror=function(){oe=!0,H=null},U.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var de="01",be=function(S,R){this._transformRequestFn=S,this._customAccessToken=R,this._createSkuToken()};function _e(S){return S.indexOf("mapbox:")===0}be.prototype._createSkuToken=function(){var S=function(){for(var R="",X=0;X<10;X++)R+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",de,R].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=S.token,this._skuTokenExpiresAt=S.tokenExpiresAt},be.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},be.prototype.transformRequest=function(S,R){return this._transformRequestFn&&this._transformRequestFn(S,R)||{url:S}},be.prototype.normalizeStyleURL=function(S,R){if(!_e(S))return S;var X=me(S);return X.path="/styles/v1"+X.path,this._makeAPIURL(X,this._customAccessToken||R)},be.prototype.normalizeGlyphsURL=function(S,R){if(!_e(S))return S;var X=me(S);return X.path="/fonts/v1"+X.path,this._makeAPIURL(X,this._customAccessToken||R)},be.prototype.normalizeSourceURL=function(S,R){if(!_e(S))return S;var X=me(S);return X.path="/v4/"+X.authority+".json",X.params.push("secure"),this._makeAPIURL(X,this._customAccessToken||R)},be.prototype.normalizeSpriteURL=function(S,R,X,fe){var Se=me(S);return _e(S)?(Se.path="/styles/v1"+Se.path+"/sprite"+R+X,this._makeAPIURL(Se,this._customAccessToken||fe)):(Se.path+=""+R+X,Me(Se))},be.prototype.normalizeTileURL=function(S,R){if(this._isSkuTokenExpired()&&this._createSkuToken(),S&&!_e(S))return S;var X=me(S),fe=Q.devicePixelRatio>=2||R===512?"@2x":"",Se=K.supported?".webp":"$1";X.path=X.path.replace(/(\.(png|jpg)\d*)(?=$)/,""+fe+Se),X.path=X.path.replace(/^.+\/v4\//,"/"),X.path="/v4"+X.path;var Oe=this._customAccessToken||function(He){for(var Qe=0,ct=He;Qe<ct.length;Qe+=1){var bt=ct[Qe].match(/^access_token=(.*)$/);if(bt)return bt[1]}return null}(X.params)||ne.ACCESS_TOKEN;return ne.REQUIRE_ACCESS_TOKEN&&Oe&&this._skuToken&&X.params.push("sku="+this._skuToken),this._makeAPIURL(X,Oe)},be.prototype.canonicalizeTileURL=function(S,R){var X=me(S);if(!X.path.match(/(^\/v4\/)/)||!X.path.match(/\.[\w]+$/))return S;var fe="mapbox://tiles/";fe+=X.path.replace("/v4/","");var Se=X.params;return R&&(Se=Se.filter(function(Oe){return!Oe.match(/^access_token=/)})),Se.length&&(fe+="?"+Se.join("&")),fe},be.prototype.canonicalizeTileset=function(S,R){for(var X=!!R&&_e(R),fe=[],Se=0,Oe=S.tiles||[];Se<Oe.length;Se+=1){var He=Oe[Se];ve(He)?fe.push(this.canonicalizeTileURL(He,X)):fe.push(He)}return fe},be.prototype._makeAPIURL=function(S,R){var X="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",fe=me(ne.API_URL);if(S.protocol=fe.protocol,S.authority=fe.authority,S.protocol==="http"){var Se=S.params.indexOf("secure");Se>=0&&S.params.splice(Se,1)}if(fe.path!=="/"&&(S.path=""+fe.path+S.path),!ne.REQUIRE_ACCESS_TOKEN)return Me(S);if(!(R=R||ne.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+X);if(R[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+X);return S.params=S.params.filter(function(Oe){return Oe.indexOf("access_token")===-1}),S.params.push("access_token="+R),Me(S)};var xe=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function ve(S){return xe.test(S)}var ye=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function me(S){var R=S.match(ye);if(!R)throw new Error("Unable to parse URL object");return{protocol:R[1],authority:R[2],path:R[3]||"/",params:R[4]?R[4].split("&"):[]}}function Me(S){var R=S.params.length?"?"+S.params.join("&"):"";return S.protocol+"://"+S.authority+S.path+R}var Ae="mapbox.eventData";function ce(S){if(!S)return null;var R,X=S.split(".");if(!X||X.length!==3)return null;try{return JSON.parse((R=X[1],decodeURIComponent(r.atob(R).split("").map(function(fe){return"%"+("00"+fe.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch{return null}}var ae=function(S){this.type=S,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};ae.prototype.getStorageKey=function(S){var R,X,fe=ce(ne.ACCESS_TOKEN);return R=fe&&fe.u?(X=fe.u,r.btoa(encodeURIComponent(X).replace(/%([0-9A-F]{2})/g,function(Se,Oe){return String.fromCharCode(+("0x"+Oe))}))):ne.ACCESS_TOKEN||"",S?Ae+"."+S+":"+R:Ae+":"+R},ae.prototype.fetchEventData=function(){var S=j("localStorage"),R=this.getStorageKey(),X=this.getStorageKey("uuid");if(S)try{var fe=r.localStorage.getItem(R);fe&&(this.eventData=JSON.parse(fe));var Se=r.localStorage.getItem(X);Se&&(this.anonId=Se)}catch{D("Unable to read from LocalStorage")}},ae.prototype.saveEventData=function(){var S=j("localStorage"),R=this.getStorageKey(),X=this.getStorageKey("uuid");if(S)try{r.localStorage.setItem(X,this.anonId),Object.keys(this.eventData).length>=1&&r.localStorage.setItem(R,JSON.stringify(this.eventData))}catch{D("Unable to write to LocalStorage")}},ae.prototype.processRequests=function(S){},ae.prototype.postEvent=function(S,R,X,fe){var Se=this;if(ne.EVENTS_URL){var Oe=me(ne.EVENTS_URL);Oe.params.push("access_token="+(fe||ne.ACCESS_TOKEN||""));var He={event:this.type,created:new Date(S).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:x,skuId:de,userId:this.anonId},Qe=R?c(He,R):He,ct={url:Me(Oe),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Qe])};this.pendingRequest=St(ct,function(bt){Se.pendingRequest=null,X(bt),Se.saveEventData(),Se.processRequests(fe)})}},ae.prototype.queueRequest=function(S,R){this.queue.push(S),this.processRequests(R)};var pe,De,ke=function(S){function R(){S.call(this,"map.load"),this.success={},this.skuToken=""}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype.postMapLoadEvent=function(X,fe,Se,Oe){this.skuToken=Se,(ne.EVENTS_URL&&Oe||ne.ACCESS_TOKEN&&Array.isArray(X)&&X.some(function(He){return _e(He)||ve(He)}))&&this.queueRequest({id:fe,timestamp:Date.now()},Oe)},R.prototype.processRequests=function(X){var fe=this;if(!this.pendingRequest&&this.queue.length!==0){var Se=this.queue.shift(),Oe=Se.id,He=Se.timestamp;Oe&&this.success[Oe]||(this.anonId||this.fetchEventData(),m(this.anonId)||(this.anonId=g()),this.postEvent(He,{skuToken:this.skuToken},function(Qe){Qe||Oe&&(fe.success[Oe]=!0)},X))}},R}(ae),Ee=function(S){function R(X){S.call(this,"appUserTurnstile"),this._customAccessToken=X}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype.postTurnstileEvent=function(X,fe){ne.EVENTS_URL&&ne.ACCESS_TOKEN&&Array.isArray(X)&&X.some(function(Se){return _e(Se)||ve(Se)})&&this.queueRequest(Date.now(),fe)},R.prototype.processRequests=function(X){var fe=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var Se=ce(ne.ACCESS_TOKEN),Oe=Se?Se.u:ne.ACCESS_TOKEN,He=Oe!==this.eventData.tokenU;m(this.anonId)||(this.anonId=g(),He=!0);var Qe=this.queue.shift();if(this.eventData.lastSuccess){var ct=new Date(this.eventData.lastSuccess),bt=new Date(Qe),Tt=(Qe-this.eventData.lastSuccess)/864e5;He=He||Tt>=1||Tt<-1||ct.getDate()!==bt.getDate()}else He=!0;if(!He)return this.processRequests();this.postEvent(Qe,{"enabled.telemetry":!1},function(Nt){Nt||(fe.eventData.lastSuccess=Qe,fe.eventData.tokenU=Oe)},X)}},R}(ae),Ie=new Ee,Re=Ie.postTurnstileEvent.bind(Ie),Ne=new ke,ge=Ne.postMapLoadEvent.bind(Ne),we="mapbox-tiles",Ce=500,ze=50,Pe=42e4;function Ue(){r.caches&&!pe&&(pe=r.caches.open(we))}function Ge(S,R,X){if(Ue(),pe){var fe={status:R.status,statusText:R.statusText,headers:new r.Headers};R.headers.forEach(function(Oe,He){return fe.headers.set(He,Oe)});var Se=N(R.headers.get("Cache-Control")||"");Se["no-store"]||(Se["max-age"]&&fe.headers.set("Expires",new Date(X+1e3*Se["max-age"]).toUTCString()),new Date(fe.headers.get("Expires")).getTime()-X<Pe||function(Oe,He){if(De===void 0)try{new Response(new ReadableStream),De=!0}catch{De=!1}De?He(Oe.body):Oe.blob().then(He)}(R,function(Oe){var He=new r.Response(Oe,fe);Ue(),pe&&pe.then(function(Qe){return Qe.put(Xe(S.url),He)}).catch(function(Qe){return D(Qe.message)})}))}}function Xe(S){var R=S.indexOf("?");return R<0?S:S.slice(0,R)}function st(S,R){if(Ue(),!pe)return R(null);var X=Xe(S.url);pe.then(function(fe){fe.match(X).then(function(Se){var Oe=function(He){if(!He)return!1;var Qe=new Date(He.headers.get("Expires")||0),ct=N(He.headers.get("Cache-Control")||"");return Qe>Date.now()&&!ct["no-cache"]}(Se);fe.delete(X),Oe&&fe.put(X,Se.clone()),R(null,Se,Oe)}).catch(R)}).catch(R)}var at,vt=1/0;function xt(){return at==null&&(at=r.OffscreenCanvas&&new r.OffscreenCanvas(1,1).getContext("2d")&&typeof r.createImageBitmap=="function"),at}var gt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(gt);var rt=function(S){function R(X,fe,Se){fe===401&&ve(Se)&&(X+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),S.call(this,X),this.status=fe,this.url=Se,this.name=this.constructor.name,this.message=X}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},R}(Error),tt=O()?function(){return self.worker&&self.worker.referrer}:function(){return(r.location.protocol==="blob:"?r.parent:r).location.href};function Mt(S,R){var X,fe=new r.AbortController,Se=new r.Request(S.url,{method:S.method||"GET",body:S.body,credentials:S.credentials,headers:S.headers,referrer:tt(),signal:fe.signal}),Oe=!1,He=!1,Qe=(X=Se.url).indexOf("sku=")>0&&ve(X);S.type==="json"&&Se.headers.set("Accept","application/json");var ct=function(Tt,Nt,qt){if(!He){if(Tt&&Tt.message!=="SecurityError"&&D(Tt),Nt&&qt)return bt(Nt);var jt=Date.now();r.fetch(Se).then(function(an){if(an.ok){var cn=Qe?an.clone():null;return bt(an,cn,jt)}return R(new rt(an.statusText,an.status,S.url))}).catch(function(an){an.code!==20&&R(new Error(an.message))})}},bt=function(Tt,Nt,qt){(S.type==="arrayBuffer"?Tt.arrayBuffer():S.type==="json"?Tt.json():Tt.text()).then(function(jt){He||(Nt&&qt&&Ge(Se,Nt,qt),Oe=!0,R(null,jt,Tt.headers.get("Cache-Control"),Tt.headers.get("Expires")))}).catch(function(jt){He||R(new Error(jt.message))})};return Qe?st(Se,ct):ct(null,null),{cancel:function(){He=!0,Oe||fe.abort()}}}var Pt=function(S,R){if(X=S.url,!(/^file:/.test(X)||/^file:/.test(tt())&&!/^\w+:/.test(X))){if(r.fetch&&r.Request&&r.AbortController&&r.Request.prototype.hasOwnProperty("signal"))return Mt(S,R);if(O()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",S,R,void 0,!0)}var X;return function(fe,Se){var Oe=new r.XMLHttpRequest;for(var He in Oe.open(fe.method||"GET",fe.url,!0),fe.type==="arrayBuffer"&&(Oe.responseType="arraybuffer"),fe.headers)Oe.setRequestHeader(He,fe.headers[He]);return fe.type==="json"&&(Oe.responseType="text",Oe.setRequestHeader("Accept","application/json")),Oe.withCredentials=fe.credentials==="include",Oe.onerror=function(){Se(new Error(Oe.statusText))},Oe.onload=function(){if((Oe.status>=200&&Oe.status<300||Oe.status===0)&&Oe.response!==null){var Qe=Oe.response;if(fe.type==="json")try{Qe=JSON.parse(Oe.response)}catch(ct){return Se(ct)}Se(null,Qe,Oe.getResponseHeader("Cache-Control"),Oe.getResponseHeader("Expires"))}else Se(new rt(Oe.statusText,Oe.status,fe.url))},Oe.send(fe.body),{cancel:function(){return Oe.abort()}}}(S,R)},Rt=function(S,R){return Pt(c(S,{type:"arrayBuffer"}),R)},St=function(S,R){return Pt(c(S,{method:"POST"}),R)},Ye,Ke,Ve="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Ye=[],Ke=0;var $e=function(S,R){if(K.supported&&(S.headers||(S.headers={}),S.headers.accept="image/webp,*/*"),Ke>=ne.MAX_PARALLEL_IMAGE_REQUESTS){var X={requestParameters:S,callback:R,cancelled:!1,cancel:function(){this.cancelled=!0}};return Ye.push(X),X}Ke++;var fe=!1,Se=function(){if(!fe)for(fe=!0,Ke--;Ye.length&&Ke<ne.MAX_PARALLEL_IMAGE_REQUESTS;){var He=Ye.shift(),Qe=He.requestParameters,ct=He.callback;He.cancelled||(He.cancel=$e(Qe,ct).cancel)}},Oe=Rt(S,function(He,Qe,ct,bt){Se(),He?R(He):Qe&&(xt()?function(Tt,Nt){var qt=new r.Blob([new Uint8Array(Tt)],{type:"image/png"});r.createImageBitmap(qt).then(function(jt){Nt(null,jt)}).catch(function(jt){Nt(new Error("Could not load image because of "+jt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(Qe,R):function(Tt,Nt,qt,jt){var an=new r.Image,cn=r.URL;an.onload=function(){Nt(null,an),cn.revokeObjectURL(an.src),an.onload=null,r.requestAnimationFrame(function(){an.src=Ve})},an.onerror=function(){return Nt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Tn=new r.Blob([new Uint8Array(Tt)],{type:"image/png"});an.cacheControl=qt,an.expires=jt,an.src=Tt.byteLength?cn.createObjectURL(Tn):Ve}(Qe,R,ct,bt))});return{cancel:function(){Oe.cancel(),Se()}}};function lt(S,R,X){X[S]&&X[S].indexOf(R)!==-1||(X[S]=X[S]||[],X[S].push(R))}function it(S,R,X){if(X&&X[S]){var fe=X[S].indexOf(R);fe!==-1&&X[S].splice(fe,1)}}var Be=function(S,R){R===void 0&&(R={}),c(this,R),this.type=S},je=function(S){function R(X,fe){fe===void 0&&(fe={}),S.call(this,"error",c({error:X},fe))}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R}(Be),ot=function(){};ot.prototype.on=function(S,R){return this._listeners=this._listeners||{},lt(S,R,this._listeners),this},ot.prototype.off=function(S,R){return it(S,R,this._listeners),it(S,R,this._oneTimeListeners),this},ot.prototype.once=function(S,R){return this._oneTimeListeners=this._oneTimeListeners||{},lt(S,R,this._oneTimeListeners),this},ot.prototype.fire=function(S,R){typeof S=="string"&&(S=new Be(S,R||{}));var X=S.type;if(this.listens(X)){S.target=this;for(var fe=0,Se=this._listeners&&this._listeners[X]?this._listeners[X].slice():[];fe<Se.length;fe+=1)Se[fe].call(this,S);for(var Oe=0,He=this._oneTimeListeners&&this._oneTimeListeners[X]?this._oneTimeListeners[X].slice():[];Oe<He.length;Oe+=1){var Qe=He[Oe];it(X,Qe,this._oneTimeListeners),Qe.call(this,S)}var ct=this._eventedParent;ct&&(c(S,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),ct.fire(S))}else S instanceof je&&console.error(S.error);return this},ot.prototype.listens=function(S){return this._listeners&&this._listeners[S]&&this._listeners[S].length>0||this._oneTimeListeners&&this._oneTimeListeners[S]&&this._oneTimeListeners[S].length>0||this._eventedParent&&this._eventedParent.listens(S)},ot.prototype.setEventedParent=function(S,R){return this._eventedParent=S,this._eventedParentData=R,this};var Ze={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},dt=function(S,R,X,fe){this.message=(S?S+": ":"")+X,fe&&(this.identifier=fe),R!=null&&R.__line__&&(this.line=R.__line__)};function mt(S){var R=S.key,X=S.value;return X?[new dt(R,X,"constants have been deprecated as of v8")]:[]}function yt(S){for(var R=[],X=arguments.length-1;X-- >0;)R[X]=arguments[X+1];for(var fe=0,Se=R;fe<Se.length;fe+=1){var Oe=Se[fe];for(var He in Oe)S[He]=Oe[He]}return S}function ht(S){return S instanceof Number||S instanceof String||S instanceof Boolean?S.valueOf():S}function kt(S){if(Array.isArray(S))return S.map(kt);if(S instanceof Object&&!(S instanceof Number||S instanceof String||S instanceof Boolean)){var R={};for(var X in S)R[X]=kt(S[X]);return R}return ht(S)}var _t=function(S){function R(X,fe){S.call(this,fe),this.message=fe,this.key=X}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R}(Error),Et=function(S,R){R===void 0&&(R=[]),this.parent=S,this.bindings={};for(var X=0,fe=R;X<fe.length;X+=1){var Se=fe[X],Oe=Se[0],He=Se[1];this.bindings[Oe]=He}};Et.prototype.concat=function(S){return new Et(this,S)},Et.prototype.get=function(S){if(this.bindings[S])return this.bindings[S];if(this.parent)return this.parent.get(S);throw new Error(S+" not found in scope.")},Et.prototype.has=function(S){return!!this.bindings[S]||!!this.parent&&this.parent.has(S)};var Lt={kind:"null"},Ot={kind:"number"},Ft={kind:"string"},Zt={kind:"boolean"},Ht={kind:"color"},Ut={kind:"object"},Wt={kind:"value"},nn={kind:"collator"},On={kind:"formatted"},kn={kind:"resolvedImage"};function gn(S,R){return{kind:"array",itemType:S,N:R}}function Jt(S){if(S.kind==="array"){var R=Jt(S.itemType);return typeof S.N=="number"?"array<"+R+", "+S.N+">":S.itemType.kind==="value"?"array":"array<"+R+">"}return S.kind}var un=[Lt,Ot,Ft,Zt,Ht,On,Ut,gn(Wt),kn];function tn(S,R){if(R.kind==="error")return null;if(S.kind==="array"){if(R.kind==="array"&&(R.N===0&&R.itemType.kind==="value"||!tn(S.itemType,R.itemType))&&(typeof S.N!="number"||S.N===R.N))return null}else{if(S.kind===R.kind)return null;if(S.kind==="value"){for(var X=0,fe=un;X<fe.length;X+=1)if(!tn(fe[X],R))return null}}return"Expected "+Jt(S)+" but found "+Jt(R)+" instead."}function hn(S,R){return R.some(function(X){return X.kind===S.kind})}function bn(S,R){return R.some(function(X){return X==="null"?S===null:X==="array"?Array.isArray(S):X==="object"?S&&!Array.isArray(S)&&typeof S=="object":X===typeof S})}var wn=T(function(S,R){var X={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function fe(ct){return(ct=Math.round(ct))<0?0:ct>255?255:ct}function Se(ct){return ct<0?0:ct>1?1:ct}function Oe(ct){return ct[ct.length-1]==="%"?fe(parseFloat(ct)/100*255):fe(parseInt(ct))}function He(ct){return ct[ct.length-1]==="%"?Se(parseFloat(ct)/100):Se(parseFloat(ct))}function Qe(ct,bt,Tt){return Tt<0?Tt+=1:Tt>1&&(Tt-=1),6*Tt<1?ct+(bt-ct)*Tt*6:2*Tt<1?bt:3*Tt<2?ct+(bt-ct)*(2/3-Tt)*6:ct}try{R.parseCSSColor=function(ct){var bt,Tt=ct.replace(/ /g,"").toLowerCase();if(Tt in X)return X[Tt].slice();if(Tt[0]==="#")return Tt.length===4?(bt=parseInt(Tt.substr(1),16))>=0&&bt<=4095?[(3840&bt)>>4|(3840&bt)>>8,240&bt|(240&bt)>>4,15&bt|(15&bt)<<4,1]:null:Tt.length===7&&(bt=parseInt(Tt.substr(1),16))>=0&&bt<=16777215?[(16711680&bt)>>16,(65280&bt)>>8,255&bt,1]:null;var Nt=Tt.indexOf("("),qt=Tt.indexOf(")");if(Nt!==-1&&qt+1===Tt.length){var jt=Tt.substr(0,Nt),an=Tt.substr(Nt+1,qt-(Nt+1)).split(","),cn=1;switch(jt){case"rgba":if(an.length!==4)return null;cn=He(an.pop());case"rgb":return an.length!==3?null:[Oe(an[0]),Oe(an[1]),Oe(an[2]),cn];case"hsla":if(an.length!==4)return null;cn=He(an.pop());case"hsl":if(an.length!==3)return null;var Tn=(parseFloat(an[0])%360+360)%360/360,_n=He(an[1]),Fn=He(an[2]),zn=Fn<=.5?Fn*(_n+1):Fn+_n-Fn*_n,Hn=2*Fn-zn;return[fe(255*Qe(Hn,zn,Tn+1/3)),fe(255*Qe(Hn,zn,Tn)),fe(255*Qe(Hn,zn,Tn-1/3)),cn];default:return null}}return null}}catch{}}),Pn=wn.parseCSSColor,Cn=function(S,R,X,fe){fe===void 0&&(fe=1),this.r=S,this.g=R,this.b=X,this.a=fe};Cn.parse=function(S){if(S){if(S instanceof Cn)return S;if(typeof S=="string"){var R=Pn(S);if(R)return new Cn(R[0]/255*R[3],R[1]/255*R[3],R[2]/255*R[3],R[3])}}},Cn.prototype.toString=function(){var S=this.toArray(),R=S[0],X=S[1],fe=S[2],Se=S[3];return"rgba("+Math.round(R)+","+Math.round(X)+","+Math.round(fe)+","+Se+")"},Cn.prototype.toArray=function(){var S=this,R=S.r,X=S.g,fe=S.b,Se=S.a;return Se===0?[0,0,0,0]:[255*R/Se,255*X/Se,255*fe/Se,Se]},Cn.black=new Cn(0,0,0,1),Cn.white=new Cn(1,1,1,1),Cn.transparent=new Cn(0,0,0,0),Cn.red=new Cn(1,0,0,1);var Mn=function(S,R,X){this.sensitivity=S?R?"variant":"case":R?"accent":"base",this.locale=X,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Mn.prototype.compare=function(S,R){return this.collator.compare(S,R)},Mn.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Bn=function(S,R,X,fe,Se){this.text=S,this.image=R,this.scale=X,this.fontStack=fe,this.textColor=Se},Nn=function(S){this.sections=S};Nn.fromString=function(S){return new Nn([new Bn(S,null,null,null,null)])},Nn.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(S){return S.text.length!==0||S.image&&S.image.name.length!==0})},Nn.factory=function(S){return S instanceof Nn?S:Nn.fromString(S)},Nn.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(S){return S.text}).join("")},Nn.prototype.serialize=function(){for(var S=["format"],R=0,X=this.sections;R<X.length;R+=1){var fe=X[R];if(fe.image)S.push(["image",fe.image.name]);else{S.push(fe.text);var Se={};fe.fontStack&&(Se["text-font"]=["literal",fe.fontStack.split(",")]),fe.scale&&(Se["font-scale"]=fe.scale),fe.textColor&&(Se["text-color"]=["rgba"].concat(fe.textColor.toArray())),S.push(Se)}}return S};var rr=function(S){this.name=S.name,this.available=S.available};function Yn(S,R,X,fe){return typeof S=="number"&&S>=0&&S<=255&&typeof R=="number"&&R>=0&&R<=255&&typeof X=="number"&&X>=0&&X<=255?fe===void 0||typeof fe=="number"&&fe>=0&&fe<=1?null:"Invalid rgba value ["+[S,R,X,fe].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof fe=="number"?[S,R,X,fe]:[S,R,X]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function ir(S){if(S===null||typeof S=="string"||typeof S=="boolean"||typeof S=="number"||S instanceof Cn||S instanceof Mn||S instanceof Nn||S instanceof rr)return!0;if(Array.isArray(S)){for(var R=0,X=S;R<X.length;R+=1)if(!ir(X[R]))return!1;return!0}if(typeof S=="object"){for(var fe in S)if(!ir(S[fe]))return!1;return!0}return!1}function Zn(S){if(S===null)return Lt;if(typeof S=="string")return Ft;if(typeof S=="boolean")return Zt;if(typeof S=="number")return Ot;if(S instanceof Cn)return Ht;if(S instanceof Mn)return nn;if(S instanceof Nn)return On;if(S instanceof rr)return kn;if(Array.isArray(S)){for(var R,X=S.length,fe=0,Se=S;fe<Se.length;fe+=1){var Oe=Zn(Se[fe]);if(R){if(R===Oe)continue;R=Wt;break}R=Oe}return gn(R||Wt,X)}return Ut}function ur(S){var R=typeof S;return S===null?"":R==="string"||R==="number"||R==="boolean"?String(S):S instanceof Cn||S instanceof Nn||S instanceof rr?S.toString():JSON.stringify(S)}rr.prototype.toString=function(){return this.name},rr.fromString=function(S){return S?new rr({name:S,available:!1}):null},rr.prototype.serialize=function(){return["image",this.name]};var en=function(S,R){this.type=S,this.value=R};en.parse=function(S,R){if(S.length!==2)return R.error("'literal' expression requires exactly one argument, but found "+(S.length-1)+" instead.");if(!ir(S[1]))return R.error("invalid value");var X=S[1],fe=Zn(X),Se=R.expectedType;return fe.kind!=="array"||fe.N!==0||!Se||Se.kind!=="array"||typeof Se.N=="number"&&Se.N!==0||(fe=Se),new en(fe,X)},en.prototype.evaluate=function(){return this.value},en.prototype.eachChild=function(){},en.prototype.outputDefined=function(){return!0},en.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Cn?["rgba"].concat(this.value.toArray()):this.value instanceof Nn?this.value.serialize():this.value};var on=function(S){this.name="ExpressionEvaluationError",this.message=S};on.prototype.toJSON=function(){return this.message};var Dn={string:Ft,number:Ot,boolean:Zt,object:Ut},yn=function(S,R){this.type=S,this.args=R};yn.parse=function(S,R){if(S.length<2)return R.error("Expected at least one argument.");var X,fe=1,Se=S[0];if(Se==="array"){var Oe,He;if(S.length>2){var Qe=S[1];if(typeof Qe!="string"||!(Qe in Dn)||Qe==="object")return R.error('The item type argument of "array" must be one of string, number, boolean',1);Oe=Dn[Qe],fe++}else Oe=Wt;if(S.length>3){if(S[2]!==null&&(typeof S[2]!="number"||S[2]<0||S[2]!==Math.floor(S[2])))return R.error('The length argument to "array" must be a positive integer literal',2);He=S[2],fe++}X=gn(Oe,He)}else X=Dn[Se];for(var ct=[];fe<S.length;fe++){var bt=R.parse(S[fe],fe,Wt);if(!bt)return null;ct.push(bt)}return new yn(X,ct)},yn.prototype.evaluate=function(S){for(var R=0;R<this.args.length;R++){var X=this.args[R].evaluate(S);if(!tn(this.type,Zn(X)))return X;if(R===this.args.length-1)throw new on("Expected value to be of type "+Jt(this.type)+", but found "+Jt(Zn(X))+" instead.")}return null},yn.prototype.eachChild=function(S){this.args.forEach(S)},yn.prototype.outputDefined=function(){return this.args.every(function(S){return S.outputDefined()})},yn.prototype.serialize=function(){var S=this.type,R=[S.kind];if(S.kind==="array"){var X=S.itemType;if(X.kind==="string"||X.kind==="number"||X.kind==="boolean"){R.push(X.kind);var fe=S.N;(typeof fe=="number"||this.args.length>1)&&R.push(fe)}}return R.concat(this.args.map(function(Se){return Se.serialize()}))};var Ln=function(S){this.type=On,this.sections=S};Ln.parse=function(S,R){if(S.length<2)return R.error("Expected at least one argument.");var X=S[1];if(!Array.isArray(X)&&typeof X=="object")return R.error("First argument must be an image or text section.");for(var fe=[],Se=!1,Oe=1;Oe<=S.length-1;++Oe){var He=S[Oe];if(Se&&typeof He=="object"&&!Array.isArray(He)){Se=!1;var Qe=null;if(He["font-scale"]&&!(Qe=R.parse(He["font-scale"],1,Ot)))return null;var ct=null;if(He["text-font"]&&!(ct=R.parse(He["text-font"],1,gn(Ft))))return null;var bt=null;if(He["text-color"]&&!(bt=R.parse(He["text-color"],1,Ht)))return null;var Tt=fe[fe.length-1];Tt.scale=Qe,Tt.font=ct,Tt.textColor=bt}else{var Nt=R.parse(S[Oe],1,Wt);if(!Nt)return null;var qt=Nt.type.kind;if(qt!=="string"&&qt!=="value"&&qt!=="null"&&qt!=="resolvedImage")return R.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");Se=!0,fe.push({content:Nt,scale:null,font:null,textColor:null})}}return new Ln(fe)},Ln.prototype.evaluate=function(S){return new Nn(this.sections.map(function(R){var X=R.content.evaluate(S);return Zn(X)===kn?new Bn("",X,null,null,null):new Bn(ur(X),null,R.scale?R.scale.evaluate(S):null,R.font?R.font.evaluate(S).join(","):null,R.textColor?R.textColor.evaluate(S):null)}))},Ln.prototype.eachChild=function(S){for(var R=0,X=this.sections;R<X.length;R+=1){var fe=X[R];S(fe.content),fe.scale&&S(fe.scale),fe.font&&S(fe.font),fe.textColor&&S(fe.textColor)}},Ln.prototype.outputDefined=function(){return!1},Ln.prototype.serialize=function(){for(var S=["format"],R=0,X=this.sections;R<X.length;R+=1){var fe=X[R];S.push(fe.content.serialize());var Se={};fe.scale&&(Se["font-scale"]=fe.scale.serialize()),fe.font&&(Se["text-font"]=fe.font.serialize()),fe.textColor&&(Se["text-color"]=fe.textColor.serialize()),S.push(Se)}return S};var Wn=function(S){this.type=kn,this.input=S};Wn.parse=function(S,R){if(S.length!==2)return R.error("Expected two arguments.");var X=R.parse(S[1],1,Ft);return X?new Wn(X):R.error("No image name provided.")},Wn.prototype.evaluate=function(S){var R=this.input.evaluate(S),X=rr.fromString(R);return X&&S.availableImages&&(X.available=S.availableImages.indexOf(R)>-1),X},Wn.prototype.eachChild=function(S){S(this.input)},Wn.prototype.outputDefined=function(){return!1},Wn.prototype.serialize=function(){return["image",this.input.serialize()]};var Un={"to-boolean":Zt,"to-color":Ht,"to-number":Ot,"to-string":Ft},Xn=function(S,R){this.type=S,this.args=R};Xn.parse=function(S,R){if(S.length<2)return R.error("Expected at least one argument.");var X=S[0];if((X==="to-boolean"||X==="to-string")&&S.length!==2)return R.error("Expected one argument.");for(var fe=Un[X],Se=[],Oe=1;Oe<S.length;Oe++){var He=R.parse(S[Oe],Oe,Wt);if(!He)return null;Se.push(He)}return new Xn(fe,Se)},Xn.prototype.evaluate=function(S){if(this.type.kind==="boolean")return!!this.args[0].evaluate(S);if(this.type.kind==="color"){for(var R,X,fe=0,Se=this.args;fe<Se.length;fe+=1){if(X=null,(R=Se[fe].evaluate(S))instanceof Cn)return R;if(typeof R=="string"){var Oe=S.parseColor(R);if(Oe)return Oe}else if(Array.isArray(R)&&!(X=R.length<3||R.length>4?"Invalid rbga value "+JSON.stringify(R)+": expected an array containing either three or four numeric values.":Yn(R[0],R[1],R[2],R[3])))return new Cn(R[0]/255,R[1]/255,R[2]/255,R[3])}throw new on(X||"Could not parse color from value '"+(typeof R=="string"?R:String(JSON.stringify(R)))+"'")}if(this.type.kind==="number"){for(var He=null,Qe=0,ct=this.args;Qe<ct.length;Qe+=1){if((He=ct[Qe].evaluate(S))===null)return 0;var bt=Number(He);if(!isNaN(bt))return bt}throw new on("Could not convert "+JSON.stringify(He)+" to number.")}return this.type.kind==="formatted"?Nn.fromString(ur(this.args[0].evaluate(S))):this.type.kind==="resolvedImage"?rr.fromString(ur(this.args[0].evaluate(S))):ur(this.args[0].evaluate(S))},Xn.prototype.eachChild=function(S){this.args.forEach(S)},Xn.prototype.outputDefined=function(){return this.args.every(function(S){return S.outputDefined()})},Xn.prototype.serialize=function(){if(this.type.kind==="formatted")return new Ln([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Wn(this.args[0]).serialize();var S=["to-"+this.type.kind];return this.eachChild(function(R){S.push(R.serialize())}),S};var pr=["Unknown","Point","LineString","Polygon"],Kt=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Kt.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Kt.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?pr[this.feature.type]:this.feature.type:null},Kt.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Kt.prototype.canonicalID=function(){return this.canonical},Kt.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Kt.prototype.parseColor=function(S){var R=this._parseColorCache[S];return R||(R=this._parseColorCache[S]=Cn.parse(S)),R};var mn=function(S,R,X,fe){this.name=S,this.type=R,this._evaluate=X,this.args=fe};mn.prototype.evaluate=function(S){return this._evaluate(S,this.args)},mn.prototype.eachChild=function(S){this.args.forEach(S)},mn.prototype.outputDefined=function(){return!1},mn.prototype.serialize=function(){return[this.name].concat(this.args.map(function(S){return S.serialize()}))},mn.parse=function(S,R){var X,fe=S[0],Se=mn.definitions[fe];if(!Se)return R.error('Unknown expression "'+fe+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Oe=Array.isArray(Se)?Se[0]:Se.type,He=Array.isArray(Se)?[[Se[1],Se[2]]]:Se.overloads,Qe=He.filter(function(jr){var Dr=jr[0];return!Array.isArray(Dr)||Dr.length===S.length-1}),ct=null,bt=0,Tt=Qe;bt<Tt.length;bt+=1){var Nt=Tt[bt],qt=Nt[0],jt=Nt[1];ct=new gr(R.registry,R.path,null,R.scope);for(var an=[],cn=!1,Tn=1;Tn<S.length;Tn++){var _n=S[Tn],Fn=Array.isArray(qt)?qt[Tn-1]:qt.type,zn=ct.parse(_n,1+an.length,Fn);if(!zn){cn=!0;break}an.push(zn)}if(!cn)if(Array.isArray(qt)&&qt.length!==an.length)ct.error("Expected "+qt.length+" arguments, but found "+an.length+" instead.");else{for(var Hn=0;Hn<an.length;Hn++){var $n=Array.isArray(qt)?qt[Hn]:qt.type,or=an[Hn];ct.concat(Hn+1).checkSubtype($n,or.type)}if(ct.errors.length===0)return new mn(fe,Oe,jt,an)}}if(Qe.length===1)(X=R.errors).push.apply(X,ct.errors);else{for(var vr=(Qe.length?Qe:He).map(function(jr){return Dr=jr[0],Array.isArray(Dr)?"("+Dr.map(Jt).join(", ")+")":"("+Jt(Dr.type)+"...)";var Dr}).join(" | "),dr=[],_r=1;_r<S.length;_r++){var Tr=R.parse(S[_r],1+dr.length);if(!Tr)return null;dr.push(Jt(Tr.type))}R.error("Expected arguments of type "+vr+", but found ("+dr.join(", ")+") instead.")}return null},mn.register=function(S,R){for(var X in mn.definitions=R,R)S[X]=mn};var Dt=function(S,R,X){this.type=nn,this.locale=X,this.caseSensitive=S,this.diacriticSensitive=R};Dt.parse=function(S,R){if(S.length!==2)return R.error("Expected one argument.");var X=S[1];if(typeof X!="object"||Array.isArray(X))return R.error("Collator options argument must be an object.");var fe=R.parse(X["case-sensitive"]!==void 0&&X["case-sensitive"],1,Zt);if(!fe)return null;var Se=R.parse(X["diacritic-sensitive"]!==void 0&&X["diacritic-sensitive"],1,Zt);if(!Se)return null;var Oe=null;return X.locale&&!(Oe=R.parse(X.locale,1,Ft))?null:new Dt(fe,Se,Oe)},Dt.prototype.evaluate=function(S){return new Mn(this.caseSensitive.evaluate(S),this.diacriticSensitive.evaluate(S),this.locale?this.locale.evaluate(S):null)},Dt.prototype.eachChild=function(S){S(this.caseSensitive),S(this.diacriticSensitive),this.locale&&S(this.locale)},Dt.prototype.outputDefined=function(){return!1},Dt.prototype.serialize=function(){var S={};return S["case-sensitive"]=this.caseSensitive.serialize(),S["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(S.locale=this.locale.serialize()),["collator",S]};var Bt=8192;function Qt(S,R){S[0]=Math.min(S[0],R[0]),S[1]=Math.min(S[1],R[1]),S[2]=Math.max(S[2],R[0]),S[3]=Math.max(S[3],R[1])}function fn(S,R){return!(S[0]<=R[0]||S[2]>=R[2]||S[1]<=R[1]||S[3]>=R[3])}function dn(S,R){var X,fe=(180+S[0])/360,Se=(X=S[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+X*Math.PI/360)))/360),Oe=Math.pow(2,R.z);return[Math.round(fe*Oe*Bt),Math.round(Se*Oe*Bt)]}function xn(S,R,X){return R[1]>S[1]!=X[1]>S[1]&&S[0]<(X[0]-R[0])*(S[1]-R[1])/(X[1]-R[1])+R[0]}function sn(S,R){for(var X=!1,fe=0,Se=R.length;fe<Se;fe++)for(var Oe=R[fe],He=0,Qe=Oe.length;He<Qe-1;He++){if(ct=S,bt=Oe[He],Tt=Oe[He+1],Nt=void 0,qt=void 0,jt=void 0,an=void 0,Nt=ct[0]-bt[0],qt=ct[1]-bt[1],jt=ct[0]-Tt[0],an=ct[1]-Tt[1],Nt*an-jt*qt==0&&Nt*jt<=0&&qt*an<=0)return!1;xn(S,Oe[He],Oe[He+1])&&(X=!X)}var ct,bt,Tt,Nt,qt,jt,an;return X}function $t(S,R){for(var X=0;X<R.length;X++)if(sn(S,R[X]))return!0;return!1}function Yt(S,R,X,fe){var Se=S[0]-X[0],Oe=S[1]-X[1],He=R[0]-X[0],Qe=R[1]-X[1],ct=fe[0]-X[0],bt=fe[1]-X[1],Tt=Se*bt-ct*Oe,Nt=He*bt-ct*Qe;return Tt>0&&Nt<0||Tt<0&&Nt>0}function rn(S,R,X){for(var fe=0,Se=X;fe<Se.length;fe+=1)for(var Oe=Se[fe],He=0;He<Oe.length-1;++He)if(Qe=S,ct=R,bt=Oe[He],Tt=Oe[He+1],Nt=void 0,qt=void 0,jt=void 0,jt=[ct[0]-Qe[0],ct[1]-Qe[1]],Nt=[Tt[0]-bt[0],Tt[1]-bt[1]],qt=jt,Nt[0]*qt[1]-Nt[1]*qt[0]!=0&&Yt(Qe,ct,bt,Tt)&&Yt(bt,Tt,Qe,ct))return!0;var Qe,ct,bt,Tt,Nt,qt,jt;return!1}function ln(S,R){for(var X=0;X<S.length;++X)if(!sn(S[X],R))return!1;for(var fe=0;fe<S.length-1;++fe)if(rn(S[fe],S[fe+1],R))return!1;return!0}function An(S,R){for(var X=0;X<R.length;X++)if(ln(S,R[X]))return!0;return!1}function En(S,R,X){for(var fe=[],Se=0;Se<S.length;Se++){for(var Oe=[],He=0;He<S[Se].length;He++){var Qe=dn(S[Se][He],X);Qt(R,Qe),Oe.push(Qe)}fe.push(Oe)}return fe}function Rn(S,R,X){for(var fe=[],Se=0;Se<S.length;Se++){var Oe=En(S[Se],R,X);fe.push(Oe)}return fe}function jn(S,R,X,fe){if(S[0]<X[0]||S[0]>X[2]){var Se=.5*fe,Oe=S[0]-X[0]>Se?-fe:X[0]-S[0]>Se?fe:0;Oe===0&&(Oe=S[0]-X[2]>Se?-fe:X[2]-S[0]>Se?fe:0),S[0]+=Oe}Qt(R,S)}function Qn(S,R,X,fe){for(var Se=Math.pow(2,fe.z)*Bt,Oe=[fe.x*Bt,fe.y*Bt],He=[],Qe=0,ct=S;Qe<ct.length;Qe+=1)for(var bt=0,Tt=ct[Qe];bt<Tt.length;bt+=1){var Nt=Tt[bt],qt=[Nt.x+Oe[0],Nt.y+Oe[1]];jn(qt,R,X,Se),He.push(qt)}return He}function qn(S,R,X,fe){for(var Se=Math.pow(2,fe.z)*Bt,Oe=[fe.x*Bt,fe.y*Bt],He=[],Qe=0,ct=S;Qe<ct.length;Qe+=1){for(var bt=[],Tt=0,Nt=ct[Qe];Tt<Nt.length;Tt+=1){var qt=Nt[Tt],jt=[qt.x+Oe[0],qt.y+Oe[1]];Qt(R,jt),bt.push(jt)}He.push(bt)}if(R[2]-R[0]<=Se/2){(Fn=R)[0]=Fn[1]=1/0,Fn[2]=Fn[3]=-1/0;for(var an=0,cn=He;an<cn.length;an+=1)for(var Tn=0,_n=cn[an];Tn<_n.length;Tn+=1)jn(_n[Tn],R,X,Se)}var Fn;return He}var Kn=function(S,R){this.type=Zt,this.geojson=S,this.geometries=R};function tr(S){if(S instanceof mn&&(S.name==="get"&&S.args.length===1||S.name==="feature-state"||S.name==="has"&&S.args.length===1||S.name==="properties"||S.name==="geometry-type"||S.name==="id"||/^filter-/.test(S.name))||S instanceof Kn)return!1;var R=!0;return S.eachChild(function(X){R&&!tr(X)&&(R=!1)}),R}function Jn(S){if(S instanceof mn&&S.name==="feature-state")return!1;var R=!0;return S.eachChild(function(X){R&&!Jn(X)&&(R=!1)}),R}function hr(S,R){if(S instanceof mn&&R.indexOf(S.name)>=0)return!1;var X=!0;return S.eachChild(function(fe){X&&!hr(fe,R)&&(X=!1)}),X}Kn.parse=function(S,R){if(S.length!==2)return R.error("'within' expression requires exactly one argument, but found "+(S.length-1)+" instead.");if(ir(S[1])){var X=S[1];if(X.type==="FeatureCollection")for(var fe=0;fe<X.features.length;++fe){var Se=X.features[fe].geometry.type;if(Se==="Polygon"||Se==="MultiPolygon")return new Kn(X,X.features[fe].geometry)}else if(X.type==="Feature"){var Oe=X.geometry.type;if(Oe==="Polygon"||Oe==="MultiPolygon")return new Kn(X,X.geometry)}else if(X.type==="Polygon"||X.type==="MultiPolygon")return new Kn(X,X)}return R.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Kn.prototype.evaluate=function(S){if(S.geometry()!=null&&S.canonicalID()!=null){if(S.geometryType()==="Point")return function(R,X){var fe=[1/0,1/0,-1/0,-1/0],Se=[1/0,1/0,-1/0,-1/0],Oe=R.canonicalID();if(X.type==="Polygon"){var He=En(X.coordinates,Se,Oe),Qe=Qn(R.geometry(),fe,Se,Oe);if(!fn(fe,Se))return!1;for(var ct=0,bt=Qe;ct<bt.length;ct+=1)if(!sn(bt[ct],He))return!1}if(X.type==="MultiPolygon"){var Tt=Rn(X.coordinates,Se,Oe),Nt=Qn(R.geometry(),fe,Se,Oe);if(!fn(fe,Se))return!1;for(var qt=0,jt=Nt;qt<jt.length;qt+=1)if(!$t(jt[qt],Tt))return!1}return!0}(S,this.geometries);if(S.geometryType()==="LineString")return function(R,X){var fe=[1/0,1/0,-1/0,-1/0],Se=[1/0,1/0,-1/0,-1/0],Oe=R.canonicalID();if(X.type==="Polygon"){var He=En(X.coordinates,Se,Oe),Qe=qn(R.geometry(),fe,Se,Oe);if(!fn(fe,Se))return!1;for(var ct=0,bt=Qe;ct<bt.length;ct+=1)if(!ln(bt[ct],He))return!1}if(X.type==="MultiPolygon"){var Tt=Rn(X.coordinates,Se,Oe),Nt=qn(R.geometry(),fe,Se,Oe);if(!fn(fe,Se))return!1;for(var qt=0,jt=Nt;qt<jt.length;qt+=1)if(!An(jt[qt],Tt))return!1}return!0}(S,this.geometries)}return!1},Kn.prototype.eachChild=function(){},Kn.prototype.outputDefined=function(){return!0},Kn.prototype.serialize=function(){return["within",this.geojson]};var br=function(S,R){this.type=R.type,this.name=S,this.boundExpression=R};br.parse=function(S,R){if(S.length!==2||typeof S[1]!="string")return R.error("'var' expression requires exactly one string literal argument.");var X=S[1];return R.scope.has(X)?new br(X,R.scope.get(X)):R.error('Unknown variable "'+X+'". Make sure "'+X+'" has been bound in an enclosing "let" expression before using it.',1)},br.prototype.evaluate=function(S){return this.boundExpression.evaluate(S)},br.prototype.eachChild=function(){},br.prototype.outputDefined=function(){return!1},br.prototype.serialize=function(){return["var",this.name]};var gr=function(S,R,X,fe,Se){R===void 0&&(R=[]),fe===void 0&&(fe=new Et),Se===void 0&&(Se=[]),this.registry=S,this.path=R,this.key=R.map(function(Oe){return"["+Oe+"]"}).join(""),this.scope=fe,this.errors=Se,this.expectedType=X};function ar(S){if(S instanceof br)return ar(S.boundExpression);if(S instanceof mn&&S.name==="error"||S instanceof Dt||S instanceof Kn)return!1;var R=S instanceof Xn||S instanceof yn,X=!0;return S.eachChild(function(fe){X=R?X&&ar(fe):X&&fe instanceof en}),!!X&&tr(S)&&hr(S,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function mr(S,R){for(var X,fe,Se=S.length-1,Oe=0,He=Se,Qe=0;Oe<=He;)if(X=S[Qe=Math.floor((Oe+He)/2)],fe=S[Qe+1],X<=R){if(Qe===Se||R<fe)return Qe;Oe=Qe+1}else{if(!(X>R))throw new on("Input is not a number.");He=Qe-1}return 0}gr.prototype.parse=function(S,R,X,fe,Se){return Se===void 0&&(Se={}),R?this.concat(R,X,fe)._parse(S,Se):this._parse(S,Se)},gr.prototype._parse=function(S,R){function X(bt,Tt,Nt){return Nt==="assert"?new yn(Tt,[bt]):Nt==="coerce"?new Xn(Tt,[bt]):bt}if(S!==null&&typeof S!="string"&&typeof S!="boolean"&&typeof S!="number"||(S=["literal",S]),Array.isArray(S)){if(S.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var fe=S[0];if(typeof fe!="string")return this.error("Expression name must be a string, but found "+typeof fe+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var Se=this.registry[fe];if(Se){var Oe=Se.parse(S,this);if(!Oe)return null;if(this.expectedType){var He=this.expectedType,Qe=Oe.type;if(He.kind!=="string"&&He.kind!=="number"&&He.kind!=="boolean"&&He.kind!=="object"&&He.kind!=="array"||Qe.kind!=="value")if(He.kind!=="color"&&He.kind!=="formatted"&&He.kind!=="resolvedImage"||Qe.kind!=="value"&&Qe.kind!=="string"){if(this.checkSubtype(He,Qe))return null}else Oe=X(Oe,He,R.typeAnnotation||"coerce");else Oe=X(Oe,He,R.typeAnnotation||"assert")}if(!(Oe instanceof en)&&Oe.type.kind!=="resolvedImage"&&ar(Oe)){var ct=new Kt;try{Oe=new en(Oe.type,Oe.evaluate(ct))}catch(bt){return this.error(bt.message),null}}return Oe}return this.error('Unknown expression "'+fe+'". If you wanted a literal array, use ["literal", [...]].',0)}return S===void 0?this.error("'undefined' value invalid. Use null instead."):typeof S=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof S+" instead.")},gr.prototype.concat=function(S,R,X){var fe=typeof S=="number"?this.path.concat(S):this.path,Se=X?this.scope.concat(X):this.scope;return new gr(this.registry,fe,R||null,Se,this.errors)},gr.prototype.error=function(S){for(var R=[],X=arguments.length-1;X-- >0;)R[X]=arguments[X+1];var fe=""+this.key+R.map(function(Se){return"["+Se+"]"}).join("");this.errors.push(new _t(fe,S))},gr.prototype.checkSubtype=function(S,R){var X=tn(S,R);return X&&this.error(X),X};var kr=function(S,R,X){this.type=S,this.input=R,this.labels=[],this.outputs=[];for(var fe=0,Se=X;fe<Se.length;fe+=1){var Oe=Se[fe],He=Oe[0],Qe=Oe[1];this.labels.push(He),this.outputs.push(Qe)}};function Pr(S,R,X){return S*(1-X)+R*X}kr.parse=function(S,R){if(S.length-1<4)return R.error("Expected at least 4 arguments, but found only "+(S.length-1)+".");if((S.length-1)%2!=0)return R.error("Expected an even number of arguments.");var X=R.parse(S[1],1,Ot);if(!X)return null;var fe=[],Se=null;R.expectedType&&R.expectedType.kind!=="value"&&(Se=R.expectedType);for(var Oe=1;Oe<S.length;Oe+=2){var He=Oe===1?-1/0:S[Oe],Qe=S[Oe+1],ct=Oe,bt=Oe+1;if(typeof He!="number")return R.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ct);if(fe.length&&fe[fe.length-1][0]>=He)return R.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ct);var Tt=R.parse(Qe,bt,Se);if(!Tt)return null;Se=Se||Tt.type,fe.push([He,Tt])}return new kr(Se,X,fe)},kr.prototype.evaluate=function(S){var R=this.labels,X=this.outputs;if(R.length===1)return X[0].evaluate(S);var fe=this.input.evaluate(S);if(fe<=R[0])return X[0].evaluate(S);var Se=R.length;return fe>=R[Se-1]?X[Se-1].evaluate(S):X[mr(R,fe)].evaluate(S)},kr.prototype.eachChild=function(S){S(this.input);for(var R=0,X=this.outputs;R<X.length;R+=1)S(X[R])},kr.prototype.outputDefined=function(){return this.outputs.every(function(S){return S.outputDefined()})},kr.prototype.serialize=function(){for(var S=["step",this.input.serialize()],R=0;R<this.labels.length;R++)R>0&&S.push(this.labels[R]),S.push(this.outputs[R].serialize());return S};var wi=Object.freeze({__proto__:null,number:Pr,color:function(S,R,X){return new Cn(Pr(S.r,R.r,X),Pr(S.g,R.g,X),Pr(S.b,R.b,X),Pr(S.a,R.a,X))},array:function(S,R,X){return S.map(function(fe,Se){return Pr(fe,R[Se],X)})}}),Ti=.95047,Qi=1,bi=1.08883,zi=4/29,Oo=6/29,Rr=3*Oo*Oo,so=Oo*Oo*Oo,aa=Math.PI/180,ro=180/Math.PI;function Za(S){return S>so?Math.pow(S,.3333333333333333):S/Rr+zi}function fs(S){return S>Oo?S*S*S:Rr*(S-zi)}function _o(S){return 255*(S<=.0031308?12.92*S:1.055*Math.pow(S,.4166666666666667)-.055)}function Ra(S){return(S/=255)<=.04045?S/12.92:Math.pow((S+.055)/1.055,2.4)}function Fa(S){var R=Ra(S.r),X=Ra(S.g),fe=Ra(S.b),Se=Za((.4124564*R+.3575761*X+.1804375*fe)/Ti),Oe=Za((.2126729*R+.7151522*X+.072175*fe)/Qi);return{l:116*Oe-16,a:500*(Se-Oe),b:200*(Oe-Za((.0193339*R+.119192*X+.9503041*fe)/bi)),alpha:S.a}}function hs(S){var R=(S.l+16)/116,X=isNaN(S.a)?R:R+S.a/500,fe=isNaN(S.b)?R:R-S.b/200;return R=Qi*fs(R),X=Ti*fs(X),fe=bi*fs(fe),new Cn(_o(3.2404542*X-1.5371385*R-.4985314*fe),_o(-.969266*X+1.8760108*R+.041556*fe),_o(.0556434*X-.2040259*R+1.0572252*fe),S.alpha)}function sa(S,R,X){var fe=R-S;return S+X*(fe>180||fe<-180?fe-360*Math.round(fe/360):fe)}var ya={forward:Fa,reverse:hs,interpolate:function(S,R,X){return{l:Pr(S.l,R.l,X),a:Pr(S.a,R.a,X),b:Pr(S.b,R.b,X),alpha:Pr(S.alpha,R.alpha,X)}}},xa={forward:function(S){var R=Fa(S),X=R.l,fe=R.a,Se=R.b,Oe=Math.atan2(Se,fe)*ro;return{h:Oe<0?Oe+360:Oe,c:Math.sqrt(fe*fe+Se*Se),l:X,alpha:S.a}},reverse:function(S){var R=S.h*aa,X=S.c;return hs({l:S.l,a:Math.cos(R)*X,b:Math.sin(R)*X,alpha:S.alpha})},interpolate:function(S,R,X){return{h:sa(S.h,R.h,X),c:Pr(S.c,R.c,X),l:Pr(S.l,R.l,X),alpha:Pr(S.alpha,R.alpha,X)}}},gi=Object.freeze({__proto__:null,lab:ya,hcl:xa}),lo=function(S,R,X,fe,Se){this.type=S,this.operator=R,this.interpolation=X,this.input=fe,this.labels=[],this.outputs=[];for(var Oe=0,He=Se;Oe<He.length;Oe+=1){var Qe=He[Oe],ct=Qe[0],bt=Qe[1];this.labels.push(ct),this.outputs.push(bt)}};function Xa(S,R,X,fe){var Se=fe-X,Oe=S-X;return Se===0?0:R===1?Oe/Se:(Math.pow(R,Oe)-1)/(Math.pow(R,Se)-1)}lo.interpolationFactor=function(S,R,X,fe){var Se=0;if(S.name==="exponential")Se=Xa(R,S.base,X,fe);else if(S.name==="linear")Se=Xa(R,1,X,fe);else if(S.name==="cubic-bezier"){var Oe=S.controlPoints;Se=new f(Oe[0],Oe[1],Oe[2],Oe[3]).solve(Xa(R,1,X,fe))}return Se},lo.parse=function(S,R){var X=S[0],fe=S[1],Se=S[2],Oe=S.slice(3);if(!Array.isArray(fe)||fe.length===0)return R.error("Expected an interpolation type expression.",1);if(fe[0]==="linear")fe={name:"linear"};else if(fe[0]==="exponential"){var He=fe[1];if(typeof He!="number")return R.error("Exponential interpolation requires a numeric base.",1,1);fe={name:"exponential",base:He}}else{if(fe[0]!=="cubic-bezier")return R.error("Unknown interpolation type "+String(fe[0]),1,0);var Qe=fe.slice(1);if(Qe.length!==4||Qe.some(function(Tn){return typeof Tn!="number"||Tn<0||Tn>1}))return R.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);fe={name:"cubic-bezier",controlPoints:Qe}}if(S.length-1<4)return R.error("Expected at least 4 arguments, but found only "+(S.length-1)+".");if((S.length-1)%2!=0)return R.error("Expected an even number of arguments.");if(!(Se=R.parse(Se,2,Ot)))return null;var ct=[],bt=null;X==="interpolate-hcl"||X==="interpolate-lab"?bt=Ht:R.expectedType&&R.expectedType.kind!=="value"&&(bt=R.expectedType);for(var Tt=0;Tt<Oe.length;Tt+=2){var Nt=Oe[Tt],qt=Oe[Tt+1],jt=Tt+3,an=Tt+4;if(typeof Nt!="number")return R.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',jt);if(ct.length&&ct[ct.length-1][0]>=Nt)return R.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',jt);var cn=R.parse(qt,an,bt);if(!cn)return null;bt=bt||cn.type,ct.push([Nt,cn])}return bt.kind==="number"||bt.kind==="color"||bt.kind==="array"&&bt.itemType.kind==="number"&&typeof bt.N=="number"?new lo(bt,X,fe,Se,ct):R.error("Type "+Jt(bt)+" is not interpolatable.")},lo.prototype.evaluate=function(S){var R=this.labels,X=this.outputs;if(R.length===1)return X[0].evaluate(S);var fe=this.input.evaluate(S);if(fe<=R[0])return X[0].evaluate(S);var Se=R.length;if(fe>=R[Se-1])return X[Se-1].evaluate(S);var Oe=mr(R,fe),He=R[Oe],Qe=R[Oe+1],ct=lo.interpolationFactor(this.interpolation,fe,He,Qe),bt=X[Oe].evaluate(S),Tt=X[Oe+1].evaluate(S);return this.operator==="interpolate"?wi[this.type.kind.toLowerCase()](bt,Tt,ct):this.operator==="interpolate-hcl"?xa.reverse(xa.interpolate(xa.forward(bt),xa.forward(Tt),ct)):ya.reverse(ya.interpolate(ya.forward(bt),ya.forward(Tt),ct))},lo.prototype.eachChild=function(S){S(this.input);for(var R=0,X=this.outputs;R<X.length;R+=1)S(X[R])},lo.prototype.outputDefined=function(){return this.outputs.every(function(S){return S.outputDefined()})},lo.prototype.serialize=function(){var S;S=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var R=[this.operator,S,this.input.serialize()],X=0;X<this.labels.length;X++)R.push(this.labels[X],this.outputs[X].serialize());return R};var Na=function(S,R){this.type=S,this.args=R};Na.parse=function(S,R){if(S.length<2)return R.error("Expectected at least one argument.");var X=null,fe=R.expectedType;fe&&fe.kind!=="value"&&(X=fe);for(var Se=[],Oe=0,He=S.slice(1);Oe<He.length;Oe+=1){var Qe=He[Oe],ct=R.parse(Qe,1+Se.length,X,void 0,{typeAnnotation:"omit"});if(!ct)return null;X=X||ct.type,Se.push(ct)}var bt=fe&&Se.some(function(Tt){return tn(fe,Tt.type)});return new Na(bt?Wt:X,Se)},Na.prototype.evaluate=function(S){for(var R,X=null,fe=0,Se=0,Oe=this.args;Se<Oe.length&&(fe++,(X=Oe[Se].evaluate(S))&&X instanceof rr&&!X.available&&(R||(R=X.name),X=null,fe===this.args.length&&(X=R)),X===null);Se+=1);return X},Na.prototype.eachChild=function(S){this.args.forEach(S)},Na.prototype.outputDefined=function(){return this.args.every(function(S){return S.outputDefined()})},Na.prototype.serialize=function(){var S=["coalesce"];return this.eachChild(function(R){S.push(R.serialize())}),S};var ba=function(S,R){this.type=R.type,this.bindings=[].concat(S),this.result=R};ba.prototype.evaluate=function(S){return this.result.evaluate(S)},ba.prototype.eachChild=function(S){for(var R=0,X=this.bindings;R<X.length;R+=1)S(X[R][1]);S(this.result)},ba.parse=function(S,R){if(S.length<4)return R.error("Expected at least 3 arguments, but found "+(S.length-1)+" instead.");for(var X=[],fe=1;fe<S.length-1;fe+=2){var Se=S[fe];if(typeof Se!="string")return R.error("Expected string, but found "+typeof Se+" instead.",fe);if(/[^a-zA-Z0-9_]/.test(Se))return R.error("Variable names must contain only alphanumeric characters or '_'.",fe);var Oe=R.parse(S[fe+1],fe+1);if(!Oe)return null;X.push([Se,Oe])}var He=R.parse(S[S.length-1],S.length-1,R.expectedType,X);return He?new ba(X,He):null},ba.prototype.outputDefined=function(){return this.result.outputDefined()},ba.prototype.serialize=function(){for(var S=["let"],R=0,X=this.bindings;R<X.length;R+=1){var fe=X[R],Se=fe[0],Oe=fe[1];S.push(Se,Oe.serialize())}return S.push(this.result.serialize()),S};var ds=function(S,R,X){this.type=S,this.index=R,this.input=X};ds.parse=function(S,R){if(S.length!==3)return R.error("Expected 2 arguments, but found "+(S.length-1)+" instead.");var X=R.parse(S[1],1,Ot),fe=R.parse(S[2],2,gn(R.expectedType||Wt));if(!X||!fe)return null;var Se=fe.type;return new ds(Se.itemType,X,fe)},ds.prototype.evaluate=function(S){var R=this.index.evaluate(S),X=this.input.evaluate(S);if(R<0)throw new on("Array index out of bounds: "+R+" < 0.");if(R>=X.length)throw new on("Array index out of bounds: "+R+" > "+(X.length-1)+".");if(R!==Math.floor(R))throw new on("Array index must be an integer, but found "+R+" instead.");return X[R]},ds.prototype.eachChild=function(S){S(this.index),S(this.input)},ds.prototype.outputDefined=function(){return!1},ds.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var za=function(S,R){this.type=Zt,this.needle=S,this.haystack=R};za.parse=function(S,R){if(S.length!==3)return R.error("Expected 2 arguments, but found "+(S.length-1)+" instead.");var X=R.parse(S[1],1,Wt),fe=R.parse(S[2],2,Wt);return X&&fe?hn(X.type,[Zt,Ft,Ot,Lt,Wt])?new za(X,fe):R.error("Expected first argument to be of type boolean, string, number or null, but found "+Jt(X.type)+" instead"):null},za.prototype.evaluate=function(S){var R=this.needle.evaluate(S),X=this.haystack.evaluate(S);if(!X)return!1;if(!bn(R,["boolean","string","number","null"]))throw new on("Expected first argument to be of type boolean, string, number or null, but found "+Jt(Zn(R))+" instead.");if(!bn(X,["string","array"]))throw new on("Expected second argument to be of type array or string, but found "+Jt(Zn(X))+" instead.");return X.indexOf(R)>=0},za.prototype.eachChild=function(S){S(this.needle),S(this.haystack)},za.prototype.outputDefined=function(){return!0},za.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var ps=function(S,R,X){this.type=Ot,this.needle=S,this.haystack=R,this.fromIndex=X};ps.parse=function(S,R){if(S.length<=2||S.length>=5)return R.error("Expected 3 or 4 arguments, but found "+(S.length-1)+" instead.");var X=R.parse(S[1],1,Wt),fe=R.parse(S[2],2,Wt);if(!X||!fe)return null;if(!hn(X.type,[Zt,Ft,Ot,Lt,Wt]))return R.error("Expected first argument to be of type boolean, string, number or null, but found "+Jt(X.type)+" instead");if(S.length===4){var Se=R.parse(S[3],3,Ot);return Se?new ps(X,fe,Se):null}return new ps(X,fe)},ps.prototype.evaluate=function(S){var R=this.needle.evaluate(S),X=this.haystack.evaluate(S);if(!bn(R,["boolean","string","number","null"]))throw new on("Expected first argument to be of type boolean, string, number or null, but found "+Jt(Zn(R))+" instead.");if(!bn(X,["string","array"]))throw new on("Expected second argument to be of type array or string, but found "+Jt(Zn(X))+" instead.");if(this.fromIndex){var fe=this.fromIndex.evaluate(S);return X.indexOf(R,fe)}return X.indexOf(R)},ps.prototype.eachChild=function(S){S(this.needle),S(this.haystack),this.fromIndex&&S(this.fromIndex)},ps.prototype.outputDefined=function(){return!1},ps.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var S=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),S]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Ka=function(S,R,X,fe,Se,Oe){this.inputType=S,this.type=R,this.input=X,this.cases=fe,this.outputs=Se,this.otherwise=Oe};Ka.parse=function(S,R){if(S.length<5)return R.error("Expected at least 4 arguments, but found only "+(S.length-1)+".");if(S.length%2!=1)return R.error("Expected an even number of arguments.");var X,fe;R.expectedType&&R.expectedType.kind!=="value"&&(fe=R.expectedType);for(var Se={},Oe=[],He=2;He<S.length-1;He+=2){var Qe=S[He],ct=S[He+1];Array.isArray(Qe)||(Qe=[Qe]);var bt=R.concat(He);if(Qe.length===0)return bt.error("Expected at least one branch label.");for(var Tt=0,Nt=Qe;Tt<Nt.length;Tt+=1){var qt=Nt[Tt];if(typeof qt!="number"&&typeof qt!="string")return bt.error("Branch labels must be numbers or strings.");if(typeof qt=="number"&&Math.abs(qt)>Number.MAX_SAFE_INTEGER)return bt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof qt=="number"&&Math.floor(qt)!==qt)return bt.error("Numeric branch labels must be integer values.");if(X){if(bt.checkSubtype(X,Zn(qt)))return null}else X=Zn(qt);if(Se[String(qt)]!==void 0)return bt.error("Branch labels must be unique.");Se[String(qt)]=Oe.length}var jt=R.parse(ct,He,fe);if(!jt)return null;fe=fe||jt.type,Oe.push(jt)}var an=R.parse(S[1],1,Wt);if(!an)return null;var cn=R.parse(S[S.length-1],S.length-1,fe);return cn?an.type.kind!=="value"&&R.concat(1).checkSubtype(X,an.type)?null:new Ka(X,fe,an,Se,Oe,cn):null},Ka.prototype.evaluate=function(S){var R=this.input.evaluate(S);return(Zn(R)===this.inputType&&this.outputs[this.cases[R]]||this.otherwise).evaluate(S)},Ka.prototype.eachChild=function(S){S(this.input),this.outputs.forEach(S),S(this.otherwise)},Ka.prototype.outputDefined=function(){return this.outputs.every(function(S){return S.outputDefined()})&&this.otherwise.outputDefined()},Ka.prototype.serialize=function(){for(var S=this,R=["match",this.input.serialize()],X=[],fe={},Se=0,Oe=Object.keys(this.cases).sort();Se<Oe.length;Se+=1){var He=Oe[Se];(Nt=fe[this.cases[He]])===void 0?(fe[this.cases[He]]=X.length,X.push([this.cases[He],[He]])):X[Nt][1].push(He)}for(var Qe=function(jt){return S.inputType.kind==="number"?Number(jt):jt},ct=0,bt=X;ct<bt.length;ct+=1){var Tt=bt[ct],Nt=Tt[0],qt=Tt[1];qt.length===1?R.push(Qe(qt[0])):R.push(qt.map(Qe)),R.push(this.outputs[outputIndex$1].serialize())}return R.push(this.otherwise.serialize()),R};var gs=function(S,R,X){this.type=S,this.branches=R,this.otherwise=X};gs.parse=function(S,R){if(S.length<4)return R.error("Expected at least 3 arguments, but found only "+(S.length-1)+".");if(S.length%2!=0)return R.error("Expected an odd number of arguments.");var X;R.expectedType&&R.expectedType.kind!=="value"&&(X=R.expectedType);for(var fe=[],Se=1;Se<S.length-1;Se+=2){var Oe=R.parse(S[Se],Se,Zt);if(!Oe)return null;var He=R.parse(S[Se+1],Se+1,X);if(!He)return null;fe.push([Oe,He]),X=X||He.type}var Qe=R.parse(S[S.length-1],S.length-1,X);return Qe?new gs(X,fe,Qe):null},gs.prototype.evaluate=function(S){for(var R=0,X=this.branches;R<X.length;R+=1){var fe=X[R],Se=fe[0],Oe=fe[1];if(Se.evaluate(S))return Oe.evaluate(S)}return this.otherwise.evaluate(S)},gs.prototype.eachChild=function(S){for(var R=0,X=this.branches;R<X.length;R+=1){var fe=X[R],Se=fe[0],Oe=fe[1];S(Se),S(Oe)}S(this.otherwise)},gs.prototype.outputDefined=function(){return this.branches.every(function(S){return S[0],S[1].outputDefined()})&&this.otherwise.outputDefined()},gs.prototype.serialize=function(){var S=["case"];return this.eachChild(function(R){S.push(R.serialize())}),S};var Ba=function(S,R,X,fe){this.type=S,this.input=R,this.beginIndex=X,this.endIndex=fe};function _u(S,R){return S==="=="||S==="!="?R.kind==="boolean"||R.kind==="string"||R.kind==="number"||R.kind==="null"||R.kind==="value":R.kind==="string"||R.kind==="number"||R.kind==="value"}function Xl(S,R,X,fe){return fe.compare(R,X)===0}function Ls(S,R,X){var fe=S!=="=="&&S!=="!=";return function(){function Se(Oe,He,Qe){this.type=Zt,this.lhs=Oe,this.rhs=He,this.collator=Qe,this.hasUntypedArgument=Oe.type.kind==="value"||He.type.kind==="value"}return Se.parse=function(Oe,He){if(Oe.length!==3&&Oe.length!==4)return He.error("Expected two or three arguments.");var Qe=Oe[0],ct=He.parse(Oe[1],1,Wt);if(!ct)return null;if(!_u(Qe,ct.type))return He.concat(1).error('"'+Qe+`" comparisons are not supported for type '`+Jt(ct.type)+"'.");var bt=He.parse(Oe[2],2,Wt);if(!bt)return null;if(!_u(Qe,bt.type))return He.concat(2).error('"'+Qe+`" comparisons are not supported for type '`+Jt(bt.type)+"'.");if(ct.type.kind!==bt.type.kind&&ct.type.kind!=="value"&&bt.type.kind!=="value")return He.error("Cannot compare types '"+Jt(ct.type)+"' and '"+Jt(bt.type)+"'.");fe&&(ct.type.kind==="value"&&bt.type.kind!=="value"?ct=new yn(bt.type,[ct]):ct.type.kind!=="value"&&bt.type.kind==="value"&&(bt=new yn(ct.type,[bt])));var Tt=null;if(Oe.length===4){if(ct.type.kind!=="string"&&bt.type.kind!=="string"&&ct.type.kind!=="value"&&bt.type.kind!=="value")return He.error("Cannot use collator to compare non-string types.");if(!(Tt=He.parse(Oe[3],3,nn)))return null}return new Se(ct,bt,Tt)},Se.prototype.evaluate=function(Oe){var He=this.lhs.evaluate(Oe),Qe=this.rhs.evaluate(Oe);if(fe&&this.hasUntypedArgument){var ct=Zn(He),bt=Zn(Qe);if(ct.kind!==bt.kind||ct.kind!=="string"&&ct.kind!=="number")throw new on('Expected arguments for "'+S+'" to be (string, string) or (number, number), but found ('+ct.kind+", "+bt.kind+") instead.")}if(this.collator&&!fe&&this.hasUntypedArgument){var Tt=Zn(He),Nt=Zn(Qe);if(Tt.kind!=="string"||Nt.kind!=="string")return R(Oe,He,Qe)}return this.collator?X(Oe,He,Qe,this.collator.evaluate(Oe)):R(Oe,He,Qe)},Se.prototype.eachChild=function(Oe){Oe(this.lhs),Oe(this.rhs),this.collator&&Oe(this.collator)},Se.prototype.outputDefined=function(){return!0},Se.prototype.serialize=function(){var Oe=[S];return this.eachChild(function(He){Oe.push(He.serialize())}),Oe},Se}()}Ba.parse=function(S,R){if(S.length<=2||S.length>=5)return R.error("Expected 3 or 4 arguments, but found "+(S.length-1)+" instead.");var X=R.parse(S[1],1,Wt),fe=R.parse(S[2],2,Ot);if(!X||!fe)return null;if(!hn(X.type,[gn(Wt),Ft,Wt]))return R.error("Expected first argument to be of type array or string, but found "+Jt(X.type)+" instead");if(S.length===4){var Se=R.parse(S[3],3,Ot);return Se?new Ba(X.type,X,fe,Se):null}return new Ba(X.type,X,fe)},Ba.prototype.evaluate=function(S){var R=this.input.evaluate(S),X=this.beginIndex.evaluate(S);if(!bn(R,["string","array"]))throw new on("Expected first argument to be of type array or string, but found "+Jt(Zn(R))+" instead.");if(this.endIndex){var fe=this.endIndex.evaluate(S);return R.slice(X,fe)}return R.slice(X)},Ba.prototype.eachChild=function(S){S(this.input),S(this.beginIndex),this.endIndex&&S(this.endIndex)},Ba.prototype.outputDefined=function(){return!1},Ba.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var S=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),S]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var zu=Ls("==",function(S,R,X){return R===X},Xl),Bu=Ls("!=",function(S,R,X){return R!==X},function(S,R,X,fe){return!Xl(0,R,X,fe)}),Os=Ls("<",function(S,R,X){return R<X},function(S,R,X,fe){return fe.compare(R,X)<0}),ju=Ls(">",function(S,R,X){return R>X},function(S,R,X,fe){return fe.compare(R,X)>0}),cc=Ls("<=",function(S,R,X){return R<=X},function(S,R,X,fe){return fe.compare(R,X)<=0}),fc=Ls(">=",function(S,R,X){return R>=X},function(S,R,X,fe){return fe.compare(R,X)>=0}),Ps=function(S,R,X,fe,Se){this.type=Ft,this.number=S,this.locale=R,this.currency=X,this.minFractionDigits=fe,this.maxFractionDigits=Se};Ps.parse=function(S,R){if(S.length!==3)return R.error("Expected two arguments.");var X=R.parse(S[1],1,Ot);if(!X)return null;var fe=S[2];if(typeof fe!="object"||Array.isArray(fe))return R.error("NumberFormat options argument must be an object.");var Se=null;if(fe.locale&&!(Se=R.parse(fe.locale,1,Ft)))return null;var Oe=null;if(fe.currency&&!(Oe=R.parse(fe.currency,1,Ft)))return null;var He=null;if(fe["min-fraction-digits"]&&!(He=R.parse(fe["min-fraction-digits"],1,Ot)))return null;var Qe=null;return fe["max-fraction-digits"]&&!(Qe=R.parse(fe["max-fraction-digits"],1,Ot))?null:new Ps(X,Se,Oe,He,Qe)},Ps.prototype.evaluate=function(S){return new Intl.NumberFormat(this.locale?this.locale.evaluate(S):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(S):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(S):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(S):void 0}).format(this.number.evaluate(S))},Ps.prototype.eachChild=function(S){S(this.number),this.locale&&S(this.locale),this.currency&&S(this.currency),this.minFractionDigits&&S(this.minFractionDigits),this.maxFractionDigits&&S(this.maxFractionDigits)},Ps.prototype.outputDefined=function(){return!1},Ps.prototype.serialize=function(){var S={};return this.locale&&(S.locale=this.locale.serialize()),this.currency&&(S.currency=this.currency.serialize()),this.minFractionDigits&&(S["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(S["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),S]};var ja=function(S){this.type=Ot,this.input=S};ja.parse=function(S,R){if(S.length!==2)return R.error("Expected 1 argument, but found "+(S.length-1)+" instead.");var X=R.parse(S[1],1);return X?X.type.kind!=="array"&&X.type.kind!=="string"&&X.type.kind!=="value"?R.error("Expected argument of type string or array, but found "+Jt(X.type)+" instead."):new ja(X):null},ja.prototype.evaluate=function(S){var R=this.input.evaluate(S);if(typeof R=="string"||Array.isArray(R))return R.length;throw new on("Expected value to be of type string or array, but found "+Jt(Zn(R))+" instead.")},ja.prototype.eachChild=function(S){S(this.input)},ja.prototype.outputDefined=function(){return!1},ja.prototype.serialize=function(){var S=["length"];return this.eachChild(function(R){S.push(R.serialize())}),S};var tl={"==":zu,"!=":Bu,">":ju,"<":Os,">=":fc,"<=":cc,array:yn,at:ds,boolean:yn,case:gs,coalesce:Na,collator:Dt,format:Ln,image:Wn,in:za,"index-of":ps,interpolate:lo,"interpolate-hcl":lo,"interpolate-lab":lo,length:ja,let:ba,literal:en,match:Ka,number:yn,"number-format":Ps,object:yn,slice:Ba,step:kr,string:yn,"to-boolean":Xn,"to-color":Xn,"to-number":Xn,"to-string":Xn,var:br,within:Kn};function Rs(S,R){var X=R[0],fe=R[1],Se=R[2],Oe=R[3];X=X.evaluate(S),fe=fe.evaluate(S),Se=Se.evaluate(S);var He=Oe?Oe.evaluate(S):1,Qe=Yn(X,fe,Se,He);if(Qe)throw new on(Qe);return new Cn(X/255*He,fe/255*He,Se/255*He,He)}function Al(S,R){return S in R}function Fs(S,R){var X=R[S];return X===void 0?null:X}function _a(S){return{type:S}}function wu(S){return{result:"success",value:S}}function ms(S){return{result:"error",value:S}}function Ja(S){return S["property-type"]==="data-driven"||S["property-type"]==="cross-faded-data-driven"}function Qa(S){return!!S.expression&&S.expression.parameters.indexOf("zoom")>-1}function vs(S){return!!S.expression&&S.expression.interpolated}function $r(S){return S instanceof Number?"number":S instanceof String?"string":S instanceof Boolean?"boolean":Array.isArray(S)?"array":S===null?"null":typeof S}function nl(S){return typeof S=="object"&&S!==null&&!Array.isArray(S)}function hc(S){return S}function Kl(S,R){var X,fe,Se,Oe=R.type==="color",He=S.stops&&typeof S.stops[0][0]=="object",Qe=He||S.property!==void 0,ct=He||!Qe,bt=S.type||(vs(R)?"exponential":"interval");if(Oe&&((S=yt({},S)).stops&&(S.stops=S.stops.map(function(dr){return[dr[0],Cn.parse(dr[1])]})),S.default?S.default=Cn.parse(S.default):S.default=Cn.parse(R.default)),S.colorSpace&&S.colorSpace!=="rgb"&&!gi[S.colorSpace])throw new Error("Unknown color space: "+S.colorSpace);if(bt==="exponential")X=Jl;else if(bt==="interval")X=dc;else if(bt==="categorical"){X=Vu,fe=Object.create(null);for(var Tt=0,Nt=S.stops;Tt<Nt.length;Tt+=1){var qt=Nt[Tt];fe[qt[0]]=qt[1]}Se=typeof S.stops[0][0]}else{if(bt!=="identity")throw new Error('Unknown function type "'+bt+'"');X=pc}if(He){for(var jt={},an=[],cn=0;cn<S.stops.length;cn++){var Tn=S.stops[cn],_n=Tn[0].zoom;jt[_n]===void 0&&(jt[_n]={zoom:_n,type:S.type,property:S.property,default:S.default,stops:[]},an.push(_n)),jt[_n].stops.push([Tn[0].value,Tn[1]])}for(var Fn=[],zn=0,Hn=an;zn<Hn.length;zn+=1){var $n=Hn[zn];Fn.push([jt[$n].zoom,Kl(jt[$n],R)])}var or={name:"linear"};return{kind:"composite",interpolationType:or,interpolationFactor:lo.interpolationFactor.bind(void 0,or),zoomStops:Fn.map(function(dr){return dr[0]}),evaluate:function(dr,_r){var Tr=dr.zoom;return Jl({stops:Fn,base:S.base},R,Tr).evaluate(Tr,_r)}}}if(ct){var vr=bt==="exponential"?{name:"exponential",base:S.base!==void 0?S.base:1}:null;return{kind:"camera",interpolationType:vr,interpolationFactor:lo.interpolationFactor.bind(void 0,vr),zoomStops:S.stops.map(function(dr){return dr[0]}),evaluate:function(dr){var _r=dr.zoom;return X(S,R,_r,fe,Se)}}}return{kind:"source",evaluate:function(dr,_r){var Tr=_r&&_r.properties?_r.properties[S.property]:void 0;return Tr===void 0?rl(S.default,R.default):X(S,R,Tr,fe,Se)}}}function rl(S,R,X){return S!==void 0?S:R!==void 0?R:X!==void 0?X:void 0}function Vu(S,R,X,fe,Se){return rl(typeof X===Se?fe[X]:void 0,S.default,R.default)}function dc(S,R,X){if($r(X)!=="number")return rl(S.default,R.default);var fe=S.stops.length;if(fe===1||X<=S.stops[0][0])return S.stops[0][1];if(X>=S.stops[fe-1][0])return S.stops[fe-1][1];var Se=mr(S.stops.map(function(Oe){return Oe[0]}),X);return S.stops[Se][1]}function Jl(S,R,X){var fe=S.base!==void 0?S.base:1;if($r(X)!=="number")return rl(S.default,R.default);var Se=S.stops.length;if(Se===1||X<=S.stops[0][0])return S.stops[0][1];if(X>=S.stops[Se-1][0])return S.stops[Se-1][1];var Oe=mr(S.stops.map(function(Nt){return Nt[0]}),X),He=function(Nt,qt,jt,an){var cn=an-jt,Tn=Nt-jt;return cn===0?0:qt===1?Tn/cn:(Math.pow(qt,Tn)-1)/(Math.pow(qt,cn)-1)}(X,fe,S.stops[Oe][0],S.stops[Oe+1][0]),Qe=S.stops[Oe][1],ct=S.stops[Oe+1][1],bt=wi[R.type]||hc;if(S.colorSpace&&S.colorSpace!=="rgb"){var Tt=gi[S.colorSpace];bt=function(Nt,qt){return Tt.reverse(Tt.interpolate(Tt.forward(Nt),Tt.forward(qt),He))}}return typeof Qe.evaluate=="function"?{evaluate:function(){for(var Nt=[],qt=arguments.length;qt--;)Nt[qt]=arguments[qt];var jt=Qe.evaluate.apply(void 0,Nt),an=ct.evaluate.apply(void 0,Nt);if(jt!==void 0&&an!==void 0)return bt(jt,an,He)}}:bt(Qe,ct,He)}function pc(S,R,X){return R.type==="color"?X=Cn.parse(X):R.type==="formatted"?X=Nn.fromString(X.toString()):R.type==="resolvedImage"?X=rr.fromString(X.toString()):$r(X)===R.type||R.type==="enum"&&R.values[X]||(X=void 0),rl(X,S.default,R.default)}mn.register(tl,{error:[{kind:"error"},[Ft],function(S,R){var X=R[0];throw new on(X.evaluate(S))}],typeof:[Ft,[Wt],function(S,R){return Jt(Zn(R[0].evaluate(S)))}],"to-rgba":[gn(Ot,4),[Ht],function(S,R){return R[0].evaluate(S).toArray()}],rgb:[Ht,[Ot,Ot,Ot],Rs],rgba:[Ht,[Ot,Ot,Ot,Ot],Rs],has:{type:Zt,overloads:[[[Ft],function(S,R){return Al(R[0].evaluate(S),S.properties())}],[[Ft,Ut],function(S,R){var X=R[0],fe=R[1];return Al(X.evaluate(S),fe.evaluate(S))}]]},get:{type:Wt,overloads:[[[Ft],function(S,R){return Fs(R[0].evaluate(S),S.properties())}],[[Ft,Ut],function(S,R){var X=R[0],fe=R[1];return Fs(X.evaluate(S),fe.evaluate(S))}]]},"feature-state":[Wt,[Ft],function(S,R){return Fs(R[0].evaluate(S),S.featureState||{})}],properties:[Ut,[],function(S){return S.properties()}],"geometry-type":[Ft,[],function(S){return S.geometryType()}],id:[Wt,[],function(S){return S.id()}],zoom:[Ot,[],function(S){return S.globals.zoom}],"heatmap-density":[Ot,[],function(S){return S.globals.heatmapDensity||0}],"line-progress":[Ot,[],function(S){return S.globals.lineProgress||0}],accumulated:[Wt,[],function(S){return S.globals.accumulated===void 0?null:S.globals.accumulated}],"+":[Ot,_a(Ot),function(S,R){for(var X=0,fe=0,Se=R;fe<Se.length;fe+=1)X+=Se[fe].evaluate(S);return X}],"*":[Ot,_a(Ot),function(S,R){for(var X=1,fe=0,Se=R;fe<Se.length;fe+=1)X*=Se[fe].evaluate(S);return X}],"-":{type:Ot,overloads:[[[Ot,Ot],function(S,R){var X=R[0],fe=R[1];return X.evaluate(S)-fe.evaluate(S)}],[[Ot],function(S,R){return-R[0].evaluate(S)}]]},"/":[Ot,[Ot,Ot],function(S,R){var X=R[0],fe=R[1];return X.evaluate(S)/fe.evaluate(S)}],"%":[Ot,[Ot,Ot],function(S,R){var X=R[0],fe=R[1];return X.evaluate(S)%fe.evaluate(S)}],ln2:[Ot,[],function(){return Math.LN2}],pi:[Ot,[],function(){return Math.PI}],e:[Ot,[],function(){return Math.E}],"^":[Ot,[Ot,Ot],function(S,R){var X=R[0],fe=R[1];return Math.pow(X.evaluate(S),fe.evaluate(S))}],sqrt:[Ot,[Ot],function(S,R){var X=R[0];return Math.sqrt(X.evaluate(S))}],log10:[Ot,[Ot],function(S,R){var X=R[0];return Math.log(X.evaluate(S))/Math.LN10}],ln:[Ot,[Ot],function(S,R){var X=R[0];return Math.log(X.evaluate(S))}],log2:[Ot,[Ot],function(S,R){var X=R[0];return Math.log(X.evaluate(S))/Math.LN2}],sin:[Ot,[Ot],function(S,R){var X=R[0];return Math.sin(X.evaluate(S))}],cos:[Ot,[Ot],function(S,R){var X=R[0];return Math.cos(X.evaluate(S))}],tan:[Ot,[Ot],function(S,R){var X=R[0];return Math.tan(X.evaluate(S))}],asin:[Ot,[Ot],function(S,R){var X=R[0];return Math.asin(X.evaluate(S))}],acos:[Ot,[Ot],function(S,R){var X=R[0];return Math.acos(X.evaluate(S))}],atan:[Ot,[Ot],function(S,R){var X=R[0];return Math.atan(X.evaluate(S))}],min:[Ot,_a(Ot),function(S,R){return Math.min.apply(Math,R.map(function(X){return X.evaluate(S)}))}],max:[Ot,_a(Ot),function(S,R){return Math.max.apply(Math,R.map(function(X){return X.evaluate(S)}))}],abs:[Ot,[Ot],function(S,R){var X=R[0];return Math.abs(X.evaluate(S))}],round:[Ot,[Ot],function(S,R){var X=R[0].evaluate(S);return X<0?-Math.round(-X):Math.round(X)}],floor:[Ot,[Ot],function(S,R){var X=R[0];return Math.floor(X.evaluate(S))}],ceil:[Ot,[Ot],function(S,R){var X=R[0];return Math.ceil(X.evaluate(S))}],"filter-==":[Zt,[Ft,Wt],function(S,R){var X=R[0],fe=R[1];return S.properties()[X.value]===fe.value}],"filter-id-==":[Zt,[Wt],function(S,R){var X=R[0];return S.id()===X.value}],"filter-type-==":[Zt,[Ft],function(S,R){var X=R[0];return S.geometryType()===X.value}],"filter-<":[Zt,[Ft,Wt],function(S,R){var X=R[0],fe=R[1],Se=S.properties()[X.value],Oe=fe.value;return typeof Se==typeof Oe&&Se<Oe}],"filter-id-<":[Zt,[Wt],function(S,R){var X=R[0],fe=S.id(),Se=X.value;return typeof fe==typeof Se&&fe<Se}],"filter->":[Zt,[Ft,Wt],function(S,R){var X=R[0],fe=R[1],Se=S.properties()[X.value],Oe=fe.value;return typeof Se==typeof Oe&&Se>Oe}],"filter-id->":[Zt,[Wt],function(S,R){var X=R[0],fe=S.id(),Se=X.value;return typeof fe==typeof Se&&fe>Se}],"filter-<=":[Zt,[Ft,Wt],function(S,R){var X=R[0],fe=R[1],Se=S.properties()[X.value],Oe=fe.value;return typeof Se==typeof Oe&&Se<=Oe}],"filter-id-<=":[Zt,[Wt],function(S,R){var X=R[0],fe=S.id(),Se=X.value;return typeof fe==typeof Se&&fe<=Se}],"filter->=":[Zt,[Ft,Wt],function(S,R){var X=R[0],fe=R[1],Se=S.properties()[X.value],Oe=fe.value;return typeof Se==typeof Oe&&Se>=Oe}],"filter-id->=":[Zt,[Wt],function(S,R){var X=R[0],fe=S.id(),Se=X.value;return typeof fe==typeof Se&&fe>=Se}],"filter-has":[Zt,[Wt],function(S,R){return R[0].value in S.properties()}],"filter-has-id":[Zt,[],function(S){return S.id()!==null&&S.id()!==void 0}],"filter-type-in":[Zt,[gn(Ft)],function(S,R){return R[0].value.indexOf(S.geometryType())>=0}],"filter-id-in":[Zt,[gn(Wt)],function(S,R){return R[0].value.indexOf(S.id())>=0}],"filter-in-small":[Zt,[Ft,gn(Wt)],function(S,R){var X=R[0];return R[1].value.indexOf(S.properties()[X.value])>=0}],"filter-in-large":[Zt,[Ft,gn(Wt)],function(S,R){var X=R[0],fe=R[1];return function(Se,Oe,He,Qe){for(;He<=Qe;){var ct=He+Qe>>1;if(Oe[ct]===Se)return!0;Oe[ct]>Se?Qe=ct-1:He=ct+1}return!1}(S.properties()[X.value],fe.value,0,fe.value.length-1)}],all:{type:Zt,overloads:[[[Zt,Zt],function(S,R){var X=R[0],fe=R[1];return X.evaluate(S)&&fe.evaluate(S)}],[_a(Zt),function(S,R){for(var X=0,fe=R;X<fe.length;X+=1)if(!fe[X].evaluate(S))return!1;return!0}]]},any:{type:Zt,overloads:[[[Zt,Zt],function(S,R){var X=R[0],fe=R[1];return X.evaluate(S)||fe.evaluate(S)}],[_a(Zt),function(S,R){for(var X=0,fe=R;X<fe.length;X+=1)if(fe[X].evaluate(S))return!0;return!1}]]},"!":[Zt,[Zt],function(S,R){return!R[0].evaluate(S)}],"is-supported-script":[Zt,[Ft],function(S,R){var X=R[0],fe=S.globals&&S.globals.isSupportedScript;return!fe||fe(X.evaluate(S))}],upcase:[Ft,[Ft],function(S,R){return R[0].evaluate(S).toUpperCase()}],downcase:[Ft,[Ft],function(S,R){return R[0].evaluate(S).toLowerCase()}],concat:[Ft,_a(Wt),function(S,R){return R.map(function(X){return ur(X.evaluate(S))}).join("")}],"resolved-locale":[Ft,[nn],function(S,R){return R[0].evaluate(S).resolvedLocale()}]});var ys=function(S,R){this.expression=S,this._warningHistory={},this._evaluator=new Kt,this._defaultValue=R?function(X){return X.type==="color"&&nl(X.default)?new Cn(0,0,0,0):X.type==="color"?Cn.parse(X.default)||null:X.default===void 0?null:X.default}(R):null,this._enumValues=R&&R.type==="enum"?R.values:null};function Ns(S){return Array.isArray(S)&&S.length>0&&typeof S[0]=="string"&&S[0]in tl}function es(S,R){var X=new gr(tl,[],R?function(Se){var Oe={color:Ht,string:Ft,number:Ot,enum:Ft,boolean:Zt,formatted:On,resolvedImage:kn};return Se.type==="array"?gn(Oe[Se.value]||Wt,Se.length):Oe[Se.type]}(R):void 0),fe=X.parse(S,void 0,void 0,void 0,R&&R.type==="string"?{typeAnnotation:"coerce"}:void 0);return fe?wu(new ys(fe,R)):ms(X.errors)}ys.prototype.evaluateWithoutErrorHandling=function(S,R,X,fe,Se,Oe){return this._evaluator.globals=S,this._evaluator.feature=R,this._evaluator.featureState=X,this._evaluator.canonical=fe,this._evaluator.availableImages=Se||null,this._evaluator.formattedSection=Oe,this.expression.evaluate(this._evaluator)},ys.prototype.evaluate=function(S,R,X,fe,Se,Oe){this._evaluator.globals=S,this._evaluator.feature=R||null,this._evaluator.featureState=X||null,this._evaluator.canonical=fe,this._evaluator.availableImages=Se||null,this._evaluator.formattedSection=Oe||null;try{var He=this.expression.evaluate(this._evaluator);if(He==null||typeof He=="number"&&He!=He)return this._defaultValue;if(this._enumValues&&!(He in this._enumValues))throw new on("Expected value to be one of "+Object.keys(this._enumValues).map(function(Qe){return JSON.stringify(Qe)}).join(", ")+", but found "+JSON.stringify(He)+" instead.");return He}catch(Qe){return this._warningHistory[Qe.message]||(this._warningHistory[Qe.message]=!0,typeof console<"u"&&console.warn(Qe.message)),this._defaultValue}};var wa=function(S,R){this.kind=S,this._styleExpression=R,this.isStateDependent=S!=="constant"&&!Jn(R.expression)};wa.prototype.evaluateWithoutErrorHandling=function(S,R,X,fe,Se,Oe){return this._styleExpression.evaluateWithoutErrorHandling(S,R,X,fe,Se,Oe)},wa.prototype.evaluate=function(S,R,X,fe,Se,Oe){return this._styleExpression.evaluate(S,R,X,fe,Se,Oe)};var il=function(S,R,X,fe){this.kind=S,this.zoomStops=X,this._styleExpression=R,this.isStateDependent=S!=="camera"&&!Jn(R.expression),this.interpolationType=fe};function Uu(S,R){if((S=es(S,R)).result==="error")return S;var X=S.value.expression,fe=tr(X);if(!fe&&!Ja(R))return ms([new _t("","data expressions not supported")]);var Se=hr(X,["zoom"]);if(!Se&&!Qa(R))return ms([new _t("","zoom expressions not supported")]);var Oe=Ql(X);if(!Oe&&!Se)return ms([new _t("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(Oe instanceof _t)return ms([Oe]);if(Oe instanceof lo&&!vs(R))return ms([new _t("",'"interpolate" expressions cannot be used with this property')]);if(!Oe)return wu(new wa(fe?"constant":"source",S.value));var He=Oe instanceof lo?Oe.interpolation:void 0;return wu(new il(fe?"camera":"composite",S.value,Oe.labels,He))}il.prototype.evaluateWithoutErrorHandling=function(S,R,X,fe,Se,Oe){return this._styleExpression.evaluateWithoutErrorHandling(S,R,X,fe,Se,Oe)},il.prototype.evaluate=function(S,R,X,fe,Se,Oe){return this._styleExpression.evaluate(S,R,X,fe,Se,Oe)},il.prototype.interpolationFactor=function(S,R,X){return this.interpolationType?lo.interpolationFactor(this.interpolationType,S,R,X):0};var kl=function(S,R){this._parameters=S,this._specification=R,yt(this,Kl(this._parameters,this._specification))};function Ql(S){var R=null;if(S instanceof ba)R=Ql(S.result);else if(S instanceof Na)for(var X=0,fe=S.args;X<fe.length;X+=1){var Se=fe[X];if(R=Ql(Se))break}else(S instanceof kr||S instanceof lo)&&S.input instanceof mn&&S.input.name==="zoom"&&(R=S);return R instanceof _t||S.eachChild(function(Oe){var He=Ql(Oe);He instanceof _t?R=He:!R&&He?R=new _t("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):R&&He&&R!==He&&(R=new _t("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),R}function Xo(S){var R=S.key,X=S.value,fe=S.valueSpec||{},Se=S.objectElementValidators||{},Oe=S.style,He=S.styleSpec,Qe=[],ct=$r(X);if(ct!=="object")return[new dt(R,X,"object expected, "+ct+" found")];for(var bt in X){var Tt=bt.split(".")[0],Nt=fe[Tt]||fe["*"],qt=void 0;if(Se[Tt])qt=Se[Tt];else if(fe[Tt])qt=ua;else if(Se["*"])qt=Se["*"];else{if(!fe["*"]){Qe.push(new dt(R,X[bt],'unknown property "'+bt+'"'));continue}qt=ua}Qe=Qe.concat(qt({key:(R&&R+".")+bt,value:X[bt],valueSpec:Nt,style:Oe,styleSpec:He,object:X,objectKey:bt},X))}for(var jt in fe)Se[jt]||fe[jt].required&&fe[jt].default===void 0&&X[jt]===void 0&&Qe.push(new dt(R,X,'missing required property "'+jt+'"'));return Qe}function eu(S){var R=S.value,X=S.valueSpec,fe=S.style,Se=S.styleSpec,Oe=S.key,He=S.arrayElementValidator||ua;if($r(R)!=="array")return[new dt(Oe,R,"array expected, "+$r(R)+" found")];if(X.length&&R.length!==X.length)return[new dt(Oe,R,"array length "+X.length+" expected, length "+R.length+" found")];if(X["min-length"]&&R.length<X["min-length"])return[new dt(Oe,R,"array length at least "+X["min-length"]+" expected, length "+R.length+" found")];var Qe={type:X.value,values:X.values};Se.$version<7&&(Qe.function=X.function),$r(X.value)==="object"&&(Qe=X.value);for(var ct=[],bt=0;bt<R.length;bt++)ct=ct.concat(He({array:R,arrayIndex:bt,value:R[bt],valueSpec:Qe,style:fe,styleSpec:Se,key:Oe+"["+bt+"]"}));return ct}function Hu(S){var R=S.key,X=S.value,fe=S.valueSpec,Se=$r(X);return Se==="number"&&X!=X&&(Se="NaN"),Se!=="number"?[new dt(R,X,"number expected, "+Se+" found")]:"minimum"in fe&&X<fe.minimum?[new dt(R,X,X+" is less than the minimum value "+fe.minimum)]:"maximum"in fe&&X>fe.maximum?[new dt(R,X,X+" is greater than the maximum value "+fe.maximum)]:[]}function ol(S){var R,X,fe,Se=S.valueSpec,Oe=ht(S.value.type),He={},Qe=Oe!=="categorical"&&S.value.property===void 0,ct=!Qe,bt=$r(S.value.stops)==="array"&&$r(S.value.stops[0])==="array"&&$r(S.value.stops[0][0])==="object",Tt=Xo({key:S.key,value:S.value,valueSpec:S.styleSpec.function,style:S.style,styleSpec:S.styleSpec,objectElementValidators:{stops:function(jt){if(Oe==="identity")return[new dt(jt.key,jt.value,'identity function may not have a "stops" property')];var an=[],cn=jt.value;return an=an.concat(eu({key:jt.key,value:cn,valueSpec:jt.valueSpec,style:jt.style,styleSpec:jt.styleSpec,arrayElementValidator:Nt})),$r(cn)==="array"&&cn.length===0&&an.push(new dt(jt.key,cn,"array must have at least one stop")),an},default:function(jt){return ua({key:jt.key,value:jt.value,valueSpec:Se,style:jt.style,styleSpec:jt.styleSpec})}}});return Oe==="identity"&&Qe&&Tt.push(new dt(S.key,S.value,'missing required property "property"')),Oe==="identity"||S.value.stops||Tt.push(new dt(S.key,S.value,'missing required property "stops"')),Oe==="exponential"&&S.valueSpec.expression&&!vs(S.valueSpec)&&Tt.push(new dt(S.key,S.value,"exponential functions not supported")),S.styleSpec.$version>=8&&(ct&&!Ja(S.valueSpec)?Tt.push(new dt(S.key,S.value,"property functions not supported")):Qe&&!Qa(S.valueSpec)&&Tt.push(new dt(S.key,S.value,"zoom functions not supported"))),Oe!=="categorical"&&!bt||S.value.property!==void 0||Tt.push(new dt(S.key,S.value,'"property" property is required')),Tt;function Nt(jt){var an=[],cn=jt.value,Tn=jt.key;if($r(cn)!=="array")return[new dt(Tn,cn,"array expected, "+$r(cn)+" found")];if(cn.length!==2)return[new dt(Tn,cn,"array length 2 expected, length "+cn.length+" found")];if(bt){if($r(cn[0])!=="object")return[new dt(Tn,cn,"object expected, "+$r(cn[0])+" found")];if(cn[0].zoom===void 0)return[new dt(Tn,cn,"object stop key must have zoom")];if(cn[0].value===void 0)return[new dt(Tn,cn,"object stop key must have value")];if(fe&&fe>ht(cn[0].zoom))return[new dt(Tn,cn[0].zoom,"stop zoom values must appear in ascending order")];ht(cn[0].zoom)!==fe&&(fe=ht(cn[0].zoom),X=void 0,He={}),an=an.concat(Xo({key:Tn+"[0]",value:cn[0],valueSpec:{zoom:{}},style:jt.style,styleSpec:jt.styleSpec,objectElementValidators:{zoom:Hu,value:qt}}))}else an=an.concat(qt({key:Tn+"[0]",value:cn[0],valueSpec:{},style:jt.style,styleSpec:jt.styleSpec},cn));return Ns(kt(cn[1]))?an.concat([new dt(Tn+"[1]",cn[1],"expressions are not allowed in function stops.")]):an.concat(ua({key:Tn+"[1]",value:cn[1],valueSpec:Se,style:jt.style,styleSpec:jt.styleSpec}))}function qt(jt,an){var cn=$r(jt.value),Tn=ht(jt.value),_n=jt.value!==null?jt.value:an;if(R){if(cn!==R)return[new dt(jt.key,_n,cn+" stop domain type must match previous stop domain type "+R)]}else R=cn;if(cn!=="number"&&cn!=="string"&&cn!=="boolean")return[new dt(jt.key,_n,"stop domain value must be a number, string, or boolean")];if(cn!=="number"&&Oe!=="categorical"){var Fn="number expected, "+cn+" found";return Ja(Se)&&Oe===void 0&&(Fn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new dt(jt.key,_n,Fn)]}return Oe!=="categorical"||cn!=="number"||isFinite(Tn)&&Math.floor(Tn)===Tn?Oe!=="categorical"&&cn==="number"&&X!==void 0&&Tn<X?[new dt(jt.key,_n,"stop domain values must appear in ascending order")]:(X=Tn,Oe==="categorical"&&Tn in He?[new dt(jt.key,_n,"stop domain values must be unique")]:(He[Tn]=!0,[])):[new dt(jt.key,_n,"integer expected, found "+Tn)]}}function zs(S){var R=(S.expressionContext==="property"?Uu:es)(kt(S.value),S.valueSpec);if(R.result==="error")return R.value.map(function(fe){return new dt(""+S.key+fe.key,S.value,fe.message)});var X=R.value.expression||R.value._styleExpression.expression;if(S.expressionContext==="property"&&S.propertyKey==="text-font"&&!X.outputDefined())return[new dt(S.key,S.value,'Invalid data expression for "'+S.propertyKey+'". Output values must be contained as literals within the expression.')];if(S.expressionContext==="property"&&S.propertyType==="layout"&&!Jn(X))return[new dt(S.key,S.value,'"feature-state" data expressions are not supported with layout properties.')];if(S.expressionContext==="filter"&&!Jn(X))return[new dt(S.key,S.value,'"feature-state" data expressions are not supported with filters.')];if(S.expressionContext&&S.expressionContext.indexOf("cluster")===0){if(!hr(X,["zoom","feature-state"]))return[new dt(S.key,S.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(S.expressionContext==="cluster-initial"&&!tr(X))return[new dt(S.key,S.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function al(S){var R=S.key,X=S.value,fe=S.valueSpec,Se=[];return Array.isArray(fe.values)?fe.values.indexOf(ht(X))===-1&&Se.push(new dt(R,X,"expected one of ["+fe.values.join(", ")+"], "+JSON.stringify(X)+" found")):Object.keys(fe.values).indexOf(ht(X))===-1&&Se.push(new dt(R,X,"expected one of ["+Object.keys(fe.values).join(", ")+"], "+JSON.stringify(X)+" found")),Se}function Bs(S){if(S===!0||S===!1)return!0;if(!Array.isArray(S)||S.length===0)return!1;switch(S[0]){case"has":return S.length>=2&&S[1]!=="$id"&&S[1]!=="$type";case"in":return S.length>=3&&(typeof S[1]!="string"||Array.isArray(S[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return S.length!==3||Array.isArray(S[1])||Array.isArray(S[2]);case"any":case"all":for(var R=0,X=S.slice(1);R<X.length;R+=1){var fe=X[R];if(!Bs(fe)&&typeof fe!="boolean")return!1}return!0;default:return!0}}kl.deserialize=function(S){return new kl(S._parameters,S._specification)},kl.serialize=function(S){return{_parameters:S._parameters,_specification:S._specification}};var js={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Sl(S){if(S==null)return{filter:function(){return!0},needGeometry:!1};Bs(S)||(S=xs(S));var R=es(S,js);if(R.result==="error")throw new Error(R.value.map(function(X){return X.key+": "+X.message}).join(", "));return{filter:function(X,fe,Se){return R.value.evaluate(X,fe,{},Se)},needGeometry:fi(S)}}function tu(S,R){return S<R?-1:S>R?1:0}function fi(S){if(!Array.isArray(S))return!1;if(S[0]==="within")return!0;for(var R=1;R<S.length;R++)if(fi(S[R]))return!0;return!1}function xs(S){if(!S)return!0;var R,X=S[0];return S.length<=1?X!=="any":X==="=="?wo(S[1],S[2],"=="):X==="!="?ui(wo(S[1],S[2],"==")):X==="<"||X===">"||X==="<="||X===">="?wo(S[1],S[2],X):X==="any"?(R=S.slice(1),["any"].concat(R.map(xs))):X==="all"?["all"].concat(S.slice(1).map(xs)):X==="none"?["all"].concat(S.slice(1).map(xs).map(ui)):X==="in"?Ta(S[1],S.slice(2)):X==="!in"?ui(Ta(S[1],S.slice(2))):X==="has"?ni(S[1]):X==="!has"?ui(ni(S[1])):X!=="within"||S}function wo(S,R,X){switch(S){case"$type":return["filter-type-"+X,R];case"$id":return["filter-id-"+X,R];default:return["filter-"+X,S,R]}}function Ta(S,R){if(R.length===0)return!1;switch(S){case"$type":return["filter-type-in",["literal",R]];case"$id":return["filter-id-in",["literal",R]];default:return R.length>200&&!R.some(function(X){return typeof X!=typeof R[0]})?["filter-in-large",S,["literal",R.sort(tu)]]:["filter-in-small",S,["literal",R]]}}function ni(S){switch(S){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",S]}}function ui(S){return["!",S]}function Ko(S){return Bs(kt(S.value))?zs(yt({},S,{expressionContext:"filter",valueSpec:{value:"boolean"}})):sl(S)}function sl(S){var R=S.value,X=S.key;if($r(R)!=="array")return[new dt(X,R,"array expected, "+$r(R)+" found")];var fe,Se=S.styleSpec,Oe=[];if(R.length<1)return[new dt(X,R,"filter array must have at least 1 element")];switch(Oe=Oe.concat(al({key:X+"[0]",value:R[0],valueSpec:Se.filter_operator,style:S.style,styleSpec:S.styleSpec})),ht(R[0])){case"<":case"<=":case">":case">=":R.length>=2&&ht(R[1])==="$type"&&Oe.push(new dt(X,R,'"$type" cannot be use with operator "'+R[0]+'"'));case"==":case"!=":R.length!==3&&Oe.push(new dt(X,R,'filter array for operator "'+R[0]+'" must have 3 elements'));case"in":case"!in":R.length>=2&&(fe=$r(R[1]))!=="string"&&Oe.push(new dt(X+"[1]",R[1],"string expected, "+fe+" found"));for(var He=2;He<R.length;He++)fe=$r(R[He]),ht(R[1])==="$type"?Oe=Oe.concat(al({key:X+"["+He+"]",value:R[He],valueSpec:Se.geometry_type,style:S.style,styleSpec:S.styleSpec})):fe!=="string"&&fe!=="number"&&fe!=="boolean"&&Oe.push(new dt(X+"["+He+"]",R[He],"string, number, or boolean expected, "+fe+" found"));break;case"any":case"all":case"none":for(var Qe=1;Qe<R.length;Qe++)Oe=Oe.concat(sl({key:X+"["+Qe+"]",value:R[Qe],style:S.style,styleSpec:S.styleSpec}));break;case"has":case"!has":fe=$r(R[1]),R.length!==2?Oe.push(new dt(X,R,'filter array for "'+R[0]+'" operator must have 2 elements')):fe!=="string"&&Oe.push(new dt(X+"[1]",R[1],"string expected, "+fe+" found"));break;case"within":fe=$r(R[1]),R.length!==2?Oe.push(new dt(X,R,'filter array for "'+R[0]+'" operator must have 2 elements')):fe!=="object"&&Oe.push(new dt(X+"[1]",R[1],"object expected, "+fe+" found"))}return Oe}function El(S,R){var X=S.key,fe=S.style,Se=S.styleSpec,Oe=S.value,He=S.objectKey,Qe=Se[R+"_"+S.layerType];if(!Qe)return[];var ct=He.match(/^(.*)-transition$/);if(R==="paint"&&ct&&Qe[ct[1]]&&Qe[ct[1]].transition)return ua({key:X,value:Oe,valueSpec:Se.transition,style:fe,styleSpec:Se});var bt,Tt=S.valueSpec||Qe[He];if(!Tt)return[new dt(X,Oe,'unknown property "'+He+'"')];if($r(Oe)==="string"&&Ja(Tt)&&!Tt.tokens&&(bt=/^{([^}]+)}$/.exec(Oe)))return[new dt(X,Oe,'"'+He+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(bt[1])+" }`.")];var Nt=[];return S.layerType==="symbol"&&(He==="text-field"&&fe&&!fe.glyphs&&Nt.push(new dt(X,Oe,'use of "text-field" requires a style "glyphs" property')),He==="text-font"&&nl(kt(Oe))&&ht(Oe.type)==="identity"&&Nt.push(new dt(X,Oe,'"text-font" does not support identity functions'))),Nt.concat(ua({key:S.key,value:Oe,valueSpec:Tt,style:fe,styleSpec:Se,expressionContext:"property",propertyType:R,propertyKey:He}))}function nu(S){return El(S,"paint")}function Cl(S){return El(S,"layout")}function Dl(S){var R=[],X=S.value,fe=S.key,Se=S.style,Oe=S.styleSpec;X.type||X.ref||R.push(new dt(fe,X,'either "type" or "ref" is required'));var He,Qe=ht(X.type),ct=ht(X.ref);if(X.id)for(var bt=ht(X.id),Tt=0;Tt<S.arrayIndex;Tt++){var Nt=Se.layers[Tt];ht(Nt.id)===bt&&R.push(new dt(fe,X.id,'duplicate layer id "'+X.id+'", previously used at line '+Nt.id.__line__))}if("ref"in X)["type","source","source-layer","filter","layout"].forEach(function(an){an in X&&R.push(new dt(fe,X[an],'"'+an+'" is prohibited for ref layers'))}),Se.layers.forEach(function(an){ht(an.id)===ct&&(He=an)}),He?He.ref?R.push(new dt(fe,X.ref,"ref cannot reference another ref layer")):Qe=ht(He.type):R.push(new dt(fe,X.ref,'ref layer "'+ct+'" not found'));else if(Qe!=="background")if(X.source){var qt=Se.sources&&Se.sources[X.source],jt=qt&&ht(qt.type);qt?jt==="vector"&&Qe==="raster"?R.push(new dt(fe,X.source,'layer "'+X.id+'" requires a raster source')):jt==="raster"&&Qe!=="raster"?R.push(new dt(fe,X.source,'layer "'+X.id+'" requires a vector source')):jt!=="vector"||X["source-layer"]?jt==="raster-dem"&&Qe!=="hillshade"?R.push(new dt(fe,X.source,"raster-dem source can only be used with layer type 'hillshade'.")):Qe!=="line"||!X.paint||!X.paint["line-gradient"]||jt==="geojson"&&qt.lineMetrics||R.push(new dt(fe,X,'layer "'+X.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):R.push(new dt(fe,X,'layer "'+X.id+'" must specify a "source-layer"')):R.push(new dt(fe,X.source,'source "'+X.source+'" not found'))}else R.push(new dt(fe,X,'missing required property "source"'));return R=R.concat(Xo({key:fe,value:X,valueSpec:Oe.layer,style:S.style,styleSpec:S.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return ua({key:fe+".type",value:X.type,valueSpec:Oe.layer.type,style:S.style,styleSpec:S.styleSpec,object:X,objectKey:"type"})},filter:Ko,layout:function(an){return Xo({layer:X,key:an.key,value:an.value,style:an.style,styleSpec:an.styleSpec,objectElementValidators:{"*":function(cn){return Cl(yt({layerType:Qe},cn))}}})},paint:function(an){return Xo({layer:X,key:an.key,value:an.value,style:an.style,styleSpec:an.styleSpec,objectElementValidators:{"*":function(cn){return nu(yt({layerType:Qe},cn))}}})}}})),R}function la(S){var R=S.value,X=S.key,fe=$r(R);return fe!=="string"?[new dt(X,R,"string expected, "+fe+" found")]:[]}var bs={promoteId:function(S){var R=S.key,X=S.value;if($r(X)==="string")return la({key:R,value:X});var fe=[];for(var Se in X)fe.push.apply(fe,la({key:R+"."+Se,value:X[Se]}));return fe}};function _s(S){var R=S.value,X=S.key,fe=S.styleSpec,Se=S.style;if(!R.type)return[new dt(X,R,'"type" is required')];var Oe,He=ht(R.type);switch(He){case"vector":case"raster":case"raster-dem":return Xo({key:X,value:R,valueSpec:fe["source_"+He.replace("-","_")],style:S.style,styleSpec:fe,objectElementValidators:bs});case"geojson":if(Oe=Xo({key:X,value:R,valueSpec:fe.source_geojson,style:Se,styleSpec:fe,objectElementValidators:bs}),R.cluster)for(var Qe in R.clusterProperties){var ct=R.clusterProperties[Qe],bt=ct[0],Tt=ct[1],Nt=typeof bt=="string"?[bt,["accumulated"],["get",Qe]]:bt;Oe.push.apply(Oe,zs({key:X+"."+Qe+".map",value:Tt,expressionContext:"cluster-map"})),Oe.push.apply(Oe,zs({key:X+"."+Qe+".reduce",value:Nt,expressionContext:"cluster-reduce"}))}return Oe;case"video":return Xo({key:X,value:R,valueSpec:fe.source_video,style:Se,styleSpec:fe});case"image":return Xo({key:X,value:R,valueSpec:fe.source_image,style:Se,styleSpec:fe});case"canvas":return[new dt(X,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return al({key:X+".type",value:R.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:Se,styleSpec:fe})}}function Eo(S){var R=S.value,X=S.styleSpec,fe=X.light,Se=S.style,Oe=[],He=$r(R);if(R===void 0)return Oe;if(He!=="object")return Oe.concat([new dt("light",R,"object expected, "+He+" found")]);for(var Qe in R){var ct=Qe.match(/^(.*)-transition$/);Oe=ct&&fe[ct[1]]&&fe[ct[1]].transition?Oe.concat(ua({key:Qe,value:R[Qe],valueSpec:X.transition,style:Se,styleSpec:X})):fe[Qe]?Oe.concat(ua({key:Qe,value:R[Qe],valueSpec:fe[Qe],style:Se,styleSpec:X})):Oe.concat([new dt(Qe,R[Qe],'unknown property "'+Qe+'"')])}return Oe}var Il={"*":function(){return[]},array:eu,boolean:function(S){var R=S.value,X=S.key,fe=$r(R);return fe!=="boolean"?[new dt(X,R,"boolean expected, "+fe+" found")]:[]},number:Hu,color:function(S){var R=S.key,X=S.value,fe=$r(X);return fe!=="string"?[new dt(R,X,"color expected, "+fe+" found")]:Pn(X)===null?[new dt(R,X,'color expected, "'+X+'" found')]:[]},constants:mt,enum:al,filter:Ko,function:ol,layer:Dl,object:Xo,source:_s,light:Eo,string:la,formatted:function(S){return la(S).length===0?[]:zs(S)},resolvedImage:function(S){return la(S).length===0?[]:zs(S)}};function ua(S){var R=S.value,X=S.valueSpec,fe=S.styleSpec;return X.expression&&nl(ht(R))?ol(S):X.expression&&Ns(kt(R))?zs(S):X.type&&Il[X.type]?Il[X.type](S):Xo(yt({},S,{valueSpec:X.type?fe[X.type]:X}))}function uo(S){var R=S.value,X=S.key,fe=la(S);return fe.length||(R.indexOf("{fontstack}")===-1&&fe.push(new dt(X,R,'"glyphs" url must include a "{fontstack}" token')),R.indexOf("{range}")===-1&&fe.push(new dt(X,R,'"glyphs" url must include a "{range}" token'))),fe}function go(S,R){R===void 0&&(R=Ze);var X=[];return X=X.concat(ua({key:"",value:S,valueSpec:R.$root,styleSpec:R,style:S,objectElementValidators:{glyphs:uo,"*":function(){return[]}}})),S.constants&&(X=X.concat(mt({key:"constants",value:S.constants,style:S,styleSpec:R}))),_i(X)}function _i(S){return[].concat(S).sort(function(R,X){return R.line-X.line})}function mo(S){return function(){for(var R=[],X=arguments.length;X--;)R[X]=arguments[X];return _i(S.apply(this,R))}}go.source=mo(_s),go.light=mo(Eo),go.layer=mo(Dl),go.filter=mo(Ko),go.paintProperty=mo(nu),go.layoutProperty=mo(Cl);var Va=go,Vs=Va.light,Ma=Va.paintProperty,ws=Va.layoutProperty;function Po(S,R){var X=!1;if(R&&R.length)for(var fe=0,Se=R;fe<Se.length;fe+=1){var Oe=Se[fe];S.fire(new je(new Error(Oe.message))),X=!0}return X}var Us=ca,ts=3;function ca(S,R,X){var fe=this.cells=[];if(S instanceof ArrayBuffer){this.arrayBuffer=S;var Se=new Int32Array(this.arrayBuffer);S=Se[0],R=Se[1],X=Se[2],this.d=R+2*X;for(var Oe=0;Oe<this.d*this.d;Oe++){var He=Se[ts+Oe],Qe=Se[ts+Oe+1];fe.push(He===Qe?null:Se.subarray(He,Qe))}var ct=Se[ts+fe.length],bt=Se[ts+fe.length+1];this.keys=Se.subarray(ct,bt),this.bboxes=Se.subarray(bt),this.insert=this._insertReadonly}else{this.d=R+2*X;for(var Tt=0;Tt<this.d*this.d;Tt++)fe.push([]);this.keys=[],this.bboxes=[]}this.n=R,this.extent=S,this.padding=X,this.scale=R/S,this.uid=0;var Nt=X/R*S;this.min=-Nt,this.max=S+Nt}ca.prototype.insert=function(S,R,X,fe,Se){this._forEachCell(R,X,fe,Se,this._insertCell,this.uid++),this.keys.push(S),this.bboxes.push(R),this.bboxes.push(X),this.bboxes.push(fe),this.bboxes.push(Se)},ca.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ca.prototype._insertCell=function(S,R,X,fe,Se,Oe){this.cells[Se].push(Oe)},ca.prototype.query=function(S,R,X,fe,Se){var Oe=this.min,He=this.max;if(S<=Oe&&R<=Oe&&He<=X&&He<=fe&&!Se)return Array.prototype.slice.call(this.keys);var Qe=[];return this._forEachCell(S,R,X,fe,this._queryCell,Qe,{},Se),Qe},ca.prototype._queryCell=function(S,R,X,fe,Se,Oe,He,Qe){var ct=this.cells[Se];if(ct!==null)for(var bt=this.keys,Tt=this.bboxes,Nt=0;Nt<ct.length;Nt++){var qt=ct[Nt];if(He[qt]===void 0){var jt=4*qt;(Qe?Qe(Tt[jt+0],Tt[jt+1],Tt[jt+2],Tt[jt+3]):S<=Tt[jt+2]&&R<=Tt[jt+3]&&X>=Tt[jt+0]&&fe>=Tt[jt+1])?(He[qt]=!0,Oe.push(bt[qt])):He[qt]=!1}}},ca.prototype._forEachCell=function(S,R,X,fe,Se,Oe,He,Qe){for(var ct=this._convertToCellCoord(S),bt=this._convertToCellCoord(R),Tt=this._convertToCellCoord(X),Nt=this._convertToCellCoord(fe),qt=ct;qt<=Tt;qt++)for(var jt=bt;jt<=Nt;jt++){var an=this.d*jt+qt;if((!Qe||Qe(this._convertFromCellCoord(qt),this._convertFromCellCoord(jt),this._convertFromCellCoord(qt+1),this._convertFromCellCoord(jt+1)))&&Se.call(this,S,R,X,fe,an,Oe,He,Qe))return}},ca.prototype._convertFromCellCoord=function(S){return(S-this.padding)/this.scale},ca.prototype._convertToCellCoord=function(S){return Math.max(0,Math.min(this.d-1,Math.floor(S*this.scale)+this.padding))},ca.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var S=this.cells,R=ts+this.cells.length+1+1,X=0,fe=0;fe<this.cells.length;fe++)X+=this.cells[fe].length;var Se=new Int32Array(R+X+this.keys.length+this.bboxes.length);Se[0]=this.extent,Se[1]=this.n,Se[2]=this.padding;for(var Oe=R,He=0;He<S.length;He++){var Qe=S[He];Se[ts+He]=Oe,Se.set(Qe,Oe),Oe+=Qe.length}return Se[ts+S.length]=Oe,Se.set(this.keys,Oe),Oe+=this.keys.length,Se[ts+S.length+1]=Oe,Se.set(this.bboxes,Oe),Oe+=this.bboxes.length,Se.buffer};var fa=r.ImageData,Mi=r.ImageBitmap,Aa={};function Mr(S,R,X){X===void 0&&(X={}),Object.defineProperty(R,"_classRegistryKey",{value:S,writeable:!1}),Aa[S]={klass:R,omit:X.omit||[],shallow:X.shallow||[]}}for(var Ll in Mr("Object",Object),Us.serialize=function(S,R){var X=S.toArrayBuffer();return R&&R.push(X),{buffer:X}},Us.deserialize=function(S){return new Us(S.buffer)},Mr("Grid",Us),Mr("Color",Cn),Mr("Error",Error),Mr("ResolvedImage",rr),Mr("StylePropertyFunction",kl),Mr("StyleExpression",ys,{omit:["_evaluator"]}),Mr("ZoomDependentExpression",il),Mr("ZoomConstantExpression",wa),Mr("CompoundExpression",mn,{omit:["_evaluate"]}),tl)tl[Ll]._classRegistryKey||Mr("Expression_"+Ll,tl[Ll]);function Tu(S){return S&&typeof ArrayBuffer<"u"&&(S instanceof ArrayBuffer||S.constructor&&S.constructor.name==="ArrayBuffer")}function Ts(S){return Mi&&S instanceof Mi}function Ms(S,R){if(S==null||typeof S=="boolean"||typeof S=="number"||typeof S=="string"||S instanceof Boolean||S instanceof Number||S instanceof String||S instanceof Date||S instanceof RegExp)return S;if(Tu(S)||Ts(S))return R&&R.push(S),S;if(ArrayBuffer.isView(S)){var X=S;return R&&R.push(X.buffer),X}if(S instanceof fa)return R&&R.push(S.data.buffer),S;if(Array.isArray(S)){for(var fe=[],Se=0,Oe=S;Se<Oe.length;Se+=1){var He=Oe[Se];fe.push(Ms(He,R))}return fe}if(typeof S=="object"){var Qe=S.constructor,ct=Qe._classRegistryKey;if(!ct)throw new Error("can't serialize object of unregistered class");var bt=Qe.serialize?Qe.serialize(S,R):{};if(!Qe.serialize){for(var Tt in S)if(S.hasOwnProperty(Tt)&&!(Aa[ct].omit.indexOf(Tt)>=0)){var Nt=S[Tt];bt[Tt]=Aa[ct].shallow.indexOf(Tt)>=0?Nt:Ms(Nt,R)}S instanceof Error&&(bt.message=S.message)}if(bt.$name)throw new Error("$name property is reserved for worker serialization logic.");return ct!=="Object"&&(bt.$name=ct),bt}throw new Error("can't serialize object of type "+typeof S)}function Hs(S){if(S==null||typeof S=="boolean"||typeof S=="number"||typeof S=="string"||S instanceof Boolean||S instanceof Number||S instanceof String||S instanceof Date||S instanceof RegExp||Tu(S)||Ts(S)||ArrayBuffer.isView(S)||S instanceof fa)return S;if(Array.isArray(S))return S.map(Hs);if(typeof S=="object"){var R=S.$name||"Object",X=Aa[R].klass;if(!X)throw new Error("can't deserialize unregistered class "+R);if(X.deserialize)return X.deserialize(S);for(var fe=Object.create(X.prototype),Se=0,Oe=Object.keys(S);Se<Oe.length;Se+=1){var He=Oe[Se];if(He!=="$name"){var Qe=S[He];fe[He]=Aa[R].shallow.indexOf(He)>=0?Qe:Hs(Qe)}}return fe}throw new Error("can't deserialize object of type "+typeof S)}var ll=function(){this.first=!0};ll.prototype.update=function(S,R){var X=Math.floor(S);return this.first?(this.first=!1,this.lastIntegerZoom=X,this.lastIntegerZoomTime=0,this.lastZoom=S,this.lastFloorZoom=X,!0):(this.lastFloorZoom>X?(this.lastIntegerZoom=X+1,this.lastIntegerZoomTime=R):this.lastFloorZoom<X&&(this.lastIntegerZoom=X,this.lastIntegerZoomTime=R),S!==this.lastZoom&&(this.lastZoom=S,this.lastFloorZoom=X,!0))};var yr={"Latin-1 Supplement":function(S){return S>=128&&S<=255},Arabic:function(S){return S>=1536&&S<=1791},"Arabic Supplement":function(S){return S>=1872&&S<=1919},"Arabic Extended-A":function(S){return S>=2208&&S<=2303},"Hangul Jamo":function(S){return S>=4352&&S<=4607},"Unified Canadian Aboriginal Syllabics":function(S){return S>=5120&&S<=5759},Khmer:function(S){return S>=6016&&S<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(S){return S>=6320&&S<=6399},"General Punctuation":function(S){return S>=8192&&S<=8303},"Letterlike Symbols":function(S){return S>=8448&&S<=8527},"Number Forms":function(S){return S>=8528&&S<=8591},"Miscellaneous Technical":function(S){return S>=8960&&S<=9215},"Control Pictures":function(S){return S>=9216&&S<=9279},"Optical Character Recognition":function(S){return S>=9280&&S<=9311},"Enclosed Alphanumerics":function(S){return S>=9312&&S<=9471},"Geometric Shapes":function(S){return S>=9632&&S<=9727},"Miscellaneous Symbols":function(S){return S>=9728&&S<=9983},"Miscellaneous Symbols and Arrows":function(S){return S>=11008&&S<=11263},"CJK Radicals Supplement":function(S){return S>=11904&&S<=12031},"Kangxi Radicals":function(S){return S>=12032&&S<=12255},"Ideographic Description Characters":function(S){return S>=12272&&S<=12287},"CJK Symbols and Punctuation":function(S){return S>=12288&&S<=12351},Hiragana:function(S){return S>=12352&&S<=12447},Katakana:function(S){return S>=12448&&S<=12543},Bopomofo:function(S){return S>=12544&&S<=12591},"Hangul Compatibility Jamo":function(S){return S>=12592&&S<=12687},Kanbun:function(S){return S>=12688&&S<=12703},"Bopomofo Extended":function(S){return S>=12704&&S<=12735},"CJK Strokes":function(S){return S>=12736&&S<=12783},"Katakana Phonetic Extensions":function(S){return S>=12784&&S<=12799},"Enclosed CJK Letters and Months":function(S){return S>=12800&&S<=13055},"CJK Compatibility":function(S){return S>=13056&&S<=13311},"CJK Unified Ideographs Extension A":function(S){return S>=13312&&S<=19903},"Yijing Hexagram Symbols":function(S){return S>=19904&&S<=19967},"CJK Unified Ideographs":function(S){return S>=19968&&S<=40959},"Yi Syllables":function(S){return S>=40960&&S<=42127},"Yi Radicals":function(S){return S>=42128&&S<=42191},"Hangul Jamo Extended-A":function(S){return S>=43360&&S<=43391},"Hangul Syllables":function(S){return S>=44032&&S<=55215},"Hangul Jamo Extended-B":function(S){return S>=55216&&S<=55295},"Private Use Area":function(S){return S>=57344&&S<=63743},"CJK Compatibility Ideographs":function(S){return S>=63744&&S<=64255},"Arabic Presentation Forms-A":function(S){return S>=64336&&S<=65023},"Vertical Forms":function(S){return S>=65040&&S<=65055},"CJK Compatibility Forms":function(S){return S>=65072&&S<=65103},"Small Form Variants":function(S){return S>=65104&&S<=65135},"Arabic Presentation Forms-B":function(S){return S>=65136&&S<=65279},"Halfwidth and Fullwidth Forms":function(S){return S>=65280&&S<=65519}};function Ol(S){for(var R=0,X=S;R<X.length;R+=1)if(ns(X[R].charCodeAt(0)))return!0;return!1}function ns(S){return!(S!==746&&S!==747&&(S<4352||!(yr["Bopomofo Extended"](S)||yr.Bopomofo(S)||yr["CJK Compatibility Forms"](S)&&!(S>=65097&&S<=65103)||yr["CJK Compatibility Ideographs"](S)||yr["CJK Compatibility"](S)||yr["CJK Radicals Supplement"](S)||yr["CJK Strokes"](S)||!(!yr["CJK Symbols and Punctuation"](S)||S>=12296&&S<=12305||S>=12308&&S<=12319||S===12336)||yr["CJK Unified Ideographs Extension A"](S)||yr["CJK Unified Ideographs"](S)||yr["Enclosed CJK Letters and Months"](S)||yr["Hangul Compatibility Jamo"](S)||yr["Hangul Jamo Extended-A"](S)||yr["Hangul Jamo Extended-B"](S)||yr["Hangul Jamo"](S)||yr["Hangul Syllables"](S)||yr.Hiragana(S)||yr["Ideographic Description Characters"](S)||yr.Kanbun(S)||yr["Kangxi Radicals"](S)||yr["Katakana Phonetic Extensions"](S)||yr.Katakana(S)&&S!==12540||!(!yr["Halfwidth and Fullwidth Forms"](S)||S===65288||S===65289||S===65293||S>=65306&&S<=65310||S===65339||S===65341||S===65343||S>=65371&&S<=65503||S===65507||S>=65512&&S<=65519)||!(!yr["Small Form Variants"](S)||S>=65112&&S<=65118||S>=65123&&S<=65126)||yr["Unified Canadian Aboriginal Syllabics"](S)||yr["Unified Canadian Aboriginal Syllabics Extended"](S)||yr["Vertical Forms"](S)||yr["Yijing Hexagram Symbols"](S)||yr["Yi Syllables"](S)||yr["Yi Radicals"](S))))}function co(S){return!(ns(S)||function(R){return!!(yr["Latin-1 Supplement"](R)&&(R===167||R===169||R===174||R===177||R===188||R===189||R===190||R===215||R===247)||yr["General Punctuation"](R)&&(R===8214||R===8224||R===8225||R===8240||R===8241||R===8251||R===8252||R===8258||R===8263||R===8264||R===8265||R===8273)||yr["Letterlike Symbols"](R)||yr["Number Forms"](R)||yr["Miscellaneous Technical"](R)&&(R>=8960&&R<=8967||R>=8972&&R<=8991||R>=8996&&R<=9e3||R===9003||R>=9085&&R<=9114||R>=9150&&R<=9165||R===9167||R>=9169&&R<=9179||R>=9186&&R<=9215)||yr["Control Pictures"](R)&&R!==9251||yr["Optical Character Recognition"](R)||yr["Enclosed Alphanumerics"](R)||yr["Geometric Shapes"](R)||yr["Miscellaneous Symbols"](R)&&!(R>=9754&&R<=9759)||yr["Miscellaneous Symbols and Arrows"](R)&&(R>=11026&&R<=11055||R>=11088&&R<=11097||R>=11192&&R<=11243)||yr["CJK Symbols and Punctuation"](R)||yr.Katakana(R)||yr["Private Use Area"](R)||yr["CJK Compatibility Forms"](R)||yr["Small Form Variants"](R)||yr["Halfwidth and Fullwidth Forms"](R)||R===8734||R===8756||R===8757||R>=9984&&R<=10087||R>=10102&&R<=10131||R===65532||R===65533)}(S))}function As(S){return yr.Arabic(S)||yr["Arabic Supplement"](S)||yr["Arabic Extended-A"](S)||yr["Arabic Presentation Forms-A"](S)||yr["Arabic Presentation Forms-B"](S)}function ka(S){return S>=1424&&S<=2303||yr["Arabic Presentation Forms-A"](S)||yr["Arabic Presentation Forms-B"](S)}function ha(S,R){return!(!R&&ka(S)||S>=2304&&S<=3583||S>=3840&&S<=4255||yr.Khmer(S))}function Co(S){for(var R=0,X=S;R<X.length;R+=1)if(ka(X[R].charCodeAt(0)))return!0;return!1}var Ua="deferred",da="loading",rs="loaded",Pl="error",ks=null,Qr="unavailable",vo=null,Ro=function(S){S&&typeof S=="string"&&S.indexOf("NetworkError")>-1&&(Qr=Pl),ks&&ks(S)};function Ha(){Fo.fire(new Be("pluginStateChange",{pluginStatus:Qr,pluginURL:vo}))}var Fo=new ot,ul=function(){return Qr},cl=function(){if(Qr!==Ua||!vo)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Qr=da,Ha(),vo&&Rt({url:vo},function(S){S?Ro(S):(Qr=rs,Ha())})},No={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Qr===rs||No.applyArabicShaping!=null},isLoading:function(){return Qr===da},setState:function(S){Qr=S.pluginStatus,vo=S.pluginURL},isParsed:function(){return No.applyArabicShaping!=null&&No.processBidirectionalText!=null&&No.processStyledBidirectionalText!=null},getPluginURL:function(){return vo}},Xr=function(S,R){this.zoom=S,R?(this.now=R.now,this.fadeDuration=R.fadeDuration,this.zoomHistory=R.zoomHistory,this.transition=R.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ll,this.transition={})};Xr.prototype.isSupportedScript=function(S){return function(R,X){for(var fe=0,Se=R;fe<Se.length;fe+=1)if(!ha(Se[fe].charCodeAt(0),X))return!1;return!0}(S,No.isLoaded())},Xr.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Xr.prototype.getCrossfadeParameters=function(){var S=this.zoom,R=S-Math.floor(S),X=this.crossFadingFactor();return S>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:R+(1-R)*X}:{fromScale:.5,toScale:1,t:1-(1-X)*R}};var qa=function(S,R){this.property=S,this.value=R,this.expression=function(X,fe){if(nl(X))return new kl(X,fe);if(Ns(X)){var Se=Uu(X,fe);if(Se.result==="error")throw new Error(Se.value.map(function(He){return He.key+": "+He.message}).join(", "));return Se.value}var Oe=X;return typeof X=="string"&&fe.type==="color"&&(Oe=Cn.parse(X)),{kind:"constant",evaluate:function(){return Oe}}}(R===void 0?S.specification.default:R,S.specification)};qa.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},qa.prototype.possiblyEvaluate=function(S,R,X){return this.property.possiblyEvaluate(this,S,R,X)};var qs=function(S){this.property=S,this.value=new qa(S,void 0)};qs.prototype.transitioned=function(S,R){return new fl(this.property,this.value,R,c({},S.transition,this.transition),S.now)},qs.prototype.untransitioned=function(){return new fl(this.property,this.value,null,{},0)};var Sa=function(S){this._properties=S,this._values=Object.create(S.defaultTransitionablePropertyValues)};Sa.prototype.getValue=function(S){return E(this._values[S].value.value)},Sa.prototype.setValue=function(S,R){this._values.hasOwnProperty(S)||(this._values[S]=new qs(this._values[S].property)),this._values[S].value=new qa(this._values[S].property,R===null?void 0:E(R))},Sa.prototype.getTransition=function(S){return E(this._values[S].transition)},Sa.prototype.setTransition=function(S,R){this._values.hasOwnProperty(S)||(this._values[S]=new qs(this._values[S].property)),this._values[S].transition=E(R)||void 0},Sa.prototype.serialize=function(){for(var S={},R=0,X=Object.keys(this._values);R<X.length;R+=1){var fe=X[R],Se=this.getValue(fe);Se!==void 0&&(S[fe]=Se);var Oe=this.getTransition(fe);Oe!==void 0&&(S[fe+"-transition"]=Oe)}return S},Sa.prototype.transitioned=function(S,R){for(var X=new hl(this._properties),fe=0,Se=Object.keys(this._values);fe<Se.length;fe+=1){var Oe=Se[fe];X._values[Oe]=this._values[Oe].transitioned(S,R._values[Oe])}return X},Sa.prototype.untransitioned=function(){for(var S=new hl(this._properties),R=0,X=Object.keys(this._values);R<X.length;R+=1){var fe=X[R];S._values[fe]=this._values[fe].untransitioned()}return S};var fl=function(S,R,X,fe,Se){this.property=S,this.value=R,this.begin=Se+fe.delay||0,this.end=this.begin+fe.duration||0,S.specification.transition&&(fe.delay||fe.duration)&&(this.prior=X)};fl.prototype.possiblyEvaluate=function(S,R,X){var fe=S.now||0,Se=this.value.possiblyEvaluate(S,R,X),Oe=this.prior;if(Oe){if(fe>this.end)return this.prior=null,Se;if(this.value.isDataDriven())return this.prior=null,Se;if(fe<this.begin)return Oe.possiblyEvaluate(S,R,X);var He=(fe-this.begin)/(this.end-this.begin);return this.property.interpolate(Oe.possiblyEvaluate(S,R,X),Se,function(Qe){if(Qe<=0)return 0;if(Qe>=1)return 1;var ct=Qe*Qe,bt=ct*Qe;return 4*(Qe<.5?bt:3*(Qe-ct)+bt-.75)}(He))}return Se};var hl=function(S){this._properties=S,this._values=Object.create(S.defaultTransitioningPropertyValues)};hl.prototype.possiblyEvaluate=function(S,R,X){for(var fe=new Gs(this._properties),Se=0,Oe=Object.keys(this._values);Se<Oe.length;Se+=1){var He=Oe[Se];fe._values[He]=this._values[He].possiblyEvaluate(S,R,X)}return fe},hl.prototype.hasTransition=function(){for(var S=0,R=Object.keys(this._values);S<R.length;S+=1){var X=R[S];if(this._values[X].prior)return!0}return!1};var Ea=function(S){this._properties=S,this._values=Object.create(S.defaultPropertyValues)};Ea.prototype.getValue=function(S){return E(this._values[S].value)},Ea.prototype.setValue=function(S,R){this._values[S]=new qa(this._values[S].property,R===null?void 0:E(R))},Ea.prototype.serialize=function(){for(var S={},R=0,X=Object.keys(this._values);R<X.length;R+=1){var fe=X[R],Se=this.getValue(fe);Se!==void 0&&(S[fe]=Se)}return S},Ea.prototype.possiblyEvaluate=function(S,R,X){for(var fe=new Gs(this._properties),Se=0,Oe=Object.keys(this._values);Se<Oe.length;Se+=1){var He=Oe[Se];fe._values[He]=this._values[He].possiblyEvaluate(S,R,X)}return fe};var Ai=function(S,R,X){this.property=S,this.value=R,this.parameters=X};Ai.prototype.isConstant=function(){return this.value.kind==="constant"},Ai.prototype.constantOr=function(S){return this.value.kind==="constant"?this.value.value:S},Ai.prototype.evaluate=function(S,R,X,fe){return this.property.evaluate(this.value,this.parameters,S,R,X,fe)};var Gs=function(S){this._properties=S,this._values=Object.create(S.defaultPossiblyEvaluatedValues)};Gs.prototype.get=function(S){return this._values[S]};var Sr=function(S){this.specification=S};Sr.prototype.possiblyEvaluate=function(S,R){return S.expression.evaluate(R)},Sr.prototype.interpolate=function(S,R,X){var fe=wi[this.specification.type];return fe?fe(S,R,X):S};var Or=function(S,R){this.specification=S,this.overrides=R};Or.prototype.possiblyEvaluate=function(S,R,X,fe){return S.expression.kind==="constant"||S.expression.kind==="camera"?new Ai(this,{kind:"constant",value:S.expression.evaluate(R,null,{},X,fe)},R):new Ai(this,S.expression,R)},Or.prototype.interpolate=function(S,R,X){if(S.value.kind!=="constant"||R.value.kind!=="constant")return S;if(S.value.value===void 0||R.value.value===void 0)return new Ai(this,{kind:"constant",value:void 0},S.parameters);var fe=wi[this.specification.type];return fe?new Ai(this,{kind:"constant",value:fe(S.value.value,R.value.value,X)},S.parameters):S},Or.prototype.evaluate=function(S,R,X,fe,Se,Oe){return S.kind==="constant"?S.value:S.evaluate(R,X,fe,Se,Oe)};var Jo=function(S){function R(){S.apply(this,arguments)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype.possiblyEvaluate=function(X,fe,Se,Oe){if(X.value===void 0)return new Ai(this,{kind:"constant",value:void 0},fe);if(X.expression.kind==="constant"){var He=X.expression.evaluate(fe,null,{},Se,Oe),Qe=X.property.specification.type==="resolvedImage"&&typeof He!="string"?He.name:He,ct=this._calculate(Qe,Qe,Qe,fe);return new Ai(this,{kind:"constant",value:ct},fe)}if(X.expression.kind==="camera"){var bt=this._calculate(X.expression.evaluate({zoom:fe.zoom-1}),X.expression.evaluate({zoom:fe.zoom}),X.expression.evaluate({zoom:fe.zoom+1}),fe);return new Ai(this,{kind:"constant",value:bt},fe)}return new Ai(this,X.expression,fe)},R.prototype.evaluate=function(X,fe,Se,Oe,He,Qe){if(X.kind==="source"){var ct=X.evaluate(fe,Se,Oe,He,Qe);return this._calculate(ct,ct,ct,fe)}return X.kind==="composite"?this._calculate(X.evaluate({zoom:Math.floor(fe.zoom)-1},Se,Oe),X.evaluate({zoom:Math.floor(fe.zoom)},Se,Oe),X.evaluate({zoom:Math.floor(fe.zoom)+1},Se,Oe),fe):X.value},R.prototype._calculate=function(X,fe,Se,Oe){return Oe.zoom>Oe.zoomHistory.lastIntegerZoom?{from:X,to:fe}:{from:Se,to:fe}},R.prototype.interpolate=function(X){return X},R}(Or),Ga=function(S){this.specification=S};Ga.prototype.possiblyEvaluate=function(S,R,X,fe){if(S.value!==void 0){if(S.expression.kind==="constant"){var Se=S.expression.evaluate(R,null,{},X,fe);return this._calculate(Se,Se,Se,R)}return this._calculate(S.expression.evaluate(new Xr(Math.floor(R.zoom-1),R)),S.expression.evaluate(new Xr(Math.floor(R.zoom),R)),S.expression.evaluate(new Xr(Math.floor(R.zoom+1),R)),R)}},Ga.prototype._calculate=function(S,R,X,fe){return fe.zoom>fe.zoomHistory.lastIntegerZoom?{from:S,to:R}:{from:X,to:R}},Ga.prototype.interpolate=function(S){return S};var is=function(S){this.specification=S};is.prototype.possiblyEvaluate=function(S,R,X,fe){return!!S.expression.evaluate(R,null,{},X,fe)},is.prototype.interpolate=function(){return!1};var Zi=function(S){for(var R in this.properties=S,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],S){var X=S[R];X.specification.overridable&&this.overridableProperties.push(R);var fe=this.defaultPropertyValues[R]=new qa(X,void 0),Se=this.defaultTransitionablePropertyValues[R]=new qs(X);this.defaultTransitioningPropertyValues[R]=Se.untransitioned(),this.defaultPossiblyEvaluatedValues[R]=fe.possiblyEvaluate({})}};Mr("DataDrivenProperty",Or),Mr("DataConstantProperty",Sr),Mr("CrossFadedDataDrivenProperty",Jo),Mr("CrossFadedProperty",Ga),Mr("ColorRampProperty",is);var Wa="-transition",hi=function(S){function R(X,fe){if(S.call(this),this.id=X.id,this.type=X.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},X.type!=="custom"&&(this.metadata=X.metadata,this.minzoom=X.minzoom,this.maxzoom=X.maxzoom,X.type!=="background"&&(this.source=X.source,this.sourceLayer=X["source-layer"],this.filter=X.filter),fe.layout&&(this._unevaluatedLayout=new Ea(fe.layout)),fe.paint)){for(var Se in this._transitionablePaint=new Sa(fe.paint),X.paint)this.setPaintProperty(Se,X.paint[Se],{validate:!1});for(var Oe in X.layout)this.setLayoutProperty(Oe,X.layout[Oe],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Gs(fe.paint)}}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},R.prototype.getLayoutProperty=function(X){return X==="visibility"?this.visibility:this._unevaluatedLayout.getValue(X)},R.prototype.setLayoutProperty=function(X,fe,Se){if(Se===void 0&&(Se={}),fe!=null){var Oe="layers."+this.id+".layout."+X;if(this._validate(ws,Oe,X,fe,Se))return}X!=="visibility"?this._unevaluatedLayout.setValue(X,fe):this.visibility=fe},R.prototype.getPaintProperty=function(X){return y(X,Wa)?this._transitionablePaint.getTransition(X.slice(0,-11)):this._transitionablePaint.getValue(X)},R.prototype.setPaintProperty=function(X,fe,Se){if(Se===void 0&&(Se={}),fe!=null){var Oe="layers."+this.id+".paint."+X;if(this._validate(Ma,Oe,X,fe,Se))return!1}if(y(X,Wa))return this._transitionablePaint.setTransition(X.slice(0,-11),fe||void 0),!1;var He=this._transitionablePaint._values[X],Qe=He.property.specification["property-type"]==="cross-faded-data-driven",ct=He.value.isDataDriven(),bt=He.value;this._transitionablePaint.setValue(X,fe),this._handleSpecialPaintPropertyUpdate(X);var Tt=this._transitionablePaint._values[X].value;return Tt.isDataDriven()||ct||Qe||this._handleOverridablePaintPropertyUpdate(X,bt,Tt)},R.prototype._handleSpecialPaintPropertyUpdate=function(X){},R.prototype._handleOverridablePaintPropertyUpdate=function(X,fe,Se){return!1},R.prototype.isHidden=function(X){return!!(this.minzoom&&X<this.minzoom)||!!(this.maxzoom&&X>=this.maxzoom)||this.visibility==="none"},R.prototype.updateTransitions=function(X){this._transitioningPaint=this._transitionablePaint.transitioned(X,this._transitioningPaint)},R.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},R.prototype.recalculate=function(X,fe){X.getCrossfadeParameters&&(this._crossfadeParameters=X.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(X,void 0,fe)),this.paint=this._transitioningPaint.possiblyEvaluate(X,void 0,fe)},R.prototype.serialize=function(){var X={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(X.layout=X.layout||{},X.layout.visibility=this.visibility),h(X,function(fe,Se){return!(fe===void 0||Se==="layout"&&!Object.keys(fe).length||Se==="paint"&&!Object.keys(fe).length)})},R.prototype._validate=function(X,fe,Se,Oe,He){return He===void 0&&(He={}),(!He||He.validate!==!1)&&Po(this,X.call(Va,{key:fe,layerType:this.type,objectKey:Se,value:Oe,styleSpec:Ze,style:{glyphs:!0,sprite:!0}}))},R.prototype.is3D=function(){return!1},R.prototype.isTileClipped=function(){return!1},R.prototype.hasOffscreenPass=function(){return!1},R.prototype.resize=function(){},R.prototype.isStateDependent=function(){for(var X in this.paint._values){var fe=this.paint.get(X);if(fe instanceof Ai&&Ja(fe.property.specification)&&(fe.value.kind==="source"||fe.value.kind==="composite")&&fe.value.isStateDependent)return!0}return!1},R}(ot),qu={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Qo=function(S,R){this._structArray=S,this._pos1=R*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},mi=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Li(S,R){R===void 0&&(R=1);var X=0,fe=0;return{members:S.map(function(Se){var Oe,He=(Oe=Se.type,qu[Oe].BYTES_PER_ELEMENT),Qe=X=Ho(X,Math.max(R,He)),ct=Se.components||1;return fe=Math.max(fe,He),X+=He*ct,{name:Se.name,type:Se.type,components:ct,offset:Qe}}),size:Ho(X,Math.max(fe,R)),alignment:R}}function Ho(S,R){return Math.ceil(S/R)*R}mi.serialize=function(S,R){return S._trim(),R&&(S.isTransferred=!0,R.push(S.arrayBuffer)),{length:S.length,arrayBuffer:S.arrayBuffer}},mi.deserialize=function(S){var R=Object.create(this.prototype);return R.arrayBuffer=S.arrayBuffer,R.length=S.length,R.capacity=S.arrayBuffer.byteLength/R.bytesPerElement,R._refreshViews(),R},mi.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},mi.prototype.clear=function(){this.length=0},mi.prototype.resize=function(S){this.reserve(S),this.length=S},mi.prototype.reserve=function(S){if(S>this.capacity){this.capacity=Math.max(S,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var R=this.uint8;this._refreshViews(),R&&this.uint8.set(R)}},mi.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Ss=function(S){function R(){S.apply(this,arguments)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(X,fe){var Se=this.length;return this.resize(Se+1),this.emplace(Se,X,fe)},R.prototype.emplace=function(X,fe,Se){var Oe=2*X;return this.int16[Oe+0]=fe,this.int16[Oe+1]=Se,X},R}(mi);Ss.prototype.bytesPerElement=4,Mr("StructArrayLayout2i4",Ss);var Mu=function(S){function R(){S.apply(this,arguments)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(X,fe,Se,Oe){var He=this.length;return this.resize(He+1),this.emplace(He,X,fe,Se,Oe)},R.prototype.emplace=function(X,fe,Se,Oe,He){var Qe=4*X;return this.int16[Qe+0]=fe,this.int16[Qe+1]=Se,this.int16[Qe+2]=Oe,this.int16[Qe+3]=He,X},R}(mi);Mu.prototype.bytesPerElement=8,Mr("StructArrayLayout4i8",Mu);var Je=function(S){function R(){S.apply(this,arguments)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(X,fe,Se,Oe,He,Qe){var ct=this.length;return this.resize(ct+1),this.emplace(ct,X,fe,Se,Oe,He,Qe)},R.prototype.emplace=function(X,fe,Se,Oe,He,Qe,ct){var bt=6*X;return this.int16[bt+0]=fe,this.int16[bt+1]=Se,this.int16[bt+2]=Oe,this.int16[bt+3]=He,this.int16[bt+4]=Qe,this.int16[bt+5]=ct,X},R}(mi);Je.prototype.bytesPerElement=12,Mr("StructArrayLayout2i4i12",Je);var et=function(S){function R(){S.apply(this,arguments)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(X,fe,Se,Oe,He,Qe){var ct=this.length;return this.resize(ct+1),this.emplace(ct,X,fe,Se,Oe,He,Qe)},R.prototype.emplace=function(X,fe,Se,Oe,He,Qe,ct){var bt=4*X,Tt=8*X;return this.int16[bt+0]=fe,this.int16[bt+1]=Se,this.uint8[Tt+4]=Oe,this.uint8[Tt+5]=He,this.uint8[Tt+6]=Qe,this.uint8[Tt+7]=ct,X},R}(mi);et.prototype.bytesPerElement=8,Mr("StructArrayLayout2i4ub8",et);var ut=function(S){function R(){S.apply(this,arguments)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},R.prototype.emplaceBack=function(X,fe){var Se=this.length;return this.resize(Se+1),this.emplace(Se,X,fe)},R.prototype.emplace=function(X,fe,Se){var Oe=2*X;return this.float32[Oe+0]=fe,this.float32[Oe+1]=Se,X},R}(mi);ut.prototype.bytesPerElement=8,Mr("StructArrayLayout2f8",ut);var B=function(S){function R(){S.apply(this,arguments)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(X,fe,Se,Oe,He,Qe,ct,bt,Tt,Nt){var qt=this.length;return this.resize(qt+1),this.emplace(qt,X,fe,Se,Oe,He,Qe,ct,bt,Tt,Nt)},R.prototype.emplace=function(X,fe,Se,Oe,He,Qe,ct,bt,Tt,Nt,qt){var jt=10*X;return this.uint16[jt+0]=fe,this.uint16[jt+1]=Se,this.uint16[jt+2]=Oe,this.uint16[jt+3]=He,this.uint16[jt+4]=Qe,this.uint16[jt+5]=ct,this.uint16[jt+6]=bt,this.uint16[jt+7]=Tt,this.uint16[jt+8]=Nt,this.uint16[jt+9]=qt,X},R}(mi);B.prototype.bytesPerElement=20,Mr("StructArrayLayout10ui20",B);var $=function(S){function R(){S.apply(this,arguments)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(X,fe,Se,Oe,He,Qe,ct,bt,Tt,Nt,qt,jt){var an=this.length;return this.resize(an+1),this.emplace(an,X,fe,Se,Oe,He,Qe,ct,bt,Tt,Nt,qt,jt)},R.prototype.emplace=function(X,fe,Se,Oe,He,Qe,ct,bt,Tt,Nt,qt,jt,an){var cn=12*X;return this.int16[cn+0]=fe,this.int16[cn+1]=Se,this.int16[cn+2]=Oe,this.int16[cn+3]=He,this.uint16[cn+4]=Qe,this.uint16[cn+5]=ct,this.uint16[cn+6]=bt,this.uint16[cn+7]=Tt,this.int16[cn+8]=Nt,this.int16[cn+9]=qt,this.int16[cn+10]=jt,this.int16[cn+11]=an,X},R}(mi);$.prototype.bytesPerElement=24,Mr("StructArrayLayout4i4ui4i24",$);var W=function(S){function R(){S.apply(this,arguments)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},R.prototype.emplaceBack=function(X,fe,Se){var Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,X,fe,Se)},R.prototype.emplace=function(X,fe,Se,Oe){var He=3*X;return this.float32[He+0]=fe,this.float32[He+1]=Se,this.float32[He+2]=Oe,X},R}(mi);W.prototype.bytesPerElement=12,Mr("StructArrayLayout3f12",W);var I=function(S){function R(){S.apply(this,arguments)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},R.prototype.emplaceBack=function(X){var fe=this.length;return this.resize(fe+1),this.emplace(fe,X)},R.prototype.emplace=function(X,fe){var Se=1*X;return this.uint32[Se+0]=fe,X},R}(mi);I.prototype.bytesPerElement=4,Mr("StructArrayLayout1ul4",I);var G=function(S){function R(){S.apply(this,arguments)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(X,fe,Se,Oe,He,Qe,ct,bt,Tt){var Nt=this.length;return this.resize(Nt+1),this.emplace(Nt,X,fe,Se,Oe,He,Qe,ct,bt,Tt)},R.prototype.emplace=function(X,fe,Se,Oe,He,Qe,ct,bt,Tt,Nt){var qt=10*X,jt=5*X;return this.int16[qt+0]=fe,this.int16[qt+1]=Se,this.int16[qt+2]=Oe,this.int16[qt+3]=He,this.int16[qt+4]=Qe,this.int16[qt+5]=ct,this.uint32[jt+3]=bt,this.uint16[qt+8]=Tt,this.uint16[qt+9]=Nt,X},R}(mi);G.prototype.bytesPerElement=20,Mr("StructArrayLayout6i1ul2ui20",G);var te=function(S){function R(){S.apply(this,arguments)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(X,fe,Se,Oe,He,Qe){var ct=this.length;return this.resize(ct+1),this.emplace(ct,X,fe,Se,Oe,He,Qe)},R.prototype.emplace=function(X,fe,Se,Oe,He,Qe,ct){var bt=6*X;return this.int16[bt+0]=fe,this.int16[bt+1]=Se,this.int16[bt+2]=Oe,this.int16[bt+3]=He,this.int16[bt+4]=Qe,this.int16[bt+5]=ct,X},R}(mi);te.prototype.bytesPerElement=12,Mr("StructArrayLayout2i2i2i12",te);var ie=function(S){function R(){S.apply(this,arguments)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(X,fe,Se,Oe,He){var Qe=this.length;return this.resize(Qe+1),this.emplace(Qe,X,fe,Se,Oe,He)},R.prototype.emplace=function(X,fe,Se,Oe,He,Qe){var ct=4*X,bt=8*X;return this.float32[ct+0]=fe,this.float32[ct+1]=Se,this.float32[ct+2]=Oe,this.int16[bt+6]=He,this.int16[bt+7]=Qe,X},R}(mi);ie.prototype.bytesPerElement=16,Mr("StructArrayLayout2f1f2i16",ie);var he=function(S){function R(){S.apply(this,arguments)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},R.prototype.emplaceBack=function(X,fe,Se,Oe){var He=this.length;return this.resize(He+1),this.emplace(He,X,fe,Se,Oe)},R.prototype.emplace=function(X,fe,Se,Oe,He){var Qe=12*X,ct=3*X;return this.uint8[Qe+0]=fe,this.uint8[Qe+1]=Se,this.float32[ct+1]=Oe,this.float32[ct+2]=He,X},R}(mi);he.prototype.bytesPerElement=12,Mr("StructArrayLayout2ub2f12",he);var Te=function(S){function R(){S.apply(this,arguments)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(X,fe,Se){var Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,X,fe,Se)},R.prototype.emplace=function(X,fe,Se,Oe){var He=3*X;return this.uint16[He+0]=fe,this.uint16[He+1]=Se,this.uint16[He+2]=Oe,X},R}(mi);Te.prototype.bytesPerElement=6,Mr("StructArrayLayout3ui6",Te);var Le=function(S){function R(){S.apply(this,arguments)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},R.prototype.emplaceBack=function(X,fe,Se,Oe,He,Qe,ct,bt,Tt,Nt,qt,jt,an,cn,Tn,_n,Fn){var zn=this.length;return this.resize(zn+1),this.emplace(zn,X,fe,Se,Oe,He,Qe,ct,bt,Tt,Nt,qt,jt,an,cn,Tn,_n,Fn)},R.prototype.emplace=function(X,fe,Se,Oe,He,Qe,ct,bt,Tt,Nt,qt,jt,an,cn,Tn,_n,Fn,zn){var Hn=24*X,$n=12*X,or=48*X;return this.int16[Hn+0]=fe,this.int16[Hn+1]=Se,this.uint16[Hn+2]=Oe,this.uint16[Hn+3]=He,this.uint32[$n+2]=Qe,this.uint32[$n+3]=ct,this.uint32[$n+4]=bt,this.uint16[Hn+10]=Tt,this.uint16[Hn+11]=Nt,this.uint16[Hn+12]=qt,this.float32[$n+7]=jt,this.float32[$n+8]=an,this.uint8[or+36]=cn,this.uint8[or+37]=Tn,this.uint8[or+38]=_n,this.uint32[$n+10]=Fn,this.int16[Hn+22]=zn,X},R}(mi);Le.prototype.bytesPerElement=48,Mr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Le);var Fe=function(S){function R(){S.apply(this,arguments)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},R.prototype.emplaceBack=function(X,fe,Se,Oe,He,Qe,ct,bt,Tt,Nt,qt,jt,an,cn,Tn,_n,Fn,zn,Hn,$n,or,vr,dr,_r,Tr,jr,Dr,Br){var Lr=this.length;return this.resize(Lr+1),this.emplace(Lr,X,fe,Se,Oe,He,Qe,ct,bt,Tt,Nt,qt,jt,an,cn,Tn,_n,Fn,zn,Hn,$n,or,vr,dr,_r,Tr,jr,Dr,Br)},R.prototype.emplace=function(X,fe,Se,Oe,He,Qe,ct,bt,Tt,Nt,qt,jt,an,cn,Tn,_n,Fn,zn,Hn,$n,or,vr,dr,_r,Tr,jr,Dr,Br,Lr){var Cr=34*X,ri=17*X;return this.int16[Cr+0]=fe,this.int16[Cr+1]=Se,this.int16[Cr+2]=Oe,this.int16[Cr+3]=He,this.int16[Cr+4]=Qe,this.int16[Cr+5]=ct,this.int16[Cr+6]=bt,this.int16[Cr+7]=Tt,this.uint16[Cr+8]=Nt,this.uint16[Cr+9]=qt,this.uint16[Cr+10]=jt,this.uint16[Cr+11]=an,this.uint16[Cr+12]=cn,this.uint16[Cr+13]=Tn,this.uint16[Cr+14]=_n,this.uint16[Cr+15]=Fn,this.uint16[Cr+16]=zn,this.uint16[Cr+17]=Hn,this.uint16[Cr+18]=$n,this.uint16[Cr+19]=or,this.uint16[Cr+20]=vr,this.uint16[Cr+21]=dr,this.uint16[Cr+22]=_r,this.uint32[ri+12]=Tr,this.float32[ri+13]=jr,this.float32[ri+14]=Dr,this.float32[ri+15]=Br,this.float32[ri+16]=Lr,X},R}(mi);Fe.prototype.bytesPerElement=68,Mr("StructArrayLayout8i15ui1ul4f68",Fe);var qe=function(S){function R(){S.apply(this,arguments)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},R.prototype.emplaceBack=function(X){var fe=this.length;return this.resize(fe+1),this.emplace(fe,X)},R.prototype.emplace=function(X,fe){var Se=1*X;return this.float32[Se+0]=fe,X},R}(mi);qe.prototype.bytesPerElement=4,Mr("StructArrayLayout1f4",qe);var We=function(S){function R(){S.apply(this,arguments)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(X,fe,Se){var Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,X,fe,Se)},R.prototype.emplace=function(X,fe,Se,Oe){var He=3*X;return this.int16[He+0]=fe,this.int16[He+1]=Se,this.int16[He+2]=Oe,X},R}(mi);We.prototype.bytesPerElement=6,Mr("StructArrayLayout3i6",We);var nt=function(S){function R(){S.apply(this,arguments)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(X,fe,Se){var Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,X,fe,Se)},R.prototype.emplace=function(X,fe,Se,Oe){var He=2*X,Qe=4*X;return this.uint32[He+0]=fe,this.uint16[Qe+2]=Se,this.uint16[Qe+3]=Oe,X},R}(mi);nt.prototype.bytesPerElement=8,Mr("StructArrayLayout1ul2ui8",nt);var ft=function(S){function R(){S.apply(this,arguments)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(X,fe){var Se=this.length;return this.resize(Se+1),this.emplace(Se,X,fe)},R.prototype.emplace=function(X,fe,Se){var Oe=2*X;return this.uint16[Oe+0]=fe,this.uint16[Oe+1]=Se,X},R}(mi);ft.prototype.bytesPerElement=4,Mr("StructArrayLayout2ui4",ft);var pt=function(S){function R(){S.apply(this,arguments)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(X){var fe=this.length;return this.resize(fe+1),this.emplace(fe,X)},R.prototype.emplace=function(X,fe){var Se=1*X;return this.uint16[Se+0]=fe,X},R}(mi);pt.prototype.bytesPerElement=2,Mr("StructArrayLayout1ui2",pt);var wt=function(S){function R(){S.apply(this,arguments)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},R.prototype.emplaceBack=function(X,fe,Se,Oe){var He=this.length;return this.resize(He+1),this.emplace(He,X,fe,Se,Oe)},R.prototype.emplace=function(X,fe,Se,Oe,He){var Qe=4*X;return this.float32[Qe+0]=fe,this.float32[Qe+1]=Se,this.float32[Qe+2]=Oe,this.float32[Qe+3]=He,X},R}(mi);wt.prototype.bytesPerElement=16,Mr("StructArrayLayout4f16",wt);var Ct=function(S){function R(){S.apply(this,arguments)}S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R;var X={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return X.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},X.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},X.x1.get=function(){return this._structArray.int16[this._pos2+2]},X.y1.get=function(){return this._structArray.int16[this._pos2+3]},X.x2.get=function(){return this._structArray.int16[this._pos2+4]},X.y2.get=function(){return this._structArray.int16[this._pos2+5]},X.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},X.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},X.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},X.anchorPoint.get=function(){return new t(this.anchorPointX,this.anchorPointY)},Object.defineProperties(R.prototype,X),R}(Qo);Ct.prototype.size=20;var At=function(S){function R(){S.apply(this,arguments)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype.get=function(X){return new Ct(this,X)},R}(G);Mr("CollisionBoxArray",At);var zt=function(S){function R(){S.apply(this,arguments)}S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R;var X={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return X.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},X.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},X.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},X.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},X.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},X.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},X.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},X.segment.get=function(){return this._structArray.uint16[this._pos2+10]},X.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},X.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},X.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},X.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},X.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},X.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},X.placedOrientation.set=function(fe){this._structArray.uint8[this._pos1+37]=fe},X.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},X.hidden.set=function(fe){this._structArray.uint8[this._pos1+38]=fe},X.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},X.crossTileID.set=function(fe){this._structArray.uint32[this._pos4+10]=fe},X.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(R.prototype,X),R}(Qo);zt.prototype.size=48;var It=function(S){function R(){S.apply(this,arguments)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype.get=function(X){return new zt(this,X)},R}(Le);Mr("PlacedSymbolArray",It);var Xt=function(S){function R(){S.apply(this,arguments)}S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R;var X={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return X.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},X.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},X.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},X.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},X.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},X.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},X.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},X.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},X.key.get=function(){return this._structArray.uint16[this._pos2+8]},X.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},X.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},X.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},X.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},X.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},X.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},X.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},X.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},X.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},X.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},X.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},X.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},X.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},X.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},X.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},X.crossTileID.set=function(fe){this._structArray.uint32[this._pos4+12]=fe},X.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},X.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},X.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},X.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(R.prototype,X),R}(Qo);Xt.prototype.size=68;var Gt=function(S){function R(){S.apply(this,arguments)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype.get=function(X){return new Xt(this,X)},R}(Fe);Mr("SymbolInstanceArray",Gt);var Vt=function(S){function R(){S.apply(this,arguments)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype.getoffsetX=function(X){return this.float32[1*X+0]},R}(qe);Mr("GlyphOffsetArray",Vt);var pn=function(S){function R(){S.apply(this,arguments)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype.getx=function(X){return this.int16[3*X+0]},R.prototype.gety=function(X){return this.int16[3*X+1]},R.prototype.gettileUnitDistanceFromAnchor=function(X){return this.int16[3*X+2]},R}(We);Mr("SymbolLineVertexArray",pn);var vn=function(S){function R(){S.apply(this,arguments)}S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R;var X={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return X.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},X.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},X.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(R.prototype,X),R}(Qo);vn.prototype.size=8;var Sn=function(S){function R(){S.apply(this,arguments)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype.get=function(X){return new vn(this,X)},R}(nt);Mr("FeatureIndexArray",Sn);var In=Li([{name:"a_pos",components:2,type:"Int16"}],4).members,Vn=function(S){S===void 0&&(S=[]),this.segments=S};function nr(S,R){return 256*(S=l(Math.floor(S),0,255))+l(Math.floor(R),0,255)}Vn.prototype.prepareSegment=function(S,R,X,fe){var Se=this.segments[this.segments.length-1];return S>Vn.MAX_VERTEX_ARRAY_LENGTH&&D("Max vertices per segment is "+Vn.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+S),(!Se||Se.vertexLength+S>Vn.MAX_VERTEX_ARRAY_LENGTH||Se.sortKey!==fe)&&(Se={vertexOffset:R.length,primitiveOffset:X.length,vertexLength:0,primitiveLength:0},fe!==void 0&&(Se.sortKey=fe),this.segments.push(Se)),Se},Vn.prototype.get=function(){return this.segments},Vn.prototype.destroy=function(){for(var S=0,R=this.segments;S<R.length;S+=1){var X=R[S];for(var fe in X.vaos)X.vaos[fe].destroy()}},Vn.simpleSegment=function(S,R,X,fe){return new Vn([{vertexOffset:S,primitiveOffset:R,vertexLength:X,primitiveLength:fe,vaos:{},sortKey:0}])},Vn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Mr("SegmentVector",Vn);var cr=Li([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Gn=T(function(S){S.exports=function(R,X){var fe,Se,Oe,He,Qe,ct,bt,Tt;for(fe=3&R.length,Se=R.length-fe,Oe=X,Qe=3432918353,ct=461845907,Tt=0;Tt<Se;)bt=255&R.charCodeAt(Tt)|(255&R.charCodeAt(++Tt))<<8|(255&R.charCodeAt(++Tt))<<16|(255&R.charCodeAt(++Tt))<<24,++Tt,Oe=27492+(65535&(He=5*(65535&(Oe=(Oe^=bt=(65535&(bt=(bt=(65535&bt)*Qe+(((bt>>>16)*Qe&65535)<<16)&4294967295)<<15|bt>>>17))*ct+(((bt>>>16)*ct&65535)<<16)&4294967295)<<13|Oe>>>19))+((5*(Oe>>>16)&65535)<<16)&4294967295))+((58964+(He>>>16)&65535)<<16);switch(bt=0,fe){case 3:bt^=(255&R.charCodeAt(Tt+2))<<16;case 2:bt^=(255&R.charCodeAt(Tt+1))<<8;case 1:Oe^=bt=(65535&(bt=(bt=(65535&(bt^=255&R.charCodeAt(Tt)))*Qe+(((bt>>>16)*Qe&65535)<<16)&4294967295)<<15|bt>>>17))*ct+(((bt>>>16)*ct&65535)<<16)&4294967295}return Oe^=R.length,Oe=2246822507*(65535&(Oe^=Oe>>>16))+((2246822507*(Oe>>>16)&65535)<<16)&4294967295,Oe=3266489909*(65535&(Oe^=Oe>>>13))+((3266489909*(Oe>>>16)&65535)<<16)&4294967295,(Oe^=Oe>>>16)>>>0}}),lr=T(function(S){S.exports=function(R,X){for(var fe,Se=R.length,Oe=X^Se,He=0;Se>=4;)fe=1540483477*(65535&(fe=255&R.charCodeAt(He)|(255&R.charCodeAt(++He))<<8|(255&R.charCodeAt(++He))<<16|(255&R.charCodeAt(++He))<<24))+((1540483477*(fe>>>16)&65535)<<16),Oe=1540483477*(65535&Oe)+((1540483477*(Oe>>>16)&65535)<<16)^(fe=1540483477*(65535&(fe^=fe>>>24))+((1540483477*(fe>>>16)&65535)<<16)),Se-=4,++He;switch(Se){case 3:Oe^=(255&R.charCodeAt(He+2))<<16;case 2:Oe^=(255&R.charCodeAt(He+1))<<8;case 1:Oe=1540483477*(65535&(Oe^=255&R.charCodeAt(He)))+((1540483477*(Oe>>>16)&65535)<<16)}return Oe=1540483477*(65535&(Oe^=Oe>>>13))+((1540483477*(Oe>>>16)&65535)<<16),(Oe^=Oe>>>15)>>>0}}),xr=Gn,Er=Gn,er=lr;xr.murmur3=Er,xr.murmur2=er;var sr=function(){this.ids=[],this.positions=[],this.indexed=!1};sr.prototype.add=function(S,R,X,fe){this.ids.push(fr(S)),this.positions.push(R,X,fe)},sr.prototype.getPositions=function(S){for(var R=fr(S),X=0,fe=this.ids.length-1;X<fe;){var Se=X+fe>>1;this.ids[Se]>=R?fe=Se:X=Se+1}for(var Oe=[];this.ids[X]===R;){var He=this.positions[3*X],Qe=this.positions[3*X+1],ct=this.positions[3*X+2];Oe.push({index:He,start:Qe,end:ct}),X++}return Oe},sr.serialize=function(S,R){var X=new Float64Array(S.ids),fe=new Uint32Array(S.positions);return Ar(X,fe,0,X.length-1),R&&R.push(X.buffer,fe.buffer),{ids:X,positions:fe}},sr.deserialize=function(S){var R=new sr;return R.ids=S.ids,R.positions=S.positions,R.indexed=!0,R};var wr=Math.pow(2,53)-1;function fr(S){var R=+S;return!isNaN(R)&&R<=wr?R:xr(String(S))}function Ar(S,R,X,fe){for(;X<fe;){for(var Se=S[X+fe>>1],Oe=X-1,He=fe+1;;){do Oe++;while(S[Oe]<Se);do He--;while(S[He]>Se);if(Oe>=He)break;Ir(S,Oe,He),Ir(R,3*Oe,3*He),Ir(R,3*Oe+1,3*He+1),Ir(R,3*Oe+2,3*He+2)}He-X<fe-He?(Ar(S,R,X,He),X=He+1):(Ar(S,R,He+1,fe),fe=He)}}function Ir(S,R,X){var fe=S[R];S[R]=S[X],S[X]=fe}Mr("FeaturePositionMap",sr);var Vr=function(S,R){this.gl=S.gl,this.location=R},Ur=function(S){function R(X,fe){S.call(this,X,fe),this.current=0}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype.set=function(X){this.current!==X&&(this.current=X,this.gl.uniform1i(this.location,X))},R}(Vr),Wr=function(S){function R(X,fe){S.call(this,X,fe),this.current=0}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype.set=function(X){this.current!==X&&(this.current=X,this.gl.uniform1f(this.location,X))},R}(Vr),Kr=function(S){function R(X,fe){S.call(this,X,fe),this.current=[0,0]}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype.set=function(X){X[0]===this.current[0]&&X[1]===this.current[1]||(this.current=X,this.gl.uniform2f(this.location,X[0],X[1]))},R}(Vr),ki=function(S){function R(X,fe){S.call(this,X,fe),this.current=[0,0,0]}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype.set=function(X){X[0]===this.current[0]&&X[1]===this.current[1]&&X[2]===this.current[2]||(this.current=X,this.gl.uniform3f(this.location,X[0],X[1],X[2]))},R}(Vr),qi=function(S){function R(X,fe){S.call(this,X,fe),this.current=[0,0,0,0]}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype.set=function(X){X[0]===this.current[0]&&X[1]===this.current[1]&&X[2]===this.current[2]&&X[3]===this.current[3]||(this.current=X,this.gl.uniform4f(this.location,X[0],X[1],X[2],X[3]))},R}(Vr),Do=function(S){function R(X,fe){S.call(this,X,fe),this.current=Cn.transparent}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype.set=function(X){X.r===this.current.r&&X.g===this.current.g&&X.b===this.current.b&&X.a===this.current.a||(this.current=X,this.gl.uniform4f(this.location,X.r,X.g,X.b,X.a))},R}(Vr),fo=new Float32Array(16),To=function(S){function R(X,fe){S.call(this,X,fe),this.current=fo}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype.set=function(X){if(X[12]!==this.current[12]||X[0]!==this.current[0])return this.current=X,void this.gl.uniformMatrix4fv(this.location,!1,X);for(var fe=1;fe<16;fe++)if(X[fe]!==this.current[fe]){this.current=X,this.gl.uniformMatrix4fv(this.location,!1,X);break}},R}(Vr);function Oi(S){return[nr(255*S.r,255*S.g),nr(255*S.b,255*S.a)]}var ei=function(S,R,X){this.value=S,this.uniformNames=R.map(function(fe){return"u_"+fe}),this.type=X};ei.prototype.setUniform=function(S,R,X){S.set(X.constantOr(this.value))},ei.prototype.getBinding=function(S,R,X){return this.type==="color"?new Do(S,R):new Wr(S,R)};var Bi=function(S,R){this.uniformNames=R.map(function(X){return"u_"+X}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Bi.prototype.setConstantPatternPositions=function(S,R){this.pixelRatioFrom=R.pixelRatio,this.pixelRatioTo=S.pixelRatio,this.patternFrom=R.tlbr,this.patternTo=S.tlbr},Bi.prototype.setUniform=function(S,R,X,fe){var Se=fe==="u_pattern_to"?this.patternTo:fe==="u_pattern_from"?this.patternFrom:fe==="u_pixel_ratio_to"?this.pixelRatioTo:fe==="u_pixel_ratio_from"?this.pixelRatioFrom:null;Se&&S.set(Se)},Bi.prototype.getBinding=function(S,R,X){return X.substr(0,9)==="u_pattern"?new qi(S,R):new Wr(S,R)};var vi=function(S,R,X,fe){this.expression=S,this.type=X,this.maxValue=0,this.paintVertexAttributes=R.map(function(Se){return{name:"a_"+Se,type:"Float32",components:X==="color"?2:1,offset:0}}),this.paintVertexArray=new fe};vi.prototype.populatePaintArray=function(S,R,X,fe,Se){var Oe=this.paintVertexArray.length,He=this.expression.evaluate(new Xr(0),R,{},fe,[],Se);this.paintVertexArray.resize(S),this._setPaintValue(Oe,S,He)},vi.prototype.updatePaintArray=function(S,R,X,fe){var Se=this.expression.evaluate({zoom:0},X,fe);this._setPaintValue(S,R,Se)},vi.prototype._setPaintValue=function(S,R,X){if(this.type==="color")for(var fe=Oi(X),Se=S;Se<R;Se++)this.paintVertexArray.emplace(Se,fe[0],fe[1]);else{for(var Oe=S;Oe<R;Oe++)this.paintVertexArray.emplace(Oe,X);this.maxValue=Math.max(this.maxValue,Math.abs(X))}},vi.prototype.upload=function(S){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=S.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},vi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var oi=function(S,R,X,fe,Se,Oe){this.expression=S,this.uniformNames=R.map(function(He){return"u_"+He+"_t"}),this.type=X,this.useIntegerZoom=fe,this.zoom=Se,this.maxValue=0,this.paintVertexAttributes=R.map(function(He){return{name:"a_"+He,type:"Float32",components:X==="color"?4:2,offset:0}}),this.paintVertexArray=new Oe};oi.prototype.populatePaintArray=function(S,R,X,fe,Se){var Oe=this.expression.evaluate(new Xr(this.zoom),R,{},fe,[],Se),He=this.expression.evaluate(new Xr(this.zoom+1),R,{},fe,[],Se),Qe=this.paintVertexArray.length;this.paintVertexArray.resize(S),this._setPaintValue(Qe,S,Oe,He)},oi.prototype.updatePaintArray=function(S,R,X,fe){var Se=this.expression.evaluate({zoom:this.zoom},X,fe),Oe=this.expression.evaluate({zoom:this.zoom+1},X,fe);this._setPaintValue(S,R,Se,Oe)},oi.prototype._setPaintValue=function(S,R,X,fe){if(this.type==="color")for(var Se=Oi(X),Oe=Oi(fe),He=S;He<R;He++)this.paintVertexArray.emplace(He,Se[0],Se[1],Oe[0],Oe[1]);else{for(var Qe=S;Qe<R;Qe++)this.paintVertexArray.emplace(Qe,X,fe);this.maxValue=Math.max(this.maxValue,Math.abs(X),Math.abs(fe))}},oi.prototype.upload=function(S){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=S.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},oi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},oi.prototype.setUniform=function(S,R){var X=this.useIntegerZoom?Math.floor(R.zoom):R.zoom,fe=l(this.expression.interpolationFactor(X,this.zoom,this.zoom+1),0,1);S.set(fe)},oi.prototype.getBinding=function(S,R,X){return new Wr(S,R)};var ji=function(S,R,X,fe,Se,Oe){this.expression=S,this.type=R,this.useIntegerZoom=X,this.zoom=fe,this.layerId=Oe,this.zoomInPaintVertexArray=new Se,this.zoomOutPaintVertexArray=new Se};ji.prototype.populatePaintArray=function(S,R,X){var fe=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(S),this.zoomOutPaintVertexArray.resize(S),this._setPaintValues(fe,S,R.patterns&&R.patterns[this.layerId],X)},ji.prototype.updatePaintArray=function(S,R,X,fe,Se){this._setPaintValues(S,R,X.patterns&&X.patterns[this.layerId],Se)},ji.prototype._setPaintValues=function(S,R,X,fe){if(fe&&X){var Se=X.min,Oe=X.mid,He=X.max,Qe=fe[Se],ct=fe[Oe],bt=fe[He];if(Qe&&ct&&bt)for(var Tt=S;Tt<R;Tt++)this.zoomInPaintVertexArray.emplace(Tt,ct.tl[0],ct.tl[1],ct.br[0],ct.br[1],Qe.tl[0],Qe.tl[1],Qe.br[0],Qe.br[1],ct.pixelRatio,Qe.pixelRatio),this.zoomOutPaintVertexArray.emplace(Tt,ct.tl[0],ct.tl[1],ct.br[0],ct.br[1],bt.tl[0],bt.tl[1],bt.br[0],bt.br[1],ct.pixelRatio,bt.pixelRatio)}},ji.prototype.upload=function(S){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=S.createVertexBuffer(this.zoomInPaintVertexArray,cr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=S.createVertexBuffer(this.zoomOutPaintVertexArray,cr.members,this.expression.isStateDependent))},ji.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Gi=function(S,R,X){this.binders={},this._buffers=[];var fe=[];for(var Se in S.paint._values)if(X(Se)){var Oe=S.paint.get(Se);if(Oe instanceof Ai&&Ja(Oe.property.specification)){var He=dl(Se,S.type),Qe=Oe.value,ct=Oe.property.specification.type,bt=Oe.property.useIntegerZoom,Tt=Oe.property.specification["property-type"],Nt=Tt==="cross-faded"||Tt==="cross-faded-data-driven";if(Qe.kind==="constant")this.binders[Se]=Nt?new Bi(Qe.value,He):new ei(Qe.value,He,ct),fe.push("/u_"+Se);else if(Qe.kind==="source"||Nt){var qt=pl(Se,ct,"source");this.binders[Se]=Nt?new ji(Qe,ct,bt,R,qt,S.id):new vi(Qe,He,ct,qt),fe.push("/a_"+Se)}else{var jt=pl(Se,ct,"composite");this.binders[Se]=new oi(Qe,He,ct,bt,R,jt),fe.push("/z_"+Se)}}}this.cacheKey=fe.sort().join("")};Gi.prototype.getMaxValue=function(S){var R=this.binders[S];return R instanceof vi||R instanceof oi?R.maxValue:0},Gi.prototype.populatePaintArrays=function(S,R,X,fe,Se){for(var Oe in this.binders){var He=this.binders[Oe];(He instanceof vi||He instanceof oi||He instanceof ji)&&He.populatePaintArray(S,R,X,fe,Se)}},Gi.prototype.setConstantPatternPositions=function(S,R){for(var X in this.binders){var fe=this.binders[X];fe instanceof Bi&&fe.setConstantPatternPositions(S,R)}},Gi.prototype.updatePaintArrays=function(S,R,X,fe,Se){var Oe=!1;for(var He in S)for(var Qe=0,ct=R.getPositions(He);Qe<ct.length;Qe+=1){var bt=ct[Qe],Tt=X.feature(bt.index);for(var Nt in this.binders){var qt=this.binders[Nt];if((qt instanceof vi||qt instanceof oi||qt instanceof ji)&&qt.expression.isStateDependent===!0){var jt=fe.paint.get(Nt);qt.expression=jt.value,qt.updatePaintArray(bt.start,bt.end,Tt,S[He],Se),Oe=!0}}}return Oe},Gi.prototype.defines=function(){var S=[];for(var R in this.binders){var X=this.binders[R];(X instanceof ei||X instanceof Bi)&&S.push.apply(S,X.uniformNames.map(function(fe){return"#define HAS_UNIFORM_"+fe}))}return S},Gi.prototype.getBinderAttributes=function(){var S=[];for(var R in this.binders){var X=this.binders[R];if(X instanceof vi||X instanceof oi)for(var fe=0;fe<X.paintVertexAttributes.length;fe++)S.push(X.paintVertexAttributes[fe].name);else if(X instanceof ji)for(var Se=0;Se<cr.members.length;Se++)S.push(cr.members[Se].name)}return S},Gi.prototype.getBinderUniforms=function(){var S=[];for(var R in this.binders){var X=this.binders[R];if(X instanceof ei||X instanceof Bi||X instanceof oi)for(var fe=0,Se=X.uniformNames;fe<Se.length;fe+=1){var Oe=Se[fe];S.push(Oe)}}return S},Gi.prototype.getPaintVertexBuffers=function(){return this._buffers},Gi.prototype.getUniforms=function(S,R){var X=[];for(var fe in this.binders){var Se=this.binders[fe];if(Se instanceof ei||Se instanceof Bi||Se instanceof oi)for(var Oe=0,He=Se.uniformNames;Oe<He.length;Oe+=1){var Qe=He[Oe];if(R[Qe]){var ct=Se.getBinding(S,R[Qe],Qe);X.push({name:Qe,property:fe,binding:ct})}}}return X},Gi.prototype.setUniforms=function(S,R,X,fe){for(var Se=0,Oe=R;Se<Oe.length;Se+=1){var He=Oe[Se],Qe=He.name,ct=He.property,bt=He.binding;this.binders[ct].setUniform(bt,fe,X.get(ct),Qe)}},Gi.prototype.updatePaintBuffers=function(S){for(var R in this._buffers=[],this.binders){var X=this.binders[R];if(S&&X instanceof ji){var fe=S.fromScale===2?X.zoomInPaintVertexBuffer:X.zoomOutPaintVertexBuffer;fe&&this._buffers.push(fe)}else(X instanceof vi||X instanceof oi)&&X.paintVertexBuffer&&this._buffers.push(X.paintVertexBuffer)}},Gi.prototype.upload=function(S){for(var R in this.binders){var X=this.binders[R];(X instanceof vi||X instanceof oi||X instanceof ji)&&X.upload(S)}this.updatePaintBuffers()},Gi.prototype.destroy=function(){for(var S in this.binders){var R=this.binders[S];(R instanceof vi||R instanceof oi||R instanceof ji)&&R.destroy()}};var io=function(S,R,X){X===void 0&&(X=function(){return!0}),this.programConfigurations={};for(var fe=0,Se=S;fe<Se.length;fe+=1){var Oe=Se[fe];this.programConfigurations[Oe.id]=new Gi(Oe,R,X)}this.needsUpload=!1,this._featureMap=new sr,this._bufferOffset=0};function dl(S,R){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[S]||[S.replace(R+"-","").replace(/-/g,"_")]}function pl(S,R,X){var fe={color:{source:ut,composite:wt},number:{source:qe,composite:ut}},Se=function(Oe){return{"line-pattern":{source:B,composite:B},"fill-pattern":{source:B,composite:B},"fill-extrusion-pattern":{source:B,composite:B}}[Oe]}(S);return Se&&Se[X]||fe[R][X]}io.prototype.populatePaintArrays=function(S,R,X,fe,Se,Oe){for(var He in this.programConfigurations)this.programConfigurations[He].populatePaintArrays(S,R,fe,Se,Oe);R.id!==void 0&&this._featureMap.add(R.id,X,this._bufferOffset,S),this._bufferOffset=S,this.needsUpload=!0},io.prototype.updatePaintArrays=function(S,R,X,fe){for(var Se=0,Oe=X;Se<Oe.length;Se+=1){var He=Oe[Se];this.needsUpload=this.programConfigurations[He.id].updatePaintArrays(S,this._featureMap,R,He,fe)||this.needsUpload}},io.prototype.get=function(S){return this.programConfigurations[S]},io.prototype.upload=function(S){if(this.needsUpload){for(var R in this.programConfigurations)this.programConfigurations[R].upload(S);this.needsUpload=!1}},io.prototype.destroy=function(){for(var S in this.programConfigurations)this.programConfigurations[S].destroy()},Mr("ConstantBinder",ei),Mr("CrossFadedConstantBinder",Bi),Mr("SourceExpressionBinder",vi),Mr("CrossFadedCompositeBinder",ji),Mr("CompositeExpressionBinder",oi),Mr("ProgramConfiguration",Gi,{omit:["_buffers"]}),Mr("ProgramConfigurationSet",io);var ai=8192,ru=Math.pow(2,14)-1,Rl=-ru-1;function os(S){for(var R=ai/S.extent,X=S.loadGeometry(),fe=0;fe<X.length;fe++)for(var Se=X[fe],Oe=0;Oe<Se.length;Oe++){var He=Se[Oe],Qe=Math.round(He.x*R),ct=Math.round(He.y*R);He.x=l(Qe,Rl,ru),He.y=l(ct,Rl,ru),(Qe<He.x||Qe>He.x+1||ct<He.y||ct>He.y+1)&&D("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return X}function Vi(S,R){return{type:S.type,id:S.id,properties:S.properties,geometry:R?os(S):[]}}function ea(S,R,X,fe,Se){S.emplaceBack(2*R+(fe+1)/2,2*X+(Se+1)/2)}var yo=function(S){this.zoom=S.zoom,this.overscaling=S.overscaling,this.layers=S.layers,this.layerIds=this.layers.map(function(R){return R.id}),this.index=S.index,this.hasPattern=!1,this.layoutVertexArray=new Ss,this.indexArray=new Te,this.segments=new Vn,this.programConfigurations=new io(S.layers,S.zoom),this.stateDependentLayerIds=this.layers.filter(function(R){return R.isStateDependent()}).map(function(R){return R.id})};function gc(S,R){for(var X=0;X<S.length;X++)if(iu(R,S[X]))return!0;for(var fe=0;fe<R.length;fe++)if(iu(S,R[fe]))return!0;return!!Gu(S,R)}function z0(S,R,X){return!!iu(S,R)||!!Wu(R,S,X)}function _d(S,R){if(S.length===1)return Td(R,S[0]);for(var X=0;X<R.length;X++)for(var fe=R[X],Se=0;Se<fe.length;Se++)if(iu(S,fe[Se]))return!0;for(var Oe=0;Oe<S.length;Oe++)if(Td(R,S[Oe]))return!0;for(var He=0;He<R.length;He++)if(Gu(S,R[He]))return!0;return!1}function B0(S,R,X){if(S.length>1){if(Gu(S,R))return!0;for(var fe=0;fe<R.length;fe++)if(Wu(R[fe],S,X))return!0}for(var Se=0;Se<S.length;Se++)if(Wu(S[Se],R,X))return!0;return!1}function Gu(S,R){if(S.length===0||R.length===0)return!1;for(var X=0;X<S.length-1;X++)for(var fe=S[X],Se=S[X+1],Oe=0;Oe<R.length-1;Oe++)if(j0(fe,Se,R[Oe],R[Oe+1]))return!0;return!1}function j0(S,R,X,fe){return P(S,X,fe)!==P(R,X,fe)&&P(S,R,X)!==P(S,R,fe)}function Wu(S,R,X){var fe=X*X;if(R.length===1)return S.distSqr(R[0])<fe;for(var Se=1;Se<R.length;Se++)if(wd(S,R[Se-1],R[Se])<fe)return!0;return!1}function wd(S,R,X){var fe=R.distSqr(X);if(fe===0)return S.distSqr(R);var Se=((S.x-R.x)*(X.x-R.x)+(S.y-R.y)*(X.y-R.y))/fe;return Se<0?S.distSqr(R):Se>1?S.distSqr(X):S.distSqr(X.sub(R)._mult(Se)._add(R))}function Td(S,R){for(var X,fe,Se,Oe=!1,He=0;He<S.length;He++)for(var Qe=0,ct=(X=S[He]).length-1;Qe<X.length;ct=Qe++)fe=X[Qe],Se=X[ct],fe.y>R.y!=Se.y>R.y&&R.x<(Se.x-fe.x)*(R.y-fe.y)/(Se.y-fe.y)+fe.x&&(Oe=!Oe);return Oe}function iu(S,R){for(var X=!1,fe=0,Se=S.length-1;fe<S.length;Se=fe++){var Oe=S[fe],He=S[Se];Oe.y>R.y!=He.y>R.y&&R.x<(He.x-Oe.x)*(R.y-Oe.y)/(He.y-Oe.y)+Oe.x&&(X=!X)}return X}function Fw(S,R,X){var fe=X[0],Se=X[2];if(S.x<fe.x&&R.x<fe.x||S.x>Se.x&&R.x>Se.x||S.y<fe.y&&R.y<fe.y||S.y>Se.y&&R.y>Se.y)return!1;var Oe=P(S,R,X[0]);return Oe!==P(S,R,X[1])||Oe!==P(S,R,X[2])||Oe!==P(S,R,X[3])}function rh(S,R,X){var fe=R.paint.get(S).value;return fe.kind==="constant"?fe.value:X.programConfigurations.get(R.id).getMaxValue(S)}function Md(S){return Math.sqrt(S[0]*S[0]+S[1]*S[1])}function Ad(S,R,X,fe,Se){if(!R[0]&&!R[1])return S;var Oe=t.convert(R)._mult(Se);X==="viewport"&&Oe._rotate(-fe);for(var He=[],Qe=0;Qe<S.length;Qe++){var ct=S[Qe];He.push(ct.sub(Oe))}return He}yo.prototype.populate=function(S,R,X){var fe=this.layers[0],Se=[],Oe=null;fe.type==="circle"&&(Oe=fe.layout.get("circle-sort-key"));for(var He=0,Qe=S;He<Qe.length;He+=1){var ct=Qe[He],bt=ct.feature,Tt=ct.id,Nt=ct.index,qt=ct.sourceLayerIndex,jt=this.layers[0]._featureFilter.needGeometry,an=Vi(bt,jt);if(this.layers[0]._featureFilter.filter(new Xr(this.zoom),an,X)){var cn=Oe?Oe.evaluate(an,{},X):void 0,Tn={id:Tt,properties:bt.properties,type:bt.type,sourceLayerIndex:qt,index:Nt,geometry:jt?an.geometry:os(bt),patterns:{},sortKey:cn};Se.push(Tn)}}Oe&&Se.sort(function(_r,Tr){return _r.sortKey-Tr.sortKey});for(var _n=0,Fn=Se;_n<Fn.length;_n+=1){var zn=Fn[_n],Hn=zn,$n=Hn.geometry,or=Hn.index,vr=Hn.sourceLayerIndex,dr=S[or].feature;this.addFeature(zn,$n,or,X),R.featureIndex.insert(dr,$n,or,vr,this.index)}},yo.prototype.update=function(S,R,X){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(S,R,this.stateDependentLayers,X)},yo.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},yo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},yo.prototype.upload=function(S){this.uploaded||(this.layoutVertexBuffer=S.createVertexBuffer(this.layoutVertexArray,In),this.indexBuffer=S.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(S),this.uploaded=!0},yo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},yo.prototype.addFeature=function(S,R,X,fe){for(var Se=0,Oe=R;Se<Oe.length;Se+=1)for(var He=0,Qe=Oe[Se];He<Qe.length;He+=1){var ct=Qe[He],bt=ct.x,Tt=ct.y;if(!(bt<0||bt>=ai||Tt<0||Tt>=ai)){var Nt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,S.sortKey),qt=Nt.vertexLength;ea(this.layoutVertexArray,bt,Tt,-1,-1),ea(this.layoutVertexArray,bt,Tt,1,-1),ea(this.layoutVertexArray,bt,Tt,1,1),ea(this.layoutVertexArray,bt,Tt,-1,1),this.indexArray.emplaceBack(qt,qt+1,qt+2),this.indexArray.emplaceBack(qt,qt+3,qt+2),Nt.vertexLength+=4,Nt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,S,X,{},fe)},Mr("CircleBucket",yo,{omit:["layers"]});var Nw=new Zi({"circle-sort-key":new Or(Ze.layout_circle["circle-sort-key"])}),zw={paint:new Zi({"circle-radius":new Or(Ze.paint_circle["circle-radius"]),"circle-color":new Or(Ze.paint_circle["circle-color"]),"circle-blur":new Or(Ze.paint_circle["circle-blur"]),"circle-opacity":new Or(Ze.paint_circle["circle-opacity"]),"circle-translate":new Sr(Ze.paint_circle["circle-translate"]),"circle-translate-anchor":new Sr(Ze.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Sr(Ze.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Sr(Ze.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Or(Ze.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Or(Ze.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Or(Ze.paint_circle["circle-stroke-opacity"])}),layout:Nw},Es=typeof Float32Array<"u"?Float32Array:Array;function V0(S){return S[0]=1,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=1,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[10]=1,S[11]=0,S[12]=0,S[13]=0,S[14]=0,S[15]=1,S}function My(S,R,X){var fe=R[0],Se=R[1],Oe=R[2],He=R[3],Qe=R[4],ct=R[5],bt=R[6],Tt=R[7],Nt=R[8],qt=R[9],jt=R[10],an=R[11],cn=R[12],Tn=R[13],_n=R[14],Fn=R[15],zn=X[0],Hn=X[1],$n=X[2],or=X[3];return S[0]=zn*fe+Hn*Qe+$n*Nt+or*cn,S[1]=zn*Se+Hn*ct+$n*qt+or*Tn,S[2]=zn*Oe+Hn*bt+$n*jt+or*_n,S[3]=zn*He+Hn*Tt+$n*an+or*Fn,zn=X[4],Hn=X[5],$n=X[6],or=X[7],S[4]=zn*fe+Hn*Qe+$n*Nt+or*cn,S[5]=zn*Se+Hn*ct+$n*qt+or*Tn,S[6]=zn*Oe+Hn*bt+$n*jt+or*_n,S[7]=zn*He+Hn*Tt+$n*an+or*Fn,zn=X[8],Hn=X[9],$n=X[10],or=X[11],S[8]=zn*fe+Hn*Qe+$n*Nt+or*cn,S[9]=zn*Se+Hn*ct+$n*qt+or*Tn,S[10]=zn*Oe+Hn*bt+$n*jt+or*_n,S[11]=zn*He+Hn*Tt+$n*an+or*Fn,zn=X[12],Hn=X[13],$n=X[14],or=X[15],S[12]=zn*fe+Hn*Qe+$n*Nt+or*cn,S[13]=zn*Se+Hn*ct+$n*qt+or*Tn,S[14]=zn*Oe+Hn*bt+$n*jt+or*_n,S[15]=zn*He+Hn*Tt+$n*an+or*Fn,S}Math.hypot||(Math.hypot=function(){for(var S=arguments,R=0,X=arguments.length;X--;)R+=S[X]*S[X];return Math.sqrt(R)});var Bw=My,kd,jw=function(S,R,X){return S[0]=R[0]-X[0],S[1]=R[1]-X[1],S[2]=R[2]-X[2],S};function Sd(S,R,X){var fe=R[0],Se=R[1],Oe=R[2],He=R[3];return S[0]=X[0]*fe+X[4]*Se+X[8]*Oe+X[12]*He,S[1]=X[1]*fe+X[5]*Se+X[9]*Oe+X[13]*He,S[2]=X[2]*fe+X[6]*Se+X[10]*Oe+X[14]*He,S[3]=X[3]*fe+X[7]*Se+X[11]*Oe+X[15]*He,S}kd=new Es(3),Es!=Float32Array&&(kd[0]=0,kd[1]=0,kd[2]=0),function(){var S=new Es(4);Es!=Float32Array&&(S[0]=0,S[1]=0,S[2]=0,S[3]=0)}();var Vw=function(S){var R=S[0],X=S[1];return R*R+X*X},Uw=(function(){var S=new Es(2);Es!=Float32Array&&(S[0]=0,S[1]=0)}(),function(S){function R(X){S.call(this,X,zw)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype.createBucket=function(X){return new yo(X)},R.prototype.queryRadius=function(X){var fe=X;return rh("circle-radius",this,fe)+rh("circle-stroke-width",this,fe)+Md(this.paint.get("circle-translate"))},R.prototype.queryIntersectsFeature=function(X,fe,Se,Oe,He,Qe,ct,bt){for(var Tt=Ad(X,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Qe.angle,ct),Nt=this.paint.get("circle-radius").evaluate(fe,Se)+this.paint.get("circle-stroke-width").evaluate(fe,Se),qt=this.paint.get("circle-pitch-alignment")==="map",jt=qt?Tt:function(vr,dr){return vr.map(function(_r){return Ay(_r,dr)})}(Tt,bt),an=qt?Nt*ct:Nt,cn=0,Tn=Oe;cn<Tn.length;cn+=1)for(var _n=0,Fn=Tn[cn];_n<Fn.length;_n+=1){var zn=Fn[_n],Hn=qt?zn:Ay(zn,bt),$n=an,or=Sd([],[zn.x,zn.y,0,1],bt);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?$n*=or[3]/Qe.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&($n*=Qe.cameraToCenterDistance/or[3]),z0(jt,Hn,$n))return!0}return!1},R}(hi));function Ay(S,R){var X=Sd([],[S.x,S.y,0,1],R);return new t(X[0]/X[3],X[1]/X[3])}var ky=function(S){function R(){S.apply(this,arguments)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R}(yo);function U0(S,R,X,fe){var Se=R.width,Oe=R.height;if(fe){if(fe instanceof Uint8ClampedArray)fe=new Uint8Array(fe.buffer);else if(fe.length!==Se*Oe*X)throw new RangeError("mismatched image size")}else fe=new Uint8Array(Se*Oe*X);return S.width=Se,S.height=Oe,S.data=fe,S}function Sy(S,R,X){var fe=R.width,Se=R.height;if(fe!==S.width||Se!==S.height){var Oe=U0({},{width:fe,height:Se},X);H0(S,Oe,{x:0,y:0},{x:0,y:0},{width:Math.min(S.width,fe),height:Math.min(S.height,Se)},X),S.width=fe,S.height=Se,S.data=Oe.data}}function H0(S,R,X,fe,Se,Oe){if(Se.width===0||Se.height===0)return R;if(Se.width>S.width||Se.height>S.height||X.x>S.width-Se.width||X.y>S.height-Se.height)throw new RangeError("out of range source coordinates for image copy");if(Se.width>R.width||Se.height>R.height||fe.x>R.width-Se.width||fe.y>R.height-Se.height)throw new RangeError("out of range destination coordinates for image copy");for(var He=S.data,Qe=R.data,ct=0;ct<Se.height;ct++)for(var bt=((X.y+ct)*S.width+X.x)*Oe,Tt=((fe.y+ct)*R.width+fe.x)*Oe,Nt=0;Nt<Se.width*Oe;Nt++)Qe[Tt+Nt]=He[bt+Nt];return R}Mr("HeatmapBucket",ky,{omit:["layers"]});var mc=function(S,R){U0(this,S,1,R)};mc.prototype.resize=function(S){Sy(this,S,1)},mc.prototype.clone=function(){return new mc({width:this.width,height:this.height},new Uint8Array(this.data))},mc.copy=function(S,R,X,fe,Se){H0(S,R,X,fe,Se,1)};var Ya=function(S,R){U0(this,S,4,R)};Ya.prototype.resize=function(S){Sy(this,S,4)},Ya.prototype.replace=function(S,R){R?this.data.set(S):S instanceof Uint8ClampedArray?this.data=new Uint8Array(S.buffer):this.data=S},Ya.prototype.clone=function(){return new Ya({width:this.width,height:this.height},new Uint8Array(this.data))},Ya.copy=function(S,R,X,fe,Se){H0(S,R,X,fe,Se,4)},Mr("AlphaImage",mc),Mr("RGBAImage",Ya);var Hw={paint:new Zi({"heatmap-radius":new Or(Ze.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Or(Ze.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Sr(Ze.paint_heatmap["heatmap-intensity"]),"heatmap-color":new is(Ze.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Sr(Ze.paint_heatmap["heatmap-opacity"])})};function Ey(S){var R={},X=S.resolution||256,fe=S.clips?S.clips.length:1,Se=S.image||new Ya({width:X,height:fe}),Oe=function(an,cn,Tn){R[S.evaluationKey]=Tn;var _n=S.expression.evaluate(R);Se.data[an+cn+0]=Math.floor(255*_n.r/_n.a),Se.data[an+cn+1]=Math.floor(255*_n.g/_n.a),Se.data[an+cn+2]=Math.floor(255*_n.b/_n.a),Se.data[an+cn+3]=Math.floor(255*_n.a)};if(S.clips)for(var He=0,Qe=0;He<fe;++He,Qe+=4*X)for(var ct=0,bt=0;ct<X;ct++,bt+=4){var Tt=ct/(X-1),Nt=S.clips[He];Oe(Qe,bt,Nt.start*(1-Tt)+Nt.end*Tt)}else for(var qt=0,jt=0;qt<X;qt++,jt+=4)Oe(0,jt,qt/(X-1));return Se}var qw=function(S){function R(X){S.call(this,X,Hw),this._updateColorRamp()}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype.createBucket=function(X){return new ky(X)},R.prototype._handleSpecialPaintPropertyUpdate=function(X){X==="heatmap-color"&&this._updateColorRamp()},R.prototype._updateColorRamp=function(){var X=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=Ey({expression:X,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},R.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},R.prototype.queryRadius=function(){return 0},R.prototype.queryIntersectsFeature=function(){return!1},R.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},R}(hi),Gw={paint:new Zi({"hillshade-illumination-direction":new Sr(Ze.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Sr(Ze.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Sr(Ze.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Sr(Ze.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Sr(Ze.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Sr(Ze.paint_hillshade["hillshade-accent-color"])})},Ww=function(S){function R(X){S.call(this,X,Gw)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},R}(hi),Yw=Li([{name:"a_pos",components:2,type:"Int16"}],4).members,q0=Ed,$w=Ed;function Ed(S,R,X){X=X||2;var fe,Se,Oe,He,Qe,ct,bt,Tt=R&&R.length,Nt=Tt?R[0]*X:S.length,qt=Cy(S,0,Nt,X,!0),jt=[];if(!qt||qt.next===qt.prev)return jt;if(Tt&&(qt=function(cn,Tn,_n,Fn){var zn,Hn,$n,or=[];for(zn=0,Hn=Tn.length;zn<Hn;zn++)($n=Cy(cn,Tn[zn]*Fn,zn<Hn-1?Tn[zn+1]*Fn:cn.length,Fn,!1))===$n.next&&($n.steiner=!0),or.push(n3($n));for(or.sort(Qw),zn=0;zn<or.length;zn++)e3(or[zn],_n),_n=Yu(_n,_n.next);return _n}(S,R,qt,X)),S.length>80*X){fe=Oe=S[0],Se=He=S[1];for(var an=X;an<Nt;an+=X)(Qe=S[an])<fe&&(fe=Qe),(ct=S[an+1])<Se&&(Se=ct),Qe>Oe&&(Oe=Qe),ct>He&&(He=ct);bt=(bt=Math.max(Oe-fe,He-Se))!==0?1/bt:0}return ih(qt,jt,X,fe,Se,bt),jt}function Cy(S,R,X,fe,Se){var Oe,He;if(Se===Y0(S,R,X,fe)>0)for(Oe=R;Oe<X;Oe+=fe)He=Ly(Oe,S[Oe],S[Oe+1],He);else for(Oe=X-fe;Oe>=R;Oe-=fe)He=Ly(Oe,S[Oe],S[Oe+1],He);return He&&Cd(He,He.next)&&(ah(He),He=He.next),He}function Yu(S,R){if(!S)return S;R||(R=S);var X,fe=S;do if(X=!1,fe.steiner||!Cd(fe,fe.next)&&Mo(fe.prev,fe,fe.next)!==0)fe=fe.next;else{if(ah(fe),(fe=R=fe.prev)===fe.next)break;X=!0}while(X||fe!==R);return R}function ih(S,R,X,fe,Se,Oe,He){if(S){!He&&Oe&&function(Tt,Nt,qt,jt){var an=Tt;do an.z===null&&(an.z=G0(an.x,an.y,Nt,qt,jt)),an.prevZ=an.prev,an.nextZ=an.next,an=an.next;while(an!==Tt);an.prevZ.nextZ=null,an.prevZ=null,function(cn){var Tn,_n,Fn,zn,Hn,$n,or,vr,dr=1;do{for(_n=cn,cn=null,Hn=null,$n=0;_n;){for($n++,Fn=_n,or=0,Tn=0;Tn<dr&&(or++,Fn=Fn.nextZ);Tn++);for(vr=dr;or>0||vr>0&&Fn;)or!==0&&(vr===0||!Fn||_n.z<=Fn.z)?(zn=_n,_n=_n.nextZ,or--):(zn=Fn,Fn=Fn.nextZ,vr--),Hn?Hn.nextZ=zn:cn=zn,zn.prevZ=Hn,Hn=zn;_n=Fn}Hn.nextZ=null,dr*=2}while($n>1)}(an)}(S,fe,Se,Oe);for(var Qe,ct,bt=S;S.prev!==S.next;)if(Qe=S.prev,ct=S.next,Oe?Xw(S,fe,Se,Oe):Zw(S))R.push(Qe.i/X),R.push(S.i/X),R.push(ct.i/X),ah(S),S=ct.next,bt=ct.next;else if((S=ct)===bt){He?He===1?ih(S=Kw(Yu(S),R,X),R,X,fe,Se,Oe,2):He===2&&Jw(S,R,X,fe,Se,Oe):ih(Yu(S),R,X,fe,Se,Oe,1);break}}}function Zw(S){var R=S.prev,X=S,fe=S.next;if(Mo(R,X,fe)>=0)return!1;for(var Se=S.next.next;Se!==S.prev;){if(Yc(R.x,R.y,X.x,X.y,fe.x,fe.y,Se.x,Se.y)&&Mo(Se.prev,Se,Se.next)>=0)return!1;Se=Se.next}return!0}function Xw(S,R,X,fe){var Se=S.prev,Oe=S,He=S.next;if(Mo(Se,Oe,He)>=0)return!1;for(var Qe=Se.x<Oe.x?Se.x<He.x?Se.x:He.x:Oe.x<He.x?Oe.x:He.x,ct=Se.y<Oe.y?Se.y<He.y?Se.y:He.y:Oe.y<He.y?Oe.y:He.y,bt=Se.x>Oe.x?Se.x>He.x?Se.x:He.x:Oe.x>He.x?Oe.x:He.x,Tt=Se.y>Oe.y?Se.y>He.y?Se.y:He.y:Oe.y>He.y?Oe.y:He.y,Nt=G0(Qe,ct,R,X,fe),qt=G0(bt,Tt,R,X,fe),jt=S.prevZ,an=S.nextZ;jt&&jt.z>=Nt&&an&&an.z<=qt;){if(jt!==S.prev&&jt!==S.next&&Yc(Se.x,Se.y,Oe.x,Oe.y,He.x,He.y,jt.x,jt.y)&&Mo(jt.prev,jt,jt.next)>=0||(jt=jt.prevZ,an!==S.prev&&an!==S.next&&Yc(Se.x,Se.y,Oe.x,Oe.y,He.x,He.y,an.x,an.y)&&Mo(an.prev,an,an.next)>=0))return!1;an=an.nextZ}for(;jt&&jt.z>=Nt;){if(jt!==S.prev&&jt!==S.next&&Yc(Se.x,Se.y,Oe.x,Oe.y,He.x,He.y,jt.x,jt.y)&&Mo(jt.prev,jt,jt.next)>=0)return!1;jt=jt.prevZ}for(;an&&an.z<=qt;){if(an!==S.prev&&an!==S.next&&Yc(Se.x,Se.y,Oe.x,Oe.y,He.x,He.y,an.x,an.y)&&Mo(an.prev,an,an.next)>=0)return!1;an=an.nextZ}return!0}function Kw(S,R,X){var fe=S;do{var Se=fe.prev,Oe=fe.next.next;!Cd(Se,Oe)&&Dy(Se,fe,fe.next,Oe)&&oh(Se,Oe)&&oh(Oe,Se)&&(R.push(Se.i/X),R.push(fe.i/X),R.push(Oe.i/X),ah(fe),ah(fe.next),fe=S=Oe),fe=fe.next}while(fe!==S);return Yu(fe)}function Jw(S,R,X,fe,Se,Oe){var He=S;do{for(var Qe=He.next.next;Qe!==He.prev;){if(He.i!==Qe.i&&r3(He,Qe)){var ct=Iy(He,Qe);return He=Yu(He,He.next),ct=Yu(ct,ct.next),ih(He,R,X,fe,Se,Oe),void ih(ct,R,X,fe,Se,Oe)}Qe=Qe.next}He=He.next}while(He!==S)}function Qw(S,R){return S.x-R.x}function e3(S,R){if(R=function(fe,Se){var Oe,He=Se,Qe=fe.x,ct=fe.y,bt=-1/0;do{if(ct<=He.y&&ct>=He.next.y&&He.next.y!==He.y){var Tt=He.x+(ct-He.y)*(He.next.x-He.x)/(He.next.y-He.y);if(Tt<=Qe&&Tt>bt){if(bt=Tt,Tt===Qe){if(ct===He.y)return He;if(ct===He.next.y)return He.next}Oe=He.x<He.next.x?He:He.next}}He=He.next}while(He!==Se);if(!Oe)return null;if(Qe===bt)return Oe;var Nt,qt=Oe,jt=Oe.x,an=Oe.y,cn=1/0;He=Oe;do Qe>=He.x&&He.x>=jt&&Qe!==He.x&&Yc(ct<an?Qe:bt,ct,jt,an,ct<an?bt:Qe,ct,He.x,He.y)&&(Nt=Math.abs(ct-He.y)/(Qe-He.x),oh(He,fe)&&(Nt<cn||Nt===cn&&(He.x>Oe.x||He.x===Oe.x&&t3(Oe,He)))&&(Oe=He,cn=Nt)),He=He.next;while(He!==qt);return Oe}(S,R)){var X=Iy(R,S);Yu(R,R.next),Yu(X,X.next)}}function t3(S,R){return Mo(S.prev,S,R.prev)<0&&Mo(R.next,S,S.next)<0}function G0(S,R,X,fe,Se){return(S=1431655765&((S=858993459&((S=252645135&((S=16711935&((S=32767*(S-X)*Se)|S<<8))|S<<4))|S<<2))|S<<1))|(R=1431655765&((R=858993459&((R=252645135&((R=16711935&((R=32767*(R-fe)*Se)|R<<8))|R<<4))|R<<2))|R<<1))<<1}function n3(S){var R=S,X=S;do(R.x<X.x||R.x===X.x&&R.y<X.y)&&(X=R),R=R.next;while(R!==S);return X}function Yc(S,R,X,fe,Se,Oe,He,Qe){return(Se-He)*(R-Qe)-(S-He)*(Oe-Qe)>=0&&(S-He)*(fe-Qe)-(X-He)*(R-Qe)>=0&&(X-He)*(Oe-Qe)-(Se-He)*(fe-Qe)>=0}function r3(S,R){return S.next.i!==R.i&&S.prev.i!==R.i&&!function(X,fe){var Se=X;do{if(Se.i!==X.i&&Se.next.i!==X.i&&Se.i!==fe.i&&Se.next.i!==fe.i&&Dy(Se,Se.next,X,fe))return!0;Se=Se.next}while(Se!==X);return!1}(S,R)&&(oh(S,R)&&oh(R,S)&&function(X,fe){var Se=X,Oe=!1,He=(X.x+fe.x)/2,Qe=(X.y+fe.y)/2;do Se.y>Qe!=Se.next.y>Qe&&Se.next.y!==Se.y&&He<(Se.next.x-Se.x)*(Qe-Se.y)/(Se.next.y-Se.y)+Se.x&&(Oe=!Oe),Se=Se.next;while(Se!==X);return Oe}(S,R)&&(Mo(S.prev,S,R.prev)||Mo(S,R.prev,R))||Cd(S,R)&&Mo(S.prev,S,S.next)>0&&Mo(R.prev,R,R.next)>0)}function Mo(S,R,X){return(R.y-S.y)*(X.x-R.x)-(R.x-S.x)*(X.y-R.y)}function Cd(S,R){return S.x===R.x&&S.y===R.y}function Dy(S,R,X,fe){var Se=Id(Mo(S,R,X)),Oe=Id(Mo(S,R,fe)),He=Id(Mo(X,fe,S)),Qe=Id(Mo(X,fe,R));return Se!==Oe&&He!==Qe||!(Se!==0||!Dd(S,X,R))||!(Oe!==0||!Dd(S,fe,R))||!(He!==0||!Dd(X,S,fe))||!(Qe!==0||!Dd(X,R,fe))}function Dd(S,R,X){return R.x<=Math.max(S.x,X.x)&&R.x>=Math.min(S.x,X.x)&&R.y<=Math.max(S.y,X.y)&&R.y>=Math.min(S.y,X.y)}function Id(S){return S>0?1:S<0?-1:0}function oh(S,R){return Mo(S.prev,S,S.next)<0?Mo(S,R,S.next)>=0&&Mo(S,S.prev,R)>=0:Mo(S,R,S.prev)<0||Mo(S,S.next,R)<0}function Iy(S,R){var X=new W0(S.i,S.x,S.y),fe=new W0(R.i,R.x,R.y),Se=S.next,Oe=R.prev;return S.next=R,R.prev=S,X.next=Se,Se.prev=X,fe.next=X,X.prev=fe,Oe.next=fe,fe.prev=Oe,fe}function Ly(S,R,X,fe){var Se=new W0(S,R,X);return fe?(Se.next=fe.next,Se.prev=fe,fe.next.prev=Se,fe.next=Se):(Se.prev=Se,Se.next=Se),Se}function ah(S){S.next.prev=S.prev,S.prev.next=S.next,S.prevZ&&(S.prevZ.nextZ=S.nextZ),S.nextZ&&(S.nextZ.prevZ=S.prevZ)}function W0(S,R,X){this.i=S,this.x=R,this.y=X,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Y0(S,R,X,fe){for(var Se=0,Oe=R,He=X-fe;Oe<X;Oe+=fe)Se+=(S[He]-S[Oe])*(S[Oe+1]+S[He+1]),He=Oe;return Se}function i3(S,R,X,fe,Se){Oy(S,R,X||0,fe||S.length-1,Se||o3)}function Oy(S,R,X,fe,Se){for(;fe>X;){if(fe-X>600){var Oe=fe-X+1,He=R-X+1,Qe=Math.log(Oe),ct=.5*Math.exp(2*Qe/3),bt=.5*Math.sqrt(Qe*ct*(Oe-ct)/Oe)*(He-Oe/2<0?-1:1);Oy(S,R,Math.max(X,Math.floor(R-He*ct/Oe+bt)),Math.min(fe,Math.floor(R+(Oe-He)*ct/Oe+bt)),Se)}var Tt=S[R],Nt=X,qt=fe;for(sh(S,X,R),Se(S[fe],Tt)>0&&sh(S,X,fe);Nt<qt;){for(sh(S,Nt,qt),Nt++,qt--;Se(S[Nt],Tt)<0;)Nt++;for(;Se(S[qt],Tt)>0;)qt--}Se(S[X],Tt)===0?sh(S,X,qt):sh(S,++qt,fe),qt<=R&&(X=qt+1),R<=qt&&(fe=qt-1)}}function sh(S,R,X){var fe=S[R];S[R]=S[X],S[X]=fe}function o3(S,R){return S<R?-1:S>R?1:0}function $0(S,R){var X=S.length;if(X<=1)return[S];for(var fe,Se,Oe=[],He=0;He<X;He++){var Qe=L(S[He]);Qe!==0&&(S[He].area=Math.abs(Qe),Se===void 0&&(Se=Qe<0),Se===Qe<0?(fe&&Oe.push(fe),fe=[S[He]]):fe.push(S[He]))}if(fe&&Oe.push(fe),R>1)for(var ct=0;ct<Oe.length;ct++)Oe[ct].length<=R||(i3(Oe[ct],R,1,Oe[ct].length-1,a3),Oe[ct]=Oe[ct].slice(0,R));return Oe}function a3(S,R){return R.area-S.area}function Z0(S,R,X){for(var fe=X.patternDependencies,Se=!1,Oe=0,He=R;Oe<He.length;Oe+=1){var Qe=He[Oe].paint.get(S+"-pattern");Qe.isConstant()||(Se=!0);var ct=Qe.constantOr(null);ct&&(Se=!0,fe[ct.to]=!0,fe[ct.from]=!0)}return Se}function X0(S,R,X,fe,Se){for(var Oe=Se.patternDependencies,He=0,Qe=R;He<Qe.length;He+=1){var ct=Qe[He],bt=ct.paint.get(S+"-pattern").value;if(bt.kind!=="constant"){var Tt=bt.evaluate({zoom:fe-1},X,{},Se.availableImages),Nt=bt.evaluate({zoom:fe},X,{},Se.availableImages),qt=bt.evaluate({zoom:fe+1},X,{},Se.availableImages);Tt=Tt&&Tt.name?Tt.name:Tt,Nt=Nt&&Nt.name?Nt.name:Nt,qt=qt&&qt.name?qt.name:qt,Oe[Tt]=!0,Oe[Nt]=!0,Oe[qt]=!0,X.patterns[ct.id]={min:Tt,mid:Nt,max:qt}}}return X}Ed.deviation=function(S,R,X,fe){var Se=R&&R.length,Oe=Se?R[0]*X:S.length,He=Math.abs(Y0(S,0,Oe,X));if(Se)for(var Qe=0,ct=R.length;Qe<ct;Qe++){var bt=R[Qe]*X,Tt=Qe<ct-1?R[Qe+1]*X:S.length;He-=Math.abs(Y0(S,bt,Tt,X))}var Nt=0;for(Qe=0;Qe<fe.length;Qe+=3){var qt=fe[Qe]*X,jt=fe[Qe+1]*X,an=fe[Qe+2]*X;Nt+=Math.abs((S[qt]-S[an])*(S[jt+1]-S[qt+1])-(S[qt]-S[jt])*(S[an+1]-S[qt+1]))}return He===0&&Nt===0?0:Math.abs((Nt-He)/He)},Ed.flatten=function(S){for(var R=S[0][0].length,X={vertices:[],holes:[],dimensions:R},fe=0,Se=0;Se<S.length;Se++){for(var Oe=0;Oe<S[Se].length;Oe++)for(var He=0;He<R;He++)X.vertices.push(S[Se][Oe][He]);Se>0&&(fe+=S[Se-1].length,X.holes.push(fe))}return X},q0.default=$w;var Fl=function(S){this.zoom=S.zoom,this.overscaling=S.overscaling,this.layers=S.layers,this.layerIds=this.layers.map(function(R){return R.id}),this.index=S.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ss,this.indexArray=new Te,this.indexArray2=new ft,this.programConfigurations=new io(S.layers,S.zoom),this.segments=new Vn,this.segments2=new Vn,this.stateDependentLayerIds=this.layers.filter(function(R){return R.isStateDependent()}).map(function(R){return R.id})};Fl.prototype.populate=function(S,R,X){this.hasPattern=Z0("fill",this.layers,R);for(var fe=this.layers[0].layout.get("fill-sort-key"),Se=[],Oe=0,He=S;Oe<He.length;Oe+=1){var Qe=He[Oe],ct=Qe.feature,bt=Qe.id,Tt=Qe.index,Nt=Qe.sourceLayerIndex,qt=this.layers[0]._featureFilter.needGeometry,jt=Vi(ct,qt);if(this.layers[0]._featureFilter.filter(new Xr(this.zoom),jt,X)){var an=fe?fe.evaluate(jt,{},X,R.availableImages):void 0,cn={id:bt,properties:ct.properties,type:ct.type,sourceLayerIndex:Nt,index:Tt,geometry:qt?jt.geometry:os(ct),patterns:{},sortKey:an};Se.push(cn)}}fe&&Se.sort(function(_r,Tr){return _r.sortKey-Tr.sortKey});for(var Tn=0,_n=Se;Tn<_n.length;Tn+=1){var Fn=_n[Tn],zn=Fn,Hn=zn.geometry,$n=zn.index,or=zn.sourceLayerIndex;if(this.hasPattern){var vr=X0("fill",this.layers,Fn,this.zoom,R);this.patternFeatures.push(vr)}else this.addFeature(Fn,Hn,$n,X,{});var dr=S[$n].feature;R.featureIndex.insert(dr,Hn,$n,or,this.index)}},Fl.prototype.update=function(S,R,X){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(S,R,this.stateDependentLayers,X)},Fl.prototype.addFeatures=function(S,R,X){for(var fe=0,Se=this.patternFeatures;fe<Se.length;fe+=1){var Oe=Se[fe];this.addFeature(Oe,Oe.geometry,Oe.index,R,X)}},Fl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Fl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Fl.prototype.upload=function(S){this.uploaded||(this.layoutVertexBuffer=S.createVertexBuffer(this.layoutVertexArray,Yw),this.indexBuffer=S.createIndexBuffer(this.indexArray),this.indexBuffer2=S.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(S),this.uploaded=!0},Fl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Fl.prototype.addFeature=function(S,R,X,fe,Se){for(var Oe=0,He=$0(R,500);Oe<He.length;Oe+=1){for(var Qe=He[Oe],ct=0,bt=0,Tt=Qe;bt<Tt.length;bt+=1)ct+=Tt[bt].length;for(var Nt=this.segments.prepareSegment(ct,this.layoutVertexArray,this.indexArray),qt=Nt.vertexLength,jt=[],an=[],cn=0,Tn=Qe;cn<Tn.length;cn+=1){var _n=Tn[cn];if(_n.length!==0){_n!==Qe[0]&&an.push(jt.length/2);var Fn=this.segments2.prepareSegment(_n.length,this.layoutVertexArray,this.indexArray2),zn=Fn.vertexLength;this.layoutVertexArray.emplaceBack(_n[0].x,_n[0].y),this.indexArray2.emplaceBack(zn+_n.length-1,zn),jt.push(_n[0].x),jt.push(_n[0].y);for(var Hn=1;Hn<_n.length;Hn++)this.layoutVertexArray.emplaceBack(_n[Hn].x,_n[Hn].y),this.indexArray2.emplaceBack(zn+Hn-1,zn+Hn),jt.push(_n[Hn].x),jt.push(_n[Hn].y);Fn.vertexLength+=_n.length,Fn.primitiveLength+=_n.length}}for(var $n=q0(jt,an),or=0;or<$n.length;or+=3)this.indexArray.emplaceBack(qt+$n[or],qt+$n[or+1],qt+$n[or+2]);Nt.vertexLength+=ct,Nt.primitiveLength+=$n.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,S,X,Se,fe)},Mr("FillBucket",Fl,{omit:["layers","patternFeatures"]});var s3=new Zi({"fill-sort-key":new Or(Ze.layout_fill["fill-sort-key"])}),l3={paint:new Zi({"fill-antialias":new Sr(Ze.paint_fill["fill-antialias"]),"fill-opacity":new Or(Ze.paint_fill["fill-opacity"]),"fill-color":new Or(Ze.paint_fill["fill-color"]),"fill-outline-color":new Or(Ze.paint_fill["fill-outline-color"]),"fill-translate":new Sr(Ze.paint_fill["fill-translate"]),"fill-translate-anchor":new Sr(Ze.paint_fill["fill-translate-anchor"]),"fill-pattern":new Jo(Ze.paint_fill["fill-pattern"])}),layout:s3},u3=function(S){function R(X){S.call(this,X,l3)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype.recalculate=function(X,fe){S.prototype.recalculate.call(this,X,fe);var Se=this.paint._values["fill-outline-color"];Se.value.kind==="constant"&&Se.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},R.prototype.createBucket=function(X){return new Fl(X)},R.prototype.queryRadius=function(){return Md(this.paint.get("fill-translate"))},R.prototype.queryIntersectsFeature=function(X,fe,Se,Oe,He,Qe,ct){return _d(Ad(X,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Qe.angle,ct),Oe)},R.prototype.isTileClipped=function(){return!0},R}(hi),c3=Li([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Py=$c;function $c(S,R,X,fe,Se){this.properties={},this.extent=X,this.type=0,this._pbf=S,this._geometry=-1,this._keys=fe,this._values=Se,S.readFields(f3,this,R)}function f3(S,R,X){S==1?R.id=X.readVarint():S==2?function(fe,Se){for(var Oe=fe.readVarint()+fe.pos;fe.pos<Oe;){var He=Se._keys[fe.readVarint()],Qe=Se._values[fe.readVarint()];Se.properties[He]=Qe}}(X,R):S==3?R.type=X.readVarint():S==4&&(R._geometry=X.pos)}function h3(S){for(var R,X,fe=0,Se=0,Oe=S.length,He=Oe-1;Se<Oe;He=Se++)R=S[Se],fe+=((X=S[He]).x-R.x)*(R.y+X.y);return fe}$c.types=["Unknown","Point","LineString","Polygon"],$c.prototype.loadGeometry=function(){var S=this._pbf;S.pos=this._geometry;for(var R,X=S.readVarint()+S.pos,fe=1,Se=0,Oe=0,He=0,Qe=[];S.pos<X;){if(Se<=0){var ct=S.readVarint();fe=7&ct,Se=ct>>3}if(Se--,fe===1||fe===2)Oe+=S.readSVarint(),He+=S.readSVarint(),fe===1&&(R&&Qe.push(R),R=[]),R.push(new t(Oe,He));else{if(fe!==7)throw new Error("unknown command "+fe);R&&R.push(R[0].clone())}}return R&&Qe.push(R),Qe},$c.prototype.bbox=function(){var S=this._pbf;S.pos=this._geometry;for(var R=S.readVarint()+S.pos,X=1,fe=0,Se=0,Oe=0,He=1/0,Qe=-1/0,ct=1/0,bt=-1/0;S.pos<R;){if(fe<=0){var Tt=S.readVarint();X=7&Tt,fe=Tt>>3}if(fe--,X===1||X===2)(Se+=S.readSVarint())<He&&(He=Se),Se>Qe&&(Qe=Se),(Oe+=S.readSVarint())<ct&&(ct=Oe),Oe>bt&&(bt=Oe);else if(X!==7)throw new Error("unknown command "+X)}return[He,ct,Qe,bt]},$c.prototype.toGeoJSON=function(S,R,X){var fe,Se,Oe=this.extent*Math.pow(2,X),He=this.extent*S,Qe=this.extent*R,ct=this.loadGeometry(),bt=$c.types[this.type];function Tt(jt){for(var an=0;an<jt.length;an++){var cn=jt[an],Tn=180-360*(cn.y+Qe)/Oe;jt[an]=[360*(cn.x+He)/Oe-180,360/Math.PI*Math.atan(Math.exp(Tn*Math.PI/180))-90]}}switch(this.type){case 1:var Nt=[];for(fe=0;fe<ct.length;fe++)Nt[fe]=ct[fe][0];Tt(ct=Nt);break;case 2:for(fe=0;fe<ct.length;fe++)Tt(ct[fe]);break;case 3:for(ct=function(jt){var an=jt.length;if(an<=1)return[jt];for(var cn,Tn,_n=[],Fn=0;Fn<an;Fn++){var zn=h3(jt[Fn]);zn!==0&&(Tn===void 0&&(Tn=zn<0),Tn===zn<0?(cn&&_n.push(cn),cn=[jt[Fn]]):cn.push(jt[Fn]))}return cn&&_n.push(cn),_n}(ct),fe=0;fe<ct.length;fe++)for(Se=0;Se<ct[fe].length;Se++)Tt(ct[fe][Se])}ct.length===1?ct=ct[0]:bt="Multi"+bt;var qt={type:"Feature",geometry:{type:bt,coordinates:ct},properties:this.properties};return"id"in this&&(qt.id=this.id),qt};var Ry=Fy;function Fy(S,R){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=S,this._keys=[],this._values=[],this._features=[],S.readFields(d3,this,R),this.length=this._features.length}function d3(S,R,X){S===15?R.version=X.readVarint():S===1?R.name=X.readString():S===5?R.extent=X.readVarint():S===2?R._features.push(X.pos):S===3?R._keys.push(X.readString()):S===4&&R._values.push(function(fe){for(var Se=null,Oe=fe.readVarint()+fe.pos;fe.pos<Oe;){var He=fe.readVarint()>>3;Se=He===1?fe.readString():He===2?fe.readFloat():He===3?fe.readDouble():He===4?fe.readVarint64():He===5?fe.readVarint():He===6?fe.readSVarint():He===7?fe.readBoolean():null}return Se}(X))}function p3(S,R,X){if(S===3){var fe=new Ry(X,X.readVarint()+X.pos);fe.length&&(R[fe.name]=fe)}}Fy.prototype.feature=function(S){if(S<0||S>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[S];var R=this._pbf.readVarint()+this._pbf.pos;return new Py(this._pbf,R,this.extent,this._keys,this._values)};var Zc={VectorTile:function(S,R){this.layers=S.readFields(p3,{},R)},VectorTileFeature:Py,VectorTileLayer:Ry},g3=Zc.VectorTileFeature.types,K0=Math.pow(2,13);function lh(S,R,X,fe,Se,Oe,He,Qe){S.emplaceBack(R,X,2*Math.floor(fe*K0)+He,Se*K0*2,Oe*K0*2,Math.round(Qe))}var Nl=function(S){this.zoom=S.zoom,this.overscaling=S.overscaling,this.layers=S.layers,this.layerIds=this.layers.map(function(R){return R.id}),this.index=S.index,this.hasPattern=!1,this.layoutVertexArray=new Je,this.indexArray=new Te,this.programConfigurations=new io(S.layers,S.zoom),this.segments=new Vn,this.stateDependentLayerIds=this.layers.filter(function(R){return R.isStateDependent()}).map(function(R){return R.id})};function m3(S,R){return S.x===R.x&&(S.x<0||S.x>ai)||S.y===R.y&&(S.y<0||S.y>ai)}Nl.prototype.populate=function(S,R,X){this.features=[],this.hasPattern=Z0("fill-extrusion",this.layers,R);for(var fe=0,Se=S;fe<Se.length;fe+=1){var Oe=Se[fe],He=Oe.feature,Qe=Oe.id,ct=Oe.index,bt=Oe.sourceLayerIndex,Tt=this.layers[0]._featureFilter.needGeometry,Nt=Vi(He,Tt);if(this.layers[0]._featureFilter.filter(new Xr(this.zoom),Nt,X)){var qt={id:Qe,sourceLayerIndex:bt,index:ct,geometry:Tt?Nt.geometry:os(He),properties:He.properties,type:He.type,patterns:{}};this.hasPattern?this.features.push(X0("fill-extrusion",this.layers,qt,this.zoom,R)):this.addFeature(qt,qt.geometry,ct,X,{}),R.featureIndex.insert(He,qt.geometry,ct,bt,this.index,!0)}}},Nl.prototype.addFeatures=function(S,R,X){for(var fe=0,Se=this.features;fe<Se.length;fe+=1){var Oe=Se[fe],He=Oe.geometry;this.addFeature(Oe,He,Oe.index,R,X)}},Nl.prototype.update=function(S,R,X){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(S,R,this.stateDependentLayers,X)},Nl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Nl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Nl.prototype.upload=function(S){this.uploaded||(this.layoutVertexBuffer=S.createVertexBuffer(this.layoutVertexArray,c3),this.indexBuffer=S.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(S),this.uploaded=!0},Nl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Nl.prototype.addFeature=function(S,R,X,fe,Se){for(var Oe=0,He=$0(R,500);Oe<He.length;Oe+=1){for(var Qe=He[Oe],ct=0,bt=0,Tt=Qe;bt<Tt.length;bt+=1)ct+=Tt[bt].length;for(var Nt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),qt=0,jt=Qe;qt<jt.length;qt+=1){var an=jt[qt];if(an.length!==0&&!((ri=an).every(function(Hr){return Hr.x<0})||ri.every(function(Hr){return Hr.x>ai})||ri.every(function(Hr){return Hr.y<0})||ri.every(function(Hr){return Hr.y>ai})))for(var cn=0,Tn=0;Tn<an.length;Tn++){var _n=an[Tn];if(Tn>=1){var Fn=an[Tn-1];if(!m3(_n,Fn)){Nt.vertexLength+4>Vn.MAX_VERTEX_ARRAY_LENGTH&&(Nt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var zn=_n.sub(Fn)._perp()._unit(),Hn=Fn.dist(_n);cn+Hn>32768&&(cn=0),lh(this.layoutVertexArray,_n.x,_n.y,zn.x,zn.y,0,0,cn),lh(this.layoutVertexArray,_n.x,_n.y,zn.x,zn.y,0,1,cn),cn+=Hn,lh(this.layoutVertexArray,Fn.x,Fn.y,zn.x,zn.y,0,0,cn),lh(this.layoutVertexArray,Fn.x,Fn.y,zn.x,zn.y,0,1,cn);var $n=Nt.vertexLength;this.indexArray.emplaceBack($n,$n+2,$n+1),this.indexArray.emplaceBack($n+1,$n+2,$n+3),Nt.vertexLength+=4,Nt.primitiveLength+=2}}}}if(Nt.vertexLength+ct>Vn.MAX_VERTEX_ARRAY_LENGTH&&(Nt=this.segments.prepareSegment(ct,this.layoutVertexArray,this.indexArray)),g3[S.type]==="Polygon"){for(var or=[],vr=[],dr=Nt.vertexLength,_r=0,Tr=Qe;_r<Tr.length;_r+=1){var jr=Tr[_r];if(jr.length!==0){jr!==Qe[0]&&vr.push(or.length/2);for(var Dr=0;Dr<jr.length;Dr++){var Br=jr[Dr];lh(this.layoutVertexArray,Br.x,Br.y,0,0,1,1,0),or.push(Br.x),or.push(Br.y)}}}for(var Lr=q0(or,vr),Cr=0;Cr<Lr.length;Cr+=3)this.indexArray.emplaceBack(dr+Lr[Cr],dr+Lr[Cr+2],dr+Lr[Cr+1]);Nt.primitiveLength+=Lr.length/3,Nt.vertexLength+=ct}}var ri;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,S,X,Se,fe)},Mr("FillExtrusionBucket",Nl,{omit:["layers","features"]});var v3={paint:new Zi({"fill-extrusion-opacity":new Sr(Ze["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Or(Ze["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Sr(Ze["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Sr(Ze["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Jo(Ze["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Or(Ze["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Or(Ze["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Sr(Ze["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},y3=function(S){function R(X){S.call(this,X,v3)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype.createBucket=function(X){return new Nl(X)},R.prototype.queryRadius=function(){return Md(this.paint.get("fill-extrusion-translate"))},R.prototype.is3D=function(){return!0},R.prototype.queryIntersectsFeature=function(X,fe,Se,Oe,He,Qe,ct,bt){var Tt=Ad(X,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Qe.angle,ct),Nt=this.paint.get("fill-extrusion-height").evaluate(fe,Se),qt=this.paint.get("fill-extrusion-base").evaluate(fe,Se),jt=function(cn,Tn,_n,Fn){for(var zn=[],Hn=0,$n=cn;Hn<$n.length;Hn+=1){var or=$n[Hn],vr=[or.x,or.y,Fn,1];Sd(vr,vr,Tn),zn.push(new t(vr[0]/vr[3],vr[1]/vr[3]))}return zn}(Tt,bt,0,0),an=function(cn,Tn,_n,Fn){for(var zn=[],Hn=[],$n=Fn[8]*Tn,or=Fn[9]*Tn,vr=Fn[10]*Tn,dr=Fn[11]*Tn,_r=Fn[8]*_n,Tr=Fn[9]*_n,jr=Fn[10]*_n,Dr=Fn[11]*_n,Br=0,Lr=cn;Br<Lr.length;Br+=1){for(var Cr=[],ri=[],Hr=0,Fi=Lr[Br];Hr<Fi.length;Hr+=1){var zr=Fi[Hr],Ei=zr.x,Hi=zr.y,Wi=Fn[0]*Ei+Fn[4]*Hi+Fn[12],Yi=Fn[1]*Ei+Fn[5]*Hi+Fn[13],Ni=Fn[2]*Ei+Fn[6]*Hi+Fn[14],So=Fn[3]*Ei+Fn[7]*Hi+Fn[15],eo=Ni+vr,Bo=So+dr,ta=Wi+_r,Go=Yi+Tr,Da=Ni+jr,Wo=So+Dr,Io=new t((Wi+$n)/Bo,(Yi+or)/Bo);Io.z=eo/Bo,Cr.push(Io);var Yo=new t(ta/Wo,Go/Wo);Yo.z=Da/Wo,ri.push(Yo)}zn.push(Cr),Hn.push(ri)}return[zn,Hn]}(Oe,qt,Nt,bt);return function(cn,Tn,_n){var Fn=1/0;_d(_n,Tn)&&(Fn=Ny(_n,Tn[0]));for(var zn=0;zn<Tn.length;zn++)for(var Hn=Tn[zn],$n=cn[zn],or=0;or<Hn.length-1;or++){var vr=Hn[or],dr=Hn[or+1],_r=$n[or],Tr=[vr,dr,$n[or+1],_r,vr];gc(_n,Tr)&&(Fn=Math.min(Fn,Ny(_n,Tr)))}return Fn!==1/0&&Fn}(an[0],an[1],jt)},R}(hi);function uh(S,R){return S.x*R.x+S.y*R.y}function Ny(S,R){if(S.length===1){for(var X,fe=0,Se=R[fe++];!X||Se.equals(X);)if(!(X=R[fe++]))return 1/0;for(;fe<R.length;fe++){var Oe=R[fe],He=S[0],Qe=X.sub(Se),ct=Oe.sub(Se),bt=He.sub(Se),Tt=uh(Qe,Qe),Nt=uh(Qe,ct),qt=uh(ct,ct),jt=uh(bt,Qe),an=uh(bt,ct),cn=Tt*qt-Nt*Nt,Tn=(qt*jt-Nt*an)/cn,_n=(Tt*an-Nt*jt)/cn,Fn=1-Tn-_n,zn=Se.z*Fn+X.z*Tn+Oe.z*_n;if(isFinite(zn))return zn}return 1/0}for(var Hn=1/0,$n=0,or=R;$n<or.length;$n+=1){var vr=or[$n];Hn=Math.min(Hn,vr.z)}return Hn}var x3=Li([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,b3=Li([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,_3=Zc.VectorTileFeature.types,w3=Math.cos(Math.PI/180*37.5),zy=Math.pow(2,14)/.5,Ca=function(S){var R=this;this.zoom=S.zoom,this.overscaling=S.overscaling,this.layers=S.layers,this.layerIds=this.layers.map(function(X){return X.id}),this.index=S.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(X){R.gradients[X.id]={}}),this.layoutVertexArray=new et,this.layoutVertexArray2=new ut,this.indexArray=new Te,this.programConfigurations=new io(S.layers,S.zoom),this.segments=new Vn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(X){return X.isStateDependent()}).map(function(X){return X.id})};Ca.prototype.populate=function(S,R,X){this.hasPattern=Z0("line",this.layers,R);for(var fe=this.layers[0].layout.get("line-sort-key"),Se=[],Oe=0,He=S;Oe<He.length;Oe+=1){var Qe=He[Oe],ct=Qe.feature,bt=Qe.id,Tt=Qe.index,Nt=Qe.sourceLayerIndex,qt=this.layers[0]._featureFilter.needGeometry,jt=Vi(ct,qt);if(this.layers[0]._featureFilter.filter(new Xr(this.zoom),jt,X)){var an=fe?fe.evaluate(jt,{},X):void 0,cn={id:bt,properties:ct.properties,type:ct.type,sourceLayerIndex:Nt,index:Tt,geometry:qt?jt.geometry:os(ct),patterns:{},sortKey:an};Se.push(cn)}}fe&&Se.sort(function(_r,Tr){return _r.sortKey-Tr.sortKey});for(var Tn=0,_n=Se;Tn<_n.length;Tn+=1){var Fn=_n[Tn],zn=Fn,Hn=zn.geometry,$n=zn.index,or=zn.sourceLayerIndex;if(this.hasPattern){var vr=X0("line",this.layers,Fn,this.zoom,R);this.patternFeatures.push(vr)}else this.addFeature(Fn,Hn,$n,X,{});var dr=S[$n].feature;R.featureIndex.insert(dr,Hn,$n,or,this.index)}},Ca.prototype.update=function(S,R,X){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(S,R,this.stateDependentLayers,X)},Ca.prototype.addFeatures=function(S,R,X){for(var fe=0,Se=this.patternFeatures;fe<Se.length;fe+=1){var Oe=Se[fe];this.addFeature(Oe,Oe.geometry,Oe.index,R,X)}},Ca.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ca.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ca.prototype.upload=function(S){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=S.createVertexBuffer(this.layoutVertexArray2,b3)),this.layoutVertexBuffer=S.createVertexBuffer(this.layoutVertexArray,x3),this.indexBuffer=S.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(S),this.uploaded=!0},Ca.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ca.prototype.lineFeatureClips=function(S){if(S.properties&&S.properties.hasOwnProperty("mapbox_clip_start")&&S.properties.hasOwnProperty("mapbox_clip_end"))return{start:+S.properties.mapbox_clip_start,end:+S.properties.mapbox_clip_end}},Ca.prototype.addFeature=function(S,R,X,fe,Se){var Oe=this.layers[0].layout,He=Oe.get("line-join").evaluate(S,{}),Qe=Oe.get("line-cap"),ct=Oe.get("line-miter-limit"),bt=Oe.get("line-round-limit");this.lineClips=this.lineFeatureClips(S);for(var Tt=0,Nt=R;Tt<Nt.length;Tt+=1){var qt=Nt[Tt];this.addLine(qt,S,He,Qe,ct,bt)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,S,X,Se,fe)},Ca.prototype.addLine=function(S,R,X,fe,Se,Oe){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var He=0;He<S.length-1;He++)this.totalDistance+=S[He].dist(S[He+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var Qe=_3[R.type]==="Polygon",ct=S.length;ct>=2&&S[ct-1].equals(S[ct-2]);)ct--;for(var bt=0;bt<ct-1&&S[bt].equals(S[bt+1]);)bt++;if(!(ct<(Qe?3:2))){X==="bevel"&&(Se=1.05);var Tt,Nt=this.overscaling<=16?15*ai/(512*this.overscaling):0,qt=this.segments.prepareSegment(10*ct,this.layoutVertexArray,this.indexArray),jt=void 0,an=void 0,cn=void 0,Tn=void 0;this.e1=this.e2=-1,Qe&&(Tt=S[ct-2],Tn=S[bt].sub(Tt)._unit()._perp());for(var _n=bt;_n<ct;_n++)if(!(an=_n===ct-1?Qe?S[bt+1]:void 0:S[_n+1])||!S[_n].equals(an)){Tn&&(cn=Tn),Tt&&(jt=Tt),Tt=S[_n],Tn=an?an.sub(Tt)._unit()._perp():cn;var Fn=(cn=cn||Tn).add(Tn);Fn.x===0&&Fn.y===0||Fn._unit();var zn=cn.x*Tn.x+cn.y*Tn.y,Hn=Fn.x*Tn.x+Fn.y*Tn.y,$n=Hn!==0?1/Hn:1/0,or=2*Math.sqrt(2-2*Hn),vr=Hn<w3&&jt&&an,dr=cn.x*Tn.y-cn.y*Tn.x>0;if(vr&&_n>bt){var _r=Tt.dist(jt);if(_r>2*Nt){var Tr=Tt.sub(Tt.sub(jt)._mult(Nt/_r)._round());this.updateDistance(jt,Tr),this.addCurrentVertex(Tr,cn,0,0,qt),jt=Tr}}var jr=jt&&an,Dr=jr?X:Qe?"butt":fe;if(jr&&Dr==="round"&&($n<Oe?Dr="miter":$n<=2&&(Dr="fakeround")),Dr==="miter"&&$n>Se&&(Dr="bevel"),Dr==="bevel"&&($n>2&&(Dr="flipbevel"),$n<Se&&(Dr="miter")),jt&&this.updateDistance(jt,Tt),Dr==="miter")Fn._mult($n),this.addCurrentVertex(Tt,Fn,0,0,qt);else if(Dr==="flipbevel"){if($n>100)Fn=Tn.mult(-1);else{var Br=$n*cn.add(Tn).mag()/cn.sub(Tn).mag();Fn._perp()._mult(Br*(dr?-1:1))}this.addCurrentVertex(Tt,Fn,0,0,qt),this.addCurrentVertex(Tt,Fn.mult(-1),0,0,qt)}else if(Dr==="bevel"||Dr==="fakeround"){var Lr=-Math.sqrt($n*$n-1),Cr=dr?Lr:0,ri=dr?0:Lr;if(jt&&this.addCurrentVertex(Tt,cn,Cr,ri,qt),Dr==="fakeround")for(var Hr=Math.round(180*or/Math.PI/20),Fi=1;Fi<Hr;Fi++){var zr=Fi/Hr;if(zr!==.5){var Ei=zr-.5;zr+=zr*Ei*(zr-1)*((1.0904+zn*(zn*(3.55645-1.43519*zn)-3.2452))*Ei*Ei+(.848013+zn*(.215638*zn-1.06021)))}var Hi=Tn.sub(cn)._mult(zr)._add(cn)._unit()._mult(dr?-1:1);this.addHalfVertex(Tt,Hi.x,Hi.y,!1,dr,0,qt)}an&&this.addCurrentVertex(Tt,Tn,-Cr,-ri,qt)}else if(Dr==="butt")this.addCurrentVertex(Tt,Fn,0,0,qt);else if(Dr==="square"){var Wi=jt?1:-1;this.addCurrentVertex(Tt,Fn,Wi,Wi,qt)}else Dr==="round"&&(jt&&(this.addCurrentVertex(Tt,cn,0,0,qt),this.addCurrentVertex(Tt,cn,1,1,qt,!0)),an&&(this.addCurrentVertex(Tt,Tn,-1,-1,qt,!0),this.addCurrentVertex(Tt,Tn,0,0,qt)));if(vr&&_n<ct-1){var Yi=Tt.dist(an);if(Yi>2*Nt){var Ni=Tt.add(an.sub(Tt)._mult(Nt/Yi)._round());this.updateDistance(Tt,Ni),this.addCurrentVertex(Ni,Tn,0,0,qt),Tt=Ni}}}}},Ca.prototype.addCurrentVertex=function(S,R,X,fe,Se,Oe){Oe===void 0&&(Oe=!1);var He=R.x+R.y*X,Qe=R.y-R.x*X,ct=-R.x+R.y*fe,bt=-R.y-R.x*fe;this.addHalfVertex(S,He,Qe,Oe,!1,X,Se),this.addHalfVertex(S,ct,bt,Oe,!0,-fe,Se),this.distance>zy/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(S,R,X,fe,Se,Oe))},Ca.prototype.addHalfVertex=function(S,R,X,fe,Se,Oe,He){var Qe=S.x,ct=S.y,bt=.5*(this.lineClips?this.scaledDistance*(zy-1):this.scaledDistance);if(this.layoutVertexArray.emplaceBack((Qe<<1)+(fe?1:0),(ct<<1)+(Se?1:0),Math.round(63*R)+128,Math.round(63*X)+128,1+(Oe===0?0:Oe<0?-1:1)|(63&bt)<<2,bt>>6),this.lineClips){var Tt=(this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start);this.layoutVertexArray2.emplaceBack(Tt,this.lineClipsArray.length)}var Nt=He.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Nt),He.primitiveLength++),Se?this.e2=Nt:this.e1=Nt},Ca.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Ca.prototype.updateDistance=function(S,R){this.distance+=S.dist(R),this.updateScaledDistance()},Mr("LineBucket",Ca,{omit:["layers","patternFeatures"]});var T3=new Zi({"line-cap":new Sr(Ze.layout_line["line-cap"]),"line-join":new Or(Ze.layout_line["line-join"]),"line-miter-limit":new Sr(Ze.layout_line["line-miter-limit"]),"line-round-limit":new Sr(Ze.layout_line["line-round-limit"]),"line-sort-key":new Or(Ze.layout_line["line-sort-key"])}),By={paint:new Zi({"line-opacity":new Or(Ze.paint_line["line-opacity"]),"line-color":new Or(Ze.paint_line["line-color"]),"line-translate":new Sr(Ze.paint_line["line-translate"]),"line-translate-anchor":new Sr(Ze.paint_line["line-translate-anchor"]),"line-width":new Or(Ze.paint_line["line-width"]),"line-gap-width":new Or(Ze.paint_line["line-gap-width"]),"line-offset":new Or(Ze.paint_line["line-offset"]),"line-blur":new Or(Ze.paint_line["line-blur"]),"line-dasharray":new Ga(Ze.paint_line["line-dasharray"]),"line-pattern":new Jo(Ze.paint_line["line-pattern"]),"line-gradient":new is(Ze.paint_line["line-gradient"])}),layout:T3},M3=function(S){function R(){S.apply(this,arguments)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype.possiblyEvaluate=function(X,fe){return fe=new Xr(Math.floor(fe.zoom),{now:fe.now,fadeDuration:fe.fadeDuration,zoomHistory:fe.zoomHistory,transition:fe.transition}),S.prototype.possiblyEvaluate.call(this,X,fe)},R.prototype.evaluate=function(X,fe,Se,Oe){return fe=c({},fe,{zoom:Math.floor(fe.zoom)}),S.prototype.evaluate.call(this,X,fe,Se,Oe)},R}(Or),jy=new M3(By.paint.properties["line-width"].specification);jy.useIntegerZoom=!0;var A3=function(S){function R(X){S.call(this,X,By),this.gradientVersion=0}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype._handleSpecialPaintPropertyUpdate=function(X){if(X==="line-gradient"){var fe=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=fe._styleExpression.expression instanceof kr,this.gradientVersion=(this.gradientVersion+1)%i}},R.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},R.prototype.recalculate=function(X,fe){S.prototype.recalculate.call(this,X,fe),this.paint._values["line-floorwidth"]=jy.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,X)},R.prototype.createBucket=function(X){return new Ca(X)},R.prototype.queryRadius=function(X){var fe=X,Se=Vy(rh("line-width",this,fe),rh("line-gap-width",this,fe)),Oe=rh("line-offset",this,fe);return Se/2+Math.abs(Oe)+Md(this.paint.get("line-translate"))},R.prototype.queryIntersectsFeature=function(X,fe,Se,Oe,He,Qe,ct){var bt=Ad(X,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Qe.angle,ct),Tt=ct/2*Vy(this.paint.get("line-width").evaluate(fe,Se),this.paint.get("line-gap-width").evaluate(fe,Se)),Nt=this.paint.get("line-offset").evaluate(fe,Se);return Nt&&(Oe=function(qt,jt){for(var an=[],cn=new t(0,0),Tn=0;Tn<qt.length;Tn++){for(var _n=qt[Tn],Fn=[],zn=0;zn<_n.length;zn++){var Hn=_n[zn-1],$n=_n[zn],or=_n[zn+1],vr=zn===0?cn:$n.sub(Hn)._unit()._perp(),dr=zn===_n.length-1?cn:or.sub($n)._unit()._perp(),_r=vr._add(dr)._unit(),Tr=_r.x*dr.x+_r.y*dr.y;_r._mult(1/Tr),Fn.push(_r._mult(jt)._add($n))}an.push(Fn)}return an}(Oe,Nt*ct)),function(qt,jt,an){for(var cn=0;cn<jt.length;cn++){var Tn=jt[cn];if(qt.length>=3){for(var _n=0;_n<Tn.length;_n++)if(iu(qt,Tn[_n]))return!0}if(B0(qt,Tn,an))return!0}return!1}(bt,Oe,Tt)},R.prototype.isTileClipped=function(){return!0},R}(hi);function Vy(S,R){return R>0?R+2*S:S}var k3=Li([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),S3=Li([{name:"a_projected_pos",components:3,type:"Float32"}],4),E3=(Li([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Li([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Uy=(Li([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Li([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),C3=Li([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function D3(S,R,X){return S.sections.forEach(function(fe){fe.text=function(Se,Oe,He){var Qe=Oe.layout.get("text-transform").evaluate(He,{});return Qe==="uppercase"?Se=Se.toLocaleUpperCase():Qe==="lowercase"&&(Se=Se.toLocaleLowerCase()),No.applyArabicShaping&&(Se=No.applyArabicShaping(Se)),Se}(fe.text,R,X)}),S}Li([{name:"triangle",components:3,type:"Uint16"}]),Li([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Li([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Li([{type:"Float32",name:"offsetX"}]),Li([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var ch={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},qo=24,Hy=function(S,R,X,fe,Se){var Oe,He,Qe=8*Se-fe-1,ct=(1<<Qe)-1,bt=ct>>1,Tt=-7,Nt=X?Se-1:0,qt=X?-1:1,jt=S[R+Nt];for(Nt+=qt,Oe=jt&(1<<-Tt)-1,jt>>=-Tt,Tt+=Qe;Tt>0;Oe=256*Oe+S[R+Nt],Nt+=qt,Tt-=8);for(He=Oe&(1<<-Tt)-1,Oe>>=-Tt,Tt+=fe;Tt>0;He=256*He+S[R+Nt],Nt+=qt,Tt-=8);if(Oe===0)Oe=1-bt;else{if(Oe===ct)return He?NaN:1/0*(jt?-1:1);He+=Math.pow(2,fe),Oe-=bt}return(jt?-1:1)*He*Math.pow(2,Oe-fe)},qy=function(S,R,X,fe,Se,Oe){var He,Qe,ct,bt=8*Oe-Se-1,Tt=(1<<bt)-1,Nt=Tt>>1,qt=Se===23?Math.pow(2,-24)-Math.pow(2,-77):0,jt=fe?0:Oe-1,an=fe?1:-1,cn=R<0||R===0&&1/R<0?1:0;for(R=Math.abs(R),isNaN(R)||R===1/0?(Qe=isNaN(R)?1:0,He=Tt):(He=Math.floor(Math.log(R)/Math.LN2),R*(ct=Math.pow(2,-He))<1&&(He--,ct*=2),(R+=He+Nt>=1?qt/ct:qt*Math.pow(2,1-Nt))*ct>=2&&(He++,ct/=2),He+Nt>=Tt?(Qe=0,He=Tt):He+Nt>=1?(Qe=(R*ct-1)*Math.pow(2,Se),He+=Nt):(Qe=R*Math.pow(2,Nt-1)*Math.pow(2,Se),He=0));Se>=8;S[X+jt]=255&Qe,jt+=an,Qe/=256,Se-=8);for(He=He<<Se|Qe,bt+=Se;bt>0;S[X+jt]=255&He,jt+=an,He/=256,bt-=8);S[X+jt-an]|=128*cn},Ld=Ui;function Ui(S){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(S)?S:new Uint8Array(S||0),this.pos=0,this.type=0,this.length=this.buf.length}Ui.Varint=0,Ui.Fixed64=1,Ui.Bytes=2,Ui.Fixed32=5;var J0=4294967296,Gy=1/J0,Wy=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Au(S){return S.type===Ui.Bytes?S.readVarint()+S.pos:S.pos+1}function Xc(S,R,X){return X?4294967296*R+(S>>>0):4294967296*(R>>>0)+(S>>>0)}function Yy(S,R,X){var fe=R<=16383?1:R<=2097151?2:R<=268435455?3:Math.floor(Math.log(R)/(7*Math.LN2));X.realloc(fe);for(var Se=X.pos-1;Se>=S;Se--)X.buf[Se+fe]=X.buf[Se]}function I3(S,R){for(var X=0;X<S.length;X++)R.writeVarint(S[X])}function L3(S,R){for(var X=0;X<S.length;X++)R.writeSVarint(S[X])}function O3(S,R){for(var X=0;X<S.length;X++)R.writeFloat(S[X])}function P3(S,R){for(var X=0;X<S.length;X++)R.writeDouble(S[X])}function R3(S,R){for(var X=0;X<S.length;X++)R.writeBoolean(S[X])}function F3(S,R){for(var X=0;X<S.length;X++)R.writeFixed32(S[X])}function N3(S,R){for(var X=0;X<S.length;X++)R.writeSFixed32(S[X])}function z3(S,R){for(var X=0;X<S.length;X++)R.writeFixed64(S[X])}function B3(S,R){for(var X=0;X<S.length;X++)R.writeSFixed64(S[X])}function Od(S,R){return(S[R]|S[R+1]<<8|S[R+2]<<16)+16777216*S[R+3]}function Kc(S,R,X){S[X]=R,S[X+1]=R>>>8,S[X+2]=R>>>16,S[X+3]=R>>>24}function $y(S,R){return(S[R]|S[R+1]<<8|S[R+2]<<16)+(S[R+3]<<24)}Ui.prototype={destroy:function(){this.buf=null},readFields:function(S,R,X){for(X=X||this.length;this.pos<X;){var fe=this.readVarint(),Se=fe>>3,Oe=this.pos;this.type=7&fe,S(Se,R,this),this.pos===Oe&&this.skip(fe)}return R},readMessage:function(S,R){return this.readFields(S,R,this.readVarint()+this.pos)},readFixed32:function(){var S=Od(this.buf,this.pos);return this.pos+=4,S},readSFixed32:function(){var S=$y(this.buf,this.pos);return this.pos+=4,S},readFixed64:function(){var S=Od(this.buf,this.pos)+Od(this.buf,this.pos+4)*J0;return this.pos+=8,S},readSFixed64:function(){var S=Od(this.buf,this.pos)+$y(this.buf,this.pos+4)*J0;return this.pos+=8,S},readFloat:function(){var S=Hy(this.buf,this.pos,!0,23,4);return this.pos+=4,S},readDouble:function(){var S=Hy(this.buf,this.pos,!0,52,8);return this.pos+=8,S},readVarint:function(S){var R,X,fe=this.buf;return R=127&(X=fe[this.pos++]),X<128?R:(R|=(127&(X=fe[this.pos++]))<<7,X<128?R:(R|=(127&(X=fe[this.pos++]))<<14,X<128?R:(R|=(127&(X=fe[this.pos++]))<<21,X<128?R:function(Se,Oe,He){var Qe,ct,bt=He.buf;if(Qe=(112&(ct=bt[He.pos++]))>>4,ct<128||(Qe|=(127&(ct=bt[He.pos++]))<<3,ct<128)||(Qe|=(127&(ct=bt[He.pos++]))<<10,ct<128)||(Qe|=(127&(ct=bt[He.pos++]))<<17,ct<128)||(Qe|=(127&(ct=bt[He.pos++]))<<24,ct<128)||(Qe|=(1&(ct=bt[He.pos++]))<<31,ct<128))return Xc(Se,Qe,Oe);throw new Error("Expected varint not more than 10 bytes")}(R|=(15&(X=fe[this.pos]))<<28,S,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var S=this.readVarint();return S%2==1?(S+1)/-2:S/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var S=this.readVarint()+this.pos,R=this.pos;return this.pos=S,S-R>=12&&Wy?function(X,fe,Se){return Wy.decode(X.subarray(fe,Se))}(this.buf,R,S):function(X,fe,Se){for(var Oe="",He=fe;He<Se;){var Qe,ct,bt,Tt=X[He],Nt=null,qt=Tt>239?4:Tt>223?3:Tt>191?2:1;if(He+qt>Se)break;qt===1?Tt<128&&(Nt=Tt):qt===2?(192&(Qe=X[He+1]))==128&&(Nt=(31&Tt)<<6|63&Qe)<=127&&(Nt=null):qt===3?(Qe=X[He+1],ct=X[He+2],(192&Qe)==128&&(192&ct)==128&&((Nt=(15&Tt)<<12|(63&Qe)<<6|63&ct)<=2047||Nt>=55296&&Nt<=57343)&&(Nt=null)):qt===4&&(Qe=X[He+1],ct=X[He+2],bt=X[He+3],(192&Qe)==128&&(192&ct)==128&&(192&bt)==128&&((Nt=(15&Tt)<<18|(63&Qe)<<12|(63&ct)<<6|63&bt)<=65535||Nt>=1114112)&&(Nt=null)),Nt===null?(Nt=65533,qt=1):Nt>65535&&(Nt-=65536,Oe+=String.fromCharCode(Nt>>>10&1023|55296),Nt=56320|1023&Nt),Oe+=String.fromCharCode(Nt),He+=qt}return Oe}(this.buf,R,S)},readBytes:function(){var S=this.readVarint()+this.pos,R=this.buf.subarray(this.pos,S);return this.pos=S,R},readPackedVarint:function(S,R){if(this.type!==Ui.Bytes)return S.push(this.readVarint(R));var X=Au(this);for(S=S||[];this.pos<X;)S.push(this.readVarint(R));return S},readPackedSVarint:function(S){if(this.type!==Ui.Bytes)return S.push(this.readSVarint());var R=Au(this);for(S=S||[];this.pos<R;)S.push(this.readSVarint());return S},readPackedBoolean:function(S){if(this.type!==Ui.Bytes)return S.push(this.readBoolean());var R=Au(this);for(S=S||[];this.pos<R;)S.push(this.readBoolean());return S},readPackedFloat:function(S){if(this.type!==Ui.Bytes)return S.push(this.readFloat());var R=Au(this);for(S=S||[];this.pos<R;)S.push(this.readFloat());return S},readPackedDouble:function(S){if(this.type!==Ui.Bytes)return S.push(this.readDouble());var R=Au(this);for(S=S||[];this.pos<R;)S.push(this.readDouble());return S},readPackedFixed32:function(S){if(this.type!==Ui.Bytes)return S.push(this.readFixed32());var R=Au(this);for(S=S||[];this.pos<R;)S.push(this.readFixed32());return S},readPackedSFixed32:function(S){if(this.type!==Ui.Bytes)return S.push(this.readSFixed32());var R=Au(this);for(S=S||[];this.pos<R;)S.push(this.readSFixed32());return S},readPackedFixed64:function(S){if(this.type!==Ui.Bytes)return S.push(this.readFixed64());var R=Au(this);for(S=S||[];this.pos<R;)S.push(this.readFixed64());return S},readPackedSFixed64:function(S){if(this.type!==Ui.Bytes)return S.push(this.readSFixed64());var R=Au(this);for(S=S||[];this.pos<R;)S.push(this.readSFixed64());return S},skip:function(S){var R=7&S;if(R===Ui.Varint)for(;this.buf[this.pos++]>127;);else if(R===Ui.Bytes)this.pos=this.readVarint()+this.pos;else if(R===Ui.Fixed32)this.pos+=4;else{if(R!==Ui.Fixed64)throw new Error("Unimplemented type: "+R);this.pos+=8}},writeTag:function(S,R){this.writeVarint(S<<3|R)},realloc:function(S){for(var R=this.length||16;R<this.pos+S;)R*=2;if(R!==this.length){var X=new Uint8Array(R);X.set(this.buf),this.buf=X,this.length=R}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(S){this.realloc(4),Kc(this.buf,S,this.pos),this.pos+=4},writeSFixed32:function(S){this.realloc(4),Kc(this.buf,S,this.pos),this.pos+=4},writeFixed64:function(S){this.realloc(8),Kc(this.buf,-1&S,this.pos),Kc(this.buf,Math.floor(S*Gy),this.pos+4),this.pos+=8},writeSFixed64:function(S){this.realloc(8),Kc(this.buf,-1&S,this.pos),Kc(this.buf,Math.floor(S*Gy),this.pos+4),this.pos+=8},writeVarint:function(S){(S=+S||0)>268435455||S<0?function(R,X){var fe,Se;if(R>=0?(fe=R%4294967296|0,Se=R/4294967296|0):(Se=~(-R/4294967296),4294967295^(fe=~(-R%4294967296))?fe=fe+1|0:(fe=0,Se=Se+1|0)),R>=18446744073709552e3||R<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");X.realloc(10),function(Oe,He,Qe){Qe.buf[Qe.pos++]=127&Oe|128,Oe>>>=7,Qe.buf[Qe.pos++]=127&Oe|128,Oe>>>=7,Qe.buf[Qe.pos++]=127&Oe|128,Oe>>>=7,Qe.buf[Qe.pos++]=127&Oe|128,Oe>>>=7,Qe.buf[Qe.pos]=127&Oe}(fe,0,X),function(Oe,He){var Qe=(7&Oe)<<4;He.buf[He.pos++]|=Qe|((Oe>>>=3)?128:0),Oe&&(He.buf[He.pos++]=127&Oe|((Oe>>>=7)?128:0),Oe&&(He.buf[He.pos++]=127&Oe|((Oe>>>=7)?128:0),Oe&&(He.buf[He.pos++]=127&Oe|((Oe>>>=7)?128:0),Oe&&(He.buf[He.pos++]=127&Oe|((Oe>>>=7)?128:0),Oe&&(He.buf[He.pos++]=127&Oe)))))}(Se,X)}(S,this):(this.realloc(4),this.buf[this.pos++]=127&S|(S>127?128:0),S<=127||(this.buf[this.pos++]=127&(S>>>=7)|(S>127?128:0),S<=127||(this.buf[this.pos++]=127&(S>>>=7)|(S>127?128:0),S<=127||(this.buf[this.pos++]=S>>>7&127))))},writeSVarint:function(S){this.writeVarint(S<0?2*-S-1:2*S)},writeBoolean:function(S){this.writeVarint(!!S)},writeString:function(S){S=String(S),this.realloc(4*S.length),this.pos++;var R=this.pos;this.pos=function(fe,Se,Oe){for(var He,Qe,ct=0;ct<Se.length;ct++){if((He=Se.charCodeAt(ct))>55295&&He<57344){if(!Qe){He>56319||ct+1===Se.length?(fe[Oe++]=239,fe[Oe++]=191,fe[Oe++]=189):Qe=He;continue}if(He<56320){fe[Oe++]=239,fe[Oe++]=191,fe[Oe++]=189,Qe=He;continue}He=Qe-55296<<10|He-56320|65536,Qe=null}else Qe&&(fe[Oe++]=239,fe[Oe++]=191,fe[Oe++]=189,Qe=null);He<128?fe[Oe++]=He:(He<2048?fe[Oe++]=He>>6|192:(He<65536?fe[Oe++]=He>>12|224:(fe[Oe++]=He>>18|240,fe[Oe++]=He>>12&63|128),fe[Oe++]=He>>6&63|128),fe[Oe++]=63&He|128)}return Oe}(this.buf,S,this.pos);var X=this.pos-R;X>=128&&Yy(R,X,this),this.pos=R-1,this.writeVarint(X),this.pos+=X},writeFloat:function(S){this.realloc(4),qy(this.buf,S,this.pos,!0,23,4),this.pos+=4},writeDouble:function(S){this.realloc(8),qy(this.buf,S,this.pos,!0,52,8),this.pos+=8},writeBytes:function(S){var R=S.length;this.writeVarint(R),this.realloc(R);for(var X=0;X<R;X++)this.buf[this.pos++]=S[X]},writeRawMessage:function(S,R){this.pos++;var X=this.pos;S(R,this);var fe=this.pos-X;fe>=128&&Yy(X,fe,this),this.pos=X-1,this.writeVarint(fe),this.pos+=fe},writeMessage:function(S,R,X){this.writeTag(S,Ui.Bytes),this.writeRawMessage(R,X)},writePackedVarint:function(S,R){R.length&&this.writeMessage(S,I3,R)},writePackedSVarint:function(S,R){R.length&&this.writeMessage(S,L3,R)},writePackedBoolean:function(S,R){R.length&&this.writeMessage(S,R3,R)},writePackedFloat:function(S,R){R.length&&this.writeMessage(S,O3,R)},writePackedDouble:function(S,R){R.length&&this.writeMessage(S,P3,R)},writePackedFixed32:function(S,R){R.length&&this.writeMessage(S,F3,R)},writePackedSFixed32:function(S,R){R.length&&this.writeMessage(S,N3,R)},writePackedFixed64:function(S,R){R.length&&this.writeMessage(S,z3,R)},writePackedSFixed64:function(S,R){R.length&&this.writeMessage(S,B3,R)},writeBytesField:function(S,R){this.writeTag(S,Ui.Bytes),this.writeBytes(R)},writeFixed32Field:function(S,R){this.writeTag(S,Ui.Fixed32),this.writeFixed32(R)},writeSFixed32Field:function(S,R){this.writeTag(S,Ui.Fixed32),this.writeSFixed32(R)},writeFixed64Field:function(S,R){this.writeTag(S,Ui.Fixed64),this.writeFixed64(R)},writeSFixed64Field:function(S,R){this.writeTag(S,Ui.Fixed64),this.writeSFixed64(R)},writeVarintField:function(S,R){this.writeTag(S,Ui.Varint),this.writeVarint(R)},writeSVarintField:function(S,R){this.writeTag(S,Ui.Varint),this.writeSVarint(R)},writeStringField:function(S,R){this.writeTag(S,Ui.Bytes),this.writeString(R)},writeFloatField:function(S,R){this.writeTag(S,Ui.Fixed32),this.writeFloat(R)},writeDoubleField:function(S,R){this.writeTag(S,Ui.Fixed64),this.writeDouble(R)},writeBooleanField:function(S,R){this.writeVarintField(S,!!R)}};var Q0=3;function j3(S,R,X){S===1&&X.readMessage(V3,R)}function V3(S,R,X){if(S===3){var fe=X.readMessage(U3,{}),Se=fe.id,Oe=fe.bitmap,He=fe.width,Qe=fe.height,ct=fe.left,bt=fe.top,Tt=fe.advance;R.push({id:Se,bitmap:new mc({width:He+2*Q0,height:Qe+2*Q0},Oe),metrics:{width:He,height:Qe,left:ct,top:bt,advance:Tt}})}}function U3(S,R,X){S===1?R.id=X.readVarint():S===2?R.bitmap=X.readBytes():S===3?R.width=X.readVarint():S===4?R.height=X.readVarint():S===5?R.left=X.readSVarint():S===6?R.top=X.readSVarint():S===7&&(R.advance=X.readVarint())}var Zy=Q0;function Xy(S){for(var R=0,X=0,fe=0,Se=S;fe<Se.length;fe+=1){var Oe=Se[fe];R+=Oe.w*Oe.h,X=Math.max(X,Oe.w)}S.sort(function(cn,Tn){return Tn.h-cn.h});for(var He=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(R/.95)),X),h:1/0}],Qe=0,ct=0,bt=0,Tt=S;bt<Tt.length;bt+=1)for(var Nt=Tt[bt],qt=He.length-1;qt>=0;qt--){var jt=He[qt];if(!(Nt.w>jt.w||Nt.h>jt.h)){if(Nt.x=jt.x,Nt.y=jt.y,ct=Math.max(ct,Nt.y+Nt.h),Qe=Math.max(Qe,Nt.x+Nt.w),Nt.w===jt.w&&Nt.h===jt.h){var an=He.pop();qt<He.length&&(He[qt]=an)}else Nt.h===jt.h?(jt.x+=Nt.w,jt.w-=Nt.w):Nt.w===jt.w?(jt.y+=Nt.h,jt.h-=Nt.h):(He.push({x:jt.x+Nt.w,y:jt.y,w:jt.w-Nt.w,h:Nt.h}),jt.y+=Nt.h,jt.h-=Nt.h);break}}return{w:Qe,h:ct,fill:R/(Qe*ct)||0}}var as=1,Pd=function(S,R){var X=R.pixelRatio,fe=R.version,Se=R.stretchX,Oe=R.stretchY,He=R.content;this.paddedRect=S,this.pixelRatio=X,this.stretchX=Se,this.stretchY=Oe,this.content=He,this.version=fe},fh={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};fh.tl.get=function(){return[this.paddedRect.x+as,this.paddedRect.y+as]},fh.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-as,this.paddedRect.y+this.paddedRect.h-as]},fh.tlbr.get=function(){return this.tl.concat(this.br)},fh.displaySize.get=function(){return[(this.paddedRect.w-2*as)/this.pixelRatio,(this.paddedRect.h-2*as)/this.pixelRatio]},Object.defineProperties(Pd.prototype,fh);var hh=function(S,R){var X={},fe={};this.haveRenderCallbacks=[];var Se=[];this.addImages(S,X,Se),this.addImages(R,fe,Se);var Oe=Xy(Se),He=Oe.w,Qe=Oe.h,ct=new Ya({width:He||1,height:Qe||1});for(var bt in S){var Tt=S[bt],Nt=X[bt].paddedRect;Ya.copy(Tt.data,ct,{x:0,y:0},{x:Nt.x+as,y:Nt.y+as},Tt.data)}for(var qt in R){var jt=R[qt],an=fe[qt].paddedRect,cn=an.x+as,Tn=an.y+as,_n=jt.data.width,Fn=jt.data.height;Ya.copy(jt.data,ct,{x:0,y:0},{x:cn,y:Tn},jt.data),Ya.copy(jt.data,ct,{x:0,y:Fn-1},{x:cn,y:Tn-1},{width:_n,height:1}),Ya.copy(jt.data,ct,{x:0,y:0},{x:cn,y:Tn+Fn},{width:_n,height:1}),Ya.copy(jt.data,ct,{x:_n-1,y:0},{x:cn-1,y:Tn},{width:1,height:Fn}),Ya.copy(jt.data,ct,{x:0,y:0},{x:cn+_n,y:Tn},{width:1,height:Fn})}this.image=ct,this.iconPositions=X,this.patternPositions=fe};hh.prototype.addImages=function(S,R,X){for(var fe in S){var Se=S[fe],Oe={x:0,y:0,w:Se.data.width+2*as,h:Se.data.height+2*as};X.push(Oe),R[fe]=new Pd(Oe,Se),Se.hasRenderCallback&&this.haveRenderCallbacks.push(fe)}},hh.prototype.patchUpdatedImages=function(S,R){for(var X in S.dispatchRenderCallbacks(this.haveRenderCallbacks),S.updatedImages)this.patchUpdatedImage(this.iconPositions[X],S.getImage(X),R),this.patchUpdatedImage(this.patternPositions[X],S.getImage(X),R)},hh.prototype.patchUpdatedImage=function(S,R,X){if(S&&R&&S.version!==R.version){S.version=R.version;var fe=S.tl,Se=fe[0],Oe=fe[1];X.update(R.data,void 0,{x:Se,y:Oe})}},Mr("ImagePosition",Pd),Mr("ImageAtlas",hh);var Cs={horizontal:1,vertical:2,horizontalOnly:3},dh=-17,Jc=function(){this.scale=1,this.fontStack="",this.imageName=null};Jc.forText=function(S,R){var X=new Jc;return X.scale=S||1,X.fontStack=R,X},Jc.forImage=function(S){var R=new Jc;return R.imageName=S,R};var pa=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Rd(S,R,X,fe,Se,Oe,He,Qe,ct,bt,Tt,Nt,qt,jt,an,cn){var Tn,_n=pa.fromFeature(S,Se);Nt===Cs.vertical&&_n.verticalizePunctuation();var Fn=No.processBidirectionalText,zn=No.processStyledBidirectionalText;if(Fn&&_n.sections.length===1){Tn=[];for(var Hn=0,$n=Fn(_n.toString(),eg(_n,bt,Oe,R,fe,jt,an));Hn<$n.length;Hn+=1){var or=$n[Hn],vr=new pa;vr.text=or,vr.sections=_n.sections;for(var dr=0;dr<or.length;dr++)vr.sectionIndex.push(0);Tn.push(vr)}}else if(zn){Tn=[];for(var _r=0,Tr=zn(_n.text,_n.sectionIndex,eg(_n,bt,Oe,R,fe,jt,an));_r<Tr.length;_r+=1){var jr=Tr[_r],Dr=new pa;Dr.text=jr[0],Dr.sectionIndex=jr[1],Dr.sections=_n.sections,Tn.push(Dr)}}else Tn=function(Cr,ri){for(var Hr=[],Fi=Cr.text,zr=0,Ei=0,Hi=ri;Ei<Hi.length;Ei+=1){var Wi=Hi[Ei];Hr.push(Cr.substring(zr,Wi)),zr=Wi}return zr<Fi.length&&Hr.push(Cr.substring(zr,Fi.length)),Hr}(_n,eg(_n,bt,Oe,R,fe,jt,an));var Br=[],Lr={positionedLines:Br,text:_n.toString(),top:Tt[1],bottom:Tt[1],left:Tt[0],right:Tt[0],writingMode:Nt,iconsInText:!1,verticalizable:!1};return function(Cr,ri,Hr,Fi,zr,Ei,Hi,Wi,Yi,Ni,So,eo){for(var Bo=0,ta=dh,Go=0,Da=0,Wo=Wi==="right"?1:Wi==="left"?0:.5,Io=0,Yo=0,jo=zr;Yo<jo.length;Yo+=1){var Lo=jo[Yo];Lo.trim();var qr=Lo.getMaxScale(),si=(qr-1)*qo,ho={positionedGlyphs:[],lineOffset:0};Cr.positionedLines[Io]=ho;var Pi=ho.positionedGlyphs,oo=0;if(Lo.length()){for(var Ki=0;Ki<Lo.length();Ki++){var di=Lo.getSection(Ki),po=Lo.getSectionIndex(Ki),Ia=Lo.getCharCode(Ki),ls=0,ga=null,Bl=null,Eu=null,Vo=qo,jl=!(Yi===Cs.horizontal||!So&&!ns(Ia)||So&&(Fd[Ia]||As(Ia)));if(di.imageName){var ml=Fi[di.imageName];if(!ml)continue;Eu=di.imageName,Cr.iconsInText=Cr.iconsInText||!0,Bl=ml.paddedRect;var vl=ml.displaySize;di.scale=di.scale*qo/eo,ga={width:vl[0],height:vl[1],left:as,top:-Zy,advance:jl?vl[1]:vl[0]},ls=si+(qo-vl[1]*di.scale),Vo=ga.advance;var bc=jl?vl[0]*di.scale-qo*qr:vl[1]*di.scale-qo*qr;bc>0&&bc>oo&&(oo=bc)}else{var Gd=Hr[di.fontStack],_c=Gd&&Gd[Ia];if(_c&&_c.rect)Bl=_c.rect,ga=_c.metrics;else{var Wd=ri[di.fontStack],vh=Wd&&Wd[Ia];if(!vh)continue;ga=vh.metrics}ls=(qr-di.scale)*qo}jl?(Cr.verticalizable=!0,Pi.push({glyph:Ia,imageName:Eu,x:Bo,y:ta+ls,vertical:jl,scale:di.scale,fontStack:di.fontStack,sectionIndex:po,metrics:ga,rect:Bl}),Bo+=Vo*di.scale+Ni):(Pi.push({glyph:Ia,imageName:Eu,x:Bo,y:ta+ls,vertical:jl,scale:di.scale,fontStack:di.fontStack,sectionIndex:po,metrics:ga,rect:Bl}),Bo+=ga.advance*di.scale+Ni)}if(Pi.length!==0){var cg=Bo-Ni;Go=Math.max(cg,Go),q3(Pi,0,Pi.length-1,Wo,oo)}Bo=0;var Yd=Ei*qr+oo;ho.lineOffset=Math.max(oo,si),ta+=Yd,Da=Math.max(Yd,Da),++Io}else ta+=Ei,++Io}var uf=ta-dh,$d=tg(Hi),Zd=$d.horizontalAlign,yh=$d.verticalAlign;(function(fg,xh,wc,cf,Xd,Kd,ff,Jd,Qd){var bh=(xh-wc)*Xd,_h=0;_h=Kd!==ff?-Jd*cf-dh:(-cf*Qd+.5)*ff;for(var Tc=0,wh=fg;Tc<wh.length;Tc+=1)for(var Mc=0,Th=wh[Tc].positionedGlyphs;Mc<Th.length;Mc+=1){var Mh=Th[Mc];Mh.x+=bh,Mh.y+=_h}})(Cr.positionedLines,Wo,Zd,yh,Go,Da,Ei,uf,zr.length),Cr.top+=-yh*uf,Cr.bottom=Cr.top+uf,Cr.left+=-Zd*Go,Cr.right=Cr.left+Go}(Lr,R,X,fe,Tn,He,Qe,ct,Nt,bt,qt,cn),!function(Cr){for(var ri=0,Hr=Cr;ri<Hr.length;ri+=1)if(Hr[ri].positionedGlyphs.length!==0)return!1;return!0}(Br)&&Lr}pa.fromFeature=function(S,R){for(var X=new pa,fe=0;fe<S.sections.length;fe++){var Se=S.sections[fe];Se.image?X.addImageSection(Se):X.addTextSection(Se,R)}return X},pa.prototype.length=function(){return this.text.length},pa.prototype.getSection=function(S){return this.sections[this.sectionIndex[S]]},pa.prototype.getSectionIndex=function(S){return this.sectionIndex[S]},pa.prototype.getCharCode=function(S){return this.text.charCodeAt(S)},pa.prototype.verticalizePunctuation=function(){this.text=function(S){for(var R="",X=0;X<S.length;X++){var fe=S.charCodeAt(X+1)||null,Se=S.charCodeAt(X-1)||null;fe&&co(fe)&&!ch[S[X+1]]||Se&&co(Se)&&!ch[S[X-1]]||!ch[S[X]]?R+=S[X]:R+=ch[S[X]]}return R}(this.text)},pa.prototype.trim=function(){for(var S=0,R=0;R<this.text.length&&Fd[this.text.charCodeAt(R)];R++)S++;for(var X=this.text.length,fe=this.text.length-1;fe>=0&&fe>=S&&Fd[this.text.charCodeAt(fe)];fe--)X--;this.text=this.text.substring(S,X),this.sectionIndex=this.sectionIndex.slice(S,X)},pa.prototype.substring=function(S,R){var X=new pa;return X.text=this.text.substring(S,R),X.sectionIndex=this.sectionIndex.slice(S,R),X.sections=this.sections,X},pa.prototype.toString=function(){return this.text},pa.prototype.getMaxScale=function(){var S=this;return this.sectionIndex.reduce(function(R,X){return Math.max(R,S.sections[X].scale)},0)},pa.prototype.addTextSection=function(S,R){this.text+=S.text,this.sections.push(Jc.forText(S.scale,S.fontStack||R));for(var X=this.sections.length-1,fe=0;fe<S.text.length;++fe)this.sectionIndex.push(X)},pa.prototype.addImageSection=function(S){var R=S.image?S.image.name:"";if(R.length!==0){var X=this.getNextImageSectionCharCode();X?(this.text+=String.fromCharCode(X),this.sections.push(Jc.forImage(R)),this.sectionIndex.push(this.sections.length-1)):D("Reached maximum number of images 6401")}else D("Can't add FormattedSection with an empty image.")},pa.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Fd={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ss={};function Ky(S,R,X,fe,Se,Oe){if(R.imageName){var He=fe[R.imageName];return He?He.displaySize[0]*R.scale*qo/Oe+Se:0}var Qe=X[R.fontStack],ct=Qe&&Qe[S];return ct?ct.metrics.advance*R.scale+Se:0}function Jy(S,R,X,fe){var Se=Math.pow(S-R,2);return fe?S<R?Se/2:2*Se:Se+Math.abs(X)*X}function H3(S,R,X){var fe=0;return S===10&&(fe-=1e4),X&&(fe+=150),S!==40&&S!==65288||(fe+=50),R!==41&&R!==65289||(fe+=50),fe}function Qy(S,R,X,fe,Se,Oe){for(var He=null,Qe=Jy(R,X,Se,Oe),ct=0,bt=fe;ct<bt.length;ct+=1){var Tt=bt[ct],Nt=Jy(R-Tt.x,X,Se,Oe)+Tt.badness;Nt<=Qe&&(He=Tt,Qe=Nt)}return{index:S,x:R,priorBreak:He,badness:Qe}}function e1(S){return S?e1(S.priorBreak).concat(S.index):[]}function eg(S,R,X,fe,Se,Oe,He){if(Oe!=="point")return[];if(!S)return[];for(var Qe=[],ct=function(Tn,_n,Fn,zn,Hn,$n){for(var or=0,vr=0;vr<Tn.length();vr++){var dr=Tn.getSection(vr);or+=Ky(Tn.getCharCode(vr),dr,zn,Hn,_n,$n)}return or/Math.max(1,Math.ceil(or/Fn))}(S,R,X,fe,Se,He),bt=S.text.indexOf("\u200B")>=0,Tt=0,Nt=0;Nt<S.length();Nt++){var qt=S.getSection(Nt),jt=S.getCharCode(Nt);if(Fd[jt]||(Tt+=Ky(jt,qt,fe,Se,R,He)),Nt<S.length()-1){var an=!((cn=jt)<11904||!(yr["Bopomofo Extended"](cn)||yr.Bopomofo(cn)||yr["CJK Compatibility Forms"](cn)||yr["CJK Compatibility Ideographs"](cn)||yr["CJK Compatibility"](cn)||yr["CJK Radicals Supplement"](cn)||yr["CJK Strokes"](cn)||yr["CJK Symbols and Punctuation"](cn)||yr["CJK Unified Ideographs Extension A"](cn)||yr["CJK Unified Ideographs"](cn)||yr["Enclosed CJK Letters and Months"](cn)||yr["Halfwidth and Fullwidth Forms"](cn)||yr.Hiragana(cn)||yr["Ideographic Description Characters"](cn)||yr["Kangxi Radicals"](cn)||yr["Katakana Phonetic Extensions"](cn)||yr.Katakana(cn)||yr["Vertical Forms"](cn)||yr["Yi Radicals"](cn)||yr["Yi Syllables"](cn)));(ss[jt]||an||qt.imageName)&&Qe.push(Qy(Nt+1,Tt,ct,Qe,H3(jt,S.getCharCode(Nt+1),an&&bt),!1))}}var cn;return e1(Qy(S.length(),Tt,ct,Qe,0,!0))}function tg(S){var R=.5,X=.5;switch(S){case"right":case"top-right":case"bottom-right":R=1;break;case"left":case"top-left":case"bottom-left":R=0}switch(S){case"bottom":case"bottom-right":case"bottom-left":X=1;break;case"top":case"top-right":case"top-left":X=0}return{horizontalAlign:R,verticalAlign:X}}function q3(S,R,X,fe,Se){if(fe||Se)for(var Oe=S[X],He=Oe.metrics.advance*Oe.scale,Qe=(S[X].x+He)*fe,ct=R;ct<=X;ct++)S[ct].x-=Qe,S[ct].y+=Se}function t1(S,R,X,fe,Se,Oe){var He,Qe=S.image;if(Qe.content){var ct=Qe.content,bt=Qe.pixelRatio||1;He=[ct[0]/bt,ct[1]/bt,Qe.displaySize[0]-ct[2]/bt,Qe.displaySize[1]-ct[3]/bt]}var Tt,Nt,qt,jt,an=R.left*Oe,cn=R.right*Oe;X==="width"||X==="both"?(jt=Se[0]+an-fe[3],Nt=Se[0]+cn+fe[1]):Nt=(jt=Se[0]+(an+cn-Qe.displaySize[0])/2)+Qe.displaySize[0];var Tn=R.top*Oe,_n=R.bottom*Oe;return X==="height"||X==="both"?(Tt=Se[1]+Tn-fe[0],qt=Se[1]+_n+fe[2]):qt=(Tt=Se[1]+(Tn+_n-Qe.displaySize[1])/2)+Qe.displaySize[1],{image:Qe,top:Tt,right:Nt,bottom:qt,left:jt,collisionPadding:He}}ss[10]=!0,ss[32]=!0,ss[38]=!0,ss[40]=!0,ss[41]=!0,ss[43]=!0,ss[45]=!0,ss[47]=!0,ss[173]=!0,ss[183]=!0,ss[8203]=!0,ss[8208]=!0,ss[8211]=!0,ss[8231]=!0;var Qc=function(S){function R(X,fe,Se,Oe){S.call(this,X,fe),this.angle=Se,Oe!==void 0&&(this.segment=Oe)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype.clone=function(){return new R(this.x,this.y,this.angle,this.segment)},R}(t);Mr("Anchor",Qc);var zl=128;function ng(S,R){var X=R.expression;if(X.kind==="constant")return{kind:"constant",layoutSize:X.evaluate(new Xr(S+1))};if(X.kind==="source")return{kind:"source"};for(var fe=X.zoomStops,Se=X.interpolationType,Oe=0;Oe<fe.length&&fe[Oe]<=S;)Oe++;for(var He=Oe=Math.max(0,Oe-1);He<fe.length&&fe[He]<S+1;)He++;He=Math.min(fe.length-1,He);var Qe=fe[Oe],ct=fe[He];return X.kind==="composite"?{kind:"composite",minZoom:Qe,maxZoom:ct,interpolationType:Se}:{kind:"camera",minZoom:Qe,maxZoom:ct,minSize:X.evaluate(new Xr(Qe)),maxSize:X.evaluate(new Xr(ct)),interpolationType:Se}}function n1(S,R,X){var fe=R.uSize,Se=R.uSizeT,Oe=X.lowerSize,He=X.upperSize;return S.kind==="source"?Oe/zl:S.kind==="composite"?Pr(Oe/zl,He/zl,Se):fe}function r1(S,R){var X=0,fe=0;if(S.kind==="constant")fe=S.layoutSize;else if(S.kind!=="source"){var Se=S.interpolationType,Oe=S.minZoom,He=S.maxZoom,Qe=Se?l(lo.interpolationFactor(Se,R,Oe,He),0,1):0;S.kind==="camera"?fe=Pr(S.minSize,S.maxSize,Qe):X=Qe}return{uSizeT:X,uSize:fe}}var G3=Object.freeze({__proto__:null,getSizeData:ng,evaluateSizeForFeature:n1,evaluateSizeForZoom:r1,SIZE_PACK_FACTOR:zl});function i1(S,R,X,fe,Se){if(R.segment===void 0)return!0;for(var Oe=R,He=R.segment+1,Qe=0;Qe>-X/2;){if(--He<0)return!1;Qe-=S[He].dist(Oe),Oe=S[He]}Qe+=S[He].dist(S[He+1]),He++;for(var ct=[],bt=0;Qe<X/2;){var Tt=S[He-1],Nt=S[He],qt=S[He+1];if(!qt)return!1;var jt=Tt.angleTo(Nt)-Nt.angleTo(qt);for(jt=Math.abs((jt+3*Math.PI)%(2*Math.PI)-Math.PI),ct.push({distance:Qe,angleDelta:jt}),bt+=jt;Qe-ct[0].distance>fe;)bt-=ct.shift().angleDelta;if(bt>Se)return!1;He++,Qe+=Nt.dist(qt)}return!0}function o1(S){for(var R=0,X=0;X<S.length-1;X++)R+=S[X].dist(S[X+1]);return R}function a1(S,R,X){return S?.6*R*X:0}function s1(S,R){return Math.max(S?S.right-S.left:0,R?R.right-R.left:0)}function W3(S,R,X,fe,Se,Oe){for(var He=a1(X,Se,Oe),Qe=s1(X,fe)*Oe,ct=0,bt=o1(S)/2,Tt=0;Tt<S.length-1;Tt++){var Nt=S[Tt],qt=S[Tt+1],jt=Nt.dist(qt);if(ct+jt>bt){var an=(bt-ct)/jt,cn=Pr(Nt.x,qt.x,an),Tn=Pr(Nt.y,qt.y,an),_n=new Qc(cn,Tn,qt.angleTo(Nt),Tt);return _n._round(),!He||i1(S,_n,Qe,He,R)?_n:void 0}ct+=jt}}function Y3(S,R,X,fe,Se,Oe,He,Qe,ct){var bt=a1(fe,Oe,He),Tt=s1(fe,Se),Nt=Tt*He,qt=S[0].x===0||S[0].x===ct||S[0].y===0||S[0].y===ct;return R-Nt<R/4&&(R=Nt+R/4),l1(S,qt?R/2*Qe%R:(Tt/2+2*Oe)*He*Qe%R,R,bt,X,Nt,qt,!1,ct)}function l1(S,R,X,fe,Se,Oe,He,Qe,ct){for(var bt=Oe/2,Tt=o1(S),Nt=0,qt=R-X,jt=[],an=0;an<S.length-1;an++){for(var cn=S[an],Tn=S[an+1],_n=cn.dist(Tn),Fn=Tn.angleTo(cn);qt+X<Nt+_n;){var zn=((qt+=X)-Nt)/_n,Hn=Pr(cn.x,Tn.x,zn),$n=Pr(cn.y,Tn.y,zn);if(Hn>=0&&Hn<ct&&$n>=0&&$n<ct&&qt-bt>=0&&qt+bt<=Tt){var or=new Qc(Hn,$n,Fn,an);or._round(),fe&&!i1(S,or,Oe,fe,Se)||jt.push(or)}}Nt+=_n}return Qe||jt.length||He||(jt=l1(S,Nt/2,X,fe,Se,Oe,He,!0,ct)),jt}function u1(S,R,X,fe,Se){for(var Oe=[],He=0;He<S.length;He++)for(var Qe=S[He],ct=void 0,bt=0;bt<Qe.length-1;bt++){var Tt=Qe[bt],Nt=Qe[bt+1];Tt.x<R&&Nt.x<R||(Tt.x<R?Tt=new t(R,Tt.y+(Nt.y-Tt.y)*((R-Tt.x)/(Nt.x-Tt.x)))._round():Nt.x<R&&(Nt=new t(R,Tt.y+(Nt.y-Tt.y)*((R-Tt.x)/(Nt.x-Tt.x)))._round()),Tt.y<X&&Nt.y<X||(Tt.y<X?Tt=new t(Tt.x+(Nt.x-Tt.x)*((X-Tt.y)/(Nt.y-Tt.y)),X)._round():Nt.y<X&&(Nt=new t(Tt.x+(Nt.x-Tt.x)*((X-Tt.y)/(Nt.y-Tt.y)),X)._round()),Tt.x>=fe&&Nt.x>=fe||(Tt.x>=fe?Tt=new t(fe,Tt.y+(Nt.y-Tt.y)*((fe-Tt.x)/(Nt.x-Tt.x)))._round():Nt.x>=fe&&(Nt=new t(fe,Tt.y+(Nt.y-Tt.y)*((fe-Tt.x)/(Nt.x-Tt.x)))._round()),Tt.y>=Se&&Nt.y>=Se||(Tt.y>=Se?Tt=new t(Tt.x+(Nt.x-Tt.x)*((Se-Tt.y)/(Nt.y-Tt.y)),Se)._round():Nt.y>=Se&&(Nt=new t(Tt.x+(Nt.x-Tt.x)*((Se-Tt.y)/(Nt.y-Tt.y)),Se)._round()),ct&&Tt.equals(ct[ct.length-1])||(ct=[Tt],Oe.push(ct)),ct.push(Nt)))))}return Oe}var ef=as;function c1(S,R,X,fe){var Se=[],Oe=S.image,He=Oe.pixelRatio,Qe=Oe.paddedRect.w-2*ef,ct=Oe.paddedRect.h-2*ef,bt=S.right-S.left,Tt=S.bottom-S.top,Nt=Oe.stretchX||[[0,Qe]],qt=Oe.stretchY||[[0,ct]],jt=function(Ei,Hi){return Ei+Hi[1]-Hi[0]},an=Nt.reduce(jt,0),cn=qt.reduce(jt,0),Tn=Qe-an,_n=ct-cn,Fn=0,zn=an,Hn=0,$n=cn,or=0,vr=Tn,dr=0,_r=_n;if(Oe.content&&fe){var Tr=Oe.content;Fn=Nd(Nt,0,Tr[0]),Hn=Nd(qt,0,Tr[1]),zn=Nd(Nt,Tr[0],Tr[2]),$n=Nd(qt,Tr[1],Tr[3]),or=Tr[0]-Fn,dr=Tr[1]-Hn,vr=Tr[2]-Tr[0]-zn,_r=Tr[3]-Tr[1]-$n}var jr=function(Ei,Hi,Wi,Yi){var Ni=zd(Ei.stretch-Fn,zn,bt,S.left),So=Bd(Ei.fixed-or,vr,Ei.stretch,an),eo=zd(Hi.stretch-Hn,$n,Tt,S.top),Bo=Bd(Hi.fixed-dr,_r,Hi.stretch,cn),ta=zd(Wi.stretch-Fn,zn,bt,S.left),Go=Bd(Wi.fixed-or,vr,Wi.stretch,an),Da=zd(Yi.stretch-Hn,$n,Tt,S.top),Wo=Bd(Yi.fixed-dr,_r,Yi.stretch,cn),Io=new t(Ni,eo),Yo=new t(ta,eo),jo=new t(ta,Da),Lo=new t(Ni,Da),qr=new t(So/He,Bo/He),si=new t(Go/He,Wo/He),ho=R*Math.PI/180;if(ho){var Pi=Math.sin(ho),oo=Math.cos(ho),Ki=[oo,-Pi,Pi,oo];Io._matMult(Ki),Yo._matMult(Ki),Lo._matMult(Ki),jo._matMult(Ki)}var di=Ei.stretch+Ei.fixed,po=Wi.stretch+Wi.fixed,Ia=Hi.stretch+Hi.fixed,ls=Yi.stretch+Yi.fixed;return{tl:Io,tr:Yo,bl:Lo,br:jo,tex:{x:Oe.paddedRect.x+ef+di,y:Oe.paddedRect.y+ef+Ia,w:po-di,h:ls-Ia},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:qr,pixelOffsetBR:si,minFontScaleX:vr/He/bt,minFontScaleY:_r/He/Tt,isSDF:X}};if(fe&&(Oe.stretchX||Oe.stretchY))for(var Dr=f1(Nt,Tn,an),Br=f1(qt,_n,cn),Lr=0;Lr<Dr.length-1;Lr++)for(var Cr=Dr[Lr],ri=Dr[Lr+1],Hr=0;Hr<Br.length-1;Hr++){var Fi=Br[Hr],zr=Br[Hr+1];Se.push(jr(Cr,Fi,ri,zr))}else Se.push(jr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Qe+1},{fixed:0,stretch:ct+1}));return Se}function Nd(S,R,X){for(var fe=0,Se=0,Oe=S;Se<Oe.length;Se+=1){var He=Oe[Se];fe+=Math.max(R,Math.min(X,He[1]))-Math.max(R,Math.min(X,He[0]))}return fe}function f1(S,R,X){for(var fe=[{fixed:-ef,stretch:0}],Se=0,Oe=S;Se<Oe.length;Se+=1){var He=Oe[Se],Qe=He[0],ct=He[1],bt=fe[fe.length-1];fe.push({fixed:Qe-bt.stretch,stretch:bt.stretch}),fe.push({fixed:Qe-bt.stretch,stretch:bt.stretch+(ct-Qe)})}return fe.push({fixed:R+ef,stretch:X}),fe}function zd(S,R,X,fe){return S/R*X+fe}function Bd(S,R,X,fe){return S-R*X/fe}var jd=function(S,R,X,fe,Se,Oe,He,Qe,ct,bt){if(this.boxStartIndex=S.length,ct){var Tt=Oe.top,Nt=Oe.bottom,qt=Oe.collisionPadding;qt&&(Tt-=qt[1],Nt+=qt[3]);var jt=Nt-Tt;jt>0&&(jt=Math.max(10,jt),this.circleDiameter=jt)}else{var an=Oe.top*He-Qe,cn=Oe.bottom*He+Qe,Tn=Oe.left*He-Qe,_n=Oe.right*He+Qe,Fn=Oe.collisionPadding;if(Fn&&(Tn-=Fn[0]*He,an-=Fn[1]*He,_n+=Fn[2]*He,cn+=Fn[3]*He),bt){var zn=new t(Tn,an),Hn=new t(_n,an),$n=new t(Tn,cn),or=new t(_n,cn),vr=bt*Math.PI/180;zn._rotate(vr),Hn._rotate(vr),$n._rotate(vr),or._rotate(vr),Tn=Math.min(zn.x,Hn.x,$n.x,or.x),_n=Math.max(zn.x,Hn.x,$n.x,or.x),an=Math.min(zn.y,Hn.y,$n.y,or.y),cn=Math.max(zn.y,Hn.y,$n.y,or.y)}S.emplaceBack(R.x,R.y,Tn,an,_n,cn,X,fe,Se)}this.boxEndIndex=S.length},tf=function(S,R){if(S===void 0&&(S=[]),R===void 0&&(R=$3),this.data=S,this.length=this.data.length,this.compare=R,this.length>0)for(var X=(this.length>>1)-1;X>=0;X--)this._down(X)};function $3(S,R){return S<R?-1:S>R?1:0}function Z3(S,R,X){R===void 0&&(R=1),X===void 0&&(X=!1);for(var fe=1/0,Se=1/0,Oe=-1/0,He=-1/0,Qe=S[0],ct=0;ct<Qe.length;ct++){var bt=Qe[ct];(!ct||bt.x<fe)&&(fe=bt.x),(!ct||bt.y<Se)&&(Se=bt.y),(!ct||bt.x>Oe)&&(Oe=bt.x),(!ct||bt.y>He)&&(He=bt.y)}var Tt=Oe-fe,Nt=He-Se,qt=Math.min(Tt,Nt),jt=qt/2,an=new tf([],X3);if(qt===0)return new t(fe,Se);for(var cn=fe;cn<Oe;cn+=qt)for(var Tn=Se;Tn<He;Tn+=qt)an.push(new nf(cn+jt,Tn+jt,jt,S));for(var _n=function(Hn){for(var $n=0,or=0,vr=0,dr=Hn[0],_r=0,Tr=dr.length,jr=Tr-1;_r<Tr;jr=_r++){var Dr=dr[_r],Br=dr[jr],Lr=Dr.x*Br.y-Br.x*Dr.y;or+=(Dr.x+Br.x)*Lr,vr+=(Dr.y+Br.y)*Lr,$n+=3*Lr}return new nf(or/$n,vr/$n,0,Hn)}(S),Fn=an.length;an.length;){var zn=an.pop();(zn.d>_n.d||!_n.d)&&(_n=zn,X&&console.log("found best %d after %d probes",Math.round(1e4*zn.d)/1e4,Fn)),zn.max-_n.d<=R||(jt=zn.h/2,an.push(new nf(zn.p.x-jt,zn.p.y-jt,jt,S)),an.push(new nf(zn.p.x+jt,zn.p.y-jt,jt,S)),an.push(new nf(zn.p.x-jt,zn.p.y+jt,jt,S)),an.push(new nf(zn.p.x+jt,zn.p.y+jt,jt,S)),Fn+=4)}return X&&(console.log("num probes: "+Fn),console.log("best distance: "+_n.d)),_n.p}function X3(S,R){return R.max-S.max}function nf(S,R,X,fe){this.p=new t(S,R),this.h=X,this.d=function(Se,Oe){for(var He=!1,Qe=1/0,ct=0;ct<Oe.length;ct++)for(var bt=Oe[ct],Tt=0,Nt=bt.length,qt=Nt-1;Tt<Nt;qt=Tt++){var jt=bt[Tt],an=bt[qt];jt.y>Se.y!=an.y>Se.y&&Se.x<(an.x-jt.x)*(Se.y-jt.y)/(an.y-jt.y)+jt.x&&(He=!He),Qe=Math.min(Qe,wd(Se,jt,an))}return(He?1:-1)*Math.sqrt(Qe)}(this.p,fe),this.max=this.d+this.h*Math.SQRT2}tf.prototype.push=function(S){this.data.push(S),this.length++,this._up(this.length-1)},tf.prototype.pop=function(){if(this.length!==0){var S=this.data[0],R=this.data.pop();return this.length--,this.length>0&&(this.data[0]=R,this._down(0)),S}},tf.prototype.peek=function(){return this.data[0]},tf.prototype._up=function(S){for(var R=this.data,X=this.compare,fe=R[S];S>0;){var Se=S-1>>1,Oe=R[Se];if(X(fe,Oe)>=0)break;R[S]=Oe,S=Se}R[S]=fe},tf.prototype._down=function(S){for(var R=this.data,X=this.compare,fe=this.length>>1,Se=R[S];S<fe;){var Oe=1+(S<<1),He=R[Oe],Qe=Oe+1;if(Qe<this.length&&X(R[Qe],He)<0&&(Oe=Qe,He=R[Qe]),X(He,Se)>=0)break;R[S]=He,S=Oe}R[S]=Se};var rf=7,rg=Number.POSITIVE_INFINITY;function h1(S,R){return R[1]!==rg?function(X,fe,Se){var Oe=0,He=0;switch(fe=Math.abs(fe),Se=Math.abs(Se),X){case"top-right":case"top-left":case"top":He=Se-rf;break;case"bottom-right":case"bottom-left":case"bottom":He=-Se+rf}switch(X){case"top-right":case"bottom-right":case"right":Oe=-fe;break;case"top-left":case"bottom-left":case"left":Oe=fe}return[Oe,He]}(S,R[0],R[1]):function(X,fe){var Se=0,Oe=0;fe<0&&(fe=0);var He=fe/Math.sqrt(2);switch(X){case"top-right":case"top-left":Oe=He-rf;break;case"bottom-right":case"bottom-left":Oe=-He+rf;break;case"bottom":Oe=-fe+rf;break;case"top":Oe=fe-rf}switch(X){case"top-right":case"bottom-right":Se=-He;break;case"top-left":case"bottom-left":Se=He;break;case"left":Se=fe;break;case"right":Se=-fe}return[Se,Oe]}(S,R[0])}function ig(S){switch(S){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}var ph=255,$u=ph*zl;function d1(S,R,X,fe,Se,Oe,He,Qe,ct,bt,Tt,Nt,qt,jt,an){var cn=function(Hn,$n,or,vr,dr,_r,Tr,jr){for(var Dr=vr.layout.get("text-rotate").evaluate(_r,{})*Math.PI/180,Br=[],Lr=0,Cr=$n.positionedLines;Lr<Cr.length;Lr+=1)for(var ri=Cr[Lr],Hr=0,Fi=ri.positionedGlyphs;Hr<Fi.length;Hr+=1){var zr=Fi[Hr];if(zr.rect){var Ei=zr.rect||{},Hi=Zy+1,Wi=!0,Yi=1,Ni=0,So=(dr||jr)&&zr.vertical,eo=zr.metrics.advance*zr.scale/2;if(jr&&$n.verticalizable){var Bo=(zr.scale-1)*qo,ta=(qo-zr.metrics.width*zr.scale)/2;Ni=ri.lineOffset/2-(zr.imageName?-ta:Bo)}if(zr.imageName){var Go=Tr[zr.imageName];Wi=Go.sdf,Yi=Go.pixelRatio,Hi=as/Yi}var Da=dr?[zr.x+eo,zr.y]:[0,0],Wo=dr?[0,0]:[zr.x+eo+or[0],zr.y+or[1]-Ni],Io=[0,0];So&&(Io=Wo,Wo=[0,0]);var Yo=(zr.metrics.left-Hi)*zr.scale-eo+Wo[0],jo=(-zr.metrics.top-Hi)*zr.scale+Wo[1],Lo=Yo+Ei.w*zr.scale/Yi,qr=jo+Ei.h*zr.scale/Yi,si=new t(Yo,jo),ho=new t(Lo,jo),Pi=new t(Yo,qr),oo=new t(Lo,qr);if(So){var Ki=new t(-eo,eo-dh),di=-Math.PI/2,po=qo/2-eo,Ia=zr.imageName?po:0,ls=new t(5-dh-po,-Ia),ga=new(Function.prototype.bind.apply(t,[null].concat(Io)));si._rotateAround(di,Ki)._add(ls)._add(ga),ho._rotateAround(di,Ki)._add(ls)._add(ga),Pi._rotateAround(di,Ki)._add(ls)._add(ga),oo._rotateAround(di,Ki)._add(ls)._add(ga)}if(Dr){var Bl=Math.sin(Dr),Eu=Math.cos(Dr),Vo=[Eu,-Bl,Bl,Eu];si._matMult(Vo),ho._matMult(Vo),Pi._matMult(Vo),oo._matMult(Vo)}var jl=new t(0,0),ml=new t(0,0);Br.push({tl:si,tr:ho,bl:Pi,br:oo,tex:Ei,writingMode:$n.writingMode,glyphOffset:Da,sectionIndex:zr.sectionIndex,isSDF:Wi,pixelOffsetTL:jl,pixelOffsetBR:ml,minFontScaleX:0,minFontScaleY:0})}}return Br}(0,X,Qe,Se,Oe,He,fe,S.allowVerticalPlacement),Tn=S.textSizeData,_n=null;Tn.kind==="source"?(_n=[zl*Se.layout.get("text-size").evaluate(He,{})])[0]>$u&&D(S.layerIds[0]+': Value for "text-size" is >= '+ph+'. Reduce your "text-size".'):Tn.kind==="composite"&&((_n=[zl*jt.compositeTextSizes[0].evaluate(He,{},an),zl*jt.compositeTextSizes[1].evaluate(He,{},an)])[0]>$u||_n[1]>$u)&&D(S.layerIds[0]+': Value for "text-size" is >= '+ph+'. Reduce your "text-size".'),S.addSymbols(S.text,cn,_n,Qe,Oe,He,bt,R,ct.lineStartIndex,ct.lineLength,qt,an);for(var Fn=0,zn=Tt;Fn<zn.length;Fn+=1)Nt[zn[Fn]]=S.text.placedSymbolArray.length-1;return 4*cn.length}function p1(S){for(var R in S)return S[R];return null}function K3(S,R,X,fe){var Se=S.compareText;if(R in Se){for(var Oe=Se[R],He=Oe.length-1;He>=0;He--)if(fe.dist(Oe[He])<X)return!0}else Se[R]=[];return Se[R].push(fe),!1}var J3=Zc.VectorTileFeature.types,Q3=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Vd(S,R,X,fe,Se,Oe,He,Qe,ct,bt,Tt,Nt,qt){var jt=Qe?Math.min($u,Math.round(Qe[0])):0,an=Qe?Math.min($u,Math.round(Qe[1])):0;S.emplaceBack(R,X,Math.round(32*fe),Math.round(32*Se),Oe,He,(jt<<1)+(ct?1:0),an,16*bt,16*Tt,256*Nt,256*qt)}function og(S,R,X){S.emplaceBack(R.x,R.y,X),S.emplaceBack(R.x,R.y,X),S.emplaceBack(R.x,R.y,X),S.emplaceBack(R.x,R.y,X)}function e4(S){for(var R=0,X=S.sections;R<X.length;R+=1)if(Co(X[R].text))return!0;return!1}var of=function(S){this.layoutVertexArray=new $,this.indexArray=new Te,this.programConfigurations=S,this.segments=new Vn,this.dynamicLayoutVertexArray=new W,this.opacityVertexArray=new I,this.placedSymbolArray=new It};of.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},of.prototype.upload=function(S,R,X,fe){this.isEmpty()||(X&&(this.layoutVertexBuffer=S.createVertexBuffer(this.layoutVertexArray,k3.members),this.indexBuffer=S.createIndexBuffer(this.indexArray,R),this.dynamicLayoutVertexBuffer=S.createVertexBuffer(this.dynamicLayoutVertexArray,S3.members,!0),this.opacityVertexBuffer=S.createVertexBuffer(this.opacityVertexArray,Q3,!0),this.opacityVertexBuffer.itemSize=1),(X||fe)&&this.programConfigurations.upload(S))},of.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Mr("SymbolBuffers",of);var gh=function(S,R,X){this.layoutVertexArray=new S,this.layoutAttributes=R,this.indexArray=new X,this.segments=new Vn,this.collisionVertexArray=new he};gh.prototype.upload=function(S){this.layoutVertexBuffer=S.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=S.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=S.createVertexBuffer(this.collisionVertexArray,E3.members,!0)},gh.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Mr("CollisionBuffers",gh);var Si=function(S){this.collisionBoxArray=S.collisionBoxArray,this.zoom=S.zoom,this.overscaling=S.overscaling,this.layers=S.layers,this.layerIds=this.layers.map(function(He){return He.id}),this.index=S.index,this.pixelRatio=S.pixelRatio,this.sourceLayerIndex=S.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=V0([]),this.placementViewportMatrix=V0([]);var R=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ng(this.zoom,R["text-size"]),this.iconSizeData=ng(this.zoom,R["icon-size"]);var X=this.layers[0].layout,fe=X.get("symbol-sort-key"),Se=X.get("symbol-z-order");this.canOverlap=X.get("text-allow-overlap")||X.get("icon-allow-overlap")||X.get("text-ignore-placement")||X.get("icon-ignore-placement"),this.sortFeaturesByKey=Se!=="viewport-y"&&fe.constantOr(1)!==void 0;var Oe=Se==="viewport-y"||Se==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=Oe&&this.canOverlap,X.get("symbol-placement")==="point"&&(this.writingModes=X.get("text-writing-mode").map(function(He){return Cs[He]})),this.stateDependentLayerIds=this.layers.filter(function(He){return He.isStateDependent()}).map(function(He){return He.id}),this.sourceID=S.sourceID};Si.prototype.createArrays=function(){this.text=new of(new io(this.layers,this.zoom,function(S){return/^text/.test(S)})),this.icon=new of(new io(this.layers,this.zoom,function(S){return/^icon/.test(S)})),this.glyphOffsetArray=new Vt,this.lineVertexArray=new pn,this.symbolInstances=new Gt},Si.prototype.calculateGlyphDependencies=function(S,R,X,fe,Se){for(var Oe=0;Oe<S.length;Oe++)if(R[S.charCodeAt(Oe)]=!0,(X||fe)&&Se){var He=ch[S.charAt(Oe)];He&&(R[He.charCodeAt(0)]=!0)}},Si.prototype.populate=function(S,R,X){var fe=this.layers[0],Se=fe.layout,Oe=Se.get("text-font"),He=Se.get("text-field"),Qe=Se.get("icon-image"),ct=(He.value.kind!=="constant"||He.value.value instanceof Nn&&!He.value.value.isEmpty()||He.value.value.toString().length>0)&&(Oe.value.kind!=="constant"||Oe.value.value.length>0),bt=Qe.value.kind!=="constant"||!!Qe.value.value||Object.keys(Qe.parameters).length>0,Tt=Se.get("symbol-sort-key");if(this.features=[],ct||bt){for(var Nt=R.iconDependencies,qt=R.glyphDependencies,jt=R.availableImages,an=new Xr(this.zoom),cn=0,Tn=S;cn<Tn.length;cn+=1){var _n=Tn[cn],Fn=_n.feature,zn=_n.id,Hn=_n.index,$n=_n.sourceLayerIndex,or=fe._featureFilter.needGeometry,vr=Vi(Fn,or);if(fe._featureFilter.filter(an,vr,X)){or||(vr.geometry=os(Fn));var dr=void 0;if(ct){var _r=fe.getValueAndResolveTokens("text-field",vr,X,jt),Tr=Nn.factory(_r);e4(Tr)&&(this.hasRTLText=!0),(!this.hasRTLText||ul()==="unavailable"||this.hasRTLText&&No.isParsed())&&(dr=D3(Tr,fe,vr))}var jr=void 0;if(bt){var Dr=fe.getValueAndResolveTokens("icon-image",vr,X,jt);jr=Dr instanceof rr?Dr:rr.fromString(Dr)}if(dr||jr){var Br=this.sortFeaturesByKey?Tt.evaluate(vr,{},X):void 0,Lr={id:zn,text:dr,icon:jr,index:Hn,sourceLayerIndex:$n,geometry:vr.geometry,properties:Fn.properties,type:J3[Fn.type],sortKey:Br};if(this.features.push(Lr),jr&&(Nt[jr.name]=!0),dr){var Cr=Oe.evaluate(vr,{},X).join(","),ri=Se.get("text-rotation-alignment")==="map"&&Se.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Cs.vertical)>=0;for(var Hr=0,Fi=dr.sections;Hr<Fi.length;Hr+=1){var zr=Fi[Hr];if(zr.image)Nt[zr.image.name]=!0;else{var Ei=Ol(dr.toString()),Hi=zr.fontStack||Cr,Wi=qt[Hi]=qt[Hi]||{};this.calculateGlyphDependencies(zr.text,Wi,ri,this.allowVerticalPlacement,Ei)}}}}}}Se.get("symbol-placement")==="line"&&(this.features=function(Yi){var Ni={},So={},eo=[],Bo=0;function ta(oo){eo.push(Yi[oo]),Bo++}function Go(oo,Ki,di){var po=So[oo];return delete So[oo],So[Ki]=po,eo[po].geometry[0].pop(),eo[po].geometry[0]=eo[po].geometry[0].concat(di[0]),po}function Da(oo,Ki,di){var po=Ni[Ki];return delete Ni[Ki],Ni[oo]=po,eo[po].geometry[0].shift(),eo[po].geometry[0]=di[0].concat(eo[po].geometry[0]),po}function Wo(oo,Ki,di){var po=di?Ki[0][Ki[0].length-1]:Ki[0][0];return oo+":"+po.x+":"+po.y}for(var Io=0;Io<Yi.length;Io++){var Yo=Yi[Io],jo=Yo.geometry,Lo=Yo.text?Yo.text.toString():null;if(Lo){var qr=Wo(Lo,jo),si=Wo(Lo,jo,!0);if(qr in So&&si in Ni&&So[qr]!==Ni[si]){var ho=Da(qr,si,jo),Pi=Go(qr,si,eo[ho].geometry);delete Ni[qr],delete So[si],So[Wo(Lo,eo[Pi].geometry,!0)]=Pi,eo[ho].geometry=null}else qr in So?Go(qr,si,jo):si in Ni?Da(qr,si,jo):(ta(Io),Ni[qr]=Bo-1,So[si]=Bo-1)}else ta(Io)}return eo.filter(function(oo){return oo.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Yi,Ni){return Yi.sortKey-Ni.sortKey})}},Si.prototype.update=function(S,R,X){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(S,R,this.layers,X),this.icon.programConfigurations.updatePaintArrays(S,R,this.layers,X))},Si.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Si.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Si.prototype.upload=function(S){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(S),this.iconCollisionBox.upload(S)),this.text.upload(S,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(S,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Si.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Si.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Si.prototype.addToLineVertexArray=function(S,R){var X=this.lineVertexArray.length;if(S.segment!==void 0){for(var fe=S.dist(R[S.segment+1]),Se=S.dist(R[S.segment]),Oe={},He=S.segment+1;He<R.length;He++)Oe[He]={x:R[He].x,y:R[He].y,tileUnitDistanceFromAnchor:fe},He<R.length-1&&(fe+=R[He+1].dist(R[He]));for(var Qe=S.segment||0;Qe>=0;Qe--)Oe[Qe]={x:R[Qe].x,y:R[Qe].y,tileUnitDistanceFromAnchor:Se},Qe>0&&(Se+=R[Qe-1].dist(R[Qe]));for(var ct=0;ct<R.length;ct++){var bt=Oe[ct];this.lineVertexArray.emplaceBack(bt.x,bt.y,bt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:X,lineLength:this.lineVertexArray.length-X}},Si.prototype.addSymbols=function(S,R,X,fe,Se,Oe,He,Qe,ct,bt,Tt,Nt){for(var qt=S.indexArray,jt=S.layoutVertexArray,an=S.segments.prepareSegment(4*R.length,jt,qt,this.canOverlap?Oe.sortKey:void 0),cn=this.glyphOffsetArray.length,Tn=an.vertexLength,_n=this.allowVerticalPlacement&&He===Cs.vertical?Math.PI/2:0,Fn=Oe.text&&Oe.text.sections,zn=0;zn<R.length;zn++){var Hn=R[zn],$n=Hn.tl,or=Hn.tr,vr=Hn.bl,dr=Hn.br,_r=Hn.tex,Tr=Hn.pixelOffsetTL,jr=Hn.pixelOffsetBR,Dr=Hn.minFontScaleX,Br=Hn.minFontScaleY,Lr=Hn.glyphOffset,Cr=Hn.isSDF,ri=Hn.sectionIndex,Hr=an.vertexLength,Fi=Lr[1];Vd(jt,Qe.x,Qe.y,$n.x,Fi+$n.y,_r.x,_r.y,X,Cr,Tr.x,Tr.y,Dr,Br),Vd(jt,Qe.x,Qe.y,or.x,Fi+or.y,_r.x+_r.w,_r.y,X,Cr,jr.x,Tr.y,Dr,Br),Vd(jt,Qe.x,Qe.y,vr.x,Fi+vr.y,_r.x,_r.y+_r.h,X,Cr,Tr.x,jr.y,Dr,Br),Vd(jt,Qe.x,Qe.y,dr.x,Fi+dr.y,_r.x+_r.w,_r.y+_r.h,X,Cr,jr.x,jr.y,Dr,Br),og(S.dynamicLayoutVertexArray,Qe,_n),qt.emplaceBack(Hr,Hr+1,Hr+2),qt.emplaceBack(Hr+1,Hr+2,Hr+3),an.vertexLength+=4,an.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Lr[0]),zn!==R.length-1&&ri===R[zn+1].sectionIndex||S.programConfigurations.populatePaintArrays(jt.length,Oe,Oe.index,{},Nt,Fn&&Fn[ri])}S.placedSymbolArray.emplaceBack(Qe.x,Qe.y,cn,this.glyphOffsetArray.length-cn,Tn,ct,bt,Qe.segment,X?X[0]:0,X?X[1]:0,fe[0],fe[1],He,0,!1,0,Tt)},Si.prototype._addCollisionDebugVertex=function(S,R,X,fe,Se,Oe){return R.emplaceBack(0,0),S.emplaceBack(X.x,X.y,fe,Se,Math.round(Oe.x),Math.round(Oe.y))},Si.prototype.addCollisionDebugVertices=function(S,R,X,fe,Se,Oe,He){var Qe=Se.segments.prepareSegment(4,Se.layoutVertexArray,Se.indexArray),ct=Qe.vertexLength,bt=Se.layoutVertexArray,Tt=Se.collisionVertexArray,Nt=He.anchorX,qt=He.anchorY;this._addCollisionDebugVertex(bt,Tt,Oe,Nt,qt,new t(S,R)),this._addCollisionDebugVertex(bt,Tt,Oe,Nt,qt,new t(X,R)),this._addCollisionDebugVertex(bt,Tt,Oe,Nt,qt,new t(X,fe)),this._addCollisionDebugVertex(bt,Tt,Oe,Nt,qt,new t(S,fe)),Qe.vertexLength+=4;var jt=Se.indexArray;jt.emplaceBack(ct,ct+1),jt.emplaceBack(ct+1,ct+2),jt.emplaceBack(ct+2,ct+3),jt.emplaceBack(ct+3,ct),Qe.primitiveLength+=4},Si.prototype.addDebugCollisionBoxes=function(S,R,X,fe){for(var Se=S;Se<R;Se++){var Oe=this.collisionBoxArray.get(Se),He=Oe.x1,Qe=Oe.y1,ct=Oe.x2,bt=Oe.y2;this.addCollisionDebugVertices(He,Qe,ct,bt,fe?this.textCollisionBox:this.iconCollisionBox,Oe.anchorPoint,X)}},Si.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new gh(te,Uy.members,ft),this.iconCollisionBox=new gh(te,Uy.members,ft);for(var S=0;S<this.symbolInstances.length;S++){var R=this.symbolInstances.get(S);this.addDebugCollisionBoxes(R.textBoxStartIndex,R.textBoxEndIndex,R,!0),this.addDebugCollisionBoxes(R.verticalTextBoxStartIndex,R.verticalTextBoxEndIndex,R,!0),this.addDebugCollisionBoxes(R.iconBoxStartIndex,R.iconBoxEndIndex,R,!1),this.addDebugCollisionBoxes(R.verticalIconBoxStartIndex,R.verticalIconBoxEndIndex,R,!1)}},Si.prototype._deserializeCollisionBoxesForSymbol=function(S,R,X,fe,Se,Oe,He,Qe,ct){for(var bt={},Tt=R;Tt<X;Tt++){var Nt=S.get(Tt);bt.textBox={x1:Nt.x1,y1:Nt.y1,x2:Nt.x2,y2:Nt.y2,anchorPointX:Nt.anchorPointX,anchorPointY:Nt.anchorPointY},bt.textFeatureIndex=Nt.featureIndex;break}for(var qt=fe;qt<Se;qt++){var jt=S.get(qt);bt.verticalTextBox={x1:jt.x1,y1:jt.y1,x2:jt.x2,y2:jt.y2,anchorPointX:jt.anchorPointX,anchorPointY:jt.anchorPointY},bt.verticalTextFeatureIndex=jt.featureIndex;break}for(var an=Oe;an<He;an++){var cn=S.get(an);bt.iconBox={x1:cn.x1,y1:cn.y1,x2:cn.x2,y2:cn.y2,anchorPointX:cn.anchorPointX,anchorPointY:cn.anchorPointY},bt.iconFeatureIndex=cn.featureIndex;break}for(var Tn=Qe;Tn<ct;Tn++){var _n=S.get(Tn);bt.verticalIconBox={x1:_n.x1,y1:_n.y1,x2:_n.x2,y2:_n.y2,anchorPointX:_n.anchorPointX,anchorPointY:_n.anchorPointY},bt.verticalIconFeatureIndex=_n.featureIndex;break}return bt},Si.prototype.deserializeCollisionBoxes=function(S){this.collisionArrays=[];for(var R=0;R<this.symbolInstances.length;R++){var X=this.symbolInstances.get(R);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(S,X.textBoxStartIndex,X.textBoxEndIndex,X.verticalTextBoxStartIndex,X.verticalTextBoxEndIndex,X.iconBoxStartIndex,X.iconBoxEndIndex,X.verticalIconBoxStartIndex,X.verticalIconBoxEndIndex))}},Si.prototype.hasTextData=function(){return this.text.segments.get().length>0},Si.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Si.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Si.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Si.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Si.prototype.addIndicesForPlacedSymbol=function(S,R){for(var X=S.placedSymbolArray.get(R),fe=X.vertexStartIndex+4*X.numGlyphs,Se=X.vertexStartIndex;Se<fe;Se+=4)S.indexArray.emplaceBack(Se,Se+1,Se+2),S.indexArray.emplaceBack(Se+1,Se+2,Se+3)},Si.prototype.getSortedSymbolIndexes=function(S){if(this.sortedAngle===S&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var R=Math.sin(S),X=Math.cos(S),fe=[],Se=[],Oe=[],He=0;He<this.symbolInstances.length;++He){Oe.push(He);var Qe=this.symbolInstances.get(He);fe.push(0|Math.round(R*Qe.anchorX+X*Qe.anchorY)),Se.push(Qe.featureIndex)}return Oe.sort(function(ct,bt){return fe[ct]-fe[bt]||Se[bt]-Se[ct]}),Oe},Si.prototype.addToSortKeyRanges=function(S,R){var X=this.sortKeyRanges[this.sortKeyRanges.length-1];X&&X.sortKey===R?X.symbolInstanceEnd=S+1:this.sortKeyRanges.push({sortKey:R,symbolInstanceStart:S,symbolInstanceEnd:S+1})},Si.prototype.sortFeatures=function(S){var R=this;if(this.sortFeaturesByY&&this.sortedAngle!==S&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(S),this.sortedAngle=S,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var X=0,fe=this.symbolInstanceIndexes;X<fe.length;X+=1){var Se=fe[X],Oe=this.symbolInstances.get(Se);this.featureSortOrder.push(Oe.featureIndex),[Oe.rightJustifiedTextSymbolIndex,Oe.centerJustifiedTextSymbolIndex,Oe.leftJustifiedTextSymbolIndex].forEach(function(He,Qe,ct){He>=0&&ct.indexOf(He)===Qe&&R.addIndicesForPlacedSymbol(R.text,He)}),Oe.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Oe.verticalPlacedTextSymbolIndex),Oe.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Oe.placedIconSymbolIndex),Oe.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Oe.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Mr("SymbolBucket",Si,{omit:["layers","collisionBoxArray","features","compareText"]}),Si.MAX_GLYPHS=65535,Si.addDynamicAttributes=og;var t4=new Zi({"symbol-placement":new Sr(Ze.layout_symbol["symbol-placement"]),"symbol-spacing":new Sr(Ze.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Sr(Ze.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Or(Ze.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Sr(Ze.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Sr(Ze.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Sr(Ze.layout_symbol["icon-ignore-placement"]),"icon-optional":new Sr(Ze.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Sr(Ze.layout_symbol["icon-rotation-alignment"]),"icon-size":new Or(Ze.layout_symbol["icon-size"]),"icon-text-fit":new Sr(Ze.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Sr(Ze.layout_symbol["icon-text-fit-padding"]),"icon-image":new Or(Ze.layout_symbol["icon-image"]),"icon-rotate":new Or(Ze.layout_symbol["icon-rotate"]),"icon-padding":new Sr(Ze.layout_symbol["icon-padding"]),"icon-keep-upright":new Sr(Ze.layout_symbol["icon-keep-upright"]),"icon-offset":new Or(Ze.layout_symbol["icon-offset"]),"icon-anchor":new Or(Ze.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Sr(Ze.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Sr(Ze.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Sr(Ze.layout_symbol["text-rotation-alignment"]),"text-field":new Or(Ze.layout_symbol["text-field"]),"text-font":new Or(Ze.layout_symbol["text-font"]),"text-size":new Or(Ze.layout_symbol["text-size"]),"text-max-width":new Or(Ze.layout_symbol["text-max-width"]),"text-line-height":new Sr(Ze.layout_symbol["text-line-height"]),"text-letter-spacing":new Or(Ze.layout_symbol["text-letter-spacing"]),"text-justify":new Or(Ze.layout_symbol["text-justify"]),"text-radial-offset":new Or(Ze.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Sr(Ze.layout_symbol["text-variable-anchor"]),"text-anchor":new Or(Ze.layout_symbol["text-anchor"]),"text-max-angle":new Sr(Ze.layout_symbol["text-max-angle"]),"text-writing-mode":new Sr(Ze.layout_symbol["text-writing-mode"]),"text-rotate":new Or(Ze.layout_symbol["text-rotate"]),"text-padding":new Sr(Ze.layout_symbol["text-padding"]),"text-keep-upright":new Sr(Ze.layout_symbol["text-keep-upright"]),"text-transform":new Or(Ze.layout_symbol["text-transform"]),"text-offset":new Or(Ze.layout_symbol["text-offset"]),"text-allow-overlap":new Sr(Ze.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Sr(Ze.layout_symbol["text-ignore-placement"]),"text-optional":new Sr(Ze.layout_symbol["text-optional"])}),ag={paint:new Zi({"icon-opacity":new Or(Ze.paint_symbol["icon-opacity"]),"icon-color":new Or(Ze.paint_symbol["icon-color"]),"icon-halo-color":new Or(Ze.paint_symbol["icon-halo-color"]),"icon-halo-width":new Or(Ze.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Or(Ze.paint_symbol["icon-halo-blur"]),"icon-translate":new Sr(Ze.paint_symbol["icon-translate"]),"icon-translate-anchor":new Sr(Ze.paint_symbol["icon-translate-anchor"]),"text-opacity":new Or(Ze.paint_symbol["text-opacity"]),"text-color":new Or(Ze.paint_symbol["text-color"],{runtimeType:Ht,getOverride:function(S){return S.textColor},hasOverride:function(S){return!!S.textColor}}),"text-halo-color":new Or(Ze.paint_symbol["text-halo-color"]),"text-halo-width":new Or(Ze.paint_symbol["text-halo-width"]),"text-halo-blur":new Or(Ze.paint_symbol["text-halo-blur"]),"text-translate":new Sr(Ze.paint_symbol["text-translate"]),"text-translate-anchor":new Sr(Ze.paint_symbol["text-translate-anchor"])}),layout:t4},af=function(S){this.type=S.property.overrides?S.property.overrides.runtimeType:Lt,this.defaultValue=S};af.prototype.evaluate=function(S){if(S.formattedSection){var R=this.defaultValue.property.overrides;if(R&&R.hasOverride(S.formattedSection))return R.getOverride(S.formattedSection)}return S.feature&&S.featureState?this.defaultValue.evaluate(S.feature,S.featureState):this.defaultValue.property.specification.default},af.prototype.eachChild=function(S){this.defaultValue.isConstant()||S(this.defaultValue.value._styleExpression.expression)},af.prototype.outputDefined=function(){return!1},af.prototype.serialize=function(){return null},Mr("FormatSectionOverride",af,{omit:["defaultValue"]});var n4=function(S){function R(X){S.call(this,X,ag)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype.recalculate=function(X,fe){if(S.prototype.recalculate.call(this,X,fe),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var Se=this.layout.get("text-writing-mode");if(Se){for(var Oe=[],He=0,Qe=Se;He<Qe.length;He+=1){var ct=Qe[He];Oe.indexOf(ct)<0&&Oe.push(ct)}this.layout._values["text-writing-mode"]=Oe}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},R.prototype.getValueAndResolveTokens=function(X,fe,Se,Oe){var He=this.layout.get(X).evaluate(fe,{},Se,Oe),Qe=this._unevaluatedLayout._values[X];return Qe.isDataDriven()||Ns(Qe.value)||!He?He:function(ct,bt){return bt.replace(/{([^{}]+)}/g,function(Tt,Nt){return Nt in ct?String(ct[Nt]):""})}(fe.properties,He)},R.prototype.createBucket=function(X){return new Si(X)},R.prototype.queryRadius=function(){return 0},R.prototype.queryIntersectsFeature=function(){return!1},R.prototype._setPaintOverrides=function(){for(var X=0,fe=ag.paint.overridableProperties;X<fe.length;X+=1){var Se=fe[X];if(R.hasPaintOverride(this.layout,Se)){var Oe,He=this.paint.get(Se),Qe=new af(He),ct=new ys(Qe,He.property.specification);Oe=He.value.kind==="constant"||He.value.kind==="source"?new wa("source",ct):new il("composite",ct,He.value.zoomStops,He.value._interpolationType),this.paint._values[Se]=new Ai(He.property,Oe,He.parameters)}}},R.prototype._handleOverridablePaintPropertyUpdate=function(X,fe,Se){return!(!this.layout||fe.isDataDriven()||Se.isDataDriven())&&R.hasPaintOverride(this.layout,X)},R.hasPaintOverride=function(X,fe){var Se=X.get("text-field"),Oe=ag.paint.properties[fe],He=!1,Qe=function(Tt){for(var Nt=0,qt=Tt;Nt<qt.length;Nt+=1){var jt=qt[Nt];if(Oe.overrides&&Oe.overrides.hasOverride(jt))return void(He=!0)}};if(Se.value.kind==="constant"&&Se.value.value instanceof Nn)Qe(Se.value.value.sections);else if(Se.value.kind==="source"){var ct=function(Tt){if(!He)if(Tt instanceof en&&Zn(Tt.value)===On){var Nt=Tt.value;Qe(Nt.sections)}else Tt instanceof Ln?Qe(Tt.sections):Tt.eachChild(ct)},bt=Se.value;bt._styleExpression&&ct(bt._styleExpression.expression)}return He},R}(hi),r4={paint:new Zi({"background-color":new Sr(Ze.paint_background["background-color"]),"background-pattern":new Ga(Ze.paint_background["background-pattern"]),"background-opacity":new Sr(Ze.paint_background["background-opacity"])})},i4=function(S){function R(X){S.call(this,X,r4)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R}(hi),o4={paint:new Zi({"raster-opacity":new Sr(Ze.paint_raster["raster-opacity"]),"raster-hue-rotate":new Sr(Ze.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Sr(Ze.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Sr(Ze.paint_raster["raster-brightness-max"]),"raster-saturation":new Sr(Ze.paint_raster["raster-saturation"]),"raster-contrast":new Sr(Ze.paint_raster["raster-contrast"]),"raster-resampling":new Sr(Ze.paint_raster["raster-resampling"]),"raster-fade-duration":new Sr(Ze.paint_raster["raster-fade-duration"])})},a4=function(S){function R(X){S.call(this,X,o4)}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R}(hi),s4=function(S){function R(X){S.call(this,X,{}),this.implementation=X}return S&&(R.__proto__=S),R.prototype=Object.create(S&&S.prototype),R.prototype.constructor=R,R.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},R.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},R.prototype.recalculate=function(){},R.prototype.updateTransitions=function(){},R.prototype.hasTransition=function(){},R.prototype.serialize=function(){},R.prototype.onAdd=function(X){this.implementation.onAdd&&this.implementation.onAdd(X,X.painter.context.gl)},R.prototype.onRemove=function(X){this.implementation.onRemove&&this.implementation.onRemove(X,X.painter.context.gl)},R}(hi),l4={circle:Uw,heatmap:qw,hillshade:Ww,fill:u3,"fill-extrusion":y3,line:A3,symbol:n4,background:i4,raster:a4},g1=r.HTMLImageElement,m1=r.HTMLCanvasElement,v1=r.HTMLVideoElement,y1=r.ImageData,Ud=r.ImageBitmap,vc=function(S,R,X,fe){this.context=S,this.format=X,this.texture=S.gl.createTexture(),this.update(R,fe)};vc.prototype.update=function(S,R,X){var fe=S.width,Se=S.height,Oe=!(this.size&&this.size[0]===fe&&this.size[1]===Se||X),He=this.context,Qe=He.gl;if(this.useMipmap=!!(R&&R.useMipmap),Qe.bindTexture(Qe.TEXTURE_2D,this.texture),He.pixelStoreUnpackFlipY.set(!1),He.pixelStoreUnpack.set(1),He.pixelStoreUnpackPremultiplyAlpha.set(this.format===Qe.RGBA&&(!R||R.premultiply!==!1)),Oe)this.size=[fe,Se],S instanceof g1||S instanceof m1||S instanceof v1||S instanceof y1||Ud&&S instanceof Ud?Qe.texImage2D(Qe.TEXTURE_2D,0,this.format,this.format,Qe.UNSIGNED_BYTE,S):Qe.texImage2D(Qe.TEXTURE_2D,0,this.format,fe,Se,0,this.format,Qe.UNSIGNED_BYTE,S.data);else{var ct=X||{x:0,y:0},bt=ct.x,Tt=ct.y;S instanceof g1||S instanceof m1||S instanceof v1||S instanceof y1||Ud&&S instanceof Ud?Qe.texSubImage2D(Qe.TEXTURE_2D,0,bt,Tt,Qe.RGBA,Qe.UNSIGNED_BYTE,S):Qe.texSubImage2D(Qe.TEXTURE_2D,0,bt,Tt,fe,Se,Qe.RGBA,Qe.UNSIGNED_BYTE,S.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Qe.generateMipmap(Qe.TEXTURE_2D)},vc.prototype.bind=function(S,R,X){var fe=this.context.gl;fe.bindTexture(fe.TEXTURE_2D,this.texture),X!==fe.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(X=fe.LINEAR),S!==this.filter&&(fe.texParameteri(fe.TEXTURE_2D,fe.TEXTURE_MAG_FILTER,S),fe.texParameteri(fe.TEXTURE_2D,fe.TEXTURE_MIN_FILTER,X||S),this.filter=S),R!==this.wrap&&(fe.texParameteri(fe.TEXTURE_2D,fe.TEXTURE_WRAP_S,R),fe.texParameteri(fe.TEXTURE_2D,fe.TEXTURE_WRAP_T,R),this.wrap=R)},vc.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},vc.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var sg=function(S){var R=this;this._callback=S,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){R._triggered=!1,R._callback()})};sg.prototype.trigger=function(){var S=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){S._triggered=!1,S._callback()},0))},sg.prototype.remove=function(){delete this._channel,this._callback=function(){}};var sf=function(S,R,X){this.target=S,this.parent=R,this.mapId=X,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},b(["receive","process"],this),this.invoker=new sg(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=O()?S:r};function x1(S,R,X){var fe=2*Math.PI*6378137/256/Math.pow(2,X);return[S*fe-2*Math.PI*6378137/2,R*fe-2*Math.PI*6378137/2]}sf.prototype.send=function(S,R,X,fe,Se){var Oe=this;Se===void 0&&(Se=!1);var He=Math.round(1e18*Math.random()).toString(36).substring(0,10);X&&(this.callbacks[He]=X);var Qe=F(this.globalScope)?void 0:[];return this.target.postMessage({id:He,type:S,hasCallback:!!X,targetMapId:fe,mustQueue:Se,sourceMapId:this.mapId,data:Ms(R,Qe)},Qe),{cancel:function(){X&&delete Oe.callbacks[He],Oe.target.postMessage({id:He,type:"<cancel>",targetMapId:fe,sourceMapId:Oe.mapId})}}},sf.prototype.receive=function(S){var R=S.data,X=R.id;if(X&&(!R.targetMapId||this.mapId===R.targetMapId))if(R.type==="<cancel>"){delete this.tasks[X];var fe=this.cancelCallbacks[X];delete this.cancelCallbacks[X],fe&&fe()}else O()||R.mustQueue?(this.tasks[X]=R,this.taskQueue.push(X),this.invoker.trigger()):this.processTask(X,R)},sf.prototype.process=function(){if(this.taskQueue.length){var S=this.taskQueue.shift(),R=this.tasks[S];delete this.tasks[S],this.taskQueue.length&&this.invoker.trigger(),R&&this.processTask(S,R)}},sf.prototype.processTask=function(S,R){var X=this;if(R.type==="<response>"){var fe=this.callbacks[S];delete this.callbacks[S],fe&&(R.error?fe(Hs(R.error)):fe(null,Hs(R.data)))}else{var Se=!1,Oe=F(this.globalScope)?void 0:[],He=R.hasCallback?function(Tt,Nt){Se=!0,delete X.cancelCallbacks[S],X.target.postMessage({id:S,type:"<response>",sourceMapId:X.mapId,error:Tt?Ms(Tt):null,data:Ms(Nt,Oe)},Oe)}:function(Tt){Se=!0},Qe=null,ct=Hs(R.data);if(this.parent[R.type])Qe=this.parent[R.type](R.sourceMapId,ct,He);else if(this.parent.getWorkerSource){var bt=R.type.split(".");Qe=this.parent.getWorkerSource(R.sourceMapId,bt[0],ct.source)[bt[1]](ct,He)}else He(new Error("Could not find function "+R.type));!Se&&Qe&&Qe.cancel&&(this.cancelCallbacks[S]=Qe.cancel)}},sf.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Ao=function(S,R){S&&(R?this.setSouthWest(S).setNorthEast(R):S.length===4?this.setSouthWest([S[0],S[1]]).setNorthEast([S[2],S[3]]):this.setSouthWest(S[0]).setNorthEast(S[1]))};Ao.prototype.setNorthEast=function(S){return this._ne=S instanceof Xi?new Xi(S.lng,S.lat):Xi.convert(S),this},Ao.prototype.setSouthWest=function(S){return this._sw=S instanceof Xi?new Xi(S.lng,S.lat):Xi.convert(S),this},Ao.prototype.extend=function(S){var R,X,fe=this._sw,Se=this._ne;if(S instanceof Xi)R=S,X=S;else{if(!(S instanceof Ao)){if(Array.isArray(S)){if(S.length===4||S.every(Array.isArray)){var Oe=S;return this.extend(Ao.convert(Oe))}var He=S;return this.extend(Xi.convert(He))}return this}if(R=S._sw,X=S._ne,!R||!X)return this}return fe||Se?(fe.lng=Math.min(R.lng,fe.lng),fe.lat=Math.min(R.lat,fe.lat),Se.lng=Math.max(X.lng,Se.lng),Se.lat=Math.max(X.lat,Se.lat)):(this._sw=new Xi(R.lng,R.lat),this._ne=new Xi(X.lng,X.lat)),this},Ao.prototype.getCenter=function(){return new Xi((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Ao.prototype.getSouthWest=function(){return this._sw},Ao.prototype.getNorthEast=function(){return this._ne},Ao.prototype.getNorthWest=function(){return new Xi(this.getWest(),this.getNorth())},Ao.prototype.getSouthEast=function(){return new Xi(this.getEast(),this.getSouth())},Ao.prototype.getWest=function(){return this._sw.lng},Ao.prototype.getSouth=function(){return this._sw.lat},Ao.prototype.getEast=function(){return this._ne.lng},Ao.prototype.getNorth=function(){return this._ne.lat},Ao.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Ao.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Ao.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Ao.prototype.contains=function(S){var R=Xi.convert(S),X=R.lng,fe=R.lat,Se=this._sw.lat<=fe&&fe<=this._ne.lat,Oe=this._sw.lng<=X&&X<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Oe=this._sw.lng>=X&&X>=this._ne.lng),Se&&Oe},Ao.convert=function(S){return!S||S instanceof Ao?S:new Ao(S)};var b1=63710088e-1,Xi=function(S,R){if(isNaN(S)||isNaN(R))throw new Error("Invalid LngLat object: ("+S+", "+R+")");if(this.lng=+S,this.lat=+R,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Xi.prototype.wrap=function(){return new Xi(d(this.lng,-180,180),this.lat)},Xi.prototype.toArray=function(){return[this.lng,this.lat]},Xi.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Xi.prototype.distanceTo=function(S){var R=Math.PI/180,X=this.lat*R,fe=S.lat*R,Se=Math.sin(X)*Math.sin(fe)+Math.cos(X)*Math.cos(fe)*Math.cos((S.lng-this.lng)*R);return b1*Math.acos(Math.min(Se,1))},Xi.prototype.toBounds=function(S){S===void 0&&(S=0);var R=360*S/40075017,X=R/Math.cos(Math.PI/180*this.lat);return new Ao(new Xi(this.lng-X,this.lat-R),new Xi(this.lng+X,this.lat+R))},Xi.convert=function(S){if(S instanceof Xi)return S;if(Array.isArray(S)&&(S.length===2||S.length===3))return new Xi(Number(S[0]),Number(S[1]));if(!Array.isArray(S)&&typeof S=="object"&&S!==null)return new Xi(Number("lng"in S?S.lng:S.lon),Number(S.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var _1=2*Math.PI*b1;function w1(S){return _1*Math.cos(S*Math.PI/180)}function T1(S){return(180+S)/360}function M1(S){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+S*Math.PI/360)))/360}function A1(S,R){return S/w1(R)}function lg(S){var R=180-360*S;return 360/Math.PI*Math.atan(Math.exp(R*Math.PI/180))-90}var yc=function(S,R,X){X===void 0&&(X=0),this.x=+S,this.y=+R,this.z=+X};yc.fromLngLat=function(S,R){R===void 0&&(R=0);var X=Xi.convert(S);return new yc(T1(X.lng),M1(X.lat),A1(R,X.lat))},yc.prototype.toLngLat=function(){return new Xi(360*this.x-180,lg(this.y))},yc.prototype.toAltitude=function(){return S=this.z,R=this.y,S*w1(lg(R));var S,R},yc.prototype.meterInMercatorCoordinateUnits=function(){return 1/_1*(S=lg(this.y),1/Math.cos(S*Math.PI/180));var S};var xc=function(S,R,X){this.z=S,this.x=R,this.y=X,this.key=mh(0,S,S,R,X)};xc.prototype.equals=function(S){return this.z===S.z&&this.x===S.x&&this.y===S.y},xc.prototype.url=function(S,R){var X,fe,Se,Oe,He,Qe=(X=this.x,fe=this.y,Se=this.z,Oe=x1(256*X,256*(fe=Math.pow(2,Se)-fe-1),Se),He=x1(256*(X+1),256*(fe+1),Se),Oe[0]+","+Oe[1]+","+He[0]+","+He[1]),ct=function(bt,Tt,Nt){for(var qt,jt="",an=bt;an>0;an--)jt+=(Tt&(qt=1<<an-1)?1:0)+(Nt&qt?2:0);return jt}(this.z,this.x,this.y);return S[(this.x+this.y)%S.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(R==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",ct).replace("{bbox-epsg-3857}",Qe)},xc.prototype.getTilePoint=function(S){var R=Math.pow(2,this.z);return new t((S.x*R-this.x)*ai,(S.y*R-this.y)*ai)},xc.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var k1=function(S,R){this.wrap=S,this.canonical=R,this.key=mh(S,R.z,R.z,R.x,R.y)},ko=function(S,R,X,fe,Se){this.overscaledZ=S,this.wrap=R,this.canonical=new xc(X,+fe,+Se),this.key=mh(R,S,X,fe,Se)};function mh(S,R,X,fe,Se){(S*=2)<0&&(S=-1*S-1);var Oe=1<<X;return(Oe*Oe*S+Oe*Se+fe).toString(36)+X.toString(36)+R.toString(36)}ko.prototype.equals=function(S){return this.overscaledZ===S.overscaledZ&&this.wrap===S.wrap&&this.canonical.equals(S.canonical)},ko.prototype.scaledTo=function(S){var R=this.canonical.z-S;return S>this.canonical.z?new ko(S,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ko(S,this.wrap,S,this.canonical.x>>R,this.canonical.y>>R)},ko.prototype.calculateScaledKey=function(S,R){var X=this.canonical.z-S;return S>this.canonical.z?mh(this.wrap*+R,S,this.canonical.z,this.canonical.x,this.canonical.y):mh(this.wrap*+R,S,S,this.canonical.x>>X,this.canonical.y>>X)},ko.prototype.isChildOf=function(S){if(S.wrap!==this.wrap)return!1;var R=this.canonical.z-S.canonical.z;return S.overscaledZ===0||S.overscaledZ<this.overscaledZ&&S.canonical.x===this.canonical.x>>R&&S.canonical.y===this.canonical.y>>R},ko.prototype.children=function(S){if(this.overscaledZ>=S)return[new ko(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var R=this.canonical.z+1,X=2*this.canonical.x,fe=2*this.canonical.y;return[new ko(R,this.wrap,R,X,fe),new ko(R,this.wrap,R,X+1,fe),new ko(R,this.wrap,R,X,fe+1),new ko(R,this.wrap,R,X+1,fe+1)]},ko.prototype.isLessThan=function(S){return this.wrap<S.wrap||!(this.wrap>S.wrap)&&(this.overscaledZ<S.overscaledZ||!(this.overscaledZ>S.overscaledZ)&&(this.canonical.x<S.canonical.x||!(this.canonical.x>S.canonical.x)&&this.canonical.y<S.canonical.y))},ko.prototype.wrapped=function(){return new ko(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},ko.prototype.unwrapTo=function(S){return new ko(this.overscaledZ,S,this.canonical.z,this.canonical.x,this.canonical.y)},ko.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},ko.prototype.toUnwrapped=function(){return new k1(this.wrap,this.canonical)},ko.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},ko.prototype.getTilePoint=function(S){return this.canonical.getTilePoint(new yc(S.x-this.wrap,S.y))},Mr("CanonicalTileID",xc),Mr("OverscaledTileID",ko,{omit:["posMatrix"]});var ku=function(S,R,X){if(this.uid=S,R.height!==R.width)throw new RangeError("DEM tiles must be square");if(X&&X!=="mapbox"&&X!=="terrarium")return D('"'+X+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=R.height;var fe=this.dim=R.height-2;this.data=new Uint32Array(R.data.buffer),this.encoding=X||"mapbox";for(var Se=0;Se<fe;Se++)this.data[this._idx(-1,Se)]=this.data[this._idx(0,Se)],this.data[this._idx(fe,Se)]=this.data[this._idx(fe-1,Se)],this.data[this._idx(Se,-1)]=this.data[this._idx(Se,0)],this.data[this._idx(Se,fe)]=this.data[this._idx(Se,fe-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(fe,-1)]=this.data[this._idx(fe-1,0)],this.data[this._idx(-1,fe)]=this.data[this._idx(0,fe-1)],this.data[this._idx(fe,fe)]=this.data[this._idx(fe-1,fe-1)]};ku.prototype.get=function(S,R){var X=new Uint8Array(this.data.buffer),fe=4*this._idx(S,R);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(X[fe],X[fe+1],X[fe+2])},ku.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,.00390625,32768]:[6553.6,25.6,.1,1e4]},ku.prototype._idx=function(S,R){if(S<-1||S>=this.dim+1||R<-1||R>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(R+1)*this.stride+(S+1)},ku.prototype._unpackMapbox=function(S,R,X){return(256*S*256+256*R+X)/10-1e4},ku.prototype._unpackTerrarium=function(S,R,X){return 256*S+R+X/256-32768},ku.prototype.getPixels=function(){return new Ya({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},ku.prototype.backfillBorder=function(S,R,X){if(this.dim!==S.dim)throw new Error("dem dimension mismatch");var fe=R*this.dim,Se=R*this.dim+this.dim,Oe=X*this.dim,He=X*this.dim+this.dim;switch(R){case-1:fe=Se-1;break;case 1:Se=fe+1}switch(X){case-1:Oe=He-1;break;case 1:He=Oe+1}for(var Qe=-R*this.dim,ct=-X*this.dim,bt=Oe;bt<He;bt++)for(var Tt=fe;Tt<Se;Tt++)this.data[this._idx(Tt,bt)]=S.data[this._idx(Tt+Qe,bt+ct)]},Mr("DEMData",ku);var Hd=function(S){this._stringToNumber={},this._numberToString=[];for(var R=0;R<S.length;R++){var X=S[R];this._stringToNumber[X]=R,this._numberToString[R]=X}};Hd.prototype.encode=function(S){return this._stringToNumber[S]},Hd.prototype.decode=function(S){return this._numberToString[S]};var qd=function(S,R,X,fe,Se){this.type="Feature",this._vectorTileFeature=S,S._z=R,S._x=X,S._y=fe,this.properties=S.properties,this.id=Se},ug={geometry:{configurable:!0}};ug.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},ug.geometry.set=function(S){this._geometry=S},qd.prototype.toJSON=function(){var S={geometry:this.geometry};for(var R in this)R!=="_geometry"&&R!=="_vectorTileFeature"&&(S[R]=this[R]);return S},Object.defineProperties(qd.prototype,ug);var lf=function(){this.state={},this.stateChanges={},this.deletedStates={}};lf.prototype.updateState=function(S,R,X){var fe=String(R);if(this.stateChanges[S]=this.stateChanges[S]||{},this.stateChanges[S][fe]=this.stateChanges[S][fe]||{},c(this.stateChanges[S][fe],X),this.deletedStates[S]===null)for(var Se in this.deletedStates[S]={},this.state[S])Se!==fe&&(this.deletedStates[S][Se]=null);else if(this.deletedStates[S]&&this.deletedStates[S][fe]===null)for(var Oe in this.deletedStates[S][fe]={},this.state[S][fe])X[Oe]||(this.deletedStates[S][fe][Oe]=null);else for(var He in X)this.deletedStates[S]&&this.deletedStates[S][fe]&&this.deletedStates[S][fe][He]===null&&delete this.deletedStates[S][fe][He]},lf.prototype.removeFeatureState=function(S,R,X){if(this.deletedStates[S]!==null){var fe=String(R);if(this.deletedStates[S]=this.deletedStates[S]||{},X&&R!==void 0)this.deletedStates[S][fe]!==null&&(this.deletedStates[S][fe]=this.deletedStates[S][fe]||{},this.deletedStates[S][fe][X]=null);else if(R!==void 0)if(this.stateChanges[S]&&this.stateChanges[S][fe])for(X in this.deletedStates[S][fe]={},this.stateChanges[S][fe])this.deletedStates[S][fe][X]=null;else this.deletedStates[S][fe]=null;else this.deletedStates[S]=null}},lf.prototype.getState=function(S,R){var X=String(R),fe=this.state[S]||{},Se=this.stateChanges[S]||{},Oe=c({},fe[X],Se[X]);if(this.deletedStates[S]===null)return{};if(this.deletedStates[S]){var He=this.deletedStates[S][R];if(He===null)return{};for(var Qe in He)delete Oe[Qe]}return Oe},lf.prototype.initializeTileState=function(S,R){S.setFeatureState(this.state,R)},lf.prototype.coalesceChanges=function(S,R){var X={};for(var fe in this.stateChanges){this.state[fe]=this.state[fe]||{};var Se={};for(var Oe in this.stateChanges[fe])this.state[fe][Oe]||(this.state[fe][Oe]={}),c(this.state[fe][Oe],this.stateChanges[fe][Oe]),Se[Oe]=this.state[fe][Oe];X[fe]=Se}for(var He in this.deletedStates){this.state[He]=this.state[He]||{};var Qe={};if(this.deletedStates[He]===null)for(var ct in this.state[He])Qe[ct]={},this.state[He][ct]={};else for(var bt in this.deletedStates[He]){if(this.deletedStates[He][bt]===null)this.state[He][bt]={};else for(var Tt=0,Nt=Object.keys(this.deletedStates[He][bt]);Tt<Nt.length;Tt+=1){var qt=Nt[Tt];delete this.state[He][bt][qt]}Qe[bt]=this.state[He][bt]}X[He]=X[He]||{},c(X[He],Qe)}if(this.stateChanges={},this.deletedStates={},Object.keys(X).length!==0)for(var jt in S)S[jt].setFeatureState(X,R)};var Su=function(S,R){this.tileID=S,this.x=S.canonical.x,this.y=S.canonical.y,this.z=S.canonical.z,this.grid=new Us(ai,16,0),this.grid3D=new Us(ai,16,0),this.featureIndexArray=new Sn,this.promoteId=R};function S1(S,R,X,fe,Se){return M(S,function(Oe,He){var Qe=R instanceof Gs?R.get(He):null;return Qe&&Qe.evaluate?Qe.evaluate(X,fe,Se):Qe})}function E1(S){for(var R=1/0,X=1/0,fe=-1/0,Se=-1/0,Oe=0,He=S;Oe<He.length;Oe+=1){var Qe=He[Oe];R=Math.min(R,Qe.x),X=Math.min(X,Qe.y),fe=Math.max(fe,Qe.x),Se=Math.max(Se,Qe.y)}return{minX:R,minY:X,maxX:fe,maxY:Se}}function u4(S,R){return R-S}Su.prototype.insert=function(S,R,X,fe,Se,Oe){var He=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(X,fe,Se);for(var Qe=Oe?this.grid3D:this.grid,ct=0;ct<R.length;ct++){for(var bt=R[ct],Tt=[1/0,1/0,-1/0,-1/0],Nt=0;Nt<bt.length;Nt++){var qt=bt[Nt];Tt[0]=Math.min(Tt[0],qt.x),Tt[1]=Math.min(Tt[1],qt.y),Tt[2]=Math.max(Tt[2],qt.x),Tt[3]=Math.max(Tt[3],qt.y)}Tt[0]<ai&&Tt[1]<ai&&Tt[2]>=0&&Tt[3]>=0&&Qe.insert(He,Tt[0],Tt[1],Tt[2],Tt[3])}},Su.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Zc.VectorTile(new Ld(this.rawTileData)).layers,this.sourceLayerCoder=new Hd(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Su.prototype.query=function(S,R,X,fe){var Se=this;this.loadVTLayers();for(var Oe=S.params||{},He=ai/S.tileSize/S.scale,Qe=Sl(Oe.filter),ct=S.queryGeometry,bt=S.queryPadding*He,Tt=E1(ct),Nt=this.grid.query(Tt.minX-bt,Tt.minY-bt,Tt.maxX+bt,Tt.maxY+bt),qt=E1(S.cameraQueryGeometry),jt=0,an=this.grid3D.query(qt.minX-bt,qt.minY-bt,qt.maxX+bt,qt.maxY+bt,function(Hn,$n,or,vr){return function(dr,_r,Tr,jr,Dr){for(var Br=0,Lr=dr;Br<Lr.length;Br+=1){var Cr=Lr[Br];if(_r<=Cr.x&&Tr<=Cr.y&&jr>=Cr.x&&Dr>=Cr.y)return!0}var ri=[new t(_r,Tr),new t(_r,Dr),new t(jr,Dr),new t(jr,Tr)];if(dr.length>2){for(var Hr=0,Fi=ri;Hr<Fi.length;Hr+=1)if(iu(dr,Fi[Hr]))return!0}for(var zr=0;zr<dr.length-1;zr++)if(Fw(dr[zr],dr[zr+1],ri))return!0;return!1}(S.cameraQueryGeometry,Hn-bt,$n-bt,or+bt,vr+bt)});jt<an.length;jt+=1){var cn=an[jt];Nt.push(cn)}Nt.sort(u4);for(var Tn,_n={},Fn=function(Hn){var $n=Nt[Hn];if($n!==Tn){Tn=$n;var or=Se.featureIndexArray.get($n),vr=null;Se.loadMatchingFeature(_n,or.bucketIndex,or.sourceLayerIndex,or.featureIndex,Qe,Oe.layers,Oe.availableImages,R,X,fe,function(dr,_r,Tr){return vr||(vr=os(dr)),_r.queryIntersectsFeature(ct,dr,Tr,vr,Se.z,S.transform,He,S.pixelPosMatrix)})}},zn=0;zn<Nt.length;zn++)Fn(zn);return _n},Su.prototype.loadMatchingFeature=function(S,R,X,fe,Se,Oe,He,Qe,ct,bt,Tt){var Nt=this.bucketLayerIDs[R];if(!Oe||function(dr,_r){for(var Tr=0;Tr<dr.length;Tr++)if(_r.indexOf(dr[Tr])>=0)return!0;return!1}(Oe,Nt)){var qt=this.sourceLayerCoder.decode(X),jt=this.vtLayers[qt].feature(fe);if(Se.needGeometry){var an=Vi(jt,!0);if(!Se.filter(new Xr(this.tileID.overscaledZ),an,this.tileID.canonical))return}else if(!Se.filter(new Xr(this.tileID.overscaledZ),jt))return;for(var cn=this.getId(jt,qt),Tn=0;Tn<Nt.length;Tn++){var _n=Nt[Tn];if(!(Oe&&Oe.indexOf(_n)<0)){var Fn=Qe[_n];if(Fn){var zn={};cn!==void 0&&bt&&(zn=bt.getState(Fn.sourceLayer||"_geojsonTileLayer",cn));var Hn=c({},ct[_n]);Hn.paint=S1(Hn.paint,Fn.paint,jt,zn,He),Hn.layout=S1(Hn.layout,Fn.layout,jt,zn,He);var $n=!Tt||Tt(jt,Fn,zn);if($n){var or=new qd(jt,this.z,this.x,this.y,cn);or.layer=Hn;var vr=S[_n];vr===void 0&&(vr=S[_n]=[]),vr.push({featureIndex:fe,feature:or,intersectionZ:$n})}}}}}},Su.prototype.lookupSymbolFeatures=function(S,R,X,fe,Se,Oe,He,Qe){var ct={};this.loadVTLayers();for(var bt=Sl(Se),Tt=0,Nt=S;Tt<Nt.length;Tt+=1){var qt=Nt[Tt];this.loadMatchingFeature(ct,X,fe,qt,bt,Oe,He,Qe,R)}return ct},Su.prototype.hasLayer=function(S){for(var R=0,X=this.bucketLayerIDs;R<X.length;R+=1)for(var fe=0,Se=X[R];fe<Se.length;fe+=1)if(S===Se[fe])return!0;return!1},Su.prototype.getId=function(S,R){var X=S.id;if(this.promoteId){var fe=typeof this.promoteId=="string"?this.promoteId:this.promoteId[R];typeof(X=S.properties[fe])=="boolean"&&(X=Number(X))}return X},Mr("FeatureIndex",Su,{omit:["rawTileData","sourceLayerCoder"]});var zo=function(S,R){this.tileID=S,this.uid=p(),this.uses=0,this.tileSize=R,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};zo.prototype.registerFadeDuration=function(S){var R=S+this.timeAdded;R<Q.now()||this.fadeEndTime&&R<this.fadeEndTime||(this.fadeEndTime=R)},zo.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},zo.prototype.loadVectorData=function(S,R,X){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",S){for(var fe in S.featureIndex&&(this.latestFeatureIndex=S.featureIndex,S.rawTileData?(this.latestRawTileData=S.rawTileData,this.latestFeatureIndex.rawTileData=S.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=S.collisionBoxArray,this.buckets=function(bt,Tt){var Nt={};if(!Tt)return Nt;for(var qt=function(){var cn=an[jt],Tn=cn.layerIds.map(function(Hn){return Tt.getLayer(Hn)}).filter(Boolean);if(Tn.length!==0){cn.layers=Tn,cn.stateDependentLayerIds&&(cn.stateDependentLayers=cn.stateDependentLayerIds.map(function(Hn){return Tn.filter(function($n){return $n.id===Hn})[0]}));for(var _n=0,Fn=Tn;_n<Fn.length;_n+=1){var zn=Fn[_n];Nt[zn.id]=cn}}},jt=0,an=bt;jt<an.length;jt+=1)qt();return Nt}(S.buckets,R.style),this.hasSymbolBuckets=!1,this.buckets){var Se=this.buckets[fe];if(Se instanceof Si){if(this.hasSymbolBuckets=!0,!X)break;Se.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Oe in this.buckets){var He=this.buckets[Oe];if(He instanceof Si&&He.hasRTLText){this.hasRTLText=!0,No.isLoading()||No.isLoaded()||ul()!=="deferred"||cl();break}}for(var Qe in this.queryPadding=0,this.buckets){var ct=this.buckets[Qe];this.queryPadding=Math.max(this.queryPadding,R.style.getLayer(Qe).queryRadius(ct))}S.imageAtlas&&(this.imageAtlas=S.imageAtlas),S.glyphAtlasImage&&(this.glyphAtlasImage=S.glyphAtlasImage)}else this.collisionBoxArray=new At},zo.prototype.unloadVectorData=function(){for(var S in this.buckets)this.buckets[S].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},zo.prototype.getBucket=function(S){return this.buckets[S.id]},zo.prototype.upload=function(S){for(var R in this.buckets){var X=this.buckets[R];X.uploadPending()&&X.upload(S)}var fe=S.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new vc(S,this.imageAtlas.image,fe.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new vc(S,this.glyphAtlasImage,fe.ALPHA),this.glyphAtlasImage=null)},zo.prototype.prepare=function(S){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(S,this.imageAtlasTexture)},zo.prototype.queryRenderedFeatures=function(S,R,X,fe,Se,Oe,He,Qe,ct,bt){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:fe,cameraQueryGeometry:Se,scale:Oe,tileSize:this.tileSize,pixelPosMatrix:bt,transform:Qe,params:He,queryPadding:this.queryPadding*ct},S,R,X):{}},zo.prototype.querySourceFeatures=function(S,R){var X=this.latestFeatureIndex;if(X&&X.rawTileData){var fe=X.loadVTLayers(),Se=R?R.sourceLayer:"",Oe=fe._geojsonTileLayer||fe[Se];if(Oe)for(var He=Sl(R&&R.filter),Qe=this.tileID.canonical,ct=Qe.z,bt=Qe.x,Tt=Qe.y,Nt={z:ct,x:bt,y:Tt},qt=0;qt<Oe.length;qt++){var jt=Oe.feature(qt);if(He.needGeometry){var an=Vi(jt,!0);if(!He.filter(new Xr(this.tileID.overscaledZ),an,this.tileID.canonical))continue}else if(!He.filter(new Xr(this.tileID.overscaledZ),jt))continue;var cn=X.getId(jt,Se),Tn=new qd(jt,ct,bt,Tt,cn);Tn.tile=Nt,S.push(Tn)}}},zo.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},zo.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},zo.prototype.setExpiryData=function(S){var R=this.expirationTime;if(S.cacheControl){var X=N(S.cacheControl);X["max-age"]&&(this.expirationTime=Date.now()+1e3*X["max-age"])}else S.expires&&(this.expirationTime=new Date(S.expires).getTime());if(this.expirationTime){var fe=Date.now(),Se=!1;if(this.expirationTime>fe)Se=!1;else if(R)if(this.expirationTime<R)Se=!0;else{var Oe=this.expirationTime-R;Oe?this.expirationTime=fe+Math.max(Oe,3e4):Se=!0}else Se=!0;Se?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},zo.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},zo.prototype.setFeatureState=function(S,R){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(S).length!==0){var X=this.latestFeatureIndex.loadVTLayers();for(var fe in this.buckets)if(R.style.hasLayer(fe)){var Se=this.buckets[fe],Oe=Se.layers[0].sourceLayer||"_geojsonTileLayer",He=X[Oe],Qe=S[Oe];if(He&&Qe&&Object.keys(Qe).length!==0){Se.update(Qe,He,this.imageAtlas&&this.imageAtlas.patternPositions||{});var ct=R&&R.style&&R.style.getLayer(fe);ct&&(this.queryPadding=Math.max(this.queryPadding,ct.queryRadius(Se)))}}}},zo.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},zo.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Q.now()},zo.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},zo.prototype.setHoldDuration=function(S){this.symbolFadeHoldUntil=Q.now()+S},zo.prototype.setDependencies=function(S,R){for(var X={},fe=0,Se=R;fe<Se.length;fe+=1)X[Se[fe]]=!0;this.dependencies[S]=X},zo.prototype.hasDependency=function(S,R){for(var X=0,fe=S;X<fe.length;X+=1){var Se=fe[X],Oe=this.dependencies[Se];if(Oe){for(var He=0,Qe=R;He<Qe.length;He+=1)if(Oe[Qe[He]])return!0}}return!1};var Zu=r.performance,C1=function(S){this._marks={start:[S.url,"start"].join("#"),end:[S.url,"end"].join("#"),measure:S.url.toString()},Zu.mark(this._marks.start)};C1.prototype.finish=function(){Zu.mark(this._marks.end);var S=Zu.getEntriesByName(this._marks.measure);return S.length===0&&(Zu.measure(this._marks.measure,this._marks.start,this._marks.end),S=Zu.getEntriesByName(this._marks.measure),Zu.clearMarks(this._marks.start),Zu.clearMarks(this._marks.end),Zu.clearMeasures(this._marks.measure)),S},n.Actor=sf,n.AlphaImage=mc,n.CanonicalTileID=xc,n.CollisionBoxArray=At,n.Color=Cn,n.DEMData=ku,n.DataConstantProperty=Sr,n.DictionaryCoder=Hd,n.EXTENT=ai,n.ErrorEvent=je,n.EvaluationParameters=Xr,n.Event=Be,n.Evented=ot,n.FeatureIndex=Su,n.FillBucket=Fl,n.FillExtrusionBucket=Nl,n.ImageAtlas=hh,n.ImagePosition=Pd,n.LineBucket=Ca,n.LngLat=Xi,n.LngLatBounds=Ao,n.MercatorCoordinate=yc,n.ONE_EM=qo,n.OverscaledTileID=ko,n.Point=t,n.Point$1=t,n.Properties=Zi,n.Protobuf=Ld,n.RGBAImage=Ya,n.RequestManager=be,n.RequestPerformance=C1,n.ResourceType=gt,n.SegmentVector=Vn,n.SourceFeatureState=lf,n.StructArrayLayout1ui2=pt,n.StructArrayLayout2f1f2i16=ie,n.StructArrayLayout2i4=Ss,n.StructArrayLayout3ui6=Te,n.StructArrayLayout4i8=Mu,n.SymbolBucket=Si,n.Texture=vc,n.Tile=zo,n.Transitionable=Sa,n.Uniform1f=Wr,n.Uniform1i=Ur,n.Uniform2f=Kr,n.Uniform3f=ki,n.Uniform4f=qi,n.UniformColor=Do,n.UniformMatrix4f=To,n.UnwrappedTileID=k1,n.ValidationError=dt,n.WritingMode=Cs,n.ZoomHistory=ll,n.add=function(S,R,X){return S[0]=R[0]+X[0],S[1]=R[1]+X[1],S[2]=R[2]+X[2],S},n.addDynamicAttributes=og,n.asyncAll=function(S,R,X){if(!S.length)return X(null,[]);var fe=S.length,Se=new Array(S.length),Oe=null;S.forEach(function(He,Qe){R(He,function(ct,bt){ct&&(Oe=ct),Se[Qe]=bt,--fe==0&&X(Oe,Se)})})},n.bezier=a,n.bindAll=b,n.browser=Q,n.cacheEntryPossiblyAdded=function(S){++vt>ze&&(S.getActor().send("enforceCacheSizeLimit",Ce),vt=0)},n.clamp=l,n.clearTileCache=function(S){var R=r.caches.delete(we);S&&R.catch(S).then(function(){return S()})},n.clipLine=u1,n.clone=function(S){var R=new Es(16);return R[0]=S[0],R[1]=S[1],R[2]=S[2],R[3]=S[3],R[4]=S[4],R[5]=S[5],R[6]=S[6],R[7]=S[7],R[8]=S[8],R[9]=S[9],R[10]=S[10],R[11]=S[11],R[12]=S[12],R[13]=S[13],R[14]=S[14],R[15]=S[15],R},n.clone$1=E,n.clone$2=function(S){var R=new Es(3);return R[0]=S[0],R[1]=S[1],R[2]=S[2],R},n.collisionCircleLayout=C3,n.config=ne,n.create=function(){var S=new Es(16);return Es!=Float32Array&&(S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[11]=0,S[12]=0,S[13]=0,S[14]=0),S[0]=1,S[5]=1,S[10]=1,S[15]=1,S},n.create$1=function(){var S=new Es(9);return Es!=Float32Array&&(S[1]=0,S[2]=0,S[3]=0,S[5]=0,S[6]=0,S[7]=0),S[0]=1,S[4]=1,S[8]=1,S},n.create$2=function(){var S=new Es(4);return Es!=Float32Array&&(S[1]=0,S[2]=0),S[0]=1,S[3]=1,S},n.createCommonjsModule=T,n.createExpression=es,n.createLayout=Li,n.createStyleLayer=function(S){return S.type==="custom"?new s4(S):new l4[S.type](S)},n.cross=function(S,R,X){var fe=R[0],Se=R[1],Oe=R[2],He=X[0],Qe=X[1],ct=X[2];return S[0]=Se*ct-Oe*Qe,S[1]=Oe*He-fe*ct,S[2]=fe*Qe-Se*He,S},n.deepEqual=function S(R,X){if(Array.isArray(R)){if(!Array.isArray(X)||R.length!==X.length)return!1;for(var fe=0;fe<R.length;fe++)if(!S(R[fe],X[fe]))return!1;return!0}if(typeof R=="object"&&R!==null&&X!==null){if(typeof X!="object"||Object.keys(R).length!==Object.keys(X).length)return!1;for(var Se in R)if(!S(R[Se],X[Se]))return!1;return!0}return R===X},n.dot=function(S,R){return S[0]*R[0]+S[1]*R[1]+S[2]*R[2]},n.dot$1=function(S,R){return S[0]*R[0]+S[1]*R[1]+S[2]*R[2]+S[3]*R[3]},n.ease=u,n.emitValidationErrors=Po,n.endsWith=y,n.enforceCacheSizeLimit=function(S){Ue(),pe&&pe.then(function(R){R.keys().then(function(X){for(var fe=0;fe<X.length-S;fe++)R.delete(X[fe])})})},n.evaluateSizeForFeature=n1,n.evaluateSizeForZoom=r1,n.evaluateVariableOffset=h1,n.evented=Fo,n.extend=c,n.featureFilter=Sl,n.filterObject=h,n.fromRotation=function(S,R){var X=Math.sin(R),fe=Math.cos(R);return S[0]=fe,S[1]=X,S[2]=0,S[3]=-X,S[4]=fe,S[5]=0,S[6]=0,S[7]=0,S[8]=1,S},n.getAnchorAlignment=tg,n.getAnchorJustification=ig,n.getArrayBuffer=Rt,n.getImage=$e,n.getJSON=function(S,R){return Pt(c(S,{type:"json"}),R)},n.getRTLTextPluginStatus=ul,n.getReferrer=tt,n.getVideo=function(S,R){var X,fe,Se=r.document.createElement("video");Se.muted=!0,Se.onloadstart=function(){R(null,Se)};for(var Oe=0;Oe<S.length;Oe++){var He=r.document.createElement("source");X=S[Oe],fe=void 0,(fe=r.document.createElement("a")).href=X,fe.protocol===r.document.location.protocol&&fe.host===r.document.location.host||(Se.crossOrigin="Anonymous"),He.src=S[Oe],Se.appendChild(He)}return{cancel:function(){}}},n.identity=V0,n.invert=function(S,R){var X=R[0],fe=R[1],Se=R[2],Oe=R[3],He=R[4],Qe=R[5],ct=R[6],bt=R[7],Tt=R[8],Nt=R[9],qt=R[10],jt=R[11],an=R[12],cn=R[13],Tn=R[14],_n=R[15],Fn=X*Qe-fe*He,zn=X*ct-Se*He,Hn=X*bt-Oe*He,$n=fe*ct-Se*Qe,or=fe*bt-Oe*Qe,vr=Se*bt-Oe*ct,dr=Tt*cn-Nt*an,_r=Tt*Tn-qt*an,Tr=Tt*_n-jt*an,jr=Nt*Tn-qt*cn,Dr=Nt*_n-jt*cn,Br=qt*_n-jt*Tn,Lr=Fn*Br-zn*Dr+Hn*jr+$n*Tr-or*_r+vr*dr;return Lr?(Lr=1/Lr,S[0]=(Qe*Br-ct*Dr+bt*jr)*Lr,S[1]=(Se*Dr-fe*Br-Oe*jr)*Lr,S[2]=(cn*vr-Tn*or+_n*$n)*Lr,S[3]=(qt*or-Nt*vr-jt*$n)*Lr,S[4]=(ct*Tr-He*Br-bt*_r)*Lr,S[5]=(X*Br-Se*Tr+Oe*_r)*Lr,S[6]=(Tn*Hn-an*vr-_n*zn)*Lr,S[7]=(Tt*vr-qt*Hn+jt*zn)*Lr,S[8]=(He*Dr-Qe*Tr+bt*dr)*Lr,S[9]=(fe*Tr-X*Dr-Oe*dr)*Lr,S[10]=(an*or-cn*Hn+_n*Fn)*Lr,S[11]=(Nt*Hn-Tt*or-jt*Fn)*Lr,S[12]=(Qe*_r-He*jr-ct*dr)*Lr,S[13]=(X*jr-fe*_r+Se*dr)*Lr,S[14]=(cn*zn-an*$n-Tn*Fn)*Lr,S[15]=(Tt*$n-Nt*zn+qt*Fn)*Lr,S):null},n.isChar=yr,n.isMapboxURL=_e,n.keysDifference=function(S,R){var X=[];for(var fe in S)fe in R||X.push(fe);return X},n.makeRequest=Pt,n.mapObject=M,n.mercatorXfromLng=T1,n.mercatorYfromLat=M1,n.mercatorZfromAltitude=A1,n.mul=Bw,n.multiply=My,n.mvt=Zc,n.nextPowerOfTwo=function(S){return S<=1?1:Math.pow(2,Math.ceil(Math.log(S)/Math.LN2))},n.normalize=function(S,R){var X=R[0],fe=R[1],Se=R[2],Oe=X*X+fe*fe+Se*Se;return Oe>0&&(Oe=1/Math.sqrt(Oe)),S[0]=R[0]*Oe,S[1]=R[1]*Oe,S[2]=R[2]*Oe,S},n.number=Pr,n.offscreenCanvasSupported=xt,n.ortho=function(S,R,X,fe,Se,Oe,He){var Qe=1/(R-X),ct=1/(fe-Se),bt=1/(Oe-He);return S[0]=-2*Qe,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=-2*ct,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[10]=2*bt,S[11]=0,S[12]=(R+X)*Qe,S[13]=(Se+fe)*ct,S[14]=(He+Oe)*bt,S[15]=1,S},n.parseGlyphPBF=function(S){return new Ld(S).readFields(j3,[])},n.pbf=Ld,n.performSymbolLayout=function(S,R,X,fe,Se,Oe,He){S.createArrays();var Qe=512*S.overscaling;S.tilePixelRatio=ai/Qe,S.compareText={},S.iconsNeedLinear=!1;var ct=S.layers[0].layout,bt=S.layers[0]._unevaluatedLayout._values,Tt={};if(S.textSizeData.kind==="composite"){var Nt=S.textSizeData,qt=Nt.minZoom,jt=Nt.maxZoom;Tt.compositeTextSizes=[bt["text-size"].possiblyEvaluate(new Xr(qt),He),bt["text-size"].possiblyEvaluate(new Xr(jt),He)]}if(S.iconSizeData.kind==="composite"){var an=S.iconSizeData,cn=an.minZoom,Tn=an.maxZoom;Tt.compositeIconSizes=[bt["icon-size"].possiblyEvaluate(new Xr(cn),He),bt["icon-size"].possiblyEvaluate(new Xr(Tn),He)]}Tt.layoutTextSize=bt["text-size"].possiblyEvaluate(new Xr(S.zoom+1),He),Tt.layoutIconSize=bt["icon-size"].possiblyEvaluate(new Xr(S.zoom+1),He),Tt.textMaxSize=bt["text-size"].possiblyEvaluate(new Xr(18));for(var _n=ct.get("text-line-height")*qo,Fn=ct.get("text-rotation-alignment")==="map"&&ct.get("symbol-placement")!=="point",zn=ct.get("text-keep-upright"),Hn=ct.get("text-size"),$n=function(){var dr=vr[or],_r=ct.get("text-font").evaluate(dr,{},He).join(","),Tr=Hn.evaluate(dr,{},He),jr=Tt.layoutTextSize.evaluate(dr,{},He),Dr=Tt.layoutIconSize.evaluate(dr,{},He),Br={horizontal:{},vertical:void 0},Lr=dr.text,Cr=[0,0];if(Lr){var ri=Lr.toString(),Hr=ct.get("text-letter-spacing").evaluate(dr,{},He)*qo,Fi=function(qr){for(var si=0,ho=qr;si<ho.length;si+=1)if(Pi=ho[si].charCodeAt(0),yr.Arabic(Pi)||yr["Arabic Supplement"](Pi)||yr["Arabic Extended-A"](Pi)||yr["Arabic Presentation Forms-A"](Pi)||yr["Arabic Presentation Forms-B"](Pi))return!1;var Pi;return!0}(ri)?Hr:0,zr=ct.get("text-anchor").evaluate(dr,{},He),Ei=ct.get("text-variable-anchor");if(!Ei){var Hi=ct.get("text-radial-offset").evaluate(dr,{},He);Cr=Hi?h1(zr,[Hi*qo,rg]):ct.get("text-offset").evaluate(dr,{},He).map(function(qr){return qr*qo})}var Wi=Fn?"center":ct.get("text-justify").evaluate(dr,{},He),Yi=ct.get("symbol-placement"),Ni=Yi==="point"?ct.get("text-max-width").evaluate(dr,{},He)*qo:0,So=function(){S.allowVerticalPlacement&&Ol(ri)&&(Br.vertical=Rd(Lr,R,X,Se,_r,Ni,_n,zr,"left",Fi,Cr,Cs.vertical,!0,Yi,jr,Tr))};if(!Fn&&Ei){for(var eo=Wi==="auto"?Ei.map(function(qr){return ig(qr)}):[Wi],Bo=!1,ta=0;ta<eo.length;ta++){var Go=eo[ta];if(!Br.horizontal[Go])if(Bo)Br.horizontal[Go]=Br.horizontal[0];else{var Da=Rd(Lr,R,X,Se,_r,Ni,_n,"center",Go,Fi,Cr,Cs.horizontal,!1,Yi,jr,Tr);Da&&(Br.horizontal[Go]=Da,Bo=Da.positionedLines.length===1)}}So()}else{Wi==="auto"&&(Wi=ig(zr));var Wo=Rd(Lr,R,X,Se,_r,Ni,_n,zr,Wi,Fi,Cr,Cs.horizontal,!1,Yi,jr,Tr);Wo&&(Br.horizontal[Wi]=Wo),So(),Ol(ri)&&Fn&&zn&&(Br.vertical=Rd(Lr,R,X,Se,_r,Ni,_n,zr,Wi,Fi,Cr,Cs.vertical,!1,Yi,jr,Tr))}}var Io=void 0,Yo=!1;if(dr.icon&&dr.icon.name){var jo=fe[dr.icon.name];jo&&(Io=function(qr,si,ho){var Pi=tg(ho),oo=Pi.horizontalAlign,Ki=Pi.verticalAlign,di=si[0],po=si[1],Ia=di-qr.displaySize[0]*oo,ls=Ia+qr.displaySize[0],ga=po-qr.displaySize[1]*Ki;return{image:qr,top:ga,bottom:ga+qr.displaySize[1],left:Ia,right:ls}}(Se[dr.icon.name],ct.get("icon-offset").evaluate(dr,{},He),ct.get("icon-anchor").evaluate(dr,{},He)),Yo=jo.sdf,S.sdfIcons===void 0?S.sdfIcons=jo.sdf:S.sdfIcons!==jo.sdf&&D("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(jo.pixelRatio!==S.pixelRatio||ct.get("icon-rotate").constantOr(1)!==0)&&(S.iconsNeedLinear=!0))}var Lo=p1(Br.horizontal)||Br.vertical;S.iconsInText=!!Lo&&Lo.iconsInText,(Lo||Io)&&function(qr,si,ho,Pi,oo,Ki,di,po,Ia,ls,ga){var Bl=Ki.textMaxSize.evaluate(si,{});Bl===void 0&&(Bl=di);var Eu,Vo=qr.layers[0].layout,jl=Vo.get("icon-offset").evaluate(si,{},ga),ml=p1(ho.horizontal),vl=24,bc=di/vl,Gd=qr.tilePixelRatio*bc,_c=qr.tilePixelRatio*Bl/vl,Wd=qr.tilePixelRatio*po,vh=qr.tilePixelRatio*Vo.get("symbol-spacing"),cg=Vo.get("text-padding")*qr.tilePixelRatio,Yd=Vo.get("icon-padding")*qr.tilePixelRatio,uf=Vo.get("text-max-angle")/180*Math.PI,$d=Vo.get("text-rotation-alignment")==="map"&&Vo.get("symbol-placement")!=="point",Zd=Vo.get("icon-rotation-alignment")==="map"&&Vo.get("symbol-placement")!=="point",yh=Vo.get("symbol-placement"),fg=vh/2,xh=Vo.get("icon-text-fit");Pi&&xh!=="none"&&(qr.allowVerticalPlacement&&ho.vertical&&(Eu=t1(Pi,ho.vertical,xh,Vo.get("icon-text-fit-padding"),jl,bc)),ml&&(Pi=t1(Pi,ml,xh,Vo.get("icon-text-fit-padding"),jl,bc)));var wc=function(c4,Ah){Ah.x<0||Ah.x>=ai||Ah.y<0||Ah.y>=ai||function(xo,Vl,f4,Xu,vg,P1,ep,ou,tp,kh,np,rp,yg,R1,Sh,F1,N1,z1,B1,j1,Ds,ip,V1,au,h4){var U1,Ac,hf,df,pf,gf=xo.addToLineVertexArray(Vl,f4),H1=0,q1=0,G1=0,W1=0,xg=-1,bg=-1,Cu={},Y1=xr(""),_g=0,wg=0;if(ou._unevaluatedLayout.getValue("text-radial-offset")===void 0?(_g=(U1=ou.layout.get("text-offset").evaluate(Ds,{},au).map(function(Ch){return Ch*qo}))[0],wg=U1[1]):(_g=ou.layout.get("text-radial-offset").evaluate(Ds,{},au)*qo,wg=rg),xo.allowVerticalPlacement&&Xu.vertical){var $1=ou.layout.get("text-rotate").evaluate(Ds,{},au)+90,d4=Xu.vertical;df=new jd(tp,Vl,kh,np,rp,d4,yg,R1,Sh,$1),ep&&(pf=new jd(tp,Vl,kh,np,rp,ep,N1,z1,Sh,$1))}if(vg){var Tg=ou.layout.get("icon-rotate").evaluate(Ds,{}),Z1=ou.layout.get("icon-text-fit")!=="none",X1=c1(vg,Tg,V1,Z1),Mg=ep?c1(ep,Tg,V1,Z1):void 0;hf=new jd(tp,Vl,kh,np,rp,vg,N1,z1,!1,Tg),H1=4*X1.length;var K1=xo.iconSizeData,Eh=null;K1.kind==="source"?(Eh=[zl*ou.layout.get("icon-size").evaluate(Ds,{})])[0]>$u&&D(xo.layerIds[0]+': Value for "icon-size" is >= '+ph+'. Reduce your "icon-size".'):K1.kind==="composite"&&((Eh=[zl*ip.compositeIconSizes[0].evaluate(Ds,{},au),zl*ip.compositeIconSizes[1].evaluate(Ds,{},au)])[0]>$u||Eh[1]>$u)&&D(xo.layerIds[0]+': Value for "icon-size" is >= '+ph+'. Reduce your "icon-size".'),xo.addSymbols(xo.icon,X1,Eh,j1,B1,Ds,!1,Vl,gf.lineStartIndex,gf.lineLength,-1,au),xg=xo.icon.placedSymbolArray.length-1,Mg&&(q1=4*Mg.length,xo.addSymbols(xo.icon,Mg,Eh,j1,B1,Ds,Cs.vertical,Vl,gf.lineStartIndex,gf.lineLength,-1,au),bg=xo.icon.placedSymbolArray.length-1)}for(var J1 in Xu.horizontal){var op=Xu.horizontal[J1];if(!Ac){Y1=xr(op.text);var p4=ou.layout.get("text-rotate").evaluate(Ds,{},au);Ac=new jd(tp,Vl,kh,np,rp,op,yg,R1,Sh,p4)}var Q1=op.positionedLines.length===1;if(G1+=d1(xo,Vl,op,P1,ou,Sh,Ds,F1,gf,Xu.vertical?Cs.horizontal:Cs.horizontalOnly,Q1?Object.keys(Xu.horizontal):[J1],Cu,xg,ip,au),Q1)break}Xu.vertical&&(W1+=d1(xo,Vl,Xu.vertical,P1,ou,Sh,Ds,F1,gf,Cs.vertical,["vertical"],Cu,bg,ip,au));var g4=Ac?Ac.boxStartIndex:xo.collisionBoxArray.length,m4=Ac?Ac.boxEndIndex:xo.collisionBoxArray.length,v4=df?df.boxStartIndex:xo.collisionBoxArray.length,y4=df?df.boxEndIndex:xo.collisionBoxArray.length,x4=hf?hf.boxStartIndex:xo.collisionBoxArray.length,b4=hf?hf.boxEndIndex:xo.collisionBoxArray.length,_4=pf?pf.boxStartIndex:xo.collisionBoxArray.length,w4=pf?pf.boxEndIndex:xo.collisionBoxArray.length,su=-1,ap=function(Ch,tx){return Ch&&Ch.circleDiameter?Math.max(Ch.circleDiameter,tx):tx};su=ap(Ac,su),su=ap(df,su),su=ap(hf,su);var ex=(su=ap(pf,su))>-1?1:0;ex&&(su*=h4/qo),xo.glyphOffsetArray.length>=Si.MAX_GLYPHS&&D("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ds.sortKey!==void 0&&xo.addToSortKeyRanges(xo.symbolInstances.length,Ds.sortKey),xo.symbolInstances.emplaceBack(Vl.x,Vl.y,Cu.right>=0?Cu.right:-1,Cu.center>=0?Cu.center:-1,Cu.left>=0?Cu.left:-1,Cu.vertical||-1,xg,bg,Y1,g4,m4,v4,y4,x4,b4,_4,w4,kh,G1,W1,H1,q1,ex,0,yg,_g,wg,su)}(qr,Ah,c4,ho,Pi,oo,Eu,qr.layers[0],qr.collisionBoxArray,si.index,si.sourceLayerIndex,qr.index,Gd,cg,$d,Ia,Wd,Yd,Zd,jl,si,Ki,ls,ga,di)};if(yh==="line")for(var cf=0,Xd=u1(si.geometry,0,0,ai,ai);cf<Xd.length;cf+=1)for(var Kd=Xd[cf],ff=0,Jd=Y3(Kd,vh,uf,ho.vertical||ml,Pi,vl,_c,qr.overscaling,ai);ff<Jd.length;ff+=1){var Qd=Jd[ff];ml&&K3(qr,ml.text,fg,Qd)||wc(Kd,Qd)}else if(yh==="line-center")for(var bh=0,_h=si.geometry;bh<_h.length;bh+=1){var Tc=_h[bh];if(Tc.length>1){var wh=W3(Tc,uf,ho.vertical||ml,Pi,vl,_c);wh&&wc(Tc,wh)}}else if(si.type==="Polygon")for(var Mc=0,Th=$0(si.geometry,0);Mc<Th.length;Mc+=1){var Mh=Th[Mc],D1=Z3(Mh,16);wc(Mh[0],new Qc(D1.x,D1.y,0))}else if(si.type==="LineString")for(var hg=0,I1=si.geometry;hg<I1.length;hg+=1){var dg=I1[hg];wc(dg,new Qc(dg[0].x,dg[0].y,0))}else if(si.type==="Point")for(var pg=0,L1=si.geometry;pg<L1.length;pg+=1)for(var gg=0,O1=L1[pg];gg<O1.length;gg+=1){var mg=O1[gg];wc([mg],new Qc(mg.x,mg.y,0))}}(S,dr,Br,Io,fe,Tt,jr,Dr,Cr,Yo,He)},or=0,vr=S.features;or<vr.length;or+=1)$n();Oe&&S.generateCollisionDebugBuffers()},n.perspective=function(S,R,X,fe,Se){var Oe,He=1/Math.tan(R/2);return S[0]=He/X,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=He,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[11]=-1,S[12]=0,S[13]=0,S[15]=0,Se!=null&&Se!==1/0?(Oe=1/(fe-Se),S[10]=(Se+fe)*Oe,S[14]=2*Se*fe*Oe):(S[10]=-1,S[14]=-2*fe),S},n.pick=function(S,R){for(var X={},fe=0;fe<R.length;fe++){var Se=R[fe];Se in S&&(X[Se]=S[Se])}return X},n.plugin=No,n.polygonIntersectsPolygon=gc,n.postMapLoadEvent=ge,n.postTurnstileEvent=Re,n.potpack=Xy,n.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],n.register=Mr,n.registerForPluginStateChange=function(S){return S({pluginStatus:Qr,pluginURL:vo}),Fo.on("pluginStateChange",S),S},n.renderColorRamp=Ey,n.rotate=function(S,R,X){var fe=R[0],Se=R[1],Oe=R[2],He=R[3],Qe=Math.sin(X),ct=Math.cos(X);return S[0]=fe*ct+Oe*Qe,S[1]=Se*ct+He*Qe,S[2]=fe*-Qe+Oe*ct,S[3]=Se*-Qe+He*ct,S},n.rotateX=function(S,R,X){var fe=Math.sin(X),Se=Math.cos(X),Oe=R[4],He=R[5],Qe=R[6],ct=R[7],bt=R[8],Tt=R[9],Nt=R[10],qt=R[11];return R!==S&&(S[0]=R[0],S[1]=R[1],S[2]=R[2],S[3]=R[3],S[12]=R[12],S[13]=R[13],S[14]=R[14],S[15]=R[15]),S[4]=Oe*Se+bt*fe,S[5]=He*Se+Tt*fe,S[6]=Qe*Se+Nt*fe,S[7]=ct*Se+qt*fe,S[8]=bt*Se-Oe*fe,S[9]=Tt*Se-He*fe,S[10]=Nt*Se-Qe*fe,S[11]=qt*Se-ct*fe,S},n.rotateZ=function(S,R,X){var fe=Math.sin(X),Se=Math.cos(X),Oe=R[0],He=R[1],Qe=R[2],ct=R[3],bt=R[4],Tt=R[5],Nt=R[6],qt=R[7];return R!==S&&(S[8]=R[8],S[9]=R[9],S[10]=R[10],S[11]=R[11],S[12]=R[12],S[13]=R[13],S[14]=R[14],S[15]=R[15]),S[0]=Oe*Se+bt*fe,S[1]=He*Se+Tt*fe,S[2]=Qe*Se+Nt*fe,S[3]=ct*Se+qt*fe,S[4]=bt*Se-Oe*fe,S[5]=Tt*Se-He*fe,S[6]=Nt*Se-Qe*fe,S[7]=qt*Se-ct*fe,S},n.scale=function(S,R,X){var fe=X[0],Se=X[1],Oe=X[2];return S[0]=R[0]*fe,S[1]=R[1]*fe,S[2]=R[2]*fe,S[3]=R[3]*fe,S[4]=R[4]*Se,S[5]=R[5]*Se,S[6]=R[6]*Se,S[7]=R[7]*Se,S[8]=R[8]*Oe,S[9]=R[9]*Oe,S[10]=R[10]*Oe,S[11]=R[11]*Oe,S[12]=R[12],S[13]=R[13],S[14]=R[14],S[15]=R[15],S},n.scale$1=function(S,R,X){return S[0]=R[0]*X,S[1]=R[1]*X,S[2]=R[2]*X,S[3]=R[3]*X,S},n.scale$2=function(S,R,X){return S[0]=R[0]*X,S[1]=R[1]*X,S[2]=R[2]*X,S},n.setCacheLimits=function(S,R){Ce=S,ze=R},n.setRTLTextPlugin=function(S,R,X){if(X===void 0&&(X=!1),Qr===Ua||Qr===da||Qr===rs)throw new Error("setRTLTextPlugin cannot be called multiple times.");vo=Q.resolveURL(S),Qr=Ua,ks=R,Ha(),X||cl()},n.sphericalToCartesian=function(S){var R=S[0],X=S[1],fe=S[2];return X+=90,X*=Math.PI/180,fe*=Math.PI/180,{x:R*Math.cos(X)*Math.sin(fe),y:R*Math.sin(X)*Math.sin(fe),z:R*Math.cos(fe)}},n.sqrLen=Vw,n.styleSpec=Ze,n.sub=jw,n.symbolSize=G3,n.transformMat3=function(S,R,X){var fe=R[0],Se=R[1],Oe=R[2];return S[0]=fe*X[0]+Se*X[3]+Oe*X[6],S[1]=fe*X[1]+Se*X[4]+Oe*X[7],S[2]=fe*X[2]+Se*X[5]+Oe*X[8],S},n.transformMat4=Sd,n.translate=function(S,R,X){var fe,Se,Oe,He,Qe,ct,bt,Tt,Nt,qt,jt,an,cn=X[0],Tn=X[1],_n=X[2];return R===S?(S[12]=R[0]*cn+R[4]*Tn+R[8]*_n+R[12],S[13]=R[1]*cn+R[5]*Tn+R[9]*_n+R[13],S[14]=R[2]*cn+R[6]*Tn+R[10]*_n+R[14],S[15]=R[3]*cn+R[7]*Tn+R[11]*_n+R[15]):(fe=R[0],Se=R[1],Oe=R[2],He=R[3],Qe=R[4],ct=R[5],bt=R[6],Tt=R[7],Nt=R[8],qt=R[9],jt=R[10],an=R[11],S[0]=fe,S[1]=Se,S[2]=Oe,S[3]=He,S[4]=Qe,S[5]=ct,S[6]=bt,S[7]=Tt,S[8]=Nt,S[9]=qt,S[10]=jt,S[11]=an,S[12]=fe*cn+Qe*Tn+Nt*_n+R[12],S[13]=Se*cn+ct*Tn+qt*_n+R[13],S[14]=Oe*cn+bt*Tn+jt*_n+R[14],S[15]=He*cn+Tt*Tn+an*_n+R[15]),S},n.triggerPluginCompletionEvent=Ro,n.uniqueId=p,n.validateCustomStyleLayer=function(S){var R=[],X=S.id;return X===void 0&&R.push({message:"layers."+X+': missing required property "id"'}),S.render===void 0&&R.push({message:"layers."+X+': missing required method "render"'}),S.renderingMode&&S.renderingMode!=="2d"&&S.renderingMode!=="3d"&&R.push({message:"layers."+X+': property "renderingMode" must be either "2d" or "3d"'}),R},n.validateLight=Vs,n.validateStyle=Va,n.values=function(S){var R=[];for(var X in S)R.push(S[X]);return R},n.vectorTile=Zc,n.version=x,n.warnOnce=D,n.webpSupported=K,n.window=r,n.wrap=d}),w(0,function(n){function T(Ye){var Ke=typeof Ye;if(Ke==="number"||Ke==="boolean"||Ke==="string"||Ye==null)return JSON.stringify(Ye);if(Array.isArray(Ye)){for(var Ve="[",$e=0,lt=Ye;$e<lt.length;$e+=1)Ve+=T(lt[$e])+",";return Ve+"]"}for(var it=Object.keys(Ye).sort(),Be="{",je=0;je<it.length;je++)Be+=JSON.stringify(it[je])+":"+T(Ye[it[je]])+",";return Be+"}"}function x(Ye){for(var Ke="",Ve=0,$e=n.refProperties;Ve<$e.length;Ve+=1)Ke+="/"+T(Ye[$e[Ve]]);return Ke}var f=function(Ye){this.keyCache={},Ye&&this.replace(Ye)};f.prototype.replace=function(Ye){this._layerConfigs={},this._layers={},this.update(Ye,[])},f.prototype.update=function(Ye,Ke){for(var Ve=this,$e=0,lt=Ye;$e<lt.length;$e+=1){var it=lt[$e];this._layerConfigs[it.id]=it;var Be=this._layers[it.id]=n.createStyleLayer(it);Be._featureFilter=n.featureFilter(Be.filter),this.keyCache[it.id]&&delete this.keyCache[it.id]}for(var je=0,ot=Ke;je<ot.length;je+=1){var Ze=ot[je];delete this.keyCache[Ze],delete this._layerConfigs[Ze],delete this._layers[Ze]}this.familiesBySource={};for(var dt=0,mt=function(Ot,Ft){for(var Zt={},Ht=0;Ht<Ot.length;Ht++){var Ut=Ft&&Ft[Ot[Ht].id]||x(Ot[Ht]);Ft&&(Ft[Ot[Ht].id]=Ut);var Wt=Zt[Ut];Wt||(Wt=Zt[Ut]=[]),Wt.push(Ot[Ht])}var nn=[];for(var On in Zt)nn.push(Zt[On]);return nn}(n.values(this._layerConfigs),this.keyCache);dt<mt.length;dt+=1){var yt=mt[dt].map(function(Ot){return Ve._layers[Ot.id]}),ht=yt[0];if(ht.visibility!=="none"){var kt=ht.source||"",_t=this.familiesBySource[kt];_t||(_t=this.familiesBySource[kt]={});var Et=ht.sourceLayer||"_geojsonTileLayer",Lt=_t[Et];Lt||(Lt=_t[Et]=[]),Lt.push(yt)}}};var s=function(Ye){var Ke={},Ve=[];for(var $e in Ye){var lt=Ye[$e],it=Ke[$e]={};for(var Be in lt){var je=lt[+Be];if(je&&je.bitmap.width!==0&&je.bitmap.height!==0){var ot={x:0,y:0,w:je.bitmap.width+2,h:je.bitmap.height+2};Ve.push(ot),it[Be]={rect:ot,metrics:je.metrics}}}}var Ze=n.potpack(Ve),dt=Ze.w,mt=Ze.h,yt=new n.AlphaImage({width:dt||1,height:mt||1});for(var ht in Ye){var kt=Ye[ht];for(var _t in kt){var Et=kt[+_t];if(Et&&Et.bitmap.width!==0&&Et.bitmap.height!==0){var Lt=Ke[ht][_t].rect;n.AlphaImage.copy(Et.bitmap,yt,{x:0,y:0},{x:Lt.x+1,y:Lt.y+1},Et.bitmap)}}}this.image=yt,this.positions=Ke};n.register("GlyphAtlas",s);var t=function(Ye){this.tileID=new n.OverscaledTileID(Ye.tileID.overscaledZ,Ye.tileID.wrap,Ye.tileID.canonical.z,Ye.tileID.canonical.x,Ye.tileID.canonical.y),this.uid=Ye.uid,this.zoom=Ye.zoom,this.pixelRatio=Ye.pixelRatio,this.tileSize=Ye.tileSize,this.source=Ye.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Ye.showCollisionBoxes,this.collectResourceTiming=!!Ye.collectResourceTiming,this.returnDependencies=!!Ye.returnDependencies,this.promoteId=Ye.promoteId};function o(Ye,Ke,Ve){for(var $e=new n.EvaluationParameters(Ke),lt=0,it=Ye;lt<it.length;lt+=1)it[lt].recalculate($e,Ve)}function r(Ye,Ke){var Ve=n.getArrayBuffer(Ye.request,function($e,lt,it,Be){$e?Ke($e):lt&&Ke(null,{vectorTile:new n.vectorTile.VectorTile(new n.pbf(lt)),rawData:lt,cacheControl:it,expires:Be})});return function(){Ve.cancel(),Ke()}}t.prototype.parse=function(Ye,Ke,Ve,$e,lt){var it=this;this.status="parsing",this.data=Ye,this.collisionBoxArray=new n.CollisionBoxArray;var Be=new n.DictionaryCoder(Object.keys(Ye.layers).sort()),je=new n.FeatureIndex(this.tileID,this.promoteId);je.bucketLayerIDs=[];var ot,Ze,dt,mt,yt={},ht={featureIndex:je,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ve},kt=Ke.familiesBySource[this.source];for(var _t in kt){var Et=Ye.layers[_t];if(Et){Et.version===1&&n.warnOnce('Vector tile source "'+this.source+'" layer "'+_t+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Lt=Be.encode(_t),Ot=[],Ft=0;Ft<Et.length;Ft++){var Zt=Et.feature(Ft),Ht=je.getId(Zt,_t);Ot.push({feature:Zt,id:Ht,index:Ft,sourceLayerIndex:Lt})}for(var Ut=0,Wt=kt[_t];Ut<Wt.length;Ut+=1){var nn=Wt[Ut],On=nn[0];On.minzoom&&this.zoom<Math.floor(On.minzoom)||On.maxzoom&&this.zoom>=On.maxzoom||On.visibility!=="none"&&(o(nn,this.zoom,Ve),(yt[On.id]=On.createBucket({index:je.bucketLayerIDs.length,layers:nn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Lt,sourceID:this.source})).populate(Ot,ht,this.tileID.canonical),je.bucketLayerIDs.push(nn.map(function(tn){return tn.id})))}}}var kn=n.mapObject(ht.glyphDependencies,function(tn){return Object.keys(tn).map(Number)});Object.keys(kn).length?$e.send("getGlyphs",{uid:this.uid,stacks:kn},function(tn,hn){ot||(ot=tn,Ze=hn,un.call(it))}):Ze={};var gn=Object.keys(ht.iconDependencies);gn.length?$e.send("getImages",{icons:gn,source:this.source,tileID:this.tileID,type:"icons"},function(tn,hn){ot||(ot=tn,dt=hn,un.call(it))}):dt={};var Jt=Object.keys(ht.patternDependencies);function un(){if(ot)return lt(ot);if(Ze&&dt&&mt){var tn=new s(Ze),hn=new n.ImageAtlas(dt,mt);for(var bn in yt){var wn=yt[bn];wn instanceof n.SymbolBucket?(o(wn.layers,this.zoom,Ve),n.performSymbolLayout(wn,Ze,tn.positions,dt,hn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):wn.hasPattern&&(wn instanceof n.LineBucket||wn instanceof n.FillBucket||wn instanceof n.FillExtrusionBucket)&&(o(wn.layers,this.zoom,Ve),wn.addFeatures(ht,this.tileID.canonical,hn.patternPositions))}this.status="done",lt(null,{buckets:n.values(yt).filter(function(Pn){return!Pn.isEmpty()}),featureIndex:je,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:tn.image,imageAtlas:hn,glyphMap:this.returnDependencies?Ze:null,iconMap:this.returnDependencies?dt:null,glyphPositions:this.returnDependencies?tn.positions:null})}}Jt.length?$e.send("getImages",{icons:Jt,source:this.source,tileID:this.tileID,type:"patterns"},function(tn,hn){ot||(ot=tn,mt=hn,un.call(it))}):mt={},un.call(this)};var i=function(Ye,Ke,Ve,$e){this.actor=Ye,this.layerIndex=Ke,this.availableImages=Ve,this.loadVectorData=$e||r,this.loading={},this.loaded={}};i.prototype.loadTile=function(Ye,Ke){var Ve=this,$e=Ye.uid;this.loading||(this.loading={});var lt=!!(Ye&&Ye.request&&Ye.request.collectResourceTiming)&&new n.RequestPerformance(Ye.request),it=this.loading[$e]=new t(Ye);it.abort=this.loadVectorData(Ye,function(Be,je){if(delete Ve.loading[$e],Be||!je)return it.status="done",Ve.loaded[$e]=it,Ke(Be);var ot=je.rawData,Ze={};je.expires&&(Ze.expires=je.expires),je.cacheControl&&(Ze.cacheControl=je.cacheControl);var dt={};if(lt){var mt=lt.finish();mt&&(dt.resourceTiming=JSON.parse(JSON.stringify(mt)))}it.vectorTile=je.vectorTile,it.parse(je.vectorTile,Ve.layerIndex,Ve.availableImages,Ve.actor,function(yt,ht){if(yt||!ht)return Ke(yt);Ke(null,n.extend({rawTileData:ot.slice(0)},ht,Ze,dt))}),Ve.loaded=Ve.loaded||{},Ve.loaded[$e]=it})},i.prototype.reloadTile=function(Ye,Ke){var Ve=this,$e=this.loaded,lt=Ye.uid,it=this;if($e&&$e[lt]){var Be=$e[lt];Be.showCollisionBoxes=Ye.showCollisionBoxes;var je=function(ot,Ze){var dt=Be.reloadCallback;dt&&(delete Be.reloadCallback,Be.parse(Be.vectorTile,it.layerIndex,Ve.availableImages,it.actor,dt)),Ke(ot,Ze)};Be.status==="parsing"?Be.reloadCallback=je:Be.status==="done"&&(Be.vectorTile?Be.parse(Be.vectorTile,this.layerIndex,this.availableImages,this.actor,je):je())}},i.prototype.abortTile=function(Ye,Ke){var Ve=this.loading,$e=Ye.uid;Ve&&Ve[$e]&&Ve[$e].abort&&(Ve[$e].abort(),delete Ve[$e]),Ke()},i.prototype.removeTile=function(Ye,Ke){var Ve=this.loaded,$e=Ye.uid;Ve&&Ve[$e]&&delete Ve[$e],Ke()};var a=n.window.ImageBitmap,u=function(){this.loaded={}};u.prototype.loadTile=function(Ye,Ke){var Ve=Ye.uid,$e=Ye.encoding,lt=Ye.rawImageData,it=a&&lt instanceof a?this.getImageData(lt):lt,Be=new n.DEMData(Ve,it,$e);this.loaded=this.loaded||{},this.loaded[Ve]=Be,Ke(null,Be)},u.prototype.getImageData=function(Ye){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Ye.width,Ye.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Ye.width,this.offscreenCanvas.height=Ye.height,this.offscreenCanvasContext.drawImage(Ye,0,0,Ye.width,Ye.height);var Ke=this.offscreenCanvasContext.getImageData(-1,-1,Ye.width+2,Ye.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new n.RGBAImage({width:Ke.width,height:Ke.height},Ke.data)},u.prototype.removeTile=function(Ye){var Ke=this.loaded,Ve=Ye.uid;Ke&&Ke[Ve]&&delete Ke[Ve]};var l=function Ye(Ke,Ve){var $e,lt=Ke&&Ke.type;if(lt==="FeatureCollection")for($e=0;$e<Ke.features.length;$e++)Ye(Ke.features[$e],Ve);else if(lt==="GeometryCollection")for($e=0;$e<Ke.geometries.length;$e++)Ye(Ke.geometries[$e],Ve);else if(lt==="Feature")Ye(Ke.geometry,Ve);else if(lt==="Polygon")d(Ke.coordinates,Ve);else if(lt==="MultiPolygon")for($e=0;$e<Ke.coordinates.length;$e++)d(Ke.coordinates[$e],Ve);return Ke};function d(Ye,Ke){if(Ye.length!==0){c(Ye[0],Ke);for(var Ve=1;Ve<Ye.length;Ve++)c(Ye[Ve],!Ke)}}function c(Ye,Ke){for(var Ve=0,$e=0,lt=Ye.length,it=lt-1;$e<lt;it=$e++)Ve+=(Ye[$e][0]-Ye[it][0])*(Ye[it][1]+Ye[$e][1]);Ve>=0!=!!Ke&&Ye.reverse()}var _=n.vectorTile.VectorTileFeature.prototype.toGeoJSON,p=function(Ye){this._feature=Ye,this.extent=n.EXTENT,this.type=Ye.type,this.properties=Ye.tags,"id"in Ye&&!isNaN(Ye.id)&&(this.id=parseInt(Ye.id,10))};p.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Ye=[],Ke=0,Ve=this._feature.geometry;Ke<Ve.length;Ke+=1){var $e=Ve[Ke];Ye.push([new n.Point$1($e[0],$e[1])])}return Ye}for(var lt=[],it=0,Be=this._feature.geometry;it<Be.length;it+=1){for(var je=[],ot=0,Ze=Be[it];ot<Ze.length;ot+=1){var dt=Ze[ot];je.push(new n.Point$1(dt[0],dt[1]))}lt.push(je)}return lt},p.prototype.toGeoJSON=function(Ye,Ke,Ve){return _.call(this,Ye,Ke,Ve)};var g=function(Ye){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=n.EXTENT,this.length=Ye.length,this._features=Ye};g.prototype.feature=function(Ye){return new p(this._features[Ye])};var m=n.vectorTile.VectorTileFeature,b=y;function y(Ye,Ke){this.options=Ke||{},this.features=Ye,this.length=Ye.length}function M(Ye,Ke){this.id=typeof Ye.id=="number"?Ye.id:void 0,this.type=Ye.type,this.rawGeometry=Ye.type===1?[Ye.geometry]:Ye.geometry,this.properties=Ye.tags,this.extent=Ke||4096}y.prototype.feature=function(Ye){return new M(this.features[Ye],this.options.extent)},M.prototype.loadGeometry=function(){var Ye=this.rawGeometry;this.geometry=[];for(var Ke=0;Ke<Ye.length;Ke++){for(var Ve=Ye[Ke],$e=[],lt=0;lt<Ve.length;lt++)$e.push(new n.Point$1(Ve[lt][0],Ve[lt][1]));this.geometry.push($e)}return this.geometry},M.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ye=this.geometry,Ke=1/0,Ve=-1/0,$e=1/0,lt=-1/0,it=0;it<Ye.length;it++)for(var Be=Ye[it],je=0;je<Be.length;je++){var ot=Be[je];Ke=Math.min(Ke,ot.x),Ve=Math.max(Ve,ot.x),$e=Math.min($e,ot.y),lt=Math.max(lt,ot.y)}return[Ke,$e,Ve,lt]},M.prototype.toGeoJSON=m.prototype.toGeoJSON;var h=P,E=P,k=function(Ye,Ke){Ke=Ke||{};var Ve={};for(var $e in Ye)Ve[$e]=new b(Ye[$e].features,Ke),Ve[$e].name=$e,Ve[$e].version=Ke.version,Ve[$e].extent=Ke.extent;return P({layers:Ve})},D=b;function P(Ye){var Ke=new n.pbf;return function(Ve,$e){for(var lt in Ve.layers)$e.writeMessage(3,L,Ve.layers[lt])}(Ye,Ke),Ke.finish()}function L(Ye,Ke){var Ve;Ke.writeVarintField(15,Ye.version||1),Ke.writeStringField(1,Ye.name||""),Ke.writeVarintField(5,Ye.extent||4096);var $e={keys:[],values:[],keycache:{},valuecache:{}};for(Ve=0;Ve<Ye.length;Ve++)$e.feature=Ye.feature(Ve),Ke.writeMessage(2,O,$e);var lt=$e.keys;for(Ve=0;Ve<lt.length;Ve++)Ke.writeStringField(3,lt[Ve]);var it=$e.values;for(Ve=0;Ve<it.length;Ve++)Ke.writeMessage(4,Z,it[Ve])}function O(Ye,Ke){var Ve=Ye.feature;Ve.id!==void 0&&Ke.writeVarintField(1,Ve.id),Ke.writeMessage(2,N,Ye),Ke.writeVarintField(3,Ve.type),Ke.writeMessage(4,j,Ve)}function N(Ye,Ke){var Ve=Ye.feature,$e=Ye.keys,lt=Ye.values,it=Ye.keycache,Be=Ye.valuecache;for(var je in Ve.properties){var ot=it[je];ot===void 0&&($e.push(je),ot=$e.length-1,it[je]=ot),Ke.writeVarint(ot);var Ze=Ve.properties[je],dt=typeof Ze;dt!=="string"&&dt!=="boolean"&&dt!=="number"&&(Ze=JSON.stringify(Ze));var mt=dt+":"+Ze,yt=Be[mt];yt===void 0&&(lt.push(Ze),yt=lt.length-1,Be[mt]=yt),Ke.writeVarint(yt)}}function V(Ye,Ke){return(Ke<<3)+(7&Ye)}function F(Ye){return Ye<<1^Ye>>31}function j(Ye,Ke){for(var Ve=Ye.loadGeometry(),$e=Ye.type,lt=0,it=0,Be=Ve.length,je=0;je<Be;je++){var ot=Ve[je],Ze=1;$e===1&&(Ze=ot.length),Ke.writeVarint(V(1,Ze));for(var dt=$e===3?ot.length-1:ot.length,mt=0;mt<dt;mt++){mt===1&&$e!==1&&Ke.writeVarint(V(2,dt-1));var yt=ot[mt].x-lt,ht=ot[mt].y-it;Ke.writeVarint(F(yt)),Ke.writeVarint(F(ht)),lt+=yt,it+=ht}$e===3&&Ke.writeVarint(V(7,1))}}function Z(Ye,Ke){var Ve=typeof Ye;Ve==="string"?Ke.writeStringField(1,Ye):Ve==="boolean"?Ke.writeBooleanField(7,Ye):Ve==="number"&&(Ye%1!=0?Ke.writeDoubleField(3,Ye):Ye<0?Ke.writeSVarintField(6,Ye):Ke.writeVarintField(5,Ye))}function z(Ye,Ke,Ve,$e,lt,it){if(!(lt-$e<=Ve)){var Be=$e+lt>>1;H(Ye,Ke,Be,$e,lt,it%2),z(Ye,Ke,Ve,$e,Be-1,it+1),z(Ye,Ke,Ve,Be+1,lt,it+1)}}function H(Ye,Ke,Ve,$e,lt,it){for(;lt>$e;){if(lt-$e>600){var Be=lt-$e+1,je=Ve-$e+1,ot=Math.log(Be),Ze=.5*Math.exp(2*ot/3),dt=.5*Math.sqrt(ot*Ze*(Be-Ze)/Be)*(je-Be/2<0?-1:1);H(Ye,Ke,Ve,Math.max($e,Math.floor(Ve-je*Ze/Be+dt)),Math.min(lt,Math.floor(Ve+(Be-je)*Ze/Be+dt)),it)}var mt=Ke[2*Ve+it],yt=$e,ht=lt;for(U(Ye,Ke,$e,Ve),Ke[2*lt+it]>mt&&U(Ye,Ke,$e,lt);yt<ht;){for(U(Ye,Ke,yt,ht),yt++,ht--;Ke[2*yt+it]<mt;)yt++;for(;Ke[2*ht+it]>mt;)ht--}Ke[2*$e+it]===mt?U(Ye,Ke,$e,ht):U(Ye,Ke,++ht,lt),ht<=Ve&&($e=ht+1),Ve<=ht&&(lt=ht-1)}}function U(Ye,Ke,Ve,$e){re(Ye,Ve,$e),re(Ke,2*Ve,2*$e),re(Ke,2*Ve+1,2*$e+1)}function re(Ye,Ke,Ve){var $e=Ye[Ke];Ye[Ke]=Ye[Ve],Ye[Ve]=$e}function ee(Ye,Ke,Ve,$e){var lt=Ye-Ve,it=Ke-$e;return lt*lt+it*it}h.fromVectorTileJs=E,h.fromGeojsonVt=k,h.GeoJSONWrapper=D;var J=function(Ye){return Ye[0]},Q=function(Ye){return Ye[1]},ne=function(Ye,Ke,Ve,$e,lt){Ke===void 0&&(Ke=J),Ve===void 0&&(Ve=Q),$e===void 0&&($e=64),lt===void 0&&(lt=Float64Array),this.nodeSize=$e,this.points=Ye;for(var it=Ye.length<65536?Uint16Array:Uint32Array,Be=this.ids=new it(Ye.length),je=this.coords=new lt(2*Ye.length),ot=0;ot<Ye.length;ot++)Be[ot]=ot,je[2*ot]=Ke(Ye[ot]),je[2*ot+1]=Ve(Ye[ot]);z(Be,je,$e,0,Be.length-1,0)};ne.prototype.range=function(Ye,Ke,Ve,$e){return function(lt,it,Be,je,ot,Ze,dt){for(var mt,yt,ht=[0,lt.length-1,0],kt=[];ht.length;){var _t=ht.pop(),Et=ht.pop(),Lt=ht.pop();if(Et-Lt<=dt)for(var Ot=Lt;Ot<=Et;Ot++)mt=it[2*Ot],yt=it[2*Ot+1],mt>=Be&&mt<=ot&&yt>=je&&yt<=Ze&&kt.push(lt[Ot]);else{var Ft=Math.floor((Lt+Et)/2);mt=it[2*Ft],yt=it[2*Ft+1],mt>=Be&&mt<=ot&&yt>=je&&yt<=Ze&&kt.push(lt[Ft]);var Zt=(_t+1)%2;(_t===0?Be<=mt:je<=yt)&&(ht.push(Lt),ht.push(Ft-1),ht.push(Zt)),(_t===0?ot>=mt:Ze>=yt)&&(ht.push(Ft+1),ht.push(Et),ht.push(Zt))}}return kt}(this.ids,this.coords,Ye,Ke,Ve,$e,this.nodeSize)},ne.prototype.within=function(Ye,Ke,Ve){return function($e,lt,it,Be,je,ot){for(var Ze=[0,$e.length-1,0],dt=[],mt=je*je;Ze.length;){var yt=Ze.pop(),ht=Ze.pop(),kt=Ze.pop();if(ht-kt<=ot)for(var _t=kt;_t<=ht;_t++)ee(lt[2*_t],lt[2*_t+1],it,Be)<=mt&&dt.push($e[_t]);else{var Et=Math.floor((kt+ht)/2),Lt=lt[2*Et],Ot=lt[2*Et+1];ee(Lt,Ot,it,Be)<=mt&&dt.push($e[Et]);var Ft=(yt+1)%2;(yt===0?it-je<=Lt:Be-je<=Ot)&&(Ze.push(kt),Ze.push(Et-1),Ze.push(Ft)),(yt===0?it+je>=Lt:Be+je>=Ot)&&(Ze.push(Et+1),Ze.push(ht),Ze.push(Ft))}}return dt}(this.ids,this.coords,Ye,Ke,Ve,this.nodeSize)};var K={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Ye){return Ye}},oe=function(Ye){this.options=ve(Object.create(K),Ye),this.trees=new Array(this.options.maxZoom+1)};function le(Ye,Ke,Ve,$e,lt){return{x:Ye,y:Ke,zoom:1/0,id:Ve,parentId:-1,numPoints:$e,properties:lt}}function se(Ye,Ke){var Ve=Ye.geometry.coordinates,$e=Ve[0],lt=Ve[1];return{x:_e($e),y:xe(lt),zoom:1/0,index:Ke,parentId:-1}}function de(Ye){return{type:"Feature",id:Ye.id,properties:be(Ye),geometry:{type:"Point",coordinates:[($e=Ye.x,360*($e-.5)),(Ke=Ye.y,Ve=(180-360*Ke)*Math.PI/180,360*Math.atan(Math.exp(Ve))/Math.PI-90)]}};var Ke,Ve,$e}function be(Ye){var Ke=Ye.numPoints,Ve=Ke>=1e4?Math.round(Ke/1e3)+"k":Ke>=1e3?Math.round(Ke/100)/10+"k":Ke;return ve(ve({},Ye.properties),{cluster:!0,cluster_id:Ye.id,point_count:Ke,point_count_abbreviated:Ve})}function _e(Ye){return Ye/360+.5}function xe(Ye){var Ke=Math.sin(Ye*Math.PI/180),Ve=.5-.25*Math.log((1+Ke)/(1-Ke))/Math.PI;return Ve<0?0:Ve>1?1:Ve}function ve(Ye,Ke){for(var Ve in Ke)Ye[Ve]=Ke[Ve];return Ye}function ye(Ye){return Ye.x}function me(Ye){return Ye.y}function Me(Ye,Ke,Ve,$e){for(var lt,it=$e,Be=Ve-Ke>>1,je=Ve-Ke,ot=Ye[Ke],Ze=Ye[Ke+1],dt=Ye[Ve],mt=Ye[Ve+1],yt=Ke+3;yt<Ve;yt+=3){var ht=Ae(Ye[yt],Ye[yt+1],ot,Ze,dt,mt);if(ht>it)lt=yt,it=ht;else if(ht===it){var kt=Math.abs(yt-Be);kt<je&&(lt=yt,je=kt)}}it>$e&&(lt-Ke>3&&Me(Ye,Ke,lt,$e),Ye[lt+2]=it,Ve-lt>3&&Me(Ye,lt,Ve,$e))}function Ae(Ye,Ke,Ve,$e,lt,it){var Be=lt-Ve,je=it-$e;if(Be!==0||je!==0){var ot=((Ye-Ve)*Be+(Ke-$e)*je)/(Be*Be+je*je);ot>1?(Ve=lt,$e=it):ot>0&&(Ve+=Be*ot,$e+=je*ot)}return(Be=Ye-Ve)*Be+(je=Ke-$e)*je}function ce(Ye,Ke,Ve,$e){var lt={id:Ye===void 0?null:Ye,type:Ke,geometry:Ve,tags:$e,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(it){var Be=it.geometry,je=it.type;if(je==="Point"||je==="MultiPoint"||je==="LineString")ae(it,Be);else if(je==="Polygon"||je==="MultiLineString")for(var ot=0;ot<Be.length;ot++)ae(it,Be[ot]);else if(je==="MultiPolygon")for(ot=0;ot<Be.length;ot++)for(var Ze=0;Ze<Be[ot].length;Ze++)ae(it,Be[ot][Ze])}(lt),lt}function ae(Ye,Ke){for(var Ve=0;Ve<Ke.length;Ve+=3)Ye.minX=Math.min(Ye.minX,Ke[Ve]),Ye.minY=Math.min(Ye.minY,Ke[Ve+1]),Ye.maxX=Math.max(Ye.maxX,Ke[Ve]),Ye.maxY=Math.max(Ye.maxY,Ke[Ve+1])}function pe(Ye,Ke,Ve,$e){if(Ke.geometry){var lt=Ke.geometry.coordinates,it=Ke.geometry.type,Be=Math.pow(Ve.tolerance/((1<<Ve.maxZoom)*Ve.extent),2),je=[],ot=Ke.id;if(Ve.promoteId?ot=Ke.properties[Ve.promoteId]:Ve.generateId&&(ot=$e||0),it==="Point")De(lt,je);else if(it==="MultiPoint")for(var Ze=0;Ze<lt.length;Ze++)De(lt[Ze],je);else if(it==="LineString")ke(lt,je,Be,!1);else if(it==="MultiLineString"){if(Ve.lineMetrics){for(Ze=0;Ze<lt.length;Ze++)je=[],ke(lt[Ze],je,Be,!1),Ye.push(ce(ot,"LineString",je,Ke.properties));return}Ee(lt,je,Be,!1)}else if(it==="Polygon")Ee(lt,je,Be,!0);else{if(it!=="MultiPolygon"){if(it==="GeometryCollection"){for(Ze=0;Ze<Ke.geometry.geometries.length;Ze++)pe(Ye,{id:ot,geometry:Ke.geometry.geometries[Ze],properties:Ke.properties},Ve,$e);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ze=0;Ze<lt.length;Ze++){var dt=[];Ee(lt[Ze],dt,Be,!0),je.push(dt)}}Ye.push(ce(ot,it,je,Ke.properties))}}function De(Ye,Ke){Ke.push(Ie(Ye[0])),Ke.push(Re(Ye[1])),Ke.push(0)}function ke(Ye,Ke,Ve,$e){for(var lt,it,Be=0,je=0;je<Ye.length;je++){var ot=Ie(Ye[je][0]),Ze=Re(Ye[je][1]);Ke.push(ot),Ke.push(Ze),Ke.push(0),je>0&&(Be+=$e?(lt*Ze-ot*it)/2:Math.sqrt(Math.pow(ot-lt,2)+Math.pow(Ze-it,2))),lt=ot,it=Ze}var dt=Ke.length-3;Ke[2]=1,Me(Ke,0,dt,Ve),Ke[dt+2]=1,Ke.size=Math.abs(Be),Ke.start=0,Ke.end=Ke.size}function Ee(Ye,Ke,Ve,$e){for(var lt=0;lt<Ye.length;lt++){var it=[];ke(Ye[lt],it,Ve,$e),Ke.push(it)}}function Ie(Ye){return Ye/360+.5}function Re(Ye){var Ke=Math.sin(Ye*Math.PI/180),Ve=.5-.25*Math.log((1+Ke)/(1-Ke))/Math.PI;return Ve<0?0:Ve>1?1:Ve}function Ne(Ye,Ke,Ve,$e,lt,it,Be,je){if($e/=Ke,it>=(Ve/=Ke)&&Be<$e)return Ye;if(Be<Ve||it>=$e)return null;for(var ot=[],Ze=0;Ze<Ye.length;Ze++){var dt=Ye[Ze],mt=dt.geometry,yt=dt.type,ht=lt===0?dt.minX:dt.minY,kt=lt===0?dt.maxX:dt.maxY;if(ht>=Ve&&kt<$e)ot.push(dt);else if(!(kt<Ve||ht>=$e)){var _t=[];if(yt==="Point"||yt==="MultiPoint")ge(mt,_t,Ve,$e,lt);else if(yt==="LineString")we(mt,_t,Ve,$e,lt,!1,je.lineMetrics);else if(yt==="MultiLineString")ze(mt,_t,Ve,$e,lt,!1);else if(yt==="Polygon")ze(mt,_t,Ve,$e,lt,!0);else if(yt==="MultiPolygon")for(var Et=0;Et<mt.length;Et++){var Lt=[];ze(mt[Et],Lt,Ve,$e,lt,!0),Lt.length&&_t.push(Lt)}if(_t.length){if(je.lineMetrics&&yt==="LineString"){for(Et=0;Et<_t.length;Et++)ot.push(ce(dt.id,yt,_t[Et],dt.tags));continue}yt!=="LineString"&&yt!=="MultiLineString"||(_t.length===1?(yt="LineString",_t=_t[0]):yt="MultiLineString"),yt!=="Point"&&yt!=="MultiPoint"||(yt=_t.length===3?"Point":"MultiPoint"),ot.push(ce(dt.id,yt,_t,dt.tags))}}}return ot.length?ot:null}function ge(Ye,Ke,Ve,$e,lt){for(var it=0;it<Ye.length;it+=3){var Be=Ye[it+lt];Be>=Ve&&Be<=$e&&(Ke.push(Ye[it]),Ke.push(Ye[it+1]),Ke.push(Ye[it+2]))}}function we(Ye,Ke,Ve,$e,lt,it,Be){for(var je,ot,Ze=Ce(Ye),dt=lt===0?Ue:Ge,mt=Ye.start,yt=0;yt<Ye.length-3;yt+=3){var ht=Ye[yt],kt=Ye[yt+1],_t=Ye[yt+2],Et=Ye[yt+3],Lt=Ye[yt+4],Ot=lt===0?ht:kt,Ft=lt===0?Et:Lt,Zt=!1;Be&&(je=Math.sqrt(Math.pow(ht-Et,2)+Math.pow(kt-Lt,2))),Ot<Ve?Ft>Ve&&(ot=dt(Ze,ht,kt,Et,Lt,Ve),Be&&(Ze.start=mt+je*ot)):Ot>$e?Ft<$e&&(ot=dt(Ze,ht,kt,Et,Lt,$e),Be&&(Ze.start=mt+je*ot)):Pe(Ze,ht,kt,_t),Ft<Ve&&Ot>=Ve&&(ot=dt(Ze,ht,kt,Et,Lt,Ve),Zt=!0),Ft>$e&&Ot<=$e&&(ot=dt(Ze,ht,kt,Et,Lt,$e),Zt=!0),!it&&Zt&&(Be&&(Ze.end=mt+je*ot),Ke.push(Ze),Ze=Ce(Ye)),Be&&(mt+=je)}var Ht=Ye.length-3;ht=Ye[Ht],kt=Ye[Ht+1],_t=Ye[Ht+2],(Ot=lt===0?ht:kt)>=Ve&&Ot<=$e&&Pe(Ze,ht,kt,_t),Ht=Ze.length-3,it&&Ht>=3&&(Ze[Ht]!==Ze[0]||Ze[Ht+1]!==Ze[1])&&Pe(Ze,Ze[0],Ze[1],Ze[2]),Ze.length&&Ke.push(Ze)}function Ce(Ye){var Ke=[];return Ke.size=Ye.size,Ke.start=Ye.start,Ke.end=Ye.end,Ke}function ze(Ye,Ke,Ve,$e,lt,it){for(var Be=0;Be<Ye.length;Be++)we(Ye[Be],Ke,Ve,$e,lt,it,!1)}function Pe(Ye,Ke,Ve,$e){Ye.push(Ke),Ye.push(Ve),Ye.push($e)}function Ue(Ye,Ke,Ve,$e,lt,it){var Be=(it-Ke)/($e-Ke);return Ye.push(it),Ye.push(Ve+(lt-Ve)*Be),Ye.push(1),Be}function Ge(Ye,Ke,Ve,$e,lt,it){var Be=(it-Ve)/(lt-Ve);return Ye.push(Ke+($e-Ke)*Be),Ye.push(it),Ye.push(1),Be}function Xe(Ye,Ke){for(var Ve=[],$e=0;$e<Ye.length;$e++){var lt,it=Ye[$e],Be=it.type;if(Be==="Point"||Be==="MultiPoint"||Be==="LineString")lt=st(it.geometry,Ke);else if(Be==="MultiLineString"||Be==="Polygon"){lt=[];for(var je=0;je<it.geometry.length;je++)lt.push(st(it.geometry[je],Ke))}else if(Be==="MultiPolygon")for(lt=[],je=0;je<it.geometry.length;je++){for(var ot=[],Ze=0;Ze<it.geometry[je].length;Ze++)ot.push(st(it.geometry[je][Ze],Ke));lt.push(ot)}Ve.push(ce(it.id,Be,lt,it.tags))}return Ve}function st(Ye,Ke){var Ve=[];Ve.size=Ye.size,Ye.start!==void 0&&(Ve.start=Ye.start,Ve.end=Ye.end);for(var $e=0;$e<Ye.length;$e+=3)Ve.push(Ye[$e]+Ke,Ye[$e+1],Ye[$e+2]);return Ve}function at(Ye,Ke){if(Ye.transformed)return Ye;var Ve,$e,lt,it=1<<Ye.z,Be=Ye.x,je=Ye.y;for(Ve=0;Ve<Ye.features.length;Ve++){var ot=Ye.features[Ve],Ze=ot.geometry,dt=ot.type;if(ot.geometry=[],dt===1)for($e=0;$e<Ze.length;$e+=2)ot.geometry.push(vt(Ze[$e],Ze[$e+1],Ke,it,Be,je));else for($e=0;$e<Ze.length;$e++){var mt=[];for(lt=0;lt<Ze[$e].length;lt+=2)mt.push(vt(Ze[$e][lt],Ze[$e][lt+1],Ke,it,Be,je));ot.geometry.push(mt)}}return Ye.transformed=!0,Ye}function vt(Ye,Ke,Ve,$e,lt,it){return[Math.round(Ve*(Ye*$e-lt)),Math.round(Ve*(Ke*$e-it))]}function xt(Ye,Ke,Ve,$e,lt){for(var it=Ke===lt.maxZoom?0:lt.tolerance/((1<<Ke)*lt.extent),Be={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Ve,y:$e,z:Ke,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},je=0;je<Ye.length;je++){Be.numFeatures++,gt(Be,Ye[je],it,lt);var ot=Ye[je].minX,Ze=Ye[je].minY,dt=Ye[je].maxX,mt=Ye[je].maxY;ot<Be.minX&&(Be.minX=ot),Ze<Be.minY&&(Be.minY=Ze),dt>Be.maxX&&(Be.maxX=dt),mt>Be.maxY&&(Be.maxY=mt)}return Be}function gt(Ye,Ke,Ve,$e){var lt=Ke.geometry,it=Ke.type,Be=[];if(it==="Point"||it==="MultiPoint")for(var je=0;je<lt.length;je+=3)Be.push(lt[je]),Be.push(lt[je+1]),Ye.numPoints++,Ye.numSimplified++;else if(it==="LineString")rt(Be,lt,Ye,Ve,!1,!1);else if(it==="MultiLineString"||it==="Polygon")for(je=0;je<lt.length;je++)rt(Be,lt[je],Ye,Ve,it==="Polygon",je===0);else if(it==="MultiPolygon")for(var ot=0;ot<lt.length;ot++){var Ze=lt[ot];for(je=0;je<Ze.length;je++)rt(Be,Ze[je],Ye,Ve,!0,je===0)}if(Be.length){var dt=Ke.tags||null;if(it==="LineString"&&$e.lineMetrics){for(var mt in dt={},Ke.tags)dt[mt]=Ke.tags[mt];dt.mapbox_clip_start=lt.start/lt.size,dt.mapbox_clip_end=lt.end/lt.size}var yt={geometry:Be,type:it==="Polygon"||it==="MultiPolygon"?3:it==="LineString"||it==="MultiLineString"?2:1,tags:dt};Ke.id!==null&&(yt.id=Ke.id),Ye.features.push(yt)}}function rt(Ye,Ke,Ve,$e,lt,it){var Be=$e*$e;if($e>0&&Ke.size<(lt?Be:$e))Ve.numPoints+=Ke.length/3;else{for(var je=[],ot=0;ot<Ke.length;ot+=3)($e===0||Ke[ot+2]>Be)&&(Ve.numSimplified++,je.push(Ke[ot]),je.push(Ke[ot+1])),Ve.numPoints++;lt&&function(Ze,dt){for(var mt=0,yt=0,ht=Ze.length,kt=ht-2;yt<ht;kt=yt,yt+=2)mt+=(Ze[yt]-Ze[kt])*(Ze[yt+1]+Ze[kt+1]);if(mt>0===dt)for(yt=0,ht=Ze.length;yt<ht/2;yt+=2){var _t=Ze[yt],Et=Ze[yt+1];Ze[yt]=Ze[ht-2-yt],Ze[yt+1]=Ze[ht-1-yt],Ze[ht-2-yt]=_t,Ze[ht-1-yt]=Et}}(je,it),Ye.push(je)}}function tt(Ye,Ke){var Ve=(Ke=this.options=function(lt,it){for(var Be in it)lt[Be]=it[Be];return lt}(Object.create(this.options),Ke)).debug;if(Ve&&console.time("preprocess data"),Ke.maxZoom<0||Ke.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ke.promoteId&&Ke.generateId)throw new Error("promoteId and generateId cannot be used together.");var $e=function(lt,it){var Be=[];if(lt.type==="FeatureCollection")for(var je=0;je<lt.features.length;je++)pe(Be,lt.features[je],it,je);else lt.type==="Feature"?pe(Be,lt,it):pe(Be,{geometry:lt},it);return Be}(Ye,Ke);this.tiles={},this.tileCoords=[],Ve&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ke.indexMaxZoom,Ke.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),($e=function(lt,it){var Be=it.buffer/it.extent,je=lt,ot=Ne(lt,1,-1-Be,Be,0,-1,2,it),Ze=Ne(lt,1,1-Be,2+Be,0,-1,2,it);return(ot||Ze)&&(je=Ne(lt,1,-Be,1+Be,0,-1,2,it)||[],ot&&(je=Xe(ot,1).concat(je)),Ze&&(je=je.concat(Xe(Ze,-1)))),je}($e,Ke)).length&&this.splitTile($e,0,0,0),Ve&&($e.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Mt(Ye,Ke,Ve){return 32*((1<<Ye)*Ve+Ke)+Ye}function Pt(Ye,Ke){var Ve=Ye.tileID.canonical;if(!this._geoJSONIndex)return Ke(null,null);var $e=this._geoJSONIndex.getTile(Ve.z,Ve.x,Ve.y);if(!$e)return Ke(null,null);var lt=new g($e.features),it=h(lt);it.byteOffset===0&&it.byteLength===it.buffer.byteLength||(it=new Uint8Array(it)),Ke(null,{vectorTile:lt,rawData:it.buffer})}oe.prototype.load=function(Ye){var Ke=this.options,Ve=Ke.log,$e=Ke.minZoom,lt=Ke.maxZoom,it=Ke.nodeSize;Ve&&console.time("total time");var Be="prepare "+Ye.length+" points";Ve&&console.time(Be),this.points=Ye;for(var je=[],ot=0;ot<Ye.length;ot++)Ye[ot].geometry&&je.push(se(Ye[ot],ot));this.trees[lt+1]=new ne(je,ye,me,it,Float32Array),Ve&&console.timeEnd(Be);for(var Ze=lt;Ze>=$e;Ze--){var dt=+Date.now();je=this._cluster(je,Ze),this.trees[Ze]=new ne(je,ye,me,it,Float32Array),Ve&&console.log("z%d: %d clusters in %dms",Ze,je.length,+Date.now()-dt)}return Ve&&console.timeEnd("total time"),this},oe.prototype.getClusters=function(Ye,Ke){var Ve=((Ye[0]+180)%360+360)%360-180,$e=Math.max(-90,Math.min(90,Ye[1])),lt=Ye[2]===180?180:((Ye[2]+180)%360+360)%360-180,it=Math.max(-90,Math.min(90,Ye[3]));if(Ye[2]-Ye[0]>=360)Ve=-180,lt=180;else if(Ve>lt){var Be=this.getClusters([Ve,$e,180,it],Ke),je=this.getClusters([-180,$e,lt,it],Ke);return Be.concat(je)}for(var ot=this.trees[this._limitZoom(Ke)],Ze=[],dt=0,mt=ot.range(_e(Ve),xe(it),_e(lt),xe($e));dt<mt.length;dt+=1){var yt=mt[dt],ht=ot.points[yt];Ze.push(ht.numPoints?de(ht):this.points[ht.index])}return Ze},oe.prototype.getChildren=function(Ye){var Ke=this._getOriginId(Ye),Ve=this._getOriginZoom(Ye),$e="No cluster with the specified id.",lt=this.trees[Ve];if(!lt)throw new Error($e);var it=lt.points[Ke];if(!it)throw new Error($e);for(var Be=this.options.radius/(this.options.extent*Math.pow(2,Ve-1)),je=[],ot=0,Ze=lt.within(it.x,it.y,Be);ot<Ze.length;ot+=1){var dt=Ze[ot],mt=lt.points[dt];mt.parentId===Ye&&je.push(mt.numPoints?de(mt):this.points[mt.index])}if(je.length===0)throw new Error($e);return je},oe.prototype.getLeaves=function(Ye,Ke,Ve){Ke=Ke||10,Ve=Ve||0;var $e=[];return this._appendLeaves($e,Ye,Ke,Ve,0),$e},oe.prototype.getTile=function(Ye,Ke,Ve){var $e=this.trees[this._limitZoom(Ye)],lt=Math.pow(2,Ye),it=this.options,Be=it.extent,je=it.radius/Be,ot=(Ve-je)/lt,Ze=(Ve+1+je)/lt,dt={features:[]};return this._addTileFeatures($e.range((Ke-je)/lt,ot,(Ke+1+je)/lt,Ze),$e.points,Ke,Ve,lt,dt),Ke===0&&this._addTileFeatures($e.range(1-je/lt,ot,1,Ze),$e.points,lt,Ve,lt,dt),Ke===lt-1&&this._addTileFeatures($e.range(0,ot,je/lt,Ze),$e.points,-1,Ve,lt,dt),dt.features.length?dt:null},oe.prototype.getClusterExpansionZoom=function(Ye){for(var Ke=this._getOriginZoom(Ye)-1;Ke<=this.options.maxZoom;){var Ve=this.getChildren(Ye);if(Ke++,Ve.length!==1)break;Ye=Ve[0].properties.cluster_id}return Ke},oe.prototype._appendLeaves=function(Ye,Ke,Ve,$e,lt){for(var it=0,Be=this.getChildren(Ke);it<Be.length;it+=1){var je=Be[it],ot=je.properties;if(ot&&ot.cluster?lt+ot.point_count<=$e?lt+=ot.point_count:lt=this._appendLeaves(Ye,ot.cluster_id,Ve,$e,lt):lt<$e?lt++:Ye.push(je),Ye.length===Ve)break}return lt},oe.prototype._addTileFeatures=function(Ye,Ke,Ve,$e,lt,it){for(var Be=0,je=Ye;Be<je.length;Be+=1){var ot=Ke[je[Be]],Ze=ot.numPoints,dt={type:1,geometry:[[Math.round(this.options.extent*(ot.x*lt-Ve)),Math.round(this.options.extent*(ot.y*lt-$e))]],tags:Ze?be(ot):this.points[ot.index].properties},mt=void 0;Ze?mt=ot.id:this.options.generateId?mt=ot.index:this.points[ot.index].id&&(mt=this.points[ot.index].id),mt!==void 0&&(dt.id=mt),it.features.push(dt)}},oe.prototype._limitZoom=function(Ye){return Math.max(this.options.minZoom,Math.min(+Ye,this.options.maxZoom+1))},oe.prototype._cluster=function(Ye,Ke){for(var Ve=[],$e=this.options,lt=$e.radius,it=$e.extent,Be=$e.reduce,je=$e.minPoints,ot=lt/(it*Math.pow(2,Ke)),Ze=0;Ze<Ye.length;Ze++){var dt=Ye[Ze];if(!(dt.zoom<=Ke)){dt.zoom=Ke;for(var mt=this.trees[Ke+1],yt=mt.within(dt.x,dt.y,ot),ht=dt.numPoints||1,kt=ht,_t=0,Et=yt;_t<Et.length;_t+=1){var Lt=Et[_t],Ot=mt.points[Lt];Ot.zoom>Ke&&(kt+=Ot.numPoints||1)}if(kt>=je){for(var Ft=dt.x*ht,Zt=dt.y*ht,Ht=Be&&ht>1?this._map(dt,!0):null,Ut=(Ze<<5)+(Ke+1)+this.points.length,Wt=0,nn=yt;Wt<nn.length;Wt+=1){var On=nn[Wt],kn=mt.points[On];if(!(kn.zoom<=Ke)){kn.zoom=Ke;var gn=kn.numPoints||1;Ft+=kn.x*gn,Zt+=kn.y*gn,kn.parentId=Ut,Be&&(Ht||(Ht=this._map(dt,!0)),Be(Ht,this._map(kn)))}}dt.parentId=Ut,Ve.push(le(Ft/kt,Zt/kt,Ut,kt,Ht))}else if(Ve.push(dt),kt>1)for(var Jt=0,un=yt;Jt<un.length;Jt+=1){var tn=un[Jt],hn=mt.points[tn];hn.zoom<=Ke||(hn.zoom=Ke,Ve.push(hn))}}}return Ve},oe.prototype._getOriginId=function(Ye){return Ye-this.points.length>>5},oe.prototype._getOriginZoom=function(Ye){return(Ye-this.points.length)%32},oe.prototype._map=function(Ye,Ke){if(Ye.numPoints)return Ke?ve({},Ye.properties):Ye.properties;var Ve=this.points[Ye.index].properties,$e=this.options.map(Ve);return Ke&&$e===Ve?ve({},$e):$e},tt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},tt.prototype.splitTile=function(Ye,Ke,Ve,$e,lt,it,Be){for(var je=[Ye,Ke,Ve,$e],ot=this.options,Ze=ot.debug;je.length;){$e=je.pop(),Ve=je.pop(),Ke=je.pop(),Ye=je.pop();var dt=1<<Ke,mt=Mt(Ke,Ve,$e),yt=this.tiles[mt];if(!yt&&(Ze>1&&console.time("creation"),yt=this.tiles[mt]=xt(Ye,Ke,Ve,$e,ot),this.tileCoords.push({z:Ke,x:Ve,y:$e}),Ze)){Ze>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ke,Ve,$e,yt.numFeatures,yt.numPoints,yt.numSimplified),console.timeEnd("creation"));var ht="z"+Ke;this.stats[ht]=(this.stats[ht]||0)+1,this.total++}if(yt.source=Ye,lt){if(Ke===ot.maxZoom||Ke===lt)continue;var kt=1<<lt-Ke;if(Ve!==Math.floor(it/kt)||$e!==Math.floor(Be/kt))continue}else if(Ke===ot.indexMaxZoom||yt.numPoints<=ot.indexMaxPoints)continue;if(yt.source=null,Ye.length!==0){Ze>1&&console.time("clipping");var _t,Et,Lt,Ot,Ft,Zt,Ht=.5*ot.buffer/ot.extent,Ut=.5-Ht,Wt=.5+Ht,nn=1+Ht;_t=Et=Lt=Ot=null,Ft=Ne(Ye,dt,Ve-Ht,Ve+Wt,0,yt.minX,yt.maxX,ot),Zt=Ne(Ye,dt,Ve+Ut,Ve+nn,0,yt.minX,yt.maxX,ot),Ye=null,Ft&&(_t=Ne(Ft,dt,$e-Ht,$e+Wt,1,yt.minY,yt.maxY,ot),Et=Ne(Ft,dt,$e+Ut,$e+nn,1,yt.minY,yt.maxY,ot),Ft=null),Zt&&(Lt=Ne(Zt,dt,$e-Ht,$e+Wt,1,yt.minY,yt.maxY,ot),Ot=Ne(Zt,dt,$e+Ut,$e+nn,1,yt.minY,yt.maxY,ot),Zt=null),Ze>1&&console.timeEnd("clipping"),je.push(_t||[],Ke+1,2*Ve,2*$e),je.push(Et||[],Ke+1,2*Ve,2*$e+1),je.push(Lt||[],Ke+1,2*Ve+1,2*$e),je.push(Ot||[],Ke+1,2*Ve+1,2*$e+1)}}},tt.prototype.getTile=function(Ye,Ke,Ve){var $e=this.options,lt=$e.extent,it=$e.debug;if(Ye<0||Ye>24)return null;var Be=1<<Ye,je=Mt(Ye,Ke=(Ke%Be+Be)%Be,Ve);if(this.tiles[je])return at(this.tiles[je],lt);it>1&&console.log("drilling down to z%d-%d-%d",Ye,Ke,Ve);for(var ot,Ze=Ye,dt=Ke,mt=Ve;!ot&&Ze>0;)Ze--,dt=Math.floor(dt/2),mt=Math.floor(mt/2),ot=this.tiles[Mt(Ze,dt,mt)];return ot&&ot.source?(it>1&&console.log("found parent tile z%d-%d-%d",Ze,dt,mt),it>1&&console.time("drilling down"),this.splitTile(ot.source,Ze,dt,mt,Ye,Ke,Ve),it>1&&console.timeEnd("drilling down"),this.tiles[je]?at(this.tiles[je],lt):null):null};var Rt=function(Ye){function Ke(Ve,$e,lt,it){Ye.call(this,Ve,$e,lt,Pt),it&&(this.loadGeoJSON=it)}return Ye&&(Ke.__proto__=Ye),Ke.prototype=Object.create(Ye&&Ye.prototype),Ke.prototype.constructor=Ke,Ke.prototype.loadData=function(Ve,$e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=$e,this._pendingLoadDataParams=Ve,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Ke.prototype._loadData=function(){var Ve=this;if(this._pendingCallback&&this._pendingLoadDataParams){var $e=this._pendingCallback,lt=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var it=!!(lt&&lt.request&&lt.request.collectResourceTiming)&&new n.RequestPerformance(lt.request);this.loadGeoJSON(lt,function(Be,je){if(Be||!je)return $e(Be);if(typeof je!="object")return $e(new Error("Input data given to '"+lt.source+"' is not a valid GeoJSON object."));l(je,!0);try{if(lt.filter){var ot=n.createExpression(lt.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ot.result==="error")throw new Error(ot.value.map(function(yt){return yt.key+": "+yt.message}).join(", "));var Ze=je.features.filter(function(yt){return ot.value.evaluate({zoom:0},yt)});je={type:"FeatureCollection",features:Ze}}Ve._geoJSONIndex=lt.cluster?new oe(function(yt){var ht=yt.superclusterOptions,kt=yt.clusterProperties;if(!kt||!ht)return ht;for(var _t={},Et={},Lt={accumulated:null,zoom:0},Ot={properties:null},Ft=Object.keys(kt),Zt=0,Ht=Ft;Zt<Ht.length;Zt+=1){var Ut=Ht[Zt],Wt=kt[Ut],nn=Wt[0],On=Wt[1],kn=n.createExpression(On),gn=n.createExpression(typeof nn=="string"?[nn,["accumulated"],["get",Ut]]:nn);_t[Ut]=kn.value,Et[Ut]=gn.value}return ht.map=function(Jt){Ot.properties=Jt;for(var un={},tn=0,hn=Ft;tn<hn.length;tn+=1){var bn=hn[tn];un[bn]=_t[bn].evaluate(Lt,Ot)}return un},ht.reduce=function(Jt,un){Ot.properties=un;for(var tn=0,hn=Ft;tn<hn.length;tn+=1){var bn=hn[tn];Lt.accumulated=Jt[bn],Jt[bn]=Et[bn].evaluate(Lt,Ot)}},ht}(lt)).load(je.features):function(yt,ht){return new tt(yt,ht)}(je,lt.geojsonVtOptions)}catch(yt){return $e(yt)}Ve.loaded={};var dt={};if(it){var mt=it.finish();mt&&(dt.resourceTiming={},dt.resourceTiming[lt.source]=JSON.parse(JSON.stringify(mt)))}$e(null,dt)})}},Ke.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Ke.prototype.reloadTile=function(Ve,$e){var lt=this.loaded,it=Ve.uid;return lt&&lt[it]?Ye.prototype.reloadTile.call(this,Ve,$e):this.loadTile(Ve,$e)},Ke.prototype.loadGeoJSON=function(Ve,$e){if(Ve.request)n.getJSON(Ve.request,$e);else{if(typeof Ve.data!="string")return $e(new Error("Input data given to '"+Ve.source+"' is not a valid GeoJSON object."));try{return $e(null,JSON.parse(Ve.data))}catch{return $e(new Error("Input data given to '"+Ve.source+"' is not a valid GeoJSON object."))}}},Ke.prototype.removeSource=function(Ve,$e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),$e()},Ke.prototype.getClusterExpansionZoom=function(Ve,$e){try{$e(null,this._geoJSONIndex.getClusterExpansionZoom(Ve.clusterId))}catch(lt){$e(lt)}},Ke.prototype.getClusterChildren=function(Ve,$e){try{$e(null,this._geoJSONIndex.getChildren(Ve.clusterId))}catch(lt){$e(lt)}},Ke.prototype.getClusterLeaves=function(Ve,$e){try{$e(null,this._geoJSONIndex.getLeaves(Ve.clusterId,Ve.limit,Ve.offset))}catch(lt){$e(lt)}},Ke}(i),St=function(Ye){var Ke=this;this.self=Ye,this.actor=new n.Actor(Ye,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:i,geojson:Rt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Ve,$e){if(Ke.workerSourceTypes[Ve])throw new Error('Worker source with name "'+Ve+'" already registered.');Ke.workerSourceTypes[Ve]=$e},this.self.registerRTLTextPlugin=function(Ve){if(n.plugin.isParsed())throw new Error("RTL text plugin already registered.");n.plugin.applyArabicShaping=Ve.applyArabicShaping,n.plugin.processBidirectionalText=Ve.processBidirectionalText,n.plugin.processStyledBidirectionalText=Ve.processStyledBidirectionalText}};return St.prototype.setReferrer=function(Ye,Ke){this.referrer=Ke},St.prototype.setImages=function(Ye,Ke,Ve){for(var $e in this.availableImages[Ye]=Ke,this.workerSources[Ye]){var lt=this.workerSources[Ye][$e];for(var it in lt)lt[it].availableImages=Ke}Ve()},St.prototype.setLayers=function(Ye,Ke,Ve){this.getLayerIndex(Ye).replace(Ke),Ve()},St.prototype.updateLayers=function(Ye,Ke,Ve){this.getLayerIndex(Ye).update(Ke.layers,Ke.removedIds),Ve()},St.prototype.loadTile=function(Ye,Ke,Ve){this.getWorkerSource(Ye,Ke.type,Ke.source).loadTile(Ke,Ve)},St.prototype.loadDEMTile=function(Ye,Ke,Ve){this.getDEMWorkerSource(Ye,Ke.source).loadTile(Ke,Ve)},St.prototype.reloadTile=function(Ye,Ke,Ve){this.getWorkerSource(Ye,Ke.type,Ke.source).reloadTile(Ke,Ve)},St.prototype.abortTile=function(Ye,Ke,Ve){this.getWorkerSource(Ye,Ke.type,Ke.source).abortTile(Ke,Ve)},St.prototype.removeTile=function(Ye,Ke,Ve){this.getWorkerSource(Ye,Ke.type,Ke.source).removeTile(Ke,Ve)},St.prototype.removeDEMTile=function(Ye,Ke){this.getDEMWorkerSource(Ye,Ke.source).removeTile(Ke)},St.prototype.removeSource=function(Ye,Ke,Ve){if(this.workerSources[Ye]&&this.workerSources[Ye][Ke.type]&&this.workerSources[Ye][Ke.type][Ke.source]){var $e=this.workerSources[Ye][Ke.type][Ke.source];delete this.workerSources[Ye][Ke.type][Ke.source],$e.removeSource!==void 0?$e.removeSource(Ke,Ve):Ve()}},St.prototype.loadWorkerSource=function(Ye,Ke,Ve){try{this.self.importScripts(Ke.url),Ve()}catch($e){Ve($e.toString())}},St.prototype.syncRTLPluginState=function(Ye,Ke,Ve){try{n.plugin.setState(Ke);var $e=n.plugin.getPluginURL();if(n.plugin.isLoaded()&&!n.plugin.isParsed()&&$e!=null){this.self.importScripts($e);var lt=n.plugin.isParsed();Ve(lt?void 0:new Error("RTL Text Plugin failed to import scripts from "+$e),lt)}}catch(it){Ve(it.toString())}},St.prototype.getAvailableImages=function(Ye){var Ke=this.availableImages[Ye];return Ke||(Ke=[]),Ke},St.prototype.getLayerIndex=function(Ye){var Ke=this.layerIndexes[Ye];return Ke||(Ke=this.layerIndexes[Ye]=new f),Ke},St.prototype.getWorkerSource=function(Ye,Ke,Ve){var $e=this;if(this.workerSources[Ye]||(this.workerSources[Ye]={}),this.workerSources[Ye][Ke]||(this.workerSources[Ye][Ke]={}),!this.workerSources[Ye][Ke][Ve]){var lt={send:function(it,Be,je){$e.actor.send(it,Be,je,Ye)}};this.workerSources[Ye][Ke][Ve]=new this.workerSourceTypes[Ke](lt,this.getLayerIndex(Ye),this.getAvailableImages(Ye))}return this.workerSources[Ye][Ke][Ve]},St.prototype.getDEMWorkerSource=function(Ye,Ke){return this.demWorkerSources[Ye]||(this.demWorkerSources[Ye]={}),this.demWorkerSources[Ye][Ke]||(this.demWorkerSources[Ye][Ke]=new u),this.demWorkerSources[Ye][Ke]},St.prototype.enforceCacheSizeLimit=function(Ye,Ke){n.enforceCacheSizeLimit(Ke)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new St(self)),St}),w(0,function(n){var T=n.createCommonjsModule(function(B){function $(G){return!W(G)}function W(G){return typeof window<"u"&&typeof document<"u"?Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var ie,he,Te=new Blob([""],{type:"text/javascript"}),Le=URL.createObjectURL(Te);try{he=new Worker(Le),ie=!0}catch{ie=!1}return he&&he.terminate(),URL.revokeObjectURL(Le),ie}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var ie=document.createElement("canvas");ie.width=ie.height=1;var he=ie.getContext("2d");if(!he)return!1;var Te=he.getImageData(0,0,1,1);return Te&&Te.width===ie.width}()?(te=G&&G.failIfMajorPerformanceCaveat,I[te]===void 0&&(I[te]=function(ie){var he=function(Le){var Fe=document.createElement("canvas"),qe=Object.create($.webGLContextAttributes);return qe.failIfMajorPerformanceCaveat=Le,Fe.probablySupportsContext?Fe.probablySupportsContext("webgl",qe)||Fe.probablySupportsContext("experimental-webgl",qe):Fe.supportsContext?Fe.supportsContext("webgl",qe)||Fe.supportsContext("experimental-webgl",qe):Fe.getContext("webgl",qe)||Fe.getContext("experimental-webgl",qe)}(ie);if(!he)return!1;var Te=he.createShader(he.VERTEX_SHADER);return!(!Te||he.isContextLost())&&(he.shaderSource(Te,"void main() {}"),he.compileShader(Te),he.getShaderParameter(Te,he.COMPILE_STATUS)===!0)}(te)),I[te]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support":"not a browser";var te}B.exports?B.exports=$:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=$,window.mapboxgl.notSupportedReason=W);var I={};$.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),x={create:function(B,$,W){var I=n.window.document.createElement(B);return $!==void 0&&(I.className=$),W&&W.appendChild(I),I},createNS:function(B,$){return n.window.document.createElementNS(B,$)}},f=n.window.document&&n.window.document.documentElement.style;function s(B){if(!f)return B[0];for(var $=0;$<B.length;$++)if(B[$]in f)return B[$];return B[0]}var t,o=s(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);x.disableDrag=function(){f&&o&&(t=f[o],f[o]="none")},x.enableDrag=function(){f&&o&&(f[o]=t)};var r=s(["transform","WebkitTransform"]);x.setTransform=function(B,$){B.style[r]=$};var i=!1;try{var a=Object.defineProperty({},"passive",{get:function(){i=!0}});n.window.addEventListener("test",a,a),n.window.removeEventListener("test",a,a)}catch{i=!1}x.addEventListener=function(B,$,W,I){I===void 0&&(I={}),"passive"in I&&i?B.addEventListener($,W,I):B.addEventListener($,W,I.capture)},x.removeEventListener=function(B,$,W,I){I===void 0&&(I={}),"passive"in I&&i?B.removeEventListener($,W,I):B.removeEventListener($,W,I.capture)};var u=function(B){B.preventDefault(),B.stopPropagation(),n.window.removeEventListener("click",u,!0)};function l(B){var $=B.userImage;return!!($&&$.render&&$.render())&&(B.data.replace(new Uint8Array($.data.buffer)),!0)}x.suppressClick=function(){n.window.addEventListener("click",u,!0),n.window.setTimeout(function(){n.window.removeEventListener("click",u,!0)},0)},x.mousePos=function(B,$){var W=B.getBoundingClientRect();return new n.Point($.clientX-W.left-B.clientLeft,$.clientY-W.top-B.clientTop)},x.touchPos=function(B,$){for(var W=B.getBoundingClientRect(),I=[],G=0;G<$.length;G++)I.push(new n.Point($[G].clientX-W.left-B.clientLeft,$[G].clientY-W.top-B.clientTop));return I},x.mouseButton=function(B){return n.window.InstallTrigger!==void 0&&B.button===2&&B.ctrlKey&&n.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:B.button},x.remove=function(B){B.parentNode&&B.parentNode.removeChild(B)};var d=function(B){function $(){B.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new n.RGBAImage({width:1,height:1}),this.dirty=!0}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.isLoaded=function(){return this.loaded},$.prototype.setLoaded=function(W){if(this.loaded!==W&&(this.loaded=W,W)){for(var I=0,G=this.requestors;I<G.length;I+=1){var te=G[I],ie=te.ids,he=te.callback;this._notify(ie,he)}this.requestors=[]}},$.prototype.getImage=function(W){return this.images[W]},$.prototype.addImage=function(W,I){this._validate(W,I)&&(this.images[W]=I)},$.prototype._validate=function(W,I){var G=!0;return this._validateStretch(I.stretchX,I.data&&I.data.width)||(this.fire(new n.ErrorEvent(new Error('Image "'+W+'" has invalid "stretchX" value'))),G=!1),this._validateStretch(I.stretchY,I.data&&I.data.height)||(this.fire(new n.ErrorEvent(new Error('Image "'+W+'" has invalid "stretchY" value'))),G=!1),this._validateContent(I.content,I)||(this.fire(new n.ErrorEvent(new Error('Image "'+W+'" has invalid "content" value'))),G=!1),G},$.prototype._validateStretch=function(W,I){if(!W)return!0;for(var G=0,te=0,ie=W;te<ie.length;te+=1){var he=ie[te];if(he[0]<G||he[1]<he[0]||I<he[1])return!1;G=he[1]}return!0},$.prototype._validateContent=function(W,I){return!(W&&(W.length!==4||W[0]<0||I.data.width<W[0]||W[1]<0||I.data.height<W[1]||W[2]<0||I.data.width<W[2]||W[3]<0||I.data.height<W[3]||W[2]<W[0]||W[3]<W[1]))},$.prototype.updateImage=function(W,I){var G=this.images[W];I.version=G.version+1,this.images[W]=I,this.updatedImages[W]=!0},$.prototype.removeImage=function(W){var I=this.images[W];delete this.images[W],delete this.patterns[W],I.userImage&&I.userImage.onRemove&&I.userImage.onRemove()},$.prototype.listImages=function(){return Object.keys(this.images)},$.prototype.getImages=function(W,I){var G=!0;if(!this.isLoaded())for(var te=0,ie=W;te<ie.length;te+=1){var he=ie[te];this.images[he]||(G=!1)}this.isLoaded()||G?this._notify(W,I):this.requestors.push({ids:W,callback:I})},$.prototype._notify=function(W,I){for(var G={},te=0,ie=W;te<ie.length;te+=1){var he=ie[te];this.images[he]||this.fire(new n.Event("styleimagemissing",{id:he}));var Te=this.images[he];Te?G[he]={data:Te.data.clone(),pixelRatio:Te.pixelRatio,sdf:Te.sdf,version:Te.version,stretchX:Te.stretchX,stretchY:Te.stretchY,content:Te.content,hasRenderCallback:!!(Te.userImage&&Te.userImage.render)}:n.warnOnce('Image "'+he+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}I(null,G)},$.prototype.getPixelSize=function(){var W=this.atlasImage;return{width:W.width,height:W.height}},$.prototype.getPattern=function(W){var I=this.patterns[W],G=this.getImage(W);if(!G)return null;if(I&&I.position.version===G.version)return I.position;if(I)I.position.version=G.version;else{var te={w:G.data.width+2,h:G.data.height+2,x:0,y:0},ie=new n.ImagePosition(te,G);this.patterns[W]={bin:te,position:ie}}return this._updatePatternAtlas(),this.patterns[W].position},$.prototype.bind=function(W){var I=W.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new n.Texture(W,this.atlasImage,I.RGBA),this.atlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE)},$.prototype._updatePatternAtlas=function(){var W=[];for(var I in this.patterns)W.push(this.patterns[I].bin);var G=n.potpack(W),te=G.w,ie=G.h,he=this.atlasImage;for(var Te in he.resize({width:te||1,height:ie||1}),this.patterns){var Le=this.patterns[Te].bin,Fe=Le.x+1,qe=Le.y+1,We=this.images[Te].data,nt=We.width,ft=We.height;n.RGBAImage.copy(We,he,{x:0,y:0},{x:Fe,y:qe},{width:nt,height:ft}),n.RGBAImage.copy(We,he,{x:0,y:ft-1},{x:Fe,y:qe-1},{width:nt,height:1}),n.RGBAImage.copy(We,he,{x:0,y:0},{x:Fe,y:qe+ft},{width:nt,height:1}),n.RGBAImage.copy(We,he,{x:nt-1,y:0},{x:Fe-1,y:qe},{width:1,height:ft}),n.RGBAImage.copy(We,he,{x:0,y:0},{x:Fe+nt,y:qe},{width:1,height:ft})}this.dirty=!0},$.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},$.prototype.dispatchRenderCallbacks=function(W){for(var I=0,G=W;I<G.length;I+=1){var te=G[I];if(!this.callbackDispatchedThisFrame[te]){this.callbackDispatchedThisFrame[te]=!0;var ie=this.images[te];l(ie)&&this.updateImage(te,ie)}}},$}(n.Evented),c=g,_=g,p=1e20;function g(B,$,W,I,G,te){this.fontSize=B||24,this.buffer=$===void 0?3:$,this.cutoff=I||.25,this.fontFamily=G||"sans-serif",this.fontWeight=te||"normal",this.radius=W||8;var ie=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=ie,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(ie*ie),this.gridInner=new Float64Array(ie*ie),this.f=new Float64Array(ie),this.d=new Float64Array(ie),this.z=new Float64Array(ie+1),this.v=new Int16Array(ie),this.middle=Math.round(ie/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function m(B,$,W,I,G,te,ie){for(var he=0;he<$;he++){for(var Te=0;Te<W;Te++)I[Te]=B[Te*$+he];for(b(I,G,te,ie,W),Te=0;Te<W;Te++)B[Te*$+he]=G[Te]}for(Te=0;Te<W;Te++){for(he=0;he<$;he++)I[he]=B[Te*$+he];for(b(I,G,te,ie,$),he=0;he<$;he++)B[Te*$+he]=Math.sqrt(G[he])}}function b(B,$,W,I,G){W[0]=0,I[0]=-p,I[1]=+p;for(var te=1,ie=0;te<G;te++){for(var he=(B[te]+te*te-(B[W[ie]]+W[ie]*W[ie]))/(2*te-2*W[ie]);he<=I[ie];)ie--,he=(B[te]+te*te-(B[W[ie]]+W[ie]*W[ie]))/(2*te-2*W[ie]);W[++ie]=te,I[ie]=he,I[ie+1]=+p}for(te=0,ie=0;te<G;te++){for(;I[ie+1]<te;)ie++;$[te]=(te-W[ie])*(te-W[ie])+B[W[ie]]}}g.prototype.draw=function(B){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(B,this.buffer,this.middle);for(var $=this.ctx.getImageData(0,0,this.size,this.size),W=new Uint8ClampedArray(this.size*this.size),I=0;I<this.size*this.size;I++){var G=$.data[4*I+3]/255;this.gridOuter[I]=G===1?0:G===0?p:Math.pow(Math.max(0,.5-G),2),this.gridInner[I]=G===1?p:G===0?0:Math.pow(Math.max(0,G-.5),2)}for(m(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),m(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),I=0;I<this.size*this.size;I++){var te=this.gridOuter[I]-this.gridInner[I];W[I]=Math.max(0,Math.min(255,Math.round(255-255*(te/this.radius+this.cutoff))))}return W},c.default=_;var y=function(B,$){this.requestManager=B,this.localIdeographFontFamily=$,this.entries={}};y.prototype.setURL=function(B){this.url=B},y.prototype.getGlyphs=function(B,$){var W=this,I=[];for(var G in B)for(var te=0,ie=B[G];te<ie.length;te+=1){var he=ie[te];I.push({stack:G,id:he})}n.asyncAll(I,function(Te,Le){var Fe=Te.stack,qe=Te.id,We=W.entries[Fe];We||(We=W.entries[Fe]={glyphs:{},requests:{},ranges:{}});var nt=We.glyphs[qe];if(nt===void 0){if(nt=W._tinySDF(We,Fe,qe))return We.glyphs[qe]=nt,void Le(null,{stack:Fe,id:qe,glyph:nt});var ft=Math.floor(qe/256);if(256*ft>65535)Le(new Error("glyphs > 65535 not supported"));else if(We.ranges[ft])Le(null,{stack:Fe,id:qe,glyph:nt});else{var pt=We.requests[ft];pt||(pt=We.requests[ft]=[],y.loadGlyphRange(Fe,ft,W.url,W.requestManager,function(wt,Ct){if(Ct){for(var At in Ct)W._doesCharSupportLocalGlyph(+At)||(We.glyphs[+At]=Ct[+At]);We.ranges[ft]=!0}for(var zt=0,It=pt;zt<It.length;zt+=1)(0,It[zt])(wt,Ct);delete We.requests[ft]})),pt.push(function(wt,Ct){wt?Le(wt):Ct&&Le(null,{stack:Fe,id:qe,glyph:Ct[qe]||null})})}}else Le(null,{stack:Fe,id:qe,glyph:nt})},function(Te,Le){if(Te)$(Te);else if(Le){for(var Fe={},qe=0,We=Le;qe<We.length;qe+=1){var nt=We[qe],ft=nt.stack,pt=nt.id,wt=nt.glyph;(Fe[ft]||(Fe[ft]={}))[pt]=wt&&{id:wt.id,bitmap:wt.bitmap.clone(),metrics:wt.metrics}}$(null,Fe)}})},y.prototype._doesCharSupportLocalGlyph=function(B){return!!this.localIdeographFontFamily&&(n.isChar["CJK Unified Ideographs"](B)||n.isChar["Hangul Syllables"](B)||n.isChar.Hiragana(B)||n.isChar.Katakana(B))},y.prototype._tinySDF=function(B,$,W){var I=this.localIdeographFontFamily;if(I&&this._doesCharSupportLocalGlyph(W)){var G=B.tinySDF;if(!G){var te="400";/bold/i.test($)?te="900":/medium/i.test($)?te="500":/light/i.test($)&&(te="200"),G=B.tinySDF=new y.TinySDF(24,3,8,.25,I,te)}return{id:W,bitmap:new n.AlphaImage({width:30,height:30},G.draw(String.fromCharCode(W))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},y.loadGlyphRange=function(B,$,W,I,G){var te=256*$,ie=te+255,he=I.transformRequest(I.normalizeGlyphsURL(W).replace("{fontstack}",B).replace("{range}",te+"-"+ie),n.ResourceType.Glyphs);n.getArrayBuffer(he,function(Te,Le){if(Te)G(Te);else if(Le){for(var Fe={},qe=0,We=n.parseGlyphPBF(Le);qe<We.length;qe+=1){var nt=We[qe];Fe[nt.id]=nt}G(null,Fe)}})},y.TinySDF=c;var M=function(){this.specification=n.styleSpec.light.position};M.prototype.possiblyEvaluate=function(B,$){return n.sphericalToCartesian(B.expression.evaluate($))},M.prototype.interpolate=function(B,$,W){return{x:n.number(B.x,$.x,W),y:n.number(B.y,$.y,W),z:n.number(B.z,$.z,W)}};var h=new n.Properties({anchor:new n.DataConstantProperty(n.styleSpec.light.anchor),position:new M,color:new n.DataConstantProperty(n.styleSpec.light.color),intensity:new n.DataConstantProperty(n.styleSpec.light.intensity)}),E="-transition",k=function(B){function $(W){B.call(this),this._transitionable=new n.Transitionable(h),this.setLight(W),this._transitioning=this._transitionable.untransitioned()}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.getLight=function(){return this._transitionable.serialize()},$.prototype.setLight=function(W,I){if(I===void 0&&(I={}),!this._validate(n.validateLight,W,I))for(var G in W){var te=W[G];n.endsWith(G,E)?this._transitionable.setTransition(G.slice(0,-11),te):this._transitionable.setValue(G,te)}},$.prototype.updateTransitions=function(W){this._transitioning=this._transitionable.transitioned(W,this._transitioning)},$.prototype.hasTransition=function(){return this._transitioning.hasTransition()},$.prototype.recalculate=function(W){this.properties=this._transitioning.possiblyEvaluate(W)},$.prototype._validate=function(W,I,G){return(!G||G.validate!==!1)&&n.emitValidationErrors(this,W.call(n.validateStyle,n.extend({value:I,style:{glyphs:!0,sprite:!0},styleSpec:n.styleSpec})))},$}(n.Evented),D=function(B,$){this.width=B,this.height=$,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};D.prototype.getDash=function(B,$){var W=B.join(",")+String($);return this.dashEntry[W]||(this.dashEntry[W]=this.addDash(B,$)),this.dashEntry[W]},D.prototype.getDashRanges=function(B,$,W){var I=[],G=B.length%2==1?-B[B.length-1]*W:0,te=B[0]*W,ie=!0;I.push({left:G,right:te,isDash:ie,zeroLength:B[0]===0});for(var he=B[0],Te=1;Te<B.length;Te++){ie=!ie;var Le=B[Te];G=he*W,te=(he+=Le)*W,I.push({left:G,right:te,isDash:ie,zeroLength:Le===0})}return I},D.prototype.addRoundDash=function(B,$,W){for(var I=$/2,G=-W;G<=W;G++)for(var te=this.nextRow+W+G,ie=this.width*te,he=0,Te=B[he],Le=0;Le<this.width;Le++){Le/Te.right>1&&(Te=B[++he]);var Fe=Math.abs(Le-Te.left),qe=Math.abs(Le-Te.right),We=Math.min(Fe,qe),nt=void 0,ft=G/W*(I+1);if(Te.isDash){var pt=I-Math.abs(ft);nt=Math.sqrt(We*We+pt*pt)}else nt=I-Math.sqrt(We*We+ft*ft);this.data[ie+Le]=Math.max(0,Math.min(255,nt+128))}},D.prototype.addRegularDash=function(B){for(var $=B.length-1;$>=0;--$){var W=B[$],I=B[$+1];W.zeroLength?B.splice($,1):I&&I.isDash===W.isDash&&(I.left=W.left,B.splice($,1))}var G=B[0],te=B[B.length-1];G.isDash===te.isDash&&(G.left=te.left-this.width,te.right=G.right+this.width);for(var ie=this.width*this.nextRow,he=0,Te=B[he],Le=0;Le<this.width;Le++){Le/Te.right>1&&(Te=B[++he]);var Fe=Math.abs(Le-Te.left),qe=Math.abs(Le-Te.right),We=Math.min(Fe,qe),nt=Te.isDash?We:-We;this.data[ie+Le]=Math.max(0,Math.min(255,nt+128))}},D.prototype.addDash=function(B,$){var W=$?7:0,I=2*W+1;if(this.nextRow+I>this.height)return n.warnOnce("LineAtlas out of space"),null;for(var G=0,te=0;te<B.length;te++)G+=B[te];if(G!==0){var ie=this.width/G,he=this.getDashRanges(B,this.width,ie);$?this.addRoundDash(he,ie,W):this.addRegularDash(he)}var Te={y:(this.nextRow+W+.5)/this.height,height:2*W/this.height,width:G};return this.nextRow+=I,this.dirty=!0,Te},D.prototype.bind=function(B){var $=B.gl;this.texture?($.bindTexture($.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,$.texSubImage2D($.TEXTURE_2D,0,0,0,this.width,this.height,$.ALPHA,$.UNSIGNED_BYTE,this.data))):(this.texture=$.createTexture(),$.bindTexture($.TEXTURE_2D,this.texture),$.texParameteri($.TEXTURE_2D,$.TEXTURE_WRAP_S,$.REPEAT),$.texParameteri($.TEXTURE_2D,$.TEXTURE_WRAP_T,$.REPEAT),$.texParameteri($.TEXTURE_2D,$.TEXTURE_MIN_FILTER,$.LINEAR),$.texParameteri($.TEXTURE_2D,$.TEXTURE_MAG_FILTER,$.LINEAR),$.texImage2D($.TEXTURE_2D,0,$.ALPHA,this.width,this.height,0,$.ALPHA,$.UNSIGNED_BYTE,this.data))};var P=function B($,W){this.workerPool=$,this.actors=[],this.currentActor=0,this.id=n.uniqueId();for(var I=this.workerPool.acquire(this.id),G=0;G<I.length;G++){var te=I[G],ie=new B.Actor(te,W,this.id);ie.name="Worker "+G,this.actors.push(ie)}};function L(B,$,W){var I=function(G,te){if(G)return W(G);if(te){var ie=n.pick(n.extend(te,B),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);te.vector_layers&&(ie.vectorLayers=te.vector_layers,ie.vectorLayerIds=ie.vectorLayers.map(function(he){return he.id})),ie.tiles=$.canonicalizeTileset(ie,B.url),W(null,ie)}};return B.url?n.getJSON($.transformRequest($.normalizeSourceURL(B.url),n.ResourceType.Source),I):n.browser.frame(function(){return I(null,B)})}P.prototype.broadcast=function(B,$,W){W=W||function(){},n.asyncAll(this.actors,function(I,G){I.send(B,$,G)},W)},P.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},P.prototype.remove=function(){this.actors.forEach(function(B){B.remove()}),this.actors=[],this.workerPool.release(this.id)},P.Actor=n.Actor;var O=function(B,$,W){this.bounds=n.LngLatBounds.convert(this.validateBounds(B)),this.minzoom=$||0,this.maxzoom=W||24};O.prototype.validateBounds=function(B){return Array.isArray(B)&&B.length===4?[Math.max(-180,B[0]),Math.max(-90,B[1]),Math.min(180,B[2]),Math.min(90,B[3])]:[-180,-90,180,90]},O.prototype.contains=function(B){var $=Math.pow(2,B.z),W=Math.floor(n.mercatorXfromLng(this.bounds.getWest())*$),I=Math.floor(n.mercatorYfromLat(this.bounds.getNorth())*$),G=Math.ceil(n.mercatorXfromLng(this.bounds.getEast())*$),te=Math.ceil(n.mercatorYfromLat(this.bounds.getSouth())*$);return B.x>=W&&B.x<G&&B.y>=I&&B.y<te};var N=function(B){function $(W,I,G,te){if(B.call(this),this.id=W,this.dispatcher=G,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,n.extend(this,n.pick(I,["url","scheme","tileSize","promoteId"])),this._options=n.extend({type:"vector"},I),this._collectResourceTiming=I.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(te)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.load=function(){var W=this;this._loaded=!1,this.fire(new n.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=L(this._options,this.map._requestManager,function(I,G){W._tileJSONRequest=null,W._loaded=!0,I?W.fire(new n.ErrorEvent(I)):G&&(n.extend(W,G),G.bounds&&(W.tileBounds=new O(G.bounds,W.minzoom,W.maxzoom)),n.postTurnstileEvent(G.tiles,W.map._requestManager._customAccessToken),n.postMapLoadEvent(G.tiles,W.map._getMapId(),W.map._requestManager._skuToken,W.map._requestManager._customAccessToken),W.fire(new n.Event("data",{dataType:"source",sourceDataType:"metadata"})),W.fire(new n.Event("data",{dataType:"source",sourceDataType:"content"})))})},$.prototype.loaded=function(){return this._loaded},$.prototype.hasTile=function(W){return!this.tileBounds||this.tileBounds.contains(W.canonical)},$.prototype.onAdd=function(W){this.map=W,this.load()},$.prototype.setSourceProperty=function(W){this._tileJSONRequest&&this._tileJSONRequest.cancel(),W(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},$.prototype.setTiles=function(W){var I=this;return this.setSourceProperty(function(){I._options.tiles=W}),this},$.prototype.setUrl=function(W){var I=this;return this.setSourceProperty(function(){I.url=W,I._options.url=W}),this},$.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},$.prototype.serialize=function(){return n.extend({},this._options)},$.prototype.loadTile=function(W,I){var G=this.map._requestManager.normalizeTileURL(W.tileID.canonical.url(this.tiles,this.scheme)),te={request:this.map._requestManager.transformRequest(G,n.ResourceType.Tile),uid:W.uid,tileID:W.tileID,zoom:W.tileID.overscaledZ,tileSize:this.tileSize*W.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:n.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function ie(he,Te){return delete W.request,W.aborted?I(null):he&&he.status!==404?I(he):(Te&&Te.resourceTiming&&(W.resourceTiming=Te.resourceTiming),this.map._refreshExpiredTiles&&Te&&W.setExpiryData(Te),W.loadVectorData(Te,this.map.painter),n.cacheEntryPossiblyAdded(this.dispatcher),I(null),void(W.reloadCallback&&(this.loadTile(W,W.reloadCallback),W.reloadCallback=null)))}te.request.collectResourceTiming=this._collectResourceTiming,W.actor&&W.state!=="expired"?W.state==="loading"?W.reloadCallback=I:W.request=W.actor.send("reloadTile",te,ie.bind(this)):(W.actor=this.dispatcher.getActor(),W.request=W.actor.send("loadTile",te,ie.bind(this)))},$.prototype.abortTile=function(W){W.request&&(W.request.cancel(),delete W.request),W.actor&&W.actor.send("abortTile",{uid:W.uid,type:this.type,source:this.id},void 0)},$.prototype.unloadTile=function(W){W.unloadVectorData(),W.actor&&W.actor.send("removeTile",{uid:W.uid,type:this.type,source:this.id},void 0)},$.prototype.hasTransition=function(){return!1},$}(n.Evented),V=function(B){function $(W,I,G,te){B.call(this),this.id=W,this.dispatcher=G,this.setEventedParent(te),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=n.extend({type:"raster"},I),n.extend(this,n.pick(I,["url","scheme","tileSize"]))}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.load=function(){var W=this;this._loaded=!1,this.fire(new n.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=L(this._options,this.map._requestManager,function(I,G){W._tileJSONRequest=null,W._loaded=!0,I?W.fire(new n.ErrorEvent(I)):G&&(n.extend(W,G),G.bounds&&(W.tileBounds=new O(G.bounds,W.minzoom,W.maxzoom)),n.postTurnstileEvent(G.tiles),n.postMapLoadEvent(G.tiles,W.map._getMapId(),W.map._requestManager._skuToken),W.fire(new n.Event("data",{dataType:"source",sourceDataType:"metadata"})),W.fire(new n.Event("data",{dataType:"source",sourceDataType:"content"})))})},$.prototype.loaded=function(){return this._loaded},$.prototype.onAdd=function(W){this.map=W,this.load()},$.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},$.prototype.serialize=function(){return n.extend({},this._options)},$.prototype.hasTile=function(W){return!this.tileBounds||this.tileBounds.contains(W.canonical)},$.prototype.loadTile=function(W,I){var G=this,te=this.map._requestManager.normalizeTileURL(W.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);W.request=n.getImage(this.map._requestManager.transformRequest(te,n.ResourceType.Tile),function(ie,he){if(delete W.request,W.aborted)W.state="unloaded",I(null);else if(ie)W.state="errored",I(ie);else if(he){G.map._refreshExpiredTiles&&W.setExpiryData(he),delete he.cacheControl,delete he.expires;var Te=G.map.painter.context,Le=Te.gl;W.texture=G.map.painter.getTileTexture(he.width),W.texture?W.texture.update(he,{useMipmap:!0}):(W.texture=new n.Texture(Te,he,Le.RGBA,{useMipmap:!0}),W.texture.bind(Le.LINEAR,Le.CLAMP_TO_EDGE,Le.LINEAR_MIPMAP_NEAREST),Te.extTextureFilterAnisotropic&&Le.texParameterf(Le.TEXTURE_2D,Te.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Te.extTextureFilterAnisotropicMax)),W.state="loaded",n.cacheEntryPossiblyAdded(G.dispatcher),I(null)}})},$.prototype.abortTile=function(W,I){W.request&&(W.request.cancel(),delete W.request),I()},$.prototype.unloadTile=function(W,I){W.texture&&this.map.painter.saveTileTexture(W.texture),I()},$.prototype.hasTransition=function(){return!1},$}(n.Evented),F=function(B){function $(W,I,G,te){B.call(this,W,I,G,te),this.type="raster-dem",this.maxzoom=22,this._options=n.extend({type:"raster-dem"},I),this.encoding=I.encoding||"mapbox"}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},$.prototype.loadTile=function(W,I){var G=this.map._requestManager.normalizeTileURL(W.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function te(ie,he){ie&&(W.state="errored",I(ie)),he&&(W.dem=he,W.needsHillshadePrepare=!0,W.state="loaded",I(null))}W.request=n.getImage(this.map._requestManager.transformRequest(G,n.ResourceType.Tile),(function(ie,he){if(delete W.request,W.aborted)W.state="unloaded",I(null);else if(ie)W.state="errored",I(ie);else if(he){this.map._refreshExpiredTiles&&W.setExpiryData(he),delete he.cacheControl,delete he.expires;var Te=n.window.ImageBitmap&&he instanceof n.window.ImageBitmap&&n.offscreenCanvasSupported()?he:n.browser.getImageData(he,1),Le={uid:W.uid,coord:W.tileID,source:this.id,rawImageData:Te,encoding:this.encoding};W.actor&&W.state!=="expired"||(W.actor=this.dispatcher.getActor(),W.actor.send("loadDEMTile",Le,te.bind(this)))}}).bind(this)),W.neighboringTiles=this._getNeighboringTiles(W.tileID)},$.prototype._getNeighboringTiles=function(W){var I=W.canonical,G=Math.pow(2,I.z),te=(I.x-1+G)%G,ie=I.x===0?W.wrap-1:W.wrap,he=(I.x+1+G)%G,Te=I.x+1===G?W.wrap+1:W.wrap,Le={};return Le[new n.OverscaledTileID(W.overscaledZ,ie,I.z,te,I.y).key]={backfilled:!1},Le[new n.OverscaledTileID(W.overscaledZ,Te,I.z,he,I.y).key]={backfilled:!1},I.y>0&&(Le[new n.OverscaledTileID(W.overscaledZ,ie,I.z,te,I.y-1).key]={backfilled:!1},Le[new n.OverscaledTileID(W.overscaledZ,W.wrap,I.z,I.x,I.y-1).key]={backfilled:!1},Le[new n.OverscaledTileID(W.overscaledZ,Te,I.z,he,I.y-1).key]={backfilled:!1}),I.y+1<G&&(Le[new n.OverscaledTileID(W.overscaledZ,ie,I.z,te,I.y+1).key]={backfilled:!1},Le[new n.OverscaledTileID(W.overscaledZ,W.wrap,I.z,I.x,I.y+1).key]={backfilled:!1},Le[new n.OverscaledTileID(W.overscaledZ,Te,I.z,he,I.y+1).key]={backfilled:!1}),Le},$.prototype.unloadTile=function(W){W.demTexture&&this.map.painter.saveTileTexture(W.demTexture),W.fbo&&(W.fbo.destroy(),delete W.fbo),W.dem&&delete W.dem,delete W.neighboringTiles,W.state="unloaded",W.actor&&W.actor.send("removeDEMTile",{uid:W.uid,source:this.id})},$}(V),j=function(B){function $(W,I,G,te){B.call(this),this.id=W,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=G.getActor(),this.setEventedParent(te),this._data=I.data,this._options=n.extend({},I),this._collectResourceTiming=I.collectResourceTiming,this._resourceTiming=[],I.maxzoom!==void 0&&(this.maxzoom=I.maxzoom),I.type&&(this.type=I.type),I.attribution&&(this.attribution=I.attribution),this.promoteId=I.promoteId;var ie=n.EXTENT/this.tileSize;this.workerOptions=n.extend({source:this.id,cluster:I.cluster||!1,geojsonVtOptions:{buffer:(I.buffer!==void 0?I.buffer:128)*ie,tolerance:(I.tolerance!==void 0?I.tolerance:.375)*ie,extent:n.EXTENT,maxZoom:this.maxzoom,lineMetrics:I.lineMetrics||!1,generateId:I.generateId||!1},superclusterOptions:{maxZoom:I.clusterMaxZoom!==void 0?Math.min(I.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,I.clusterMinPoints||2),extent:n.EXTENT,radius:(I.clusterRadius||50)*ie,log:!1,generateId:I.generateId||!1},clusterProperties:I.clusterProperties,filter:I.filter},I.workerOptions)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.load=function(){var W=this;this.fire(new n.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(I){if(I)W.fire(new n.ErrorEvent(I));else{var G={dataType:"source",sourceDataType:"metadata"};W._collectResourceTiming&&W._resourceTiming&&W._resourceTiming.length>0&&(G.resourceTiming=W._resourceTiming,W._resourceTiming=[]),W.fire(new n.Event("data",G))}})},$.prototype.onAdd=function(W){this.map=W,this.load()},$.prototype.setData=function(W){var I=this;return this._data=W,this.fire(new n.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(G){if(G)I.fire(new n.ErrorEvent(G));else{var te={dataType:"source",sourceDataType:"content"};I._collectResourceTiming&&I._resourceTiming&&I._resourceTiming.length>0&&(te.resourceTiming=I._resourceTiming,I._resourceTiming=[]),I.fire(new n.Event("data",te))}}),this},$.prototype.getClusterExpansionZoom=function(W,I){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:W,source:this.id},I),this},$.prototype.getClusterChildren=function(W,I){return this.actor.send("geojson.getClusterChildren",{clusterId:W,source:this.id},I),this},$.prototype.getClusterLeaves=function(W,I,G,te){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:W,limit:I,offset:G},te),this},$.prototype._updateWorkerData=function(W){var I=this;this._loaded=!1;var G=n.extend({},this.workerOptions),te=this._data;typeof te=="string"?(G.request=this.map._requestManager.transformRequest(n.browser.resolveURL(te),n.ResourceType.Source),G.request.collectResourceTiming=this._collectResourceTiming):G.data=JSON.stringify(te),this.actor.send(this.type+".loadData",G,function(ie,he){I._removed||he&&he.abandoned||(I._loaded=!0,he&&he.resourceTiming&&he.resourceTiming[I.id]&&(I._resourceTiming=he.resourceTiming[I.id].slice(0)),I.actor.send(I.type+".coalesce",{source:G.source},null),W(ie))})},$.prototype.loaded=function(){return this._loaded},$.prototype.loadTile=function(W,I){var G=this,te=W.actor?"reloadTile":"loadTile";W.actor=this.actor;var ie={type:this.type,uid:W.uid,tileID:W.tileID,zoom:W.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:n.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};W.request=this.actor.send(te,ie,function(he,Te){return delete W.request,W.unloadVectorData(),W.aborted?I(null):he?I(he):(W.loadVectorData(Te,G.map.painter,te==="reloadTile"),I(null))})},$.prototype.abortTile=function(W){W.request&&(W.request.cancel(),delete W.request),W.aborted=!0},$.prototype.unloadTile=function(W){W.unloadVectorData(),this.actor.send("removeTile",{uid:W.uid,type:this.type,source:this.id})},$.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},$.prototype.serialize=function(){return n.extend({},this._options,{type:this.type,data:this._data})},$.prototype.hasTransition=function(){return!1},$}(n.Evented),Z=n.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),z=function(B){function $(W,I,G,te){B.call(this),this.id=W,this.dispatcher=G,this.coordinates=I.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(te),this.options=I}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.load=function(W,I){var G=this;this._loaded=!1,this.fire(new n.Event("dataloading",{dataType:"source"})),this.url=this.options.url,n.getImage(this.map._requestManager.transformRequest(this.url,n.ResourceType.Image),function(te,ie){G._loaded=!0,te?G.fire(new n.ErrorEvent(te)):ie&&(G.image=ie,W&&(G.coordinates=W),I&&I(),G._finishLoading())})},$.prototype.loaded=function(){return this._loaded},$.prototype.updateImage=function(W){var I=this;return this.image&&W.url?(this.options.url=W.url,this.load(W.coordinates,function(){I.texture=null}),this):this},$.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"metadata"})))},$.prototype.onAdd=function(W){this.map=W,this.load()},$.prototype.setCoordinates=function(W){var I=this;this.coordinates=W;var G=W.map(n.MercatorCoordinate.fromLngLat);this.tileID=function(ie){for(var he=1/0,Te=1/0,Le=-1/0,Fe=-1/0,qe=0,We=ie;qe<We.length;qe+=1){var nt=We[qe];he=Math.min(he,nt.x),Te=Math.min(Te,nt.y),Le=Math.max(Le,nt.x),Fe=Math.max(Fe,nt.y)}var ft=Le-he,pt=Fe-Te,wt=Math.max(ft,pt),Ct=Math.max(0,Math.floor(-Math.log(wt)/Math.LN2)),At=Math.pow(2,Ct);return new n.CanonicalTileID(Ct,Math.floor((he+Le)/2*At),Math.floor((Te+Fe)/2*At))}(G),this.minzoom=this.maxzoom=this.tileID.z;var te=G.map(function(ie){return I.tileID.getTilePoint(ie)._round()});return this._boundsArray=new n.StructArrayLayout4i8,this._boundsArray.emplaceBack(te[0].x,te[0].y,0,0),this._boundsArray.emplaceBack(te[1].x,te[1].y,n.EXTENT,0),this._boundsArray.emplaceBack(te[3].x,te[3].y,0,n.EXTENT),this._boundsArray.emplaceBack(te[2].x,te[2].y,n.EXTENT,n.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"content"})),this},$.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var W=this.map.painter.context,I=W.gl;for(var G in this.boundsBuffer||(this.boundsBuffer=W.createVertexBuffer(this._boundsArray,Z.members)),this.boundsSegments||(this.boundsSegments=n.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new n.Texture(W,this.image,I.RGBA),this.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE)),this.tiles){var te=this.tiles[G];te.state!=="loaded"&&(te.state="loaded",te.texture=this.texture)}}},$.prototype.loadTile=function(W,I){this.tileID&&this.tileID.equals(W.tileID.canonical)?(this.tiles[String(W.tileID.wrap)]=W,W.buckets={},I(null)):(W.state="errored",I(null))},$.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},$.prototype.hasTransition=function(){return!1},$}(n.Evented),H=function(B){function $(W,I,G,te){B.call(this,W,I,G,te),this.roundZoom=!0,this.type="video",this.options=I}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.load=function(){var W=this;this._loaded=!1;var I=this.options;this.urls=[];for(var G=0,te=I.urls;G<te.length;G+=1){var ie=te[G];this.urls.push(this.map._requestManager.transformRequest(ie,n.ResourceType.Source).url)}n.getVideo(this.urls,function(he,Te){W._loaded=!0,he?W.fire(new n.ErrorEvent(he)):Te&&(W.video=Te,W.video.loop=!0,W.video.addEventListener("playing",function(){W.map.triggerRepaint()}),W.map&&W.video.play(),W._finishLoading())})},$.prototype.pause=function(){this.video&&this.video.pause()},$.prototype.play=function(){this.video&&this.video.play()},$.prototype.seek=function(W){if(this.video){var I=this.video.seekable;W<I.start(0)||W>I.end(0)?this.fire(new n.ErrorEvent(new n.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+I.start(0)+" and "+I.end(0)+"-second mark."))):this.video.currentTime=W}},$.prototype.getVideo=function(){return this.video},$.prototype.onAdd=function(W){this.map||(this.map=W,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},$.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var W=this.map.painter.context,I=W.gl;for(var G in this.boundsBuffer||(this.boundsBuffer=W.createVertexBuffer(this._boundsArray,Z.members)),this.boundsSegments||(this.boundsSegments=n.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE),I.texSubImage2D(I.TEXTURE_2D,0,0,0,I.RGBA,I.UNSIGNED_BYTE,this.video)):(this.texture=new n.Texture(W,this.video,I.RGBA),this.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE)),this.tiles){var te=this.tiles[G];te.state!=="loaded"&&(te.state="loaded",te.texture=this.texture)}}},$.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},$.prototype.hasTransition=function(){return this.video&&!this.video.paused},$}(z),U=function(B){function $(W,I,G,te){B.call(this,W,I,G,te),I.coordinates?Array.isArray(I.coordinates)&&I.coordinates.length===4&&!I.coordinates.some(function(ie){return!Array.isArray(ie)||ie.length!==2||ie.some(function(he){return typeof he!="number"})})||this.fire(new n.ErrorEvent(new n.ValidationError("sources."+W,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new n.ErrorEvent(new n.ValidationError("sources."+W,null,'missing required property "coordinates"'))),I.animate&&typeof I.animate!="boolean"&&this.fire(new n.ErrorEvent(new n.ValidationError("sources."+W,null,'optional "animate" property must be a boolean value'))),I.canvas?typeof I.canvas=="string"||I.canvas instanceof n.window.HTMLCanvasElement||this.fire(new n.ErrorEvent(new n.ValidationError("sources."+W,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new n.ErrorEvent(new n.ValidationError("sources."+W,null,'missing required property "canvas"'))),this.options=I,this.animate=I.animate===void 0||I.animate}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof n.window.HTMLCanvasElement?this.options.canvas:n.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new n.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},$.prototype.getCanvas=function(){return this.canvas},$.prototype.onAdd=function(W){this.map=W,this.load(),this.canvas&&this.animate&&this.play()},$.prototype.onRemove=function(){this.pause()},$.prototype.prepare=function(){var W=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,W=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,W=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var I=this.map.painter.context,G=I.gl;for(var te in this.boundsBuffer||(this.boundsBuffer=I.createVertexBuffer(this._boundsArray,Z.members)),this.boundsSegments||(this.boundsSegments=n.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(W||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new n.Texture(I,this.canvas,G.RGBA,{premultiply:!0}),this.tiles){var ie=this.tiles[te];ie.state!=="loaded"&&(ie.state="loaded",ie.texture=this.texture)}}},$.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},$.prototype.hasTransition=function(){return this._playing},$.prototype._hasInvalidDimensions=function(){for(var W=0,I=[this.canvas.width,this.canvas.height];W<I.length;W+=1){var G=I[W];if(isNaN(G)||G<=0)return!0}return!1},$}(z),re={vector:N,raster:V,"raster-dem":F,geojson:j,video:H,image:z,canvas:U};function ee(B,$){var W=n.identity([]);return n.translate(W,W,[1,1,0]),n.scale(W,W,[.5*B.width,.5*B.height,1]),n.multiply(W,W,B.calculatePosMatrix($.toUnwrapped()))}function J(B,$,W,I,G,te){var ie=function(pt,wt,Ct){if(pt)for(var At=0,zt=pt;At<zt.length;At+=1){var It=wt[zt[At]];if(It&&It.source===Ct&&It.type==="fill-extrusion")return!0}else for(var Xt in wt){var Gt=wt[Xt];if(Gt.source===Ct&&Gt.type==="fill-extrusion")return!0}return!1}(G&&G.layers,$,B.id),he=te.maxPitchScaleFactor(),Te=B.tilesIn(I,he,ie);Te.sort(Q);for(var Le=[],Fe=0,qe=Te;Fe<qe.length;Fe+=1){var We=qe[Fe];Le.push({wrappedTileID:We.tileID.wrapped().key,queryResults:We.tile.queryRenderedFeatures($,W,B._state,We.queryGeometry,We.cameraQueryGeometry,We.scale,G,te,he,ee(B.transform,We.tileID))})}var nt=function(pt){for(var wt={},Ct={},At=0,zt=pt;At<zt.length;At+=1){var It=zt[At],Xt=It.queryResults,Gt=It.wrappedTileID,Vt=Ct[Gt]=Ct[Gt]||{};for(var pn in Xt)for(var vn=Xt[pn],Sn=Vt[pn]=Vt[pn]||{},In=wt[pn]=wt[pn]||[],Vn=0,nr=vn;Vn<nr.length;Vn+=1){var cr=nr[Vn];Sn[cr.featureIndex]||(Sn[cr.featureIndex]=!0,In.push(cr))}}return wt}(Le);for(var ft in nt)nt[ft].forEach(function(pt){var wt=pt.feature,Ct=B.getFeatureState(wt.layer["source-layer"],wt.id);wt.source=wt.layer.source,wt.layer["source-layer"]&&(wt.sourceLayer=wt.layer["source-layer"]),wt.state=Ct});return nt}function Q(B,$){var W=B.tileID,I=$.tileID;return W.overscaledZ-I.overscaledZ||W.canonical.y-I.canonical.y||W.wrap-I.wrap||W.canonical.x-I.canonical.x}var ne=function(B,$){this.max=B,this.onRemove=$,this.reset()};ne.prototype.reset=function(){for(var B in this.data)for(var $=0,W=this.data[B];$<W.length;$+=1){var I=W[$];I.timeout&&clearTimeout(I.timeout),this.onRemove(I.value)}return this.data={},this.order=[],this},ne.prototype.add=function(B,$,W){var I=this,G=B.wrapped().key;this.data[G]===void 0&&(this.data[G]=[]);var te={value:$,timeout:void 0};if(W!==void 0&&(te.timeout=setTimeout(function(){I.remove(B,te)},W)),this.data[G].push(te),this.order.push(G),this.order.length>this.max){var ie=this._getAndRemoveByKey(this.order[0]);ie&&this.onRemove(ie)}return this},ne.prototype.has=function(B){return B.wrapped().key in this.data},ne.prototype.getAndRemove=function(B){return this.has(B)?this._getAndRemoveByKey(B.wrapped().key):null},ne.prototype._getAndRemoveByKey=function(B){var $=this.data[B].shift();return $.timeout&&clearTimeout($.timeout),this.data[B].length===0&&delete this.data[B],this.order.splice(this.order.indexOf(B),1),$.value},ne.prototype.getByKey=function(B){var $=this.data[B];return $?$[0].value:null},ne.prototype.get=function(B){return this.has(B)?this.data[B.wrapped().key][0].value:null},ne.prototype.remove=function(B,$){if(!this.has(B))return this;var W=B.wrapped().key,I=$===void 0?0:this.data[W].indexOf($),G=this.data[W][I];return this.data[W].splice(I,1),G.timeout&&clearTimeout(G.timeout),this.data[W].length===0&&delete this.data[W],this.onRemove(G.value),this.order.splice(this.order.indexOf(W),1),this},ne.prototype.setMaxSize=function(B){for(this.max=B;this.order.length>this.max;){var $=this._getAndRemoveByKey(this.order[0]);$&&this.onRemove($)}return this},ne.prototype.filter=function(B){var $=[];for(var W in this.data)for(var I=0,G=this.data[W];I<G.length;I+=1){var te=G[I];B(te.value)||$.push(te)}for(var ie=0,he=$;ie<he.length;ie+=1){var Te=he[ie];this.remove(Te.value.tileID,Te)}};var K=function(B,$,W){this.context=B;var I=B.gl;this.buffer=I.createBuffer(),this.dynamicDraw=!!W,this.context.unbindVAO(),B.bindElementBuffer.set(this.buffer),I.bufferData(I.ELEMENT_ARRAY_BUFFER,$.arrayBuffer,this.dynamicDraw?I.DYNAMIC_DRAW:I.STATIC_DRAW),this.dynamicDraw||delete $.arrayBuffer};K.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},K.prototype.updateData=function(B){var $=this.context.gl;this.context.unbindVAO(),this.bind(),$.bufferSubData($.ELEMENT_ARRAY_BUFFER,0,B.arrayBuffer)},K.prototype.destroy=function(){var B=this.context.gl;this.buffer&&(B.deleteBuffer(this.buffer),delete this.buffer)};var oe={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},le=function(B,$,W,I){this.length=$.length,this.attributes=W,this.itemSize=$.bytesPerElement,this.dynamicDraw=I,this.context=B;var G=B.gl;this.buffer=G.createBuffer(),B.bindVertexBuffer.set(this.buffer),G.bufferData(G.ARRAY_BUFFER,$.arrayBuffer,this.dynamicDraw?G.DYNAMIC_DRAW:G.STATIC_DRAW),this.dynamicDraw||delete $.arrayBuffer};le.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},le.prototype.updateData=function(B){var $=this.context.gl;this.bind(),$.bufferSubData($.ARRAY_BUFFER,0,B.arrayBuffer)},le.prototype.enableAttributes=function(B,$){for(var W=0;W<this.attributes.length;W++){var I=this.attributes[W],G=$.attributes[I.name];G!==void 0&&B.enableVertexAttribArray(G)}},le.prototype.setVertexAttribPointers=function(B,$,W){for(var I=0;I<this.attributes.length;I++){var G=this.attributes[I],te=$.attributes[G.name];te!==void 0&&B.vertexAttribPointer(te,G.components,B[oe[G.type]],!1,this.itemSize,G.offset+this.itemSize*(W||0))}},le.prototype.destroy=function(){var B=this.context.gl;this.buffer&&(B.deleteBuffer(this.buffer),delete this.buffer)};var se=function(B){this.gl=B.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};se.prototype.get=function(){return this.current},se.prototype.set=function(B){},se.prototype.getDefault=function(){return this.default},se.prototype.setDefault=function(){this.set(this.default)};var de=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.getDefault=function(){return n.Color.transparent},$.prototype.set=function(W){var I=this.current;(W.r!==I.r||W.g!==I.g||W.b!==I.b||W.a!==I.a||this.dirty)&&(this.gl.clearColor(W.r,W.g,W.b,W.a),this.current=W,this.dirty=!1)},$}(se),be=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.getDefault=function(){return 1},$.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.clearDepth(W),this.current=W,this.dirty=!1)},$}(se),_e=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.getDefault=function(){return 0},$.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.clearStencil(W),this.current=W,this.dirty=!1)},$}(se),xe=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.getDefault=function(){return[!0,!0,!0,!0]},$.prototype.set=function(W){var I=this.current;(W[0]!==I[0]||W[1]!==I[1]||W[2]!==I[2]||W[3]!==I[3]||this.dirty)&&(this.gl.colorMask(W[0],W[1],W[2],W[3]),this.current=W,this.dirty=!1)},$}(se),ve=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.getDefault=function(){return!0},$.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.depthMask(W),this.current=W,this.dirty=!1)},$}(se),ye=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.getDefault=function(){return 255},$.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.stencilMask(W),this.current=W,this.dirty=!1)},$}(se),me=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},$.prototype.set=function(W){var I=this.current;(W.func!==I.func||W.ref!==I.ref||W.mask!==I.mask||this.dirty)&&(this.gl.stencilFunc(W.func,W.ref,W.mask),this.current=W,this.dirty=!1)},$}(se),Me=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.getDefault=function(){var W=this.gl;return[W.KEEP,W.KEEP,W.KEEP]},$.prototype.set=function(W){var I=this.current;(W[0]!==I[0]||W[1]!==I[1]||W[2]!==I[2]||this.dirty)&&(this.gl.stencilOp(W[0],W[1],W[2]),this.current=W,this.dirty=!1)},$}(se),Ae=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.getDefault=function(){return!1},$.prototype.set=function(W){if(W!==this.current||this.dirty){var I=this.gl;W?I.enable(I.STENCIL_TEST):I.disable(I.STENCIL_TEST),this.current=W,this.dirty=!1}},$}(se),ce=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.getDefault=function(){return[0,1]},$.prototype.set=function(W){var I=this.current;(W[0]!==I[0]||W[1]!==I[1]||this.dirty)&&(this.gl.depthRange(W[0],W[1]),this.current=W,this.dirty=!1)},$}(se),ae=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.getDefault=function(){return!1},$.prototype.set=function(W){if(W!==this.current||this.dirty){var I=this.gl;W?I.enable(I.DEPTH_TEST):I.disable(I.DEPTH_TEST),this.current=W,this.dirty=!1}},$}(se),pe=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.getDefault=function(){return this.gl.LESS},$.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.depthFunc(W),this.current=W,this.dirty=!1)},$}(se),De=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.getDefault=function(){return!1},$.prototype.set=function(W){if(W!==this.current||this.dirty){var I=this.gl;W?I.enable(I.BLEND):I.disable(I.BLEND),this.current=W,this.dirty=!1}},$}(se),ke=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.getDefault=function(){var W=this.gl;return[W.ONE,W.ZERO]},$.prototype.set=function(W){var I=this.current;(W[0]!==I[0]||W[1]!==I[1]||this.dirty)&&(this.gl.blendFunc(W[0],W[1]),this.current=W,this.dirty=!1)},$}(se),Ee=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.getDefault=function(){return n.Color.transparent},$.prototype.set=function(W){var I=this.current;(W.r!==I.r||W.g!==I.g||W.b!==I.b||W.a!==I.a||this.dirty)&&(this.gl.blendColor(W.r,W.g,W.b,W.a),this.current=W,this.dirty=!1)},$}(se),Ie=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.getDefault=function(){return this.gl.FUNC_ADD},$.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.blendEquation(W),this.current=W,this.dirty=!1)},$}(se),Re=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.getDefault=function(){return!1},$.prototype.set=function(W){if(W!==this.current||this.dirty){var I=this.gl;W?I.enable(I.CULL_FACE):I.disable(I.CULL_FACE),this.current=W,this.dirty=!1}},$}(se),Ne=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.getDefault=function(){return this.gl.BACK},$.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.cullFace(W),this.current=W,this.dirty=!1)},$}(se),ge=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.getDefault=function(){return this.gl.CCW},$.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.frontFace(W),this.current=W,this.dirty=!1)},$}(se),we=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.getDefault=function(){return null},$.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.useProgram(W),this.current=W,this.dirty=!1)},$}(se),Ce=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.getDefault=function(){return this.gl.TEXTURE0},$.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.activeTexture(W),this.current=W,this.dirty=!1)},$}(se),ze=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.getDefault=function(){var W=this.gl;return[0,0,W.drawingBufferWidth,W.drawingBufferHeight]},$.prototype.set=function(W){var I=this.current;(W[0]!==I[0]||W[1]!==I[1]||W[2]!==I[2]||W[3]!==I[3]||this.dirty)&&(this.gl.viewport(W[0],W[1],W[2],W[3]),this.current=W,this.dirty=!1)},$}(se),Pe=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.getDefault=function(){return null},$.prototype.set=function(W){if(W!==this.current||this.dirty){var I=this.gl;I.bindFramebuffer(I.FRAMEBUFFER,W),this.current=W,this.dirty=!1}},$}(se),Ue=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.getDefault=function(){return null},$.prototype.set=function(W){if(W!==this.current||this.dirty){var I=this.gl;I.bindRenderbuffer(I.RENDERBUFFER,W),this.current=W,this.dirty=!1}},$}(se),Ge=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.getDefault=function(){return null},$.prototype.set=function(W){if(W!==this.current||this.dirty){var I=this.gl;I.bindTexture(I.TEXTURE_2D,W),this.current=W,this.dirty=!1}},$}(se),Xe=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.getDefault=function(){return null},$.prototype.set=function(W){if(W!==this.current||this.dirty){var I=this.gl;I.bindBuffer(I.ARRAY_BUFFER,W),this.current=W,this.dirty=!1}},$}(se),st=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.getDefault=function(){return null},$.prototype.set=function(W){var I=this.gl;I.bindBuffer(I.ELEMENT_ARRAY_BUFFER,W),this.current=W,this.dirty=!1},$}(se),at=function(B){function $(W){B.call(this,W),this.vao=W.extVertexArrayObject}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.getDefault=function(){return null},$.prototype.set=function(W){this.vao&&(W!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(W),this.current=W,this.dirty=!1)},$}(se),vt=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.getDefault=function(){return 4},$.prototype.set=function(W){if(W!==this.current||this.dirty){var I=this.gl;I.pixelStorei(I.UNPACK_ALIGNMENT,W),this.current=W,this.dirty=!1}},$}(se),xt=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.getDefault=function(){return!1},$.prototype.set=function(W){if(W!==this.current||this.dirty){var I=this.gl;I.pixelStorei(I.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W),this.current=W,this.dirty=!1}},$}(se),gt=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.getDefault=function(){return!1},$.prototype.set=function(W){if(W!==this.current||this.dirty){var I=this.gl;I.pixelStorei(I.UNPACK_FLIP_Y_WEBGL,W),this.current=W,this.dirty=!1}},$}(se),rt=function(B){function $(W,I){B.call(this,W),this.context=W,this.parent=I}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.getDefault=function(){return null},$}(se),tt=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.setDirty=function(){this.dirty=!0},$.prototype.set=function(W){if(W!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var I=this.gl;I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.TEXTURE_2D,W,0),this.current=W,this.dirty=!1}},$}(rt),Mt=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.set=function(W){if(W!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var I=this.gl;I.framebufferRenderbuffer(I.FRAMEBUFFER,I.DEPTH_ATTACHMENT,I.RENDERBUFFER,W),this.current=W,this.dirty=!1}},$}(rt),Pt=function(B,$,W,I){this.context=B,this.width=$,this.height=W;var G=B.gl,te=this.framebuffer=G.createFramebuffer();this.colorAttachment=new tt(B,te),I&&(this.depthAttachment=new Mt(B,te))};Pt.prototype.destroy=function(){var B=this.context.gl,$=this.colorAttachment.get();if($&&B.deleteTexture($),this.depthAttachment){var W=this.depthAttachment.get();W&&B.deleteRenderbuffer(W)}B.deleteFramebuffer(this.framebuffer)};var Rt=function(B,$,W){this.func=B,this.mask=$,this.range=W};Rt.ReadOnly=!1,Rt.ReadWrite=!0,Rt.disabled=new Rt(519,Rt.ReadOnly,[0,1]);var St=7680,Ye=function(B,$,W,I,G,te){this.test=B,this.ref=$,this.mask=W,this.fail=I,this.depthFail=G,this.pass=te};Ye.disabled=new Ye({func:519,mask:0},0,0,St,St,St);var Ke=function(B,$,W){this.blendFunction=B,this.blendColor=$,this.mask=W};Ke.Replace=[1,0],Ke.disabled=new Ke(Ke.Replace,n.Color.transparent,[!1,!1,!1,!1]),Ke.unblended=new Ke(Ke.Replace,n.Color.transparent,[!0,!0,!0,!0]),Ke.alphaBlended=new Ke([1,771],n.Color.transparent,[!0,!0,!0,!0]);var Ve=function(B,$,W){this.enable=B,this.mode=$,this.frontFace=W};Ve.disabled=new Ve(!1,1029,2305),Ve.backCCW=new Ve(!0,1029,2305);var $e=function(B){this.gl=B,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new de(this),this.clearDepth=new be(this),this.clearStencil=new _e(this),this.colorMask=new xe(this),this.depthMask=new ve(this),this.stencilMask=new ye(this),this.stencilFunc=new me(this),this.stencilOp=new Me(this),this.stencilTest=new Ae(this),this.depthRange=new ce(this),this.depthTest=new ae(this),this.depthFunc=new pe(this),this.blend=new De(this),this.blendFunc=new ke(this),this.blendColor=new Ee(this),this.blendEquation=new Ie(this),this.cullFace=new Re(this),this.cullFaceSide=new Ne(this),this.frontFace=new ge(this),this.program=new we(this),this.activeTexture=new Ce(this),this.viewport=new ze(this),this.bindFramebuffer=new Pe(this),this.bindRenderbuffer=new Ue(this),this.bindTexture=new Ge(this),this.bindVertexBuffer=new Xe(this),this.bindElementBuffer=new st(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new at(this),this.pixelStoreUnpack=new vt(this),this.pixelStoreUnpackPremultiplyAlpha=new xt(this),this.pixelStoreUnpackFlipY=new gt(this),this.extTextureFilterAnisotropic=B.getExtension("EXT_texture_filter_anisotropic")||B.getExtension("MOZ_EXT_texture_filter_anisotropic")||B.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=B.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=B.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(B.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=B.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=B.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=B.getParameter(B.MAX_TEXTURE_SIZE)};$e.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},$e.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},$e.prototype.createIndexBuffer=function(B,$){return new K(this,B,$)},$e.prototype.createVertexBuffer=function(B,$,W){return new le(this,B,$,W)},$e.prototype.createRenderbuffer=function(B,$,W){var I=this.gl,G=I.createRenderbuffer();return this.bindRenderbuffer.set(G),I.renderbufferStorage(I.RENDERBUFFER,B,$,W),this.bindRenderbuffer.set(null),G},$e.prototype.createFramebuffer=function(B,$,W){return new Pt(this,B,$,W)},$e.prototype.clear=function(B){var $=B.color,W=B.depth,I=this.gl,G=0;$&&(G|=I.COLOR_BUFFER_BIT,this.clearColor.set($),this.colorMask.set([!0,!0,!0,!0])),W!==void 0&&(G|=I.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(W),this.depthMask.set(!0)),I.clear(G)},$e.prototype.setCullFace=function(B){B.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(B.mode),this.frontFace.set(B.frontFace))},$e.prototype.setDepthMode=function(B){B.func!==this.gl.ALWAYS||B.mask?(this.depthTest.set(!0),this.depthFunc.set(B.func),this.depthMask.set(B.mask),this.depthRange.set(B.range)):this.depthTest.set(!1)},$e.prototype.setStencilMode=function(B){B.test.func!==this.gl.ALWAYS||B.mask?(this.stencilTest.set(!0),this.stencilMask.set(B.mask),this.stencilOp.set([B.fail,B.depthFail,B.pass]),this.stencilFunc.set({func:B.test.func,ref:B.ref,mask:B.test.mask})):this.stencilTest.set(!1)},$e.prototype.setColorMode=function(B){n.deepEqual(B.blendFunction,Ke.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(B.blendFunction),this.blendColor.set(B.blendColor)),this.colorMask.set(B.mask)},$e.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var lt=function(B){function $(W,I,G){var te=this;B.call(this),this.id=W,this.dispatcher=G,this.on("data",function(ie){ie.dataType==="source"&&ie.sourceDataType==="metadata"&&(te._sourceLoaded=!0),te._sourceLoaded&&!te._paused&&ie.dataType==="source"&&ie.sourceDataType==="content"&&(te.reload(),te.transform&&te.update(te.transform))}),this.on("error",function(){te._sourceErrored=!0}),this._source=function(ie,he,Te,Le){var Fe=new re[he.type](ie,he,Te,Le);if(Fe.id!==ie)throw new Error("Expected Source id to be "+ie+" instead of "+Fe.id);return n.bindAll(["load","abort","unload","serialize","prepare"],Fe),Fe}(W,I,G,this),this._tiles={},this._cache=new ne(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new n.SourceFeatureState}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.onAdd=function(W){this.map=W,this._maxTileCacheSize=W?W._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(W)},$.prototype.onRemove=function(W){this._source&&this._source.onRemove&&this._source.onRemove(W)},$.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var W in this._tiles){var I=this._tiles[W];if(I.state!=="loaded"&&I.state!=="errored")return!1}return!0},$.prototype.getSource=function(){return this._source},$.prototype.pause=function(){this._paused=!0},$.prototype.resume=function(){if(this._paused){var W=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,W&&this.reload(),this.transform&&this.update(this.transform)}},$.prototype._loadTile=function(W,I){return this._source.loadTile(W,I)},$.prototype._unloadTile=function(W){if(this._source.unloadTile)return this._source.unloadTile(W,function(){})},$.prototype._abortTile=function(W){if(this._source.abortTile)return this._source.abortTile(W,function(){})},$.prototype.serialize=function(){return this._source.serialize()},$.prototype.prepare=function(W){for(var I in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var G=this._tiles[I];G.upload(W),G.prepare(this.map.style.imageManager)}},$.prototype.getIds=function(){return n.values(this._tiles).map(function(W){return W.tileID}).sort(it).map(function(W){return W.key})},$.prototype.getRenderableIds=function(W){var I=this,G=[];for(var te in this._tiles)this._isIdRenderable(te,W)&&G.push(this._tiles[te]);return W?G.sort(function(ie,he){var Te=ie.tileID,Le=he.tileID,Fe=new n.Point(Te.canonical.x,Te.canonical.y)._rotate(I.transform.angle),qe=new n.Point(Le.canonical.x,Le.canonical.y)._rotate(I.transform.angle);return Te.overscaledZ-Le.overscaledZ||qe.y-Fe.y||qe.x-Fe.x}).map(function(ie){return ie.tileID.key}):G.map(function(ie){return ie.tileID}).sort(it).map(function(ie){return ie.key})},$.prototype.hasRenderableParent=function(W){var I=this.findLoadedParent(W,0);return!!I&&this._isIdRenderable(I.tileID.key)},$.prototype._isIdRenderable=function(W,I){return this._tiles[W]&&this._tiles[W].hasData()&&!this._coveredTiles[W]&&(I||!this._tiles[W].holdingForFade())},$.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var W in this._cache.reset(),this._tiles)this._tiles[W].state!=="errored"&&this._reloadTile(W,"reloading")},$.prototype._reloadTile=function(W,I){var G=this._tiles[W];G&&(G.state!=="loading"&&(G.state=I),this._loadTile(G,this._tileLoaded.bind(this,G,W,I)))},$.prototype._tileLoaded=function(W,I,G,te){if(te)return W.state="errored",void(te.status!==404?this._source.fire(new n.ErrorEvent(te,{tile:W})):this.update(this.transform));W.timeAdded=n.browser.now(),G==="expired"&&(W.refreshedUponExpiration=!0),this._setTileReloadTimer(I,W),this.getSource().type==="raster-dem"&&W.dem&&this._backfillDEM(W),this._state.initializeTileState(W,this.map?this.map.painter:null),this._source.fire(new n.Event("data",{dataType:"source",tile:W,coord:W.tileID}))},$.prototype._backfillDEM=function(W){for(var I=this.getRenderableIds(),G=0;G<I.length;G++){var te=I[G];if(W.neighboringTiles&&W.neighboringTiles[te]){var ie=this.getTileByID(te);he(W,ie),he(ie,W)}}function he(Te,Le){Te.needsHillshadePrepare=!0;var Fe=Le.tileID.canonical.x-Te.tileID.canonical.x,qe=Le.tileID.canonical.y-Te.tileID.canonical.y,We=Math.pow(2,Te.tileID.canonical.z),nt=Le.tileID.key;Fe===0&&qe===0||Math.abs(qe)>1||(Math.abs(Fe)>1&&(Math.abs(Fe+We)===1?Fe+=We:Math.abs(Fe-We)===1&&(Fe-=We)),Le.dem&&Te.dem&&(Te.dem.backfillBorder(Le.dem,Fe,qe),Te.neighboringTiles&&Te.neighboringTiles[nt]&&(Te.neighboringTiles[nt].backfilled=!0)))}},$.prototype.getTile=function(W){return this.getTileByID(W.key)},$.prototype.getTileByID=function(W){return this._tiles[W]},$.prototype._retainLoadedChildren=function(W,I,G,te){for(var ie in this._tiles){var he=this._tiles[ie];if(!(te[ie]||!he.hasData()||he.tileID.overscaledZ<=I||he.tileID.overscaledZ>G)){for(var Te=he.tileID;he&&he.tileID.overscaledZ>I+1;){var Le=he.tileID.scaledTo(he.tileID.overscaledZ-1);(he=this._tiles[Le.key])&&he.hasData()&&(Te=Le)}for(var Fe=Te;Fe.overscaledZ>I;)if(W[(Fe=Fe.scaledTo(Fe.overscaledZ-1)).key]){te[Te.key]=Te;break}}}},$.prototype.findLoadedParent=function(W,I){if(W.key in this._loadedParentTiles){var G=this._loadedParentTiles[W.key];return G&&G.tileID.overscaledZ>=I?G:null}for(var te=W.overscaledZ-1;te>=I;te--){var ie=W.scaledTo(te),he=this._getLoadedTile(ie);if(he)return he}},$.prototype._getLoadedTile=function(W){var I=this._tiles[W.key];return I&&I.hasData()?I:this._cache.getByKey(W.wrapped().key)},$.prototype.updateCacheSize=function(W){var I=(Math.ceil(W.width/this._source.tileSize)+1)*(Math.ceil(W.height/this._source.tileSize)+1),G=Math.floor(5*I),te=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,G):G;this._cache.setMaxSize(te)},$.prototype.handleWrapJump=function(W){var I=(W-(this._prevLng===void 0?W:this._prevLng))/360,G=Math.round(I);if(this._prevLng=W,G){var te={};for(var ie in this._tiles){var he=this._tiles[ie];he.tileID=he.tileID.unwrapTo(he.tileID.wrap+G),te[he.tileID.key]=he}for(var Te in this._tiles=te,this._timers)clearTimeout(this._timers[Te]),delete this._timers[Te];for(var Le in this._tiles){var Fe=this._tiles[Le];this._setTileReloadTimer(Le,Fe)}}},$.prototype.update=function(W){var I=this;if(this.transform=W,this._sourceLoaded&&!this._paused){var G;this.updateCacheSize(W),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?G=W.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Vt){return new n.OverscaledTileID(Vt.canonical.z,Vt.wrap,Vt.canonical.z,Vt.canonical.x,Vt.canonical.y)}):(G=W.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(G=G.filter(function(Vt){return I._source.hasTile(Vt)}))):G=[];var te=W.coveringZoomLevel(this._source),ie=Math.max(te-$.maxOverzooming,this._source.minzoom),he=Math.max(te+$.maxUnderzooming,this._source.minzoom),Te=this._updateRetainedTiles(G,te);if(Be(this._source.type)){for(var Le={},Fe={},qe=0,We=Object.keys(Te);qe<We.length;qe+=1){var nt=We[qe],ft=Te[nt],pt=this._tiles[nt];if(pt&&!(pt.fadeEndTime&&pt.fadeEndTime<=n.browser.now())){var wt=this.findLoadedParent(ft,ie);wt&&(this._addTile(wt.tileID),Le[wt.tileID.key]=wt.tileID),Fe[nt]=ft}}for(var Ct in this._retainLoadedChildren(Fe,te,he,Te),Le)Te[Ct]||(this._coveredTiles[Ct]=!0,Te[Ct]=Le[Ct])}for(var At in Te)this._tiles[At].clearFadeHold();for(var zt=0,It=n.keysDifference(this._tiles,Te);zt<It.length;zt+=1){var Xt=It[zt],Gt=this._tiles[Xt];Gt.hasSymbolBuckets&&!Gt.holdingForFade()?Gt.setHoldDuration(this.map._fadeDuration):Gt.hasSymbolBuckets&&!Gt.symbolFadeFinished()||this._removeTile(Xt)}this._updateLoadedParentTileCache()}},$.prototype.releaseSymbolFadeTiles=function(){for(var W in this._tiles)this._tiles[W].holdingForFade()&&this._removeTile(W)},$.prototype._updateRetainedTiles=function(W,I){for(var G={},te={},ie=Math.max(I-$.maxOverzooming,this._source.minzoom),he=Math.max(I+$.maxUnderzooming,this._source.minzoom),Te={},Le=0,Fe=W;Le<Fe.length;Le+=1){var qe=Fe[Le],We=this._addTile(qe);G[qe.key]=qe,We.hasData()||I<this._source.maxzoom&&(Te[qe.key]=qe)}this._retainLoadedChildren(Te,I,he,G);for(var nt=0,ft=W;nt<ft.length;nt+=1){var pt=ft[nt],wt=this._tiles[pt.key];if(!wt.hasData()){if(I+1>this._source.maxzoom){var Ct=pt.children(this._source.maxzoom)[0],At=this.getTile(Ct);if(At&&At.hasData()){G[Ct.key]=Ct;continue}}else{var zt=pt.children(this._source.maxzoom);if(G[zt[0].key]&&G[zt[1].key]&&G[zt[2].key]&&G[zt[3].key])continue}for(var It=wt.wasRequested(),Xt=pt.overscaledZ-1;Xt>=ie;--Xt){var Gt=pt.scaledTo(Xt);if(te[Gt.key]||(te[Gt.key]=!0,!(wt=this.getTile(Gt))&&It&&(wt=this._addTile(Gt)),wt&&(G[Gt.key]=Gt,It=wt.wasRequested(),wt.hasData())))break}}}return G},$.prototype._updateLoadedParentTileCache=function(){for(var W in this._loadedParentTiles={},this._tiles){for(var I=[],G=void 0,te=this._tiles[W].tileID;te.overscaledZ>0;){if(te.key in this._loadedParentTiles){G=this._loadedParentTiles[te.key];break}I.push(te.key);var ie=te.scaledTo(te.overscaledZ-1);if(G=this._getLoadedTile(ie))break;te=ie}for(var he=0,Te=I;he<Te.length;he+=1){var Le=Te[he];this._loadedParentTiles[Le]=G}}},$.prototype._addTile=function(W){var I=this._tiles[W.key];if(I)return I;(I=this._cache.getAndRemove(W))&&(this._setTileReloadTimer(W.key,I),I.tileID=W,this._state.initializeTileState(I,this.map?this.map.painter:null),this._cacheTimers[W.key]&&(clearTimeout(this._cacheTimers[W.key]),delete this._cacheTimers[W.key],this._setTileReloadTimer(W.key,I)));var G=!!I;return G||(I=new n.Tile(W,this._source.tileSize*W.overscaleFactor()),this._loadTile(I,this._tileLoaded.bind(this,I,W.key,I.state))),I?(I.uses++,this._tiles[W.key]=I,G||this._source.fire(new n.Event("dataloading",{tile:I,coord:I.tileID,dataType:"source"})),I):null},$.prototype._setTileReloadTimer=function(W,I){var G=this;W in this._timers&&(clearTimeout(this._timers[W]),delete this._timers[W]);var te=I.getExpiryTimeout();te&&(this._timers[W]=setTimeout(function(){G._reloadTile(W,"expired"),delete G._timers[W]},te))},$.prototype._removeTile=function(W){var I=this._tiles[W];I&&(I.uses--,delete this._tiles[W],this._timers[W]&&(clearTimeout(this._timers[W]),delete this._timers[W]),I.uses>0||(I.hasData()&&I.state!=="reloading"?this._cache.add(I.tileID,I,I.getExpiryTimeout()):(I.aborted=!0,this._abortTile(I),this._unloadTile(I))))},$.prototype.clearTiles=function(){for(var W in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(W);this._cache.reset()},$.prototype.tilesIn=function(W,I,G){var te=this,ie=[],he=this.transform;if(!he)return ie;for(var Te=G?he.getCameraQueryGeometry(W):W,Le=W.map(function(Xt){return he.pointCoordinate(Xt)}),Fe=Te.map(function(Xt){return he.pointCoordinate(Xt)}),qe=this.getIds(),We=1/0,nt=1/0,ft=-1/0,pt=-1/0,wt=0,Ct=Fe;wt<Ct.length;wt+=1){var At=Ct[wt];We=Math.min(We,At.x),nt=Math.min(nt,At.y),ft=Math.max(ft,At.x),pt=Math.max(pt,At.y)}for(var zt=function(Xt){var Gt=te._tiles[qe[Xt]];if(!Gt.holdingForFade()){var Vt=Gt.tileID,pn=Math.pow(2,he.zoom-Gt.tileID.overscaledZ),vn=I*Gt.queryPadding*n.EXTENT/Gt.tileSize/pn,Sn=[Vt.getTilePoint(new n.MercatorCoordinate(We,nt)),Vt.getTilePoint(new n.MercatorCoordinate(ft,pt))];if(Sn[0].x-vn<n.EXTENT&&Sn[0].y-vn<n.EXTENT&&Sn[1].x+vn>=0&&Sn[1].y+vn>=0){var In=Le.map(function(nr){return Vt.getTilePoint(nr)}),Vn=Fe.map(function(nr){return Vt.getTilePoint(nr)});ie.push({tile:Gt,tileID:Vt,queryGeometry:In,cameraQueryGeometry:Vn,scale:pn})}}},It=0;It<qe.length;It++)zt(It);return ie},$.prototype.getVisibleCoordinates=function(W){for(var I=this,G=this.getRenderableIds(W).map(function(Te){return I._tiles[Te].tileID}),te=0,ie=G;te<ie.length;te+=1){var he=ie[te];he.posMatrix=this.transform.calculatePosMatrix(he.toUnwrapped())}return G},$.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Be(this._source.type))for(var W in this._tiles){var I=this._tiles[W];if(I.fadeEndTime!==void 0&&I.fadeEndTime>=n.browser.now())return!0}return!1},$.prototype.setFeatureState=function(W,I,G){W=W||"_geojsonTileLayer",this._state.updateState(W,I,G)},$.prototype.removeFeatureState=function(W,I,G){W=W||"_geojsonTileLayer",this._state.removeFeatureState(W,I,G)},$.prototype.getFeatureState=function(W,I){return W=W||"_geojsonTileLayer",this._state.getState(W,I)},$.prototype.setDependencies=function(W,I,G){var te=this._tiles[W];te&&te.setDependencies(I,G)},$.prototype.reloadTilesForDependencies=function(W,I){for(var G in this._tiles)this._tiles[G].hasDependency(W,I)&&this._reloadTile(G,"reloading");this._cache.filter(function(te){return!te.hasDependency(W,I)})},$}(n.Evented);function it(B,$){var W=Math.abs(2*B.wrap)-+(B.wrap<0),I=Math.abs(2*$.wrap)-+($.wrap<0);return B.overscaledZ-$.overscaledZ||I-W||$.canonical.y-B.canonical.y||$.canonical.x-B.canonical.x}function Be(B){return B==="raster"||B==="image"||B==="video"}function je(){return new n.window.Worker(ut.workerUrl)}lt.maxOverzooming=10,lt.maxUnderzooming=3;var ot="mapboxgl_preloaded_worker_pool",Ze=function(){this.active={}};Ze.prototype.acquire=function(B){if(!this.workers)for(this.workers=[];this.workers.length<Ze.workerCount;)this.workers.push(new je);return this.active[B]=!0,this.workers.slice()},Ze.prototype.release=function(B){delete this.active[B],this.numActive()===0&&(this.workers.forEach(function($){$.terminate()}),this.workers=null)},Ze.prototype.isPreloaded=function(){return!!this.active[ot]},Ze.prototype.numActive=function(){return Object.keys(this.active).length};var dt,mt=Math.floor(n.browser.hardwareConcurrency/2);function yt(){return dt||(dt=new Ze),dt}function ht(B,$){var W={};for(var I in B)I!=="ref"&&(W[I]=B[I]);return n.refProperties.forEach(function(G){G in $&&(W[G]=$[G])}),W}function kt(B){B=B.slice();for(var $=Object.create(null),W=0;W<B.length;W++)$[B[W].id]=B[W];for(var I=0;I<B.length;I++)"ref"in B[I]&&(B[I]=ht(B[I],$[B[I].ref]));return B}Ze.workerCount=Math.max(Math.min(mt,6),1);var _t={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Et(B,$,W){W.push({command:_t.addSource,args:[B,$[B]]})}function Lt(B,$,W){$.push({command:_t.removeSource,args:[B]}),W[B]=!0}function Ot(B,$,W,I){Lt(B,W,I),Et(B,$,W)}function Ft(B,$,W){var I;for(I in B[W])if(B[W].hasOwnProperty(I)&&I!=="data"&&!n.deepEqual(B[W][I],$[W][I]))return!1;for(I in $[W])if($[W].hasOwnProperty(I)&&I!=="data"&&!n.deepEqual(B[W][I],$[W][I]))return!1;return!0}function Zt(B,$,W,I,G,te){var ie;for(ie in $=$||{},B=B||{})B.hasOwnProperty(ie)&&(n.deepEqual(B[ie],$[ie])||W.push({command:te,args:[I,ie,$[ie],G]}));for(ie in $)$.hasOwnProperty(ie)&&!B.hasOwnProperty(ie)&&(n.deepEqual(B[ie],$[ie])||W.push({command:te,args:[I,ie,$[ie],G]}))}function Ht(B){return B.id}function Ut(B,$){return B[$.id]=$,B}function Wt(B,$){if(!B)return[{command:_t.setStyle,args:[$]}];var W=[];try{if(!n.deepEqual(B.version,$.version))return[{command:_t.setStyle,args:[$]}];n.deepEqual(B.center,$.center)||W.push({command:_t.setCenter,args:[$.center]}),n.deepEqual(B.zoom,$.zoom)||W.push({command:_t.setZoom,args:[$.zoom]}),n.deepEqual(B.bearing,$.bearing)||W.push({command:_t.setBearing,args:[$.bearing]}),n.deepEqual(B.pitch,$.pitch)||W.push({command:_t.setPitch,args:[$.pitch]}),n.deepEqual(B.sprite,$.sprite)||W.push({command:_t.setSprite,args:[$.sprite]}),n.deepEqual(B.glyphs,$.glyphs)||W.push({command:_t.setGlyphs,args:[$.glyphs]}),n.deepEqual(B.transition,$.transition)||W.push({command:_t.setTransition,args:[$.transition]}),n.deepEqual(B.light,$.light)||W.push({command:_t.setLight,args:[$.light]});var I={},G=[];(function(ie,he,Te,Le){var Fe;for(Fe in he=he||{},ie=ie||{})ie.hasOwnProperty(Fe)&&(he.hasOwnProperty(Fe)||Lt(Fe,Te,Le));for(Fe in he)he.hasOwnProperty(Fe)&&(ie.hasOwnProperty(Fe)?n.deepEqual(ie[Fe],he[Fe])||(ie[Fe].type==="geojson"&&he[Fe].type==="geojson"&&Ft(ie,he,Fe)?Te.push({command:_t.setGeoJSONSourceData,args:[Fe,he[Fe].data]}):Ot(Fe,he,Te,Le)):Et(Fe,he,Te))})(B.sources,$.sources,G,I);var te=[];B.layers&&B.layers.forEach(function(ie){I[ie.source]?W.push({command:_t.removeLayer,args:[ie.id]}):te.push(ie)}),W=W.concat(G),function(ie,he,Te){he=he||[];var Le,Fe,qe,We,nt,ft,pt,wt=(ie=ie||[]).map(Ht),Ct=he.map(Ht),At=ie.reduce(Ut,{}),zt=he.reduce(Ut,{}),It=wt.slice(),Xt=Object.create(null);for(Le=0,Fe=0;Le<wt.length;Le++)qe=wt[Le],zt.hasOwnProperty(qe)?Fe++:(Te.push({command:_t.removeLayer,args:[qe]}),It.splice(It.indexOf(qe,Fe),1));for(Le=0,Fe=0;Le<Ct.length;Le++)qe=Ct[Ct.length-1-Le],It[It.length-1-Le]!==qe&&(At.hasOwnProperty(qe)?(Te.push({command:_t.removeLayer,args:[qe]}),It.splice(It.lastIndexOf(qe,It.length-Fe),1)):Fe++,ft=It[It.length-Le],Te.push({command:_t.addLayer,args:[zt[qe],ft]}),It.splice(It.length-Le,0,qe),Xt[qe]=!0);for(Le=0;Le<Ct.length;Le++)if(We=At[qe=Ct[Le]],nt=zt[qe],!Xt[qe]&&!n.deepEqual(We,nt))if(n.deepEqual(We.source,nt.source)&&n.deepEqual(We["source-layer"],nt["source-layer"])&&n.deepEqual(We.type,nt.type)){for(pt in Zt(We.layout,nt.layout,Te,qe,null,_t.setLayoutProperty),Zt(We.paint,nt.paint,Te,qe,null,_t.setPaintProperty),n.deepEqual(We.filter,nt.filter)||Te.push({command:_t.setFilter,args:[qe,nt.filter]}),n.deepEqual(We.minzoom,nt.minzoom)&&n.deepEqual(We.maxzoom,nt.maxzoom)||Te.push({command:_t.setLayerZoomRange,args:[qe,nt.minzoom,nt.maxzoom]}),We)We.hasOwnProperty(pt)&&pt!=="layout"&&pt!=="paint"&&pt!=="filter"&&pt!=="metadata"&&pt!=="minzoom"&&pt!=="maxzoom"&&(pt.indexOf("paint.")===0?Zt(We[pt],nt[pt],Te,qe,pt.slice(6),_t.setPaintProperty):n.deepEqual(We[pt],nt[pt])||Te.push({command:_t.setLayerProperty,args:[qe,pt,nt[pt]]}));for(pt in nt)nt.hasOwnProperty(pt)&&!We.hasOwnProperty(pt)&&pt!=="layout"&&pt!=="paint"&&pt!=="filter"&&pt!=="metadata"&&pt!=="minzoom"&&pt!=="maxzoom"&&(pt.indexOf("paint.")===0?Zt(We[pt],nt[pt],Te,qe,pt.slice(6),_t.setPaintProperty):n.deepEqual(We[pt],nt[pt])||Te.push({command:_t.setLayerProperty,args:[qe,pt,nt[pt]]}))}else Te.push({command:_t.removeLayer,args:[qe]}),ft=It[It.lastIndexOf(qe)+1],Te.push({command:_t.addLayer,args:[nt,ft]})}(te,$.layers,W)}catch(ie){console.warn("Unable to compute style diff:",ie),W=[{command:_t.setStyle,args:[$]}]}return W}var nn=function(B,$){this.reset(B,$)};nn.prototype.reset=function(B,$){this.points=B||[],this._distances=[0];for(var W=1;W<this.points.length;W++)this._distances[W]=this._distances[W-1]+this.points[W].dist(this.points[W-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min($||0,.5*this.length),this.paddedLength=this.length-2*this.padding},nn.prototype.lerp=function(B){if(this.points.length===1)return this.points[0];B=n.clamp(B,0,1);for(var $=1,W=this._distances[$],I=B*this.paddedLength+this.padding;W<I&&$<this._distances.length;)W=this._distances[++$];var G=$-1,te=this._distances[G],ie=W-te,he=ie>0?(I-te)/ie:0;return this.points[G].mult(1-he).add(this.points[$].mult(he))};var On=function(B,$,W){var I=this.boxCells=[],G=this.circleCells=[];this.xCellCount=Math.ceil(B/W),this.yCellCount=Math.ceil($/W);for(var te=0;te<this.xCellCount*this.yCellCount;te++)I.push([]),G.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=B,this.height=$,this.xScale=this.xCellCount/B,this.yScale=this.yCellCount/$,this.boxUid=0,this.circleUid=0};function kn(B,$,W,I,G){var te=n.create();return $?(n.scale(te,te,[1/G,1/G,1]),W||n.rotateZ(te,te,I.angle)):n.multiply(te,I.labelPlaneMatrix,B),te}function gn(B,$,W,I,G){if($){var te=n.clone(B);return n.scale(te,te,[G,G,1]),W||n.rotateZ(te,te,-I.angle),te}return I.glCoordMatrix}function Jt(B,$){var W=[B.x,B.y,0,1];rr(W,W,$);var I=W[3];return{point:new n.Point(W[0]/I,W[1]/I),signedDistanceFromCamera:I}}function un(B,$){return .5+B/$*.5}function tn(B,$){var W=B[0]/B[3],I=B[1]/B[3];return W>=-$[0]&&W<=$[0]&&I>=-$[1]&&I<=$[1]}function hn(B,$,W,I,G,te,ie,he){var Te=I?B.textSizeData:B.iconSizeData,Le=n.evaluateSizeForZoom(Te,W.transform.zoom),Fe=[256/W.width*2+1,256/W.height*2+1],qe=I?B.text.dynamicLayoutVertexArray:B.icon.dynamicLayoutVertexArray;qe.clear();for(var We=B.lineVertexArray,nt=I?B.text.placedSymbolArray:B.icon.placedSymbolArray,ft=W.transform.width/W.transform.height,pt=!1,wt=0;wt<nt.length;wt++){var Ct=nt.get(wt);if(Ct.hidden||Ct.writingMode===n.WritingMode.vertical&&!pt)Nn(Ct.numGlyphs,qe);else{pt=!1;var At=[Ct.anchorX,Ct.anchorY,0,1];if(n.transformMat4(At,At,$),tn(At,Fe)){var zt=At[3],It=un(W.transform.cameraToCenterDistance,zt),Xt=n.evaluateSizeForFeature(Te,Le,Ct),Gt=ie?Xt/It:Xt*It,Vt=new n.Point(Ct.anchorX,Ct.anchorY),pn=Jt(Vt,G).point,vn={},Sn=Pn(Ct,Gt,!1,he,$,G,te,B.glyphOffsetArray,We,qe,pn,Vt,vn,ft);pt=Sn.useVertical,(Sn.notEnoughRoom||pt||Sn.needsFlipping&&Pn(Ct,Gt,!0,he,$,G,te,B.glyphOffsetArray,We,qe,pn,Vt,vn,ft).notEnoughRoom)&&Nn(Ct.numGlyphs,qe)}else Nn(Ct.numGlyphs,qe)}}I?B.text.dynamicLayoutVertexBuffer.updateData(qe):B.icon.dynamicLayoutVertexBuffer.updateData(qe)}function bn(B,$,W,I,G,te,ie,he,Te,Le,Fe){var qe=he.glyphStartIndex+he.numGlyphs,We=he.lineStartIndex,nt=he.lineStartIndex+he.lineLength,ft=$.getoffsetX(he.glyphStartIndex),pt=$.getoffsetX(qe-1),wt=Mn(B*ft,W,I,G,te,ie,he.segment,We,nt,Te,Le,Fe);if(!wt)return null;var Ct=Mn(B*pt,W,I,G,te,ie,he.segment,We,nt,Te,Le,Fe);return Ct?{first:wt,last:Ct}:null}function wn(B,$,W,I){return B===n.WritingMode.horizontal&&Math.abs(W.y-$.y)>Math.abs(W.x-$.x)*I?{useVertical:!0}:(B===n.WritingMode.vertical?$.y<W.y:$.x>W.x)?{needsFlipping:!0}:null}function Pn(B,$,W,I,G,te,ie,he,Te,Le,Fe,qe,We,nt){var ft,pt=$/24,wt=B.lineOffsetX*pt,Ct=B.lineOffsetY*pt;if(B.numGlyphs>1){var At=B.glyphStartIndex+B.numGlyphs,zt=B.lineStartIndex,It=B.lineStartIndex+B.lineLength,Xt=bn(pt,he,wt,Ct,W,Fe,qe,B,Te,te,We);if(!Xt)return{notEnoughRoom:!0};var Gt=Jt(Xt.first.point,ie).point,Vt=Jt(Xt.last.point,ie).point;if(I&&!W){var pn=wn(B.writingMode,Gt,Vt,nt);if(pn)return pn}ft=[Xt.first];for(var vn=B.glyphStartIndex+1;vn<At-1;vn++)ft.push(Mn(pt*he.getoffsetX(vn),wt,Ct,W,Fe,qe,B.segment,zt,It,Te,te,We));ft.push(Xt.last)}else{if(I&&!W){var Sn=Jt(qe,G).point,In=B.lineStartIndex+B.segment+1,Vn=new n.Point(Te.getx(In),Te.gety(In)),nr=Jt(Vn,G),cr=nr.signedDistanceFromCamera>0?nr.point:Cn(qe,Vn,Sn,1,G),Gn=wn(B.writingMode,Sn,cr,nt);if(Gn)return Gn}var lr=Mn(pt*he.getoffsetX(B.glyphStartIndex),wt,Ct,W,Fe,qe,B.segment,B.lineStartIndex,B.lineStartIndex+B.lineLength,Te,te,We);if(!lr)return{notEnoughRoom:!0};ft=[lr]}for(var xr=0,Er=ft;xr<Er.length;xr+=1){var er=Er[xr];n.addDynamicAttributes(Le,er.point,er.angle)}return{}}function Cn(B,$,W,I,G){var te=Jt(B.add(B.sub($)._unit()),G).point,ie=W.sub(te);return W.add(ie._mult(I/ie.mag()))}function Mn(B,$,W,I,G,te,ie,he,Te,Le,Fe,qe){var We=I?B-$:B+$,nt=We>0?1:-1,ft=0;I&&(nt*=-1,ft=Math.PI),nt<0&&(ft+=Math.PI);for(var pt=nt>0?he+ie:he+ie+1,wt=G,Ct=G,At=0,zt=0,It=Math.abs(We),Xt=[];At+zt<=It;){if((pt+=nt)<he||pt>=Te)return null;if(Ct=wt,Xt.push(wt),(wt=qe[pt])===void 0){var Gt=new n.Point(Le.getx(pt),Le.gety(pt)),Vt=Jt(Gt,Fe);if(Vt.signedDistanceFromCamera>0)wt=qe[pt]=Vt.point;else{var pn=pt-nt;wt=Cn(At===0?te:new n.Point(Le.getx(pn),Le.gety(pn)),Gt,Ct,It-At+1,Fe)}}At+=zt,zt=Ct.dist(wt)}var vn=(It-At)/zt,Sn=wt.sub(Ct),In=Sn.mult(vn)._add(Ct);In._add(Sn._unit()._perp()._mult(W*nt));var Vn=ft+Math.atan2(wt.y-Ct.y,wt.x-Ct.x);return Xt.push(In),{point:In,angle:Vn,path:Xt}}On.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},On.prototype.insert=function(B,$,W,I,G){this._forEachCell($,W,I,G,this._insertBoxCell,this.boxUid++),this.boxKeys.push(B),this.bboxes.push($),this.bboxes.push(W),this.bboxes.push(I),this.bboxes.push(G)},On.prototype.insertCircle=function(B,$,W,I){this._forEachCell($-I,W-I,$+I,W+I,this._insertCircleCell,this.circleUid++),this.circleKeys.push(B),this.circles.push($),this.circles.push(W),this.circles.push(I)},On.prototype._insertBoxCell=function(B,$,W,I,G,te){this.boxCells[G].push(te)},On.prototype._insertCircleCell=function(B,$,W,I,G,te){this.circleCells[G].push(te)},On.prototype._query=function(B,$,W,I,G,te){if(W<0||B>this.width||I<0||$>this.height)return!G&&[];var ie=[];if(B<=0&&$<=0&&this.width<=W&&this.height<=I){if(G)return!0;for(var he=0;he<this.boxKeys.length;he++)ie.push({key:this.boxKeys[he],x1:this.bboxes[4*he],y1:this.bboxes[4*he+1],x2:this.bboxes[4*he+2],y2:this.bboxes[4*he+3]});for(var Te=0;Te<this.circleKeys.length;Te++){var Le=this.circles[3*Te],Fe=this.circles[3*Te+1],qe=this.circles[3*Te+2];ie.push({key:this.circleKeys[Te],x1:Le-qe,y1:Fe-qe,x2:Le+qe,y2:Fe+qe})}return te?ie.filter(te):ie}var We={hitTest:G,seenUids:{box:{},circle:{}}};return this._forEachCell(B,$,W,I,this._queryCell,ie,We,te),G?ie.length>0:ie},On.prototype._queryCircle=function(B,$,W,I,G){var te=B-W,ie=B+W,he=$-W,Te=$+W;if(ie<0||te>this.width||Te<0||he>this.height)return!I&&[];var Le=[],Fe={hitTest:I,circle:{x:B,y:$,radius:W},seenUids:{box:{},circle:{}}};return this._forEachCell(te,he,ie,Te,this._queryCellCircle,Le,Fe,G),I?Le.length>0:Le},On.prototype.query=function(B,$,W,I,G){return this._query(B,$,W,I,!1,G)},On.prototype.hitTest=function(B,$,W,I,G){return this._query(B,$,W,I,!0,G)},On.prototype.hitTestCircle=function(B,$,W,I){return this._queryCircle(B,$,W,!0,I)},On.prototype._queryCell=function(B,$,W,I,G,te,ie,he){var Te=ie.seenUids,Le=this.boxCells[G];if(Le!==null)for(var Fe=this.bboxes,qe=0,We=Le;qe<We.length;qe+=1){var nt=We[qe];if(!Te.box[nt]){Te.box[nt]=!0;var ft=4*nt;if(B<=Fe[ft+2]&&$<=Fe[ft+3]&&W>=Fe[ft+0]&&I>=Fe[ft+1]&&(!he||he(this.boxKeys[nt]))){if(ie.hitTest)return te.push(!0),!0;te.push({key:this.boxKeys[nt],x1:Fe[ft],y1:Fe[ft+1],x2:Fe[ft+2],y2:Fe[ft+3]})}}}var pt=this.circleCells[G];if(pt!==null)for(var wt=this.circles,Ct=0,At=pt;Ct<At.length;Ct+=1){var zt=At[Ct];if(!Te.circle[zt]){Te.circle[zt]=!0;var It=3*zt;if(this._circleAndRectCollide(wt[It],wt[It+1],wt[It+2],B,$,W,I)&&(!he||he(this.circleKeys[zt]))){if(ie.hitTest)return te.push(!0),!0;var Xt=wt[It],Gt=wt[It+1],Vt=wt[It+2];te.push({key:this.circleKeys[zt],x1:Xt-Vt,y1:Gt-Vt,x2:Xt+Vt,y2:Gt+Vt})}}}},On.prototype._queryCellCircle=function(B,$,W,I,G,te,ie,he){var Te=ie.circle,Le=ie.seenUids,Fe=this.boxCells[G];if(Fe!==null)for(var qe=this.bboxes,We=0,nt=Fe;We<nt.length;We+=1){var ft=nt[We];if(!Le.box[ft]){Le.box[ft]=!0;var pt=4*ft;if(this._circleAndRectCollide(Te.x,Te.y,Te.radius,qe[pt+0],qe[pt+1],qe[pt+2],qe[pt+3])&&(!he||he(this.boxKeys[ft])))return te.push(!0),!0}}var wt=this.circleCells[G];if(wt!==null)for(var Ct=this.circles,At=0,zt=wt;At<zt.length;At+=1){var It=zt[At];if(!Le.circle[It]){Le.circle[It]=!0;var Xt=3*It;if(this._circlesCollide(Ct[Xt],Ct[Xt+1],Ct[Xt+2],Te.x,Te.y,Te.radius)&&(!he||he(this.circleKeys[It])))return te.push(!0),!0}}},On.prototype._forEachCell=function(B,$,W,I,G,te,ie,he){for(var Te=this._convertToXCellCoord(B),Le=this._convertToYCellCoord($),Fe=this._convertToXCellCoord(W),qe=this._convertToYCellCoord(I),We=Te;We<=Fe;We++)for(var nt=Le;nt<=qe;nt++){var ft=this.xCellCount*nt+We;if(G.call(this,B,$,W,I,ft,te,ie,he))return}},On.prototype._convertToXCellCoord=function(B){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(B*this.xScale)))},On.prototype._convertToYCellCoord=function(B){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(B*this.yScale)))},On.prototype._circlesCollide=function(B,$,W,I,G,te){var ie=I-B,he=G-$,Te=W+te;return Te*Te>ie*ie+he*he},On.prototype._circleAndRectCollide=function(B,$,W,I,G,te,ie){var he=(te-I)/2,Te=Math.abs(B-(I+he));if(Te>he+W)return!1;var Le=(ie-G)/2,Fe=Math.abs($-(G+Le));if(Fe>Le+W)return!1;if(Te<=he||Fe<=Le)return!0;var qe=Te-he,We=Fe-Le;return qe*qe+We*We<=W*W};var Bn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Nn(B,$){for(var W=0;W<B;W++){var I=$.length;$.resize(I+4),$.float32.set(Bn,3*I)}}function rr(B,$,W){var I=$[0],G=$[1];return B[0]=W[0]*I+W[4]*G+W[12],B[1]=W[1]*I+W[5]*G+W[13],B[3]=W[3]*I+W[7]*G+W[15],B}var Yn=100,ir=function(B,$,W){$===void 0&&($=new On(B.width+200,B.height+200,25)),W===void 0&&(W=new On(B.width+200,B.height+200,25)),this.transform=B,this.grid=$,this.ignoredGrid=W,this.pitchfactor=Math.cos(B._pitch)*B.cameraToCenterDistance,this.screenRightBoundary=B.width+Yn,this.screenBottomBoundary=B.height+Yn,this.gridRightBoundary=B.width+200,this.gridBottomBoundary=B.height+200};function Zn(B,$,W){return $*(n.EXTENT/(B.tileSize*Math.pow(2,W-B.tileID.overscaledZ)))}ir.prototype.placeCollisionBox=function(B,$,W,I,G){var te=this.projectAndGetPerspectiveRatio(I,B.anchorPointX,B.anchorPointY),ie=W*te.perspectiveRatio,he=B.x1*ie+te.point.x,Te=B.y1*ie+te.point.y,Le=B.x2*ie+te.point.x,Fe=B.y2*ie+te.point.y;return!this.isInsideGrid(he,Te,Le,Fe)||!$&&this.grid.hitTest(he,Te,Le,Fe,G)?{box:[],offscreen:!1}:{box:[he,Te,Le,Fe],offscreen:this.isOffscreen(he,Te,Le,Fe)}},ir.prototype.placeCollisionCircles=function(B,$,W,I,G,te,ie,he,Te,Le,Fe,qe,We){var nt=[],ft=new n.Point($.anchorX,$.anchorY),pt=Jt(ft,te),wt=un(this.transform.cameraToCenterDistance,pt.signedDistanceFromCamera),Ct=(Le?G/wt:G*wt)/n.ONE_EM,At=Jt(ft,ie).point,zt=bn(Ct,I,$.lineOffsetX*Ct,$.lineOffsetY*Ct,!1,At,ft,$,W,ie,{}),It=!1,Xt=!1,Gt=!0;if(zt){for(var Vt=.5*qe*wt+We,pn=new n.Point(-100,-100),vn=new n.Point(this.screenRightBoundary,this.screenBottomBoundary),Sn=new nn,In=zt.first,Vn=zt.last,nr=[],cr=In.path.length-1;cr>=1;cr--)nr.push(In.path[cr]);for(var Gn=1;Gn<Vn.path.length;Gn++)nr.push(Vn.path[Gn]);var lr=2.5*Vt;if(he){var xr=nr.map(function(ei){return Jt(ei,he)});nr=xr.some(function(ei){return ei.signedDistanceFromCamera<=0})?[]:xr.map(function(ei){return ei.point})}var Er=[];if(nr.length>0){for(var er=nr[0].clone(),sr=nr[0].clone(),wr=1;wr<nr.length;wr++)er.x=Math.min(er.x,nr[wr].x),er.y=Math.min(er.y,nr[wr].y),sr.x=Math.max(sr.x,nr[wr].x),sr.y=Math.max(sr.y,nr[wr].y);Er=er.x>=pn.x&&sr.x<=vn.x&&er.y>=pn.y&&sr.y<=vn.y?[nr]:sr.x<pn.x||er.x>vn.x||sr.y<pn.y||er.y>vn.y?[]:n.clipLine([nr],pn.x,pn.y,vn.x,vn.y)}for(var fr=0,Ar=Er;fr<Ar.length;fr+=1){var Ir=Ar[fr];Sn.reset(Ir,.25*Vt);var Vr;Vr=Sn.length<=.5*Vt?1:Math.ceil(Sn.paddedLength/lr)+1;for(var Ur=0;Ur<Vr;Ur++){var Wr=Ur/Math.max(Vr-1,1),Kr=Sn.lerp(Wr),ki=Kr.x+Yn,qi=Kr.y+Yn;nt.push(ki,qi,Vt,0);var Do=ki-Vt,fo=qi-Vt,To=ki+Vt,Oi=qi+Vt;if(Gt=Gt&&this.isOffscreen(Do,fo,To,Oi),Xt=Xt||this.isInsideGrid(Do,fo,To,Oi),!B&&this.grid.hitTestCircle(ki,qi,Vt,Fe)&&(It=!0,!Te))return{circles:[],offscreen:!1,collisionDetected:It}}}}return{circles:!Te&&It||!Xt?[]:nt,offscreen:Gt,collisionDetected:It}},ir.prototype.queryRenderedSymbols=function(B){if(B.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var $=[],W=1/0,I=1/0,G=-1/0,te=-1/0,ie=0,he=B;ie<he.length;ie+=1){var Te=he[ie],Le=new n.Point(Te.x+Yn,Te.y+Yn);W=Math.min(W,Le.x),I=Math.min(I,Le.y),G=Math.max(G,Le.x),te=Math.max(te,Le.y),$.push(Le)}for(var Fe={},qe={},We=0,nt=this.grid.query(W,I,G,te).concat(this.ignoredGrid.query(W,I,G,te));We<nt.length;We+=1){var ft=nt[We],pt=ft.key;if(Fe[pt.bucketInstanceId]===void 0&&(Fe[pt.bucketInstanceId]={}),!Fe[pt.bucketInstanceId][pt.featureIndex]){var wt=[new n.Point(ft.x1,ft.y1),new n.Point(ft.x2,ft.y1),new n.Point(ft.x2,ft.y2),new n.Point(ft.x1,ft.y2)];n.polygonIntersectsPolygon($,wt)&&(Fe[pt.bucketInstanceId][pt.featureIndex]=!0,qe[pt.bucketInstanceId]===void 0&&(qe[pt.bucketInstanceId]=[]),qe[pt.bucketInstanceId].push(pt.featureIndex))}}return qe},ir.prototype.insertCollisionBox=function(B,$,W,I,G){var te={bucketInstanceId:W,featureIndex:I,collisionGroupID:G};($?this.ignoredGrid:this.grid).insert(te,B[0],B[1],B[2],B[3])},ir.prototype.insertCollisionCircles=function(B,$,W,I,G){for(var te=$?this.ignoredGrid:this.grid,ie={bucketInstanceId:W,featureIndex:I,collisionGroupID:G},he=0;he<B.length;he+=4)te.insertCircle(ie,B[he],B[he+1],B[he+2])},ir.prototype.projectAndGetPerspectiveRatio=function(B,$,W){var I=[$,W,0,1];return rr(I,I,B),{point:new n.Point((I[0]/I[3]+1)/2*this.transform.width+Yn,(-I[1]/I[3]+1)/2*this.transform.height+Yn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/I[3]*.5}},ir.prototype.isOffscreen=function(B,$,W,I){return W<Yn||B>=this.screenRightBoundary||I<Yn||$>this.screenBottomBoundary},ir.prototype.isInsideGrid=function(B,$,W,I){return W>=0&&B<this.gridRightBoundary&&I>=0&&$<this.gridBottomBoundary},ir.prototype.getViewportMatrix=function(){var B=n.identity([]);return n.translate(B,B,[-100,-100,0]),B};var ur=function(B,$,W,I){this.opacity=B?Math.max(0,Math.min(1,B.opacity+(B.placed?$:-$))):I&&W?1:0,this.placed=W};ur.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var en=function(B,$,W,I,G){this.text=new ur(B?B.text:null,$,W,G),this.icon=new ur(B?B.icon:null,$,I,G)};en.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var on=function(B,$,W){this.text=B,this.icon=$,this.skipFade=W},Dn=function(){this.invProjMatrix=n.create(),this.viewportMatrix=n.create(),this.circles=[]},yn=function(B,$,W,I,G){this.bucketInstanceId=B,this.featureIndex=$,this.sourceLayerIndex=W,this.bucketIndex=I,this.tileID=G},Ln=function(B){this.crossSourceCollisions=B,this.maxGroupID=0,this.collisionGroups={}};function Wn(B,$,W,I,G){var te=n.getAnchorAlignment(B),ie=-(te.horizontalAlign-.5)*$,he=-(te.verticalAlign-.5)*W,Te=n.evaluateVariableOffset(B,I);return new n.Point(ie+Te[0]*G,he+Te[1]*G)}function Un(B,$,W,I,G,te){var ie=B.x1,he=B.x2,Te=B.y1,Le=B.y2,Fe=B.anchorPointX,qe=B.anchorPointY,We=new n.Point($,W);return I&&We._rotate(G?te:-te),{x1:ie+We.x,y1:Te+We.y,x2:he+We.x,y2:Le+We.y,anchorPointX:Fe,anchorPointY:qe}}Ln.prototype.get=function(B){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[B]){var $=++this.maxGroupID;this.collisionGroups[B]={ID:$,predicate:function(W){return W.collisionGroupID===$}}}return this.collisionGroups[B]};var Xn=function(B,$,W,I){this.transform=B.clone(),this.collisionIndex=new ir(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=$,this.retainedQueryData={},this.collisionGroups=new Ln(W),this.collisionCircleArrays={},this.prevPlacement=I,I&&(I.prevPlacement=void 0),this.placedOrientations={}};function pr(B,$,W,I,G){B.emplaceBack($?1:0,W?1:0,I||0,G||0),B.emplaceBack($?1:0,W?1:0,I||0,G||0),B.emplaceBack($?1:0,W?1:0,I||0,G||0),B.emplaceBack($?1:0,W?1:0,I||0,G||0)}Xn.prototype.getBucketParts=function(B,$,W,I){var G=W.getBucket($),te=W.latestFeatureIndex;if(G&&te&&$.id===G.layerIds[0]){var ie=W.collisionBoxArray,he=G.layers[0].layout,Te=Math.pow(2,this.transform.zoom-W.tileID.overscaledZ),Le=W.tileSize/n.EXTENT,Fe=this.transform.calculatePosMatrix(W.tileID.toUnwrapped()),qe=he.get("text-pitch-alignment")==="map",We=he.get("text-rotation-alignment")==="map",nt=Zn(W,1,this.transform.zoom),ft=kn(Fe,qe,We,this.transform,nt),pt=null;if(qe){var wt=gn(Fe,qe,We,this.transform,nt);pt=n.multiply([],this.transform.labelPlaneMatrix,wt)}this.retainedQueryData[G.bucketInstanceId]=new yn(G.bucketInstanceId,te,G.sourceLayerIndex,G.index,W.tileID);var Ct={bucket:G,layout:he,posMatrix:Fe,textLabelPlaneMatrix:ft,labelToScreenMatrix:pt,scale:Te,textPixelRatio:Le,holdingForFade:W.holdingForFade(),collisionBoxArray:ie,partiallyEvaluatedTextSize:n.evaluateSizeForZoom(G.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(G.sourceID)};if(I)for(var At=0,zt=G.sortKeyRanges;At<zt.length;At+=1){var It=zt[At],Xt=It.sortKey,Gt=It.symbolInstanceStart,Vt=It.symbolInstanceEnd;B.push({sortKey:Xt,symbolInstanceStart:Gt,symbolInstanceEnd:Vt,parameters:Ct})}else B.push({symbolInstanceStart:0,symbolInstanceEnd:G.symbolInstances.length,parameters:Ct})}},Xn.prototype.attemptAnchorPlacement=function(B,$,W,I,G,te,ie,he,Te,Le,Fe,qe,We,nt,ft){var pt,wt=[qe.textOffset0,qe.textOffset1],Ct=Wn(B,W,I,wt,G),At=this.collisionIndex.placeCollisionBox(Un($,Ct.x,Ct.y,te,ie,this.transform.angle),Fe,he,Te,Le.predicate);if(!ft||this.collisionIndex.placeCollisionBox(Un(ft,Ct.x,Ct.y,te,ie,this.transform.angle),Fe,he,Te,Le.predicate).box.length!==0)return At.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[qe.crossTileID]&&this.prevPlacement.placements[qe.crossTileID]&&this.prevPlacement.placements[qe.crossTileID].text&&(pt=this.prevPlacement.variableOffsets[qe.crossTileID].anchor),this.variableOffsets[qe.crossTileID]={textOffset:wt,width:W,height:I,anchor:B,textBoxScale:G,prevAnchor:pt},this.markUsedJustification(We,B,qe,nt),We.allowVerticalPlacement&&(this.markUsedOrientation(We,nt,qe),this.placedOrientations[qe.crossTileID]=nt),{shift:Ct,placedGlyphBoxes:At}):void 0},Xn.prototype.placeLayerBucketPart=function(B,$,W){var I=this,G=B.parameters,te=G.bucket,ie=G.layout,he=G.posMatrix,Te=G.textLabelPlaneMatrix,Le=G.labelToScreenMatrix,Fe=G.textPixelRatio,qe=G.holdingForFade,We=G.collisionBoxArray,nt=G.partiallyEvaluatedTextSize,ft=G.collisionGroup,pt=ie.get("text-optional"),wt=ie.get("icon-optional"),Ct=ie.get("text-allow-overlap"),At=ie.get("icon-allow-overlap"),zt=ie.get("text-rotation-alignment")==="map",It=ie.get("text-pitch-alignment")==="map",Xt=ie.get("icon-text-fit")!=="none",Gt=ie.get("symbol-z-order")==="viewport-y",Vt=Ct&&(At||!te.hasIconData()||wt),pn=At&&(Ct||!te.hasTextData()||pt);!te.collisionArrays&&We&&te.deserializeCollisionBoxes(We);var vn=function(Gn,lr){if(!$[Gn.crossTileID])if(qe)I.placements[Gn.crossTileID]=new on(!1,!1,!1);else{var xr,Er=!1,er=!1,sr=!0,wr=null,fr={box:null,offscreen:null},Ar={box:null,offscreen:null},Ir=null,Vr=null,Ur=0,Wr=0,Kr=0;lr.textFeatureIndex?Ur=lr.textFeatureIndex:Gn.useRuntimeCollisionCircles&&(Ur=Gn.featureIndex),lr.verticalTextFeatureIndex&&(Wr=lr.verticalTextFeatureIndex);var ki=lr.textBox;if(ki){var qi=function(Vi){var ea=n.WritingMode.horizontal;if(te.allowVerticalPlacement&&!Vi&&I.prevPlacement){var yo=I.prevPlacement.placedOrientations[Gn.crossTileID];yo&&(I.placedOrientations[Gn.crossTileID]=yo,ea=yo,I.markUsedOrientation(te,ea,Gn))}return ea},Do=function(Vi,ea){if(te.allowVerticalPlacement&&Gn.numVerticalGlyphVertices>0&&lr.verticalTextBox)for(var yo=0,gc=te.writingModes;yo<gc.length&&(gc[yo]===n.WritingMode.vertical?(fr=ea(),Ar=fr):fr=Vi(),!(fr&&fr.box&&fr.box.length));yo+=1);else fr=Vi()};if(ie.get("text-variable-anchor")){var fo=ie.get("text-variable-anchor");if(I.prevPlacement&&I.prevPlacement.variableOffsets[Gn.crossTileID]){var To=I.prevPlacement.variableOffsets[Gn.crossTileID];fo.indexOf(To.anchor)>0&&(fo=fo.filter(function(Vi){return Vi!==To.anchor})).unshift(To.anchor)}var Oi=function(Vi,ea,yo){for(var gc=Vi.x2-Vi.x1,z0=Vi.y2-Vi.y1,_d=Gn.textBoxScale,B0=Xt&&!At?ea:null,Gu={box:[],offscreen:!1},j0=Ct?2*fo.length:fo.length,Wu=0;Wu<j0;++Wu){var wd=fo[Wu%fo.length],Td=Wu>=fo.length,iu=I.attemptAnchorPlacement(wd,Vi,gc,z0,_d,zt,It,Fe,he,ft,Td,Gn,te,yo,B0);if(iu&&(Gu=iu.placedGlyphBoxes)&&Gu.box&&Gu.box.length){Er=!0,wr=iu.shift;break}}return Gu};Do(function(){return Oi(ki,lr.iconBox,n.WritingMode.horizontal)},function(){var Vi=lr.verticalTextBox,ea=fr&&fr.box&&fr.box.length;return te.allowVerticalPlacement&&!ea&&Gn.numVerticalGlyphVertices>0&&Vi?Oi(Vi,lr.verticalIconBox,n.WritingMode.vertical):{box:null,offscreen:null}}),fr&&(Er=fr.box,sr=fr.offscreen);var ei=qi(fr&&fr.box);if(!Er&&I.prevPlacement){var Bi=I.prevPlacement.variableOffsets[Gn.crossTileID];Bi&&(I.variableOffsets[Gn.crossTileID]=Bi,I.markUsedJustification(te,Bi.anchor,Gn,ei))}}else{var vi=function(Vi,ea){var yo=I.collisionIndex.placeCollisionBox(Vi,Ct,Fe,he,ft.predicate);return yo&&yo.box&&yo.box.length&&(I.markUsedOrientation(te,ea,Gn),I.placedOrientations[Gn.crossTileID]=ea),yo};Do(function(){return vi(ki,n.WritingMode.horizontal)},function(){var Vi=lr.verticalTextBox;return te.allowVerticalPlacement&&Gn.numVerticalGlyphVertices>0&&Vi?vi(Vi,n.WritingMode.vertical):{box:null,offscreen:null}}),qi(fr&&fr.box&&fr.box.length)}}if(Er=(xr=fr)&&xr.box&&xr.box.length>0,sr=xr&&xr.offscreen,Gn.useRuntimeCollisionCircles){var oi=te.text.placedSymbolArray.get(Gn.centerJustifiedTextSymbolIndex),ji=n.evaluateSizeForFeature(te.textSizeData,nt,oi),Gi=ie.get("text-padding"),io=Gn.collisionCircleDiameter;Ir=I.collisionIndex.placeCollisionCircles(Ct,oi,te.lineVertexArray,te.glyphOffsetArray,ji,he,Te,Le,W,It,ft.predicate,io,Gi),Er=Ct||Ir.circles.length>0&&!Ir.collisionDetected,sr=sr&&Ir.offscreen}if(lr.iconFeatureIndex&&(Kr=lr.iconFeatureIndex),lr.iconBox){var dl=function(Vi){var ea=Xt&&wr?Un(Vi,wr.x,wr.y,zt,It,I.transform.angle):Vi;return I.collisionIndex.placeCollisionBox(ea,At,Fe,he,ft.predicate)};er=Ar&&Ar.box&&Ar.box.length&&lr.verticalIconBox?(Vr=dl(lr.verticalIconBox)).box.length>0:(Vr=dl(lr.iconBox)).box.length>0,sr=sr&&Vr.offscreen}var pl=pt||Gn.numHorizontalGlyphVertices===0&&Gn.numVerticalGlyphVertices===0,ai=wt||Gn.numIconVertices===0;if(pl||ai?ai?pl||(er=er&&Er):Er=er&&Er:er=Er=er&&Er,Er&&xr&&xr.box&&(Ar&&Ar.box&&Wr?I.collisionIndex.insertCollisionBox(xr.box,ie.get("text-ignore-placement"),te.bucketInstanceId,Wr,ft.ID):I.collisionIndex.insertCollisionBox(xr.box,ie.get("text-ignore-placement"),te.bucketInstanceId,Ur,ft.ID)),er&&Vr&&I.collisionIndex.insertCollisionBox(Vr.box,ie.get("icon-ignore-placement"),te.bucketInstanceId,Kr,ft.ID),Ir&&(Er&&I.collisionIndex.insertCollisionCircles(Ir.circles,ie.get("text-ignore-placement"),te.bucketInstanceId,Ur,ft.ID),W)){var ru=te.bucketInstanceId,Rl=I.collisionCircleArrays[ru];Rl===void 0&&(Rl=I.collisionCircleArrays[ru]=new Dn);for(var os=0;os<Ir.circles.length;os+=4)Rl.circles.push(Ir.circles[os+0]),Rl.circles.push(Ir.circles[os+1]),Rl.circles.push(Ir.circles[os+2]),Rl.circles.push(Ir.collisionDetected?1:0)}I.placements[Gn.crossTileID]=new on(Er||Vt,er||pn,sr||te.justReloaded),$[Gn.crossTileID]=!0}};if(Gt)for(var Sn=te.getSortedSymbolIndexes(this.transform.angle),In=Sn.length-1;In>=0;--In){var Vn=Sn[In];vn(te.symbolInstances.get(Vn),te.collisionArrays[Vn])}else for(var nr=B.symbolInstanceStart;nr<B.symbolInstanceEnd;nr++)vn(te.symbolInstances.get(nr),te.collisionArrays[nr]);if(W&&te.bucketInstanceId in this.collisionCircleArrays){var cr=this.collisionCircleArrays[te.bucketInstanceId];n.invert(cr.invProjMatrix,he),cr.viewportMatrix=this.collisionIndex.getViewportMatrix()}te.justReloaded=!1},Xn.prototype.markUsedJustification=function(B,$,W,I){var G,te={left:W.leftJustifiedTextSymbolIndex,center:W.centerJustifiedTextSymbolIndex,right:W.rightJustifiedTextSymbolIndex};G=I===n.WritingMode.vertical?W.verticalPlacedTextSymbolIndex:te[n.getAnchorJustification($)];for(var ie=0,he=[W.leftJustifiedTextSymbolIndex,W.centerJustifiedTextSymbolIndex,W.rightJustifiedTextSymbolIndex,W.verticalPlacedTextSymbolIndex];ie<he.length;ie+=1){var Te=he[ie];Te>=0&&(B.text.placedSymbolArray.get(Te).crossTileID=G>=0&&Te!==G?0:W.crossTileID)}},Xn.prototype.markUsedOrientation=function(B,$,W){for(var I=$===n.WritingMode.horizontal||$===n.WritingMode.horizontalOnly?$:0,G=$===n.WritingMode.vertical?$:0,te=0,ie=[W.leftJustifiedTextSymbolIndex,W.centerJustifiedTextSymbolIndex,W.rightJustifiedTextSymbolIndex];te<ie.length;te+=1){var he=ie[te];B.text.placedSymbolArray.get(he).placedOrientation=I}W.verticalPlacedTextSymbolIndex&&(B.text.placedSymbolArray.get(W.verticalPlacedTextSymbolIndex).placedOrientation=G)},Xn.prototype.commit=function(B){this.commitTime=B,this.zoomAtLastRecencyCheck=this.transform.zoom;var $=this.prevPlacement,W=!1;this.prevZoomAdjustment=$?$.zoomAdjustment(this.transform.zoom):0;var I=$?$.symbolFadeChange(B):1,G=$?$.opacities:{},te=$?$.variableOffsets:{},ie=$?$.placedOrientations:{};for(var he in this.placements){var Te=this.placements[he],Le=G[he];Le?(this.opacities[he]=new en(Le,I,Te.text,Te.icon),W=W||Te.text!==Le.text.placed||Te.icon!==Le.icon.placed):(this.opacities[he]=new en(null,I,Te.text,Te.icon,Te.skipFade),W=W||Te.text||Te.icon)}for(var Fe in G){var qe=G[Fe];if(!this.opacities[Fe]){var We=new en(qe,I,!1,!1);We.isHidden()||(this.opacities[Fe]=We,W=W||qe.text.placed||qe.icon.placed)}}for(var nt in te)this.variableOffsets[nt]||!this.opacities[nt]||this.opacities[nt].isHidden()||(this.variableOffsets[nt]=te[nt]);for(var ft in ie)this.placedOrientations[ft]||!this.opacities[ft]||this.opacities[ft].isHidden()||(this.placedOrientations[ft]=ie[ft]);W?this.lastPlacementChangeTime=B:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=$?$.lastPlacementChangeTime:B)},Xn.prototype.updateLayerOpacities=function(B,$){for(var W={},I=0,G=$;I<G.length;I+=1){var te=G[I],ie=te.getBucket(B);ie&&te.latestFeatureIndex&&B.id===ie.layerIds[0]&&this.updateBucketOpacities(ie,W,te.collisionBoxArray)}},Xn.prototype.updateBucketOpacities=function(B,$,W){var I=this;B.hasTextData()&&B.text.opacityVertexArray.clear(),B.hasIconData()&&B.icon.opacityVertexArray.clear(),B.hasIconCollisionBoxData()&&B.iconCollisionBox.collisionVertexArray.clear(),B.hasTextCollisionBoxData()&&B.textCollisionBox.collisionVertexArray.clear();var G=B.layers[0].layout,te=new en(null,0,!1,!1,!0),ie=G.get("text-allow-overlap"),he=G.get("icon-allow-overlap"),Te=G.get("text-variable-anchor"),Le=G.get("text-rotation-alignment")==="map",Fe=G.get("text-pitch-alignment")==="map",qe=G.get("icon-text-fit")!=="none",We=new en(null,0,ie&&(he||!B.hasIconData()||G.get("icon-optional")),he&&(ie||!B.hasTextData()||G.get("text-optional")),!0);!B.collisionArrays&&W&&(B.hasIconCollisionBoxData()||B.hasTextCollisionBoxData())&&B.deserializeCollisionBoxes(W);for(var nt=function(Ct,At,zt){for(var It=0;It<At/4;It++)Ct.opacityVertexArray.emplaceBack(zt)},ft=function(Ct){var At=B.symbolInstances.get(Ct),zt=At.numHorizontalGlyphVertices,It=At.numVerticalGlyphVertices,Xt=At.crossTileID,Gt=$[Xt],Vt=I.opacities[Xt];Gt?Vt=te:Vt||(Vt=We,I.opacities[Xt]=Vt),$[Xt]=!0;var pn=zt>0||It>0,vn=At.numIconVertices>0,Sn=I.placedOrientations[At.crossTileID],In=Sn===n.WritingMode.vertical,Vn=Sn===n.WritingMode.horizontal||Sn===n.WritingMode.horizontalOnly;if(pn){var nr=xn(Vt.text),cr=In?sn:nr;nt(B.text,zt,cr);var Gn=Vn?sn:nr;nt(B.text,It,Gn);var lr=Vt.text.isHidden();[At.rightJustifiedTextSymbolIndex,At.centerJustifiedTextSymbolIndex,At.leftJustifiedTextSymbolIndex].forEach(function(Kr){Kr>=0&&(B.text.placedSymbolArray.get(Kr).hidden=lr||In?1:0)}),At.verticalPlacedTextSymbolIndex>=0&&(B.text.placedSymbolArray.get(At.verticalPlacedTextSymbolIndex).hidden=lr||Vn?1:0);var xr=I.variableOffsets[At.crossTileID];xr&&I.markUsedJustification(B,xr.anchor,At,Sn);var Er=I.placedOrientations[At.crossTileID];Er&&(I.markUsedJustification(B,"left",At,Er),I.markUsedOrientation(B,Er,At))}if(vn){var er=xn(Vt.icon),sr=!(qe&&At.verticalPlacedIconSymbolIndex&&In);if(At.placedIconSymbolIndex>=0){var wr=sr?er:sn;nt(B.icon,At.numIconVertices,wr),B.icon.placedSymbolArray.get(At.placedIconSymbolIndex).hidden=Vt.icon.isHidden()}if(At.verticalPlacedIconSymbolIndex>=0){var fr=sr?sn:er;nt(B.icon,At.numVerticalIconVertices,fr),B.icon.placedSymbolArray.get(At.verticalPlacedIconSymbolIndex).hidden=Vt.icon.isHidden()}}if(B.hasIconCollisionBoxData()||B.hasTextCollisionBoxData()){var Ar=B.collisionArrays[Ct];if(Ar){var Ir=new n.Point(0,0);if(Ar.textBox||Ar.verticalTextBox){var Vr=!0;if(Te){var Ur=I.variableOffsets[Xt];Ur?(Ir=Wn(Ur.anchor,Ur.width,Ur.height,Ur.textOffset,Ur.textBoxScale),Le&&Ir._rotate(Fe?I.transform.angle:-I.transform.angle)):Vr=!1}Ar.textBox&&pr(B.textCollisionBox.collisionVertexArray,Vt.text.placed,!Vr||In,Ir.x,Ir.y),Ar.verticalTextBox&&pr(B.textCollisionBox.collisionVertexArray,Vt.text.placed,!Vr||Vn,Ir.x,Ir.y)}var Wr=!!(!Vn&&Ar.verticalIconBox);Ar.iconBox&&pr(B.iconCollisionBox.collisionVertexArray,Vt.icon.placed,Wr,qe?Ir.x:0,qe?Ir.y:0),Ar.verticalIconBox&&pr(B.iconCollisionBox.collisionVertexArray,Vt.icon.placed,!Wr,qe?Ir.x:0,qe?Ir.y:0)}}},pt=0;pt<B.symbolInstances.length;pt++)ft(pt);if(B.sortFeatures(this.transform.angle),this.retainedQueryData[B.bucketInstanceId]&&(this.retainedQueryData[B.bucketInstanceId].featureSortOrder=B.featureSortOrder),B.hasTextData()&&B.text.opacityVertexBuffer&&B.text.opacityVertexBuffer.updateData(B.text.opacityVertexArray),B.hasIconData()&&B.icon.opacityVertexBuffer&&B.icon.opacityVertexBuffer.updateData(B.icon.opacityVertexArray),B.hasIconCollisionBoxData()&&B.iconCollisionBox.collisionVertexBuffer&&B.iconCollisionBox.collisionVertexBuffer.updateData(B.iconCollisionBox.collisionVertexArray),B.hasTextCollisionBoxData()&&B.textCollisionBox.collisionVertexBuffer&&B.textCollisionBox.collisionVertexBuffer.updateData(B.textCollisionBox.collisionVertexArray),B.bucketInstanceId in this.collisionCircleArrays){var wt=this.collisionCircleArrays[B.bucketInstanceId];B.placementInvProjMatrix=wt.invProjMatrix,B.placementViewportMatrix=wt.viewportMatrix,B.collisionCircleArray=wt.circles,delete this.collisionCircleArrays[B.bucketInstanceId]}},Xn.prototype.symbolFadeChange=function(B){return this.fadeDuration===0?1:(B-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Xn.prototype.zoomAdjustment=function(B){return Math.max(0,(this.transform.zoom-B)/1.5)},Xn.prototype.hasTransitions=function(B){return this.stale||B-this.lastPlacementChangeTime<this.fadeDuration},Xn.prototype.stillRecent=function(B,$){var W=this.zoomAtLastRecencyCheck===$?1-this.zoomAdjustment($):1;return this.zoomAtLastRecencyCheck=$,this.commitTime+this.fadeDuration*W>B},Xn.prototype.setStale=function(){this.stale=!0};var Kt=Math.pow(2,25),mn=Math.pow(2,24),Dt=Math.pow(2,17),Bt=Math.pow(2,16),Qt=Math.pow(2,9),fn=Math.pow(2,8),dn=Math.pow(2,1);function xn(B){if(B.opacity===0&&!B.placed)return 0;if(B.opacity===1&&B.placed)return 4294967295;var $=B.placed?1:0,W=Math.floor(127*B.opacity);return W*Kt+$*mn+W*Dt+$*Bt+W*Qt+$*fn+W*dn+$}var sn=0,$t=function(B){this._sortAcrossTiles=B.layout.get("symbol-z-order")!=="viewport-y"&&B.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};$t.prototype.continuePlacement=function(B,$,W,I,G){for(var te=this._bucketParts;this._currentTileIndex<B.length;){var ie=B[this._currentTileIndex];if($.getBucketParts(te,I,ie,this._sortAcrossTiles),this._currentTileIndex++,G())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,te.sort(function(Te,Le){return Te.sortKey-Le.sortKey}));this._currentPartIndex<te.length;){var he=te[this._currentPartIndex];if($.placeLayerBucketPart(he,this._seenCrossTileIDs,W),this._currentPartIndex++,G())return!0}return!1};var Yt=function(B,$,W,I,G,te,ie){this.placement=new Xn(B,G,te,ie),this._currentPlacementIndex=$.length-1,this._forceFullPlacement=W,this._showCollisionBoxes=I,this._done=!1};Yt.prototype.isDone=function(){return this._done},Yt.prototype.continuePlacement=function(B,$,W){for(var I=this,G=n.browser.now(),te=function(){var Te=n.browser.now()-G;return!I._forceFullPlacement&&Te>2};this._currentPlacementIndex>=0;){var ie=$[B[this._currentPlacementIndex]],he=this.placement.collisionIndex.transform.zoom;if(ie.type==="symbol"&&(!ie.minzoom||ie.minzoom<=he)&&(!ie.maxzoom||ie.maxzoom>he)){if(this._inProgressLayer||(this._inProgressLayer=new $t(ie)),this._inProgressLayer.continuePlacement(W[ie.source],this.placement,this._showCollisionBoxes,ie,te))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Yt.prototype.commit=function(B){return this.placement.commit(B),this.placement};var rn=512/n.EXTENT/2,ln=function(B,$,W){this.tileID=B,this.indexedSymbolInstances={},this.bucketInstanceId=W;for(var I=0;I<$.length;I++){var G=$.get(I),te=G.key;this.indexedSymbolInstances[te]||(this.indexedSymbolInstances[te]=[]),this.indexedSymbolInstances[te].push({crossTileID:G.crossTileID,coord:this.getScaledCoordinates(G,B)})}};ln.prototype.getScaledCoordinates=function(B,$){var W=$.canonical.z-this.tileID.canonical.z,I=rn/Math.pow(2,W);return{x:Math.floor(($.canonical.x*n.EXTENT+B.anchorX)*I),y:Math.floor(($.canonical.y*n.EXTENT+B.anchorY)*I)}},ln.prototype.findMatches=function(B,$,W){for(var I=this.tileID.canonical.z<$.canonical.z?1:Math.pow(2,this.tileID.canonical.z-$.canonical.z),G=0;G<B.length;G++){var te=B.get(G);if(!te.crossTileID){var ie=this.indexedSymbolInstances[te.key];if(ie)for(var he=this.getScaledCoordinates(te,$),Te=0,Le=ie;Te<Le.length;Te+=1){var Fe=Le[Te];if(Math.abs(Fe.coord.x-he.x)<=I&&Math.abs(Fe.coord.y-he.y)<=I&&!W[Fe.crossTileID]){W[Fe.crossTileID]=!0,te.crossTileID=Fe.crossTileID;break}}}}};var An=function(){this.maxCrossTileID=0};An.prototype.generate=function(){return++this.maxCrossTileID};var En=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};En.prototype.handleWrapJump=function(B){var $=Math.round((B-this.lng)/360);if($!==0)for(var W in this.indexes){var I=this.indexes[W],G={};for(var te in I){var ie=I[te];ie.tileID=ie.tileID.unwrapTo(ie.tileID.wrap+$),G[ie.tileID.key]=ie}this.indexes[W]=G}this.lng=B},En.prototype.addBucket=function(B,$,W){if(this.indexes[B.overscaledZ]&&this.indexes[B.overscaledZ][B.key]){if(this.indexes[B.overscaledZ][B.key].bucketInstanceId===$.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(B.overscaledZ,this.indexes[B.overscaledZ][B.key])}for(var I=0;I<$.symbolInstances.length;I++)$.symbolInstances.get(I).crossTileID=0;this.usedCrossTileIDs[B.overscaledZ]||(this.usedCrossTileIDs[B.overscaledZ]={});var G=this.usedCrossTileIDs[B.overscaledZ];for(var te in this.indexes){var ie=this.indexes[te];if(Number(te)>B.overscaledZ)for(var he in ie){var Te=ie[he];Te.tileID.isChildOf(B)&&Te.findMatches($.symbolInstances,B,G)}else{var Le=ie[B.scaledTo(Number(te)).key];Le&&Le.findMatches($.symbolInstances,B,G)}}for(var Fe=0;Fe<$.symbolInstances.length;Fe++){var qe=$.symbolInstances.get(Fe);qe.crossTileID||(qe.crossTileID=W.generate(),G[qe.crossTileID]=!0)}return this.indexes[B.overscaledZ]===void 0&&(this.indexes[B.overscaledZ]={}),this.indexes[B.overscaledZ][B.key]=new ln(B,$.symbolInstances,$.bucketInstanceId),!0},En.prototype.removeBucketCrossTileIDs=function(B,$){for(var W in $.indexedSymbolInstances)for(var I=0,G=$.indexedSymbolInstances[W];I<G.length;I+=1){var te=G[I];delete this.usedCrossTileIDs[B][te.crossTileID]}},En.prototype.removeStaleBuckets=function(B){var $=!1;for(var W in this.indexes){var I=this.indexes[W];for(var G in I)B[I[G].bucketInstanceId]||(this.removeBucketCrossTileIDs(W,I[G]),delete I[G],$=!0)}return $};var Rn=function(){this.layerIndexes={},this.crossTileIDs=new An,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Rn.prototype.addLayer=function(B,$,W){var I=this.layerIndexes[B.id];I===void 0&&(I=this.layerIndexes[B.id]=new En);var G=!1,te={};I.handleWrapJump(W);for(var ie=0,he=$;ie<he.length;ie+=1){var Te=he[ie],Le=Te.getBucket(B);Le&&B.id===Le.layerIds[0]&&(Le.bucketInstanceId||(Le.bucketInstanceId=++this.maxBucketInstanceId),I.addBucket(Te.tileID,Le,this.crossTileIDs)&&(G=!0),te[Le.bucketInstanceId]=!0)}return I.removeStaleBuckets(te)&&(G=!0),G},Rn.prototype.pruneUnusedLayers=function(B){var $={};for(var W in B.forEach(function(I){$[I]=!0}),this.layerIndexes)$[W]||delete this.layerIndexes[W]};var jn=function(B,$){return n.emitValidationErrors(B,$&&$.filter(function(W){return W.identifier!=="source.canvas"}))},Qn=n.pick(_t,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),qn=n.pick(_t,["setCenter","setZoom","setBearing","setPitch"]),Kn=function(){var B={},$=n.styleSpec.$version;for(var W in n.styleSpec.$root){var I=n.styleSpec.$root[W];if(I.required){var G;(G=W==="version"?$:I.type==="array"?[]:{})!=null&&(B[W]=G)}}return B}(),tr=function(B){function $(W,I){var G=this;I===void 0&&(I={}),B.call(this),this.map=W,this.dispatcher=new P(yt(),this),this.imageManager=new d,this.imageManager.setEventedParent(this),this.glyphManager=new y(W._requestManager,I.localIdeographFontFamily),this.lineAtlas=new D(256,512),this.crossTileSymbolIndex=new Rn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new n.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",n.getReferrer());var te=this;this._rtlTextPluginCallback=$.registerForPluginStateChange(function(ie){var he={pluginStatus:ie.pluginStatus,pluginURL:ie.pluginURL};te.dispatcher.broadcast("syncRTLPluginState",he,function(Te,Le){if(n.triggerPluginCompletionEvent(Te),Le&&Le.every(function(qe){return qe}))for(var Fe in te.sourceCaches)te.sourceCaches[Fe].reload()})}),this.on("data",function(ie){if(ie.dataType==="source"&&ie.sourceDataType==="metadata"){var he=G.sourceCaches[ie.sourceId];if(he){var Te=he.getSource();if(Te&&Te.vectorLayerIds)for(var Le in G._layers){var Fe=G._layers[Le];Fe.source===Te.id&&G._validateLayer(Fe)}}}})}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.loadURL=function(W,I){var G=this;I===void 0&&(I={}),this.fire(new n.Event("dataloading",{dataType:"style"}));var te=typeof I.validate=="boolean"?I.validate:!n.isMapboxURL(W);W=this.map._requestManager.normalizeStyleURL(W,I.accessToken);var ie=this.map._requestManager.transformRequest(W,n.ResourceType.Style);this._request=n.getJSON(ie,function(he,Te){G._request=null,he?G.fire(new n.ErrorEvent(he)):Te&&G._load(Te,te)})},$.prototype.loadJSON=function(W,I){var G=this;I===void 0&&(I={}),this.fire(new n.Event("dataloading",{dataType:"style"})),this._request=n.browser.frame(function(){G._request=null,G._load(W,I.validate!==!1)})},$.prototype.loadEmpty=function(){this.fire(new n.Event("dataloading",{dataType:"style"})),this._load(Kn,!1)},$.prototype._load=function(W,I){if(!I||!jn(this,n.validateStyle(W))){for(var G in this._loaded=!0,this.stylesheet=W,W.sources)this.addSource(G,W.sources[G],{validate:!1});W.sprite?this._loadSprite(W.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(W.glyphs);var te=kt(this.stylesheet.layers);this._order=te.map(function(Le){return Le.id}),this._layers={},this._serializedLayers={};for(var ie=0,he=te;ie<he.length;ie+=1){var Te=he[ie];(Te=n.createStyleLayer(Te)).setEventedParent(this,{layer:{id:Te.id}}),this._layers[Te.id]=Te,this._serializedLayers[Te.id]=Te.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new k(this.stylesheet.light),this.fire(new n.Event("data",{dataType:"style"})),this.fire(new n.Event("style.load"))}},$.prototype._loadSprite=function(W){var I=this;this._spriteRequest=function(G,te,ie){var he,Te,Le,Fe=n.browser.devicePixelRatio>1?"@2x":"",qe=n.getJSON(te.transformRequest(te.normalizeSpriteURL(G,Fe,".json"),n.ResourceType.SpriteJSON),function(ft,pt){qe=null,Le||(Le=ft,he=pt,nt())}),We=n.getImage(te.transformRequest(te.normalizeSpriteURL(G,Fe,".png"),n.ResourceType.SpriteImage),function(ft,pt){We=null,Le||(Le=ft,Te=pt,nt())});function nt(){if(Le)ie(Le);else if(he&&Te){var ft=n.browser.getImageData(Te),pt={};for(var wt in he){var Ct=he[wt],At=Ct.width,zt=Ct.height,It=Ct.x,Xt=Ct.y,Gt=Ct.sdf,Vt=Ct.pixelRatio,pn=Ct.stretchX,vn=Ct.stretchY,Sn=Ct.content,In=new n.RGBAImage({width:At,height:zt});n.RGBAImage.copy(ft,In,{x:It,y:Xt},{x:0,y:0},{width:At,height:zt}),pt[wt]={data:In,pixelRatio:Vt,sdf:Gt,stretchX:pn,stretchY:vn,content:Sn}}ie(null,pt)}}return{cancel:function(){qe&&(qe.cancel(),qe=null),We&&(We.cancel(),We=null)}}}(W,this.map._requestManager,function(G,te){if(I._spriteRequest=null,G)I.fire(new n.ErrorEvent(G));else if(te)for(var ie in te)I.imageManager.addImage(ie,te[ie]);I.imageManager.setLoaded(!0),I._availableImages=I.imageManager.listImages(),I.dispatcher.broadcast("setImages",I._availableImages),I.fire(new n.Event("data",{dataType:"style"}))})},$.prototype._validateLayer=function(W){var I=this.sourceCaches[W.source];if(I){var G=W.sourceLayer;if(G){var te=I.getSource();(te.type==="geojson"||te.vectorLayerIds&&te.vectorLayerIds.indexOf(G)===-1)&&this.fire(new n.ErrorEvent(new Error('Source layer "'+G+'" does not exist on source "'+te.id+'" as specified by style layer "'+W.id+'"')))}}},$.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var W in this.sourceCaches)if(!this.sourceCaches[W].loaded())return!1;return!!this.imageManager.isLoaded()},$.prototype._serializeLayers=function(W){for(var I=[],G=0,te=W;G<te.length;G+=1){var ie=te[G],he=this._layers[ie];he.type!=="custom"&&I.push(he.serialize())}return I},$.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var W in this.sourceCaches)if(this.sourceCaches[W].hasTransition())return!0;for(var I in this._layers)if(this._layers[I].hasTransition())return!0;return!1},$.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},$.prototype.update=function(W){if(this._loaded){var I=this._changed;if(this._changed){var G=Object.keys(this._updatedLayers),te=Object.keys(this._removedLayers);for(var ie in(G.length||te.length)&&this._updateWorkerLayers(G,te),this._updatedSources){var he=this._updatedSources[ie];he==="reload"?this._reloadSource(ie):he==="clear"&&this._clearSource(ie)}for(var Te in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[Te].updateTransitions(W);this.light.updateTransitions(W),this._resetUpdates()}var Le={};for(var Fe in this.sourceCaches){var qe=this.sourceCaches[Fe];Le[Fe]=qe.used,qe.used=!1}for(var We=0,nt=this._order;We<nt.length;We+=1){var ft=nt[We],pt=this._layers[ft];pt.recalculate(W,this._availableImages),!pt.isHidden(W.zoom)&&pt.source&&(this.sourceCaches[pt.source].used=!0)}for(var wt in Le){var Ct=this.sourceCaches[wt];Le[wt]!==Ct.used&&Ct.fire(new n.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:wt}))}this.light.recalculate(W),this.z=W.zoom,I&&this.fire(new n.Event("data",{dataType:"style"}))}},$.prototype._updateTilesForChangedImages=function(){var W=Object.keys(this._changedImages);if(W.length){for(var I in this.sourceCaches)this.sourceCaches[I].reloadTilesForDependencies(["icons","patterns"],W);this._changedImages={}}},$.prototype._updateWorkerLayers=function(W,I){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(W),removedIds:I})},$.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},$.prototype.setState=function(W){var I=this;if(this._checkLoaded(),jn(this,n.validateStyle(W)))return!1;(W=n.clone$1(W)).layers=kt(W.layers);var G=Wt(this.serialize(),W).filter(function(ie){return!(ie.command in qn)});if(G.length===0)return!1;var te=G.filter(function(ie){return!(ie.command in Qn)});if(te.length>0)throw new Error("Unimplemented: "+te.map(function(ie){return ie.command}).join(", ")+".");return G.forEach(function(ie){ie.command!=="setTransition"&&I[ie.command].apply(I,ie.args)}),this.stylesheet=W,!0},$.prototype.addImage=function(W,I){if(this.getImage(W))return this.fire(new n.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(W,I),this._afterImageUpdated(W)},$.prototype.updateImage=function(W,I){this.imageManager.updateImage(W,I)},$.prototype.getImage=function(W){return this.imageManager.getImage(W)},$.prototype.removeImage=function(W){if(!this.getImage(W))return this.fire(new n.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(W),this._afterImageUpdated(W)},$.prototype._afterImageUpdated=function(W){this._availableImages=this.imageManager.listImages(),this._changedImages[W]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new n.Event("data",{dataType:"style"}))},$.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},$.prototype.addSource=function(W,I,G){var te=this;if(G===void 0&&(G={}),this._checkLoaded(),this.sourceCaches[W]!==void 0)throw new Error("There is already a source with this ID");if(!I.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(I).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(I.type)>=0&&this._validate(n.validateStyle.source,"sources."+W,I,null,G))){this.map&&this.map._collectResourceTiming&&(I.collectResourceTiming=!0);var ie=this.sourceCaches[W]=new lt(W,I,this.dispatcher);ie.style=this,ie.setEventedParent(this,function(){return{isSourceLoaded:te.loaded(),source:ie.serialize(),sourceId:W}}),ie.onAdd(this.map),this._changed=!0}},$.prototype.removeSource=function(W){if(this._checkLoaded(),this.sourceCaches[W]===void 0)throw new Error("There is no source with this ID");for(var I in this._layers)if(this._layers[I].source===W)return this.fire(new n.ErrorEvent(new Error('Source "'+W+'" cannot be removed while layer "'+I+'" is using it.')));var G=this.sourceCaches[W];delete this.sourceCaches[W],delete this._updatedSources[W],G.fire(new n.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:W})),G.setEventedParent(null),G.clearTiles(),G.onRemove&&G.onRemove(this.map),this._changed=!0},$.prototype.setGeoJSONSourceData=function(W,I){this._checkLoaded(),this.sourceCaches[W].getSource().setData(I),this._changed=!0},$.prototype.getSource=function(W){return this.sourceCaches[W]&&this.sourceCaches[W].getSource()},$.prototype.addLayer=function(W,I,G){G===void 0&&(G={}),this._checkLoaded();var te=W.id;if(this.getLayer(te))this.fire(new n.ErrorEvent(new Error('Layer with id "'+te+'" already exists on this map')));else{var ie;if(W.type==="custom"){if(jn(this,n.validateCustomStyleLayer(W)))return;ie=n.createStyleLayer(W)}else{if(typeof W.source=="object"&&(this.addSource(te,W.source),W=n.clone$1(W),W=n.extend(W,{source:te})),this._validate(n.validateStyle.layer,"layers."+te,W,{arrayIndex:-1},G))return;ie=n.createStyleLayer(W),this._validateLayer(ie),ie.setEventedParent(this,{layer:{id:te}}),this._serializedLayers[ie.id]=ie.serialize()}var he=I?this._order.indexOf(I):this._order.length;if(I&&he===-1)this.fire(new n.ErrorEvent(new Error('Layer with id "'+I+'" does not exist on this map.')));else{if(this._order.splice(he,0,te),this._layerOrderChanged=!0,this._layers[te]=ie,this._removedLayers[te]&&ie.source&&ie.type!=="custom"){var Te=this._removedLayers[te];delete this._removedLayers[te],Te.type!==ie.type?this._updatedSources[ie.source]="clear":(this._updatedSources[ie.source]="reload",this.sourceCaches[ie.source].pause())}this._updateLayer(ie),ie.onAdd&&ie.onAdd(this.map)}}},$.prototype.moveLayer=function(W,I){if(this._checkLoaded(),this._changed=!0,this._layers[W]){if(W!==I){var G=this._order.indexOf(W);this._order.splice(G,1);var te=I?this._order.indexOf(I):this._order.length;I&&te===-1?this.fire(new n.ErrorEvent(new Error('Layer with id "'+I+'" does not exist on this map.'))):(this._order.splice(te,0,W),this._layerOrderChanged=!0)}}else this.fire(new n.ErrorEvent(new Error("The layer '"+W+"' does not exist in the map's style and cannot be moved.")))},$.prototype.removeLayer=function(W){this._checkLoaded();var I=this._layers[W];if(I){I.setEventedParent(null);var G=this._order.indexOf(W);this._order.splice(G,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[W]=I,delete this._layers[W],delete this._serializedLayers[W],delete this._updatedLayers[W],delete this._updatedPaintProps[W],I.onRemove&&I.onRemove(this.map)}else this.fire(new n.ErrorEvent(new Error("The layer '"+W+"' does not exist in the map's style and cannot be removed.")))},$.prototype.getLayer=function(W){return this._layers[W]},$.prototype.hasLayer=function(W){return W in this._layers},$.prototype.setLayerZoomRange=function(W,I,G){this._checkLoaded();var te=this.getLayer(W);te?te.minzoom===I&&te.maxzoom===G||(I!=null&&(te.minzoom=I),G!=null&&(te.maxzoom=G),this._updateLayer(te)):this.fire(new n.ErrorEvent(new Error("The layer '"+W+"' does not exist in the map's style and cannot have zoom extent.")))},$.prototype.setFilter=function(W,I,G){G===void 0&&(G={}),this._checkLoaded();var te=this.getLayer(W);if(te){if(!n.deepEqual(te.filter,I))return I==null?(te.filter=void 0,void this._updateLayer(te)):void(this._validate(n.validateStyle.filter,"layers."+te.id+".filter",I,null,G)||(te.filter=n.clone$1(I),this._updateLayer(te)))}else this.fire(new n.ErrorEvent(new Error("The layer '"+W+"' does not exist in the map's style and cannot be filtered.")))},$.prototype.getFilter=function(W){return n.clone$1(this.getLayer(W).filter)},$.prototype.setLayoutProperty=function(W,I,G,te){te===void 0&&(te={}),this._checkLoaded();var ie=this.getLayer(W);ie?n.deepEqual(ie.getLayoutProperty(I),G)||(ie.setLayoutProperty(I,G,te),this._updateLayer(ie)):this.fire(new n.ErrorEvent(new Error("The layer '"+W+"' does not exist in the map's style and cannot be styled.")))},$.prototype.getLayoutProperty=function(W,I){var G=this.getLayer(W);if(G)return G.getLayoutProperty(I);this.fire(new n.ErrorEvent(new Error("The layer '"+W+"' does not exist in the map's style.")))},$.prototype.setPaintProperty=function(W,I,G,te){te===void 0&&(te={}),this._checkLoaded();var ie=this.getLayer(W);ie?n.deepEqual(ie.getPaintProperty(I),G)||(ie.setPaintProperty(I,G,te)&&this._updateLayer(ie),this._changed=!0,this._updatedPaintProps[W]=!0):this.fire(new n.ErrorEvent(new Error("The layer '"+W+"' does not exist in the map's style and cannot be styled.")))},$.prototype.getPaintProperty=function(W,I){return this.getLayer(W).getPaintProperty(I)},$.prototype.setFeatureState=function(W,I){this._checkLoaded();var G=W.source,te=W.sourceLayer,ie=this.sourceCaches[G];if(ie!==void 0){var he=ie.getSource().type;he==="geojson"&&te?this.fire(new n.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):he!=="vector"||te?(W.id===void 0&&this.fire(new n.ErrorEvent(new Error("The feature id parameter must be provided."))),ie.setFeatureState(te,W.id,I)):this.fire(new n.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new n.ErrorEvent(new Error("The source '"+G+"' does not exist in the map's style.")))},$.prototype.removeFeatureState=function(W,I){this._checkLoaded();var G=W.source,te=this.sourceCaches[G];if(te!==void 0){var ie=te.getSource().type,he=ie==="vector"?W.sourceLayer:void 0;ie!=="vector"||he?I&&typeof W.id!="string"&&typeof W.id!="number"?this.fire(new n.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):te.removeFeatureState(he,W.id,I):this.fire(new n.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new n.ErrorEvent(new Error("The source '"+G+"' does not exist in the map's style.")))},$.prototype.getFeatureState=function(W){this._checkLoaded();var I=W.source,G=W.sourceLayer,te=this.sourceCaches[I];if(te!==void 0){if(te.getSource().type!=="vector"||G)return W.id===void 0&&this.fire(new n.ErrorEvent(new Error("The feature id parameter must be provided."))),te.getFeatureState(G,W.id);this.fire(new n.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new n.ErrorEvent(new Error("The source '"+I+"' does not exist in the map's style.")))},$.prototype.getTransition=function(){return n.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},$.prototype.serialize=function(){return n.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:n.mapObject(this.sourceCaches,function(W){return W.serialize()}),layers:this._serializeLayers(this._order)},function(W){return W!==void 0})},$.prototype._updateLayer=function(W){this._updatedLayers[W.id]=!0,W.source&&!this._updatedSources[W.source]&&this.sourceCaches[W.source].getSource().type!=="raster"&&(this._updatedSources[W.source]="reload",this.sourceCaches[W.source].pause()),this._changed=!0},$.prototype._flattenAndSortRenderedFeatures=function(W){for(var I=this,G=function(Sn){return I._layers[Sn].type==="fill-extrusion"},te={},ie=[],he=this._order.length-1;he>=0;he--){var Te=this._order[he];if(G(Te)){te[Te]=he;for(var Le=0,Fe=W;Le<Fe.length;Le+=1){var qe=Fe[Le][Te];if(qe)for(var We=0,nt=qe;We<nt.length;We+=1){var ft=nt[We];ie.push(ft)}}}}ie.sort(function(Sn,In){return In.intersectionZ-Sn.intersectionZ});for(var pt=[],wt=this._order.length-1;wt>=0;wt--){var Ct=this._order[wt];if(G(Ct))for(var At=ie.length-1;At>=0;At--){var zt=ie[At].feature;if(te[zt.layer.id]<wt)break;pt.push(zt),ie.pop()}else for(var It=0,Xt=W;It<Xt.length;It+=1){var Gt=Xt[It][Ct];if(Gt)for(var Vt=0,pn=Gt;Vt<pn.length;Vt+=1){var vn=pn[Vt];pt.push(vn.feature)}}}return pt},$.prototype.queryRenderedFeatures=function(W,I,G){I&&I.filter&&this._validate(n.validateStyle.filter,"queryRenderedFeatures.filter",I.filter,null,I);var te={};if(I&&I.layers){if(!Array.isArray(I.layers))return this.fire(new n.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var ie=0,he=I.layers;ie<he.length;ie+=1){var Te=he[ie],Le=this._layers[Te];if(!Le)return this.fire(new n.ErrorEvent(new Error("The layer '"+Te+"' does not exist in the map's style and cannot be queried for features."))),[];te[Le.source]=!0}}var Fe=[];for(var qe in I.availableImages=this._availableImages,this.sourceCaches)I.layers&&!te[qe]||Fe.push(J(this.sourceCaches[qe],this._layers,this._serializedLayers,W,I,G));return this.placement&&Fe.push(function(We,nt,ft,pt,wt,Ct,At){for(var zt={},It=Ct.queryRenderedSymbols(pt),Xt=[],Gt=0,Vt=Object.keys(It).map(Number);Gt<Vt.length;Gt+=1){var pn=Vt[Gt];Xt.push(At[pn])}Xt.sort(Q);for(var vn=function(){var cr=In[Sn],Gn=cr.featureIndex.lookupSymbolFeatures(It[cr.bucketInstanceId],nt,cr.bucketIndex,cr.sourceLayerIndex,wt.filter,wt.layers,wt.availableImages,We);for(var lr in Gn){var xr=zt[lr]=zt[lr]||[],Er=Gn[lr];Er.sort(function(fr,Ar){var Ir=cr.featureSortOrder;if(Ir){var Vr=Ir.indexOf(fr.featureIndex);return Ir.indexOf(Ar.featureIndex)-Vr}return Ar.featureIndex-fr.featureIndex});for(var er=0,sr=Er;er<sr.length;er+=1){var wr=sr[er];xr.push(wr)}}},Sn=0,In=Xt;Sn<In.length;Sn+=1)vn();var Vn=function(cr){zt[cr].forEach(function(Gn){var lr=Gn.feature,xr=We[cr],Er=ft[xr.source].getFeatureState(lr.layer["source-layer"],lr.id);lr.source=lr.layer.source,lr.layer["source-layer"]&&(lr.sourceLayer=lr.layer["source-layer"]),lr.state=Er})};for(var nr in zt)Vn(nr);return zt}(this._layers,this._serializedLayers,this.sourceCaches,W,I,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Fe)},$.prototype.querySourceFeatures=function(W,I){I&&I.filter&&this._validate(n.validateStyle.filter,"querySourceFeatures.filter",I.filter,null,I);var G=this.sourceCaches[W];return G?function(te,ie){for(var he=te.getRenderableIds().map(function(nt){return te.getTileByID(nt)}),Te=[],Le={},Fe=0;Fe<he.length;Fe++){var qe=he[Fe],We=qe.tileID.canonical.key;Le[We]||(Le[We]=!0,qe.querySourceFeatures(Te,ie))}return Te}(G,I):[]},$.prototype.addSourceType=function(W,I,G){return $.getSourceType(W)?G(new Error('A source type called "'+W+'" already exists.')):($.setSourceType(W,I),I.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:W,url:I.workerSourceURL},G):G(null,null))},$.prototype.getLight=function(){return this.light.getLight()},$.prototype.setLight=function(W,I){I===void 0&&(I={}),this._checkLoaded();var G=this.light.getLight(),te=!1;for(var ie in W)if(!n.deepEqual(W[ie],G[ie])){te=!0;break}if(te){var he={now:n.browser.now(),transition:n.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(W,I),this.light.updateTransitions(he)}},$.prototype._validate=function(W,I,G,te,ie){return ie===void 0&&(ie={}),(!ie||ie.validate!==!1)&&jn(this,W.call(n.validateStyle,n.extend({key:I,style:this.serialize(),value:G,styleSpec:n.styleSpec},te)))},$.prototype._remove=function(){for(var W in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),n.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[W].setEventedParent(null);for(var I in this.sourceCaches)this.sourceCaches[I].clearTiles(),this.sourceCaches[I].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},$.prototype._clearSource=function(W){this.sourceCaches[W].clearTiles()},$.prototype._reloadSource=function(W){this.sourceCaches[W].resume(),this.sourceCaches[W].reload()},$.prototype._updateSources=function(W){for(var I in this.sourceCaches)this.sourceCaches[I].update(W)},$.prototype._generateCollisionBoxes=function(){for(var W in this.sourceCaches)this._reloadSource(W)},$.prototype._updatePlacement=function(W,I,G,te,ie){ie===void 0&&(ie=!1);for(var he=!1,Te=!1,Le={},Fe=0,qe=this._order;Fe<qe.length;Fe+=1){var We=qe[Fe],nt=this._layers[We];if(nt.type==="symbol"){if(!Le[nt.source]){var ft=this.sourceCaches[nt.source];Le[nt.source]=ft.getRenderableIds(!0).map(function(It){return ft.getTileByID(It)}).sort(function(It,Xt){return Xt.tileID.overscaledZ-It.tileID.overscaledZ||(It.tileID.isLessThan(Xt.tileID)?-1:1)})}var pt=this.crossTileSymbolIndex.addLayer(nt,Le[nt.source],W.center.lng);he=he||pt}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((ie=ie||this._layerOrderChanged||G===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(n.browser.now(),W.zoom))&&(this.pauseablePlacement=new Yt(W,this._order,ie,I,G,te,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Le),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(n.browser.now()),Te=!0),he&&this.pauseablePlacement.placement.setStale()),Te||he)for(var wt=0,Ct=this._order;wt<Ct.length;wt+=1){var At=Ct[wt],zt=this._layers[At];zt.type==="symbol"&&this.placement.updateLayerOpacities(zt,Le[zt.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(n.browser.now())},$.prototype._releaseSymbolFadeTiles=function(){for(var W in this.sourceCaches)this.sourceCaches[W].releaseSymbolFadeTiles()},$.prototype.getImages=function(W,I,G){this.imageManager.getImages(I.icons,G),this._updateTilesForChangedImages();var te=this.sourceCaches[I.source];te&&te.setDependencies(I.tileID.key,I.type,I.icons)},$.prototype.getGlyphs=function(W,I,G){this.glyphManager.getGlyphs(I.stacks,G)},$.prototype.getResource=function(W,I,G){return n.makeRequest(I,G)},$}(n.Evented);tr.getSourceType=function(B){return re[B]},tr.setSourceType=function(B,$){re[B]=$},tr.registerForPluginStateChange=n.registerForPluginStateChange;var Jn=n.createLayout([{name:"a_pos",type:"Int16",components:2}]),hr=gi(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),br=gi(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),gr=gi(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),ar=gi(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),mr=gi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),kr=gi(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Pr=gi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),wi=gi("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Ti=gi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Qi=gi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),bi=gi(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),zi=gi(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Oo=gi(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Rr=gi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),so=gi(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),aa=gi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),ro=gi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Za=gi(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),fs=gi(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),_o=gi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Ra=gi(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Fa=gi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),hs=gi(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),sa=gi(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),ya=gi(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),xa=gi(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function gi(B,$){var W=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,I=$.match(/attribute ([\w]+) ([\w]+)/g),G=B.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),te=$.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),ie=te?te.concat(G):G,he={};return{fragmentSource:B=B.replace(W,function(Te,Le,Fe,qe,We){return he[We]=!0,Le==="define"?`
#ifndef HAS_UNIFORM_u_`+We+`
varying `+Fe+" "+qe+" "+We+`;
#else
uniform `+Fe+" "+qe+" u_"+We+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+We+`
    `+Fe+" "+qe+" "+We+" = u_"+We+`;
#endif
`}),vertexSource:$=$.replace(W,function(Te,Le,Fe,qe,We){var nt=qe==="float"?"vec2":"vec4",ft=We.match(/color/)?"color":nt;return he[We]?Le==="define"?`
#ifndef HAS_UNIFORM_u_`+We+`
uniform lowp float u_`+We+`_t;
attribute `+Fe+" "+nt+" a_"+We+`;
varying `+Fe+" "+qe+" "+We+`;
#else
uniform `+Fe+" "+qe+" u_"+We+`;
#endif
`:ft==="vec4"?`
#ifndef HAS_UNIFORM_u_`+We+`
    `+We+" = a_"+We+`;
#else
    `+Fe+" "+qe+" "+We+" = u_"+We+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+We+`
    `+We+" = unpack_mix_"+ft+"(a_"+We+", u_"+We+`_t);
#else
    `+Fe+" "+qe+" "+We+" = u_"+We+`;
#endif
`:Le==="define"?`
#ifndef HAS_UNIFORM_u_`+We+`
uniform lowp float u_`+We+`_t;
attribute `+Fe+" "+nt+" a_"+We+`;
#else
uniform `+Fe+" "+qe+" u_"+We+`;
#endif
`:ft==="vec4"?`
#ifndef HAS_UNIFORM_u_`+We+`
    `+Fe+" "+qe+" "+We+" = a_"+We+`;
#else
    `+Fe+" "+qe+" "+We+" = u_"+We+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+We+`
    `+Fe+" "+qe+" "+We+" = unpack_mix_"+ft+"(a_"+We+", u_"+We+`_t);
#else
    `+Fe+" "+qe+" "+We+" = u_"+We+`;
#endif
`}),staticAttributes:I,staticUniforms:ie}}var lo=Object.freeze({__proto__:null,prelude:hr,background:br,backgroundPattern:gr,circle:ar,clippingMask:mr,heatmap:kr,heatmapTexture:Pr,collisionBox:wi,collisionCircle:Ti,debug:Qi,fill:bi,fillOutline:zi,fillOutlinePattern:Oo,fillPattern:Rr,fillExtrusion:so,fillExtrusionPattern:aa,hillshadePrepare:ro,hillshade:Za,line:fs,lineGradient:_o,linePattern:Ra,lineSDF:Fa,raster:hs,symbolIcon:sa,symbolSDF:ya,symbolTextAndIcon:xa}),Xa=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Na(B){for(var $=[],W=0;W<B.length;W++)if(B[W]!==null){var I=B[W].split(" ");$.push(I.pop())}return $}Xa.prototype.bind=function(B,$,W,I,G,te,ie,he){this.context=B;for(var Te=this.boundPaintVertexBuffers.length!==I.length,Le=0;!Te&&Le<I.length;Le++)this.boundPaintVertexBuffers[Le]!==I[Le]&&(Te=!0);var Fe=!this.vao||this.boundProgram!==$||this.boundLayoutVertexBuffer!==W||Te||this.boundIndexBuffer!==G||this.boundVertexOffset!==te||this.boundDynamicVertexBuffer!==ie||this.boundDynamicVertexBuffer2!==he;!B.extVertexArrayObject||Fe?this.freshBind($,W,I,G,te,ie,he):(B.bindVertexArrayOES.set(this.vao),ie&&ie.bind(),G&&G.dynamicDraw&&G.bind(),he&&he.bind())},Xa.prototype.freshBind=function(B,$,W,I,G,te,ie){var he,Te=B.numAttributes,Le=this.context,Fe=Le.gl;if(Le.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Le.extVertexArrayObject.createVertexArrayOES(),Le.bindVertexArrayOES.set(this.vao),he=0,this.boundProgram=B,this.boundLayoutVertexBuffer=$,this.boundPaintVertexBuffers=W,this.boundIndexBuffer=I,this.boundVertexOffset=G,this.boundDynamicVertexBuffer=te,this.boundDynamicVertexBuffer2=ie;else{he=Le.currentNumAttributes||0;for(var qe=Te;qe<he;qe++)Fe.disableVertexAttribArray(qe)}$.enableAttributes(Fe,B);for(var We=0,nt=W;We<nt.length;We+=1)nt[We].enableAttributes(Fe,B);te&&te.enableAttributes(Fe,B),ie&&ie.enableAttributes(Fe,B),$.bind(),$.setVertexAttribPointers(Fe,B,G);for(var ft=0,pt=W;ft<pt.length;ft+=1){var wt=pt[ft];wt.bind(),wt.setVertexAttribPointers(Fe,B,G)}te&&(te.bind(),te.setVertexAttribPointers(Fe,B,G)),I&&I.bind(),ie&&(ie.bind(),ie.setVertexAttribPointers(Fe,B,G)),Le.currentNumAttributes=Te},Xa.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var ba=function(B,$,W,I,G,te){var ie=B.gl;this.program=ie.createProgram();for(var he=Na(W.staticAttributes),Te=I?I.getBinderAttributes():[],Le=he.concat(Te),Fe=W.staticUniforms?Na(W.staticUniforms):[],qe=I?I.getBinderUniforms():[],We=[],nt=0,ft=Fe.concat(qe);nt<ft.length;nt+=1){var pt=ft[nt];We.indexOf(pt)<0&&We.push(pt)}var wt=I?I.defines():[];te&&wt.push("#define OVERDRAW_INSPECTOR;");var Ct=wt.concat(hr.fragmentSource,W.fragmentSource).join(`
`),At=wt.concat(hr.vertexSource,W.vertexSource).join(`
`),zt=ie.createShader(ie.FRAGMENT_SHADER);if(ie.isContextLost())this.failedToCreate=!0;else{ie.shaderSource(zt,Ct),ie.compileShader(zt),ie.attachShader(this.program,zt);var It=ie.createShader(ie.VERTEX_SHADER);if(ie.isContextLost())this.failedToCreate=!0;else{ie.shaderSource(It,At),ie.compileShader(It),ie.attachShader(this.program,It),this.attributes={};var Xt={};this.numAttributes=Le.length;for(var Gt=0;Gt<this.numAttributes;Gt++)Le[Gt]&&(ie.bindAttribLocation(this.program,Gt,Le[Gt]),this.attributes[Le[Gt]]=Gt);ie.linkProgram(this.program),ie.deleteShader(It),ie.deleteShader(zt);for(var Vt=0;Vt<We.length;Vt++){var pn=We[Vt];if(pn&&!Xt[pn]){var vn=ie.getUniformLocation(this.program,pn);vn&&(Xt[pn]=vn)}}this.fixedUniforms=G(B,Xt),this.binderUniforms=I?I.getUniforms(B,Xt):[]}}};function ds(B,$,W){var I=1/Zn(W,1,$.transform.tileZoom),G=Math.pow(2,W.tileID.overscaledZ),te=W.tileSize*Math.pow(2,$.transform.tileZoom)/G,ie=te*(W.tileID.canonical.x+W.tileID.wrap*G),he=te*W.tileID.canonical.y;return{u_image:0,u_texsize:W.imageAtlasTexture.size,u_scale:[I,B.fromScale,B.toScale],u_fade:B.t,u_pixel_coord_upper:[ie>>16,he>>16],u_pixel_coord_lower:[65535&ie,65535&he]}}ba.prototype.draw=function(B,$,W,I,G,te,ie,he,Te,Le,Fe,qe,We,nt,ft,pt){var wt,Ct=B.gl;if(!this.failedToCreate){for(var At in B.program.set(this.program),B.setDepthMode(W),B.setStencilMode(I),B.setColorMode(G),B.setCullFace(te),this.fixedUniforms)this.fixedUniforms[At].set(ie[At]);nt&&nt.setUniforms(B,this.binderUniforms,qe,{zoom:We});for(var zt=(wt={},wt[Ct.LINES]=2,wt[Ct.TRIANGLES]=3,wt[Ct.LINE_STRIP]=1,wt)[$],It=0,Xt=Fe.get();It<Xt.length;It+=1){var Gt=Xt[It],Vt=Gt.vaos||(Gt.vaos={});(Vt[he]||(Vt[he]=new Xa)).bind(B,this,Te,nt?nt.getPaintVertexBuffers():[],Le,Gt.vertexOffset,ft,pt),Ct.drawElements($,Gt.primitiveLength*zt,Ct.UNSIGNED_SHORT,Gt.primitiveOffset*zt*2)}}};var za=function(B,$,W,I){var G=$.style.light,te=G.properties.get("position"),ie=[te.x,te.y,te.z],he=n.create$1();G.properties.get("anchor")==="viewport"&&n.fromRotation(he,-$.transform.angle),n.transformMat3(ie,ie,he);var Te=G.properties.get("color");return{u_matrix:B,u_lightpos:ie,u_lightintensity:G.properties.get("intensity"),u_lightcolor:[Te.r,Te.g,Te.b],u_vertical_gradient:+W,u_opacity:I}},ps=function(B,$,W,I,G,te,ie){return n.extend(za(B,$,W,I),ds(te,$,ie),{u_height_factor:-Math.pow(2,G.overscaledZ)/ie.tileSize/8})},Ka=function(B){return{u_matrix:B}},gs=function(B,$,W,I){return n.extend(Ka(B),ds(W,$,I))},Ba=function(B,$){return{u_matrix:B,u_world:$}},_u=function(B,$,W,I,G){return n.extend(gs(B,$,W,I),{u_world:G})},Xl=function(B,$,W,I){var G,te,ie=B.transform;if(I.paint.get("circle-pitch-alignment")==="map"){var he=Zn(W,1,ie.zoom);G=!0,te=[he,he]}else G=!1,te=ie.pixelsToGLUnits;return{u_camera_to_center_distance:ie.cameraToCenterDistance,u_scale_with_map:+(I.paint.get("circle-pitch-scale")==="map"),u_matrix:B.translatePosMatrix($.posMatrix,W,I.paint.get("circle-translate"),I.paint.get("circle-translate-anchor")),u_pitch_with_map:+G,u_device_pixel_ratio:n.browser.devicePixelRatio,u_extrude_scale:te}},Ls=function(B,$,W){var I=Zn(W,1,$.zoom),G=Math.pow(2,$.zoom-W.tileID.overscaledZ),te=W.tileID.overscaleFactor();return{u_matrix:B,u_camera_to_center_distance:$.cameraToCenterDistance,u_pixels_to_tile_units:I,u_extrude_scale:[$.pixelsToGLUnits[0]/(I*G),$.pixelsToGLUnits[1]/(I*G)],u_overscale_factor:te}},zu=function(B,$,W){return{u_matrix:B,u_inv_matrix:$,u_camera_to_center_distance:W.cameraToCenterDistance,u_viewport_size:[W.width,W.height]}},Bu=function(B,$,W){return W===void 0&&(W=1),{u_matrix:B,u_color:$,u_overlay:0,u_overlay_scale:W}},Os=function(B){return{u_matrix:B}},ju=function(B,$,W,I){return{u_matrix:B,u_extrude_scale:Zn($,1,W),u_intensity:I}},cc=function(B,$,W,I){var G=n.create();n.ortho(G,0,B.width,B.height,0,0,1);var te=B.context.gl;return{u_matrix:G,u_world:[te.drawingBufferWidth,te.drawingBufferHeight],u_image:W,u_color_ramp:I,u_opacity:$.paint.get("heatmap-opacity")}},fc=function(B,$,W){var I=W.paint.get("hillshade-shadow-color"),G=W.paint.get("hillshade-highlight-color"),te=W.paint.get("hillshade-accent-color"),ie=W.paint.get("hillshade-illumination-direction")*(Math.PI/180);W.paint.get("hillshade-illumination-anchor")==="viewport"&&(ie-=B.transform.angle);var he,Te,Le,Fe=!B.options.moving;return{u_matrix:B.transform.calculatePosMatrix($.tileID.toUnwrapped(),Fe),u_image:0,u_latrange:(he=$.tileID,Te=Math.pow(2,he.canonical.z),Le=he.canonical.y,[new n.MercatorCoordinate(0,Le/Te).toLngLat().lat,new n.MercatorCoordinate(0,(Le+1)/Te).toLngLat().lat]),u_light:[W.paint.get("hillshade-exaggeration"),ie],u_shadow:I,u_highlight:G,u_accent:te}},Ps=function(B,$){var W=$.stride,I=n.create();return n.ortho(I,0,n.EXTENT,-n.EXTENT,0,0,1),n.translate(I,I,[0,-n.EXTENT,0]),{u_matrix:I,u_image:1,u_dimension:[W,W],u_zoom:B.overscaledZ,u_unpack:$.getUnpackVector()}},ja=function(B,$,W){var I=B.transform;return{u_matrix:_a(B,$,W),u_ratio:1/Zn($,1,I.zoom),u_device_pixel_ratio:n.browser.devicePixelRatio,u_units_to_pixels:[1/I.pixelsToGLUnits[0],1/I.pixelsToGLUnits[1]]}},tl=function(B,$,W,I){return n.extend(ja(B,$,W),{u_image:0,u_image_height:I})},Rs=function(B,$,W,I){var G=B.transform,te=Fs($,G);return{u_matrix:_a(B,$,W),u_texsize:$.imageAtlasTexture.size,u_ratio:1/Zn($,1,G.zoom),u_device_pixel_ratio:n.browser.devicePixelRatio,u_image:0,u_scale:[te,I.fromScale,I.toScale],u_fade:I.t,u_units_to_pixels:[1/G.pixelsToGLUnits[0],1/G.pixelsToGLUnits[1]]}},Al=function(B,$,W,I,G){var te=B.transform,ie=B.lineAtlas,he=Fs($,te),Te=W.layout.get("line-cap")==="round",Le=ie.getDash(I.from,Te),Fe=ie.getDash(I.to,Te),qe=Le.width*G.fromScale,We=Fe.width*G.toScale;return n.extend(ja(B,$,W),{u_patternscale_a:[he/qe,-Le.height/2],u_patternscale_b:[he/We,-Fe.height/2],u_sdfgamma:ie.width/(256*Math.min(qe,We)*n.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Le.y,u_tex_y_b:Fe.y,u_mix:G.t})};function Fs(B,$){return 1/Zn(B,1,$.tileZoom)}function _a(B,$,W){return B.translatePosMatrix($.tileID.posMatrix,$,W.paint.get("line-translate"),W.paint.get("line-translate-anchor"))}var wu=function(B,$,W,I,G){return{u_matrix:B,u_tl_parent:$,u_scale_parent:W,u_buffer_scale:1,u_fade_t:I.mix,u_opacity:I.opacity*G.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:G.paint.get("raster-brightness-min"),u_brightness_high:G.paint.get("raster-brightness-max"),u_saturation_factor:(ie=G.paint.get("raster-saturation"),ie>0?1-1/(1.001-ie):-ie),u_contrast_factor:(te=G.paint.get("raster-contrast"),te>0?1/(1-te):1+te),u_spin_weights:ms(G.paint.get("raster-hue-rotate"))};var te,ie};function ms(B){B*=Math.PI/180;var $=Math.sin(B),W=Math.cos(B);return[(2*W+1)/3,(-Math.sqrt(3)*$-W+1)/3,(Math.sqrt(3)*$-W+1)/3]}var Ja,Qa=function(B,$,W,I,G,te,ie,he,Te,Le){var Fe=G.transform;return{u_is_size_zoom_constant:+(B==="constant"||B==="source"),u_is_size_feature_constant:+(B==="constant"||B==="camera"),u_size_t:$?$.uSizeT:0,u_size:$?$.uSize:0,u_camera_to_center_distance:Fe.cameraToCenterDistance,u_pitch:Fe.pitch/360*2*Math.PI,u_rotate_symbol:+W,u_aspect_ratio:Fe.width/Fe.height,u_fade_change:G.options.fadeDuration?G.symbolFadeChange:1,u_matrix:te,u_label_plane_matrix:ie,u_coord_matrix:he,u_is_text:+Te,u_pitch_with_map:+I,u_texsize:Le,u_texture:0}},vs=function(B,$,W,I,G,te,ie,he,Te,Le,Fe){var qe=G.transform;return n.extend(Qa(B,$,W,I,G,te,ie,he,Te,Le),{u_gamma_scale:I?Math.cos(qe._pitch)*qe.cameraToCenterDistance:1,u_device_pixel_ratio:n.browser.devicePixelRatio,u_is_halo:+Fe})},$r=function(B,$,W,I,G,te,ie,he,Te,Le){return n.extend(vs(B,$,W,I,G,te,ie,he,!0,Te,!0),{u_texsize_icon:Le,u_texture_icon:1})},nl=function(B,$,W){return{u_matrix:B,u_opacity:$,u_color:W}},hc=function(B,$,W,I,G,te){return n.extend(function(ie,he,Te,Le){var Fe=Te.imageManager.getPattern(ie.from.toString()),qe=Te.imageManager.getPattern(ie.to.toString()),We=Te.imageManager.getPixelSize(),nt=We.width,ft=We.height,pt=Math.pow(2,Le.tileID.overscaledZ),wt=Le.tileSize*Math.pow(2,Te.transform.tileZoom)/pt,Ct=wt*(Le.tileID.canonical.x+Le.tileID.wrap*pt),At=wt*Le.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Fe.tl,u_pattern_br_a:Fe.br,u_pattern_tl_b:qe.tl,u_pattern_br_b:qe.br,u_texsize:[nt,ft],u_mix:he.t,u_pattern_size_a:Fe.displaySize,u_pattern_size_b:qe.displaySize,u_scale_a:he.fromScale,u_scale_b:he.toScale,u_tile_units_to_pixels:1/Zn(Le,1,Te.transform.tileZoom),u_pixel_coord_upper:[Ct>>16,At>>16],u_pixel_coord_lower:[65535&Ct,65535&At]}}(I,te,W,G),{u_matrix:B,u_opacity:$})},Kl={fillExtrusion:function(B,$){return{u_matrix:new n.UniformMatrix4f(B,$.u_matrix),u_lightpos:new n.Uniform3f(B,$.u_lightpos),u_lightintensity:new n.Uniform1f(B,$.u_lightintensity),u_lightcolor:new n.Uniform3f(B,$.u_lightcolor),u_vertical_gradient:new n.Uniform1f(B,$.u_vertical_gradient),u_opacity:new n.Uniform1f(B,$.u_opacity)}},fillExtrusionPattern:function(B,$){return{u_matrix:new n.UniformMatrix4f(B,$.u_matrix),u_lightpos:new n.Uniform3f(B,$.u_lightpos),u_lightintensity:new n.Uniform1f(B,$.u_lightintensity),u_lightcolor:new n.Uniform3f(B,$.u_lightcolor),u_vertical_gradient:new n.Uniform1f(B,$.u_vertical_gradient),u_height_factor:new n.Uniform1f(B,$.u_height_factor),u_image:new n.Uniform1i(B,$.u_image),u_texsize:new n.Uniform2f(B,$.u_texsize),u_pixel_coord_upper:new n.Uniform2f(B,$.u_pixel_coord_upper),u_pixel_coord_lower:new n.Uniform2f(B,$.u_pixel_coord_lower),u_scale:new n.Uniform3f(B,$.u_scale),u_fade:new n.Uniform1f(B,$.u_fade),u_opacity:new n.Uniform1f(B,$.u_opacity)}},fill:function(B,$){return{u_matrix:new n.UniformMatrix4f(B,$.u_matrix)}},fillPattern:function(B,$){return{u_matrix:new n.UniformMatrix4f(B,$.u_matrix),u_image:new n.Uniform1i(B,$.u_image),u_texsize:new n.Uniform2f(B,$.u_texsize),u_pixel_coord_upper:new n.Uniform2f(B,$.u_pixel_coord_upper),u_pixel_coord_lower:new n.Uniform2f(B,$.u_pixel_coord_lower),u_scale:new n.Uniform3f(B,$.u_scale),u_fade:new n.Uniform1f(B,$.u_fade)}},fillOutline:function(B,$){return{u_matrix:new n.UniformMatrix4f(B,$.u_matrix),u_world:new n.Uniform2f(B,$.u_world)}},fillOutlinePattern:function(B,$){return{u_matrix:new n.UniformMatrix4f(B,$.u_matrix),u_world:new n.Uniform2f(B,$.u_world),u_image:new n.Uniform1i(B,$.u_image),u_texsize:new n.Uniform2f(B,$.u_texsize),u_pixel_coord_upper:new n.Uniform2f(B,$.u_pixel_coord_upper),u_pixel_coord_lower:new n.Uniform2f(B,$.u_pixel_coord_lower),u_scale:new n.Uniform3f(B,$.u_scale),u_fade:new n.Uniform1f(B,$.u_fade)}},circle:function(B,$){return{u_camera_to_center_distance:new n.Uniform1f(B,$.u_camera_to_center_distance),u_scale_with_map:new n.Uniform1i(B,$.u_scale_with_map),u_pitch_with_map:new n.Uniform1i(B,$.u_pitch_with_map),u_extrude_scale:new n.Uniform2f(B,$.u_extrude_scale),u_device_pixel_ratio:new n.Uniform1f(B,$.u_device_pixel_ratio),u_matrix:new n.UniformMatrix4f(B,$.u_matrix)}},collisionBox:function(B,$){return{u_matrix:new n.UniformMatrix4f(B,$.u_matrix),u_camera_to_center_distance:new n.Uniform1f(B,$.u_camera_to_center_distance),u_pixels_to_tile_units:new n.Uniform1f(B,$.u_pixels_to_tile_units),u_extrude_scale:new n.Uniform2f(B,$.u_extrude_scale),u_overscale_factor:new n.Uniform1f(B,$.u_overscale_factor)}},collisionCircle:function(B,$){return{u_matrix:new n.UniformMatrix4f(B,$.u_matrix),u_inv_matrix:new n.UniformMatrix4f(B,$.u_inv_matrix),u_camera_to_center_distance:new n.Uniform1f(B,$.u_camera_to_center_distance),u_viewport_size:new n.Uniform2f(B,$.u_viewport_size)}},debug:function(B,$){return{u_color:new n.UniformColor(B,$.u_color),u_matrix:new n.UniformMatrix4f(B,$.u_matrix),u_overlay:new n.Uniform1i(B,$.u_overlay),u_overlay_scale:new n.Uniform1f(B,$.u_overlay_scale)}},clippingMask:function(B,$){return{u_matrix:new n.UniformMatrix4f(B,$.u_matrix)}},heatmap:function(B,$){return{u_extrude_scale:new n.Uniform1f(B,$.u_extrude_scale),u_intensity:new n.Uniform1f(B,$.u_intensity),u_matrix:new n.UniformMatrix4f(B,$.u_matrix)}},heatmapTexture:function(B,$){return{u_matrix:new n.UniformMatrix4f(B,$.u_matrix),u_world:new n.Uniform2f(B,$.u_world),u_image:new n.Uniform1i(B,$.u_image),u_color_ramp:new n.Uniform1i(B,$.u_color_ramp),u_opacity:new n.Uniform1f(B,$.u_opacity)}},hillshade:function(B,$){return{u_matrix:new n.UniformMatrix4f(B,$.u_matrix),u_image:new n.Uniform1i(B,$.u_image),u_latrange:new n.Uniform2f(B,$.u_latrange),u_light:new n.Uniform2f(B,$.u_light),u_shadow:new n.UniformColor(B,$.u_shadow),u_highlight:new n.UniformColor(B,$.u_highlight),u_accent:new n.UniformColor(B,$.u_accent)}},hillshadePrepare:function(B,$){return{u_matrix:new n.UniformMatrix4f(B,$.u_matrix),u_image:new n.Uniform1i(B,$.u_image),u_dimension:new n.Uniform2f(B,$.u_dimension),u_zoom:new n.Uniform1f(B,$.u_zoom),u_unpack:new n.Uniform4f(B,$.u_unpack)}},line:function(B,$){return{u_matrix:new n.UniformMatrix4f(B,$.u_matrix),u_ratio:new n.Uniform1f(B,$.u_ratio),u_device_pixel_ratio:new n.Uniform1f(B,$.u_device_pixel_ratio),u_units_to_pixels:new n.Uniform2f(B,$.u_units_to_pixels)}},lineGradient:function(B,$){return{u_matrix:new n.UniformMatrix4f(B,$.u_matrix),u_ratio:new n.Uniform1f(B,$.u_ratio),u_device_pixel_ratio:new n.Uniform1f(B,$.u_device_pixel_ratio),u_units_to_pixels:new n.Uniform2f(B,$.u_units_to_pixels),u_image:new n.Uniform1i(B,$.u_image),u_image_height:new n.Uniform1f(B,$.u_image_height)}},linePattern:function(B,$){return{u_matrix:new n.UniformMatrix4f(B,$.u_matrix),u_texsize:new n.Uniform2f(B,$.u_texsize),u_ratio:new n.Uniform1f(B,$.u_ratio),u_device_pixel_ratio:new n.Uniform1f(B,$.u_device_pixel_ratio),u_image:new n.Uniform1i(B,$.u_image),u_units_to_pixels:new n.Uniform2f(B,$.u_units_to_pixels),u_scale:new n.Uniform3f(B,$.u_scale),u_fade:new n.Uniform1f(B,$.u_fade)}},lineSDF:function(B,$){return{u_matrix:new n.UniformMatrix4f(B,$.u_matrix),u_ratio:new n.Uniform1f(B,$.u_ratio),u_device_pixel_ratio:new n.Uniform1f(B,$.u_device_pixel_ratio),u_units_to_pixels:new n.Uniform2f(B,$.u_units_to_pixels),u_patternscale_a:new n.Uniform2f(B,$.u_patternscale_a),u_patternscale_b:new n.Uniform2f(B,$.u_patternscale_b),u_sdfgamma:new n.Uniform1f(B,$.u_sdfgamma),u_image:new n.Uniform1i(B,$.u_image),u_tex_y_a:new n.Uniform1f(B,$.u_tex_y_a),u_tex_y_b:new n.Uniform1f(B,$.u_tex_y_b),u_mix:new n.Uniform1f(B,$.u_mix)}},raster:function(B,$){return{u_matrix:new n.UniformMatrix4f(B,$.u_matrix),u_tl_parent:new n.Uniform2f(B,$.u_tl_parent),u_scale_parent:new n.Uniform1f(B,$.u_scale_parent),u_buffer_scale:new n.Uniform1f(B,$.u_buffer_scale),u_fade_t:new n.Uniform1f(B,$.u_fade_t),u_opacity:new n.Uniform1f(B,$.u_opacity),u_image0:new n.Uniform1i(B,$.u_image0),u_image1:new n.Uniform1i(B,$.u_image1),u_brightness_low:new n.Uniform1f(B,$.u_brightness_low),u_brightness_high:new n.Uniform1f(B,$.u_brightness_high),u_saturation_factor:new n.Uniform1f(B,$.u_saturation_factor),u_contrast_factor:new n.Uniform1f(B,$.u_contrast_factor),u_spin_weights:new n.Uniform3f(B,$.u_spin_weights)}},symbolIcon:function(B,$){return{u_is_size_zoom_constant:new n.Uniform1i(B,$.u_is_size_zoom_constant),u_is_size_feature_constant:new n.Uniform1i(B,$.u_is_size_feature_constant),u_size_t:new n.Uniform1f(B,$.u_size_t),u_size:new n.Uniform1f(B,$.u_size),u_camera_to_center_distance:new n.Uniform1f(B,$.u_camera_to_center_distance),u_pitch:new n.Uniform1f(B,$.u_pitch),u_rotate_symbol:new n.Uniform1i(B,$.u_rotate_symbol),u_aspect_ratio:new n.Uniform1f(B,$.u_aspect_ratio),u_fade_change:new n.Uniform1f(B,$.u_fade_change),u_matrix:new n.UniformMatrix4f(B,$.u_matrix),u_label_plane_matrix:new n.UniformMatrix4f(B,$.u_label_plane_matrix),u_coord_matrix:new n.UniformMatrix4f(B,$.u_coord_matrix),u_is_text:new n.Uniform1i(B,$.u_is_text),u_pitch_with_map:new n.Uniform1i(B,$.u_pitch_with_map),u_texsize:new n.Uniform2f(B,$.u_texsize),u_texture:new n.Uniform1i(B,$.u_texture)}},symbolSDF:function(B,$){return{u_is_size_zoom_constant:new n.Uniform1i(B,$.u_is_size_zoom_constant),u_is_size_feature_constant:new n.Uniform1i(B,$.u_is_size_feature_constant),u_size_t:new n.Uniform1f(B,$.u_size_t),u_size:new n.Uniform1f(B,$.u_size),u_camera_to_center_distance:new n.Uniform1f(B,$.u_camera_to_center_distance),u_pitch:new n.Uniform1f(B,$.u_pitch),u_rotate_symbol:new n.Uniform1i(B,$.u_rotate_symbol),u_aspect_ratio:new n.Uniform1f(B,$.u_aspect_ratio),u_fade_change:new n.Uniform1f(B,$.u_fade_change),u_matrix:new n.UniformMatrix4f(B,$.u_matrix),u_label_plane_matrix:new n.UniformMatrix4f(B,$.u_label_plane_matrix),u_coord_matrix:new n.UniformMatrix4f(B,$.u_coord_matrix),u_is_text:new n.Uniform1i(B,$.u_is_text),u_pitch_with_map:new n.Uniform1i(B,$.u_pitch_with_map),u_texsize:new n.Uniform2f(B,$.u_texsize),u_texture:new n.Uniform1i(B,$.u_texture),u_gamma_scale:new n.Uniform1f(B,$.u_gamma_scale),u_device_pixel_ratio:new n.Uniform1f(B,$.u_device_pixel_ratio),u_is_halo:new n.Uniform1i(B,$.u_is_halo)}},symbolTextAndIcon:function(B,$){return{u_is_size_zoom_constant:new n.Uniform1i(B,$.u_is_size_zoom_constant),u_is_size_feature_constant:new n.Uniform1i(B,$.u_is_size_feature_constant),u_size_t:new n.Uniform1f(B,$.u_size_t),u_size:new n.Uniform1f(B,$.u_size),u_camera_to_center_distance:new n.Uniform1f(B,$.u_camera_to_center_distance),u_pitch:new n.Uniform1f(B,$.u_pitch),u_rotate_symbol:new n.Uniform1i(B,$.u_rotate_symbol),u_aspect_ratio:new n.Uniform1f(B,$.u_aspect_ratio),u_fade_change:new n.Uniform1f(B,$.u_fade_change),u_matrix:new n.UniformMatrix4f(B,$.u_matrix),u_label_plane_matrix:new n.UniformMatrix4f(B,$.u_label_plane_matrix),u_coord_matrix:new n.UniformMatrix4f(B,$.u_coord_matrix),u_is_text:new n.Uniform1i(B,$.u_is_text),u_pitch_with_map:new n.Uniform1i(B,$.u_pitch_with_map),u_texsize:new n.Uniform2f(B,$.u_texsize),u_texsize_icon:new n.Uniform2f(B,$.u_texsize_icon),u_texture:new n.Uniform1i(B,$.u_texture),u_texture_icon:new n.Uniform1i(B,$.u_texture_icon),u_gamma_scale:new n.Uniform1f(B,$.u_gamma_scale),u_device_pixel_ratio:new n.Uniform1f(B,$.u_device_pixel_ratio),u_is_halo:new n.Uniform1i(B,$.u_is_halo)}},background:function(B,$){return{u_matrix:new n.UniformMatrix4f(B,$.u_matrix),u_opacity:new n.Uniform1f(B,$.u_opacity),u_color:new n.UniformColor(B,$.u_color)}},backgroundPattern:function(B,$){return{u_matrix:new n.UniformMatrix4f(B,$.u_matrix),u_opacity:new n.Uniform1f(B,$.u_opacity),u_image:new n.Uniform1i(B,$.u_image),u_pattern_tl_a:new n.Uniform2f(B,$.u_pattern_tl_a),u_pattern_br_a:new n.Uniform2f(B,$.u_pattern_br_a),u_pattern_tl_b:new n.Uniform2f(B,$.u_pattern_tl_b),u_pattern_br_b:new n.Uniform2f(B,$.u_pattern_br_b),u_texsize:new n.Uniform2f(B,$.u_texsize),u_mix:new n.Uniform1f(B,$.u_mix),u_pattern_size_a:new n.Uniform2f(B,$.u_pattern_size_a),u_pattern_size_b:new n.Uniform2f(B,$.u_pattern_size_b),u_scale_a:new n.Uniform1f(B,$.u_scale_a),u_scale_b:new n.Uniform1f(B,$.u_scale_b),u_pixel_coord_upper:new n.Uniform2f(B,$.u_pixel_coord_upper),u_pixel_coord_lower:new n.Uniform2f(B,$.u_pixel_coord_lower),u_tile_units_to_pixels:new n.Uniform1f(B,$.u_tile_units_to_pixels)}}};function rl(B,$,W,I,G,te,ie){for(var he=B.context,Te=he.gl,Le=B.useProgram("collisionBox"),Fe=[],qe=0,We=0,nt=0;nt<I.length;nt++){var ft=I[nt],pt=$.getTile(ft),wt=pt.getBucket(W);if(wt){var Ct=ft.posMatrix;G[0]===0&&G[1]===0||(Ct=B.translatePosMatrix(ft.posMatrix,pt,G,te));var At=ie?wt.textCollisionBox:wt.iconCollisionBox,zt=wt.collisionCircleArray;if(zt.length>0){var It=n.create(),Xt=Ct;n.mul(It,wt.placementInvProjMatrix,B.transform.glCoordMatrix),n.mul(It,It,wt.placementViewportMatrix),Fe.push({circleArray:zt,circleOffset:We,transform:Xt,invTransform:It}),We=qe+=zt.length/4}At&&Le.draw(he,Te.LINES,Rt.disabled,Ye.disabled,B.colorModeForRenderPass(),Ve.disabled,Ls(Ct,B.transform,pt),W.id,At.layoutVertexBuffer,At.indexBuffer,At.segments,null,B.transform.zoom,null,null,At.collisionVertexBuffer)}}if(ie&&Fe.length){var Gt=B.useProgram("collisionCircle"),Vt=new n.StructArrayLayout2f1f2i16;Vt.resize(4*qe),Vt._trim();for(var pn=0,vn=0,Sn=Fe;vn<Sn.length;vn+=1)for(var In=Sn[vn],Vn=0;Vn<In.circleArray.length/4;Vn++){var nr=4*Vn,cr=In.circleArray[nr+0],Gn=In.circleArray[nr+1],lr=In.circleArray[nr+2],xr=In.circleArray[nr+3];Vt.emplace(pn++,cr,Gn,lr,xr,0),Vt.emplace(pn++,cr,Gn,lr,xr,1),Vt.emplace(pn++,cr,Gn,lr,xr,2),Vt.emplace(pn++,cr,Gn,lr,xr,3)}(!Ja||Ja.length<2*qe)&&(Ja=function(Ir){var Vr=2*Ir,Ur=new n.StructArrayLayout3ui6;Ur.resize(Vr),Ur._trim();for(var Wr=0;Wr<Vr;Wr++){var Kr=6*Wr;Ur.uint16[Kr+0]=4*Wr+0,Ur.uint16[Kr+1]=4*Wr+1,Ur.uint16[Kr+2]=4*Wr+2,Ur.uint16[Kr+3]=4*Wr+2,Ur.uint16[Kr+4]=4*Wr+3,Ur.uint16[Kr+5]=4*Wr+0}return Ur}(qe));for(var Er=he.createIndexBuffer(Ja,!0),er=he.createVertexBuffer(Vt,n.collisionCircleLayout.members,!0),sr=0,wr=Fe;sr<wr.length;sr+=1){var fr=wr[sr],Ar=zu(fr.transform,fr.invTransform,B.transform);Gt.draw(he,Te.TRIANGLES,Rt.disabled,Ye.disabled,B.colorModeForRenderPass(),Ve.disabled,Ar,W.id,er,Er,n.SegmentVector.simpleSegment(0,2*fr.circleOffset,fr.circleArray.length,fr.circleArray.length/2),null,B.transform.zoom,null,null,null)}er.destroy(),Er.destroy()}}var Vu=n.identity(new Float32Array(16));function dc(B,$,W,I,G,te){var ie=n.getAnchorAlignment(B),he=-(ie.horizontalAlign-.5)*$,Te=-(ie.verticalAlign-.5)*W,Le=n.evaluateVariableOffset(B,I);return new n.Point((he/G+Le[0])*te,(Te/G+Le[1])*te)}function Jl(B,$,W,I,G,te,ie,he,Te,Le,Fe){var qe=B.text.placedSymbolArray,We=B.text.dynamicLayoutVertexArray,nt=B.icon.dynamicLayoutVertexArray,ft={};We.clear();for(var pt=0;pt<qe.length;pt++){var wt=qe.get(pt),Ct=B.allowVerticalPlacement&&!wt.placedOrientation,At=wt.hidden||!wt.crossTileID||Ct?null:I[wt.crossTileID];if(At){var zt=new n.Point(wt.anchorX,wt.anchorY),It=Jt(zt,W?he:ie),Xt=un(te.cameraToCenterDistance,It.signedDistanceFromCamera),Gt=G.evaluateSizeForFeature(B.textSizeData,Le,wt)*Xt/n.ONE_EM;W&&(Gt*=B.tilePixelRatio/Te);for(var Vt=At.width,pn=At.height,vn=dc(At.anchor,Vt,pn,At.textOffset,At.textBoxScale,Gt),Sn=W?Jt(zt.add(vn),ie).point:It.point.add($?vn.rotate(-te.angle):vn),In=B.allowVerticalPlacement&&wt.placedOrientation===n.WritingMode.vertical?Math.PI/2:0,Vn=0;Vn<wt.numGlyphs;Vn++)n.addDynamicAttributes(We,Sn,In);Fe&&wt.associatedIconIndex>=0&&(ft[wt.associatedIconIndex]={shiftedAnchor:Sn,angle:In})}else Nn(wt.numGlyphs,We)}if(Fe){nt.clear();for(var nr=B.icon.placedSymbolArray,cr=0;cr<nr.length;cr++){var Gn=nr.get(cr);if(Gn.hidden)Nn(Gn.numGlyphs,nt);else{var lr=ft[cr];if(lr)for(var xr=0;xr<Gn.numGlyphs;xr++)n.addDynamicAttributes(nt,lr.shiftedAnchor,lr.angle);else Nn(Gn.numGlyphs,nt)}}B.icon.dynamicLayoutVertexBuffer.updateData(nt)}B.text.dynamicLayoutVertexBuffer.updateData(We)}function pc(B,$,W){return W.iconsInText&&$?"symbolTextAndIcon":B?"symbolSDF":"symbolIcon"}function ys(B,$,W,I,G,te,ie,he,Te,Le,Fe,qe){for(var We=B.context,nt=We.gl,ft=B.transform,pt=he==="map",wt=Te==="map",Ct=pt&&W.layout.get("symbol-placement")!=="point",At=pt&&!wt&&!Ct,zt=W.layout.get("symbol-sort-key").constantOr(1)!==void 0,It=!1,Xt=B.depthModeForSublayer(0,Rt.ReadOnly),Gt=W.layout.get("text-variable-anchor"),Vt=[],pn=0,vn=I;pn<vn.length;pn+=1){var Sn=vn[pn],In=$.getTile(Sn),Vn=In.getBucket(W);if(Vn){var nr=G?Vn.text:Vn.icon;if(nr&&nr.segments.get().length){var cr=nr.programConfigurations.get(W.id),Gn=G||Vn.sdfIcons,lr=G?Vn.textSizeData:Vn.iconSizeData,xr=wt||ft.pitch!==0,Er=B.useProgram(pc(Gn,G,Vn),cr),er=n.evaluateSizeForZoom(lr,ft.zoom),sr=void 0,wr=[0,0],fr=void 0,Ar=void 0,Ir=null,Vr=void 0;if(G){if(fr=In.glyphAtlasTexture,Ar=nt.LINEAR,sr=In.glyphAtlasTexture.size,Vn.iconsInText){wr=In.imageAtlasTexture.size,Ir=In.imageAtlasTexture;var Ur=lr.kind==="composite"||lr.kind==="camera";Vr=xr||B.options.rotating||B.options.zooming||Ur?nt.LINEAR:nt.NEAREST}}else{var Wr=W.layout.get("icon-size").constantOr(0)!==1||Vn.iconsNeedLinear;fr=In.imageAtlasTexture,Ar=Gn||B.options.rotating||B.options.zooming||Wr||xr?nt.LINEAR:nt.NEAREST,sr=In.imageAtlasTexture.size}var Kr=Zn(In,1,B.transform.zoom),ki=kn(Sn.posMatrix,wt,pt,B.transform,Kr),qi=gn(Sn.posMatrix,wt,pt,B.transform,Kr),Do=Gt&&Vn.hasTextData(),fo=W.layout.get("icon-text-fit")!=="none"&&Do&&Vn.hasIconData();Ct&&hn(Vn,Sn.posMatrix,B,G,ki,qi,wt,Le);var To=B.translatePosMatrix(Sn.posMatrix,In,te,ie),Oi=Ct||G&&Gt||fo?Vu:ki,ei=B.translatePosMatrix(qi,In,te,ie,!0),Bi=Gn&&W.paint.get(G?"text-halo-width":"icon-halo-width").constantOr(1)!==0,vi={program:Er,buffers:nr,uniformValues:Gn?Vn.iconsInText?$r(lr.kind,er,At,wt,B,To,Oi,ei,sr,wr):vs(lr.kind,er,At,wt,B,To,Oi,ei,G,sr,!0):Qa(lr.kind,er,At,wt,B,To,Oi,ei,G,sr),atlasTexture:fr,atlasTextureIcon:Ir,atlasInterpolation:Ar,atlasInterpolationIcon:Vr,isSDF:Gn,hasHalo:Bi};if(zt&&Vn.canOverlap){It=!0;for(var oi=0,ji=nr.segments.get();oi<ji.length;oi+=1){var Gi=ji[oi];Vt.push({segments:new n.SegmentVector([Gi]),sortKey:Gi.sortKey,state:vi})}}else Vt.push({segments:nr.segments,sortKey:0,state:vi})}}}It&&Vt.sort(function(Rl,os){return Rl.sortKey-os.sortKey});for(var io=0,dl=Vt;io<dl.length;io+=1){var pl=dl[io],ai=pl.state;if(We.activeTexture.set(nt.TEXTURE0),ai.atlasTexture.bind(ai.atlasInterpolation,nt.CLAMP_TO_EDGE),ai.atlasTextureIcon&&(We.activeTexture.set(nt.TEXTURE1),ai.atlasTextureIcon&&ai.atlasTextureIcon.bind(ai.atlasInterpolationIcon,nt.CLAMP_TO_EDGE)),ai.isSDF){var ru=ai.uniformValues;ai.hasHalo&&(ru.u_is_halo=1,Ns(ai.buffers,pl.segments,W,B,ai.program,Xt,Fe,qe,ru)),ru.u_is_halo=0}Ns(ai.buffers,pl.segments,W,B,ai.program,Xt,Fe,qe,ai.uniformValues)}}function Ns(B,$,W,I,G,te,ie,he,Te){var Le=I.context,Fe=Le.gl;G.draw(Le,Fe.TRIANGLES,te,ie,he,Ve.disabled,Te,W.id,B.layoutVertexBuffer,B.indexBuffer,$,W.paint,I.transform.zoom,B.programConfigurations.get(W.id),B.dynamicLayoutVertexBuffer,B.opacityVertexBuffer)}function es(B,$,W,I,G,te,ie){var he,Te,Le,Fe,qe,We=B.context.gl,nt=W.paint.get("fill-pattern"),ft=nt&&nt.constantOr(1),pt=W.getCrossfadeParameters();ie?(Te=ft&&!W.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",he=We.LINES):(Te=ft?"fillPattern":"fill",he=We.TRIANGLES);for(var wt=0,Ct=I;wt<Ct.length;wt+=1){var At=Ct[wt],zt=$.getTile(At);if(!ft||zt.patternsLoaded()){var It=zt.getBucket(W);if(It){var Xt=It.programConfigurations.get(W.id),Gt=B.useProgram(Te,Xt);ft&&(B.context.activeTexture.set(We.TEXTURE0),zt.imageAtlasTexture.bind(We.LINEAR,We.CLAMP_TO_EDGE),Xt.updatePaintBuffers(pt));var Vt=nt.constantOr(null);if(Vt&&zt.imageAtlas){var pn=zt.imageAtlas,vn=pn.patternPositions[Vt.to.toString()],Sn=pn.patternPositions[Vt.from.toString()];vn&&Sn&&Xt.setConstantPatternPositions(vn,Sn)}var In=B.translatePosMatrix(At.posMatrix,zt,W.paint.get("fill-translate"),W.paint.get("fill-translate-anchor"));if(ie){Fe=It.indexBuffer2,qe=It.segments2;var Vn=[We.drawingBufferWidth,We.drawingBufferHeight];Le=Te==="fillOutlinePattern"&&ft?_u(In,B,pt,zt,Vn):Ba(In,Vn)}else Fe=It.indexBuffer,qe=It.segments,Le=ft?gs(In,B,pt,zt):Ka(In);Gt.draw(B.context,he,G,B.stencilModeForClipping(At),te,Ve.disabled,Le,W.id,It.layoutVertexBuffer,Fe,qe,W.paint,B.transform.zoom,Xt)}}}}function wa(B,$,W,I,G,te,ie){for(var he=B.context,Te=he.gl,Le=W.paint.get("fill-extrusion-pattern"),Fe=Le.constantOr(1),qe=W.getCrossfadeParameters(),We=W.paint.get("fill-extrusion-opacity"),nt=0,ft=I;nt<ft.length;nt+=1){var pt=ft[nt],wt=$.getTile(pt),Ct=wt.getBucket(W);if(Ct){var At=Ct.programConfigurations.get(W.id),zt=B.useProgram(Fe?"fillExtrusionPattern":"fillExtrusion",At);Fe&&(B.context.activeTexture.set(Te.TEXTURE0),wt.imageAtlasTexture.bind(Te.LINEAR,Te.CLAMP_TO_EDGE),At.updatePaintBuffers(qe));var It=Le.constantOr(null);if(It&&wt.imageAtlas){var Xt=wt.imageAtlas,Gt=Xt.patternPositions[It.to.toString()],Vt=Xt.patternPositions[It.from.toString()];Gt&&Vt&&At.setConstantPatternPositions(Gt,Vt)}var pn=B.translatePosMatrix(pt.posMatrix,wt,W.paint.get("fill-extrusion-translate"),W.paint.get("fill-extrusion-translate-anchor")),vn=W.paint.get("fill-extrusion-vertical-gradient"),Sn=Fe?ps(pn,B,vn,We,pt,qe,wt):za(pn,B,vn,We);zt.draw(he,he.gl.TRIANGLES,G,te,ie,Ve.backCCW,Sn,W.id,Ct.layoutVertexBuffer,Ct.indexBuffer,Ct.segments,W.paint,B.transform.zoom,At)}}}function il(B,$,W,I,G,te){var ie=B.context,he=ie.gl,Te=$.fbo;if(Te){var Le=B.useProgram("hillshade");ie.activeTexture.set(he.TEXTURE0),he.bindTexture(he.TEXTURE_2D,Te.colorAttachment.get());var Fe=fc(B,$,W);Le.draw(ie,he.TRIANGLES,I,G,te,Ve.disabled,Fe,W.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments)}}function Uu(B,$,W,I,G,te){var ie=B.context,he=ie.gl,Te=$.dem;if(Te&&Te.data){var Le=Te.dim,Fe=Te.stride,qe=Te.getPixels();if(ie.activeTexture.set(he.TEXTURE1),ie.pixelStoreUnpackPremultiplyAlpha.set(!1),$.demTexture=$.demTexture||B.getTileTexture(Fe),$.demTexture){var We=$.demTexture;We.update(qe,{premultiply:!1}),We.bind(he.NEAREST,he.CLAMP_TO_EDGE)}else $.demTexture=new n.Texture(ie,qe,he.RGBA,{premultiply:!1}),$.demTexture.bind(he.NEAREST,he.CLAMP_TO_EDGE);ie.activeTexture.set(he.TEXTURE0);var nt=$.fbo;if(!nt){var ft=new n.Texture(ie,{width:Le,height:Le,data:null},he.RGBA);ft.bind(he.LINEAR,he.CLAMP_TO_EDGE),(nt=$.fbo=ie.createFramebuffer(Le,Le,!0)).colorAttachment.set(ft.texture)}ie.bindFramebuffer.set(nt.framebuffer),ie.viewport.set([0,0,Le,Le]),B.useProgram("hillshadePrepare").draw(ie,he.TRIANGLES,I,G,te,Ve.disabled,Ps($.tileID,Te),W.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments),$.needsHillshadePrepare=!1}}function kl(B,$,W,I,G){var te=I.paint.get("raster-fade-duration");if(te>0){var ie=n.browser.now(),he=(ie-B.timeAdded)/te,Te=$?(ie-$.timeAdded)/te:-1,Le=W.getSource(),Fe=G.coveringZoomLevel({tileSize:Le.tileSize,roundZoom:Le.roundZoom}),qe=!$||Math.abs($.tileID.overscaledZ-Fe)>Math.abs(B.tileID.overscaledZ-Fe),We=qe&&B.refreshedUponExpiration?1:n.clamp(qe?he:1-Te,0,1);return B.refreshedUponExpiration&&he>=1&&(B.refreshedUponExpiration=!1),$?{opacity:1,mix:1-We}:{opacity:We,mix:0}}return{opacity:1,mix:0}}var Ql=new n.Color(1,0,0,1),Xo=new n.Color(0,1,0,1),eu=new n.Color(0,0,1,1),Hu=new n.Color(1,0,1,1),ol=new n.Color(0,1,1,1);function zs(B){var $=B.transform.padding;al(B,B.transform.height-($.top||0),3,Ql),al(B,$.bottom||0,3,Xo),Bs(B,$.left||0,3,eu),Bs(B,B.transform.width-($.right||0),3,Hu);var W=B.transform.centerPoint;(function(I,G,te,ie){var he=20,Te=2;js(I,G-Te/2,te-he/2,Te,he,ie),js(I,G-he/2,te-Te/2,he,Te,ie)})(B,W.x,B.transform.height-W.y,ol)}function al(B,$,W,I){js(B,0,$+W/2,B.transform.width,W,I)}function Bs(B,$,W,I){js(B,$-W/2,0,W,B.transform.height,I)}function js(B,$,W,I,G,te){var ie=B.context,he=ie.gl;he.enable(he.SCISSOR_TEST),he.scissor($*n.browser.devicePixelRatio,W*n.browser.devicePixelRatio,I*n.browser.devicePixelRatio,G*n.browser.devicePixelRatio),ie.clear({color:te}),he.disable(he.SCISSOR_TEST)}function Sl(B,$,W){var I=B.context,G=I.gl,te=W.posMatrix,ie=B.useProgram("debug"),he=Rt.disabled,Te=Ye.disabled,Le=B.colorModeForRenderPass(),Fe="$debug";I.activeTexture.set(G.TEXTURE0),B.emptyTexture.bind(G.LINEAR,G.CLAMP_TO_EDGE),ie.draw(I,G.LINE_STRIP,he,Te,Le,Ve.disabled,Bu(te,n.Color.red),Fe,B.debugBuffer,B.tileBorderIndexBuffer,B.debugSegments);var qe=$.getTileByID(W.key).latestRawTileData,We=qe&&qe.byteLength||0,nt=Math.floor(We/1024),ft=$.getTile(W).tileSize,pt=512/Math.min(ft,512)*(W.overscaledZ/B.transform.zoom)*.5,wt=W.canonical.toString();W.overscaledZ!==W.canonical.z&&(wt+=" => "+W.overscaledZ),function(Ct,At){Ct.initDebugOverlayCanvas();var zt=Ct.debugOverlayCanvas,It=Ct.context.gl,Xt=Ct.debugOverlayCanvas.getContext("2d");Xt.clearRect(0,0,zt.width,zt.height),Xt.shadowColor="white",Xt.shadowBlur=2,Xt.lineWidth=1.5,Xt.strokeStyle="white",Xt.textBaseline="top",Xt.font="bold 36px Open Sans, sans-serif",Xt.fillText(At,5,5),Xt.strokeText(At,5,5),Ct.debugOverlayTexture.update(zt),Ct.debugOverlayTexture.bind(It.LINEAR,It.CLAMP_TO_EDGE)}(B,wt+" "+nt+"kb"),ie.draw(I,G.TRIANGLES,he,Te,Ke.alphaBlended,Ve.disabled,Bu(te,n.Color.transparent,pt),Fe,B.debugBuffer,B.quadTriangleIndexBuffer,B.debugSegments)}var tu={symbol:function(B,$,W,I,G){if(B.renderPass==="translucent"){var te=Ye.disabled,ie=B.colorModeForRenderPass();W.layout.get("text-variable-anchor")&&function(he,Te,Le,Fe,qe,We,nt){for(var ft=Te.transform,pt=qe==="map",wt=We==="map",Ct=0,At=he;Ct<At.length;Ct+=1){var zt=At[Ct],It=Fe.getTile(zt),Xt=It.getBucket(Le);if(Xt&&Xt.text&&Xt.text.segments.get().length){var Gt=Xt.textSizeData,Vt=n.evaluateSizeForZoom(Gt,ft.zoom),pn=Zn(It,1,Te.transform.zoom),vn=kn(zt.posMatrix,wt,pt,Te.transform,pn),Sn=Le.layout.get("icon-text-fit")!=="none"&&Xt.hasIconData();if(Vt){var In=Math.pow(2,ft.zoom-It.tileID.overscaledZ);Jl(Xt,pt,wt,nt,n.symbolSize,ft,vn,zt.posMatrix,In,Vt,Sn)}}}}(I,B,W,$,W.layout.get("text-rotation-alignment"),W.layout.get("text-pitch-alignment"),G),W.paint.get("icon-opacity").constantOr(1)!==0&&ys(B,$,W,I,!1,W.paint.get("icon-translate"),W.paint.get("icon-translate-anchor"),W.layout.get("icon-rotation-alignment"),W.layout.get("icon-pitch-alignment"),W.layout.get("icon-keep-upright"),te,ie),W.paint.get("text-opacity").constantOr(1)!==0&&ys(B,$,W,I,!0,W.paint.get("text-translate"),W.paint.get("text-translate-anchor"),W.layout.get("text-rotation-alignment"),W.layout.get("text-pitch-alignment"),W.layout.get("text-keep-upright"),te,ie),$.map.showCollisionBoxes&&(rl(B,$,W,I,W.paint.get("text-translate"),W.paint.get("text-translate-anchor"),!0),rl(B,$,W,I,W.paint.get("icon-translate"),W.paint.get("icon-translate-anchor"),!1))}},circle:function(B,$,W,I){if(B.renderPass==="translucent"){var G=W.paint.get("circle-opacity"),te=W.paint.get("circle-stroke-width"),ie=W.paint.get("circle-stroke-opacity"),he=W.layout.get("circle-sort-key").constantOr(1)!==void 0;if(G.constantOr(1)!==0||te.constantOr(1)!==0&&ie.constantOr(1)!==0){for(var Te=B.context,Le=Te.gl,Fe=B.depthModeForSublayer(0,Rt.ReadOnly),qe=Ye.disabled,We=B.colorModeForRenderPass(),nt=[],ft=0;ft<I.length;ft++){var pt=I[ft],wt=$.getTile(pt),Ct=wt.getBucket(W);if(Ct){var At=Ct.programConfigurations.get(W.id),zt={programConfiguration:At,program:B.useProgram("circle",At),layoutVertexBuffer:Ct.layoutVertexBuffer,indexBuffer:Ct.indexBuffer,uniformValues:Xl(B,pt,wt,W)};if(he)for(var It=0,Xt=Ct.segments.get();It<Xt.length;It+=1){var Gt=Xt[It];nt.push({segments:new n.SegmentVector([Gt]),sortKey:Gt.sortKey,state:zt})}else nt.push({segments:Ct.segments,sortKey:0,state:zt})}}he&&nt.sort(function(xr,Er){return xr.sortKey-Er.sortKey});for(var Vt=0,pn=nt;Vt<pn.length;Vt+=1){var vn=pn[Vt],Sn=vn.state,In=Sn.programConfiguration,Vn=Sn.program,nr=Sn.layoutVertexBuffer,cr=Sn.indexBuffer,Gn=Sn.uniformValues,lr=vn.segments;Vn.draw(Te,Le.TRIANGLES,Fe,qe,We,Ve.disabled,Gn,W.id,nr,cr,lr,W.paint,B.transform.zoom,In)}}}},heatmap:function(B,$,W,I){if(W.paint.get("heatmap-opacity")!==0)if(B.renderPass==="offscreen"){var G=B.context,te=G.gl,ie=Ye.disabled,he=new Ke([te.ONE,te.ONE],n.Color.transparent,[!0,!0,!0,!0]);(function(pt,wt,Ct){var At=pt.gl;pt.activeTexture.set(At.TEXTURE1),pt.viewport.set([0,0,wt.width/4,wt.height/4]);var zt=Ct.heatmapFbo;if(zt)At.bindTexture(At.TEXTURE_2D,zt.colorAttachment.get()),pt.bindFramebuffer.set(zt.framebuffer);else{var It=At.createTexture();At.bindTexture(At.TEXTURE_2D,It),At.texParameteri(At.TEXTURE_2D,At.TEXTURE_WRAP_S,At.CLAMP_TO_EDGE),At.texParameteri(At.TEXTURE_2D,At.TEXTURE_WRAP_T,At.CLAMP_TO_EDGE),At.texParameteri(At.TEXTURE_2D,At.TEXTURE_MIN_FILTER,At.LINEAR),At.texParameteri(At.TEXTURE_2D,At.TEXTURE_MAG_FILTER,At.LINEAR),zt=Ct.heatmapFbo=pt.createFramebuffer(wt.width/4,wt.height/4,!1),function(Xt,Gt,Vt,pn){var vn=Xt.gl,Sn=Xt.extRenderToTextureHalfFloat?Xt.extTextureHalfFloat.HALF_FLOAT_OES:vn.UNSIGNED_BYTE;vn.texImage2D(vn.TEXTURE_2D,0,vn.RGBA,Gt.width/4,Gt.height/4,0,vn.RGBA,Sn,null),pn.colorAttachment.set(Vt)}(pt,wt,It,zt)}})(G,B,W),G.clear({color:n.Color.transparent});for(var Te=0;Te<I.length;Te++){var Le=I[Te];if(!$.hasRenderableParent(Le)){var Fe=$.getTile(Le),qe=Fe.getBucket(W);if(qe){var We=qe.programConfigurations.get(W.id),nt=B.useProgram("heatmap",We),ft=B.transform.zoom;nt.draw(G,te.TRIANGLES,Rt.disabled,ie,he,Ve.disabled,ju(Le.posMatrix,Fe,ft,W.paint.get("heatmap-intensity")),W.id,qe.layoutVertexBuffer,qe.indexBuffer,qe.segments,W.paint,B.transform.zoom,We)}}}G.viewport.set([0,0,B.width,B.height])}else B.renderPass==="translucent"&&(B.context.setColorMode(B.colorModeForRenderPass()),function(pt,wt){var Ct=pt.context,At=Ct.gl,zt=wt.heatmapFbo;if(zt){Ct.activeTexture.set(At.TEXTURE0),At.bindTexture(At.TEXTURE_2D,zt.colorAttachment.get()),Ct.activeTexture.set(At.TEXTURE1);var It=wt.colorRampTexture;It||(It=wt.colorRampTexture=new n.Texture(Ct,wt.colorRamp,At.RGBA)),It.bind(At.LINEAR,At.CLAMP_TO_EDGE),pt.useProgram("heatmapTexture").draw(Ct,At.TRIANGLES,Rt.disabled,Ye.disabled,pt.colorModeForRenderPass(),Ve.disabled,cc(pt,wt,0,1),wt.id,pt.viewportBuffer,pt.quadTriangleIndexBuffer,pt.viewportSegments,wt.paint,pt.transform.zoom)}}(B,W))},line:function(B,$,W,I){if(B.renderPass==="translucent"){var G=W.paint.get("line-opacity"),te=W.paint.get("line-width");if(G.constantOr(1)!==0&&te.constantOr(1)!==0)for(var ie=B.depthModeForSublayer(0,Rt.ReadOnly),he=B.colorModeForRenderPass(),Te=W.paint.get("line-dasharray"),Le=W.paint.get("line-pattern"),Fe=Le.constantOr(1),qe=W.paint.get("line-gradient"),We=W.getCrossfadeParameters(),nt=Fe?"linePattern":Te?"lineSDF":qe?"lineGradient":"line",ft=B.context,pt=ft.gl,wt=!0,Ct=0,At=I;Ct<At.length;Ct+=1){var zt=At[Ct],It=$.getTile(zt);if(!Fe||It.patternsLoaded()){var Xt=It.getBucket(W);if(Xt){var Gt=Xt.programConfigurations.get(W.id),Vt=B.context.program.get(),pn=B.useProgram(nt,Gt),vn=wt||pn.program!==Vt,Sn=Le.constantOr(null);if(Sn&&It.imageAtlas){var In=It.imageAtlas,Vn=In.patternPositions[Sn.to.toString()],nr=In.patternPositions[Sn.from.toString()];Vn&&nr&&Gt.setConstantPatternPositions(Vn,nr)}var cr=Fe?Rs(B,It,W,We):Te?Al(B,It,W,Te,We):qe?tl(B,It,W,Xt.lineClipsArray.length):ja(B,It,W);if(Fe)ft.activeTexture.set(pt.TEXTURE0),It.imageAtlasTexture.bind(pt.LINEAR,pt.CLAMP_TO_EDGE),Gt.updatePaintBuffers(We);else if(Te&&(vn||B.lineAtlas.dirty))ft.activeTexture.set(pt.TEXTURE0),B.lineAtlas.bind(ft);else if(qe){var Gn=Xt.gradients[W.id],lr=Gn.texture;if(W.gradientVersion!==Gn.version){var xr=256;if(W.stepInterpolant){var Er=$.getSource().maxzoom,er=zt.canonical.z===Er?Math.ceil(1<<B.transform.maxZoom-zt.canonical.z):1,sr=Xt.maxLineLength/n.EXTENT*1024*er;xr=n.clamp(n.nextPowerOfTwo(sr),256,ft.maxTextureSize)}Gn.gradient=n.renderColorRamp({expression:W.gradientExpression(),evaluationKey:"lineProgress",resolution:xr,image:Gn.gradient||void 0,clips:Xt.lineClipsArray}),Gn.texture?Gn.texture.update(Gn.gradient):Gn.texture=new n.Texture(ft,Gn.gradient,pt.RGBA),Gn.version=W.gradientVersion,lr=Gn.texture}ft.activeTexture.set(pt.TEXTURE0),lr.bind(W.stepInterpolant?pt.NEAREST:pt.LINEAR,pt.CLAMP_TO_EDGE)}pn.draw(ft,pt.TRIANGLES,ie,B.stencilModeForClipping(zt),he,Ve.disabled,cr,W.id,Xt.layoutVertexBuffer,Xt.indexBuffer,Xt.segments,W.paint,B.transform.zoom,Gt,Xt.layoutVertexBuffer2),wt=!1}}}}},fill:function(B,$,W,I){var G=W.paint.get("fill-color"),te=W.paint.get("fill-opacity");if(te.constantOr(1)!==0){var ie=B.colorModeForRenderPass(),he=W.paint.get("fill-pattern"),Te=B.opaquePassEnabledForLayer()&&!he.constantOr(1)&&G.constantOr(n.Color.transparent).a===1&&te.constantOr(0)===1?"opaque":"translucent";if(B.renderPass===Te){var Le=B.depthModeForSublayer(1,B.renderPass==="opaque"?Rt.ReadWrite:Rt.ReadOnly);es(B,$,W,I,Le,ie,!1)}if(B.renderPass==="translucent"&&W.paint.get("fill-antialias")){var Fe=B.depthModeForSublayer(W.getPaintProperty("fill-outline-color")?2:0,Rt.ReadOnly);es(B,$,W,I,Fe,ie,!0)}}},"fill-extrusion":function(B,$,W,I){var G=W.paint.get("fill-extrusion-opacity");if(G!==0&&B.renderPass==="translucent"){var te=new Rt(B.context.gl.LEQUAL,Rt.ReadWrite,B.depthRangeFor3D);if(G!==1||W.paint.get("fill-extrusion-pattern").constantOr(1))wa(B,$,W,I,te,Ye.disabled,Ke.disabled),wa(B,$,W,I,te,B.stencilModeFor3D(),B.colorModeForRenderPass());else{var ie=B.colorModeForRenderPass();wa(B,$,W,I,te,Ye.disabled,ie)}}},hillshade:function(B,$,W,I){if(B.renderPass==="offscreen"||B.renderPass==="translucent"){for(var G=B.context,te=B.depthModeForSublayer(0,Rt.ReadOnly),ie=B.colorModeForRenderPass(),he=B.renderPass==="translucent"?B.stencilConfigForOverlap(I):[{},I],Te=he[0],Le=0,Fe=he[1];Le<Fe.length;Le+=1){var qe=Fe[Le],We=$.getTile(qe);We.needsHillshadePrepare&&B.renderPass==="offscreen"?Uu(B,We,W,te,Ye.disabled,ie):B.renderPass==="translucent"&&il(B,We,W,te,Te[qe.overscaledZ],ie)}G.viewport.set([0,0,B.width,B.height])}},raster:function(B,$,W,I){if(B.renderPass==="translucent"&&W.paint.get("raster-opacity")!==0&&I.length)for(var G=B.context,te=G.gl,ie=$.getSource(),he=B.useProgram("raster"),Te=B.colorModeForRenderPass(),Le=ie instanceof z?[{},I]:B.stencilConfigForOverlap(I),Fe=Le[0],qe=Le[1],We=qe[qe.length-1].overscaledZ,nt=!B.options.moving,ft=0,pt=qe;ft<pt.length;ft+=1){var wt=pt[ft],Ct=B.depthModeForSublayer(wt.overscaledZ-We,W.paint.get("raster-opacity")===1?Rt.ReadWrite:Rt.ReadOnly,te.LESS),At=$.getTile(wt),zt=B.transform.calculatePosMatrix(wt.toUnwrapped(),nt);At.registerFadeDuration(W.paint.get("raster-fade-duration"));var It=$.findLoadedParent(wt,0),Xt=kl(At,It,$,W,B.transform),Gt=void 0,Vt=void 0,pn=W.paint.get("raster-resampling")==="nearest"?te.NEAREST:te.LINEAR;G.activeTexture.set(te.TEXTURE0),At.texture.bind(pn,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST),G.activeTexture.set(te.TEXTURE1),It?(It.texture.bind(pn,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST),Gt=Math.pow(2,It.tileID.overscaledZ-At.tileID.overscaledZ),Vt=[At.tileID.canonical.x*Gt%1,At.tileID.canonical.y*Gt%1]):At.texture.bind(pn,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST);var vn=wu(zt,Vt||[0,0],Gt||1,Xt,W);ie instanceof z?he.draw(G,te.TRIANGLES,Ct,Ye.disabled,Te,Ve.disabled,vn,W.id,ie.boundsBuffer,B.quadTriangleIndexBuffer,ie.boundsSegments):he.draw(G,te.TRIANGLES,Ct,Fe[wt.overscaledZ],Te,Ve.disabled,vn,W.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments)}},background:function(B,$,W){var I=W.paint.get("background-color"),G=W.paint.get("background-opacity");if(G!==0){var te=B.context,ie=te.gl,he=B.transform,Te=he.tileSize,Le=W.paint.get("background-pattern");if(!B.isPatternMissing(Le)){var Fe=!Le&&I.a===1&&G===1&&B.opaquePassEnabledForLayer()?"opaque":"translucent";if(B.renderPass===Fe){var qe=Ye.disabled,We=B.depthModeForSublayer(0,Fe==="opaque"?Rt.ReadWrite:Rt.ReadOnly),nt=B.colorModeForRenderPass(),ft=B.useProgram(Le?"backgroundPattern":"background"),pt=he.coveringTiles({tileSize:Te});Le&&(te.activeTexture.set(ie.TEXTURE0),B.imageManager.bind(B.context));for(var wt=W.getCrossfadeParameters(),Ct=0,At=pt;Ct<At.length;Ct+=1){var zt=At[Ct],It=B.transform.calculatePosMatrix(zt.toUnwrapped()),Xt=Le?hc(It,G,B,Le,{tileID:zt,tileSize:Te},wt):nl(It,G,I);ft.draw(te,ie.TRIANGLES,We,qe,nt,Ve.disabled,Xt,W.id,B.tileExtentBuffer,B.quadTriangleIndexBuffer,B.tileExtentSegments)}}}}},debug:function(B,$,W){for(var I=0;I<W.length;I++)Sl(B,$,W[I])},custom:function(B,$,W){var I=B.context,G=W.implementation;if(B.renderPass==="offscreen"){var te=G.prerender;te&&(B.setCustomLayerDefaults(),I.setColorMode(B.colorModeForRenderPass()),te.call(G,I.gl,B.transform.customLayerMatrix()),I.setDirty(),B.setBaseState())}else if(B.renderPass==="translucent"){B.setCustomLayerDefaults(),I.setColorMode(B.colorModeForRenderPass()),I.setStencilMode(Ye.disabled);var ie=G.renderingMode==="3d"?new Rt(B.context.gl.LEQUAL,Rt.ReadWrite,B.depthRangeFor3D):B.depthModeForSublayer(0,Rt.ReadOnly);I.setDepthMode(ie),G.render(I.gl,B.transform.customLayerMatrix()),I.setDirty(),B.setBaseState(),I.bindFramebuffer.set(null)}}},fi=function(B,$){this.context=new $e(B),this.transform=$,this._tileTextures={},this.setup(),this.numSublayers=lt.maxUnderzooming+lt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Rn,this.gpuTimers={}};fi.prototype.resize=function(B,$){if(this.width=B*n.browser.devicePixelRatio,this.height=$*n.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var W=0,I=this.style._order;W<I.length;W+=1){var G=I[W];this.style._layers[G].resize()}},fi.prototype.setup=function(){var B=this.context,$=new n.StructArrayLayout2i4;$.emplaceBack(0,0),$.emplaceBack(n.EXTENT,0),$.emplaceBack(0,n.EXTENT),$.emplaceBack(n.EXTENT,n.EXTENT),this.tileExtentBuffer=B.createVertexBuffer($,Jn.members),this.tileExtentSegments=n.SegmentVector.simpleSegment(0,0,4,2);var W=new n.StructArrayLayout2i4;W.emplaceBack(0,0),W.emplaceBack(n.EXTENT,0),W.emplaceBack(0,n.EXTENT),W.emplaceBack(n.EXTENT,n.EXTENT),this.debugBuffer=B.createVertexBuffer(W,Jn.members),this.debugSegments=n.SegmentVector.simpleSegment(0,0,4,5);var I=new n.StructArrayLayout4i8;I.emplaceBack(0,0,0,0),I.emplaceBack(n.EXTENT,0,n.EXTENT,0),I.emplaceBack(0,n.EXTENT,0,n.EXTENT),I.emplaceBack(n.EXTENT,n.EXTENT,n.EXTENT,n.EXTENT),this.rasterBoundsBuffer=B.createVertexBuffer(I,Z.members),this.rasterBoundsSegments=n.SegmentVector.simpleSegment(0,0,4,2);var G=new n.StructArrayLayout2i4;G.emplaceBack(0,0),G.emplaceBack(1,0),G.emplaceBack(0,1),G.emplaceBack(1,1),this.viewportBuffer=B.createVertexBuffer(G,Jn.members),this.viewportSegments=n.SegmentVector.simpleSegment(0,0,4,2);var te=new n.StructArrayLayout1ui2;te.emplaceBack(0),te.emplaceBack(1),te.emplaceBack(3),te.emplaceBack(2),te.emplaceBack(0),this.tileBorderIndexBuffer=B.createIndexBuffer(te);var ie=new n.StructArrayLayout3ui6;ie.emplaceBack(0,1,2),ie.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=B.createIndexBuffer(ie),this.emptyTexture=new n.Texture(B,{width:1,height:1,data:new Uint8Array([0,0,0,0])},B.gl.RGBA);var he=this.context.gl;this.stencilClearMode=new Ye({func:he.ALWAYS,mask:0},0,255,he.ZERO,he.ZERO,he.ZERO)},fi.prototype.clearStencil=function(){var B=this.context,$=B.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var W=n.create();n.ortho(W,0,this.width,this.height,0,0,1),n.scale(W,W,[$.drawingBufferWidth,$.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(B,$.TRIANGLES,Rt.disabled,this.stencilClearMode,Ke.disabled,Ve.disabled,Os(W),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},fi.prototype._renderTileClippingMasks=function(B,$){if(this.currentStencilSource!==B.source&&B.isTileClipped()&&$&&$.length){this.currentStencilSource=B.source;var W=this.context,I=W.gl;this.nextStencilID+$.length>256&&this.clearStencil(),W.setColorMode(Ke.disabled),W.setDepthMode(Rt.disabled);var G=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var te=0,ie=$;te<ie.length;te+=1){var he=ie[te],Te=this._tileClippingMaskIDs[he.key]=this.nextStencilID++;G.draw(W,I.TRIANGLES,Rt.disabled,new Ye({func:I.ALWAYS,mask:0},Te,255,I.KEEP,I.KEEP,I.REPLACE),Ke.disabled,Ve.disabled,Os(he.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},fi.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var B=this.nextStencilID++,$=this.context.gl;return new Ye({func:$.NOTEQUAL,mask:255},B,255,$.KEEP,$.KEEP,$.REPLACE)},fi.prototype.stencilModeForClipping=function(B){var $=this.context.gl;return new Ye({func:$.EQUAL,mask:255},this._tileClippingMaskIDs[B.key],0,$.KEEP,$.KEEP,$.REPLACE)},fi.prototype.stencilConfigForOverlap=function(B){var $,W=this.context.gl,I=B.sort(function(Te,Le){return Le.overscaledZ-Te.overscaledZ}),G=I[I.length-1].overscaledZ,te=I[0].overscaledZ-G+1;if(te>1){this.currentStencilSource=void 0,this.nextStencilID+te>256&&this.clearStencil();for(var ie={},he=0;he<te;he++)ie[he+G]=new Ye({func:W.GEQUAL,mask:255},he+this.nextStencilID,255,W.KEEP,W.KEEP,W.REPLACE);return this.nextStencilID+=te,[ie,I]}return[($={},$[G]=Ye.disabled,$),I]},fi.prototype.colorModeForRenderPass=function(){var B=this.context.gl;if(this._showOverdrawInspector){var $=.125;return new Ke([B.CONSTANT_COLOR,B.ONE],new n.Color($,$,$,0),[!0,!0,!0,!0])}return this.renderPass==="opaque"?Ke.unblended:Ke.alphaBlended},fi.prototype.depthModeForSublayer=function(B,$,W){if(!this.opaquePassEnabledForLayer())return Rt.disabled;var I=1-((1+this.currentLayer)*this.numSublayers+B)*this.depthEpsilon;return new Rt(W||this.context.gl.LEQUAL,$,[I,I])},fi.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},fi.prototype.render=function(B,$){var W=this;this.style=B,this.options=$,this.lineAtlas=B.lineAtlas,this.imageManager=B.imageManager,this.glyphManager=B.glyphManager,this.symbolFadeChange=B.placement.symbolFadeChange(n.browser.now()),this.imageManager.beginFrame();var I=this.style._order,G=this.style.sourceCaches;for(var te in G){var ie=G[te];ie.used&&ie.prepare(this.context)}var he,Te,Le={},Fe={},qe={};for(var We in G){var nt=G[We];Le[We]=nt.getVisibleCoordinates(),Fe[We]=Le[We].slice().reverse(),qe[We]=nt.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var ft=0;ft<I.length;ft++){var pt=I[ft];if(this.style._layers[pt].is3D()){this.opaquePassCutoff=ft;break}}this.renderPass="offscreen";for(var wt=0,Ct=I;wt<Ct.length;wt+=1){var At=Ct[wt],zt=this.style._layers[At];if(zt.hasOffscreenPass()&&!zt.isHidden(this.transform.zoom)){var It=Fe[zt.source];(zt.type==="custom"||It.length)&&this.renderLayer(this,G[zt.source],zt,It)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:$.showOverdrawInspector?n.Color.black:n.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=$.showOverdrawInspector,this.depthRangeFor3D=[0,1-(B._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=I.length-1;this.currentLayer>=0;this.currentLayer--){var Xt=this.style._layers[I[this.currentLayer]],Gt=G[Xt.source],Vt=Le[Xt.source];this._renderTileClippingMasks(Xt,Vt),this.renderLayer(this,Gt,Xt,Vt)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<I.length;this.currentLayer++){var pn=this.style._layers[I[this.currentLayer]],vn=G[pn.source],Sn=(pn.type==="symbol"?qe:Fe)[pn.source];this._renderTileClippingMasks(pn,Le[pn.source]),this.renderLayer(this,vn,pn,Sn)}this.options.showTileBoundaries&&(n.values(this.style._layers).forEach(function(In){In.source&&!In.isHidden(W.transform.zoom)&&(In.source!==(Te&&Te.id)&&(Te=W.style.sourceCaches[In.source]),(!he||he.getSource().maxzoom<Te.getSource().maxzoom)&&(he=Te))}),he&&tu.debug(this,he,he.getVisibleCoordinates())),this.options.showPadding&&zs(this),this.context.setDefault()},fi.prototype.renderLayer=function(B,$,W,I){W.isHidden(this.transform.zoom)||(W.type==="background"||W.type==="custom"||I.length)&&(this.id=W.id,this.gpuTimingStart(W),tu[W.type](B,$,W,I,this.style.placement.variableOffsets),this.gpuTimingEnd())},fi.prototype.gpuTimingStart=function(B){if(this.options.gpuTiming){var $=this.context.extTimerQuery,W=this.gpuTimers[B.id];W||(W=this.gpuTimers[B.id]={calls:0,cpuTime:0,query:$.createQueryEXT()}),W.calls++,$.beginQueryEXT($.TIME_ELAPSED_EXT,W.query)}},fi.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var B=this.context.extTimerQuery;B.endQueryEXT(B.TIME_ELAPSED_EXT)}},fi.prototype.collectGpuTimers=function(){var B=this.gpuTimers;return this.gpuTimers={},B},fi.prototype.queryGpuTimers=function(B){var $={};for(var W in B){var I=B[W],G=this.context.extTimerQuery,te=G.getQueryObjectEXT(I.query,G.QUERY_RESULT_EXT)/1e6;G.deleteQueryEXT(I.query),$[W]=te}return $},fi.prototype.translatePosMatrix=function(B,$,W,I,G){if(!W[0]&&!W[1])return B;var te=G?I==="map"?this.transform.angle:0:I==="viewport"?-this.transform.angle:0;if(te){var ie=Math.sin(te),he=Math.cos(te);W=[W[0]*he-W[1]*ie,W[0]*ie+W[1]*he]}var Te=[G?W[0]:Zn($,W[0],this.transform.zoom),G?W[1]:Zn($,W[1],this.transform.zoom),0],Le=new Float32Array(16);return n.translate(Le,B,Te),Le},fi.prototype.saveTileTexture=function(B){var $=this._tileTextures[B.size[0]];$?$.push(B):this._tileTextures[B.size[0]]=[B]},fi.prototype.getTileTexture=function(B){var $=this._tileTextures[B];return $&&$.length>0?$.pop():null},fi.prototype.isPatternMissing=function(B){if(!B)return!1;if(!B.from||!B.to)return!0;var $=this.imageManager.getPattern(B.from.toString()),W=this.imageManager.getPattern(B.to.toString());return!$||!W},fi.prototype.useProgram=function(B,$){this.cache=this.cache||{};var W=""+B+($?$.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[W]||(this.cache[W]=new ba(this.context,B,lo[B],$,Kl[B],this._showOverdrawInspector)),this.cache[W]},fi.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},fi.prototype.setBaseState=function(){var B=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(B.FUNC_ADD)},fi.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=n.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var B=this.context.gl;this.debugOverlayTexture=new n.Texture(this.context,this.debugOverlayCanvas,B.RGBA)}},fi.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var xs=function(B,$){this.points=B,this.planes=$};xs.fromInvProjectionMatrix=function(B,$,W){var I=Math.pow(2,W),G=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(ie){return n.transformMat4([],ie,B)}).map(function(ie){return n.scale$1([],ie,1/ie[3]/$*I)}),te=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(ie){var he=n.sub([],G[ie[0]],G[ie[1]]),Te=n.sub([],G[ie[2]],G[ie[1]]),Le=n.normalize([],n.cross([],he,Te)),Fe=-n.dot(Le,G[ie[1]]);return Le.concat(Fe)});return new xs(G,te)};var wo=function(B,$){this.min=B,this.max=$,this.center=n.scale$2([],n.add([],this.min,this.max),.5)};wo.prototype.quadrant=function(B){for(var $=[B%2==0,B<2],W=n.clone$2(this.min),I=n.clone$2(this.max),G=0;G<$.length;G++)W[G]=$[G]?this.min[G]:this.center[G],I[G]=$[G]?this.center[G]:this.max[G];return I[2]=this.max[2],new wo(W,I)},wo.prototype.distanceX=function(B){return Math.max(Math.min(this.max[0],B[0]),this.min[0])-B[0]},wo.prototype.distanceY=function(B){return Math.max(Math.min(this.max[1],B[1]),this.min[1])-B[1]},wo.prototype.intersects=function(B){for(var $=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],W=!0,I=0;I<B.planes.length;I++){for(var G=B.planes[I],te=0,ie=0;ie<$.length;ie++)te+=n.dot$1(G,$[ie])>=0;if(te===0)return 0;te!==$.length&&(W=!1)}if(W)return 2;for(var he=0;he<3;he++){for(var Te=Number.MAX_VALUE,Le=-Number.MAX_VALUE,Fe=0;Fe<B.points.length;Fe++){var qe=B.points[Fe][he]-this.min[he];Te=Math.min(Te,qe),Le=Math.max(Le,qe)}if(Le<0||Te>this.max[he]-this.min[he])return 0}return 1};var Ta=function(B,$,W,I){if(B===void 0&&(B=0),$===void 0&&($=0),W===void 0&&(W=0),I===void 0&&(I=0),isNaN(B)||B<0||isNaN($)||$<0||isNaN(W)||W<0||isNaN(I)||I<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=B,this.bottom=$,this.left=W,this.right=I};Ta.prototype.interpolate=function(B,$,W){return $.top!=null&&B.top!=null&&(this.top=n.number(B.top,$.top,W)),$.bottom!=null&&B.bottom!=null&&(this.bottom=n.number(B.bottom,$.bottom,W)),$.left!=null&&B.left!=null&&(this.left=n.number(B.left,$.left,W)),$.right!=null&&B.right!=null&&(this.right=n.number(B.right,$.right,W)),this},Ta.prototype.getCenter=function(B,$){var W=n.clamp((this.left+B-this.right)/2,0,B),I=n.clamp((this.top+$-this.bottom)/2,0,$);return new n.Point(W,I)},Ta.prototype.equals=function(B){return this.top===B.top&&this.bottom===B.bottom&&this.left===B.left&&this.right===B.right},Ta.prototype.clone=function(){return new Ta(this.top,this.bottom,this.left,this.right)},Ta.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var ni=function(B,$,W,I,G){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=G===void 0||G,this._minZoom=B||0,this._maxZoom=$||22,this._minPitch=W??0,this._maxPitch=I??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new n.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ta,this._posMatrixCache={},this._alignedPosMatrixCache={}},ui={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};ni.prototype.clone=function(){var B=new ni(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return B.tileSize=this.tileSize,B.latRange=this.latRange,B.width=this.width,B.height=this.height,B._center=this._center,B.zoom=this.zoom,B.angle=this.angle,B._fov=this._fov,B._pitch=this._pitch,B._unmodified=this._unmodified,B._edgeInsets=this._edgeInsets.clone(),B._calcMatrices(),B},ui.minZoom.get=function(){return this._minZoom},ui.minZoom.set=function(B){this._minZoom!==B&&(this._minZoom=B,this.zoom=Math.max(this.zoom,B))},ui.maxZoom.get=function(){return this._maxZoom},ui.maxZoom.set=function(B){this._maxZoom!==B&&(this._maxZoom=B,this.zoom=Math.min(this.zoom,B))},ui.minPitch.get=function(){return this._minPitch},ui.minPitch.set=function(B){this._minPitch!==B&&(this._minPitch=B,this.pitch=Math.max(this.pitch,B))},ui.maxPitch.get=function(){return this._maxPitch},ui.maxPitch.set=function(B){this._maxPitch!==B&&(this._maxPitch=B,this.pitch=Math.min(this.pitch,B))},ui.renderWorldCopies.get=function(){return this._renderWorldCopies},ui.renderWorldCopies.set=function(B){B===void 0?B=!0:B===null&&(B=!1),this._renderWorldCopies=B},ui.worldSize.get=function(){return this.tileSize*this.scale},ui.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},ui.size.get=function(){return new n.Point(this.width,this.height)},ui.bearing.get=function(){return-this.angle/Math.PI*180},ui.bearing.set=function(B){var $=-n.wrap(B,-180,180)*Math.PI/180;this.angle!==$&&(this._unmodified=!1,this.angle=$,this._calcMatrices(),this.rotationMatrix=n.create$2(),n.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},ui.pitch.get=function(){return this._pitch/Math.PI*180},ui.pitch.set=function(B){var $=n.clamp(B,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==$&&(this._unmodified=!1,this._pitch=$,this._calcMatrices())},ui.fov.get=function(){return this._fov/Math.PI*180},ui.fov.set=function(B){B=Math.max(.01,Math.min(60,B)),this._fov!==B&&(this._unmodified=!1,this._fov=B/180*Math.PI,this._calcMatrices())},ui.zoom.get=function(){return this._zoom},ui.zoom.set=function(B){var $=Math.min(Math.max(B,this.minZoom),this.maxZoom);this._zoom!==$&&(this._unmodified=!1,this._zoom=$,this.scale=this.zoomScale($),this.tileZoom=Math.floor($),this.zoomFraction=$-this.tileZoom,this._constrain(),this._calcMatrices())},ui.center.get=function(){return this._center},ui.center.set=function(B){B.lat===this._center.lat&&B.lng===this._center.lng||(this._unmodified=!1,this._center=B,this._constrain(),this._calcMatrices())},ui.padding.get=function(){return this._edgeInsets.toJSON()},ui.padding.set=function(B){this._edgeInsets.equals(B)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,B,1),this._calcMatrices())},ui.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},ni.prototype.isPaddingEqual=function(B){return this._edgeInsets.equals(B)},ni.prototype.interpolatePadding=function(B,$,W){this._unmodified=!1,this._edgeInsets.interpolate(B,$,W),this._constrain(),this._calcMatrices()},ni.prototype.coveringZoomLevel=function(B){var $=(B.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/B.tileSize));return Math.max(0,$)},ni.prototype.getVisibleUnwrappedCoordinates=function(B){var $=[new n.UnwrappedTileID(0,B)];if(this._renderWorldCopies)for(var W=this.pointCoordinate(new n.Point(0,0)),I=this.pointCoordinate(new n.Point(this.width,0)),G=this.pointCoordinate(new n.Point(this.width,this.height)),te=this.pointCoordinate(new n.Point(0,this.height)),ie=Math.floor(Math.min(W.x,I.x,G.x,te.x)),he=Math.floor(Math.max(W.x,I.x,G.x,te.x)),Te=ie-1;Te<=he+1;Te++)Te!==0&&$.push(new n.UnwrappedTileID(Te,B));return $},ni.prototype.coveringTiles=function(B){var $=this.coveringZoomLevel(B),W=$;if(B.minzoom!==void 0&&$<B.minzoom)return[];B.maxzoom!==void 0&&$>B.maxzoom&&($=B.maxzoom);var I=n.MercatorCoordinate.fromLngLat(this.center),G=Math.pow(2,$),te=[G*I.x,G*I.y,0],ie=xs.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,$),he=B.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(he=$);var Te=function(Sn){return{aabb:new wo([Sn*G,0,0],[(Sn+1)*G,G,0]),zoom:0,x:0,y:0,wrap:Sn,fullyVisible:!1}},Le=[],Fe=[],qe=$,We=B.reparseOverscaled?W:$;if(this._renderWorldCopies)for(var nt=1;nt<=3;nt++)Le.push(Te(-nt)),Le.push(Te(nt));for(Le.push(Te(0));Le.length>0;){var ft=Le.pop(),pt=ft.x,wt=ft.y,Ct=ft.fullyVisible;if(!Ct){var At=ft.aabb.intersects(ie);if(At===0)continue;Ct=At===2}var zt=ft.aabb.distanceX(te),It=ft.aabb.distanceY(te),Xt=Math.max(Math.abs(zt),Math.abs(It)),Gt=3+(1<<qe-ft.zoom)-2;if(ft.zoom===qe||Xt>Gt&&ft.zoom>=he)Fe.push({tileID:new n.OverscaledTileID(ft.zoom===qe?We:ft.zoom,ft.wrap,ft.zoom,pt,wt),distanceSq:n.sqrLen([te[0]-.5-pt,te[1]-.5-wt])});else for(var Vt=0;Vt<4;Vt++){var pn=(pt<<1)+Vt%2,vn=(wt<<1)+(Vt>>1);Le.push({aabb:ft.aabb.quadrant(Vt),zoom:ft.zoom+1,x:pn,y:vn,wrap:ft.wrap,fullyVisible:Ct})}}return Fe.sort(function(Sn,In){return Sn.distanceSq-In.distanceSq}).map(function(Sn){return Sn.tileID})},ni.prototype.resize=function(B,$){this.width=B,this.height=$,this.pixelsToGLUnits=[2/B,-2/$],this._constrain(),this._calcMatrices()},ui.unmodified.get=function(){return this._unmodified},ni.prototype.zoomScale=function(B){return Math.pow(2,B)},ni.prototype.scaleZoom=function(B){return Math.log(B)/Math.LN2},ni.prototype.project=function(B){var $=n.clamp(B.lat,-this.maxValidLatitude,this.maxValidLatitude);return new n.Point(n.mercatorXfromLng(B.lng)*this.worldSize,n.mercatorYfromLat($)*this.worldSize)},ni.prototype.unproject=function(B){return new n.MercatorCoordinate(B.x/this.worldSize,B.y/this.worldSize).toLngLat()},ui.point.get=function(){return this.project(this.center)},ni.prototype.setLocationAtPoint=function(B,$){var W=this.pointCoordinate($),I=this.pointCoordinate(this.centerPoint),G=this.locationCoordinate(B),te=new n.MercatorCoordinate(G.x-(W.x-I.x),G.y-(W.y-I.y));this.center=this.coordinateLocation(te),this._renderWorldCopies&&(this.center=this.center.wrap())},ni.prototype.locationPoint=function(B){return this.coordinatePoint(this.locationCoordinate(B))},ni.prototype.pointLocation=function(B){return this.coordinateLocation(this.pointCoordinate(B))},ni.prototype.locationCoordinate=function(B){return n.MercatorCoordinate.fromLngLat(B)},ni.prototype.coordinateLocation=function(B){return B.toLngLat()},ni.prototype.pointCoordinate=function(B){var $=[B.x,B.y,0,1],W=[B.x,B.y,1,1];n.transformMat4($,$,this.pixelMatrixInverse),n.transformMat4(W,W,this.pixelMatrixInverse);var I=$[3],G=W[3],te=$[0]/I,ie=W[0]/G,he=$[1]/I,Te=W[1]/G,Le=$[2]/I,Fe=W[2]/G,qe=Le===Fe?0:(0-Le)/(Fe-Le);return new n.MercatorCoordinate(n.number(te,ie,qe)/this.worldSize,n.number(he,Te,qe)/this.worldSize)},ni.prototype.coordinatePoint=function(B){var $=[B.x*this.worldSize,B.y*this.worldSize,0,1];return n.transformMat4($,$,this.pixelMatrix),new n.Point($[0]/$[3],$[1]/$[3])},ni.prototype.getBounds=function(){return new n.LngLatBounds().extend(this.pointLocation(new n.Point(0,0))).extend(this.pointLocation(new n.Point(this.width,0))).extend(this.pointLocation(new n.Point(this.width,this.height))).extend(this.pointLocation(new n.Point(0,this.height)))},ni.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new n.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},ni.prototype.setMaxBounds=function(B){B?(this.lngRange=[B.getWest(),B.getEast()],this.latRange=[B.getSouth(),B.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},ni.prototype.calculatePosMatrix=function(B,$){$===void 0&&($=!1);var W=B.key,I=$?this._alignedPosMatrixCache:this._posMatrixCache;if(I[W])return I[W];var G=B.canonical,te=this.worldSize/this.zoomScale(G.z),ie=G.x+Math.pow(2,G.z)*B.wrap,he=n.identity(new Float64Array(16));return n.translate(he,he,[ie*te,G.y*te,0]),n.scale(he,he,[te/n.EXTENT,te/n.EXTENT,1]),n.multiply(he,$?this.alignedProjMatrix:this.projMatrix,he),I[W]=new Float32Array(he),I[W]},ni.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},ni.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var B,$,W,I,G=-90,te=90,ie=-180,he=180,Te=this.size,Le=this._unmodified;if(this.latRange){var Fe=this.latRange;G=n.mercatorYfromLat(Fe[1])*this.worldSize,B=(te=n.mercatorYfromLat(Fe[0])*this.worldSize)-G<Te.y?Te.y/(te-G):0}if(this.lngRange){var qe=this.lngRange;ie=n.mercatorXfromLng(qe[0])*this.worldSize,$=(he=n.mercatorXfromLng(qe[1])*this.worldSize)-ie<Te.x?Te.x/(he-ie):0}var We=this.point,nt=Math.max($||0,B||0);if(nt)return this.center=this.unproject(new n.Point($?(he+ie)/2:We.x,B?(te+G)/2:We.y)),this.zoom+=this.scaleZoom(nt),this._unmodified=Le,void(this._constraining=!1);if(this.latRange){var ft=We.y,pt=Te.y/2;ft-pt<G&&(I=G+pt),ft+pt>te&&(I=te-pt)}if(this.lngRange){var wt=We.x,Ct=Te.x/2;wt-Ct<ie&&(W=ie+Ct),wt+Ct>he&&(W=he-Ct)}W===void 0&&I===void 0||(this.center=this.unproject(new n.Point(W!==void 0?W:We.x,I!==void 0?I:We.y))),this._unmodified=Le,this._constraining=!1}},ni.prototype._calcMatrices=function(){if(this.height){var B=this._fov/2,$=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(B)*this.height;var W=Math.PI/2+this._pitch,I=this._fov*(.5+$.y/this.height),G=Math.sin(I)*this.cameraToCenterDistance/Math.sin(n.clamp(Math.PI-W-I,.01,Math.PI-.01)),te=this.point,ie=te.x,he=te.y,Te=1.01*(Math.cos(Math.PI/2-this._pitch)*G+this.cameraToCenterDistance),Le=this.height/50,Fe=new Float64Array(16);n.perspective(Fe,this._fov,this.width/this.height,Le,Te),Fe[8]=2*-$.x/this.width,Fe[9]=2*$.y/this.height,n.scale(Fe,Fe,[1,-1,1]),n.translate(Fe,Fe,[0,0,-this.cameraToCenterDistance]),n.rotateX(Fe,Fe,this._pitch),n.rotateZ(Fe,Fe,this.angle),n.translate(Fe,Fe,[-ie,-he,0]),this.mercatorMatrix=n.scale([],Fe,[this.worldSize,this.worldSize,this.worldSize]),n.scale(Fe,Fe,[1,1,n.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=Fe,this.invProjMatrix=n.invert([],this.projMatrix);var qe=this.width%2/2,We=this.height%2/2,nt=Math.cos(this.angle),ft=Math.sin(this.angle),pt=ie-Math.round(ie)+nt*qe+ft*We,wt=he-Math.round(he)+nt*We+ft*qe,Ct=new Float64Array(Fe);if(n.translate(Ct,Ct,[pt>.5?pt-1:pt,wt>.5?wt-1:wt,0]),this.alignedProjMatrix=Ct,Fe=n.create(),n.scale(Fe,Fe,[this.width/2,-this.height/2,1]),n.translate(Fe,Fe,[1,-1,0]),this.labelPlaneMatrix=Fe,Fe=n.create(),n.scale(Fe,Fe,[1,-1,1]),n.translate(Fe,Fe,[-1,-1,0]),n.scale(Fe,Fe,[2/this.width,2/this.height,1]),this.glCoordMatrix=Fe,this.pixelMatrix=n.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(Fe=n.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=Fe,this._posMatrixCache={},this._alignedPosMatrixCache={}}},ni.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var B=this.pointCoordinate(new n.Point(0,0)),$=[B.x*this.worldSize,B.y*this.worldSize,0,1];return n.transformMat4($,$,this.pixelMatrix)[3]/this.cameraToCenterDistance},ni.prototype.getCameraPoint=function(){var B=this._pitch,$=Math.tan(B)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new n.Point(0,$))},ni.prototype.getCameraQueryGeometry=function(B){var $=this.getCameraPoint();if(B.length===1)return[B[0],$];for(var W=$.x,I=$.y,G=$.x,te=$.y,ie=0,he=B;ie<he.length;ie+=1){var Te=he[ie];W=Math.min(W,Te.x),I=Math.min(I,Te.y),G=Math.max(G,Te.x),te=Math.max(te,Te.y)}return[new n.Point(W,I),new n.Point(G,I),new n.Point(G,te),new n.Point(W,te),new n.Point(W,I)]},Object.defineProperties(ni.prototype,ui);var Ko=function(B){var $,W,I,G,te;this._hashName=B&&encodeURIComponent(B),n.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=($=this._updateHashUnthrottled.bind(this),W=300,I=!1,G=null,te=function(){G=null,I&&($(),G=setTimeout(te,W),I=!1)},function(){return I=!0,G||te(),G})};Ko.prototype.addTo=function(B){return this._map=B,n.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Ko.prototype.remove=function(){return n.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Ko.prototype.getHashString=function(B){var $=this._map.getCenter(),W=Math.round(100*this._map.getZoom())/100,I=Math.ceil((W*Math.LN2+Math.log(512/360/.5))/Math.LN10),G=Math.pow(10,I),te=Math.round($.lng*G)/G,ie=Math.round($.lat*G)/G,he=this._map.getBearing(),Te=this._map.getPitch(),Le="";if(Le+=B?"/"+te+"/"+ie+"/"+W:W+"/"+ie+"/"+te,(he||Te)&&(Le+="/"+Math.round(10*he)/10),Te&&(Le+="/"+Math.round(Te)),this._hashName){var Fe=this._hashName,qe=!1,We=n.window.location.hash.slice(1).split("&").map(function(nt){var ft=nt.split("=")[0];return ft===Fe?(qe=!0,ft+"="+Le):nt}).filter(function(nt){return nt});return qe||We.push(Fe+"="+Le),"#"+We.join("&")}return"#"+Le},Ko.prototype._getCurrentHash=function(){var B,$=this,W=n.window.location.hash.replace("#","");return this._hashName?(W.split("&").map(function(I){return I.split("=")}).forEach(function(I){I[0]===$._hashName&&(B=I)}),(B&&B[1]||"").split("/")):W.split("/")},Ko.prototype._onHashChange=function(){var B=this._getCurrentHash();if(B.length>=3&&!B.some(function(W){return isNaN(W)})){var $=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(B[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+B[2],+B[1]],zoom:+B[0],bearing:$,pitch:+(B[4]||0)}),!0}return!1},Ko.prototype._updateHashUnthrottled=function(){var B=n.window.location.href.replace(/(#.+)?$/,this.getHashString());try{n.window.history.replaceState(n.window.history.state,null,B)}catch{}};var sl={linearity:.3,easing:n.bezier(0,0,.3,1)},El=n.extend({deceleration:2500,maxSpeed:1400},sl),nu=n.extend({deceleration:20,maxSpeed:1400},sl),Cl=n.extend({deceleration:1e3,maxSpeed:360},sl),Dl=n.extend({deceleration:1e3,maxSpeed:90},sl),la=function(B){this._map=B,this.clear()};function bs(B,$){(!B.duration||B.duration<$.duration)&&(B.duration=$.duration,B.easing=$.easing)}function _s(B,$,W){var I=W.maxSpeed,G=W.linearity,te=W.deceleration,ie=n.clamp(B*G/($/1e3),-I,I),he=Math.abs(ie)/(te*G);return{easing:W.easing,duration:1e3*he,amount:ie*(he/2)}}la.prototype.clear=function(){this._inertiaBuffer=[]},la.prototype.record=function(B){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:n.browser.now(),settings:B})},la.prototype._drainInertiaBuffer=function(){for(var B=this._inertiaBuffer,$=n.browser.now();B.length>0&&$-B[0].time>160;)B.shift()},la.prototype._onMoveEnd=function(B){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var $={zoom:0,bearing:0,pitch:0,pan:new n.Point(0,0),pinchAround:void 0,around:void 0},W=0,I=this._inertiaBuffer;W<I.length;W+=1){var G=I[W].settings;$.zoom+=G.zoomDelta||0,$.bearing+=G.bearingDelta||0,$.pitch+=G.pitchDelta||0,G.panDelta&&$.pan._add(G.panDelta),G.around&&($.around=G.around),G.pinchAround&&($.pinchAround=G.pinchAround)}var te=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,ie={};if($.pan.mag()){var he=_s($.pan.mag(),te,n.extend({},El,B||{}));ie.offset=$.pan.mult(he.amount/$.pan.mag()),ie.center=this._map.transform.center,bs(ie,he)}if($.zoom){var Te=_s($.zoom,te,nu);ie.zoom=this._map.transform.zoom+Te.amount,bs(ie,Te)}if($.bearing){var Le=_s($.bearing,te,Cl);ie.bearing=this._map.transform.bearing+n.clamp(Le.amount,-179,179),bs(ie,Le)}if($.pitch){var Fe=_s($.pitch,te,Dl);ie.pitch=this._map.transform.pitch+Fe.amount,bs(ie,Fe)}if(ie.zoom||ie.bearing){var qe=$.pinchAround===void 0?$.around:$.pinchAround;ie.around=qe?this._map.unproject(qe):this._map.getCenter()}return this.clear(),n.extend(ie,{noMoveStart:!0})}};var Eo=function(B){function $(I,G,te,ie){ie===void 0&&(ie={});var he=x.mousePos(G.getCanvasContainer(),te),Te=G.unproject(he);B.call(this,I,n.extend({point:he,lngLat:Te,originalEvent:te},ie)),this._defaultPrevented=!1,this.target=G}B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$;var W={defaultPrevented:{configurable:!0}};return $.prototype.preventDefault=function(){this._defaultPrevented=!0},W.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties($.prototype,W),$}(n.Event),Il=function(B){function $(I,G,te){var ie=I==="touchend"?te.changedTouches:te.touches,he=x.touchPos(G.getCanvasContainer(),ie),Te=he.map(function(qe){return G.unproject(qe)}),Le=he.reduce(function(qe,We,nt,ft){return qe.add(We.div(ft.length))},new n.Point(0,0)),Fe=G.unproject(Le);B.call(this,I,{points:he,point:Le,lngLats:Te,lngLat:Fe,originalEvent:te}),this._defaultPrevented=!1}B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$;var W={defaultPrevented:{configurable:!0}};return $.prototype.preventDefault=function(){this._defaultPrevented=!0},W.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties($.prototype,W),$}(n.Event),ua=function(B){function $(I,G,te){B.call(this,I,{originalEvent:te}),this._defaultPrevented=!1}B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$;var W={defaultPrevented:{configurable:!0}};return $.prototype.preventDefault=function(){this._defaultPrevented=!0},W.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties($.prototype,W),$}(n.Event),uo=function(B,$){this._map=B,this._clickTolerance=$.clickTolerance};uo.prototype.reset=function(){delete this._mousedownPos},uo.prototype.wheel=function(B){return this._firePreventable(new ua(B.type,this._map,B))},uo.prototype.mousedown=function(B,$){return this._mousedownPos=$,this._firePreventable(new Eo(B.type,this._map,B))},uo.prototype.mouseup=function(B){this._map.fire(new Eo(B.type,this._map,B))},uo.prototype.click=function(B,$){this._mousedownPos&&this._mousedownPos.dist($)>=this._clickTolerance||this._map.fire(new Eo(B.type,this._map,B))},uo.prototype.dblclick=function(B){return this._firePreventable(new Eo(B.type,this._map,B))},uo.prototype.mouseover=function(B){this._map.fire(new Eo(B.type,this._map,B))},uo.prototype.mouseout=function(B){this._map.fire(new Eo(B.type,this._map,B))},uo.prototype.touchstart=function(B){return this._firePreventable(new Il(B.type,this._map,B))},uo.prototype.touchmove=function(B){this._map.fire(new Il(B.type,this._map,B))},uo.prototype.touchend=function(B){this._map.fire(new Il(B.type,this._map,B))},uo.prototype.touchcancel=function(B){this._map.fire(new Il(B.type,this._map,B))},uo.prototype._firePreventable=function(B){if(this._map.fire(B),B.defaultPrevented)return{}},uo.prototype.isEnabled=function(){return!0},uo.prototype.isActive=function(){return!1},uo.prototype.enable=function(){},uo.prototype.disable=function(){};var go=function(B){this._map=B};go.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},go.prototype.mousemove=function(B){this._map.fire(new Eo(B.type,this._map,B))},go.prototype.mousedown=function(){this._delayContextMenu=!0},go.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Eo("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},go.prototype.contextmenu=function(B){this._delayContextMenu?this._contextMenuEvent=B:this._map.fire(new Eo(B.type,this._map,B)),this._map.listens("contextmenu")&&B.preventDefault()},go.prototype.isEnabled=function(){return!0},go.prototype.isActive=function(){return!1},go.prototype.enable=function(){},go.prototype.disable=function(){};var _i=function(B,$){this._map=B,this._el=B.getCanvasContainer(),this._container=B.getContainer(),this._clickTolerance=$.clickTolerance||1};function mo(B,$){for(var W={},I=0;I<B.length;I++)W[B[I].identifier]=$[I];return W}_i.prototype.isEnabled=function(){return!!this._enabled},_i.prototype.isActive=function(){return!!this._active},_i.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},_i.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},_i.prototype.mousedown=function(B,$){this.isEnabled()&&B.shiftKey&&B.button===0&&(x.disableDrag(),this._startPos=this._lastPos=$,this._active=!0)},_i.prototype.mousemoveWindow=function(B,$){if(this._active){var W=$;if(!(this._lastPos.equals(W)||!this._box&&W.dist(this._startPos)<this._clickTolerance)){var I=this._startPos;this._lastPos=W,this._box||(this._box=x.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",B));var G=Math.min(I.x,W.x),te=Math.max(I.x,W.x),ie=Math.min(I.y,W.y),he=Math.max(I.y,W.y);x.setTransform(this._box,"translate("+G+"px,"+ie+"px)"),this._box.style.width=te-G+"px",this._box.style.height=he-ie+"px"}}},_i.prototype.mouseupWindow=function(B,$){var W=this;if(this._active&&B.button===0){var I=this._startPos,G=$;if(this.reset(),x.suppressClick(),I.x!==G.x||I.y!==G.y)return this._map.fire(new n.Event("boxzoomend",{originalEvent:B})),{cameraAnimation:function(te){return te.fitScreenCoordinates(I,G,W._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",B)}},_i.prototype.keydown=function(B){this._active&&B.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",B))},_i.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(x.remove(this._box),this._box=null),x.enableDrag(),delete this._startPos,delete this._lastPos},_i.prototype._fireEvent=function(B,$){return this._map.fire(new n.Event(B,{originalEvent:$}))};var Va=function(B){this.reset(),this.numTouches=B.numTouches};Va.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Va.prototype.touchstart=function(B,$,W){(this.centroid||W.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=B.timeStamp),W.length===this.numTouches&&(this.centroid=function(I){for(var G=new n.Point(0,0),te=0,ie=I;te<ie.length;te+=1){var he=ie[te];G._add(he)}return G.div(I.length)}($),this.touches=mo(W,$)))},Va.prototype.touchmove=function(B,$,W){if(!this.aborted&&this.centroid){var I=mo(W,$);for(var G in this.touches){var te=this.touches[G],ie=I[G];(!ie||ie.dist(te)>30)&&(this.aborted=!0)}}},Va.prototype.touchend=function(B,$,W){if((!this.centroid||B.timeStamp-this.startTime>500)&&(this.aborted=!0),W.length===0){var I=!this.aborted&&this.centroid;if(this.reset(),I)return I}};var Vs=function(B){this.singleTap=new Va(B),this.numTaps=B.numTaps,this.reset()};Vs.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Vs.prototype.touchstart=function(B,$,W){this.singleTap.touchstart(B,$,W)},Vs.prototype.touchmove=function(B,$,W){this.singleTap.touchmove(B,$,W)},Vs.prototype.touchend=function(B,$,W){var I=this.singleTap.touchend(B,$,W);if(I){var G=B.timeStamp-this.lastTime<500,te=!this.lastTap||this.lastTap.dist(I)<30;if(G&&te||this.reset(),this.count++,this.lastTime=B.timeStamp,this.lastTap=I,this.count===this.numTaps)return this.reset(),I}};var Ma=function(){this._zoomIn=new Vs({numTouches:1,numTaps:2}),this._zoomOut=new Vs({numTouches:2,numTaps:1}),this.reset()};Ma.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Ma.prototype.touchstart=function(B,$,W){this._zoomIn.touchstart(B,$,W),this._zoomOut.touchstart(B,$,W)},Ma.prototype.touchmove=function(B,$,W){this._zoomIn.touchmove(B,$,W),this._zoomOut.touchmove(B,$,W)},Ma.prototype.touchend=function(B,$,W){var I=this,G=this._zoomIn.touchend(B,$,W),te=this._zoomOut.touchend(B,$,W);return G?(this._active=!0,B.preventDefault(),setTimeout(function(){return I.reset()},0),{cameraAnimation:function(ie){return ie.easeTo({duration:300,zoom:ie.getZoom()+1,around:ie.unproject(G)},{originalEvent:B})}}):te?(this._active=!0,B.preventDefault(),setTimeout(function(){return I.reset()},0),{cameraAnimation:function(ie){return ie.easeTo({duration:300,zoom:ie.getZoom()-1,around:ie.unproject(te)},{originalEvent:B})}}):void 0},Ma.prototype.touchcancel=function(){this.reset()},Ma.prototype.enable=function(){this._enabled=!0},Ma.prototype.disable=function(){this._enabled=!1,this.reset()},Ma.prototype.isEnabled=function(){return this._enabled},Ma.prototype.isActive=function(){return this._active};var ws={};ws[0]=1,ws[2]=2;var Po=function(B){this.reset(),this._clickTolerance=B.clickTolerance||1};Po.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Po.prototype._correctButton=function(B,$){return!1},Po.prototype._move=function(B,$){return{}},Po.prototype.mousedown=function(B,$){if(!this._lastPoint){var W=x.mouseButton(B);this._correctButton(B,W)&&(this._lastPoint=$,this._eventButton=W)}},Po.prototype.mousemoveWindow=function(B,$){var W=this._lastPoint;if(W){if(B.preventDefault(),function(I,G){var te=ws[G];return I.buttons===void 0||(I.buttons&te)!==te}(B,this._eventButton))this.reset();else if(this._moved||!($.dist(W)<this._clickTolerance))return this._moved=!0,this._lastPoint=$,this._move(W,$)}},Po.prototype.mouseupWindow=function(B){this._lastPoint&&x.mouseButton(B)===this._eventButton&&(this._moved&&x.suppressClick(),this.reset())},Po.prototype.enable=function(){this._enabled=!0},Po.prototype.disable=function(){this._enabled=!1,this.reset()},Po.prototype.isEnabled=function(){return this._enabled},Po.prototype.isActive=function(){return this._active};var Us=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.mousedown=function(W,I){B.prototype.mousedown.call(this,W,I),this._lastPoint&&(this._active=!0)},$.prototype._correctButton=function(W,I){return I===0&&!W.ctrlKey},$.prototype._move=function(W,I){return{around:I,panDelta:I.sub(W)}},$}(Po),ts=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype._correctButton=function(W,I){return I===0&&W.ctrlKey||I===2},$.prototype._move=function(W,I){var G=.8*(I.x-W.x);if(G)return this._active=!0,{bearingDelta:G}},$.prototype.contextmenu=function(W){W.preventDefault()},$}(Po),ca=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype._correctButton=function(W,I){return I===0&&W.ctrlKey||I===2},$.prototype._move=function(W,I){var G=-.5*(I.y-W.y);if(G)return this._active=!0,{pitchDelta:G}},$.prototype.contextmenu=function(W){W.preventDefault()},$}(Po),fa=function(B){this._minTouches=1,this._clickTolerance=B.clickTolerance||1,this.reset()};fa.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new n.Point(0,0)},fa.prototype.touchstart=function(B,$,W){return this._calculateTransform(B,$,W)},fa.prototype.touchmove=function(B,$,W){if(this._active&&!(W.length<this._minTouches))return B.preventDefault(),this._calculateTransform(B,$,W)},fa.prototype.touchend=function(B,$,W){this._calculateTransform(B,$,W),this._active&&W.length<this._minTouches&&this.reset()},fa.prototype.touchcancel=function(){this.reset()},fa.prototype._calculateTransform=function(B,$,W){W.length>0&&(this._active=!0);var I=mo(W,$),G=new n.Point(0,0),te=new n.Point(0,0),ie=0;for(var he in I){var Te=I[he],Le=this._touches[he];Le&&(G._add(Te),te._add(Te.sub(Le)),ie++,I[he]=Te)}if(this._touches=I,!(ie<this._minTouches)&&te.mag()){var Fe=te.div(ie);if(this._sum._add(Fe),!(this._sum.mag()<this._clickTolerance))return{around:G.div(ie),panDelta:Fe}}},fa.prototype.enable=function(){this._enabled=!0},fa.prototype.disable=function(){this._enabled=!1,this.reset()},fa.prototype.isEnabled=function(){return this._enabled},fa.prototype.isActive=function(){return this._active};var Mi=function(){this.reset()};function Aa(B,$,W){for(var I=0;I<B.length;I++)if(B[I].identifier===W)return $[I]}Mi.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Mi.prototype._start=function(B){},Mi.prototype._move=function(B,$,W){return{}},Mi.prototype.touchstart=function(B,$,W){this._firstTwoTouches||W.length<2||(this._firstTwoTouches=[W[0].identifier,W[1].identifier],this._start([$[0],$[1]]))},Mi.prototype.touchmove=function(B,$,W){if(this._firstTwoTouches){B.preventDefault();var I=this._firstTwoTouches,G=I[0],te=I[1],ie=Aa(W,$,G),he=Aa(W,$,te);if(ie&&he){var Te=this._aroundCenter?null:ie.add(he).div(2);return this._move([ie,he],Te,B)}}},Mi.prototype.touchend=function(B,$,W){if(this._firstTwoTouches){var I=this._firstTwoTouches,G=I[0],te=I[1],ie=Aa(W,$,G),he=Aa(W,$,te);ie&&he||(this._active&&x.suppressClick(),this.reset())}},Mi.prototype.touchcancel=function(){this.reset()},Mi.prototype.enable=function(B){this._enabled=!0,this._aroundCenter=!!B&&B.around==="center"},Mi.prototype.disable=function(){this._enabled=!1,this.reset()},Mi.prototype.isEnabled=function(){return this._enabled},Mi.prototype.isActive=function(){return this._active};function Mr(B,$){return Math.log(B/$)/Math.LN2}var Ll=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.reset=function(){B.prototype.reset.call(this),delete this._distance,delete this._startDistance},$.prototype._start=function(W){this._startDistance=this._distance=W[0].dist(W[1])},$.prototype._move=function(W,I){var G=this._distance;if(this._distance=W[0].dist(W[1]),this._active||!(Math.abs(Mr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Mr(this._distance,G),pinchAround:I}},$}(Mi);function Tu(B,$){return 180*B.angleWith($)/Math.PI}var Ts=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.reset=function(){B.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},$.prototype._start=function(W){this._startVector=this._vector=W[0].sub(W[1]),this._minDiameter=W[0].dist(W[1])},$.prototype._move=function(W,I){var G=this._vector;if(this._vector=W[0].sub(W[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Tu(this._vector,G),pinchAround:I}},$.prototype._isBelowThreshold=function(W){this._minDiameter=Math.min(this._minDiameter,W.mag());var I=25/(Math.PI*this._minDiameter)*360,G=Tu(W,this._startVector);return Math.abs(G)<I},$}(Mi);function Ms(B){return Math.abs(B.y)>Math.abs(B.x)}var Hs=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.reset=function(){B.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},$.prototype._start=function(W){this._lastPoints=W,Ms(W[0].sub(W[1]))&&(this._valid=!1)},$.prototype._move=function(W,I,G){var te=W[0].sub(this._lastPoints[0]),ie=W[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(te,ie,G.timeStamp),this._valid)return this._lastPoints=W,this._active=!0,{pitchDelta:(te.y+ie.y)/2*-.5}},$.prototype.gestureBeginsVertically=function(W,I,G){if(this._valid!==void 0)return this._valid;var te=W.mag()>=2,ie=I.mag()>=2;if(te||ie){if(!te||!ie)return this._firstMove===void 0&&(this._firstMove=G),G-this._firstMove<100&&void 0;var he=W.y>0==I.y>0;return Ms(W)&&Ms(I)&&he}},$}(Mi),ll={panStep:100,bearingStep:15,pitchStep:10},yr=function(){var B=ll;this._panStep=B.panStep,this._bearingStep=B.bearingStep,this._pitchStep=B.pitchStep,this._rotationDisabled=!1};function Ol(B){return B*(2-B)}yr.prototype.reset=function(){this._active=!1},yr.prototype.keydown=function(B){var $=this;if(!(B.altKey||B.ctrlKey||B.metaKey)){var W=0,I=0,G=0,te=0,ie=0;switch(B.keyCode){case 61:case 107:case 171:case 187:W=1;break;case 189:case 109:case 173:W=-1;break;case 37:B.shiftKey?I=-1:(B.preventDefault(),te=-1);break;case 39:B.shiftKey?I=1:(B.preventDefault(),te=1);break;case 38:B.shiftKey?G=1:(B.preventDefault(),ie=-1);break;case 40:B.shiftKey?G=-1:(B.preventDefault(),ie=1);break;default:return}return this._rotationDisabled&&(I=0,G=0),{cameraAnimation:function(he){var Te=he.getZoom();he.easeTo({duration:300,easeId:"keyboardHandler",easing:Ol,zoom:W?Math.round(Te)+W*(B.shiftKey?2:1):Te,bearing:he.getBearing()+I*$._bearingStep,pitch:he.getPitch()+G*$._pitchStep,offset:[-te*$._panStep,-ie*$._panStep],center:he.getCenter()},{originalEvent:B})}}}},yr.prototype.enable=function(){this._enabled=!0},yr.prototype.disable=function(){this._enabled=!1,this.reset()},yr.prototype.isEnabled=function(){return this._enabled},yr.prototype.isActive=function(){return this._active},yr.prototype.disableRotation=function(){this._rotationDisabled=!0},yr.prototype.enableRotation=function(){this._rotationDisabled=!1};var ns=4.000244140625,co=function(B,$){this._map=B,this._el=B.getCanvasContainer(),this._handler=$,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,n.bindAll(["_onTimeout"],this)};co.prototype.setZoomRate=function(B){this._defaultZoomRate=B},co.prototype.setWheelZoomRate=function(B){this._wheelZoomRate=B},co.prototype.isEnabled=function(){return!!this._enabled},co.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},co.prototype.isZooming=function(){return!!this._zooming},co.prototype.enable=function(B){this.isEnabled()||(this._enabled=!0,this._aroundCenter=B&&B.around==="center")},co.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},co.prototype.wheel=function(B){if(this.isEnabled()){var $=B.deltaMode===n.window.WheelEvent.DOM_DELTA_LINE?40*B.deltaY:B.deltaY,W=n.browser.now(),I=W-(this._lastWheelEventTime||0);this._lastWheelEventTime=W,$!==0&&$%ns==0?this._type="wheel":$!==0&&Math.abs($)<4?this._type="trackpad":I>400?(this._type=null,this._lastValue=$,this._timeout=setTimeout(this._onTimeout,40,B)):this._type||(this._type=Math.abs(I*$)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,$+=this._lastValue)),B.shiftKey&&$&&($/=4),this._type&&(this._lastWheelEvent=B,this._delta-=$,this._active||this._start(B)),B.preventDefault()}},co.prototype._onTimeout=function(B){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(B)},co.prototype._start=function(B){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var $=x.mousePos(this._el,B);this._around=n.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject($)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},co.prototype.renderFrame=function(){var B=this;if(this._frameId&&(this._frameId=null,this.isActive())){var $=this._map.transform;if(this._delta!==0){var W=this._type==="wheel"&&Math.abs(this._delta)>ns?this._wheelZoomRate:this._defaultZoomRate,I=2/(1+Math.exp(-Math.abs(this._delta*W)));this._delta<0&&I!==0&&(I=1/I);var G=typeof this._targetZoom=="number"?$.zoomScale(this._targetZoom):$.scale;this._targetZoom=Math.min($.maxZoom,Math.max($.minZoom,$.scaleZoom(G*I))),this._type==="wheel"&&(this._startZoom=$.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var te,ie=typeof this._targetZoom=="number"?this._targetZoom:$.zoom,he=this._startZoom,Te=this._easing,Le=!1;if(this._type==="wheel"&&he&&Te){var Fe=Math.min((n.browser.now()-this._lastWheelEventTime)/200,1),qe=Te(Fe);te=n.number(he,ie,qe),Fe<1?this._frameId||(this._frameId=!0):Le=!0}else te=ie,Le=!0;return this._active=!0,Le&&(this._active=!1,this._finishTimeout=setTimeout(function(){B._zooming=!1,B._handler._triggerRenderFrame(),delete B._targetZoom,delete B._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Le,zoomDelta:te-$.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},co.prototype._smoothOutEasing=function(B){var $=n.ease;if(this._prevEase){var W=this._prevEase,I=(n.browser.now()-W.start)/W.duration,G=W.easing(I+.01)-W.easing(I),te=.27/Math.sqrt(G*G+1e-4)*.01,ie=Math.sqrt(.0729-te*te);$=n.bezier(te,ie,.25,1)}return this._prevEase={start:n.browser.now(),duration:B,easing:$},$},co.prototype.reset=function(){this._active=!1};var As=function(B,$){this._clickZoom=B,this._tapZoom=$};As.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},As.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},As.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},As.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var ka=function(){this.reset()};ka.prototype.reset=function(){this._active=!1},ka.prototype.dblclick=function(B,$){return B.preventDefault(),{cameraAnimation:function(W){W.easeTo({duration:300,zoom:W.getZoom()+(B.shiftKey?-1:1),around:W.unproject($)},{originalEvent:B})}}},ka.prototype.enable=function(){this._enabled=!0},ka.prototype.disable=function(){this._enabled=!1,this.reset()},ka.prototype.isEnabled=function(){return this._enabled},ka.prototype.isActive=function(){return this._active};var ha=function(){this._tap=new Vs({numTouches:1,numTaps:1}),this.reset()};ha.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},ha.prototype.touchstart=function(B,$,W){this._swipePoint||(this._tapTime&&B.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?W.length>0&&(this._swipePoint=$[0],this._swipeTouch=W[0].identifier):this._tap.touchstart(B,$,W))},ha.prototype.touchmove=function(B,$,W){if(this._tapTime){if(this._swipePoint){if(W[0].identifier!==this._swipeTouch)return;var I=$[0],G=I.y-this._swipePoint.y;return this._swipePoint=I,B.preventDefault(),this._active=!0,{zoomDelta:G/128}}}else this._tap.touchmove(B,$,W)},ha.prototype.touchend=function(B,$,W){this._tapTime?this._swipePoint&&W.length===0&&this.reset():this._tap.touchend(B,$,W)&&(this._tapTime=B.timeStamp)},ha.prototype.touchcancel=function(){this.reset()},ha.prototype.enable=function(){this._enabled=!0},ha.prototype.disable=function(){this._enabled=!1,this.reset()},ha.prototype.isEnabled=function(){return this._enabled},ha.prototype.isActive=function(){return this._active};var Co=function(B,$,W){this._el=B,this._mousePan=$,this._touchPan=W};Co.prototype.enable=function(B){this._inertiaOptions=B||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Co.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Co.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Co.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Ua=function(B,$,W){this._pitchWithRotate=B.pitchWithRotate,this._mouseRotate=$,this._mousePitch=W};Ua.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Ua.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Ua.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Ua.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var da=function(B,$,W,I){this._el=B,this._touchZoom=$,this._touchRotate=W,this._tapDragZoom=I,this._rotationDisabled=!1,this._enabled=!0};da.prototype.enable=function(B){this._touchZoom.enable(B),this._rotationDisabled||this._touchRotate.enable(B),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},da.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},da.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},da.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},da.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},da.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var rs=function(B){return B.zoom||B.drag||B.pitch||B.rotate},Pl=function(B){function $(){B.apply(this,arguments)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$}(n.Event);function ks(B){return B.panDelta&&B.panDelta.mag()||B.zoomDelta||B.bearingDelta||B.pitchDelta}var Qr=function(B,$){this._map=B,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new la(B),this._bearingSnap=$.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers($),n.bindAll(["handleEvent","handleWindowEvent"],this);var W=this._el;this._listeners=[[W,"touchstart",{passive:!0}],[W,"touchmove",{passive:!1}],[W,"touchend",void 0],[W,"touchcancel",void 0],[W,"mousedown",void 0],[W,"mousemove",void 0],[W,"mouseup",void 0],[n.window.document,"mousemove",{capture:!0}],[n.window.document,"mouseup",void 0],[W,"mouseover",void 0],[W,"mouseout",void 0],[W,"dblclick",void 0],[W,"click",void 0],[W,"keydown",{capture:!1}],[W,"keyup",void 0],[W,"wheel",{passive:!1}],[W,"contextmenu",void 0],[n.window,"blur",void 0]];for(var I=0,G=this._listeners;I<G.length;I+=1){var te=G[I],ie=te[0],he=te[1],Te=te[2];x.addEventListener(ie,he,ie===n.window.document?this.handleWindowEvent:this.handleEvent,Te)}};Qr.prototype.destroy=function(){for(var B=0,$=this._listeners;B<$.length;B+=1){var W=$[B],I=W[0],G=W[1],te=W[2];x.removeEventListener(I,G,I===n.window.document?this.handleWindowEvent:this.handleEvent,te)}},Qr.prototype._addDefaultHandlers=function(B){var $=this._map,W=$.getCanvasContainer();this._add("mapEvent",new uo($,B));var I=$.boxZoom=new _i($,B);this._add("boxZoom",I);var G=new Ma,te=new ka;$.doubleClickZoom=new As(te,G),this._add("tapZoom",G),this._add("clickZoom",te);var ie=new ha;this._add("tapDragZoom",ie);var he=$.touchPitch=new Hs;this._add("touchPitch",he);var Te=new ts(B),Le=new ca(B);$.dragRotate=new Ua(B,Te,Le),this._add("mouseRotate",Te,["mousePitch"]),this._add("mousePitch",Le,["mouseRotate"]);var Fe=new Us(B),qe=new fa(B);$.dragPan=new Co(W,Fe,qe),this._add("mousePan",Fe),this._add("touchPan",qe,["touchZoom","touchRotate"]);var We=new Ts,nt=new Ll;$.touchZoomRotate=new da(W,nt,We,ie),this._add("touchRotate",We,["touchPan","touchZoom"]),this._add("touchZoom",nt,["touchPan","touchRotate"]);var ft=$.scrollZoom=new co($,this);this._add("scrollZoom",ft,["mousePan"]);var pt=$.keyboard=new yr;this._add("keyboard",pt),this._add("blockableMapEvent",new go($));for(var wt=0,Ct=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];wt<Ct.length;wt+=1){var At=Ct[wt];B.interactive&&B[At]&&$[At].enable(B[At])}},Qr.prototype._add=function(B,$,W){this._handlers.push({handlerName:B,handler:$,allowed:W}),this._handlersById[B]=$},Qr.prototype.stop=function(B){if(!this._updatingCamera){for(var $=0,W=this._handlers;$<W.length;$+=1)W[$].handler.reset();this._inertia.clear(),this._fireEvents({},{},B),this._changes=[]}},Qr.prototype.isActive=function(){for(var B=0,$=this._handlers;B<$.length;B+=1)if($[B].handler.isActive())return!0;return!1},Qr.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Qr.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Qr.prototype.isMoving=function(){return!!rs(this._eventsInProgress)||this.isZooming()},Qr.prototype._blockedByActive=function(B,$,W){for(var I in B)if(I!==W&&(!$||$.indexOf(I)<0))return!0;return!1},Qr.prototype.handleWindowEvent=function(B){this.handleEvent(B,B.type+"Window")},Qr.prototype._getMapTouches=function(B){for(var $=[],W=0,I=B;W<I.length;W+=1){var G=I[W],te=G.target;this._el.contains(te)&&$.push(G)}return $},Qr.prototype.handleEvent=function(B,$){if(B.type!=="blur"){this._updatingCamera=!0;for(var W=B.type==="renderFrame"?void 0:B,I={needsRenderFrame:!1},G={},te={},ie=B.touches?this._getMapTouches(B.touches):void 0,he=ie?x.touchPos(this._el,ie):x.mousePos(this._el,B),Te=0,Le=this._handlers;Te<Le.length;Te+=1){var Fe=Le[Te],qe=Fe.handlerName,We=Fe.handler,nt=Fe.allowed;if(We.isEnabled()){var ft=void 0;this._blockedByActive(te,nt,qe)?We.reset():We[$||B.type]&&(ft=We[$||B.type](B,he,ie),this.mergeHandlerResult(I,G,ft,qe,W),ft&&ft.needsRenderFrame&&this._triggerRenderFrame()),(ft||We.isActive())&&(te[qe]=We)}}var pt={};for(var wt in this._previousActiveHandlers)te[wt]||(pt[wt]=W);this._previousActiveHandlers=te,(Object.keys(pt).length||ks(I))&&(this._changes.push([I,G,pt]),this._triggerRenderFrame()),(Object.keys(te).length||ks(I))&&this._map._stop(!0),this._updatingCamera=!1;var Ct=I.cameraAnimation;Ct&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ct(this._map))}else this.stop(!0)},Qr.prototype.mergeHandlerResult=function(B,$,W,I,G){if(W){n.extend(B,W);var te={handlerName:I,originalEvent:W.originalEvent||G};W.zoomDelta!==void 0&&($.zoom=te),W.panDelta!==void 0&&($.drag=te),W.pitchDelta!==void 0&&($.pitch=te),W.bearingDelta!==void 0&&($.rotate=te)}},Qr.prototype._applyChanges=function(){for(var B={},$={},W={},I=0,G=this._changes;I<G.length;I+=1){var te=G[I],ie=te[0],he=te[1],Te=te[2];ie.panDelta&&(B.panDelta=(B.panDelta||new n.Point(0,0))._add(ie.panDelta)),ie.zoomDelta&&(B.zoomDelta=(B.zoomDelta||0)+ie.zoomDelta),ie.bearingDelta&&(B.bearingDelta=(B.bearingDelta||0)+ie.bearingDelta),ie.pitchDelta&&(B.pitchDelta=(B.pitchDelta||0)+ie.pitchDelta),ie.around!==void 0&&(B.around=ie.around),ie.pinchAround!==void 0&&(B.pinchAround=ie.pinchAround),ie.noInertia&&(B.noInertia=ie.noInertia),n.extend($,he),n.extend(W,Te)}this._updateMapTransform(B,$,W),this._changes=[]},Qr.prototype._updateMapTransform=function(B,$,W){var I=this._map,G=I.transform;if(!ks(B))return this._fireEvents($,W,!0);var te=B.panDelta,ie=B.zoomDelta,he=B.bearingDelta,Te=B.pitchDelta,Le=B.around,Fe=B.pinchAround;Fe!==void 0&&(Le=Fe),I._stop(!0),Le=Le||I.transform.centerPoint;var qe=G.pointLocation(te?Le.sub(te):Le);he&&(G.bearing+=he),Te&&(G.pitch+=Te),ie&&(G.zoom+=ie),G.setLocationAtPoint(qe,Le),this._map._update(),B.noInertia||this._inertia.record(B),this._fireEvents($,W,!0)},Qr.prototype._fireEvents=function(B,$,W){var I=this,G=rs(this._eventsInProgress),te=rs(B),ie={};for(var he in B){var Te=B[he].originalEvent;this._eventsInProgress[he]||(ie[he+"start"]=Te),this._eventsInProgress[he]=B[he]}for(var Le in!G&&te&&this._fireEvent("movestart",te.originalEvent),ie)this._fireEvent(Le,ie[Le]);for(var Fe in te&&this._fireEvent("move",te.originalEvent),B){var qe=B[Fe].originalEvent;this._fireEvent(Fe,qe)}var We,nt={};for(var ft in this._eventsInProgress){var pt=this._eventsInProgress[ft],wt=pt.handlerName,Ct=pt.originalEvent;this._handlersById[wt].isActive()||(delete this._eventsInProgress[ft],We=$[wt]||Ct,nt[ft+"end"]=We)}for(var At in nt)this._fireEvent(At,nt[At]);var zt=rs(this._eventsInProgress);if(W&&(G||te)&&!zt){this._updatingCamera=!0;var It=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Xt=function(Gt){return Gt!==0&&-I._bearingSnap<Gt&&Gt<I._bearingSnap};It?(Xt(It.bearing||this._map.getBearing())&&(It.bearing=0),this._map.easeTo(It,{originalEvent:We})):(this._map.fire(new n.Event("moveend",{originalEvent:We})),Xt(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},Qr.prototype._fireEvent=function(B,$){this._map.fire(new n.Event(B,$?{originalEvent:$}:{}))},Qr.prototype._requestFrame=function(){var B=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function($){delete B._frameId,B.handleEvent(new Pl("renderFrame",{timeStamp:$})),B._applyChanges()})},Qr.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var vo=function(B){function $(W,I){B.call(this),this._moving=!1,this._zooming=!1,this.transform=W,this._bearingSnap=I.bearingSnap,n.bindAll(["_renderFrameCallback"],this)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.getCenter=function(){return new n.LngLat(this.transform.center.lng,this.transform.center.lat)},$.prototype.setCenter=function(W,I){return this.jumpTo({center:W},I)},$.prototype.panBy=function(W,I,G){return W=n.Point.convert(W).mult(-1),this.panTo(this.transform.center,n.extend({offset:W},I),G)},$.prototype.panTo=function(W,I,G){return this.easeTo(n.extend({center:W},I),G)},$.prototype.getZoom=function(){return this.transform.zoom},$.prototype.setZoom=function(W,I){return this.jumpTo({zoom:W},I),this},$.prototype.zoomTo=function(W,I,G){return this.easeTo(n.extend({zoom:W},I),G)},$.prototype.zoomIn=function(W,I){return this.zoomTo(this.getZoom()+1,W,I),this},$.prototype.zoomOut=function(W,I){return this.zoomTo(this.getZoom()-1,W,I),this},$.prototype.getBearing=function(){return this.transform.bearing},$.prototype.setBearing=function(W,I){return this.jumpTo({bearing:W},I),this},$.prototype.getPadding=function(){return this.transform.padding},$.prototype.setPadding=function(W,I){return this.jumpTo({padding:W},I),this},$.prototype.rotateTo=function(W,I,G){return this.easeTo(n.extend({bearing:W},I),G)},$.prototype.resetNorth=function(W,I){return this.rotateTo(0,n.extend({duration:1e3},W),I),this},$.prototype.resetNorthPitch=function(W,I){return this.easeTo(n.extend({bearing:0,pitch:0,duration:1e3},W),I),this},$.prototype.snapToNorth=function(W,I){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(W,I):this},$.prototype.getPitch=function(){return this.transform.pitch},$.prototype.setPitch=function(W,I){return this.jumpTo({pitch:W},I),this},$.prototype.cameraForBounds=function(W,I){W=n.LngLatBounds.convert(W);var G=I&&I.bearing||0;return this._cameraForBoxAndBearing(W.getNorthWest(),W.getSouthEast(),G,I)},$.prototype._cameraForBoxAndBearing=function(W,I,G,te){var ie={top:0,bottom:0,right:0,left:0};if(typeof(te=n.extend({padding:ie,offset:[0,0],maxZoom:this.transform.maxZoom},te)).padding=="number"){var he=te.padding;te.padding={top:he,bottom:he,right:he,left:he}}te.padding=n.extend(ie,te.padding);var Te=this.transform,Le=Te.padding,Fe=Te.project(n.LngLat.convert(W)),qe=Te.project(n.LngLat.convert(I)),We=Fe.rotate(-G*Math.PI/180),nt=qe.rotate(-G*Math.PI/180),ft=new n.Point(Math.max(We.x,nt.x),Math.max(We.y,nt.y)),pt=new n.Point(Math.min(We.x,nt.x),Math.min(We.y,nt.y)),wt=ft.sub(pt),Ct=(Te.width-(Le.left+Le.right+te.padding.left+te.padding.right))/wt.x,At=(Te.height-(Le.top+Le.bottom+te.padding.top+te.padding.bottom))/wt.y;if(!(At<0||Ct<0)){var zt=Math.min(Te.scaleZoom(Te.scale*Math.min(Ct,At)),te.maxZoom),It=typeof te.offset.x=="number"?new n.Point(te.offset.x,te.offset.y):n.Point.convert(te.offset),Xt=(te.padding.left-te.padding.right)/2,Gt=(te.padding.top-te.padding.bottom)/2,Vt=new n.Point(Xt,Gt).rotate(G*Math.PI/180),pn=It.add(Vt).mult(Te.scale/Te.zoomScale(zt));return{center:Te.unproject(Fe.add(qe).div(2).sub(pn)),zoom:zt,bearing:G}}n.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},$.prototype.fitBounds=function(W,I,G){return this._fitInternal(this.cameraForBounds(W,I),I,G)},$.prototype.fitScreenCoordinates=function(W,I,G,te,ie){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(n.Point.convert(W)),this.transform.pointLocation(n.Point.convert(I)),G,te),te,ie)},$.prototype._fitInternal=function(W,I,G){return W?(delete(I=n.extend(W,I)).padding,I.linear?this.easeTo(I,G):this.flyTo(I,G)):this},$.prototype.jumpTo=function(W,I){this.stop();var G=this.transform,te=!1,ie=!1,he=!1;return"zoom"in W&&G.zoom!==+W.zoom&&(te=!0,G.zoom=+W.zoom),W.center!==void 0&&(G.center=n.LngLat.convert(W.center)),"bearing"in W&&G.bearing!==+W.bearing&&(ie=!0,G.bearing=+W.bearing),"pitch"in W&&G.pitch!==+W.pitch&&(he=!0,G.pitch=+W.pitch),W.padding==null||G.isPaddingEqual(W.padding)||(G.padding=W.padding),this.fire(new n.Event("movestart",I)).fire(new n.Event("move",I)),te&&this.fire(new n.Event("zoomstart",I)).fire(new n.Event("zoom",I)).fire(new n.Event("zoomend",I)),ie&&this.fire(new n.Event("rotatestart",I)).fire(new n.Event("rotate",I)).fire(new n.Event("rotateend",I)),he&&this.fire(new n.Event("pitchstart",I)).fire(new n.Event("pitch",I)).fire(new n.Event("pitchend",I)),this.fire(new n.Event("moveend",I))},$.prototype.easeTo=function(W,I){var G=this;this._stop(!1,W.easeId),((W=n.extend({offset:[0,0],duration:500,easing:n.ease},W)).animate===!1||!W.essential&&n.browser.prefersReducedMotion)&&(W.duration=0);var te=this.transform,ie=this.getZoom(),he=this.getBearing(),Te=this.getPitch(),Le=this.getPadding(),Fe="zoom"in W?+W.zoom:ie,qe="bearing"in W?this._normalizeBearing(W.bearing,he):he,We="pitch"in W?+W.pitch:Te,nt="padding"in W?W.padding:te.padding,ft=n.Point.convert(W.offset),pt=te.centerPoint.add(ft),wt=te.pointLocation(pt),Ct=n.LngLat.convert(W.center||wt);this._normalizeCenter(Ct);var At,zt,It=te.project(wt),Xt=te.project(Ct).sub(It),Gt=te.zoomScale(Fe-ie);W.around&&(At=n.LngLat.convert(W.around),zt=te.locationPoint(At));var Vt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Fe!==ie,this._rotating=this._rotating||he!==qe,this._pitching=this._pitching||We!==Te,this._padding=!te.isPaddingEqual(nt),this._easeId=W.easeId,this._prepareEase(I,W.noMoveStart,Vt),this._ease(function(pn){if(G._zooming&&(te.zoom=n.number(ie,Fe,pn)),G._rotating&&(te.bearing=n.number(he,qe,pn)),G._pitching&&(te.pitch=n.number(Te,We,pn)),G._padding&&(te.interpolatePadding(Le,nt,pn),pt=te.centerPoint.add(ft)),At)te.setLocationAtPoint(At,zt);else{var vn=te.zoomScale(te.zoom-ie),Sn=Fe>ie?Math.min(2,Gt):Math.max(.5,Gt),In=Math.pow(Sn,1-pn),Vn=te.unproject(It.add(Xt.mult(pn*In)).mult(vn));te.setLocationAtPoint(te.renderWorldCopies?Vn.wrap():Vn,pt)}G._fireMoveEvents(I)},function(pn){G._afterEase(I,pn)},W),this},$.prototype._prepareEase=function(W,I,G){G===void 0&&(G={}),this._moving=!0,I||G.moving||this.fire(new n.Event("movestart",W)),this._zooming&&!G.zooming&&this.fire(new n.Event("zoomstart",W)),this._rotating&&!G.rotating&&this.fire(new n.Event("rotatestart",W)),this._pitching&&!G.pitching&&this.fire(new n.Event("pitchstart",W))},$.prototype._fireMoveEvents=function(W){this.fire(new n.Event("move",W)),this._zooming&&this.fire(new n.Event("zoom",W)),this._rotating&&this.fire(new n.Event("rotate",W)),this._pitching&&this.fire(new n.Event("pitch",W))},$.prototype._afterEase=function(W,I){if(!this._easeId||!I||this._easeId!==I){delete this._easeId;var G=this._zooming,te=this._rotating,ie=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,G&&this.fire(new n.Event("zoomend",W)),te&&this.fire(new n.Event("rotateend",W)),ie&&this.fire(new n.Event("pitchend",W)),this.fire(new n.Event("moveend",W))}},$.prototype.flyTo=function(W,I){var G=this;if(!W.essential&&n.browser.prefersReducedMotion){var te=n.pick(W,["center","zoom","bearing","pitch","around"]);return this.jumpTo(te,I)}this.stop(),W=n.extend({offset:[0,0],speed:1.2,curve:1.42,easing:n.ease},W);var ie=this.transform,he=this.getZoom(),Te=this.getBearing(),Le=this.getPitch(),Fe=this.getPadding(),qe="zoom"in W?n.clamp(+W.zoom,ie.minZoom,ie.maxZoom):he,We="bearing"in W?this._normalizeBearing(W.bearing,Te):Te,nt="pitch"in W?+W.pitch:Le,ft="padding"in W?W.padding:ie.padding,pt=ie.zoomScale(qe-he),wt=n.Point.convert(W.offset),Ct=ie.centerPoint.add(wt),At=ie.pointLocation(Ct),zt=n.LngLat.convert(W.center||At);this._normalizeCenter(zt);var It=ie.project(At),Xt=ie.project(zt).sub(It),Gt=W.curve,Vt=Math.max(ie.width,ie.height),pn=Vt/pt,vn=Xt.mag();if("minZoom"in W){var Sn=n.clamp(Math.min(W.minZoom,he,qe),ie.minZoom,ie.maxZoom),In=Vt/ie.zoomScale(Sn-he);Gt=Math.sqrt(In/vn*2)}var Vn=Gt*Gt;function nr(fr){var Ar=(pn*pn-Vt*Vt+(fr?-1:1)*Vn*Vn*vn*vn)/(2*(fr?pn:Vt)*Vn*vn);return Math.log(Math.sqrt(Ar*Ar+1)-Ar)}function cr(fr){return(Math.exp(fr)-Math.exp(-fr))/2}function Gn(fr){return(Math.exp(fr)+Math.exp(-fr))/2}var lr=nr(0),xr=function(fr){return Gn(lr)/Gn(lr+Gt*fr)},Er=function(fr){return Vt*((Gn(lr)*(cr(Ar=lr+Gt*fr)/Gn(Ar))-cr(lr))/Vn)/vn;var Ar},er=(nr(1)-lr)/Gt;if(Math.abs(vn)<1e-6||!isFinite(er)){if(Math.abs(Vt-pn)<1e-6)return this.easeTo(W,I);var sr=pn<Vt?-1:1;er=Math.abs(Math.log(pn/Vt))/Gt,Er=function(){return 0},xr=function(fr){return Math.exp(sr*Gt*fr)}}if("duration"in W)W.duration=+W.duration;else{var wr="screenSpeed"in W?+W.screenSpeed/Gt:+W.speed;W.duration=1e3*er/wr}return W.maxDuration&&W.duration>W.maxDuration&&(W.duration=0),this._zooming=!0,this._rotating=Te!==We,this._pitching=nt!==Le,this._padding=!ie.isPaddingEqual(ft),this._prepareEase(I,!1),this._ease(function(fr){var Ar=fr*er,Ir=1/xr(Ar);ie.zoom=fr===1?qe:he+ie.scaleZoom(Ir),G._rotating&&(ie.bearing=n.number(Te,We,fr)),G._pitching&&(ie.pitch=n.number(Le,nt,fr)),G._padding&&(ie.interpolatePadding(Fe,ft,fr),Ct=ie.centerPoint.add(wt));var Vr=fr===1?zt:ie.unproject(It.add(Xt.mult(Er(Ar))).mult(Ir));ie.setLocationAtPoint(ie.renderWorldCopies?Vr.wrap():Vr,Ct),G._fireMoveEvents(I)},function(){return G._afterEase(I)},W),this},$.prototype.isEasing=function(){return!!this._easeFrameId},$.prototype.stop=function(){return this._stop()},$.prototype._stop=function(W,I){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var G=this._onEaseEnd;delete this._onEaseEnd,G.call(this,I)}if(!W){var te=this.handlers;te&&te.stop(!1)}return this},$.prototype._ease=function(W,I,G){G.animate===!1||G.duration===0?(W(1),I()):(this._easeStart=n.browser.now(),this._easeOptions=G,this._onEaseFrame=W,this._onEaseEnd=I,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},$.prototype._renderFrameCallback=function(){var W=Math.min((n.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(W)),W<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},$.prototype._normalizeBearing=function(W,I){W=n.wrap(W,-180,180);var G=Math.abs(W-I);return Math.abs(W-360-I)<G&&(W-=360),Math.abs(W+360-I)<G&&(W+=360),W},$.prototype._normalizeCenter=function(W){var I=this.transform;if(I.renderWorldCopies&&!I.lngRange){var G=W.lng-I.center.lng;W.lng+=G>180?-360:G<-180?360:0}},$}(n.Evented),Ro=function(B){B===void 0&&(B={}),this.options=B,n.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Ro.prototype.getDefaultPosition=function(){return"bottom-right"},Ro.prototype.onAdd=function(B){var $=this.options&&this.options.compact;return this._map=B,this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=x.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=x.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),$&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),$===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Ro.prototype.onRemove=function(){x.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Ro.prototype._setElementTitle=function(B,$){var W=this._map._getUIString("AttributionControl."+$);B.title=W,B.setAttribute("aria-label",W)},Ro.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Ro.prototype._updateEditLink=function(){var B=this._editLink;B||(B=this._editLink=this._container.querySelector(".mapbox-improve-map"));var $=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||n.config.ACCESS_TOKEN}];if(B){var W=$.reduce(function(I,G,te){return G.value&&(I+=G.key+"="+G.value+(te<$.length-1?"&":"")),I},"?");B.href=n.config.FEEDBACK_URL+"/"+W+(this._map._hash?this._map._hash.getHashString(!0):""),B.rel="noopener nofollow",this._setElementTitle(B,"MapFeedback")}},Ro.prototype._updateData=function(B){!B||B.sourceDataType!=="metadata"&&B.sourceDataType!=="visibility"&&B.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},Ro.prototype._updateAttributions=function(){if(this._map.style){var B=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?B=B.concat(this.options.customAttribution.map(function(he){return typeof he!="string"?"":he})):typeof this.options.customAttribution=="string"&&B.push(this.options.customAttribution)),this._map.style.stylesheet){var $=this._map.style.stylesheet;this.styleOwner=$.owner,this.styleId=$.id}var W=this._map.style.sourceCaches;for(var I in W){var G=W[I];if(G.used){var te=G.getSource();te.attribution&&B.indexOf(te.attribution)<0&&B.push(te.attribution)}}B.sort(function(he,Te){return he.length-Te.length});var ie=(B=B.filter(function(he,Te){for(var Le=Te+1;Le<B.length;Le++)if(B[Le].indexOf(he)>=0)return!1;return!0})).join(" | ");ie!==this._attribHTML&&(this._attribHTML=ie,B.length?(this._innerContainer.innerHTML=ie,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Ro.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var Ha=function(){n.bindAll(["_updateLogo"],this),n.bindAll(["_updateCompact"],this)};Ha.prototype.onAdd=function(B){this._map=B,this._container=x.create("div","mapboxgl-ctrl");var $=x.create("a","mapboxgl-ctrl-logo");return $.target="_blank",$.rel="noopener nofollow",$.href="https://www.mapbox.com/",$.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),$.setAttribute("rel","noopener nofollow"),this._container.appendChild($),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Ha.prototype.onRemove=function(){x.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Ha.prototype.getDefaultPosition=function(){return"bottom-left"},Ha.prototype._updateLogo=function(B){B&&B.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},Ha.prototype._logoRequired=function(){if(this._map.style){var B=this._map.style.sourceCaches;for(var $ in B)if(B[$].getSource().mapbox_logo)return!0;return!1}},Ha.prototype._updateCompact=function(){var B=this._container.children;if(B.length){var $=B[0];this._map.getCanvasContainer().offsetWidth<250?$.classList.add("mapboxgl-compact"):$.classList.remove("mapboxgl-compact")}};var Fo=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Fo.prototype.add=function(B){var $=++this._id;return this._queue.push({callback:B,id:$,cancelled:!1}),$},Fo.prototype.remove=function(B){for(var $=this._currentlyRunning,W=0,I=$?this._queue.concat($):this._queue;W<I.length;W+=1){var G=I[W];if(G.id===B)return void(G.cancelled=!0)}},Fo.prototype.run=function(B){B===void 0&&(B=0);var $=this._currentlyRunning=this._queue;this._queue=[];for(var W=0,I=$;W<I.length;W+=1){var G=I[W];if(!G.cancelled&&(G.callback(B),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Fo.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var ul={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},cl=n.window.HTMLImageElement,No=n.window.HTMLElement,Xr=n.window.ImageBitmap,qa=60,qs={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:qa,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Sa=function(B){function $(I){var G=this;if((I=n.extend({},qs,I)).minZoom!=null&&I.maxZoom!=null&&I.minZoom>I.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(I.minPitch!=null&&I.maxPitch!=null&&I.minPitch>I.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(I.minPitch!=null&&I.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(I.maxPitch!=null&&I.maxPitch>qa)throw new Error("maxPitch must be less than or equal to 60");var te=new ni(I.minZoom,I.maxZoom,I.minPitch,I.maxPitch,I.renderWorldCopies);if(B.call(this,te,I),this._interactive=I.interactive,this._maxTileCacheSize=I.maxTileCacheSize,this._failIfMajorPerformanceCaveat=I.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=I.preserveDrawingBuffer,this._antialias=I.antialias,this._trackResize=I.trackResize,this._bearingSnap=I.bearingSnap,this._refreshExpiredTiles=I.refreshExpiredTiles,this._fadeDuration=I.fadeDuration,this._crossSourceCollisions=I.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=I.collectResourceTiming,this._renderTaskQueue=new Fo,this._controls=[],this._mapId=n.uniqueId(),this._locale=n.extend({},ul,I.locale),this._clickTolerance=I.clickTolerance,this._requestManager=new n.RequestManager(I.transformRequest,I.accessToken),typeof I.container=="string"){if(this._container=n.window.document.getElementById(I.container),!this._container)throw new Error("Container '"+I.container+"' not found.")}else{if(!(I.container instanceof No))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=I.container}if(I.maxBounds&&this.setMaxBounds(I.maxBounds),n.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return G._update(!1)}),this.on("moveend",function(){return G._update(!1)}),this.on("zoom",function(){return G._update(!0)}),n.window!==void 0&&(n.window.addEventListener("online",this._onWindowOnline,!1),n.window.addEventListener("resize",this._onWindowResize,!1),n.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Qr(this,I);var ie=typeof I.hash=="string"&&I.hash||void 0;this._hash=I.hash&&new Ko(ie).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:I.center,zoom:I.zoom,bearing:I.bearing,pitch:I.pitch}),I.bounds&&(this.resize(),this.fitBounds(I.bounds,n.extend({},I.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=I.localIdeographFontFamily,I.style&&this.setStyle(I.style,{localIdeographFontFamily:I.localIdeographFontFamily}),I.attributionControl&&this.addControl(new Ro({customAttribution:I.customAttribution})),this.addControl(new Ha,I.logoPosition),this.on("style.load",function(){G.transform.unmodified&&G.jumpTo(G.style.stylesheet)}),this.on("data",function(he){G._update(he.dataType==="style"),G.fire(new n.Event(he.dataType+"data",he))}),this.on("dataloading",function(he){G.fire(new n.Event(he.dataType+"dataloading",he))})}B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$;var W={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return $.prototype._getMapId=function(){return this._mapId},$.prototype.addControl=function(I,G){if(G===void 0&&(G=I.getDefaultPosition?I.getDefaultPosition():"top-right"),!I||!I.onAdd)return this.fire(new n.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var te=I.onAdd(this);this._controls.push(I);var ie=this._controlPositions[G];return G.indexOf("bottom")!==-1?ie.insertBefore(te,ie.firstChild):ie.appendChild(te),this},$.prototype.removeControl=function(I){if(!I||!I.onRemove)return this.fire(new n.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var G=this._controls.indexOf(I);return G>-1&&this._controls.splice(G,1),I.onRemove(this),this},$.prototype.hasControl=function(I){return this._controls.indexOf(I)>-1},$.prototype.resize=function(I){var G=this._containerDimensions(),te=G[0],ie=G[1];this._resizeCanvas(te,ie),this.transform.resize(te,ie),this.painter.resize(te,ie);var he=!this._moving;return he&&(this.stop(),this.fire(new n.Event("movestart",I)).fire(new n.Event("move",I))),this.fire(new n.Event("resize",I)),he&&this.fire(new n.Event("moveend",I)),this},$.prototype.getBounds=function(){return this.transform.getBounds()},$.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},$.prototype.setMaxBounds=function(I){return this.transform.setMaxBounds(n.LngLatBounds.convert(I)),this._update()},$.prototype.setMinZoom=function(I){if((I=I??-2)>=-2&&I<=this.transform.maxZoom)return this.transform.minZoom=I,this._update(),this.getZoom()<I&&this.setZoom(I),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},$.prototype.getMinZoom=function(){return this.transform.minZoom},$.prototype.setMaxZoom=function(I){if((I=I??22)>=this.transform.minZoom)return this.transform.maxZoom=I,this._update(),this.getZoom()>I&&this.setZoom(I),this;throw new Error("maxZoom must be greater than the current minZoom")},$.prototype.getMaxZoom=function(){return this.transform.maxZoom},$.prototype.setMinPitch=function(I){if((I=I??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(I>=0&&I<=this.transform.maxPitch)return this.transform.minPitch=I,this._update(),this.getPitch()<I&&this.setPitch(I),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},$.prototype.getMinPitch=function(){return this.transform.minPitch},$.prototype.setMaxPitch=function(I){if((I=I??qa)>qa)throw new Error("maxPitch must be less than or equal to 60");if(I>=this.transform.minPitch)return this.transform.maxPitch=I,this._update(),this.getPitch()>I&&this.setPitch(I),this;throw new Error("maxPitch must be greater than the current minPitch")},$.prototype.getMaxPitch=function(){return this.transform.maxPitch},$.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},$.prototype.setRenderWorldCopies=function(I){return this.transform.renderWorldCopies=I,this._update()},$.prototype.project=function(I){return this.transform.locationPoint(n.LngLat.convert(I))},$.prototype.unproject=function(I){return this.transform.pointLocation(n.Point.convert(I))},$.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},$.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},$.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},$.prototype._createDelegatedListener=function(I,G,te){var ie,he=this;if(I==="mouseenter"||I==="mouseover"){var Te=!1;return{layer:G,listener:te,delegates:{mousemove:function(Fe){var qe=he.getLayer(G)?he.queryRenderedFeatures(Fe.point,{layers:[G]}):[];qe.length?Te||(Te=!0,te.call(he,new Eo(I,he,Fe.originalEvent,{features:qe}))):Te=!1},mouseout:function(){Te=!1}}}}if(I==="mouseleave"||I==="mouseout"){var Le=!1;return{layer:G,listener:te,delegates:{mousemove:function(Fe){(he.getLayer(G)?he.queryRenderedFeatures(Fe.point,{layers:[G]}):[]).length?Le=!0:Le&&(Le=!1,te.call(he,new Eo(I,he,Fe.originalEvent)))},mouseout:function(Fe){Le&&(Le=!1,te.call(he,new Eo(I,he,Fe.originalEvent)))}}}}return{layer:G,listener:te,delegates:(ie={},ie[I]=function(Fe){var qe=he.getLayer(G)?he.queryRenderedFeatures(Fe.point,{layers:[G]}):[];qe.length&&(Fe.features=qe,te.call(he,Fe),delete Fe.features)},ie)}},$.prototype.on=function(I,G,te){if(te===void 0)return B.prototype.on.call(this,I,G);var ie=this._createDelegatedListener(I,G,te);for(var he in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[I]=this._delegatedListeners[I]||[],this._delegatedListeners[I].push(ie),ie.delegates)this.on(he,ie.delegates[he]);return this},$.prototype.once=function(I,G,te){if(te===void 0)return B.prototype.once.call(this,I,G);var ie=this._createDelegatedListener(I,G,te);for(var he in ie.delegates)this.once(he,ie.delegates[he]);return this},$.prototype.off=function(I,G,te){var ie=this;return te===void 0?B.prototype.off.call(this,I,G):(this._delegatedListeners&&this._delegatedListeners[I]&&function(he){for(var Te=he[I],Le=0;Le<Te.length;Le++){var Fe=Te[Le];if(Fe.layer===G&&Fe.listener===te){for(var qe in Fe.delegates)ie.off(qe,Fe.delegates[qe]);return Te.splice(Le,1),ie}}}(this._delegatedListeners),this)},$.prototype.queryRenderedFeatures=function(I,G){if(!this.style)return[];var te;if(G!==void 0||I===void 0||I instanceof n.Point||Array.isArray(I)||(G=I,I=void 0),G=G||{},(I=I||[[0,0],[this.transform.width,this.transform.height]])instanceof n.Point||typeof I[0]=="number")te=[n.Point.convert(I)];else{var ie=n.Point.convert(I[0]),he=n.Point.convert(I[1]);te=[ie,new n.Point(he.x,ie.y),he,new n.Point(ie.x,he.y),ie]}return this.style.queryRenderedFeatures(te,G,this.transform)},$.prototype.querySourceFeatures=function(I,G){return this.style.querySourceFeatures(I,G)},$.prototype.setStyle=function(I,G){return(G=n.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},G)).diff!==!1&&G.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&I?(this._diffStyle(I,G),this):(this._localIdeographFontFamily=G.localIdeographFontFamily,this._updateStyle(I,G))},$.prototype._getUIString=function(I){var G=this._locale[I];if(G==null)throw new Error("Missing UI string '"+I+"'");return G},$.prototype._updateStyle=function(I,G){return this.style&&(this.style.setEventedParent(null),this.style._remove()),I?(this.style=new tr(this,G||{}),this.style.setEventedParent(this,{style:this.style}),typeof I=="string"?this.style.loadURL(I):this.style.loadJSON(I),this):(delete this.style,this)},$.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new tr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},$.prototype._diffStyle=function(I,G){var te=this;if(typeof I=="string"){var ie=this._requestManager.normalizeStyleURL(I),he=this._requestManager.transformRequest(ie,n.ResourceType.Style);n.getJSON(he,function(Te,Le){Te?te.fire(new n.ErrorEvent(Te)):Le&&te._updateDiff(Le,G)})}else typeof I=="object"&&this._updateDiff(I,G)},$.prototype._updateDiff=function(I,G){try{this.style.setState(I)&&this._update(!0)}catch(te){n.warnOnce("Unable to perform style diff: "+(te.message||te.error||te)+".  Rebuilding the style from scratch."),this._updateStyle(I,G)}},$.prototype.getStyle=function(){if(this.style)return this.style.serialize()},$.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():n.warnOnce("There is no style added to the map.")},$.prototype.addSource=function(I,G){return this._lazyInitEmptyStyle(),this.style.addSource(I,G),this._update(!0)},$.prototype.isSourceLoaded=function(I){var G=this.style&&this.style.sourceCaches[I];if(G!==void 0)return G.loaded();this.fire(new n.ErrorEvent(new Error("There is no source with ID '"+I+"'")))},$.prototype.areTilesLoaded=function(){var I=this.style&&this.style.sourceCaches;for(var G in I){var te=I[G]._tiles;for(var ie in te){var he=te[ie];if(he.state!=="loaded"&&he.state!=="errored")return!1}}return!0},$.prototype.addSourceType=function(I,G,te){return this._lazyInitEmptyStyle(),this.style.addSourceType(I,G,te)},$.prototype.removeSource=function(I){return this.style.removeSource(I),this._update(!0)},$.prototype.getSource=function(I){return this.style.getSource(I)},$.prototype.addImage=function(I,G,te){te===void 0&&(te={});var ie=te.pixelRatio;ie===void 0&&(ie=1);var he=te.sdf;he===void 0&&(he=!1);var Te=te.stretchX,Le=te.stretchY,Fe=te.content;if(this._lazyInitEmptyStyle(),G instanceof cl||Xr&&G instanceof Xr){var qe=n.browser.getImageData(G),We=qe.width,nt=qe.height,ft=qe.data;this.style.addImage(I,{data:new n.RGBAImage({width:We,height:nt},ft),pixelRatio:ie,stretchX:Te,stretchY:Le,content:Fe,sdf:he,version:0})}else{if(G.width===void 0||G.height===void 0)return this.fire(new n.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var pt=G.width,wt=G.height,Ct=G.data,At=G;this.style.addImage(I,{data:new n.RGBAImage({width:pt,height:wt},new Uint8Array(Ct)),pixelRatio:ie,stretchX:Te,stretchY:Le,content:Fe,sdf:he,version:0,userImage:At}),At.onAdd&&At.onAdd(this,I)}},$.prototype.updateImage=function(I,G){var te=this.style.getImage(I);if(!te)return this.fire(new n.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var ie=G instanceof cl||Xr&&G instanceof Xr?n.browser.getImageData(G):G,he=ie.width,Te=ie.height,Le=ie.data;if(he===void 0||Te===void 0)return this.fire(new n.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(he!==te.data.width||Te!==te.data.height)return this.fire(new n.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var Fe=!(G instanceof cl||Xr&&G instanceof Xr);te.data.replace(Le,Fe),this.style.updateImage(I,te)},$.prototype.hasImage=function(I){return I?!!this.style.getImage(I):(this.fire(new n.ErrorEvent(new Error("Missing required image id"))),!1)},$.prototype.removeImage=function(I){this.style.removeImage(I)},$.prototype.loadImage=function(I,G){n.getImage(this._requestManager.transformRequest(I,n.ResourceType.Image),G)},$.prototype.listImages=function(){return this.style.listImages()},$.prototype.addLayer=function(I,G){return this._lazyInitEmptyStyle(),this.style.addLayer(I,G),this._update(!0)},$.prototype.moveLayer=function(I,G){return this.style.moveLayer(I,G),this._update(!0)},$.prototype.removeLayer=function(I){return this.style.removeLayer(I),this._update(!0)},$.prototype.getLayer=function(I){return this.style.getLayer(I)},$.prototype.setLayerZoomRange=function(I,G,te){return this.style.setLayerZoomRange(I,G,te),this._update(!0)},$.prototype.setFilter=function(I,G,te){return te===void 0&&(te={}),this.style.setFilter(I,G,te),this._update(!0)},$.prototype.getFilter=function(I){return this.style.getFilter(I)},$.prototype.setPaintProperty=function(I,G,te,ie){return ie===void 0&&(ie={}),this.style.setPaintProperty(I,G,te,ie),this._update(!0)},$.prototype.getPaintProperty=function(I,G){return this.style.getPaintProperty(I,G)},$.prototype.setLayoutProperty=function(I,G,te,ie){return ie===void 0&&(ie={}),this.style.setLayoutProperty(I,G,te,ie),this._update(!0)},$.prototype.getLayoutProperty=function(I,G){return this.style.getLayoutProperty(I,G)},$.prototype.setLight=function(I,G){return G===void 0&&(G={}),this._lazyInitEmptyStyle(),this.style.setLight(I,G),this._update(!0)},$.prototype.getLight=function(){return this.style.getLight()},$.prototype.setFeatureState=function(I,G){return this.style.setFeatureState(I,G),this._update()},$.prototype.removeFeatureState=function(I,G){return this.style.removeFeatureState(I,G),this._update()},$.prototype.getFeatureState=function(I){return this.style.getFeatureState(I)},$.prototype.getContainer=function(){return this._container},$.prototype.getCanvasContainer=function(){return this._canvasContainer},$.prototype.getCanvas=function(){return this._canvas},$.prototype._containerDimensions=function(){var I=0,G=0;return this._container&&(I=this._container.clientWidth||400,G=this._container.clientHeight||300),[I,G]},$.prototype._detectMissingCSS=function(){n.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&n.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},$.prototype._setupContainer=function(){var I=this._container;I.classList.add("mapboxgl-map"),(this._missingCSSCanary=x.create("div","mapboxgl-canary",I)).style.visibility="hidden",this._detectMissingCSS();var G=this._canvasContainer=x.create("div","mapboxgl-canvas-container",I);this._interactive&&G.classList.add("mapboxgl-interactive"),this._canvas=x.create("canvas","mapboxgl-canvas",G),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var te=this._containerDimensions();this._resizeCanvas(te[0],te[1]);var ie=this._controlContainer=x.create("div","mapboxgl-control-container",I),he=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Te){he[Te]=x.create("div","mapboxgl-ctrl-"+Te,ie)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},$.prototype._resizeCanvas=function(I,G){var te=n.browser.devicePixelRatio||1;this._canvas.width=te*I,this._canvas.height=te*G,this._canvas.style.width=I+"px",this._canvas.style.height=G+"px"},$.prototype._setupPainter=function(){var I=n.extend({},T.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),G=this._canvas.getContext("webgl",I)||this._canvas.getContext("experimental-webgl",I);G?(this.painter=new fi(G,this.transform),n.webpSupported.testSupport(G)):this.fire(new n.ErrorEvent(new Error("Failed to initialize WebGL")))},$.prototype._contextLost=function(I){I.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new n.Event("webglcontextlost",{originalEvent:I}))},$.prototype._contextRestored=function(I){this._setupPainter(),this.resize(),this._update(),this.fire(new n.Event("webglcontextrestored",{originalEvent:I}))},$.prototype._onMapScroll=function(I){if(I.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},$.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},$.prototype._update=function(I){return this.style?(this._styleDirty=this._styleDirty||I,this._sourcesDirty=!0,this.triggerRepaint(),this):this},$.prototype._requestRenderFrame=function(I){return this._update(),this._renderTaskQueue.add(I)},$.prototype._cancelRenderFrame=function(I){this._renderTaskQueue.remove(I)},$.prototype._render=function(I){var G,te=this,ie=0,he=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(G=he.createQueryEXT(),he.beginQueryEXT(he.TIME_ELAPSED_EXT,G),ie=n.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(I),!this._removed){var Te=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Le=this.transform.zoom,Fe=n.browser.now();this.style.zoomHistory.update(Le,Fe);var qe=new n.EvaluationParameters(Le,{now:Fe,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),We=qe.crossFadingFactor();We===1&&We===this._crossFadingFactor||(Te=!0,this._crossFadingFactor=We),this.style.update(qe)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new n.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new n.Event("load"))),this.style&&(this.style.hasTransitions()||Te)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var nt=n.browser.now()-ie;he.endQueryEXT(he.TIME_ELAPSED_EXT,G),setTimeout(function(){var wt=he.getQueryObjectEXT(G,he.QUERY_RESULT_EXT)/1e6;he.deleteQueryEXT(G),te.fire(new n.Event("gpu-timing-frame",{cpuTime:nt,gpuTime:wt}))},50)}if(this.listens("gpu-timing-layer")){var ft=this.painter.collectGpuTimers();setTimeout(function(){var wt=te.painter.queryGpuTimers(ft);te.fire(new n.Event("gpu-timing-layer",{layerTimes:wt}))},50)}var pt=this._sourcesDirty||this._styleDirty||this._placementDirty;return pt||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new n.Event("idle")),!this._loaded||this._fullyLoaded||pt||(this._fullyLoaded=!0),this}},$.prototype.remove=function(){this._hash&&this._hash.remove();for(var I=0,G=this._controls;I<G.length;I+=1)G[I].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),n.window!==void 0&&(n.window.removeEventListener("resize",this._onWindowResize,!1),n.window.removeEventListener("orientationchange",this._onWindowResize,!1),n.window.removeEventListener("online",this._onWindowOnline,!1));var te=this.painter.context.gl.getExtension("WEBGL_lose_context");te&&te.loseContext&&te.loseContext(),fl(this._canvasContainer),fl(this._controlContainer),fl(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new n.Event("remove"))},$.prototype.triggerRepaint=function(){var I=this;this.style&&!this._frame&&(this._frame=n.browser.frame(function(G){I._frame=null,I._render(G)}))},$.prototype._onWindowOnline=function(){this._update()},$.prototype._onWindowResize=function(I){this._trackResize&&this.resize({originalEvent:I})._update()},W.showTileBoundaries.get=function(){return!!this._showTileBoundaries},W.showTileBoundaries.set=function(I){this._showTileBoundaries!==I&&(this._showTileBoundaries=I,this._update())},W.showPadding.get=function(){return!!this._showPadding},W.showPadding.set=function(I){this._showPadding!==I&&(this._showPadding=I,this._update())},W.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},W.showCollisionBoxes.set=function(I){this._showCollisionBoxes!==I&&(this._showCollisionBoxes=I,I?this.style._generateCollisionBoxes():this._update())},W.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},W.showOverdrawInspector.set=function(I){this._showOverdrawInspector!==I&&(this._showOverdrawInspector=I,this._update())},W.repaint.get=function(){return!!this._repaint},W.repaint.set=function(I){this._repaint!==I&&(this._repaint=I,this.triggerRepaint())},W.vertices.get=function(){return!!this._vertices},W.vertices.set=function(I){this._vertices=I,this._update()},$.prototype._setCacheLimits=function(I,G){n.setCacheLimits(I,G)},W.version.get=function(){return n.version},Object.defineProperties($.prototype,W),$}(vo);function fl(B){B.parentNode&&B.parentNode.removeChild(B)}var hl={showCompass:!0,showZoom:!0,visualizePitch:!1},Ea=function(B){var $=this;this.options=n.extend({},hl,B),this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(W){return W.preventDefault()}),this.options.showZoom&&(n.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(W){return $._map.zoomIn({},{originalEvent:W})}),x.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(W){return $._map.zoomOut({},{originalEvent:W})}),x.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(n.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(W){$.options.visualizePitch?$._map.resetNorthPitch({},{originalEvent:W}):$._map.resetNorth({},{originalEvent:W})}),this._compassIcon=x.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Ea.prototype._updateZoomButtons=function(){var B=this._map.getZoom(),$=B===this._map.getMaxZoom(),W=B===this._map.getMinZoom();this._zoomInButton.disabled=$,this._zoomOutButton.disabled=W,this._zoomInButton.setAttribute("aria-disabled",$.toString()),this._zoomOutButton.setAttribute("aria-disabled",W.toString())},Ea.prototype._rotateCompassArrow=function(){var B=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=B},Ea.prototype.onAdd=function(B){return this._map=B,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ai(this._map,this._compass,this.options.visualizePitch)),this._container},Ea.prototype.onRemove=function(){x.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Ea.prototype._createButton=function(B,$){var W=x.create("button",B,this._container);return W.type="button",W.addEventListener("click",$),W},Ea.prototype._setButtonTitle=function(B,$){var W=this._map._getUIString("NavigationControl."+$);B.title=W,B.setAttribute("aria-label",W)};var Ai=function(B,$,W){W===void 0&&(W=!1),this._clickTolerance=10,this.element=$,this.mouseRotate=new ts({clickTolerance:B.dragRotate._mouseRotate._clickTolerance}),this.map=B,W&&(this.mousePitch=new ca({clickTolerance:B.dragRotate._mousePitch._clickTolerance})),n.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),x.addEventListener($,"mousedown",this.mousedown),x.addEventListener($,"touchstart",this.touchstart,{passive:!1}),x.addEventListener($,"touchmove",this.touchmove),x.addEventListener($,"touchend",this.touchend),x.addEventListener($,"touchcancel",this.reset)};function Gs(B,$,W){if(B=new n.LngLat(B.lng,B.lat),$){var I=new n.LngLat(B.lng-360,B.lat),G=new n.LngLat(B.lng+360,B.lat),te=W.locationPoint(B).distSqr($);W.locationPoint(I).distSqr($)<te?B=I:W.locationPoint(G).distSqr($)<te&&(B=G)}for(;Math.abs(B.lng-W.center.lng)>180;){var ie=W.locationPoint(B);if(ie.x>=0&&ie.y>=0&&ie.x<=W.width&&ie.y<=W.height)break;B.lng>W.center.lng?B.lng-=360:B.lng+=360}return B}Ai.prototype.down=function(B,$){this.mouseRotate.mousedown(B,$),this.mousePitch&&this.mousePitch.mousedown(B,$),x.disableDrag()},Ai.prototype.move=function(B,$){var W=this.map,I=this.mouseRotate.mousemoveWindow(B,$);if(I&&I.bearingDelta&&W.setBearing(W.getBearing()+I.bearingDelta),this.mousePitch){var G=this.mousePitch.mousemoveWindow(B,$);G&&G.pitchDelta&&W.setPitch(W.getPitch()+G.pitchDelta)}},Ai.prototype.off=function(){var B=this.element;x.removeEventListener(B,"mousedown",this.mousedown),x.removeEventListener(B,"touchstart",this.touchstart,{passive:!1}),x.removeEventListener(B,"touchmove",this.touchmove),x.removeEventListener(B,"touchend",this.touchend),x.removeEventListener(B,"touchcancel",this.reset),this.offTemp()},Ai.prototype.offTemp=function(){x.enableDrag(),x.removeEventListener(n.window,"mousemove",this.mousemove),x.removeEventListener(n.window,"mouseup",this.mouseup)},Ai.prototype.mousedown=function(B){this.down(n.extend({},B,{ctrlKey:!0,preventDefault:function(){return B.preventDefault()}}),x.mousePos(this.element,B)),x.addEventListener(n.window,"mousemove",this.mousemove),x.addEventListener(n.window,"mouseup",this.mouseup)},Ai.prototype.mousemove=function(B){this.move(B,x.mousePos(this.element,B))},Ai.prototype.mouseup=function(B){this.mouseRotate.mouseupWindow(B),this.mousePitch&&this.mousePitch.mouseupWindow(B),this.offTemp()},Ai.prototype.touchstart=function(B){B.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=x.touchPos(this.element,B.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return B.preventDefault()}},this._startPos))},Ai.prototype.touchmove=function(B){B.targetTouches.length!==1?this.reset():(this._lastPos=x.touchPos(this.element,B.targetTouches)[0],this.move({preventDefault:function(){return B.preventDefault()}},this._lastPos))},Ai.prototype.touchend=function(B){B.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Ai.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Sr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Or(B,$,W){var I=B.classList;for(var G in Sr)I.remove("mapboxgl-"+W+"-anchor-"+G);I.add("mapboxgl-"+W+"-anchor-"+$)}var Jo,Ga=function(B){function $(W,I){if(B.call(this),(W instanceof n.window.HTMLElement||I)&&(W=n.extend({element:W},I)),n.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=W&&W.anchor||"center",this._color=W&&W.color||"#3FB1CE",this._scale=W&&W.scale||1,this._draggable=W&&W.draggable||!1,this._clickTolerance=W&&W.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=W&&W.rotation||0,this._rotationAlignment=W&&W.rotationAlignment||"auto",this._pitchAlignment=W&&W.pitchAlignment&&W.pitchAlignment!=="auto"?W.pitchAlignment:this._rotationAlignment,W&&W.element)this._element=W.element,this._offset=n.Point.convert(W&&W.offset||[0,0]);else{this._defaultMarker=!0,this._element=x.create("div"),this._element.setAttribute("aria-label","Map marker");var G=x.createNS("http://www.w3.org/2000/svg","svg");G.setAttributeNS(null,"display","block"),G.setAttributeNS(null,"height","41px"),G.setAttributeNS(null,"width","27px"),G.setAttributeNS(null,"viewBox","0 0 27 41");var te=x.createNS("http://www.w3.org/2000/svg","g");te.setAttributeNS(null,"stroke","none"),te.setAttributeNS(null,"stroke-width","1"),te.setAttributeNS(null,"fill","none"),te.setAttributeNS(null,"fill-rule","evenodd");var ie=x.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"fill-rule","nonzero");var he=x.createNS("http://www.w3.org/2000/svg","g");he.setAttributeNS(null,"transform","translate(3.0, 29.0)"),he.setAttributeNS(null,"fill","#000000");for(var Te=0,Le=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];Te<Le.length;Te+=1){var Fe=Le[Te],qe=x.createNS("http://www.w3.org/2000/svg","ellipse");qe.setAttributeNS(null,"opacity","0.04"),qe.setAttributeNS(null,"cx","10.5"),qe.setAttributeNS(null,"cy","5.80029008"),qe.setAttributeNS(null,"rx",Fe.rx),qe.setAttributeNS(null,"ry",Fe.ry),he.appendChild(qe)}var We=x.createNS("http://www.w3.org/2000/svg","g");We.setAttributeNS(null,"fill",this._color);var nt=x.createNS("http://www.w3.org/2000/svg","path");nt.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),We.appendChild(nt);var ft=x.createNS("http://www.w3.org/2000/svg","g");ft.setAttributeNS(null,"opacity","0.25"),ft.setAttributeNS(null,"fill","#000000");var pt=x.createNS("http://www.w3.org/2000/svg","path");pt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ft.appendChild(pt);var wt=x.createNS("http://www.w3.org/2000/svg","g");wt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),wt.setAttributeNS(null,"fill","#FFFFFF");var Ct=x.createNS("http://www.w3.org/2000/svg","g");Ct.setAttributeNS(null,"transform","translate(8.0, 8.0)");var At=x.createNS("http://www.w3.org/2000/svg","circle");At.setAttributeNS(null,"fill","#000000"),At.setAttributeNS(null,"opacity","0.25"),At.setAttributeNS(null,"cx","5.5"),At.setAttributeNS(null,"cy","5.5"),At.setAttributeNS(null,"r","5.4999962");var zt=x.createNS("http://www.w3.org/2000/svg","circle");zt.setAttributeNS(null,"fill","#FFFFFF"),zt.setAttributeNS(null,"cx","5.5"),zt.setAttributeNS(null,"cy","5.5"),zt.setAttributeNS(null,"r","5.4999962"),Ct.appendChild(At),Ct.appendChild(zt),ie.appendChild(he),ie.appendChild(We),ie.appendChild(ft),ie.appendChild(wt),ie.appendChild(Ct),G.appendChild(ie),G.setAttributeNS(null,"height",41*this._scale+"px"),G.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(G),this._offset=n.Point.convert(W&&W.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(It){It.preventDefault()}),this._element.addEventListener("mousedown",function(It){It.preventDefault()}),Or(this._element,this._anchor,"marker"),this._popup=null}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.addTo=function(W){return this.remove(),this._map=W,W.getCanvasContainer().appendChild(this._element),W.on("move",this._update),W.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},$.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),x.remove(this._element),this._popup&&this._popup.remove(),this},$.prototype.getLngLat=function(){return this._lngLat},$.prototype.setLngLat=function(W){return this._lngLat=n.LngLat.convert(W),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},$.prototype.getElement=function(){return this._element},$.prototype.setPopup=function(W){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),W){if(!("offset"in W.options)){var I=13.5,G=Math.sqrt(Math.pow(I,2)/2);W.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[G,-1*(24.6+G)],"bottom-right":[-G,-1*(24.6+G)],left:[I,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=W,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},$.prototype._onKeyPress=function(W){var I=W.code,G=W.charCode||W.keyCode;I!=="Space"&&I!=="Enter"&&G!==32&&G!==13||this.togglePopup()},$.prototype._onMapClick=function(W){var I=W.originalEvent.target,G=this._element;this._popup&&(I===G||G.contains(I))&&this.togglePopup()},$.prototype.getPopup=function(){return this._popup},$.prototype.togglePopup=function(){var W=this._popup;return W?(W.isOpen()?W.remove():W.addTo(this._map),this):this},$.prototype._update=function(W){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Gs(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var I="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?I="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(I="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var G="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?G="rotateX(0deg)":this._pitchAlignment==="map"&&(G="rotateX("+this._map.getPitch()+"deg)"),W&&W.type!=="moveend"||(this._pos=this._pos.round()),x.setTransform(this._element,Sr[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+G+" "+I)}},$.prototype.getOffset=function(){return this._offset},$.prototype.setOffset=function(W){return this._offset=n.Point.convert(W),this._update(),this},$.prototype._onMove=function(W){if(!this._isDragging){var I=this._clickTolerance||this._map._clickTolerance;this._isDragging=W.point.dist(this._pointerdownPos)>=I}this._isDragging&&(this._pos=W.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new n.Event("dragstart"))),this.fire(new n.Event("drag")))},$.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new n.Event("dragend")),this._state="inactive"},$.prototype._addDragHandler=function(W){this._element.contains(W.originalEvent.target)&&(W.preventDefault(),this._positionDelta=W.point.sub(this._pos).add(this._offset),this._pointerdownPos=W.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},$.prototype.setDraggable=function(W){return this._draggable=!!W,this._map&&(W?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},$.prototype.isDraggable=function(){return this._draggable},$.prototype.setRotation=function(W){return this._rotation=W||0,this._update(),this},$.prototype.getRotation=function(){return this._rotation},$.prototype.setRotationAlignment=function(W){return this._rotationAlignment=W||"auto",this._update(),this},$.prototype.getRotationAlignment=function(){return this._rotationAlignment},$.prototype.setPitchAlignment=function(W){return this._pitchAlignment=W&&W!=="auto"?W:this._rotationAlignment,this._update(),this},$.prototype.getPitchAlignment=function(){return this._pitchAlignment},$}(n.Evented),is={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Zi=0,Wa=!1,hi=function(B){function $(W){B.call(this),this.options=n.extend({},is,W),n.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.onAdd=function(W){return this._map=W,this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),I=this._setupUI,Jo!==void 0?I(Jo):n.window.navigator.permissions!==void 0?n.window.navigator.permissions.query({name:"geolocation"}).then(function(G){Jo=G.state!=="denied",I(Jo)}):(Jo=!!n.window.navigator.geolocation,I(Jo)),this._container;var I},$.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(n.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),x.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Zi=0,Wa=!1},$.prototype._isOutOfMapMaxBounds=function(W){var I=this._map.getMaxBounds(),G=W.coords;return I&&(G.longitude<I.getWest()||G.longitude>I.getEast()||G.latitude<I.getSouth()||G.latitude>I.getNorth())},$.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},$.prototype._onSuccess=function(W){if(this._map){if(this._isOutOfMapMaxBounds(W))return this._setErrorState(),this.fire(new n.Event("outofmaxbounds",W)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=W,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(W),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(W),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new n.Event("geolocate",W)),this._finish()}},$.prototype._updateCamera=function(W){var I=new n.LngLat(W.coords.longitude,W.coords.latitude),G=W.coords.accuracy,te=this._map.getBearing(),ie=n.extend({bearing:te},this.options.fitBoundsOptions);this._map.fitBounds(I.toBounds(G),ie,{geolocateSource:!0})},$.prototype._updateMarker=function(W){if(W){var I=new n.LngLat(W.coords.longitude,W.coords.latitude);this._accuracyCircleMarker.setLngLat(I).addTo(this._map),this._userLocationDotMarker.setLngLat(I).addTo(this._map),this._accuracy=W.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},$.prototype._updateCircleRadius=function(){var W=this._map._container.clientHeight/2,I=this._map.unproject([0,W]),G=this._map.unproject([1,W]),te=I.distanceTo(G),ie=Math.ceil(2*this._accuracy/te);this._circleElement.style.width=ie+"px",this._circleElement.style.height=ie+"px"},$.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},$.prototype._onError=function(W){if(this._map){if(this.options.trackUserLocation)if(W.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var I=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=I,this._geolocateButton.setAttribute("aria-label",I),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(W.code===3&&Wa)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new n.Event("error",W)),this._finish()}},$.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},$.prototype._setupUI=function(W){var I=this;if(this._container.addEventListener("contextmenu",function(ie){return ie.preventDefault()}),this._geolocateButton=x.create("button","mapboxgl-ctrl-geolocate",this._container),x.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",W===!1){n.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var G=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=G,this._geolocateButton.setAttribute("aria-label",G)}else{var te=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=te,this._geolocateButton.setAttribute("aria-label",te)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=x.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Ga(this._dotElement),this._circleElement=x.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ga({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(ie){var he=ie.originalEvent&&ie.originalEvent.type==="resize";ie.geolocateSource||I._watchState!=="ACTIVE_LOCK"||he||(I._watchState="BACKGROUND",I._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),I._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),I.fire(new n.Event("trackuserlocationend")))})},$.prototype.trigger=function(){if(!this._setup)return n.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new n.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Zi--,Wa=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new n.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new n.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var W;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Zi>1?(W={maximumAge:6e5,timeout:0},Wa=!0):(W=this.options.positionOptions,Wa=!1),this._geolocationWatchID=n.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,W)}}else n.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},$.prototype._clearWatch=function(){n.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},$}(n.Evented),qu={maxWidth:100,unit:"metric"},Qo=function(B){this.options=n.extend({},qu,B),n.bindAll(["_onMove","setUnit"],this)};function mi(B,$,W){var I=W&&W.maxWidth||100,G=B._container.clientHeight/2,te=B.unproject([0,G]),ie=B.unproject([I,G]),he=te.distanceTo(ie);if(W&&W.unit==="imperial"){var Te=3.2808*he;Te>5280?Li($,I,Te/5280,B._getUIString("ScaleControl.Miles")):Li($,I,Te,B._getUIString("ScaleControl.Feet"))}else W&&W.unit==="nautical"?Li($,I,he/1852,B._getUIString("ScaleControl.NauticalMiles")):he>=1e3?Li($,I,he/1e3,B._getUIString("ScaleControl.Kilometers")):Li($,I,he,B._getUIString("ScaleControl.Meters"))}function Li(B,$,W,I){var G,te,ie,he=(G=W,(te=Math.pow(10,(""+Math.floor(G)).length-1))*((ie=G/te)>=10?10:ie>=5?5:ie>=3?3:ie>=2?2:ie>=1?1:function(Le){var Fe=Math.pow(10,Math.ceil(-Math.log(Le)/Math.LN10));return Math.round(Le*Fe)/Fe}(ie))),Te=he/W;B.style.width=$*Te+"px",B.innerHTML=he+"&nbsp;"+I}Qo.prototype.getDefaultPosition=function(){return"bottom-left"},Qo.prototype._onMove=function(){mi(this._map,this._container,this.options)},Qo.prototype.onAdd=function(B){return this._map=B,this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",B.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Qo.prototype.onRemove=function(){x.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Qo.prototype.setUnit=function(B){this.options.unit=B,mi(this._map,this._container,this.options)};var Ho=function(B){this._fullscreen=!1,B&&B.container&&(B.container instanceof n.window.HTMLElement?this._container=B.container:n.warnOnce("Full screen control 'container' must be a DOM element.")),n.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in n.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in n.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in n.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in n.window.document&&(this._fullscreenchange="MSFullscreenChange")};Ho.prototype.onAdd=function(B){return this._map=B,this._container||(this._container=this._map.getContainer()),this._controlContainer=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",n.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Ho.prototype.onRemove=function(){x.remove(this._controlContainer),this._map=null,n.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Ho.prototype._checkFullscreenSupport=function(){return!!(n.window.document.fullscreenEnabled||n.window.document.mozFullScreenEnabled||n.window.document.msFullscreenEnabled||n.window.document.webkitFullscreenEnabled)},Ho.prototype._setupUI=function(){var B=this._fullscreenButton=x.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);x.create("span","mapboxgl-ctrl-icon",B).setAttribute("aria-hidden",!0),B.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),n.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Ho.prototype._updateTitle=function(){var B=this._getTitle();this._fullscreenButton.setAttribute("aria-label",B),this._fullscreenButton.title=B},Ho.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Ho.prototype._isFullscreen=function(){return this._fullscreen},Ho.prototype._changeIcon=function(){(n.window.document.fullscreenElement||n.window.document.mozFullScreenElement||n.window.document.webkitFullscreenElement||n.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Ho.prototype._onClickFullscreen=function(){this._isFullscreen()?n.window.document.exitFullscreen?n.window.document.exitFullscreen():n.window.document.mozCancelFullScreen?n.window.document.mozCancelFullScreen():n.window.document.msExitFullscreen?n.window.document.msExitFullscreen():n.window.document.webkitCancelFullScreen&&n.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Ss={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Mu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Je=function(B){function $(W){B.call(this),this.options=n.extend(Object.create(Ss),W),n.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return B&&($.__proto__=B),$.prototype=Object.create(B&&B.prototype),$.prototype.constructor=$,$.prototype.addTo=function(W){return this._map&&this.remove(),this._map=W,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new n.Event("open")),this},$.prototype.isOpen=function(){return!!this._map},$.prototype.remove=function(){return this._content&&x.remove(this._content),this._container&&(x.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new n.Event("close")),this},$.prototype.getLngLat=function(){return this._lngLat},$.prototype.setLngLat=function(W){return this._lngLat=n.LngLat.convert(W),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},$.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},$.prototype.getElement=function(){return this._container},$.prototype.setText=function(W){return this.setDOMContent(n.window.document.createTextNode(W))},$.prototype.setHTML=function(W){var I,G=n.window.document.createDocumentFragment(),te=n.window.document.createElement("body");for(te.innerHTML=W;I=te.firstChild;)G.appendChild(I);return this.setDOMContent(G)},$.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},$.prototype.setMaxWidth=function(W){return this.options.maxWidth=W,this._update(),this},$.prototype.setDOMContent=function(W){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=x.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(W),this._createCloseButton(),this._update(),this._focusFirstElement(),this},$.prototype.addClassName=function(W){this._container&&this._container.classList.add(W)},$.prototype.removeClassName=function(W){this._container&&this._container.classList.remove(W)},$.prototype.setOffset=function(W){return this.options.offset=W,this._update(),this},$.prototype.toggleClassName=function(W){if(this._container)return this._container.classList.toggle(W)},$.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=x.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},$.prototype._onMouseUp=function(W){this._update(W.point)},$.prototype._onMouseMove=function(W){this._update(W.point)},$.prototype._onDrag=function(W){this._update(W.point)},$.prototype._update=function(W){var I=this,G=this._lngLat||this._trackPointer;if(this._map&&G&&this._content&&(this._container||(this._container=x.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=x.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(We){return I._container.classList.add(We)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Gs(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||W)){var te=this._pos=this._trackPointer&&W?W:this._map.project(this._lngLat),ie=this.options.anchor,he=et(this.options.offset);if(!ie){var Te,Le=this._container.offsetWidth,Fe=this._container.offsetHeight;Te=te.y+he.bottom.y<Fe?["top"]:te.y>this._map.transform.height-Fe?["bottom"]:[],te.x<Le/2?Te.push("left"):te.x>this._map.transform.width-Le/2&&Te.push("right"),ie=Te.length===0?"bottom":Te.join("-")}var qe=te.add(he[ie]).round();x.setTransform(this._container,Sr[ie]+" translate("+qe.x+"px,"+qe.y+"px)"),Or(this._container,ie,"popup")}},$.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var W=this._container.querySelector(Mu);W&&W.focus()}},$.prototype._onClose=function(){this.remove()},$}(n.Evented);function et(B){if(B){if(typeof B=="number"){var $=Math.round(Math.sqrt(.5*Math.pow(B,2)));return{center:new n.Point(0,0),top:new n.Point(0,B),"top-left":new n.Point($,$),"top-right":new n.Point(-$,$),bottom:new n.Point(0,-B),"bottom-left":new n.Point($,-$),"bottom-right":new n.Point(-$,-$),left:new n.Point(B,0),right:new n.Point(-B,0)}}if(B instanceof n.Point||Array.isArray(B)){var W=n.Point.convert(B);return{center:W,top:W,"top-left":W,"top-right":W,bottom:W,"bottom-left":W,"bottom-right":W,left:W,right:W}}return{center:n.Point.convert(B.center||[0,0]),top:n.Point.convert(B.top||[0,0]),"top-left":n.Point.convert(B["top-left"]||[0,0]),"top-right":n.Point.convert(B["top-right"]||[0,0]),bottom:n.Point.convert(B.bottom||[0,0]),"bottom-left":n.Point.convert(B["bottom-left"]||[0,0]),"bottom-right":n.Point.convert(B["bottom-right"]||[0,0]),left:n.Point.convert(B.left||[0,0]),right:n.Point.convert(B.right||[0,0])}}return et(new n.Point(0,0))}var ut={version:n.version,supported:T,setRTLTextPlugin:n.setRTLTextPlugin,getRTLTextPluginStatus:n.getRTLTextPluginStatus,Map:Sa,NavigationControl:Ea,GeolocateControl:hi,AttributionControl:Ro,ScaleControl:Qo,FullscreenControl:Ho,Popup:Je,Marker:Ga,Style:tr,LngLat:n.LngLat,LngLatBounds:n.LngLatBounds,Point:n.Point,MercatorCoordinate:n.MercatorCoordinate,Evented:n.Evented,config:n.config,prewarm:function(){yt().acquire(ot)},clearPrewarmedResources:function(){var B=dt;B&&(B.isPreloaded()&&B.numActive()===1?(B.release(ot),dt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return n.config.ACCESS_TOKEN},set accessToken(B){n.config.ACCESS_TOKEN=B},get baseApiUrl(){return n.config.API_URL},set baseApiUrl(B){n.config.API_URL=B},get workerCount(){return Ze.workerCount},set workerCount(B){Ze.workerCount=B},get maxParallelImageRequests(){return n.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(B){n.config.MAX_PARALLEL_IMAGE_REQUESTS=B},clearStorage:function(B){n.clearTileCache(B)},workerUrl:""};return ut}),v}()},3108:function(C,A,e){"use strict";C.exports=e(26099)},26099:function(C,A,e){"use strict";var v=e(64928),w=e(32420),n=e(51160),T=e(76752),x=e(55616),f=e(31264),s=e(47520),t=e(18400),o=e(72512),r=e(76244);function i(a,u){for(var l=u[0],d=u[1],c=1/(u[2]-l),_=1/(u[3]-d),p=new Array(a.length),g=0,m=a.length/2;g<m;g++)p[2*g]=w((a[2*g]-l)*c,0,1),p[2*g+1]=w((a[2*g+1]-d)*_,0,1);return p}C.exports=function(a,u){u||(u={}),a=s(a,"float64"),u=x(u,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var l=f(u.maxDepth,255),d=f(u.bounds,T(a,2));d[0]===d[2]&&d[2]++,d[1]===d[3]&&d[3]++;var c,_=i(a,d),p=a.length>>>1;u.dtype||(u.dtype="array"),typeof u.dtype=="string"?c=new(o(u.dtype))(p):u.dtype&&(c=u.dtype,Array.isArray(c)&&(c.length=p));for(var g=0;g<p;++g)c[g]=g;var m=[],b=[],y=[],M=[];(function N(V,F,j,Z,z,H){if(!Z.length)return null;var U=m[z]||(m[z]=[]),re=y[z]||(y[z]=[]),ee=b[z]||(b[z]=[]),J=U.length;if(++z>l||H>1073741824){for(var Q=0;Q<Z.length;Q++)U.push(Z[Q]),re.push(H),ee.push(null,null,null,null);return J}if(U.push(Z[0]),re.push(H),Z.length<=1)return ee.push(null,null,null,null),J;for(var ne=.5*j,K=V+ne,oe=F+ne,le=[],se=[],de=[],be=[],_e=1,xe=Z.length;_e<xe;_e++){var ve=Z[_e],ye=_[2*ve],me=_[2*ve+1];ye<K?me<oe?le.push(ve):se.push(ve):me<oe?de.push(ve):be.push(ve)}return H<<=2,ee.push(N(V,F,ne,le,z,H),N(V,oe,ne,se,z,H+1),N(K,F,ne,de,z,H+2),N(K,oe,ne,be,z,H+3)),J})(0,0,1,c,0,1);for(var h=0,E=0;E<m.length;E++){var k=m[E];if(c.set)c.set(k,h);else for(var D=0,P=k.length;D<P;D++)c[D+h]=k[D];var L=h+m[E].length;M[E]=[h,L],h=L}return c.range=function(){for(var N,V=[],F=arguments.length;F--;)V[F]=arguments[F];if(t(V[V.length-1])){var j=V.pop();V.length||j.x==null&&j.l==null&&j.left==null||(V=[j],N={}),N=x(j,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else N={};V.length||(V=d);var Z,z=n.apply(void 0,V),H=[Math.min(z.x,z.x+z.width),Math.min(z.y,z.y+z.height),Math.max(z.x,z.x+z.width),Math.max(z.y,z.y+z.height)],U=H[0],re=H[1],ee=H[2],J=H[3],Q=i([U,re,ee,J],d),ne=Q[0],K=Q[1],oe=Q[2],le=Q[3],se=f(N.level,m.length);if(N.d!=null&&(typeof N.d=="number"?Z=[N.d,N.d]:N.d.length&&(Z=N.d),se=Math.min(Math.max(Math.ceil(-r(Math.abs(Z[0])/(d[2]-d[0]))),Math.ceil(-r(Math.abs(Z[1])/(d[3]-d[1])))),se)),se=Math.min(se,m.length),N.lod)return function(be,_e,xe,ve,ye){for(var me=[],Me=0;Me<ye;Me++){var Ae=y[Me],ce=M[Me][0],ae=O(be,_e,Me),pe=O(xe,ve,Me),De=v.ge(Ae,ae),ke=v.gt(Ae,pe,De,Ae.length-1);me[Me]=[De+ce,ke+ce]}return me}(ne,K,oe,le,se);var de=[];return function be(_e,xe,ve,ye,me,Me){if(me!==null&&Me!==null&&!(ne>_e+ve||K>xe+ve||oe<_e||le<xe||ye>=se||me===Me)){var Ae=m[ye];Me===void 0&&(Me=Ae.length);for(var ce=me;ce<Me;ce++){var ae=Ae[ce],pe=a[2*ae],De=a[2*ae+1];pe>=U&&pe<=ee&&De>=re&&De<=J&&de.push(ae)}var ke=b[ye],Ee=ke[4*me+0],Ie=ke[4*me+1],Re=ke[4*me+2],Ne=ke[4*me+3],ge=function(ze,Pe){for(var Ue=null,Ge=0;Ue===null;)if(Ue=ze[4*Pe+Ge],++Ge>ze.length)return null;return Ue}(ke,me+1),we=.5*ve,Ce=ye+1;be(_e,xe,we,Ce,Ee,Ie||Re||Ne||ge),be(_e,xe+we,we,Ce,Ie,Re||Ne||ge),be(_e+we,xe,we,Ce,Re,Ne||ge),be(_e+we,xe+we,we,Ce,Ne,ge)}}(0,0,1,0,0,1),de},c;function O(N,V,F){for(var j=1,Z=.5,z=.5,H=.5,U=0;U<F;U++)j<<=2,j+=N<Z?V<z?0:1:V<z?2:3,H*=.5,Z+=N<Z?-H:H,z+=V<z?-H:H;return j}}},40440:function(C,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var v=e(3256),w=6378137;function n(f){var s=0;if(f&&f.length>0){s+=Math.abs(T(f[0]));for(var t=1;t<f.length;t++)s-=Math.abs(T(f[t]))}return s}function T(f){var s,t,o,r,i,a,u=0,l=f.length;if(l>2){for(a=0;a<l;a++)a===l-2?(o=l-2,r=l-1,i=0):a===l-1?(o=l-1,r=0,i=1):(o=a,r=a+1,i=a+2),s=f[o],t=f[r],u+=(x(f[i][0])-x(s[0]))*Math.sin(x(t[1]));u=u*w*w/2}return u}function x(f){return f*Math.PI/180}A.default=function(f){return v.geomReduce(f,function(s,t){return s+function(o){var r,i=0;switch(o.type){case"Polygon":return n(o.coordinates);case"MultiPolygon":for(r=0;r<o.coordinates.length;r++)i+=n(o.coordinates[r]);return i;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(t)},0)}},46284:function(C,A){"use strict";function e(a,u,l){l===void 0&&(l={});var d={type:"Feature"};return(l.id===0||l.id)&&(d.id=l.id),l.bbox&&(d.bbox=l.bbox),d.properties=u||{},d.geometry=a,d}function v(a,u,l){if(l===void 0&&(l={}),!a)throw new Error("coordinates is required");if(!Array.isArray(a))throw new Error("coordinates must be an Array");if(a.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!i(a[0])||!i(a[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:a},u,l)}function w(a,u,l){l===void 0&&(l={});for(var d=0,c=a;d<c.length;d++){var _=c[d];if(_.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var p=0;p<_[_.length-1].length;p++)if(_[_.length-1][p]!==_[0][p])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:a},u,l)}function n(a,u,l){if(l===void 0&&(l={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:a},u,l)}function T(a,u){u===void 0&&(u={});var l={type:"FeatureCollection"};return u.id&&(l.id=u.id),u.bbox&&(l.bbox=u.bbox),l.features=a,l}function x(a,u,l){return l===void 0&&(l={}),e({type:"MultiLineString",coordinates:a},u,l)}function f(a,u,l){return l===void 0&&(l={}),e({type:"MultiPoint",coordinates:a},u,l)}function s(a,u,l){return l===void 0&&(l={}),e({type:"MultiPolygon",coordinates:a},u,l)}function t(a,u){u===void 0&&(u="kilometers");var l=A.factors[u];if(!l)throw new Error(u+" units is invalid");return a*l}function o(a,u){u===void 0&&(u="kilometers");var l=A.factors[u];if(!l)throw new Error(u+" units is invalid");return a/l}function r(a){return a%(2*Math.PI)*180/Math.PI}function i(a){return!isNaN(a)&&a!==null&&!Array.isArray(a)}Object.defineProperty(A,"__esModule",{value:!0}),A.earthRadius=63710088e-1,A.factors={centimeters:100*A.earthRadius,centimetres:100*A.earthRadius,degrees:A.earthRadius/111325,feet:3.28084*A.earthRadius,inches:39.37*A.earthRadius,kilometers:A.earthRadius/1e3,kilometres:A.earthRadius/1e3,meters:A.earthRadius,metres:A.earthRadius,miles:A.earthRadius/1609.344,millimeters:1e3*A.earthRadius,millimetres:1e3*A.earthRadius,nauticalmiles:A.earthRadius/1852,radians:1,yards:1.0936*A.earthRadius},A.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/A.earthRadius,yards:1.0936133},A.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},A.feature=e,A.geometry=function(a,u,l){switch(l===void 0&&(l={}),a){case"Point":return v(u).geometry;case"LineString":return n(u).geometry;case"Polygon":return w(u).geometry;case"MultiPoint":return f(u).geometry;case"MultiLineString":return x(u).geometry;case"MultiPolygon":return s(u).geometry;default:throw new Error(a+" is invalid")}},A.point=v,A.points=function(a,u,l){return l===void 0&&(l={}),T(a.map(function(d){return v(d,u)}),l)},A.polygon=w,A.polygons=function(a,u,l){return l===void 0&&(l={}),T(a.map(function(d){return w(d,u)}),l)},A.lineString=n,A.lineStrings=function(a,u,l){return l===void 0&&(l={}),T(a.map(function(d){return n(d,u)}),l)},A.featureCollection=T,A.multiLineString=x,A.multiPoint=f,A.multiPolygon=s,A.geometryCollection=function(a,u,l){return l===void 0&&(l={}),e({type:"GeometryCollection",geometries:a},u,l)},A.round=function(a,u){if(u===void 0&&(u=0),u&&!(u>=0))throw new Error("precision must be a positive number");var l=Math.pow(10,u||0);return Math.round(a*l)/l},A.radiansToLength=t,A.lengthToRadians=o,A.lengthToDegrees=function(a,u){return r(o(a,u))},A.bearingToAzimuth=function(a){var u=a%360;return u<0&&(u+=360),u},A.radiansToDegrees=r,A.degreesToRadians=function(a){return a%360*Math.PI/180},A.convertLength=function(a,u,l){if(u===void 0&&(u="kilometers"),l===void 0&&(l="kilometers"),!(a>=0))throw new Error("length must be a positive number");return t(o(a,u),l)},A.convertArea=function(a,u,l){if(u===void 0&&(u="meters"),l===void 0&&(l="kilometers"),!(a>=0))throw new Error("area must be a positive number");var d=A.areaFactors[u];if(!d)throw new Error("invalid original units");var c=A.areaFactors[l];if(!c)throw new Error("invalid final units");return a/d*c},A.isNumber=i,A.isObject=function(a){return!!a&&a.constructor===Object},A.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(a.length!==4&&a.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(u){if(!i(u))throw new Error("bbox must only contain numbers")})},A.validateId=function(a){if(!a)throw new Error("id is required");if(["string","number"].indexOf(typeof a)===-1)throw new Error("id must be a number or a string")}},3256:function(C,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var v=e(46284);function w(o,r,i){if(o!==null)for(var a,u,l,d,c,_,p,g,m=0,b=0,y=o.type,M=y==="FeatureCollection",h=y==="Feature",E=M?o.features.length:1,k=0;k<E;k++){c=(g=!!(p=M?o.features[k].geometry:h?o.geometry:o)&&p.type==="GeometryCollection")?p.geometries.length:1;for(var D=0;D<c;D++){var P=0,L=0;if((d=g?p.geometries[D]:p)!==null){_=d.coordinates;var O=d.type;switch(m=!i||O!=="Polygon"&&O!=="MultiPolygon"?0:1,O){case null:break;case"Point":if(r(_,b,k,P,L)===!1)return!1;b++,P++;break;case"LineString":case"MultiPoint":for(a=0;a<_.length;a++){if(r(_[a],b,k,P,L)===!1)return!1;b++,O==="MultiPoint"&&P++}O==="LineString"&&P++;break;case"Polygon":case"MultiLineString":for(a=0;a<_.length;a++){for(u=0;u<_[a].length-m;u++){if(r(_[a][u],b,k,P,L)===!1)return!1;b++}O==="MultiLineString"&&P++,O==="Polygon"&&L++}O==="Polygon"&&P++;break;case"MultiPolygon":for(a=0;a<_.length;a++){for(L=0,u=0;u<_[a].length;u++){for(l=0;l<_[a][u].length-m;l++){if(r(_[a][u][l],b,k,P,L)===!1)return!1;b++}L++}P++}break;case"GeometryCollection":for(a=0;a<d.geometries.length;a++)if(w(d.geometries[a],r,i)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function n(o,r){var i;switch(o.type){case"FeatureCollection":for(i=0;i<o.features.length&&r(o.features[i].properties,i)!==!1;i++);break;case"Feature":r(o.properties,0)}}function T(o,r){if(o.type==="Feature")r(o,0);else if(o.type==="FeatureCollection")for(var i=0;i<o.features.length&&r(o.features[i],i)!==!1;i++);}function x(o,r){var i,a,u,l,d,c,_,p,g,m,b=0,y=o.type==="FeatureCollection",M=o.type==="Feature",h=y?o.features.length:1;for(i=0;i<h;i++){for(c=y?o.features[i].geometry:M?o.geometry:o,p=y?o.features[i].properties:M?o.properties:{},g=y?o.features[i].bbox:M?o.bbox:void 0,m=y?o.features[i].id:M?o.id:void 0,d=(_=!!c&&c.type==="GeometryCollection")?c.geometries.length:1,u=0;u<d;u++)if((l=_?c.geometries[u]:c)!==null)switch(l.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(r(l,b,p,g,m)===!1)return!1;break;case"GeometryCollection":for(a=0;a<l.geometries.length;a++)if(r(l.geometries[a],b,p,g,m)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(r(null,b,p,g,m)===!1)return!1;b++}}function f(o,r){x(o,function(i,a,u,l,d){var c,_=i===null?null:i.type;switch(_){case null:case"Point":case"LineString":case"Polygon":return r(v.feature(i,u,{bbox:l,id:d}),a,0)!==!1&&void 0}switch(_){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var p=0;p<i.coordinates.length;p++){var g={type:c,coordinates:i.coordinates[p]};if(r(v.feature(g,u),a,p)===!1)return!1}})}function s(o,r){f(o,function(i,a,u){var l=0;if(i.geometry){var d=i.geometry.type;if(d!=="Point"&&d!=="MultiPoint"){var c,_=0,p=0,g=0;return w(i,function(m,b,y,M,h){if(c===void 0||a>_||M>p||h>g)return c=m,_=a,p=M,g=h,void(l=0);var E=v.lineString([c,m],i.properties);if(r(E,a,u,h,l)===!1)return!1;l++,c=m})!==!1&&void 0}}})}function t(o,r){if(!o)throw new Error("geojson is required");f(o,function(i,a,u){if(i.geometry!==null){var l=i.geometry.type,d=i.geometry.coordinates;switch(l){case"LineString":if(r(i,a,u,0,0)===!1)return!1;break;case"Polygon":for(var c=0;c<d.length;c++)if(r(v.lineString(d[c],i.properties),a,u,c)===!1)return!1}}})}A.coordEach=w,A.coordReduce=function(o,r,i,a){var u=i;return w(o,function(l,d,c,_,p){u=d===0&&i===void 0?l:r(u,l,d,c,_,p)},a),u},A.propEach=n,A.propReduce=function(o,r,i){var a=i;return n(o,function(u,l){a=l===0&&i===void 0?u:r(a,u,l)}),a},A.featureEach=T,A.featureReduce=function(o,r,i){var a=i;return T(o,function(u,l){a=l===0&&i===void 0?u:r(a,u,l)}),a},A.coordAll=function(o){var r=[];return w(o,function(i){r.push(i)}),r},A.geomEach=x,A.geomReduce=function(o,r,i){var a=i;return x(o,function(u,l,d,c,_){a=l===0&&i===void 0?u:r(a,u,l,d,c,_)}),a},A.flattenEach=f,A.flattenReduce=function(o,r,i){var a=i;return f(o,function(u,l,d){a=l===0&&d===0&&i===void 0?u:r(a,u,l,d)}),a},A.segmentEach=s,A.segmentReduce=function(o,r,i){var a=i,u=!1;return s(o,function(l,d,c,_,p){a=u===!1&&i===void 0?l:r(a,l,d,c,_,p),u=!0}),a},A.lineEach=t,A.lineReduce=function(o,r,i){var a=i;return t(o,function(u,l,d,c){a=l===0&&i===void 0?u:r(a,u,l,d,c)}),a},A.findSegment=function(o,r){if(r=r||{},!v.isObject(r))throw new Error("options is invalid");var i,a=r.featureIndex||0,u=r.multiFeatureIndex||0,l=r.geometryIndex||0,d=r.segmentIndex||0,c=r.properties;switch(o.type){case"FeatureCollection":a<0&&(a=o.features.length+a),c=c||o.features[a].properties,i=o.features[a].geometry;break;case"Feature":c=c||o.properties,i=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=o;break;default:throw new Error("geojson is invalid")}if(i===null)return null;var _=i.coordinates;switch(i.type){case"Point":case"MultiPoint":return null;case"LineString":return d<0&&(d=_.length+d-1),v.lineString([_[d],_[d+1]],c,r);case"Polygon":return l<0&&(l=_.length+l),d<0&&(d=_[l].length+d-1),v.lineString([_[l][d],_[l][d+1]],c,r);case"MultiLineString":return u<0&&(u=_.length+u),d<0&&(d=_[u].length+d-1),v.lineString([_[u][d],_[u][d+1]],c,r);case"MultiPolygon":return u<0&&(u=_.length+u),l<0&&(l=_[u].length+l),d<0&&(d=_[u][l].length-d-1),v.lineString([_[u][l][d],_[u][l][d+1]],c,r)}throw new Error("geojson is invalid")},A.findPoint=function(o,r){if(r=r||{},!v.isObject(r))throw new Error("options is invalid");var i,a=r.featureIndex||0,u=r.multiFeatureIndex||0,l=r.geometryIndex||0,d=r.coordIndex||0,c=r.properties;switch(o.type){case"FeatureCollection":a<0&&(a=o.features.length+a),c=c||o.features[a].properties,i=o.features[a].geometry;break;case"Feature":c=c||o.properties,i=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=o;break;default:throw new Error("geojson is invalid")}if(i===null)return null;var _=i.coordinates;switch(i.type){case"Point":return v.point(_,c,r);case"MultiPoint":return u<0&&(u=_.length+u),v.point(_[u],c,r);case"LineString":return d<0&&(d=_.length+d),v.point(_[d],c,r);case"Polygon":return l<0&&(l=_.length+l),d<0&&(d=_[l].length+d),v.point(_[l][d],c,r);case"MultiLineString":return u<0&&(u=_.length+u),d<0&&(d=_[u].length+d),v.point(_[u][d],c,r);case"MultiPolygon":return u<0&&(u=_.length+u),l<0&&(l=_[u].length+l),d<0&&(d=_[u][l].length-d),v.point(_[u][l][d],c,r)}throw new Error("geojson is invalid")}},42428:function(C,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var v=e(84880);function w(n){var T=[1/0,1/0,-1/0,-1/0];return v.coordEach(n,function(x){T[0]>x[0]&&(T[0]=x[0]),T[1]>x[1]&&(T[1]=x[1]),T[2]<x[0]&&(T[2]=x[0]),T[3]<x[1]&&(T[3]=x[1])}),T}w.default=w,A.default=w},76796:function(C,A){"use strict";function e(a,u,l){l===void 0&&(l={});var d={type:"Feature"};return(l.id===0||l.id)&&(d.id=l.id),l.bbox&&(d.bbox=l.bbox),d.properties=u||{},d.geometry=a,d}function v(a,u,l){if(l===void 0&&(l={}),!a)throw new Error("coordinates is required");if(!Array.isArray(a))throw new Error("coordinates must be an Array");if(a.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!i(a[0])||!i(a[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:a},u,l)}function w(a,u,l){l===void 0&&(l={});for(var d=0,c=a;d<c.length;d++){var _=c[d];if(_.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var p=0;p<_[_.length-1].length;p++)if(_[_.length-1][p]!==_[0][p])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:a},u,l)}function n(a,u,l){if(l===void 0&&(l={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:a},u,l)}function T(a,u){u===void 0&&(u={});var l={type:"FeatureCollection"};return u.id&&(l.id=u.id),u.bbox&&(l.bbox=u.bbox),l.features=a,l}function x(a,u,l){return l===void 0&&(l={}),e({type:"MultiLineString",coordinates:a},u,l)}function f(a,u,l){return l===void 0&&(l={}),e({type:"MultiPoint",coordinates:a},u,l)}function s(a,u,l){return l===void 0&&(l={}),e({type:"MultiPolygon",coordinates:a},u,l)}function t(a,u){u===void 0&&(u="kilometers");var l=A.factors[u];if(!l)throw new Error(u+" units is invalid");return a*l}function o(a,u){u===void 0&&(u="kilometers");var l=A.factors[u];if(!l)throw new Error(u+" units is invalid");return a/l}function r(a){return a%(2*Math.PI)*180/Math.PI}function i(a){return!isNaN(a)&&a!==null&&!Array.isArray(a)}Object.defineProperty(A,"__esModule",{value:!0}),A.earthRadius=63710088e-1,A.factors={centimeters:100*A.earthRadius,centimetres:100*A.earthRadius,degrees:A.earthRadius/111325,feet:3.28084*A.earthRadius,inches:39.37*A.earthRadius,kilometers:A.earthRadius/1e3,kilometres:A.earthRadius/1e3,meters:A.earthRadius,metres:A.earthRadius,miles:A.earthRadius/1609.344,millimeters:1e3*A.earthRadius,millimetres:1e3*A.earthRadius,nauticalmiles:A.earthRadius/1852,radians:1,yards:1.0936*A.earthRadius},A.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/A.earthRadius,yards:1.0936133},A.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},A.feature=e,A.geometry=function(a,u,l){switch(l===void 0&&(l={}),a){case"Point":return v(u).geometry;case"LineString":return n(u).geometry;case"Polygon":return w(u).geometry;case"MultiPoint":return f(u).geometry;case"MultiLineString":return x(u).geometry;case"MultiPolygon":return s(u).geometry;default:throw new Error(a+" is invalid")}},A.point=v,A.points=function(a,u,l){return l===void 0&&(l={}),T(a.map(function(d){return v(d,u)}),l)},A.polygon=w,A.polygons=function(a,u,l){return l===void 0&&(l={}),T(a.map(function(d){return w(d,u)}),l)},A.lineString=n,A.lineStrings=function(a,u,l){return l===void 0&&(l={}),T(a.map(function(d){return n(d,u)}),l)},A.featureCollection=T,A.multiLineString=x,A.multiPoint=f,A.multiPolygon=s,A.geometryCollection=function(a,u,l){return l===void 0&&(l={}),e({type:"GeometryCollection",geometries:a},u,l)},A.round=function(a,u){if(u===void 0&&(u=0),u&&!(u>=0))throw new Error("precision must be a positive number");var l=Math.pow(10,u||0);return Math.round(a*l)/l},A.radiansToLength=t,A.lengthToRadians=o,A.lengthToDegrees=function(a,u){return r(o(a,u))},A.bearingToAzimuth=function(a){var u=a%360;return u<0&&(u+=360),u},A.radiansToDegrees=r,A.degreesToRadians=function(a){return a%360*Math.PI/180},A.convertLength=function(a,u,l){if(u===void 0&&(u="kilometers"),l===void 0&&(l="kilometers"),!(a>=0))throw new Error("length must be a positive number");return t(o(a,u),l)},A.convertArea=function(a,u,l){if(u===void 0&&(u="meters"),l===void 0&&(l="kilometers"),!(a>=0))throw new Error("area must be a positive number");var d=A.areaFactors[u];if(!d)throw new Error("invalid original units");var c=A.areaFactors[l];if(!c)throw new Error("invalid final units");return a/d*c},A.isNumber=i,A.isObject=function(a){return!!a&&a.constructor===Object},A.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(a.length!==4&&a.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(u){if(!i(u))throw new Error("bbox must only contain numbers")})},A.validateId=function(a){if(!a)throw new Error("id is required");if(["string","number"].indexOf(typeof a)===-1)throw new Error("id must be a number or a string")}},84880:function(C,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var v=e(76796);function w(o,r,i){if(o!==null)for(var a,u,l,d,c,_,p,g,m=0,b=0,y=o.type,M=y==="FeatureCollection",h=y==="Feature",E=M?o.features.length:1,k=0;k<E;k++){c=(g=!!(p=M?o.features[k].geometry:h?o.geometry:o)&&p.type==="GeometryCollection")?p.geometries.length:1;for(var D=0;D<c;D++){var P=0,L=0;if((d=g?p.geometries[D]:p)!==null){_=d.coordinates;var O=d.type;switch(m=!i||O!=="Polygon"&&O!=="MultiPolygon"?0:1,O){case null:break;case"Point":if(r(_,b,k,P,L)===!1)return!1;b++,P++;break;case"LineString":case"MultiPoint":for(a=0;a<_.length;a++){if(r(_[a],b,k,P,L)===!1)return!1;b++,O==="MultiPoint"&&P++}O==="LineString"&&P++;break;case"Polygon":case"MultiLineString":for(a=0;a<_.length;a++){for(u=0;u<_[a].length-m;u++){if(r(_[a][u],b,k,P,L)===!1)return!1;b++}O==="MultiLineString"&&P++,O==="Polygon"&&L++}O==="Polygon"&&P++;break;case"MultiPolygon":for(a=0;a<_.length;a++){for(L=0,u=0;u<_[a].length;u++){for(l=0;l<_[a][u].length-m;l++){if(r(_[a][u][l],b,k,P,L)===!1)return!1;b++}L++}P++}break;case"GeometryCollection":for(a=0;a<d.geometries.length;a++)if(w(d.geometries[a],r,i)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function n(o,r){var i;switch(o.type){case"FeatureCollection":for(i=0;i<o.features.length&&r(o.features[i].properties,i)!==!1;i++);break;case"Feature":r(o.properties,0)}}function T(o,r){if(o.type==="Feature")r(o,0);else if(o.type==="FeatureCollection")for(var i=0;i<o.features.length&&r(o.features[i],i)!==!1;i++);}function x(o,r){var i,a,u,l,d,c,_,p,g,m,b=0,y=o.type==="FeatureCollection",M=o.type==="Feature",h=y?o.features.length:1;for(i=0;i<h;i++){for(c=y?o.features[i].geometry:M?o.geometry:o,p=y?o.features[i].properties:M?o.properties:{},g=y?o.features[i].bbox:M?o.bbox:void 0,m=y?o.features[i].id:M?o.id:void 0,d=(_=!!c&&c.type==="GeometryCollection")?c.geometries.length:1,u=0;u<d;u++)if((l=_?c.geometries[u]:c)!==null)switch(l.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(r(l,b,p,g,m)===!1)return!1;break;case"GeometryCollection":for(a=0;a<l.geometries.length;a++)if(r(l.geometries[a],b,p,g,m)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(r(null,b,p,g,m)===!1)return!1;b++}}function f(o,r){x(o,function(i,a,u,l,d){var c,_=i===null?null:i.type;switch(_){case null:case"Point":case"LineString":case"Polygon":return r(v.feature(i,u,{bbox:l,id:d}),a,0)!==!1&&void 0}switch(_){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var p=0;p<i.coordinates.length;p++){var g={type:c,coordinates:i.coordinates[p]};if(r(v.feature(g,u),a,p)===!1)return!1}})}function s(o,r){f(o,function(i,a,u){var l=0;if(i.geometry){var d=i.geometry.type;if(d!=="Point"&&d!=="MultiPoint"){var c,_=0,p=0,g=0;return w(i,function(m,b,y,M,h){if(c===void 0||a>_||M>p||h>g)return c=m,_=a,p=M,g=h,void(l=0);var E=v.lineString([c,m],i.properties);if(r(E,a,u,h,l)===!1)return!1;l++,c=m})!==!1&&void 0}}})}function t(o,r){if(!o)throw new Error("geojson is required");f(o,function(i,a,u){if(i.geometry!==null){var l=i.geometry.type,d=i.geometry.coordinates;switch(l){case"LineString":if(r(i,a,u,0,0)===!1)return!1;break;case"Polygon":for(var c=0;c<d.length;c++)if(r(v.lineString(d[c],i.properties),a,u,c)===!1)return!1}}})}A.coordEach=w,A.coordReduce=function(o,r,i,a){var u=i;return w(o,function(l,d,c,_,p){u=d===0&&i===void 0?l:r(u,l,d,c,_,p)},a),u},A.propEach=n,A.propReduce=function(o,r,i){var a=i;return n(o,function(u,l){a=l===0&&i===void 0?u:r(a,u,l)}),a},A.featureEach=T,A.featureReduce=function(o,r,i){var a=i;return T(o,function(u,l){a=l===0&&i===void 0?u:r(a,u,l)}),a},A.coordAll=function(o){var r=[];return w(o,function(i){r.push(i)}),r},A.geomEach=x,A.geomReduce=function(o,r,i){var a=i;return x(o,function(u,l,d,c,_){a=l===0&&i===void 0?u:r(a,u,l,d,c,_)}),a},A.flattenEach=f,A.flattenReduce=function(o,r,i){var a=i;return f(o,function(u,l,d){a=l===0&&d===0&&i===void 0?u:r(a,u,l,d)}),a},A.segmentEach=s,A.segmentReduce=function(o,r,i){var a=i,u=!1;return s(o,function(l,d,c,_,p){a=u===!1&&i===void 0?l:r(a,l,d,c,_,p),u=!0}),a},A.lineEach=t,A.lineReduce=function(o,r,i){var a=i;return t(o,function(u,l,d,c){a=l===0&&i===void 0?u:r(a,u,l,d,c)}),a},A.findSegment=function(o,r){if(r=r||{},!v.isObject(r))throw new Error("options is invalid");var i,a=r.featureIndex||0,u=r.multiFeatureIndex||0,l=r.geometryIndex||0,d=r.segmentIndex||0,c=r.properties;switch(o.type){case"FeatureCollection":a<0&&(a=o.features.length+a),c=c||o.features[a].properties,i=o.features[a].geometry;break;case"Feature":c=c||o.properties,i=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=o;break;default:throw new Error("geojson is invalid")}if(i===null)return null;var _=i.coordinates;switch(i.type){case"Point":case"MultiPoint":return null;case"LineString":return d<0&&(d=_.length+d-1),v.lineString([_[d],_[d+1]],c,r);case"Polygon":return l<0&&(l=_.length+l),d<0&&(d=_[l].length+d-1),v.lineString([_[l][d],_[l][d+1]],c,r);case"MultiLineString":return u<0&&(u=_.length+u),d<0&&(d=_[u].length+d-1),v.lineString([_[u][d],_[u][d+1]],c,r);case"MultiPolygon":return u<0&&(u=_.length+u),l<0&&(l=_[u].length+l),d<0&&(d=_[u][l].length-d-1),v.lineString([_[u][l][d],_[u][l][d+1]],c,r)}throw new Error("geojson is invalid")},A.findPoint=function(o,r){if(r=r||{},!v.isObject(r))throw new Error("options is invalid");var i,a=r.featureIndex||0,u=r.multiFeatureIndex||0,l=r.geometryIndex||0,d=r.coordIndex||0,c=r.properties;switch(o.type){case"FeatureCollection":a<0&&(a=o.features.length+a),c=c||o.features[a].properties,i=o.features[a].geometry;break;case"Feature":c=c||o.properties,i=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=o;break;default:throw new Error("geojson is invalid")}if(i===null)return null;var _=i.coordinates;switch(i.type){case"Point":return v.point(_,c,r);case"MultiPoint":return u<0&&(u=_.length+u),v.point(_[u],c,r);case"LineString":return d<0&&(d=_.length+d),v.point(_[d],c,r);case"Polygon":return l<0&&(l=_.length+l),d<0&&(d=_[l].length+d),v.point(_[l][d],c,r);case"MultiLineString":return u<0&&(u=_.length+u),d<0&&(d=_[u].length+d),v.point(_[u][d],c,r);case"MultiPolygon":return u<0&&(u=_.length+u),l<0&&(l=_[u].length+l),d<0&&(d=_[u][l].length-d),v.point(_[u][l][d],c,r)}throw new Error("geojson is invalid")}},77844:function(C,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var v=e(43752),w=e(49840);A.default=function(n,T){T===void 0&&(T={});var x=0,f=0,s=0;return v.coordEach(n,function(t){x+=t[0],f+=t[1],s++}),w.point([x/s,f/s],T.properties)}},49840:function(C,A){"use strict";function e(a,u,l){l===void 0&&(l={});var d={type:"Feature"};return(l.id===0||l.id)&&(d.id=l.id),l.bbox&&(d.bbox=l.bbox),d.properties=u||{},d.geometry=a,d}function v(a,u,l){return l===void 0&&(l={}),e({type:"Point",coordinates:a},u,l)}function w(a,u,l){l===void 0&&(l={});for(var d=0,c=a;d<c.length;d++){var _=c[d];if(_.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var p=0;p<_[_.length-1].length;p++)if(_[_.length-1][p]!==_[0][p])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:a},u,l)}function n(a,u,l){if(l===void 0&&(l={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:a},u,l)}function T(a,u){u===void 0&&(u={});var l={type:"FeatureCollection"};return u.id&&(l.id=u.id),u.bbox&&(l.bbox=u.bbox),l.features=a,l}function x(a,u,l){return l===void 0&&(l={}),e({type:"MultiLineString",coordinates:a},u,l)}function f(a,u,l){return l===void 0&&(l={}),e({type:"MultiPoint",coordinates:a},u,l)}function s(a,u,l){return l===void 0&&(l={}),e({type:"MultiPolygon",coordinates:a},u,l)}function t(a,u){u===void 0&&(u="kilometers");var l=A.factors[u];if(!l)throw new Error(u+" units is invalid");return a*l}function o(a,u){u===void 0&&(u="kilometers");var l=A.factors[u];if(!l)throw new Error(u+" units is invalid");return a/l}function r(a){return a%(2*Math.PI)*180/Math.PI}function i(a){return!isNaN(a)&&a!==null&&!Array.isArray(a)&&!/^\s*$/.test(a)}Object.defineProperty(A,"__esModule",{value:!0}),A.earthRadius=63710088e-1,A.factors={centimeters:100*A.earthRadius,centimetres:100*A.earthRadius,degrees:A.earthRadius/111325,feet:3.28084*A.earthRadius,inches:39.37*A.earthRadius,kilometers:A.earthRadius/1e3,kilometres:A.earthRadius/1e3,meters:A.earthRadius,metres:A.earthRadius,miles:A.earthRadius/1609.344,millimeters:1e3*A.earthRadius,millimetres:1e3*A.earthRadius,nauticalmiles:A.earthRadius/1852,radians:1,yards:A.earthRadius/1.0936},A.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/A.earthRadius,yards:.91441111923921},A.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},A.feature=e,A.geometry=function(a,u,l){switch(l===void 0&&(l={}),a){case"Point":return v(u).geometry;case"LineString":return n(u).geometry;case"Polygon":return w(u).geometry;case"MultiPoint":return f(u).geometry;case"MultiLineString":return x(u).geometry;case"MultiPolygon":return s(u).geometry;default:throw new Error(a+" is invalid")}},A.point=v,A.points=function(a,u,l){return l===void 0&&(l={}),T(a.map(function(d){return v(d,u)}),l)},A.polygon=w,A.polygons=function(a,u,l){return l===void 0&&(l={}),T(a.map(function(d){return w(d,u)}),l)},A.lineString=n,A.lineStrings=function(a,u,l){return l===void 0&&(l={}),T(a.map(function(d){return n(d,u)}),l)},A.featureCollection=T,A.multiLineString=x,A.multiPoint=f,A.multiPolygon=s,A.geometryCollection=function(a,u,l){return l===void 0&&(l={}),e({type:"GeometryCollection",geometries:a},u,l)},A.round=function(a,u){if(u===void 0&&(u=0),u&&!(u>=0))throw new Error("precision must be a positive number");var l=Math.pow(10,u||0);return Math.round(a*l)/l},A.radiansToLength=t,A.lengthToRadians=o,A.lengthToDegrees=function(a,u){return r(o(a,u))},A.bearingToAzimuth=function(a){var u=a%360;return u<0&&(u+=360),u},A.radiansToDegrees=r,A.degreesToRadians=function(a){return a%360*Math.PI/180},A.convertLength=function(a,u,l){if(u===void 0&&(u="kilometers"),l===void 0&&(l="kilometers"),!(a>=0))throw new Error("length must be a positive number");return t(o(a,u),l)},A.convertArea=function(a,u,l){if(u===void 0&&(u="meters"),l===void 0&&(l="kilometers"),!(a>=0))throw new Error("area must be a positive number");var d=A.areaFactors[u];if(!d)throw new Error("invalid original units");var c=A.areaFactors[l];if(!c)throw new Error("invalid final units");return a/d*c},A.isNumber=i,A.isObject=function(a){return!!a&&a.constructor===Object},A.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(a.length!==4&&a.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(u){if(!i(u))throw new Error("bbox must only contain numbers")})},A.validateId=function(a){if(!a)throw new Error("id is required");if(["string","number"].indexOf(typeof a)===-1)throw new Error("id must be a number or a string")},A.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},A.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},A.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},A.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},A.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},A.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},A.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},43752:function(C,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var v=e(49840);function w(o,r,i){if(o!==null)for(var a,u,l,d,c,_,p,g,m=0,b=0,y=o.type,M=y==="FeatureCollection",h=y==="Feature",E=M?o.features.length:1,k=0;k<E;k++){c=(g=!!(p=M?o.features[k].geometry:h?o.geometry:o)&&p.type==="GeometryCollection")?p.geometries.length:1;for(var D=0;D<c;D++){var P=0,L=0;if((d=g?p.geometries[D]:p)!==null){_=d.coordinates;var O=d.type;switch(m=!i||O!=="Polygon"&&O!=="MultiPolygon"?0:1,O){case null:break;case"Point":if(r(_,b,k,P,L)===!1)return!1;b++,P++;break;case"LineString":case"MultiPoint":for(a=0;a<_.length;a++){if(r(_[a],b,k,P,L)===!1)return!1;b++,O==="MultiPoint"&&P++}O==="LineString"&&P++;break;case"Polygon":case"MultiLineString":for(a=0;a<_.length;a++){for(u=0;u<_[a].length-m;u++){if(r(_[a][u],b,k,P,L)===!1)return!1;b++}O==="MultiLineString"&&P++,O==="Polygon"&&L++}O==="Polygon"&&P++;break;case"MultiPolygon":for(a=0;a<_.length;a++){for(L=0,u=0;u<_[a].length;u++){for(l=0;l<_[a][u].length-m;l++){if(r(_[a][u][l],b,k,P,L)===!1)return!1;b++}L++}P++}break;case"GeometryCollection":for(a=0;a<d.geometries.length;a++)if(w(d.geometries[a],r,i)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function n(o,r){var i;switch(o.type){case"FeatureCollection":for(i=0;i<o.features.length&&r(o.features[i].properties,i)!==!1;i++);break;case"Feature":r(o.properties,0)}}function T(o,r){if(o.type==="Feature")r(o,0);else if(o.type==="FeatureCollection")for(var i=0;i<o.features.length&&r(o.features[i],i)!==!1;i++);}function x(o,r){var i,a,u,l,d,c,_,p,g,m,b=0,y=o.type==="FeatureCollection",M=o.type==="Feature",h=y?o.features.length:1;for(i=0;i<h;i++){for(c=y?o.features[i].geometry:M?o.geometry:o,p=y?o.features[i].properties:M?o.properties:{},g=y?o.features[i].bbox:M?o.bbox:void 0,m=y?o.features[i].id:M?o.id:void 0,d=(_=!!c&&c.type==="GeometryCollection")?c.geometries.length:1,u=0;u<d;u++)if((l=_?c.geometries[u]:c)!==null)switch(l.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(r(l,b,p,g,m)===!1)return!1;break;case"GeometryCollection":for(a=0;a<l.geometries.length;a++)if(r(l.geometries[a],b,p,g,m)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(r(null,b,p,g,m)===!1)return!1;b++}}function f(o,r){x(o,function(i,a,u,l,d){var c,_=i===null?null:i.type;switch(_){case null:case"Point":case"LineString":case"Polygon":return r(v.feature(i,u,{bbox:l,id:d}),a,0)!==!1&&void 0}switch(_){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var p=0;p<i.coordinates.length;p++){var g={type:c,coordinates:i.coordinates[p]};if(r(v.feature(g,u),a,p)===!1)return!1}})}function s(o,r){f(o,function(i,a,u){var l=0;if(i.geometry){var d=i.geometry.type;if(d!=="Point"&&d!=="MultiPoint"){var c,_=0,p=0,g=0;return w(i,function(m,b,y,M,h){if(c===void 0||a>_||M>p||h>g)return c=m,_=a,p=M,g=h,void(l=0);var E=v.lineString([c,m],i.properties);if(r(E,a,u,h,l)===!1)return!1;l++,c=m})!==!1&&void 0}}})}function t(o,r){if(!o)throw new Error("geojson is required");f(o,function(i,a,u){if(i.geometry!==null){var l=i.geometry.type,d=i.geometry.coordinates;switch(l){case"LineString":if(r(i,a,u,0,0)===!1)return!1;break;case"Polygon":for(var c=0;c<d.length;c++)if(r(v.lineString(d[c],i.properties),a,u,c)===!1)return!1}}})}A.coordEach=w,A.coordReduce=function(o,r,i,a){var u=i;return w(o,function(l,d,c,_,p){u=d===0&&i===void 0?l:r(u,l,d,c,_,p)},a),u},A.propEach=n,A.propReduce=function(o,r,i){var a=i;return n(o,function(u,l){a=l===0&&i===void 0?u:r(a,u,l)}),a},A.featureEach=T,A.featureReduce=function(o,r,i){var a=i;return T(o,function(u,l){a=l===0&&i===void 0?u:r(a,u,l)}),a},A.coordAll=function(o){var r=[];return w(o,function(i){r.push(i)}),r},A.geomEach=x,A.geomReduce=function(o,r,i){var a=i;return x(o,function(u,l,d,c,_){a=l===0&&i===void 0?u:r(a,u,l,d,c,_)}),a},A.flattenEach=f,A.flattenReduce=function(o,r,i){var a=i;return f(o,function(u,l,d){a=l===0&&d===0&&i===void 0?u:r(a,u,l,d)}),a},A.segmentEach=s,A.segmentReduce=function(o,r,i){var a=i,u=!1;return s(o,function(l,d,c,_,p){a=u===!1&&i===void 0?l:r(a,l,d,c,_,p),u=!0}),a},A.lineEach=t,A.lineReduce=function(o,r,i){var a=i;return t(o,function(u,l,d,c){a=l===0&&i===void 0?u:r(a,u,l,d,c)}),a},A.findSegment=function(o,r){if(r=r||{},!v.isObject(r))throw new Error("options is invalid");var i,a=r.featureIndex||0,u=r.multiFeatureIndex||0,l=r.geometryIndex||0,d=r.segmentIndex||0,c=r.properties;switch(o.type){case"FeatureCollection":a<0&&(a=o.features.length+a),c=c||o.features[a].properties,i=o.features[a].geometry;break;case"Feature":c=c||o.properties,i=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=o;break;default:throw new Error("geojson is invalid")}if(i===null)return null;var _=i.coordinates;switch(i.type){case"Point":case"MultiPoint":return null;case"LineString":return d<0&&(d=_.length+d-1),v.lineString([_[d],_[d+1]],c,r);case"Polygon":return l<0&&(l=_.length+l),d<0&&(d=_[l].length+d-1),v.lineString([_[l][d],_[l][d+1]],c,r);case"MultiLineString":return u<0&&(u=_.length+u),d<0&&(d=_[u].length+d-1),v.lineString([_[u][d],_[u][d+1]],c,r);case"MultiPolygon":return u<0&&(u=_.length+u),l<0&&(l=_[u].length+l),d<0&&(d=_[u][l].length-d-1),v.lineString([_[u][l][d],_[u][l][d+1]],c,r)}throw new Error("geojson is invalid")},A.findPoint=function(o,r){if(r=r||{},!v.isObject(r))throw new Error("options is invalid");var i,a=r.featureIndex||0,u=r.multiFeatureIndex||0,l=r.geometryIndex||0,d=r.coordIndex||0,c=r.properties;switch(o.type){case"FeatureCollection":a<0&&(a=o.features.length+a),c=c||o.features[a].properties,i=o.features[a].geometry;break;case"Feature":c=c||o.properties,i=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=o;break;default:throw new Error("geojson is invalid")}if(i===null)return null;var _=i.coordinates;switch(i.type){case"Point":return v.point(_,c,r);case"MultiPoint":return u<0&&(u=_.length+u),v.point(_[u],c,r);case"LineString":return d<0&&(d=_.length+d),v.point(_[d],c,r);case"Polygon":return l<0&&(l=_.length+l),d<0&&(d=_[l].length+d),v.point(_[l][d],c,r);case"MultiLineString":return u<0&&(u=_.length+u),d<0&&(d=_[u].length+d),v.point(_[u][d],c,r);case"MultiPolygon":return u<0&&(u=_.length+u),l<0&&(l=_[u].length+l),d<0&&(d=_[u][l].length-d),v.point(_[u][l][d],c,r)}throw new Error("geojson is invalid")}},49972:function(C){C.exports=function(A){var e=0,v=0,w=0,n=0;return A.map(function(T){var x=(T=T.slice())[0],f=x.toUpperCase();if(x!=f)switch(T[0]=f,x){case"a":T[6]+=w,T[7]+=n;break;case"v":T[1]+=n;break;case"h":T[1]+=w;break;default:for(var s=1;s<T.length;)T[s++]+=w,T[s++]+=n}switch(f){case"Z":w=e,n=v;break;case"H":w=T[1];break;case"V":n=T[1];break;case"M":w=e=T[1],n=v=T[2];break;default:w=T[T.length-2],n=T[T.length-1]}return T})}},76752:function(C){"use strict";C.exports=function(A,e){if(!A||A.length==null)throw Error("Argument should be an array");e=e==null?1:Math.floor(e);for(var v=Array(2*e),w=0;w<e;w++){for(var n=-1/0,T=1/0,x=w,f=A.length;x<f;x+=e)A[x]>n&&(n=A[x]),A[x]<T&&(T=A[x]);v[w]=T,v[e+w]=n}return v}},10272:function(C){"use strict";C.exports=function(A,e,v){if(typeof Array.prototype.findIndex=="function")return A.findIndex(e,v);if(typeof e!="function")throw new TypeError("predicate must be a function");var w=Object(A),n=w.length;if(n===0)return-1;for(var T=0;T<n;T++)if(e.call(v,w[T],T,w))return T;return-1}},71152:function(C,A,e){"use strict";var v=e(76752);C.exports=function(w,n,T){if(!w||w.length==null)throw Error("Argument should be an array");n==null&&(n=1),T==null&&(T=v(w,n));for(var x=0;x<n;x++){var f=T[n+x],s=T[x],t=x,o=w.length;if(f===1/0&&s===-1/0)for(t=x;t<o;t+=n)w[t]=w[t]===f?1:w[t]===s?0:.5;else if(f===1/0)for(t=x;t<o;t+=n)w[t]=w[t]===f?1:0;else if(s===-1/0)for(t=x;t<o;t+=n)w[t]=w[t]===s?0:1;else{var r=f-s;for(t=x;t<o;t+=n)isNaN(w[t])||(w[t]=r===0?.5:(w[t]-s)/r)}}return w}},67752:function(C){C.exports=function(A,e){var v=typeof A=="number",w=typeof e=="number";v&&!w?(e=A,A=0):v||w||(A=0,e=0);var n=(e|=0)-(A|=0);if(n<0)throw new Error("array length must be positive");for(var T=new Array(n),x=0,f=A;x<n;x++,f++)T[x]=f;return T}},45408:function(C,A,e){"use strict";var v=e(4168);function w(F){return w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},w(F)}var n,T,x=e(86832).codes,f=x.ERR_AMBIGUOUS_ARGUMENT,s=x.ERR_INVALID_ARG_TYPE,t=x.ERR_INVALID_ARG_VALUE,o=x.ERR_INVALID_RETURN_VALUE,r=x.ERR_MISSING_ARGS,i=e(26144),a=e(35840).inspect,u=e(35840).types,l=u.isPromise,d=u.isRegExp,c=Object.assign?Object.assign:e(60964).assign,_=Object.is?Object.is:e(39896);function p(){var F=e(25116);n=F.isDeepEqual,T=F.isDeepStrictEqual}var g=!1,m=C.exports=h,b={};function y(F){throw F.message instanceof Error?F.message:new i(F)}function M(F,j,Z,z){if(!Z){var H=!1;if(j===0)H=!0,z="No value argument passed to `assert.ok()`";else if(z instanceof Error)throw z;var U=new i({actual:Z,expected:!0,message:z,operator:"==",stackStartFn:F});throw U.generatedMessage=H,U}}function h(){for(var F=arguments.length,j=new Array(F),Z=0;Z<F;Z++)j[Z]=arguments[Z];M.apply(void 0,[h,j.length].concat(j))}m.fail=function F(j,Z,z,H,U){var re,ee=arguments.length;if(ee===0?re="Failed":ee===1?(z=j,j=void 0):(g===!1&&(g=!0,(v.emitWarning?v.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),ee===2&&(H="!=")),z instanceof Error)throw z;var J={actual:j,expected:Z,operator:H===void 0?"fail":H,stackStartFn:U||F};z!==void 0&&(J.message=z);var Q=new i(J);throw re&&(Q.message=re,Q.generatedMessage=!0),Q},m.AssertionError=i,m.ok=h,m.equal=function F(j,Z,z){if(arguments.length<2)throw new r("actual","expected");j!=Z&&y({actual:j,expected:Z,message:z,operator:"==",stackStartFn:F})},m.notEqual=function F(j,Z,z){if(arguments.length<2)throw new r("actual","expected");j==Z&&y({actual:j,expected:Z,message:z,operator:"!=",stackStartFn:F})},m.deepEqual=function F(j,Z,z){if(arguments.length<2)throw new r("actual","expected");n===void 0&&p(),n(j,Z)||y({actual:j,expected:Z,message:z,operator:"deepEqual",stackStartFn:F})},m.notDeepEqual=function F(j,Z,z){if(arguments.length<2)throw new r("actual","expected");n===void 0&&p(),n(j,Z)&&y({actual:j,expected:Z,message:z,operator:"notDeepEqual",stackStartFn:F})},m.deepStrictEqual=function F(j,Z,z){if(arguments.length<2)throw new r("actual","expected");n===void 0&&p(),T(j,Z)||y({actual:j,expected:Z,message:z,operator:"deepStrictEqual",stackStartFn:F})},m.notDeepStrictEqual=function F(j,Z,z){if(arguments.length<2)throw new r("actual","expected");n===void 0&&p(),T(j,Z)&&y({actual:j,expected:Z,message:z,operator:"notDeepStrictEqual",stackStartFn:F})},m.strictEqual=function F(j,Z,z){if(arguments.length<2)throw new r("actual","expected");_(j,Z)||y({actual:j,expected:Z,message:z,operator:"strictEqual",stackStartFn:F})},m.notStrictEqual=function F(j,Z,z){if(arguments.length<2)throw new r("actual","expected");_(j,Z)&&y({actual:j,expected:Z,message:z,operator:"notStrictEqual",stackStartFn:F})};var E=function F(j,Z,z){var H=this;(function(U,re){if(!(U instanceof re))throw new TypeError("Cannot call a class as a function")})(this,F),Z.forEach(function(U){U in j&&(z!==void 0&&typeof z[U]=="string"&&d(j[U])&&j[U].test(z[U])?H[U]=z[U]:H[U]=j[U])})};function k(F,j,Z,z){if(typeof j!="function"){if(d(j))return j.test(F);if(arguments.length===2)throw new s("expected",["Function","RegExp"],j);if(w(F)!=="object"||F===null){var H=new i({actual:F,expected:j,message:Z,operator:"deepStrictEqual",stackStartFn:z});throw H.operator=z.name,H}var U=Object.keys(j);if(j instanceof Error)U.push("name","message");else if(U.length===0)throw new t("error",j,"may not be an empty object");return n===void 0&&p(),U.forEach(function(re){typeof F[re]=="string"&&d(j[re])&&j[re].test(F[re])||function(ee,J,Q,ne,K,oe){if(!(Q in ee)||!T(ee[Q],J[Q])){if(!ne){var le=new E(ee,K),se=new E(J,K,ee),de=new i({actual:le,expected:se,operator:"deepStrictEqual",stackStartFn:oe});throw de.actual=ee,de.expected=J,de.operator=oe.name,de}y({actual:ee,expected:J,message:ne,operator:oe.name,stackStartFn:oe})}}(F,j,re,Z,U,z)}),!0}return j.prototype!==void 0&&F instanceof j||!Error.isPrototypeOf(j)&&j.call({},F)===!0}function D(F){if(typeof F!="function")throw new s("fn","Function",F);try{F()}catch(j){return j}return b}function P(F){return l(F)||F!==null&&w(F)==="object"&&typeof F.then=="function"&&typeof F.catch=="function"}function L(F){return Promise.resolve().then(function(){var j;if(typeof F=="function"){if(!P(j=F()))throw new o("instance of Promise","promiseFn",j)}else{if(!P(F))throw new s("promiseFn",["Function","Promise"],F);j=F}return Promise.resolve().then(function(){return j}).then(function(){return b}).catch(function(Z){return Z})})}function O(F,j,Z,z){if(typeof Z=="string"){if(arguments.length===4)throw new s("error",["Object","Error","Function","RegExp"],Z);if(w(j)==="object"&&j!==null){if(j.message===Z)throw new f("error/message",'The error message "'.concat(j.message,'" is identical to the message.'))}else if(j===Z)throw new f("error/message",'The error "'.concat(j,'" is identical to the message.'));z=Z,Z=void 0}else if(Z!=null&&w(Z)!=="object"&&typeof Z!="function")throw new s("error",["Object","Error","Function","RegExp"],Z);if(j===b){var H="";Z&&Z.name&&(H+=" (".concat(Z.name,")")),H+=z?": ".concat(z):".";var U=F.name==="rejects"?"rejection":"exception";y({actual:void 0,expected:Z,operator:F.name,message:"Missing expected ".concat(U).concat(H),stackStartFn:F})}if(Z&&!k(j,Z,z,F))throw j}function N(F,j,Z,z){if(j!==b){if(typeof Z=="string"&&(z=Z,Z=void 0),!Z||k(j,Z)){var H=z?": ".concat(z):".",U=F.name==="doesNotReject"?"rejection":"exception";y({actual:j,expected:Z,operator:F.name,message:"Got unwanted ".concat(U).concat(H,`
`)+'Actual message: "'.concat(j&&j.message,'"'),stackStartFn:F})}throw j}}function V(){for(var F=arguments.length,j=new Array(F),Z=0;Z<F;Z++)j[Z]=arguments[Z];M.apply(void 0,[V,j.length].concat(j))}m.throws=function F(j){for(var Z=arguments.length,z=new Array(Z>1?Z-1:0),H=1;H<Z;H++)z[H-1]=arguments[H];O.apply(void 0,[F,D(j)].concat(z))},m.rejects=function F(j){for(var Z=arguments.length,z=new Array(Z>1?Z-1:0),H=1;H<Z;H++)z[H-1]=arguments[H];return L(j).then(function(U){return O.apply(void 0,[F,U].concat(z))})},m.doesNotThrow=function F(j){for(var Z=arguments.length,z=new Array(Z>1?Z-1:0),H=1;H<Z;H++)z[H-1]=arguments[H];N.apply(void 0,[F,D(j)].concat(z))},m.doesNotReject=function F(j){for(var Z=arguments.length,z=new Array(Z>1?Z-1:0),H=1;H<Z;H++)z[H-1]=arguments[H];return L(j).then(function(U){return N.apply(void 0,[F,U].concat(z))})},m.ifError=function F(j){if(j!=null){var Z="ifError got unwanted exception: ";w(j)==="object"&&typeof j.message=="string"?j.message.length===0&&j.constructor?Z+=j.constructor.name:Z+=j.message:Z+=a(j);var z=new i({actual:j,expected:null,operator:"ifError",message:Z,stackStartFn:F}),H=j.stack;if(typeof H=="string"){var U=H.split(`
`);U.shift();for(var re=z.stack.split(`
`),ee=0;ee<U.length;ee++){var J=re.indexOf(U[ee]);if(J!==-1){re=re.slice(0,J);break}}z.stack="".concat(re.join(`
`),`
`).concat(U.join(`
`))}throw z}},m.strict=c(V,m,{equal:m.strictEqual,deepEqual:m.deepStrictEqual,notEqual:m.notStrictEqual,notDeepEqual:m.notDeepStrictEqual}),m.strict.strict=m.strict},26144:function(C,A,e){"use strict";var v=e(4168);function w(y,M,h){return M in y?Object.defineProperty(y,M,{value:h,enumerable:!0,configurable:!0,writable:!0}):y[M]=h,y}function n(y,M){for(var h=0;h<M.length;h++){var E=M[h];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(y,E.key,E)}}function T(y,M){return!M||r(M)!=="object"&&typeof M!="function"?x(y):M}function x(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function f(y){var M=typeof Map=="function"?new Map:void 0;return f=function(h){if(h===null||(E=h,Function.toString.call(E).indexOf("[native code]")===-1))return h;var E;if(typeof h!="function")throw new TypeError("Super expression must either be null or a function");if(M!==void 0){if(M.has(h))return M.get(h);M.set(h,k)}function k(){return s(h,arguments,o(this).constructor)}return k.prototype=Object.create(h.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),t(k,h)},f(y)}function s(y,M,h){return s=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(E,k,D){var P=[null];P.push.apply(P,k);var L=new(Function.bind.apply(E,P));return D&&t(L,D.prototype),L},s.apply(null,arguments)}function t(y,M){return t=Object.setPrototypeOf||function(h,E){return h.__proto__=E,h},t(y,M)}function o(y){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(M){return M.__proto__||Object.getPrototypeOf(M)},o(y)}function r(y){return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},r(y)}var i=e(35840).inspect,a=e(86832).codes.ERR_INVALID_ARG_TYPE;function u(y,M,h){return(h===void 0||h>y.length)&&(h=y.length),y.substring(h-M.length,h)===M}var l="",d="",c="",_="",p={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function g(y){var M=Object.keys(y),h=Object.create(Object.getPrototypeOf(y));return M.forEach(function(E){h[E]=y[E]}),Object.defineProperty(h,"message",{value:y.message}),h}function m(y){return i(y,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var b=function(y){function M(k){var D;if(function(re,ee){if(!(re instanceof ee))throw new TypeError("Cannot call a class as a function")}(this,M),r(k)!=="object"||k===null)throw new a("options","Object",k);var P=k.message,L=k.operator,O=k.stackStartFn,N=k.actual,V=k.expected,F=Error.stackTraceLimit;if(Error.stackTraceLimit=0,P!=null)D=T(this,o(M).call(this,String(P)));else if(v.stderr&&v.stderr.isTTY&&(v.stderr&&v.stderr.getColorDepth&&v.stderr.getColorDepth()!==1?(l="\x1B[34m",d="\x1B[32m",_="\x1B[39m",c="\x1B[31m"):(l="",d="",_="",c="")),r(N)==="object"&&N!==null&&r(V)==="object"&&V!==null&&"stack"in N&&N instanceof Error&&"stack"in V&&V instanceof Error&&(N=g(N),V=g(V)),L==="deepStrictEqual"||L==="strictEqual")D=T(this,o(M).call(this,function(re,ee,J){var Q="",ne="",K=0,oe="",le=!1,se=m(re),de=se.split(`
`),be=m(ee).split(`
`),_e=0,xe="";if(J==="strictEqual"&&r(re)==="object"&&r(ee)==="object"&&re!==null&&ee!==null&&(J="strictEqualObject"),de.length===1&&be.length===1&&de[0]!==be[0]){var ve=de[0].length+be[0].length;if(ve<=10){if(!(r(re)==="object"&&re!==null||r(ee)==="object"&&ee!==null||re===0&&ee===0))return"".concat(p[J],`

`)+"".concat(de[0]," !== ").concat(be[0],`
`)}else if(J!=="strictEqualObject"&&ve<(v.stderr&&v.stderr.isTTY?v.stderr.columns:80)){for(;de[0][_e]===be[0][_e];)_e++;_e>2&&(xe=`
  `.concat(function(Re,Ne){if(Ne=Math.floor(Ne),Re.length==0||Ne==0)return"";var ge=Re.length*Ne;for(Ne=Math.floor(Math.log(Ne)/Math.log(2));Ne;)Re+=Re,Ne--;return Re+Re.substring(0,ge-Re.length)}(" ",_e),"^"),_e=0)}}for(var ye=de[de.length-1],me=be[be.length-1];ye===me&&(_e++<2?oe=`
  `.concat(ye).concat(oe):Q=ye,de.pop(),be.pop(),de.length!==0&&be.length!==0);)ye=de[de.length-1],me=be[be.length-1];var Me=Math.max(de.length,be.length);if(Me===0){var Ae=se.split(`
`);if(Ae.length>30)for(Ae[26]="".concat(l,"...").concat(_);Ae.length>27;)Ae.pop();return"".concat(p.notIdentical,`

`).concat(Ae.join(`
`),`
`)}_e>3&&(oe=`
`.concat(l,"...").concat(_).concat(oe),le=!0),Q!==""&&(oe=`
  `.concat(Q).concat(oe),Q="");var ce=0,ae=p[J]+`
`.concat(d,"+ actual").concat(_," ").concat(c,"- expected").concat(_),pe=" ".concat(l,"...").concat(_," Lines skipped");for(_e=0;_e<Me;_e++){var De=_e-K;if(de.length<_e+1)De>1&&_e>2&&(De>4?(ne+=`
`.concat(l,"...").concat(_),le=!0):De>3&&(ne+=`
  `.concat(be[_e-2]),ce++),ne+=`
  `.concat(be[_e-1]),ce++),K=_e,Q+=`
`.concat(c,"-").concat(_," ").concat(be[_e]),ce++;else if(be.length<_e+1)De>1&&_e>2&&(De>4?(ne+=`
`.concat(l,"...").concat(_),le=!0):De>3&&(ne+=`
  `.concat(de[_e-2]),ce++),ne+=`
  `.concat(de[_e-1]),ce++),K=_e,ne+=`
`.concat(d,"+").concat(_," ").concat(de[_e]),ce++;else{var ke=be[_e],Ee=de[_e],Ie=Ee!==ke&&(!u(Ee,",")||Ee.slice(0,-1)!==ke);Ie&&u(ke,",")&&ke.slice(0,-1)===Ee&&(Ie=!1,Ee+=","),Ie?(De>1&&_e>2&&(De>4?(ne+=`
`.concat(l,"...").concat(_),le=!0):De>3&&(ne+=`
  `.concat(de[_e-2]),ce++),ne+=`
  `.concat(de[_e-1]),ce++),K=_e,ne+=`
`.concat(d,"+").concat(_," ").concat(Ee),Q+=`
`.concat(c,"-").concat(_," ").concat(ke),ce+=2):(ne+=Q,Q="",De!==1&&_e!==0||(ne+=`
  `.concat(Ee),ce++))}if(ce>20&&_e<Me-2)return"".concat(ae).concat(pe,`
`).concat(ne,`
`).concat(l,"...").concat(_).concat(Q,`
`)+"".concat(l,"...").concat(_)}return"".concat(ae).concat(le?pe:"",`
`).concat(ne).concat(Q).concat(oe).concat(xe)}(N,V,L)));else if(L==="notDeepStrictEqual"||L==="notStrictEqual"){var j=p[L],Z=m(N).split(`
`);if(L==="notStrictEqual"&&r(N)==="object"&&N!==null&&(j=p.notStrictEqualObject),Z.length>30)for(Z[26]="".concat(l,"...").concat(_);Z.length>27;)Z.pop();D=Z.length===1?T(this,o(M).call(this,"".concat(j," ").concat(Z[0]))):T(this,o(M).call(this,"".concat(j,`

`).concat(Z.join(`
`),`
`)))}else{var z=m(N),H="",U=p[L];L==="notDeepEqual"||L==="notEqual"?(z="".concat(p[L],`

`).concat(z)).length>1024&&(z="".concat(z.slice(0,1021),"...")):(H="".concat(m(V)),z.length>512&&(z="".concat(z.slice(0,509),"...")),H.length>512&&(H="".concat(H.slice(0,509),"...")),L==="deepEqual"||L==="equal"?z="".concat(U,`

`).concat(z,`

should equal

`):H=" ".concat(L," ").concat(H)),D=T(this,o(M).call(this,"".concat(z).concat(H)))}return Error.stackTraceLimit=F,D.generatedMessage=!P,Object.defineProperty(x(D),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),D.code="ERR_ASSERTION",D.actual=N,D.expected=V,D.operator=L,Error.captureStackTrace&&Error.captureStackTrace(x(D),O),D.stack,D.name="AssertionError",T(D)}var h,E;return function(k,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(D&&D.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),D&&t(k,D)}(M,y),h=M,E=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:i.custom,value:function(k,D){return i(this,function(P){for(var L=1;L<arguments.length;L++){var O=arguments[L]!=null?arguments[L]:{},N=Object.keys(O);typeof Object.getOwnPropertySymbols=="function"&&(N=N.concat(Object.getOwnPropertySymbols(O).filter(function(V){return Object.getOwnPropertyDescriptor(O,V).enumerable}))),N.forEach(function(V){w(P,V,O[V])})}return P}({},D,{customInspect:!1,depth:0}))}}],E&&n(h.prototype,E),M}(f(Error));C.exports=b},86832:function(C,A,e){"use strict";function v(o){return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},v(o)}function w(o){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},w(o)}function n(o,r){return n=Object.setPrototypeOf||function(i,a){return i.__proto__=a,i},n(o,r)}var T,x,f={};function s(o,r,i){i||(i=Error);var a=function(u){function l(d,c,_){var p;return function(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}(this,l),p=function(g,m){return!m||v(m)!=="object"&&typeof m!="function"?function(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}(g):m}(this,w(l).call(this,function(g,m,b){return typeof r=="string"?r:r(g,m,b)}(d,c,_))),p.code=o,p}return function(d,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),c&&n(d,c)}(l,u),l}(i);f[o]=a}function t(o,r){if(Array.isArray(o)){var i=o.length;return o=o.map(function(a){return String(a)}),i>2?"one of ".concat(r," ").concat(o.slice(0,i-1).join(", "),", or ")+o[i-1]:i===2?"one of ".concat(r," ").concat(o[0]," or ").concat(o[1]):"of ".concat(r," ").concat(o[0])}return"of ".concat(r," ").concat(String(o))}s("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),s("ERR_INVALID_ARG_TYPE",function(o,r,i){var a,u,l,d,c;if(T===void 0&&(T=e(45408)),T(typeof o=="string","'name' must be a string"),typeof r=="string"&&(u="not ",r.substr(0,4)===u)?(a="must not be",r=r.replace(/^not /,"")):a="must be",function(p,g,m){return(m===void 0||m>p.length)&&(m=p.length),p.substring(m-9,m)===g}(o," argument"))l="The ".concat(o," ").concat(a," ").concat(t(r,"type"));else{var _=(typeof c!="number"&&(c=0),c+1>(d=o).length||d.indexOf(".",c)===-1?"argument":"property");l='The "'.concat(o,'" ').concat(_," ").concat(a," ").concat(t(r,"type"))}return l+". Received type ".concat(v(i))},TypeError),s("ERR_INVALID_ARG_VALUE",function(o,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";x===void 0&&(x=e(35840));var a=x.inspect(r);return a.length>128&&(a="".concat(a.slice(0,128),"...")),"The argument '".concat(o,"' ").concat(i,". Received ").concat(a)},TypeError,RangeError),s("ERR_INVALID_RETURN_VALUE",function(o,r,i){var a;return a=i&&i.constructor&&i.constructor.name?"instance of ".concat(i.constructor.name):"type ".concat(v(i)),"Expected ".concat(o,' to be returned from the "').concat(r,'"')+" function but got ".concat(a,".")},TypeError),s("ERR_MISSING_ARGS",function(){for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];T===void 0&&(T=e(45408)),T(r.length>0,"At least one arg needs to be specified");var a="The ",u=r.length;switch(r=r.map(function(l){return'"'.concat(l,'"')}),u){case 1:a+="".concat(r[0]," argument");break;case 2:a+="".concat(r[0]," and ").concat(r[1]," arguments");break;default:a+=r.slice(0,u-1).join(", "),a+=", and ".concat(r[u-1]," arguments")}return"".concat(a," must be specified")},TypeError),C.exports.codes=f},25116:function(C,A,e){"use strict";function v(K,oe){return function(le){if(Array.isArray(le))return le}(K)||function(le,se){var de=[],be=!0,_e=!1,xe=void 0;try{for(var ve,ye=le[Symbol.iterator]();!(be=(ve=ye.next()).done)&&(de.push(ve.value),!se||de.length!==se);be=!0);}catch(me){_e=!0,xe=me}finally{try{be||ye.return==null||ye.return()}finally{if(_e)throw xe}}return de}(K,oe)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function w(K){return w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(oe){return typeof oe}:function(oe){return oe&&typeof Symbol=="function"&&oe.constructor===Symbol&&oe!==Symbol.prototype?"symbol":typeof oe},w(K)}var n=/a/g.flags!==void 0,T=function(K){var oe=[];return K.forEach(function(le){return oe.push(le)}),oe},x=function(K){var oe=[];return K.forEach(function(le,se){return oe.push([se,le])}),oe},f=Object.is?Object.is:e(39896),s=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},t=Number.isNaN?Number.isNaN:e(1560);function o(K){return K.call.bind(K)}var r=o(Object.prototype.hasOwnProperty),i=o(Object.prototype.propertyIsEnumerable),a=o(Object.prototype.toString),u=e(35840).types,l=u.isAnyArrayBuffer,d=u.isArrayBufferView,c=u.isDate,_=u.isMap,p=u.isRegExp,g=u.isSet,m=u.isNativeError,b=u.isBoxedPrimitive,y=u.isNumberObject,M=u.isStringObject,h=u.isBooleanObject,E=u.isBigIntObject,k=u.isSymbolObject,D=u.isFloat32Array,P=u.isFloat64Array;function L(K){if(K.length===0||K.length>10)return!0;for(var oe=0;oe<K.length;oe++){var le=K.charCodeAt(oe);if(le<48||le>57)return!0}return K.length===10&&K>=Math.pow(2,32)}function O(K){return Object.keys(K).filter(L).concat(s(K).filter(Object.prototype.propertyIsEnumerable.bind(K)))}function N(K,oe){if(K===oe)return 0;for(var le=K.length,se=oe.length,de=0,be=Math.min(le,se);de<be;++de)if(K[de]!==oe[de]){le=K[de],se=oe[de];break}return le<se?-1:se<le?1:0}var V=0,F=1,j=2,Z=3;function z(K,oe,le,se){if(K===oe)return K!==0||!le||f(K,oe);if(le){if(w(K)!=="object")return typeof K=="number"&&t(K)&&t(oe);if(w(oe)!=="object"||K===null||oe===null||Object.getPrototypeOf(K)!==Object.getPrototypeOf(oe))return!1}else{if(K===null||w(K)!=="object")return(oe===null||w(oe)!=="object")&&K==oe;if(oe===null||w(oe)!=="object")return!1}var de,be,_e,xe,ve=a(K);if(ve!==a(oe))return!1;if(Array.isArray(K)){if(K.length!==oe.length)return!1;var ye=O(K),me=O(oe);return ye.length===me.length&&U(K,oe,le,se,F,ye)}if(ve==="[object Object]"&&(!_(K)&&_(oe)||!g(K)&&g(oe)))return!1;if(c(K)){if(!c(oe)||Date.prototype.getTime.call(K)!==Date.prototype.getTime.call(oe))return!1}else if(p(K)){if(!p(oe)||(_e=K,xe=oe,!(n?_e.source===xe.source&&_e.flags===xe.flags:RegExp.prototype.toString.call(_e)===RegExp.prototype.toString.call(xe))))return!1}else if(m(K)||K instanceof Error){if(K.message!==oe.message||K.name!==oe.name)return!1}else{if(d(K)){if(le||!D(K)&&!P(K)){if(!function(ce,ae){return ce.byteLength===ae.byteLength&&N(new Uint8Array(ce.buffer,ce.byteOffset,ce.byteLength),new Uint8Array(ae.buffer,ae.byteOffset,ae.byteLength))===0}(K,oe))return!1}else if(!function(ce,ae){if(ce.byteLength!==ae.byteLength)return!1;for(var pe=0;pe<ce.byteLength;pe++)if(ce[pe]!==ae[pe])return!1;return!0}(K,oe))return!1;var Me=O(K),Ae=O(oe);return Me.length===Ae.length&&U(K,oe,le,se,V,Me)}if(g(K))return!(!g(oe)||K.size!==oe.size)&&U(K,oe,le,se,j);if(_(K))return!(!_(oe)||K.size!==oe.size)&&U(K,oe,le,se,Z);if(l(K)){if(be=oe,(de=K).byteLength!==be.byteLength||N(new Uint8Array(de),new Uint8Array(be))!==0)return!1}else if(b(K)&&!function(ce,ae){return y(ce)?y(ae)&&f(Number.prototype.valueOf.call(ce),Number.prototype.valueOf.call(ae)):M(ce)?M(ae)&&String.prototype.valueOf.call(ce)===String.prototype.valueOf.call(ae):h(ce)?h(ae)&&Boolean.prototype.valueOf.call(ce)===Boolean.prototype.valueOf.call(ae):E(ce)?E(ae)&&BigInt.prototype.valueOf.call(ce)===BigInt.prototype.valueOf.call(ae):k(ae)&&Symbol.prototype.valueOf.call(ce)===Symbol.prototype.valueOf.call(ae)}(K,oe))return!1}return U(K,oe,le,se,V)}function H(K,oe){return oe.filter(function(le){return i(K,le)})}function U(K,oe,le,se,de,be){if(arguments.length===5){be=Object.keys(K);var _e=Object.keys(oe);if(be.length!==_e.length)return!1}for(var xe=0;xe<be.length;xe++)if(!r(oe,be[xe]))return!1;if(le&&arguments.length===5){var ve=s(K);if(ve.length!==0){var ye=0;for(xe=0;xe<ve.length;xe++){var me=ve[xe];if(i(K,me)){if(!i(oe,me))return!1;be.push(me),ye++}else if(i(oe,me))return!1}var Me=s(oe);if(ve.length!==Me.length&&H(oe,Me).length!==ye)return!1}else{var Ae=s(oe);if(Ae.length!==0&&H(oe,Ae).length!==0)return!1}}if(be.length===0&&(de===V||de===F&&K.length===0||K.size===0))return!0;if(se===void 0)se={val1:new Map,val2:new Map,position:0};else{var ce=se.val1.get(K);if(ce!==void 0){var ae=se.val2.get(oe);if(ae!==void 0)return ce===ae}se.position++}se.val1.set(K,se.position),se.val2.set(oe,se.position);var pe=function(De,ke,Ee,Ie,Re,Ne){var ge=0;if(Ne===j){if(!function(Pe,Ue,Ge,Xe){for(var st=null,at=T(Pe),vt=0;vt<at.length;vt++){var xt=at[vt];if(w(xt)==="object"&&xt!==null)st===null&&(st=new Set),st.add(xt);else if(!Ue.has(xt)){if(Ge||!J(Pe,Ue,xt))return!1;st===null&&(st=new Set),st.add(xt)}}if(st!==null){for(var gt=T(Ue),rt=0;rt<gt.length;rt++){var tt=gt[rt];if(w(tt)==="object"&&tt!==null){if(!re(st,tt,Ge,Xe))return!1}else if(!Ge&&!Pe.has(tt)&&!re(st,tt,Ge,Xe))return!1}return st.size===0}return!0}(De,ke,Ee,Re))return!1}else if(Ne===Z){if(!function(Pe,Ue,Ge,Xe){for(var st=null,at=x(Pe),vt=0;vt<at.length;vt++){var xt=v(at[vt],2),gt=xt[0],rt=xt[1];if(w(gt)==="object"&&gt!==null)st===null&&(st=new Set),st.add(gt);else{var tt=Ue.get(gt);if(tt===void 0&&!Ue.has(gt)||!z(rt,tt,Ge,Xe)){if(Ge||!Q(Pe,Ue,gt,rt,Xe))return!1;st===null&&(st=new Set),st.add(gt)}}}if(st!==null){for(var Mt=x(Ue),Pt=0;Pt<Mt.length;Pt++){var Rt=v(Mt[Pt],2),St=(gt=Rt[0],Rt[1]);if(w(gt)==="object"&&gt!==null){if(!ne(st,Pe,gt,St,Ge,Xe))return!1}else if(!(Ge||Pe.has(gt)&&z(Pe.get(gt),St,!1,Xe)||ne(st,Pe,gt,St,!1,Xe)))return!1}return st.size===0}return!0}(De,ke,Ee,Re))return!1}else if(Ne===F)for(;ge<De.length;ge++){if(!r(De,ge)){if(r(ke,ge))return!1;for(var we=Object.keys(De);ge<we.length;ge++){var Ce=we[ge];if(!r(ke,Ce)||!z(De[Ce],ke[Ce],Ee,Re))return!1}return we.length===Object.keys(ke).length}if(!r(ke,ge)||!z(De[ge],ke[ge],Ee,Re))return!1}for(ge=0;ge<Ie.length;ge++){var ze=Ie[ge];if(!z(De[ze],ke[ze],Ee,Re))return!1}return!0}(K,oe,le,be,se,de);return se.val1.delete(K),se.val2.delete(oe),pe}function re(K,oe,le,se){for(var de=T(K),be=0;be<de.length;be++){var _e=de[be];if(z(oe,_e,le,se))return K.delete(_e),!0}return!1}function ee(K){switch(w(K)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":K=+K;case"number":if(t(K))return!1}return!0}function J(K,oe,le){var se=ee(le);return se??(oe.has(se)&&!K.has(se))}function Q(K,oe,le,se,de){var be=ee(le);if(be!=null)return be;var _e=oe.get(be);return!(_e===void 0&&!oe.has(be)||!z(se,_e,!1,de))&&!K.has(be)&&z(se,_e,!1,de)}function ne(K,oe,le,se,de,be){for(var _e=T(K),xe=0;xe<_e.length;xe++){var ve=_e[xe];if(z(le,ve,de,be)&&z(se,oe.get(ve),de,be))return K.delete(ve),!0}return!1}C.exports={isDeepEqual:function(K,oe){return z(K,oe,!1)},isDeepStrictEqual:function(K,oe){return z(K,oe,!0)}}},83160:function(C,A,e){"use strict";e.r(A),e.d(A,{decode:function(){return x},encode:function(){return T}});for(var v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=typeof Uint8Array>"u"?[]:new Uint8Array(256),n=0;n<64;n++)w[v.charCodeAt(n)]=n;var T=function(f){var s,t=new Uint8Array(f),o=t.length,r="";for(s=0;s<o;s+=3)r+=v[t[s]>>2],r+=v[(3&t[s])<<4|t[s+1]>>4],r+=v[(15&t[s+1])<<2|t[s+2]>>6],r+=v[63&t[s+2]];return o%3==2?r=r.substring(0,r.length-1)+"=":o%3==1&&(r=r.substring(0,r.length-2)+"=="),r},x=function(f){var s,t,o,r,i,a=.75*f.length,u=f.length,l=0;f[f.length-1]==="="&&(a--,f[f.length-2]==="="&&a--);var d=new ArrayBuffer(a),c=new Uint8Array(d);for(s=0;s<u;s+=4)t=w[f.charCodeAt(s)],o=w[f.charCodeAt(s+1)],r=w[f.charCodeAt(s+2)],i=w[f.charCodeAt(s+3)],c[l++]=t<<2|o>>4,c[l++]=(15&o)<<4|r>>2,c[l++]=(3&r)<<6|63&i;return d}},59968:function(C,A){"use strict";A.byteLength=function(s){var t=x(s),o=t[0],r=t[1];return 3*(o+r)/4-r},A.toByteArray=function(s){var t,o,r=x(s),i=r[0],a=r[1],u=new w(function(c,_,p){return 3*(_+p)/4-p}(0,i,a)),l=0,d=a>0?i-4:i;for(o=0;o<d;o+=4)t=v[s.charCodeAt(o)]<<18|v[s.charCodeAt(o+1)]<<12|v[s.charCodeAt(o+2)]<<6|v[s.charCodeAt(o+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;return a===2&&(t=v[s.charCodeAt(o)]<<2|v[s.charCodeAt(o+1)]>>4,u[l++]=255&t),a===1&&(t=v[s.charCodeAt(o)]<<10|v[s.charCodeAt(o+1)]<<4|v[s.charCodeAt(o+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t),u},A.fromByteArray=function(s){for(var t,o=s.length,r=o%3,i=[],a=16383,u=0,l=o-r;u<l;u+=a)i.push(f(s,u,u+a>l?l:u+a));return r===1?(t=s[o-1],i.push(e[t>>2]+e[t<<4&63]+"==")):r===2&&(t=(s[o-2]<<8)+s[o-1],i.push(e[t>>10]+e[t>>4&63]+e[t<<2&63]+"=")),i.join("")};for(var e=[],v=[],w=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=0;T<64;++T)e[T]=n[T],v[n.charCodeAt(T)]=T;function x(s){var t=s.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var o=s.indexOf("=");return o===-1&&(o=t),[o,o===t?0:4-o%4]}function f(s,t,o){for(var r,i,a=[],u=t;u<o;u+=3)r=(s[u]<<16&16711680)+(s[u+1]<<8&65280)+(255&s[u+2]),a.push(e[(i=r)>>18&63]+e[i>>12&63]+e[i>>6&63]+e[63&i]);return a.join("")}v[45]=62,v[95]=63},64928:function(C){"use strict";function A(x,f,s,t,o){for(var r=o+1;t<=o;){var i=t+o>>>1,a=x[i];(s!==void 0?s(a,f):a-f)>=0?(r=i,o=i-1):t=i+1}return r}function e(x,f,s,t,o){for(var r=o+1;t<=o;){var i=t+o>>>1,a=x[i];(s!==void 0?s(a,f):a-f)>0?(r=i,o=i-1):t=i+1}return r}function v(x,f,s,t,o){for(var r=t-1;t<=o;){var i=t+o>>>1,a=x[i];(s!==void 0?s(a,f):a-f)<0?(r=i,t=i+1):o=i-1}return r}function w(x,f,s,t,o){for(var r=t-1;t<=o;){var i=t+o>>>1,a=x[i];(s!==void 0?s(a,f):a-f)<=0?(r=i,t=i+1):o=i-1}return r}function n(x,f,s,t,o){for(;t<=o;){var r=t+o>>>1,i=x[r],a=s!==void 0?s(i,f):i-f;if(a===0)return r;a<=0?t=r+1:o=r-1}return-1}function T(x,f,s,t,o,r){return typeof s=="function"?r(x,f,s,t===void 0?0:0|t,o===void 0?x.length-1:0|o):r(x,f,void 0,s===void 0?0:0|s,t===void 0?x.length-1:0|t)}C.exports={ge:function(x,f,s,t,o){return T(x,f,s,t,o,A)},gt:function(x,f,s,t,o){return T(x,f,s,t,o,e)},lt:function(x,f,s,t,o){return T(x,f,s,t,o,v)},le:function(x,f,s,t,o){return T(x,f,s,t,o,w)},eq:function(x,f,s,t,o){return T(x,f,s,t,o,n)}}},308:function(C,A){"use strict";function e(w){var n=32;return(w&=-w)&&n--,65535&w&&(n-=16),16711935&w&&(n-=8),252645135&w&&(n-=4),858993459&w&&(n-=2),1431655765&w&&(n-=1),n}A.INT_BITS=32,A.INT_MAX=2147483647,A.INT_MIN=-2147483648,A.sign=function(w){return(w>0)-(w<0)},A.abs=function(w){var n=w>>31;return(w^n)-n},A.min=function(w,n){return n^(w^n)&-(w<n)},A.max=function(w,n){return w^(w^n)&-(w<n)},A.isPow2=function(w){return!(w&w-1||!w)},A.log2=function(w){var n,T;return n=(w>65535)<<4,n|=T=((w>>>=n)>255)<<3,n|=T=((w>>>=T)>15)<<2,(n|=T=((w>>>=T)>3)<<1)|(w>>>=T)>>1},A.log10=function(w){return w>=1e9?9:w>=1e8?8:w>=1e7?7:w>=1e6?6:w>=1e5?5:w>=1e4?4:w>=1e3?3:w>=100?2:w>=10?1:0},A.popCount=function(w){return 16843009*((w=(858993459&(w-=w>>>1&1431655765))+(w>>>2&858993459))+(w>>>4)&252645135)>>>24},A.countTrailingZeros=e,A.nextPow2=function(w){return w+=w===0,--w,w|=w>>>1,w|=w>>>2,w|=w>>>4,w|=w>>>8,1+(w|=w>>>16)},A.prevPow2=function(w){return w|=w>>>1,w|=w>>>2,w|=w>>>4,w|=w>>>8,(w|=w>>>16)-(w>>>1)},A.parity=function(w){return w^=w>>>16,w^=w>>>8,w^=w>>>4,27030>>>(w&=15)&1};var v=new Array(256);(function(w){for(var n=0;n<256;++n){var T=n,x=n,f=7;for(T>>>=1;T;T>>>=1)x<<=1,x|=1&T,--f;w[n]=x<<f&255}})(v),A.reverse=function(w){return v[255&w]<<24|v[w>>>8&255]<<16|v[w>>>16&255]<<8|v[w>>>24&255]},A.interleave2=function(w,n){return(w=1431655765&((w=858993459&((w=252645135&((w=16711935&((w&=65535)|w<<8))|w<<4))|w<<2))|w<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))<<1},A.deinterleave2=function(w,n){return(w=65535&((w=16711935&((w=252645135&((w=858993459&((w=w>>>n&1431655765)|w>>>1))|w>>>2))|w>>>4))|w>>>16))<<16>>16},A.interleave3=function(w,n,T){return w=1227133513&((w=3272356035&((w=251719695&((w=4278190335&((w&=1023)|w<<16))|w<<8))|w<<4))|w<<2),(w|=(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<1)|(T=1227133513&((T=3272356035&((T=251719695&((T=4278190335&((T&=1023)|T<<16))|T<<8))|T<<4))|T<<2))<<2},A.deinterleave3=function(w,n){return(w=1023&((w=4278190335&((w=251719695&((w=3272356035&((w=w>>>n&1227133513)|w>>>2))|w>>>4))|w>>>8))|w>>>16))<<22>>22},A.nextCombination=function(w){var n=w|w-1;return n+1|(~n&-~n)-1>>>e(w)+1}},29620:function(C,A,e){"use strict";var v=e(32420);C.exports=function(x,f){f||(f={});var s,t,o,r,i,a,u,l,d,c,_,p=f.cutoff==null?.25:f.cutoff,g=f.radius==null?8:f.radius,m=f.channel||0;if(ArrayBuffer.isView(x)||Array.isArray(x)){if(!f.width||!f.height)throw Error("For raw data width and height should be provided by options");s=f.width,t=f.height,r=x,a=f.stride?f.stride:Math.floor(x.length/s/t)}else window.HTMLCanvasElement&&x instanceof window.HTMLCanvasElement?(u=(l=x).getContext("2d"),s=l.width,t=l.height,r=(d=u.getImageData(0,0,s,t)).data,a=4):window.CanvasRenderingContext2D&&x instanceof window.CanvasRenderingContext2D?(u=x,s=(l=x.canvas).width,t=l.height,r=(d=u.getImageData(0,0,s,t)).data,a=4):window.ImageData&&x instanceof window.ImageData&&(d=x,s=x.width,t=x.height,r=d.data,a=4);if(o=Math.max(s,t),window.Uint8ClampedArray&&r instanceof window.Uint8ClampedArray||window.Uint8Array&&r instanceof window.Uint8Array)for(i=r,r=Array(s*t),c=0,_=i.length;c<_;c++)r[c]=i[c*a+m]/255;else if(a!==1)throw Error("Raw data can have only 1 value per pixel");var b=Array(s*t),y=Array(s*t),M=Array(o),h=Array(o),E=Array(o+1),k=Array(o);for(c=0,_=s*t;c<_;c++){var D=r[c];b[c]=D===1?0:D===0?w:Math.pow(Math.max(0,.5-D),2),y[c]=D===1?w:D===0?0:Math.pow(Math.max(0,D-.5),2)}n(b,s,t,M,h,k,E),n(y,s,t,M,h,k,E);var P=window.Float32Array?new Float32Array(s*t):new Array(s*t);for(c=0,_=s*t;c<_;c++)P[c]=v(1-((b[c]-y[c])/g+p),0,1);return P};var w=1e20;function n(x,f,s,t,o,r,i){for(var a=0;a<f;a++){for(var u=0;u<s;u++)t[u]=x[u*f+a];for(T(t,o,r,i,s),u=0;u<s;u++)x[u*f+a]=o[u]}for(u=0;u<s;u++){for(a=0;a<f;a++)t[a]=x[u*f+a];for(T(t,o,r,i,f),a=0;a<f;a++)x[u*f+a]=Math.sqrt(o[a])}}function T(x,f,s,t,o){s[0]=0,t[0]=-w,t[1]=+w;for(var r=1,i=0;r<o;r++){for(var a=(x[r]+r*r-(x[s[i]]+s[i]*s[i]))/(2*r-2*s[i]);a<=t[i];)i--,a=(x[r]+r*r-(x[s[i]]+s[i]*s[i]))/(2*r-2*s[i]);s[++i]=r,t[i]=a,t[i+1]=+w}for(r=0,i=0;r<o;r++){for(;t[i+1]<r;)i++;f[r]=(r-s[i])*(r-s[i])+x[s[i]]}}},99676:function(C,A,e){"use strict";var v=e(53664),w=e(57916),n=w(v("String.prototype.indexOf"));C.exports=function(T,x){var f=v(T,!!x);return typeof f=="function"&&n(T,".prototype.")>-1?w(f):f}},57916:function(C,A,e){"use strict";var v=e(8844),w=e(53664),n=e(14500),T=w("%TypeError%"),x=w("%Function.prototype.apply%"),f=w("%Function.prototype.call%"),s=w("%Reflect.apply%",!0)||v.call(f,x),t=w("%Object.defineProperty%",!0),o=w("%Math.max%");if(t)try{t({},"a",{value:1})}catch{t=null}C.exports=function(i){if(typeof i!="function")throw new T("a function is required");var a=s(v,f,arguments);return n(a,1+o(0,i.length-(arguments.length-1)),!0)};var r=function(){return s(v,x,arguments)};t?t(C.exports,"apply",{value:r}):C.exports.apply=r},32420:function(C){C.exports=function(A,e,v){return e<v?A<e?e:A>v?v:A:A<v?v:A>e?e:A}},3808:function(C,A,e){"use strict";var v=e(32420);function w(n,T){T==null&&(T=!0);var x=n[0],f=n[1],s=n[2],t=n[3];return t==null&&(t=T?1:255),T&&(x*=255,f*=255,s*=255,t*=255),16777216*(x=255&v(x,0,255))+((f=255&v(f,0,255))<<16)+((s=255&v(s,0,255))<<8)+(255&v(t,0,255))}C.exports=w,C.exports.to=w,C.exports.from=function(n,T){var x=(n=+n)>>>24,f=(16711680&n)>>>16,s=(65280&n)>>>8,t=255&n;return T===!1?[x,f,s,t]:[x/255,f/255,s/255,t/255]}},17592:function(C){"use strict";C.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},72160:function(C,A,e){"use strict";var v=e(96824),w=e(32420),n=e(72512);C.exports=function(T,x){x!=="float"&&x||(x="array"),x==="uint"&&(x="uint8"),x==="uint_clamped"&&(x="uint8_clamped");var f=new(n(x))(4),s=x!=="uint8"&&x!=="uint8_clamped";return T.length&&typeof T!="string"||((T=v(T))[0]/=255,T[1]/=255,T[2]/=255),function(t){return t instanceof Uint8Array||t instanceof Uint8ClampedArray||!!(Array.isArray(t)&&(t[0]>1||t[0]===0)&&(t[1]>1||t[1]===0)&&(t[2]>1||t[2]===0)&&(!t[3]||t[3]>1))}(T)?(f[0]=T[0],f[1]=T[1],f[2]=T[2],f[3]=T[3]!=null?T[3]:255,s&&(f[0]/=255,f[1]/=255,f[2]/=255,f[3]/=255),f):(s?(f[0]=T[0],f[1]=T[1],f[2]=T[2],f[3]=T[3]!=null?T[3]:1):(f[0]=w(Math.floor(255*T[0]),0,255),f[1]=w(Math.floor(255*T[1]),0,255),f[2]=w(Math.floor(255*T[2]),0,255),f[3]=T[3]==null?255:w(Math.floor(255*T[3]),0,255)),f)}},96824:function(C,A,e){"use strict";var v=e(95532),w=e(53576),n=e(32420);C.exports=function(T){var x,f=v(T);return f.space?((x=Array(3))[0]=n(f.values[0],0,255),x[1]=n(f.values[1],0,255),x[2]=n(f.values[2],0,255),f.space[0]==="h"&&(x=w.rgb(x)),x.push(n(f.alpha,0,1)),x):[]}},95532:function(C,A,e){"use strict";var v=e(17592);C.exports=function(n){var T,x,f=[],s=1;if(typeof n=="string")if(n=n.toLowerCase(),v[n])f=v[n].slice(),x="rgb";else if(n==="transparent")s=0,x="rgb",f=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(n)){var t=n.slice(1);s=1,(i=t.length)<=4?(f=[parseInt(t[0]+t[0],16),parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16)],i===4&&(s=parseInt(t[3]+t[3],16)/255)):(f=[parseInt(t[0]+t[1],16),parseInt(t[2]+t[3],16),parseInt(t[4]+t[5],16)],i===8&&(s=parseInt(t[6]+t[7],16)/255)),f[0]||(f[0]=0),f[1]||(f[1]=0),f[2]||(f[2]=0),x="rgb"}else if(T=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(n)){var o=T[1],r=o==="rgb";x=t=o.replace(/a$/,"");var i=t==="cmyk"?4:t==="gray"?1:3;f=T[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(a,u){if(/%$/.test(a))return u===i?parseFloat(a)/100:t==="rgb"?255*parseFloat(a)/100:parseFloat(a);if(t[u]==="h"){if(/deg$/.test(a))return parseFloat(a);if(w[a]!==void 0)return w[a]}return parseFloat(a)}),o===t&&f.push(1),s=r||f[i]===void 0?1:f[i],f=f.slice(0,i)}else n.length>10&&/[0-9](?:\s|\/)/.test(n)&&(f=n.match(/([0-9]+)/g).map(function(a){return parseFloat(a)}),x=n.match(/([a-z])/gi).join("").toLowerCase());else isNaN(n)?Array.isArray(n)||n.length?(f=[n[0],n[1],n[2]],x="rgb",s=n.length===4?n[3]:1):n instanceof Object&&(n.r!=null||n.red!=null||n.R!=null?(x="rgb",f=[n.r||n.red||n.R||0,n.g||n.green||n.G||0,n.b||n.blue||n.B||0]):(x="hsl",f=[n.h||n.hue||n.H||0,n.s||n.saturation||n.S||0,n.l||n.lightness||n.L||n.b||n.brightness]),s=n.a||n.alpha||n.opacity||1,n.opacity!=null&&(s/=100)):(x="rgb",f=[n>>>16,(65280&n)>>>8,255&n]);return{space:x,values:f,alpha:s}};var w={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}},53576:function(C,A,e){"use strict";var v=e(19336);C.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(w){var n,T,x,f,s,t=w[0]/360,o=w[1]/100,r=w[2]/100;if(o===0)return[s=255*r,s,s];n=2*r-(T=r<.5?r*(1+o):r+o-r*o),f=[0,0,0];for(var i=0;i<3;i++)(x=t+.3333333333333333*-(i-1))<0?x++:x>1&&x--,s=6*x<1?n+6*(T-n)*x:2*x<1?T:3*x<2?n+(T-n)*(.6666666666666666-x)*6:n,f[i]=255*s;return f}},v.hsl=function(w){var n,T,x=w[0]/255,f=w[1]/255,s=w[2]/255,t=Math.min(x,f,s),o=Math.max(x,f,s),r=o-t;return o===t?n=0:x===o?n=(f-s)/r:f===o?n=2+(s-x)/r:s===o&&(n=4+(x-f)/r),(n=Math.min(60*n,360))<0&&(n+=360),T=(t+o)/2,[n,100*(o===t?0:T<=.5?r/(o+t):r/(2-o-t)),100*T]}},19336:function(C){"use strict";C.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},36116:function(C){C.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xE7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xE9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xE9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xE3)o.?tom(e|\xE9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},42771:function(C,A,e){"use strict";C.exports={parse:e(46416),stringify:e(49395)}},8744:function(C,A,e){"use strict";var v=e(30584);C.exports={isSize:function(w){return/^[\d\.]/.test(w)||w.indexOf("/")!==-1||v.indexOf(w)!==-1}}},46416:function(C,A,e){"use strict";var v=e(92384),w=e(68194),n=e(3748),T=e(2904),x=e(47916),f=e(7294),s=e(39956),t=e(8744).isSize;C.exports=r;var o=r.cache={};function r(a){if(typeof a!="string")throw new Error("Font argument must be a string.");if(o[a])return o[a];if(a==="")throw new Error("Cannot parse an empty string.");if(n.indexOf(a)!==-1)return o[a]={system:a};for(var u,l={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},d=s(a,/\s+/);u=d.shift();){if(w.indexOf(u)!==-1)return["style","variant","weight","stretch"].forEach(function(_){l[_]=u}),o[a]=l;if(x.indexOf(u)===-1)if(u!=="normal"&&u!=="small-caps")if(f.indexOf(u)===-1){if(T.indexOf(u)===-1){if(t(u)){var c=s(u,"/");if(l.size=c[0],c[1]!=null?l.lineHeight=i(c[1]):d[0]==="/"&&(d.shift(),l.lineHeight=i(d.shift())),!d.length)throw new Error("Missing required font-family.");return l.family=s(d.join(" "),/\s*,\s*/).map(v),o[a]=l}throw new Error("Unknown or unsupported font token: "+u)}l.weight=u}else l.stretch=u;else l.variant=u;else l.style=u}throw new Error("Missing required font-size.")}function i(a){var u=parseFloat(a);return u.toString()===a?u:a}},49395:function(C,A,e){"use strict";var v=e(55616),w=e(8744).isSize,n=a(e(68194)),T=a(e(3748)),x=a(e(2904)),f=a(e(47916)),s=a(e(7294)),t={normal:1,"small-caps":1},o={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},r="serif";function i(u,l){if(u&&!l[u]&&!n[u])throw Error("Unknown keyword `"+u+"`");return u}function a(u){for(var l={},d=0;d<u.length;d++)l[u[d]]=1;return l}C.exports=function(u){if((u=v(u,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return u.system&&i(u.system,T),u.system;if(i(u.style,f),i(u.variant,t),i(u.weight,x),i(u.stretch,s),u.size==null&&(u.size="1rem"),typeof u.size=="number"&&(u.size+="px"),!w)throw Error("Bad size value `"+u.size+"`");u.family||(u.family=r),Array.isArray(u.family)&&(u.family.length||(u.family=[r]),u.family=u.family.map(function(d){return o[d]?d:'"'+d+'"'}).join(", "));var l=[];return l.push(u.style),u.variant!==u.style&&l.push(u.variant),u.weight!==u.variant&&u.weight!==u.style&&l.push(u.weight),u.stretch!==u.weight&&u.stretch!==u.variant&&u.stretch!==u.style&&l.push(u.stretch),l.push(u.size+(u.lineHeight==null||u.lineHeight==="normal"||u.lineHeight+""=="1"?"":"/"+u.lineHeight)),l.push(u.family),l.filter(Boolean).join(" ")}},27940:function(C,A,e){"use strict";var v,w=e(81680),n=e(18496),T=e(87396),x=e(95920),f=e(50868),s=e(84323),t=Function.prototype.bind,o=Object.defineProperty,r=Object.prototype.hasOwnProperty;v=function(i,a,u){var l,d=n(a)&&T(a.value);return delete(l=x(a)).writable,delete l.value,l.get=function(){return!u.overwriteDefinition&&r.call(this,i)?d:(a.value=t.call(d,u.resolveContext?u.resolveContext(this):this),o(this,i,a),this[i])},l},C.exports=function(i){var a=f(arguments[1]);return w(a.resolveContext)&&T(a.resolveContext),s(i,function(u,l){return v(l,u,a)})}},21092:function(C,A,e){"use strict";var v=e(81680),w=e(85488),n=e(38452),T=e(50868),x=e(71056),f=C.exports=function(s,t){var o,r,i,a,u;return arguments.length<2||typeof s!="string"?(a=t,t=s,s=null):a=arguments[2],v(s)?(o=x.call(s,"c"),r=x.call(s,"e"),i=x.call(s,"w")):(o=i=!0,r=!1),u={value:t,configurable:o,enumerable:r,writable:i},a?n(T(a),u):u};f.gs=function(s,t,o){var r,i,a,u;return typeof s!="string"?(a=o,o=t,t=s,s=null):a=arguments[3],v(t)?w(t)?v(o)?w(o)||(a=o,o=void 0):o=void 0:(a=t,t=o=void 0):t=void 0,v(s)?(r=x.call(s,"c"),i=x.call(s,"e")):(r=!0,i=!1),u={get:t,set:o,configurable:r,enumerable:i},a?n(T(a),u):u}},84706:function(C,A,e){"use strict";function v(a,u){return a<u?-1:a>u?1:a>=u?0:NaN}e.d(A,{XE:function(){return v},kv:function(){return x},mo:function(){return s},Uf:function(){return t},SY:function(){return o},ik:function(){return r},oh:function(){return i}}),(w=v).length===1&&(n=w,w=function(a,u){return v(n(a),u)});var w,n,T=Array.prototype;function x(a,u){var l,d,c=a.length,_=-1;if(u==null){for(;++_<c;)if((l=a[_])!=null&&l>=l)for(d=l;++_<c;)(l=a[_])!=null&&l>d&&(d=l)}else for(;++_<c;)if((l=u(a[_],_,a))!=null&&l>=l)for(d=l;++_<c;)(l=u(a[_],_,a))!=null&&l>d&&(d=l);return d}function f(a){return a===null?NaN:+a}function s(a,u){var l,d=a.length,c=d,_=-1,p=0;if(u==null)for(;++_<d;)isNaN(l=f(a[_]))?--c:p+=l;else for(;++_<d;)isNaN(l=f(u(a[_],_,a)))?--c:p+=l;if(c)return p/c}function t(a){for(var u,l,d,c=a.length,_=-1,p=0;++_<c;)p+=a[_].length;for(l=new Array(p);--c>=0;)for(u=(d=a[c]).length;--u>=0;)l[--p]=d[u];return l}function o(a,u){var l,d,c=a.length,_=-1;if(u==null){for(;++_<c;)if((l=a[_])!=null&&l>=l)for(d=l;++_<c;)(l=a[_])!=null&&d>l&&(d=l)}else for(;++_<c;)if((l=u(a[_],_,a))!=null&&l>=l)for(d=l;++_<c;)(l=u(a[_],_,a))!=null&&d>l&&(d=l);return d}function r(a,u,l){a=+a,u=+u,l=(c=arguments.length)<2?(u=a,a=0,1):c<3?1:+l;for(var d=-1,c=0|Math.max(0,Math.ceil((u-a)/l)),_=new Array(c);++d<c;)_[d]=a+d*l;return _}function i(a,u){var l,d=a.length,c=-1,_=0;if(u==null)for(;++c<d;)(l=+a[c])&&(_+=l);else for(;++c<d;)(l=+u(a[c],c,a))&&(_+=l);return _}T.slice,T.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2)},34712:function(C,A,e){"use strict";e.d(A,{kH:function(){return T},UJ:function(){return x}});var v="$";function w(){}function n(a,u){var l=new w;if(a instanceof w)a.each(function(g,m){l.set(m,g)});else if(Array.isArray(a)){var d,c=-1,_=a.length;if(u==null)for(;++c<_;)l.set(c,a[c]);else for(;++c<_;)l.set(u(d=a[c],c,a),d)}else if(a)for(var p in a)l.set(p,a[p]);return l}w.prototype=n.prototype={constructor:w,has:function(a){return v+a in this},get:function(a){return this[v+a]},set:function(a,u){return this[v+a]=u,this},remove:function(a){var u=v+a;return u in this&&delete this[u]},clear:function(){for(var a in this)a[0]===v&&delete this[a]},keys:function(){var a=[];for(var u in this)u[0]===v&&a.push(u.slice(1));return a},values:function(){var a=[];for(var u in this)u[0]===v&&a.push(this[u]);return a},entries:function(){var a=[];for(var u in this)u[0]===v&&a.push({key:u.slice(1),value:this[u]});return a},size:function(){var a=0;for(var u in this)u[0]===v&&++a;return a},empty:function(){for(var a in this)if(a[0]===v)return!1;return!0},each:function(a){for(var u in this)u[0]===v&&a(this[u],u.slice(1),this)}};var T=n;function x(){var a,u,l,d=[],c=[];function _(g,m,b,y){if(m>=d.length)return a!=null&&g.sort(a),u!=null?u(g):g;for(var M,h,E,k=-1,D=g.length,P=d[m++],L=T(),O=b();++k<D;)(E=L.get(M=P(h=g[k])+""))?E.push(h):L.set(M,[h]);return L.each(function(N,V){y(O,V,_(N,m,b,y))}),O}function p(g,m){if(++m>d.length)return g;var b,y=c[m-1];return u!=null&&m>=d.length?b=g.entries():(b=[],g.each(function(M,h){b.push({key:h,values:p(M,m)})})),y!=null?b.sort(function(M,h){return y(M.key,h.key)}):b}return l={object:function(g){return _(g,0,f,s)},map:function(g){return _(g,0,t,o)},entries:function(g){return p(_(g,0,t,o),0)},key:function(g){return d.push(g),l},sortKeys:function(g){return c[d.length-1]=g,l},sortValues:function(g){return a=g,l},rollup:function(g){return u=g,l}}}function f(){return{}}function s(a,u,l){a[u]=l}function t(){return T()}function o(a,u,l){a.set(u,l)}function r(){}var i=T.prototype;r.prototype=(function(a,u){var l=new r;if(a instanceof r)a.each(function(_){l.add(_)});else if(a){var d=-1,c=a.length;if(u==null)for(;++d<c;)l.add(a[d]);else for(;++d<c;)l.add(u(a[d],d,a))}return l}).prototype={constructor:r,has:i.has,add:function(a){return this[v+(a+="")]=a,this},remove:i.remove,clear:i.clear,values:i.keys,size:i.size,empty:i.empty,each:i.each}},49812:function(C,A,e){"use strict";function v(ve,ye){var me;function Me(){var Ae,ce,ae=me.length,pe=0,De=0;for(Ae=0;Ae<ae;++Ae)pe+=(ce=me[Ae]).x,De+=ce.y;for(pe=pe/ae-ve,De=De/ae-ye,Ae=0;Ae<ae;++Ae)(ce=me[Ae]).x-=pe,ce.y-=De}return ve==null&&(ve=0),ye==null&&(ye=0),Me.initialize=function(Ae){me=Ae},Me.x=function(Ae){return arguments.length?(ve=+Ae,Me):ve},Me.y=function(Ae){return arguments.length?(ye=+Ae,Me):ye},Me}function w(ve){return function(){return ve}}function n(){return 1e-6*(Math.random()-.5)}function T(ve,ye,me,Me){if(isNaN(ye)||isNaN(me))return ve;var Ae,ce,ae,pe,De,ke,Ee,Ie,Re,Ne=ve._root,ge={data:Me},we=ve._x0,Ce=ve._y0,ze=ve._x1,Pe=ve._y1;if(!Ne)return ve._root=ge,ve;for(;Ne.length;)if((ke=ye>=(ce=(we+ze)/2))?we=ce:ze=ce,(Ee=me>=(ae=(Ce+Pe)/2))?Ce=ae:Pe=ae,Ae=Ne,!(Ne=Ne[Ie=Ee<<1|ke]))return Ae[Ie]=ge,ve;if(pe=+ve._x.call(null,Ne.data),De=+ve._y.call(null,Ne.data),ye===pe&&me===De)return ge.next=Ne,Ae?Ae[Ie]=ge:ve._root=ge,ve;do Ae=Ae?Ae[Ie]=new Array(4):ve._root=new Array(4),(ke=ye>=(ce=(we+ze)/2))?we=ce:ze=ce,(Ee=me>=(ae=(Ce+Pe)/2))?Ce=ae:Pe=ae;while((Ie=Ee<<1|ke)==(Re=(De>=ae)<<1|pe>=ce));return Ae[Re]=Ne,Ae[Ie]=ge,ve}function x(ve,ye,me,Me,Ae){this.node=ve,this.x0=ye,this.y0=me,this.x1=Me,this.y1=Ae}function f(ve){return ve[0]}function s(ve){return ve[1]}function t(ve,ye,me){var Me=new o(ye??f,me??s,NaN,NaN,NaN,NaN);return ve==null?Me:Me.addAll(ve)}function o(ve,ye,me,Me,Ae,ce){this._x=ve,this._y=ye,this._x0=me,this._y0=Me,this._x1=Ae,this._y1=ce,this._root=void 0}function r(ve){for(var ye={data:ve.data},me=ye;ve=ve.next;)me=me.next={data:ve.data};return ye}e.r(A),e.d(A,{forceCenter:function(){return v},forceCollide:function(){return l},forceLink:function(){return p},forceManyBody:function(){return de},forceRadial:function(){return be},forceSimulation:function(){return se},forceX:function(){return _e},forceY:function(){return xe}});var i=t.prototype=o.prototype;function a(ve){return ve.x+ve.vx}function u(ve){return ve.y+ve.vy}function l(ve){var ye,me,Me=1,Ae=1;function ce(){for(var De,ke,Ee,Ie,Re,Ne,ge,we=ye.length,Ce=0;Ce<Ae;++Ce)for(ke=t(ye,a,u).visitAfter(ae),De=0;De<we;++De)Ee=ye[De],Ne=me[Ee.index],ge=Ne*Ne,Ie=Ee.x+Ee.vx,Re=Ee.y+Ee.vy,ke.visit(ze);function ze(Pe,Ue,Ge,Xe,st){var at=Pe.data,vt=Pe.r,xt=Ne+vt;if(!at)return Ue>Ie+xt||Xe<Ie-xt||Ge>Re+xt||st<Re-xt;if(at.index>Ee.index){var gt=Ie-at.x-at.vx,rt=Re-at.y-at.vy,tt=gt*gt+rt*rt;tt<xt*xt&&(gt===0&&(tt+=(gt=n())*gt),rt===0&&(tt+=(rt=n())*rt),tt=(xt-(tt=Math.sqrt(tt)))/tt*Me,Ee.vx+=(gt*=tt)*(xt=(vt*=vt)/(ge+vt)),Ee.vy+=(rt*=tt)*xt,at.vx-=gt*(xt=1-xt),at.vy-=rt*xt)}}}function ae(De){if(De.data)return De.r=me[De.data.index];for(var ke=De.r=0;ke<4;++ke)De[ke]&&De[ke].r>De.r&&(De.r=De[ke].r)}function pe(){if(ye){var De,ke,Ee=ye.length;for(me=new Array(Ee),De=0;De<Ee;++De)ke=ye[De],me[ke.index]=+ve(ke,De,ye)}}return typeof ve!="function"&&(ve=w(ve==null?1:+ve)),ce.initialize=function(De){ye=De,pe()},ce.iterations=function(De){return arguments.length?(Ae=+De,ce):Ae},ce.strength=function(De){return arguments.length?(Me=+De,ce):Me},ce.radius=function(De){return arguments.length?(ve=typeof De=="function"?De:w(+De),pe(),ce):ve},ce}i.copy=function(){var ve,ye,me=new o(this._x,this._y,this._x0,this._y0,this._x1,this._y1),Me=this._root;if(!Me)return me;if(!Me.length)return me._root=r(Me),me;for(ve=[{source:Me,target:me._root=new Array(4)}];Me=ve.pop();)for(var Ae=0;Ae<4;++Ae)(ye=Me.source[Ae])&&(ye.length?ve.push({source:ye,target:Me.target[Ae]=new Array(4)}):Me.target[Ae]=r(ye));return me},i.add=function(ve){var ye=+this._x.call(null,ve),me=+this._y.call(null,ve);return T(this.cover(ye,me),ye,me,ve)},i.addAll=function(ve){var ye,me,Me,Ae,ce=ve.length,ae=new Array(ce),pe=new Array(ce),De=1/0,ke=1/0,Ee=-1/0,Ie=-1/0;for(me=0;me<ce;++me)isNaN(Me=+this._x.call(null,ye=ve[me]))||isNaN(Ae=+this._y.call(null,ye))||(ae[me]=Me,pe[me]=Ae,Me<De&&(De=Me),Me>Ee&&(Ee=Me),Ae<ke&&(ke=Ae),Ae>Ie&&(Ie=Ae));if(De>Ee||ke>Ie)return this;for(this.cover(De,ke).cover(Ee,Ie),me=0;me<ce;++me)T(this,ae[me],pe[me],ve[me]);return this},i.cover=function(ve,ye){if(isNaN(ve=+ve)||isNaN(ye=+ye))return this;var me=this._x0,Me=this._y0,Ae=this._x1,ce=this._y1;if(isNaN(me))Ae=(me=Math.floor(ve))+1,ce=(Me=Math.floor(ye))+1;else{for(var ae,pe,De=Ae-me,ke=this._root;me>ve||ve>=Ae||Me>ye||ye>=ce;)switch(pe=(ye<Me)<<1|ve<me,(ae=new Array(4))[pe]=ke,ke=ae,De*=2,pe){case 0:Ae=me+De,ce=Me+De;break;case 1:me=Ae-De,ce=Me+De;break;case 2:Ae=me+De,Me=ce-De;break;case 3:me=Ae-De,Me=ce-De}this._root&&this._root.length&&(this._root=ke)}return this._x0=me,this._y0=Me,this._x1=Ae,this._y1=ce,this},i.data=function(){var ve=[];return this.visit(function(ye){if(!ye.length)do ve.push(ye.data);while(ye=ye.next)}),ve},i.extent=function(ve){return arguments.length?this.cover(+ve[0][0],+ve[0][1]).cover(+ve[1][0],+ve[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},i.find=function(ve,ye,me){var Me,Ae,ce,ae,pe,De,ke,Ee=this._x0,Ie=this._y0,Re=this._x1,Ne=this._y1,ge=[],we=this._root;for(we&&ge.push(new x(we,Ee,Ie,Re,Ne)),me==null?me=1/0:(Ee=ve-me,Ie=ye-me,Re=ve+me,Ne=ye+me,me*=me);De=ge.pop();)if(!(!(we=De.node)||(Ae=De.x0)>Re||(ce=De.y0)>Ne||(ae=De.x1)<Ee||(pe=De.y1)<Ie))if(we.length){var Ce=(Ae+ae)/2,ze=(ce+pe)/2;ge.push(new x(we[3],Ce,ze,ae,pe),new x(we[2],Ae,ze,Ce,pe),new x(we[1],Ce,ce,ae,ze),new x(we[0],Ae,ce,Ce,ze)),(ke=(ye>=ze)<<1|ve>=Ce)&&(De=ge[ge.length-1],ge[ge.length-1]=ge[ge.length-1-ke],ge[ge.length-1-ke]=De)}else{var Pe=ve-+this._x.call(null,we.data),Ue=ye-+this._y.call(null,we.data),Ge=Pe*Pe+Ue*Ue;if(Ge<me){var Xe=Math.sqrt(me=Ge);Ee=ve-Xe,Ie=ye-Xe,Re=ve+Xe,Ne=ye+Xe,Me=we.data}}return Me},i.remove=function(ve){if(isNaN(ce=+this._x.call(null,ve))||isNaN(ae=+this._y.call(null,ve)))return this;var ye,me,Me,Ae,ce,ae,pe,De,ke,Ee,Ie,Re,Ne=this._root,ge=this._x0,we=this._y0,Ce=this._x1,ze=this._y1;if(!Ne)return this;if(Ne.length)for(;;){if((ke=ce>=(pe=(ge+Ce)/2))?ge=pe:Ce=pe,(Ee=ae>=(De=(we+ze)/2))?we=De:ze=De,ye=Ne,!(Ne=Ne[Ie=Ee<<1|ke]))return this;if(!Ne.length)break;(ye[Ie+1&3]||ye[Ie+2&3]||ye[Ie+3&3])&&(me=ye,Re=Ie)}for(;Ne.data!==ve;)if(Me=Ne,!(Ne=Ne.next))return this;return(Ae=Ne.next)&&delete Ne.next,Me?(Ae?Me.next=Ae:delete Me.next,this):ye?(Ae?ye[Ie]=Ae:delete ye[Ie],(Ne=ye[0]||ye[1]||ye[2]||ye[3])&&Ne===(ye[3]||ye[2]||ye[1]||ye[0])&&!Ne.length&&(me?me[Re]=Ne:this._root=Ne),this):(this._root=Ae,this)},i.removeAll=function(ve){for(var ye=0,me=ve.length;ye<me;++ye)this.remove(ve[ye]);return this},i.root=function(){return this._root},i.size=function(){var ve=0;return this.visit(function(ye){if(!ye.length)do++ve;while(ye=ye.next)}),ve},i.visit=function(ve){var ye,me,Me,Ae,ce,ae,pe=[],De=this._root;for(De&&pe.push(new x(De,this._x0,this._y0,this._x1,this._y1));ye=pe.pop();)if(!ve(De=ye.node,Me=ye.x0,Ae=ye.y0,ce=ye.x1,ae=ye.y1)&&De.length){var ke=(Me+ce)/2,Ee=(Ae+ae)/2;(me=De[3])&&pe.push(new x(me,ke,Ee,ce,ae)),(me=De[2])&&pe.push(new x(me,Me,Ee,ke,ae)),(me=De[1])&&pe.push(new x(me,ke,Ae,ce,Ee)),(me=De[0])&&pe.push(new x(me,Me,Ae,ke,Ee))}return this},i.visitAfter=function(ve){var ye,me=[],Me=[];for(this._root&&me.push(new x(this._root,this._x0,this._y0,this._x1,this._y1));ye=me.pop();){var Ae=ye.node;if(Ae.length){var ce,ae=ye.x0,pe=ye.y0,De=ye.x1,ke=ye.y1,Ee=(ae+De)/2,Ie=(pe+ke)/2;(ce=Ae[0])&&me.push(new x(ce,ae,pe,Ee,Ie)),(ce=Ae[1])&&me.push(new x(ce,Ee,pe,De,Ie)),(ce=Ae[2])&&me.push(new x(ce,ae,Ie,Ee,ke)),(ce=Ae[3])&&me.push(new x(ce,Ee,Ie,De,ke))}Me.push(ye)}for(;ye=Me.pop();)ve(ye.node,ye.x0,ye.y0,ye.x1,ye.y1);return this},i.x=function(ve){return arguments.length?(this._x=ve,this):this._x},i.y=function(ve){return arguments.length?(this._y=ve,this):this._y};var d=e(34712);function c(ve){return ve.index}function _(ve,ye){var me=ve.get(ye);if(!me)throw new Error("missing: "+ye);return me}function p(ve){var ye,me,Me,Ae,ce,ae=c,pe=function(ge){return 1/Math.min(Ae[ge.source.index],Ae[ge.target.index])},De=w(30),ke=1;function Ee(ge){for(var we=0,Ce=ve.length;we<ke;++we)for(var ze,Pe,Ue,Ge,Xe,st,at,vt=0;vt<Ce;++vt)Pe=(ze=ve[vt]).source,Ge=(Ue=ze.target).x+Ue.vx-Pe.x-Pe.vx||n(),Xe=Ue.y+Ue.vy-Pe.y-Pe.vy||n(),Ge*=st=((st=Math.sqrt(Ge*Ge+Xe*Xe))-me[vt])/st*ge*ye[vt],Xe*=st,Ue.vx-=Ge*(at=ce[vt]),Ue.vy-=Xe*at,Pe.vx+=Ge*(at=1-at),Pe.vy+=Xe*at}function Ie(){if(Me){var ge,we,Ce=Me.length,ze=ve.length,Pe=(0,d.kH)(Me,ae);for(ge=0,Ae=new Array(Ce);ge<ze;++ge)(we=ve[ge]).index=ge,typeof we.source!="object"&&(we.source=_(Pe,we.source)),typeof we.target!="object"&&(we.target=_(Pe,we.target)),Ae[we.source.index]=(Ae[we.source.index]||0)+1,Ae[we.target.index]=(Ae[we.target.index]||0)+1;for(ge=0,ce=new Array(ze);ge<ze;++ge)we=ve[ge],ce[ge]=Ae[we.source.index]/(Ae[we.source.index]+Ae[we.target.index]);ye=new Array(ze),Re(),me=new Array(ze),Ne()}}function Re(){if(Me)for(var ge=0,we=ve.length;ge<we;++ge)ye[ge]=+pe(ve[ge],ge,ve)}function Ne(){if(Me)for(var ge=0,we=ve.length;ge<we;++ge)me[ge]=+De(ve[ge],ge,ve)}return ve==null&&(ve=[]),Ee.initialize=function(ge){Me=ge,Ie()},Ee.links=function(ge){return arguments.length?(ve=ge,Ie(),Ee):ve},Ee.id=function(ge){return arguments.length?(ae=ge,Ee):ae},Ee.iterations=function(ge){return arguments.length?(ke=+ge,Ee):ke},Ee.strength=function(ge){return arguments.length?(pe=typeof ge=="function"?ge:w(+ge),Re(),Ee):pe},Ee.distance=function(ge){return arguments.length?(De=typeof ge=="function"?ge:w(+ge),Ne(),Ee):De},Ee}var g={value:function(){}};function m(){for(var ve,ye=0,me=arguments.length,Me={};ye<me;++ye){if(!(ve=arguments[ye]+"")||ve in Me||/[\s.]/.test(ve))throw new Error("illegal type: "+ve);Me[ve]=[]}return new b(Me)}function b(ve){this._=ve}function y(ve,ye){for(var me,Me=0,Ae=ve.length;Me<Ae;++Me)if((me=ve[Me]).name===ye)return me.value}function M(ve,ye,me){for(var Me=0,Ae=ve.length;Me<Ae;++Me)if(ve[Me].name===ye){ve[Me]=g,ve=ve.slice(0,Me).concat(ve.slice(Me+1));break}return me!=null&&ve.push({name:ye,value:me}),ve}b.prototype=m.prototype={constructor:b,on:function(ve,ye){var me,Me,Ae=this._,ce=(Me=Ae,(ve+"").trim().split(/^|\s+/).map(function(De){var ke="",Ee=De.indexOf(".");if(Ee>=0&&(ke=De.slice(Ee+1),De=De.slice(0,Ee)),De&&!Me.hasOwnProperty(De))throw new Error("unknown type: "+De);return{type:De,name:ke}})),ae=-1,pe=ce.length;if(!(arguments.length<2)){if(ye!=null&&typeof ye!="function")throw new Error("invalid callback: "+ye);for(;++ae<pe;)if(me=(ve=ce[ae]).type)Ae[me]=M(Ae[me],ve.name,ye);else if(ye==null)for(me in Ae)Ae[me]=M(Ae[me],ve.name,null);return this}for(;++ae<pe;)if((me=(ve=ce[ae]).type)&&(me=y(Ae[me],ve.name)))return me},copy:function(){var ve={},ye=this._;for(var me in ye)ve[me]=ye[me].slice();return new b(ve)},call:function(ve,ye){if((me=arguments.length-2)>0)for(var me,Me,Ae=new Array(me),ce=0;ce<me;++ce)Ae[ce]=arguments[ce+2];if(!this._.hasOwnProperty(ve))throw new Error("unknown type: "+ve);for(ce=0,me=(Me=this._[ve]).length;ce<me;++ce)Me[ce].value.apply(ye,Ae)},apply:function(ve,ye,me){if(!this._.hasOwnProperty(ve))throw new Error("unknown type: "+ve);for(var Me=this._[ve],Ae=0,ce=Me.length;Ae<ce;++Ae)Me[Ae].value.apply(ye,me)}};var h,E,k=m,D=0,P=0,L=0,O=1e3,N=0,V=0,F=0,j=typeof performance=="object"&&performance.now?performance:Date,Z=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(ve){setTimeout(ve,17)};function z(){return V||(Z(H),V=j.now()+F)}function H(){V=0}function U(){this._call=this._time=this._next=null}function re(ve,ye,me){var Me=new U;return Me.restart(ve,ye,me),Me}function ee(){V=(N=j.now())+F,D=P=0;try{(function(){z(),++D;for(var ve,ye=h;ye;)(ve=V-ye._time)>=0&&ye._call.call(null,ve),ye=ye._next;--D})()}finally{D=0,function(){for(var ve,ye,me=h,Me=1/0;me;)me._call?(Me>me._time&&(Me=me._time),ve=me,me=me._next):(ye=me._next,me._next=null,me=ve?ve._next=ye:h=ye);E=ve,Q(Me)}(),V=0}}function J(){var ve=j.now(),ye=ve-N;ye>O&&(F-=ye,N=ve)}function Q(ve){D||(P&&(P=clearTimeout(P)),ve-V>24?(ve<1/0&&(P=setTimeout(ee,ve-j.now()-F)),L&&(L=clearInterval(L))):(L||(N=j.now(),L=setInterval(J,O)),D=1,Z(ee)))}function ne(ve){return ve.x}function K(ve){return ve.y}U.prototype=re.prototype={constructor:U,restart:function(ve,ye,me){if(typeof ve!="function")throw new TypeError("callback is not a function");me=(me==null?z():+me)+(ye==null?0:+ye),this._next||E===this||(E?E._next=this:h=this,E=this),this._call=ve,this._time=me,Q()},stop:function(){this._call&&(this._call=null,this._time=1/0,Q())}};var oe=10,le=Math.PI*(3-Math.sqrt(5));function se(ve){var ye,me=1,Me=.001,Ae=1-Math.pow(Me,1/300),ce=0,ae=.6,pe=(0,d.kH)(),De=re(Ee),ke=k("tick","end");function Ee(){Ie(),ke.call("tick",ye),me<Me&&(De.stop(),ke.call("end",ye))}function Ie(ge){var we,Ce,ze=ve.length;ge===void 0&&(ge=1);for(var Pe=0;Pe<ge;++Pe)for(me+=(ce-me)*Ae,pe.each(function(Ue){Ue(me)}),we=0;we<ze;++we)(Ce=ve[we]).fx==null?Ce.x+=Ce.vx*=ae:(Ce.x=Ce.fx,Ce.vx=0),Ce.fy==null?Ce.y+=Ce.vy*=ae:(Ce.y=Ce.fy,Ce.vy=0);return ye}function Re(){for(var ge,we=0,Ce=ve.length;we<Ce;++we){if((ge=ve[we]).index=we,ge.fx!=null&&(ge.x=ge.fx),ge.fy!=null&&(ge.y=ge.fy),isNaN(ge.x)||isNaN(ge.y)){var ze=oe*Math.sqrt(we),Pe=we*le;ge.x=ze*Math.cos(Pe),ge.y=ze*Math.sin(Pe)}(isNaN(ge.vx)||isNaN(ge.vy))&&(ge.vx=ge.vy=0)}}function Ne(ge){return ge.initialize&&ge.initialize(ve),ge}return ve==null&&(ve=[]),Re(),ye={tick:Ie,restart:function(){return De.restart(Ee),ye},stop:function(){return De.stop(),ye},nodes:function(ge){return arguments.length?(ve=ge,Re(),pe.each(Ne),ye):ve},alpha:function(ge){return arguments.length?(me=+ge,ye):me},alphaMin:function(ge){return arguments.length?(Me=+ge,ye):Me},alphaDecay:function(ge){return arguments.length?(Ae=+ge,ye):+Ae},alphaTarget:function(ge){return arguments.length?(ce=+ge,ye):ce},velocityDecay:function(ge){return arguments.length?(ae=1-ge,ye):1-ae},force:function(ge,we){return arguments.length>1?(we==null?pe.remove(ge):pe.set(ge,Ne(we)),ye):pe.get(ge)},find:function(ge,we,Ce){var ze,Pe,Ue,Ge,Xe,st=0,at=ve.length;for(Ce==null?Ce=1/0:Ce*=Ce,st=0;st<at;++st)(Ue=(ze=ge-(Ge=ve[st]).x)*ze+(Pe=we-Ge.y)*Pe)<Ce&&(Xe=Ge,Ce=Ue);return Xe},on:function(ge,we){return arguments.length>1?(ke.on(ge,we),ye):ke.on(ge)}}}function de(){var ve,ye,me,Me,Ae=w(-30),ce=1,ae=1/0,pe=.81;function De(Re){var Ne,ge=ve.length,we=t(ve,ne,K).visitAfter(Ee);for(me=Re,Ne=0;Ne<ge;++Ne)ye=ve[Ne],we.visit(Ie)}function ke(){if(ve){var Re,Ne,ge=ve.length;for(Me=new Array(ge),Re=0;Re<ge;++Re)Ne=ve[Re],Me[Ne.index]=+Ae(Ne,Re,ve)}}function Ee(Re){var Ne,ge,we,Ce,ze,Pe=0,Ue=0;if(Re.length){for(we=Ce=ze=0;ze<4;++ze)(Ne=Re[ze])&&(ge=Math.abs(Ne.value))&&(Pe+=Ne.value,Ue+=ge,we+=ge*Ne.x,Ce+=ge*Ne.y);Re.x=we/Ue,Re.y=Ce/Ue}else{(Ne=Re).x=Ne.data.x,Ne.y=Ne.data.y;do Pe+=Me[Ne.data.index];while(Ne=Ne.next)}Re.value=Pe}function Ie(Re,Ne,ge,we){if(!Re.value)return!0;var Ce=Re.x-ye.x,ze=Re.y-ye.y,Pe=we-Ne,Ue=Ce*Ce+ze*ze;if(Pe*Pe/pe<Ue)return Ue<ae&&(Ce===0&&(Ue+=(Ce=n())*Ce),ze===0&&(Ue+=(ze=n())*ze),Ue<ce&&(Ue=Math.sqrt(ce*Ue)),ye.vx+=Ce*Re.value*me/Ue,ye.vy+=ze*Re.value*me/Ue),!0;if(!(Re.length||Ue>=ae)){(Re.data!==ye||Re.next)&&(Ce===0&&(Ue+=(Ce=n())*Ce),ze===0&&(Ue+=(ze=n())*ze),Ue<ce&&(Ue=Math.sqrt(ce*Ue)));do Re.data!==ye&&(Pe=Me[Re.data.index]*me/Ue,ye.vx+=Ce*Pe,ye.vy+=ze*Pe);while(Re=Re.next)}}return De.initialize=function(Re){ve=Re,ke()},De.strength=function(Re){return arguments.length?(Ae=typeof Re=="function"?Re:w(+Re),ke(),De):Ae},De.distanceMin=function(Re){return arguments.length?(ce=Re*Re,De):Math.sqrt(ce)},De.distanceMax=function(Re){return arguments.length?(ae=Re*Re,De):Math.sqrt(ae)},De.theta=function(Re){return arguments.length?(pe=Re*Re,De):Math.sqrt(pe)},De}function be(ve,ye,me){var Me,Ae,ce,ae=w(.1);function pe(ke){for(var Ee=0,Ie=Me.length;Ee<Ie;++Ee){var Re=Me[Ee],Ne=Re.x-ye||1e-6,ge=Re.y-me||1e-6,we=Math.sqrt(Ne*Ne+ge*ge),Ce=(ce[Ee]-we)*Ae[Ee]*ke/we;Re.vx+=Ne*Ce,Re.vy+=ge*Ce}}function De(){if(Me){var ke,Ee=Me.length;for(Ae=new Array(Ee),ce=new Array(Ee),ke=0;ke<Ee;++ke)ce[ke]=+ve(Me[ke],ke,Me),Ae[ke]=isNaN(ce[ke])?0:+ae(Me[ke],ke,Me)}}return typeof ve!="function"&&(ve=w(+ve)),ye==null&&(ye=0),me==null&&(me=0),pe.initialize=function(ke){Me=ke,De()},pe.strength=function(ke){return arguments.length?(ae=typeof ke=="function"?ke:w(+ke),De(),pe):ae},pe.radius=function(ke){return arguments.length?(ve=typeof ke=="function"?ke:w(+ke),De(),pe):ve},pe.x=function(ke){return arguments.length?(ye=+ke,pe):ye},pe.y=function(ke){return arguments.length?(me=+ke,pe):me},pe}function _e(ve){var ye,me,Me,Ae=w(.1);function ce(pe){for(var De,ke=0,Ee=ye.length;ke<Ee;++ke)(De=ye[ke]).vx+=(Me[ke]-De.x)*me[ke]*pe}function ae(){if(ye){var pe,De=ye.length;for(me=new Array(De),Me=new Array(De),pe=0;pe<De;++pe)me[pe]=isNaN(Me[pe]=+ve(ye[pe],pe,ye))?0:+Ae(ye[pe],pe,ye)}}return typeof ve!="function"&&(ve=w(ve==null?0:+ve)),ce.initialize=function(pe){ye=pe,ae()},ce.strength=function(pe){return arguments.length?(Ae=typeof pe=="function"?pe:w(+pe),ae(),ce):Ae},ce.x=function(pe){return arguments.length?(ve=typeof pe=="function"?pe:w(+pe),ae(),ce):ve},ce}function xe(ve){var ye,me,Me,Ae=w(.1);function ce(pe){for(var De,ke=0,Ee=ye.length;ke<Ee;++ke)(De=ye[ke]).vy+=(Me[ke]-De.y)*me[ke]*pe}function ae(){if(ye){var pe,De=ye.length;for(me=new Array(De),Me=new Array(De),pe=0;pe<De;++pe)me[pe]=isNaN(Me[pe]=+ve(ye[pe],pe,ye))?0:+Ae(ye[pe],pe,ye)}}return typeof ve!="function"&&(ve=w(ve==null?0:+ve)),ce.initialize=function(pe){ye=pe,ae()},ce.strength=function(pe){return arguments.length?(Ae=typeof pe=="function"?pe:w(+pe),ae(),ce):Ae},ce.y=function(pe){return arguments.length?(ve=typeof pe=="function"?pe:w(+pe),ae(),ce):ve},ce}},57624:function(C,A,e){"use strict";function v(l,d){if((c=(l=d?l.toExponential(d-1):l.toExponential()).indexOf("e"))<0)return null;var c,_=l.slice(0,c);return[_.length>1?_[0]+_.slice(2):_,+l.slice(c+1)]}e.d(A,{E9:function(){return r},SO:function(){return u}});var w,n=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function T(l){if(!(d=n.exec(l)))throw new Error("invalid format: "+l);var d;return new x({fill:d[1],align:d[2],sign:d[3],symbol:d[4],zero:d[5],width:d[6],comma:d[7],precision:d[8]&&d[8].slice(1),trim:d[9],type:d[10]})}function x(l){this.fill=l.fill===void 0?" ":l.fill+"",this.align=l.align===void 0?">":l.align+"",this.sign=l.sign===void 0?"-":l.sign+"",this.symbol=l.symbol===void 0?"":l.symbol+"",this.zero=!!l.zero,this.width=l.width===void 0?void 0:+l.width,this.comma=!!l.comma,this.precision=l.precision===void 0?void 0:+l.precision,this.trim=!!l.trim,this.type=l.type===void 0?"":l.type+""}function f(l,d){var c=v(l,d);if(!c)return l+"";var _=c[0],p=c[1];return p<0?"0."+new Array(-p).join("0")+_:_.length>p+1?_.slice(0,p+1)+"."+_.slice(p+1):_+new Array(p-_.length+2).join("0")}T.prototype=x.prototype,x.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,0|this.width))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var s={"%":function(l,d){return(100*l).toFixed(d)},b:function(l){return Math.round(l).toString(2)},c:function(l){return l+""},d:function(l){return Math.abs(l=Math.round(l))>=1e21?l.toLocaleString("en").replace(/,/g,""):l.toString(10)},e:function(l,d){return l.toExponential(d)},f:function(l,d){return l.toFixed(d)},g:function(l,d){return l.toPrecision(d)},o:function(l){return Math.round(l).toString(8)},p:function(l,d){return f(100*l,d)},r:f,s:function(l,d){var c=v(l,d);if(!c)return l+"";var _=c[0],p=c[1],g=p-(w=3*Math.max(-8,Math.min(8,Math.floor(p/3))))+1,m=_.length;return g===m?_:g>m?_+new Array(g-m+1).join("0"):g>0?_.slice(0,g)+"."+_.slice(g):"0."+new Array(1-g).join("0")+v(l,Math.max(0,d+g-1))[0]},X:function(l){return Math.round(l).toString(16).toUpperCase()},x:function(l){return Math.round(l).toString(16)}};function t(l){return l}var o,r,i=Array.prototype.map,a=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function u(l){var d,c,_=l.grouping===void 0||l.thousands===void 0?t:(d=i.call(l.grouping,Number),c=l.thousands+"",function(k,D){for(var P=k.length,L=[],O=0,N=d[0],V=0;P>0&&N>0&&(V+N+1>D&&(N=Math.max(1,D-V)),L.push(k.substring(P-=N,P+N)),!((V+=N+1)>D));)N=d[O=(O+1)%d.length];return L.reverse().join(c)}),p=l.currency===void 0?"":l.currency[0]+"",g=l.currency===void 0?"":l.currency[1]+"",m=l.decimal===void 0?".":l.decimal+"",b=l.numerals===void 0?t:function(k){return function(D){return D.replace(/[0-9]/g,function(P){return k[+P]})}}(i.call(l.numerals,String)),y=l.percent===void 0?"%":l.percent+"",M=l.minus===void 0?"-":l.minus+"",h=l.nan===void 0?"NaN":l.nan+"";function E(k){var D=(k=T(k)).fill,P=k.align,L=k.sign,O=k.symbol,N=k.zero,V=k.width,F=k.comma,j=k.precision,Z=k.trim,z=k.type;z==="n"?(F=!0,z="g"):s[z]||(j===void 0&&(j=12),Z=!0,z="g"),(N||D==="0"&&P==="=")&&(N=!0,D="0",P="=");var H=O==="$"?p:O==="#"&&/[boxX]/.test(z)?"0"+z.toLowerCase():"",U=O==="$"?g:/[%p]/.test(z)?y:"",re=s[z],ee=/[defgprs%]/.test(z);function J(Q){var ne,K,oe,le=H,se=U;if(z==="c")se=re(Q)+se,Q="";else{var de=(Q=+Q)<0||1/Q<0;if(Q=isNaN(Q)?h:re(Math.abs(Q),j),Z&&(Q=function(xe){e:for(var ve,ye=xe.length,me=1,Me=-1;me<ye;++me)switch(xe[me]){case".":Me=ve=me;break;case"0":Me===0&&(Me=me),ve=me;break;default:if(!+xe[me])break e;Me>0&&(Me=0)}return Me>0?xe.slice(0,Me)+xe.slice(ve+1):xe}(Q)),de&&+Q==0&&L!=="+"&&(de=!1),le=(de?L==="("?L:M:L==="-"||L==="("?"":L)+le,se=(z==="s"?a[8+w/3]:"")+se+(de&&L==="("?")":""),ee){for(ne=-1,K=Q.length;++ne<K;)if(48>(oe=Q.charCodeAt(ne))||oe>57){se=(oe===46?m+Q.slice(ne+1):Q.slice(ne))+se,Q=Q.slice(0,ne);break}}}F&&!N&&(Q=_(Q,1/0));var be=le.length+Q.length+se.length,_e=be<V?new Array(V-be+1).join(D):"";switch(F&&N&&(Q=_(_e+Q,_e.length?V-se.length:1/0),_e=""),P){case"<":Q=le+Q+se+_e;break;case"=":Q=le+_e+Q+se;break;case"^":Q=_e.slice(0,be=_e.length>>1)+le+Q+se+_e.slice(be);break;default:Q=_e+le+Q+se}return b(Q)}return j=j===void 0?6:/[gprs]/.test(z)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j)),J.toString=function(){return k+""},J}return{format:E,formatPrefix:function(k,D){var P,L=E(((k=T(k)).type="f",k)),O=3*Math.max(-8,Math.min(8,Math.floor((P=D,((P=v(Math.abs(P)))?P[1]:NaN)/3)))),N=Math.pow(10,-O),V=a[8+O/3];return function(F){return L(N*F)+V}}}}o=u({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),r=o.format,o.formatPrefix},87108:function(C,A,e){"use strict";e.r(A),e.d(A,{geoAiry:function(){return F},geoAiryRaw:function(){return V},geoAitoff:function(){return Z},geoAitoffRaw:function(){return j},geoArmadillo:function(){return H},geoArmadilloRaw:function(){return z},geoAugust:function(){return re},geoAugustRaw:function(){return U},geoBaker:function(){return ne},geoBakerRaw:function(){return Q},geoBerghaus:function(){return le},geoBerghausRaw:function(){return oe},geoBertin1953:function(){return me},geoBertin1953Raw:function(){return ye},geoBoggs:function(){return Ee},geoBoggsRaw:function(){return ke},geoBonne:function(){return we},geoBonneRaw:function(){return ge},geoBottomley:function(){return ze},geoBottomleyRaw:function(){return Ce},geoBromley:function(){return Ue},geoBromleyRaw:function(){return Pe},geoChamberlin:function(){return tt},geoChamberlinAfrica:function(){return rt},geoChamberlinRaw:function(){return xt},geoCollignon:function(){return Pt},geoCollignonRaw:function(){return Mt},geoCraig:function(){return St},geoCraigRaw:function(){return Rt},geoCraster:function(){return Ve},geoCrasterRaw:function(){return Ke},geoCylindricalEqualArea:function(){return lt},geoCylindricalEqualAreaRaw:function(){return $e},geoCylindricalStereographic:function(){return Be},geoCylindricalStereographicRaw:function(){return it},geoEckert1:function(){return ot},geoEckert1Raw:function(){return je},geoEckert2:function(){return dt},geoEckert2Raw:function(){return Ze},geoEckert3:function(){return yt},geoEckert3Raw:function(){return mt},geoEckert4:function(){return kt},geoEckert4Raw:function(){return ht},geoEckert5:function(){return Et},geoEckert5Raw:function(){return _t},geoEckert6:function(){return Ot},geoEckert6Raw:function(){return Lt},geoEisenlohr:function(){return Ht},geoEisenlohrRaw:function(){return Zt},geoFahey:function(){return nn},geoFaheyRaw:function(){return Wt},geoFoucaut:function(){return kn},geoFoucautRaw:function(){return On},geoFoucautSinusoidal:function(){return Jt},geoFoucautSinusoidalRaw:function(){return gn},geoGilbert:function(){return wn},geoGingery:function(){return Bn},geoGingeryRaw:function(){return Pn},geoGinzburg4:function(){return Yn},geoGinzburg4Raw:function(){return rr},geoGinzburg5:function(){return Zn},geoGinzburg5Raw:function(){return ir},geoGinzburg6:function(){return en},geoGinzburg6Raw:function(){return ur},geoGinzburg8:function(){return Dn},geoGinzburg8Raw:function(){return on},geoGinzburg9:function(){return Ln},geoGinzburg9Raw:function(){return yn},geoGringorten:function(){return Xn},geoGringortenQuincuncial:function(){return Po},geoGringortenRaw:function(){return Un},geoGuyou:function(){return Dt},geoGuyouRaw:function(){return mn},geoHammer:function(){return _e},geoHammerRaw:function(){return de},geoHammerRetroazimuthal:function(){return dn},geoHammerRetroazimuthalRaw:function(){return Qt},geoHealpix:function(){return Rn},geoHealpixRaw:function(){return rn},geoHill:function(){return Qn},geoHillRaw:function(){return jn},geoHomolosine:function(){return br},geoHomolosineRaw:function(){return hr},geoHufnagel:function(){return ar},geoHufnagelRaw:function(){return gr},geoHyperelliptical:function(){return wi},geoHyperellipticalRaw:function(){return Pr},geoInterrupt:function(){return bi},geoInterruptedBoggs:function(){return Oo},geoInterruptedHomolosine:function(){return so},geoInterruptedMollweide:function(){return ro},geoInterruptedMollweideHemispheres:function(){return fs},geoInterruptedQuarticAuthalic:function(){return dc},geoInterruptedSinuMollweide:function(){return Ra},geoInterruptedSinusoidal:function(){return hs},geoKavrayskiy7:function(){return ya},geoKavrayskiy7Raw:function(){return sa},geoLagrange:function(){return gi},geoLagrangeRaw:function(){return xa},geoLarrivee:function(){return Na},geoLarriveeRaw:function(){return Xa},geoLaskowski:function(){return ds},geoLaskowskiRaw:function(){return ba},geoLittrow:function(){return ps},geoLittrowRaw:function(){return za},geoLoximuthal:function(){return gs},geoLoximuthalRaw:function(){return Ka},geoMiller:function(){return _u},geoMillerRaw:function(){return Ba},geoModifiedStereographic:function(){return Rs},geoModifiedStereographicAlaska:function(){return cc},geoModifiedStereographicGs48:function(){return fc},geoModifiedStereographicGs50:function(){return Ps},geoModifiedStereographicLee:function(){return tl},geoModifiedStereographicMiller:function(){return ja},geoModifiedStereographicRaw:function(){return Xl},geoMollweide:function(){return ae},geoMollweideRaw:function(){return ce},geoMtFlatPolarParabolic:function(){return wu},geoMtFlatPolarParabolicRaw:function(){return _a},geoMtFlatPolarQuartic:function(){return Ja},geoMtFlatPolarQuarticRaw:function(){return ms},geoMtFlatPolarSinusoidal:function(){return vs},geoMtFlatPolarSinusoidalRaw:function(){return Qa},geoNaturalEarth:function(){return $r.c},geoNaturalEarth2:function(){return hc},geoNaturalEarth2Raw:function(){return nl},geoNaturalEarthRaw:function(){return $r.g},geoNellHammer:function(){return rl},geoNellHammerRaw:function(){return Kl},geoNicolosi:function(){return pc},geoNicolosiRaw:function(){return Jl},geoPatterson:function(){return Hu},geoPattersonRaw:function(){return eu},geoPeirceQuincuncial:function(){return Us},geoPierceQuincuncial:function(){return Us},geoPolyconic:function(){return zs},geoPolyconicRaw:function(){return ol},geoPolyhedral:function(){return fi},geoPolyhedralButterfly:function(){return sl},geoPolyhedralCollignon:function(){return Cl},geoPolyhedralWaterman:function(){return Dl},geoProject:function(){return Il},geoQuantize:function(){return ts},geoQuincuncial:function(){return ws},geoRectangularPolyconic:function(){return fa},geoRectangularPolyconicRaw:function(){return ca},geoRobinson:function(){return Mr},geoRobinsonRaw:function(){return Aa},geoSatellite:function(){return Tu},geoSatelliteRaw:function(){return Ll},geoSinuMollweide:function(){return Jn},geoSinuMollweideRaw:function(){return tr},geoSinusoidal:function(){return Ne},geoSinusoidalRaw:function(){return Re},geoStitch:function(){return vo},geoTimes:function(){return Ha},geoTimesRaw:function(){return Ro},geoTwoPointAzimuthal:function(){return No},geoTwoPointAzimuthalRaw:function(){return ul},geoTwoPointAzimuthalUsa:function(){return cl},geoTwoPointEquidistant:function(){return qs},geoTwoPointEquidistantRaw:function(){return Xr},geoTwoPointEquidistantUsa:function(){return qa},geoVanDerGrinten:function(){return fl},geoVanDerGrinten2:function(){return Ea},geoVanDerGrinten2Raw:function(){return hl},geoVanDerGrinten3:function(){return Gs},geoVanDerGrinten3Raw:function(){return Ai},geoVanDerGrinten4:function(){return Or},geoVanDerGrinten4Raw:function(){return Sr},geoVanDerGrintenRaw:function(){return Sa},geoWagner:function(){return Ga},geoWagner4:function(){return qu},geoWagner4Raw:function(){return hi},geoWagner6:function(){return mi},geoWagner6Raw:function(){return Qo},geoWagner7:function(){return is},geoWagnerRaw:function(){return Jo},geoWiechel:function(){return Ho},geoWiechelRaw:function(){return Li},geoWinkel3:function(){return Mu},geoWinkel3Raw:function(){return Ss}});var v=e(87952),w=Math.abs,n=Math.atan,T=Math.atan2,x=Math.cos,f=Math.exp,s=Math.floor,t=Math.log,o=Math.max,r=Math.min,i=Math.pow,a=Math.round,u=Math.sign||function(Je){return Je>0?1:Je<0?-1:0},l=Math.sin,d=Math.tan,c=1e-6,_=1e-12,p=Math.PI,g=p/2,m=p/4,b=Math.SQRT1_2,y=L(2),M=L(p),h=2*p,E=180/p,k=p/180;function D(Je){return Je>1?g:Je<-1?-g:Math.asin(Je)}function P(Je){return Je>1?0:Je<-1?p:Math.acos(Je)}function L(Je){return Je>0?Math.sqrt(Je):0}function O(Je){return(f(Je)-f(-Je))/2}function N(Je){return(f(Je)+f(-Je))/2}function V(Je){var et=d(Je/2),ut=2*t(x(Je/2))/(et*et);function B($,W){var I=x($),G=x(W),te=l(W),ie=G*I,he=-((1-ie?t((1+ie)/2)/(1-ie):-.5)+ut/(1+ie));return[he*G*l($),he*te]}return B.invert=function($,W){var I,G=L($*$+W*W),te=-Je/2,ie=50;if(!G)return[0,0];do{var he=te/2,Te=x(he),Le=l(he),Fe=Le/Te,qe=-t(w(Te));te-=I=(2/Fe*qe-ut*Fe-G)/(-qe/(Le*Le)+1-ut/(2*Te*Te))*(Te<0?.7:1)}while(w(I)>c&&--ie>0);var We=l(te);return[T($*We,G*x(te)),D(W*We/G)]},B}function F(){var Je=g,et=(0,v.U)(V),ut=et(Je);return ut.radius=function(B){return arguments.length?et(Je=B*k):Je*E},ut.scale(179.976).clipAngle(147)}function j(Je,et){var ut=x(et),B=function($){return $?$/Math.sin($):1}(P(ut*x(Je/=2)));return[2*ut*l(Je)*B,l(et)*B]}function Z(){return(0,v.c)(j).scale(152.63)}function z(Je){var et=l(Je),ut=x(Je),B=Je>=0?1:-1,$=d(B*Je),W=(1+et-ut)/2;function I(G,te){var ie=x(te),he=x(G/=2);return[(1+ie)*l(G),(B*te>-T(he,$)-.001?0:10*-B)+W+l(te)*ut-(1+ie)*et*he]}return I.invert=function(G,te){var ie=0,he=0,Te=50;do{var Le=x(ie),Fe=l(ie),qe=x(he),We=l(he),nt=1+qe,ft=nt*Fe-G,pt=W+We*ut-nt*et*Le-te,wt=nt*Le/2,Ct=-Fe*We,At=et*nt*Fe/2,zt=ut*qe+et*Le*We,It=Ct*At-zt*wt,Xt=(pt*Ct-ft*zt)/It/2,Gt=(ft*At-pt*wt)/It;w(Gt)>2&&(Gt/=2),ie-=Xt,he-=Gt}while((w(Xt)>c||w(Gt)>c)&&--Te>0);return B*he>-T(x(ie),$)-.001?[2*ie,he]:null},I}function H(){var Je=20*k,et=Je>=0?1:-1,ut=d(et*Je),B=(0,v.U)(z),$=B(Je),W=$.stream;return $.parallel=function(I){return arguments.length?(ut=d((et=(Je=I*k)>=0?1:-1)*Je),B(Je)):Je*E},$.stream=function(I){var G=$.rotate(),te=W(I),ie=($.rotate([0,0]),W(I)),he=$.precision();return $.rotate(G),te.sphere=function(){ie.polygonStart(),ie.lineStart();for(var Te=-180*et;et*Te<180;Te+=90*et)ie.point(Te,90*et);if(Je)for(;et*(Te-=3*et*he)>=-180;)ie.point(Te,et*-T(x(Te*k/2),ut)*E);ie.lineEnd(),ie.polygonEnd()},te},$.scale(218.695).center([0,28.0974])}function U(Je,et){var ut=d(et/2),B=L(1-ut*ut),$=1+B*x(Je/=2),W=l(Je)*B/$,I=ut/$,G=W*W,te=I*I;return[1.3333333333333333*W*(3+G-3*te),1.3333333333333333*I*(3+3*G-te)]}function re(){return(0,v.c)(U).scale(66.1603)}j.invert=function(Je,et){if(!(Je*Je+4*et*et>p*p+c)){var ut=Je,B=et,$=25;do{var W,I=l(ut),G=l(ut/2),te=x(ut/2),ie=l(B),he=x(B),Te=l(2*B),Le=ie*ie,Fe=he*he,qe=G*G,We=1-Fe*te*te,nt=We?P(he*te)*L(W=1/We):W=0,ft=2*nt*he*G-Je,pt=nt*ie-et,wt=W*(Fe*qe+nt*he*te*Le),Ct=W*(.5*I*Te-2*nt*ie*G),At=.25*W*(Te*G-nt*ie*Fe*I),zt=W*(Le*te+nt*qe*he),It=Ct*At-zt*wt;if(!It)break;var Xt=(pt*Ct-ft*zt)/It,Gt=(ft*At-pt*wt)/It;ut-=Xt,B-=Gt}while((w(Xt)>c||w(Gt)>c)&&--$>0);return[ut,B]}},U.invert=function(Je,et){if(et*=.375,!(Je*=.375)&&w(et)>1)return null;var ut=1+Je*Je+et*et,B=L((ut-L(ut*ut-4*et*et))/2),$=D(B)/3,W=B?function(ie){return t(ie+L(ie*ie-1))}(w(et/B))/3:function(ie){return t(ie+L(ie*ie+1))}(w(Je))/3,I=x($),G=N(W),te=G*G-I*I;return[2*u(Je)*T(O(W)*I,.25-te),2*u(et)*T(G*l($),.25+te)]};var ee=L(8),J=t(1+y);function Q(Je,et){var ut=w(et);return ut<m?[Je,t(d(m+et/2))]:[Je*x(ut)*(2*y-1/l(ut)),u(et)*(2*y*(ut-m)-t(d(ut/2)))]}function ne(){return(0,v.c)(Q).scale(112.314)}Q.invert=function(Je,et){if((B=w(et))<J)return[Je,2*n(f(et))-g];var ut,B,$=m,W=25;do{var I=x($/2),G=d($/2);$-=ut=(ee*($-m)-t(G)-B)/(ee-I*I/(2*G))}while(w(ut)>_&&--W>0);return[Je/(x($)*(ee-1/l($))),u(et)*$]};var K=e(69020);function oe(Je){var et=2*p/Je;function ut(B,$){var W=(0,K.O)(B,$);if(w(B)>g){var I=T(W[1],W[0]),G=L(W[0]*W[0]+W[1]*W[1]),te=et*a((I-g)/et)+g,ie=T(l(I-=te),2-x(I));I=te+D(p/G*l(ie))-ie,W[0]=G*x(I),W[1]=G*l(I)}return W}return ut.invert=function(B,$){var W=L(B*B+$*$);if(W>g){var I=T($,B),G=et*a((I-g)/et)+g,te=I>G?-1:1,ie=W*x(G-I),he=1/d(te*P((ie-p)/L(p*(p-2*ie)+W*W)));I=G+2*n((he+te*L(he*he-3))/3),B=W*x(I),$=W*l(I)}return K.O.invert(B,$)},ut}function le(){var Je=5,et=(0,v.U)(oe),ut=et(Je),B=ut.stream,$=.01,W=-x($*k),I=l($*k);return ut.lobes=function(G){return arguments.length?et(Je=+G):Je},ut.stream=function(G){var te=ut.rotate(),ie=B(G),he=(ut.rotate([0,0]),B(G));return ut.rotate(te),ie.sphere=function(){he.polygonStart(),he.lineStart();for(var Te=0,Le=360/Je,Fe=2*p/Je,qe=90-180/Je,We=g;Te<Je;++Te,qe-=Le,We-=Fe)he.point(T(I*x(We),W)*E,D(I*l(We))*E),qe<-90?(he.point(-90,-180-qe-$),he.point(-90,-180-qe+$)):(he.point(90,qe+$),he.point(90,qe-$));he.lineEnd(),he.polygonEnd()},ie},ut.scale(87.8076).center([0,17.1875]).clipAngle(179.999)}var se=e(54724);function de(Je,et){if(arguments.length<2&&(et=Je),et===1)return se.y;if(et===1/0)return be;function ut(B,$){var W=(0,se.y)(B/et,$);return W[0]*=Je,W}return ut.invert=function(B,$){var W=se.y.invert(B/Je,$);return W[0]*=et,W},ut}function be(Je,et){return[Je*x(et)/x(et/=2),2*l(et)]}function _e(){var Je=2,et=(0,v.U)(de),ut=et(Je);return ut.coefficient=function(B){return arguments.length?et(Je=+B):Je},ut.scale(169.529)}function xe(Je,et,ut){var B,$,W,I=100;ut=ut===void 0?0:+ut,et=+et;do($=Je(ut))===(W=Je(ut+c))&&(W=$+c),ut-=B=-1*c*($-et)/($-W);while(I-- >0&&w(B)>c);return I<0?NaN:ut}function ve(Je,et,ut){return et===void 0&&(et=40),ut===void 0&&(ut=_),function(B,$,W,I){var G,te,ie;W=W===void 0?0:+W,I=I===void 0?0:+I;for(var he=0;he<et;he++){var Te=Je(W,I),Le=Te[0]-B,Fe=Te[1]-$;if(w(Le)<ut&&w(Fe)<ut)break;var qe=Le*Le+Fe*Fe;if(qe>G)W-=te/=2,I-=ie/=2;else{G=qe;var We=(W>0?-1:1)*ut,nt=(I>0?-1:1)*ut,ft=Je(W+We,I),pt=Je(W,I+nt),wt=(ft[0]-Te[0])/We,Ct=(ft[1]-Te[1])/We,At=(pt[0]-Te[0])/nt,zt=(pt[1]-Te[1])/nt,It=zt*wt-Ct*At,Xt=(w(It)<.5?.5:1)/It;if(W+=te=(Fe*At-Le*zt)*Xt,I+=ie=(Le*Ct-Fe*wt)*Xt,w(te)<ut&&w(ie)<ut)break}}return[W,I]}}function ye(){var Je=de(1.68,2);function et(ut,B){if(ut+B<-1.4){var $=(ut-B+1.6)*(ut+B+1.4)/8;ut+=$,B-=.8*$*l(B+p/2)}var W=Je(ut,B),I=(1-x(ut*B))/12;return W[1]<0&&(W[0]*=1+I),W[1]>0&&(W[1]*=1+I/1.5*W[0]*W[0]),W}return et.invert=ve(et),et}function me(){return(0,v.c)(ye()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function Me(Je,et){var ut,B=Je*l(et),$=30;do et-=ut=(et+l(et)-B)/(1+x(et));while(w(ut)>c&&--$>0);return et/2}function Ae(Je,et,ut){function B($,W){return[Je*$*x(W=Me(ut,W)),et*l(W)]}return B.invert=function($,W){return W=D(W/et),[$/(Je*x(W)),D((2*W+l(2*W))/ut)]},B}be.invert=function(Je,et){var ut=2*D(et/2);return[Je*x(ut/2)/x(ut),ut]};var ce=Ae(y/g,y,p);function ae(){return(0,v.c)(ce).scale(169.529)}var pe=2.00276,De=1.11072;function ke(Je,et){var ut=Me(p,et);return[pe*Je/(1/x(et)+De/x(ut)),(et+y*l(ut))/pe]}function Ee(){return(0,v.c)(ke).scale(160.857)}function Ie(Je){var et=0,ut=(0,v.U)(Je),B=ut(et);return B.parallel=function($){return arguments.length?ut(et=$*k):et*E},B}function Re(Je,et){return[Je*x(et),et]}function Ne(){return(0,v.c)(Re).scale(152.63)}function ge(Je){if(!Je)return Re;var et=1/d(Je);function ut(B,$){var W=et+Je-$,I=W&&B*x($)/W;return[W*l(I),et-W*x(I)]}return ut.invert=function(B,$){var W=L(B*B+($=et-$)*$),I=et+Je-W;return[W/x(I)*T(B,$),I]},ut}function we(){return Ie(ge).scale(123.082).center([0,26.1441]).parallel(45)}function Ce(Je){function et(ut,B){var $=g-B,W=$&&ut*Je*l($)/$;return[$*l(W)/Je,g-$*x(W)]}return et.invert=function(ut,B){var $=ut*Je,W=g-B,I=L($*$+W*W),G=T($,W);return[(I?I/l(I):1)*G/Je,g-I]},et}function ze(){var Je=.5,et=(0,v.U)(Ce),ut=et(Je);return ut.fraction=function(B){return arguments.length?et(Je=+B):Je},ut.scale(158.837)}ke.invert=function(Je,et){var ut,B,$=pe*et,W=et<0?-m:m,I=25;do B=$-y*l(W),W-=ut=(l(2*W)+2*W-p*l(B))/(2*x(2*W)+2+p*x(B)*y*x(W));while(w(ut)>c&&--I>0);return B=$-y*l(W),[Je*(1/x(B)+De/x(W))/pe,B]},Re.invert=function(Je,et){return[Je/x(et),et]};var Pe=Ae(1,4/p,p);function Ue(){return(0,v.c)(Pe).scale(152.63)}var Ge=e(24052),Xe=e(92992);function st(Je,et,ut,B,$,W){var I,G=x(W);if(w(Je)>1||w(W)>1)I=P(ut*$+et*B*G);else{var te=l(Je/2),ie=l(W/2);I=2*D(L(te*te+et*B*ie*ie))}return w(I)>c?[I,T(B*l(W),et*$-ut*B*G)]:[0,0]}function at(Je,et,ut){return P((Je*Je+et*et-ut*ut)/(2*Je*et))}function vt(Je){return Je-2*p*s((Je+p)/(2*p))}function xt(Je,et,ut){for(var B,$=[[Je[0],Je[1],l(Je[1]),x(Je[1])],[et[0],et[1],l(et[1]),x(et[1])],[ut[0],ut[1],l(ut[1]),x(ut[1])]],W=$[2],I=0;I<3;++I,W=B)B=$[I],W.v=st(B[1]-W[1],W[3],W[2],B[3],B[2],B[0]-W[0]),W.point=[0,0];var G=at($[0].v[0],$[2].v[0],$[1].v[0]),te=at($[0].v[0],$[1].v[0],$[2].v[0]),ie=p-G;$[2].point[1]=0,$[0].point[0]=-($[1].point[0]=$[0].v[0]/2);var he=[$[2].point[0]=$[0].point[0]+$[2].v[0]*x(G),2*($[0].point[1]=$[1].point[1]=$[2].v[0]*l(G))];return function(Te,Le){var Fe,qe=l(Le),We=x(Le),nt=new Array(3);for(Fe=0;Fe<3;++Fe){var ft=$[Fe];if(nt[Fe]=st(Le-ft[1],ft[3],ft[2],We,qe,Te-ft[0]),!nt[Fe][0])return ft.point;nt[Fe][1]=vt(nt[Fe][1]-ft.v[1])}var pt=he.slice();for(Fe=0;Fe<3;++Fe){var wt=Fe==2?0:Fe+1,Ct=at($[Fe].v[0],nt[Fe][0],nt[wt][0]);nt[Fe][1]<0&&(Ct=-Ct),Fe?Fe==1?(Ct=te-Ct,pt[0]-=nt[Fe][0]*x(Ct),pt[1]-=nt[Fe][0]*l(Ct)):(Ct=ie-Ct,pt[0]+=nt[Fe][0]*x(Ct),pt[1]+=nt[Fe][0]*l(Ct)):(pt[0]+=nt[Fe][0]*x(Ct),pt[1]-=nt[Fe][0]*l(Ct))}return pt[0]/=3,pt[1]/=3,pt}}function gt(Je){return Je[0]*=k,Je[1]*=k,Je}function rt(){return tt([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function tt(Je,et,ut){var B=(0,Ge.c)({type:"MultiPoint",coordinates:[Je,et,ut]}),$=[-B[0],-B[1]],W=(0,Xe.c)($),I=xt(gt(W(Je)),gt(W(et)),gt(W(ut)));I.invert=ve(I);var G=(0,v.c)(I).rotate($),te=G.center;return delete G.rotate,G.center=function(ie){return arguments.length?te(W(ie)):W.invert(te())},G.clipAngle(90)}function Mt(Je,et){var ut=L(1-l(et));return[2/M*Je*ut,M*(1-ut)]}function Pt(){return(0,v.c)(Mt).scale(95.6464).center([0,30])}function Rt(Je){var et=d(Je);function ut(B,$){return[B,(B?B/l(B):1)*(l($)*x(B)-et*x($))]}return ut.invert=et?function(B,$){B&&($*=l(B)/B);var W=x(B);return[B,2*T(L(W*W+et*et-$*$)-W,et-$)]}:function(B,$){return[B,D(B?$*d(B)/B:$)]},ut}function St(){return Ie(Rt).scale(249.828).clipAngle(90)}Mt.invert=function(Je,et){var ut=(ut=et/M-1)*ut;return[ut>0?Je*L(p/ut)/2:0,D(1-ut)]};var Ye=L(3);function Ke(Je,et){return[Ye*Je*(2*x(2*et/3)-1)/M,Ye*M*l(et/3)]}function Ve(){return(0,v.c)(Ke).scale(156.19)}function $e(Je){var et=x(Je);function ut(B,$){return[B*et,l($)/et]}return ut.invert=function(B,$){return[B/et,D($*et)]},ut}function lt(){return Ie($e).parallel(38.58).scale(195.044)}function it(Je){var et=x(Je);function ut(B,$){return[B*et,(1+et)*d($/2)]}return ut.invert=function(B,$){return[B/et,2*n($/(1+et))]},ut}function Be(){return Ie(it).scale(124.75)}function je(Je,et){var ut=L(8/(3*p));return[ut*Je*(1-w(et)/p),ut*et]}function ot(){return(0,v.c)(je).scale(165.664)}function Ze(Je,et){var ut=L(4-3*l(w(et)));return[2/L(6*p)*Je*ut,u(et)*L(2*p/3)*(2-ut)]}function dt(){return(0,v.c)(Ze).scale(165.664)}function mt(Je,et){var ut=L(p*(4+p));return[2/ut*Je*(1+L(1-4*et*et/(p*p))),4/ut*et]}function yt(){return(0,v.c)(mt).scale(180.739)}function ht(Je,et){var ut=(2+g)*l(et);et/=2;for(var B=0,$=1/0;B<10&&w($)>c;B++){var W=x(et);et-=$=(et+l(et)*(W+2)-ut)/(2*W*(1+W))}return[2/L(p*(4+p))*Je*(1+x(et)),2*L(p/(4+p))*l(et)]}function kt(){return(0,v.c)(ht).scale(180.739)}function _t(Je,et){return[Je*(1+x(et))/L(2+p),2*et/L(2+p)]}function Et(){return(0,v.c)(_t).scale(173.044)}function Lt(Je,et){for(var ut=(1+g)*l(et),B=0,$=1/0;B<10&&w($)>c;B++)et-=$=(et+l(et)-ut)/(1+x(et));return ut=L(2+p),[Je*(1+x(et))/ut,2*et/ut]}function Ot(){return(0,v.c)(Lt).scale(173.044)}Ke.invert=function(Je,et){var ut=3*D(et/(Ye*M));return[M*Je/(Ye*(2*x(2*ut/3)-1)),ut]},je.invert=function(Je,et){var ut=L(8/(3*p)),B=et/ut;return[Je/(ut*(1-w(B)/p)),B]},Ze.invert=function(Je,et){var ut=2-w(et)/L(2*p/3);return[Je*L(6*p)/(2*ut),u(et)*D((4-ut*ut)/3)]},mt.invert=function(Je,et){var ut=L(p*(4+p))/2;return[Je*ut/(1+L(1-et*et*(4+p)/(4*p))),et*ut/2]},ht.invert=function(Je,et){var ut=et*L((4+p)/p)/2,B=D(ut),$=x(B);return[Je/(2/L(p*(4+p))*(1+$)),D((B+ut*($+2))/(2+g))]},_t.invert=function(Je,et){var ut=L(2+p),B=et*ut/2;return[ut*Je/(1+x(B)),B]},Lt.invert=function(Je,et){var ut=1+g,B=L(ut/2);return[2*Je*B/(1+x(et*=B)),D((et+l(et))/ut)]};var Ft=3+2*y;function Zt(Je,et){var ut=l(Je/=2),B=x(Je),$=L(x(et)),W=x(et/=2),I=l(et)/(W+y*B*$),G=L(2/(1+I*I)),te=L((y*W+(B+ut)*$)/(y*W+(B-ut)*$));return[Ft*(G*(te-1/te)-2*t(te)),Ft*(G*I*(te+1/te)-2*n(I))]}function Ht(){return(0,v.c)(Zt).scale(62.5271)}Zt.invert=function(Je,et){if(!(ut=U.invert(Je/1.2,1.065*et)))return null;var ut,B=ut[0],$=ut[1],W=20;Je/=Ft,et/=Ft;do{var I=B/2,G=$/2,te=l(I),ie=x(I),he=l(G),Te=x(G),Le=x($),Fe=L(Le),qe=he/(Te+y*ie*Fe),We=qe*qe,nt=L(2/(1+We)),ft=(y*Te+(ie+te)*Fe)/(y*Te+(ie-te)*Fe),pt=L(ft),wt=pt-1/pt,Ct=pt+1/pt,At=nt*wt-2*t(pt)-Je,zt=nt*qe*Ct-2*n(qe)-et,It=he&&b*Fe*te*We/he,Xt=(y*ie*Te+Fe)/(2*(Te+y*ie*Fe)*(Te+y*ie*Fe)*Fe),Gt=-.5*qe*nt*nt*nt,Vt=Gt*It,pn=Gt*Xt,vn=(vn=2*Te+y*Fe*(ie-te))*vn*pt,Sn=(y*ie*Te*Fe+Le)/vn,In=-y*te*he/(Fe*vn),Vn=wt*Vt-2*Sn/pt+nt*(Sn+Sn/ft),nr=wt*pn-2*In/pt+nt*(In+In/ft),cr=qe*Ct*Vt-2*It/(1+We)+nt*Ct*It+nt*qe*(Sn-Sn/ft),Gn=qe*Ct*pn-2*Xt/(1+We)+nt*Ct*Xt+nt*qe*(In-In/ft),lr=nr*cr-Gn*Vn;if(!lr)break;var xr=(zt*nr-At*Gn)/lr,Er=(At*cr-zt*Vn)/lr;B-=xr,$=o(-g,r(g,$-Er))}while((w(xr)>c||w(Er)>c)&&--W>0);return w(w($)-g)<c?[0,$]:W&&[B,$]};var Ut=x(35*k);function Wt(Je,et){var ut=d(et/2);return[Je*Ut*L(1-ut*ut),(1+Ut)*ut]}function nn(){return(0,v.c)(Wt).scale(137.152)}function On(Je,et){var ut=et/2,B=x(ut);return[2*Je/M*x(et)*B*B,M*d(ut)]}function kn(){return(0,v.c)(On).scale(135.264)}function gn(Je){var et=1-Je,ut=$(p,0)[0]-$(-p,0)[0],B=L(2*($(0,g)[1]-$(0,-g)[1])/ut);function $(G,te){var ie=x(te),he=l(te);return[ie/(et+Je*ie)*G,et*te+Je*he]}function W(G,te){var ie=$(G,te);return[ie[0]*B,ie[1]/B]}function I(G){return W(0,G)[1]}return W.invert=function(G,te){var ie=xe(I,te);return[G/B*(Je+et/x(ie)),ie]},W}function Jt(){var Je=.5,et=(0,v.U)(gn),ut=et(Je);return ut.alpha=function(B){return arguments.length?et(Je=+B):Je},ut.scale(168.725)}Wt.invert=function(Je,et){var ut=et/(1+Ut);return[Je&&Je/(Ut*L(1-ut*ut)),2*n(ut)]},On.invert=function(Je,et){var ut=n(et/M),B=x(ut),$=2*ut;return[Je*M/2/(x($)*B*B),$]};var un=e(4888),tn=e(69604);function hn(Je){return[Je[0]/2,D(d(Je[1]/2*k))*E]}function bn(Je){return[2*Je[0],2*n(l(Je[1]*k))*E]}function wn(Je){Je==null&&(Je=un.c);var et=Je(),ut=(0,tn.c)().scale(E).precision(0).clipAngle(null).translate([0,0]);function B(W){return et(hn(W))}function $(W){B[W]=function(){return arguments.length?(et[W].apply(et,arguments),B):et[W]()}}return et.invert&&(B.invert=function(W){return bn(et.invert(W))}),B.stream=function(W){var I=et.stream(W),G=ut.stream({point:function(te,ie){I.point(te/2,D(d(-ie/2*k))*E)},lineStart:function(){I.lineStart()},lineEnd:function(){I.lineEnd()},polygonStart:function(){I.polygonStart()},polygonEnd:function(){I.polygonEnd()}});return G.sphere=I.sphere,G},B.rotate=function(W){return arguments.length?(ut.rotate(W),B):ut.rotate()},B.center=function(W){return arguments.length?(et.center(hn(W)),B):bn(et.center())},$("angle"),$("clipAngle"),$("clipExtent"),$("fitExtent"),$("fitHeight"),$("fitSize"),$("fitWidth"),$("scale"),$("translate"),$("precision"),B.scale(249.5)}function Pn(Je,et){var ut=2*p/et,B=Je*Je;function $(W,I){var G=(0,K.O)(W,I),te=G[0],ie=G[1],he=te*te+ie*ie;if(he>B){var Te=L(he),Le=T(ie,te),Fe=ut*a(Le/ut),qe=Le-Fe,We=Je*x(qe),nt=(Je*l(qe)-qe*l(We))/(g-We),ft=Cn(qe,nt),pt=(p-Je)/Mn(ft,We,p);te=Te;var wt,Ct=50;do te-=wt=(Je+Mn(ft,We,te)*pt-Te)/(ft(te)*pt);while(w(wt)>c&&--Ct>0);ie=qe*l(te),te<g&&(ie-=nt*(te-g));var At=l(Fe),zt=x(Fe);G[0]=te*zt-ie*At,G[1]=te*At+ie*zt}return G}return $.invert=function(W,I){var G=W*W+I*I;if(G>B){var te=L(G),ie=T(I,W),he=ut*a(ie/ut),Te=ie-he;W=te*x(Te),I=te*l(Te);for(var Le=W-g,Fe=l(W),qe=I/Fe,We=W<g?1/0:0,nt=10;;){var ft=Je*l(qe),pt=Je*x(qe),wt=l(pt),Ct=g-pt,At=(ft-qe*wt)/Ct,zt=Cn(qe,At);if(w(We)<_||!--nt)break;qe-=We=(qe*Fe-At*Le-I)/(Fe-2*Le*(Ct*(pt+qe*ft*x(pt)-wt)-ft*(ft-qe*wt))/(Ct*Ct))}W=(te=Je+Mn(zt,pt,W)*(p-Je)/Mn(zt,pt,p))*x(ie=he+qe),I=te*l(ie)}return K.O.invert(W,I)},$}function Cn(Je,et){return function(ut){var B=Je*x(ut);return ut<g&&(B-=et),L(1+B*B)}}function Mn(Je,et,ut){for(var B=(ut-et)/50,$=Je(et)+Je(ut),W=1,I=et;W<50;++W)$+=2*Je(I+=B);return .5*$*B}function Bn(){var Je=6,et=30*k,ut=x(et),B=l(et),$=(0,v.U)(Pn),W=$(et,Je),I=W.stream,G=-x(.01*k),te=l(.01*k);return W.radius=function(ie){return arguments.length?(ut=x(et=ie*k),B=l(et),$(et,Je)):et*E},W.lobes=function(ie){return arguments.length?$(et,Je=+ie):Je},W.stream=function(ie){var he=W.rotate(),Te=I(ie),Le=(W.rotate([0,0]),I(ie));return W.rotate(he),Te.sphere=function(){Le.polygonStart(),Le.lineStart();for(var Fe=0,qe=2*p/Je,We=0;Fe<Je;++Fe,We-=qe)Le.point(T(te*x(We),G)*E,D(te*l(We))*E),Le.point(T(B*x(We-qe/2),ut)*E,D(B*l(We-qe/2))*E);Le.lineEnd(),Le.polygonEnd()},Te},W.rotate([90,-40]).scale(91.7095).clipAngle(179.999)}function Nn(Je,et,ut,B,$,W,I,G){function te(ie,he){if(!he)return[Je*ie/p,0];var Te=he*he,Le=Je+Te*(et+Te*(ut+Te*B)),Fe=he*($-1+Te*(W-G+Te*I)),qe=(Le*Le+Fe*Fe)/(2*Fe),We=ie*D(Le/qe)/p;return[qe*l(We),he*(1+Te*G)+qe*(1-x(We))]}return arguments.length<8&&(G=0),te.invert=function(ie,he){var Te,Le,Fe=p*ie/Je,qe=he,We=50;do{var nt=qe*qe,ft=Je+nt*(et+nt*(ut+nt*B)),pt=qe*($-1+nt*(W-G+nt*I)),wt=ft*ft+pt*pt,Ct=2*pt,At=wt/Ct,zt=At*At,It=D(ft/At)/p,Xt=Fe*It,Gt=ft*ft,Vt=(2*et+nt*(4*ut+6*nt*B))*qe,pn=$+nt*(3*W+5*nt*I),vn=(2*(ft*Vt+pt*(pn-1))*Ct-wt*(2*(pn-1)))/(Ct*Ct),Sn=x(Xt),In=l(Xt),Vn=At*Sn,nr=At*In,cr=Fe/p*(1/L(1-Gt/zt))*(Vt*At-ft*vn)/zt,Gn=nr-ie,lr=qe*(1+nt*G)+At-Vn-he,xr=vn*In+Vn*cr,Er=Vn*It,er=1+vn-(vn*Sn-nr*cr),sr=nr*It,wr=xr*sr-er*Er;if(!wr)break;Fe-=Te=(lr*xr-Gn*er)/wr,qe-=Le=(Gn*sr-lr*Er)/wr}while((w(Te)>c||w(Le)>c)&&--We>0);return[Fe,qe]},te}var rr=Nn(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function Yn(){return(0,v.c)(rr).scale(149.995)}var ir=Nn(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function Zn(){return(0,v.c)(ir).scale(153.93)}var ur=Nn(5/6*p,-.62636,-.0344,0,1.3493,-.05524,0,.045);function en(){return(0,v.c)(ur).scale(130.945)}function on(Je,et){var ut=Je*Je,B=et*et;return[Je*(1-.162388*B)*(.87-952426e-9*ut*ut),et*(1+B/12)]}function Dn(){return(0,v.c)(on).scale(131.747)}on.invert=function(Je,et){var ut,B=Je,$=et,W=50;do{var I=$*$;$-=ut=($*(1+I/12)-et)/(1+I/4)}while(w(ut)>c&&--W>0);W=50,Je/=1-.162388*I;do{var G=(G=B*B)*G;B-=ut=(B*(.87-952426e-9*G)-Je)/(.87-.00476213*G)}while(w(ut)>c&&--W>0);return[B,$]};var yn=Nn(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Ln(){return(0,v.c)(yn).scale(131.087)}function Wn(Je){var et=Je(g,0)[0]-Je(-g,0)[0];function ut(B,$){var W=B>0?-.5:.5,I=Je(B+W*p,$);return I[0]-=W*et,I}return Je.invert&&(ut.invert=function(B,$){var W=B>0?-.5:.5,I=Je.invert(B+W*et,$),G=I[0]-W*p;return G<-p?G+=2*p:G>p&&(G-=2*p),I[0]=G,I}),ut}function Un(Je,et){var ut=u(Je),B=u(et),$=x(et),W=x(Je)*$,I=l(Je)*$,G=l(B*et);Je=w(T(I,G)),et=D(W),w(Je-g)>c&&(Je%=g);var te=function(ie,he){if(he===g)return[0,0];var Te,Le,Fe=l(he),qe=Fe*Fe,We=qe*qe,nt=1+We,ft=1+3*We,pt=1-We,wt=D(1/L(nt)),Ct=pt+qe*nt*wt,At=(1-Fe)/Ct,zt=L(At),It=At*nt,Xt=L(It),Gt=zt*pt;if(ie===0)return[0,-(Gt+qe*Xt)];var Vt,pn=x(he),vn=1/pn,Sn=2*Fe*pn,In=(-Ct*pn-(1-Fe)*((-3*qe+wt*ft)*Sn))/(Ct*Ct),Vn=-vn*Sn,nr=-vn*(qe*nt*In+At*ft*Sn),cr=-2*vn*(pt*(.5*In/zt)-2*qe*zt*Sn),Gn=4*ie/p;if(ie>.222*p||he<p/4&&ie>.175*p){if(Te=(Gt+qe*L(It*(1+We)-Gt*Gt))/(1+We),ie>p/4)return[Te,Te];var lr=Te,xr=.5*Te;Te=.5*(xr+lr),Le=50;do{var Er=Te*(cr+Vn*L(It-Te*Te))+nr*D(Te/Xt)-Gn;if(!Er)break;Er<0?xr=Te:lr=Te,Te=.5*(xr+lr)}while(w(lr-xr)>c&&--Le>0)}else{Te=c,Le=25;do{var er=Te*Te,sr=L(It-er),wr=cr+Vn*sr,fr=Te*wr+nr*D(Te/Xt)-Gn;Te-=Vt=sr?fr/(wr+(nr-Vn*er)/sr):0}while(w(Vt)>c&&--Le>0)}return[Te,-Gt-qe*L(It-Te*Te)]}(Je>p/4?g-Je:Je,et);return Je>p/4&&(G=te[0],te[0]=-te[1],te[1]=-G),te[0]*=ut,te[1]*=-B,te}function Xn(){return(0,v.c)(Wn(Un)).scale(239.75)}function pr(Je,et){var ut,B,$,W,I,G;if(et<c)return[(W=l(Je))-(ut=et*(Je-W*(B=x(Je)))/4)*B,B+ut*W,1-et*W*W/2,Je-ut];if(et>=1-c)return ut=(1-et)/4,$=1/(B=N(Je)),[(W=((G=f(2*(G=Je)))-1)/(G+1))+ut*((I=B*O(Je))-Je)/(B*B),$-ut*W*$*(I-Je),$+ut*W*$*(I+Je),2*n(f(Je))-g+ut*(I-Je)/B];var te=[1,0,0,0,0,0,0,0,0],ie=[L(et),0,0,0,0,0,0,0,0],he=0;for(B=L(1-et),I=1;w(ie[he]/te[he])>c&&he<8;)ut=te[he++],ie[he]=(ut-B)/2,te[he]=(ut+B)/2,B=L(ut*B),I*=2;$=I*te[he]*Je;do $=(D(W=ie[he]*l(B=$)/te[he])+$)/2;while(--he);return[l($),W=x($),W/x($-B),$]}function Kt(Je,et){if(!et)return Je;if(et===1)return t(d(Je/2+m));for(var ut=1,B=L(1-et),$=L(et),W=0;w($)>c;W++){if(Je%p){var I=n(B*d(Je)/ut);I<0&&(I+=p),Je+=I+~~(Je/p)*p}else Je+=Je;$=(ut+B)/2,B=L(ut*B),$=((ut=$)-B)/2}return Je/(i(2,W)*ut)}function mn(Je,et){var ut=(y-1)/(y+1),B=L(1-ut*ut),$=Kt(g,B*B),W=t(d(p/4+w(et)/2)),I=f(-1*W)/L(ut),G=function(ie,he){var Te=ie*ie,Le=he+1,Fe=1-Te-he*he;return[.5*((ie>=0?g:-g)-T(Fe,2*ie)),-.25*t(Fe*Fe+4*Te)+.5*t(Le*Le+Te)]}(I*x(-1*Je),I*l(-1*Je)),te=function(ie,he,Te){var Le=w(ie),Fe=O(w(he));if(Le){var qe=1/l(Le),We=1/(d(Le)*d(Le)),nt=-(We+Te*(Fe*Fe*qe*qe)-1+Te),ft=(-nt+L(nt*nt-(Te-1)*We*4))/2;return[Kt(n(1/L(ft)),Te)*u(ie),Kt(n(L((ft/We-1)/Te)),1-Te)*u(he)]}return[0,Kt(n(Fe),1-Te)*u(he)]}(G[0],G[1],B*B);return[-te[1],(et>=0?1:-1)*(.5*$-te[0])]}function Dt(){return(0,v.c)(Wn(mn)).scale(151.496)}Un.invert=function(Je,et){w(Je)>1&&(Je=2*u(Je)-Je),w(et)>1&&(et=2*u(et)-et);var ut=u(Je),B=u(et),$=-ut*Je,W=-B*et,I=W/$<1,G=function(Te,Le){for(var Fe=0,qe=1,We=.5,nt=50;;){var ft=We*We,pt=L(We),wt=D(1/L(1+ft)),Ct=1-ft+We*(1+ft)*wt,At=(1-pt)/Ct,zt=L(At),It=At*(1+ft),Xt=zt*(1-ft),Gt=L(It-Te*Te),Vt=Le+Xt+We*Gt;if(w(qe-Fe)<_||--nt==0||Vt===0)break;Vt>0?Fe=We:qe=We,We=.5*(Fe+qe)}if(!nt)return null;var pn=D(pt),vn=x(pn),Sn=1/vn,In=2*pt*vn,Vn=(-Ct*vn-(-3*We+wt*(1+3*ft))*In*(1-pt))/(Ct*Ct);return[p/4*(Te*(-2*Sn*((1-ft)*(.5*Vn/zt)-2*We*zt*In)+-Sn*In*Gt)+-Sn*(We*(1+ft)*Vn+At*(1+3*ft)*In)*D(Te/L(It))),pn]}(I?W:$,I?$:W),te=G[0],ie=G[1],he=x(ie);return I&&(te=-g-te),[ut*(T(l(te)*he,-l(ie))+p),B*D(x(te)*he)]},mn.invert=function(Je,et){var ut,B,$,W,I,G,te=(y-1)/(y+1),ie=L(1-te*te),he=(B=-Je,$=ie*ie,(ut=.5*Kt(g,ie*ie)-et)?(W=pr(ut,$),B?(G=(I=pr(B,1-$))[1]*I[1]+$*W[0]*W[0]*I[0]*I[0],[[W[0]*I[2]/G,W[1]*W[2]*I[0]*I[1]/G],[W[1]*I[1]/G,-W[0]*W[2]*I[0]*I[2]/G],[W[2]*I[1]*I[2]/G,-$*W[0]*W[1]*I[0]/G]]):[[W[0],0],[W[1],0],[W[2],0]]):[[0,(I=pr(B,1-$))[0]/I[1]],[1/I[1],0],[I[2]/I[1],0]]),Te=function(Le,Fe){var qe=Fe[0]*Fe[0]+Fe[1]*Fe[1];return[(Le[0]*Fe[0]+Le[1]*Fe[1])/qe,(Le[1]*Fe[0]-Le[0]*Fe[1])/qe]}(he[0],he[1]);return[T(Te[1],Te[0])/-1,2*n(f(-.5*t(te*Te[0]*Te[0]+te*Te[1]*Te[1])))-g]};var Bt=e(61780);function Qt(Je){var et=l(Je),ut=x(Je),B=fn(Je);function $(W,I){var G=B(W,I);W=G[0],I=G[1];var te=l(I),ie=x(I),he=x(W),Te=P(et*te+ut*ie*he),Le=l(Te),Fe=w(Le)>c?Te/Le:1;return[Fe*ut*l(W),(w(W)>g?Fe:-Fe)*(et*ie-ut*te*he)]}return B.invert=fn(-Je),$.invert=function(W,I){var G=L(W*W+I*I),te=-l(G),ie=x(G),he=G*ie,Te=-I*te,Le=G*et,Fe=L(he*he+Te*Te-Le*Le),qe=T(he*Le+Te*Fe,Te*Le-he*Fe),We=(G>g?-1:1)*T(W*te,G*x(qe)*ie+I*l(qe)*te);return B.invert(We,qe)},$}function fn(Je){var et=l(Je),ut=x(Je);return function(B,$){var W=x($),I=x(B)*W,G=l(B)*W,te=l($);return[T(G,I*ut-te*et),D(te*ut+I*et)]}}function dn(){var Je=0,et=(0,v.U)(Qt),ut=et(Je),B=ut.rotate,$=ut.stream,W=(0,Bt.c)();return ut.parallel=function(I){if(!arguments.length)return Je*E;var G=ut.rotate();return et(Je=I*k).rotate(G)},ut.rotate=function(I){return arguments.length?(B.call(ut,[I[0],I[1]-Je*E]),W.center([-I[0],-I[1]]),ut):((I=B.call(ut))[1]+=Je*E,I)},ut.stream=function(I){return(I=$(I)).sphere=function(){I.polygonStart();var G,te=W.radius(89.99)().coordinates[0],ie=te.length-1,he=-1;for(I.lineStart();++he<ie;)I.point((G=te[he])[0],G[1]);for(I.lineEnd(),ie=(te=W.radius(90.01)().coordinates[0]).length-1,I.lineStart();--he>=0;)I.point((G=te[he])[0],G[1]);I.lineEnd(),I.polygonEnd()},I},ut.scale(79.4187).parallel(45).clipAngle(179.999)}var xn=e(84706),sn=e(16016),$t=D(1-1/3)*E,Yt=$e(0);function rn(Je){var et=$t*k,ut=Mt(p,et)[0]-Mt(-p,et)[0],B=Yt(0,et)[1],$=Mt(0,et)[1],W=M-$,I=h/Je,G=4/h,te=B+W*W*4/h;function ie(he,Te){var Le,Fe=w(Te);if(Fe>et){var qe=r(Je-1,o(0,s((he+p)/I)));(Le=Mt(he+=p*(Je-1)/Je-qe*I,Fe))[0]=Le[0]*h/ut-h*(Je-1)/(2*Je)+qe*h/Je,Le[1]=B+4*(Le[1]-$)*W/h,Te<0&&(Le[1]=-Le[1])}else Le=Yt(he,Te);return Le[0]*=G,Le[1]/=te,Le}return ie.invert=function(he,Te){he/=G;var Le=w(Te*=te);if(Le>B){var Fe=r(Je-1,o(0,s((he+p)/I)));he=(he+p*(Je-1)/Je-Fe*I)*ut/h;var qe=Mt.invert(he,.25*(Le-B)*h/W+$);return qe[0]-=p*(Je-1)/Je-Fe*I,Te<0&&(qe[1]=-qe[1]),qe}return Yt.invert(he,Te)},ie}function ln(Je,et){return[Je,1&et?90-c:$t]}function An(Je,et){return[Je,1&et?-90+c:-$t]}function En(Je){return[Je[0]*(1-c),Je[1]]}function Rn(){var Je=4,et=(0,v.U)(rn),ut=et(Je),B=ut.stream;return ut.lobes=function($){return arguments.length?et(Je=+$):Je},ut.stream=function($){var W=ut.rotate(),I=B($),G=(ut.rotate([0,0]),B($));return ut.rotate(W),I.sphere=function(){var te,ie;(0,sn.c)((te=180/Je,ie=[].concat((0,xn.ik)(-180,180+te/2,te).map(ln),(0,xn.ik)(180,-180-te/2,-te).map(An)),{type:"Polygon",coordinates:[te===180?ie.map(En):ie]}),G)},I},ut.scale(239.75)}function jn(Je){var et,ut=1+Je,B=D(l(1/ut)),$=2*L(p/(et=p+4*B*ut)),W=.5*$*(ut+L(Je*(2+Je))),I=Je*Je,G=ut*ut;function te(ie,he){var Te,Le,Fe=1-l(he);if(Fe&&Fe<2){var qe,We=g-he,nt=25;do{var ft=l(We),pt=x(We),wt=B+T(ft,ut-pt),Ct=1+G-2*ut*pt;We-=qe=(We-I*B-ut*ft+Ct*wt-.5*Fe*et)/(2*ut*ft*wt)}while(w(qe)>_&&--nt>0);Te=$*L(Ct),Le=ie*wt/p}else Te=$*(Je+Fe),Le=ie*B/p;return[Te*l(Le),W-Te*x(Le)]}return te.invert=function(ie,he){var Te=ie*ie+(he-=W)*he,Le=(1+G-Te/($*$))/(2*ut),Fe=P(Le),qe=l(Fe),We=B+T(qe,ut-Le);return[D(ie/L(Te))*p/We,D(1-2*(Fe-I*B-ut*qe+(1+G-2*ut*Le)*We)/et)]},te}function Qn(){var Je=1,et=(0,v.U)(jn),ut=et(Je);return ut.ratio=function(B){return arguments.length?et(Je=+B):Je},ut.scale(167.774).center([0,18.67])}var qn=.7109889596207567,Kn=.0528035274542;function tr(Je,et){return et>-qn?((Je=ce(Je,et))[1]+=Kn,Je):Re(Je,et)}function Jn(){return(0,v.c)(tr).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function hr(Je,et){return w(et)>qn?((Je=ce(Je,et))[1]-=et>0?Kn:-Kn,Je):Re(Je,et)}function br(){return(0,v.c)(hr).scale(152.63)}function gr(Je,et,ut,B){var $=L(4*p/(2*ut+(1+Je-et/2)*l(2*ut)+(Je+et)/2*l(4*ut)+et/2*l(6*ut))),W=L(B*l(ut)*L((1+Je*x(2*ut)+et*x(4*ut))/(1+Je+et))),I=ut*te(1);function G(Te){return L(1+Je*x(2*Te)+et*x(4*Te))}function te(Te){var Le=Te*ut;return(2*Le+(1+Je-et/2)*l(2*Le)+(Je+et)/2*l(4*Le)+et/2*l(6*Le))/ut}function ie(Te){return G(Te)*l(Te)}var he=function(Te,Le){var Fe=ut*xe(te,I*l(Le)/ut,Le/p);isNaN(Fe)&&(Fe=ut*u(Le));var qe=$*G(Fe);return[qe*W*Te/p*x(Fe),qe/W*l(Fe)]};return he.invert=function(Te,Le){var Fe=xe(ie,Le*W/$);return[Te*p/(x(Fe)*$*W*G(Fe)),D(ut*te(Fe/ut)/I)]},ut===0&&($=L(B/p),(he=function(Te,Le){return[Te*$,l(Le)/$]}).invert=function(Te,Le){return[Te/$,D(Le*$)]}),he}function ar(){var Je=1,et=0,ut=45*k,B=2,$=(0,v.U)(gr),W=$(Je,et,ut,B);return W.a=function(I){return arguments.length?$(Je=+I,et,ut,B):Je},W.b=function(I){return arguments.length?$(Je,et=+I,ut,B):et},W.psiMax=function(I){return arguments.length?$(Je,et,ut=+I*k,B):ut*E},W.ratio=function(I){return arguments.length?$(Je,et,ut,B=+I):B},W.scale(180.739)}function mr(Je,et,ut,B,$,W,I,G,te,ie,he){if(he.nanEncountered)return NaN;var Te,Le,Fe,qe,We,nt,ft,pt,wt,Ct;if(Le=Je(et+.25*(Te=ut-et)),Fe=Je(ut-.25*Te),isNaN(Le))he.nanEncountered=!0;else{if(!isNaN(Fe))return Ct=((nt=(qe=Te*(B+4*Le+$)/12)+(We=Te*($+4*Fe+W)/12))-I)/15,ie>te?(he.maxDepthCount++,nt+Ct):Math.abs(Ct)<G?nt+Ct:(pt=mr(Je,et,ft=et+.5*Te,B,Le,$,qe,.5*G,te,ie+1,he),isNaN(pt)?(he.nanEncountered=!0,NaN):(wt=mr(Je,ft,ut,$,Fe,W,We,.5*G,te,ie+1,he),isNaN(wt)?(he.nanEncountered=!0,NaN):pt+wt));he.nanEncountered=!0}}function kr(Je,et,ut,B,$){B===void 0&&(B=1e-8),$===void 0&&($=20);var W=Je(et),I=Je(.5*(et+ut)),G=Je(ut);return mr(Je,et,ut,W,I,G,(W+4*I+G)*(ut-et)/6,B,$,1,{maxDepthCount:0,nanEncountered:!1})}function Pr(Je,et,ut){function B(Fe){return Je+(1-Je)*i(1-i(Fe,et),1/et)}function $(Fe){return kr(B,0,Fe,1e-4)}for(var W=1/$(1),I=1e3,G=1.00000001*W,te=[],ie=0;ie<=I;ie++)te.push($(ie/I)*G);function he(Fe){var qe=0,We=I,nt=500;do te[nt]>Fe?We=nt:qe=nt,nt=qe+We>>1;while(nt>qe);var ft=te[nt+1]-te[nt];return ft&&(ft=(Fe-te[nt+1])/ft),(nt+1+ft)/I}var Te=2*he(1)/p*W/ut,Le=function(Fe,qe){var We=he(w(l(qe))),nt=B(We)*Fe;return We/=Te,[nt,qe>=0?We:-We]};return Le.invert=function(Fe,qe){var We;return w(qe*=Te)<1&&(We=u(qe)*D($(w(qe))*W)),[Fe/B(w(qe)),We]},Le}function wi(){var Je=0,et=2.5,ut=1.183136,B=(0,v.U)(Pr),$=B(Je,et,ut);return $.alpha=function(W){return arguments.length?B(Je=+W,et,ut):Je},$.k=function(W){return arguments.length?B(Je,et=+W,ut):et},$.gamma=function(W){return arguments.length?B(Je,et,ut=+W):ut},$.scale(152.63)}function Ti(Je,et){return w(Je[0]-et[0])<c&&w(Je[1]-et[1])<c}function Qi(Je,et){for(var ut,B,$,W=-1,I=Je.length,G=Je[0],te=[];++W<I;){B=((ut=Je[W])[0]-G[0])/et,$=(ut[1]-G[1])/et;for(var ie=0;ie<et;++ie)te.push([G[0]+ie*B,G[1]+ie*$]);G=ut}return te.push(ut),te}function bi(Je,et,ut){var B,$;function W(te,ie){for(var he=ie<0?-1:1,Te=et[+(ie<0)],Le=0,Fe=Te.length-1;Le<Fe&&te>Te[Le][2][0];++Le);var qe=Je(te-Te[Le][1][0],ie);return qe[0]+=Je(Te[Le][1][0],he*ie>he*Te[Le][0][1]?Te[Le][0][1]:ie)[0],qe}ut?W.invert=ut(W):Je.invert&&(W.invert=function(te,ie){for(var he=$[+(ie<0)],Te=et[+(ie<0)],Le=0,Fe=he.length;Le<Fe;++Le){var qe=he[Le];if(qe[0][0]<=te&&te<qe[1][0]&&qe[0][1]<=ie&&ie<qe[1][1]){var We=Je.invert(te-Je(Te[Le][1][0],0)[0],ie);return We[0]+=Te[Le][1][0],Ti(W(We[0],We[1]),[te,ie])?We:null}}});var I=(0,v.c)(W),G=I.stream;return I.stream=function(te){var ie=I.rotate(),he=G(te),Te=(I.rotate([0,0]),G(te));return I.rotate(ie),he.sphere=function(){(0,sn.c)(B,Te)},he},I.lobes=function(te){return arguments.length?(B=function(ie){var he,Te,Le,Fe,qe,We,nt,ft=[],pt=ie[0].length;for(nt=0;nt<pt;++nt)Te=(he=ie[0][nt])[0][0],Le=he[0][1],Fe=he[1][1],qe=he[2][0],We=he[2][1],ft.push(Qi([[Te+c,Le+c],[Te+c,Fe-c],[qe-c,Fe-c],[qe-c,We+c]],30));for(nt=ie[1].length-1;nt>=0;--nt)Te=(he=ie[1][nt])[0][0],Le=he[0][1],Fe=he[1][1],qe=he[2][0],We=he[2][1],ft.push(Qi([[qe-c,We-c],[qe-c,Fe+c],[Te+c,Fe+c],[Te+c,Le-c]],30));return{type:"Polygon",coordinates:[(0,xn.Uf)(ft)]}}(te),et=te.map(function(ie){return ie.map(function(he){return[[he[0][0]*k,he[0][1]*k],[he[1][0]*k,he[1][1]*k],[he[2][0]*k,he[2][1]*k]]})}),$=et.map(function(ie){return ie.map(function(he){var Te,Le=Je(he[0][0],he[0][1])[0],Fe=Je(he[2][0],he[2][1])[0],qe=Je(he[1][0],he[0][1])[1],We=Je(he[1][0],he[1][1])[1];return qe>We&&(Te=qe,qe=We,We=Te),[[Le,qe],[Fe,We]]})}),I):et.map(function(ie){return ie.map(function(he){return[[he[0][0]*E,he[0][1]*E],[he[1][0]*E,he[1][1]*E],[he[2][0]*E,he[2][1]*E]]})})},et!=null&&I.lobes(et),I}tr.invert=function(Je,et){return et>-qn?ce.invert(Je,et-Kn):Re.invert(Je,et)},hr.invert=function(Je,et){return w(et)>qn?ce.invert(Je,et+(et>0?Kn:-Kn)):Re.invert(Je,et)};var zi=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Oo(){return bi(ke,zi).scale(160.857)}var Rr=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function so(){return bi(hr,Rr).scale(152.63)}var aa=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function ro(){return bi(ce,aa).scale(169.529)}var Za=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function fs(){return bi(ce,Za).scale(169.529).rotate([20,0])}var _o=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function Ra(){return bi(tr,_o,ve).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var Fa=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function hs(){return bi(Re,Fa).scale(152.63).rotate([-20,0])}function sa(Je,et){return[3/h*Je*L(p*p/3-et*et),et]}function ya(){return(0,v.c)(sa).scale(158.837)}function xa(Je){function et(ut,B){if(w(w(B)-g)<c)return[0,B<0?-2:2];var $=l(B),W=i((1+$)/(1-$),Je/2),I=.5*(W+1/W)+x(ut*=Je);return[2*l(ut)/I,(W-1/W)/I]}return et.invert=function(ut,B){var $=w(B);if(w($-2)<c)return ut?null:[0,u(B)*g];if($>2)return null;var W=(ut/=2)*ut,I=(B/=2)*B,G=2*B/(1+W+I);return G=i((1+G)/(1-G),1/Je),[T(2*ut,1-W-I)/Je,D((G-1)/(G+1))]},et}function gi(){var Je=.5,et=(0,v.U)(xa),ut=et(Je);return ut.spacing=function(B){return arguments.length?et(Je=+B):Je},ut.scale(124.75)}sa.invert=function(Je,et){return[h/3*Je/L(p*p/3-et*et),et]};var lo=p/y;function Xa(Je,et){return[Je*(1+L(x(et)))/2,et/(x(et/2)*x(Je/6))]}function Na(){return(0,v.c)(Xa).scale(97.2672)}function ba(Je,et){var ut=Je*Je,B=et*et;return[Je*(.975534+B*(-.0143059*ut-.119161+-.0547009*B)),et*(1.00384+ut*(.0802894+-.02855*B+199025e-9*ut)+B*(.0998909+-.0491032*B))]}function ds(){return(0,v.c)(ba).scale(139.98)}function za(Je,et){return[l(Je)/x(et),d(et)*x(Je)]}function ps(){return(0,v.c)(za).scale(144.049).clipAngle(89.999)}function Ka(Je){var et=x(Je),ut=d(m+Je/2);function B($,W){var I=W-Je,G=w(I)<c?$*et:w(G=m+W/2)<c||w(w(G)-g)<c?0:$*I/t(d(G)/ut);return[G,I]}return B.invert=function($,W){var I,G=W+Je;return[w(W)<c?$/et:w(I=m+G/2)<c||w(w(I)-g)<c?0:$*t(d(I)/ut)/W,G]},B}function gs(){return Ie(Ka).parallel(40).scale(158.837)}function Ba(Je,et){return[Je,1.25*t(d(m+.4*et))]}function _u(){return(0,v.c)(Ba).scale(108.318)}function Xl(Je){var et=Je.length-1;function ut(B,$){for(var W,I=x($),G=2/(1+I*x(B)),te=G*I*l(B),ie=G*l($),he=et,Te=Je[he],Le=Te[0],Fe=Te[1];--he>=0;)Le=(Te=Je[he])[0]+te*(W=Le)-ie*Fe,Fe=Te[1]+te*Fe+ie*W;return[Le=te*(W=Le)-ie*Fe,Fe=te*Fe+ie*W]}return ut.invert=function(B,$){var W=20,I=B,G=$;do{for(var te,ie=et,he=Je[ie],Te=he[0],Le=he[1],Fe=0,qe=0;--ie>=0;)Fe=Te+I*(te=Fe)-G*qe,qe=Le+I*qe+G*te,Te=(he=Je[ie])[0]+I*(te=Te)-G*Le,Le=he[1]+I*Le+G*te;var We,nt,ft=(Fe=Te+I*(te=Fe)-G*qe)*Fe+(qe=Le+I*qe+G*te)*qe;I-=We=((Te=I*(te=Te)-G*Le-B)*Fe+(Le=I*Le+G*te-$)*qe)/ft,G-=nt=(Le*Fe-Te*qe)/ft}while(w(We)+w(nt)>c*c&&--W>0);if(W){var pt=L(I*I+G*G),wt=2*n(.5*pt),Ct=l(wt);return[T(I*Ct,pt*x(wt)),pt?D(G*Ct/pt):0]}},ut}Xa.invert=function(Je,et){var ut=w(Je),B=w(et),$=c,W=g;B<lo?W*=B/lo:$+=6*P(lo/B);for(var I=0;I<25;I++){var G=l(W),te=L(x(W)),ie=l(W/2),he=x(W/2),Te=l($/6),Le=x($/6),Fe=.5*$*(1+te)-ut,qe=W/(he*Le)-B,We=te?-.25*$*G/te:0,nt=.5*(1+te),ft=(1+.5*W*ie/he)/(he*Le),pt=W/he*(Te/6)/(Le*Le),wt=We*pt-ft*nt,Ct=(Fe*pt-qe*nt)/wt,At=(qe*We-Fe*ft)/wt;if(W-=Ct,$-=At,w(Ct)<c&&w(At)<c)break}return[Je<0?-$:$,et<0?-W:W]},ba.invert=function(Je,et){var ut=u(Je)*p,B=et/2,$=50;do{var W=ut*ut,I=B*B,G=ut*B,te=ut*(.975534+I*(-.0143059*W-.119161+-.0547009*I))-Je,ie=B*(1.00384+W*(.0802894+-.02855*I+199025e-9*W)+I*(.0998909+-.0491032*I))-et,he=.975534-I*(.119161+3*W*.0143059+.0547009*I),Te=-G*(.238322+.2188036*I+.0286118*W),Le=G*(.1605788+7961e-7*W+-.0571*I),Fe=1.00384+W*(.0802894+199025e-9*W)+I*(3*(.0998909-.02855*W)-.245516*I),qe=Te*Le-Fe*he,We=(ie*Te-te*Fe)/qe,nt=(te*Le-ie*he)/qe;ut-=We,B-=nt}while((w(We)>c||w(nt)>c)&&--$>0);return $&&[ut,B]},za.invert=function(Je,et){var ut=Je*Je,B=et*et+1,$=ut+B,W=Je?b*L(($-L($*$-4*ut))/ut):1/L(B);return[D(Je*W),u(et)*P(W)]},Ba.invert=function(Je,et){return[Je,2.5*n(f(.8*et))-.625*p]};var Ls=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],zu=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],Bu=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],Os=[[.9245,0],[0,0],[.01943,0]],ju=[[.721316,0],[0,0],[-.00881625,-.00617325]];function cc(){return Rs(Ls,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function fc(){return Rs(zu,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function Ps(){return Rs(Bu,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function ja(){return Rs(Os,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function tl(){return Rs(ju,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function Rs(Je,et){var ut=(0,v.c)(Xl(Je)).rotate(et).clipAngle(90),B=(0,Xe.c)(et),$=ut.center;return delete ut.rotate,ut.center=function(W){return arguments.length?$(B(W)):B.invert($())},ut}var Al=L(6),Fs=L(7);function _a(Je,et){var ut=D(7*l(et)/(3*Al));return[Al*Je*(2*x(2*ut/3)-1)/Fs,9*l(ut/3)/Fs]}function wu(){return(0,v.c)(_a).scale(164.859)}function ms(Je,et){for(var ut,B=(1+b)*l(et),$=et,W=0;W<25&&($-=ut=(l($/2)+l($)-B)/(.5*x($/2)+x($)),!(w(ut)<c));W++);return[Je*(1+2*x($)/x($/2))/(3*y),2*L(3)*l($/2)/L(2+y)]}function Ja(){return(0,v.c)(ms).scale(188.209)}function Qa(Je,et){for(var ut,B=L(6/(4+p)),$=(1+p/4)*l(et),W=et/2,I=0;I<25&&(W-=ut=(W/2+l(W)-$)/(.5+x(W)),!(w(ut)<c));I++);return[B*(.5+x(W))*Je/1.5,B*W]}function vs(){return(0,v.c)(Qa).scale(166.518)}_a.invert=function(Je,et){var ut=3*D(et*Fs/9);return[Je*Fs/(Al*(2*x(2*ut/3)-1)),D(3*l(ut)*Al/7)]},ms.invert=function(Je,et){var ut=et*L(2+y)/(2*L(3)),B=2*D(ut);return[3*y*Je/(1+2*x(B)/x(B/2)),D((ut+l(B))/(1+b))]},Qa.invert=function(Je,et){var ut=L(6/(4+p)),B=et/ut;return w(w(B)-g)<c&&(B=B<0?-g:g),[1.5*Je/(ut*(.5+x(B))),D((B/2+l(B))/(1+p/4))]};var $r=e(47984);function nl(Je,et){var ut=et*et,B=ut*ut,$=ut*B;return[Je*(.84719-.13063*ut+$*$*(.05494*ut-.04515-.02326*B+.00331*$)),et*(1.01183+B*B*(.01926*ut-.02625-.00396*B))]}function hc(){return(0,v.c)(nl).scale(175.295)}function Kl(Je,et){return[Je*(1+x(et))/2,2*(et-d(et/2))]}function rl(){return(0,v.c)(Kl).scale(152.63)}nl.invert=function(Je,et){var ut,B,$,W,I=et,G=25;do I-=ut=(I*(1.01183+($=(B=I*I)*B)*$*(.01926*B-.02625-.00396*$))-et)/(1.01183+$*$*(.21186*B-.23625+-.05148*$));while(w(ut)>_&&--G>0);return[Je/(.84719-.13063*(B=I*I)+(W=B*($=B*B))*W*(.05494*B-.04515-.02326*$+.00331*W)),I]},Kl.invert=function(Je,et){for(var ut=et/2,B=0,$=1/0;B<10&&w($)>c;++B){var W=x(et/2);et-=$=(et-d(et/2)-ut)/(1-.5/(W*W))}return[2*Je/(1+x(et)),et]};var Vu=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function dc(){return bi(de(1/0),Vu).rotate([20,0]).scale(152.63)}function Jl(Je,et){var ut=l(et),B=x(et),$=u(Je);if(Je===0||w(et)===g)return[0,et];if(et===0)return[Je,0];if(w(Je)===g)return[Je*B,g*ut];var W=p/(2*Je)-2*Je/p,I=2*et/p,G=(1-I*I)/(ut-I),te=W*W,ie=G*G,he=1+te/ie,Te=1+ie/te,Le=(W*ut/G-W/2)/he,Fe=(ie*ut/te+G/2)/Te,qe=Fe*Fe-(ie*ut*ut/te+G*ut-1)/Te;return[g*(Le+L(Le*Le+B*B/he)*$),g*(Fe+L(qe<0?0:qe)*u(-et*W)*$)]}function pc(){return(0,v.c)(Jl).scale(127.267)}Jl.invert=function(Je,et){var ut=(Je/=g)*Je,B=ut+(et/=g)*et,$=p*p;return[Je?(B-1+L((1-B)*(1-B)+4*ut))/(2*Je)*g:0,xe(function(W){return B*(p*l(W)-2*W)*p+4*W*W*(et-l(W))+2*p*W-$*et},0)]};var ys=1.0148,Ns=.23185,es=-.14499,wa=.02406,il=ys,Uu=5*Ns,kl=7*es,Ql=9*wa,Xo=1.790857183;function eu(Je,et){var ut=et*et;return[Je,et*(ys+ut*ut*(Ns+ut*(es+wa*ut)))]}function Hu(){return(0,v.c)(eu).scale(139.319)}function ol(Je,et){if(w(et)<c)return[Je,0];var ut=d(et),B=Je*l(et);return[l(B)/ut,et+(1-x(B))/ut]}function zs(){return(0,v.c)(ol).scale(103.74)}eu.invert=function(Je,et){et>Xo?et=Xo:et<-1.790857183&&(et=-1.790857183);var ut,B=et;do{var $=B*B;B-=ut=(B*(ys+$*$*(Ns+$*(es+wa*$)))-et)/(il+$*$*(Uu+$*(kl+Ql*$)))}while(w(ut)>c);return[Je,B]},ol.invert=function(Je,et){if(w(et)<c)return[Je,0];var ut,B=Je*Je+et*et,$=.5*et,W=10;do{var I=d($),G=1/x($),te=B-2*et*$+$*$;$-=ut=(I*te+2*($-et))/(2+te*G*G+2*($-et)*I)}while(w(ut)>c&&--W>0);return I=d($),[(w(et)<w($+1/I)?D(Je*I):u(et)*u(Je)*(P(w(Je*I))+g))/l($),$]};var al=e(13696),Bs=e(27284);function js(Je,et){return[Je[0]*et[0]+Je[1]*et[3],Je[0]*et[1]+Je[1]*et[4],Je[0]*et[2]+Je[1]*et[5]+Je[2],Je[3]*et[0]+Je[4]*et[3],Je[3]*et[1]+Je[4]*et[4],Je[3]*et[2]+Je[4]*et[5]+Je[5]]}function Sl(Je,et){return[Je[0]-et[0],Je[1]-et[1]]}function tu(Je){return L(Je[0]*Je[0]+Je[1]*Je[1])}function fi(Je,et,ut){function B(G,te){var ie,he=et(G,te),Te=he.project([G*E,te*E]);return(ie=he.transform)?[ie[0]*Te[0]+ie[1]*Te[1]+ie[2],-(ie[3]*Te[0]+ie[4]*Te[1]+ie[5])]:(Te[1]=-Te[1],Te)}function $(G,te){var ie=G.project.invert,he=G.transform,Te=te;if(he&&(he=function(nt){var ft=1/(nt[0]*nt[4]-nt[1]*nt[3]);return[ft*nt[4],-ft*nt[1],ft*(nt[1]*nt[5]-nt[2]*nt[4]),-ft*nt[3],ft*nt[0],ft*(nt[2]*nt[3]-nt[0]*nt[5])]}(he),Te=[he[0]*Te[0]+he[1]*Te[1]+he[2],he[3]*Te[0]+he[4]*Te[1]+he[5]]),ie&&G===function(nt){return et(nt[0]*k,nt[1]*k)}(Le=ie(Te)))return Le;for(var Le,Fe=G.children,qe=0,We=Fe&&Fe.length;qe<We;++qe)if(Le=$(Fe[qe],te))return Le}(function G(te,ie){if(te.edges=function(At){for(var zt=At.length,It=[],Xt=At[zt-1],Gt=0;Gt<zt;++Gt)It.push([Xt,Xt=At[Gt]]);return It}(te.face),ie.face){var he=te.shared=function(At,zt){for(var It,Xt,Gt=At.length,Vt=null,pn=0;pn<Gt;++pn){It=At[pn];for(var vn=zt.length;--vn>=0;)if(Xt=zt[vn],It[0]===Xt[0]&&It[1]===Xt[1]){if(Vt)return[Vt,It];Vt=It}}}(te.face,ie.face),Te=(We=he.map(ie.project),nt=he.map(te.project),ft=Sl(We[1],We[0]),pt=Sl(nt[1],nt[0]),wt=function(At,zt){return T(At[0]*zt[1]-At[1]*zt[0],At[0]*zt[0]+At[1]*zt[1])}(ft,pt),Ct=tu(ft)/tu(pt),js([1,0,We[0][0],0,1,We[0][1]],js([Ct,0,0,0,Ct,0],js([x(wt),l(wt),0,-l(wt),x(wt),0],[1,0,-nt[0][0],0,1,-nt[0][1]]))));te.transform=ie.transform?js(ie.transform,Te):Te;for(var Le=ie.edges,Fe=0,qe=Le.length;Fe<qe;++Fe)wo(he[0],Le[Fe][1])&&wo(he[1],Le[Fe][0])&&(Le[Fe]=te),wo(he[0],Le[Fe][0])&&wo(he[1],Le[Fe][1])&&(Le[Fe]=te);for(Fe=0,qe=(Le=te.edges).length;Fe<qe;++Fe)wo(he[0],Le[Fe][0])&&wo(he[1],Le[Fe][1])&&(Le[Fe]=ie),wo(he[0],Le[Fe][1])&&wo(he[1],Le[Fe][0])&&(Le[Fe]=ie)}else te.transform=ie.transform;var We,nt,ft,pt,wt,Ct;return te.children&&te.children.forEach(function(At){G(At,te)}),te})(Je,{transform:null}),Ta(Je)&&(B.invert=function(G,te){var ie=$(Je,[G,-te]);return ie&&(ie[0]*=k,ie[1]*=k,ie)});var W=(0,v.c)(B),I=W.stream;return W.stream=function(G){var te=W.rotate(),ie=I(G),he=(W.rotate([0,0]),I(G));return W.rotate(te),ie.sphere=function(){he.polygonStart(),he.lineStart(),xs(he,Je),he.lineEnd(),he.polygonEnd()},ie},W.angle(ut==null?-30:ut*E)}function xs(Je,et,ut){var B,$,W=et.edges,I=W.length,G={type:"MultiPoint",coordinates:et.face},te=et.face.filter(function(We){return w(We[1])!==90}),ie=(0,al.c)({type:"MultiPoint",coordinates:te}),he=!1,Te=-1,Le=ie[1][0]-ie[0][0],Fe=Le===180||Le===360?[(ie[0][0]+ie[1][0])/2,(ie[0][1]+ie[1][1])/2]:(0,Ge.c)(G);if(ut)for(;++Te<I&&W[Te]!==ut;);++Te;for(var qe=0;qe<I;++qe)$=W[(qe+Te)%I],Array.isArray($)?(he||(Je.point((B=(0,Bs.c)($[0],Fe)(c))[0],B[1]),he=!0),Je.point((B=(0,Bs.c)($[1],Fe)(c))[0],B[1])):(he=!1,$!==ut&&xs(Je,$,et))}function wo(Je,et){return Je&&et&&Je[0]===et[0]&&Je[1]===et[1]}function Ta(Je){return Je.project.invert||Je.children&&Je.children.some(Ta)}var ni=e(53285),ui=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Ko=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(Je){return Je.map(function(et){return ui[et]})});function sl(Je){Je=Je||function(ut){var B=(0,Ge.c)({type:"MultiPoint",coordinates:ut});return(0,ni.c)().scale(1).translate([0,0]).rotate([-B[0],-B[1]])};var et=Ko.map(function(ut){return{face:ut,project:Je(ut)}});return[-1,0,0,1,0,1,4,5].forEach(function(ut,B){var $=et[ut];$&&($.children||($.children=[])).push(et[B])}),fi(et[0],function(ut,B){return et[ut<-p/2?B<0?6:4:ut<0?B<0?2:0:ut<p/2?B<0?3:1:B<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var El=2/L(3);function nu(Je,et){var ut=Mt(Je,et);return[ut[0]*El,ut[1]]}function Cl(Je){Je=Je||function(ut){var B=(0,Ge.c)({type:"MultiPoint",coordinates:ut});return(0,v.c)(nu).translate([0,0]).scale(1).rotate(B[1]>0?[-B[0],0]:[180-B[0],180])};var et=Ko.map(function(ut){return{face:ut,project:Je(ut)}});return[-1,0,0,1,0,1,4,5].forEach(function(ut,B){var $=et[ut];$&&($.children||($.children=[])).push(et[B])}),fi(et[0],function(ut,B){return et[ut<-p/2?B<0?6:4:ut<0?B<0?2:0:ut<p/2?B<0?3:1:B<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function Dl(Je){Je=Je||function(W){var I=W.length===6?(0,Ge.c)({type:"MultiPoint",coordinates:W}):W[0];return(0,ni.c)().scale(1).translate([0,0]).rotate([-I[0],-I[1]])};var et=Ko.map(function(W){for(var I,G=W.map(_s),te=G.length,ie=G[te-1],he=[],Te=0;Te<te;++Te)I=G[Te],he.push(bs([.9486832980505138*ie[0]+.31622776601683794*I[0],.9486832980505138*ie[1]+.31622776601683794*I[1],.9486832980505138*ie[2]+.31622776601683794*I[2]]),bs([.9486832980505138*I[0]+.31622776601683794*ie[0],.9486832980505138*I[1]+.31622776601683794*ie[1],.9486832980505138*I[2]+.31622776601683794*ie[2]])),ie=I;return he}),ut=[],B=[-1,0,0,1,0,1,4,5];et.forEach(function(W,I){for(var G,te,ie=Ko[I],he=ie.length,Te=ut[I]=[],Le=0;Le<he;++Le)et.push([ie[Le],W[(2*Le+2)%(2*he)],W[(2*Le+1)%(2*he)]]),B.push(I),Te.push((G=_s(W[(2*Le+2)%(2*he)]),te=_s(W[(2*Le+1)%(2*he)]),[G[1]*te[2]-G[2]*te[1],G[2]*te[0]-G[0]*te[2],G[0]*te[1]-G[1]*te[0]]))});var $=et.map(function(W){return{project:Je(W),face:W}});return B.forEach(function(W,I){var G=$[W];G&&(G.children||(G.children=[])).push($[I])}),fi($[0],function(W,I){var G=x(I),te=[G*x(W),G*l(W),l(I)],ie=W<-p/2?I<0?6:4:W<0?I<0?2:0:W<p/2?I<0?3:1:I<0?7:5,he=ut[ie];return $[la(he[0],te)<0?8+3*ie:la(he[1],te)<0?8+3*ie+1:la(he[2],te)<0?8+3*ie+2:ie]}).angle(-30).scale(110.625).center([0,45])}function la(Je,et){for(var ut=0,B=Je.length,$=0;ut<B;++ut)$+=Je[ut]*et[ut];return $}function bs(Je){return[T(Je[1],Je[0])*E,D(o(-1,r(1,Je[2])))*E]}function _s(Je){var et=Je[0]*k,ut=Je[1]*k,B=x(ut);return[B*x(et),B*l(et),l(ut)]}function Eo(){}function Il(Je,et){var ut,B=et.stream;if(!B)throw new Error("invalid projection");switch(Je&&Je.type){case"Feature":ut=uo;break;case"FeatureCollection":ut=ua;break;default:ut=go}return ut(Je,B)}function ua(Je,et){return{type:"FeatureCollection",features:Je.features.map(function(ut){return uo(ut,et)})}}function uo(Je,et){return{type:"Feature",id:Je.id,properties:Je.properties,geometry:go(Je.geometry,et)}}function go(Je,et){if(!Je)return null;if(Je.type==="GeometryCollection")return function(B,$){return{type:"GeometryCollection",geometries:B.geometries.map(function(W){return go(W,$)})}}(Je,et);var ut;switch(Je.type){case"Point":case"MultiPoint":ut=Va;break;case"LineString":case"MultiLineString":ut=Vs;break;case"Polygon":case"MultiPolygon":case"Sphere":ut=Ma;break;default:return null}return(0,sn.c)(Je,et(ut)),ut.result()}nu.invert=function(Je,et){return Mt.invert(Je/El,et)};var _i=[],mo=[],Va={point:function(Je,et){_i.push([Je,et])},result:function(){var Je=_i.length?_i.length<2?{type:"Point",coordinates:_i[0]}:{type:"MultiPoint",coordinates:_i}:null;return _i=[],Je}},Vs={lineStart:Eo,point:function(Je,et){_i.push([Je,et])},lineEnd:function(){_i.length&&(mo.push(_i),_i=[])},result:function(){var Je=mo.length?mo.length<2?{type:"LineString",coordinates:mo[0]}:{type:"MultiLineString",coordinates:mo}:null;return mo=[],Je}},Ma={polygonStart:Eo,lineStart:Eo,point:function(Je,et){_i.push([Je,et])},lineEnd:function(){var Je=_i.length;if(Je){do _i.push(_i[0].slice());while(++Je<4);mo.push(_i),_i=[]}},polygonEnd:Eo,result:function(){if(!mo.length)return null;var Je=[],et=[];return mo.forEach(function(ut){(function(B){if(($=B.length)<4)return!1;for(var $,W=0,I=B[$-1][1]*B[0][0]-B[$-1][0]*B[0][1];++W<$;)I+=B[W-1][1]*B[W][0]-B[W-1][0]*B[W][1];return I<=0})(ut)?Je.push([ut]):et.push(ut)}),et.forEach(function(ut){var B=ut[0];Je.some(function($){if(function(W,I){for(var G=I[0],te=I[1],ie=!1,he=0,Te=W.length,Le=Te-1;he<Te;Le=he++){var Fe=W[he],qe=Fe[0],We=Fe[1],nt=W[Le],ft=nt[0],pt=nt[1];We>te^pt>te&&G<(ft-qe)*(te-We)/(pt-We)+qe&&(ie=!ie)}return ie}($[0],B))return $.push(ut),!0})||Je.push([ut])}),mo=[],Je.length?Je.length>1?{type:"MultiPolygon",coordinates:Je}:{type:"Polygon",coordinates:Je[0]}:null}};function ws(Je){var et=Je(g,0)[0]-Je(-g,0)[0];function ut(B,$){var W=w(B)<g,I=Je(W?B:B>0?B-p:B+p,$),G=(I[0]-I[1])*b,te=(I[0]+I[1])*b;if(W)return[G,te];var ie=et*b,he=G>0^te>0?-1:1;return[he*G-u(te)*ie,he*te-u(G)*ie]}return Je.invert&&(ut.invert=function(B,$){var W=(B+$)*b,I=($-B)*b,G=w(W)<.5*et&&w(I)<.5*et;if(!G){var te=et*b,ie=W>0^I>0?-1:1,he=-ie*B+(I>0?1:-1)*te,Te=-ie*$+(W>0?1:-1)*te;W=(-he-Te)*b,I=(he-Te)*b}var Le=Je.invert(W,I);return G||(Le[0]+=W>0?p:-p),Le}),(0,v.c)(ut).rotate([-90,-90,45]).clipAngle(179.999)}function Po(){return ws(Un).scale(176.423)}function Us(){return ws(mn).scale(111.48)}function ts(Je,et){if(!(0<=(et=+et)&&et<=20))throw new Error("invalid digits");function ut(ie){var he=ie.length,Te=2,Le=new Array(he);for(Le[0]=+ie[0].toFixed(et),Le[1]=+ie[1].toFixed(et);Te<he;)Le[Te]=ie[Te],++Te;return Le}function B(ie){return ie.map(ut)}function $(ie){for(var he=ut(ie[0]),Te=[he],Le=1;Le<ie.length;Le++){var Fe=ut(ie[Le]);(Fe.length>2||Fe[0]!=he[0]||Fe[1]!=he[1])&&(Te.push(Fe),he=Fe)}return Te.length===1&&ie.length>1&&Te.push(ut(ie[ie.length-1])),Te}function W(ie){return ie.map($)}function I(ie){if(ie==null)return ie;var he;switch(ie.type){case"GeometryCollection":he={type:"GeometryCollection",geometries:ie.geometries.map(I)};break;case"Point":he={type:"Point",coordinates:ut(ie.coordinates)};break;case"MultiPoint":he={type:ie.type,coordinates:B(ie.coordinates)};break;case"LineString":he={type:ie.type,coordinates:$(ie.coordinates)};break;case"MultiLineString":case"Polygon":he={type:ie.type,coordinates:W(ie.coordinates)};break;case"MultiPolygon":he={type:"MultiPolygon",coordinates:ie.coordinates.map(W)};break;default:return ie}return ie.bbox!=null&&(he.bbox=ie.bbox),he}function G(ie){var he={type:"Feature",properties:ie.properties,geometry:I(ie.geometry)};return ie.id!=null&&(he.id=ie.id),ie.bbox!=null&&(he.bbox=ie.bbox),he}if(Je!=null)switch(Je.type){case"Feature":return G(Je);case"FeatureCollection":var te={type:"FeatureCollection",features:Je.features.map(G)};return Je.bbox!=null&&(te.bbox=Je.bbox),te;default:return I(Je)}return Je}function ca(Je){var et=l(Je);function ut(B,$){var W=et?d(B*et/2)/et:B/2;if(!$)return[2*W,-Je];var I=2*n(W*l($)),G=1/d($);return[l(I)*G,$+(1-x(I))*G-Je]}return ut.invert=function(B,$){if(w($+=Je)<c)return[et?2*n(et*B/2)/et:B,0];var W,I=B*B+$*$,G=0,te=10;do{var ie=d(G),he=1/x(G),Te=I-2*$*G+G*G;G-=W=(ie*Te+2*(G-$))/(2+Te*he*he+2*(G-$)*ie)}while(w(W)>c&&--te>0);var Le=B*(ie=d(G)),Fe=d(w($)<w(G+1/ie)?.5*D(Le):.5*P(Le)+p/4)/l(G);return[et?2*n(et*Fe)/et:2*Fe,G]},ut}function fa(){return Ie(ca).scale(131.215)}var Mi=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function Aa(Je,et){var ut,B=r(18,36*w(et)/p),$=s(B),W=B-$,I=(ut=Mi[$])[0],G=ut[1],te=(ut=Mi[++$])[0],ie=ut[1],he=(ut=Mi[r(19,++$)])[0],Te=ut[1];return[Je*(te+W*(he-I)/2+W*W*(he-2*te+I)/2),(et>0?g:-g)*(ie+W*(Te-G)/2+W*W*(Te-2*ie+G)/2)]}function Mr(){return(0,v.c)(Aa).scale(152.63)}function Ll(Je,et){var ut=function(I){function G(te,ie){var he=x(ie),Te=(I-1)/(I-he*x(te));return[Te*he*l(te),Te*l(ie)]}return G.invert=function(te,ie){var he=te*te+ie*ie,Te=L(he),Le=(I-L(1-he*(I+1)/(I-1)))/((I-1)/Te+Te/(I-1));return[T(te*Le,Te*L(1-Le*Le)),Te?D(ie*Le/Te):0]},G}(Je);if(!et)return ut;var B=x(et),$=l(et);function W(I,G){var te=ut(I,G),ie=te[1],he=ie*$/(Je-1)+B;return[te[0]*B/he,ie/he]}return W.invert=function(I,G){var te=(Je-1)/(Je-1-G*$);return ut.invert(te*I,te*G*B)},W}function Tu(){var Je=2,et=0,ut=(0,v.U)(Ll),B=ut(Je,et);return B.distance=function($){return arguments.length?ut(Je=+$,et):Je},B.tilt=function($){return arguments.length?ut(Je,et=$*k):et*E},B.scale(432.147).clipAngle(P(1/Je)*E-1e-6)}Mi.forEach(function(Je){Je[1]*=1.0144}),Aa.invert=function(Je,et){var ut=et/g,B=90*ut,$=r(18,w(B/5)),W=o(0,s($));do{var I=Mi[W][1],G=Mi[W+1][1],te=Mi[r(19,W+2)][1],ie=te-I,he=te-2*G+I,Te=2*(w(ut)-G)/ie,Le=he/ie,Fe=Te*(1-Le*Te*(1-2*Le*Te));if(Fe>=0||W===1){B=(et>=0?5:-5)*(Fe+$);var qe,We=50;do Fe=($=r(18,w(B)/5))-(W=s($)),I=Mi[W][1],G=Mi[W+1][1],te=Mi[r(19,W+2)][1],B-=(qe=(et>=0?g:-g)*(G+Fe*(te-I)/2+Fe*Fe*(te-2*G+I)/2)-et)*E;while(w(qe)>_&&--We>0);break}}while(--W>=0);var nt=Mi[W][0],ft=Mi[W+1][0],pt=Mi[r(19,W+2)][0];return[Je/(ft+Fe*(pt-nt)/2+Fe*Fe*(pt-2*ft+nt)/2),B*k]};var Ts=1e-4,Ms=1e4,Hs=-180,ll=Hs+Ts,yr=180,Ol=yr-Ts,ns=-90,co=ns+Ts,As=90,ka=As-Ts;function ha(Je){return Je.length>0}function Co(Je){return Je===ns||Je===As?[0,Je]:[Hs,(et=Je,Math.floor(et*Ms)/Ms)];var et}function Ua(Je){var et=Je[0],ut=Je[1],B=!1;return et<=ll?(et=Hs,B=!0):et>=Ol&&(et=yr,B=!0),ut<=co?(ut=ns,B=!0):ut>=ka&&(ut=As,B=!0),B?[et,ut]:Je}function da(Je){return Je.map(Ua)}function rs(Je,et,ut){for(var B=0,$=Je.length;B<$;++B){var W=Je[B].slice();ut.push({index:-1,polygon:et,ring:W});for(var I=0,G=W.length;I<G;++I){var te=W[I],ie=te[0],he=te[1];if(ie<=ll||ie>=Ol||he<=co||he>=ka){W[I]=Ua(te);for(var Te=I+1;Te<G;++Te){var Le=W[Te],Fe=Le[0],qe=Le[1];if(Fe>ll&&Fe<Ol&&qe>co&&qe<ka)break}if(Te===I+1)continue;if(I){var We={index:-1,polygon:et,ring:W.slice(0,I+1)};We.ring[We.ring.length-1]=Co(he),ut[ut.length-1]=We}else ut.pop();if(Te>=G)break;ut.push({index:-1,polygon:et,ring:W=W.slice(Te-1)}),W[0]=Co(W[0][1]),I=-1,G=W.length}}}}function Pl(Je){var et,ut,B,$,W,I,G=Je.length,te={},ie={};for(et=0;et<G;++et)B=(ut=Je[et]).ring[0],W=ut.ring[ut.ring.length-1],B[0]!==W[0]||B[1]!==W[1]?(ut.index=et,te[B]=ie[W]=ut):(ut.polygon.push(ut.ring),Je[et]=null);for(et=0;et<G;++et)if(ut=Je[et]){if(B=ut.ring[0],W=ut.ring[ut.ring.length-1],$=ie[B],I=te[W],delete te[B],delete ie[W],B[0]===W[0]&&B[1]===W[1]){ut.polygon.push(ut.ring);continue}$?(delete ie[B],delete te[$.ring[0]],$.ring.pop(),Je[$.index]=null,ut={index:-1,polygon:$.polygon,ring:$.ring.concat(ut.ring)},$===I?ut.polygon.push(ut.ring):(ut.index=G++,Je.push(te[ut.ring[0]]=ie[ut.ring[ut.ring.length-1]]=ut))):I?(delete te[W],delete ie[I.ring[I.ring.length-1]],ut.ring.pop(),ut={index:G++,polygon:I.polygon,ring:ut.ring.concat(I.ring)},Je[I.index]=null,Je.push(te[ut.ring[0]]=ie[ut.ring[ut.ring.length-1]]=ut)):(ut.ring.push(ut.ring[0]),ut.polygon.push(ut.ring))}}function ks(Je){var et={type:"Feature",geometry:Qr(Je.geometry)};return Je.id!=null&&(et.id=Je.id),Je.bbox!=null&&(et.bbox=Je.bbox),Je.properties!=null&&(et.properties=Je.properties),et}function Qr(Je){if(Je==null)return Je;var et,ut,B,$;switch(Je.type){case"GeometryCollection":et={type:"GeometryCollection",geometries:Je.geometries.map(Qr)};break;case"Point":et={type:"Point",coordinates:Ua(Je.coordinates)};break;case"MultiPoint":case"LineString":et={type:Je.type,coordinates:da(Je.coordinates)};break;case"MultiLineString":et={type:"MultiLineString",coordinates:Je.coordinates.map(da)};break;case"Polygon":var W=[];rs(Je.coordinates,W,ut=[]),Pl(ut),et={type:"Polygon",coordinates:W};break;case"MultiPolygon":ut=[],B=-1,$=Je.coordinates.length;for(var I=new Array($);++B<$;)rs(Je.coordinates[B],I[B]=[],ut);Pl(ut),et={type:"MultiPolygon",coordinates:I.filter(ha)};break;default:return Je}return Je.bbox!=null&&(et.bbox=Je.bbox),et}function vo(Je){if(Je==null)return Je;switch(Je.type){case"Feature":return ks(Je);case"FeatureCollection":var et={type:"FeatureCollection",features:Je.features.map(ks)};return Je.bbox!=null&&(et.bbox=Je.bbox),et;default:return Qr(Je)}}function Ro(Je,et){var ut=d(et/2),B=l(m*ut);return[Je*(.74482-.34588*B*B),1.70711*ut]}function Ha(){return(0,v.c)(Ro).scale(146.153)}function Fo(Je,et,ut){var B=(0,Bs.c)(et,ut),$=B(.5),W=(0,Xe.c)([-$[0],-$[1]])(et),I=B.distance/2,G=-D(l(W[1]*k)/l(I)),te=[-$[0],-$[1],-(W[0]>0?p-G:G)*E],ie=(0,v.c)(Je(I)).rotate(te),he=(0,Xe.c)(te),Te=ie.center;return delete ie.rotate,ie.center=function(Le){return arguments.length?Te(he(Le)):he.invert(Te())},ie.clipAngle(90)}function ul(Je){var et=x(Je);function ut(B,$){var W=(0,ni.Y)(B,$);return W[0]*=et,W}return ut.invert=function(B,$){return ni.Y.invert(B/et,$)},ut}function cl(){return No([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function No(Je,et){return Fo(ul,Je,et)}function Xr(Je){if(!(Je*=2))return K.O;var et=-Je/2,ut=-et,B=Je*Je,$=d(ut),W=.5/l(ut);function I(G,te){var ie=P(x(te)*x(G-et)),he=P(x(te)*x(G-ut));return[((ie*=ie)-(he*=he))/(2*Je),(te<0?-1:1)*L(4*B*he-(B-ie+he)*(B-ie+he))/(2*Je)]}return I.invert=function(G,te){var ie,he,Te=te*te,Le=x(L(Te+(ie=G+et)*ie)),Fe=x(L(Te+(ie=G+ut)*ie));return[T(he=Le-Fe,ie=(Le+Fe)*$),(te<0?-1:1)*P(L(ie*ie+he*he)*W)]},I}function qa(){return qs([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function qs(Je,et){return Fo(Xr,Je,et)}function Sa(Je,et){if(w(et)<c)return[Je,0];var ut=w(et/g),B=D(ut);if(w(Je)<c||w(w(et)-g)<c)return[0,u(et)*p*d(B/2)];var $=x(B),W=w(p/Je-Je/p)/2,I=W*W,G=$/(ut+$-1),te=G*(2/ut-1),ie=te*te,he=ie+I,Te=G-ie,Le=I+G;return[u(Je)*p*(W*Te+L(I*Te*Te-he*(G*G-ie)))/he,u(et)*p*(te*Le-W*L((I+1)*he-Le*Le))/he]}function fl(){return(0,v.c)(Sa).scale(79.4183)}function hl(Je,et){if(w(et)<c)return[Je,0];var ut=w(et/g),B=D(ut);if(w(Je)<c||w(w(et)-g)<c)return[0,u(et)*p*d(B/2)];var $=x(B),W=w(p/Je-Je/p)/2,I=W*W,G=$*(L(1+I)-W*$)/(1+I*ut*ut);return[u(Je)*p*G,u(et)*p*L(1-G*(2*W+G))]}function Ea(){return(0,v.c)(hl).scale(79.4183)}function Ai(Je,et){if(w(et)<c)return[Je,0];var ut=et/g,B=D(ut);if(w(Je)<c||w(w(et)-g)<c)return[0,p*d(B/2)];var $=(p/Je-Je/p)/2,W=ut/(1+x(B));return[p*(u(Je)*L($*$+1-W*W)-$),p*W]}function Gs(){return(0,v.c)(Ai).scale(79.4183)}function Sr(Je,et){if(!et)return[Je,0];var ut=w(et);if(!Je||ut===g)return[0,et];var B=ut/g,$=B*B,W=(8*B-$*($+2)-5)/(2*$*(B-1)),I=W*W,G=B*W,te=$+I+2*G,ie=B+3*W,he=Je/g,Te=he+1/he,Le=u(w(Je)-g)*L(Te*Te-4),Fe=Le*Le,qe=(Le*(te+I-1)+2*L(te*($+I*Fe-1)+(1-$)*($*(ie*ie+4*I)+12*G*I+4*I*I)))/(4*te+Fe);return[u(Je)*g*qe,u(et)*g*L(1+Le*w(qe)-qe*qe)]}function Or(){return(0,v.c)(Sr).scale(127.16)}function Jo(Je,et,ut,B){var $=p/3;Je=o(Je,c),et=o(et,c),Je=r(Je,g),et=r(et,p-c),ut=o(ut,0),ut=r(ut,100-c);var W=(B=o(B,c))/100,I=P((ut/100+1)*x($))/$,G=l(Je)/l(I*g),te=et/p,ie=L(W*l(Je/2)/l(et/2));return function(he,Te,Le,Fe,qe){function We(nt,ft){var pt=Le*l(Fe*ft),wt=L(1-pt*pt),Ct=L(2/(1+wt*x(nt*=qe)));return[he*wt*Ct*l(nt),Te*pt*Ct]}return We.invert=function(nt,ft){var pt=nt/he,wt=ft/Te,Ct=L(pt*pt+wt*wt),At=2*D(Ct/2);return[T(nt*d(At),he*Ct)/qe,Ct&&D(ft*l(At)/(Te*Le*Ct))/Fe]},We}(ie/L(te*G*I),1/(ie*L(te*G*I)),G,I,te)}function Ga(){var Je=65*k,et=60*k,ut=20,B=200,$=(0,v.U)(Jo),W=$(Je,et,ut,B);return W.poleline=function(I){return arguments.length?$(Je=+I*k,et,ut,B):Je*E},W.parallels=function(I){return arguments.length?$(Je,et=+I*k,ut,B):et*E},W.inflation=function(I){return arguments.length?$(Je,et,ut=+I,B):ut},W.ratio=function(I){return arguments.length?$(Je,et,ut,B=+I):B},W.scale(163.775)}function is(){return Ga().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}Ro.invert=function(Je,et){var ut=et/1.70711,B=l(m*ut);return[Je/(.74482-.34588*B*B),2*n(ut)]},Sa.invert=function(Je,et){if(w(et)<c)return[Je,0];if(w(Je)<c)return[0,g*l(2*n(et/p))];var ut=(Je/=p)*Je,B=(et/=p)*et,$=ut+B,W=$*$,I=-w(et)*(1+$),G=I-2*B+ut,te=-2*I+1+2*B+W,ie=B/te+(2*G*G*G/(te*te*te)-9*I*G/(te*te))/27,he=(I-G*G/(3*te))/te,Te=2*L(-he/3),Le=P(3*ie/(he*Te))/3;return[p*($-1+L(1+2*(ut-B)+W))/(2*Je),u(et)*p*(-Te*x(Le+p/3)-G/(3*te))]},hl.invert=function(Je,et){if(!Je)return[0,g*l(2*n(et/p))];var ut=w(Je/p),B=(1-ut*ut-(et/=p)*et)/(2*ut),$=L(B*B+1);return[u(Je)*p*($-B),u(et)*g*l(2*T(L((1-2*B*ut)*(B+$)-ut),L($+B+ut)))]},Ai.invert=function(Je,et){if(!et)return[Je,0];var ut=et/p,B=(p*p*(1-ut*ut)-Je*Je)/(2*p*Je);return[Je?p*(u(Je)*L(B*B+1)-B):0,g*l(2*n(ut))]},Sr.invert=function(Je,et){var ut;if(!Je||!et)return[Je,et];et/=p;var B=u(Je)*Je/g,$=(B*B-1+4*et*et)/w(B),W=$*$,I=2*et,G=50;do{var te=I*I,ie=(8*I-te*(te+2)-5)/(2*te*(I-1)),he=(3*I-te*I-10)/(2*te*I),Te=ie*ie,Le=I*ie,Fe=I+ie,qe=Fe*Fe,We=I+3*ie,nt=-2*Fe*(4*Le*Te+(1-4*te+3*te*te)*(1+he)+Te*(14*te-6-W+(8*te-8-2*W)*he)+Le*(12*te-8+(10*te-10-W)*he)),ft=L(qe*(te+Te*W-1)+(1-te)*(te*(We*We+4*Te)+Te*(12*Le+4*Te)));I-=ut=($*(qe+Te-1)+2*ft-B*(4*qe+W))/($*(2*ie*he+2*Fe*(1+he))+nt/ft-8*Fe*($*(-1+Te+qe)+2*ft)*(1+he)/(W+4*qe))}while(ut>c&&--G>0);return[u(Je)*(L($*$+4)+$)*p/4,g*I]};var Zi=4*p+3*L(3),Wa=2*L(2*p*L(3)/Zi),hi=Ae(Wa*L(3)/p,Wa,Zi/6);function qu(){return(0,v.c)(hi).scale(176.84)}function Qo(Je,et){return[Je*L(1-3*et*et/(p*p)),et]}function mi(){return(0,v.c)(Qo).scale(152.63)}function Li(Je,et){var ut=x(et),B=x(Je)*ut,$=1-B,W=x(Je=T(l(Je)*ut,-l(et))),I=l(Je);return[I*(ut=L(1-B*B))-W*$,-W*ut-I*$]}function Ho(){return(0,v.c)(Li).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)}function Ss(Je,et){var ut=j(Je,et);return[(ut[0]+Je/g)/2,(ut[1]+et)/2]}function Mu(){return(0,v.c)(Ss).scale(158.837)}Qo.invert=function(Je,et){return[Je/L(1-3*et*et/(p*p)),et]},Li.invert=function(Je,et){var ut=(Je*Je+et*et)/-2,B=L(-ut*(2+ut)),$=et*ut+Je*B,W=Je*ut-et*B,I=L(W*W+$*$);return[T(B*$,I*(1+ut)),I?-D(B*W/I):0]},Ss.invert=function(Je,et){var ut=Je,B=et,$=25;do{var W,I=x(B),G=l(B),te=l(2*B),ie=G*G,he=I*I,Te=l(ut),Le=x(ut/2),Fe=l(ut/2),qe=Fe*Fe,We=1-he*Le*Le,nt=We?P(I*Le)*L(W=1/We):W=0,ft=.5*(2*nt*I*Fe+ut/g)-Je,pt=.5*(nt*G+B)-et,wt=.5*W*(he*qe+nt*I*Le*ie)+.5/g,Ct=W*(Te*te/4-nt*G*Fe),At=.125*W*(te*Fe-nt*G*he*Te),zt=.5*W*(ie*Le+nt*qe*I)+.5,It=Ct*At-zt*wt,Xt=(pt*Ct-ft*zt)/It,Gt=(ft*At-pt*wt)/It;ut-=Xt,B-=Gt}while((w(Xt)>c||w(Gt)>c)&&--$>0);return[ut,B]}},88728:function(C,A,e){"use strict";function v(){return new w}function w(){this.reset()}e.d(A,{c:function(){return v}}),w.prototype={constructor:w,reset:function(){this.s=this.t=0},add:function(x){T(n,x,this.t),T(this,n.s,this.s),this.s?this.t+=n.t:this.s=n.t},valueOf:function(){return this.s}};var n=new w;function T(x,f,s){var t=x.s=f+s,o=t-f,r=t-o;x.t=f-r+(s-o)}},95384:function(C,A,e){"use strict";e.d(A,{cp:function(){return _},mQ:function(){return r},oB:function(){return a}});var v,w,n,T,x,f=e(88728),s=e(64528),t=e(70932),o=e(16016),r=(0,f.c)(),i=(0,f.c)(),a={point:t.c,lineStart:t.c,lineEnd:t.c,polygonStart:function(){r.reset(),a.lineStart=u,a.lineEnd=l},polygonEnd:function(){var p=+r;i.add(p<0?s.kD+p:p),this.lineStart=this.lineEnd=this.point=t.c},sphere:function(){i.add(s.kD)}};function u(){a.point=d}function l(){c(v,w)}function d(p,g){a.point=c,v=p,w=g,p*=s.qw,g*=s.qw,n=p,T=(0,s.W8)(g=g/2+s.wL),x=(0,s.g$)(g)}function c(p,g){p*=s.qw,g=(g*=s.qw)/2+s.wL;var m=p-n,b=m>=0?1:-1,y=b*m,M=(0,s.W8)(g),h=(0,s.g$)(g),E=x*h,k=T*M+E*(0,s.W8)(y),D=E*b*(0,s.g$)(y);r.add((0,s.WE)(D,k)),n=p,T=M,x=h}function _(p){return i.reset(),(0,o.c)(p,a),2*i}},13696:function(C,A,e){"use strict";e.d(A,{c:function(){return P}});var v,w,n,T,x,f,s,t,o,r,i=e(88728),a=e(95384),u=e(84220),l=e(64528),d=e(16016),c=(0,i.c)(),_={point:p,lineStart:m,lineEnd:b,polygonStart:function(){_.point=y,_.lineStart=M,_.lineEnd=h,c.reset(),a.oB.polygonStart()},polygonEnd:function(){a.oB.polygonEnd(),_.point=p,_.lineStart=m,_.lineEnd=b,a.mQ<0?(v=-(n=180),w=-(T=90)):c>l.Gg?T=90:c<-l.Gg&&(w=-90),r[0]=v,r[1]=n},sphere:function(){v=-(n=180),w=-(T=90)}};function p(L,O){o.push(r=[v=L,n=L]),O<w&&(w=O),O>T&&(T=O)}function g(L,O){var N=(0,u.ux)([L*l.qw,O*l.qw]);if(t){var V=(0,u.CW)(t,N),F=[V[1],-V[0],0],j=(0,u.CW)(F,V);(0,u.cJ)(j),j=(0,u.G)(j);var Z,z=L-x,H=z>0?1:-1,U=j[0]*l.oh*H,re=(0,l.a2)(z)>180;re^(H*x<U&&U<H*L)?(Z=j[1]*l.oh)>T&&(T=Z):re^(H*x<(U=(U+360)%360-180)&&U<H*L)?(Z=-j[1]*l.oh)<w&&(w=Z):(O<w&&(w=O),O>T&&(T=O)),re?L<x?E(v,L)>E(v,n)&&(n=L):E(L,n)>E(v,n)&&(v=L):n>=v?(L<v&&(v=L),L>n&&(n=L)):L>x?E(v,L)>E(v,n)&&(n=L):E(L,n)>E(v,n)&&(v=L)}else o.push(r=[v=L,n=L]);O<w&&(w=O),O>T&&(T=O),t=N,x=L}function m(){_.point=g}function b(){r[0]=v,r[1]=n,_.point=p,t=null}function y(L,O){if(t){var N=L-x;c.add((0,l.a2)(N)>180?N+(N>0?360:-360):N)}else f=L,s=O;a.oB.point(L,O),g(L,O)}function M(){a.oB.lineStart()}function h(){y(f,s),a.oB.lineEnd(),(0,l.a2)(c)>l.Gg&&(v=-(n=180)),r[0]=v,r[1]=n,t=null}function E(L,O){return(O-=L)<0?O+360:O}function k(L,O){return L[0]-O[0]}function D(L,O){return L[0]<=L[1]?L[0]<=O&&O<=L[1]:O<L[0]||L[1]<O}function P(L){var O,N,V,F,j,Z,z;if(T=n=-(v=w=1/0),o=[],(0,d.c)(L,_),N=o.length){for(o.sort(k),O=1,j=[V=o[0]];O<N;++O)D(V,(F=o[O])[0])||D(V,F[1])?(E(V[0],F[1])>E(V[0],V[1])&&(V[1]=F[1]),E(F[0],V[1])>E(V[0],V[1])&&(V[0]=F[0])):j.push(V=F);for(Z=-1/0,O=0,V=j[N=j.length-1];O<=N;V=F,++O)F=j[O],(z=E(V[1],F[0]))>Z&&(Z=z,v=F[0],n=V[1])}return o=r=null,v===1/0||w===1/0?[[NaN,NaN],[NaN,NaN]]:[[v,w],[n,T]]}},84220:function(C,A,e){"use strict";e.d(A,{CW:function(){return x},Ez:function(){return T},G:function(){return w},cJ:function(){return t},mg:function(){return f},ux:function(){return n},wx:function(){return s}});var v=e(64528);function w(o){return[(0,v.WE)(o[1],o[0]),(0,v.qR)(o[2])]}function n(o){var r=o[0],i=o[1],a=(0,v.W8)(i);return[a*(0,v.W8)(r),a*(0,v.g$)(r),(0,v.g$)(i)]}function T(o,r){return o[0]*r[0]+o[1]*r[1]+o[2]*r[2]}function x(o,r){return[o[1]*r[2]-o[2]*r[1],o[2]*r[0]-o[0]*r[2],o[0]*r[1]-o[1]*r[0]]}function f(o,r){o[0]+=r[0],o[1]+=r[1],o[2]+=r[2]}function s(o,r){return[o[0]*r,o[1]*r,o[2]*r]}function t(o){var r=(0,v._I)(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]);o[0]/=r,o[1]/=r,o[2]/=r}},24052:function(C,A,e){"use strict";e.d(A,{c:function(){return N}});var v,w,n,T,x,f,s,t,o,r,i,a,u,l,d,c,_=e(64528),p=e(70932),g=e(16016),m={sphere:p.c,point:b,lineStart:M,lineEnd:k,polygonStart:function(){m.lineStart=D,m.lineEnd=P},polygonEnd:function(){m.lineStart=M,m.lineEnd=k}};function b(V,F){V*=_.qw,F*=_.qw;var j=(0,_.W8)(F);y(j*(0,_.W8)(V),j*(0,_.g$)(V),(0,_.g$)(F))}function y(V,F,j){++v,n+=(V-n)/v,T+=(F-T)/v,x+=(j-x)/v}function M(){m.point=h}function h(V,F){V*=_.qw,F*=_.qw;var j=(0,_.W8)(F);l=j*(0,_.W8)(V),d=j*(0,_.g$)(V),c=(0,_.g$)(F),m.point=E,y(l,d,c)}function E(V,F){V*=_.qw,F*=_.qw;var j=(0,_.W8)(F),Z=j*(0,_.W8)(V),z=j*(0,_.g$)(V),H=(0,_.g$)(F),U=(0,_.WE)((0,_._I)((U=d*H-c*z)*U+(U=c*Z-l*H)*U+(U=l*z-d*Z)*U),l*Z+d*z+c*H);w+=U,f+=U*(l+(l=Z)),s+=U*(d+(d=z)),t+=U*(c+(c=H)),y(l,d,c)}function k(){m.point=b}function D(){m.point=L}function P(){O(a,u),m.point=b}function L(V,F){a=V,u=F,V*=_.qw,F*=_.qw,m.point=O;var j=(0,_.W8)(F);l=j*(0,_.W8)(V),d=j*(0,_.g$)(V),c=(0,_.g$)(F),y(l,d,c)}function O(V,F){V*=_.qw,F*=_.qw;var j=(0,_.W8)(F),Z=j*(0,_.W8)(V),z=j*(0,_.g$)(V),H=(0,_.g$)(F),U=d*H-c*z,re=c*Z-l*H,ee=l*z-d*Z,J=(0,_._I)(U*U+re*re+ee*ee),Q=(0,_.qR)(J),ne=J&&-Q/J;o+=ne*U,r+=ne*re,i+=ne*ee,w+=Q,f+=Q*(l+(l=Z)),s+=Q*(d+(d=z)),t+=Q*(c+(c=H)),y(l,d,c)}function N(V){v=w=n=T=x=f=s=t=o=r=i=0,(0,g.c)(V,m);var F=o,j=r,Z=i,z=F*F+j*j+Z*Z;return z<_.a8&&(F=f,j=s,Z=t,w<_.Gg&&(F=n,j=T,Z=x),(z=F*F+j*j+Z*Z)<_.a8)?[NaN,NaN]:[(0,_.WE)(j,F)*_.oh,(0,_.qR)(Z/(0,_._I)(z))*_.oh]}},61780:function(C,A,e){"use strict";e.d(A,{Q:function(){return x},c:function(){return s}});var v=e(84220);function w(t){return function(){return t}}var n=e(64528),T=e(92992);function x(t,o,r,i,a,u){if(r){var l=(0,n.W8)(o),d=(0,n.g$)(o),c=i*r;a==null?(a=o+i*n.kD,u=o-c/2):(a=f(l,a),u=f(l,u),(i>0?a<u:a>u)&&(a+=i*n.kD));for(var _,p=a;i>0?p>u:p<u;p-=c)_=(0,v.G)([l,-d*(0,n.W8)(p),-d*(0,n.g$)(p)]),t.point(_[0],_[1])}}function f(t,o){(o=(0,v.ux)(o))[0]-=t,(0,v.cJ)(o);var r=(0,n.mE)(-o[1]);return((-o[2]<0?-r:r)+n.kD-n.Gg)%n.kD}function s(){var t,o,r=w([0,0]),i=w(90),a=w(6),u={point:function(d,c){t.push(d=o(d,c)),d[0]*=n.oh,d[1]*=n.oh}};function l(){var d=r.apply(this,arguments),c=i.apply(this,arguments)*n.qw,_=a.apply(this,arguments)*n.qw;return t=[],o=(0,T.O)(-d[0]*n.qw,-d[1]*n.qw,0).invert,x(u,c,_,1),d={type:"Polygon",coordinates:[t]},t=o=null,d}return l.center=function(d){return arguments.length?(r=typeof d=="function"?d:w([+d[0],+d[1]]),l):r},l.radius=function(d){return arguments.length?(i=typeof d=="function"?d:w(+d),l):i},l.precision=function(d){return arguments.length?(a=typeof d=="function"?d:w(+d),l):a},l}},78284:function(C,A,e){"use strict";var v=e(14229),w=e(64528);A.c=(0,v.c)(function(){return!0},function(n){var T,x=NaN,f=NaN,s=NaN;return{lineStart:function(){n.lineStart(),T=1},point:function(t,o){var r=t>0?w.pi:-w.pi,i=(0,w.a2)(t-x);(0,w.a2)(i-w.pi)<w.Gg?(n.point(x,f=(f+o)/2>0?w.or:-w.or),n.point(s,f),n.lineEnd(),n.lineStart(),n.point(r,f),n.point(t,f),T=0):s!==r&&i>=w.pi&&((0,w.a2)(x-s)<w.Gg&&(x-=s*w.Gg),(0,w.a2)(t-r)<w.Gg&&(t-=r*w.Gg),f=function(a,u,l,d){var c,_,p=(0,w.g$)(a-l);return(0,w.a2)(p)>w.Gg?(0,w.MQ)(((0,w.g$)(u)*(_=(0,w.W8)(d))*(0,w.g$)(l)-(0,w.g$)(d)*(c=(0,w.W8)(u))*(0,w.g$)(a))/(c*_*p)):(u+d)/2}(x,f,t,o),n.point(s,f),n.lineEnd(),n.lineStart(),n.point(r,f),T=0),n.point(x=t,f=o),s=r},lineEnd:function(){n.lineEnd(),x=f=NaN},clean:function(){return 2-T}}},function(n,T,x,f){var s;if(n==null)s=x*w.or,f.point(-w.pi,s),f.point(0,s),f.point(w.pi,s),f.point(w.pi,0),f.point(w.pi,-s),f.point(0,-s),f.point(-w.pi,-s),f.point(-w.pi,0),f.point(-w.pi,s);else if((0,w.a2)(n[0]-T[0])>w.Gg){var t=n[0]<T[0]?w.pi:-w.pi;s=x*t/2,f.point(-t,s),f.point(0,s),f.point(t,s)}else f.point(T[0],T[1])},[-w.pi,-w.or])},97208:function(C,A,e){"use strict";e.d(A,{c:function(){return w}});var v=e(70932);function w(){var n,T=[];return{point:function(x,f,s){n.push([x,f,s])},lineStart:function(){T.push(n=[])},lineEnd:v.c,rejoin:function(){T.length>1&&T.push(T.pop().concat(T.shift()))},result:function(){var x=T;return T=[],n=null,x}}}},2728:function(C,A,e){"use strict";e.d(A,{c:function(){return f}});var v=e(84220),w=e(61780),n=e(64528),T=e(41860),x=e(14229);function f(s){var t=(0,n.W8)(s),o=6*n.qw,r=t>0,i=(0,n.a2)(t)>n.Gg;function a(d,c){return(0,n.W8)(d)*(0,n.W8)(c)>t}function u(d,c,_){var p=(0,v.ux)(d),g=(0,v.ux)(c),m=[1,0,0],b=(0,v.CW)(p,g),y=(0,v.Ez)(b,b),M=b[0],h=y-M*M;if(!h)return!_&&d;var E=t*y/h,k=-t*M/h,D=(0,v.CW)(m,b),P=(0,v.wx)(m,E),L=(0,v.wx)(b,k);(0,v.mg)(P,L);var O=D,N=(0,v.Ez)(P,O),V=(0,v.Ez)(O,O),F=N*N-V*((0,v.Ez)(P,P)-1);if(!(F<0)){var j=(0,n._I)(F),Z=(0,v.wx)(O,(-N-j)/V);if((0,v.mg)(Z,P),Z=(0,v.G)(Z),!_)return Z;var z,H=d[0],U=c[0],re=d[1],ee=c[1];U<H&&(z=H,H=U,U=z);var J=U-H,Q=(0,n.a2)(J-n.pi)<n.Gg;if(!Q&&ee<re&&(z=re,re=ee,ee=z),Q||J<n.Gg?Q?re+ee>0^Z[1]<((0,n.a2)(Z[0]-H)<n.Gg?re:ee):re<=Z[1]&&Z[1]<=ee:J>n.pi^(H<=Z[0]&&Z[0]<=U)){var ne=(0,v.wx)(O,(-N+j)/V);return(0,v.mg)(ne,P),[Z,(0,v.G)(ne)]}}}function l(d,c){var _=r?s:n.pi-s,p=0;return d<-_?p|=1:d>_&&(p|=2),c<-_?p|=4:c>_&&(p|=8),p}return(0,x.c)(a,function(d){var c,_,p,g,m;return{lineStart:function(){g=p=!1,m=1},point:function(b,y){var M,h=[b,y],E=a(b,y),k=r?E?0:l(b,y):E?l(b+(b<0?n.pi:-n.pi),y):0;if(!c&&(g=p=E)&&d.lineStart(),E!==p&&(!(M=u(c,h))||(0,T.c)(c,M)||(0,T.c)(h,M))&&(h[2]=1),E!==p)m=0,E?(d.lineStart(),M=u(h,c),d.point(M[0],M[1])):(M=u(c,h),d.point(M[0],M[1],2),d.lineEnd()),c=M;else if(i&&c&&r^E){var D;k&_||!(D=u(h,c,!0))||(m=0,r?(d.lineStart(),d.point(D[0][0],D[0][1]),d.point(D[1][0],D[1][1]),d.lineEnd()):(d.point(D[1][0],D[1][1]),d.lineEnd(),d.lineStart(),d.point(D[0][0],D[0][1],3)))}!E||c&&(0,T.c)(c,h)||d.point(h[0],h[1]),c=h,p=E,_=k},lineEnd:function(){p&&d.lineEnd(),c=null},clean:function(){return m|(g&&p)<<1}}},function(d,c,_,p){(0,w.Q)(p,s,o,_,d,c)},r?[0,-s]:[-n.pi,s-n.pi])}},14229:function(C,A,e){"use strict";e.d(A,{c:function(){return f}});var v=e(97208),w=e(32232),n=e(64528),T=e(58196),x=e(84706);function f(o,r,i,a){return function(u){var l,d,c,_=r(u),p=(0,v.c)(),g=r(p),m=!1,b={point:y,lineStart:h,lineEnd:E,polygonStart:function(){b.point=k,b.lineStart=D,b.lineEnd=P,d=[],l=[]},polygonEnd:function(){b.point=y,b.lineStart=h,b.lineEnd=E,d=(0,x.Uf)(d);var L=(0,T.c)(l,a);d.length?(m||(u.polygonStart(),m=!0),(0,w.c)(d,t,L,i,u)):L&&(m||(u.polygonStart(),m=!0),u.lineStart(),i(null,null,1,u),u.lineEnd()),m&&(u.polygonEnd(),m=!1),d=l=null},sphere:function(){u.polygonStart(),u.lineStart(),i(null,null,1,u),u.lineEnd(),u.polygonEnd()}};function y(L,O){o(L,O)&&u.point(L,O)}function M(L,O){_.point(L,O)}function h(){b.point=M,_.lineStart()}function E(){b.point=y,_.lineEnd()}function k(L,O){c.push([L,O]),g.point(L,O)}function D(){g.lineStart(),c=[]}function P(){k(c[0][0],c[0][1]),g.lineEnd();var L,O,N,V,F=g.clean(),j=p.result(),Z=j.length;if(c.pop(),l.push(c),c=null,Z)if(1&F){if((O=(N=j[0]).length-1)>0){for(m||(u.polygonStart(),m=!0),u.lineStart(),L=0;L<O;++L)u.point((V=N[L])[0],V[1]);u.lineEnd()}}else Z>1&&2&F&&j.push(j.pop().concat(j.shift())),d.push(j.filter(s))}return b}}function s(o){return o.length>1}function t(o,r){return((o=o.x)[0]<0?o[1]-n.or-n.Gg:n.or-o[1])-((r=r.x)[0]<0?r[1]-n.or-n.Gg:n.or-r[1])}},21676:function(C,A,e){"use strict";e.d(A,{c:function(){return s}});var v=e(64528),w=e(97208),n=e(32232),T=e(84706),x=1e9,f=-x;function s(t,o,r,i){function a(_,p){return t<=_&&_<=r&&o<=p&&p<=i}function u(_,p,g,m){var b=0,y=0;if(_==null||(b=l(_,g))!==(y=l(p,g))||c(_,p)<0^g>0)do m.point(b===0||b===3?t:r,b>1?i:o);while((b=(b+g+4)%4)!==y);else m.point(p[0],p[1])}function l(_,p){return(0,v.a2)(_[0]-t)<v.Gg?p>0?0:3:(0,v.a2)(_[0]-r)<v.Gg?p>0?2:1:(0,v.a2)(_[1]-o)<v.Gg?p>0?1:0:p>0?3:2}function d(_,p){return c(_.x,p.x)}function c(_,p){var g=l(_,1),m=l(p,1);return g!==m?g-m:g===0?p[1]-_[1]:g===1?_[0]-p[0]:g===2?_[1]-p[1]:p[0]-_[0]}return function(_){var p,g,m,b,y,M,h,E,k,D,P,L=_,O=(0,w.c)(),N={point:V,lineStart:function(){N.point=F,g&&g.push(m=[]),D=!0,k=!1,h=E=NaN},lineEnd:function(){p&&(F(b,y),M&&k&&O.rejoin(),p.push(O.result())),N.point=V,k&&L.lineEnd()},polygonStart:function(){L=O,p=[],g=[],P=!0},polygonEnd:function(){var j=function(){for(var H=0,U=0,re=g.length;U<re;++U)for(var ee,J,Q=g[U],ne=1,K=Q.length,oe=Q[0],le=oe[0],se=oe[1];ne<K;++ne)ee=le,J=se,le=(oe=Q[ne])[0],se=oe[1],J<=i?se>i&&(le-ee)*(i-J)>(se-J)*(t-ee)&&++H:se<=i&&(le-ee)*(i-J)<(se-J)*(t-ee)&&--H;return H}(),Z=P&&j,z=(p=(0,T.Uf)(p)).length;(Z||z)&&(_.polygonStart(),Z&&(_.lineStart(),u(null,null,1,_),_.lineEnd()),z&&(0,n.c)(p,d,j,u,_),_.polygonEnd()),L=_,p=g=m=null}};function V(j,Z){a(j,Z)&&L.point(j,Z)}function F(j,Z){var z=a(j,Z);if(g&&m.push([j,Z]),D)b=j,y=Z,M=z,D=!1,z&&(L.lineStart(),L.point(j,Z));else if(z&&k)L.point(j,Z);else{var H=[h=Math.max(f,Math.min(x,h)),E=Math.max(f,Math.min(x,E))],U=[j=Math.max(f,Math.min(x,j)),Z=Math.max(f,Math.min(x,Z))];(function(re,ee,J,Q,ne,K){var oe,le=re[0],se=re[1],de=0,be=1,_e=ee[0]-le,xe=ee[1]-se;if(oe=J-le,_e||!(oe>0)){if(oe/=_e,_e<0){if(oe<de)return;oe<be&&(be=oe)}else if(_e>0){if(oe>be)return;oe>de&&(de=oe)}if(oe=ne-le,_e||!(oe<0)){if(oe/=_e,_e<0){if(oe>be)return;oe>de&&(de=oe)}else if(_e>0){if(oe<de)return;oe<be&&(be=oe)}if(oe=Q-se,xe||!(oe>0)){if(oe/=xe,xe<0){if(oe<de)return;oe<be&&(be=oe)}else if(xe>0){if(oe>be)return;oe>de&&(de=oe)}if(oe=K-se,xe||!(oe<0)){if(oe/=xe,xe<0){if(oe>be)return;oe>de&&(de=oe)}else if(xe>0){if(oe<de)return;oe<be&&(be=oe)}return de>0&&(re[0]=le+de*_e,re[1]=se+de*xe),be<1&&(ee[0]=le+be*_e,ee[1]=se+be*xe),!0}}}}})(H,U,t,o,r,i)?(k||(L.lineStart(),L.point(H[0],H[1])),L.point(U[0],U[1]),z||L.lineEnd(),P=!1):z&&(L.lineStart(),L.point(j,Z),P=!1)}h=j,E=Z,k=z}return N}}},32232:function(C,A,e){"use strict";e.d(A,{c:function(){return T}});var v=e(41860),w=e(64528);function n(f,s,t,o){this.x=f,this.z=s,this.o=t,this.e=o,this.v=!1,this.n=this.p=null}function T(f,s,t,o,r){var i,a,u=[],l=[];if(f.forEach(function(m){if(!((b=m.length-1)<=0)){var b,y,M=m[0],h=m[b];if((0,v.c)(M,h)){if(!M[2]&&!h[2]){for(r.lineStart(),i=0;i<b;++i)r.point((M=m[i])[0],M[1]);return void r.lineEnd()}h[0]+=2*w.Gg}u.push(y=new n(M,m,null,!0)),l.push(y.o=new n(M,null,y,!1)),u.push(y=new n(h,m,null,!1)),l.push(y.o=new n(h,null,y,!0))}}),u.length){for(l.sort(s),x(u),x(l),i=0,a=l.length;i<a;++i)l[i].e=t=!t;for(var d,c,_=u[0];;){for(var p=_,g=!0;p.v;)if((p=p.n)===_)return;d=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(g)for(i=0,a=d.length;i<a;++i)r.point((c=d[i])[0],c[1]);else o(p.x,p.n.x,1,r);p=p.n}else{if(g)for(d=p.p.z,i=d.length-1;i>=0;--i)r.point((c=d[i])[0],c[1]);else o(p.x,p.p.x,-1,r);p=p.p}d=(p=p.o).z,g=!g}while(!p.v);r.lineEnd()}}}function x(f){if(s=f.length){for(var s,t,o=0,r=f[0];++o<s;)r.n=t=f[o],t.p=r,r=t;r.n=t=f[0],t.p=r}}},68120:function(C,A,e){"use strict";function v(w,n){function T(x,f){return x=w(x,f),n(x[0],x[1])}return w.invert&&n.invert&&(T.invert=function(x,f){return(x=n.invert(x,f))&&w.invert(x[0],x[1])}),T}e.d(A,{c:function(){return v}})},7376:function(C,A,e){"use strict";function v(w){return w}e.d(A,{c:function(){return v}})},83356:function(C,A,e){"use strict";e.r(A),e.d(A,{geoAlbers:function(){return yt},geoAlbersUsa:function(){return kt},geoArea:function(){return v.cp},geoAzimuthalEqualArea:function(){return _t.c},geoAzimuthalEqualAreaRaw:function(){return _t.y},geoAzimuthalEquidistant:function(){return Et.c},geoAzimuthalEquidistantRaw:function(){return Et.O},geoBounds:function(){return w.c},geoCentroid:function(){return n.c},geoCircle:function(){return T.c},geoClipAntimeridian:function(){return x.c},geoClipCircle:function(){return f.c},geoClipExtent:function(){return t},geoClipRectangle:function(){return s.c},geoConicConformal:function(){return Wt},geoConicConformalRaw:function(){return Ut},geoConicEqualArea:function(){return mt},geoConicEqualAreaRaw:function(){return dt},geoConicEquidistant:function(){return kn},geoConicEquidistantRaw:function(){return On},geoContains:function(){return j},geoDistance:function(){return E},geoEqualEarth:function(){return wn},geoEqualEarthRaw:function(){return bn},geoEquirectangular:function(){return nn.c},geoEquirectangularRaw:function(){return nn.u},geoGnomonic:function(){return Pn.c},geoGnomonicRaw:function(){return Pn.Y},geoGraticule:function(){return U},geoGraticule10:function(){return re},geoIdentity:function(){return Mn},geoInterpolate:function(){return K.c},geoLength:function(){return y},geoMercator:function(){return Ft},geoMercatorRaw:function(){return Ot},geoNaturalEarth1:function(){return Bn.c},geoNaturalEarth1Raw:function(){return Bn.g},geoOrthographic:function(){return Nn.c},geoOrthographicRaw:function(){return Nn.t},geoPath:function(){return je},geoProjection:function(){return ot.c},geoProjectionMutator:function(){return ot.U},geoRotation:function(){return Lt.c},geoStereographic:function(){return ir},geoStereographicRaw:function(){return Yn},geoStream:function(){return c.c},geoTransform:function(){return Cn.c},geoTransverseMercator:function(){return ur},geoTransverseMercatorRaw:function(){return Zn}});var v=e(95384),w=e(13696),n=e(24052),T=e(61780),x=e(78284),f=e(2728),s=e(21676);function t(){var en,on,Dn,yn=0,Ln=0,Wn=960,Un=500;return Dn={stream:function(Xn){return en&&on===Xn?en:en=(0,s.c)(yn,Ln,Wn,Un)(on=Xn)},extent:function(Xn){return arguments.length?(yn=+Xn[0][0],Ln=+Xn[0][1],Wn=+Xn[1][0],Un=+Xn[1][1],en=on=null,Dn):[[yn,Ln],[Wn,Un]]}}}var o,r,i,a=e(58196),u=e(88728),l=e(64528),d=e(70932),c=e(16016),_=(0,u.c)(),p={sphere:d.c,point:d.c,lineStart:function(){p.point=m,p.lineEnd=g},lineEnd:d.c,polygonStart:d.c,polygonEnd:d.c};function g(){p.point=p.lineEnd=d.c}function m(en,on){en*=l.qw,on*=l.qw,o=en,r=(0,l.g$)(on),i=(0,l.W8)(on),p.point=b}function b(en,on){en*=l.qw,on*=l.qw;var Dn=(0,l.g$)(on),yn=(0,l.W8)(on),Ln=(0,l.a2)(en-o),Wn=(0,l.W8)(Ln),Un=yn*(0,l.g$)(Ln),Xn=i*Dn-r*yn*Wn,pr=r*Dn+i*yn*Wn;_.add((0,l.WE)((0,l._I)(Un*Un+Xn*Xn),pr)),o=en,r=Dn,i=yn}function y(en){return _.reset(),(0,c.c)(en,p),+_}var M=[null,null],h={type:"LineString",coordinates:M};function E(en,on){return M[0]=en,M[1]=on,y(h)}var k={Feature:function(en,on){return P(en.geometry,on)},FeatureCollection:function(en,on){for(var Dn=en.features,yn=-1,Ln=Dn.length;++yn<Ln;)if(P(Dn[yn].geometry,on))return!0;return!1}},D={Sphere:function(){return!0},Point:function(en,on){return L(en.coordinates,on)},MultiPoint:function(en,on){for(var Dn=en.coordinates,yn=-1,Ln=Dn.length;++yn<Ln;)if(L(Dn[yn],on))return!0;return!1},LineString:function(en,on){return O(en.coordinates,on)},MultiLineString:function(en,on){for(var Dn=en.coordinates,yn=-1,Ln=Dn.length;++yn<Ln;)if(O(Dn[yn],on))return!0;return!1},Polygon:function(en,on){return N(en.coordinates,on)},MultiPolygon:function(en,on){for(var Dn=en.coordinates,yn=-1,Ln=Dn.length;++yn<Ln;)if(N(Dn[yn],on))return!0;return!1},GeometryCollection:function(en,on){for(var Dn=en.geometries,yn=-1,Ln=Dn.length;++yn<Ln;)if(P(Dn[yn],on))return!0;return!1}};function P(en,on){return!(!en||!D.hasOwnProperty(en.type))&&D[en.type](en,on)}function L(en,on){return E(en,on)===0}function O(en,on){for(var Dn,yn,Ln,Wn=0,Un=en.length;Wn<Un;Wn++){if((yn=E(en[Wn],on))===0||Wn>0&&(Ln=E(en[Wn],en[Wn-1]))>0&&Dn<=Ln&&yn<=Ln&&(Dn+yn-Ln)*(1-Math.pow((Dn-yn)/Ln,2))<l.a8*Ln)return!0;Dn=yn}return!1}function N(en,on){return!!(0,a.c)(en.map(V),F(on))}function V(en){return(en=en.map(F)).pop(),en}function F(en){return[en[0]*l.qw,en[1]*l.qw]}function j(en,on){return(en&&k.hasOwnProperty(en.type)?k[en.type]:P)(en,on)}var Z=e(84706);function z(en,on,Dn){var yn=(0,Z.ik)(en,on-l.Gg,Dn).concat(on);return function(Ln){return yn.map(function(Wn){return[Ln,Wn]})}}function H(en,on,Dn){var yn=(0,Z.ik)(en,on-l.Gg,Dn).concat(on);return function(Ln){return yn.map(function(Wn){return[Wn,Ln]})}}function U(){var en,on,Dn,yn,Ln,Wn,Un,Xn,pr,Kt,mn,Dt,Bt=10,Qt=Bt,fn=90,dn=360,xn=2.5;function sn(){return{type:"MultiLineString",coordinates:$t()}}function $t(){return(0,Z.ik)((0,l.Km)(yn/fn)*fn,Dn,fn).map(mn).concat((0,Z.ik)((0,l.Km)(Xn/dn)*dn,Un,dn).map(Dt)).concat((0,Z.ik)((0,l.Km)(on/Bt)*Bt,en,Bt).filter(function(Yt){return(0,l.a2)(Yt%fn)>l.Gg}).map(pr)).concat((0,Z.ik)((0,l.Km)(Wn/Qt)*Qt,Ln,Qt).filter(function(Yt){return(0,l.a2)(Yt%dn)>l.Gg}).map(Kt))}return sn.lines=function(){return $t().map(function(Yt){return{type:"LineString",coordinates:Yt}})},sn.outline=function(){return{type:"Polygon",coordinates:[mn(yn).concat(Dt(Un).slice(1),mn(Dn).reverse().slice(1),Dt(Xn).reverse().slice(1))]}},sn.extent=function(Yt){return arguments.length?sn.extentMajor(Yt).extentMinor(Yt):sn.extentMinor()},sn.extentMajor=function(Yt){return arguments.length?(yn=+Yt[0][0],Dn=+Yt[1][0],Xn=+Yt[0][1],Un=+Yt[1][1],yn>Dn&&(Yt=yn,yn=Dn,Dn=Yt),Xn>Un&&(Yt=Xn,Xn=Un,Un=Yt),sn.precision(xn)):[[yn,Xn],[Dn,Un]]},sn.extentMinor=function(Yt){return arguments.length?(on=+Yt[0][0],en=+Yt[1][0],Wn=+Yt[0][1],Ln=+Yt[1][1],on>en&&(Yt=on,on=en,en=Yt),Wn>Ln&&(Yt=Wn,Wn=Ln,Ln=Yt),sn.precision(xn)):[[on,Wn],[en,Ln]]},sn.step=function(Yt){return arguments.length?sn.stepMajor(Yt).stepMinor(Yt):sn.stepMinor()},sn.stepMajor=function(Yt){return arguments.length?(fn=+Yt[0],dn=+Yt[1],sn):[fn,dn]},sn.stepMinor=function(Yt){return arguments.length?(Bt=+Yt[0],Qt=+Yt[1],sn):[Bt,Qt]},sn.precision=function(Yt){return arguments.length?(xn=+Yt,pr=z(Wn,Ln,90),Kt=H(on,en,xn),mn=z(Xn,Un,90),Dt=H(yn,Dn,xn),sn):xn},sn.extentMajor([[-180,-90+l.Gg],[180,90-l.Gg]]).extentMinor([[-180,-80-l.Gg],[180,80+l.Gg]])}function re(){return U()()}var ee,J,Q,ne,K=e(27284),oe=e(7376),le=(0,u.c)(),se=(0,u.c)(),de={point:d.c,lineStart:d.c,lineEnd:d.c,polygonStart:function(){de.lineStart=be,de.lineEnd=ve},polygonEnd:function(){de.lineStart=de.lineEnd=de.point=d.c,le.add((0,l.a2)(se)),se.reset()},result:function(){var en=le/2;return le.reset(),en}};function be(){de.point=_e}function _e(en,on){de.point=xe,ee=Q=en,J=ne=on}function xe(en,on){se.add(ne*en-Q*on),Q=en,ne=on}function ve(){xe(ee,J)}var ye,me,Me,Ae,ce=de,ae=e(73784),pe=0,De=0,ke=0,Ee=0,Ie=0,Re=0,Ne=0,ge=0,we=0,Ce={point:ze,lineStart:Pe,lineEnd:Xe,polygonStart:function(){Ce.lineStart=st,Ce.lineEnd=at},polygonEnd:function(){Ce.point=ze,Ce.lineStart=Pe,Ce.lineEnd=Xe},result:function(){var en=we?[Ne/we,ge/we]:Re?[Ee/Re,Ie/Re]:ke?[pe/ke,De/ke]:[NaN,NaN];return pe=De=ke=Ee=Ie=Re=Ne=ge=we=0,en}};function ze(en,on){pe+=en,De+=on,++ke}function Pe(){Ce.point=Ue}function Ue(en,on){Ce.point=Ge,ze(Me=en,Ae=on)}function Ge(en,on){var Dn=en-Me,yn=on-Ae,Ln=(0,l._I)(Dn*Dn+yn*yn);Ee+=Ln*(Me+en)/2,Ie+=Ln*(Ae+on)/2,Re+=Ln,ze(Me=en,Ae=on)}function Xe(){Ce.point=ze}function st(){Ce.point=vt}function at(){xt(ye,me)}function vt(en,on){Ce.point=xt,ze(ye=Me=en,me=Ae=on)}function xt(en,on){var Dn=en-Me,yn=on-Ae,Ln=(0,l._I)(Dn*Dn+yn*yn);Ee+=Ln*(Me+en)/2,Ie+=Ln*(Ae+on)/2,Re+=Ln,Ne+=(Ln=Ae*en-Me*on)*(Me+en),ge+=Ln*(Ae+on),we+=3*Ln,ze(Me=en,Ae=on)}var gt=Ce;function rt(en){this._context=en}rt.prototype={_radius:4.5,pointRadius:function(en){return this._radius=en,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(en,on){switch(this._point){case 0:this._context.moveTo(en,on),this._point=1;break;case 1:this._context.lineTo(en,on);break;default:this._context.moveTo(en+this._radius,on),this._context.arc(en,on,this._radius,0,l.kD)}},result:d.c};var tt,Mt,Pt,Rt,St,Ye=(0,u.c)(),Ke={point:d.c,lineStart:function(){Ke.point=Ve},lineEnd:function(){tt&&$e(Mt,Pt),Ke.point=d.c},polygonStart:function(){tt=!0},polygonEnd:function(){tt=null},result:function(){var en=+Ye;return Ye.reset(),en}};function Ve(en,on){Ke.point=$e,Mt=Rt=en,Pt=St=on}function $e(en,on){Rt-=en,St-=on,Ye.add((0,l._I)(Rt*Rt+St*St)),Rt=en,St=on}var lt=Ke;function it(){this._string=[]}function Be(en){return"m0,"+en+"a"+en+","+en+" 0 1,1 0,"+-2*en+"a"+en+","+en+" 0 1,1 0,"+2*en+"z"}function je(en,on){var Dn,yn,Ln=4.5;function Wn(Un){return Un&&(typeof Ln=="function"&&yn.pointRadius(+Ln.apply(this,arguments)),(0,c.c)(Un,Dn(yn))),yn.result()}return Wn.area=function(Un){return(0,c.c)(Un,Dn(ce)),ce.result()},Wn.measure=function(Un){return(0,c.c)(Un,Dn(lt)),lt.result()},Wn.bounds=function(Un){return(0,c.c)(Un,Dn(ae.c)),ae.c.result()},Wn.centroid=function(Un){return(0,c.c)(Un,Dn(gt)),gt.result()},Wn.projection=function(Un){return arguments.length?(Dn=Un==null?(en=null,oe.c):(en=Un).stream,Wn):en},Wn.context=function(Un){return arguments.length?(yn=Un==null?(on=null,new it):new rt(on=Un),typeof Ln!="function"&&yn.pointRadius(Ln),Wn):on},Wn.pointRadius=function(Un){return arguments.length?(Ln=typeof Un=="function"?Un:(yn.pointRadius(+Un),+Un),Wn):Ln},Wn.projection(en).context(on)}it.prototype={_radius:4.5,_circle:Be(4.5),pointRadius:function(en){return(en=+en)!==this._radius&&(this._radius=en,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(en,on){switch(this._point){case 0:this._string.push("M",en,",",on),this._point=1;break;case 1:this._string.push("L",en,",",on);break;default:this._circle==null&&(this._circle=Be(this._radius)),this._string.push("M",en,",",on,this._circle)}},result:function(){if(this._string.length){var en=this._string.join("");return this._string=[],en}return null}};var ot=e(87952);function Ze(en){var on=0,Dn=l.pi/3,yn=(0,ot.U)(en),Ln=yn(on,Dn);return Ln.parallels=function(Wn){return arguments.length?yn(on=Wn[0]*l.qw,Dn=Wn[1]*l.qw):[on*l.oh,Dn*l.oh]},Ln}function dt(en,on){var Dn=(0,l.g$)(en),yn=(Dn+(0,l.g$)(on))/2;if((0,l.a2)(yn)<l.Gg)return function(Xn){var pr=(0,l.W8)(Xn);function Kt(mn,Dt){return[mn*pr,(0,l.g$)(Dt)/pr]}return Kt.invert=function(mn,Dt){return[mn/pr,(0,l.qR)(Dt*pr)]},Kt}(en);var Ln=1+Dn*(2*yn-Dn),Wn=(0,l._I)(Ln)/yn;function Un(Xn,pr){var Kt=(0,l._I)(Ln-2*yn*(0,l.g$)(pr))/yn;return[Kt*(0,l.g$)(Xn*=yn),Wn-Kt*(0,l.W8)(Xn)]}return Un.invert=function(Xn,pr){var Kt=Wn-pr,mn=(0,l.WE)(Xn,(0,l.a2)(Kt))*(0,l.kq)(Kt);return Kt*yn<0&&(mn-=l.pi*(0,l.kq)(Xn)*(0,l.kq)(Kt)),[mn/yn,(0,l.qR)((Ln-(Xn*Xn+Kt*Kt)*yn*yn)/(2*yn))]},Un}function mt(){return Ze(dt).scale(155.424).center([0,33.6442])}function yt(){return mt().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}var ht=e(86420);function kt(){var en,on,Dn,yn,Ln,Wn,Un=yt(),Xn=mt().rotate([154,0]).center([-2,58.5]).parallels([55,65]),pr=mt().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Kt={point:function(Bt,Qt){Wn=[Bt,Qt]}};function mn(Bt){var Qt=Bt[0],fn=Bt[1];return Wn=null,Dn.point(Qt,fn),Wn||(yn.point(Qt,fn),Wn)||(Ln.point(Qt,fn),Wn)}function Dt(){return en=on=null,mn}return mn.invert=function(Bt){var Qt=Un.scale(),fn=Un.translate(),dn=(Bt[0]-fn[0])/Qt,xn=(Bt[1]-fn[1])/Qt;return(xn>=.12&&xn<.234&&dn>=-.425&&dn<-.214?Xn:xn>=.166&&xn<.234&&dn>=-.214&&dn<-.115?pr:Un).invert(Bt)},mn.stream=function(Bt){return en&&on===Bt?en:(Qt=[Un.stream(on=Bt),Xn.stream(Bt),pr.stream(Bt)],fn=Qt.length,en={point:function(dn,xn){for(var sn=-1;++sn<fn;)Qt[sn].point(dn,xn)},sphere:function(){for(var dn=-1;++dn<fn;)Qt[dn].sphere()},lineStart:function(){for(var dn=-1;++dn<fn;)Qt[dn].lineStart()},lineEnd:function(){for(var dn=-1;++dn<fn;)Qt[dn].lineEnd()},polygonStart:function(){for(var dn=-1;++dn<fn;)Qt[dn].polygonStart()},polygonEnd:function(){for(var dn=-1;++dn<fn;)Qt[dn].polygonEnd()}});var Qt,fn},mn.precision=function(Bt){return arguments.length?(Un.precision(Bt),Xn.precision(Bt),pr.precision(Bt),Dt()):Un.precision()},mn.scale=function(Bt){return arguments.length?(Un.scale(Bt),Xn.scale(.35*Bt),pr.scale(Bt),mn.translate(Un.translate())):Un.scale()},mn.translate=function(Bt){if(!arguments.length)return Un.translate();var Qt=Un.scale(),fn=+Bt[0],dn=+Bt[1];return Dn=Un.translate(Bt).clipExtent([[fn-.455*Qt,dn-.238*Qt],[fn+.455*Qt,dn+.238*Qt]]).stream(Kt),yn=Xn.translate([fn-.307*Qt,dn+.201*Qt]).clipExtent([[fn-.425*Qt+l.Gg,dn+.12*Qt+l.Gg],[fn-.214*Qt-l.Gg,dn+.234*Qt-l.Gg]]).stream(Kt),Ln=pr.translate([fn-.205*Qt,dn+.212*Qt]).clipExtent([[fn-.214*Qt+l.Gg,dn+.166*Qt+l.Gg],[fn-.115*Qt-l.Gg,dn+.234*Qt-l.Gg]]).stream(Kt),Dt()},mn.fitExtent=function(Bt,Qt){return(0,ht.QX)(mn,Bt,Qt)},mn.fitSize=function(Bt,Qt){return(0,ht.UV)(mn,Bt,Qt)},mn.fitWidth=function(Bt,Qt){return(0,ht.Qx)(mn,Bt,Qt)},mn.fitHeight=function(Bt,Qt){return(0,ht.OW)(mn,Bt,Qt)},mn.scale(1070)}var _t=e(54724),Et=e(69020),Lt=e(92992);function Ot(en,on){return[en,(0,l.Yz)((0,l.a6)((l.or+on)/2))]}function Ft(){return Zt(Ot).scale(961/l.kD)}function Zt(en){var on,Dn,yn,Ln=(0,ot.c)(en),Wn=Ln.center,Un=Ln.scale,Xn=Ln.translate,pr=Ln.clipExtent,Kt=null;function mn(){var Dt=l.pi*Un(),Bt=Ln((0,Lt.c)(Ln.rotate()).invert([0,0]));return pr(Kt==null?[[Bt[0]-Dt,Bt[1]-Dt],[Bt[0]+Dt,Bt[1]+Dt]]:en===Ot?[[Math.max(Bt[0]-Dt,Kt),on],[Math.min(Bt[0]+Dt,Dn),yn]]:[[Kt,Math.max(Bt[1]-Dt,on)],[Dn,Math.min(Bt[1]+Dt,yn)]])}return Ln.scale=function(Dt){return arguments.length?(Un(Dt),mn()):Un()},Ln.translate=function(Dt){return arguments.length?(Xn(Dt),mn()):Xn()},Ln.center=function(Dt){return arguments.length?(Wn(Dt),mn()):Wn()},Ln.clipExtent=function(Dt){return arguments.length?(Dt==null?Kt=on=Dn=yn=null:(Kt=+Dt[0][0],on=+Dt[0][1],Dn=+Dt[1][0],yn=+Dt[1][1]),mn()):Kt==null?null:[[Kt,on],[Dn,yn]]},mn()}function Ht(en){return(0,l.a6)((l.or+en)/2)}function Ut(en,on){var Dn=(0,l.W8)(en),yn=en===on?(0,l.g$)(en):(0,l.Yz)(Dn/(0,l.W8)(on))/(0,l.Yz)(Ht(on)/Ht(en)),Ln=Dn*(0,l.g3)(Ht(en),yn)/yn;if(!yn)return Ot;function Wn(Un,Xn){Ln>0?Xn<-l.or+l.Gg&&(Xn=-l.or+l.Gg):Xn>l.or-l.Gg&&(Xn=l.or-l.Gg);var pr=Ln/(0,l.g3)(Ht(Xn),yn);return[pr*(0,l.g$)(yn*Un),Ln-pr*(0,l.W8)(yn*Un)]}return Wn.invert=function(Un,Xn){var pr=Ln-Xn,Kt=(0,l.kq)(yn)*(0,l._I)(Un*Un+pr*pr),mn=(0,l.WE)(Un,(0,l.a2)(pr))*(0,l.kq)(pr);return pr*yn<0&&(mn-=l.pi*(0,l.kq)(Un)*(0,l.kq)(pr)),[mn/yn,2*(0,l.MQ)((0,l.g3)(Ln/Kt,1/yn))-l.or]},Wn}function Wt(){return Ze(Ut).scale(109.5).parallels([30,30])}Ot.invert=function(en,on){return[en,2*(0,l.MQ)((0,l.oN)(on))-l.or]};var nn=e(69604);function On(en,on){var Dn=(0,l.W8)(en),yn=en===on?(0,l.g$)(en):(Dn-(0,l.W8)(on))/(on-en),Ln=Dn/yn+en;if((0,l.a2)(yn)<l.Gg)return nn.u;function Wn(Un,Xn){var pr=Ln-Xn,Kt=yn*Un;return[pr*(0,l.g$)(Kt),Ln-pr*(0,l.W8)(Kt)]}return Wn.invert=function(Un,Xn){var pr=Ln-Xn,Kt=(0,l.WE)(Un,(0,l.a2)(pr))*(0,l.kq)(pr);return pr*yn<0&&(Kt-=l.pi*(0,l.kq)(Un)*(0,l.kq)(pr)),[Kt/yn,Ln-(0,l.kq)(yn)*(0,l._I)(Un*Un+pr*pr)]},Wn}function kn(){return Ze(On).scale(131.154).center([0,13.9389])}var gn=1.340264,Jt=-.081106,un=893e-6,tn=.003796,hn=(0,l._I)(3)/2;function bn(en,on){var Dn=(0,l.qR)(hn*(0,l.g$)(on)),yn=Dn*Dn,Ln=yn*yn*yn;return[en*(0,l.W8)(Dn)/(hn*(gn+3*Jt*yn+Ln*(7*un+9*tn*yn))),Dn*(gn+Jt*yn+Ln*(un+tn*yn))]}function wn(){return(0,ot.c)(bn).scale(177.158)}bn.invert=function(en,on){for(var Dn,yn=on,Ln=yn*yn,Wn=Ln*Ln*Ln,Un=0;Un<12&&(Wn=(Ln=(yn-=Dn=(yn*(gn+Jt*Ln+Wn*(un+tn*Ln))-on)/(gn+3*Jt*Ln+Wn*(7*un+9*tn*Ln)))*yn)*Ln*Ln,!((0,l.a2)(Dn)<l.a8));++Un);return[hn*en*(gn+3*Jt*Ln+Wn*(7*un+9*tn*Ln))/(0,l.W8)(yn),(0,l.qR)((0,l.g$)(yn)/hn)]};var Pn=e(53285),Cn=e(15196);function Mn(){var en,on,Dn,yn,Ln,Wn,Un,Xn=1,pr=0,Kt=0,mn=1,Dt=1,Bt=0,Qt=null,fn=1,dn=1,xn=(0,Cn.s)({point:function(rn,ln){var An=Yt([rn,ln]);this.stream.point(An[0],An[1])}}),sn=oe.c;function $t(){return fn=Xn*mn,dn=Xn*Dt,Wn=Un=null,Yt}function Yt(rn){var ln=rn[0]*fn,An=rn[1]*dn;if(Bt){var En=An*en-ln*on;ln=ln*en+An*on,An=En}return[ln+pr,An+Kt]}return Yt.invert=function(rn){var ln=rn[0]-pr,An=rn[1]-Kt;if(Bt){var En=An*en+ln*on;ln=ln*en-An*on,An=En}return[ln/fn,An/dn]},Yt.stream=function(rn){return Wn&&Un===rn?Wn:Wn=xn(sn(Un=rn))},Yt.postclip=function(rn){return arguments.length?(sn=rn,Qt=Dn=yn=Ln=null,$t()):sn},Yt.clipExtent=function(rn){return arguments.length?(sn=rn==null?(Qt=Dn=yn=Ln=null,oe.c):(0,s.c)(Qt=+rn[0][0],Dn=+rn[0][1],yn=+rn[1][0],Ln=+rn[1][1]),$t()):Qt==null?null:[[Qt,Dn],[yn,Ln]]},Yt.scale=function(rn){return arguments.length?(Xn=+rn,$t()):Xn},Yt.translate=function(rn){return arguments.length?(pr=+rn[0],Kt=+rn[1],$t()):[pr,Kt]},Yt.angle=function(rn){return arguments.length?(Bt=rn%360*l.qw,on=(0,l.g$)(Bt),en=(0,l.W8)(Bt),$t()):Bt*l.oh},Yt.reflectX=function(rn){return arguments.length?(mn=rn?-1:1,$t()):mn<0},Yt.reflectY=function(rn){return arguments.length?(Dt=rn?-1:1,$t()):Dt<0},Yt.fitExtent=function(rn,ln){return(0,ht.QX)(Yt,rn,ln)},Yt.fitSize=function(rn,ln){return(0,ht.UV)(Yt,rn,ln)},Yt.fitWidth=function(rn,ln){return(0,ht.Qx)(Yt,rn,ln)},Yt.fitHeight=function(rn,ln){return(0,ht.OW)(Yt,rn,ln)},Yt}var Bn=e(47984),Nn=e(4888),rr=e(62280);function Yn(en,on){var Dn=(0,l.W8)(on),yn=1+(0,l.W8)(en)*Dn;return[Dn*(0,l.g$)(en)/yn,(0,l.g$)(on)/yn]}function ir(){return(0,ot.c)(Yn).scale(250).clipAngle(142)}function Zn(en,on){return[(0,l.Yz)((0,l.a6)((l.or+on)/2)),-en]}function ur(){var en=Zt(Zn),on=en.center,Dn=en.rotate;return en.center=function(yn){return arguments.length?on([-yn[1],yn[0]]):[(yn=on())[1],-yn[0]]},en.rotate=function(yn){return arguments.length?Dn([yn[0],yn[1],yn.length>2?yn[2]+90:90]):[(yn=Dn())[0],yn[1],yn[2]-90]},Dn([0,0,90]).scale(159.155)}Yn.invert=(0,rr.g)(function(en){return 2*(0,l.MQ)(en)}),Zn.invert=function(en,on){return[-on,2*(0,l.MQ)((0,l.oN)(en))-l.or]}},27284:function(C,A,e){"use strict";e.d(A,{c:function(){return w}});var v=e(64528);function w(n,T){var x=n[0]*v.qw,f=n[1]*v.qw,s=T[0]*v.qw,t=T[1]*v.qw,o=(0,v.W8)(f),r=(0,v.g$)(f),i=(0,v.W8)(t),a=(0,v.g$)(t),u=o*(0,v.W8)(x),l=o*(0,v.g$)(x),d=i*(0,v.W8)(s),c=i*(0,v.g$)(s),_=2*(0,v.qR)((0,v._I)((0,v.SD)(t-f)+o*i*(0,v.SD)(s-x))),p=(0,v.g$)(_),g=_?function(m){var b=(0,v.g$)(m*=_)/p,y=(0,v.g$)(_-m)/p,M=y*u+b*d,h=y*l+b*c,E=y*r+b*a;return[(0,v.WE)(h,M)*v.oh,(0,v.WE)(E,(0,v._I)(M*M+h*h))*v.oh]}:function(){return[x*v.oh,f*v.oh]};return g.distance=_,g}},64528:function(C,A,e){"use strict";e.d(A,{Gg:function(){return v},Km:function(){return u},MQ:function(){return r},SD:function(){return M},W8:function(){return a},WE:function(){return i},Yz:function(){return d},_I:function(){return g},a2:function(){return o},a6:function(){return m},a8:function(){return w},g$:function(){return _},g3:function(){return c},kD:function(){return f},kq:function(){return p},mE:function(){return b},oN:function(){return l},oh:function(){return s},or:function(){return T},pi:function(){return n},qR:function(){return y},qw:function(){return t},wL:function(){return x}});var v=1e-6,w=1e-12,n=Math.PI,T=n/2,x=n/4,f=2*n,s=180/n,t=n/180,o=Math.abs,r=Math.atan,i=Math.atan2,a=Math.cos,u=Math.ceil,l=Math.exp,d=Math.log,c=Math.pow,_=Math.sin,p=Math.sign||function(h){return h>0?1:h<0?-1:0},g=Math.sqrt,m=Math.tan;function b(h){return h>1?0:h<-1?n:Math.acos(h)}function y(h){return h>1?T:h<-1?-T:Math.asin(h)}function M(h){return(h=_(h/2))*h}},70932:function(C,A,e){"use strict";function v(){}e.d(A,{c:function(){return v}})},73784:function(C,A,e){"use strict";var v=e(70932),w=1/0,n=w,T=-w,x=T,f={point:function(s,t){s<w&&(w=s),s>T&&(T=s),t<n&&(n=t),t>x&&(x=t)},lineStart:v.c,lineEnd:v.c,polygonStart:v.c,polygonEnd:v.c,result:function(){var s=[[w,n],[T,x]];return T=x=-(n=w=1/0),s}};A.c=f},41860:function(C,A,e){"use strict";e.d(A,{c:function(){return w}});var v=e(64528);function w(n,T){return(0,v.a2)(n[0]-T[0])<v.Gg&&(0,v.a2)(n[1]-T[1])<v.Gg}},58196:function(C,A,e){"use strict";e.d(A,{c:function(){return f}});var v=e(88728),w=e(84220),n=e(64528),T=(0,v.c)();function x(s){return(0,n.a2)(s[0])<=n.pi?s[0]:(0,n.kq)(s[0])*(((0,n.a2)(s[0])+n.pi)%n.kD-n.pi)}function f(s,t){var o=x(t),r=t[1],i=(0,n.g$)(r),a=[(0,n.g$)(o),-(0,n.W8)(o),0],u=0,l=0;T.reset(),i===1?r=n.or+n.Gg:i===-1&&(r=-n.or-n.Gg);for(var d=0,c=s.length;d<c;++d)if(p=(_=s[d]).length)for(var _,p,g=_[p-1],m=x(g),b=g[1]/2+n.wL,y=(0,n.g$)(b),M=(0,n.W8)(b),h=0;h<p;++h,m=k,y=P,M=L,g=E){var E=_[h],k=x(E),D=E[1]/2+n.wL,P=(0,n.g$)(D),L=(0,n.W8)(D),O=k-m,N=O>=0?1:-1,V=N*O,F=V>n.pi,j=y*P;if(T.add((0,n.WE)(j*N*(0,n.g$)(V),M*L+j*(0,n.W8)(V))),u+=F?O+N*n.kD:O,F^m>=o^k>=o){var Z=(0,w.CW)((0,w.ux)(g),(0,w.ux)(E));(0,w.cJ)(Z);var z=(0,w.CW)(a,Z);(0,w.cJ)(z);var H=(F^O>=0?-1:1)*(0,n.qR)(z[2]);(r>H||r===H&&(Z[0]||Z[1]))&&(l+=F^O>=0?1:-1)}}return(u<-n.Gg||u<n.Gg&&T<-n.Gg)^1&l}},62280:function(C,A,e){"use strict";e.d(A,{a:function(){return w},g:function(){return n}});var v=e(64528);function w(T){return function(x,f){var s=(0,v.W8)(x),t=(0,v.W8)(f),o=T(s*t);return[o*t*(0,v.g$)(x),o*(0,v.g$)(f)]}}function n(T){return function(x,f){var s=(0,v._I)(x*x+f*f),t=T(s),o=(0,v.g$)(t),r=(0,v.W8)(t);return[(0,v.WE)(x*o,s*r),(0,v.qR)(s&&f*o/s)]}}},54724:function(C,A,e){"use strict";e.d(A,{c:function(){return x},y:function(){return T}});var v=e(64528),w=e(62280),n=e(87952),T=(0,w.a)(function(f){return(0,v._I)(2/(1+f))});function x(){return(0,n.c)(T).scale(124.75).clipAngle(179.999)}T.invert=(0,w.g)(function(f){return 2*(0,v.qR)(f/2)})},69020:function(C,A,e){"use strict";e.d(A,{O:function(){return T},c:function(){return x}});var v=e(64528),w=e(62280),n=e(87952),T=(0,w.a)(function(f){return(f=(0,v.mE)(f))&&f/(0,v.g$)(f)});function x(){return(0,n.c)(T).scale(79.4188).clipAngle(179.999)}T.invert=(0,w.g)(function(f){return f})},69604:function(C,A,e){"use strict";e.d(A,{c:function(){return n},u:function(){return w}});var v=e(87952);function w(T,x){return[T,x]}function n(){return(0,v.c)(w).scale(152.63)}w.invert=w},86420:function(C,A,e){"use strict";e.d(A,{OW:function(){return s},QX:function(){return T},Qx:function(){return f},UV:function(){return x}});var v=e(16016),w=e(73784);function n(t,o,r){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),i!=null&&t.clipExtent(null),(0,v.c)(r,t.stream(w.c)),o(w.c.result()),i!=null&&t.clipExtent(i),t}function T(t,o,r){return n(t,function(i){var a=o[1][0]-o[0][0],u=o[1][1]-o[0][1],l=Math.min(a/(i[1][0]-i[0][0]),u/(i[1][1]-i[0][1])),d=+o[0][0]+(a-l*(i[1][0]+i[0][0]))/2,c=+o[0][1]+(u-l*(i[1][1]+i[0][1]))/2;t.scale(150*l).translate([d,c])},r)}function x(t,o,r){return T(t,[[0,0],o],r)}function f(t,o,r){return n(t,function(i){var a=+o,u=a/(i[1][0]-i[0][0]),l=(a-u*(i[1][0]+i[0][0]))/2,d=-u*i[0][1];t.scale(150*u).translate([l,d])},r)}function s(t,o,r){return n(t,function(i){var a=+o,u=a/(i[1][1]-i[0][1]),l=-u*i[0][0],d=(a-u*(i[1][1]+i[0][1]))/2;t.scale(150*u).translate([l,d])},r)}},53285:function(C,A,e){"use strict";e.d(A,{Y:function(){return T},c:function(){return x}});var v=e(64528),w=e(62280),n=e(87952);function T(f,s){var t=(0,v.W8)(s),o=(0,v.W8)(f)*t;return[t*(0,v.g$)(f)/o,(0,v.g$)(s)/o]}function x(){return(0,n.c)(T).scale(144.049).clipAngle(60)}T.invert=(0,w.g)(v.MQ)},87952:function(C,A,e){"use strict";e.d(A,{c:function(){return _},U:function(){return p}});var v=e(78284),w=e(2728),n=e(21676),T=e(68120),x=e(7376),f=e(64528),s=e(92992),t=e(15196),o=e(86420),r=e(84220),i=16,a=(0,f.W8)(30*f.qw);function u(g,m){return+m?function(b,y){function M(h,E,k,D,P,L,O,N,V,F,j,Z,z,H){var U=O-h,re=N-E,ee=U*U+re*re;if(ee>4*y&&z--){var J=D+F,Q=P+j,ne=L+Z,K=(0,f._I)(J*J+Q*Q+ne*ne),oe=(0,f.qR)(ne/=K),le=(0,f.a2)((0,f.a2)(ne)-1)<f.Gg||(0,f.a2)(k-V)<f.Gg?(k+V)/2:(0,f.WE)(Q,J),se=b(le,oe),de=se[0],be=se[1],_e=de-h,xe=be-E,ve=re*_e-U*xe;(ve*ve/ee>y||(0,f.a2)((U*_e+re*xe)/ee-.5)>.3||D*F+P*j+L*Z<a)&&(M(h,E,k,D,P,L,de,be,le,J/=K,Q/=K,ne,z,H),H.point(de,be),M(de,be,le,J,Q,ne,O,N,V,F,j,Z,z,H))}}return function(h){var E,k,D,P,L,O,N,V,F,j,Z,z,H={point:U,lineStart:re,lineEnd:J,polygonStart:function(){h.polygonStart(),H.lineStart=Q},polygonEnd:function(){h.polygonEnd(),H.lineStart=re}};function U(oe,le){oe=b(oe,le),h.point(oe[0],oe[1])}function re(){V=NaN,H.point=ee,h.lineStart()}function ee(oe,le){var se=(0,r.ux)([oe,le]),de=b(oe,le);M(V,F,N,j,Z,z,V=de[0],F=de[1],N=oe,j=se[0],Z=se[1],z=se[2],i,h),h.point(V,F)}function J(){H.point=U,h.lineEnd()}function Q(){re(),H.point=ne,H.lineEnd=K}function ne(oe,le){ee(E=oe,le),k=V,D=F,P=j,L=Z,O=z,H.point=ee}function K(){M(V,F,N,j,Z,z,k,D,E,P,L,O,i,h),H.lineEnd=J,J()}return H}}(g,m):function(b){return(0,t.s)({point:function(y,M){y=b(y,M),this.stream.point(y[0],y[1])}})}(g)}var l=(0,t.s)({point:function(g,m){this.stream.point(g*f.qw,m*f.qw)}});function d(g,m,b,y,M){function h(E,k){return[m+g*(E*=y),b-g*(k*=M)]}return h.invert=function(E,k){return[(E-m)/g*y,(b-k)/g*M]},h}function c(g,m,b,y,M,h){var E=(0,f.W8)(h),k=(0,f.g$)(h),D=E*g,P=k*g,L=E/g,O=k/g,N=(k*b-E*m)/g,V=(k*m+E*b)/g;function F(j,Z){return[D*(j*=y)-P*(Z*=M)+m,b-P*j-D*Z]}return F.invert=function(j,Z){return[y*(L*j-O*Z+N),M*(V-O*j-L*Z)]},F}function _(g){return p(function(){return g})()}function p(g){var m,b,y,M,h,E,k,D,P,L,O=150,N=480,V=250,F=0,j=0,Z=0,z=0,H=0,U=0,re=1,ee=1,J=null,Q=v.c,ne=null,K=x.c,oe=.5;function le(_e){return D(_e[0]*f.qw,_e[1]*f.qw)}function se(_e){return(_e=D.invert(_e[0],_e[1]))&&[_e[0]*f.oh,_e[1]*f.oh]}function de(){var _e=c(O,0,0,re,ee,U).apply(null,m(F,j)),xe=(U?c:d)(O,N-_e[0],V-_e[1],re,ee,U);return b=(0,s.O)(Z,z,H),k=(0,T.c)(m,xe),D=(0,T.c)(b,k),E=u(k,oe),be()}function be(){return P=L=null,le}return le.stream=function(_e){return P&&L===_e?P:P=l(function(xe){return(0,t.s)({point:function(ve,ye){var me=xe(ve,ye);return this.stream.point(me[0],me[1])}})}(b)(Q(E(K(L=_e)))))},le.preclip=function(_e){return arguments.length?(Q=_e,J=void 0,be()):Q},le.postclip=function(_e){return arguments.length?(K=_e,ne=y=M=h=null,be()):K},le.clipAngle=function(_e){return arguments.length?(Q=+_e?(0,w.c)(J=_e*f.qw):(J=null,v.c),be()):J*f.oh},le.clipExtent=function(_e){return arguments.length?(K=_e==null?(ne=y=M=h=null,x.c):(0,n.c)(ne=+_e[0][0],y=+_e[0][1],M=+_e[1][0],h=+_e[1][1]),be()):ne==null?null:[[ne,y],[M,h]]},le.scale=function(_e){return arguments.length?(O=+_e,de()):O},le.translate=function(_e){return arguments.length?(N=+_e[0],V=+_e[1],de()):[N,V]},le.center=function(_e){return arguments.length?(F=_e[0]%360*f.qw,j=_e[1]%360*f.qw,de()):[F*f.oh,j*f.oh]},le.rotate=function(_e){return arguments.length?(Z=_e[0]%360*f.qw,z=_e[1]%360*f.qw,H=_e.length>2?_e[2]%360*f.qw:0,de()):[Z*f.oh,z*f.oh,H*f.oh]},le.angle=function(_e){return arguments.length?(U=_e%360*f.qw,de()):U*f.oh},le.reflectX=function(_e){return arguments.length?(re=_e?-1:1,de()):re<0},le.reflectY=function(_e){return arguments.length?(ee=_e?-1:1,de()):ee<0},le.precision=function(_e){return arguments.length?(E=u(k,oe=_e*_e),be()):(0,f._I)(oe)},le.fitExtent=function(_e,xe){return(0,o.QX)(le,_e,xe)},le.fitSize=function(_e,xe){return(0,o.UV)(le,_e,xe)},le.fitWidth=function(_e,xe){return(0,o.Qx)(le,_e,xe)},le.fitHeight=function(_e,xe){return(0,o.OW)(le,_e,xe)},function(){return m=g.apply(this,arguments),le.invert=m.invert&&se,de()}}},47984:function(C,A,e){"use strict";e.d(A,{c:function(){return T},g:function(){return n}});var v=e(87952),w=e(64528);function n(x,f){var s=f*f,t=s*s;return[x*(.8707-.131979*s+t*(t*(.003971*s-.001529*t)-.013791)),f*(1.007226+s*(.015085+t*(.028874*s-.044475-.005916*t)))]}function T(){return(0,v.c)(n).scale(175.295)}n.invert=function(x,f){var s,t=f,o=25;do{var r=t*t,i=r*r;t-=s=(t*(1.007226+r*(.015085+i*(.028874*r-.044475-.005916*i)))-f)/(1.007226+r*(.045255+i*(.259866*r-.311325-.06507600000000001*i)))}while((0,w.a2)(s)>w.Gg&&--o>0);return[x/(.8707+(r=t*t)*(r*(r*r*r*(.003971-.001529*r)-.013791)-.131979)),t]}},4888:function(C,A,e){"use strict";e.d(A,{c:function(){return x},t:function(){return T}});var v=e(64528),w=e(62280),n=e(87952);function T(f,s){return[(0,v.W8)(s)*(0,v.g$)(f),(0,v.g$)(s)]}function x(){return(0,n.c)(T).scale(249.5).clipAngle(90+v.Gg)}T.invert=(0,w.g)(v.qR)},92992:function(C,A,e){"use strict";e.d(A,{O:function(){return T},c:function(){return t}});var v=e(68120),w=e(64528);function n(o,r){return[(0,w.a2)(o)>w.pi?o+Math.round(-o/w.kD)*w.kD:o,r]}function T(o,r,i){return(o%=w.kD)?r||i?(0,v.c)(f(o),s(r,i)):f(o):r||i?s(r,i):n}function x(o){return function(r,i){return[(r+=o)>w.pi?r-w.kD:r<-w.pi?r+w.kD:r,i]}}function f(o){var r=x(o);return r.invert=x(-o),r}function s(o,r){var i=(0,w.W8)(o),a=(0,w.g$)(o),u=(0,w.W8)(r),l=(0,w.g$)(r);function d(c,_){var p=(0,w.W8)(_),g=(0,w.W8)(c)*p,m=(0,w.g$)(c)*p,b=(0,w.g$)(_),y=b*i+g*a;return[(0,w.WE)(m*u-y*l,g*i-b*a),(0,w.qR)(y*u+m*l)]}return d.invert=function(c,_){var p=(0,w.W8)(_),g=(0,w.W8)(c)*p,m=(0,w.g$)(c)*p,b=(0,w.g$)(_),y=b*u-m*l;return[(0,w.WE)(m*u+b*l,g*i+y*a),(0,w.qR)(y*i-g*a)]},d}function t(o){function r(i){return(i=o(i[0]*w.qw,i[1]*w.qw))[0]*=w.oh,i[1]*=w.oh,i}return o=T(o[0]*w.qw,o[1]*w.qw,o.length>2?o[2]*w.qw:0),r.invert=function(i){return(i=o.invert(i[0]*w.qw,i[1]*w.qw))[0]*=w.oh,i[1]*=w.oh,i},r}n.invert=n},16016:function(C,A,e){"use strict";function v(s,t){s&&n.hasOwnProperty(s.type)&&n[s.type](s,t)}e.d(A,{c:function(){return f}});var w={Feature:function(s,t){v(s.geometry,t)},FeatureCollection:function(s,t){for(var o=s.features,r=-1,i=o.length;++r<i;)v(o[r].geometry,t)}},n={Sphere:function(s,t){t.sphere()},Point:function(s,t){s=s.coordinates,t.point(s[0],s[1],s[2])},MultiPoint:function(s,t){for(var o=s.coordinates,r=-1,i=o.length;++r<i;)s=o[r],t.point(s[0],s[1],s[2])},LineString:function(s,t){T(s.coordinates,t,0)},MultiLineString:function(s,t){for(var o=s.coordinates,r=-1,i=o.length;++r<i;)T(o[r],t,0)},Polygon:function(s,t){x(s.coordinates,t)},MultiPolygon:function(s,t){for(var o=s.coordinates,r=-1,i=o.length;++r<i;)x(o[r],t)},GeometryCollection:function(s,t){for(var o=s.geometries,r=-1,i=o.length;++r<i;)v(o[r],t)}};function T(s,t,o){var r,i=-1,a=s.length-o;for(t.lineStart();++i<a;)r=s[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function x(s,t){var o=-1,r=s.length;for(t.polygonStart();++o<r;)T(s[o],t,1);t.polygonEnd()}function f(s,t){s&&w.hasOwnProperty(s.type)?w[s.type](s,t):v(s,t)}},15196:function(C,A,e){"use strict";function v(T){return{stream:w(T)}}function w(T){return function(x){var f=new n;for(var s in T)f[s]=T[s];return f.stream=x,f}}function n(){}e.d(A,{c:function(){return v},s:function(){return w}}),n.prototype={constructor:n,point:function(T,x){this.stream.point(T,x)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},74148:function(C,A,e){"use strict";function v(ae,pe){return ae.parent===pe.parent?1:2}function w(ae,pe){return ae+pe.x}function n(ae,pe){return Math.max(ae,pe.y)}function T(){var ae=v,pe=1,De=1,ke=!1;function Ee(Ie){var Re,Ne=0;Ie.eachAfter(function(Pe){var Ue=Pe.children;Ue?(Pe.x=function(Ge){return Ge.reduce(w,0)/Ge.length}(Ue),Pe.y=function(Ge){return 1+Ge.reduce(n,0)}(Ue)):(Pe.x=Re?Ne+=ae(Pe,Re):0,Pe.y=0,Re=Pe)});var ge=function(Pe){for(var Ue;Ue=Pe.children;)Pe=Ue[0];return Pe}(Ie),we=function(Pe){for(var Ue;Ue=Pe.children;)Pe=Ue[Ue.length-1];return Pe}(Ie),Ce=ge.x-ae(ge,we)/2,ze=we.x+ae(we,ge)/2;return Ie.eachAfter(ke?function(Pe){Pe.x=(Pe.x-Ie.x)*pe,Pe.y=(Ie.y-Pe.y)*De}:function(Pe){Pe.x=(Pe.x-Ce)/(ze-Ce)*pe,Pe.y=(1-(Ie.y?Pe.y/Ie.y:1))*De})}return Ee.separation=function(Ie){return arguments.length?(ae=Ie,Ee):ae},Ee.size=function(Ie){return arguments.length?(ke=!1,pe=+Ie[0],De=+Ie[1],Ee):ke?null:[pe,De]},Ee.nodeSize=function(Ie){return arguments.length?(ke=!0,pe=+Ie[0],De=+Ie[1],Ee):ke?[pe,De]:null},Ee}function x(ae){var pe=0,De=ae.children,ke=De&&De.length;if(ke)for(;--ke>=0;)pe+=De[ke].value;else pe=1;ae.value=pe}function f(ae,pe){var De,ke,Ee,Ie,Re,Ne=new r(ae),ge=+ae.value&&(Ne.value=ae.value),we=[Ne];for(pe==null&&(pe=s);De=we.pop();)if(ge&&(De.value=+De.data.value),(Ee=pe(De.data))&&(Re=Ee.length))for(De.children=new Array(Re),Ie=Re-1;Ie>=0;--Ie)we.push(ke=De.children[Ie]=new r(Ee[Ie])),ke.parent=De,ke.depth=De.depth+1;return Ne.eachBefore(o)}function s(ae){return ae.children}function t(ae){ae.data=ae.data.data}function o(ae){var pe=0;do ae.height=pe;while((ae=ae.parent)&&ae.height<++pe)}function r(ae){this.data=ae,this.depth=this.height=0,this.parent=null}e.r(A),e.d(A,{cluster:function(){return T},hierarchy:function(){return f},pack:function(){return O},packEnclose:function(){return a},packSiblings:function(){return E},partition:function(){return z},stratify:function(){return Q},tree:function(){return be},treemap:function(){return me},treemapBinary:function(){return Me},treemapDice:function(){return Z},treemapResquarify:function(){return ce},treemapSlice:function(){return _e},treemapSliceDice:function(){return Ae},treemapSquarify:function(){return ye}}),r.prototype=f.prototype={constructor:r,count:function(){return this.eachAfter(x)},each:function(ae){var pe,De,ke,Ee,Ie=this,Re=[Ie];do for(pe=Re.reverse(),Re=[];Ie=pe.pop();)if(ae(Ie),De=Ie.children)for(ke=0,Ee=De.length;ke<Ee;++ke)Re.push(De[ke]);while(Re.length);return this},eachAfter:function(ae){for(var pe,De,ke,Ee=this,Ie=[Ee],Re=[];Ee=Ie.pop();)if(Re.push(Ee),pe=Ee.children)for(De=0,ke=pe.length;De<ke;++De)Ie.push(pe[De]);for(;Ee=Re.pop();)ae(Ee);return this},eachBefore:function(ae){for(var pe,De,ke=this,Ee=[ke];ke=Ee.pop();)if(ae(ke),pe=ke.children)for(De=pe.length-1;De>=0;--De)Ee.push(pe[De]);return this},sum:function(ae){return this.eachAfter(function(pe){for(var De=+ae(pe.data)||0,ke=pe.children,Ee=ke&&ke.length;--Ee>=0;)De+=ke[Ee].value;pe.value=De})},sort:function(ae){return this.eachBefore(function(pe){pe.children&&pe.children.sort(ae)})},path:function(ae){for(var pe=this,De=function(Ie,Re){if(Ie===Re)return Ie;var Ne=Ie.ancestors(),ge=Re.ancestors(),we=null;for(Ie=Ne.pop(),Re=ge.pop();Ie===Re;)we=Ie,Ie=Ne.pop(),Re=ge.pop();return we}(pe,ae),ke=[pe];pe!==De;)pe=pe.parent,ke.push(pe);for(var Ee=ke.length;ae!==De;)ke.splice(Ee,0,ae),ae=ae.parent;return ke},ancestors:function(){for(var ae=this,pe=[ae];ae=ae.parent;)pe.push(ae);return pe},descendants:function(){var ae=[];return this.each(function(pe){ae.push(pe)}),ae},leaves:function(){var ae=[];return this.eachBefore(function(pe){pe.children||ae.push(pe)}),ae},links:function(){var ae=this,pe=[];return ae.each(function(De){De!==ae&&pe.push({source:De.parent,target:De})}),pe},copy:function(){return f(this).eachBefore(t)}};var i=Array.prototype.slice;function a(ae){for(var pe,De,ke=0,Ee=(ae=function(Re){for(var Ne,ge,we=Re.length;we;)ge=Math.random()*we--|0,Ne=Re[we],Re[we]=Re[ge],Re[ge]=Ne;return Re}(i.call(ae))).length,Ie=[];ke<Ee;)pe=ae[ke],De&&d(De,pe)?++ke:(De=_(Ie=u(Ie,pe)),ke=0);return De}function u(ae,pe){var De,ke;if(c(pe,ae))return[pe];for(De=0;De<ae.length;++De)if(l(pe,ae[De])&&c(p(ae[De],pe),ae))return[ae[De],pe];for(De=0;De<ae.length-1;++De)for(ke=De+1;ke<ae.length;++ke)if(l(p(ae[De],ae[ke]),pe)&&l(p(ae[De],pe),ae[ke])&&l(p(ae[ke],pe),ae[De])&&c(g(ae[De],ae[ke],pe),ae))return[ae[De],ae[ke],pe];throw new Error}function l(ae,pe){var De=ae.r-pe.r,ke=pe.x-ae.x,Ee=pe.y-ae.y;return De<0||De*De<ke*ke+Ee*Ee}function d(ae,pe){var De=ae.r-pe.r+1e-6,ke=pe.x-ae.x,Ee=pe.y-ae.y;return De>0&&De*De>ke*ke+Ee*Ee}function c(ae,pe){for(var De=0;De<pe.length;++De)if(!d(ae,pe[De]))return!1;return!0}function _(ae){switch(ae.length){case 1:return{x:(pe=ae[0]).x,y:pe.y,r:pe.r};case 2:return p(ae[0],ae[1]);case 3:return g(ae[0],ae[1],ae[2])}var pe}function p(ae,pe){var De=ae.x,ke=ae.y,Ee=ae.r,Ie=pe.x,Re=pe.y,Ne=pe.r,ge=Ie-De,we=Re-ke,Ce=Ne-Ee,ze=Math.sqrt(ge*ge+we*we);return{x:(De+Ie+ge/ze*Ce)/2,y:(ke+Re+we/ze*Ce)/2,r:(ze+Ee+Ne)/2}}function g(ae,pe,De){var ke=ae.x,Ee=ae.y,Ie=ae.r,Re=pe.x,Ne=pe.y,ge=pe.r,we=De.x,Ce=De.y,ze=De.r,Pe=ke-Re,Ue=ke-we,Ge=Ee-Ne,Xe=Ee-Ce,st=ge-Ie,at=ze-Ie,vt=ke*ke+Ee*Ee-Ie*Ie,xt=vt-Re*Re-Ne*Ne+ge*ge,gt=vt-we*we-Ce*Ce+ze*ze,rt=Ue*Ge-Pe*Xe,tt=(Ge*gt-Xe*xt)/(2*rt)-ke,Mt=(Xe*st-Ge*at)/rt,Pt=(Ue*xt-Pe*gt)/(2*rt)-Ee,Rt=(Pe*at-Ue*st)/rt,St=Mt*Mt+Rt*Rt-1,Ye=2*(Ie+tt*Mt+Pt*Rt),Ke=tt*tt+Pt*Pt-Ie*Ie,Ve=-(St?(Ye+Math.sqrt(Ye*Ye-4*St*Ke))/(2*St):Ke/Ye);return{x:ke+tt+Mt*Ve,y:Ee+Pt+Rt*Ve,r:Ve}}function m(ae,pe,De){var ke,Ee,Ie,Re,Ne=ae.x-pe.x,ge=ae.y-pe.y,we=Ne*Ne+ge*ge;we?(Ee=pe.r+De.r,Ee*=Ee,Re=ae.r+De.r,Ee>(Re*=Re)?(ke=(we+Re-Ee)/(2*we),Ie=Math.sqrt(Math.max(0,Re/we-ke*ke)),De.x=ae.x-ke*Ne-Ie*ge,De.y=ae.y-ke*ge+Ie*Ne):(ke=(we+Ee-Re)/(2*we),Ie=Math.sqrt(Math.max(0,Ee/we-ke*ke)),De.x=pe.x+ke*Ne-Ie*ge,De.y=pe.y+ke*ge+Ie*Ne)):(De.x=pe.x+De.r,De.y=pe.y)}function b(ae,pe){var De=ae.r+pe.r-1e-6,ke=pe.x-ae.x,Ee=pe.y-ae.y;return De>0&&De*De>ke*ke+Ee*Ee}function y(ae){var pe=ae._,De=ae.next._,ke=pe.r+De.r,Ee=(pe.x*De.r+De.x*pe.r)/ke,Ie=(pe.y*De.r+De.y*pe.r)/ke;return Ee*Ee+Ie*Ie}function M(ae){this._=ae,this.next=null,this.previous=null}function h(ae){if(!(Ee=ae.length))return 0;var pe,De,ke,Ee,Ie,Re,Ne,ge,we,Ce,ze;if((pe=ae[0]).x=0,pe.y=0,!(Ee>1))return pe.r;if(De=ae[1],pe.x=-De.r,De.x=pe.r,De.y=0,!(Ee>2))return pe.r+De.r;m(De,pe,ke=ae[2]),pe=new M(pe),De=new M(De),ke=new M(ke),pe.next=ke.previous=De,De.next=pe.previous=ke,ke.next=De.previous=pe;e:for(Ne=3;Ne<Ee;++Ne){m(pe._,De._,ke=ae[Ne]),ke=new M(ke),ge=De.next,we=pe.previous,Ce=De._.r,ze=pe._.r;do if(Ce<=ze){if(b(ge._,ke._)){De=ge,pe.next=De,De.previous=pe,--Ne;continue e}Ce+=ge._.r,ge=ge.next}else{if(b(we._,ke._)){(pe=we).next=De,De.previous=pe,--Ne;continue e}ze+=we._.r,we=we.previous}while(ge!==we.next);for(ke.previous=pe,ke.next=De,pe.next=De.previous=De=ke,Ie=y(pe);(ke=ke.next)!==De;)(Re=y(ke))<Ie&&(pe=ke,Ie=Re);De=pe.next}for(pe=[De._],ke=De;(ke=ke.next)!==De;)pe.push(ke._);for(ke=a(pe),Ne=0;Ne<Ee;++Ne)(pe=ae[Ne]).x-=ke.x,pe.y-=ke.y;return ke.r}function E(ae){return h(ae),ae}function k(ae){if(typeof ae!="function")throw new Error;return ae}function D(){return 0}function P(ae){return function(){return ae}}function L(ae){return Math.sqrt(ae.value)}function O(){var ae=null,pe=1,De=1,ke=D;function Ee(Ie){return Ie.x=pe/2,Ie.y=De/2,ae?Ie.eachBefore(N(ae)).eachAfter(V(ke,.5)).eachBefore(F(1)):Ie.eachBefore(N(L)).eachAfter(V(D,1)).eachAfter(V(ke,Ie.r/Math.min(pe,De))).eachBefore(F(Math.min(pe,De)/(2*Ie.r))),Ie}return Ee.radius=function(Ie){return arguments.length?(ae=(Re=Ie)==null?null:k(Re),Ee):ae;var Re},Ee.size=function(Ie){return arguments.length?(pe=+Ie[0],De=+Ie[1],Ee):[pe,De]},Ee.padding=function(Ie){return arguments.length?(ke=typeof Ie=="function"?Ie:P(+Ie),Ee):ke},Ee}function N(ae){return function(pe){pe.children||(pe.r=Math.max(0,+ae(pe)||0))}}function V(ae,pe){return function(De){if(ke=De.children){var ke,Ee,Ie,Re=ke.length,Ne=ae(De)*pe||0;if(Ne)for(Ee=0;Ee<Re;++Ee)ke[Ee].r+=Ne;if(Ie=h(ke),Ne)for(Ee=0;Ee<Re;++Ee)ke[Ee].r-=Ne;De.r=Ie+Ne}}}function F(ae){return function(pe){var De=pe.parent;pe.r*=ae,De&&(pe.x=De.x+ae*pe.x,pe.y=De.y+ae*pe.y)}}function j(ae){ae.x0=Math.round(ae.x0),ae.y0=Math.round(ae.y0),ae.x1=Math.round(ae.x1),ae.y1=Math.round(ae.y1)}function Z(ae,pe,De,ke,Ee){for(var Ie,Re=ae.children,Ne=-1,ge=Re.length,we=ae.value&&(ke-pe)/ae.value;++Ne<ge;)(Ie=Re[Ne]).y0=De,Ie.y1=Ee,Ie.x0=pe,Ie.x1=pe+=Ie.value*we}function z(){var ae=1,pe=1,De=0,ke=!1;function Ee(Ie){var Re=Ie.height+1;return Ie.x0=Ie.y0=De,Ie.x1=ae,Ie.y1=pe/Re,Ie.eachBefore(function(Ne,ge){return function(we){we.children&&Z(we,we.x0,Ne*(we.depth+1)/ge,we.x1,Ne*(we.depth+2)/ge);var Ce=we.x0,ze=we.y0,Pe=we.x1-De,Ue=we.y1-De;Pe<Ce&&(Ce=Pe=(Ce+Pe)/2),Ue<ze&&(ze=Ue=(ze+Ue)/2),we.x0=Ce,we.y0=ze,we.x1=Pe,we.y1=Ue}}(pe,Re)),ke&&Ie.eachBefore(j),Ie}return Ee.round=function(Ie){return arguments.length?(ke=!!Ie,Ee):ke},Ee.size=function(Ie){return arguments.length?(ae=+Ie[0],pe=+Ie[1],Ee):[ae,pe]},Ee.padding=function(Ie){return arguments.length?(De=+Ie,Ee):De},Ee}var H="$",U={depth:-1},re={};function ee(ae){return ae.id}function J(ae){return ae.parentId}function Q(){var ae=ee,pe=J;function De(ke){var Ee,Ie,Re,Ne,ge,we,Ce,ze=ke.length,Pe=new Array(ze),Ue={};for(Ie=0;Ie<ze;++Ie)Ee=ke[Ie],ge=Pe[Ie]=new r(Ee),(we=ae(Ee,Ie,ke))!=null&&(we+="")&&(Ue[Ce=H+(ge.id=we)]=Ce in Ue?re:ge);for(Ie=0;Ie<ze;++Ie)if(ge=Pe[Ie],(we=pe(ke[Ie],Ie,ke))!=null&&(we+="")){if(!(Ne=Ue[H+we]))throw new Error("missing: "+we);if(Ne===re)throw new Error("ambiguous: "+we);Ne.children?Ne.children.push(ge):Ne.children=[ge],ge.parent=Ne}else{if(Re)throw new Error("multiple roots");Re=ge}if(!Re)throw new Error("no root");if(Re.parent=U,Re.eachBefore(function(Ge){Ge.depth=Ge.parent.depth+1,--ze}).eachBefore(o),Re.parent=null,ze>0)throw new Error("cycle");return Re}return De.id=function(ke){return arguments.length?(ae=k(ke),De):ae},De.parentId=function(ke){return arguments.length?(pe=k(ke),De):pe},De}function ne(ae,pe){return ae.parent===pe.parent?1:2}function K(ae){var pe=ae.children;return pe?pe[0]:ae.t}function oe(ae){var pe=ae.children;return pe?pe[pe.length-1]:ae.t}function le(ae,pe,De){var ke=De/(pe.i-ae.i);pe.c-=ke,pe.s+=De,ae.c+=ke,pe.z+=De,pe.m+=De}function se(ae,pe,De){return ae.a.parent===pe.parent?ae.a:De}function de(ae,pe){this._=ae,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=pe}function be(){var ae=ne,pe=1,De=1,ke=null;function Ee(ge){var we=function(at){for(var vt,xt,gt,rt,tt,Mt=new de(at,0),Pt=[Mt];vt=Pt.pop();)if(gt=vt._.children)for(vt.children=new Array(tt=gt.length),rt=tt-1;rt>=0;--rt)Pt.push(xt=vt.children[rt]=new de(gt[rt],rt)),xt.parent=vt;return(Mt.parent=new de(null,0)).children=[Mt],Mt}(ge);if(we.eachAfter(Ie),we.parent.m=-we.z,we.eachBefore(Re),ke)ge.eachBefore(Ne);else{var Ce=ge,ze=ge,Pe=ge;ge.eachBefore(function(at){at.x<Ce.x&&(Ce=at),at.x>ze.x&&(ze=at),at.depth>Pe.depth&&(Pe=at)});var Ue=Ce===ze?1:ae(Ce,ze)/2,Ge=Ue-Ce.x,Xe=pe/(ze.x+Ue+Ge),st=De/(Pe.depth||1);ge.eachBefore(function(at){at.x=(at.x+Ge)*Xe,at.y=at.depth*st})}return ge}function Ie(ge){var we=ge.children,Ce=ge.parent.children,ze=ge.i?Ce[ge.i-1]:null;if(we){(function(Ue){for(var Ge,Xe=0,st=0,at=Ue.children,vt=at.length;--vt>=0;)(Ge=at[vt]).z+=Xe,Ge.m+=Xe,Xe+=Ge.s+(st+=Ge.c)})(ge);var Pe=(we[0].z+we[we.length-1].z)/2;ze?(ge.z=ze.z+ae(ge._,ze._),ge.m=ge.z-Pe):ge.z=Pe}else ze&&(ge.z=ze.z+ae(ge._,ze._));ge.parent.A=function(Ue,Ge,Xe){if(Ge){for(var st,at=Ue,vt=Ue,xt=Ge,gt=at.parent.children[0],rt=at.m,tt=vt.m,Mt=xt.m,Pt=gt.m;xt=oe(xt),at=K(at),xt&&at;)gt=K(gt),(vt=oe(vt)).a=Ue,(st=xt.z+Mt-at.z-rt+ae(xt._,at._))>0&&(le(se(xt,Ue,Xe),Ue,st),rt+=st,tt+=st),Mt+=xt.m,rt+=at.m,Pt+=gt.m,tt+=vt.m;xt&&!oe(vt)&&(vt.t=xt,vt.m+=Mt-tt),at&&!K(gt)&&(gt.t=at,gt.m+=rt-Pt,Xe=Ue)}return Xe}(ge,ze,ge.parent.A||Ce[0])}function Re(ge){ge._.x=ge.z+ge.parent.m,ge.m+=ge.parent.m}function Ne(ge){ge.x*=pe,ge.y=ge.depth*De}return Ee.separation=function(ge){return arguments.length?(ae=ge,Ee):ae},Ee.size=function(ge){return arguments.length?(ke=!1,pe=+ge[0],De=+ge[1],Ee):ke?null:[pe,De]},Ee.nodeSize=function(ge){return arguments.length?(ke=!0,pe=+ge[0],De=+ge[1],Ee):ke?[pe,De]:null},Ee}function _e(ae,pe,De,ke,Ee){for(var Ie,Re=ae.children,Ne=-1,ge=Re.length,we=ae.value&&(Ee-De)/ae.value;++Ne<ge;)(Ie=Re[Ne]).x0=pe,Ie.x1=ke,Ie.y0=De,Ie.y1=De+=Ie.value*we}de.prototype=Object.create(r.prototype);var xe=(1+Math.sqrt(5))/2;function ve(ae,pe,De,ke,Ee,Ie){for(var Re,Ne,ge,we,Ce,ze,Pe,Ue,Ge,Xe,st,at=[],vt=pe.children,xt=0,gt=0,rt=vt.length,tt=pe.value;xt<rt;){ge=Ee-De,we=Ie-ke;do Ce=vt[gt++].value;while(!Ce&&gt<rt);for(ze=Pe=Ce,st=Ce*Ce*(Xe=Math.max(we/ge,ge/we)/(tt*ae)),Ge=Math.max(Pe/st,st/ze);gt<rt;++gt){if(Ce+=Ne=vt[gt].value,Ne<ze&&(ze=Ne),Ne>Pe&&(Pe=Ne),st=Ce*Ce*Xe,(Ue=Math.max(Pe/st,st/ze))>Ge){Ce-=Ne;break}Ge=Ue}at.push(Re={value:Ce,dice:ge<we,children:vt.slice(xt,gt)}),Re.dice?Z(Re,De,ke,Ee,tt?ke+=we*Ce/tt:Ie):_e(Re,De,ke,tt?De+=ge*Ce/tt:Ee,Ie),tt-=Ce,xt=gt}return at}var ye=function ae(pe){function De(ke,Ee,Ie,Re,Ne){ve(pe,ke,Ee,Ie,Re,Ne)}return De.ratio=function(ke){return ae((ke=+ke)>1?ke:1)},De}(xe);function me(){var ae=ye,pe=!1,De=1,ke=1,Ee=[0],Ie=D,Re=D,Ne=D,ge=D,we=D;function Ce(Pe){return Pe.x0=Pe.y0=0,Pe.x1=De,Pe.y1=ke,Pe.eachBefore(ze),Ee=[0],pe&&Pe.eachBefore(j),Pe}function ze(Pe){var Ue=Ee[Pe.depth],Ge=Pe.x0+Ue,Xe=Pe.y0+Ue,st=Pe.x1-Ue,at=Pe.y1-Ue;st<Ge&&(Ge=st=(Ge+st)/2),at<Xe&&(Xe=at=(Xe+at)/2),Pe.x0=Ge,Pe.y0=Xe,Pe.x1=st,Pe.y1=at,Pe.children&&(Ue=Ee[Pe.depth+1]=Ie(Pe)/2,Ge+=we(Pe)-Ue,Xe+=Re(Pe)-Ue,(st-=Ne(Pe)-Ue)<Ge&&(Ge=st=(Ge+st)/2),(at-=ge(Pe)-Ue)<Xe&&(Xe=at=(Xe+at)/2),ae(Pe,Ge,Xe,st,at))}return Ce.round=function(Pe){return arguments.length?(pe=!!Pe,Ce):pe},Ce.size=function(Pe){return arguments.length?(De=+Pe[0],ke=+Pe[1],Ce):[De,ke]},Ce.tile=function(Pe){return arguments.length?(ae=k(Pe),Ce):ae},Ce.padding=function(Pe){return arguments.length?Ce.paddingInner(Pe).paddingOuter(Pe):Ce.paddingInner()},Ce.paddingInner=function(Pe){return arguments.length?(Ie=typeof Pe=="function"?Pe:P(+Pe),Ce):Ie},Ce.paddingOuter=function(Pe){return arguments.length?Ce.paddingTop(Pe).paddingRight(Pe).paddingBottom(Pe).paddingLeft(Pe):Ce.paddingTop()},Ce.paddingTop=function(Pe){return arguments.length?(Re=typeof Pe=="function"?Pe:P(+Pe),Ce):Re},Ce.paddingRight=function(Pe){return arguments.length?(Ne=typeof Pe=="function"?Pe:P(+Pe),Ce):Ne},Ce.paddingBottom=function(Pe){return arguments.length?(ge=typeof Pe=="function"?Pe:P(+Pe),Ce):ge},Ce.paddingLeft=function(Pe){return arguments.length?(we=typeof Pe=="function"?Pe:P(+Pe),Ce):we},Ce}function Me(ae,pe,De,ke,Ee){var Ie,Re,Ne=ae.children,ge=Ne.length,we=new Array(ge+1);for(we[0]=Re=Ie=0;Ie<ge;++Ie)we[Ie+1]=Re+=Ne[Ie].value;(function Ce(ze,Pe,Ue,Ge,Xe,st,at){if(ze>=Pe-1){var vt=Ne[ze];return vt.x0=Ge,vt.y0=Xe,vt.x1=st,void(vt.y1=at)}for(var xt=we[ze],gt=Ue/2+xt,rt=ze+1,tt=Pe-1;rt<tt;){var Mt=rt+tt>>>1;we[Mt]<gt?rt=Mt+1:tt=Mt}gt-we[rt-1]<we[rt]-gt&&ze+1<rt&&--rt;var Pt=we[rt]-xt,Rt=Ue-Pt;if(st-Ge>at-Xe){var St=(Ge*Rt+st*Pt)/Ue;Ce(ze,rt,Pt,Ge,Xe,St,at),Ce(rt,Pe,Rt,St,Xe,st,at)}else{var Ye=(Xe*Rt+at*Pt)/Ue;Ce(ze,rt,Pt,Ge,Xe,st,Ye),Ce(rt,Pe,Rt,Ge,Ye,st,at)}})(0,ge,ae.value,pe,De,ke,Ee)}function Ae(ae,pe,De,ke,Ee){(1&ae.depth?_e:Z)(ae,pe,De,ke,Ee)}var ce=function ae(pe){function De(ke,Ee,Ie,Re,Ne){if((ge=ke._squarify)&&ge.ratio===pe)for(var ge,we,Ce,ze,Pe,Ue=-1,Ge=ge.length,Xe=ke.value;++Ue<Ge;){for(Ce=(we=ge[Ue]).children,ze=we.value=0,Pe=Ce.length;ze<Pe;++ze)we.value+=Ce[ze].value;we.dice?Z(we,Ee,Ie,Re,Ie+=(Ne-Ie)*we.value/Xe):_e(we,Ee,Ie,Ee+=(Re-Ee)*we.value/Xe,Ne),Xe-=we.value}else ke._squarify=ge=ve(pe,ke,Ee,Ie,Re,Ne),ge.ratio=pe}return De.ratio=function(ke){return ae((ke=+ke)>1?ke:1)},De}(xe)},10132:function(C,A,e){"use strict";e.d(A,{ak:function(){return d}});var v=Math.PI,w=2*v,n=1e-6,T=w-n;function x(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function f(){return new x}x.prototype=f.prototype={constructor:x,moveTo:function(c,_){this._+="M"+(this._x0=this._x1=+c)+","+(this._y0=this._y1=+_)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(c,_){this._+="L"+(this._x1=+c)+","+(this._y1=+_)},quadraticCurveTo:function(c,_,p,g){this._+="Q"+ +c+","+ +_+","+(this._x1=+p)+","+(this._y1=+g)},bezierCurveTo:function(c,_,p,g,m,b){this._+="C"+ +c+","+ +_+","+ +p+","+ +g+","+(this._x1=+m)+","+(this._y1=+b)},arcTo:function(c,_,p,g,m){c=+c,_=+_,p=+p,g=+g,m=+m;var b=this._x1,y=this._y1,M=p-c,h=g-_,E=b-c,k=y-_,D=E*E+k*k;if(m<0)throw new Error("negative radius: "+m);if(this._x1===null)this._+="M"+(this._x1=c)+","+(this._y1=_);else if(D>n)if(Math.abs(k*M-h*E)>n&&m){var P=p-b,L=g-y,O=M*M+h*h,N=P*P+L*L,V=Math.sqrt(O),F=Math.sqrt(D),j=m*Math.tan((v-Math.acos((O+D-N)/(2*V*F)))/2),Z=j/F,z=j/V;Math.abs(Z-1)>n&&(this._+="L"+(c+Z*E)+","+(_+Z*k)),this._+="A"+m+","+m+",0,0,"+ +(k*P>E*L)+","+(this._x1=c+z*M)+","+(this._y1=_+z*h)}else this._+="L"+(this._x1=c)+","+(this._y1=_)},arc:function(c,_,p,g,m,b){c=+c,_=+_,b=!!b;var y=(p=+p)*Math.cos(g),M=p*Math.sin(g),h=c+y,E=_+M,k=1^b,D=b?g-m:m-g;if(p<0)throw new Error("negative radius: "+p);this._x1===null?this._+="M"+h+","+E:(Math.abs(this._x1-h)>n||Math.abs(this._y1-E)>n)&&(this._+="L"+h+","+E),p&&(D<0&&(D=D%w+w),D>T?this._+="A"+p+","+p+",0,1,"+k+","+(c-y)+","+(_-M)+"A"+p+","+p+",0,1,"+k+","+(this._x1=h)+","+(this._y1=E):D>n&&(this._+="A"+p+","+p+",0,"+ +(D>=v)+","+k+","+(this._x1=c+p*Math.cos(m))+","+(this._y1=_+p*Math.sin(m))))},rect:function(c,_,p,g){this._+="M"+(this._x0=this._x1=+c)+","+(this._y0=this._y1=+_)+"h"+ +p+"v"+ +g+"h"+-p+"Z"},toString:function(){return this._}};var s=f,t=Array.prototype.slice;function o(c){return function(){return c}}function r(c){return c[0]}function i(c){return c[1]}function a(c){return c.source}function u(c){return c.target}function l(c,_,p,g,m){c.moveTo(_,p),c.bezierCurveTo(_=(_+g)/2,p,_,m,g,m)}function d(){return function(c){var _=a,p=u,g=r,m=i,b=null;function y(){var M,h=t.call(arguments),E=_.apply(this,h),k=p.apply(this,h);if(b||(b=M=s()),c(b,+g.apply(this,(h[0]=E,h)),+m.apply(this,h),+g.apply(this,(h[0]=k,h)),+m.apply(this,h)),M)return b=null,M+""||null}return y.source=function(M){return arguments.length?(_=M,y):_},y.target=function(M){return arguments.length?(p=M,y):p},y.x=function(M){return arguments.length?(g=typeof M=="function"?M:o(+M),y):g},y.y=function(M){return arguments.length?(m=typeof M=="function"?M:o(+M),y):m},y.context=function(M){return arguments.length?(b=M??null,y):b},y}(l)}},94336:function(C,A,e){"use strict";e.d(A,{Yn:function(){return a},m_:function(){return r},E9:function(){return u}});var v=e(8208),w=e(58931),n=e(46192),T=e(68936),x=e(32171),f=e(53528);function s(rt){if(0<=rt.y&&rt.y<100){var tt=new Date(-1,rt.m,rt.d,rt.H,rt.M,rt.S,rt.L);return tt.setFullYear(rt.y),tt}return new Date(rt.y,rt.m,rt.d,rt.H,rt.M,rt.S,rt.L)}function t(rt){if(0<=rt.y&&rt.y<100){var tt=new Date(Date.UTC(-1,rt.m,rt.d,rt.H,rt.M,rt.S,rt.L));return tt.setUTCFullYear(rt.y),tt}return new Date(Date.UTC(rt.y,rt.m,rt.d,rt.H,rt.M,rt.S,rt.L))}function o(rt,tt,Mt){return{y:rt,m:tt,d:Mt,H:0,M:0,S:0,L:0}}function r(rt){var tt=rt.dateTime,Mt=rt.date,Pt=rt.time,Rt=rt.periods,St=rt.days,Ye=rt.shortDays,Ke=rt.months,Ve=rt.shortMonths,$e=m(Rt),lt=b(Rt),it=m(St),Be=b(St),je=m(Ye),ot=b(Ye),Ze=m(Ke),dt=b(Ke),mt=m(Ve),yt=b(Ve),ht={a:function(Ft){return Ye[Ft.getDay()]},A:function(Ft){return St[Ft.getDay()]},b:function(Ft){return Ve[Ft.getMonth()]},B:function(Ft){return Ke[Ft.getMonth()]},c:null,d:Q,e:Q,f:se,H:ne,I:K,j:oe,L:le,m:de,M:be,p:function(Ft){return Rt[+(Ft.getHours()>=12)]},q:function(Ft){return 1+~~(Ft.getMonth()/3)},Q:xt,s:gt,S:_e,u:xe,U:ve,V:ye,w:me,W:Me,x:null,X:null,y:Ae,Y:ce,Z:ae,"%":vt},kt={a:function(Ft){return Ye[Ft.getUTCDay()]},A:function(Ft){return St[Ft.getUTCDay()]},b:function(Ft){return Ve[Ft.getUTCMonth()]},B:function(Ft){return Ke[Ft.getUTCMonth()]},c:null,d:pe,e:pe,f:Re,H:De,I:ke,j:Ee,L:Ie,m:Ne,M:ge,p:function(Ft){return Rt[+(Ft.getUTCHours()>=12)]},q:function(Ft){return 1+~~(Ft.getUTCMonth()/3)},Q:xt,s:gt,S:we,u:Ce,U:ze,V:Pe,w:Ue,W:Ge,x:null,X:null,y:Xe,Y:st,Z:at,"%":vt},_t={a:function(Ft,Zt,Ht){var Ut=je.exec(Zt.slice(Ht));return Ut?(Ft.w=ot[Ut[0].toLowerCase()],Ht+Ut[0].length):-1},A:function(Ft,Zt,Ht){var Ut=it.exec(Zt.slice(Ht));return Ut?(Ft.w=Be[Ut[0].toLowerCase()],Ht+Ut[0].length):-1},b:function(Ft,Zt,Ht){var Ut=mt.exec(Zt.slice(Ht));return Ut?(Ft.m=yt[Ut[0].toLowerCase()],Ht+Ut[0].length):-1},B:function(Ft,Zt,Ht){var Ut=Ze.exec(Zt.slice(Ht));return Ut?(Ft.m=dt[Ut[0].toLowerCase()],Ht+Ut[0].length):-1},c:function(Ft,Zt,Ht){return Ot(Ft,tt,Zt,Ht)},d:V,e:V,f:U,H:j,I:j,j:F,L:H,m:N,M:Z,p:function(Ft,Zt,Ht){var Ut=$e.exec(Zt.slice(Ht));return Ut?(Ft.p=lt[Ut[0].toLowerCase()],Ht+Ut[0].length):-1},q:O,Q:ee,s:J,S:z,u:M,U:h,V:E,w:y,W:k,x:function(Ft,Zt,Ht){return Ot(Ft,Mt,Zt,Ht)},X:function(Ft,Zt,Ht){return Ot(Ft,Pt,Zt,Ht)},y:P,Y:D,Z:L,"%":re};function Et(Ft,Zt){return function(Ht){var Ut,Wt,nn,On=[],kn=-1,gn=0,Jt=Ft.length;for(Ht instanceof Date||(Ht=new Date(+Ht));++kn<Jt;)Ft.charCodeAt(kn)===37&&(On.push(Ft.slice(gn,kn)),(Wt=l[Ut=Ft.charAt(++kn)])!=null?Ut=Ft.charAt(++kn):Wt=Ut==="e"?" ":"0",(nn=Zt[Ut])&&(Ut=nn(Ht,Wt)),On.push(Ut),gn=kn+1);return On.push(Ft.slice(gn,kn)),On.join("")}}function Lt(Ft,Zt){return function(Ht){var Ut,Wt,nn=o(1900,void 0,1);if(Ot(nn,Ft,Ht+="",0)!=Ht.length)return null;if("Q"in nn)return new Date(nn.Q);if("s"in nn)return new Date(1e3*nn.s+("L"in nn?nn.L:0));if(Zt&&!("Z"in nn)&&(nn.Z=0),"p"in nn&&(nn.H=nn.H%12+12*nn.p),nn.m===void 0&&(nn.m="q"in nn?nn.q:0),"V"in nn){if(nn.V<1||nn.V>53)return null;"w"in nn||(nn.w=1),"Z"in nn?(Wt=(Ut=t(o(nn.y,0,1))).getUTCDay(),Ut=Wt>4||Wt===0?v.ot.ceil(Ut):(0,v.ot)(Ut),Ut=w.c.offset(Ut,7*(nn.V-1)),nn.y=Ut.getUTCFullYear(),nn.m=Ut.getUTCMonth(),nn.d=Ut.getUTCDate()+(nn.w+6)%7):(Wt=(Ut=s(o(nn.y,0,1))).getDay(),Ut=Wt>4||Wt===0?n.qT.ceil(Ut):(0,n.qT)(Ut),Ut=T.c.offset(Ut,7*(nn.V-1)),nn.y=Ut.getFullYear(),nn.m=Ut.getMonth(),nn.d=Ut.getDate()+(nn.w+6)%7)}else("W"in nn||"U"in nn)&&("w"in nn||(nn.w="u"in nn?nn.u%7:"W"in nn?1:0),Wt="Z"in nn?t(o(nn.y,0,1)).getUTCDay():s(o(nn.y,0,1)).getDay(),nn.m=0,nn.d="W"in nn?(nn.w+6)%7+7*nn.W-(Wt+5)%7:nn.w+7*nn.U-(Wt+6)%7);return"Z"in nn?(nn.H+=nn.Z/100|0,nn.M+=nn.Z%100,t(nn)):s(nn)}}function Ot(Ft,Zt,Ht,Ut){for(var Wt,nn,On=0,kn=Zt.length,gn=Ht.length;On<kn;){if(Ut>=gn)return-1;if((Wt=Zt.charCodeAt(On++))===37){if(Wt=Zt.charAt(On++),!(nn=_t[Wt in l?Zt.charAt(On++):Wt])||(Ut=nn(Ft,Ht,Ut))<0)return-1}else if(Wt!=Ht.charCodeAt(Ut++))return-1}return Ut}return ht.x=Et(Mt,ht),ht.X=Et(Pt,ht),ht.c=Et(tt,ht),kt.x=Et(Mt,kt),kt.X=Et(Pt,kt),kt.c=Et(tt,kt),{format:function(Ft){var Zt=Et(Ft+="",ht);return Zt.toString=function(){return Ft},Zt},parse:function(Ft){var Zt=Lt(Ft+="",!1);return Zt.toString=function(){return Ft},Zt},utcFormat:function(Ft){var Zt=Et(Ft+="",kt);return Zt.toString=function(){return Ft},Zt},utcParse:function(Ft){var Zt=Lt(Ft+="",!0);return Zt.toString=function(){return Ft},Zt}}}var i,a,u,l={"-":"",_:" ",0:"0"},d=/^\s*\d+/,c=/^%/,_=/[\\^$*+?|[\]().{}]/g;function p(rt,tt,Mt){var Pt=rt<0?"-":"",Rt=(Pt?-rt:rt)+"",St=Rt.length;return Pt+(St<Mt?new Array(Mt-St+1).join(tt)+Rt:Rt)}function g(rt){return rt.replace(_,"\\$&")}function m(rt){return new RegExp("^(?:"+rt.map(g).join("|")+")","i")}function b(rt){for(var tt={},Mt=-1,Pt=rt.length;++Mt<Pt;)tt[rt[Mt].toLowerCase()]=Mt;return tt}function y(rt,tt,Mt){var Pt=d.exec(tt.slice(Mt,Mt+1));return Pt?(rt.w=+Pt[0],Mt+Pt[0].length):-1}function M(rt,tt,Mt){var Pt=d.exec(tt.slice(Mt,Mt+1));return Pt?(rt.u=+Pt[0],Mt+Pt[0].length):-1}function h(rt,tt,Mt){var Pt=d.exec(tt.slice(Mt,Mt+2));return Pt?(rt.U=+Pt[0],Mt+Pt[0].length):-1}function E(rt,tt,Mt){var Pt=d.exec(tt.slice(Mt,Mt+2));return Pt?(rt.V=+Pt[0],Mt+Pt[0].length):-1}function k(rt,tt,Mt){var Pt=d.exec(tt.slice(Mt,Mt+2));return Pt?(rt.W=+Pt[0],Mt+Pt[0].length):-1}function D(rt,tt,Mt){var Pt=d.exec(tt.slice(Mt,Mt+4));return Pt?(rt.y=+Pt[0],Mt+Pt[0].length):-1}function P(rt,tt,Mt){var Pt=d.exec(tt.slice(Mt,Mt+2));return Pt?(rt.y=+Pt[0]+(+Pt[0]>68?1900:2e3),Mt+Pt[0].length):-1}function L(rt,tt,Mt){var Pt=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(tt.slice(Mt,Mt+6));return Pt?(rt.Z=Pt[1]?0:-(Pt[2]+(Pt[3]||"00")),Mt+Pt[0].length):-1}function O(rt,tt,Mt){var Pt=d.exec(tt.slice(Mt,Mt+1));return Pt?(rt.q=3*Pt[0]-3,Mt+Pt[0].length):-1}function N(rt,tt,Mt){var Pt=d.exec(tt.slice(Mt,Mt+2));return Pt?(rt.m=Pt[0]-1,Mt+Pt[0].length):-1}function V(rt,tt,Mt){var Pt=d.exec(tt.slice(Mt,Mt+2));return Pt?(rt.d=+Pt[0],Mt+Pt[0].length):-1}function F(rt,tt,Mt){var Pt=d.exec(tt.slice(Mt,Mt+3));return Pt?(rt.m=0,rt.d=+Pt[0],Mt+Pt[0].length):-1}function j(rt,tt,Mt){var Pt=d.exec(tt.slice(Mt,Mt+2));return Pt?(rt.H=+Pt[0],Mt+Pt[0].length):-1}function Z(rt,tt,Mt){var Pt=d.exec(tt.slice(Mt,Mt+2));return Pt?(rt.M=+Pt[0],Mt+Pt[0].length):-1}function z(rt,tt,Mt){var Pt=d.exec(tt.slice(Mt,Mt+2));return Pt?(rt.S=+Pt[0],Mt+Pt[0].length):-1}function H(rt,tt,Mt){var Pt=d.exec(tt.slice(Mt,Mt+3));return Pt?(rt.L=+Pt[0],Mt+Pt[0].length):-1}function U(rt,tt,Mt){var Pt=d.exec(tt.slice(Mt,Mt+6));return Pt?(rt.L=Math.floor(Pt[0]/1e3),Mt+Pt[0].length):-1}function re(rt,tt,Mt){var Pt=c.exec(tt.slice(Mt,Mt+1));return Pt?Mt+Pt[0].length:-1}function ee(rt,tt,Mt){var Pt=d.exec(tt.slice(Mt));return Pt?(rt.Q=+Pt[0],Mt+Pt[0].length):-1}function J(rt,tt,Mt){var Pt=d.exec(tt.slice(Mt));return Pt?(rt.s=+Pt[0],Mt+Pt[0].length):-1}function Q(rt,tt){return p(rt.getDate(),tt,2)}function ne(rt,tt){return p(rt.getHours(),tt,2)}function K(rt,tt){return p(rt.getHours()%12||12,tt,2)}function oe(rt,tt){return p(1+T.c.count((0,x.c)(rt),rt),tt,3)}function le(rt,tt){return p(rt.getMilliseconds(),tt,3)}function se(rt,tt){return le(rt,tt)+"000"}function de(rt,tt){return p(rt.getMonth()+1,tt,2)}function be(rt,tt){return p(rt.getMinutes(),tt,2)}function _e(rt,tt){return p(rt.getSeconds(),tt,2)}function xe(rt){var tt=rt.getDay();return tt===0?7:tt}function ve(rt,tt){return p(n.uU.count((0,x.c)(rt)-1,rt),tt,2)}function ye(rt,tt){var Mt=rt.getDay();return rt=Mt>=4||Mt===0?(0,n.kD)(rt):n.kD.ceil(rt),p(n.kD.count((0,x.c)(rt),rt)+((0,x.c)(rt).getDay()===4),tt,2)}function me(rt){return rt.getDay()}function Me(rt,tt){return p(n.qT.count((0,x.c)(rt)-1,rt),tt,2)}function Ae(rt,tt){return p(rt.getFullYear()%100,tt,2)}function ce(rt,tt){return p(rt.getFullYear()%1e4,tt,4)}function ae(rt){var tt=rt.getTimezoneOffset();return(tt>0?"-":(tt*=-1,"+"))+p(tt/60|0,"0",2)+p(tt%60,"0",2)}function pe(rt,tt){return p(rt.getUTCDate(),tt,2)}function De(rt,tt){return p(rt.getUTCHours(),tt,2)}function ke(rt,tt){return p(rt.getUTCHours()%12||12,tt,2)}function Ee(rt,tt){return p(1+w.c.count((0,f.c)(rt),rt),tt,3)}function Ie(rt,tt){return p(rt.getUTCMilliseconds(),tt,3)}function Re(rt,tt){return Ie(rt,tt)+"000"}function Ne(rt,tt){return p(rt.getUTCMonth()+1,tt,2)}function ge(rt,tt){return p(rt.getUTCMinutes(),tt,2)}function we(rt,tt){return p(rt.getUTCSeconds(),tt,2)}function Ce(rt){var tt=rt.getUTCDay();return tt===0?7:tt}function ze(rt,tt){return p(v.EV.count((0,f.c)(rt)-1,rt),tt,2)}function Pe(rt,tt){var Mt=rt.getUTCDay();return rt=Mt>=4||Mt===0?(0,v.yA)(rt):v.yA.ceil(rt),p(v.yA.count((0,f.c)(rt),rt)+((0,f.c)(rt).getUTCDay()===4),tt,2)}function Ue(rt){return rt.getUTCDay()}function Ge(rt,tt){return p(v.ot.count((0,f.c)(rt)-1,rt),tt,2)}function Xe(rt,tt){return p(rt.getUTCFullYear()%100,tt,2)}function st(rt,tt){return p(rt.getUTCFullYear()%1e4,tt,4)}function at(){return"+0000"}function vt(){return"%"}function xt(rt){return+rt}function gt(rt){return Math.floor(+rt/1e3)}i=r({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),a=i.format,i.parse,u=i.utcFormat,i.utcParse},68936:function(C,A,e){"use strict";e.d(A,{m:function(){return T}});var v=e(81628),w=e(69792),n=(0,v.c)(function(x){x.setHours(0,0,0,0)},function(x,f){x.setDate(x.getDate()+f)},function(x,f){return(f-x-(f.getTimezoneOffset()-x.getTimezoneOffset())*w.iy)/w.SK},function(x){return x.getDate()-1});A.c=n;var T=n.range},69792:function(C,A,e){"use strict";e.d(A,{KK:function(){return x},SK:function(){return T},cg:function(){return n},iy:function(){return w},yc:function(){return v}});var v=1e3,w=6e4,n=36e5,T=864e5,x=6048e5},73220:function(C,A,e){"use strict";e.r(A),e.d(A,{timeDay:function(){return d.c},timeDays:function(){return d.m},timeFriday:function(){return c.iB},timeFridays:function(){return c.sJ},timeHour:function(){return u},timeHours:function(){return l},timeInterval:function(){return v.c},timeMillisecond:function(){return n},timeMilliseconds:function(){return T},timeMinute:function(){return r},timeMinutes:function(){return i},timeMonday:function(){return c.qT},timeMondays:function(){return c.QP},timeMonth:function(){return p},timeMonths:function(){return g},timeSaturday:function(){return c.Wc},timeSaturdays:function(){return c.aI},timeSecond:function(){return s},timeSeconds:function(){return t},timeSunday:function(){return c.uU},timeSundays:function(){return c.Ab},timeThursday:function(){return c.kD},timeThursdays:function(){return c.eC},timeTuesday:function(){return c.Mf},timeTuesdays:function(){return c.Oc},timeWednesday:function(){return c.eg},timeWednesdays:function(){return c.sn},timeWeek:function(){return c.uU},timeWeeks:function(){return c.Ab},timeYear:function(){return m.c},timeYears:function(){return m.Q},utcDay:function(){return D.c},utcDays:function(){return D.o},utcFriday:function(){return P.od},utcFridays:function(){return P.iG},utcHour:function(){return E},utcHours:function(){return k},utcMillisecond:function(){return n},utcMilliseconds:function(){return T},utcMinute:function(){return y},utcMinutes:function(){return M},utcMonday:function(){return P.ot},utcMondays:function(){return P.iO},utcMonth:function(){return O},utcMonths:function(){return N},utcSaturday:function(){return P.Ad},utcSaturdays:function(){return P.K8},utcSecond:function(){return s},utcSeconds:function(){return t},utcSunday:function(){return P.EV},utcSundays:function(){return P.Wq},utcThursday:function(){return P.yA},utcThursdays:function(){return P.ob},utcTuesday:function(){return P.sG},utcTuesdays:function(){return P.kl},utcWednesday:function(){return P._6},utcWednesdays:function(){return P.W_},utcWeek:function(){return P.EV},utcWeeks:function(){return P.Wq},utcYear:function(){return V.c},utcYears:function(){return V.i}});var v=e(81628),w=(0,v.c)(function(){},function(F,j){F.setTime(+F+j)},function(F,j){return j-F});w.every=function(F){return F=Math.floor(F),isFinite(F)&&F>0?F>1?(0,v.c)(function(j){j.setTime(Math.floor(j/F)*F)},function(j,Z){j.setTime(+j+Z*F)},function(j,Z){return(Z-j)/F}):w:null};var n=w,T=w.range,x=e(69792),f=(0,v.c)(function(F){F.setTime(F-F.getMilliseconds())},function(F,j){F.setTime(+F+j*x.yc)},function(F,j){return(j-F)/x.yc},function(F){return F.getUTCSeconds()}),s=f,t=f.range,o=(0,v.c)(function(F){F.setTime(F-F.getMilliseconds()-F.getSeconds()*x.yc)},function(F,j){F.setTime(+F+j*x.iy)},function(F,j){return(j-F)/x.iy},function(F){return F.getMinutes()}),r=o,i=o.range,a=(0,v.c)(function(F){F.setTime(F-F.getMilliseconds()-F.getSeconds()*x.yc-F.getMinutes()*x.iy)},function(F,j){F.setTime(+F+j*x.cg)},function(F,j){return(j-F)/x.cg},function(F){return F.getHours()}),u=a,l=a.range,d=e(68936),c=e(46192),_=(0,v.c)(function(F){F.setDate(1),F.setHours(0,0,0,0)},function(F,j){F.setMonth(F.getMonth()+j)},function(F,j){return j.getMonth()-F.getMonth()+12*(j.getFullYear()-F.getFullYear())},function(F){return F.getMonth()}),p=_,g=_.range,m=e(32171),b=(0,v.c)(function(F){F.setUTCSeconds(0,0)},function(F,j){F.setTime(+F+j*x.iy)},function(F,j){return(j-F)/x.iy},function(F){return F.getUTCMinutes()}),y=b,M=b.range,h=(0,v.c)(function(F){F.setUTCMinutes(0,0,0)},function(F,j){F.setTime(+F+j*x.cg)},function(F,j){return(j-F)/x.cg},function(F){return F.getUTCHours()}),E=h,k=h.range,D=e(58931),P=e(8208),L=(0,v.c)(function(F){F.setUTCDate(1),F.setUTCHours(0,0,0,0)},function(F,j){F.setUTCMonth(F.getUTCMonth()+j)},function(F,j){return j.getUTCMonth()-F.getUTCMonth()+12*(j.getUTCFullYear()-F.getUTCFullYear())},function(F){return F.getUTCMonth()}),O=L,N=L.range,V=e(53528)},81628:function(C,A,e){"use strict";e.d(A,{c:function(){return n}});var v=new Date,w=new Date;function n(T,x,f,s){function t(o){return T(o=arguments.length===0?new Date:new Date(+o)),o}return t.floor=function(o){return T(o=new Date(+o)),o},t.ceil=function(o){return T(o=new Date(o-1)),x(o,1),T(o),o},t.round=function(o){var r=t(o),i=t.ceil(o);return o-r<i-o?r:i},t.offset=function(o,r){return x(o=new Date(+o),r==null?1:Math.floor(r)),o},t.range=function(o,r,i){var a,u=[];if(o=t.ceil(o),i=i==null?1:Math.floor(i),!(o<r&&i>0))return u;do u.push(a=new Date(+o)),x(o,i),T(o);while(a<o&&o<r);return u},t.filter=function(o){return n(function(r){if(r>=r)for(;T(r),!o(r);)r.setTime(r-1)},function(r,i){if(r>=r)if(i<0)for(;++i<=0;)for(;x(r,-1),!o(r););else for(;--i>=0;)for(;x(r,1),!o(r););})},f&&(t.count=function(o,r){return v.setTime(+o),w.setTime(+r),T(v),T(w),Math.floor(f(v,w))},t.every=function(o){return o=Math.floor(o),isFinite(o)&&o>0?o>1?t.filter(s?function(r){return s(r)%o==0}:function(r){return t.count(0,r)%o==0}):t:null}),t}},58931:function(C,A,e){"use strict";e.d(A,{o:function(){return T}});var v=e(81628),w=e(69792),n=(0,v.c)(function(x){x.setUTCHours(0,0,0,0)},function(x,f){x.setUTCDate(x.getUTCDate()+f)},function(x,f){return(f-x)/w.SK},function(x){return x.getUTCDate()-1});A.c=n;var T=n.range},8208:function(C,A,e){"use strict";e.d(A,{Ad:function(){return r},EV:function(){return T},K8:function(){return _},W_:function(){return l},Wq:function(){return i},_6:function(){return s},iG:function(){return c},iO:function(){return a},kl:function(){return u},ob:function(){return d},od:function(){return o},ot:function(){return x},sG:function(){return f},yA:function(){return t}});var v=e(81628),w=e(69792);function n(p){return(0,v.c)(function(g){g.setUTCDate(g.getUTCDate()-(g.getUTCDay()+7-p)%7),g.setUTCHours(0,0,0,0)},function(g,m){g.setUTCDate(g.getUTCDate()+7*m)},function(g,m){return(m-g)/w.KK})}var T=n(0),x=n(1),f=n(2),s=n(3),t=n(4),o=n(5),r=n(6),i=T.range,a=x.range,u=f.range,l=s.range,d=t.range,c=o.range,_=r.range},53528:function(C,A,e){"use strict";e.d(A,{i:function(){return n}});var v=e(81628),w=(0,v.c)(function(T){T.setUTCMonth(0,1),T.setUTCHours(0,0,0,0)},function(T,x){T.setUTCFullYear(T.getUTCFullYear()+x)},function(T,x){return x.getUTCFullYear()-T.getUTCFullYear()},function(T){return T.getUTCFullYear()});w.every=function(T){return isFinite(T=Math.floor(T))&&T>0?(0,v.c)(function(x){x.setUTCFullYear(Math.floor(x.getUTCFullYear()/T)*T),x.setUTCMonth(0,1),x.setUTCHours(0,0,0,0)},function(x,f){x.setUTCFullYear(x.getUTCFullYear()+f*T)}):null},A.c=w;var n=w.range},46192:function(C,A,e){"use strict";e.d(A,{Ab:function(){return i},Mf:function(){return f},Oc:function(){return u},QP:function(){return a},Wc:function(){return r},aI:function(){return _},eC:function(){return d},eg:function(){return s},iB:function(){return o},kD:function(){return t},qT:function(){return x},sJ:function(){return c},sn:function(){return l},uU:function(){return T}});var v=e(81628),w=e(69792);function n(p){return(0,v.c)(function(g){g.setDate(g.getDate()-(g.getDay()+7-p)%7),g.setHours(0,0,0,0)},function(g,m){g.setDate(g.getDate()+7*m)},function(g,m){return(m-g-(m.getTimezoneOffset()-g.getTimezoneOffset())*w.iy)/w.KK})}var T=n(0),x=n(1),f=n(2),s=n(3),t=n(4),o=n(5),r=n(6),i=T.range,a=x.range,u=f.range,l=s.range,d=t.range,c=o.range,_=r.range},32171:function(C,A,e){"use strict";e.d(A,{Q:function(){return n}});var v=e(81628),w=(0,v.c)(function(T){T.setMonth(0,1),T.setHours(0,0,0,0)},function(T,x){T.setFullYear(T.getFullYear()+x)},function(T,x){return x.getFullYear()-T.getFullYear()},function(T){return T.getFullYear()});w.every=function(T){return isFinite(T=Math.floor(T))&&T>0?(0,v.c)(function(x){x.setFullYear(Math.floor(x.getFullYear()/T)*T),x.setMonth(0,1),x.setHours(0,0,0,0)},function(x,f){x.setFullYear(x.getFullYear()+f*T)}):null},A.c=w;var n=w.range},64348:function(C,A,e){"use strict";var v=e(39640)(),w=e(53664),n=v&&w("%Object.defineProperty%",!0);if(n)try{n({},"a",{value:1})}catch{n=!1}var T=w("%SyntaxError%"),x=w("%TypeError%"),f=e(2304);C.exports=function(s,t,o){if(!s||typeof s!="object"&&typeof s!="function")throw new x("`obj` must be an object or a function`");if(typeof t!="string"&&typeof t!="symbol")throw new x("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new x("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new x("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new x("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new x("`loose`, if provided, must be a boolean");var r=arguments.length>3?arguments[3]:null,i=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,u=arguments.length>6&&arguments[6],l=!!f&&f(s,t);if(n)n(s,t,{configurable:a===null&&l?l.configurable:!a,enumerable:r===null&&l?l.enumerable:!r,value:o,writable:i===null&&l?l.writable:!i});else{if(!u&&(r||i||a))throw new T("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");s[t]=o}}},81288:function(C,A,e){"use strict";var v=e(41820),w=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",n=Object.prototype.toString,T=Array.prototype.concat,x=Object.defineProperty,f=e(39640)(),s=x&&f,t=function(r,i,a,u){if(i in r){if(u===!0){if(r[i]===a)return}else if(typeof(l=u)!="function"||n.call(l)!=="[object Function]"||!u())return}var l;s?x(r,i,{configurable:!0,enumerable:!1,value:a,writable:!0}):r[i]=a},o=function(r,i){var a=arguments.length>2?arguments[2]:{},u=v(i);w&&(u=T.call(u,Object.getOwnPropertySymbols(i)));for(var l=0;l<u.length;l+=1)t(r,u[l],i[u[l]],a[u[l]])};o.supportsDescriptors=!!s,C.exports=o},31264:function(C){C.exports=function(){for(var A=0;A<arguments.length;A++)if(arguments[A]!==void 0)return arguments[A]}},63768:function(C){"use strict";C.exports=v;var A=(v.canvas=document.createElement("canvas")).getContext("2d"),e=w([32,126]);function v(n,T){Array.isArray(n)&&(n=n.join(", "));var x,f={},s=16,t=.05;T&&(T.length===2&&typeof T[0]=="number"?x=w(T):Array.isArray(T)?x=T:(T.o?x=w(T.o):T.pairs&&(x=T.pairs),T.fontSize&&(s=T.fontSize),T.threshold!=null&&(t=T.threshold))),x||(x=e),A.font=s+"px "+n;for(var o=0;o<x.length;o++){var r=x[o],i=A.measureText(r[0]).width+A.measureText(r[1]).width,a=A.measureText(r).width;if(Math.abs(i-a)>s*t){var u=(a-i)/s;f[r]=1e3*u}}return f}function w(n){for(var T=[],x=n[0];x<=n[1];x++)for(var f=String.fromCharCode(x),s=n[0];s<n[1];s++){var t=f+String.fromCharCode(s);T.push(t)}return T}v.createPairs=w,v.ascii=e},22235:function(C,A,e){var v=e(49972),w=e(48816),n={M:"moveTo",C:"bezierCurveTo"};C.exports=function(T,x){T.beginPath(),w(v(x)).forEach(function(f){var s=f[0],t=f.slice(1);T[n[s]].apply(T,t)}),T.closePath()}},72512:function(C){C.exports=function(A){switch(A){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},10352:function(C){"use strict";function A(e,v,w){var n=0|e[w];if(n<=0)return[];var T,x=new Array(n);if(w===e.length-1)for(T=0;T<n;++T)x[T]=v;else for(T=0;T<n;++T)x[T]=A(e,v,w+1);return x}C.exports=function(e,v){switch(v===void 0&&(v=0),typeof e){case"number":if(e>0)return function(w,n){var T,x;for(T=new Array(w),x=0;x<w;++x)T[x]=n;return T}(0|e,v);break;case"object":if(typeof e.length=="number")return A(e,v,0)}return[]}},28912:function(C){"use strict";function A(E,k,D){D=D||2;var P,L,O,N,V,F,j,Z=k&&k.length,z=Z?k[0]*D:E.length,H=e(E,0,z,D,!0),U=[];if(!H||H.next===H.prev)return U;if(Z&&(H=function(ee,J,Q,ne){var K,oe,le,se=[];for(K=0,oe=J.length;K<oe;K++)(le=e(ee,J[K]*ne,K<oe-1?J[K+1]*ne:ee.length,ne,!1))===le.next&&(le.steiner=!0),se.push(i(le));for(se.sort(s),K=0;K<se.length;K++)t(se[K],Q),Q=v(Q,Q.next);return Q}(E,k,H,D)),E.length>80*D){P=O=E[0],L=N=E[1];for(var re=D;re<z;re+=D)(V=E[re])<P&&(P=V),(F=E[re+1])<L&&(L=F),V>O&&(O=V),F>N&&(N=F);j=(j=Math.max(O-P,N-L))!==0?1/j:0}return w(H,U,D,P,L,j),U}function e(E,k,D,P,L){var O,N;if(L===h(E,k,D,P)>0)for(O=k;O<D;O+=P)N=b(O,E[O],E[O+1],N);else for(O=D-P;O>=k;O-=P)N=b(O,E[O],E[O+1],N);return N&&d(N,N.next)&&(y(N),N=N.next),N}function v(E,k){if(!E)return E;k||(k=E);var D,P=E;do if(D=!1,P.steiner||!d(P,P.next)&&l(P.prev,P,P.next)!==0)P=P.next;else{if(y(P),(P=k=P.prev)===P.next)break;D=!0}while(D||P!==k);return k}function w(E,k,D,P,L,O,N){if(E){!N&&O&&function(Z,z,H,U){var re=Z;do re.z===null&&(re.z=r(re.x,re.y,z,H,U)),re.prevZ=re.prev,re.nextZ=re.next,re=re.next;while(re!==Z);re.prevZ.nextZ=null,re.prevZ=null,function(ee){var J,Q,ne,K,oe,le,se,de,be=1;do{for(Q=ee,ee=null,oe=null,le=0;Q;){for(le++,ne=Q,se=0,J=0;J<be&&(se++,ne=ne.nextZ);J++);for(de=be;se>0||de>0&&ne;)se!==0&&(de===0||!ne||Q.z<=ne.z)?(K=Q,Q=Q.nextZ,se--):(K=ne,ne=ne.nextZ,de--),oe?oe.nextZ=K:ee=K,K.prevZ=oe,oe=K;Q=ne}oe.nextZ=null,be*=2}while(le>1)}(re)}(E,P,L,O);for(var V,F,j=E;E.prev!==E.next;)if(V=E.prev,F=E.next,O?T(E,P,L,O):n(E))k.push(V.i/D),k.push(E.i/D),k.push(F.i/D),y(E),E=F.next,j=F.next;else if((E=F)===j){N?N===1?w(E=x(v(E),k,D),k,D,P,L,O,2):N===2&&f(E,k,D,P,L,O):w(v(E),k,D,P,L,O,1);break}}}function n(E){var k=E.prev,D=E,P=E.next;if(l(k,D,P)>=0)return!1;for(var L=E.next.next;L!==E.prev;){if(a(k.x,k.y,D.x,D.y,P.x,P.y,L.x,L.y)&&l(L.prev,L,L.next)>=0)return!1;L=L.next}return!0}function T(E,k,D,P){var L=E.prev,O=E,N=E.next;if(l(L,O,N)>=0)return!1;for(var V=L.x<O.x?L.x<N.x?L.x:N.x:O.x<N.x?O.x:N.x,F=L.y<O.y?L.y<N.y?L.y:N.y:O.y<N.y?O.y:N.y,j=L.x>O.x?L.x>N.x?L.x:N.x:O.x>N.x?O.x:N.x,Z=L.y>O.y?L.y>N.y?L.y:N.y:O.y>N.y?O.y:N.y,z=r(V,F,k,D,P),H=r(j,Z,k,D,P),U=E.prevZ,re=E.nextZ;U&&U.z>=z&&re&&re.z<=H;){if(U!==E.prev&&U!==E.next&&a(L.x,L.y,O.x,O.y,N.x,N.y,U.x,U.y)&&l(U.prev,U,U.next)>=0||(U=U.prevZ,re!==E.prev&&re!==E.next&&a(L.x,L.y,O.x,O.y,N.x,N.y,re.x,re.y)&&l(re.prev,re,re.next)>=0))return!1;re=re.nextZ}for(;U&&U.z>=z;){if(U!==E.prev&&U!==E.next&&a(L.x,L.y,O.x,O.y,N.x,N.y,U.x,U.y)&&l(U.prev,U,U.next)>=0)return!1;U=U.prevZ}for(;re&&re.z<=H;){if(re!==E.prev&&re!==E.next&&a(L.x,L.y,O.x,O.y,N.x,N.y,re.x,re.y)&&l(re.prev,re,re.next)>=0)return!1;re=re.nextZ}return!0}function x(E,k,D){var P=E;do{var L=P.prev,O=P.next.next;!d(L,O)&&c(L,P,P.next,O)&&g(L,O)&&g(O,L)&&(k.push(L.i/D),k.push(P.i/D),k.push(O.i/D),y(P),y(P.next),P=E=O),P=P.next}while(P!==E);return v(P)}function f(E,k,D,P,L,O){var N=E;do{for(var V=N.next.next;V!==N.prev;){if(N.i!==V.i&&u(N,V)){var F=m(N,V);return N=v(N,N.next),F=v(F,F.next),w(N,k,D,P,L,O),void w(F,k,D,P,L,O)}V=V.next}N=N.next}while(N!==E)}function s(E,k){return E.x-k.x}function t(E,k){if(k=function(P,L){var O,N=L,V=P.x,F=P.y,j=-1/0;do{if(F<=N.y&&F>=N.next.y&&N.next.y!==N.y){var Z=N.x+(F-N.y)*(N.next.x-N.x)/(N.next.y-N.y);if(Z<=V&&Z>j){if(j=Z,Z===V){if(F===N.y)return N;if(F===N.next.y)return N.next}O=N.x<N.next.x?N:N.next}}N=N.next}while(N!==L);if(!O)return null;if(V===j)return O;var z,H=O,U=O.x,re=O.y,ee=1/0;N=O;do V>=N.x&&N.x>=U&&V!==N.x&&a(F<re?V:j,F,U,re,F<re?j:V,F,N.x,N.y)&&(z=Math.abs(F-N.y)/(V-N.x),g(N,P)&&(z<ee||z===ee&&(N.x>O.x||N.x===O.x&&o(O,N)))&&(O=N,ee=z)),N=N.next;while(N!==H);return O}(E,k),k){var D=m(k,E);v(k,k.next),v(D,D.next)}}function o(E,k){return l(E.prev,E,k.prev)<0&&l(k.next,E,E.next)<0}function r(E,k,D,P,L){return(E=1431655765&((E=858993459&((E=252645135&((E=16711935&((E=32767*(E-D)*L)|E<<8))|E<<4))|E<<2))|E<<1))|(k=1431655765&((k=858993459&((k=252645135&((k=16711935&((k=32767*(k-P)*L)|k<<8))|k<<4))|k<<2))|k<<1))<<1}function i(E){var k=E,D=E;do(k.x<D.x||k.x===D.x&&k.y<D.y)&&(D=k),k=k.next;while(k!==E);return D}function a(E,k,D,P,L,O,N,V){return(L-N)*(k-V)-(E-N)*(O-V)>=0&&(E-N)*(P-V)-(D-N)*(k-V)>=0&&(D-N)*(O-V)-(L-N)*(P-V)>=0}function u(E,k){return E.next.i!==k.i&&E.prev.i!==k.i&&!function(D,P){var L=D;do{if(L.i!==D.i&&L.next.i!==D.i&&L.i!==P.i&&L.next.i!==P.i&&c(L,L.next,D,P))return!0;L=L.next}while(L!==D);return!1}(E,k)&&(g(E,k)&&g(k,E)&&function(D,P){var L=D,O=!1,N=(D.x+P.x)/2,V=(D.y+P.y)/2;do L.y>V!=L.next.y>V&&L.next.y!==L.y&&N<(L.next.x-L.x)*(V-L.y)/(L.next.y-L.y)+L.x&&(O=!O),L=L.next;while(L!==D);return O}(E,k)&&(l(E.prev,E,k.prev)||l(E,k.prev,k))||d(E,k)&&l(E.prev,E,E.next)>0&&l(k.prev,k,k.next)>0)}function l(E,k,D){return(k.y-E.y)*(D.x-k.x)-(k.x-E.x)*(D.y-k.y)}function d(E,k){return E.x===k.x&&E.y===k.y}function c(E,k,D,P){var L=p(l(E,k,D)),O=p(l(E,k,P)),N=p(l(D,P,E)),V=p(l(D,P,k));return L!==O&&N!==V||!(L!==0||!_(E,D,k))||!(O!==0||!_(E,P,k))||!(N!==0||!_(D,E,P))||!(V!==0||!_(D,k,P))}function _(E,k,D){return k.x<=Math.max(E.x,D.x)&&k.x>=Math.min(E.x,D.x)&&k.y<=Math.max(E.y,D.y)&&k.y>=Math.min(E.y,D.y)}function p(E){return E>0?1:E<0?-1:0}function g(E,k){return l(E.prev,E,E.next)<0?l(E,k,E.next)>=0&&l(E,E.prev,k)>=0:l(E,k,E.prev)<0||l(E,E.next,k)<0}function m(E,k){var D=new M(E.i,E.x,E.y),P=new M(k.i,k.x,k.y),L=E.next,O=k.prev;return E.next=k,k.prev=E,D.next=L,L.prev=D,P.next=D,D.prev=P,O.next=P,P.prev=O,P}function b(E,k,D,P){var L=new M(E,k,D);return P?(L.next=P.next,L.prev=P,P.next.prev=L,P.next=L):(L.prev=L,L.next=L),L}function y(E){E.next.prev=E.prev,E.prev.next=E.next,E.prevZ&&(E.prevZ.nextZ=E.nextZ),E.nextZ&&(E.nextZ.prevZ=E.prevZ)}function M(E,k,D){this.i=E,this.x=k,this.y=D,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function h(E,k,D,P){for(var L=0,O=k,N=D-P;O<D;O+=P)L+=(E[N]-E[O])*(E[O+1]+E[N+1]),N=O;return L}C.exports=A,C.exports.default=A,A.deviation=function(E,k,D,P){var L=k&&k.length,O=L?k[0]*D:E.length,N=Math.abs(h(E,0,O,D));if(L)for(var V=0,F=k.length;V<F;V++){var j=k[V]*D,Z=V<F-1?k[V+1]*D:E.length;N-=Math.abs(h(E,j,Z,D))}var z=0;for(V=0;V<P.length;V+=3){var H=P[V]*D,U=P[V+1]*D,re=P[V+2]*D;z+=Math.abs((E[H]-E[re])*(E[U+1]-E[H+1])-(E[H]-E[U])*(E[re+1]-E[H+1]))}return N===0&&z===0?0:Math.abs((z-N)/N)},A.flatten=function(E){for(var k=E[0][0].length,D={vertices:[],holes:[],dimensions:k},P=0,L=0;L<E.length;L++){for(var O=0;O<E[L].length;O++)for(var N=0;N<k;N++)D.vertices.push(E[L][O][N]);L>0&&(P+=E[L-1].length,D.holes.push(P))}return D}},6688:function(C,A,e){var v=e(78484);C.exports=function(w,n){var T,x=[],f=[],s=[],t={},o=[];function r(g){s[g]=!1,t.hasOwnProperty(g)&&Object.keys(t[g]).forEach(function(m){delete t[g][m],s[m]&&r(m)})}function i(g){var m,b,y=!1;for(f.push(g),s[g]=!0,m=0;m<o[g].length;m++)(b=o[g][m])===T?(a(T,f),y=!0):s[b]||(y=i(b));if(y)r(g);else for(m=0;m<o[g].length;m++){b=o[g][m];var M=t[b];M||(M={},t[b]=M),M[b]=!0}return f.pop(),y}function a(g,m){var b=[].concat(m).concat(g);n?n(i):x.push(b)}function u(g){(function(D){for(var P=0;P<w.length;P++)P<D&&(w[P]=[]),w[P]=w[P].filter(function(L){return L>=D})})(g);for(var m,b=v(w).components.filter(function(D){return D.length>1}),y=1/0,M=0;M<b.length;M++)for(var h=0;h<b[M].length;h++)b[M][h]<y&&(y=b[M][h],m=M);var E=b[m];if(!E)return!1;var k=w.map(function(D,P){return E.indexOf(P)===-1?[]:D.filter(function(L){return E.indexOf(L)!==-1})});return{leastVertex:y,adjList:k}}T=0;for(var l=w.length;T<l;){var d=u(T);if(T=d.leastVertex,o=d.adjList){for(var c=0;c<o.length;c++)for(var _=0;_<o[c].length;_++){var p=o[c][_];s[+p]=!1,t[p]={}}i(T),T+=1}else T=l}return n?void 0:x}},41476:function(C,A,e){"use strict";var v=e(9252);C.exports=function(){return v(this).length=0,this}},74772:function(C,A,e){"use strict";C.exports=e(44716)()?Array.from:e(80816)},44716:function(C){"use strict";C.exports=function(){var A,e,v=Array.from;return typeof v=="function"&&(e=v(A=["raz","dwa"]),!!(e&&e!==A&&e[1]==="dwa"))}},80816:function(C,A,e){"use strict";var v=e(92664).iterator,w=e(60948),n=e(17024),T=e(81304),x=e(34044),f=e(9252),s=e(42584),t=e(29768),o=Array.isArray,r=Function.prototype.call,i={configurable:!0,enumerable:!0,writable:!0,value:null},a=Object.defineProperty;C.exports=function(u){var l,d,c,_,p,g,m,b,y,M,h=arguments[1],E=arguments[2];if(u=Object(f(u)),s(h)&&x(h),this&&this!==Array&&n(this))l=this;else{if(!h){if(w(u))return(p=u.length)!==1?Array.apply(null,u):((_=new Array(1))[0]=u[0],_);if(o(u)){for(_=new Array(p=u.length),d=0;d<p;++d)_[d]=u[d];return _}}_=[]}if(!o(u)){if((y=u[v])!==void 0){for(m=x(y).call(u),l&&(_=new l),b=m.next(),d=0;!b.done;)M=h?r.call(h,E,b.value,d):b.value,l?(i.value=M,a(_,d,i)):_[d]=M,b=m.next(),++d;p=d}else if(t(u)){for(p=u.length,l&&(_=new l),d=0,c=0;d<p;++d)M=u[d],d+1<p&&(g=M.charCodeAt(0))>=55296&&g<=56319&&(M+=u[++d]),M=h?r.call(h,E,M,c):M,l?(i.value=M,a(_,c,i)):_[c]=M,++c;p=c}}if(p===void 0)for(p=T(u.length),l&&(_=new l(p)),d=0;d<p;++d)M=h?r.call(h,E,u[d],d):u[d],l?(i.value=M,a(_,d,i)):_[d]=M;return l&&(i.value=null,_.length=p),_}},60948:function(C){"use strict";var A=Object.prototype.toString,e=A.call(function(){return arguments}());C.exports=function(v){return A.call(v)===e}},17024:function(C){"use strict";var A=Object.prototype.toString,e=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);C.exports=function(v){return typeof v=="function"&&e(A.call(v))}},33208:function(C){"use strict";C.exports=function(){}},85608:function(C,A,e){"use strict";C.exports=e(37328)()?Math.sign:e(92928)},37328:function(C){"use strict";C.exports=function(){var A=Math.sign;return typeof A=="function"&&A(10)===1&&A(-20)===-1}},92928:function(C){"use strict";C.exports=function(A){return A=Number(A),isNaN(A)||A===0?A:A>0?1:-1}},96936:function(C,A,e){"use strict";var v=e(85608),w=Math.abs,n=Math.floor;C.exports=function(T){return isNaN(T)?0:(T=Number(T))!==0&&isFinite(T)?v(T)*n(w(T)):T}},81304:function(C,A,e){"use strict";var v=e(96936),w=Math.max;C.exports=function(n){return w(0,v(n))}},14428:function(C,A,e){"use strict";var v=e(34044),w=e(9252),n=Function.prototype.bind,T=Function.prototype.call,x=Object.keys,f=Object.prototype.propertyIsEnumerable;C.exports=function(s,t){return function(o,r){var i,a=arguments[2],u=arguments[3];return o=Object(w(o)),v(r),i=x(o),u&&i.sort(typeof u=="function"?n.call(u,o):void 0),typeof s!="function"&&(s=i[s]),T.call(s,i,function(l,d){return f.call(o,l)?T.call(r,a,o[l],l,o,d):t})}}},38452:function(C,A,e){"use strict";C.exports=e(96276)()?Object.assign:e(81892)},96276:function(C){"use strict";C.exports=function(){var A,e=Object.assign;return typeof e=="function"&&(e(A={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),A.foo+A.bar+A.trzy==="razdwatrzy")}},81892:function(C,A,e){"use strict";var v=e(54768),w=e(9252),n=Math.max;C.exports=function(T,x){var f,s,t,o=n(arguments.length,2);for(T=Object(w(T)),t=function(r){try{T[r]=x[r]}catch(i){f||(f=i)}},s=1;s<o;++s)v(x=arguments[s]).forEach(t);if(f!==void 0)throw f;return T}},95920:function(C,A,e){"use strict";var v=e(74772),w=e(38452),n=e(9252);C.exports=function(T){var x=Object(n(T)),f=arguments[1],s=Object(arguments[2]);if(x!==T&&!f)return x;var t={};return f?v(f,function(o){(s.ensure||o in T)&&(t[o]=T[o])}):w(t,T),t}},14452:function(C,A,e){"use strict";var v,w,n,T,x=Object.create;e(63092)()||(v=e(8672)),C.exports=v?v.level!==1?x:(w={},n={},T={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(f){n[f]=f!=="__proto__"?T:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(w,n),Object.defineProperty(v,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:w}),function(f,s){return x(f===null?w:f,s)}):x},42748:function(C,A,e){"use strict";C.exports=e(14428)("forEach")},69127:function(C,A,e){"use strict";var v=e(42584),w={function:!0,object:!0};C.exports=function(n){return v(n)&&w[typeof n]||!1}},42584:function(C,A,e){"use strict";var v=e(33208)();C.exports=function(w){return w!==v&&w!==null}},54768:function(C,A,e){"use strict";C.exports=e(87888)()?Object.keys:e(89592)},87888:function(C){"use strict";C.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},89592:function(C,A,e){"use strict";var v=e(42584),w=Object.keys;C.exports=function(n){return w(v(n)?Object(n):n)}},84323:function(C,A,e){"use strict";var v=e(34044),w=e(42748),n=Function.prototype.call;C.exports=function(T,x){var f={},s=arguments[2];return v(x),w(T,function(t,o,r,i){f[o]=n.call(x,s,t,o,r,i)}),f}},50868:function(C,A,e){"use strict";var v=e(42584),w=Array.prototype.forEach,n=Object.create;C.exports=function(T){var x=n(null);return w.call(arguments,function(f){v(f)&&function(s,t){var o;for(o in s)t[o]=s[o]}(Object(f),x)}),x}},69932:function(C,A,e){"use strict";C.exports=e(63092)()?Object.setPrototypeOf:e(8672)},63092:function(C){"use strict";var A=Object.create,e=Object.getPrototypeOf,v={};C.exports=function(){var w=Object.setPrototypeOf;return typeof w=="function"&&e(w((arguments[0]||A)(null),v))===v}},8672:function(C,A,e){"use strict";var v,w,n,T,x=e(69127),f=e(9252),s=Object.prototype.isPrototypeOf,t=Object.defineProperty,o={configurable:!0,enumerable:!1,writable:!0,value:void 0};v=function(r,i){if(f(r),i===null||x(i))return r;throw new TypeError("Prototype must be null or an object")},C.exports=(w=function(){var r,i=Object.create(null),a={},u=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(u){try{(r=u.set).call(i,a)}catch{}if(Object.getPrototypeOf(i)===a)return{set:r,level:2}}return i.__proto__=a,Object.getPrototypeOf(i)===a?{level:2}:((i={}).__proto__=a,Object.getPrototypeOf(i)===a&&{level:1})}(),w?(w.level===2?w.set?(T=w.set,n=function(r,i){return T.call(v(r,i),i),r}):n=function(r,i){return v(r,i).__proto__=i,r}:n=function r(i,a){var u;return v(i,a),(u=s.call(r.nullPolyfill,i))&&delete r.nullPolyfill.__proto__,a===null&&(a=r.nullPolyfill),i.__proto__=a,u&&t(r.nullPolyfill,"__proto__",o),i},Object.defineProperty(n,"level",{configurable:!1,enumerable:!1,writable:!1,value:w.level})):null),e(14452)},34044:function(C){"use strict";C.exports=function(A){if(typeof A!="function")throw new TypeError(A+" is not a function");return A}},92584:function(C,A,e){"use strict";var v=e(69127);C.exports=function(w){if(!v(w))throw new TypeError(w+" is not an Object");return w}},9252:function(C,A,e){"use strict";var v=e(42584);C.exports=function(w){if(!v(w))throw new TypeError("Cannot use null or undefined");return w}},71056:function(C,A,e){"use strict";C.exports=e(42976)()?String.prototype.contains:e(93040)},42976:function(C){"use strict";var A="razdwatrzy";C.exports=function(){return typeof A.contains=="function"&&A.contains("dwa")===!0&&A.contains("foo")===!1}},93040:function(C){"use strict";var A=String.prototype.indexOf;C.exports=function(e){return A.call(this,e,arguments[1])>-1}},29768:function(C){"use strict";var A=Object.prototype.toString,e=A.call("");C.exports=function(v){return typeof v=="string"||v&&typeof v=="object"&&(v instanceof String||A.call(v)===e)||!1}},82252:function(C){"use strict";var A=Object.create(null),e=Math.random;C.exports=function(){var v;do v=e().toString(36).slice(2);while(A[v]);return v}},52104:function(C,A,e){"use strict";var v,w=e(69932),n=e(71056),T=e(21092),x=e(92664),f=e(85512),s=Object.defineProperty;v=C.exports=function(t,o){if(!(this instanceof v))throw new TypeError("Constructor requires 'new'");f.call(this,t),o=o?n.call(o,"key+value")?"key+value":n.call(o,"key")?"key":"value":"value",s(this,"__kind__",T("",o))},w&&w(v,f),delete v.prototype.constructor,v.prototype=Object.create(f.prototype,{_resolve:T(function(t){return this.__kind__==="value"?this.__list__[t]:this.__kind__==="key+value"?[t,this.__list__[t]]:t})}),s(v.prototype,x.toStringTag,T("c","Array Iterator"))},76024:function(C,A,e){"use strict";var v=e(60948),w=e(34044),n=e(29768),T=e(76252),x=Array.isArray,f=Function.prototype.call,s=Array.prototype.some;C.exports=function(t,o){var r,i,a,u,l,d,c,_,p=arguments[2];if(x(t)||v(t)?r="array":n(t)?r="string":t=T(t),w(o),a=function(){u=!0},r!=="array")if(r!=="string")for(i=t.next();!i.done;){if(f.call(o,p,i.value,a),u)return;i=t.next()}else for(d=t.length,l=0;l<d&&(c=t[l],l+1<d&&(_=c.charCodeAt(0))>=55296&&_<=56319&&(c+=t[++l]),f.call(o,p,c,a),!u);++l);else s.call(t,function(g){return f.call(o,p,g,a),u})}},76252:function(C,A,e){"use strict";var v=e(60948),w=e(29768),n=e(52104),T=e(80940),x=e(52891),f=e(92664).iterator;C.exports=function(s){return typeof x(s)[f]=="function"?s[f]():v(s)?new n(s):w(s)?new T(s):new n(s)}},85512:function(C,A,e){"use strict";var v,w=e(41476),n=e(38452),T=e(34044),x=e(9252),f=e(21092),s=e(27940),t=e(92664),o=Object.defineProperty,r=Object.defineProperties;C.exports=v=function(i,a){if(!(this instanceof v))throw new TypeError("Constructor requires 'new'");r(this,{__list__:f("w",x(i)),__context__:f("w",a),__nextIndex__:f("w",0)}),a&&(T(a.on),a.on("_add",this._onAdd),a.on("_delete",this._onDelete),a.on("_clear",this._onClear))},delete v.prototype.constructor,r(v.prototype,n({_next:f(function(){var i;if(this.__list__)return this.__redo__&&(i=this.__redo__.shift())!==void 0?i:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:f(function(){return this._createResult(this._next())}),_createResult:f(function(i){return i===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(i)}}),_resolve:f(function(i){return this.__list__[i]}),_unBind:f(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:f(function(){return"[object "+(this[t.toStringTag]||"Object")+"]"})},s({_onAdd:f(function(i){i>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(a,u){a>=i&&(this.__redo__[u]=++a)},this),this.__redo__.push(i)):o(this,"__redo__",f("c",[i])))}),_onDelete:f(function(i){var a;i>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&((a=this.__redo__.indexOf(i))!==-1&&this.__redo__.splice(a,1),this.__redo__.forEach(function(u,l){u>i&&(this.__redo__[l]=--u)},this)))}),_onClear:f(function(){this.__redo__&&w.call(this.__redo__),this.__nextIndex__=0})}))),o(v.prototype,t.iterator,f(function(){return this}))},76368:function(C,A,e){"use strict";var v=e(60948),w=e(42584),n=e(29768),T=e(92664).iterator,x=Array.isArray;C.exports=function(f){return!(!w(f)||!x(f)&&!n(f)&&!v(f)&&typeof f[T]!="function")}},80940:function(C,A,e){"use strict";var v,w=e(69932),n=e(21092),T=e(92664),x=e(85512),f=Object.defineProperty;v=C.exports=function(s){if(!(this instanceof v))throw new TypeError("Constructor requires 'new'");s=String(s),x.call(this,s),f(this,"__length__",n("",s.length))},w&&w(v,x),delete v.prototype.constructor,v.prototype=Object.create(x.prototype,{_next:n(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:n(function(s){var t,o=this.__list__[s];return this.__nextIndex__===this.__length__?o:(t=o.charCodeAt(0))>=55296&&t<=56319?o+this.__list__[this.__nextIndex__++]:o})}),f(v.prototype,T.toStringTag,n("c","String Iterator"))},52891:function(C,A,e){"use strict";var v=e(76368);C.exports=function(w){if(!v(w))throw new TypeError(w+" is not iterable");return w}},60964:function(C){"use strict";function A(e,v){if(e==null)throw new TypeError("Cannot convert first argument to object");for(var w=Object(e),n=1;n<arguments.length;n++){var T=arguments[n];if(T!=null)for(var x=Object.keys(Object(T)),f=0,s=x.length;f<s;f++){var t=x[f],o=Object.getOwnPropertyDescriptor(T,t);o!==void 0&&o.enumerable&&(w[t]=T[t])}}return w}C.exports={assign:A,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:A})}}},92664:function(C,A,e){"use strict";C.exports=e(43580)()?e(12296).Symbol:e(18376)},43580:function(C,A,e){"use strict";var v=e(12296),w={object:!0,symbol:!0};C.exports=function(){var n,T=v.Symbol;if(typeof T!="function")return!1;n=T("test symbol");try{String(n)}catch{return!1}return!!w[typeof T.iterator]&&!!w[typeof T.toPrimitive]&&!!w[typeof T.toStringTag]}},53908:function(C){"use strict";C.exports=function(A){return!!A&&(typeof A=="symbol"||!!A.constructor&&A.constructor.name==="Symbol"&&A[A.constructor.toStringTag]==="Symbol")}},96863:function(C,A,e){"use strict";var v=e(21092),w=Object.create,n=Object.defineProperty,T=Object.prototype,x=w(null);C.exports=function(f){for(var s,t,o=0;x[f+(o||"")];)++o;return x[f+=o||""]=!0,n(T,s="@@"+f,v.gs(null,function(r){t||(t=!0,n(this,s,v(r)),t=!1)})),s}},53540:function(C,A,e){"use strict";var v=e(21092),w=e(12296).Symbol;C.exports=function(n){return Object.defineProperties(n,{hasInstance:v("",w&&w.hasInstance||n("hasInstance")),isConcatSpreadable:v("",w&&w.isConcatSpreadable||n("isConcatSpreadable")),iterator:v("",w&&w.iterator||n("iterator")),match:v("",w&&w.match||n("match")),replace:v("",w&&w.replace||n("replace")),search:v("",w&&w.search||n("search")),species:v("",w&&w.species||n("species")),split:v("",w&&w.split||n("split")),toPrimitive:v("",w&&w.toPrimitive||n("toPrimitive")),toStringTag:v("",w&&w.toStringTag||n("toStringTag")),unscopables:v("",w&&w.unscopables||n("unscopables"))})}},73852:function(C,A,e){"use strict";var v=e(21092),w=e(63948),n=Object.create(null);C.exports=function(T){return Object.defineProperties(T,{for:v(function(x){return n[x]?n[x]:n[x]=T(String(x))}),keyFor:v(function(x){var f;for(f in w(x),n)if(n[f]===x)return f})})}},18376:function(C,A,e){"use strict";var v,w,n,T=e(21092),x=e(63948),f=e(12296).Symbol,s=e(96863),t=e(53540),o=e(73852),r=Object.create,i=Object.defineProperties,a=Object.defineProperty;if(typeof f=="function")try{String(f()),n=!0}catch{}else f=null;w=function(u){if(this instanceof w)throw new TypeError("Symbol is not a constructor");return v(u)},C.exports=v=function u(l){var d;if(this instanceof u)throw new TypeError("Symbol is not a constructor");return n?f(l):(d=r(w.prototype),l=l===void 0?"":String(l),i(d,{__description__:T("",l),__name__:T("",s(l))}))},t(v),o(v),i(w.prototype,{constructor:T(v),toString:T("",function(){return this.__name__})}),i(v.prototype,{toString:T(function(){return"Symbol ("+x(this).__description__+")"}),valueOf:T(function(){return x(this)})}),a(v.prototype,v.toPrimitive,T("",function(){var u=x(this);return typeof u=="symbol"?u:u.toString()})),a(v.prototype,v.toStringTag,T("c","Symbol")),a(w.prototype,v.toStringTag,T("c",v.prototype[v.toStringTag])),a(w.prototype,v.toPrimitive,T("c",v.prototype[v.toPrimitive]))},63948:function(C,A,e){"use strict";var v=e(53908);C.exports=function(w){if(!v(w))throw new TypeError(w+" is not a symbol");return w}},60463:function(C,A,e){"use strict";C.exports=e(96979)()?WeakMap:e(64864)},96979:function(C){"use strict";C.exports=function(){var A,e;if(typeof WeakMap!="function")return!1;try{A=new WeakMap([[e={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return String(A)==="[object WeakMap]"&&typeof A.set=="function"&&A.set({},1)===A&&typeof A.delete=="function"&&typeof A.has=="function"&&A.get(e)==="one"}},69876:function(C){"use strict";C.exports=typeof WeakMap=="function"&&Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"},64864:function(C,A,e){"use strict";var v,w=e(42584),n=e(69932),T=e(92584),x=e(9252),f=e(82252),s=e(21092),t=e(76252),o=e(76024),r=e(92664).toStringTag,i=e(69876),a=Array.isArray,u=Object.defineProperty,l=Object.prototype.hasOwnProperty,d=Object.getPrototypeOf;C.exports=v=function(){var c,_=arguments[0];if(!(this instanceof v))throw new TypeError("Constructor requires 'new'");return c=i&&n&&WeakMap!==v?n(new WeakMap,d(this)):this,w(_)&&(a(_)||(_=t(_))),u(c,"__weakMapData__",s("c","$weakMap$"+f())),_&&o(_,function(p){x(p),c.set(p[0],p[1])}),c},i&&(n&&n(v,WeakMap),v.prototype=Object.create(WeakMap.prototype,{constructor:s(v)})),Object.defineProperties(v.prototype,{delete:s(function(c){return!!l.call(T(c),this.__weakMapData__)&&(delete c[this.__weakMapData__],!0)}),get:s(function(c){if(l.call(T(c),this.__weakMapData__))return c[this.__weakMapData__]}),has:s(function(c){return l.call(T(c),this.__weakMapData__)}),set:s(function(c,_){return u(T(c),this.__weakMapData__,s("c",_)),this}),toString:s(function(){return"[object WeakMap]"})}),u(v.prototype,r,s("c","WeakMap"))},61252:function(C){"use strict";var A,e=typeof Reflect=="object"?Reflect:null,v=e&&typeof e.apply=="function"?e.apply:function(l,d,c){return Function.prototype.apply.call(l,d,c)};A=e&&typeof e.ownKeys=="function"?e.ownKeys:Object.getOwnPropertySymbols?function(l){return Object.getOwnPropertyNames(l).concat(Object.getOwnPropertySymbols(l))}:function(l){return Object.getOwnPropertyNames(l)};var w=Number.isNaN||function(l){return l!=l};function n(){n.init.call(this)}C.exports=n,C.exports.once=function(l,d){return new Promise(function(c,_){function p(m){l.removeListener(d,g),_(m)}function g(){typeof l.removeListener=="function"&&l.removeListener("error",p),c([].slice.call(arguments))}u(l,d,g,{once:!0}),d!=="error"&&function(m,b,y){typeof m.on=="function"&&u(m,"error",b,{once:!0})}(l,p)})},n.EventEmitter=n,n.prototype._events=void 0,n.prototype._eventsCount=0,n.prototype._maxListeners=void 0;var T=10;function x(l){if(typeof l!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof l)}function f(l){return l._maxListeners===void 0?n.defaultMaxListeners:l._maxListeners}function s(l,d,c,_){var p,g,m,b;if(x(c),(g=l._events)===void 0?(g=l._events=Object.create(null),l._eventsCount=0):(g.newListener!==void 0&&(l.emit("newListener",d,c.listener?c.listener:c),g=l._events),m=g[d]),m===void 0)m=g[d]=c,++l._eventsCount;else if(typeof m=="function"?m=g[d]=_?[c,m]:[m,c]:_?m.unshift(c):m.push(c),(p=f(l))>0&&m.length>p&&!m.warned){m.warned=!0;var y=new Error("Possible EventEmitter memory leak detected. "+m.length+" "+String(d)+" listeners added. Use emitter.setMaxListeners() to increase limit");y.name="MaxListenersExceededWarning",y.emitter=l,y.type=d,y.count=m.length,b=y,console&&console.warn&&console.warn(b)}return l}function t(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function o(l,d,c){var _={fired:!1,wrapFn:void 0,target:l,type:d,listener:c},p=t.bind(_);return p.listener=c,_.wrapFn=p,p}function r(l,d,c){var _=l._events;if(_===void 0)return[];var p=_[d];return p===void 0?[]:typeof p=="function"?c?[p.listener||p]:[p]:c?function(g){for(var m=new Array(g.length),b=0;b<m.length;++b)m[b]=g[b].listener||g[b];return m}(p):a(p,p.length)}function i(l){var d=this._events;if(d!==void 0){var c=d[l];if(typeof c=="function")return 1;if(c!==void 0)return c.length}return 0}function a(l,d){for(var c=new Array(d),_=0;_<d;++_)c[_]=l[_];return c}function u(l,d,c,_){if(typeof l.on=="function")_.once?l.once(d,c):l.on(d,c);else{if(typeof l.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof l);l.addEventListener(d,function p(g){_.once&&l.removeEventListener(d,p),c(g)})}}Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return T},set:function(l){if(typeof l!="number"||l<0||w(l))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+l+".");T=l}}),n.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},n.prototype.setMaxListeners=function(l){if(typeof l!="number"||l<0||w(l))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+l+".");return this._maxListeners=l,this},n.prototype.getMaxListeners=function(){return f(this)},n.prototype.emit=function(l){for(var d=[],c=1;c<arguments.length;c++)d.push(arguments[c]);var _=l==="error",p=this._events;if(p!==void 0)_=_&&p.error===void 0;else if(!_)return!1;if(_){var g;if(d.length>0&&(g=d[0]),g instanceof Error)throw g;var m=new Error("Unhandled error."+(g?" ("+g.message+")":""));throw m.context=g,m}var b=p[l];if(b===void 0)return!1;if(typeof b=="function")v(b,this,d);else{var y=b.length,M=a(b,y);for(c=0;c<y;++c)v(M[c],this,d)}return!0},n.prototype.addListener=function(l,d){return s(this,l,d,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(l,d){return s(this,l,d,!0)},n.prototype.once=function(l,d){return x(d),this.on(l,o(this,l,d)),this},n.prototype.prependOnceListener=function(l,d){return x(d),this.prependListener(l,o(this,l,d)),this},n.prototype.removeListener=function(l,d){var c,_,p,g,m;if(x(d),(_=this._events)===void 0)return this;if((c=_[l])===void 0)return this;if(c===d||c.listener===d)--this._eventsCount==0?this._events=Object.create(null):(delete _[l],_.removeListener&&this.emit("removeListener",l,c.listener||d));else if(typeof c!="function"){for(p=-1,g=c.length-1;g>=0;g--)if(c[g]===d||c[g].listener===d){m=c[g].listener,p=g;break}if(p<0)return this;p===0?c.shift():function(b,y){for(;y+1<b.length;y++)b[y]=b[y+1];b.pop()}(c,p),c.length===1&&(_[l]=c[0]),_.removeListener!==void 0&&this.emit("removeListener",l,m||d)}return this},n.prototype.off=n.prototype.removeListener,n.prototype.removeAllListeners=function(l){var d,c,_;if((c=this._events)===void 0)return this;if(c.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):c[l]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete c[l]),this;if(arguments.length===0){var p,g=Object.keys(c);for(_=0;_<g.length;++_)(p=g[_])!=="removeListener"&&this.removeAllListeners(p);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(d=c[l])=="function")this.removeListener(l,d);else if(d!==void 0)for(_=d.length-1;_>=0;_--)this.removeListener(l,d[_]);return this},n.prototype.listeners=function(l){return r(this,l,!0)},n.prototype.rawListeners=function(l){return r(this,l,!1)},n.listenerCount=function(l,d){return typeof l.listenerCount=="function"?l.listenerCount(d):i.call(l,d)},n.prototype.listenerCount=i,n.prototype.eventNames=function(){return this._eventsCount>0?A(this._events):[]}},39072:function(C){var A=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};C.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return A()}try{return __global__||A()}finally{delete Object.prototype.__global__}}()},12296:function(C,A,e){"use strict";C.exports=e(45072)()?globalThis:e(39072)},45072:function(C){"use strict";C.exports=function(){return typeof globalThis=="object"&&!!globalThis&&globalThis.Array===Array}},38248:function(C,A,e){"use strict";var v=e(94576);C.exports=function(w){var n=typeof w;if(n==="string"){var T=w;if((w=+w)==0&&v(T))return!1}else if(n!=="number")return!1;return w-w<1}},47520:function(C,A,e){var v=e(72512);C.exports=function(w,n,T){if(!w)throw new TypeError("must specify data as first parameter");if(T=0|+(T||0),Array.isArray(w)&&w[0]&&typeof w[0][0]=="number"){var x,f,s,t,o=w[0].length,r=w.length*o;n&&typeof n!="string"||(n=new(v(n||"float32"))(r+T));var i=n.length-T;if(r!==i)throw new Error("source length "+r+" ("+o+"x"+w.length+") does not match destination length "+i);for(x=0,s=T;x<w.length;x++)for(f=0;f<o;f++)n[s++]=w[x][f]===null?NaN:w[x][f]}else if(n&&typeof n!="string")n.set(w,T);else{var a=v(n||"float32");if(Array.isArray(w)||n==="array")for(x=0,s=T,t=(n=new a(w.length+T)).length;s<t;s++,x++)n[s]=w[x]===null?NaN:w[x];else T===0?n=new a(w):(n=new a(w.length+T)).set(w,T)}return n}},33888:function(C,A,e){"use strict";var v=e(49395),w=[32,126];C.exports=function(n){var T=(n=n||{}).shape?n.shape:n.canvas?[n.canvas.width,n.canvas.height]:[512,512],x=n.canvas||document.createElement("canvas"),f=n.font,s=typeof n.step=="number"?[n.step,n.step]:n.step||[32,32],t=n.chars||w;if(f&&typeof f!="string"&&(f=v(f)),Array.isArray(t)){if(t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"){for(var o=[],r=t[0],i=0;r<=t[1];r++)o[i++]=String.fromCharCode(r);t=o}}else t=String(t).split("");T=T.slice(),x.width=T[0],x.height=T[1];var a=x.getContext("2d");a.fillStyle="#000",a.fillRect(0,0,x.width,x.height),a.font=f,a.textAlign="center",a.textBaseline="middle",a.fillStyle="#fff";var u=s[0]/2,l=s[1]/2;for(r=0;r<t.length;r++)a.fillText(t[r],u,l),(u+=s[0])>T[0]-s[0]/2&&(u=s[0]/2,l+=s[1]);return x}},71920:function(C){"use strict";function A(n,T){T||(T={}),(typeof n=="string"||Array.isArray(n))&&(T.family=n);var x=Array.isArray(T.family)?T.family.join(", "):T.family;if(!x)throw Error("`family` must be defined");var f=T.size||T.fontSize||T.em||48,s=T.weight||T.fontWeight||"",t=(n=[T.style||T.fontStyle||"",s,f].join(" ")+"px "+x,T.origin||"top");if(A.cache[x]&&f<=A.cache[x].em)return e(A.cache[x],t);var o=T.canvas||A.canvas,r=o.getContext("2d"),i={upper:T.upper!==void 0?T.upper:"H",lower:T.lower!==void 0?T.lower:"x",descent:T.descent!==void 0?T.descent:"p",ascent:T.ascent!==void 0?T.ascent:"h",tittle:T.tittle!==void 0?T.tittle:"i",overshoot:T.overshoot!==void 0?T.overshoot:"O"},a=Math.ceil(1.5*f);o.height=a,o.width=.5*a,r.font=n;var u="H",l={top:0};r.clearRect(0,0,a,a),r.textBaseline="top",r.fillStyle="black",r.fillText(u,0,0);var d=v(r.getImageData(0,0,a,a));r.clearRect(0,0,a,a),r.textBaseline="bottom",r.fillText(u,0,a);var c=v(r.getImageData(0,0,a,a));l.lineHeight=l.bottom=a-c+d,r.clearRect(0,0,a,a),r.textBaseline="alphabetic",r.fillText(u,0,a);var _=a-v(r.getImageData(0,0,a,a))-1+d;l.baseline=l.alphabetic=_,r.clearRect(0,0,a,a),r.textBaseline="middle",r.fillText(u,0,.5*a);var p=v(r.getImageData(0,0,a,a));l.median=l.middle=a-p-1+d-.5*a,r.clearRect(0,0,a,a),r.textBaseline="hanging",r.fillText(u,0,.5*a);var g=v(r.getImageData(0,0,a,a));l.hanging=a-g-1+d-.5*a,r.clearRect(0,0,a,a),r.textBaseline="ideographic",r.fillText(u,0,a);var m=v(r.getImageData(0,0,a,a));if(l.ideographic=a-m-1+d,i.upper&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(i.upper,0,0),l.upper=v(r.getImageData(0,0,a,a)),l.capHeight=l.baseline-l.upper),i.lower&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(i.lower,0,0),l.lower=v(r.getImageData(0,0,a,a)),l.xHeight=l.baseline-l.lower),i.tittle&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(i.tittle,0,0),l.tittle=v(r.getImageData(0,0,a,a))),i.ascent&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(i.ascent,0,0),l.ascent=v(r.getImageData(0,0,a,a))),i.descent&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(i.descent,0,0),l.descent=w(r.getImageData(0,0,a,a))),i.overshoot){r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(i.overshoot,0,0);var b=w(r.getImageData(0,0,a,a));l.overshoot=b-_}for(var y in l)l[y]/=f;return l.em=f,A.cache[x]=l,e(l,t)}function e(n,T){var x={};for(var f in typeof T=="string"&&(T=n[T]),n)f!=="em"&&(x[f]=n[f]-T);return x}function v(n){for(var T=n.height,x=n.data,f=3;f<x.length;f+=4)if(x[f]!==0)return Math.floor(.25*(f-3)/T)}function w(n){for(var T=n.height,x=n.data,f=x.length-1;f>0;f-=4)if(x[f]!==0)return Math.floor(.25*(f-3)/T)}C.exports=A,A.canvas=document.createElement("canvas"),A.cache={}},46492:function(C,A,e){"use strict";var v=e(90720),w=Object.prototype.toString,n=Object.prototype.hasOwnProperty;C.exports=function(T,x,f){if(!v(x))throw new TypeError("iterator must be a function");var s;arguments.length>=3&&(s=f),w.call(T)==="[object Array]"?function(t,o,r){for(var i=0,a=t.length;i<a;i++)n.call(t,i)&&(r==null?o(t[i],i,t):o.call(r,t[i],i,t))}(T,x,s):typeof T=="string"?function(t,o,r){for(var i=0,a=t.length;i<a;i++)r==null?o(t.charAt(i),i,t):o.call(r,t.charAt(i),i,t)}(T,x,s):function(t,o,r){for(var i in t)n.call(t,i)&&(r==null?o(t[i],i,t):o.call(r,t[i],i,t))}(T,x,s)}},74336:function(C){"use strict";var A=Object.prototype.toString,e=Math.max,v=function(w,n){for(var T=[],x=0;x<w.length;x+=1)T[x]=w[x];for(var f=0;f<n.length;f+=1)T[f+w.length]=n[f];return T};C.exports=function(w){var n=this;if(typeof n!="function"||A.apply(n)!=="[object Function]")throw new TypeError("Function.prototype.bind called on incompatible "+n);for(var T,x=function(r,i){for(var a=[],u=1,l=0;u<r.length;u+=1,l+=1)a[l]=r[u];return a}(arguments),f=e(0,n.length-x.length),s=[],t=0;t<f;t++)s[t]="$"+t;if(T=Function("binder","return function ("+function(r,i){for(var a="",u=0;u<r.length;u+=1)a+=r[u],u+1<r.length&&(a+=",");return a}(s)+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof T){var r=n.apply(this,v(x,arguments));return Object(r)===r?r:this}return n.apply(w,v(x,arguments))}),n.prototype){var o=function(){};o.prototype=n.prototype,T.prototype=new o,o.prototype=null}return T}},8844:function(C,A,e){"use strict";var v=e(74336);C.exports=Function.prototype.bind||v},13380:function(C){C.exports=function(A,e){if(typeof A!="string")throw new TypeError("must specify type string");if(e=e||{},typeof document>"u"&&!e.canvas)return null;var v=e.canvas||document.createElement("canvas");typeof e.width=="number"&&(v.width=e.width),typeof e.height=="number"&&(v.height=e.height);var w,n=e;try{var T=[A];A.indexOf("webgl")===0&&T.push("experimental-"+A);for(var x=0;x<T.length;x++)if(w=v.getContext(T[x],n))return w}catch{w=null}return w||null}},53664:function(C,A,e){"use strict";var v,w=SyntaxError,n=Function,T=TypeError,x=function(P){try{return n('"use strict"; return ('+P+").constructor;")()}catch{}},f=Object.getOwnPropertyDescriptor;if(f)try{f({},"")}catch{f=null}var s=function(){throw new T},t=f?function(){try{return s}catch{try{return f(arguments,"callee").get}catch{return s}}}():s,o=e(71080)(),r=e(69572)(),i=Object.getPrototypeOf||(r?function(P){return P.__proto__}:null),a={},u=typeof Uint8Array<"u"&&i?i(Uint8Array):v,l={"%AggregateError%":typeof AggregateError>"u"?v:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?v:ArrayBuffer,"%ArrayIteratorPrototype%":o&&i?i([][Symbol.iterator]()):v,"%AsyncFromSyncIteratorPrototype%":v,"%AsyncFunction%":a,"%AsyncGenerator%":a,"%AsyncGeneratorFunction%":a,"%AsyncIteratorPrototype%":a,"%Atomics%":typeof Atomics>"u"?v:Atomics,"%BigInt%":typeof BigInt>"u"?v:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?v:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?v:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?v:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?v:Float32Array,"%Float64Array%":typeof Float64Array>"u"?v:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?v:FinalizationRegistry,"%Function%":n,"%GeneratorFunction%":a,"%Int8Array%":typeof Int8Array>"u"?v:Int8Array,"%Int16Array%":typeof Int16Array>"u"?v:Int16Array,"%Int32Array%":typeof Int32Array>"u"?v:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":o&&i?i(i([][Symbol.iterator]())):v,"%JSON%":typeof JSON=="object"?JSON:v,"%Map%":typeof Map>"u"?v:Map,"%MapIteratorPrototype%":typeof Map<"u"&&o&&i?i(new Map()[Symbol.iterator]()):v,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?v:Promise,"%Proxy%":typeof Proxy>"u"?v:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?v:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?v:Set,"%SetIteratorPrototype%":typeof Set<"u"&&o&&i?i(new Set()[Symbol.iterator]()):v,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?v:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":o&&i?i(""[Symbol.iterator]()):v,"%Symbol%":o?Symbol:v,"%SyntaxError%":w,"%ThrowTypeError%":t,"%TypedArray%":u,"%TypeError%":T,"%Uint8Array%":typeof Uint8Array>"u"?v:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?v:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?v:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?v:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?v:WeakMap,"%WeakRef%":typeof WeakRef>"u"?v:WeakRef,"%WeakSet%":typeof WeakSet>"u"?v:WeakSet};if(i)try{null.error}catch(P){var d=i(i(P));l["%Error.prototype%"]=d}var c=function P(L){var O;if(L==="%AsyncFunction%")O=x("async function () {}");else if(L==="%GeneratorFunction%")O=x("function* () {}");else if(L==="%AsyncGeneratorFunction%")O=x("async function* () {}");else if(L==="%AsyncGenerator%"){var N=P("%AsyncGeneratorFunction%");N&&(O=N.prototype)}else if(L==="%AsyncIteratorPrototype%"){var V=P("%AsyncGenerator%");V&&i&&(O=i(V.prototype))}return l[L]=O,O},_={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},p=e(8844),g=e(92064),m=p.call(Function.call,Array.prototype.concat),b=p.call(Function.apply,Array.prototype.splice),y=p.call(Function.call,String.prototype.replace),M=p.call(Function.call,String.prototype.slice),h=p.call(Function.call,RegExp.prototype.exec),E=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,k=/\\(\\)?/g,D=function(P,L){var O,N=P;if(g(_,N)&&(N="%"+(O=_[N])[0]+"%"),g(l,N)){var V=l[N];if(V===a&&(V=c(N)),V===void 0&&!L)throw new T("intrinsic "+P+" exists, but is not available. Please file an issue!");return{alias:O,name:N,value:V}}throw new w("intrinsic "+P+" does not exist!")};C.exports=function(P,L){if(typeof P!="string"||P.length===0)throw new T("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof L!="boolean")throw new T('"allowMissing" argument must be a boolean');if(h(/^%?[^%]*%?$/,P)===null)throw new w("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var O=function(ne){var K=M(ne,0,1),oe=M(ne,-1);if(K==="%"&&oe!=="%")throw new w("invalid intrinsic syntax, expected closing `%`");if(oe==="%"&&K!=="%")throw new w("invalid intrinsic syntax, expected opening `%`");var le=[];return y(ne,E,function(se,de,be,_e){le[le.length]=be?y(_e,k,"$1"):de||se}),le}(P),N=O.length>0?O[0]:"",V=D("%"+N+"%",L),F=V.name,j=V.value,Z=!1,z=V.alias;z&&(N=z[0],b(O,m([0,1],z)));for(var H=1,U=!0;H<O.length;H+=1){var re=O[H],ee=M(re,0,1),J=M(re,-1);if((ee==='"'||ee==="'"||ee==="`"||J==='"'||J==="'"||J==="`")&&ee!==J)throw new w("property names with quotes must have matching quotes");if(re!=="constructor"&&U||(Z=!0),g(l,F="%"+(N+="."+re)+"%"))j=l[F];else if(j!=null){if(!(re in j)){if(!L)throw new T("base intrinsic for "+P+" exists, but the property is not available.");return}if(f&&H+1>=O.length){var Q=f(j,re);j=(U=!!Q)&&"get"in Q&&!("originalValue"in Q.get)?Q.get:j[re]}else U=g(j,re),j=j[re];U&&!Z&&(l[F]=j)}}return j}},12408:function(C){C.exports=function(A,e){var v=e[0],w=e[1],n=e[2],T=e[3],x=e[4],f=e[5],s=e[6],t=e[7],o=e[8],r=e[9],i=e[10],a=e[11],u=e[12],l=e[13],d=e[14],c=e[15];return A[0]=f*(i*c-a*d)-r*(s*c-t*d)+l*(s*a-t*i),A[1]=-(w*(i*c-a*d)-r*(n*c-T*d)+l*(n*a-T*i)),A[2]=w*(s*c-t*d)-f*(n*c-T*d)+l*(n*t-T*s),A[3]=-(w*(s*a-t*i)-f*(n*a-T*i)+r*(n*t-T*s)),A[4]=-(x*(i*c-a*d)-o*(s*c-t*d)+u*(s*a-t*i)),A[5]=v*(i*c-a*d)-o*(n*c-T*d)+u*(n*a-T*i),A[6]=-(v*(s*c-t*d)-x*(n*c-T*d)+u*(n*t-T*s)),A[7]=v*(s*a-t*i)-x*(n*a-T*i)+o*(n*t-T*s),A[8]=x*(r*c-a*l)-o*(f*c-t*l)+u*(f*a-t*r),A[9]=-(v*(r*c-a*l)-o*(w*c-T*l)+u*(w*a-T*r)),A[10]=v*(f*c-t*l)-x*(w*c-T*l)+u*(w*t-T*f),A[11]=-(v*(f*a-t*r)-x*(w*a-T*r)+o*(w*t-T*f)),A[12]=-(x*(r*d-i*l)-o*(f*d-s*l)+u*(f*i-s*r)),A[13]=v*(r*d-i*l)-o*(w*d-n*l)+u*(w*i-n*r),A[14]=-(v*(f*d-s*l)-x*(w*d-n*l)+u*(w*s-n*f)),A[15]=v*(f*i-s*r)-x*(w*i-n*r)+o*(w*s-n*f),A}},76860:function(C){C.exports=function(A){var e=new Float32Array(16);return e[0]=A[0],e[1]=A[1],e[2]=A[2],e[3]=A[3],e[4]=A[4],e[5]=A[5],e[6]=A[6],e[7]=A[7],e[8]=A[8],e[9]=A[9],e[10]=A[10],e[11]=A[11],e[12]=A[12],e[13]=A[13],e[14]=A[14],e[15]=A[15],e}},64492:function(C){C.exports=function(A,e){return A[0]=e[0],A[1]=e[1],A[2]=e[2],A[3]=e[3],A[4]=e[4],A[5]=e[5],A[6]=e[6],A[7]=e[7],A[8]=e[8],A[9]=e[9],A[10]=e[10],A[11]=e[11],A[12]=e[12],A[13]=e[13],A[14]=e[14],A[15]=e[15],A}},54212:function(C){C.exports=function(){var A=new Float32Array(16);return A[0]=1,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=1,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=1,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A}},70800:function(C){C.exports=function(A){var e=A[0],v=A[1],w=A[2],n=A[3],T=A[4],x=A[5],f=A[6],s=A[7],t=A[8],o=A[9],r=A[10],i=A[11],a=A[12],u=A[13],l=A[14],d=A[15];return(e*x-v*T)*(r*d-i*l)-(e*f-w*T)*(o*d-i*u)+(e*s-n*T)*(o*l-r*u)+(v*f-w*x)*(t*d-i*a)-(v*s-n*x)*(t*l-r*a)+(w*s-n*f)*(t*u-o*a)}},61784:function(C){C.exports=function(A,e){var v=e[0],w=e[1],n=e[2],T=e[3],x=v+v,f=w+w,s=n+n,t=v*x,o=w*x,r=w*f,i=n*x,a=n*f,u=n*s,l=T*x,d=T*f,c=T*s;return A[0]=1-r-u,A[1]=o+c,A[2]=i-d,A[3]=0,A[4]=o-c,A[5]=1-t-u,A[6]=a+l,A[7]=0,A[8]=i+d,A[9]=a-l,A[10]=1-t-r,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A}},91616:function(C){C.exports=function(A,e,v){var w,n,T,x=v[0],f=v[1],s=v[2],t=Math.sqrt(x*x+f*f+s*s);return Math.abs(t)<1e-6?null:(x*=t=1/t,f*=t,s*=t,w=Math.sin(e),T=1-(n=Math.cos(e)),A[0]=x*x*T+n,A[1]=f*x*T+s*w,A[2]=s*x*T-f*w,A[3]=0,A[4]=x*f*T-s*w,A[5]=f*f*T+n,A[6]=s*f*T+x*w,A[7]=0,A[8]=x*s*T+f*w,A[9]=f*s*T-x*w,A[10]=s*s*T+n,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A)}},51944:function(C){C.exports=function(A,e,v){var w=e[0],n=e[1],T=e[2],x=e[3],f=w+w,s=n+n,t=T+T,o=w*f,r=w*s,i=w*t,a=n*s,u=n*t,l=T*t,d=x*f,c=x*s,_=x*t;return A[0]=1-(a+l),A[1]=r+_,A[2]=i-c,A[3]=0,A[4]=r-_,A[5]=1-(o+l),A[6]=u+d,A[7]=0,A[8]=i+c,A[9]=u-d,A[10]=1-(o+a),A[11]=0,A[12]=v[0],A[13]=v[1],A[14]=v[2],A[15]=1,A}},69444:function(C){C.exports=function(A,e){return A[0]=e[0],A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=e[1],A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=e[2],A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A}},48268:function(C){C.exports=function(A,e){return A[0]=1,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=1,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=1,A[11]=0,A[12]=e[0],A[13]=e[1],A[14]=e[2],A[15]=1,A}},21856:function(C){C.exports=function(A,e){var v=Math.sin(e),w=Math.cos(e);return A[0]=1,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=w,A[6]=v,A[7]=0,A[8]=0,A[9]=-v,A[10]=w,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A}},79216:function(C){C.exports=function(A,e){var v=Math.sin(e),w=Math.cos(e);return A[0]=w,A[1]=0,A[2]=-v,A[3]=0,A[4]=0,A[5]=1,A[6]=0,A[7]=0,A[8]=v,A[9]=0,A[10]=w,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A}},57736:function(C){C.exports=function(A,e){var v=Math.sin(e),w=Math.cos(e);return A[0]=w,A[1]=v,A[2]=0,A[3]=0,A[4]=-v,A[5]=w,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=1,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A}},38848:function(C){C.exports=function(A,e,v,w,n,T,x){var f=1/(v-e),s=1/(n-w),t=1/(T-x);return A[0]=2*T*f,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=2*T*s,A[6]=0,A[7]=0,A[8]=(v+e)*f,A[9]=(n+w)*s,A[10]=(x+T)*t,A[11]=-1,A[12]=0,A[13]=0,A[14]=x*T*2*t,A[15]=0,A}},36635:function(C){C.exports=function(A){return A[0]=1,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=1,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=1,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A}},36524:function(C,A,e){C.exports={create:e(54212),clone:e(76860),copy:e(64492),identity:e(36635),transpose:e(86520),invert:e(4308),adjoint:e(12408),determinant:e(70800),multiply:e(80944),translate:e(35176),scale:e(68152),rotate:e(30016),rotateX:e(15456),rotateY:e(64840),rotateZ:e(4192),fromRotation:e(91616),fromRotationTranslation:e(51944),fromScaling:e(69444),fromTranslation:e(48268),fromXRotation:e(21856),fromYRotation:e(79216),fromZRotation:e(57736),fromQuat:e(61784),frustum:e(38848),perspective:e(51296),perspectiveFromFieldOfView:e(63688),ortho:e(97688),lookAt:e(56508),str:e(89412)}},4308:function(C){C.exports=function(A,e){var v=e[0],w=e[1],n=e[2],T=e[3],x=e[4],f=e[5],s=e[6],t=e[7],o=e[8],r=e[9],i=e[10],a=e[11],u=e[12],l=e[13],d=e[14],c=e[15],_=v*f-w*x,p=v*s-n*x,g=v*t-T*x,m=w*s-n*f,b=w*t-T*f,y=n*t-T*s,M=o*l-r*u,h=o*d-i*u,E=o*c-a*u,k=r*d-i*l,D=r*c-a*l,P=i*c-a*d,L=_*P-p*D+g*k+m*E-b*h+y*M;return L?(L=1/L,A[0]=(f*P-s*D+t*k)*L,A[1]=(n*D-w*P-T*k)*L,A[2]=(l*y-d*b+c*m)*L,A[3]=(i*b-r*y-a*m)*L,A[4]=(s*E-x*P-t*h)*L,A[5]=(v*P-n*E+T*h)*L,A[6]=(d*g-u*y-c*p)*L,A[7]=(o*y-i*g+a*p)*L,A[8]=(x*D-f*E+t*M)*L,A[9]=(w*E-v*D-T*M)*L,A[10]=(u*b-l*g+c*_)*L,A[11]=(r*g-o*b-a*_)*L,A[12]=(f*h-x*k-s*M)*L,A[13]=(v*k-w*h+n*M)*L,A[14]=(l*p-u*m-d*_)*L,A[15]=(o*m-r*p+i*_)*L,A):null}},56508:function(C,A,e){var v=e(36635);C.exports=function(w,n,T,x){var f,s,t,o,r,i,a,u,l,d,c=n[0],_=n[1],p=n[2],g=x[0],m=x[1],b=x[2],y=T[0],M=T[1],h=T[2];return Math.abs(c-y)<1e-6&&Math.abs(_-M)<1e-6&&Math.abs(p-h)<1e-6?v(w):(a=c-y,u=_-M,l=p-h,f=m*(l*=d=1/Math.sqrt(a*a+u*u+l*l))-b*(u*=d),s=b*(a*=d)-g*l,t=g*u-m*a,(d=Math.sqrt(f*f+s*s+t*t))?(f*=d=1/d,s*=d,t*=d):(f=0,s=0,t=0),o=u*t-l*s,r=l*f-a*t,i=a*s-u*f,(d=Math.sqrt(o*o+r*r+i*i))?(o*=d=1/d,r*=d,i*=d):(o=0,r=0,i=0),w[0]=f,w[1]=o,w[2]=a,w[3]=0,w[4]=s,w[5]=r,w[6]=u,w[7]=0,w[8]=t,w[9]=i,w[10]=l,w[11]=0,w[12]=-(f*c+s*_+t*p),w[13]=-(o*c+r*_+i*p),w[14]=-(a*c+u*_+l*p),w[15]=1,w)}},80944:function(C){C.exports=function(A,e,v){var w=e[0],n=e[1],T=e[2],x=e[3],f=e[4],s=e[5],t=e[6],o=e[7],r=e[8],i=e[9],a=e[10],u=e[11],l=e[12],d=e[13],c=e[14],_=e[15],p=v[0],g=v[1],m=v[2],b=v[3];return A[0]=p*w+g*f+m*r+b*l,A[1]=p*n+g*s+m*i+b*d,A[2]=p*T+g*t+m*a+b*c,A[3]=p*x+g*o+m*u+b*_,p=v[4],g=v[5],m=v[6],b=v[7],A[4]=p*w+g*f+m*r+b*l,A[5]=p*n+g*s+m*i+b*d,A[6]=p*T+g*t+m*a+b*c,A[7]=p*x+g*o+m*u+b*_,p=v[8],g=v[9],m=v[10],b=v[11],A[8]=p*w+g*f+m*r+b*l,A[9]=p*n+g*s+m*i+b*d,A[10]=p*T+g*t+m*a+b*c,A[11]=p*x+g*o+m*u+b*_,p=v[12],g=v[13],m=v[14],b=v[15],A[12]=p*w+g*f+m*r+b*l,A[13]=p*n+g*s+m*i+b*d,A[14]=p*T+g*t+m*a+b*c,A[15]=p*x+g*o+m*u+b*_,A}},97688:function(C){C.exports=function(A,e,v,w,n,T,x){var f=1/(e-v),s=1/(w-n),t=1/(T-x);return A[0]=-2*f,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=-2*s,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=2*t,A[11]=0,A[12]=(e+v)*f,A[13]=(n+w)*s,A[14]=(x+T)*t,A[15]=1,A}},51296:function(C){C.exports=function(A,e,v,w,n){var T=1/Math.tan(e/2),x=1/(w-n);return A[0]=T/v,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=T,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=(n+w)*x,A[11]=-1,A[12]=0,A[13]=0,A[14]=2*n*w*x,A[15]=0,A}},63688:function(C){C.exports=function(A,e,v,w){var n=Math.tan(e.upDegrees*Math.PI/180),T=Math.tan(e.downDegrees*Math.PI/180),x=Math.tan(e.leftDegrees*Math.PI/180),f=Math.tan(e.rightDegrees*Math.PI/180),s=2/(x+f),t=2/(n+T);return A[0]=s,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=t,A[6]=0,A[7]=0,A[8]=-(x-f)*s*.5,A[9]=(n-T)*t*.5,A[10]=w/(v-w),A[11]=-1,A[12]=0,A[13]=0,A[14]=w*v/(v-w),A[15]=0,A}},30016:function(C){C.exports=function(A,e,v,w){var n,T,x,f,s,t,o,r,i,a,u,l,d,c,_,p,g,m,b,y,M,h,E,k,D=w[0],P=w[1],L=w[2],O=Math.sqrt(D*D+P*P+L*L);return Math.abs(O)<1e-6?null:(D*=O=1/O,P*=O,L*=O,n=Math.sin(v),x=1-(T=Math.cos(v)),f=e[0],s=e[1],t=e[2],o=e[3],r=e[4],i=e[5],a=e[6],u=e[7],l=e[8],d=e[9],c=e[10],_=e[11],p=D*D*x+T,g=P*D*x+L*n,m=L*D*x-P*n,b=D*P*x-L*n,y=P*P*x+T,M=L*P*x+D*n,h=D*L*x+P*n,E=P*L*x-D*n,k=L*L*x+T,A[0]=f*p+r*g+l*m,A[1]=s*p+i*g+d*m,A[2]=t*p+a*g+c*m,A[3]=o*p+u*g+_*m,A[4]=f*b+r*y+l*M,A[5]=s*b+i*y+d*M,A[6]=t*b+a*y+c*M,A[7]=o*b+u*y+_*M,A[8]=f*h+r*E+l*k,A[9]=s*h+i*E+d*k,A[10]=t*h+a*E+c*k,A[11]=o*h+u*E+_*k,e!==A&&(A[12]=e[12],A[13]=e[13],A[14]=e[14],A[15]=e[15]),A)}},15456:function(C){C.exports=function(A,e,v){var w=Math.sin(v),n=Math.cos(v),T=e[4],x=e[5],f=e[6],s=e[7],t=e[8],o=e[9],r=e[10],i=e[11];return e!==A&&(A[0]=e[0],A[1]=e[1],A[2]=e[2],A[3]=e[3],A[12]=e[12],A[13]=e[13],A[14]=e[14],A[15]=e[15]),A[4]=T*n+t*w,A[5]=x*n+o*w,A[6]=f*n+r*w,A[7]=s*n+i*w,A[8]=t*n-T*w,A[9]=o*n-x*w,A[10]=r*n-f*w,A[11]=i*n-s*w,A}},64840:function(C){C.exports=function(A,e,v){var w=Math.sin(v),n=Math.cos(v),T=e[0],x=e[1],f=e[2],s=e[3],t=e[8],o=e[9],r=e[10],i=e[11];return e!==A&&(A[4]=e[4],A[5]=e[5],A[6]=e[6],A[7]=e[7],A[12]=e[12],A[13]=e[13],A[14]=e[14],A[15]=e[15]),A[0]=T*n-t*w,A[1]=x*n-o*w,A[2]=f*n-r*w,A[3]=s*n-i*w,A[8]=T*w+t*n,A[9]=x*w+o*n,A[10]=f*w+r*n,A[11]=s*w+i*n,A}},4192:function(C){C.exports=function(A,e,v){var w=Math.sin(v),n=Math.cos(v),T=e[0],x=e[1],f=e[2],s=e[3],t=e[4],o=e[5],r=e[6],i=e[7];return e!==A&&(A[8]=e[8],A[9]=e[9],A[10]=e[10],A[11]=e[11],A[12]=e[12],A[13]=e[13],A[14]=e[14],A[15]=e[15]),A[0]=T*n+t*w,A[1]=x*n+o*w,A[2]=f*n+r*w,A[3]=s*n+i*w,A[4]=t*n-T*w,A[5]=o*n-x*w,A[6]=r*n-f*w,A[7]=i*n-s*w,A}},68152:function(C){C.exports=function(A,e,v){var w=v[0],n=v[1],T=v[2];return A[0]=e[0]*w,A[1]=e[1]*w,A[2]=e[2]*w,A[3]=e[3]*w,A[4]=e[4]*n,A[5]=e[5]*n,A[6]=e[6]*n,A[7]=e[7]*n,A[8]=e[8]*T,A[9]=e[9]*T,A[10]=e[10]*T,A[11]=e[11]*T,A[12]=e[12],A[13]=e[13],A[14]=e[14],A[15]=e[15],A}},89412:function(C){C.exports=function(A){return"mat4("+A[0]+", "+A[1]+", "+A[2]+", "+A[3]+", "+A[4]+", "+A[5]+", "+A[6]+", "+A[7]+", "+A[8]+", "+A[9]+", "+A[10]+", "+A[11]+", "+A[12]+", "+A[13]+", "+A[14]+", "+A[15]+")"}},35176:function(C){C.exports=function(A,e,v){var w,n,T,x,f,s,t,o,r,i,a,u,l=v[0],d=v[1],c=v[2];return e===A?(A[12]=e[0]*l+e[4]*d+e[8]*c+e[12],A[13]=e[1]*l+e[5]*d+e[9]*c+e[13],A[14]=e[2]*l+e[6]*d+e[10]*c+e[14],A[15]=e[3]*l+e[7]*d+e[11]*c+e[15]):(w=e[0],n=e[1],T=e[2],x=e[3],f=e[4],s=e[5],t=e[6],o=e[7],r=e[8],i=e[9],a=e[10],u=e[11],A[0]=w,A[1]=n,A[2]=T,A[3]=x,A[4]=f,A[5]=s,A[6]=t,A[7]=o,A[8]=r,A[9]=i,A[10]=a,A[11]=u,A[12]=w*l+f*d+r*c+e[12],A[13]=n*l+s*d+i*c+e[13],A[14]=T*l+t*d+a*c+e[14],A[15]=x*l+o*d+u*c+e[15]),A}},86520:function(C){C.exports=function(A,e){if(A===e){var v=e[1],w=e[2],n=e[3],T=e[6],x=e[7],f=e[11];A[1]=e[4],A[2]=e[8],A[3]=e[12],A[4]=v,A[6]=e[9],A[7]=e[13],A[8]=w,A[9]=T,A[11]=e[14],A[12]=n,A[13]=x,A[14]=f}else A[0]=e[0],A[1]=e[4],A[2]=e[8],A[3]=e[12],A[4]=e[1],A[5]=e[5],A[6]=e[9],A[7]=e[13],A[8]=e[2],A[9]=e[6],A[10]=e[10],A[11]=e[14],A[12]=e[3],A[13]=e[7],A[14]=e[11],A[15]=e[15];return A}},23352:function(C,A,e){"use strict";var v=e(42771),w=e(55616),n=e(28624),T=e(55212),x=e(60463),f=e(72160),s=e(33888),t=e(14144),o=e(51160),r=e(58908),i=e(65819),a=e(23464),u=e(63768),l=e(50896),d=e(71920),c=e(47520),_=e(308).nextPow2,p=new x,g=!1;if(document.body){var m=document.body.appendChild(document.createElement("div"));m.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(m).fontStretch&&(g=!0),document.body.removeChild(m)}var b=function(y){(function(M){return typeof M=="function"&&M._gl&&M.prop&&M.texture&&M.buffer})(y)?(y={regl:y},this.gl=y.regl._gl):this.gl=T(y),this.shader=p.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=y.regl||n({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),p.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(r(y)?y:{})};b.prototype.createShader=function(){var y=this.regl,M=y({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:y.prop("count"),offset:y.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:y.this("sizeBuffer")},width:{offset:0,stride:8,buffer:y.this("sizeBuffer")},char:y.this("charBuffer"),position:y.this("position")},uniforms:{atlasSize:function(h,E){return[E.atlas.width,E.atlas.height]},atlasDim:function(h,E){return[E.atlas.cols,E.atlas.rows]},atlas:function(h,E){return E.atlas.texture},charStep:function(h,E){return E.atlas.step},em:function(h,E){return E.atlas.em},color:y.prop("color"),opacity:y.prop("opacity"),viewport:y.this("viewportArray"),scale:y.this("scale"),align:y.prop("align"),baseline:y.prop("baseline"),translate:y.this("translate"),positionOffset:y.prop("positionOffset")},primitive:"points",viewport:y.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`});return{regl:y,draw:M,atlas:{}}},b.prototype.update=function(y){var M=this;if(typeof y=="string")y={text:y};else if(!y)return;(y=w(y,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity!=null&&(Array.isArray(y.opacity)?this.opacity=y.opacity.map(function(pe){return parseFloat(pe)}):this.opacity=parseFloat(y.opacity)),y.viewport!=null&&(this.viewport=o(y.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),y.kerning!=null&&(this.kerning=y.kerning),y.offset!=null&&(typeof y.offset=="number"&&(y.offset=[y.offset,0]),this.positionOffset=c(y.offset)),y.direction&&(this.direction=y.direction),y.range&&(this.range=y.range,this.scale=[1/(y.range[2]-y.range[0]),1/(y.range[3]-y.range[1])],this.translate=[-y.range[0],-y.range[1]]),y.scale&&(this.scale=y.scale),y.translate&&(this.translate=y.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||y.font||(y.font=b.baseFontSize+"px sans-serif");var h,E=!1,k=!1;if(y.font&&(Array.isArray(y.font)?y.font:[y.font]).forEach(function(pe,De){if(typeof pe=="string")try{pe=v.parse(pe)}catch{pe=v.parse(b.baseFontSize+"px "+pe)}else{var ke=pe.style,Ee=pe.weight,Ie=pe.stretch,Re=pe.variant;pe=v.parse(v.stringify(pe)),ke&&(pe.style=ke),Ee&&(pe.weight=Ee),Ie&&(pe.stretch=Ie),Re&&(pe.variant=Re)}var Ne=v.stringify({size:b.baseFontSize,family:pe.family,stretch:g?pe.stretch:void 0,variant:pe.variant,weight:pe.weight,style:pe.style}),ge=i(pe.size),we=Math.round(ge[0]*a(ge[1]));if(we!==M.fontSize[De]&&(k=!0,M.fontSize[De]=we),!(M.font[De]&&Ne==M.font[De].baseString||(E=!0,M.font[De]=b.fonts[Ne],M.font[De]))){var Ce=pe.family.join(", "),ze=[pe.style];pe.style!=pe.variant&&ze.push(pe.variant),pe.variant!=pe.weight&&ze.push(pe.weight),g&&pe.weight!=pe.stretch&&ze.push(pe.stretch),M.font[De]={baseString:Ne,family:Ce,weight:pe.weight,stretch:pe.stretch,style:pe.style,variant:pe.variant,width:{},kerning:{},metrics:d(Ce,{origin:"top",fontSize:b.baseFontSize,fontStyle:ze.join(" ")})},b.fonts[Ne]=M.font[De]}}),(E||k)&&this.font.forEach(function(pe,De){var ke=v.stringify({size:M.fontSize[De],family:pe.family,stretch:g?pe.stretch:void 0,variant:pe.variant,weight:pe.weight,style:pe.style});if(M.fontAtlas[De]=M.shader.atlas[ke],!M.fontAtlas[De]){var Ee=pe.metrics;M.shader.atlas[ke]=M.fontAtlas[De]={fontString:ke,step:2*Math.ceil(M.fontSize[De]*Ee.bottom*.5),em:M.fontSize[De],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:M.regl.texture()}}y.text==null&&(y.text=M.text)}),typeof y.text=="string"&&y.position&&y.position.length>2){for(var D=Array(.5*y.position.length),P=0;P<D.length;P++)D[P]=y.text;y.text=D}if(y.text!=null||E){if(this.textOffsets=[0],Array.isArray(y.text)){this.count=y.text[0].length,this.counts=[this.count];for(var L=1;L<y.text.length;L++)this.textOffsets[L]=this.textOffsets[L-1]+y.text[L-1].length,this.count+=y.text[L].length,this.counts.push(y.text[L].length);this.text=y.text.join("")}else this.text=y.text,this.count=this.text.length,this.counts=[this.count];h=[],this.font.forEach(function(pe,De){b.atlasContext.font=pe.baseString;for(var ke=M.fontAtlas[De],Ee=0;Ee<M.text.length;Ee++){var Ie=M.text.charAt(Ee);if(ke.ids[Ie]==null&&(ke.ids[Ie]=ke.chars.length,ke.chars.push(Ie),h.push(Ie)),pe.width[Ie]==null&&(pe.width[Ie]=b.atlasContext.measureText(Ie).width/b.baseFontSize,M.kerning)){var Re=[];for(var Ne in pe.width)Re.push(Ne+Ie,Ie+Ne);l(pe.kerning,u(pe.family,{pairs:Re}))}}})}if(y.position)if(y.position.length>2){for(var O=!y.position[0].length,N=t.mallocFloat(2*this.count),V=0,F=0;V<this.counts.length;V++){var j=this.counts[V];if(O)for(var Z=0;Z<j;Z++)N[F++]=y.position[2*V],N[F++]=y.position[2*V+1];else for(var z=0;z<j;z++)N[F++]=y.position[V][0],N[F++]=y.position[V][1]}this.position.call?this.position({type:"float",data:N}):this.position=this.regl.buffer({type:"float",data:N}),t.freeFloat(N)}else this.position.destroy&&this.position.destroy(),this.position={constant:y.position};if(y.text||E){var H=t.mallocUint8(this.count),U=t.mallocFloat(2*this.count);this.textWidth=[];for(var re=0,ee=0;re<this.counts.length;re++){for(var J=this.counts[re],Q=this.font[re]||this.font[0],ne=this.fontAtlas[re]||this.fontAtlas[0],K=0;K<J;K++){var oe=this.text.charAt(ee),le=this.text.charAt(ee-1);if(H[ee]=ne.ids[oe],U[2*ee]=Q.width[oe],K){var se=U[2*ee-2],de=U[2*ee],be=U[2*ee-1]+.5*se+.5*de;if(this.kerning){var _e=Q.kerning[le+oe];_e&&(be+=.001*_e)}U[2*ee+1]=be}else U[2*ee+1]=.5*U[2*ee];ee++}this.textWidth.push(U.length?.5*U[2*ee-2]+U[2*ee-1]:0)}y.align||(y.align=this.align),this.charBuffer({data:H,type:"uint8",usage:"stream"}),this.sizeBuffer({data:U,type:"float",usage:"stream"}),t.freeUint8(H),t.freeFloat(U),h.length&&this.font.forEach(function(pe,De){var ke=M.fontAtlas[De],Ee=ke.step,Ie=Math.floor(b.maxAtlasSize/Ee),Re=Math.min(Ie,ke.chars.length),Ne=Math.ceil(ke.chars.length/Re),ge=_(Re*Ee),we=_(Ne*Ee);ke.width=ge,ke.height=we,ke.rows=Ne,ke.cols=Re,ke.em&&ke.texture({data:s({canvas:b.atlasCanvas,font:ke.fontString,chars:ke.chars,shape:[ge,we],step:[Ee,Ee]})})})}if(y.align&&(this.align=y.align,this.alignOffset=this.textWidth.map(function(pe,De){var ke=Array.isArray(M.align)?M.align.length>1?M.align[De]:M.align[0]:M.align;if(typeof ke=="number")return ke;switch(ke){case"right":case"end":return-pe;case"center":case"centre":case"middle":return .5*-pe}return 0})),this.baseline==null&&y.baseline==null&&(y.baseline=0),y.baseline!=null&&(this.baseline=y.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(pe,De){var ke=(M.font[De]||M.font[0]).metrics,Ee=0;return Ee+=.5*ke.bottom,-1*(Ee+=typeof pe=="number"?pe-ke.baseline:-ke[pe])})),y.color!=null)if(y.color||(y.color="transparent"),typeof y.color!="string"&&isNaN(y.color)){var xe;if(typeof y.color[0]=="number"&&y.color.length>this.counts.length){var ve=y.color.length;xe=t.mallocUint8(ve);for(var ye=(y.color.subarray||y.color.slice).bind(y.color),me=0;me<ve;me+=4)xe.set(f(ye(me,me+4),"uint8"),me)}else{var Me=y.color.length;xe=t.mallocUint8(4*Me);for(var Ae=0;Ae<Me;Ae++)xe.set(f(y.color[Ae]||0,"uint8"),4*Ae)}this.color=xe}else this.color=f(y.color,"uint8");if(y.position||y.text||y.color||y.baseline||y.align||y.font||y.offset||y.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var ce=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(ce);for(var ae=0;ae<this.batch.length;ae++)this.batch[ae]={count:this.counts.length>1?this.counts[ae]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[ae]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*ae,4*ae+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[ae]:this.opacity,baseline:this.baselineOffset[ae]!=null?this.baselineOffset[ae]:this.baselineOffset[0],align:this.align?this.alignOffset[ae]!=null?this.alignOffset[ae]:this.alignOffset[0]:0,atlas:this.fontAtlas[ae]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*ae,2*ae+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]},b.prototype.destroy=function(){},b.prototype.kerning=!0,b.prototype.position={constant:new Float32Array(2)},b.prototype.translate=null,b.prototype.scale=null,b.prototype.font=null,b.prototype.text="",b.prototype.positionOffset=[0,0],b.prototype.opacity=1,b.prototype.color=new Uint8Array([0,0,0,255]),b.prototype.alignOffset=[0,0],b.maxAtlasSize=1024,b.atlasCanvas=document.createElement("canvas"),b.atlasContext=b.atlasCanvas.getContext("2d",{alpha:!1}),b.baseFontSize=64,b.fonts={},C.exports=b},55212:function(C,A,e){"use strict";var v=e(55616);function w(x){if(x.container)if(x.container==document.body)document.body.style.width||(x.canvas.width=x.width||x.pixelRatio*e.g.innerWidth),document.body.style.height||(x.canvas.height=x.height||x.pixelRatio*e.g.innerHeight);else{var f=x.container.getBoundingClientRect();x.canvas.width=x.width||f.right-f.left,x.canvas.height=x.height||f.bottom-f.top}}function n(x){return typeof x.getContext=="function"&&"width"in x&&"height"in x}function T(){var x=document.createElement("canvas");return x.style.position="absolute",x.style.top=0,x.style.left=0,x}C.exports=function(x){var f;if(x?typeof x=="string"&&(x={container:x}):x={},(x=n(x)||typeof(f=x).nodeName=="string"&&typeof f.appendChild=="function"&&typeof f.getBoundingClientRect=="function"?{container:x}:function(t){return typeof t.drawArrays=="function"||typeof t.drawElements=="function"}(x)?{gl:x}:v(x,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(x.pixelRatio=e.g.pixelRatio||1),x.gl)return x.gl;if(x.canvas&&(x.container=x.canvas.parentNode),x.container){if(typeof x.container=="string"){var s=document.querySelector(x.container);if(!s)throw Error("Element "+x.container+" is not found");x.container=s}n(x.container)?(x.canvas=x.container,x.container=x.canvas.parentNode):x.canvas||(x.canvas=T(),x.container.appendChild(x.canvas),w(x))}else if(!x.canvas){if(typeof document>"u")throw Error("Not DOM environment. Use headless-gl.");x.container=document.body||document.documentElement,x.canvas=T(),x.container.appendChild(x.canvas),w(x)}return x.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(t){try{x.gl=x.canvas.getContext(t,x.attrs)}catch{}return x.gl}),x.gl}},26444:function(C){C.exports=function(A){typeof A=="string"&&(A=[A]);for(var e=[].slice.call(arguments,1),v=[],w=0;w<A.length-1;w++)v.push(A[w],e[w]||"");return v.push(A[w]),v.join("")}},2304:function(C,A,e){"use strict";var v=e(53664)("%Object.getOwnPropertyDescriptor%",!0);if(v)try{v([],"length")}catch{v=null}C.exports=v},52264:function(C,A,e){"use strict";var v,w=e(24200);v=typeof e.g.matchMedia=="function"?!e.g.matchMedia("(hover: none)").matches:w,C.exports=v},89184:function(C,A,e){"use strict";var v=e(24200);C.exports=v&&function(){var w=!1;try{var n=Object.defineProperty({},"passive",{get:function(){w=!0}});window.addEventListener("test",null,n),window.removeEventListener("test",null,n)}catch{w=!1}return w}()},39640:function(C,A,e){"use strict";var v=e(53664)("%Object.defineProperty%",!0),w=function(){if(v)try{return v({},"a",{value:1}),!0}catch{return!1}return!1};w.hasArrayLengthDefineBug=function(){if(!w())return null;try{return v([],"length",{value:1}).length!==1}catch{return!0}},C.exports=w},69572:function(C){"use strict";var A={foo:{}},e=Object;C.exports=function(){return{__proto__:A}.foo===A.foo&&!({__proto__:null}instanceof e)}},71080:function(C,A,e){"use strict";var v=typeof Symbol<"u"&&Symbol,w=e(89320);C.exports=function(){return typeof v=="function"&&typeof Symbol=="function"&&typeof v("foo")=="symbol"&&typeof Symbol("bar")=="symbol"&&w()}},89320:function(C){"use strict";C.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var A={},e=Symbol("test"),v=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(v)!=="[object Symbol]")return!1;for(e in A[e]=42,A)return!1;if(typeof Object.keys=="function"&&Object.keys(A).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(A).length!==0)return!1;var w=Object.getOwnPropertySymbols(A);if(w.length!==1||w[0]!==e||!Object.prototype.propertyIsEnumerable.call(A,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var n=Object.getOwnPropertyDescriptor(A,e);if(n.value!==42||n.enumerable!==!0)return!1}return!0}},46672:function(C,A,e){"use strict";var v=e(89320);C.exports=function(){return v()&&!!Symbol.toStringTag}},92064:function(C,A,e){"use strict";var v=Function.prototype.call,w=Object.prototype.hasOwnProperty,n=e(8844);C.exports=n.call(v,w)},35984:function(C,A){A.read=function(e,v,w,n,T){var x,f,s=8*T-n-1,t=(1<<s)-1,o=t>>1,r=-7,i=w?T-1:0,a=w?-1:1,u=e[v+i];for(i+=a,x=u&(1<<-r)-1,u>>=-r,r+=s;r>0;x=256*x+e[v+i],i+=a,r-=8);for(f=x&(1<<-r)-1,x>>=-r,r+=n;r>0;f=256*f+e[v+i],i+=a,r-=8);if(x===0)x=1-o;else{if(x===t)return f?NaN:1/0*(u?-1:1);f+=Math.pow(2,n),x-=o}return(u?-1:1)*f*Math.pow(2,x-n)},A.write=function(e,v,w,n,T,x){var f,s,t,o=8*x-T-1,r=(1<<o)-1,i=r>>1,a=T===23?Math.pow(2,-24)-Math.pow(2,-77):0,u=n?0:x-1,l=n?1:-1,d=v<0||v===0&&1/v<0?1:0;for(v=Math.abs(v),isNaN(v)||v===1/0?(s=isNaN(v)?1:0,f=r):(f=Math.floor(Math.log(v)/Math.LN2),v*(t=Math.pow(2,-f))<1&&(f--,t*=2),(v+=f+i>=1?a/t:a*Math.pow(2,1-i))*t>=2&&(f++,t/=2),f+i>=r?(s=0,f=r):f+i>=1?(s=(v*t-1)*Math.pow(2,T),f+=i):(s=v*Math.pow(2,i-1)*Math.pow(2,T),f=0));T>=8;e[w+u]=255&s,u+=l,s/=256,T-=8);for(f=f<<T|s,o+=T;o>0;e[w+u]=255&f,u+=l,f/=256,o-=8);e[w+u-l]|=128*d}},6768:function(C){typeof Object.create=="function"?C.exports=function(A,e){e&&(A.super_=e,A.prototype=Object.create(e.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}))}:C.exports=function(A,e){if(e){A.super_=e;var v=function(){};v.prototype=e.prototype,A.prototype=new v,A.prototype.constructor=A}}},91148:function(C,A,e){"use strict";var v=e(46672)(),w=e(99676)("Object.prototype.toString"),n=function(f){return!(v&&f&&typeof f=="object"&&Symbol.toStringTag in f)&&w(f)==="[object Arguments]"},T=function(f){return!!n(f)||f!==null&&typeof f=="object"&&typeof f.length=="number"&&f.length>=0&&w(f)!=="[object Array]"&&w(f.callee)==="[object Function]"},x=function(){return n(arguments)}();n.isLegacyArguments=T,C.exports=x?n:T},24200:function(C){C.exports=!0},90720:function(C){"use strict";var A,e,v=Function.prototype.toString,w=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply;if(typeof w=="function"&&typeof Object.defineProperty=="function")try{A=Object.defineProperty({},"length",{get:function(){throw e}}),e={},w(function(){throw 42},null,A)}catch(i){i!==e&&(w=null)}else w=null;var n=/^\s*class\b/,T=function(i){try{var a=v.call(i);return n.test(a)}catch{return!1}},x=function(i){try{return!T(i)&&(v.call(i),!0)}catch{return!1}},f=Object.prototype.toString,s=typeof Symbol=="function"&&!!Symbol.toStringTag,t=!(0 in[,]),o=function(){return!1};if(typeof document=="object"){var r=document.all;f.call(r)===f.call(document.all)&&(o=function(i){if((t||!i)&&(i===void 0||typeof i=="object"))try{var a=f.call(i);return(a==="[object HTMLAllCollection]"||a==="[object HTML document.all class]"||a==="[object HTMLCollection]"||a==="[object Object]")&&i("")==null}catch{}return!1})}C.exports=w?function(i){if(o(i))return!0;if(!i||typeof i!="function"&&typeof i!="object")return!1;try{w(i,null,A)}catch(a){if(a!==e)return!1}return!T(i)&&x(i)}:function(i){if(o(i))return!0;if(!i||typeof i!="function"&&typeof i!="object")return!1;if(s)return x(i);if(T(i))return!1;var a=f.call(i);return!(a!=="[object Function]"&&a!=="[object GeneratorFunction]"&&!/^\[object HTML/.test(a))&&x(i)}},84420:function(C,A,e){"use strict";var v,w=Object.prototype.toString,n=Function.prototype.toString,T=/^\s*(?:function)?\*/,x=e(46672)(),f=Object.getPrototypeOf;C.exports=function(s){if(typeof s!="function")return!1;if(T.test(n.call(s)))return!0;if(!x)return w.call(s)==="[object GeneratorFunction]";if(!f)return!1;if(v===void 0){var t=function(){if(!x)return!1;try{return Function("return function*() {}")()}catch{}}();v=!!t&&f(t)}return f(s)===v}},96604:function(C){"use strict";C.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},85992:function(C){"use strict";C.exports=function(A){return A!=A}},1560:function(C,A,e){"use strict";var v=e(57916),w=e(81288),n=e(85992),T=e(57740),x=e(59736),f=v(T(),Number);w(f,{getPolyfill:T,implementation:n,shim:x}),C.exports=f},57740:function(C,A,e){"use strict";var v=e(85992);C.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:v}},59736:function(C,A,e){"use strict";var v=e(81288),w=e(57740);C.exports=function(){var n=w();return v(Number,{isNaN:n},{isNaN:function(){return Number.isNaN!==n}}),n}},18400:function(C){"use strict";C.exports=function(A){var e=typeof A;return A!==null&&(e==="object"||e==="function")}},58908:function(C){"use strict";var A=Object.prototype.toString;C.exports=function(e){var v;return A.call(e)==="[object Object]"&&((v=Object.getPrototypeOf(e))===null||v===Object.getPrototypeOf({}))}},94576:function(C){"use strict";C.exports=function(A){for(var e,v=A.length,w=0;w<v;w++)if(((e=A.charCodeAt(w))<9||e>13)&&e!==32&&e!==133&&e!==160&&e!==5760&&e!==6158&&(e<8192||e>8205)&&e!==8232&&e!==8233&&e!==8239&&e!==8287&&e!==8288&&e!==12288&&e!==65279)return!1;return!0}},53520:function(C){"use strict";C.exports=function(A){return typeof A=="string"&&(A=A.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(A)&&/[\dz]$/i.test(A)&&A.length>4))}},7728:function(C,A,e){"use strict";var v=e(46492),w=e(63436),n=e(99676),T=n("Object.prototype.toString"),x=e(46672)(),f=e(2304),s=typeof globalThis>"u"?e.g:globalThis,t=w(),o=n("Array.prototype.indexOf",!0)||function(u,l){for(var d=0;d<u.length;d+=1)if(u[d]===l)return d;return-1},r=n("String.prototype.slice"),i={},a=Object.getPrototypeOf;x&&f&&a&&v(t,function(u){var l=new s[u];if(Symbol.toStringTag in l){var d=a(l),c=f(d,Symbol.toStringTag);if(!c){var _=a(d);c=f(_,Symbol.toStringTag)}i[u]=c.get}}),C.exports=function(u){if(!u||typeof u!="object")return!1;if(!x||!(Symbol.toStringTag in u)){var l=r(T(u),8,-1);return o(t,l)>-1}return!!f&&function(d){var c=!1;return v(i,function(_,p){if(!c)try{c=_.call(d)===p}catch{}}),c}(u)}},76244:function(C){"use strict";C.exports=Math.log2||function(A){return Math.log(A)*Math.LOG2E}},62644:function(C,A,e){"use strict";C.exports=function(w,n){n||(n=w,w=window);var T=0,x=0,f=0,s={shift:!1,alt:!1,control:!1,meta:!1},t=!1;function o(g){var m=!1;return"altKey"in g&&(m=m||g.altKey!==s.alt,s.alt=!!g.altKey),"shiftKey"in g&&(m=m||g.shiftKey!==s.shift,s.shift=!!g.shiftKey),"ctrlKey"in g&&(m=m||g.ctrlKey!==s.control,s.control=!!g.ctrlKey),"metaKey"in g&&(m=m||g.metaKey!==s.meta,s.meta=!!g.metaKey),m}function r(g,m){var b=v.x(m),y=v.y(m);"buttons"in m&&(g=0|m.buttons),(g!==T||b!==x||y!==f||o(m))&&(T=0|g,x=b||0,f=y||0,n&&n(T,x,f,s))}function i(g){r(0,g)}function a(){(T||x||f||s.shift||s.alt||s.meta||s.control)&&(x=f=0,T=0,s.shift=s.alt=s.control=s.meta=!1,n&&n(0,0,0,s))}function u(g){o(g)&&n&&n(T,x,f,s)}function l(g){v.buttons(g)===0?r(0,g):r(T,g)}function d(g){r(T|v.buttons(g),g)}function c(g){r(T&~v.buttons(g),g)}function _(){t||(t=!0,w.addEventListener("mousemove",l),w.addEventListener("mousedown",d),w.addEventListener("mouseup",c),w.addEventListener("mouseleave",i),w.addEventListener("mouseenter",i),w.addEventListener("mouseout",i),w.addEventListener("mouseover",i),w.addEventListener("blur",a),w.addEventListener("keyup",u),w.addEventListener("keydown",u),w.addEventListener("keypress",u),w!==window&&(window.addEventListener("blur",a),window.addEventListener("keyup",u),window.addEventListener("keydown",u),window.addEventListener("keypress",u)))}_();var p={element:w};return Object.defineProperties(p,{enabled:{get:function(){return t},set:function(g){g?_():t&&(t=!1,w.removeEventListener("mousemove",l),w.removeEventListener("mousedown",d),w.removeEventListener("mouseup",c),w.removeEventListener("mouseleave",i),w.removeEventListener("mouseenter",i),w.removeEventListener("mouseout",i),w.removeEventListener("mouseover",i),w.removeEventListener("blur",a),w.removeEventListener("keyup",u),w.removeEventListener("keydown",u),w.removeEventListener("keypress",u),w!==window&&(window.removeEventListener("blur",a),window.removeEventListener("keyup",u),window.removeEventListener("keydown",u),window.removeEventListener("keypress",u)))},enumerable:!0},buttons:{get:function(){return T},enumerable:!0},x:{get:function(){return x},enumerable:!0},y:{get:function(){return f},enumerable:!0},mods:{get:function(){return s},enumerable:!0}}),p};var v=e(93784)},29128:function(C){var A={left:0,top:0};C.exports=function(e,v,w){v=v||e.currentTarget||e.srcElement,Array.isArray(w)||(w=[0,0]);var n,T=e.clientX||0,x=e.clientY||0,f=(n=v)===window||n===document||n===document.body?A:n.getBoundingClientRect();return w[0]=T-f.left,w[1]=x-f.top,w}},93784:function(C,A){"use strict";function e(v){return v.target||v.srcElement||window}A.buttons=function(v){if(typeof v=="object"){if("buttons"in v)return v.buttons;if("which"in v){if((w=v.which)===2)return 4;if(w===3)return 2;if(w>0)return 1<<w-1}else if("button"in v){var w;if((w=v.button)===1)return 4;if(w===2)return 2;if(w>=0)return 1<<w}}return 0},A.element=e,A.x=function(v){if(typeof v=="object"){if("offsetX"in v)return v.offsetX;var w=e(v).getBoundingClientRect();return v.clientX-w.left}return 0},A.y=function(v){if(typeof v=="object"){if("offsetY"in v)return v.offsetY;var w=e(v).getBoundingClientRect();return v.clientY-w.top}return 0}},97264:function(C,A,e){"use strict";var v=e(23464);C.exports=function(w,n,T){typeof w=="function"&&(T=!!n,n=w,w=window);var x=v("ex",w),f=function(s){T&&s.preventDefault();var t=s.deltaX||0,o=s.deltaY||0,r=s.deltaZ||0,i=1;switch(s.deltaMode){case 1:i=x;break;case 2:i=window.innerHeight}if(o*=i,r*=i,(t*=i)||o||r)return n(t,o,r,s)};return w.addEventListener("wheel",f),f}},88324:function(C,A,e){var v;(function(w,n,T){n[w]=n[w]||function(){"use strict";var x,f,s,t=Object.prototype.toString,o=typeof setImmediate<"u"?function(b){return setImmediate(b)}:setTimeout;try{Object.defineProperty({},"x",{}),x=function(b,y,M,h){return Object.defineProperty(b,y,{value:M,writable:!0,configurable:h!==!1})}}catch{x=function(y,M,h){return y[M]=h,y}}function r(b,y){s.add(b,y),f||(f=o(s.drain))}function i(b){var y,M=typeof b;return b==null||M!="object"&&M!="function"||(y=b.then),typeof y=="function"&&y}function a(){for(var b=0;b<this.chain.length;b++)u(this,this.state===1?this.chain[b].success:this.chain[b].failure,this.chain[b]);this.chain.length=0}function u(b,y,M){var h,E;try{y===!1?M.reject(b.msg):(h=y===!0?b.msg:y.call(void 0,b.msg))===M.promise?M.reject(TypeError("Promise-chain cycle")):(E=i(h))?E.call(h,M.resolve,M.reject):M.resolve(h)}catch(k){M.reject(k)}}function l(b){var y,M=this;if(!M.triggered){M.triggered=!0,M.def&&(M=M.def);try{(y=i(b))?r(function(){var h=new _(M);try{y.call(b,function(){l.apply(h,arguments)},function(){d.apply(h,arguments)})}catch(E){d.call(h,E)}}):(M.msg=b,M.state=1,M.chain.length>0&&r(a,M))}catch(h){d.call(new _(M),h)}}}function d(b){var y=this;y.triggered||(y.triggered=!0,y.def&&(y=y.def),y.msg=b,y.state=2,y.chain.length>0&&r(a,y))}function c(b,y,M,h){for(var E=0;E<y.length;E++)(function(k){b.resolve(y[k]).then(function(D){M(k,D)},h)})(E)}function _(b){this.def=b,this.triggered=!1}function p(b){this.promise=b,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function g(b){if(typeof b!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var y=new p(this);this.then=function(M,h){var E={success:typeof M!="function"||M,failure:typeof h=="function"&&h};return E.promise=new this.constructor(function(k,D){if(typeof k!="function"||typeof D!="function")throw TypeError("Not a function");E.resolve=k,E.reject=D}),y.chain.push(E),y.state!==0&&r(a,y),E.promise},this.catch=function(M){return this.then(void 0,M)};try{b.call(void 0,function(M){l.call(y,M)},function(M){d.call(y,M)})}catch(M){d.call(y,M)}}s=function(){var b,y,M;function h(E,k){this.fn=E,this.self=k,this.next=void 0}return{add:function(E,k){M=new h(E,k),y?y.next=M:b=M,y=M,M=void 0},drain:function(){var E=b;for(b=y=f=void 0;E;)E.fn.call(E.self),E=E.next}}}();var m=x({},"constructor",g,!1);return g.prototype=m,x(m,"__NPO__",0,!1),x(g,"resolve",function(b){return b&&typeof b=="object"&&b.__NPO__===1?b:new this(function(y,M){if(typeof y!="function"||typeof M!="function")throw TypeError("Not a function");y(b)})}),x(g,"reject",function(b){return new this(function(y,M){if(typeof y!="function"||typeof M!="function")throw TypeError("Not a function");M(b)})}),x(g,"all",function(b){var y=this;return t.call(b)!="[object Array]"?y.reject(TypeError("Not an array")):b.length===0?y.resolve([]):new y(function(M,h){if(typeof M!="function"||typeof h!="function")throw TypeError("Not a function");var E=b.length,k=Array(E),D=0;c(y,b,function(P,L){k[P]=L,++D===E&&M(k)},h)})}),x(g,"race",function(b){var y=this;return t.call(b)!="[object Array]"?y.reject(TypeError("Not an array")):new y(function(M,h){if(typeof M!="function"||typeof h!="function")throw TypeError("Not a function");c(y,b,function(E,k){M(k)},h)})}),g}(),C.exports?C.exports=n[w]:(v=(function(){return n[w]}).call(A,e,A,C))===void 0||(C.exports=v)})("Promise",e.g!==void 0?e.g:this)},48816:function(C){var A=Math.PI,e=x(120);function v(f,s,t,o){return["C",f,s,t,o,t,o]}function w(f,s,t,o,r,i){return["C",f/3+.6666666666666666*t,s/3+.6666666666666666*o,r/3+.6666666666666666*t,i/3+.6666666666666666*o,r,i]}function n(f,s,t,o,r,i,a,u,l,d){if(d)E=d[0],k=d[1],M=d[2],h=d[3];else{var c=T(f,s,-r);f=c.x,s=c.y;var _=(f-(u=(c=T(u,l,-r)).x))/2,p=(s-(l=c.y))/2,g=_*_/(t*t)+p*p/(o*o);g>1&&(t*=g=Math.sqrt(g),o*=g);var m=t*t,b=o*o,y=(i==a?-1:1)*Math.sqrt(Math.abs((m*b-m*p*p-b*_*_)/(m*p*p+b*_*_)));y==1/0&&(y=1);var M=y*t*p/o+(f+u)/2,h=y*-o*_/t+(s+l)/2,E=Math.asin(((s-h)/o).toFixed(9)),k=Math.asin(((l-h)/o).toFixed(9));(E=f<M?A-E:E)<0&&(E=2*A+E),(k=u<M?A-k:k)<0&&(k=2*A+k),a&&E>k&&(E-=2*A),!a&&k>E&&(k-=2*A)}if(Math.abs(k-E)>e){var D=k,P=u,L=l;k=E+e*(a&&k>E?1:-1);var O=n(u=M+t*Math.cos(k),l=h+o*Math.sin(k),t,o,r,0,a,P,L,[k,D,M,h])}var N=Math.tan((k-E)/4),V=4/3*t*N,F=4/3*o*N,j=[2*f-(f+V*Math.sin(E)),2*s-(s-F*Math.cos(E)),u+V*Math.sin(k),l-F*Math.cos(k),u,l];if(d)return j;O&&(j=j.concat(O));for(var Z=0;Z<j.length;){var z=T(j[Z],j[Z+1],r);j[Z++]=z.x,j[Z++]=z.y}return j}function T(f,s,t){return{x:f*Math.cos(t)-s*Math.sin(t),y:f*Math.sin(t)+s*Math.cos(t)}}function x(f){return f*(A/180)}C.exports=function(f){for(var s,t=[],o=0,r=0,i=0,a=0,u=null,l=null,d=0,c=0,_=0,p=f.length;_<p;_++){var g=f[_],m=g[0];switch(m){case"M":i=g[1],a=g[2];break;case"A":(g=n(d,c,g[1],g[2],x(g[3]),g[4],g[5],g[6],g[7])).unshift("C"),g.length>7&&(t.push(g.splice(0,7)),g.unshift("C"));break;case"S":var b=d,y=c;s!="C"&&s!="S"||(b+=b-o,y+=y-r),g=["C",b,y,g[1],g[2],g[3],g[4]];break;case"T":s=="Q"||s=="T"?(u=2*d-u,l=2*c-l):(u=d,l=c),g=w(d,c,u,l,g[1],g[2]);break;case"Q":u=g[1],l=g[2],g=w(d,c,g[1],g[2],g[3],g[4]);break;case"L":g=v(d,c,g[1],g[2]);break;case"H":g=v(d,c,g[1],c);break;case"V":g=v(d,c,d,g[1]);break;case"Z":g=v(d,c,i,a)}s=m,d=g[g.length-2],c=g[g.length-1],g.length>4?(o=g[g.length-4],r=g[g.length-3]):(o=d,r=c),t.push(g)}return t}},50896:function(C){"use strict";var A=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;C.exports=function(){try{if(!Object.assign)return!1;var w=new String("abc");if(w[5]="de",Object.getOwnPropertyNames(w)[0]==="5")return!1;for(var n={},T=0;T<10;T++)n["_"+String.fromCharCode(T)]=T;if(Object.getOwnPropertyNames(n).map(function(f){return n[f]}).join("")!=="0123456789")return!1;var x={};return"abcdefghijklmnopqrst".split("").forEach(function(f){x[f]=f}),Object.keys(Object.assign({},x)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(w,n){for(var T,x,f=function(r){if(r==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}(w),s=1;s<arguments.length;s++){for(var t in T=Object(arguments[s]))e.call(T,t)&&(f[t]=T[t]);if(A){x=A(T);for(var o=0;o<x.length;o++)v.call(T,x[o])&&(f[x[o]]=T[x[o]])}}return f}},76835:function(C){"use strict";var A=function(e){return e!=e};C.exports=function(e,v){return e===0&&v===0?1/e==1/v:e===v||!(!A(e)||!A(v))}},39896:function(C,A,e){"use strict";var v=e(81288),w=e(57916),n=e(76835),T=e(66148),x=e(16408),f=w(T(),Object);v(f,{getPolyfill:T,implementation:n,shim:x}),C.exports=f},66148:function(C,A,e){"use strict";var v=e(76835);C.exports=function(){return typeof Object.is=="function"?Object.is:v}},16408:function(C,A,e){"use strict";var v=e(66148),w=e(81288);C.exports=function(){var n=v();return w(Object,{is:n},{is:function(){return Object.is!==n}}),n}},32764:function(C,A,e){"use strict";var v;if(!Object.keys){var w=Object.prototype.hasOwnProperty,n=Object.prototype.toString,T=e(97344),x=Object.prototype.propertyIsEnumerable,f=!x.call({toString:null},"toString"),s=x.call(function(){},"prototype"),t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],o=function(a){var u=a.constructor;return u&&u.prototype===a},r={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},i=function(){if(typeof window>"u")return!1;for(var a in window)try{if(!r["$"+a]&&w.call(window,a)&&window[a]!==null&&typeof window[a]=="object")try{o(window[a])}catch{return!0}}catch{return!0}return!1}();v=function(a){var u=a!==null&&typeof a=="object",l=n.call(a)==="[object Function]",d=T(a),c=u&&n.call(a)==="[object String]",_=[];if(!u&&!l&&!d)throw new TypeError("Object.keys called on a non-object");var p=s&&l;if(c&&a.length>0&&!w.call(a,0))for(var g=0;g<a.length;++g)_.push(String(g));if(d&&a.length>0)for(var m=0;m<a.length;++m)_.push(String(m));else for(var b in a)p&&b==="prototype"||!w.call(a,b)||_.push(String(b));if(f)for(var y=function(h){if(typeof window>"u"||!i)return o(h);try{return o(h)}catch{return!1}}(a),M=0;M<t.length;++M)y&&t[M]==="constructor"||!w.call(a,t[M])||_.push(t[M]);return _}}C.exports=v},41820:function(C,A,e){"use strict";var v=Array.prototype.slice,w=e(97344),n=Object.keys,T=n?function(f){return n(f)}:e(32764),x=Object.keys;T.shim=function(){if(Object.keys){var f=function(){var s=Object.keys(arguments);return s&&s.length===arguments.length}(1,2);f||(Object.keys=function(s){return w(s)?x(v.call(s)):x(s)})}else Object.keys=T;return Object.keys||T},C.exports=T},97344:function(C){"use strict";var A=Object.prototype.toString;C.exports=function(e){var v=A.call(e),w=v==="[object Arguments]";return w||(w=v!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&A.call(e.callee)==="[object Function]"),w}},32868:function(C){"use strict";function A(w,n){if(typeof w!="string")return[w];var T=[w];typeof n=="string"||Array.isArray(n)?n={brackets:n}:n||(n={});var x=n.brackets?Array.isArray(n.brackets)?n.brackets:[n.brackets]:["{}","[]","()"],f=n.escape||"___",s=!!n.flat;x.forEach(function(o){var r=new RegExp(["\\",o[0],"[^\\",o[0],"\\",o[1],"]*\\",o[1]].join("")),i=[];function a(u,l,d){var c=T.push(u.slice(o[0].length,-o[1].length))-1;return i.push(c),f+c+f}T.forEach(function(u,l){for(var d,c=0;u!=d;)if(d=u,u=u.replace(r,a),c++>1e4)throw Error("References have circular dependency. Please, check them.");T[l]=u}),i=i.reverse(),T=T.map(function(u){return i.forEach(function(l){u=u.replace(new RegExp("(\\"+f+l+"\\"+f+")","g"),o[0]+"$1"+o[1])}),u})});var t=new RegExp("\\"+f+"([0-9]+)\\"+f);return s?T:function o(r,i,a){for(var u,l=[],d=0;u=t.exec(r);){if(d++>1e4)throw Error("Circular references in parenthesis");l.push(r.slice(0,u.index)),l.push(o(i[u[1]],i)),r=r.slice(u.index+u[0].length)}return l.push(r),l}(T[0],T)}function e(w,n){if(n&&n.flat){var T,x=n&&n.escape||"___",f=w[0];if(!f)return"";for(var s=new RegExp("\\"+x+"([0-9]+)\\"+x),t=0;f!=T;){if(t++>1e4)throw Error("Circular references in "+w);T=f,f=f.replace(s,o)}return f}return w.reduce(function r(i,a){return Array.isArray(a)&&(a=a.reduce(r,"")),i+a},"");function o(r,i){if(w[i]==null)throw Error("Reference "+i+"is undefined");return w[i]}}function v(w,n){return Array.isArray(w)?e(w,n):A(w,n)}v.parse=A,v.stringify=e,C.exports=v},51160:function(C,A,e){"use strict";var v=e(55616);C.exports=function(w){var n;return arguments.length>1&&(w=arguments),typeof w=="string"?w=w.split(/\s/).map(parseFloat):typeof w=="number"&&(w=[w]),w.length&&typeof w[0]=="number"?n=w.length===1?{width:w[0],height:w[0],x:0,y:0}:w.length===2?{width:w[0],height:w[1],x:0,y:0}:{x:w[0],y:w[1],width:w[2]-w[0]||0,height:w[3]-w[1]||0}:w&&(n={x:(w=v(w,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:w.top||0},w.width==null?w.right?n.width=w.right-n.x:n.width=0:n.width=w.width,w.height==null?w.bottom?n.height=w.bottom-n.y:n.height=0:n.height=w.height),n}},21984:function(C){C.exports=function(w){var n=[];return w.replace(e,function(T,x,f){var s=x.toLowerCase();for(f=function(t){var o=t.match(v);return o?o.map(Number):[]}(f),s=="m"&&f.length>2&&(n.push([x].concat(f.splice(0,2))),s="l",x=x=="m"?"l":"L");;){if(f.length==A[s])return f.unshift(x),n.push(f);if(f.length<A[s])throw new Error("malformed path data");n.push([x].concat(f.splice(0,A[s])))}}),n};var A={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/gi,v=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},65819:function(C){C.exports=function(A,e){e||(e=[0,""]),A=String(A);var v=parseFloat(A,10);return e[0]=v,e[1]=A.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e}},41984:function(C,A,e){var v=e(4168);(function(){var w,n,T,x,f,s;typeof performance<"u"&&performance!==null&&performance.now?C.exports=function(){return performance.now()}:v!=null&&v.hrtime?(C.exports=function(){return(w()-f)/1e6},n=v.hrtime,x=(w=function(){var t;return 1e9*(t=n())[0]+t[1]})(),s=1e9*v.uptime(),f=x-s):Date.now?(C.exports=function(){return Date.now()-T},T=Date.now()):(C.exports=function(){return new Date().getTime()-T},T=new Date().getTime())}).call(this)},55616:function(C){"use strict";C.exports=function(v,w,n){var T,x,f={};if(typeof w=="string"&&(w=e(w)),Array.isArray(w)){var s={};for(x=0;x<w.length;x++)s[w[x]]=!0;w=s}for(T in w)w[T]=e(w[T]);var t={};for(T in w){var o=w[T];if(Array.isArray(o))for(x=0;x<o.length;x++){var r=o[x];if(n&&(t[r]=!0),r in v){if(f[T]=v[r],n)for(var i=x;i<o.length;i++)t[o[i]]=!0;break}}else T in v&&(w[T]&&(f[T]=v[T]),n&&(t[T]=!0))}if(n)for(T in v)t[T]||(f[T]=v[T]);return f};var A={};function e(v){return A[v]?A[v]:(typeof v=="string"&&(v=A[v]=v.split(/\s*,\s*|\s+/)),v)}},61456:function(C){C.exports=function(A,e,v,w){var n=A[0],T=A[1],x=!1;v===void 0&&(v=0),w===void 0&&(w=e.length);for(var f=w-v,s=0,t=f-1;s<f;t=s++){var o=e[s+v][0],r=e[s+v][1],i=e[t+v][0],a=e[t+v][1];r>T!=a>T&&n<(i-o)*(T-r)/(a-r)+o&&(x=!x)}return x}},14756:function(C,A,e){var v,w=e(7688),n=e(28648),T=e(72200),x=e(11403),f=e(82368),s=e(17792),t=!1,o=n();function r(i,a,u){var l=v.segments(i),d=v.segments(a),c=u(v.combine(l,d));return v.polygon(c)}v={buildLog:function(i){return i===!0?t=w():i===!1&&(t=!1),t!==!1&&t.list},epsilon:function(i){return o.epsilon(i)},segments:function(i){var a=T(!0,o,t);return i.regions.forEach(a.addRegion),{segments:a.calculate(i.inverted),inverted:i.inverted}},combine:function(i,a){return{combined:T(!1,o,t).calculate(i.segments,i.inverted,a.segments,a.inverted),inverted1:i.inverted,inverted2:a.inverted}},selectUnion:function(i){return{segments:f.union(i.combined,t),inverted:i.inverted1||i.inverted2}},selectIntersect:function(i){return{segments:f.intersect(i.combined,t),inverted:i.inverted1&&i.inverted2}},selectDifference:function(i){return{segments:f.difference(i.combined,t),inverted:i.inverted1&&!i.inverted2}},selectDifferenceRev:function(i){return{segments:f.differenceRev(i.combined,t),inverted:!i.inverted1&&i.inverted2}},selectXor:function(i){return{segments:f.xor(i.combined,t),inverted:i.inverted1!==i.inverted2}},polygon:function(i){return{regions:x(i.segments,o,t),inverted:i.inverted}},polygonFromGeoJSON:function(i){return s.toPolygon(v,i)},polygonToGeoJSON:function(i){return s.fromPolygon(v,o,i)},union:function(i,a){return r(i,a,v.selectUnion)},intersect:function(i,a){return r(i,a,v.selectIntersect)},difference:function(i,a){return r(i,a,v.selectDifference)},differenceRev:function(i,a){return r(i,a,v.selectDifferenceRev)},xor:function(i,a){return r(i,a,v.selectXor)}},typeof window=="object"&&(window.PolyBool=v),C.exports=v},7688:function(C){C.exports=function(){var A,e=0,v=!1;function w(n,T){return A.list.push({type:n,data:T?JSON.parse(JSON.stringify(T)):void 0}),A}return A={list:[],segmentId:function(){return e++},checkIntersection:function(n,T){return w("check",{seg1:n,seg2:T})},segmentChop:function(n,T){return w("div_seg",{seg:n,pt:T}),w("chop",{seg:n,pt:T})},statusRemove:function(n){return w("pop_seg",{seg:n})},segmentUpdate:function(n){return w("seg_update",{seg:n})},segmentNew:function(n,T){return w("new_seg",{seg:n,primary:T})},segmentRemove:function(n){return w("rem_seg",{seg:n})},tempStatus:function(n,T,x){return w("temp_status",{seg:n,above:T,below:x})},rewind:function(n){return w("rewind",{seg:n})},status:function(n,T,x){return w("status",{seg:n,above:T,below:x})},vert:function(n){return n===v?A:(v=n,w("vert",{x:n}))},log:function(n){return typeof n!="string"&&(n=JSON.stringify(n,!1,"  ")),w("log",{txt:n})},reset:function(){return w("reset")},selected:function(n){return w("selected",{segs:n})},chainStart:function(n){return w("chain_start",{seg:n})},chainRemoveHead:function(n,T){return w("chain_rem_head",{index:n,pt:T})},chainRemoveTail:function(n,T){return w("chain_rem_tail",{index:n,pt:T})},chainNew:function(n,T){return w("chain_new",{pt1:n,pt2:T})},chainMatch:function(n){return w("chain_match",{index:n})},chainClose:function(n){return w("chain_close",{index:n})},chainAddHead:function(n,T){return w("chain_add_head",{index:n,pt:T})},chainAddTail:function(n,T){return w("chain_add_tail",{index:n,pt:T})},chainConnect:function(n,T){return w("chain_con",{index1:n,index2:T})},chainReverse:function(n){return w("chain_rev",{index:n})},chainJoin:function(n,T){return w("chain_join",{index1:n,index2:T})},done:function(){return w("done")}}}},28648:function(C){C.exports=function(A){typeof A!="number"&&(A=1e-10);var e={epsilon:function(v){return typeof v=="number"&&(A=v),A},pointAboveOrOnLine:function(v,w,n){var T=w[0],x=w[1],f=n[0],s=n[1],t=v[0];return(f-T)*(v[1]-x)-(s-x)*(t-T)>=-A},pointBetween:function(v,w,n){var T=v[1]-w[1],x=n[0]-w[0],f=v[0]-w[0],s=n[1]-w[1],t=f*x+T*s;return!(t<A||t-(x*x+s*s)>-A)},pointsSameX:function(v,w){return Math.abs(v[0]-w[0])<A},pointsSameY:function(v,w){return Math.abs(v[1]-w[1])<A},pointsSame:function(v,w){return e.pointsSameX(v,w)&&e.pointsSameY(v,w)},pointsCompare:function(v,w){return e.pointsSameX(v,w)?e.pointsSameY(v,w)?0:v[1]<w[1]?-1:1:v[0]<w[0]?-1:1},pointsCollinear:function(v,w,n){var T=v[0]-w[0],x=v[1]-w[1],f=w[0]-n[0],s=w[1]-n[1];return Math.abs(T*s-f*x)<A},linesIntersect:function(v,w,n,T){var x=w[0]-v[0],f=w[1]-v[1],s=T[0]-n[0],t=T[1]-n[1],o=x*t-f*s;if(Math.abs(o)<A)return!1;var r=v[0]-n[0],i=v[1]-n[1],a=(s*i-t*r)/o,u=(x*i-f*r)/o,l={alongA:0,alongB:0,pt:[v[0]+a*x,v[1]+a*f]};return l.alongA=a<=-A?-2:a<A?-1:a-1<=-A?0:a-1<A?1:2,l.alongB=u<=-A?-2:u<A?-1:u-1<=-A?0:u-1<A?1:2,l},pointInsideRegion:function(v,w){for(var n=v[0],T=v[1],x=w[w.length-1][0],f=w[w.length-1][1],s=!1,t=0;t<w.length;t++){var o=w[t][0],r=w[t][1];r-T>A!=f-T>A&&(x-o)*(T-r)/(f-r)+o-n>A&&(s=!s),x=o,f=r}return s}};return e}},17792:function(C){var A={toPolygon:function(e,v){function w(x){if(x.length<=0)return e.segments({inverted:!1,regions:[]});function f(o){var r=o.slice(0,o.length-1);return e.segments({inverted:!1,regions:[r]})}for(var s=f(x[0]),t=1;t<x.length;t++)s=e.selectDifference(e.combine(s,f(x[t])));return s}if(v.type==="Polygon")return e.polygon(w(v.coordinates));if(v.type==="MultiPolygon"){for(var n=e.segments({inverted:!1,regions:[]}),T=0;T<v.coordinates.length;T++)n=e.selectUnion(e.combine(n,w(v.coordinates[T])));return e.polygon(n)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,v,w){function n(u,l){return v.pointInsideRegion([.5*(u[0][0]+u[1][0]),.5*(u[0][1]+u[1][1])],l)}function T(u){return{region:u,children:[]}}w=e.polygon(e.segments(w));var x=T(null);function f(u,l){for(var d=0;d<u.children.length;d++)if(n(l,(_=u.children[d]).region))return void f(_,l);var c=T(l);for(d=0;d<u.children.length;d++){var _;n((_=u.children[d]).region,l)&&(c.children.push(_),u.children.splice(d,1),d--)}u.children.push(c)}for(var s=0;s<w.regions.length;s++){var t=w.regions[s];t.length<3||f(x,t)}function o(u,l){for(var d=0,c=u[u.length-1][0],_=u[u.length-1][1],p=[],g=0;g<u.length;g++){var m=u[g][0],b=u[g][1];p.push([m,b]),d+=b*c-m*_,c=m,_=b}return d<0!==l&&p.reverse(),p.push([p[0][0],p[0][1]]),p}var r=[];function i(u){var l=[o(u.region,!1)];r.push(l);for(var d=0;d<u.children.length;d++)l.push(a(u.children[d]))}function a(u){for(var l=0;l<u.children.length;l++)i(u.children[l]);return o(u.region,!0)}for(s=0;s<x.children.length;s++)i(x.children[s]);return r.length<=0?{type:"Polygon",coordinates:[]}:r.length==1?{type:"Polygon",coordinates:r[0]}:{type:"MultiPolygon",coordinates:r}}};C.exports=A},72200:function(C,A,e){var v=e(48088);C.exports=function(w,n,T){function x(i,a,u){return{id:T?T.segmentId():-1,start:i,end:a,myFill:{above:u.myFill.above,below:u.myFill.below},otherFill:null}}var f=v.create();function s(i,a){f.insertBefore(i,function(u){return l=i.isStart,d=i.pt,c=a,_=u.isStart,p=u.pt,g=u.other.pt,((m=n.pointsCompare(d,p))!==0?m:n.pointsSame(c,g)?0:l!==_?l?1:-1:n.pointAboveOrOnLine(c,_?p:g,_?g:p)?1:-1)<0;var l,d,c,_,p,g,m})}function t(i,a){var u=function(l,d){var c=v.node({isStart:!0,pt:l.start,seg:l,primary:d,other:null,status:null});return s(c,l.end),c}(i,a);return function(l,d,c){var _=v.node({isStart:!1,pt:d.end,seg:d,primary:c,other:l,status:null});l.other=_,s(_,l.pt)}(u,i,a),u}function o(i,a){var u=x(a,i.seg.end,i.seg);return function(l,d){T&&T.segmentChop(l.seg,d),l.other.remove(),l.seg.end=d,l.other.pt=d,s(l.other,l.pt)}(i,a),t(u,i.primary)}function r(i,a){var u=v.create();function l(D){return u.findTransition(function(P){var L,O,N,V,F,j;return L=D,O=P.ev,N=L.seg.start,V=L.seg.end,F=O.seg.start,j=O.seg.end,(n.pointsCollinear(N,F,j)?n.pointsCollinear(V,F,j)||n.pointAboveOrOnLine(V,F,j)?1:-1:n.pointAboveOrOnLine(N,F,j)?1:-1)>0})}function d(D,P){var L=D.seg,O=P.seg,N=L.start,V=L.end,F=O.start,j=O.end;T&&T.checkIntersection(L,O);var Z=n.linesIntersect(N,V,F,j);if(Z===!1){if(!n.pointsCollinear(N,V,F)||n.pointsSame(N,j)||n.pointsSame(V,F))return!1;var z=n.pointsSame(N,F),H=n.pointsSame(V,j);if(z&&H)return P;var U=!z&&n.pointBetween(N,F,j),re=!H&&n.pointBetween(V,F,j);if(z)return re?o(P,V):o(D,j),P;U&&(H||(re?o(P,V):o(D,j)),o(P,N))}else Z.alongA===0&&(Z.alongB===-1?o(D,F):Z.alongB===0?o(D,Z.pt):Z.alongB===1&&o(D,j)),Z.alongB===0&&(Z.alongA===-1?o(P,N):Z.alongA===0?o(P,Z.pt):Z.alongA===1&&o(P,V));return!1}for(var c=[];!f.isEmpty();){var _=f.getHead();if(T&&T.vert(_.pt[0]),_.isStart){let D=function(){if(g){var P=d(_,g);if(P)return P}return!!m&&d(_,m)};var k=D;T&&T.segmentNew(_.seg,_.primary);var p=l(_),g=p.before?p.before.ev:null,m=p.after?p.after.ev:null;T&&T.tempStatus(_.seg,!!g&&g.seg,!!m&&m.seg);var b,y,M=D();if(M&&(w?(y=_.seg.myFill.below===null||_.seg.myFill.above!==_.seg.myFill.below)&&(M.seg.myFill.above=!M.seg.myFill.above):M.seg.otherFill=_.seg.myFill,T&&T.segmentUpdate(M.seg),_.other.remove(),_.remove()),f.getHead()!==_){T&&T.rewind(_.seg);continue}w?(y=_.seg.myFill.below===null||_.seg.myFill.above!==_.seg.myFill.below,_.seg.myFill.below=m?m.seg.myFill.above:i,_.seg.myFill.above=y?!_.seg.myFill.below:_.seg.myFill.below):_.seg.otherFill===null&&(b=m?_.primary===m.primary?m.seg.otherFill.above:m.seg.myFill.above:_.primary?a:i,_.seg.otherFill={above:b,below:b}),T&&T.status(_.seg,!!g&&g.seg,!!m&&m.seg),_.other.status=p.insert(v.node({ev:_}))}else{var h=_.status;if(h===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(u.exists(h.prev)&&u.exists(h.next)&&d(h.prev.ev,h.next.ev),T&&T.statusRemove(h.ev.seg),h.remove(),!_.primary){var E=_.seg.myFill;_.seg.myFill=_.seg.otherFill,_.seg.otherFill=E}c.push(_.seg)}f.getHead().remove()}return T&&T.done(),c}return w?{addRegion:function(i){for(var a,u,l,d=i[i.length-1],c=0;c<i.length;c++){a=d,d=i[c];var _=n.pointsCompare(a,d);_!==0&&t((u=_<0?a:d,l=_<0?d:a,{id:T?T.segmentId():-1,start:u,end:l,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(i){return r(i,!1)}}:{calculate:function(i,a,u,l){return i.forEach(function(d){t(x(d.start,d.end,d),!0)}),u.forEach(function(d){t(x(d.start,d.end,d),!1)}),r(a,l)}}}},48088:function(C){C.exports={create:function(){var A={root:{root:!0,next:null},exists:function(e){return e!==null&&e!==A.root},isEmpty:function(){return A.root.next===null},getHead:function(){return A.root.next},insertBefore:function(e,v){for(var w=A.root,n=A.root.next;n!==null;){if(v(n))return e.prev=n.prev,e.next=n,n.prev.next=e,void(n.prev=e);w=n,n=n.next}w.next=e,e.prev=w,e.next=null},findTransition:function(e){for(var v=A.root,w=A.root.next;w!==null&&!e(w);)v=w,w=w.next;return{before:v===A.root?null:v,after:w,insert:function(n){return n.prev=v,n.next=w,v.next=n,w!==null&&(w.prev=n),n}}}};return A},node:function(A){return A.prev=null,A.next=null,A.remove=function(){A.prev.next=A.next,A.next&&(A.next.prev=A.prev),A.prev=null,A.next=null},A}}},11403:function(C){C.exports=function(A,e,v){var w=[],n=[];return A.forEach(function(T){var x=T.start,f=T.end;if(e.pointsSame(x,f))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{v&&v.chainStart(T);for(var s={index:0,matches_head:!1,matches_pt1:!1},t={index:0,matches_head:!1,matches_pt1:!1},o=s,r=0;r<w.length;r++){var i=(c=w[r])[0],a=(c[1],c[c.length-1]);if(c[c.length-2],e.pointsSame(i,x)){if(h(r,!0,!0))break}else if(e.pointsSame(i,f)){if(h(r,!0,!1))break}else if(e.pointsSame(a,x)){if(h(r,!1,!0))break}else if(e.pointsSame(a,f)&&h(r,!1,!1))break}if(o===s)return w.push([x,f]),void(v&&v.chainNew(x,f));if(o===t){v&&v.chainMatch(s.index);var u=s.index,l=s.matches_pt1?f:x,d=s.matches_head,c=w[u],_=d?c[0]:c[c.length-1],p=d?c[1]:c[c.length-2],g=d?c[c.length-1]:c[0],m=d?c[c.length-2]:c[1];return e.pointsCollinear(p,_,l)&&(d?(v&&v.chainRemoveHead(s.index,l),c.shift()):(v&&v.chainRemoveTail(s.index,l),c.pop()),_=p),e.pointsSame(g,l)?(w.splice(u,1),e.pointsCollinear(m,g,_)&&(d?(v&&v.chainRemoveTail(s.index,_),c.pop()):(v&&v.chainRemoveHead(s.index,_),c.shift())),v&&v.chainClose(s.index),void n.push(c)):void(d?(v&&v.chainAddHead(s.index,l),c.unshift(l)):(v&&v.chainAddTail(s.index,l),c.push(l)))}var b=s.index,y=t.index;v&&v.chainConnect(b,y);var M=w[b].length<w[y].length;s.matches_head?t.matches_head?M?(E(b),k(b,y)):(E(y),k(y,b)):k(y,b):t.matches_head?k(b,y):M?(E(b),k(y,b)):(E(y),k(b,y))}function h(D,P,L){return o.index=D,o.matches_head=P,o.matches_pt1=L,o===s?(o=t,!1):(o=null,!0)}function E(D){v&&v.chainReverse(D),w[D].reverse()}function k(D,P){var L=w[D],O=w[P],N=L[L.length-1],V=L[L.length-2],F=O[0],j=O[1];e.pointsCollinear(V,N,F)&&(v&&v.chainRemoveTail(D,N),L.pop(),N=V),e.pointsCollinear(N,F,j)&&(v&&v.chainRemoveHead(P,F),O.shift()),v&&v.chainJoin(D,P),w[D]=L.concat(O),w.splice(P,1)}}),n}},82368:function(C){function A(v,w,n){var T=[];return v.forEach(function(x){var f=(x.myFill.above?8:0)+(x.myFill.below?4:0)+(x.otherFill&&x.otherFill.above?2:0)+(x.otherFill&&x.otherFill.below?1:0);w[f]!==0&&T.push({id:n?n.segmentId():-1,start:x.start,end:x.end,myFill:{above:w[f]===1,below:w[f]===2},otherFill:null})}),n&&n.selected(T),T}var e={union:function(v,w){return A(v,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],w)},intersect:function(v,w){return A(v,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],w)},difference:function(v,w){return A(v,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],w)},differenceRev:function(v,w){return A(v,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],w)},xor:function(v,w){return A(v,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],w)}};C.exports=e},9696:function(C,A,e){"use strict";var v=e(29936).Transform,w=e(55619);function n(){v.call(this,{readableObjectMode:!0})}function T(x,f,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name=this.constructor.name,this.message=x,f&&(this.code=f),s&&(this.statusCode=s)}n.prototype=Object.create(v.prototype),n.prototype.constructor=n,w(n.prototype),A.gS=function(x,f,s){for(var t=f,o=0;o<s.length;)if(x[t++]!==s[o++])return!1;return!0},A.wR=function(x,f){var s=[],t=0;if(f&&f==="hex")for(;t<x.length;)s.push(parseInt(x.slice(t,t+2),16)),t+=2;else for(;t<x.length;t++)s.push(255&x.charCodeAt(t));return s},A.Bz=function(x,f){return x[f]|x[f+1]<<8},A.eW=function(x,f){return x[f+1]|x[f]<<8},A.st=function(x,f){return x[f]|x[f+1]<<8|x[f+2]<<16|16777216*x[f+3]},A.eI=function(x,f){return x[f+3]|x[f+2]<<8|x[f+1]<<16|16777216*x[f]},T.prototype=Object.create(Error.prototype),T.prototype.constructor=T},11688:function(C){"use strict";function A(w,n){var T=new Error(w);return T.code=n,T}function e(w){try{return decodeURIComponent(escape(w))}catch{return w}}function v(w,n,T){this.input=w.subarray(n,T),this.start=n;var x=String.fromCharCode.apply(null,this.input.subarray(0,4));if(x!=="II*\0"&&x!=="MM\0*")throw A("invalid TIFF signature","EBADDATA");this.big_endian=x[0]==="M"}v.prototype.each=function(w){this.aborted=!1;var n=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:n}];this.ifds_to_read.length>0&&!this.aborted;){var T=this.ifds_to_read.shift();T.offset&&this.scan_ifd(T.id,T.offset,w)}},v.prototype.read_uint16=function(w){var n=this.input;if(w+2>n.length)throw A("unexpected EOF","EBADDATA");return this.big_endian?256*n[w]+n[w+1]:n[w]+256*n[w+1]},v.prototype.read_uint32=function(w){var n=this.input;if(w+4>n.length)throw A("unexpected EOF","EBADDATA");return this.big_endian?16777216*n[w]+65536*n[w+1]+256*n[w+2]+n[w+3]:n[w]+256*n[w+1]+65536*n[w+2]+16777216*n[w+3]},v.prototype.is_subifd_link=function(w,n){return w===0&&n===34665||w===0&&n===34853||w===34665&&n===40965},v.prototype.exif_format_length=function(w){switch(w){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},v.prototype.exif_format_read=function(w,n){var T;switch(w){case 1:case 2:return this.input[n];case 6:return(T=this.input[n])|33554430*(128&T);case 3:return this.read_uint16(n);case 8:return(T=this.read_uint16(n))|131070*(32768&T);case 4:return this.read_uint32(n);case 9:return 0|this.read_uint32(n);default:return null}},v.prototype.scan_ifd=function(w,n,T){var x=this.read_uint16(n);n+=2;for(var f=0;f<x;f++){var s=this.read_uint16(n),t=this.read_uint16(n+2),o=this.read_uint32(n+4),r=this.exif_format_length(t),i=o*r,a=i<=4?n+8:this.read_uint32(n+8),u=!1;if(a+i>this.input.length)throw A("unexpected EOF","EBADDATA");for(var l=[],d=a,c=0;c<o;c++,d+=r){var _=this.exif_format_read(t,d);if(_===null){l=null;break}l.push(_)}if(Array.isArray(l)&&t===2&&(l=e(String.fromCharCode.apply(null,l)))&&l[l.length-1]==="\0"&&(l=l.slice(0,-1)),this.is_subifd_link(w,s)&&Array.isArray(l)&&Number.isInteger(l[0])&&l[0]>0&&(this.ifds_to_read.push({id:s,offset:l[0]}),u=!0),T({is_big_endian:this.big_endian,ifd:w,tag:s,format:t,count:o,entry_offset:n+this.start,data_length:i,data_offset:a+this.start,value:l,is_subifd_link:u})===!1)return void(this.aborted=!0);n+=12}w===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(n)})},C.exports.ExifParser=v,C.exports.get_orientation=function(w){var n=0;try{return new v(w,0,w.length).each(function(T){if(T.ifd===0&&T.tag===274&&Array.isArray(T.value))return n=T.value[0],!1}),n}catch{return-1}}},44600:function(C,A,e){"use strict";var v=e(9696).eW,w=e(9696).eI;function n(o,r){if(o.length<4+r)return null;var i=w(o,r);return o.length<i+r||i<8?null:{boxtype:String.fromCharCode.apply(null,o.slice(r+4,r+8)),data:o.slice(r+8,r+i),end:r+i}}function T(o,r){for(var i=0;;){var a=n(o,i);if(!a)break;switch(a.boxtype){case"ispe":r.sizes.push({width:w(a.data,4),height:w(a.data,8)});break;case"irot":r.transforms.push({type:"irot",value:3&a.data[0]});break;case"imir":r.transforms.push({type:"imir",value:1&a.data[0]})}i=a.end}}function x(o,r,i){for(var a=0,u=0;u<i;u++)a=256*a+(o[r+u]||0);return a}function f(o,r){for(var i=o[4]>>4&15,a=15&o[4],u=o[5]>>4&15,l=v(o,6),d=8,c=0;c<l;c++){var _=v(o,d),p=v(o,d+=2),g=x(o,d+=2,u),m=v(o,d+=u);if(d+=2,p===0&&m===1){var b=x(o,d,i),y=x(o,d+i,a);r.item_loc[_]={length:y,offset:b+g}}d+=m*(i+a)}}function s(o,r){for(var i=v(o,4),a=6,u=0;u<i;u++){var l=n(o,a);if(!l)break;if(l.boxtype==="infe"){for(var d=v(l.data,4),c="",_=8;_<l.data.length&&l.data[_];_++)c+=String.fromCharCode(l.data[_]);r.item_inf[c]=d}a=l.end}}function t(o,r){for(var i=0;;){var a=n(o,i);if(!a)break;a.boxtype==="ipco"&&T(a.data,r),i=a.end}}C.exports.unbox=n,C.exports.readSizeFromMeta=function(o){var r={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(_,p){for(var g=4;;){var m=n(_,g);if(!m)break;m.boxtype==="iprp"&&t(m.data,p),m.boxtype==="iloc"&&f(m.data,p),m.boxtype==="iinf"&&s(m.data,p),g=m.end}}(o,r),r.sizes.length){var i,a,u,l=(a=(i=r.sizes).reduce(function(_,p){return _.width>p.width||_.width===p.width&&_.height>p.height?_:p}),u=i.reduce(function(_,p){return _.height>p.height||_.height===p.height&&_.width>p.width?_:p}),a.width>u.height||a.width===u.height&&a.height>u.width?a:u),d=1;r.transforms.forEach(function(_){var p={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},g={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(_.type==="imir"&&(d=_.value===0?g[d]:p[d=p[d=g[d]]]),_.type==="irot")for(var m=0;m<_.value;m++)d=p[d]});var c=null;return r.item_inf.Exif&&(c=r.item_loc[r.item_inf.Exif]),{width:l.width,height:l.height,orientation:r.transforms.length?d:null,variants:r.sizes,exif_location:c}}},C.exports.getMimeType=function(o){var r=String.fromCharCode.apply(null,o.slice(0,4)),i={};i[r]=!0;for(var a=8;a<o.length;a+=4)i[String.fromCharCode.apply(null,o.slice(a,a+4))]=!0;if(i.mif1||i.msf1||i.miaf)return r==="avif"||r==="avis"||r==="avio"?{type:"avif",mime:"image/avif"}:r==="heic"||r==="heix"?{type:"heic",mime:"image/heic"}:r==="hevc"||r==="hevx"?{type:"heic",mime:"image/heic-sequence"}:i.avif||i.avis?{type:"avif",mime:"image/avif"}:i.heic||i.heix||i.hevc||i.hevx||i.heis?i.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},40528:function(C,A,e){"use strict";var v=e(9696).wR,w=e(9696).gS,n=e(9696).eI,T=e(44600),x=e(11688),f=v("ftyp");C.exports=function(s){if(w(s,4,f)){var t=T.unbox(s,0);if(t){var o=T.getMimeType(t.data);if(o){for(var r,i=t.end;;){var a=T.unbox(s,i);if(!a)break;if(i=a.end,a.boxtype==="mdat")return;if(a.boxtype==="meta"){r=a.data;break}}if(r){var u=T.readSizeFromMeta(r);if(u){var l={width:u.width,height:u.height,type:o.type,mime:o.mime,wUnits:"px",hUnits:"px"};if(u.variants.length>1&&(l.variants=u.variants),u.orientation&&(l.orientation=u.orientation),u.exif_location&&u.exif_location.offset+u.exif_location.length<=s.length){var d=n(s,u.exif_location.offset),c=s.slice(u.exif_location.offset+d+4,u.exif_location.offset+u.exif_location.length),_=x.get_orientation(c);_>0&&(l.orientation=_)}return l}}}}}}},38728:function(C,A,e){"use strict";var v=e(9696).wR,w=e(9696).gS,n=e(9696).Bz,T=v("BM");C.exports=function(x){if(!(x.length<26)&&w(x,0,T))return{width:n(x,18),height:n(x,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},5588:function(C,A,e){"use strict";var v=e(9696).wR,w=e(9696).gS,n=e(9696).Bz,T=v("GIF87a"),x=v("GIF89a");C.exports=function(f){if(!(f.length<10)&&(w(f,0,T)||w(f,0,x)))return{width:n(f,6),height:n(f,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},41924:function(C,A,e){"use strict";var v=e(9696).Bz;C.exports=function(w){var n=v(w,0),T=v(w,2),x=v(w,4);if(n===0&&T===1&&x){for(var f=[],s={width:0,height:0},t=0;t<x;t++){var o=w[6+16*t]||256,r=w[6+16*t+1]||256,i={width:o,height:r};f.push(i),(o>s.width||r>s.height)&&(s=i)}return{width:s.width,height:s.height,variants:f,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},87968:function(C,A,e){"use strict";var v=e(9696).eW,w=e(9696).wR,n=e(9696).gS,T=e(11688),x=w("Exif\0\0");C.exports=function(f){if(!(f.length<2)&&f[0]===255&&f[1]===216&&f[2]===255)for(var s=2;;){for(;;){if(f.length-s<2)return;if(f[s++]===255)break}for(var t,o,r=f[s++];r===255;)r=f[s++];if(208<=r&&r<=217||r===1)t=0;else{if(!(192<=r&&r<=254)||f.length-s<2)return;t=v(f,s)-2,s+=2}if(r===217||r===218)return;if(r===225&&t>=10&&n(f,s,x)&&(o=T.get_orientation(f.slice(s+6,s+t))),t>=5&&192<=r&&r<=207&&r!==196&&r!==200&&r!==204){if(f.length-s<t)return;var i={width:v(f,s+3),height:v(f,s+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return o>0&&(i.orientation=o),i}s+=t}}},37276:function(C,A,e){"use strict";var v=e(9696).wR,w=e(9696).gS,n=e(9696).eI,T=v(`\x89PNG\r

`),x=v("IHDR");C.exports=function(f){if(!(f.length<24)&&w(f,0,T)&&w(f,12,x))return{width:n(f,16),height:n(f,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},90328:function(C,A,e){"use strict";var v=e(9696).wR,w=e(9696).gS,n=e(9696).eI,T=v("8BPS\0");C.exports=function(x){if(!(x.length<22)&&w(x,0,T))return{width:n(x,18),height:n(x,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},16024:function(C){"use strict";function A(s){return typeof s=="number"&&isFinite(s)&&s>0}var e=/<[-_.:a-zA-Z0-9][^>]*>/,v=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,w=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,n=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,T=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,x=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function f(s){return x.test(s)?s.match(x)[0]:"px"}C.exports=function(s){if(function(g){var m,b=0,y=g.length;for(g[0]===239&&g[1]===187&&g[2]===191&&(b=3);b<y&&((m=g[b])===32||m===9||m===13||m===10);)b++;return b!==y&&g[b]===60}(s)){for(var t="",o=0;o<s.length;o++)t+=String.fromCharCode(s[o]);var r=(t.match(e)||[""])[0];if(v.test(r)){var i=function(g){var m=g.match(w),b=g.match(n),y=g.match(T);return{width:m&&(m[1]||m[2]),height:b&&(b[1]||b[2]),viewbox:y&&(y[1]||y[2])}}(r),a=parseFloat(i.width),u=parseFloat(i.height);if(i.width&&i.height)return!A(a)||!A(u)?void 0:{width:a,height:u,type:"svg",mime:"image/svg+xml",wUnits:f(i.width),hUnits:f(i.height)};var l=(i.viewbox||"").split(" "),d={width:l[2],height:l[3]},c=parseFloat(d.width),_=parseFloat(d.height);if(A(c)&&A(_)&&f(d.width)===f(d.height)){var p=c/_;return i.width?A(a)?{width:a,height:a/p,type:"svg",mime:"image/svg+xml",wUnits:f(i.width),hUnits:f(i.width)}:void 0:i.height?A(u)?{width:u*p,height:u,type:"svg",mime:"image/svg+xml",wUnits:f(i.height),hUnits:f(i.height)}:void 0:{width:c,height:_,type:"svg",mime:"image/svg+xml",wUnits:f(d.width),hUnits:f(d.height)}}}}}},98792:function(C,A,e){"use strict";var v=e(9696).wR,w=e(9696).gS,n=e(9696).Bz,T=e(9696).eW,x=e(9696).st,f=e(9696).eI,s=v("II*\0"),t=v("MM\0*");function o(a,u,l){return l?T(a,u):n(a,u)}function r(a,u,l){return l?f(a,u):x(a,u)}function i(a,u,l){var d=o(a,u+2,l);return r(a,u+4,l)!==1||d!==3&&d!==4?null:d===3?o(a,u+8,l):r(a,u+8,l)}C.exports=function(a){if(!(a.length<8)&&(w(a,0,s)||w(a,0,t))){var u=a[0]===77,l=r(a,4,u)-8;if(!(l<0)){var d=l+8;if(!(a.length-d<2)){var c=12*o(a,d+0,u);if(!(c<=0||(d+=2,a.length-d<c))){var _,p,g,m;for(_=0;_<c;_+=12)(m=o(a,d+_,u))===256?p=i(a,d+_,u):m===257&&(g=i(a,d+_,u));return p&&g?{width:p,height:g,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},20704:function(C,A,e){"use strict";var v=e(9696).wR,w=e(9696).gS,n=e(9696).Bz,T=e(9696).st,x=e(11688),f=v("RIFF"),s=v("WEBP");function t(i,a){if(i[a+3]===157&&i[a+4]===1&&i[a+5]===42)return{width:16383&n(i,a+6),height:16383&n(i,a+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function o(i,a){if(i[a]===47){var u=T(i,a+1);return{width:1+(16383&u),height:1+(u>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function r(i,a){return{width:1+(i[a+6]<<16|i[a+5]<<8|i[a+4]),height:1+(i[a+9]<<a|i[a+8]<<8|i[a+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}C.exports=function(i){if(!(i.length<16)&&(w(i,0,f)||w(i,8,s))){var a=12,u=null,l=0,d=T(i,4)+8;if(!(d>i.length)){for(;a+8<d;)if(i[a]!==0){var c=String.fromCharCode.apply(null,i.slice(a,a+4)),_=T(i,a+4);c==="VP8 "&&_>=10?u=u||t(i,a+8):c==="VP8L"&&_>=9?u=u||o(i,a+8):c==="VP8X"&&_>=10?u=u||r(i,a+8):c==="EXIF"&&(l=x.get_orientation(i.slice(a+8,a+8+_)),a=1/0),a+=8+_}else a++;if(u)return l>0&&(u.orientation=l),u}}}},87480:function(C,A,e){"use strict";C.exports={avif:e(40528),bmp:e(38728),gif:e(5588),ico:e(41924),jpeg:e(87968),png:e(37276),psd:e(90328),svg:e(16024),tiff:e(98792),webp:e(20704)}},19480:function(C,A,e){"use strict";var v=e(87480);C.exports=function(w){return function(n){for(var T=Object.keys(v),x=0;x<T.length;x++){var f=v[T[x]](n);if(f)return f}return null}(w)},C.exports.parsers=v},4168:function(C){var A,e,v=C.exports={};function w(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function T(u){if(A===setTimeout)return setTimeout(u,0);if((A===w||!A)&&setTimeout)return A=setTimeout,setTimeout(u,0);try{return A(u,0)}catch{try{return A.call(null,u,0)}catch{return A.call(this,u,0)}}}(function(){try{A=typeof setTimeout=="function"?setTimeout:w}catch{A=w}try{e=typeof clearTimeout=="function"?clearTimeout:n}catch{e=n}})();var x,f=[],s=!1,t=-1;function o(){s&&x&&(s=!1,x.length?f=x.concat(f):t=-1,f.length&&r())}function r(){if(!s){var u=T(o);s=!0;for(var l=f.length;l;){for(x=f,f=[];++t<l;)x&&x[t].run();t=-1,l=f.length}x=null,s=!1,function(d){if(e===clearTimeout)return clearTimeout(d);if((e===n||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(d);try{return e(d)}catch{try{return e.call(null,d)}catch{return e.call(this,d)}}}(u)}}function i(u,l){this.fun=u,this.array=l}function a(){}v.nextTick=function(u){var l=new Array(arguments.length-1);if(arguments.length>1)for(var d=1;d<arguments.length;d++)l[d-1]=arguments[d];f.push(new i(u,l)),f.length!==1||s||T(r)},i.prototype.run=function(){this.fun.apply(null,this.array)},v.title="browser",v.browser=!0,v.env={},v.argv=[],v.version="",v.versions={},v.on=a,v.addListener=a,v.once=a,v.off=a,v.removeListener=a,v.removeAllListeners=a,v.emit=a,v.prependListener=a,v.prependOnceListener=a,v.listeners=function(u){return[]},v.binding=function(u){throw new Error("process.binding is not supported")},v.cwd=function(){return"/"},v.chdir=function(u){throw new Error("process.chdir is not supported")},v.umask=function(){return 0}},3951:function(C,A,e){for(var v=e(41984),w=typeof window>"u"?e.g:window,n=["moz","webkit"],T="AnimationFrame",x=w["request"+T],f=w["cancel"+T]||w["cancelRequest"+T],s=0;!x&&s<n.length;s++)x=w[n[s]+"Request"+T],f=w[n[s]+"Cancel"+T]||w[n[s]+"CancelRequest"+T];if(!x||!f){var t=0,o=0,r=[];x=function(i){if(r.length===0){var a=v(),u=Math.max(0,16.666666666666668-(a-t));t=u+a,setTimeout(function(){var l=r.slice(0);r.length=0;for(var d=0;d<l.length;d++)if(!l[d].cancelled)try{l[d].callback(t)}catch(c){setTimeout(function(){throw c},0)}},Math.round(u))}return r.push({handle:++o,callback:i,cancelled:!1}),o},f=function(i){for(var a=0;a<r.length;a++)r[a].handle===i&&(r[a].cancelled=!0)}}C.exports=function(i){return x.call(w,i)},C.exports.cancel=function(){f.apply(w,arguments)},C.exports.polyfill=function(i){i||(i=w),i.requestAnimationFrame=x,i.cancelAnimationFrame=f}},24544:function(C,A,e){"use strict";var v=e(76752),w=e(72160),n=e(45223),T=e(55616),x=e(50896),f=e(47520),s=e(37816),t=s.float32,o=s.fract32;C.exports=function(i,a){if(typeof i=="function"?(a||(a={}),a.regl=i):a=i,a.length&&(a.positions=a),!(i=a.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var u,l,d,c,_,p,g=i._gl,m={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},b=[];return c=i.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),l=i.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),d=i.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),_=i.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),p=i.buffer({usage:"static",type:"float",data:r}),E(a),u=i({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:i.prop("range"),lineWidth:i.prop("lineWidth"),capSize:i.prop("capSize"),opacity:i.prop("opacity"),scale:i.prop("scale"),translate:i.prop("translate"),scaleFract:i.prop("scaleFract"),translateFract:i.prop("translateFract"),viewport:function(D,P){return[P.viewport.x,P.viewport.y,D.viewportWidth,D.viewportHeight]}},attributes:{color:{buffer:c,offset:function(D,P){return 4*P.offset},divisor:1},position:{buffer:l,offset:function(D,P){return 8*P.offset},divisor:1},positionFract:{buffer:d,offset:function(D,P){return 8*P.offset},divisor:1},error:{buffer:_,offset:function(D,P){return 16*P.offset},divisor:1},direction:{buffer:p,stride:24,offset:0},lineOffset:{buffer:p,stride:24,offset:8},capOffset:{buffer:p,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:i.prop("viewport")},viewport:i.prop("viewport"),stencil:!1,instances:i.prop("count"),count:r.length}),x(y,{update:E,draw:M,destroy:k,regl:i,gl:g,canvas:g.canvas,groups:b}),y;function y(D){D?E(D):D===null&&k(),M()}function M(D){if(typeof D=="number")return h(D);D&&!Array.isArray(D)&&(D=[D]),i._refresh(),b.forEach(function(P,L){P&&(D&&(D[L]?P.draw=!0:P.draw=!1),P.draw?h(L):P.draw=!0)})}function h(D){typeof D=="number"&&(D=b[D]),D!=null&&D&&D.count&&D.color&&D.opacity&&D.positions&&D.positions.length>1&&(D.scaleRatio=[D.scale[0]*D.viewport.width,D.scale[1]*D.viewport.height],u(D),D.after&&D.after(D))}function E(D){if(D){D.length!=null?typeof D[0]=="number"&&(D=[{positions:D}]):Array.isArray(D)||(D=[D]);var P=0,L=0;if(y.groups=b=D.map(function(z,H){var U=b[H];return z&&(typeof z=="function"?z={after:z}:typeof z[0]=="number"&&(z={positions:z}),z=T(z,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),U||(b[H]=U={id:H,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},z=x({},m,z)),n(U,z,[{lineWidth:function(re){return .5*+re},capSize:function(re){return .5*+re},opacity:parseFloat,errors:function(re){return re=f(re),L+=re.length,re},positions:function(re,ee){return re=f(re,"float64"),ee.count=Math.floor(re.length/2),ee.bounds=v(re,2),ee.offset=P,P+=ee.count,re}},{color:function(re,ee){var J=ee.count;if(re||(re="transparent"),!Array.isArray(re)||typeof re[0]=="number"){var Q=re;re=Array(J);for(var ne=0;ne<J;ne++)re[ne]=Q}if(re.length<J)throw Error("Not enough colors");for(var K=new Uint8Array(4*J),oe=0;oe<J;oe++){var le=w(re[oe],"uint8");K.set(le,4*oe)}return K},range:function(re,ee,J){var Q=ee.bounds;return re||(re=Q),ee.scale=[1/(re[2]-re[0]),1/(re[3]-re[1])],ee.translate=[-re[0],-re[1]],ee.scaleFract=o(ee.scale),ee.translateFract=o(ee.translate),re},viewport:function(re){var ee;return Array.isArray(re)?ee={x:re[0],y:re[1],width:re[2]-re[0],height:re[3]-re[1]}:re?(ee={x:re.x||re.left||0,y:re.y||re.top||0},re.right?ee.width=re.right-ee.x:ee.width=re.w||re.width||0,re.bottom?ee.height=re.bottom-ee.y:ee.height=re.h||re.height||0):ee={x:0,y:0,width:g.drawingBufferWidth,height:g.drawingBufferHeight},ee}}])),U}),P||L){var O=b.reduce(function(z,H,U){return z+(H?H.count:0)},0),N=new Float64Array(2*O),V=new Uint8Array(4*O),F=new Float32Array(4*O);b.forEach(function(z,H){if(z){var U=z.positions,re=z.count,ee=z.offset,J=z.color,Q=z.errors;re&&(V.set(J,4*ee),F.set(Q,4*ee),N.set(U,2*ee))}});var j=t(N);l(j);var Z=o(N,j);d(Z),c(V),_(F)}}}function k(){l.destroy(),d.destroy(),c.destroy(),_.destroy(),p.destroy()}};var r=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},13472:function(C,A,e){"use strict";var v=e(72160),w=e(76752),n=e(50896),T=e(55616),x=e(47520),f=e(28912),s=e(71152),t=e(37816),o=t.float32,r=t.fract32,i=e(60463),a=e(51160),u=e(10272);function l(d,c){if(!(this instanceof l))return new l(d,c);if(typeof d=="function"?(c||(c={}),c.regl=d):c=d,c.length&&(c.positions=c),!(d=c.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=d._gl,this.regl=d,this.passes=[],this.shaders=l.shaders.has(d)?l.shaders.get(d):l.shaders.set(d,l.createShaders(d)).get(d),this.update(c)}C.exports=l,l.dashMult=2,l.maxPatternLength=256,l.precisionThreshold=3e6,l.maxPoints=1e4,l.maxLines=2048,l.shaders=new i,l.createShaders=function(d){var c,_=d.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),p={primitive:"triangle strip",instances:d.prop("count"),count:4,offset:0,uniforms:{miterMode:function(m,b){return b.join==="round"?2:1},miterLimit:d.prop("miterLimit"),scale:d.prop("scale"),scaleFract:d.prop("scaleFract"),translateFract:d.prop("translateFract"),translate:d.prop("translate"),thickness:d.prop("thickness"),dashTexture:d.prop("dashTexture"),opacity:d.prop("opacity"),pixelRatio:d.context("pixelRatio"),id:d.prop("id"),dashLength:d.prop("dashLength"),viewport:function(m,b){return[b.viewport.x,b.viewport.y,m.viewportWidth,m.viewportHeight]},depth:d.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(m,b){return!b.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:d.prop("viewport")},viewport:d.prop("viewport")},g=d(n({vert:`
precision highp float;

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`,frag:`
precision highp float;

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`,attributes:{lineEnd:{buffer:_,divisor:0,stride:8,offset:0},lineTop:{buffer:_,divisor:0,stride:8,offset:4},aCoord:{buffer:d.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:d.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:d.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:d.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:d.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},p));try{c=d(n({cull:{enable:!0,face:"back"},vert:`
precision highp float;

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);


	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`,frag:`
precision highp float;

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`,attributes:{lineEnd:{buffer:_,divisor:0,stride:8,offset:0},lineTop:{buffer:_,divisor:0,stride:8,offset:4},aColor:{buffer:d.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:d.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:d.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:d.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:d.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:d.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},p))}catch{c=g}return{fill:d({primitive:"triangle",elements:function(m,b){return b.triangles},offset:0,vert:`
precision highp float;

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`,frag:`
precision highp float;
varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`,uniforms:{scale:d.prop("scale"),color:d.prop("fill"),scaleFract:d.prop("scaleFract"),translateFract:d.prop("translateFract"),translate:d.prop("translate"),opacity:d.prop("opacity"),pixelRatio:d.context("pixelRatio"),id:d.prop("id"),viewport:function(m,b){return[b.viewport.x,b.viewport.y,m.viewportWidth,m.viewportHeight]}},attributes:{position:{buffer:d.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:d.prop("positionFractBuffer"),stride:8,offset:8}},blend:p.blend,depth:{enable:!1},scissor:p.scissor,stencil:p.stencil,viewport:p.viewport}),rect:g,miter:c}},l.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},l.prototype.render=function(){for(var d,c=[],_=arguments.length;_--;)c[_]=arguments[_];c.length&&(d=this).update.apply(d,c),this.draw()},l.prototype.draw=function(){for(var d=this,c=[],_=arguments.length;_--;)c[_]=arguments[_];return(c.length?c:this.passes).forEach(function(p,g){var m;if(p&&Array.isArray(p))return(m=d).draw.apply(m,p);typeof p=="number"&&(p=d.passes[p]),p&&p.count>1&&p.opacity&&(d.regl._refresh(),p.fill&&p.triangles&&p.triangles.length>2&&d.shaders.fill(p),p.thickness&&(p.scale[0]*p.viewport.width>l.precisionThreshold||p.scale[1]*p.viewport.height>l.precisionThreshold||p.join==="rect"||!p.join&&(p.thickness<=2||p.count>=l.maxPoints)?d.shaders.rect(p):d.shaders.miter(p)))}),this},l.prototype.update=function(d){var c=this;if(d){d.length!=null?typeof d[0]=="number"&&(d=[{positions:d}]):Array.isArray(d)||(d=[d]);var _=this.regl,p=this.gl;if(d.forEach(function(M,h){var E=c.passes[h];if(M!==void 0)if(M!==null){if(typeof M[0]=="number"&&(M={positions:M}),M=T(M,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),E||(c.passes[h]=E={id:h,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:_.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:_.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:_.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:_.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},M=n({},l.defaults,M)),M.thickness!=null&&(E.thickness=parseFloat(M.thickness)),M.opacity!=null&&(E.opacity=parseFloat(M.opacity)),M.miterLimit!=null&&(E.miterLimit=parseFloat(M.miterLimit)),M.overlay!=null&&(E.overlay=!!M.overlay,h<l.maxLines&&(E.depth=2*(l.maxLines-1-h%l.maxLines)/l.maxLines-1)),M.join!=null&&(E.join=M.join),M.hole!=null&&(E.hole=M.hole),M.fill!=null&&(E.fill=M.fill?v(M.fill,"uint8"):null),M.viewport!=null&&(E.viewport=a(M.viewport)),E.viewport||(E.viewport=a([p.drawingBufferWidth,p.drawingBufferHeight])),M.close!=null&&(E.close=M.close),M.positions===null&&(M.positions=[]),M.positions){var k,D;if(M.positions.x&&M.positions.y){var P=M.positions.x,L=M.positions.y;D=E.count=Math.max(P.length,L.length),k=new Float64Array(2*D);for(var O=0;O<D;O++)k[2*O]=P[O],k[2*O+1]=L[O]}else k=x(M.positions,"float64"),D=E.count=Math.floor(k.length/2);var N=E.bounds=w(k,2);if(E.fill){for(var V=[],F={},j=0,Z=0,z=0,H=E.count;Z<H;Z++){var U=k[2*Z],re=k[2*Z+1];isNaN(U)||isNaN(re)||U==null||re==null?(U=k[2*j],re=k[2*j+1],F[Z]=j):j=Z,V[z++]=U,V[z++]=re}if(M.splitNull){E.count-1 in F||(F[E.count]=E.count-1);var ee=Object.keys(F).map(Number).sort(function(xt,gt){return xt-gt}),J=[],Q=0,ne=E.hole!=null?E.hole[0]:null;if(ne!=null){var K=u(ee,function(xt){return xt>=ne});(ee=ee.slice(0,K)).push(ne)}for(var oe=function(xt){var gt=V.slice(2*Q,2*ee[xt]).concat(ne?V.slice(2*ne):[]),rt=(E.hole||[]).map(function(Mt){return Mt-ne+(ee[xt]-Q)}),tt=f(gt,rt);tt=tt.map(function(Mt){return Mt+Q+(Mt+Q<ee[xt]?0:ne-ee[xt])}),J.push.apply(J,tt),Q=ee[xt]+1},le=0;le<ee.length;le++)oe(le);for(var se=0,de=J.length;se<de;se++)F[J[se]]!=null&&(J[se]=F[J[se]]);E.triangles=J}else{for(var be=f(V,E.hole||[]),_e=0,xe=be.length;_e<xe;_e++)F[be[_e]]!=null&&(be[_e]=F[be[_e]]);E.triangles=be}}var ve=new Float64Array(k);s(ve,2,N);var ye=new Float64Array(2*D+6);E.close?k[0]===k[2*D-2]&&k[1]===k[2*D-1]?(ye[0]=ve[2*D-4],ye[1]=ve[2*D-3]):(ye[0]=ve[2*D-2],ye[1]=ve[2*D-1]):(ye[0]=ve[0],ye[1]=ve[1]),ye.set(ve,2),E.close?k[0]===k[2*D-2]&&k[1]===k[2*D-1]?(ye[2*D+2]=ve[2],ye[2*D+3]=ve[3],E.count-=1):(ye[2*D+2]=ve[0],ye[2*D+3]=ve[1],ye[2*D+4]=ve[2],ye[2*D+5]=ve[3]):(ye[2*D+2]=ve[2*D-2],ye[2*D+3]=ve[2*D-1],ye[2*D+4]=ve[2*D-2],ye[2*D+5]=ve[2*D-1]);var me=o(ye);E.positionBuffer(me);var Me=r(ye,me);E.positionFractBuffer(Me)}if(M.range?E.range=M.range:E.range||(E.range=E.bounds),(M.range||M.positions)&&E.count){var Ae=E.bounds,ce=Ae[2]-Ae[0],ae=Ae[3]-Ae[1],pe=E.range[2]-E.range[0],De=E.range[3]-E.range[1];E.scale=[ce/pe,ae/De],E.translate=[-E.range[0]/pe+Ae[0]/pe||0,-E.range[1]/De+Ae[1]/De||0],E.scaleFract=r(E.scale),E.translateFract=r(E.translate)}if(M.dashes){var ke,Ee=0;if(!M.dashes||M.dashes.length<2)Ee=1,ke=new Uint8Array([255,255,255,255,255,255,255,255]);else{Ee=0;for(var Ie=0;Ie<M.dashes.length;++Ie)Ee+=M.dashes[Ie];ke=new Uint8Array(Ee*l.dashMult);for(var Re=0,Ne=255,ge=0;ge<2;ge++)for(var we=0;we<M.dashes.length;++we){for(var Ce=0,ze=M.dashes[we]*l.dashMult*.5;Ce<ze;++Ce)ke[Re++]=Ne;Ne^=255}}E.dashLength=Ee,E.dashTexture({channels:1,data:ke,width:ke.length,height:1,mag:"linear",min:"linear"},0,0)}if(M.color){var Pe=E.count,Ue=M.color;Ue||(Ue="transparent");var Ge=new Uint8Array(4*Pe+4);if(Array.isArray(Ue)&&typeof Ue[0]!="number"){for(var Xe=0;Xe<Pe;Xe++){var st=v(Ue[Xe],"uint8");Ge.set(st,4*Xe)}Ge.set(v(Ue[0],"uint8"),4*Pe)}else for(var at=v(Ue,"uint8"),vt=0;vt<Pe+1;vt++)Ge.set(at,4*vt);E.colorBuffer({usage:"dynamic",type:"uint8",data:Ge})}}else c.passes[h]=null}),d.length<this.passes.length){for(var g=d.length;g<this.passes.length;g++){var m=this.passes[g];m&&(m.colorBuffer.destroy(),m.positionBuffer.destroy(),m.dashTexture.destroy())}this.passes.length=d.length}for(var b=[],y=0;y<this.passes.length;y++)this.passes[y]!==null&&b.push(this.passes[y]);return this.passes=b,this}},l.prototype.destroy=function(){return this.passes.forEach(function(d){d.colorBuffer.destroy(),d.positionBuffer.destroy(),d.dashTexture.destroy()}),this.passes.length=0,this}},38540:function(C,A,e){"use strict";function v(g,m){return function(b){if(Array.isArray(b))return b}(g)||function(b,y){var M=b==null?null:typeof Symbol<"u"&&b[Symbol.iterator]||b["@@iterator"];if(M!=null){var h,E,k,D,P=[],L=!0,O=!1;try{if(k=(M=M.call(b)).next,y===0){if(Object(M)!==M)return;L=!1}else for(;!(L=(h=k.call(M)).done)&&(P.push(h.value),P.length!==y);L=!0);}catch(N){O=!0,E=N}finally{try{if(!L&&M.return!=null&&(D=M.return(),Object(D)!==D))return}finally{if(O)throw E}}return P}}(g,m)||w(g,m)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function w(g,m){if(g){if(typeof g=="string")return n(g,m);var b=Object.prototype.toString.call(g).slice(8,-1);return b==="Object"&&g.constructor&&(b=g.constructor.name),b==="Map"||b==="Set"?Array.from(g):b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b)?n(g,m):void 0}}function n(g,m){(m==null||m>g.length)&&(m=g.length);for(var b=0,y=new Array(m);b<m;b++)y[b]=g[b];return y}var T=e(72160),x=e(76752),f=e(3808),s=e(3108),t=e(50896),o=e(26444),r=e(55616),i=e(45223),a=e(47520),u=e(96604),l=e(37816),d=e(51160),c=_;function _(g,m){var b=this;if(!(this instanceof _))return new _(g,m);typeof g=="function"?(m||(m={}),m.regl=g):(m=g,g=null),m&&m.length&&(m.positions=m);var y,M=(g=m.regl)._gl,h=[];this.tooManyColors=u,y=g.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),t(this,{regl:g,gl:M,groups:[],markerCache:[null],markerTextures:[null],palette:h,paletteIds:{},paletteTexture:y,maxColors:255,maxSize:100,canvas:M.canvas}),this.update(m);var E={uniforms:{constPointSize:!!m.constPointSize,opacity:g.prop("opacity"),paletteSize:function(P,L){return[b.tooManyColors?0:255,y.height]},pixelRatio:g.context("pixelRatio"),scale:g.prop("scale"),scaleFract:g.prop("scaleFract"),translate:g.prop("translate"),translateFract:g.prop("translateFract"),markerTexture:g.prop("markerTexture"),paletteTexture:y},attributes:{x:function(P,L){return L.xAttr||{buffer:L.positionBuffer,stride:8,offset:0}},y:function(P,L){return L.yAttr||{buffer:L.positionBuffer,stride:8,offset:4}},xFract:function(P,L){return L.xAttr?{constant:[0,0]}:{buffer:L.positionFractBuffer,stride:8,offset:0}},yFract:function(P,L){return L.yAttr?{constant:[0,0]}:{buffer:L.positionFractBuffer,stride:8,offset:4}},size:function(P,L){return L.size.length?{buffer:L.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*L.size/b.maxSize)]}},borderSize:function(P,L){return L.borderSize.length?{buffer:L.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*L.borderSize/b.maxSize)]}},colorId:function(P,L){return L.color.length?{buffer:L.colorBuffer,stride:b.tooManyColors?8:4,offset:0}:{constant:b.tooManyColors?h.slice(4*L.color,4*L.color+4):[L.color]}},borderColorId:function(P,L){return L.borderColor.length?{buffer:L.colorBuffer,stride:b.tooManyColors?8:4,offset:b.tooManyColors?4:2}:{constant:b.tooManyColors?h.slice(4*L.borderColor,4*L.borderColor+4):[L.borderColor]}},isActive:function(P,L){return L.activation===!0?{constant:[1]}:L.activation?L.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:g.prop("viewport")},viewport:g.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:g.prop("elements"),count:g.prop("count"),offset:g.prop("offset"),primitive:"points"},k=t({},E);k.frag=o([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),k.vert=o([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

// \`invariant\` effectively turns off optimizations for the position.
// We need this because -fast-math on M1 Macs is re-ordering
// floating point operations in a way that causes floating point
// precision limits to put points in the wrong locations.
invariant gl_Position;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}
`]),this.drawMarker=g(k);var D=t({},E);D.frag=o([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),D.vert=o([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

// \`invariant\` effectively turns off optimizations for the position.
// We need this because -fast-math on M1 Macs is re-ordering
// floating point operations in a way that causes floating point
// precision limits to put points in the wrong locations.
invariant gl_Position;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),u&&(D.frag=D.frag.replace("smoothstep","smoothStep"),k.frag=k.frag.replace("smoothstep","smoothStep")),this.drawCircle=g(D)}_.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},_.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},_.prototype.draw=function(){for(var g=this,m=arguments.length,b=new Array(m),y=0;y<m;y++)b[y]=arguments[y];var M=this.groups;if(b.length===1&&Array.isArray(b[0])&&(b[0][0]===null||Array.isArray(b[0][0]))&&(b=b[0]),this.regl._refresh(),b.length)for(var h=0;h<b.length;h++)this.drawItem(h,b[h]);else M.forEach(function(E,k){g.drawItem(k)});return this},_.prototype.drawItem=function(g,m){var b,y=this.groups,M=y[g];if(typeof m=="number"&&(g=m,M=y[m],m=null),M&&M.count&&M.opacity){M.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,M,m));for(var h=[],E=1;E<M.activation.length;E++)M.activation[E]&&(M.activation[E]===!0||M.activation[E].data.length)&&h.push.apply(h,function(k){if(Array.isArray(k))return n(k)}(b=this.getMarkerDrawOptions(E,M,m))||function(k){if(typeof Symbol<"u"&&k[Symbol.iterator]!=null||k["@@iterator"]!=null)return Array.from(k)}(b)||w(b)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}());h.length&&this.drawMarker(h)}},_.prototype.getMarkerDrawOptions=function(g,m,b){var y=m.range,M=m.tree,h=m.viewport,E=m.activation,k=m.selectionBuffer,D=m.count;if(this.regl,!M)return b?[t({},m,{markerTexture:this.markerTextures[g],activation:E[g],count:b.length,elements:b,offset:0})]:[t({},m,{markerTexture:this.markerTextures[g],activation:E[g],offset:0})];var P=[],L=M.range(y,{lod:!0,px:[(y[2]-y[0])/h.width,(y[3]-y[1])/h.height]});if(b){for(var O=E[g].data,N=new Uint8Array(D),V=0;V<b.length;V++){var F=b[V];N[F]=O?O[F]:1}k.subdata(N)}for(var j=L.length;j--;){var Z=v(L[j],2),z=Z[0],H=Z[1];P.push(t({},m,{markerTexture:this.markerTextures[g],activation:b?k:E[g],offset:z,count:H-z}))}return P},_.prototype.update=function(){for(var g=this,m=arguments.length,b=new Array(m),y=0;y<m;y++)b[y]=arguments[y];if(b.length){b.length===1&&Array.isArray(b[0])&&(b=b[0]);var M=this.groups,h=this.gl,E=this.regl,k=this.maxSize,D=this.maxColors,P=this.palette;this.groups=M=b.map(function(L,O){var N=M[O];if(L===void 0)return N;L===null?L={positions:null}:typeof L=="function"?L={ondraw:L}:typeof L[0]=="number"&&(L={positions:L}),(L=r(L,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions===null&&(L.positions=[]),L.tooManyColors!=null&&(g.tooManyColors=L.tooManyColors),N||(M[O]=N={id:O,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:E.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:E.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:E.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:E.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:E.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},L=t({},_.defaults,L)),L.positions&&!("marker"in L)&&(L.marker=N.marker,delete N.marker),L.marker&&!("positions"in L)&&(L.positions=N.positions,delete N.positions);var V=0,F=0;if(i(N,L,[{snap:!0,size:function(xe,ve){return xe==null&&(xe=_.defaults.size),V+=xe&&xe.length?1:0,xe},borderSize:function(xe,ve){return xe==null&&(xe=_.defaults.borderSize),V+=xe&&xe.length?1:0,xe},opacity:parseFloat,color:function(xe,ve){return xe==null&&(xe=_.defaults.color),xe=g.updateColor(xe),F++,xe},borderColor:function(xe,ve){return xe==null&&(xe=_.defaults.borderColor),xe=g.updateColor(xe),F++,xe},bounds:function(xe,ve,ye){return"range"in ye||(ye.range=null),xe},positions:function(xe,ve,ye){var me=ve.snap,Me=ve.positionBuffer,Ae=ve.positionFractBuffer,ce=ve.selectionBuffer;if(xe.x||xe.y)return xe.x.length?ve.xAttr={buffer:E.buffer(xe.x),offset:0,stride:4,count:xe.x.length}:ve.xAttr={buffer:xe.x.buffer,offset:4*xe.x.offset||0,stride:4*(xe.x.stride||1),count:xe.x.count},xe.y.length?ve.yAttr={buffer:E.buffer(xe.y),offset:0,stride:4,count:xe.y.length}:ve.yAttr={buffer:xe.y.buffer,offset:4*xe.y.offset||0,stride:4*(xe.y.stride||1),count:xe.y.count},ve.count=Math.max(ve.xAttr.count,ve.yAttr.count),xe;xe=a(xe,"float64");var ae=ve.count=Math.floor(xe.length/2),pe=ve.bounds=ae?x(xe,2):null;if(ye.range||ve.range||(delete ve.range,ye.range=pe),ye.marker||ve.marker||(delete ve.marker,ye.marker=null),me&&(me===!0||ae>me)?ve.tree=s(xe,{bounds:pe}):me&&me.length&&(ve.tree=me),ve.tree){var De={primitive:"points",usage:"static",data:ve.tree,type:"uint32"};ve.elements?ve.elements(De):ve.elements=E.elements(De)}var ke=l.float32(xe);return Me({data:ke,usage:"dynamic"}),Ae({data:l.fract32(xe,ke),usage:"dynamic"}),ce({data:new Uint8Array(ae),type:"uint8",usage:"stream"}),xe}},{marker:function(xe,ve,ye){var me=ve.activation;if(me.forEach(function(ke){return ke&&ke.destroy&&ke.destroy()}),me.length=0,xe&&typeof xe[0]!="number"){for(var Me=[],Ae=0,ce=Math.min(xe.length,ve.count);Ae<ce;Ae++){var ae=g.addMarker(xe[Ae]);Me[ae]||(Me[ae]=new Uint8Array(ve.count)),Me[ae][Ae]=1}for(var pe=0;pe<Me.length;pe++)if(Me[pe]){var De={data:Me[pe],type:"uint8",usage:"static"};me[pe]?me[pe](De):me[pe]=E.buffer(De),me[pe].data=Me[pe]}}else me[g.addMarker(xe)]=!0;return xe},range:function(xe,ve,ye){var me=ve.bounds;if(me)return xe||(xe=me),ve.scale=[1/(xe[2]-xe[0]),1/(xe[3]-xe[1])],ve.translate=[-xe[0],-xe[1]],ve.scaleFract=l.fract(ve.scale),ve.translateFract=l.fract(ve.translate),xe},viewport:function(xe){return d(xe||[h.drawingBufferWidth,h.drawingBufferHeight])}}]),V){var j=N,Z=j.count,z=j.size,H=j.borderSize,U=j.sizeBuffer,re=new Uint8Array(2*Z);if(z.length||H.length)for(var ee=0;ee<Z;ee++)re[2*ee]=Math.round(255*(z[ee]==null?z:z[ee])/k),re[2*ee+1]=Math.round(255*(H[ee]==null?H:H[ee])/k);U({data:re,usage:"dynamic"})}if(F){var J,Q=N,ne=Q.count,K=Q.color,oe=Q.borderColor,le=Q.colorBuffer;if(g.tooManyColors){if(K.length||oe.length){J=new Uint8Array(8*ne);for(var se=0;se<ne;se++){var de=K[se];J[8*se]=P[4*de],J[8*se+1]=P[4*de+1],J[8*se+2]=P[4*de+2],J[8*se+3]=P[4*de+3];var be=oe[se];J[8*se+4]=P[4*be],J[8*se+5]=P[4*be+1],J[8*se+6]=P[4*be+2],J[8*se+7]=P[4*be+3]}}}else if(K.length||oe.length){J=new Uint8Array(4*ne+2);for(var _e=0;_e<ne;_e++)K[_e]!=null&&(J[4*_e]=K[_e]%D,J[4*_e+1]=Math.floor(K[_e]/D)),oe[_e]!=null&&(J[4*_e+2]=oe[_e]%D,J[4*_e+3]=Math.floor(oe[_e]/D))}le({data:J||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return N})}},_.prototype.addMarker=function(g){var m,b=this.markerTextures,y=this.regl,M=this.markerCache,h=g==null?0:M.indexOf(g);if(h>=0)return h;if(g instanceof Uint8Array||g instanceof Uint8ClampedArray)m=g;else{m=new Uint8Array(g.length);for(var E=0,k=g.length;E<k;E++)m[E]=255*g[E]}var D=Math.floor(Math.sqrt(m.length));return h=b.length,M.push(g),b.push(y.texture({channels:1,data:m,radius:D,mag:"linear",min:"linear"})),h},_.prototype.updateColor=function(g){var m=this.paletteIds,b=this.palette,y=this.maxColors;Array.isArray(g)||(g=[g]);var M=[];if(typeof g[0]=="number"){var h=[];if(Array.isArray(g))for(var E=0;E<g.length;E+=4)h.push(g.slice(E,E+4));else for(var k=0;k<g.length;k+=4)h.push(g.subarray(k,k+4));g=h}for(var D=0;D<g.length;D++){var P=g[D];P=T(P,"uint8");var L=f(P,!1);if(m[L]==null){var O=b.length;m[L]=Math.floor(O/4),b[O]=P[0],b[O+1]=P[1],b[O+2]=P[2],b[O+3]=P[3]}M[D]=m[L]}return!this.tooManyColors&&b.length>4*y&&(this.tooManyColors=!0),this.updatePalette(b),M.length===1?M[0]:M},_.prototype.updatePalette=function(g){if(!this.tooManyColors){var m=this.maxColors,b=this.paletteTexture,y=Math.ceil(.25*g.length/m);if(y>1)for(var M=.25*(g=g.slice()).length%m;M<y*m;M++)g.push(0,0,0,0);b.height<y&&b.resize(m,y),b.subimage({width:Math.min(.25*g.length,m),height:y,data:g},0,0)}},_.prototype.destroy=function(){return this.groups.forEach(function(g){g.sizeBuffer.destroy(),g.positionBuffer.destroy(),g.positionFractBuffer.destroy(),g.colorBuffer.destroy(),g.activation.forEach(function(m){return m&&m.destroy&&m.destroy()}),g.selectionBuffer.destroy(),g.elements&&g.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(g){return g&&g.destroy&&g.destroy()}),this};var p=e(50896);C.exports=function(g,m){var b=new c(g,m),y=b.render.bind(b);return p(y,{render:y,update:b.update.bind(b),draw:b.draw.bind(b),destroy:b.destroy.bind(b),regl:b.regl,gl:b.gl,canvas:b.gl.canvas,groups:b.groups,markers:b.markerCache,palette:b.palette}),y}},55795:function(C,A,e){"use strict";var v=e(38540),w=e(55616),n=e(76752),T=e(3951),x=e(67752),f=e(51160),s=e(47520);function t(a,u){if(!(this instanceof t))return new t(a,u);this.traces=[],this.passes={},this.regl=a,this.scatter=v(a),this.canvas=this.scatter.canvas}function o(a,u,l){return(a.id!=null?a.id:a)<<16|(255&u)<<8|255&l}function r(a,u,l){var d,c,_,p,g=a[u],m=a[l];return g.length>2?(g[0],g[2],d=g[1],c=g[3]):g.length?(d=g[0],c=g[1]):(g.x,d=g.y,g.x,g.width,c=g.y+g.height),m.length>2?(_=m[0],p=m[2],m[1],m[3]):m.length?(_=m[0],p=m[1]):(_=m.x,m.y,p=m.x+m.width,m.y,m.height),[_,d,p,c]}function i(a){if(typeof a=="number")return[a,a,a,a];if(a.length===2)return[a[0],a[1],a[0],a[1]];var u=f(a);return[u.x,u.y,u.x+u.width,u.y+u.height]}C.exports=t,t.prototype.render=function(){for(var a,u=this,l=[],d=arguments.length;d--;)l[d]=arguments[d];return l.length&&(a=this).update.apply(a,l),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=T(function(){u.draw(),u.dirty=!0,u.planned=null})):(this.draw(),this.dirty=!0,T(function(){u.dirty=!1})),this)},t.prototype.update=function(){for(var a,u=[],l=arguments.length;l--;)u[l]=arguments[l];if(u.length){for(var d=0;d<u.length;d++)this.updateItem(d,u[d]);this.traces=this.traces.filter(Boolean);for(var c=[],_=0,p=0;p<this.traces.length;p++){for(var g=this.traces[p],m=this.traces[p].passes,b=0;b<m.length;b++)c.push(this.passes[m[b]]);g.passOffset=_,_+=g.passes.length}return(a=this.scatter).update.apply(a,c),this}},t.prototype.updateItem=function(a,u){var l=this.regl;if(u===null)return this.traces[a]=null,this;if(!u)return this;var d,c=w(u,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),_=this.traces[a]||(this.traces[a]={id:a,buffer:l.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:f([l._gl.drawingBufferWidth,l._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(c.color!=null&&(_.color=c.color),c.size!=null&&(_.size=c.size),c.marker!=null&&(_.marker=c.marker),c.borderColor!=null&&(_.borderColor=c.borderColor),c.borderSize!=null&&(_.borderSize=c.borderSize),c.opacity!=null&&(_.opacity=c.opacity),c.viewport&&(_.viewport=f(c.viewport)),c.diagonal!=null&&(_.diagonal=c.diagonal),c.upper!=null&&(_.upper=c.upper),c.lower!=null&&(_.lower=c.lower),c.data){_.buffer(s(c.data)),_.columns=c.data.length,_.count=c.data[0].length,_.bounds=[];for(var p=0;p<_.columns;p++)_.bounds[p]=n(c.data[p],1)}c.range&&(_.range=c.range,d=_.range&&typeof _.range[0]!="number"),c.domain&&(_.domain=c.domain);var g=!1;c.padding!=null&&(Array.isArray(c.padding)&&c.padding.length===_.columns&&typeof c.padding[c.padding.length-1]=="number"?(_.padding=c.padding.map(i),g=!0):_.padding=i(c.padding));var m=_.columns,b=_.count,y=_.viewport.width,M=_.viewport.height,h=_.viewport.x,E=_.viewport.y,k=y/m,D=M/m;_.passes=[];for(var P=0;P<m;P++)for(var L=0;L<m;L++)if((_.diagonal||L!==P)&&(_.upper||!(P>L))&&(_.lower||!(P<L))){var O=o(_.id,P,L),N=this.passes[O]||(this.passes[O]={});if(c.data&&(c.transpose?N.positions={x:{buffer:_.buffer,offset:L,count:b,stride:m},y:{buffer:_.buffer,offset:P,count:b,stride:m}}:N.positions={x:{buffer:_.buffer,offset:L*b,count:b},y:{buffer:_.buffer,offset:P*b,count:b}},N.bounds=r(_.bounds,P,L)),c.domain||c.viewport||c.data){var V=g?r(_.padding,P,L):_.padding;if(_.domain){var F=r(_.domain,P,L),j=F[0],Z=F[1],z=F[2],H=F[3];N.viewport=[h+j*y+V[0],E+Z*M+V[1],h+z*y-V[2],E+H*M-V[3]]}else N.viewport=[h+L*k+k*V[0],E+P*D+D*V[1],h+(L+1)*k-k*V[2],E+(P+1)*D-D*V[3]]}c.color&&(N.color=_.color),c.size&&(N.size=_.size),c.marker&&(N.marker=_.marker),c.borderSize&&(N.borderSize=_.borderSize),c.borderColor&&(N.borderColor=_.borderColor),c.opacity&&(N.opacity=_.opacity),c.range&&(N.range=d?r(_.range,P,L):_.range||N.bounds),_.passes.push(O)}return this},t.prototype.draw=function(){for(var a,u=[],l=arguments.length;l--;)u[l]=arguments[l];if(u.length){for(var d=[],c=0;c<u.length;c++)if(typeof u[c]=="number"){var _=this.traces[u[c]],p=_.passes,g=_.passOffset;d.push.apply(d,x(g,g+p.length))}else if(u[c].length){var m=u[c],b=this.traces[c],y=b.passes,M=b.passOffset;y=y.map(function(h,E){d[M+E]=m})}(a=this.scatter).draw.apply(a,d)}else this.scatter.draw();return this},t.prototype.destroy=function(){return this.traces.forEach(function(a){a.buffer&&a.buffer.destroy&&a.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},28624:function(C){C.exports=function(){function A(Ve,$e){this.id=oe++,this.type=Ve,this.data=$e}function e(Ve){if(Ve.length===0)return[];var $e=Ve.charAt(0),lt=Ve.charAt(Ve.length-1);if(1<Ve.length&&$e===lt&&($e==='"'||$e==="'"))return['"'+Ve.substr(1,Ve.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if($e=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Ve))return e(Ve.substr(0,$e.index)).concat(e($e[1])).concat(e(Ve.substr($e.index+$e[0].length)));if(($e=Ve.split(".")).length===1)return['"'+Ve.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(Ve=[],lt=0;lt<$e.length;++lt)Ve=Ve.concat(e($e[lt]));return Ve}function v(Ve){return"["+e(Ve).join("][")+"]"}function w(Ve){return typeof Ve=="string"?Ve.split():Ve}function n(Ve){return typeof Ve=="string"?document.querySelector(Ve):Ve}function T(Ve){var $e,lt,it,Be,je=Ve||{};Ve={};var ot=[],Ze=[],dt=typeof window>"u"?1:window.devicePixelRatio,mt=!1,yt={},ht=function(_t){},kt=function(){};if(typeof je=="string"?$e=document.querySelector(je):typeof je=="object"&&(typeof je.nodeName=="string"&&typeof je.appendChild=="function"&&typeof je.getBoundingClientRect=="function"?$e=je:typeof je.drawArrays=="function"||typeof je.drawElements=="function"?it=(Be=je).canvas:("gl"in je?Be=je.gl:"canvas"in je?it=n(je.canvas):"container"in je&&(lt=n(je.container)),"attributes"in je&&(Ve=je.attributes),"extensions"in je&&(ot=w(je.extensions)),"optionalExtensions"in je&&(Ze=w(je.optionalExtensions)),"onDone"in je&&(ht=je.onDone),"profile"in je&&(mt=!!je.profile),"pixelRatio"in je&&(dt=+je.pixelRatio),"cachedCode"in je&&(yt=je.cachedCode))),$e&&($e.nodeName.toLowerCase()==="canvas"?it=$e:lt=$e),!Be){if(!it){if(!($e=function(_t,Et,Lt){function Ot(){var Ht=window.innerWidth,Ut=window.innerHeight;_t!==document.body&&(Ht=(Ut=Zt.getBoundingClientRect()).right-Ut.left,Ut=Ut.bottom-Ut.top),Zt.width=Lt*Ht,Zt.height=Lt*Ut}var Ft,Zt=document.createElement("canvas");return K(Zt.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),_t.appendChild(Zt),_t===document.body&&(Zt.style.position="absolute",K(_t.style,{margin:0,padding:0})),_t!==document.body&&typeof ResizeObserver=="function"?(Ft=new ResizeObserver(function(){setTimeout(Ot)})).observe(_t):window.addEventListener("resize",Ot,!1),Ot(),{canvas:Zt,onDestroy:function(){Ft?Ft.disconnect():window.removeEventListener("resize",Ot),_t.removeChild(Zt)}}}(lt||document.body,0,dt)))return null;it=$e.canvas,kt=$e.onDestroy}Ve.premultipliedAlpha===void 0&&(Ve.premultipliedAlpha=!0),Be=function(_t,Et){function Lt(Ot){try{return _t.getContext(Ot,Et)}catch{return null}}return Lt("webgl")||Lt("experimental-webgl")||Lt("webgl-experimental")}(it,Ve)}return Be?{gl:Be,canvas:it,container:lt,extensions:ot,optionalExtensions:Ze,pixelRatio:dt,profile:mt,cachedCode:yt,onDone:ht,onDestroy:kt}:(kt(),ht("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function x(Ve,$e){for(var lt=Array(Ve),it=0;it<Ve;++it)lt[it]=$e(it);return lt}function f(Ve){var $e,lt;return $e=(65535<Ve)<<4,$e|=lt=(255<(Ve>>>=$e))<<3,($e|=lt=(15<(Ve>>>=lt))<<2)|(lt=(3<(Ve>>>=lt))<<1)|Ve>>>lt>>1}function s(){function Ve(it){e:{for(var Be=16;268435456>=Be;Be*=16)if(it<=Be){it=Be;break e}it=0}return 0<(Be=lt[f(it)>>2]).length?Be.pop():new ArrayBuffer(it)}function $e(it){lt[f(it.byteLength)>>2].push(it)}var lt=x(8,function(){return[]});return{alloc:Ve,free:$e,allocType:function(it,Be){var je=null;switch(it){case 5120:je=new Int8Array(Ve(Be),0,Be);break;case 5121:je=new Uint8Array(Ve(Be),0,Be);break;case 5122:je=new Int16Array(Ve(2*Be),0,Be);break;case 5123:je=new Uint16Array(Ve(2*Be),0,Be);break;case 5124:je=new Int32Array(Ve(4*Be),0,Be);break;case 5125:je=new Uint32Array(Ve(4*Be),0,Be);break;case 5126:je=new Float32Array(Ve(4*Be),0,Be);break;default:return null}return je.length!==Be?je.subarray(0,Be):je},freeType:function(it){$e(it.buffer)}}}function t(Ve){return!!Ve&&typeof Ve=="object"&&Array.isArray(Ve.shape)&&Array.isArray(Ve.stride)&&typeof Ve.offset=="number"&&Ve.shape.length===Ve.stride.length&&(Array.isArray(Ve.data)||xe(Ve.data))}function o(Ve,$e,lt,it,Be,je){for(var ot=0;ot<$e;++ot)for(var Ze=Ve[ot],dt=0;dt<lt;++dt)for(var mt=Ze[dt],yt=0;yt<it;++yt)Be[je++]=mt[yt]}function r(Ve,$e,lt,it,Be){for(var je=1,ot=lt+1;ot<$e.length;++ot)je*=$e[ot];var Ze=$e[lt];if($e.length-lt==4){var dt=$e[lt+1],mt=$e[lt+2];for($e=$e[lt+3],ot=0;ot<Ze;++ot)o(Ve[ot],dt,mt,$e,it,Be),Be+=je}else for(ot=0;ot<Ze;++ot)r(Ve[ot],$e,lt+1,it,Be),Be+=je}function i(Ve){return 0|me[Object.prototype.toString.call(Ve)]}function a(Ve,$e){for(var lt=0;lt<$e.length;++lt)Ve[lt]=$e[lt]}function u(Ve,$e,lt,it,Be,je,ot){for(var Ze=0,dt=0;dt<lt;++dt)for(var mt=0;mt<it;++mt)Ve[Ze++]=$e[Be*dt+je*mt+ot]}function l(Ve,$e,lt,it){function Be(ht){this.id=dt++,this.buffer=Ve.createBuffer(),this.type=ht,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,lt.profile&&(this.stats={size:0})}function je(ht,kt,_t){ht.byteLength=kt.byteLength,Ve.bufferData(ht.type,kt,_t)}function ot(ht,kt,_t,Et,Lt,Ot){if(ht.usage=_t,Array.isArray(kt)){if(ht.dtype=Et||5126,0<kt.length)if(Array.isArray(kt[0])){Lt=ae(kt);for(var Ft=Et=1;Ft<Lt.length;++Ft)Et*=Lt[Ft];ht.dimension=Et,je(ht,kt=ce(kt,Lt,ht.dtype),_t),Ot?ht.persistentData=kt:be.freeType(kt)}else typeof kt[0]=="number"?(ht.dimension=Lt,a(Lt=be.allocType(ht.dtype,kt.length),kt),je(ht,Lt,_t),Ot?ht.persistentData=Lt:be.freeType(Lt)):xe(kt[0])&&(ht.dimension=kt[0].length,ht.dtype=Et||i(kt[0])||5126,je(ht,kt=ce(kt,[kt.length,kt[0].length],ht.dtype),_t),Ot?ht.persistentData=kt:be.freeType(kt))}else if(xe(kt))ht.dtype=Et||i(kt),ht.dimension=Lt,je(ht,kt,_t),Ot&&(ht.persistentData=new Uint8Array(new Uint8Array(kt.buffer)));else if(t(kt)){Lt=kt.shape;var Zt=kt.stride,Ht=(Ft=kt.offset,0),Ut=0,Wt=0,nn=0;Lt.length===1?(Ht=Lt[0],Ut=1,Wt=Zt[0],nn=0):Lt.length===2&&(Ht=Lt[0],Ut=Lt[1],Wt=Zt[0],nn=Zt[1]),ht.dtype=Et||i(kt.data)||5126,ht.dimension=Ut,u(Lt=be.allocType(ht.dtype,Ht*Ut),kt.data,Ht,Ut,Wt,nn,Ft),je(ht,Lt,_t),Ot?ht.persistentData=Lt:be.freeType(Lt)}else kt instanceof ArrayBuffer&&(ht.dtype=5121,ht.dimension=Lt,je(ht,kt,_t),Ot&&(ht.persistentData=new Uint8Array(new Uint8Array(kt))))}function Ze(ht){$e.bufferCount--,it(ht),Ve.deleteBuffer(ht.buffer),ht.buffer=null,delete mt[ht.id]}var dt=0,mt={};Be.prototype.bind=function(){Ve.bindBuffer(this.type,this.buffer)},Be.prototype.destroy=function(){Ze(this)};var yt=[];return lt.profile&&($e.getTotalBufferSize=function(){var ht=0;return Object.keys(mt).forEach(function(kt){ht+=mt[kt].stats.size}),ht}),{create:function(ht,kt,_t,Et){function Lt(Ft){var Zt=35044,Ht=null,Ut=0,Wt=0,nn=1;return Array.isArray(Ft)||xe(Ft)||t(Ft)||Ft instanceof ArrayBuffer?Ht=Ft:typeof Ft=="number"?Ut=0|Ft:Ft&&("data"in Ft&&(Ht=Ft.data),"usage"in Ft&&(Zt=Ae[Ft.usage]),"type"in Ft&&(Wt=Me[Ft.type]),"dimension"in Ft&&(nn=0|Ft.dimension),"length"in Ft&&(Ut=0|Ft.length)),Ot.bind(),Ht?ot(Ot,Ht,Zt,Wt,nn,Et):(Ut&&Ve.bufferData(Ot.type,Ut,Zt),Ot.dtype=Wt||5121,Ot.usage=Zt,Ot.dimension=nn,Ot.byteLength=Ut),lt.profile&&(Ot.stats.size=Ot.byteLength*pe[Ot.dtype]),Lt}$e.bufferCount++;var Ot=new Be(kt);return mt[Ot.id]=Ot,_t||Lt(ht),Lt._reglType="buffer",Lt._buffer=Ot,Lt.subdata=function(Ft,Zt){var Ht,Ut=0|(Zt||0);if(Ot.bind(),xe(Ft)||Ft instanceof ArrayBuffer)Ve.bufferSubData(Ot.type,Ut,Ft);else if(Array.isArray(Ft)){if(0<Ft.length)if(typeof Ft[0]=="number"){var Wt=be.allocType(Ot.dtype,Ft.length);a(Wt,Ft),Ve.bufferSubData(Ot.type,Ut,Wt),be.freeType(Wt)}else(Array.isArray(Ft[0])||xe(Ft[0]))&&(Ht=ae(Ft),Wt=ce(Ft,Ht,Ot.dtype),Ve.bufferSubData(Ot.type,Ut,Wt),be.freeType(Wt))}else if(t(Ft)){Ht=Ft.shape;var nn=Ft.stride,On=Wt=0,kn=0,gn=0;Ht.length===1?(Wt=Ht[0],On=1,kn=nn[0],gn=0):Ht.length===2&&(Wt=Ht[0],On=Ht[1],kn=nn[0],gn=nn[1]),Ht=Array.isArray(Ft.data)?Ot.dtype:i(Ft.data),u(Ht=be.allocType(Ht,Wt*On),Ft.data,Wt,On,kn,gn,Ft.offset),Ve.bufferSubData(Ot.type,Ut,Ht),be.freeType(Ht)}return Lt},lt.profile&&(Lt.stats=Ot.stats),Lt.destroy=function(){Ze(Ot)},Lt},createStream:function(ht,kt){var _t=yt.pop();return _t||(_t=new Be(ht)),_t.bind(),ot(_t,kt,35040,0,1,!1),_t},destroyStream:function(ht){yt.push(ht)},clear:function(){ve(mt).forEach(Ze),yt.forEach(Ze)},getBuffer:function(ht){return ht&&ht._buffer instanceof Be?ht._buffer:null},restore:function(){ve(mt).forEach(function(ht){ht.buffer=Ve.createBuffer(),Ve.bindBuffer(ht.type,ht.buffer),Ve.bufferData(ht.type,ht.persistentData||ht.byteLength,ht.usage)})},_initBuffer:ot}}function d(Ve,$e,lt,it){function Be(ht){this.id=dt++,Ze[this.id]=this,this.buffer=ht,this.primType=4,this.type=this.vertCount=0}function je(ht,kt,_t,Et,Lt,Ot,Ft){var Zt;if(ht.buffer.bind(),kt?((Zt=Ft)||xe(kt)&&(!t(kt)||xe(kt.data))||(Zt=$e.oes_element_index_uint?5125:5123),lt._initBuffer(ht.buffer,kt,_t,Zt,3)):(Ve.bufferData(34963,Ot,_t),ht.buffer.dtype=Zt||5121,ht.buffer.usage=_t,ht.buffer.dimension=3,ht.buffer.byteLength=Ot),Zt=Ft,!Ft){switch(ht.buffer.dtype){case 5121:case 5120:Zt=5121;break;case 5123:case 5122:Zt=5123;break;case 5125:case 5124:Zt=5125}ht.buffer.dtype=Zt}ht.type=Zt,0>(kt=Lt)&&(kt=ht.buffer.byteLength,Zt===5123?kt>>=1:Zt===5125&&(kt>>=2)),ht.vertCount=kt,kt=Et,0>Et&&(kt=4,(Et=ht.buffer.dimension)===1&&(kt=0),Et===2&&(kt=1),Et===3&&(kt=4)),ht.primType=kt}function ot(ht){it.elementsCount--,delete Ze[ht.id],ht.buffer.destroy(),ht.buffer=null}var Ze={},dt=0,mt={uint8:5121,uint16:5123};$e.oes_element_index_uint&&(mt.uint32=5125),Be.prototype.bind=function(){this.buffer.bind()};var yt=[];return{create:function(ht,kt){function _t(Ot){if(Ot)if(typeof Ot=="number")Et(Ot),Lt.primType=4,Lt.vertCount=0|Ot,Lt.type=5121;else{var Ft=null,Zt=35044,Ht=-1,Ut=-1,Wt=0,nn=0;Array.isArray(Ot)||xe(Ot)||t(Ot)?Ft=Ot:("data"in Ot&&(Ft=Ot.data),"usage"in Ot&&(Zt=Ae[Ot.usage]),"primitive"in Ot&&(Ht=De[Ot.primitive]),"count"in Ot&&(Ut=0|Ot.count),"type"in Ot&&(nn=mt[Ot.type]),"length"in Ot?Wt=0|Ot.length:(Wt=Ut,nn===5123||nn===5122?Wt*=2:nn!==5125&&nn!==5124||(Wt*=4))),je(Lt,Ft,Zt,Ht,Ut,Wt,nn)}else Et(),Lt.primType=4,Lt.vertCount=0,Lt.type=5121;return _t}var Et=lt.create(null,34963,!0),Lt=new Be(Et._buffer);return it.elementsCount++,_t(ht),_t._reglType="elements",_t._elements=Lt,_t.subdata=function(Ot,Ft){return Et.subdata(Ot,Ft),_t},_t.destroy=function(){ot(Lt)},_t},createStream:function(ht){var kt=yt.pop();return kt||(kt=new Be(lt.create(null,34963,!0,!1)._buffer)),je(kt,ht,35040,-1,-1,0,0),kt},destroyStream:function(ht){yt.push(ht)},getElements:function(ht){return typeof ht=="function"&&ht._elements instanceof Be?ht._elements:null},clear:function(){ve(Ze).forEach(ot)}}}function c(Ve){for(var $e=be.allocType(5123,Ve.length),lt=0;lt<Ve.length;++lt)if(isNaN(Ve[lt]))$e[lt]=65535;else if(Ve[lt]===1/0)$e[lt]=31744;else if(Ve[lt]===-1/0)$e[lt]=64512;else{ke[0]=Ve[lt];var it=(je=Ee[0])>>>31<<15,Be=(je<<1>>>24)-127,je=je>>13&1023;$e[lt]=-24>Be?it:-14>Be?it+(je+1024>>-14-Be):15<Be?it+31744:it+(Be+15<<10)+je}return $e}function _(Ve){return Array.isArray(Ve)||xe(Ve)}function p(Ve){return"[object "+Ve+"]"}function g(Ve){return Array.isArray(Ve)&&(Ve.length===0||typeof Ve[0]=="number")}function m(Ve){return!(!Array.isArray(Ve)||Ve.length===0||!_(Ve[0]))}function b(Ve){return Object.prototype.toString.call(Ve)}function y(Ve){if(!Ve)return!1;var $e=b(Ve);return 0<=Ge.indexOf($e)||g(Ve)||m(Ve)||t(Ve)}function M(Ve,$e){Ve.type===36193?(Ve.data=c($e),be.freeType($e)):Ve.data=$e}function h(Ve,$e,lt,it,Be,je){if(Ve=st[Ve]!==void 0?st[Ve]:Ne[Ve]*Xe[$e],je&&(Ve*=6),Be){for(it=0;1<=lt;)it+=Ve*lt*lt,lt/=2;return it}return Ve*lt*it}function E(Ve,$e,lt,it,Be,je,ot){function Ze(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function dt(Kt,mn){Kt.internalformat=mn.internalformat,Kt.format=mn.format,Kt.type=mn.type,Kt.compressed=mn.compressed,Kt.premultiplyAlpha=mn.premultiplyAlpha,Kt.flipY=mn.flipY,Kt.unpackAlignment=mn.unpackAlignment,Kt.colorSpace=mn.colorSpace,Kt.width=mn.width,Kt.height=mn.height,Kt.channels=mn.channels}function mt(Kt,mn){if(typeof mn=="object"&&mn){"premultiplyAlpha"in mn&&(Kt.premultiplyAlpha=mn.premultiplyAlpha),"flipY"in mn&&(Kt.flipY=mn.flipY),"alignment"in mn&&(Kt.unpackAlignment=mn.alignment),"colorSpace"in mn&&(Kt.colorSpace=Cn[mn.colorSpace]),"type"in mn&&(Kt.type=Mn[mn.type]);var Dt=Kt.width,Bt=Kt.height,Qt=Kt.channels,fn=!1;"shape"in mn?(Dt=mn.shape[0],Bt=mn.shape[1],mn.shape.length===3&&(Qt=mn.shape[2],fn=!0)):("radius"in mn&&(Dt=Bt=mn.radius),"width"in mn&&(Dt=mn.width),"height"in mn&&(Bt=mn.height),"channels"in mn&&(Qt=mn.channels,fn=!0)),Kt.width=0|Dt,Kt.height=0|Bt,Kt.channels=0|Qt,Dt=!1,"format"in mn&&(Dt=mn.format,Bt=Kt.internalformat=Bn[Dt],Kt.format=Dn[Bt],Dt in Mn&&!("type"in mn)&&(Kt.type=Mn[Dt]),Dt in Nn&&(Kt.compressed=!0),Dt=!0),!fn&&Dt?Kt.channels=Ne[Kt.format]:fn&&!Dt&&Kt.channels!==Re[Kt.format]&&(Kt.format=Kt.internalformat=Re[Kt.channels])}}function yt(Kt){Ve.pixelStorei(37440,Kt.flipY),Ve.pixelStorei(37441,Kt.premultiplyAlpha),Ve.pixelStorei(37443,Kt.colorSpace),Ve.pixelStorei(3317,Kt.unpackAlignment)}function ht(){Ze.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function kt(Kt,mn){var Dt=null;if(y(mn)?Dt=mn:mn&&(mt(Kt,mn),"x"in mn&&(Kt.xOffset=0|mn.x),"y"in mn&&(Kt.yOffset=0|mn.y),y(mn.data)&&(Dt=mn.data)),mn.copy){var Bt=Be.viewportWidth,Qt=Be.viewportHeight;Kt.width=Kt.width||Bt-Kt.xOffset,Kt.height=Kt.height||Qt-Kt.yOffset,Kt.needsCopy=!0}else if(Dt){if(xe(Dt))Kt.channels=Kt.channels||4,Kt.data=Dt,"type"in mn||Kt.type!==5121||(Kt.type=0|me[Object.prototype.toString.call(Dt)]);else if(g(Dt)){switch(Kt.channels=Kt.channels||4,Qt=(Bt=Dt).length,Kt.type){case 5121:case 5123:case 5125:case 5126:(Qt=be.allocType(Kt.type,Qt)).set(Bt),Kt.data=Qt;break;case 36193:Kt.data=c(Bt)}Kt.alignment=1,Kt.needsFree=!0}else if(t(Dt)){Bt=Dt.data,Array.isArray(Bt)||Kt.type!==5121||(Kt.type=0|me[Object.prototype.toString.call(Bt)]),Qt=Dt.shape;var fn,dn,xn,sn,$t=Dt.stride;Qt.length===3?(xn=Qt[2],sn=$t[2]):sn=xn=1,fn=Qt[0],dn=Qt[1],Qt=$t[0],$t=$t[1],Kt.alignment=1,Kt.width=fn,Kt.height=dn,Kt.channels=xn,Kt.format=Kt.internalformat=Re[xn],Kt.needsFree=!0,fn=sn,Dt=Dt.offset,xn=Kt.width,sn=Kt.height,dn=Kt.channels;for(var Yt=be.allocType(Kt.type===36193?5126:Kt.type,xn*sn*dn),rn=0,ln=0;ln<sn;++ln)for(var An=0;An<xn;++An)for(var En=0;En<dn;++En)Yt[rn++]=Bt[Qt*An+$t*ln+fn*En+Dt];M(Kt,Yt)}else if(b(Dt)===ge||b(Dt)===we||b(Dt)===Ce)b(Dt)===ge||b(Dt)===we?Kt.element=Dt:Kt.element=Dt.canvas,Kt.width=Kt.element.width,Kt.height=Kt.element.height,Kt.channels=4;else if(b(Dt)===ze)Kt.element=Dt,Kt.width=Dt.width,Kt.height=Dt.height,Kt.channels=4;else if(b(Dt)===Pe)Kt.element=Dt,Kt.width=Dt.naturalWidth,Kt.height=Dt.naturalHeight,Kt.channels=4;else if(b(Dt)===Ue)Kt.element=Dt,Kt.width=Dt.videoWidth,Kt.height=Dt.videoHeight,Kt.channels=4;else if(m(Dt)){for(Bt=Kt.width||Dt[0].length,Qt=Kt.height||Dt.length,$t=Kt.channels,$t=_(Dt[0][0])?$t||Dt[0][0].length:$t||1,fn=ye.shape(Dt),xn=1,sn=0;sn<fn.length;++sn)xn*=fn[sn];xn=be.allocType(Kt.type===36193?5126:Kt.type,xn),ye.flatten(Dt,fn,"",xn),M(Kt,xn),Kt.alignment=1,Kt.width=Bt,Kt.height=Qt,Kt.channels=$t,Kt.format=Kt.internalformat=Re[$t],Kt.needsFree=!0}}else Kt.width=Kt.width||1,Kt.height=Kt.height||1,Kt.channels=Kt.channels||4}function _t(Kt,mn,Dt,Bt,Qt){var fn=Kt.element,dn=Kt.data,xn=Kt.internalformat,sn=Kt.format,$t=Kt.type,Yt=Kt.width,rn=Kt.height;yt(Kt),fn?Ve.texSubImage2D(mn,Qt,Dt,Bt,sn,$t,fn):Kt.compressed?Ve.compressedTexSubImage2D(mn,Qt,Dt,Bt,xn,Yt,rn,dn):Kt.needsCopy?(it(),Ve.copyTexSubImage2D(mn,Qt,Dt,Bt,Kt.xOffset,Kt.yOffset,Yt,rn)):Ve.texSubImage2D(mn,Qt,Dt,Bt,Yt,rn,sn,$t,dn)}function Et(){return yn.pop()||new ht}function Lt(Kt){Kt.needsFree&&be.freeType(Kt.data),ht.call(Kt),yn.push(Kt)}function Ot(){Ze.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function Ft(Kt,mn,Dt){var Bt=Kt.images[0]=Et();Kt.mipmask=1,Bt.width=Kt.width=mn,Bt.height=Kt.height=Dt,Bt.channels=Kt.channels=4}function Zt(Kt,mn){var Dt=null;if(y(mn))dt(Dt=Kt.images[0]=Et(),Kt),kt(Dt,mn),Kt.mipmask=1;else if(mt(Kt,mn),Array.isArray(mn.mipmap))for(var Bt=mn.mipmap,Qt=0;Qt<Bt.length;++Qt)dt(Dt=Kt.images[Qt]=Et(),Kt),Dt.width>>=Qt,Dt.height>>=Qt,kt(Dt,Bt[Qt]),Kt.mipmask|=1<<Qt;else dt(Dt=Kt.images[0]=Et(),Kt),kt(Dt,mn),Kt.mipmask=1;dt(Kt,Kt.images[0])}function Ht(Kt,mn){for(var Dt=Kt.images,Bt=0;Bt<Dt.length&&Dt[Bt];++Bt){var Qt=Dt[Bt],fn=mn,dn=Bt,xn=Qt.element,sn=Qt.data,$t=Qt.internalformat,Yt=Qt.format,rn=Qt.type,ln=Qt.width,An=Qt.height;yt(Qt),xn?Ve.texImage2D(fn,dn,Yt,Yt,rn,xn):Qt.compressed?Ve.compressedTexImage2D(fn,dn,$t,ln,An,0,sn):Qt.needsCopy?(it(),Ve.copyTexImage2D(fn,dn,Yt,Qt.xOffset,Qt.yOffset,ln,An,0)):Ve.texImage2D(fn,dn,Yt,ln,An,0,Yt,rn,sn||null)}}function Ut(){var Kt=Ln.pop()||new Ot;Ze.call(Kt);for(var mn=Kt.mipmask=0;16>mn;++mn)Kt.images[mn]=null;return Kt}function Wt(Kt){for(var mn=Kt.images,Dt=0;Dt<mn.length;++Dt)mn[Dt]&&Lt(mn[Dt]),mn[Dt]=null;Ln.push(Kt)}function nn(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function On(Kt,mn){"min"in mn&&(Kt.minFilter=Pn[mn.min],0<=Ie.indexOf(Kt.minFilter)&&!("faces"in mn)&&(Kt.genMipmaps=!0)),"mag"in mn&&(Kt.magFilter=wn[mn.mag]);var Dt=Kt.wrapS,Bt=Kt.wrapT;if("wrap"in mn){var Qt=mn.wrap;typeof Qt=="string"?Dt=Bt=bn[Qt]:Array.isArray(Qt)&&(Dt=bn[Qt[0]],Bt=bn[Qt[1]])}else"wrapS"in mn&&(Dt=bn[mn.wrapS]),"wrapT"in mn&&(Bt=bn[mn.wrapT]);if(Kt.wrapS=Dt,Kt.wrapT=Bt,"anisotropic"in mn&&(Kt.anisotropic=mn.anisotropic),"mipmap"in mn){switch(Dt=!1,typeof mn.mipmap){case"string":Kt.mipmapHint=hn[mn.mipmap],Dt=Kt.genMipmaps=!0;break;case"boolean":Dt=Kt.genMipmaps=mn.mipmap;break;case"object":Kt.genMipmaps=!1,Dt=!0}!Dt||"min"in mn||(Kt.minFilter=9984)}}function kn(Kt,mn){Ve.texParameteri(mn,10241,Kt.minFilter),Ve.texParameteri(mn,10240,Kt.magFilter),Ve.texParameteri(mn,10242,Kt.wrapS),Ve.texParameteri(mn,10243,Kt.wrapT),$e.ext_texture_filter_anisotropic&&Ve.texParameteri(mn,34046,Kt.anisotropic),Kt.genMipmaps&&(Ve.hint(33170,Kt.mipmapHint),Ve.generateMipmap(mn))}function gn(Kt){Ze.call(this),this.mipmask=0,this.internalformat=6408,this.id=Wn++,this.refCount=1,this.target=Kt,this.texture=Ve.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new nn,ot.profile&&(this.stats={size:0})}function Jt(Kt){Ve.activeTexture(33984),Ve.bindTexture(Kt.target,Kt.texture)}function un(){var Kt=pr[0];Kt?Ve.bindTexture(Kt.target,Kt.texture):Ve.bindTexture(3553,null)}function tn(Kt){var mn=Kt.texture,Dt=Kt.unit,Bt=Kt.target;0<=Dt&&(Ve.activeTexture(33984+Dt),Ve.bindTexture(Bt,null),pr[Dt]=null),Ve.deleteTexture(mn),Kt.texture=null,Kt.params=null,Kt.pixels=null,Kt.refCount=0,delete Un[Kt.id],je.textureCount--}var hn={"don't care":4352,"dont care":4352,nice:4354,fast:4353},bn={repeat:10497,clamp:33071,mirror:33648},wn={nearest:9728,linear:9729},Pn=K({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},wn),Cn={none:0,browser:37444},Mn={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Bn={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Nn={};$e.ext_srgb&&(Bn.srgb=35904,Bn.srgba=35906),$e.oes_texture_float&&(Mn.float32=Mn.float=5126),$e.oes_texture_half_float&&(Mn.float16=Mn["half float"]=36193),$e.webgl_depth_texture&&(K(Bn,{depth:6402,"depth stencil":34041}),K(Mn,{uint16:5123,uint32:5125,"depth stencil":34042})),$e.webgl_compressed_texture_s3tc&&K(Nn,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),$e.webgl_compressed_texture_atc&&K(Nn,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),$e.webgl_compressed_texture_pvrtc&&K(Nn,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),$e.webgl_compressed_texture_etc1&&(Nn["rgb etc1"]=36196);var rr=Array.prototype.slice.call(Ve.getParameter(34467));Object.keys(Nn).forEach(function(Kt){var mn=Nn[Kt];0<=rr.indexOf(mn)&&(Bn[Kt]=mn)});var Yn=Object.keys(Bn);lt.textureFormats=Yn;var ir=[];Object.keys(Bn).forEach(function(Kt){ir[Bn[Kt]]=Kt});var Zn=[];Object.keys(Mn).forEach(function(Kt){Zn[Mn[Kt]]=Kt});var ur=[];Object.keys(wn).forEach(function(Kt){ur[wn[Kt]]=Kt});var en=[];Object.keys(Pn).forEach(function(Kt){en[Pn[Kt]]=Kt});var on=[];Object.keys(bn).forEach(function(Kt){on[bn[Kt]]=Kt});var Dn=Yn.reduce(function(Kt,mn){var Dt=Bn[mn];return Dt===6409||Dt===6406||Dt===6409||Dt===6410||Dt===6402||Dt===34041||$e.ext_srgb&&(Dt===35904||Dt===35906)?Kt[Dt]=Dt:Dt===32855||0<=mn.indexOf("rgba")?Kt[Dt]=6408:Kt[Dt]=6407,Kt},{}),yn=[],Ln=[],Wn=0,Un={},Xn=lt.maxTextureUnits,pr=Array(Xn).map(function(){return null});return K(gn.prototype,{bind:function(){this.bindCount+=1;var Kt=this.unit;if(0>Kt){for(var mn=0;mn<Xn;++mn){var Dt=pr[mn];if(Dt){if(0<Dt.bindCount)continue;Dt.unit=-1}pr[mn]=this,Kt=mn;break}ot.profile&&je.maxTextureUnits<Kt+1&&(je.maxTextureUnits=Kt+1),this.unit=Kt,Ve.activeTexture(33984+Kt),Ve.bindTexture(this.target,this.texture)}return Kt},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&tn(this)}}),ot.profile&&(je.getTotalTextureSize=function(){var Kt=0;return Object.keys(Un).forEach(function(mn){Kt+=Un[mn].stats.size}),Kt}),{create2D:function(Kt,mn){function Dt(Qt,fn){var dn=Bt.texInfo;nn.call(dn);var xn=Ut();return typeof Qt=="number"?Ft(xn,0|Qt,typeof fn=="number"?0|fn:0|Qt):Qt?(On(dn,Qt),Zt(xn,Qt)):Ft(xn,1,1),dn.genMipmaps&&(xn.mipmask=(xn.width<<1)-1),Bt.mipmask=xn.mipmask,dt(Bt,xn),Bt.internalformat=xn.internalformat,Dt.width=xn.width,Dt.height=xn.height,Jt(Bt),Ht(xn,3553),kn(dn,3553),un(),Wt(xn),ot.profile&&(Bt.stats.size=h(Bt.internalformat,Bt.type,xn.width,xn.height,dn.genMipmaps,!1)),Dt.format=ir[Bt.internalformat],Dt.type=Zn[Bt.type],Dt.mag=ur[dn.magFilter],Dt.min=en[dn.minFilter],Dt.wrapS=on[dn.wrapS],Dt.wrapT=on[dn.wrapT],Dt}var Bt=new gn(3553);return Un[Bt.id]=Bt,je.textureCount++,Dt(Kt,mn),Dt.subimage=function(Qt,fn,dn,xn){fn|=0,dn|=0,xn|=0;var sn=Et();return dt(sn,Bt),sn.width=0,sn.height=0,kt(sn,Qt),sn.width=sn.width||(Bt.width>>xn)-fn,sn.height=sn.height||(Bt.height>>xn)-dn,Jt(Bt),_t(sn,3553,fn,dn,xn),un(),Lt(sn),Dt},Dt.resize=function(Qt,fn){var dn=0|Qt,xn=0|fn||dn;if(dn===Bt.width&&xn===Bt.height)return Dt;Dt.width=Bt.width=dn,Dt.height=Bt.height=xn,Jt(Bt);for(var sn=0;Bt.mipmask>>sn;++sn){var $t=dn>>sn,Yt=xn>>sn;if(!$t||!Yt)break;Ve.texImage2D(3553,sn,Bt.format,$t,Yt,0,Bt.format,Bt.type,null)}return un(),ot.profile&&(Bt.stats.size=h(Bt.internalformat,Bt.type,dn,xn,!1,!1)),Dt},Dt._reglType="texture2d",Dt._texture=Bt,ot.profile&&(Dt.stats=Bt.stats),Dt.destroy=function(){Bt.decRef()},Dt},createCube:function(Kt,mn,Dt,Bt,Qt,fn){function dn($t,Yt,rn,ln,An,En){var Rn,jn=xn.texInfo;for(nn.call(jn),Rn=0;6>Rn;++Rn)sn[Rn]=Ut();if(typeof $t!="number"&&$t){if(typeof $t=="object")if(Yt)Zt(sn[0],$t),Zt(sn[1],Yt),Zt(sn[2],rn),Zt(sn[3],ln),Zt(sn[4],An),Zt(sn[5],En);else if(On(jn,$t),mt(xn,$t),"faces"in $t)for($t=$t.faces,Rn=0;6>Rn;++Rn)dt(sn[Rn],xn),Zt(sn[Rn],$t[Rn]);else for(Rn=0;6>Rn;++Rn)Zt(sn[Rn],$t)}else for($t=0|$t||1,Rn=0;6>Rn;++Rn)Ft(sn[Rn],$t,$t);for(dt(xn,sn[0]),xn.mipmask=jn.genMipmaps?(sn[0].width<<1)-1:sn[0].mipmask,xn.internalformat=sn[0].internalformat,dn.width=sn[0].width,dn.height=sn[0].height,Jt(xn),Rn=0;6>Rn;++Rn)Ht(sn[Rn],34069+Rn);for(kn(jn,34067),un(),ot.profile&&(xn.stats.size=h(xn.internalformat,xn.type,dn.width,dn.height,jn.genMipmaps,!0)),dn.format=ir[xn.internalformat],dn.type=Zn[xn.type],dn.mag=ur[jn.magFilter],dn.min=en[jn.minFilter],dn.wrapS=on[jn.wrapS],dn.wrapT=on[jn.wrapT],Rn=0;6>Rn;++Rn)Wt(sn[Rn]);return dn}var xn=new gn(34067);Un[xn.id]=xn,je.cubeCount++;var sn=Array(6);return dn(Kt,mn,Dt,Bt,Qt,fn),dn.subimage=function($t,Yt,rn,ln,An){rn|=0,ln|=0,An|=0;var En=Et();return dt(En,xn),En.width=0,En.height=0,kt(En,Yt),En.width=En.width||(xn.width>>An)-rn,En.height=En.height||(xn.height>>An)-ln,Jt(xn),_t(En,34069+$t,rn,ln,An),un(),Lt(En),dn},dn.resize=function($t){if(($t|=0)!==xn.width){dn.width=xn.width=$t,dn.height=xn.height=$t,Jt(xn);for(var Yt=0;6>Yt;++Yt)for(var rn=0;xn.mipmask>>rn;++rn)Ve.texImage2D(34069+Yt,rn,xn.format,$t>>rn,$t>>rn,0,xn.format,xn.type,null);return un(),ot.profile&&(xn.stats.size=h(xn.internalformat,xn.type,dn.width,dn.height,!1,!0)),dn}},dn._reglType="textureCube",dn._texture=xn,ot.profile&&(dn.stats=xn.stats),dn.destroy=function(){xn.decRef()},dn},clear:function(){for(var Kt=0;Kt<Xn;++Kt)Ve.activeTexture(33984+Kt),Ve.bindTexture(3553,null),pr[Kt]=null;ve(Un).forEach(tn),je.cubeCount=0,je.textureCount=0},getTexture:function(Kt){return null},restore:function(){for(var Kt=0;Kt<Xn;++Kt){var mn=pr[Kt];mn&&(mn.bindCount=0,mn.unit=-1,pr[Kt]=null)}ve(Un).forEach(function(Dt){Dt.texture=Ve.createTexture(),Ve.bindTexture(Dt.target,Dt.texture);for(var Bt=0;32>Bt;++Bt)if(Dt.mipmask&1<<Bt)if(Dt.target===3553)Ve.texImage2D(3553,Bt,Dt.internalformat,Dt.width>>Bt,Dt.height>>Bt,0,Dt.internalformat,Dt.type,null);else for(var Qt=0;6>Qt;++Qt)Ve.texImage2D(34069+Qt,Bt,Dt.internalformat,Dt.width>>Bt,Dt.height>>Bt,0,Dt.internalformat,Dt.type,null);kn(Dt.texInfo,Dt.target)})},refresh:function(){for(var Kt=0;Kt<Xn;++Kt){var mn=pr[Kt];mn&&(mn.bindCount=0,mn.unit=-1,pr[Kt]=null),Ve.activeTexture(33984+Kt),Ve.bindTexture(3553,null),Ve.bindTexture(34067,null)}}}}function k(Ve,$e,lt,it,Be,je){function ot(gn,Jt,un){this.target=gn,this.texture=Jt,this.renderbuffer=un;var tn=gn=0;Jt?(gn=Jt.width,tn=Jt.height):un&&(gn=un.width,tn=un.height),this.width=gn,this.height=tn}function Ze(gn){gn&&(gn.texture&&gn.texture._texture.decRef(),gn.renderbuffer&&gn.renderbuffer._renderbuffer.decRef())}function dt(gn,Jt,un){gn&&(gn.texture?gn.texture._texture.refCount+=1:gn.renderbuffer._renderbuffer.refCount+=1)}function mt(gn,Jt){Jt&&(Jt.texture?Ve.framebufferTexture2D(36160,gn,Jt.target,Jt.texture._texture.texture,0):Ve.framebufferRenderbuffer(36160,gn,36161,Jt.renderbuffer._renderbuffer.renderbuffer))}function yt(gn){var Jt=3553,un=null,tn=null,hn=gn;return typeof gn=="object"&&(hn=gn.data,"target"in gn&&(Jt=0|gn.target)),(gn=hn._reglType)==="texture2d"||gn==="textureCube"?un=hn:gn==="renderbuffer"&&(tn=hn,Jt=36161),new ot(Jt,un,tn)}function ht(gn,Jt,un,tn,hn){return un?((gn=it.create2D({width:gn,height:Jt,format:tn,type:hn}))._texture.refCount=0,new ot(3553,gn,null)):((gn=Be.create({width:gn,height:Jt,format:tn}))._renderbuffer.refCount=0,new ot(36161,null,gn))}function kt(gn){return gn&&(gn.texture||gn.renderbuffer)}function _t(gn,Jt,un){gn&&(gn.texture?gn.texture.resize(Jt,un):gn.renderbuffer&&gn.renderbuffer.resize(Jt,un),gn.width=Jt,gn.height=un)}function Et(){this.id=On++,kn[this.id]=this,this.framebuffer=Ve.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function Lt(gn){gn.colorAttachments.forEach(Ze),Ze(gn.depthAttachment),Ze(gn.stencilAttachment),Ze(gn.depthStencilAttachment)}function Ot(gn){Ve.deleteFramebuffer(gn.framebuffer),gn.framebuffer=null,je.framebufferCount--,delete kn[gn.id]}function Ft(gn){var Jt;Ve.bindFramebuffer(36160,gn.framebuffer);var un=gn.colorAttachments;for(Jt=0;Jt<un.length;++Jt)mt(36064+Jt,un[Jt]);for(Jt=un.length;Jt<lt.maxColorAttachments;++Jt)Ve.framebufferTexture2D(36160,36064+Jt,3553,null,0);Ve.framebufferTexture2D(36160,33306,3553,null,0),Ve.framebufferTexture2D(36160,36096,3553,null,0),Ve.framebufferTexture2D(36160,36128,3553,null,0),mt(36096,gn.depthAttachment),mt(36128,gn.stencilAttachment),mt(33306,gn.depthStencilAttachment),Ve.checkFramebufferStatus(36160),Ve.isContextLost(),Ve.bindFramebuffer(36160,Ht.next?Ht.next.framebuffer:null),Ht.cur=Ht.next,Ve.getError()}function Zt(gn,Jt){function un(hn,bn){var wn,Pn=0,Cn=0,Mn=!0,Bn=!0;wn=null;var Nn=!0,rr="rgba",Yn="uint8",ir=1,Zn=null,ur=null,en=null,on=!1;typeof hn=="number"?(Pn=0|hn,Cn=0|bn||Pn):hn?("shape"in hn?(Pn=(Cn=hn.shape)[0],Cn=Cn[1]):("radius"in hn&&(Pn=Cn=hn.radius),"width"in hn&&(Pn=hn.width),"height"in hn&&(Cn=hn.height)),("color"in hn||"colors"in hn)&&(wn=hn.color||hn.colors,Array.isArray(wn)),wn||("colorCount"in hn&&(ir=0|hn.colorCount),"colorTexture"in hn&&(Nn=!!hn.colorTexture,rr="rgba4"),"colorType"in hn&&(Yn=hn.colorType,!Nn)&&(Yn==="half float"||Yn==="float16"?rr="rgba16f":Yn!=="float"&&Yn!=="float32"||(rr="rgba32f")),"colorFormat"in hn&&(rr=hn.colorFormat,0<=Ut.indexOf(rr)?Nn=!0:0<=Wt.indexOf(rr)&&(Nn=!1))),("depthTexture"in hn||"depthStencilTexture"in hn)&&(on=!(!hn.depthTexture&&!hn.depthStencilTexture)),"depth"in hn&&(typeof hn.depth=="boolean"?Mn=hn.depth:(Zn=hn.depth,Bn=!1)),"stencil"in hn&&(typeof hn.stencil=="boolean"?Bn=hn.stencil:(ur=hn.stencil,Mn=!1)),"depthStencil"in hn&&(typeof hn.depthStencil=="boolean"?Mn=Bn=hn.depthStencil:(en=hn.depthStencil,Bn=Mn=!1))):Pn=Cn=1;var Dn=null,yn=null,Ln=null,Wn=null;if(Array.isArray(wn))Dn=wn.map(yt);else if(wn)Dn=[yt(wn)];else for(Dn=Array(ir),wn=0;wn<ir;++wn)Dn[wn]=ht(Pn,Cn,Nn,rr,Yn);for(Pn=Pn||Dn[0].width,Cn=Cn||Dn[0].height,Zn?yn=yt(Zn):Mn&&!Bn&&(yn=ht(Pn,Cn,on,"depth","uint32")),ur?Ln=yt(ur):Bn&&!Mn&&(Ln=ht(Pn,Cn,!1,"stencil","uint8")),en?Wn=yt(en):!Zn&&!ur&&Bn&&Mn&&(Wn=ht(Pn,Cn,on,"depth stencil","depth stencil")),Mn=null,wn=0;wn<Dn.length;++wn)dt(Dn[wn]),Dn[wn]&&Dn[wn].texture&&(Bn=xt[Dn[wn].texture._texture.format]*gt[Dn[wn].texture._texture.type],Mn===null&&(Mn=Bn));return dt(yn),dt(Ln),dt(Wn),Lt(tn),tn.width=Pn,tn.height=Cn,tn.colorAttachments=Dn,tn.depthAttachment=yn,tn.stencilAttachment=Ln,tn.depthStencilAttachment=Wn,un.color=Dn.map(kt),un.depth=kt(yn),un.stencil=kt(Ln),un.depthStencil=kt(Wn),un.width=tn.width,un.height=tn.height,Ft(tn),un}var tn=new Et;return je.framebufferCount++,un(gn,Jt),K(un,{resize:function(hn,bn){var wn=Math.max(0|hn,1),Pn=Math.max(0|bn||wn,1);if(wn===tn.width&&Pn===tn.height)return un;for(var Cn=tn.colorAttachments,Mn=0;Mn<Cn.length;++Mn)_t(Cn[Mn],wn,Pn);return _t(tn.depthAttachment,wn,Pn),_t(tn.stencilAttachment,wn,Pn),_t(tn.depthStencilAttachment,wn,Pn),tn.width=un.width=wn,tn.height=un.height=Pn,Ft(tn),un},_reglType:"framebuffer",_framebuffer:tn,destroy:function(){Ot(tn),Lt(tn)},use:function(hn){Ht.setFBO({framebuffer:un},hn)}})}var Ht={cur:null,next:null,dirty:!1,setFBO:null},Ut=["rgba"],Wt=["rgba4","rgb565","rgb5 a1"];$e.ext_srgb&&Wt.push("srgba"),$e.ext_color_buffer_half_float&&Wt.push("rgba16f","rgb16f"),$e.webgl_color_buffer_float&&Wt.push("rgba32f");var nn=["uint8"];$e.oes_texture_half_float&&nn.push("half float","float16"),$e.oes_texture_float&&nn.push("float","float32");var On=0,kn={};return K(Ht,{getFramebuffer:function(gn){return typeof gn=="function"&&gn._reglType==="framebuffer"&&(gn=gn._framebuffer)instanceof Et?gn:null},create:Zt,createCube:function(gn){function Jt(tn){var hn,bn={color:null},wn=0,Pn=null;hn="rgba";var Cn="uint8",Mn=1;if(typeof tn=="number"?wn=0|tn:tn?("shape"in tn?wn=tn.shape[0]:("radius"in tn&&(wn=0|tn.radius),"width"in tn?wn=0|tn.width:"height"in tn&&(wn=0|tn.height)),("color"in tn||"colors"in tn)&&(Pn=tn.color||tn.colors,Array.isArray(Pn)),Pn||("colorCount"in tn&&(Mn=0|tn.colorCount),"colorType"in tn&&(Cn=tn.colorType),"colorFormat"in tn&&(hn=tn.colorFormat)),"depth"in tn&&(bn.depth=tn.depth),"stencil"in tn&&(bn.stencil=tn.stencil),"depthStencil"in tn&&(bn.depthStencil=tn.depthStencil)):wn=1,Pn)if(Array.isArray(Pn))for(tn=[],hn=0;hn<Pn.length;++hn)tn[hn]=Pn[hn];else tn=[Pn];else for(tn=Array(Mn),Pn={radius:wn,format:hn,type:Cn},hn=0;hn<Mn;++hn)tn[hn]=it.createCube(Pn);for(bn.color=Array(tn.length),hn=0;hn<tn.length;++hn)Mn=tn[hn],wn=wn||Mn.width,bn.color[hn]={target:34069,data:tn[hn]};for(hn=0;6>hn;++hn){for(Mn=0;Mn<tn.length;++Mn)bn.color[Mn].target=34069+hn;0<hn&&(bn.depth=un[0].depth,bn.stencil=un[0].stencil,bn.depthStencil=un[0].depthStencil),un[hn]?un[hn](bn):un[hn]=Zt(bn)}return K(Jt,{width:wn,height:wn,color:tn})}var un=Array(6);return Jt(gn),K(Jt,{faces:un,resize:function(tn){var hn=0|tn;if(hn===Jt.width)return Jt;var bn=Jt.color;for(tn=0;tn<bn.length;++tn)bn[tn].resize(hn);for(tn=0;6>tn;++tn)un[tn].resize(hn);return Jt.width=Jt.height=hn,Jt},_reglType:"framebufferCube",destroy:function(){un.forEach(function(tn){tn.destroy()})}})},clear:function(){ve(kn).forEach(Ot)},restore:function(){Ht.cur=null,Ht.next=null,Ht.dirty=!0,ve(kn).forEach(function(gn){gn.framebuffer=Ve.createFramebuffer(),Ft(gn)})}})}function D(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function P(Ve,$e,lt,it,Be,je,ot){function Ze(){this.id=++yt,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var _t=$e.oes_vertex_array_object;this.vao=_t?_t.createVertexArrayOES():null,ht[this.id]=this,this.buffers=[]}var dt=lt.maxAttributes,mt=Array(dt);for(lt=0;lt<dt;++lt)mt[lt]=new D;var yt=0,ht={},kt={Record:D,scope:{},state:mt,currentVAO:null,targetVAO:null,restore:$e.oes_vertex_array_object?function(){$e.oes_vertex_array_object&&ve(ht).forEach(function(_t){_t.refresh()})}:function(){},createVAO:function(_t){function Et(Ot){var Ft;Array.isArray(Ot)?(Ft=Ot,Lt.elements&&Lt.ownsElements&&Lt.elements.destroy(),Lt.elements=null,Lt.ownsElements=!1,Lt.offset=0,Lt.count=0,Lt.instances=-1,Lt.primitive=4):(Ot.elements?(Ft=Ot.elements,Lt.ownsElements?(typeof Ft=="function"&&Ft._reglType==="elements"?Lt.elements.destroy():Lt.elements(Ft),Lt.ownsElements=!1):je.getElements(Ot.elements)?(Lt.elements=Ot.elements,Lt.ownsElements=!1):(Lt.elements=je.create(Ot.elements),Lt.ownsElements=!0)):(Lt.elements=null,Lt.ownsElements=!1),Ft=Ot.attributes,Lt.offset=0,Lt.count=-1,Lt.instances=-1,Lt.primitive=4,Lt.elements&&(Lt.count=Lt.elements._elements.vertCount,Lt.primitive=Lt.elements._elements.primType),"offset"in Ot&&(Lt.offset=0|Ot.offset),"count"in Ot&&(Lt.count=0|Ot.count),"instances"in Ot&&(Lt.instances=0|Ot.instances),"primitive"in Ot&&(Lt.primitive=De[Ot.primitive])),Ot={};var Zt=Lt.attributes;Zt.length=Ft.length;for(var Ht=0;Ht<Ft.length;++Ht){var Ut,Wt=Ft[Ht],nn=Zt[Ht]=new D,On=Wt.data||Wt;Array.isArray(On)||xe(On)||t(On)?(Lt.buffers[Ht]&&(Ut=Lt.buffers[Ht],xe(On)&&Ut._buffer.byteLength>=On.byteLength?Ut.subdata(On):(Ut.destroy(),Lt.buffers[Ht]=null)),Lt.buffers[Ht]||(Ut=Lt.buffers[Ht]=Be.create(Wt,34962,!1,!0)),nn.buffer=Be.getBuffer(Ut),nn.size=0|nn.buffer.dimension,nn.normalized=!1,nn.type=nn.buffer.dtype,nn.offset=0,nn.stride=0,nn.divisor=0,nn.state=1,Ot[Ht]=1):Be.getBuffer(Wt)?(nn.buffer=Be.getBuffer(Wt),nn.size=0|nn.buffer.dimension,nn.normalized=!1,nn.type=nn.buffer.dtype,nn.offset=0,nn.stride=0,nn.divisor=0,nn.state=1):Be.getBuffer(Wt.buffer)?(nn.buffer=Be.getBuffer(Wt.buffer),nn.size=0|(+Wt.size||nn.buffer.dimension),nn.normalized=!!Wt.normalized||!1,nn.type="type"in Wt?Me[Wt.type]:nn.buffer.dtype,nn.offset=0|(Wt.offset||0),nn.stride=0|(Wt.stride||0),nn.divisor=0|(Wt.divisor||0),nn.state=1):"x"in Wt&&(nn.x=+Wt.x||0,nn.y=+Wt.y||0,nn.z=+Wt.z||0,nn.w=+Wt.w||0,nn.state=2)}for(Ut=0;Ut<Lt.buffers.length;++Ut)!Ot[Ut]&&Lt.buffers[Ut]&&(Lt.buffers[Ut].destroy(),Lt.buffers[Ut]=null);return Lt.refresh(),Et}var Lt=new Ze;return it.vaoCount+=1,Et.destroy=function(){for(var Ot=0;Ot<Lt.buffers.length;++Ot)Lt.buffers[Ot]&&Lt.buffers[Ot].destroy();Lt.buffers.length=0,Lt.ownsElements&&(Lt.elements.destroy(),Lt.elements=null,Lt.ownsElements=!1),Lt.destroy()},Et._vao=Lt,Et._reglType="vao",Et(_t)},getVAO:function(_t){return typeof _t=="function"&&_t._vao?_t._vao:null},destroyBuffer:function(_t){for(var Et=0;Et<mt.length;++Et){var Lt=mt[Et];Lt.buffer===_t&&(Ve.disableVertexAttribArray(Et),Lt.buffer=null)}},setVAO:$e.oes_vertex_array_object?function(_t){if(_t!==kt.currentVAO){var Et=$e.oes_vertex_array_object;_t?Et.bindVertexArrayOES(_t.vao):Et.bindVertexArrayOES(null),kt.currentVAO=_t}}:function(_t){if(_t!==kt.currentVAO){if(_t)_t.bindAttrs();else{for(var Et=$e.angle_instanced_arrays,Lt=0;Lt<mt.length;++Lt){var Ot=mt[Lt];Ot.buffer?(Ve.enableVertexAttribArray(Lt),Ot.buffer.bind(),Ve.vertexAttribPointer(Lt,Ot.size,Ot.type,Ot.normalized,Ot.stride,Ot.offfset),Et&&Ot.divisor&&Et.vertexAttribDivisorANGLE(Lt,Ot.divisor)):(Ve.disableVertexAttribArray(Lt),Ve.vertexAttrib4f(Lt,Ot.x,Ot.y,Ot.z,Ot.w))}ot.elements?Ve.bindBuffer(34963,ot.elements.buffer.buffer):Ve.bindBuffer(34963,null)}kt.currentVAO=_t}},clear:$e.oes_vertex_array_object?function(){ve(ht).forEach(function(_t){_t.destroy()})}:function(){}};return Ze.prototype.bindAttrs=function(){for(var _t=$e.angle_instanced_arrays,Et=this.attributes,Lt=0;Lt<Et.length;++Lt){var Ot=Et[Lt];Ot.buffer?(Ve.enableVertexAttribArray(Lt),Ve.bindBuffer(34962,Ot.buffer.buffer),Ve.vertexAttribPointer(Lt,Ot.size,Ot.type,Ot.normalized,Ot.stride,Ot.offset),_t&&Ot.divisor&&_t.vertexAttribDivisorANGLE(Lt,Ot.divisor)):(Ve.disableVertexAttribArray(Lt),Ve.vertexAttrib4f(Lt,Ot.x,Ot.y,Ot.z,Ot.w))}for(_t=Et.length;_t<dt;++_t)Ve.disableVertexAttribArray(_t);(_t=je.getElements(this.elements))?Ve.bindBuffer(34963,_t.buffer.buffer):Ve.bindBuffer(34963,null)},Ze.prototype.refresh=function(){var _t=$e.oes_vertex_array_object;_t&&(_t.bindVertexArrayOES(this.vao),this.bindAttrs(),kt.currentVAO=null,_t.bindVertexArrayOES(null))},Ze.prototype.destroy=function(){if(this.vao){var _t=$e.oes_vertex_array_object;this===kt.currentVAO&&(kt.currentVAO=null,_t.bindVertexArrayOES(null)),_t.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),ht[this.id]&&(delete ht[this.id],--it.vaoCount)},kt}function L(Ve,$e,lt,it){function Be(Et,Lt,Ot,Ft){this.name=Et,this.id=Lt,this.location=Ot,this.info=Ft}function je(Et,Lt){for(var Ot=0;Ot<Et.length;++Ot)if(Et[Ot].id===Lt.id)return void(Et[Ot].location=Lt.location);Et.push(Lt)}function ot(Et,Lt,Ot){if(!(Zt=(Ot=Et===35632?mt:yt)[Lt])){var Ft=$e.str(Lt),Zt=Ve.createShader(Et);Ve.shaderSource(Zt,Ft),Ve.compileShader(Zt),Ot[Lt]=Zt}return Zt}function Ze(Et,Lt){this.id=_t++,this.fragId=Et,this.vertId=Lt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,it.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function dt(Et,Lt,Ot){var Ft;Ft=ot(35632,Et.fragId);var Zt=ot(35633,Et.vertId);if(Lt=Et.program=Ve.createProgram(),Ve.attachShader(Lt,Ft),Ve.attachShader(Lt,Zt),Ot)for(Ft=0;Ft<Ot.length;++Ft)Zt=Ot[Ft],Ve.bindAttribLocation(Lt,Zt[0],Zt[1]);Ve.linkProgram(Lt),Zt=Ve.getProgramParameter(Lt,35718),it.profile&&(Et.stats.uniformsCount=Zt);var Ht=Et.uniforms;for(Ft=0;Ft<Zt;++Ft)if(Ot=Ve.getActiveUniform(Lt,Ft))if(1<Ot.size)for(var Ut=0;Ut<Ot.size;++Ut){var Wt=Ot.name.replace("[0]","["+Ut+"]");je(Ht,new Be(Wt,$e.id(Wt),Ve.getUniformLocation(Lt,Wt),Ot))}else je(Ht,new Be(Ot.name,$e.id(Ot.name),Ve.getUniformLocation(Lt,Ot.name),Ot));for(Zt=Ve.getProgramParameter(Lt,35721),it.profile&&(Et.stats.attributesCount=Zt),Et=Et.attributes,Ft=0;Ft<Zt;++Ft)(Ot=Ve.getActiveAttrib(Lt,Ft))&&je(Et,new Be(Ot.name,$e.id(Ot.name),Ve.getAttribLocation(Lt,Ot.name),Ot))}var mt={},yt={},ht={},kt=[],_t=0;return it.profile&&(lt.getMaxUniformsCount=function(){var Et=0;return kt.forEach(function(Lt){Lt.stats.uniformsCount>Et&&(Et=Lt.stats.uniformsCount)}),Et},lt.getMaxAttributesCount=function(){var Et=0;return kt.forEach(function(Lt){Lt.stats.attributesCount>Et&&(Et=Lt.stats.attributesCount)}),Et}),{clear:function(){var Et=Ve.deleteShader.bind(Ve);ve(mt).forEach(Et),mt={},ve(yt).forEach(Et),yt={},kt.forEach(function(Lt){Ve.deleteProgram(Lt.program)}),kt.length=0,ht={},lt.shaderCount=0},program:function(Et,Lt,Ot,Ft){var Zt=ht[Lt];Zt||(Zt=ht[Lt]={});var Ht=Zt[Et];if(Ht&&(Ht.refCount++,!Ft))return Ht;var Ut=new Ze(Lt,Et);return lt.shaderCount++,dt(Ut,Ot,Ft),Ht||(Zt[Et]=Ut),kt.push(Ut),K(Ut,{destroy:function(){if(Ut.refCount--,0>=Ut.refCount){Ve.deleteProgram(Ut.program);var Wt=kt.indexOf(Ut);kt.splice(Wt,1),lt.shaderCount--}0>=Zt[Ut.vertId].refCount&&(Ve.deleteShader(yt[Ut.vertId]),delete yt[Ut.vertId],delete ht[Ut.fragId][Ut.vertId]),Object.keys(ht[Ut.fragId]).length||(Ve.deleteShader(mt[Ut.fragId]),delete mt[Ut.fragId],delete ht[Ut.fragId])}})},restore:function(){mt={},yt={};for(var Et=0;Et<kt.length;++Et)dt(kt[Et],null,kt[Et].attributes.map(function(Lt){return[Lt.location,Lt.name]}))},shader:ot,frag:-1,vert:-1}}function O(Ve,$e,lt,it,Be,je,ot){function Ze(dt){var mt;mt=$e.next===null?5121:$e.next.colorAttachments[0].texture._texture.type;var yt=0,ht=0,kt=it.framebufferWidth,_t=it.framebufferHeight,Et=null;return xe(dt)?Et=dt:dt&&(yt=0|dt.x,ht=0|dt.y,kt=0|(dt.width||it.framebufferWidth-yt),_t=0|(dt.height||it.framebufferHeight-ht),Et=dt.data||null),lt(),dt=kt*_t*4,Et||(mt===5121?Et=new Uint8Array(dt):mt===5126&&(Et=Et||new Float32Array(dt))),Ve.pixelStorei(3333,4),Ve.readPixels(yt,ht,kt,_t,6408,mt,Et),Et}return function(dt){return dt&&"framebuffer"in dt?function(mt){var yt;return $e.setFBO({framebuffer:mt.framebuffer},function(){yt=Ze(mt)}),yt}(dt):Ze(dt)}}function N(Ve,$e){return Ve>>>$e|Ve<<32-$e}function V(Ve,$e){var lt=(65535&Ve)+(65535&$e);return(Ve>>16)+($e>>16)+(lt>>16)<<16|65535&lt}function F(Ve){return Array.prototype.slice.call(Ve)}function j(Ve){return F(Ve).join("")}function Z(Ve){function $e(){var yt=[],ht=[];return K(function(){yt.push.apply(yt,F(arguments))},{def:function(){var kt="v"+Be++;return ht.push(kt),0<arguments.length&&(yt.push(kt,"="),yt.push.apply(yt,F(arguments)),yt.push(";")),kt},toString:function(){return j([0<ht.length?"var "+ht.join(",")+";":"",j(yt)])}})}function lt(){function yt(Lt,Ot){kt(Lt,Ot,"=",ht.def(Lt,Ot),";")}var ht=$e(),kt=$e(),_t=ht.toString,Et=kt.toString;return K(function(){ht.apply(ht,F(arguments))},{def:ht.def,entry:ht,exit:kt,save:yt,set:function(Lt,Ot,Ft){yt(Lt,Ot),ht(Lt,Ot,"=",Ft,";")},toString:function(){return _t()+Et()}})}var it=Ve&&Ve.cache,Be=0,je=[],ot=[],Ze=[],dt=$e(),mt={};return{global:dt,link:function(yt,ht){var kt=ht&&ht.stable;if(!kt){for(var _t=0;_t<ot.length;++_t)if(ot[_t]===yt&&!Ze[_t])return je[_t]}return _t="g"+Be++,je.push(_t),ot.push(yt),Ze.push(kt),_t},block:$e,proc:function(yt,ht){function kt(){var Ot="a"+_t.length;return _t.push(Ot),Ot}var _t=[];ht=ht||0;for(var Et=0;Et<ht;++Et)kt();var Lt=(Et=lt()).toString;return mt[yt]=K(Et,{arg:kt,toString:function(){return j(["function(",_t.join(),"){",Lt(),"}"])}})},scope:lt,cond:function(){var yt=j(arguments),ht=lt(),kt=lt(),_t=ht.toString,Et=kt.toString;return K(ht,{then:function(){return ht.apply(ht,F(arguments)),this},else:function(){return kt.apply(kt,F(arguments)),this},toString:function(){var Lt=Et();return Lt&&(Lt="else{"+Lt+"}"),j(["if(",yt,"){",_t(),"}",Lt])}})},compile:function(){var yt=['"use strict";',dt,"return {"];Object.keys(mt).forEach(function(_t){yt.push('"',_t,'":',mt[_t].toString(),",")}),yt.push("}");var ht,kt=j(yt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`);return it&&(ht=function(_t){for(var Et,Lt="",Ot=0;Ot<_t.length;Ot++)Et=_t.charCodeAt(Ot),Lt+="0123456789abcdef".charAt(Et>>>4&15)+"0123456789abcdef".charAt(15&Et);return Lt}(function(_t){for(var Et=Array(_t.length>>2),Lt=0;Lt<Et.length;Lt++)Et[Lt]=0;for(Lt=0;Lt<8*_t.length;Lt+=8)Et[Lt>>5]|=(255&_t.charCodeAt(Lt/8))<<24-Lt%32;var Ot,Ft,Zt,Ht,Ut,Wt,nn,On,kn,gn,Jt,un=8*_t.length;for(_t=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],Lt=Array(64),Et[un>>5]|=128<<24-un%32,Et[15+(un+64>>9<<4)]=un,On=0;On<Et.length;On+=16){for(un=_t[0],Ot=_t[1],Ft=_t[2],Zt=_t[3],Ht=_t[4],Ut=_t[5],Wt=_t[6],nn=_t[7],kn=0;64>kn;kn++){var tn;16>kn?Lt[kn]=Et[kn+On]:(gn=kn,Jt=V(Jt=N(Jt=Lt[kn-2],17)^N(Jt,19)^Jt>>>10,Lt[kn-7]),tn=N(tn=Lt[kn-15],7)^N(tn,18)^tn>>>3,Lt[gn]=V(V(Jt,tn),Lt[kn-16])),gn=V(V(V(V(nn,gn=N(gn=Ht,6)^N(gn,11)^N(gn,25)),Ht&Ut^~Ht&Wt),rt[kn]),Lt[kn]),Jt=V(nn=N(nn=un,2)^N(nn,13)^N(nn,22),un&Ot^un&Ft^Ot&Ft),nn=Wt,Wt=Ut,Ut=Ht,Ht=V(Zt,gn),Zt=Ft,Ft=Ot,Ot=un,un=V(gn,Jt)}_t[0]=V(un,_t[0]),_t[1]=V(Ot,_t[1]),_t[2]=V(Ft,_t[2]),_t[3]=V(Zt,_t[3]),_t[4]=V(Ht,_t[4]),_t[5]=V(Ut,_t[5]),_t[6]=V(Wt,_t[6]),_t[7]=V(nn,_t[7])}for(Et="",Lt=0;Lt<32*_t.length;Lt+=8)Et+=String.fromCharCode(_t[Lt>>5]>>>24-Lt%32&255);return Et}(function(_t){for(var Et,Lt,Ot="",Ft=-1;++Ft<_t.length;)Et=_t.charCodeAt(Ft),Lt=Ft+1<_t.length?_t.charCodeAt(Ft+1):0,55296<=Et&&56319>=Et&&56320<=Lt&&57343>=Lt&&(Et=65536+((1023&Et)<<10)+(1023&Lt),Ft++),127>=Et?Ot+=String.fromCharCode(Et):2047>=Et?Ot+=String.fromCharCode(192|Et>>>6&31,128|63&Et):65535>=Et?Ot+=String.fromCharCode(224|Et>>>12&15,128|Et>>>6&63,128|63&Et):2097151>=Et&&(Ot+=String.fromCharCode(240|Et>>>18&7,128|Et>>>12&63,128|Et>>>6&63,128|63&Et));return Ot}(kt))),it[ht])?it[ht].apply(null,ot):(kt=Function.apply(null,je.concat(kt)),it&&(it[ht]=kt),kt.apply(null,ot))}}}function z(Ve){return Array.isArray(Ve)||xe(Ve)||t(Ve)}function H(Ve){return Ve.sort(function($e,lt){return $e==="viewport"?-1:lt==="viewport"?1:$e<lt?-1:1})}function U(Ve,$e,lt,it){this.thisDep=Ve,this.contextDep=$e,this.propDep=lt,this.append=it}function re(Ve){return Ve&&!(Ve.thisDep||Ve.contextDep||Ve.propDep)}function ee(Ve){return new U(!1,!1,!1,Ve)}function J(Ve,$e){var lt=Ve.type;if(lt===0)return new U(!0,1<=(lt=Ve.data.length),2<=lt,$e);if(lt===4)return new U((lt=Ve.data).thisDep,lt.contextDep,lt.propDep,$e);if(lt===5)return new U(!1,!1,!1,$e);if(lt===6){for(var it=lt=!1,Be=!1,je=0;je<Ve.data.length;++je){var ot=Ve.data[je];ot.type===1?Be=!0:ot.type===2?it=!0:ot.type===3?lt=!0:ot.type===0?(lt=!0,1<=(ot=ot.data)&&(it=!0),2<=ot&&(Be=!0)):ot.type===4&&(lt=lt||ot.data.thisDep,it=it||ot.data.contextDep,Be=Be||ot.data.propDep)}return new U(lt,it,Be,$e)}return new U(lt===3,lt===2,lt===1,$e)}function Q(Ve,$e,lt,it,Be,je,ot,Ze,dt,mt,yt,ht,kt,_t,Et,Lt){function Ot(Dt){return Dt.replace(".","_")}function Ft(Dt,Bt,Qt){var fn=Ot(Dt);Wn.push(Dt),Ln[fn]=yn[fn]=!!Qt,Un[fn]=Bt}function Zt(Dt,Bt,Qt){var fn=Ot(Dt);Wn.push(Dt),Array.isArray(Qt)?(yn[fn]=Qt.slice(),Ln[fn]=Qt.slice()):yn[fn]=Ln[fn]=Qt,Xn[fn]=Bt}function Ht(){var Dt=Z({cache:Et}),Bt=Dt.link,Qt=Dt.global;Dt.id=mn++,Dt.batchId="0";var fn=Bt(pr),dn=Dt.shared={props:"a0"};Object.keys(pr).forEach(function(rn){dn[rn]=Qt.def(fn,".",rn)});var xn=Dt.next={},sn=Dt.current={};Object.keys(Xn).forEach(function(rn){Array.isArray(yn[rn])&&(xn[rn]=Qt.def(dn.next,".",rn),sn[rn]=Qt.def(dn.current,".",rn))});var $t=Dt.constants={};Object.keys(Kt).forEach(function(rn){$t[rn]=Qt.def(JSON.stringify(Kt[rn]))}),Dt.invoke=function(rn,ln){switch(ln.type){case 0:var An=["this",dn.context,dn.props,Dt.batchId];return rn.def(Bt(ln.data),".call(",An.slice(0,Math.max(ln.data.length+1,4)),")");case 1:return rn.def(dn.props,ln.data);case 2:return rn.def(dn.context,ln.data);case 3:return rn.def("this",ln.data);case 4:return ln.data.append(Dt,rn),ln.data.ref;case 5:return ln.data.toString();case 6:return ln.data.map(function(En){return Dt.invoke(rn,En)})}},Dt.attribCache={};var Yt={};return Dt.scopeAttrib=function(rn){if((rn=$e.id(rn))in Yt)return Yt[rn];var ln=mt.scope[rn];return ln||(ln=mt.scope[rn]=new Zn),Yt[rn]=Bt(ln)},Dt}function Ut(Dt,Bt){var Qt=Dt.static,fn=Dt.dynamic;if("framebuffer"in Qt){var dn=Qt.framebuffer;return dn?(dn=Ze.getFramebuffer(dn),ee(function(sn,$t){var Yt=sn.link(dn),rn=sn.shared;return $t.set(rn.framebuffer,".next",Yt),rn=rn.context,$t.set(rn,".framebufferWidth",Yt+".width"),$t.set(rn,".framebufferHeight",Yt+".height"),Yt})):ee(function(sn,$t){var Yt=sn.shared;return $t.set(Yt.framebuffer,".next","null"),Yt=Yt.context,$t.set(Yt,".framebufferWidth",Yt+".drawingBufferWidth"),$t.set(Yt,".framebufferHeight",Yt+".drawingBufferHeight"),"null"})}if("framebuffer"in fn){var xn=fn.framebuffer;return J(xn,function(sn,$t){var Yt=sn.invoke($t,xn),rn=sn.shared,ln=rn.framebuffer;return Yt=$t.def(ln,".getFramebuffer(",Yt,")"),$t.set(ln,".next",Yt),rn=rn.context,$t.set(rn,".framebufferWidth",Yt+"?"+Yt+".width:"+rn+".drawingBufferWidth"),$t.set(rn,".framebufferHeight",Yt+"?"+Yt+".height:"+rn+".drawingBufferHeight"),Yt})}return null}function Wt(Dt,Bt,Qt){function fn(rn){if(rn in dn){var ln=$e.id(dn[rn]);return(rn=ee(function(){return ln})).id=ln,rn}if(rn in xn){var An=xn[rn];return J(An,function(En,Rn){var jn=En.invoke(Rn,An);return Rn.def(En.shared.strings,".id(",jn,")")})}return null}var dn=Dt.static,xn=Dt.dynamic,sn=fn("frag"),$t=fn("vert"),Yt=null;return re(sn)&&re($t)?(Yt=yt.program($t.id,sn.id,null,Qt),Dt=ee(function(rn,ln){return rn.link(Yt)})):Dt=new U(sn&&sn.thisDep||$t&&$t.thisDep,sn&&sn.contextDep||$t&&$t.contextDep,sn&&sn.propDep||$t&&$t.propDep,function(rn,ln){var An,En,Rn=rn.shared.shader;return An=sn?sn.append(rn,ln):ln.def(Rn,".","frag"),En=$t?$t.append(rn,ln):ln.def(Rn,".","vert"),ln.def(Rn+".program("+En+","+An+")")}),{frag:sn,vert:$t,progVar:Dt,program:Yt}}function nn(Dt,Bt){function Qt(jn,Qn){if(jn in fn){var qn=0|fn[jn];return Qn?xn.offset=qn:xn.instances=qn,ee(function(tr,Jn){return Qn&&(tr.OFFSET=qn),qn})}if(jn in dn){var Kn=dn[jn];return J(Kn,function(tr,Jn){var hr=tr.invoke(Jn,Kn);return Qn&&(tr.OFFSET=hr),hr})}if(Qn){if(Yt)return ee(function(tr,Jn){return tr.OFFSET=0});if(sn)return new U($t.thisDep,$t.contextDep,$t.propDep,function(tr,Jn){return Jn.def(tr.shared.vao+".currentVAO?"+tr.shared.vao+".currentVAO.offset:0")})}else if(sn)return new U($t.thisDep,$t.contextDep,$t.propDep,function(tr,Jn){return Jn.def(tr.shared.vao+".currentVAO?"+tr.shared.vao+".currentVAO.instances:-1")});return null}var fn=Dt.static,dn=Dt.dynamic,xn={},sn=!1,$t=function(){if("vao"in fn){var jn=fn.vao;return jn!==null&&mt.getVAO(jn)===null&&(jn=mt.createVAO(jn)),sn=!0,xn.vao=jn,ee(function(qn){var Kn=mt.getVAO(jn);return Kn?qn.link(Kn):"null"})}if("vao"in dn){sn=!0;var Qn=dn.vao;return J(Qn,function(qn,Kn){var tr=qn.invoke(Kn,Qn);return Kn.def(qn.shared.vao+".getVAO("+tr+")")})}return null}(),Yt=!1,rn=function(){if("elements"in fn){var jn=fn.elements;if(xn.elements=jn,z(jn)){var Qn=xn.elements=je.create(jn,!0);jn=je.getElements(Qn),Yt=!0}else jn&&(jn=je.getElements(jn),Yt=!0);return Qn=ee(function(Kn,tr){if(jn){var Jn=Kn.link(jn);return Kn.ELEMENTS=Jn}return Kn.ELEMENTS=null}),Qn.value=jn,Qn}if("elements"in dn){Yt=!0;var qn=dn.elements;return J(qn,function(Kn,tr){var Jn=(hr=Kn.shared).isBufferArgs,hr=hr.elements,br=Kn.invoke(tr,qn),gr=tr.def("null");return Jn=tr.def(Jn,"(",br,")"),br=Kn.cond(Jn).then(gr,"=",hr,".createStream(",br,");").else(gr,"=",hr,".getElements(",br,");"),tr.entry(br),tr.exit(Kn.cond(Jn).then(hr,".destroyStream(",gr,");")),Kn.ELEMENTS=gr})}return sn?new U($t.thisDep,$t.contextDep,$t.propDep,function(Kn,tr){return tr.def(Kn.shared.vao+".currentVAO?"+Kn.shared.elements+".getElements("+Kn.shared.vao+".currentVAO.elements):null")}):null}(),ln=Qt("offset",!0),An=function(){if("primitive"in fn){var jn=fn.primitive;return xn.primitive=jn,ee(function(qn,Kn){return De[jn]})}if("primitive"in dn){var Qn=dn.primitive;return J(Qn,function(qn,Kn){var tr=qn.constants.primTypes,Jn=qn.invoke(Kn,Qn);return Kn.def(tr,"[",Jn,"]")})}return Yt?re(rn)?rn.value?ee(function(qn,Kn){return Kn.def(qn.ELEMENTS,".primType")}):ee(function(){return 4}):new U(rn.thisDep,rn.contextDep,rn.propDep,function(qn,Kn){var tr=qn.ELEMENTS;return Kn.def(tr,"?",tr,".primType:",4)}):sn?new U($t.thisDep,$t.contextDep,$t.propDep,function(qn,Kn){return Kn.def(qn.shared.vao+".currentVAO?"+qn.shared.vao+".currentVAO.primitive:4")}):null}(),En=function(){if("count"in fn){var jn=0|fn.count;return xn.count=jn,ee(function(){return jn})}if("count"in dn){var Qn=dn.count;return J(Qn,function(qn,Kn){return qn.invoke(Kn,Qn)})}return Yt?re(rn)?rn?ln?new U(ln.thisDep,ln.contextDep,ln.propDep,function(qn,Kn){return Kn.def(qn.ELEMENTS,".vertCount-",qn.OFFSET)}):ee(function(qn,Kn){return Kn.def(qn.ELEMENTS,".vertCount")}):ee(function(){return-1}):new U(rn.thisDep||ln.thisDep,rn.contextDep||ln.contextDep,rn.propDep||ln.propDep,function(qn,Kn){var tr=qn.ELEMENTS;return qn.OFFSET?Kn.def(tr,"?",tr,".vertCount-",qn.OFFSET,":-1"):Kn.def(tr,"?",tr,".vertCount:-1")}):sn?new U($t.thisDep,$t.contextDep,$t.propDep,function(qn,Kn){return Kn.def(qn.shared.vao,".currentVAO?",qn.shared.vao,".currentVAO.count:-1")}):null}(),Rn=Qt("instances",!1);return{elements:rn,primitive:An,count:En,instances:Rn,offset:ln,vao:$t,vaoActive:sn,elementsActive:Yt,static:xn}}function On(Dt,Bt){var Qt=Dt.static,fn=Dt.dynamic,dn={};return Object.keys(Qt).forEach(function(xn){var sn=Qt[xn],$t=$e.id(xn),Yt=new Zn;if(z(sn))Yt.state=1,Yt.buffer=Be.getBuffer(Be.create(sn,34962,!1,!0)),Yt.type=0;else if(ln=Be.getBuffer(sn))Yt.state=1,Yt.buffer=ln,Yt.type=0;else if("constant"in sn){var rn=sn.constant;Yt.buffer="null",Yt.state=2,typeof rn=="number"?Yt.x=rn:tt.forEach(function(qn,Kn){Kn<rn.length&&(Yt[qn]=rn[Kn])})}else{var ln=z(sn.buffer)?Be.getBuffer(Be.create(sn.buffer,34962,!1,!0)):Be.getBuffer(sn.buffer),An=0|sn.offset,En=0|sn.stride,Rn=0|sn.size,jn=!!sn.normalized,Qn=0;"type"in sn&&(Qn=Me[sn.type]),sn=0|sn.divisor,Yt.buffer=ln,Yt.state=1,Yt.size=Rn,Yt.normalized=jn,Yt.type=Qn||ln.dtype,Yt.offset=An,Yt.stride=En,Yt.divisor=sn}dn[xn]=ee(function(qn,Kn){var tr=qn.attribCache;if($t in tr)return tr[$t];var Jn={isStream:!1};return Object.keys(Yt).forEach(function(hr){Jn[hr]=Yt[hr]}),Yt.buffer&&(Jn.buffer=qn.link(Yt.buffer),Jn.type=Jn.type||Jn.buffer+".dtype"),tr[$t]=Jn})}),Object.keys(fn).forEach(function(xn){var sn=fn[xn];dn[xn]=J(sn,function($t,Yt){function rn(tr){Yt(jn[tr],"=",ln,".",tr,"|0;")}var ln=$t.invoke(Yt,sn),An=$t.shared,En=$t.constants,Rn=An.isBufferArgs,jn=(An=An.buffer,{isStream:Yt.def(!1)}),Qn=new Zn;Qn.state=1,Object.keys(Qn).forEach(function(tr){jn[tr]=Yt.def(""+Qn[tr])});var qn=jn.buffer,Kn=jn.type;return Yt("if(",Rn,"(",ln,")){",jn.isStream,"=true;",qn,"=",An,".createStream(",34962,",",ln,");",Kn,"=",qn,".dtype;","}else{",qn,"=",An,".getBuffer(",ln,");","if(",qn,"){",Kn,"=",qn,".dtype;",'}else if("constant" in ',ln,"){",jn.state,"=",2,";","if(typeof "+ln+'.constant === "number"){',jn[tt[0]],"=",ln,".constant;",tt.slice(1).map(function(tr){return jn[tr]}).join("="),"=0;","}else{",tt.map(function(tr,Jn){return jn[tr]+"="+ln+".constant.length>"+Jn+"?"+ln+".constant["+Jn+"]:0;"}).join(""),"}}else{","if(",Rn,"(",ln,".buffer)){",qn,"=",An,".createStream(",34962,",",ln,".buffer);","}else{",qn,"=",An,".getBuffer(",ln,".buffer);","}",Kn,'="type" in ',ln,"?",En.glTypes,"[",ln,".type]:",qn,".dtype;",jn.normalized,"=!!",ln,".normalized;"),rn("size"),rn("offset"),rn("stride"),rn("divisor"),Yt("}}"),Yt.exit("if(",jn.isStream,"){",An,".destroyStream(",qn,");","}"),jn})}),dn}function kn(Dt,Bt,Qt,fn,dn){function xn(Qn){var qn=$t[Qn];qn&&(rn[Qn]=qn)}var sn=function(Qn,qn){if(typeof(Kn=Qn.static).frag=="string"&&typeof Kn.vert=="string"){if(0<Object.keys(qn.dynamic).length)return null;var Kn=qn.static,tr=Object.keys(Kn);if(0<tr.length&&typeof Kn[tr[0]]=="number"){for(var Jn=[],hr=0;hr<tr.length;++hr)Jn.push([0|Kn[tr[hr]],tr[hr]]);return Jn}}return null}(Dt,Bt),$t=function(Qn,qn,Kn){function tr(gr){if(gr in Jn){var ar=Jn[gr];gr=!0;var mr,kr,Pr=0|ar.x,wi=0|ar.y;return"width"in ar?mr=0|ar.width:gr=!1,"height"in ar?kr=0|ar.height:gr=!1,new U(!gr&&qn&&qn.thisDep,!gr&&qn&&qn.contextDep,!gr&&qn&&qn.propDep,function(Qi,bi){var zi=Qi.shared.context,Oo=mr;"width"in ar||(Oo=bi.def(zi,".","framebufferWidth","-",Pr));var Rr=kr;return"height"in ar||(Rr=bi.def(zi,".","framebufferHeight","-",wi)),[Pr,wi,Oo,Rr]})}if(gr in hr){var Ti=hr[gr];return gr=J(Ti,function(Qi,bi){var zi=Qi.invoke(bi,Ti),Oo=Qi.shared.context,Rr=bi.def(zi,".x|0"),so=bi.def(zi,".y|0");return[Rr,so,bi.def('"width" in ',zi,"?",zi,".width|0:","(",Oo,".","framebufferWidth","-",Rr,")"),zi=bi.def('"height" in ',zi,"?",zi,".height|0:","(",Oo,".","framebufferHeight","-",so,")")]}),qn&&(gr.thisDep=gr.thisDep||qn.thisDep,gr.contextDep=gr.contextDep||qn.contextDep,gr.propDep=gr.propDep||qn.propDep),gr}return qn?new U(qn.thisDep,qn.contextDep,qn.propDep,function(Qi,bi){var zi=Qi.shared.context;return[0,0,bi.def(zi,".","framebufferWidth"),bi.def(zi,".","framebufferHeight")]}):null}var Jn=Qn.static,hr=Qn.dynamic;if(Qn=tr("viewport")){var br=Qn;Qn=new U(Qn.thisDep,Qn.contextDep,Qn.propDep,function(gr,ar){var mr=br.append(gr,ar),kr=gr.shared.context;return ar.set(kr,".viewportWidth",mr[2]),ar.set(kr,".viewportHeight",mr[3]),mr})}return{viewport:Qn,scissor_box:tr("scissor.box")}}(Dt,An=Ut(Dt)),Yt=nn(Dt),rn=function(Qn,qn){var Kn=Qn.static,tr=Qn.dynamic,Jn={};return Wn.forEach(function(hr){function br(ar,mr){if(hr in Kn){var kr=ar(Kn[hr]);Jn[gr]=ee(function(){return kr})}else if(hr in tr){var Pr=tr[hr];Jn[gr]=J(Pr,function(wi,Ti){return mr(wi,Ti,wi.invoke(Ti,Pr))})}}var gr=Ot(hr);switch(hr){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return br(function(ar){return ar},function(ar,mr,kr){return kr});case"depth.func":return br(function(ar){return Rt[ar]},function(ar,mr,kr){return mr.def(ar.constants.compareFuncs,"[",kr,"]")});case"depth.range":return br(function(ar){return ar},function(ar,mr,kr){return[mr.def("+",kr,"[0]"),mr=mr.def("+",kr,"[1]")]});case"blend.func":return br(function(ar){return[Pt["srcRGB"in ar?ar.srcRGB:ar.src],Pt["dstRGB"in ar?ar.dstRGB:ar.dst],Pt["srcAlpha"in ar?ar.srcAlpha:ar.src],Pt["dstAlpha"in ar?ar.dstAlpha:ar.dst]]},function(ar,mr,kr){function Pr(bi,zi){return mr.def('"',bi,zi,'" in ',kr,"?",kr,".",bi,zi,":",kr,".",bi)}ar=ar.constants.blendFuncs;var wi=Pr("src","RGB"),Ti=Pr("dst","RGB"),Qi=(wi=mr.def(ar,"[",wi,"]"),mr.def(ar,"[",Pr("src","Alpha"),"]"));return[wi,Ti=mr.def(ar,"[",Ti,"]"),Qi,ar=mr.def(ar,"[",Pr("dst","Alpha"),"]")]});case"blend.equation":return br(function(ar){return typeof ar=="string"?[ur[ar],ur[ar]]:typeof ar=="object"?[ur[ar.rgb],ur[ar.alpha]]:void 0},function(ar,mr,kr){var Pr=ar.constants.blendEquations,wi=mr.def(),Ti=mr.def();return(ar=ar.cond("typeof ",kr,'==="string"')).then(wi,"=",Ti,"=",Pr,"[",kr,"];"),ar.else(wi,"=",Pr,"[",kr,".rgb];",Ti,"=",Pr,"[",kr,".alpha];"),mr(ar),[wi,Ti]});case"blend.color":return br(function(ar){return x(4,function(mr){return+ar[mr]})},function(ar,mr,kr){return x(4,function(Pr){return mr.def("+",kr,"[",Pr,"]")})});case"stencil.mask":return br(function(ar){return 0|ar},function(ar,mr,kr){return mr.def(kr,"|0")});case"stencil.func":return br(function(ar){return[Rt[ar.cmp||"keep"],ar.ref||0,"mask"in ar?ar.mask:-1]},function(ar,mr,kr){return[ar=mr.def('"cmp" in ',kr,"?",ar.constants.compareFuncs,"[",kr,".cmp]",":",7680),mr.def(kr,".ref|0"),mr=mr.def('"mask" in ',kr,"?",kr,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return br(function(ar){return[hr==="stencil.opBack"?1029:1028,St[ar.fail||"keep"],St[ar.zfail||"keep"],St[ar.zpass||"keep"]]},function(ar,mr,kr){function Pr(Ti){return mr.def('"',Ti,'" in ',kr,"?",wi,"[",kr,".",Ti,"]:",7680)}var wi=ar.constants.stencilOps;return[hr==="stencil.opBack"?1029:1028,Pr("fail"),Pr("zfail"),Pr("zpass")]});case"polygonOffset.offset":return br(function(ar){return[0|ar.factor,0|ar.units]},function(ar,mr,kr){return[mr.def(kr,".factor|0"),mr=mr.def(kr,".units|0")]});case"cull.face":return br(function(ar){var mr=0;return ar==="front"?mr=1028:ar==="back"&&(mr=1029),mr},function(ar,mr,kr){return mr.def(kr,'==="front"?',1028,":",1029)});case"frontFace":return br(function(ar){return Ye[ar]},function(ar,mr,kr){return mr.def(kr+'==="cw"?2304:2305')});case"colorMask":return br(function(ar){return ar.map(function(mr){return!!mr})},function(ar,mr,kr){return x(4,function(Pr){return"!!"+kr+"["+Pr+"]"})});case"sample.coverage":return br(function(ar){return["value"in ar?ar.value:1,!!ar.invert]},function(ar,mr,kr){return[mr.def('"value" in ',kr,"?+",kr,".value:1"),mr=mr.def("!!",kr,".invert")]})}}),Jn}(Dt),ln=Wt(Dt,0,sn);xn("viewport"),xn(Ot("scissor.box"));var An,En=0<Object.keys(rn).length;if((An={framebuffer:An,draw:Yt,shader:ln,state:rn,dirty:En,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(Qn){var qn,Kn=Qn.static;if(Qn=Qn.dynamic,"profile"in Kn){var tr=!!Kn.profile;(qn=ee(function(hr,br){return tr})).enable=tr}else if("profile"in Qn){var Jn=Qn.profile;qn=J(Jn,function(hr,br){return hr.invoke(br,Jn)})}return qn}(Dt),An.uniforms=function(Qn,qn){var Kn=Qn.static,tr=Qn.dynamic,Jn={};return Object.keys(Kn).forEach(function(hr){var br,gr=Kn[hr];if(typeof gr=="number"||typeof gr=="boolean")br=ee(function(){return gr});else if(typeof gr=="function"){var ar=gr._reglType;ar==="texture2d"||ar==="textureCube"?br=ee(function(mr){return mr.link(gr)}):ar!=="framebuffer"&&ar!=="framebufferCube"||(br=ee(function(mr){return mr.link(gr.color[0])}))}else _(gr)&&(br=ee(function(mr){return mr.global.def("[",x(gr.length,function(kr){return gr[kr]}),"]")}));br.value=gr,Jn[hr]=br}),Object.keys(tr).forEach(function(hr){var br=tr[hr];Jn[hr]=J(br,function(gr,ar){return gr.invoke(ar,br)})}),Jn}(Qt),An.drawVAO=An.scopeVAO=Yt.vao,!An.drawVAO&&ln.program&&!sn&&lt.angle_instanced_arrays&&Yt.static.elements){var Rn=!0;if(Dt=ln.program.attributes.map(function(Qn){return Qn=Bt.static[Qn],Rn=Rn&&!!Qn,Qn}),Rn&&0<Dt.length){var jn=mt.getVAO(mt.createVAO({attributes:Dt,elements:Yt.static.elements}));An.drawVAO=new U(null,null,null,function(Qn,qn){return Qn.link(jn)}),An.useVAO=!0}}return sn?An.useVAO=!0:An.attributes=On(Bt),An.context=function(Qn){var qn=Qn.static,Kn=Qn.dynamic,tr={};return Object.keys(qn).forEach(function(Jn){var hr=qn[Jn];tr[Jn]=ee(function(br,gr){return typeof hr=="number"||typeof hr=="boolean"?""+hr:br.link(hr)})}),Object.keys(Kn).forEach(function(Jn){var hr=Kn[Jn];tr[Jn]=J(hr,function(br,gr){return br.invoke(gr,hr)})}),tr}(fn),An}function gn(Dt,Bt,Qt){var fn=Dt.shared.context,dn=Dt.scope();Object.keys(Qt).forEach(function(xn){Bt.save(fn,"."+xn);var sn=Qt[xn].append(Dt,Bt);Array.isArray(sn)?dn(fn,".",xn,"=[",sn.join(),"];"):dn(fn,".",xn,"=",sn,";")}),Bt(dn)}function Jt(Dt,Bt,Qt,fn){var dn,xn=($t=Dt.shared).gl,sn=$t.framebuffer;on&&(dn=Bt.def($t.extensions,".webgl_draw_buffers"));var $t=(Yt=Dt.constants).drawBuffer,Yt=Yt.backBuffer;Dt=Qt?Qt.append(Dt,Bt):Bt.def(sn,".next"),fn||Bt("if(",Dt,"!==",sn,".cur){"),Bt("if(",Dt,"){",xn,".bindFramebuffer(",36160,",",Dt,".framebuffer);"),on&&Bt(dn,".drawBuffersWEBGL(",$t,"[",Dt,".colorAttachments.length]);"),Bt("}else{",xn,".bindFramebuffer(",36160,",null);"),on&&Bt(dn,".drawBuffersWEBGL(",Yt,");"),Bt("}",sn,".cur=",Dt,";"),fn||Bt("}")}function un(Dt,Bt,Qt){var fn=Dt.shared,dn=fn.gl,xn=Dt.current,sn=Dt.next,$t=fn.current,Yt=fn.next,rn=Dt.cond($t,".dirty");Wn.forEach(function(ln){var An,En;if(!((ln=Ot(ln))in Qt.state))if(ln in sn){An=sn[ln],En=xn[ln];var Rn=x(yn[ln].length,function(jn){return rn.def(An,"[",jn,"]")});rn(Dt.cond(Rn.map(function(jn,Qn){return jn+"!=="+En+"["+Qn+"]"}).join("||")).then(dn,".",Xn[ln],"(",Rn,");",Rn.map(function(jn,Qn){return En+"["+Qn+"]="+jn}).join(";"),";"))}else An=rn.def(Yt,".",ln),Rn=Dt.cond(An,"!==",$t,".",ln),rn(Rn),ln in Un?Rn(Dt.cond(An).then(dn,".enable(",Un[ln],");").else(dn,".disable(",Un[ln],");"),$t,".",ln,"=",An,";"):Rn(dn,".",Xn[ln],"(",An,");",$t,".",ln,"=",An,";")}),Object.keys(Qt.state).length===0&&rn($t,".dirty=false;"),Bt(rn)}function tn(Dt,Bt,Qt,fn){var dn,xn=Dt.shared,sn=Dt.current,$t=xn.current,Yt=xn.gl;H(Object.keys(Qt)).forEach(function(rn){var ln=Qt[rn];if(!fn||fn(ln)){var An=ln.append(Dt,Bt);if(Un[rn]){var En=Un[rn];re(ln)?(dn=Dt.link(An,{stable:!0}),Bt(Dt.cond(dn).then(Yt,".enable(",En,");").else(Yt,".disable(",En,");")),Bt($t,".",rn,"=",dn,";")):(Bt(Dt.cond(An).then(Yt,".enable(",En,");").else(Yt,".disable(",En,");")),Bt($t,".",rn,"=",An,";"))}else if(_(An)){var Rn=sn[rn];Bt(Yt,".",Xn[rn],"(",An,");",An.map(function(jn,Qn){return Rn+"["+Qn+"]="+jn}).join(";"),";")}else re(ln)?(dn=Dt.link(An,{stable:!0}),Bt(Yt,".",Xn[rn],"(",dn,");",$t,".",rn,"=",dn,";")):Bt(Yt,".",Xn[rn],"(",An,");",$t,".",rn,"=",An,";")}})}function hn(Dt,Bt){en&&(Dt.instancing=Bt.def(Dt.shared.extensions,".angle_instanced_arrays"))}function bn(Dt,Bt,Qt,fn,dn){function xn(){return typeof performance>"u"?"Date.now()":"performance.now()"}function sn(Qn){Qn(rn=Bt.def(),"=",xn(),";"),typeof dn=="string"?Qn(En,".count+=",dn,";"):Qn(En,".count++;"),_t&&(fn?Qn(ln=Bt.def(),"=",jn,".getNumPendingQueries();"):Qn(jn,".beginQuery(",En,");"))}function $t(Qn){Qn(En,".cpuTime+=",xn(),"-",rn,";"),_t&&(fn?Qn(jn,".pushScopeStats(",ln,",",jn,".getNumPendingQueries(),",En,");"):Qn(jn,".endQuery();"))}function Yt(Qn){var qn=Bt.def(Rn,".profile");Bt(Rn,".profile=",Qn,";"),Bt.exit(Rn,".profile=",qn,";")}var rn,ln,An=Dt.shared,En=Dt.stats,Rn=An.current,jn=An.timer;if(Qt=Qt.profile){if(re(Qt))return void(Qt.enable?(sn(Bt),$t(Bt.exit),Yt("true")):Yt("false"));Yt(Qt=Qt.append(Dt,Bt))}else Qt=Bt.def(Rn,".profile");sn(An=Dt.block()),Bt("if(",Qt,"){",An,"}"),$t(Dt=Dt.block()),Bt.exit("if(",Qt,"){",Dt,"}")}function wn(Dt,Bt,Qt,fn,dn){function xn($t,Yt,rn){function ln(){Bt("if(!",jn,".buffer){",En,".enableVertexAttribArray(",Rn,");}");var tr,Jn=rn.type;tr=rn.size?Bt.def(rn.size,"||",Yt):Yt,Bt("if(",jn,".type!==",Jn,"||",jn,".size!==",tr,"||",Kn.map(function(hr){return jn+"."+hr+"!=="+rn[hr]}).join("||"),"){",En,".bindBuffer(",34962,",",Qn,".buffer);",En,".vertexAttribPointer(",[Rn,tr,Jn,rn.normalized,rn.stride,rn.offset],");",jn,".type=",Jn,";",jn,".size=",tr,";",Kn.map(function(hr){return jn+"."+hr+"="+rn[hr]+";"}).join(""),"}"),en&&(Jn=rn.divisor,Bt("if(",jn,".divisor!==",Jn,"){",Dt.instancing,".vertexAttribDivisorANGLE(",[Rn,Jn],");",jn,".divisor=",Jn,";}"))}function An(){Bt("if(",jn,".buffer){",En,".disableVertexAttribArray(",Rn,");",jn,".buffer=null;","}if(",tt.map(function(tr,Jn){return jn+"."+tr+"!=="+qn[Jn]}).join("||"),"){",En,".vertexAttrib4f(",Rn,",",qn,");",tt.map(function(tr,Jn){return jn+"."+tr+"="+qn[Jn]+";"}).join(""),"}")}var En=sn.gl,Rn=Bt.def($t,".location"),jn=Bt.def(sn.attributes,"[",Rn,"]");$t=rn.state;var Qn=rn.buffer,qn=[rn.x,rn.y,rn.z,rn.w],Kn=["buffer","normalized","offset","stride"];$t===1?ln():$t===2?An():(Bt("if(",$t,"===",1,"){"),ln(),Bt("}else{"),An(),Bt("}"))}var sn=Dt.shared;fn.forEach(function($t){var Yt,rn=$t.name,ln=Qt.attributes[rn];if(ln){if(!dn(ln))return;Yt=ln.append(Dt,Bt)}else{if(!dn(Ke))return;var An=Dt.scopeAttrib(rn);Yt={},Object.keys(new Zn).forEach(function(En){Yt[En]=Bt.def(An,".",En)})}xn(Dt.link($t),function(En){switch(En){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}($t.info.type),Yt)})}function Pn(Dt,Bt,Qt,fn,dn,xn){for(var sn,$t=Dt.shared,Yt=$t.gl,rn=0;rn<fn.length;++rn){var ln,An=(jn=fn[rn]).name,En=jn.info.type,Rn=Qt.uniforms[An],jn=Dt.link(jn)+".location";if(Rn){if(!dn(Rn))continue;if(re(Rn)){if(An=Rn.value,En===35678||En===35680)Bt(Yt,".uniform1i(",jn,",",(En=Dt.link(An._texture||An.color[0]._texture))+".bind());"),Bt.exit(En,".unbind();");else if(En===35674||En===35675||En===35676)Rn=2,En===35675?Rn=3:En===35676&&(Rn=4),Bt(Yt,".uniformMatrix",Rn,"fv(",jn,",false,",An=Dt.global.def("new Float32Array(["+Array.prototype.slice.call(An)+"])"),");");else{switch(En){case 5126:sn="1f";break;case 35664:sn="2f";break;case 35665:sn="3f";break;case 35666:sn="4f";break;case 35670:case 5124:sn="1i";break;case 35671:case 35667:sn="2i";break;case 35672:case 35668:sn="3i";break;case 35673:case 35669:sn="4i"}Bt(Yt,".uniform",sn,"(",jn,",",_(An)?Array.prototype.slice.call(An):An,");")}continue}ln=Rn.append(Dt,Bt)}else{if(!dn(Ke))continue;ln=Bt.def($t.uniforms,"[",$e.id(An),"]")}switch(En===35678?Bt("if(",ln,"&&",ln,'._reglType==="framebuffer"){',ln,"=",ln,".color[0];","}"):En===35680&&Bt("if(",ln,"&&",ln,'._reglType==="framebufferCube"){',ln,"=",ln,".color[0];","}"),An=1,En){case 35678:case 35680:En=Bt.def(ln,"._texture"),Bt(Yt,".uniform1i(",jn,",",En,".bind());"),Bt.exit(En,".unbind();");continue;case 5124:case 35670:sn="1i";break;case 35667:case 35671:sn="2i",An=2;break;case 35668:case 35672:sn="3i",An=3;break;case 35669:case 35673:sn="4i",An=4;break;case 5126:sn="1f";break;case 35664:sn="2f",An=2;break;case 35665:sn="3f",An=3;break;case 35666:sn="4f",An=4;break;case 35674:sn="Matrix2fv";break;case 35675:sn="Matrix3fv";break;case 35676:sn="Matrix4fv"}if(sn.charAt(0)==="M"){Bt(Yt,".uniform",sn,"(",jn,","),jn=Math.pow(En-35674+2,2);var Qn=Dt.global.def("new Float32Array(",jn,")");Array.isArray(ln)?Bt("false,(",x(jn,function(Kn){return Qn+"["+Kn+"]="+ln[Kn]}),",",Qn,")"):Bt("false,(Array.isArray(",ln,")||",ln," instanceof Float32Array)?",ln,":(",x(jn,function(Kn){return Qn+"["+Kn+"]="+ln+"["+Kn+"]"}),",",Qn,")"),Bt(");")}else{if(1<An){En=[];var qn=[];for(Rn=0;Rn<An;++Rn)Array.isArray(ln)?qn.push(ln[Rn]):qn.push(Bt.def(ln+"["+Rn+"]")),xn&&En.push(Bt.def());xn&&Bt("if(!",Dt.batchId,"||",En.map(function(Kn,tr){return Kn+"!=="+qn[tr]}).join("||"),"){",En.map(function(Kn,tr){return Kn+"="+qn[tr]+";"}).join("")),Bt(Yt,".uniform",sn,"(",jn,",",qn.join(","),");")}else xn&&(En=Bt.def(),Bt("if(!",Dt.batchId,"||",En,"!==",ln,"){",En,"=",ln,";")),Bt(Yt,".uniform",sn,"(",jn,",",ln,");");xn&&Bt("}")}}}function Cn(Dt,Bt,Qt,fn){function dn(Jn){var hr=En[Jn];return hr?hr.contextDep&&fn.contextDynamic||hr.propDep?hr.append(Dt,Qt):hr.append(Dt,Bt):Bt.def(An,".",Jn)}function xn(){function Jn(){Qt(Yt,".drawElementsInstancedANGLE(",[jn,qn,Kn,Qn+"<<(("+Kn+"-5121)>>1)",$t],");")}function hr(){Qt(Yt,".drawArraysInstancedANGLE(",[jn,Qn,qn,$t],");")}Rn&&Rn!=="null"?tr?Jn():(Qt("if(",Rn,"){"),Jn(),Qt("}else{"),hr(),Qt("}")):hr()}function sn(){function Jn(){Qt(ln+".drawElements("+[jn,qn,Kn,Qn+"<<(("+Kn+"-5121)>>1)"]+");")}function hr(){Qt(ln+".drawArrays("+[jn,Qn,qn]+");")}Rn&&Rn!=="null"?tr?Jn():(Qt("if(",Rn,"){"),Jn(),Qt("}else{"),hr(),Qt("}")):hr()}var $t,Yt,rn=Dt.shared,ln=rn.gl,An=rn.draw,En=fn.draw,Rn=function(){var Jn=En.elements,hr=Bt;return Jn?((Jn.contextDep&&fn.contextDynamic||Jn.propDep)&&(hr=Qt),Jn=Jn.append(Dt,hr),En.elementsActive&&hr("if("+Jn+")"+ln+".bindBuffer(34963,"+Jn+".buffer.buffer);")):(Jn=hr.def(),hr(Jn,"=",An,".","elements",";","if(",Jn,"){",ln,".bindBuffer(",34963,",",Jn,".buffer.buffer);}","else if(",rn.vao,".currentVAO){",Jn,"=",Dt.shared.elements+".getElements("+rn.vao,".currentVAO.elements);",Dn?"":"if("+Jn+")"+ln+".bindBuffer(34963,"+Jn+".buffer.buffer);","}")),Jn}(),jn=dn("primitive"),Qn=dn("offset"),qn=function(){var Jn=En.count,hr=Bt;return Jn?((Jn.contextDep&&fn.contextDynamic||Jn.propDep)&&(hr=Qt),Jn=Jn.append(Dt,hr)):Jn=hr.def(An,".","count"),Jn}();if(typeof qn=="number"){if(qn===0)return}else Qt("if(",qn,"){"),Qt.exit("}");en&&($t=dn("instances"),Yt=Dt.instancing);var Kn=Rn+".type",tr=En.elements&&re(En.elements)&&!En.vaoActive;en&&(typeof $t!="number"||0<=$t)?typeof $t=="string"?(Qt("if(",$t,">0){"),xn(),Qt("}else if(",$t,"<0){"),sn(),Qt("}")):xn():sn()}function Mn(Dt,Bt,Qt,fn,dn){return dn=(Bt=Ht()).proc("body",dn),en&&(Bt.instancing=dn.def(Bt.shared.extensions,".angle_instanced_arrays")),Dt(Bt,dn,Qt,fn),Bt.compile().body}function Bn(Dt,Bt,Qt,fn){hn(Dt,Bt),Qt.useVAO?Qt.drawVAO?Bt(Dt.shared.vao,".setVAO(",Qt.drawVAO.append(Dt,Bt),");"):Bt(Dt.shared.vao,".setVAO(",Dt.shared.vao,".targetVAO);"):(Bt(Dt.shared.vao,".setVAO(null);"),wn(Dt,Bt,Qt,fn.attributes,function(){return!0})),Pn(Dt,Bt,Qt,fn.uniforms,function(){return!0},!1),Cn(Dt,Bt,Bt,Qt)}function Nn(Dt,Bt,Qt,fn){function dn(){return!0}Dt.batchId="a1",hn(Dt,Bt),wn(Dt,Bt,Qt,fn.attributes,dn),Pn(Dt,Bt,Qt,fn.uniforms,dn,!1),Cn(Dt,Bt,Bt,Qt)}function rr(Dt,Bt,Qt,fn){function dn(An){return An.contextDep&&sn||An.propDep}function xn(An){return!dn(An)}hn(Dt,Bt);var sn=Qt.contextDep,$t=Bt.def(),Yt=Bt.def();Dt.shared.props=Yt,Dt.batchId=$t;var rn=Dt.scope(),ln=Dt.scope();Bt(rn.entry,"for(",$t,"=0;",$t,"<","a1",";++",$t,"){",Yt,"=","a0","[",$t,"];",ln,"}",rn.exit),Qt.needsContext&&gn(Dt,ln,Qt.context),Qt.needsFramebuffer&&Jt(Dt,ln,Qt.framebuffer),tn(Dt,ln,Qt.state,dn),Qt.profile&&dn(Qt.profile)&&bn(Dt,ln,Qt,!1,!0),fn?(Qt.useVAO?Qt.drawVAO?dn(Qt.drawVAO)?ln(Dt.shared.vao,".setVAO(",Qt.drawVAO.append(Dt,ln),");"):rn(Dt.shared.vao,".setVAO(",Qt.drawVAO.append(Dt,rn),");"):rn(Dt.shared.vao,".setVAO(",Dt.shared.vao,".targetVAO);"):(rn(Dt.shared.vao,".setVAO(null);"),wn(Dt,rn,Qt,fn.attributes,xn),wn(Dt,ln,Qt,fn.attributes,dn)),Pn(Dt,rn,Qt,fn.uniforms,xn,!1),Pn(Dt,ln,Qt,fn.uniforms,dn,!0),Cn(Dt,rn,ln,Qt)):(Bt=Dt.global.def("{}"),fn=Qt.shader.progVar.append(Dt,ln),Yt=ln.def(fn,".id"),rn=ln.def(Bt,"[",Yt,"]"),ln(Dt.shared.gl,".useProgram(",fn,".program);","if(!",rn,"){",rn,"=",Bt,"[",Yt,"]=",Dt.link(function(An){return Mn(Nn,Dt,Qt,An,2)}),"(",fn,");}",rn,".call(this,a0[",$t,"],",$t,");"))}function Yn(Dt,Bt){function Qt($t){var Yt=Bt.shader[$t];Yt&&(Yt=Yt.append(Dt,fn),isNaN(Yt)?fn.set(dn.shader,"."+$t,Yt):fn.set(dn.shader,"."+$t,Dt.link(Yt,{stable:!0})))}var fn=Dt.proc("scope",3);Dt.batchId="a2";var dn=Dt.shared,xn=dn.current;if(gn(Dt,fn,Bt.context),Bt.framebuffer&&Bt.framebuffer.append(Dt,fn),H(Object.keys(Bt.state)).forEach(function($t){var Yt=Bt.state[$t],rn=Yt.append(Dt,fn);_(rn)?rn.forEach(function(ln,An){isNaN(ln)?fn.set(Dt.next[$t],"["+An+"]",ln):fn.set(Dt.next[$t],"["+An+"]",Dt.link(ln,{stable:!0}))}):re(Yt)?fn.set(dn.next,"."+$t,Dt.link(rn,{stable:!0})):fn.set(dn.next,"."+$t,rn)}),bn(Dt,fn,Bt,!0,!0),["elements","offset","count","instances","primitive"].forEach(function($t){var Yt=Bt.draw[$t];Yt&&(Yt=Yt.append(Dt,fn),isNaN(Yt)?fn.set(dn.draw,"."+$t,Yt):fn.set(dn.draw,"."+$t,Dt.link(Yt),{stable:!0}))}),Object.keys(Bt.uniforms).forEach(function($t){var Yt=Bt.uniforms[$t].append(Dt,fn);Array.isArray(Yt)&&(Yt="["+Yt.map(function(rn){return isNaN(rn)?rn:Dt.link(rn,{stable:!0})})+"]"),fn.set(dn.uniforms,"["+Dt.link($e.id($t),{stable:!0})+"]",Yt)}),Object.keys(Bt.attributes).forEach(function($t){var Yt=Bt.attributes[$t].append(Dt,fn),rn=Dt.scopeAttrib($t);Object.keys(new Zn).forEach(function(ln){fn.set(rn,"."+ln,Yt[ln])})}),Bt.scopeVAO){var sn=Bt.scopeVAO.append(Dt,fn);isNaN(sn)?fn.set(dn.vao,".targetVAO",sn):fn.set(dn.vao,".targetVAO",Dt.link(sn,{stable:!0}))}Qt("vert"),Qt("frag"),0<Object.keys(Bt.state).length&&(fn(xn,".dirty=true;"),fn.exit(xn,".dirty=true;")),fn("a1(",Dt.shared.context,",a0,",Dt.batchId,");")}function ir(Dt,Bt,Qt){var fn=Bt.static[Qt];if(fn&&function(ln){if(typeof ln=="object"&&!_(ln)){for(var An=Object.keys(ln),En=0;En<An.length;++En)if(le.isDynamic(ln[An[En]]))return!0;return!1}}(fn)){var dn=Dt.global,xn=Object.keys(fn),sn=!1,$t=!1,Yt=!1,rn=Dt.global.def("{}");xn.forEach(function(ln){var An=fn[ln];if(le.isDynamic(An))typeof An=="function"&&(An=fn[ln]=le.unbox(An)),ln=J(An,null),sn=sn||ln.thisDep,Yt=Yt||ln.propDep,$t=$t||ln.contextDep;else{switch(dn(rn,".",ln,"="),typeof An){case"number":dn(An);break;case"string":dn('"',An,'"');break;case"object":Array.isArray(An)&&dn("[",An.join(),"]");break;default:dn(Dt.link(An))}dn(";")}}),Bt.dynamic[Qt]=new le.DynamicVariable(4,{thisDep:sn,contextDep:$t,propDep:Yt,ref:rn,append:function(ln,An){xn.forEach(function(En){var Rn=fn[En];le.isDynamic(Rn)&&(Rn=ln.invoke(An,Rn),An(rn,".",En,"=",Rn,";"))})}}),delete Bt.static[Qt]}}var Zn=mt.Record,ur={add:32774,subtract:32778,"reverse subtract":32779};lt.ext_blend_minmax&&(ur.min=32775,ur.max=32776);var en=lt.angle_instanced_arrays,on=lt.webgl_draw_buffers,Dn=lt.oes_vertex_array_object,yn={dirty:!0,profile:Lt.profile},Ln={},Wn=[],Un={},Xn={};Ft("dither",3024),Ft("blend.enable",3042),Zt("blend.color","blendColor",[0,0,0,0]),Zt("blend.equation","blendEquationSeparate",[32774,32774]),Zt("blend.func","blendFuncSeparate",[1,0,1,0]),Ft("depth.enable",2929,!0),Zt("depth.func","depthFunc",513),Zt("depth.range","depthRange",[0,1]),Zt("depth.mask","depthMask",!0),Zt("colorMask","colorMask",[!0,!0,!0,!0]),Ft("cull.enable",2884),Zt("cull.face","cullFace",1029),Zt("frontFace","frontFace",2305),Zt("lineWidth","lineWidth",1),Ft("polygonOffset.enable",32823),Zt("polygonOffset.offset","polygonOffset",[0,0]),Ft("sample.alpha",32926),Ft("sample.enable",32928),Zt("sample.coverage","sampleCoverage",[1,!1]),Ft("stencil.enable",2960),Zt("stencil.mask","stencilMask",-1),Zt("stencil.func","stencilFunc",[519,0,-1]),Zt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Zt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),Ft("scissor.enable",3089),Zt("scissor.box","scissor",[0,0,Ve.drawingBufferWidth,Ve.drawingBufferHeight]),Zt("viewport","viewport",[0,0,Ve.drawingBufferWidth,Ve.drawingBufferHeight]);var pr={gl:Ve,context:kt,strings:$e,next:Ln,current:yn,draw:ht,elements:je,buffer:Be,shader:yt,attributes:mt.state,vao:mt,uniforms:dt,framebuffer:Ze,extensions:lt,timer:_t,isBufferArgs:z},Kt={primTypes:De,compareFuncs:Rt,blendFuncs:Pt,blendEquations:ur,stencilOps:St,glTypes:Me,orientationType:Ye};on&&(Kt.backBuffer=[1029],Kt.drawBuffer=x(it.maxDrawbuffers,function(Dt){return Dt===0?[0]:x(Dt,function(Bt){return 36064+Bt})}));var mn=0;return{next:Ln,current:yn,procs:function(){var Dt=Ht(),Bt=Dt.proc("poll"),Qt=Dt.proc("refresh"),fn=Dt.block();Bt(fn),Qt(fn);var dn,xn=(Yt=Dt.shared).gl,sn=Yt.next,$t=Yt.current;fn($t,".dirty=false;"),Jt(Dt,Bt),Jt(Dt,Qt,null,!0),en&&(dn=Dt.link(en)),lt.oes_vertex_array_object&&Qt(Dt.link(lt.oes_vertex_array_object),".bindVertexArrayOES(null);");var Yt=Qt.def(Yt.attributes),rn=Qt.def(0),ln=Dt.cond(rn,".buffer");ln.then(xn,".enableVertexAttribArray(i);",xn,".bindBuffer(",34962,",",rn,".buffer.buffer);",xn,".vertexAttribPointer(i,",rn,".size,",rn,".type,",rn,".normalized,",rn,".stride,",rn,".offset);").else(xn,".disableVertexAttribArray(i);",xn,".vertexAttrib4f(i,",rn,".x,",rn,".y,",rn,".z,",rn,".w);",rn,".buffer=null;");var An=Dt.link(it.maxAttributes,{stable:!0});return Qt("for(var i=0;i<",An,";++i){",rn,"=",Yt,"[i];",ln,"}"),en&&Qt("for(var i=0;i<",An,";++i){",dn,".vertexAttribDivisorANGLE(i,",Yt,"[i].divisor);","}"),Qt(Dt.shared.vao,".currentVAO=null;",Dt.shared.vao,".setVAO(",Dt.shared.vao,".targetVAO);"),Object.keys(Un).forEach(function(En){var Rn=Un[En],jn=fn.def(sn,".",En),Qn=Dt.block();Qn("if(",jn,"){",xn,".enable(",Rn,")}else{",xn,".disable(",Rn,")}",$t,".",En,"=",jn,";"),Qt(Qn),Bt("if(",jn,"!==",$t,".",En,"){",Qn,"}")}),Object.keys(Xn).forEach(function(En){var Rn,jn,Qn=Xn[En],qn=yn[En],Kn=Dt.block();Kn(xn,".",Qn,"("),_(qn)?(Qn=qn.length,Rn=Dt.global.def(sn,".",En),jn=Dt.global.def($t,".",En),Kn(x(Qn,function(tr){return Rn+"["+tr+"]"}),");",x(Qn,function(tr){return jn+"["+tr+"]="+Rn+"["+tr+"];"}).join("")),Bt("if(",x(Qn,function(tr){return Rn+"["+tr+"]!=="+jn+"["+tr+"]"}).join("||"),"){",Kn,"}")):(Rn=fn.def(sn,".",En),jn=fn.def($t,".",En),Kn(Rn,");",$t,".",En,"=",Rn,";"),Bt("if(",Rn,"!==",jn,"){",Kn,"}")),Qt(Kn)}),Dt.compile()}(),compile:function(Dt,Bt,Qt,fn,dn){var xn=Ht();xn.stats=xn.link(dn),Object.keys(Bt.static).forEach(function($t){ir(xn,Bt,$t)}),Mt.forEach(function($t){ir(xn,Dt,$t)});var sn=kn(Dt,Bt,Qt,fn);return sn.shader.program&&(sn.shader.program.attributes.sort(function($t,Yt){return $t.name<Yt.name?-1:1}),sn.shader.program.uniforms.sort(function($t,Yt){return $t.name<Yt.name?-1:1})),function($t,Yt){var rn=$t.proc("draw",1);hn($t,rn),gn($t,rn,Yt.context),Jt($t,rn,Yt.framebuffer),un($t,rn,Yt),tn($t,rn,Yt.state),bn($t,rn,Yt,!1,!0);var ln=Yt.shader.progVar.append($t,rn);if(rn($t.shared.gl,".useProgram(",ln,".program);"),Yt.shader.program)Bn($t,rn,Yt,Yt.shader.program);else{rn($t.shared.vao,".setVAO(null);");var An=$t.global.def("{}"),En=rn.def(ln,".id"),Rn=rn.def(An,"[",En,"]");rn($t.cond(Rn).then(Rn,".call(this,a0);").else(Rn,"=",An,"[",En,"]=",$t.link(function(jn){return Mn(Bn,$t,Yt,jn,1)}),"(",ln,");",Rn,".call(this,a0);"))}0<Object.keys(Yt.state).length&&rn($t.shared.current,".dirty=true;"),$t.shared.vao&&rn($t.shared.vao,".setVAO(null);")}(xn,sn),Yn(xn,sn),function($t,Yt){function rn(qn){return qn.contextDep&&An||qn.propDep}var ln=$t.proc("batch",2);$t.batchId="0",hn($t,ln);var An=!1,En=!0;Object.keys(Yt.context).forEach(function(qn){An=An||Yt.context[qn].propDep}),An||(gn($t,ln,Yt.context),En=!1);var Rn=!1;if((jn=Yt.framebuffer)?(jn.propDep?An=Rn=!0:jn.contextDep&&An&&(Rn=!0),Rn||Jt($t,ln,jn)):Jt($t,ln,null),Yt.state.viewport&&Yt.state.viewport.propDep&&(An=!0),un($t,ln,Yt),tn($t,ln,Yt.state,function(qn){return!rn(qn)}),Yt.profile&&rn(Yt.profile)||bn($t,ln,Yt,!1,"a1"),Yt.contextDep=An,Yt.needsContext=En,Yt.needsFramebuffer=Rn,(En=Yt.shader.progVar).contextDep&&An||En.propDep)rr($t,ln,Yt,null);else if(En=En.append($t,ln),ln($t.shared.gl,".useProgram(",En,".program);"),Yt.shader.program)rr($t,ln,Yt,Yt.shader.program);else{ln($t.shared.vao,".setVAO(null);");var jn=$t.global.def("{}"),Qn=(Rn=ln.def(En,".id"),ln.def(jn,"[",Rn,"]"));ln($t.cond(Qn).then(Qn,".call(this,a0,a1);").else(Qn,"=",jn,"[",Rn,"]=",$t.link(function(qn){return Mn(rr,$t,Yt,qn,2)}),"(",En,");",Qn,".call(this,a0,a1);"))}0<Object.keys(Yt.state).length&&ln($t.shared.current,".dirty=true;"),$t.shared.vao&&ln($t.shared.vao,".setVAO(null);")}(xn,sn),K(xn.compile(),{destroy:function(){sn.shader.program.destroy()}})}}}function ne(Ve,$e){for(var lt=0;lt<Ve.length;++lt)if(Ve[lt]===$e)return lt;return-1}var K=function(Ve,$e){for(var lt=Object.keys($e),it=0;it<lt.length;++it)Ve[lt[it]]=$e[lt[it]];return Ve},oe=0,le={DynamicVariable:A,define:function(Ve,$e){return new A(Ve,v($e+""))},isDynamic:function(Ve){return typeof Ve=="function"&&!Ve._reglType||Ve instanceof A},unbox:function Ve($e,lt){return typeof $e=="function"?new A(0,$e):typeof $e=="number"||typeof $e=="boolean"?new A(5,$e):Array.isArray($e)?new A(6,$e.map(function(it,Be){return Ve(it,lt+"["+Be+"]")})):$e instanceof A?$e:void 0},accessor:v},se={next:typeof requestAnimationFrame=="function"?function(Ve){return requestAnimationFrame(Ve)}:function(Ve){return setTimeout(Ve,16)},cancel:typeof cancelAnimationFrame=="function"?function(Ve){return cancelAnimationFrame(Ve)}:clearTimeout},de=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},be=s();be.zero=s();var _e=function(Ve,$e){var lt=1;$e.ext_texture_filter_anisotropic&&(lt=Ve.getParameter(34047));var it=1,Be=1;$e.webgl_draw_buffers&&(it=Ve.getParameter(34852),Be=Ve.getParameter(36063));var je=!!$e.oes_texture_float;if(je){je=Ve.createTexture(),Ve.bindTexture(3553,je),Ve.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var ot=Ve.createFramebuffer();if(Ve.bindFramebuffer(36160,ot),Ve.framebufferTexture2D(36160,36064,3553,je,0),Ve.bindTexture(3553,null),Ve.checkFramebufferStatus(36160)!==36053)je=!1;else{Ve.viewport(0,0,1,1),Ve.clearColor(1,0,0,1),Ve.clear(16384);var Ze=be.allocType(5126,4);Ve.readPixels(0,0,1,1,6408,5126,Ze),Ve.getError()?je=!1:(Ve.deleteFramebuffer(ot),Ve.deleteTexture(je),je=Ze[0]===1),be.freeType(Ze)}}return Ze=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(Ze=Ve.createTexture(),ot=be.allocType(5121,36),Ve.activeTexture(33984),Ve.bindTexture(34067,Ze),Ve.texImage2D(34069,0,6408,3,3,0,6408,5121,ot),be.freeType(ot),Ve.bindTexture(34067,null),Ve.deleteTexture(Ze),Ze=!Ve.getError()),{colorBits:[Ve.getParameter(3410),Ve.getParameter(3411),Ve.getParameter(3412),Ve.getParameter(3413)],depthBits:Ve.getParameter(3414),stencilBits:Ve.getParameter(3415),subpixelBits:Ve.getParameter(3408),extensions:Object.keys($e).filter(function(dt){return!!$e[dt]}),maxAnisotropic:lt,maxDrawbuffers:it,maxColorAttachments:Be,pointSizeDims:Ve.getParameter(33901),lineWidthDims:Ve.getParameter(33902),maxViewportDims:Ve.getParameter(3386),maxCombinedTextureUnits:Ve.getParameter(35661),maxCubeMapSize:Ve.getParameter(34076),maxRenderbufferSize:Ve.getParameter(34024),maxTextureUnits:Ve.getParameter(34930),maxTextureSize:Ve.getParameter(3379),maxAttributes:Ve.getParameter(34921),maxVertexUniforms:Ve.getParameter(36347),maxVertexTextureUnits:Ve.getParameter(35660),maxVaryingVectors:Ve.getParameter(36348),maxFragmentUniforms:Ve.getParameter(36349),glsl:Ve.getParameter(35724),renderer:Ve.getParameter(7937),vendor:Ve.getParameter(7936),version:Ve.getParameter(7938),readFloat:je,npotTextureCube:Ze}},xe=function(Ve){return Ve instanceof Uint8Array||Ve instanceof Uint16Array||Ve instanceof Uint32Array||Ve instanceof Int8Array||Ve instanceof Int16Array||Ve instanceof Int32Array||Ve instanceof Float32Array||Ve instanceof Float64Array||Ve instanceof Uint8ClampedArray},ve=function(Ve){return Object.keys(Ve).map(function($e){return Ve[$e]})},ye={shape:function(Ve){for(var $e=[];Ve.length;Ve=Ve[0])$e.push(Ve.length);return $e},flatten:function(Ve,$e,lt,it){var Be=1;if($e.length)for(var je=0;je<$e.length;++je)Be*=$e[je];else Be=0;switch(lt=it||be.allocType(lt,Be),$e.length){case 0:break;case 1:for(it=$e[0],$e=0;$e<it;++$e)lt[$e]=Ve[$e];break;case 2:for(it=$e[0],$e=$e[1],je=Be=0;je<it;++je)for(var ot=Ve[je],Ze=0;Ze<$e;++Ze)lt[Be++]=ot[Ze];break;case 3:o(Ve,$e[0],$e[1],$e[2],lt,0);break;default:r(Ve,$e,0,lt,0)}return lt}},me={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Me={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Ae={dynamic:35048,stream:35040,static:35044},ce=ye.flatten,ae=ye.shape,pe=[];pe[5120]=1,pe[5122]=2,pe[5124]=4,pe[5121]=1,pe[5123]=2,pe[5125]=4,pe[5126]=4;var De={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},ke=new Float32Array(1),Ee=new Uint32Array(ke.buffer),Ie=[9984,9986,9985,9987],Re=[0,6409,6410,6407,6408],Ne={};Ne[6409]=Ne[6406]=Ne[6402]=1,Ne[34041]=Ne[6410]=2,Ne[6407]=Ne[35904]=3,Ne[6408]=Ne[35906]=4;var ge=p("HTMLCanvasElement"),we=p("OffscreenCanvas"),Ce=p("CanvasRenderingContext2D"),ze=p("ImageBitmap"),Pe=p("HTMLImageElement"),Ue=p("HTMLVideoElement"),Ge=Object.keys(me).concat([ge,we,Ce,ze,Pe,Ue]),Xe=[];Xe[5121]=1,Xe[5126]=4,Xe[36193]=2,Xe[5123]=2,Xe[5125]=4;var st=[];st[32854]=2,st[32855]=2,st[36194]=2,st[34041]=4,st[33776]=.5,st[33777]=.5,st[33778]=1,st[33779]=1,st[35986]=.5,st[35987]=1,st[34798]=1,st[35840]=.5,st[35841]=.25,st[35842]=.5,st[35843]=.25,st[36196]=.5;var at=[];at[32854]=2,at[32855]=2,at[36194]=2,at[33189]=2,at[36168]=1,at[34041]=4,at[35907]=4,at[34836]=16,at[34842]=8,at[34843]=6;var vt=function(Ve,$e,lt,it,Be){function je(ht){this.id=mt++,this.refCount=1,this.renderbuffer=ht,this.format=32854,this.height=this.width=0,Be.profile&&(this.stats={size:0})}function ot(ht){var kt=ht.renderbuffer;Ve.bindRenderbuffer(36161,null),Ve.deleteRenderbuffer(kt),ht.renderbuffer=null,ht.refCount=0,delete yt[ht.id],it.renderbufferCount--}var Ze={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};$e.ext_srgb&&(Ze.srgba=35907),$e.ext_color_buffer_half_float&&(Ze.rgba16f=34842,Ze.rgb16f=34843),$e.webgl_color_buffer_float&&(Ze.rgba32f=34836);var dt=[];Object.keys(Ze).forEach(function(ht){dt[Ze[ht]]=ht});var mt=0,yt={};return je.prototype.decRef=function(){0>=--this.refCount&&ot(this)},Be.profile&&(it.getTotalRenderbufferSize=function(){var ht=0;return Object.keys(yt).forEach(function(kt){ht+=yt[kt].stats.size}),ht}),{create:function(ht,kt){function _t(Lt,Ot){var Ft=0,Zt=0,Ht=32854;if(typeof Lt=="object"&&Lt?("shape"in Lt?(Ft=0|(Zt=Lt.shape)[0],Zt=0|Zt[1]):("radius"in Lt&&(Ft=Zt=0|Lt.radius),"width"in Lt&&(Ft=0|Lt.width),"height"in Lt&&(Zt=0|Lt.height)),"format"in Lt&&(Ht=Ze[Lt.format])):typeof Lt=="number"?(Ft=0|Lt,Zt=typeof Ot=="number"?0|Ot:Ft):Lt||(Ft=Zt=1),Ft!==Et.width||Zt!==Et.height||Ht!==Et.format)return _t.width=Et.width=Ft,_t.height=Et.height=Zt,Et.format=Ht,Ve.bindRenderbuffer(36161,Et.renderbuffer),Ve.renderbufferStorage(36161,Ht,Ft,Zt),Be.profile&&(Et.stats.size=at[Et.format]*Et.width*Et.height),_t.format=dt[Et.format],_t}var Et=new je(Ve.createRenderbuffer());return yt[Et.id]=Et,it.renderbufferCount++,_t(ht,kt),_t.resize=function(Lt,Ot){var Ft=0|Lt,Zt=0|Ot||Ft;return Ft===Et.width&&Zt===Et.height||(_t.width=Et.width=Ft,_t.height=Et.height=Zt,Ve.bindRenderbuffer(36161,Et.renderbuffer),Ve.renderbufferStorage(36161,Et.format,Ft,Zt),Be.profile&&(Et.stats.size=at[Et.format]*Et.width*Et.height)),_t},_t._reglType="renderbuffer",_t._renderbuffer=Et,Be.profile&&(_t.stats=Et.stats),_t.destroy=function(){Et.decRef()},_t},clear:function(){ve(yt).forEach(ot)},restore:function(){ve(yt).forEach(function(ht){ht.renderbuffer=Ve.createRenderbuffer(),Ve.bindRenderbuffer(36161,ht.renderbuffer),Ve.renderbufferStorage(36161,ht.format,ht.width,ht.height)}),Ve.bindRenderbuffer(36161,null)}}},xt=[];xt[6408]=4,xt[6407]=3;var gt=[];gt[5121]=1,gt[5126]=4,gt[36193]=2;var rt=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],tt=["x","y","z","w"],Mt="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Pt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Rt={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},St={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Ye={cw:2304,ccw:2305},Ke=new U(!1,!1,!1,function(){});return function(Ve){function $e(){if(Nn.length===0)Ut&&Ut.update(),Zn=null;else{Zn=se.next($e),yt();for(var en=Nn.length-1;0<=en;--en){var on=Nn[en];on&&on(kn,null,0)}_t.flush(),Ut&&Ut.update()}}function lt(){!Zn&&0<Nn.length&&(Zn=se.next($e))}function it(){Zn&&(se.cancel($e),Zn=null)}function Be(en){en.preventDefault(),it(),rr.forEach(function(on){on()})}function je(en){_t.getError(),Lt.restore(),hn.restore(),Jt.restore(),bn.restore(),wn.restore(),Pn.restore(),tn.restore(),Ut&&Ut.restore(),Cn.procs.refresh(),lt(),Yn.forEach(function(on){on()})}function ot(en){function on(Dt,Bt){var Qt={},fn={};return Object.keys(Dt).forEach(function(dn){var xn=Dt[dn];if(le.isDynamic(xn))fn[dn]=le.unbox(xn,dn);else{if(Bt&&Array.isArray(xn)){for(var sn=0;sn<xn.length;++sn)if(le.isDynamic(xn[sn]))return void(fn[dn]=le.unbox(xn,dn))}Qt[dn]=xn}}),{dynamic:fn,static:Qt}}var Dn=on(en.context||{},!0),yn=on(en.uniforms||{},!0),Ln=on(en.attributes||{},!1);en=on(function(Dt){function Bt(fn){if(fn in Qt){var dn=Qt[fn];delete Qt[fn],Object.keys(dn).forEach(function(xn){Qt[fn+"."+xn]=dn[xn]})}}var Qt=K({},Dt);return delete Qt.uniforms,delete Qt.attributes,delete Qt.context,delete Qt.vao,"stencil"in Qt&&Qt.stencil.op&&(Qt.stencil.opBack=Qt.stencil.opFront=Qt.stencil.op,delete Qt.stencil.op),Bt("blend"),Bt("depth"),Bt("cull"),Bt("stencil"),Bt("polygonOffset"),Bt("scissor"),Bt("sample"),"vao"in Dt&&(Qt.vao=Dt.vao),Qt}(en),!1);var Wn={gpuTime:0,cpuTime:0,count:0},Un=Cn.compile(en,Ln,yn,Dn,Wn),Xn=Un.draw,pr=Un.batch,Kt=Un.scope,mn=[];return K(function(Dt,Bt){var Qt;if(typeof Dt=="function")return Kt.call(this,null,Dt,0);if(typeof Bt=="function")if(typeof Dt=="number")for(Qt=0;Qt<Dt;++Qt)Kt.call(this,null,Bt,Qt);else{if(!Array.isArray(Dt))return Kt.call(this,Dt,Bt,0);for(Qt=0;Qt<Dt.length;++Qt)Kt.call(this,Dt[Qt],Bt,Qt)}else if(typeof Dt=="number"){if(0<Dt)return pr.call(this,function(fn){for(;mn.length<fn;)mn.push(null);return mn}(0|Dt),0|Dt)}else{if(!Array.isArray(Dt))return Xn.call(this,Dt);if(Dt.length)return pr.call(this,Dt,Dt.length)}},{stats:Wn,destroy:function(){Un.destroy()}})}function Ze(en,on){var Dn=0;Cn.procs.poll();var yn=on.color;yn&&(_t.clearColor(+yn[0]||0,+yn[1]||0,+yn[2]||0,+yn[3]||0),Dn|=16384),"depth"in on&&(_t.clearDepth(+on.depth),Dn|=256),"stencil"in on&&(_t.clearStencil(0|on.stencil),Dn|=1024),_t.clear(Dn)}function dt(en){return Nn.push(en),lt(),{cancel:function(){var on=ne(Nn,en);Nn[on]=function Dn(){var yn=ne(Nn,Dn);Nn[yn]=Nn[Nn.length-1],--Nn.length,0>=Nn.length&&it()}}}}function mt(){var en=Mn.viewport,on=Mn.scissor_box;en[0]=en[1]=on[0]=on[1]=0,kn.viewportWidth=kn.framebufferWidth=kn.drawingBufferWidth=en[2]=on[2]=_t.drawingBufferWidth,kn.viewportHeight=kn.framebufferHeight=kn.drawingBufferHeight=en[3]=on[3]=_t.drawingBufferHeight}function yt(){kn.tick+=1,kn.time=kt(),mt(),Cn.procs.poll()}function ht(){bn.refresh(),mt(),Cn.procs.refresh(),Ut&&Ut.update()}function kt(){return(de()-Wt)/1e3}if(!(Ve=T(Ve)))return null;var _t=Ve.gl,Et=_t.getContextAttributes();_t.isContextLost();var Lt=function(en,on){function Dn(Un){var Xn;Un=Un.toLowerCase();try{Xn=yn[Un]=en.getExtension(Un)}catch{}return!!Xn}for(var yn={},Ln=0;Ln<on.extensions.length;++Ln){var Wn=on.extensions[Ln];if(!Dn(Wn))return on.onDestroy(),on.onDone('"'+Wn+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return on.optionalExtensions.forEach(Dn),{extensions:yn,restore:function(){Object.keys(yn).forEach(function(Un){if(yn[Un]&&!Dn(Un))throw Error("(regl): error restoring extension "+Un)})}}}(_t,Ve);if(!Lt)return null;var Ot=function(){var en={"":0},on=[""];return{id:function(Dn){var yn=en[Dn];return yn||(yn=en[Dn]=on.length,on.push(Dn),yn)},str:function(Dn){return on[Dn]}}}(),Ft={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Zt=Ve.cachedCode||{},Ht=Lt.extensions,Ut=function(en,on){function Dn(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function yn(mn,Dt,Bt){var Qt=Un.pop()||new Dn;Qt.startQueryIndex=mn,Qt.endQueryIndex=Dt,Qt.sum=0,Qt.stats=Bt,Xn.push(Qt)}if(!on.ext_disjoint_timer_query)return null;var Ln=[],Wn=[],Un=[],Xn=[],pr=[],Kt=[];return{beginQuery:function(mn){var Dt=Ln.pop()||on.ext_disjoint_timer_query.createQueryEXT();on.ext_disjoint_timer_query.beginQueryEXT(35007,Dt),Wn.push(Dt),yn(Wn.length-1,Wn.length,mn)},endQuery:function(){on.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:yn,update:function(){var mn,Dt;if((mn=Wn.length)!==0){Kt.length=Math.max(Kt.length,mn+1),pr.length=Math.max(pr.length,mn+1),pr[0]=0;var Bt=Kt[0]=0;for(Dt=mn=0;Dt<Wn.length;++Dt){var Qt=Wn[Dt];on.ext_disjoint_timer_query.getQueryObjectEXT(Qt,34919)?(Bt+=on.ext_disjoint_timer_query.getQueryObjectEXT(Qt,34918),Ln.push(Qt)):Wn[mn++]=Qt,pr[Dt+1]=Bt,Kt[Dt+1]=mn}for(Wn.length=mn,Dt=mn=0;Dt<Xn.length;++Dt){var fn=(Bt=Xn[Dt]).startQueryIndex;Qt=Bt.endQueryIndex,Bt.sum+=pr[Qt]-pr[fn],fn=Kt[fn],(Qt=Kt[Qt])===fn?(Bt.stats.gpuTime+=Bt.sum/1e6,Un.push(Bt)):(Bt.startQueryIndex=fn,Bt.endQueryIndex=Qt,Xn[mn++]=Bt)}Xn.length=mn}},getNumPendingQueries:function(){return Wn.length},clear:function(){Ln.push.apply(Ln,Wn);for(var mn=0;mn<Ln.length;mn++)on.ext_disjoint_timer_query.deleteQueryEXT(Ln[mn]);Wn.length=0,Ln.length=0},restore:function(){Wn.length=0,Ln.length=0}}}(0,Ht),Wt=de(),nn=_t.drawingBufferWidth,On=_t.drawingBufferHeight,kn={tick:0,time:0,viewportWidth:nn,viewportHeight:On,framebufferWidth:nn,framebufferHeight:On,drawingBufferWidth:nn,drawingBufferHeight:On,pixelRatio:Ve.pixelRatio},gn=(nn={elements:null,primitive:4,count:-1,offset:0,instances:-1},_e(_t,Ht)),Jt=l(_t,Ft,Ve,function(en){return tn.destroyBuffer(en)}),un=d(_t,Ht,Jt,Ft),tn=P(_t,Ht,gn,Ft,Jt,un,nn),hn=L(_t,Ot,Ft,Ve),bn=E(_t,Ht,gn,function(){Cn.procs.poll()},kn,Ft,Ve),wn=vt(_t,Ht,0,Ft,Ve),Pn=k(_t,Ht,gn,bn,wn,Ft),Cn=Q(_t,Ot,Ht,gn,Jt,un,0,Pn,{},tn,hn,nn,kn,Ut,Zt,Ve),Mn=(Ot=O(_t,Pn,Cn.procs.poll,kn),Cn.next),Bn=_t.canvas,Nn=[],rr=[],Yn=[],ir=[Ve.onDestroy],Zn=null;Bn&&(Bn.addEventListener("webglcontextlost",Be,!1),Bn.addEventListener("webglcontextrestored",je,!1));var ur=Pn.setFBO=ot({framebuffer:le.define.call(null,1,"framebuffer")});return ht(),Et=K(ot,{clear:function(en){if("framebuffer"in en)if(en.framebuffer&&en.framebuffer_reglType==="framebufferCube")for(var on=0;6>on;++on)ur(K({framebuffer:en.framebuffer.faces[on]},en),Ze);else ur(en,Ze);else Ze(0,en)},prop:le.define.bind(null,1),context:le.define.bind(null,2),this:le.define.bind(null,3),draw:ot({}),buffer:function(en){return Jt.create(en,34962,!1,!1)},elements:function(en){return un.create(en,!1)},texture:bn.create2D,cube:bn.createCube,renderbuffer:wn.create,framebuffer:Pn.create,framebufferCube:Pn.createCube,vao:tn.createVAO,attributes:Et,frame:dt,on:function(en,on){var Dn;switch(en){case"frame":return dt(on);case"lost":Dn=rr;break;case"restore":Dn=Yn;break;case"destroy":Dn=ir}return Dn.push(on),{cancel:function(){for(var yn=0;yn<Dn.length;++yn)if(Dn[yn]===on){Dn[yn]=Dn[Dn.length-1],Dn.pop();break}}}},limits:gn,hasExtension:function(en){return 0<=gn.extensions.indexOf(en.toLowerCase())},read:Ot,destroy:function(){Nn.length=0,it(),Bn&&(Bn.removeEventListener("webglcontextlost",Be),Bn.removeEventListener("webglcontextrestored",je)),hn.clear(),Pn.clear(),wn.clear(),tn.clear(),bn.clear(),un.clear(),Jt.clear(),Ut&&Ut.clear(),ir.forEach(function(en){en()})},_gl:_t,_refresh:ht,poll:function(){yt(),Ut&&Ut.update()},now:kt,stats:Ft,getCachedCode:function(){return Zt},preloadCachedCode:function(en){Object.entries(en).forEach(function(on){Zt[on[0]]=on[1]})}}),Ve.onDone(null,Et),Et}}()},30456:function(C,A,e){var v=e(33576),w=v.Buffer;function n(x,f){for(var s in x)f[s]=x[s]}function T(x,f,s){return w(x,f,s)}w.from&&w.alloc&&w.allocUnsafe&&w.allocUnsafeSlow?C.exports=v:(n(v,A),A.Buffer=T),T.prototype=Object.create(w.prototype),n(w,T),T.from=function(x,f,s){if(typeof x=="number")throw new TypeError("Argument must not be a number");return w(x,f,s)},T.alloc=function(x,f,s){if(typeof x!="number")throw new TypeError("Argument must be a number");var t=w(x);return f!==void 0?typeof s=="string"?t.fill(f,s):t.fill(f):t.fill(0),t},T.allocUnsafe=function(x){if(typeof x!="number")throw new TypeError("Argument must be a number");return w(x)},T.allocUnsafeSlow=function(x){if(typeof x!="number")throw new TypeError("Argument must be a number");return v.SlowBuffer(x)}},14500:function(C,A,e){"use strict";var v=e(53664),w=e(64348),n=e(39640)(),T=e(2304),x=v("%TypeError%"),f=v("%Math.floor%");C.exports=function(s,t){if(typeof s!="function")throw new x("`fn` is not a function");if(typeof t!="number"||t<0||t>4294967295||f(t)!==t)throw new x("`length` must be a positive 32-bit integer");var o=arguments.length>2&&!!arguments[2],r=!0,i=!0;if("length"in s&&T){var a=T(s,"length");a&&!a.configurable&&(r=!1),a&&!a.writable&&(i=!1)}return(r||i||!o)&&(n?w(s,"length",t,!0,!0):w(s,"length",t)),s}},29936:function(C,A,e){C.exports=w;var v=e(61252).EventEmitter;function w(){v.call(this)}e(6768)(w,v),w.Readable=e(12348),w.Writable=e(11288),w.Duplex=e(15316),w.Transform=e(22477),w.PassThrough=e(27136),w.finished=e(15932),w.pipeline=e(38180),w.Stream=w,w.prototype.pipe=function(n,T){var x=this;function f(u){n.writable&&n.write(u)===!1&&x.pause&&x.pause()}function s(){x.readable&&x.resume&&x.resume()}x.on("data",f),n.on("drain",s),n._isStdio||T&&T.end===!1||(x.on("end",o),x.on("close",r));var t=!1;function o(){t||(t=!0,n.end())}function r(){t||(t=!0,typeof n.destroy=="function"&&n.destroy())}function i(u){if(a(),v.listenerCount(this,"error")===0)throw u}function a(){x.removeListener("data",f),n.removeListener("drain",s),x.removeListener("end",o),x.removeListener("close",r),x.removeListener("error",i),n.removeListener("error",i),x.removeListener("end",a),x.removeListener("close",a),n.removeListener("close",a)}return x.on("error",i),n.on("error",i),x.on("end",a),x.on("close",a),n.on("close",a),n.emit("pipe",x),n}},92784:function(C){"use strict";var A={};function e(w,n,T){T||(T=Error);var x=function(f){var s,t;function o(r,i,a){return f.call(this,function(u,l,d){return typeof n=="string"?n:n(u,l,d)}(r,i,a))||this}return t=f,(s=o).prototype=Object.create(t.prototype),s.prototype.constructor=s,s.__proto__=t,o}(T);x.prototype.name=T.name,x.prototype.code=w,A[w]=x}function v(w,n){if(Array.isArray(w)){var T=w.length;return w=w.map(function(x){return String(x)}),T>2?"one of ".concat(n," ").concat(w.slice(0,T-1).join(", "),", or ")+w[T-1]:T===2?"one of ".concat(n," ").concat(w[0]," or ").concat(w[1]):"of ".concat(n," ").concat(w[0])}return"of ".concat(n," ").concat(String(w))}e("ERR_INVALID_OPT_VALUE",function(w,n){return'The value "'+n+'" is invalid for option "'+w+'"'},TypeError),e("ERR_INVALID_ARG_TYPE",function(w,n,T){var x,f,s,t,o;if(typeof n=="string"&&(f="not ",n.substr(0,4)===f)?(x="must not be",n=n.replace(/^not /,"")):x="must be",function(i,a,u){return(u===void 0||u>i.length)&&(u=i.length),i.substring(u-9,u)===a}(w," argument"))s="The ".concat(w," ").concat(x," ").concat(v(n,"type"));else{var r=(typeof o!="number"&&(o=0),o+1>(t=w).length||t.indexOf(".",o)===-1?"argument":"property");s='The "'.concat(w,'" ').concat(r," ").concat(x," ").concat(v(n,"type"))}return s+". Received type ".concat(typeof T)},TypeError),e("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),e("ERR_METHOD_NOT_IMPLEMENTED",function(w){return"The "+w+" method is not implemented"}),e("ERR_STREAM_PREMATURE_CLOSE","Premature close"),e("ERR_STREAM_DESTROYED",function(w){return"Cannot call "+w+" after a stream was destroyed"}),e("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),e("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),e("ERR_STREAM_WRITE_AFTER_END","write after end"),e("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),e("ERR_UNKNOWN_ENCODING",function(w){return"Unknown encoding: "+w},TypeError),e("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),C.exports.i=A},15316:function(C,A,e){"use strict";var v=e(4168),w=Object.keys||function(i){var a=[];for(var u in i)a.push(u);return a};C.exports=t;var n=e(12348),T=e(11288);e(6768)(t,n);for(var x=w(T.prototype),f=0;f<x.length;f++){var s=x[f];t.prototype[s]||(t.prototype[s]=T.prototype[s])}function t(i){if(!(this instanceof t))return new t(i);n.call(this,i),T.call(this,i),this.allowHalfOpen=!0,i&&(i.readable===!1&&(this.readable=!1),i.writable===!1&&(this.writable=!1),i.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",o)))}function o(){this._writableState.ended||v.nextTick(r,this)}function r(i){i.end()}Object.defineProperty(t.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(t.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(t.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(t.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(i){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=i,this._writableState.destroyed=i)}})},27136:function(C,A,e){"use strict";C.exports=w;var v=e(22477);function w(n){if(!(this instanceof w))return new w(n);v.call(this,n)}e(6768)(w,v),w.prototype._transform=function(n,T,x){x(null,n)}},12348:function(C,A,e){"use strict";var v,w=e(4168);C.exports=M,M.ReadableState=y,e(61252).EventEmitter;var n,T=function(ee,J){return ee.listeners(J).length},x=e(4776),f=e(33576).Buffer,s=e.g.Uint8Array||function(){},t=e(19768);n=t&&t.debuglog?t.debuglog("stream"):function(){};var o,r,i,a=e(47264),u=e(55324),l=e(24888).getHighWaterMark,d=e(92784).i,c=d.ERR_INVALID_ARG_TYPE,_=d.ERR_STREAM_PUSH_AFTER_EOF,p=d.ERR_METHOD_NOT_IMPLEMENTED,g=d.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e(6768)(M,x);var m=u.errorOrDestroy,b=["error","close","destroy","pause","resume"];function y(ee,J,Q){v=v||e(15316),ee=ee||{},typeof Q!="boolean"&&(Q=J instanceof v),this.objectMode=!!ee.objectMode,Q&&(this.objectMode=this.objectMode||!!ee.readableObjectMode),this.highWaterMark=l(this,ee,"readableHighWaterMark",Q),this.buffer=new a,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=ee.emitClose!==!1,this.autoDestroy=!!ee.autoDestroy,this.destroyed=!1,this.defaultEncoding=ee.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,ee.encoding&&(o||(o=e(86032).o),this.decoder=new o(ee.encoding),this.encoding=ee.encoding)}function M(ee){if(v=v||e(15316),!(this instanceof M))return new M(ee);var J=this instanceof v;this._readableState=new y(ee,this,J),this.readable=!0,ee&&(typeof ee.read=="function"&&(this._read=ee.read),typeof ee.destroy=="function"&&(this._destroy=ee.destroy)),x.call(this)}function h(ee,J,Q,ne,K){n("readableAddChunk",J);var oe,le=ee._readableState;if(J===null)le.reading=!1,function(se,de){if(n("onEofChunk"),!de.ended){if(de.decoder){var be=de.decoder.end();be&&be.length&&(de.buffer.push(be),de.length+=de.objectMode?1:be.length)}de.ended=!0,de.sync?P(se):(de.needReadable=!1,de.emittedReadable||(de.emittedReadable=!0,L(se)))}}(ee,le);else if(K||(oe=function(se,de){var be,_e;return _e=de,f.isBuffer(_e)||_e instanceof s||typeof de=="string"||de===void 0||se.objectMode||(be=new c("chunk",["string","Buffer","Uint8Array"],de)),be}(le,J)),oe)m(ee,oe);else if(le.objectMode||J&&J.length>0)if(typeof J=="string"||le.objectMode||Object.getPrototypeOf(J)===f.prototype||(J=function(se){return f.from(se)}(J)),ne)le.endEmitted?m(ee,new g):E(ee,le,J,!0);else if(le.ended)m(ee,new _);else{if(le.destroyed)return!1;le.reading=!1,le.decoder&&!Q?(J=le.decoder.write(J),le.objectMode||J.length!==0?E(ee,le,J,!1):O(ee,le)):E(ee,le,J,!1)}else ne||(le.reading=!1,O(ee,le));return!le.ended&&(le.length<le.highWaterMark||le.length===0)}function E(ee,J,Q,ne){J.flowing&&J.length===0&&!J.sync?(J.awaitDrain=0,ee.emit("data",Q)):(J.length+=J.objectMode?1:Q.length,ne?J.buffer.unshift(Q):J.buffer.push(Q),J.needReadable&&P(ee)),O(ee,J)}Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(ee){this._readableState&&(this._readableState.destroyed=ee)}}),M.prototype.destroy=u.destroy,M.prototype._undestroy=u.undestroy,M.prototype._destroy=function(ee,J){J(ee)},M.prototype.push=function(ee,J){var Q,ne=this._readableState;return ne.objectMode?Q=!0:typeof ee=="string"&&((J=J||ne.defaultEncoding)!==ne.encoding&&(ee=f.from(ee,J),J=""),Q=!0),h(this,ee,J,!1,Q)},M.prototype.unshift=function(ee){return h(this,ee,null,!0,!1)},M.prototype.isPaused=function(){return this._readableState.flowing===!1},M.prototype.setEncoding=function(ee){o||(o=e(86032).o);var J=new o(ee);this._readableState.decoder=J,this._readableState.encoding=this._readableState.decoder.encoding;for(var Q=this._readableState.buffer.head,ne="";Q!==null;)ne+=J.write(Q.data),Q=Q.next;return this._readableState.buffer.clear(),ne!==""&&this._readableState.buffer.push(ne),this._readableState.length=ne.length,this};var k=1073741824;function D(ee,J){return ee<=0||J.length===0&&J.ended?0:J.objectMode?1:ee!=ee?J.flowing&&J.length?J.buffer.head.data.length:J.length:(ee>J.highWaterMark&&(J.highWaterMark=function(Q){return Q>=k?Q=k:(Q--,Q|=Q>>>1,Q|=Q>>>2,Q|=Q>>>4,Q|=Q>>>8,Q|=Q>>>16,Q++),Q}(ee)),ee<=J.length?ee:J.ended?J.length:(J.needReadable=!0,0))}function P(ee){var J=ee._readableState;n("emitReadable",J.needReadable,J.emittedReadable),J.needReadable=!1,J.emittedReadable||(n("emitReadable",J.flowing),J.emittedReadable=!0,w.nextTick(L,ee))}function L(ee){var J=ee._readableState;n("emitReadable_",J.destroyed,J.length,J.ended),J.destroyed||!J.length&&!J.ended||(ee.emit("readable"),J.emittedReadable=!1),J.needReadable=!J.flowing&&!J.ended&&J.length<=J.highWaterMark,Z(ee)}function O(ee,J){J.readingMore||(J.readingMore=!0,w.nextTick(N,ee,J))}function N(ee,J){for(;!J.reading&&!J.ended&&(J.length<J.highWaterMark||J.flowing&&J.length===0);){var Q=J.length;if(n("maybeReadMore read 0"),ee.read(0),Q===J.length)break}J.readingMore=!1}function V(ee){var J=ee._readableState;J.readableListening=ee.listenerCount("readable")>0,J.resumeScheduled&&!J.paused?J.flowing=!0:ee.listenerCount("data")>0&&ee.resume()}function F(ee){n("readable nexttick read 0"),ee.read(0)}function j(ee,J){n("resume",J.reading),J.reading||ee.read(0),J.resumeScheduled=!1,ee.emit("resume"),Z(ee),J.flowing&&!J.reading&&ee.read(0)}function Z(ee){var J=ee._readableState;for(n("flow",J.flowing);J.flowing&&ee.read()!==null;);}function z(ee,J){return J.length===0?null:(J.objectMode?Q=J.buffer.shift():!ee||ee>=J.length?(Q=J.decoder?J.buffer.join(""):J.buffer.length===1?J.buffer.first():J.buffer.concat(J.length),J.buffer.clear()):Q=J.buffer.consume(ee,J.decoder),Q);var Q}function H(ee){var J=ee._readableState;n("endReadable",J.endEmitted),J.endEmitted||(J.ended=!0,w.nextTick(U,J,ee))}function U(ee,J){if(n("endReadableNT",ee.endEmitted,ee.length),!ee.endEmitted&&ee.length===0&&(ee.endEmitted=!0,J.readable=!1,J.emit("end"),ee.autoDestroy)){var Q=J._writableState;(!Q||Q.autoDestroy&&Q.finished)&&J.destroy()}}function re(ee,J){for(var Q=0,ne=ee.length;Q<ne;Q++)if(ee[Q]===J)return Q;return-1}M.prototype.read=function(ee){n("read",ee),ee=parseInt(ee,10);var J=this._readableState,Q=ee;if(ee!==0&&(J.emittedReadable=!1),ee===0&&J.needReadable&&((J.highWaterMark!==0?J.length>=J.highWaterMark:J.length>0)||J.ended))return n("read: emitReadable",J.length,J.ended),J.length===0&&J.ended?H(this):P(this),null;if((ee=D(ee,J))===0&&J.ended)return J.length===0&&H(this),null;var ne,K=J.needReadable;return n("need readable",K),(J.length===0||J.length-ee<J.highWaterMark)&&n("length less than watermark",K=!0),J.ended||J.reading?n("reading or ended",K=!1):K&&(n("do read"),J.reading=!0,J.sync=!0,J.length===0&&(J.needReadable=!0),this._read(J.highWaterMark),J.sync=!1,J.reading||(ee=D(Q,J))),(ne=ee>0?z(ee,J):null)===null?(J.needReadable=J.length<=J.highWaterMark,ee=0):(J.length-=ee,J.awaitDrain=0),J.length===0&&(J.ended||(J.needReadable=!0),Q!==ee&&J.ended&&H(this)),ne!==null&&this.emit("data",ne),ne},M.prototype._read=function(ee){m(this,new p("_read()"))},M.prototype.pipe=function(ee,J){var Q=this,ne=this._readableState;switch(ne.pipesCount){case 0:ne.pipes=ee;break;case 1:ne.pipes=[ne.pipes,ee];break;default:ne.pipes.push(ee)}ne.pipesCount+=1,n("pipe count=%d opts=%j",ne.pipesCount,J);var K=J&&J.end===!1||ee===w.stdout||ee===w.stderr?ve:oe;function oe(){n("onend"),ee.end()}ne.endEmitted?w.nextTick(K):Q.once("end",K),ee.on("unpipe",function ye(me,Me){n("onunpipe"),me===Q&&Me&&Me.hasUnpiped===!1&&(Me.hasUnpiped=!0,n("cleanup"),ee.removeListener("close",_e),ee.removeListener("finish",xe),ee.removeListener("drain",le),ee.removeListener("error",be),ee.removeListener("unpipe",ye),Q.removeListener("end",oe),Q.removeListener("end",ve),Q.removeListener("data",de),se=!0,!ne.awaitDrain||ee._writableState&&!ee._writableState.needDrain||le())});var le=function(ye){return function(){var me=ye._readableState;n("pipeOnDrain",me.awaitDrain),me.awaitDrain&&me.awaitDrain--,me.awaitDrain===0&&T(ye,"data")&&(me.flowing=!0,Z(ye))}}(Q);ee.on("drain",le);var se=!1;function de(ye){n("ondata");var me=ee.write(ye);n("dest.write",me),me===!1&&((ne.pipesCount===1&&ne.pipes===ee||ne.pipesCount>1&&re(ne.pipes,ee)!==-1)&&!se&&(n("false write response, pause",ne.awaitDrain),ne.awaitDrain++),Q.pause())}function be(ye){n("onerror",ye),ve(),ee.removeListener("error",be),T(ee,"error")===0&&m(ee,ye)}function _e(){ee.removeListener("finish",xe),ve()}function xe(){n("onfinish"),ee.removeListener("close",_e),ve()}function ve(){n("unpipe"),Q.unpipe(ee)}return Q.on("data",de),function(ye,me,Me){if(typeof ye.prependListener=="function")return ye.prependListener(me,Me);ye._events&&ye._events[me]?Array.isArray(ye._events[me])?ye._events[me].unshift(Me):ye._events[me]=[Me,ye._events[me]]:ye.on(me,Me)}(ee,"error",be),ee.once("close",_e),ee.once("finish",xe),ee.emit("pipe",Q),ne.flowing||(n("pipe resume"),Q.resume()),ee},M.prototype.unpipe=function(ee){var J=this._readableState,Q={hasUnpiped:!1};if(J.pipesCount===0)return this;if(J.pipesCount===1)return ee&&ee!==J.pipes||(ee||(ee=J.pipes),J.pipes=null,J.pipesCount=0,J.flowing=!1,ee&&ee.emit("unpipe",this,Q)),this;if(!ee){var ne=J.pipes,K=J.pipesCount;J.pipes=null,J.pipesCount=0,J.flowing=!1;for(var oe=0;oe<K;oe++)ne[oe].emit("unpipe",this,{hasUnpiped:!1});return this}var le=re(J.pipes,ee);return le===-1||(J.pipes.splice(le,1),J.pipesCount-=1,J.pipesCount===1&&(J.pipes=J.pipes[0]),ee.emit("unpipe",this,Q)),this},M.prototype.on=function(ee,J){var Q=x.prototype.on.call(this,ee,J),ne=this._readableState;return ee==="data"?(ne.readableListening=this.listenerCount("readable")>0,ne.flowing!==!1&&this.resume()):ee==="readable"&&(ne.endEmitted||ne.readableListening||(ne.readableListening=ne.needReadable=!0,ne.flowing=!1,ne.emittedReadable=!1,n("on readable",ne.length,ne.reading),ne.length?P(this):ne.reading||w.nextTick(F,this))),Q},M.prototype.addListener=M.prototype.on,M.prototype.removeListener=function(ee,J){var Q=x.prototype.removeListener.call(this,ee,J);return ee==="readable"&&w.nextTick(V,this),Q},M.prototype.removeAllListeners=function(ee){var J=x.prototype.removeAllListeners.apply(this,arguments);return ee!=="readable"&&ee!==void 0||w.nextTick(V,this),J},M.prototype.resume=function(){var ee=this._readableState;return ee.flowing||(n("resume"),ee.flowing=!ee.readableListening,function(J,Q){Q.resumeScheduled||(Q.resumeScheduled=!0,w.nextTick(j,J,Q))}(this,ee)),ee.paused=!1,this},M.prototype.pause=function(){return n("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(n("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},M.prototype.wrap=function(ee){var J=this,Q=this._readableState,ne=!1;for(var K in ee.on("end",function(){if(n("wrapped end"),Q.decoder&&!Q.ended){var le=Q.decoder.end();le&&le.length&&J.push(le)}J.push(null)}),ee.on("data",function(le){n("wrapped data"),Q.decoder&&(le=Q.decoder.write(le)),Q.objectMode&&le==null||(Q.objectMode||le&&le.length)&&(J.push(le)||(ne=!0,ee.pause()))}),ee)this[K]===void 0&&typeof ee[K]=="function"&&(this[K]=function(le){return function(){return ee[le].apply(ee,arguments)}}(K));for(var oe=0;oe<b.length;oe++)ee.on(b[oe],this.emit.bind(this,b[oe]));return this._read=function(le){n("wrapped _read",le),ne&&(ne=!1,ee.resume())},this},typeof Symbol=="function"&&(M.prototype[Symbol.asyncIterator]=function(){return r===void 0&&(r=e(60328)),r(this)}),Object.defineProperty(M.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(M.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(M.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ee){this._readableState&&(this._readableState.flowing=ee)}}),M._fromList=z,Object.defineProperty(M.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(M.from=function(ee,J){return i===void 0&&(i=e(90555)),i(M,ee,J)})},22477:function(C,A,e){"use strict";C.exports=t;var v=e(92784).i,w=v.ERR_METHOD_NOT_IMPLEMENTED,n=v.ERR_MULTIPLE_CALLBACK,T=v.ERR_TRANSFORM_ALREADY_TRANSFORMING,x=v.ERR_TRANSFORM_WITH_LENGTH_0,f=e(15316);function s(i,a){var u=this._transformState;u.transforming=!1;var l=u.writecb;if(l===null)return this.emit("error",new n);u.writechunk=null,u.writecb=null,a!=null&&this.push(a),l(i);var d=this._readableState;d.reading=!1,(d.needReadable||d.length<d.highWaterMark)&&this._read(d.highWaterMark)}function t(i){if(!(this instanceof t))return new t(i);f.call(this,i),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,i&&(typeof i.transform=="function"&&(this._transform=i.transform),typeof i.flush=="function"&&(this._flush=i.flush)),this.on("prefinish",o)}function o(){var i=this;typeof this._flush!="function"||this._readableState.destroyed?r(this,null,null):this._flush(function(a,u){r(i,a,u)})}function r(i,a,u){if(a)return i.emit("error",a);if(u!=null&&i.push(u),i._writableState.length)throw new x;if(i._transformState.transforming)throw new T;return i.push(null)}e(6768)(t,f),t.prototype.push=function(i,a){return this._transformState.needTransform=!1,f.prototype.push.call(this,i,a)},t.prototype._transform=function(i,a,u){u(new w("_transform()"))},t.prototype._write=function(i,a,u){var l=this._transformState;if(l.writecb=u,l.writechunk=i,l.writeencoding=a,!l.transforming){var d=this._readableState;(l.needTransform||d.needReadable||d.length<d.highWaterMark)&&this._read(d.highWaterMark)}},t.prototype._read=function(i){var a=this._transformState;a.writechunk===null||a.transforming?a.needTransform=!0:(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform))},t.prototype._destroy=function(i,a){f.prototype._destroy.call(this,i,function(u){a(u)})}},11288:function(C,A,e){"use strict";var v,w=e(4168);function n(O){var N=this;this.next=null,this.entry=null,this.finish=function(){(function(V,F,j){var Z=V.entry;for(V.entry=null;Z;){var z=Z.callback;F.pendingcb--,z(void 0),Z=Z.next}F.corkedRequestsFree.next=V})(N,O)}}C.exports=M,M.WritableState=y;var T,x={deprecate:e(96656)},f=e(4776),s=e(33576).Buffer,t=e.g.Uint8Array||function(){},o=e(55324),r=e(24888).getHighWaterMark,i=e(92784).i,a=i.ERR_INVALID_ARG_TYPE,u=i.ERR_METHOD_NOT_IMPLEMENTED,l=i.ERR_MULTIPLE_CALLBACK,d=i.ERR_STREAM_CANNOT_PIPE,c=i.ERR_STREAM_DESTROYED,_=i.ERR_STREAM_NULL_VALUES,p=i.ERR_STREAM_WRITE_AFTER_END,g=i.ERR_UNKNOWN_ENCODING,m=o.errorOrDestroy;function b(){}function y(O,N,V){v=v||e(15316),O=O||{},typeof V!="boolean"&&(V=N instanceof v),this.objectMode=!!O.objectMode,V&&(this.objectMode=this.objectMode||!!O.writableObjectMode),this.highWaterMark=r(this,O,"writableHighWaterMark",V),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var F=O.decodeStrings===!1;this.decodeStrings=!F,this.defaultEncoding=O.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(j){(function(Z,z){var H=Z._writableState,U=H.sync,re=H.writecb;if(typeof re!="function")throw new l;if(function(J){J.writing=!1,J.writecb=null,J.length-=J.writelen,J.writelen=0}(H),z)(function(J,Q,ne,K,oe){--Q.pendingcb,ne?(w.nextTick(oe,K),w.nextTick(L,J,Q),J._writableState.errorEmitted=!0,m(J,K)):(oe(K),J._writableState.errorEmitted=!0,m(J,K),L(J,Q))})(Z,H,U,z,re);else{var ee=D(H)||Z.destroyed;ee||H.corked||H.bufferProcessing||!H.bufferedRequest||k(Z,H),U?w.nextTick(E,Z,H,ee,re):E(Z,H,ee,re)}})(N,j)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=O.emitClose!==!1,this.autoDestroy=!!O.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function M(O){var N=this instanceof(v=v||e(15316));if(!N&&!T.call(M,this))return new M(O);this._writableState=new y(O,this,N),this.writable=!0,O&&(typeof O.write=="function"&&(this._write=O.write),typeof O.writev=="function"&&(this._writev=O.writev),typeof O.destroy=="function"&&(this._destroy=O.destroy),typeof O.final=="function"&&(this._final=O.final)),f.call(this)}function h(O,N,V,F,j,Z,z){N.writelen=F,N.writecb=z,N.writing=!0,N.sync=!0,N.destroyed?N.onwrite(new c("write")):V?O._writev(j,N.onwrite):O._write(j,Z,N.onwrite),N.sync=!1}function E(O,N,V,F){V||function(j,Z){Z.length===0&&Z.needDrain&&(Z.needDrain=!1,j.emit("drain"))}(O,N),N.pendingcb--,F(),L(O,N)}function k(O,N){N.bufferProcessing=!0;var V=N.bufferedRequest;if(O._writev&&V&&V.next){var F=N.bufferedRequestCount,j=new Array(F),Z=N.corkedRequestsFree;Z.entry=V;for(var z=0,H=!0;V;)j[z]=V,V.isBuf||(H=!1),V=V.next,z+=1;j.allBuffers=H,h(O,N,!0,N.length,j,"",Z.finish),N.pendingcb++,N.lastBufferedRequest=null,Z.next?(N.corkedRequestsFree=Z.next,Z.next=null):N.corkedRequestsFree=new n(N),N.bufferedRequestCount=0}else{for(;V;){var U=V.chunk,re=V.encoding,ee=V.callback;if(h(O,N,!1,N.objectMode?1:U.length,U,re,ee),V=V.next,N.bufferedRequestCount--,N.writing)break}V===null&&(N.lastBufferedRequest=null)}N.bufferedRequest=V,N.bufferProcessing=!1}function D(O){return O.ending&&O.length===0&&O.bufferedRequest===null&&!O.finished&&!O.writing}function P(O,N){O._final(function(V){N.pendingcb--,V&&m(O,V),N.prefinished=!0,O.emit("prefinish"),L(O,N)})}function L(O,N){var V=D(N);if(V&&(function(j,Z){Z.prefinished||Z.finalCalled||(typeof j._final!="function"||Z.destroyed?(Z.prefinished=!0,j.emit("prefinish")):(Z.pendingcb++,Z.finalCalled=!0,w.nextTick(P,j,Z)))}(O,N),N.pendingcb===0&&(N.finished=!0,O.emit("finish"),N.autoDestroy))){var F=O._readableState;(!F||F.autoDestroy&&F.endEmitted)&&O.destroy()}return V}e(6768)(M,f),y.prototype.getBuffer=function(){for(var O=this.bufferedRequest,N=[];O;)N.push(O),O=O.next;return N},function(){try{Object.defineProperty(y.prototype,"buffer",{get:x.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(T=Function.prototype[Symbol.hasInstance],Object.defineProperty(M,Symbol.hasInstance,{value:function(O){return!!T.call(this,O)||this===M&&O&&O._writableState instanceof y}})):T=function(O){return O instanceof this},M.prototype.pipe=function(){m(this,new d)},M.prototype.write=function(O,N,V){var F,j=this._writableState,Z=!1,z=!j.objectMode&&(F=O,s.isBuffer(F)||F instanceof t);return z&&!s.isBuffer(O)&&(O=function(H){return s.from(H)}(O)),typeof N=="function"&&(V=N,N=null),z?N="buffer":N||(N=j.defaultEncoding),typeof V!="function"&&(V=b),j.ending?function(H,U){var re=new p;m(H,re),w.nextTick(U,re)}(this,V):(z||function(H,U,re,ee){var J;return re===null?J=new _:typeof re=="string"||U.objectMode||(J=new a("chunk",["string","Buffer"],re)),!J||(m(H,J),w.nextTick(ee,J),!1)}(this,j,O,V))&&(j.pendingcb++,Z=function(H,U,re,ee,J,Q){if(!re){var ne=function(se,de,be){return se.objectMode||se.decodeStrings===!1||typeof de!="string"||(de=s.from(de,be)),de}(U,ee,J);ee!==ne&&(re=!0,J="buffer",ee=ne)}var K=U.objectMode?1:ee.length;U.length+=K;var oe=U.length<U.highWaterMark;if(oe||(U.needDrain=!0),U.writing||U.corked){var le=U.lastBufferedRequest;U.lastBufferedRequest={chunk:ee,encoding:J,isBuf:re,callback:Q,next:null},le?le.next=U.lastBufferedRequest:U.bufferedRequest=U.lastBufferedRequest,U.bufferedRequestCount+=1}else h(H,U,!1,K,ee,J,Q);return oe}(this,j,z,O,N,V)),Z},M.prototype.cork=function(){this._writableState.corked++},M.prototype.uncork=function(){var O=this._writableState;O.corked&&(O.corked--,O.writing||O.corked||O.bufferProcessing||!O.bufferedRequest||k(this,O))},M.prototype.setDefaultEncoding=function(O){if(typeof O=="string"&&(O=O.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((O+"").toLowerCase())>-1))throw new g(O);return this._writableState.defaultEncoding=O,this},Object.defineProperty(M.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(M.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),M.prototype._write=function(O,N,V){V(new u("_write()"))},M.prototype._writev=null,M.prototype.end=function(O,N,V){var F=this._writableState;return typeof O=="function"?(V=O,O=null,N=null):typeof N=="function"&&(V=N,N=null),O!=null&&this.write(O,N),F.corked&&(F.corked=1,this.uncork()),F.ending||function(j,Z,z){Z.ending=!0,L(j,Z),z&&(Z.finished?w.nextTick(z):j.once("finish",z)),Z.ended=!0,j.writable=!1}(this,F,V),this},Object.defineProperty(M.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(O){this._writableState&&(this._writableState.destroyed=O)}}),M.prototype.destroy=o.destroy,M.prototype._undestroy=o.undestroy,M.prototype._destroy=function(O,N){N(O)}},60328:function(C,A,e){"use strict";var v,w=e(4168);function n(_,p,g){return p in _?Object.defineProperty(_,p,{value:g,enumerable:!0,configurable:!0,writable:!0}):_[p]=g,_}var T=e(15932),x=Symbol("lastResolve"),f=Symbol("lastReject"),s=Symbol("error"),t=Symbol("ended"),o=Symbol("lastPromise"),r=Symbol("handlePromise"),i=Symbol("stream");function a(_,p){return{value:_,done:p}}function u(_){var p=_[x];if(p!==null){var g=_[i].read();g!==null&&(_[o]=null,_[x]=null,_[f]=null,p(a(g,!1)))}}function l(_){w.nextTick(u,_)}var d=Object.getPrototypeOf(function(){}),c=Object.setPrototypeOf((n(v={get stream(){return this[i]},next:function(){var _=this,p=this[s];if(p!==null)return Promise.reject(p);if(this[t])return Promise.resolve(a(void 0,!0));if(this[i].destroyed)return new Promise(function(y,M){w.nextTick(function(){_[s]?M(_[s]):y(a(void 0,!0))})});var g,m=this[o];if(m)g=new Promise(function(y,M){return function(h,E){y.then(function(){M[t]?h(a(void 0,!0)):M[r](h,E)},E)}}(m,this));else{var b=this[i].read();if(b!==null)return Promise.resolve(a(b,!1));g=new Promise(this[r])}return this[o]=g,g}},Symbol.asyncIterator,function(){return this}),n(v,"return",function(){var _=this;return new Promise(function(p,g){_[i].destroy(null,function(m){m?g(m):p(a(void 0,!0))})})}),v),d);C.exports=function(_){var p,g=Object.create(c,(n(p={},i,{value:_,writable:!0}),n(p,x,{value:null,writable:!0}),n(p,f,{value:null,writable:!0}),n(p,s,{value:null,writable:!0}),n(p,t,{value:_._readableState.endEmitted,writable:!0}),n(p,r,{value:function(m,b){var y=g[i].read();y?(g[o]=null,g[x]=null,g[f]=null,m(a(y,!1))):(g[x]=m,g[f]=b)},writable:!0}),p));return g[o]=null,T(_,function(m){if(m&&m.code!=="ERR_STREAM_PREMATURE_CLOSE"){var b=g[f];return b!==null&&(g[o]=null,g[x]=null,g[f]=null,b(m)),void(g[s]=m)}var y=g[x];y!==null&&(g[o]=null,g[x]=null,g[f]=null,y(a(void 0,!0))),g[t]=!0}),_.on("readable",l.bind(null,g)),g}},47264:function(C,A,e){"use strict";function v(s,t){var o=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable})),o.push.apply(o,r)}return o}function w(s,t,o){return t in s?Object.defineProperty(s,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[t]=o,s}function n(s,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(s,r.key,r)}}var T=e(33576).Buffer,x=e(21576).inspect,f=x&&x.custom||"inspect";C.exports=function(){function s(){(function(r,i){if(!(r instanceof i))throw new TypeError("Cannot call a class as a function")})(this,s),this.head=null,this.tail=null,this.length=0}var t,o;return t=s,o=[{key:"push",value:function(r){var i={data:r,next:null};this.length>0?this.tail.next=i:this.head=i,this.tail=i,++this.length}},{key:"unshift",value:function(r){var i={data:r,next:this.head};this.length===0&&(this.tail=i),this.head=i,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var i=this.head,a=""+i.data;i=i.next;)a+=r+i.data;return a}},{key:"concat",value:function(r){if(this.length===0)return T.alloc(0);for(var i,a,u,l=T.allocUnsafe(r>>>0),d=this.head,c=0;d;)i=d.data,a=l,u=c,T.prototype.copy.call(i,a,u),c+=d.data.length,d=d.next;return l}},{key:"consume",value:function(r,i){var a;return r<this.head.data.length?(a=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):a=r===this.head.data.length?this.shift():i?this._getString(r):this._getBuffer(r),a}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var i=this.head,a=1,u=i.data;for(r-=u.length;i=i.next;){var l=i.data,d=r>l.length?l.length:r;if(d===l.length?u+=l:u+=l.slice(0,r),(r-=d)==0){d===l.length?(++a,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=l.slice(d));break}++a}return this.length-=a,u}},{key:"_getBuffer",value:function(r){var i=T.allocUnsafe(r),a=this.head,u=1;for(a.data.copy(i),r-=a.data.length;a=a.next;){var l=a.data,d=r>l.length?l.length:r;if(l.copy(i,i.length-r,0,d),(r-=d)==0){d===l.length?(++u,a.next?this.head=a.next:this.head=this.tail=null):(this.head=a,a.data=l.slice(d));break}++u}return this.length-=u,i}},{key:f,value:function(r,i){return x(this,function(a){for(var u=1;u<arguments.length;u++){var l=arguments[u]!=null?arguments[u]:{};u%2?v(Object(l),!0).forEach(function(d){w(a,d,l[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):v(Object(l)).forEach(function(d){Object.defineProperty(a,d,Object.getOwnPropertyDescriptor(l,d))})}return a}({},i,{depth:0,customInspect:!1}))}}],o&&n(t.prototype,o),s}()},55324:function(C,A,e){"use strict";var v=e(4168);function w(x,f){T(x,f),n(x)}function n(x){x._writableState&&!x._writableState.emitClose||x._readableState&&!x._readableState.emitClose||x.emit("close")}function T(x,f){x.emit("error",f)}C.exports={destroy:function(x,f){var s=this,t=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return t||o?(f?f(x):x&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,v.nextTick(T,this,x)):v.nextTick(T,this,x)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(x||null,function(r){!f&&r?s._writableState?s._writableState.errorEmitted?v.nextTick(n,s):(s._writableState.errorEmitted=!0,v.nextTick(w,s,r)):v.nextTick(w,s,r):f?(v.nextTick(n,s),f(r)):v.nextTick(n,s)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(x,f){var s=x._readableState,t=x._writableState;s&&s.autoDestroy||t&&t.autoDestroy?x.destroy(f):x.emit("error",f)}}},15932:function(C,A,e){"use strict";var v=e(92784).i.ERR_STREAM_PREMATURE_CLOSE;function w(){}C.exports=function n(T,x,f){if(typeof x=="function")return n(T,null,x);x||(x={}),f=function(_){var p=!1;return function(){if(!p){p=!0;for(var g=arguments.length,m=new Array(g),b=0;b<g;b++)m[b]=arguments[b];_.apply(this,m)}}}(f||w);var s=x.readable||x.readable!==!1&&T.readable,t=x.writable||x.writable!==!1&&T.writable,o=function(){T.writable||i()},r=T._writableState&&T._writableState.finished,i=function(){t=!1,r=!0,s||f.call(T)},a=T._readableState&&T._readableState.endEmitted,u=function(){s=!1,a=!0,t||f.call(T)},l=function(_){f.call(T,_)},d=function(){var _;return s&&!a?(T._readableState&&T._readableState.ended||(_=new v),f.call(T,_)):t&&!r?(T._writableState&&T._writableState.ended||(_=new v),f.call(T,_)):void 0},c=function(){T.req.on("finish",i)};return function(_){return _.setHeader&&typeof _.abort=="function"}(T)?(T.on("complete",i),T.on("abort",d),T.req?c():T.on("request",c)):t&&!T._writableState&&(T.on("end",o),T.on("close",o)),T.on("end",u),T.on("finish",i),x.error!==!1&&T.on("error",l),T.on("close",d),function(){T.removeListener("complete",i),T.removeListener("abort",d),T.removeListener("request",c),T.req&&T.req.removeListener("finish",i),T.removeListener("end",o),T.removeListener("close",o),T.removeListener("finish",i),T.removeListener("end",u),T.removeListener("error",l),T.removeListener("close",d)}}},90555:function(C){C.exports=function(){throw new Error("Readable.from is not available in the browser")}},38180:function(C,A,e){"use strict";var v,w=e(92784).i,n=w.ERR_MISSING_ARGS,T=w.ERR_STREAM_DESTROYED;function x(t){if(t)throw t}function f(t){t()}function s(t,o){return t.pipe(o)}C.exports=function(){for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];var i,a=function(l){return l.length?typeof l[l.length-1]!="function"?x:l.pop():x}(o);if(Array.isArray(o[0])&&(o=o[0]),o.length<2)throw new n("streams");var u=o.map(function(l,d){var c=d<o.length-1;return function(_,p,g,m){m=function(M){var h=!1;return function(){h||(h=!0,M.apply(void 0,arguments))}}(m);var b=!1;_.on("close",function(){b=!0}),v===void 0&&(v=e(15932)),v(_,{readable:p,writable:g},function(M){if(M)return m(M);b=!0,m()});var y=!1;return function(M){if(!b&&!y)return y=!0,function(h){return h.setHeader&&typeof h.abort=="function"}(_)?_.abort():typeof _.destroy=="function"?_.destroy():void m(M||new T("pipe"))}}(l,c,d>0,function(_){i||(i=_),_&&u.forEach(f),c||(u.forEach(f),a(i))})});return o.reduce(s)}},24888:function(C,A,e){"use strict";var v=e(92784).i.ERR_INVALID_OPT_VALUE;C.exports={getHighWaterMark:function(w,n,T,x){var f=function(s,t,o){return s.highWaterMark!=null?s.highWaterMark:t?s[o]:null}(n,x,T);if(f!=null){if(!isFinite(f)||Math.floor(f)!==f||f<0)throw new v(x?T:"highWaterMark",f);return Math.floor(f)}return w.objectMode?16:16384}}},4776:function(C,A,e){C.exports=e(61252).EventEmitter},86032:function(C,A,e){"use strict";var v=e(30456).Buffer,w=v.isEncoding||function(a){switch((a=""+a)&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(a){var u;switch(this.encoding=function(l){var d=function(c){if(!c)return"utf8";for(var _;;)switch(c){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return c;default:if(_)return;c=(""+c).toLowerCase(),_=!0}}(l);if(typeof d!="string"&&(v.isEncoding===w||!w(l)))throw new Error("Unknown encoding: "+l);return d||l}(a),this.encoding){case"utf16le":this.text=f,this.end=s,u=4;break;case"utf8":this.fillLast=x,u=4;break;case"base64":this.text=t,this.end=o,u=3;break;default:return this.write=r,void(this.end=i)}this.lastNeed=0,this.lastTotal=0,this.lastChar=v.allocUnsafe(u)}function T(a){return a<=127?0:a>>5==6?2:a>>4==14?3:a>>3==30?4:a>>6==2?-1:-2}function x(a){var u=this.lastTotal-this.lastNeed,l=function(d,c,_){if((192&c[0])!=128)return d.lastNeed=0,"\uFFFD";if(d.lastNeed>1&&c.length>1){if((192&c[1])!=128)return d.lastNeed=1,"\uFFFD";if(d.lastNeed>2&&c.length>2&&(192&c[2])!=128)return d.lastNeed=2,"\uFFFD"}}(this,a);return l!==void 0?l:this.lastNeed<=a.length?(a.copy(this.lastChar,u,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(a.copy(this.lastChar,u,0,a.length),void(this.lastNeed-=a.length))}function f(a,u){if((a.length-u)%2==0){var l=a.toString("utf16le",u);if(l){var d=l.charCodeAt(l.length-1);if(d>=55296&&d<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1],l.slice(0,-1)}return l}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=a[a.length-1],a.toString("utf16le",u,a.length-1)}function s(a){var u=a&&a.length?this.write(a):"";if(this.lastNeed){var l=this.lastTotal-this.lastNeed;return u+this.lastChar.toString("utf16le",0,l)}return u}function t(a,u){var l=(a.length-u)%3;return l===0?a.toString("base64",u):(this.lastNeed=3-l,this.lastTotal=3,l===1?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]),a.toString("base64",u,a.length-l))}function o(a){var u=a&&a.length?this.write(a):"";return this.lastNeed?u+this.lastChar.toString("base64",0,3-this.lastNeed):u}function r(a){return a.toString(this.encoding)}function i(a){return a&&a.length?this.write(a):""}A.o=n,n.prototype.write=function(a){if(a.length===0)return"";var u,l;if(this.lastNeed){if((u=this.fillLast(a))===void 0)return"";l=this.lastNeed,this.lastNeed=0}else l=0;return l<a.length?u?u+this.text(a,l):this.text(a,l):u||""},n.prototype.end=function(a){var u=a&&a.length?this.write(a):"";return this.lastNeed?u+"\uFFFD":u},n.prototype.text=function(a,u){var l=function(c,_,p){var g=_.length-1;if(g<p)return 0;var m=T(_[g]);return m>=0?(m>0&&(c.lastNeed=m-1),m):--g<p||m===-2?0:(m=T(_[g]))>=0?(m>0&&(c.lastNeed=m-2),m):--g<p||m===-2?0:(m=T(_[g]))>=0?(m>0&&(m===2?m=0:c.lastNeed=m-3),m):0}(this,a,u);if(!this.lastNeed)return a.toString("utf8",u);this.lastTotal=l;var d=a.length-(l-this.lastNeed);return a.copy(this.lastChar,0,d),a.toString("utf8",u,d)},n.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length),this.lastNeed-=a.length}},55619:function(C,A,e){var v=e(45408),w=e(86844)("stream-parser");C.exports=function(c){var _=c&&typeof c._transform=="function",p=c&&typeof c._write=="function";if(!_&&!p)throw new Error("must pass a Writable or Transform stream in");w("extending Parser into stream"),c._bytes=t,c._skipBytes=o,_&&(c._passthrough=r),_?c._transform=a:c._write=i};var n=-1,T=0,x=1,f=2;function s(c){w("initializing parser stream"),c._parserBytesLeft=0,c._parserBuffers=[],c._parserBuffered=0,c._parserState=n,c._parserCallback=null,typeof c.push=="function"&&(c._parserOutput=c.push.bind(c)),c._parserInit=!0}function t(c,_){v(!this._parserCallback,'there is already a "callback" set!'),v(isFinite(c)&&c>0,'can only buffer a finite number of bytes > 0, got "'+c+'"'),this._parserInit||s(this),w("buffering %o bytes",c),this._parserBytesLeft=c,this._parserCallback=_,this._parserState=T}function o(c,_){v(!this._parserCallback,'there is already a "callback" set!'),v(c>0,'can only skip > 0 bytes, got "'+c+'"'),this._parserInit||s(this),w("skipping %o bytes",c),this._parserBytesLeft=c,this._parserCallback=_,this._parserState=x}function r(c,_){v(!this._parserCallback,'There is already a "callback" set!'),v(c>0,'can only pass through > 0 bytes, got "'+c+'"'),this._parserInit||s(this),w("passing through %o bytes",c),this._parserBytesLeft=c,this._parserCallback=_,this._parserState=f}function i(c,_,p){this._parserInit||s(this),w("write(%o bytes)",c.length),typeof _=="function"&&(p=_),l(this,c,null,p)}function a(c,_,p){this._parserInit||s(this),w("transform(%o bytes)",c.length),typeof _!="function"&&(_=this._parserOutput),l(this,c,_,p)}function u(c,_,p,g){if(c._parserBytesLeft-=_.length,w("%o bytes left for stream piece",c._parserBytesLeft),c._parserState===T?(c._parserBuffers.push(_),c._parserBuffered+=_.length):c._parserState===f&&p(_),c._parserBytesLeft!==0)return g;var m=c._parserCallback;if(m&&c._parserState===T&&c._parserBuffers.length>1&&(_=Buffer.concat(c._parserBuffers,c._parserBuffered)),c._parserState!==T&&(_=null),c._parserCallback=null,c._parserBuffered=0,c._parserState=n,c._parserBuffers.splice(0),m){var b=[];_&&b.push(_),p&&b.push(p);var y=m.length>b.length;y&&b.push(d(g));var M=m.apply(c,b);if(!y||g===M)return g}}var l=d(function c(_,p,g,m){return _._parserBytesLeft<=0?m(new Error("got data but not currently parsing anything")):p.length<=_._parserBytesLeft?function(){return u(_,p,g,m)}:function(){var b=p.slice(0,_._parserBytesLeft);return u(_,b,g,function(y){return y?m(y):p.length>b.length?function(){return c(_,p.slice(b.length),g,m)}:void 0})}});function d(c){return function(){for(var _=c.apply(this,arguments);typeof _=="function";)_=_();return _}}},86844:function(C,A,e){var v=e(4168);function w(){var n;try{n=A.storage.debug}catch{}return!n&&v!==void 0&&"env"in v&&(n=v.env.DEBUG),n}(A=C.exports=e(89416)).log=function(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},A.formatArgs=function(n){var T=this.useColors;if(n[0]=(T?"%c":"")+this.namespace+(T?" %c":" ")+n[0]+(T?"%c ":" ")+"+"+A.humanize(this.diff),T){var x="color: "+this.color;n.splice(1,0,x,"color: inherit");var f=0,s=0;n[0].replace(/%[a-zA-Z%]/g,function(t){t!=="%%"&&(f++,t==="%c"&&(s=f))}),n.splice(s,0,x)}},A.save=function(n){try{n==null?A.storage.removeItem("debug"):A.storage.debug=n}catch{}},A.load=w,A.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer")||typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},A.storage=typeof chrome<"u"&&chrome.storage!==void 0?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),A.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],A.formatters.j=function(n){try{return JSON.stringify(n)}catch(T){return"[UnexpectedJSONParseError]: "+T.message}},A.enable(w())},89416:function(C,A,e){var v;function w(n){function T(){if(T.enabled){var x=T,f=+new Date,s=f-(v||f);x.diff=s,x.prev=v,x.curr=f,v=f;for(var t=new Array(arguments.length),o=0;o<t.length;o++)t[o]=arguments[o];t[0]=A.coerce(t[0]),typeof t[0]!="string"&&t.unshift("%O");var r=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(i,a){if(i==="%%")return i;r++;var u=A.formatters[a];if(typeof u=="function"){var l=t[r];i=u.call(x,l),t.splice(r,1),r--}return i}),A.formatArgs.call(x,t),(T.log||A.log||console.log.bind(console)).apply(x,t)}}return T.namespace=n,T.enabled=A.enabled(n),T.useColors=A.useColors(),T.color=function(x){var f,s=0;for(f in x)s=(s<<5)-s+x.charCodeAt(f),s|=0;return A.colors[Math.abs(s)%A.colors.length]}(n),typeof A.init=="function"&&A.init(T),T}(A=C.exports=w.debug=w.default=w).coerce=function(n){return n instanceof Error?n.stack||n.message:n},A.disable=function(){A.enable("")},A.enable=function(n){A.save(n),A.names=[],A.skips=[];for(var T=(typeof n=="string"?n:"").split(/[\s,]+/),x=T.length,f=0;f<x;f++)T[f]&&((n=T[f].replace(/\*/g,".*?"))[0]==="-"?A.skips.push(new RegExp("^"+n.substr(1)+"$")):A.names.push(new RegExp("^"+n+"$")))},A.enabled=function(n){var T,x;for(T=0,x=A.skips.length;T<x;T++)if(A.skips[T].test(n))return!1;for(T=0,x=A.names.length;T<x;T++)if(A.names[T].test(n))return!0;return!1},A.humanize=e(93744),A.names=[],A.skips=[],A.formatters={}},93744:function(C){var A=1e3,e=60*A,v=60*e,w=24*v;function n(T,x,f){if(!(T<x))return T<1.5*x?Math.floor(T/x)+" "+f:Math.ceil(T/x)+" "+f+"s"}C.exports=function(T,x){x=x||{};var f,s=typeof T;if(s==="string"&&T.length>0)return function(t){if(!((t=String(t)).length>100)){var o=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(o){var r=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"days":case"day":case"d":return r*w;case"hours":case"hour":case"hrs":case"hr":case"h":return r*v;case"minutes":case"minute":case"mins":case"min":case"m":return r*e;case"seconds":case"second":case"secs":case"sec":case"s":return r*A;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}(T);if(s==="number"&&isNaN(T)===!1)return x.long?n(f=T,w,"day")||n(f,v,"hour")||n(f,e,"minute")||n(f,A,"second")||f+" ms":function(t){return t>=w?Math.round(t/w)+"d":t>=v?Math.round(t/v)+"h":t>=e?Math.round(t/e)+"m":t>=A?Math.round(t/A)+"s":t+"ms"}(T);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(T))}},39956:function(C,A,e){"use strict";var v=e(32868);C.exports=function(w,n,T){if(w==null)throw Error("First argument should be a string");if(n==null)throw Error("Separator should be a string or a RegExp");T?(typeof T=="string"||Array.isArray(T))&&(T={ignore:T}):T={},T.escape==null&&(T.escape=!0),T.ignore==null?T.ignore=["[]","()","{}","<>",'""',"''","``","\u201C\u201D","\xAB\xBB"]:(typeof T.ignore=="string"&&(T.ignore=[T.ignore]),T.ignore=T.ignore.map(function(i){return i.length===1&&(i+=i),i}));var x=v.parse(w,{flat:!0,brackets:T.ignore}),f=x[0].split(n);if(T.escape){for(var s=[],t=0;t<f.length;t++){var o=f[t],r=f[t+1];o[o.length-1]==="\\"&&o[o.length-2]!=="\\"?(s.push(o+n+r),t++):s.push(o)}f=s}for(t=0;t<f.length;t++)x[0]=f[t],f[t]=v.stringify(x,{flat:!0});return f}},78484:function(C){"use strict";C.exports=function(A){for(var e=A.length,v=new Array(e),w=new Array(e),n=new Array(e),T=new Array(e),x=new Array(e),f=new Array(e),s=0;s<e;++s)v[s]=-1,w[s]=0,n[s]=!1,T[s]=0,x[s]=-1,f[s]=[];var t,o=0,r=[],i=[];function a(d){var c=[d],_=[d];for(v[d]=w[d]=o,n[d]=!0,o+=1;_.length>0;){d=_[_.length-1];var p=A[d];if(T[d]<p.length){for(var g=T[d];g<p.length;++g){var m=p[g];if(v[m]<0){v[m]=w[m]=o,n[m]=!0,o+=1,c.push(m),_.push(m);break}n[m]&&(w[d]=0|Math.min(w[d],w[m])),x[m]>=0&&f[d].push(x[m])}T[d]=g}else{if(w[d]===v[d]){var b=[],y=[],M=0;for(g=c.length-1;g>=0;--g){var h=c[g];if(n[h]=!1,b.push(h),y.push(f[h]),M+=f[h].length,x[h]=r.length,h===d){c.length=g;break}}r.push(b);var E=new Array(M);for(g=0;g<y.length;g++)for(var k=0;k<y[g].length;k++)E[--M]=y[g][k];i.push(E)}_.pop()}}}for(s=0;s<e;++s)v[s]<0&&a(s);for(s=0;s<i.length;s++){var u=i[s];if(u.length!==0){u.sort(function(d,c){return d-c}),t=[u[0]];for(var l=1;l<u.length;l++)u[l]!==u[l-1]&&t.push(u[l]);i[s]=t}}return{components:r,adjacencyList:i}}},92848:function(C,A,e){"use strict";e.r(A);var v=2*Math.PI,w=function(x,f,s,t,o,r,i){var a=x.x,u=x.y;return{x:t*(a*=f)-o*(u*=s)+r,y:o*a+t*u+i}},n=function(x,f){var s=f===1.5707963267948966?.551915024494:f===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(f/4),t=Math.cos(x),o=Math.sin(x),r=Math.cos(x+f),i=Math.sin(x+f);return[{x:t-o*s,y:o+t*s},{x:r+i*s,y:i-r*s},{x:r,y:i}]},T=function(x,f,s,t){var o=x*s+f*t;return o>1&&(o=1),o<-1&&(o=-1),(x*t-f*s<0?-1:1)*Math.acos(o)};A.default=function(x){var f=x.px,s=x.py,t=x.cx,o=x.cy,r=x.rx,i=x.ry,a=x.xAxisRotation,u=a===void 0?0:a,l=x.largeArcFlag,d=l===void 0?0:l,c=x.sweepFlag,_=c===void 0?0:c,p=[];if(r===0||i===0)return[];var g=Math.sin(u*v/360),m=Math.cos(u*v/360),b=m*(f-t)/2+g*(s-o)/2,y=-g*(f-t)/2+m*(s-o)/2;if(b===0&&y===0)return[];r=Math.abs(r),i=Math.abs(i);var M=Math.pow(b,2)/Math.pow(r,2)+Math.pow(y,2)/Math.pow(i,2);M>1&&(r*=Math.sqrt(M),i*=Math.sqrt(M));var h=function(F,j,Z,z,H,U,re,ee,J,Q,ne,K){var oe=Math.pow(H,2),le=Math.pow(U,2),se=Math.pow(ne,2),de=Math.pow(K,2),be=oe*le-oe*de-le*se;be<0&&(be=0),be/=oe*de+le*se;var _e=(be=Math.sqrt(be)*(re===ee?-1:1))*H/U*K,xe=be*-U/H*ne,ve=Q*_e-J*xe+(F+Z)/2,ye=J*_e+Q*xe+(j+z)/2,me=(ne-_e)/H,Me=(K-xe)/U,Ae=(-ne-_e)/H,ce=(-K-xe)/U,ae=T(1,0,me,Me),pe=T(me,Me,Ae,ce);return ee===0&&pe>0&&(pe-=v),ee===1&&pe<0&&(pe+=v),[ve,ye,ae,pe]}(f,s,t,o,r,i,d,_,g,m,b,y),E=function(F,j){if(Array.isArray(F))return F;if(Symbol.iterator in Object(F))return function(Z,z){var H=[],U=!0,re=!1,ee=void 0;try{for(var J,Q=Z[Symbol.iterator]();!(U=(J=Q.next()).done)&&(H.push(J.value),!z||H.length!==z);U=!0);}catch(ne){re=!0,ee=ne}finally{try{!U&&Q.return&&Q.return()}finally{if(re)throw ee}}return H}(F,j);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(h,4),k=E[0],D=E[1],P=E[2],L=E[3],O=Math.abs(L)/(v/4);Math.abs(1-O)<1e-7&&(O=1);var N=Math.max(Math.ceil(O),1);L/=N;for(var V=0;V<N;V++)p.push(n(P,L)),P+=L;return p.map(function(F){var j=w(F[0],r,i,m,g,k,D),Z=j.x,z=j.y,H=w(F[1],r,i,m,g,k,D),U=H.x,re=H.y,ee=w(F[2],r,i,m,g,k,D);return{x1:Z,y1:z,x2:U,y2:re,x:ee.x,y:ee.y}})}},74840:function(C,A,e){"use strict";var v=e(21984),w=e(49972),n=e(41976),T=e(53520),x=e(45408);C.exports=function(f){if(Array.isArray(f)&&f.length===1&&typeof f[0]=="string"&&(f=f[0]),typeof f=="string"&&(x(T(f),"String is not an SVG path."),f=v(f)),x(Array.isArray(f),"Argument should be a string or an array of path segments."),f=w(f),!(f=n(f)).length)return[0,0,0,0];for(var s=[1/0,1/0,-1/0,-1/0],t=0,o=f.length;t<o;t++)for(var r=f[t].slice(1),i=0;i<r.length;i+=2)r[i+0]<s[0]&&(s[0]=r[i+0]),r[i+1]<s[1]&&(s[1]=r[i+1]),r[i+0]>s[2]&&(s[2]=r[i+0]),r[i+1]>s[3]&&(s[3]=r[i+1]);return s}},41976:function(C,A,e){"use strict";C.exports=function(T){for(var x,f=[],s=0,t=0,o=0,r=0,i=null,a=null,u=0,l=0,d=0,c=T.length;d<c;d++){var _=T[d],p=_[0];switch(p){case"M":o=_[1],r=_[2];break;case"A":var g=v({px:u,py:l,cx:_[6],cy:_[7],rx:_[1],ry:_[2],xAxisRotation:_[3],largeArcFlag:_[4],sweepFlag:_[5]});if(!g.length)continue;for(var m,b=0;b<g.length;b++)_=["C",(m=g[b]).x1,m.y1,m.x2,m.y2,m.x,m.y],b<g.length-1&&f.push(_);break;case"S":var y=u,M=l;x!="C"&&x!="S"||(y+=y-s,M+=M-t),_=["C",y,M,_[1],_[2],_[3],_[4]];break;case"T":x=="Q"||x=="T"?(i=2*u-i,a=2*l-a):(i=u,a=l),_=n(u,l,i,a,_[1],_[2]);break;case"Q":i=_[1],a=_[2],_=n(u,l,_[1],_[2],_[3],_[4]);break;case"L":_=w(u,l,_[1],_[2]);break;case"H":_=w(u,l,_[1],l);break;case"V":_=w(u,l,u,_[1]);break;case"Z":_=w(u,l,o,r)}x=p,u=_[_.length-2],l=_[_.length-1],_.length>4?(s=_[_.length-4],t=_[_.length-3]):(s=u,t=l),f.push(_)}return f};var v=e(92848);function w(T,x,f,s){return["C",T,x,f,s,f,s]}function n(T,x,f,s,t,o){return["C",T/3+.6666666666666666*f,x/3+.6666666666666666*s,t/3+.6666666666666666*f,o/3+.6666666666666666*s,t,o]}},20472:function(C,A,e){"use strict";var v,w=e(74840),n=e(21984),T=e(22235),x=e(53520),f=e(29620),s=document.createElement("canvas"),t=s.getContext("2d");C.exports=function(o,r){if(!x(o))throw Error("Argument should be valid svg path string");var i,a;r||(r={}),r.shape?(i=r.shape[0],a=r.shape[1]):(i=s.width=r.w||r.width||200,a=s.height=r.h||r.height||200);var u=Math.min(i,a),l=r.stroke||0,d=r.viewbox||r.viewBox||w(o),c=[i/(d[2]-d[0]),a/(d[3]-d[1])],_=Math.min(c[0]||0,c[1]||0)/2;if(t.fillStyle="black",t.fillRect(0,0,i,a),t.fillStyle="white",l&&(typeof l!="number"&&(l=1),t.strokeStyle=l>0?"white":"black",t.lineWidth=Math.abs(l)),t.translate(.5*i,.5*a),t.scale(_,_),function(){if(v!=null)return v;var m=document.createElement("canvas").getContext("2d");if(m.canvas.width=m.canvas.height=1,!window.Path2D)return v=!1;var b=new Path2D("M0,0h1v1h-1v-1Z");m.fillStyle="black",m.fill(b);var y=m.getImageData(0,0,1,1);return v=y&&y.data&&y.data[3]===255}()){var p=new Path2D(o);t.fill(p),l&&t.stroke(p)}else{var g=n(o);T(t,g),t.fill(),l&&t.stroke()}return t.setTransform(1,0,0,1,0,0),f(t,{cutoff:r.cutoff!=null?r.cutoff:.5,radius:r.radius!=null?r.radius:.5*u})}},49760:function(C,A,e){var v;(function(w){var n=/^\s+/,T=/\s+$/,x=0,f=w.round,s=w.min,t=w.max,o=w.random;function r(ne,K){if(K=K||{},(ne=ne||"")instanceof r)return ne;if(!(this instanceof r))return new r(ne,K);var oe=function(le){var se,de,be,_e={r:0,g:0,b:0},xe=1,ve=null,ye=null,me=null,Me=!1,Ae=!1;return typeof le=="string"&&(le=function(ce){ce=ce.replace(n,"").replace(T,"").toLowerCase();var ae,pe=!1;if(P[ce])ce=P[ce],pe=!0;else if(ce=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(ae=J.rgb.exec(ce))?{r:ae[1],g:ae[2],b:ae[3]}:(ae=J.rgba.exec(ce))?{r:ae[1],g:ae[2],b:ae[3],a:ae[4]}:(ae=J.hsl.exec(ce))?{h:ae[1],s:ae[2],l:ae[3]}:(ae=J.hsla.exec(ce))?{h:ae[1],s:ae[2],l:ae[3],a:ae[4]}:(ae=J.hsv.exec(ce))?{h:ae[1],s:ae[2],v:ae[3]}:(ae=J.hsva.exec(ce))?{h:ae[1],s:ae[2],v:ae[3],a:ae[4]}:(ae=J.hex8.exec(ce))?{r:F(ae[1]),g:F(ae[2]),b:F(ae[3]),a:H(ae[4]),format:pe?"name":"hex8"}:(ae=J.hex6.exec(ce))?{r:F(ae[1]),g:F(ae[2]),b:F(ae[3]),format:pe?"name":"hex"}:(ae=J.hex4.exec(ce))?{r:F(ae[1]+""+ae[1]),g:F(ae[2]+""+ae[2]),b:F(ae[3]+""+ae[3]),a:H(ae[4]+""+ae[4]),format:pe?"name":"hex8"}:!!(ae=J.hex3.exec(ce))&&{r:F(ae[1]+""+ae[1]),g:F(ae[2]+""+ae[2]),b:F(ae[3]+""+ae[3]),format:pe?"name":"hex"}}(le)),typeof le=="object"&&(Q(le.r)&&Q(le.g)&&Q(le.b)?(se=le.r,de=le.g,be=le.b,_e={r:255*N(se,255),g:255*N(de,255),b:255*N(be,255)},Me=!0,Ae=String(le.r).substr(-1)==="%"?"prgb":"rgb"):Q(le.h)&&Q(le.s)&&Q(le.v)?(ve=Z(le.s),ye=Z(le.v),_e=function(ce,ae,pe){ce=6*N(ce,360),ae=N(ae,100),pe=N(pe,100);var De=w.floor(ce),ke=ce-De,Ee=pe*(1-ae),Ie=pe*(1-ke*ae),Re=pe*(1-(1-ke)*ae),Ne=De%6;return{r:255*[pe,Ie,Ee,Ee,Re,pe][Ne],g:255*[Re,pe,pe,Ie,Ee,Ee][Ne],b:255*[Ee,Ee,Re,pe,pe,Ie][Ne]}}(le.h,ve,ye),Me=!0,Ae="hsv"):Q(le.h)&&Q(le.s)&&Q(le.l)&&(ve=Z(le.s),me=Z(le.l),_e=function(ce,ae,pe){var De,ke,Ee;function Ie(ge,we,Ce){return Ce<0&&(Ce+=1),Ce>1&&(Ce-=1),Ce<1/6?ge+6*(we-ge)*Ce:Ce<.5?we:Ce<2/3?ge+(we-ge)*(2/3-Ce)*6:ge}if(ce=N(ce,360),ae=N(ae,100),pe=N(pe,100),ae===0)De=ke=Ee=pe;else{var Re=pe<.5?pe*(1+ae):pe+ae-pe*ae,Ne=2*pe-Re;De=Ie(Ne,Re,ce+1/3),ke=Ie(Ne,Re,ce),Ee=Ie(Ne,Re,ce-1/3)}return{r:255*De,g:255*ke,b:255*Ee}}(le.h,ve,me),Me=!0,Ae="hsl"),le.hasOwnProperty("a")&&(xe=le.a)),xe=O(xe),{ok:Me,format:le.format||Ae,r:s(255,t(_e.r,0)),g:s(255,t(_e.g,0)),b:s(255,t(_e.b,0)),a:xe}}(ne);this._originalInput=ne,this._r=oe.r,this._g=oe.g,this._b=oe.b,this._a=oe.a,this._roundA=f(100*this._a)/100,this._format=K.format||oe.format,this._gradientType=K.gradientType,this._r<1&&(this._r=f(this._r)),this._g<1&&(this._g=f(this._g)),this._b<1&&(this._b=f(this._b)),this._ok=oe.ok,this._tc_id=x++}function i(ne,K,oe){ne=N(ne,255),K=N(K,255),oe=N(oe,255);var le,se,de=t(ne,K,oe),be=s(ne,K,oe),_e=(de+be)/2;if(de==be)le=se=0;else{var xe=de-be;switch(se=_e>.5?xe/(2-de-be):xe/(de+be),de){case ne:le=(K-oe)/xe+(K<oe?6:0);break;case K:le=(oe-ne)/xe+2;break;case oe:le=(ne-K)/xe+4}le/=6}return{h:le,s:se,l:_e}}function a(ne,K,oe){ne=N(ne,255),K=N(K,255),oe=N(oe,255);var le,se,de=t(ne,K,oe),be=s(ne,K,oe),_e=de,xe=de-be;if(se=de===0?0:xe/de,de==be)le=0;else{switch(de){case ne:le=(K-oe)/xe+(K<oe?6:0);break;case K:le=(oe-ne)/xe+2;break;case oe:le=(ne-K)/xe+4}le/=6}return{h:le,s:se,v:_e}}function u(ne,K,oe,le){var se=[j(f(ne).toString(16)),j(f(K).toString(16)),j(f(oe).toString(16))];return le&&se[0].charAt(0)==se[0].charAt(1)&&se[1].charAt(0)==se[1].charAt(1)&&se[2].charAt(0)==se[2].charAt(1)?se[0].charAt(0)+se[1].charAt(0)+se[2].charAt(0):se.join("")}function l(ne,K,oe,le){return[j(z(le)),j(f(ne).toString(16)),j(f(K).toString(16)),j(f(oe).toString(16))].join("")}function d(ne,K){K=K===0?0:K||10;var oe=r(ne).toHsl();return oe.s-=K/100,oe.s=V(oe.s),r(oe)}function c(ne,K){K=K===0?0:K||10;var oe=r(ne).toHsl();return oe.s+=K/100,oe.s=V(oe.s),r(oe)}function _(ne){return r(ne).desaturate(100)}function p(ne,K){K=K===0?0:K||10;var oe=r(ne).toHsl();return oe.l+=K/100,oe.l=V(oe.l),r(oe)}function g(ne,K){K=K===0?0:K||10;var oe=r(ne).toRgb();return oe.r=t(0,s(255,oe.r-f(-K/100*255))),oe.g=t(0,s(255,oe.g-f(-K/100*255))),oe.b=t(0,s(255,oe.b-f(-K/100*255))),r(oe)}function m(ne,K){K=K===0?0:K||10;var oe=r(ne).toHsl();return oe.l-=K/100,oe.l=V(oe.l),r(oe)}function b(ne,K){var oe=r(ne).toHsl(),le=(oe.h+K)%360;return oe.h=le<0?360+le:le,r(oe)}function y(ne){var K=r(ne).toHsl();return K.h=(K.h+180)%360,r(K)}function M(ne){var K=r(ne).toHsl(),oe=K.h;return[r(ne),r({h:(oe+120)%360,s:K.s,l:K.l}),r({h:(oe+240)%360,s:K.s,l:K.l})]}function h(ne){var K=r(ne).toHsl(),oe=K.h;return[r(ne),r({h:(oe+90)%360,s:K.s,l:K.l}),r({h:(oe+180)%360,s:K.s,l:K.l}),r({h:(oe+270)%360,s:K.s,l:K.l})]}function E(ne){var K=r(ne).toHsl(),oe=K.h;return[r(ne),r({h:(oe+72)%360,s:K.s,l:K.l}),r({h:(oe+216)%360,s:K.s,l:K.l})]}function k(ne,K,oe){K=K||6,oe=oe||30;var le=r(ne).toHsl(),se=360/oe,de=[r(ne)];for(le.h=(le.h-(se*K>>1)+720)%360;--K;)le.h=(le.h+se)%360,de.push(r(le));return de}function D(ne,K){K=K||6;for(var oe=r(ne).toHsv(),le=oe.h,se=oe.s,de=oe.v,be=[],_e=1/K;K--;)be.push(r({h:le,s:se,v:de})),de=(de+_e)%1;return be}r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var ne=this.toRgb();return(299*ne.r+587*ne.g+114*ne.b)/1e3},getLuminance:function(){var ne,K,oe,le=this.toRgb();return ne=le.r/255,K=le.g/255,oe=le.b/255,.2126*(ne<=.03928?ne/12.92:w.pow((ne+.055)/1.055,2.4))+.7152*(K<=.03928?K/12.92:w.pow((K+.055)/1.055,2.4))+.0722*(oe<=.03928?oe/12.92:w.pow((oe+.055)/1.055,2.4))},setAlpha:function(ne){return this._a=O(ne),this._roundA=f(100*this._a)/100,this},toHsv:function(){var ne=a(this._r,this._g,this._b);return{h:360*ne.h,s:ne.s,v:ne.v,a:this._a}},toHsvString:function(){var ne=a(this._r,this._g,this._b),K=f(360*ne.h),oe=f(100*ne.s),le=f(100*ne.v);return this._a==1?"hsv("+K+", "+oe+"%, "+le+"%)":"hsva("+K+", "+oe+"%, "+le+"%, "+this._roundA+")"},toHsl:function(){var ne=i(this._r,this._g,this._b);return{h:360*ne.h,s:ne.s,l:ne.l,a:this._a}},toHslString:function(){var ne=i(this._r,this._g,this._b),K=f(360*ne.h),oe=f(100*ne.s),le=f(100*ne.l);return this._a==1?"hsl("+K+", "+oe+"%, "+le+"%)":"hsla("+K+", "+oe+"%, "+le+"%, "+this._roundA+")"},toHex:function(ne){return u(this._r,this._g,this._b,ne)},toHexString:function(ne){return"#"+this.toHex(ne)},toHex8:function(ne){return function(K,oe,le,se,de){var be=[j(f(K).toString(16)),j(f(oe).toString(16)),j(f(le).toString(16)),j(z(se))];return de&&be[0].charAt(0)==be[0].charAt(1)&&be[1].charAt(0)==be[1].charAt(1)&&be[2].charAt(0)==be[2].charAt(1)&&be[3].charAt(0)==be[3].charAt(1)?be[0].charAt(0)+be[1].charAt(0)+be[2].charAt(0)+be[3].charAt(0):be.join("")}(this._r,this._g,this._b,this._a,ne)},toHex8String:function(ne){return"#"+this.toHex8(ne)},toRgb:function(){return{r:f(this._r),g:f(this._g),b:f(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+f(this._r)+", "+f(this._g)+", "+f(this._b)+")":"rgba("+f(this._r)+", "+f(this._g)+", "+f(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:f(100*N(this._r,255))+"%",g:f(100*N(this._g,255))+"%",b:f(100*N(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+f(100*N(this._r,255))+"%, "+f(100*N(this._g,255))+"%, "+f(100*N(this._b,255))+"%)":"rgba("+f(100*N(this._r,255))+"%, "+f(100*N(this._g,255))+"%, "+f(100*N(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(L[u(this._r,this._g,this._b,!0)]||!1)},toFilter:function(ne){var K="#"+l(this._r,this._g,this._b,this._a),oe=K,le=this._gradientType?"GradientType = 1, ":"";if(ne){var se=r(ne);oe="#"+l(se._r,se._g,se._b,se._a)}return"progid:DXImageTransform.Microsoft.gradient("+le+"startColorstr="+K+",endColorstr="+oe+")"},toString:function(ne){var K=!!ne;ne=ne||this._format;var oe=!1,le=this._a<1&&this._a>=0;return K||!le||ne!=="hex"&&ne!=="hex6"&&ne!=="hex3"&&ne!=="hex4"&&ne!=="hex8"&&ne!=="name"?(ne==="rgb"&&(oe=this.toRgbString()),ne==="prgb"&&(oe=this.toPercentageRgbString()),ne!=="hex"&&ne!=="hex6"||(oe=this.toHexString()),ne==="hex3"&&(oe=this.toHexString(!0)),ne==="hex4"&&(oe=this.toHex8String(!0)),ne==="hex8"&&(oe=this.toHex8String()),ne==="name"&&(oe=this.toName()),ne==="hsl"&&(oe=this.toHslString()),ne==="hsv"&&(oe=this.toHsvString()),oe||this.toHexString()):ne==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return r(this.toString())},_applyModification:function(ne,K){var oe=ne.apply(null,[this].concat([].slice.call(K)));return this._r=oe._r,this._g=oe._g,this._b=oe._b,this.setAlpha(oe._a),this},lighten:function(){return this._applyModification(p,arguments)},brighten:function(){return this._applyModification(g,arguments)},darken:function(){return this._applyModification(m,arguments)},desaturate:function(){return this._applyModification(d,arguments)},saturate:function(){return this._applyModification(c,arguments)},greyscale:function(){return this._applyModification(_,arguments)},spin:function(){return this._applyModification(b,arguments)},_applyCombination:function(ne,K){return ne.apply(null,[this].concat([].slice.call(K)))},analogous:function(){return this._applyCombination(k,arguments)},complement:function(){return this._applyCombination(y,arguments)},monochromatic:function(){return this._applyCombination(D,arguments)},splitcomplement:function(){return this._applyCombination(E,arguments)},triad:function(){return this._applyCombination(M,arguments)},tetrad:function(){return this._applyCombination(h,arguments)}},r.fromRatio=function(ne,K){if(typeof ne=="object"){var oe={};for(var le in ne)ne.hasOwnProperty(le)&&(oe[le]=le==="a"?ne[le]:Z(ne[le]));ne=oe}return r(ne,K)},r.equals=function(ne,K){return!(!ne||!K)&&r(ne).toRgbString()==r(K).toRgbString()},r.random=function(){return r.fromRatio({r:o(),g:o(),b:o()})},r.mix=function(ne,K,oe){oe=oe===0?0:oe||50;var le=r(ne).toRgb(),se=r(K).toRgb(),de=oe/100;return r({r:(se.r-le.r)*de+le.r,g:(se.g-le.g)*de+le.g,b:(se.b-le.b)*de+le.b,a:(se.a-le.a)*de+le.a})},r.readability=function(ne,K){var oe=r(ne),le=r(K);return(w.max(oe.getLuminance(),le.getLuminance())+.05)/(w.min(oe.getLuminance(),le.getLuminance())+.05)},r.isReadable=function(ne,K,oe){var le,se,de,be,_e,xe=r.readability(ne,K);switch(se=!1,(de=oe,(be=((de=de||{level:"AA",size:"small"}).level||"AA").toUpperCase())!=="AA"&&be!=="AAA"&&(be="AA"),(_e=(de.size||"small").toLowerCase())!=="small"&&_e!=="large"&&(_e="small"),le={level:be,size:_e}).level+le.size){case"AAsmall":case"AAAlarge":se=xe>=4.5;break;case"AAlarge":se=xe>=3;break;case"AAAsmall":se=xe>=7}return se},r.mostReadable=function(ne,K,oe){var le,se,de,be,_e=null,xe=0;se=(oe=oe||{}).includeFallbackColors,de=oe.level,be=oe.size;for(var ve=0;ve<K.length;ve++)(le=r.readability(ne,K[ve]))>xe&&(xe=le,_e=r(K[ve]));return r.isReadable(ne,_e,{level:de,size:be})||!se?_e:(oe.includeFallbackColors=!1,r.mostReadable(ne,["#fff","#000"],oe))};var P=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},L=r.hexNames=function(ne){var K={};for(var oe in ne)ne.hasOwnProperty(oe)&&(K[ne[oe]]=oe);return K}(P);function O(ne){return ne=parseFloat(ne),(isNaN(ne)||ne<0||ne>1)&&(ne=1),ne}function N(ne,K){(function(le){return typeof le=="string"&&le.indexOf(".")!=-1&&parseFloat(le)===1})(ne)&&(ne="100%");var oe=function(le){return typeof le=="string"&&le.indexOf("%")!=-1}(ne);return ne=s(K,t(0,parseFloat(ne))),oe&&(ne=parseInt(ne*K,10)/100),w.abs(ne-K)<1e-6?1:ne%K/parseFloat(K)}function V(ne){return s(1,t(0,ne))}function F(ne){return parseInt(ne,16)}function j(ne){return ne.length==1?"0"+ne:""+ne}function Z(ne){return ne<=1&&(ne=100*ne+"%"),ne}function z(ne){return w.round(255*parseFloat(ne)).toString(16)}function H(ne){return F(ne)/255}var U,re,ee,J=(re="[\\s|\\(]+("+(U="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+U+")[,|\\s]+("+U+")\\s*\\)?",ee="[\\s|\\(]+("+U+")[,|\\s]+("+U+")[,|\\s]+("+U+")[,|\\s]+("+U+")\\s*\\)?",{CSS_UNIT:new RegExp(U),rgb:new RegExp("rgb"+re),rgba:new RegExp("rgba"+ee),hsl:new RegExp("hsl"+re),hsla:new RegExp("hsla"+ee),hsv:new RegExp("hsv"+re),hsva:new RegExp("hsva"+ee),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function Q(ne){return!!J.CSS_UNIT.exec(ne)}C.exports?C.exports=r:(v=(function(){return r}).call(A,e,A,C))===void 0||(C.exports=v)})(Math)},37816:function(C){"use strict";C.exports=e,C.exports.float32=C.exports.float=e,C.exports.fract32=C.exports.fract=function(v,w){if(v.length){if(v instanceof Float32Array)return new Float32Array(v.length);w instanceof Float32Array||(w=e(v));for(var n=0,T=w.length;n<T;n++)w[n]=v[n]-w[n];return w}return e(v-e(v))};var A=new Float32Array(1);function e(v){return v.length?v instanceof Float32Array?v:new Float32Array(v):(A[0]=v,A[0])}},23464:function(C,A,e){"use strict";var v=e(65819);C.exports=T;var w=96;function n(x,f){var s=v(getComputedStyle(x).getPropertyValue(f));return s[0]*T(s[1],x)}function T(x,f){switch(f=f||document.body,x=(x||"px").trim().toLowerCase(),f!==window&&f!==document||(f=document.body),x){case"%":return f.clientHeight/100;case"ch":case"ex":return function(s,t){var o=document.createElement("div");o.style["font-size"]="128"+s,t.appendChild(o);var r=n(o,"font-size")/128;return t.removeChild(o),r}(x,f);case"em":return n(f,"font-size");case"rem":return n(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return w;case"cm":return w/2.54;case"mm":return w/25.4;case"pt":return w/72;case"pc":return w/6}return 1}},55712:function(C,A,e){"use strict";function v(T){return T}function w(T,x){return typeof x=="string"&&(x=T.objects[x]),x.type==="GeometryCollection"?{type:"FeatureCollection",features:x.geometries.map(function(f){return n(T,f)})}:n(T,x)}function n(T,x){var f=x.id,s=x.bbox,t=x.properties==null?{}:x.properties,o=function(r,i){var a=function(g){if(g==null)return v;var m,b,y=g.scale[0],M=g.scale[1],h=g.translate[0],E=g.translate[1];return function(k,D){D||(m=b=0);var P=2,L=k.length,O=new Array(L);for(O[0]=(m+=k[0])*y+h,O[1]=(b+=k[1])*M+E;P<L;)O[P]=k[P],++P;return O}}(r.transform),u=r.arcs;function l(g,m){m.length&&m.pop();for(var b=u[g<0?~g:g],y=0,M=b.length;y<M;++y)m.push(a(b[y],y));g<0&&function(h,E){for(var k,D=h.length,P=D-E;P<--D;)k=h[P],h[P++]=h[D],h[D]=k}(m,M)}function d(g){return a(g)}function c(g){for(var m=[],b=0,y=g.length;b<y;++b)l(g[b],m);return m.length<2&&m.push(m[0]),m}function _(g){for(var m=c(g);m.length<4;)m.push(m[0]);return m}function p(g){return g.map(_)}return function g(m){var b,y=m.type;switch(y){case"GeometryCollection":return{type:y,geometries:m.geometries.map(g)};case"Point":b=d(m.coordinates);break;case"MultiPoint":b=m.coordinates.map(d);break;case"LineString":b=c(m.arcs);break;case"MultiLineString":b=m.arcs.map(c);break;case"Polygon":b=p(m.arcs);break;case"MultiPolygon":b=m.arcs.map(p);break;default:return null}return{type:y,coordinates:b}}(i)}(T,x);return f==null&&s==null?{type:"Feature",properties:t,geometry:o}:s==null?{type:"Feature",id:f,properties:t,geometry:o}:{type:"Feature",id:f,bbox:s,properties:t,geometry:o}}e.d(A,{NO:function(){return w}})},73384:function(C,A,e){"use strict";var v=e(54612);C.exports=function(w){if(typeof w!="function"||!hasOwnProperty.call(w,"length"))return!1;try{if(typeof w.length!="number"||typeof w.call!="function"||typeof w.apply!="function")return!1}catch{return!1}return!v(w)}},57980:function(C,A,e){"use strict";var v=e(81680),w=e(7328),n=e(33940),T=e(18856),x=function(f,s){return f.replace("%v",T(s))};C.exports=function(f,s,t){if(!w(t))throw new TypeError(x(s,f));if(!v(f)){if("default"in t)return t.default;if(t.isOptional)return null}var o=n(t.errorMessage);throw v(o)||(o=s),new TypeError(x(o,f))}},32336:function(C){"use strict";C.exports=function(A){try{return A.toString()}catch{try{return String(A)}catch{return null}}}},18856:function(C,A,e){"use strict";var v=e(32336),w=/[\n\r\u2028\u2029]/g;C.exports=function(n){var T=v(n);return T===null?"<Non-coercible to string value>":(T.length>100&&(T=T.slice(0,99)+"\u2026"),T=T.replace(w,function(x){switch(x){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},7328:function(C,A,e){"use strict";var v=e(81680),w={object:!0,function:!0,undefined:!0};C.exports=function(n){return!!v(n)&&hasOwnProperty.call(w,typeof n)}},87396:function(C,A,e){"use strict";var v=e(57980),w=e(85488);C.exports=function(n){return w(n)?n:v(n,"%v is not a plain function",arguments[1])}},85488:function(C,A,e){"use strict";var v=e(73384),w=/^\s*class[\s{/}]/,n=Function.prototype.toString;C.exports=function(T){return!!v(T)&&!w.test(n.call(T))}},54612:function(C,A,e){"use strict";var v=e(7328);C.exports=function(w){if(!v(w))return!1;try{return!!w.constructor&&w.constructor.prototype===w}catch{return!1}}},33940:function(C,A,e){"use strict";var v=e(81680),w=e(7328),n=Object.prototype.toString;C.exports=function(T){if(!v(T))return null;if(w(T)){var x=T.toString;if(typeof x!="function"||x===n)return null}try{return""+T}catch{return null}}},18496:function(C,A,e){"use strict";var v=e(57980),w=e(81680);C.exports=function(n){return w(n)?n:v(n,"Cannot use %v",arguments[1])}},81680:function(C){"use strict";C.exports=function(A){return A!=null}},14144:function(C,A,e){"use strict";var v=e(308),w=e(10352),n=e(33576).Buffer;e.g.__TYPEDARRAY_POOL||(e.g.__TYPEDARRAY_POOL={UINT8:w([32,0]),UINT16:w([32,0]),UINT32:w([32,0]),BIGUINT64:w([32,0]),INT8:w([32,0]),INT16:w([32,0]),INT32:w([32,0]),BIGINT64:w([32,0]),FLOAT:w([32,0]),DOUBLE:w([32,0]),DATA:w([32,0]),UINT8C:w([32,0]),BUFFER:w([32,0])});var T=typeof Uint8ClampedArray<"u",x=typeof BigUint64Array<"u",f=typeof BigInt64Array<"u",s=e.g.__TYPEDARRAY_POOL;s.UINT8C||(s.UINT8C=w([32,0])),s.BIGUINT64||(s.BIGUINT64=w([32,0])),s.BIGINT64||(s.BIGINT64=w([32,0])),s.BUFFER||(s.BUFFER=w([32,0]));var t=s.DATA,o=s.BUFFER;function r(E){if(E){var k=E.length||E.byteLength,D=v.log2(k);t[D].push(E)}}function i(E){E=v.nextPow2(E);var k=v.log2(E),D=t[k];return D.length>0?D.pop():new ArrayBuffer(E)}function a(E){return new Uint8Array(i(E),0,E)}function u(E){return new Uint16Array(i(2*E),0,E)}function l(E){return new Uint32Array(i(4*E),0,E)}function d(E){return new Int8Array(i(E),0,E)}function c(E){return new Int16Array(i(2*E),0,E)}function _(E){return new Int32Array(i(4*E),0,E)}function p(E){return new Float32Array(i(4*E),0,E)}function g(E){return new Float64Array(i(8*E),0,E)}function m(E){return T?new Uint8ClampedArray(i(E),0,E):a(E)}function b(E){return x?new BigUint64Array(i(8*E),0,E):null}function y(E){return f?new BigInt64Array(i(8*E),0,E):null}function M(E){return new DataView(i(E),0,E)}function h(E){E=v.nextPow2(E);var k=v.log2(E),D=o[k];return D.length>0?D.pop():new n(E)}A.free=function(E){if(n.isBuffer(E))o[v.log2(E.length)].push(E);else{if(Object.prototype.toString.call(E)!=="[object ArrayBuffer]"&&(E=E.buffer),!E)return;var k=E.length||E.byteLength,D=0|v.log2(k);t[D].push(E)}},A.freeUint8=A.freeUint16=A.freeUint32=A.freeBigUint64=A.freeInt8=A.freeInt16=A.freeInt32=A.freeBigInt64=A.freeFloat32=A.freeFloat=A.freeFloat64=A.freeDouble=A.freeUint8Clamped=A.freeDataView=function(E){r(E.buffer)},A.freeArrayBuffer=r,A.freeBuffer=function(E){o[v.log2(E.length)].push(E)},A.malloc=function(E,k){if(k===void 0||k==="arraybuffer")return i(E);switch(k){case"uint8":return a(E);case"uint16":return u(E);case"uint32":return l(E);case"int8":return d(E);case"int16":return c(E);case"int32":return _(E);case"float":case"float32":return p(E);case"double":case"float64":return g(E);case"uint8_clamped":return m(E);case"bigint64":return y(E);case"biguint64":return b(E);case"buffer":return h(E);case"data":case"dataview":return M(E);default:return null}return null},A.mallocArrayBuffer=i,A.mallocUint8=a,A.mallocUint16=u,A.mallocUint32=l,A.mallocInt8=d,A.mallocInt16=c,A.mallocInt32=_,A.mallocFloat32=A.mallocFloat=p,A.mallocFloat64=A.mallocDouble=g,A.mallocUint8Clamped=m,A.mallocBigUint64=b,A.mallocBigInt64=y,A.mallocDataView=M,A.mallocBuffer=h,A.clearCache=function(){for(var E=0;E<32;++E)s.UINT8[E].length=0,s.UINT16[E].length=0,s.UINT32[E].length=0,s.INT8[E].length=0,s.INT16[E].length=0,s.INT32[E].length=0,s.FLOAT[E].length=0,s.DOUBLE[E].length=0,s.BIGUINT64[E].length=0,s.BIGINT64[E].length=0,s.UINT8C[E].length=0,t[E].length=0,o[E].length=0}},92384:function(C){var A=/[\'\"]/;C.exports=function(e){return e?(A.test(e.charAt(0))&&(e=e.substr(1)),A.test(e.charAt(e.length-1))&&(e=e.substr(0,e.length-1)),e):""}},45223:function(C){"use strict";C.exports=function(A,e,v){Array.isArray(v)||(v=[].slice.call(arguments,2));for(var w=0,n=v.length;w<n;w++){var T=v[w];for(var x in T)if((e[x]===void 0||Array.isArray(e[x])||A[x]!==e[x])&&x in e){var f;if(T[x]===!0)f=e[x];else if(T[x]===!1||typeof T[x]=="function"&&(f=T[x](e[x],A,e))===void 0)continue;A[x]=f}}return A}},96656:function(C,A,e){function v(w){try{if(!e.g.localStorage)return!1}catch{return!1}var n=e.g.localStorage[w];return n!=null&&String(n).toLowerCase()==="true"}C.exports=function(w,n){if(v("noDeprecation"))return w;var T=!1;return function(){if(!T){if(v("throwDeprecation"))throw new Error(n);v("traceDeprecation")?console.trace(n):console.warn(n),T=!0}return w.apply(this,arguments)}}},75272:function(C){C.exports=function(A){return A&&typeof A=="object"&&typeof A.copy=="function"&&typeof A.fill=="function"&&typeof A.readUInt8=="function"}},41088:function(C,A,e){"use strict";var v=e(91148),w=e(84420),n=e(96632),T=e(7728);function x(N){return N.call.bind(N)}var f=typeof BigInt<"u",s=typeof Symbol<"u",t=x(Object.prototype.toString),o=x(Number.prototype.valueOf),r=x(String.prototype.valueOf),i=x(Boolean.prototype.valueOf);if(f)var a=x(BigInt.prototype.valueOf);if(s)var u=x(Symbol.prototype.valueOf);function l(N,V){if(typeof N!="object")return!1;try{return V(N),!0}catch{return!1}}function d(N){return t(N)==="[object Map]"}function c(N){return t(N)==="[object Set]"}function _(N){return t(N)==="[object WeakMap]"}function p(N){return t(N)==="[object WeakSet]"}function g(N){return t(N)==="[object ArrayBuffer]"}function m(N){return typeof ArrayBuffer<"u"&&(g.working?g(N):N instanceof ArrayBuffer)}function b(N){return t(N)==="[object DataView]"}function y(N){return typeof DataView<"u"&&(b.working?b(N):N instanceof DataView)}A.isArgumentsObject=v,A.isGeneratorFunction=w,A.isTypedArray=T,A.isPromise=function(N){return typeof Promise<"u"&&N instanceof Promise||N!==null&&typeof N=="object"&&typeof N.then=="function"&&typeof N.catch=="function"},A.isArrayBufferView=function(N){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(N):T(N)||y(N)},A.isUint8Array=function(N){return n(N)==="Uint8Array"},A.isUint8ClampedArray=function(N){return n(N)==="Uint8ClampedArray"},A.isUint16Array=function(N){return n(N)==="Uint16Array"},A.isUint32Array=function(N){return n(N)==="Uint32Array"},A.isInt8Array=function(N){return n(N)==="Int8Array"},A.isInt16Array=function(N){return n(N)==="Int16Array"},A.isInt32Array=function(N){return n(N)==="Int32Array"},A.isFloat32Array=function(N){return n(N)==="Float32Array"},A.isFloat64Array=function(N){return n(N)==="Float64Array"},A.isBigInt64Array=function(N){return n(N)==="BigInt64Array"},A.isBigUint64Array=function(N){return n(N)==="BigUint64Array"},d.working=typeof Map<"u"&&d(new Map),A.isMap=function(N){return typeof Map<"u"&&(d.working?d(N):N instanceof Map)},c.working=typeof Set<"u"&&c(new Set),A.isSet=function(N){return typeof Set<"u"&&(c.working?c(N):N instanceof Set)},_.working=typeof WeakMap<"u"&&_(new WeakMap),A.isWeakMap=function(N){return typeof WeakMap<"u"&&(_.working?_(N):N instanceof WeakMap)},p.working=typeof WeakSet<"u"&&p(new WeakSet),A.isWeakSet=function(N){return p(N)},g.working=typeof ArrayBuffer<"u"&&g(new ArrayBuffer),A.isArrayBuffer=m,b.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&b(new DataView(new ArrayBuffer(1),0,1)),A.isDataView=y;var M=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function h(N){return t(N)==="[object SharedArrayBuffer]"}function E(N){return M!==void 0&&(h.working===void 0&&(h.working=h(new M)),h.working?h(N):N instanceof M)}function k(N){return l(N,o)}function D(N){return l(N,r)}function P(N){return l(N,i)}function L(N){return f&&l(N,a)}function O(N){return s&&l(N,u)}A.isSharedArrayBuffer=E,A.isAsyncFunction=function(N){return t(N)==="[object AsyncFunction]"},A.isMapIterator=function(N){return t(N)==="[object Map Iterator]"},A.isSetIterator=function(N){return t(N)==="[object Set Iterator]"},A.isGeneratorObject=function(N){return t(N)==="[object Generator]"},A.isWebAssemblyCompiledModule=function(N){return t(N)==="[object WebAssembly.Module]"},A.isNumberObject=k,A.isStringObject=D,A.isBooleanObject=P,A.isBigIntObject=L,A.isSymbolObject=O,A.isBoxedPrimitive=function(N){return k(N)||D(N)||P(N)||L(N)||O(N)},A.isAnyArrayBuffer=function(N){return typeof Uint8Array<"u"&&(m(N)||E(N))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(N){Object.defineProperty(A,N,{enumerable:!1,value:function(){throw new Error(N+" is not supported in userland")}})})},35840:function(C,A,e){var v=e(4168),w=Object.getOwnPropertyDescriptors||function(O){for(var N=Object.keys(O),V={},F=0;F<N.length;F++)V[N[F]]=Object.getOwnPropertyDescriptor(O,N[F]);return V},n=/%[sdj%]/g;A.format=function(O){if(!_(O)){for(var N=[],V=0;V<arguments.length;V++)N.push(s(arguments[V]));return N.join(" ")}V=1;for(var F=arguments,j=F.length,Z=String(O).replace(n,function(H){if(H==="%%")return"%";if(V>=j)return H;switch(H){case"%s":return String(F[V++]);case"%d":return Number(F[V++]);case"%j":try{return JSON.stringify(F[V++])}catch{return"[Circular]"}default:return H}}),z=F[V];V<j;z=F[++V])d(z)||!m(z)?Z+=" "+z:Z+=" "+s(z);return Z},A.deprecate=function(O,N){if(v!==void 0&&v.noDeprecation===!0)return O;if(v===void 0)return function(){return A.deprecate(O,N).apply(this,arguments)};var V=!1;return function(){if(!V){if(v.throwDeprecation)throw new Error(N);v.traceDeprecation?console.trace(N):console.error(N),V=!0}return O.apply(this,arguments)}};var T={},x=/^$/;if(v.env.NODE_DEBUG){var f=v.env.NODE_DEBUG;f=f.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),x=new RegExp("^"+f+"$","i")}function s(O,N){var V={seen:[],stylize:o};return arguments.length>=3&&(V.depth=arguments[2]),arguments.length>=4&&(V.colors=arguments[3]),l(N)?V.showHidden=N:N&&A._extend(V,N),p(V.showHidden)&&(V.showHidden=!1),p(V.depth)&&(V.depth=2),p(V.colors)&&(V.colors=!1),p(V.customInspect)&&(V.customInspect=!0),V.colors&&(V.stylize=t),r(V,O,V.depth)}function t(O,N){var V=s.styles[N];return V?"\x1B["+s.colors[V][0]+"m"+O+"\x1B["+s.colors[V][1]+"m":O}function o(O,N){return O}function r(O,N,V){if(O.customInspect&&N&&M(N.inspect)&&N.inspect!==A.inspect&&(!N.constructor||N.constructor.prototype!==N)){var F=N.inspect(V,O);return _(F)||(F=r(O,F,V)),F}var j=function(Q,ne){if(p(ne))return Q.stylize("undefined","undefined");if(_(ne)){var K="'"+JSON.stringify(ne).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return Q.stylize(K,"string")}return c(ne)?Q.stylize(""+ne,"number"):l(ne)?Q.stylize(""+ne,"boolean"):d(ne)?Q.stylize("null","null"):void 0}(O,N);if(j)return j;var Z=Object.keys(N),z=function(Q){var ne={};return Q.forEach(function(K,oe){ne[K]=!0}),ne}(Z);if(O.showHidden&&(Z=Object.getOwnPropertyNames(N)),y(N)&&(Z.indexOf("message")>=0||Z.indexOf("description")>=0))return i(N);if(Z.length===0){if(M(N)){var H=N.name?": "+N.name:"";return O.stylize("[Function"+H+"]","special")}if(g(N))return O.stylize(RegExp.prototype.toString.call(N),"regexp");if(b(N))return O.stylize(Date.prototype.toString.call(N),"date");if(y(N))return i(N)}var U,re="",ee=!1,J=["{","}"];return u(N)&&(ee=!0,J=["[","]"]),M(N)&&(re=" [Function"+(N.name?": "+N.name:"")+"]"),g(N)&&(re=" "+RegExp.prototype.toString.call(N)),b(N)&&(re=" "+Date.prototype.toUTCString.call(N)),y(N)&&(re=" "+i(N)),Z.length!==0||ee&&N.length!=0?V<0?g(N)?O.stylize(RegExp.prototype.toString.call(N),"regexp"):O.stylize("[Object]","special"):(O.seen.push(N),U=ee?function(Q,ne,K,oe,le){for(var se=[],de=0,be=ne.length;de<be;++de)D(ne,String(de))?se.push(a(Q,ne,K,oe,String(de),!0)):se.push("");return le.forEach(function(_e){_e.match(/^\d+$/)||se.push(a(Q,ne,K,oe,_e,!0))}),se}(O,N,V,z,Z):Z.map(function(Q){return a(O,N,V,z,Q,ee)}),O.seen.pop(),function(Q,ne,K){return Q.reduce(function(oe,le){return le.indexOf(`
`),oe+le.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?K[0]+(ne===""?"":ne+`
 `)+" "+Q.join(`,
  `)+" "+K[1]:K[0]+ne+" "+Q.join(", ")+" "+K[1]}(U,re,J)):J[0]+re+J[1]}function i(O){return"["+Error.prototype.toString.call(O)+"]"}function a(O,N,V,F,j,Z){var z,H,U;if((U=Object.getOwnPropertyDescriptor(N,j)||{value:N[j]}).get?H=U.set?O.stylize("[Getter/Setter]","special"):O.stylize("[Getter]","special"):U.set&&(H=O.stylize("[Setter]","special")),D(F,j)||(z="["+j+"]"),H||(O.seen.indexOf(U.value)<0?(H=d(V)?r(O,U.value,null):r(O,U.value,V-1)).indexOf(`
`)>-1&&(H=Z?H.split(`
`).map(function(re){return"  "+re}).join(`
`).slice(2):`
`+H.split(`
`).map(function(re){return"   "+re}).join(`
`)):H=O.stylize("[Circular]","special")),p(z)){if(Z&&j.match(/^\d+$/))return H;(z=JSON.stringify(""+j)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(z=z.slice(1,-1),z=O.stylize(z,"name")):(z=z.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),z=O.stylize(z,"string"))}return z+": "+H}function u(O){return Array.isArray(O)}function l(O){return typeof O=="boolean"}function d(O){return O===null}function c(O){return typeof O=="number"}function _(O){return typeof O=="string"}function p(O){return O===void 0}function g(O){return m(O)&&h(O)==="[object RegExp]"}function m(O){return typeof O=="object"&&O!==null}function b(O){return m(O)&&h(O)==="[object Date]"}function y(O){return m(O)&&(h(O)==="[object Error]"||O instanceof Error)}function M(O){return typeof O=="function"}function h(O){return Object.prototype.toString.call(O)}function E(O){return O<10?"0"+O.toString(10):O.toString(10)}A.debuglog=function(O){if(O=O.toUpperCase(),!T[O])if(x.test(O)){var N=v.pid;T[O]=function(){var V=A.format.apply(A,arguments);console.error("%s %d: %s",O,N,V)}}else T[O]=function(){};return T[O]},A.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},A.types=e(41088),A.isArray=u,A.isBoolean=l,A.isNull=d,A.isNullOrUndefined=function(O){return O==null},A.isNumber=c,A.isString=_,A.isSymbol=function(O){return typeof O=="symbol"},A.isUndefined=p,A.isRegExp=g,A.types.isRegExp=g,A.isObject=m,A.isDate=b,A.types.isDate=b,A.isError=y,A.types.isNativeError=y,A.isFunction=M,A.isPrimitive=function(O){return O===null||typeof O=="boolean"||typeof O=="number"||typeof O=="string"||typeof O=="symbol"||O===void 0},A.isBuffer=e(75272);var k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function D(O,N){return Object.prototype.hasOwnProperty.call(O,N)}A.log=function(){var O,N;console.log("%s - %s",(N=[E((O=new Date).getHours()),E(O.getMinutes()),E(O.getSeconds())].join(":"),[O.getDate(),k[O.getMonth()],N].join(" ")),A.format.apply(A,arguments))},A.inherits=e(6768),A._extend=function(O,N){if(!N||!m(N))return O;for(var V=Object.keys(N),F=V.length;F--;)O[V[F]]=N[V[F]];return O};var P=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function L(O,N){if(!O){var V=new Error("Promise was rejected with a falsy value");V.reason=O,O=V}return N(O)}A.promisify=function(O){if(typeof O!="function")throw new TypeError('The "original" argument must be of type Function');if(P&&O[P]){var N;if(typeof(N=O[P])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(N,P,{value:N,enumerable:!1,writable:!1,configurable:!0}),N}function N(){for(var V,F,j=new Promise(function(H,U){V=H,F=U}),Z=[],z=0;z<arguments.length;z++)Z.push(arguments[z]);Z.push(function(H,U){H?F(H):V(U)});try{O.apply(this,Z)}catch(H){F(H)}return j}return Object.setPrototypeOf(N,Object.getPrototypeOf(O)),P&&Object.defineProperty(N,P,{value:N,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(N,w(O))},A.promisify.custom=P,A.callbackify=function(O){if(typeof O!="function")throw new TypeError('The "original" argument must be of type Function');function N(){for(var V=[],F=0;F<arguments.length;F++)V.push(arguments[F]);var j=V.pop();if(typeof j!="function")throw new TypeError("The last argument must be of type Function");var Z=this,z=function(){return j.apply(Z,arguments)};O.apply(this,V).then(function(H){v.nextTick(z.bind(null,null,H))},function(H){v.nextTick(L.bind(null,H,z))})}return Object.setPrototypeOf(N,Object.getPrototypeOf(O)),Object.defineProperties(N,w(O)),N}},5408:function(C,A,e){var v=e(13380);C.exports=function(w){return v("webgl",w)}},96632:function(C,A,e){"use strict";var v=e(46492),w=e(63436),n=e(57916),T=e(99676),x=e(2304),f=T("Object.prototype.toString"),s=e(46672)(),t=typeof globalThis>"u"?e.g:globalThis,o=w(),r=T("String.prototype.slice"),i=Object.getPrototypeOf,a=T("Array.prototype.indexOf",!0)||function(l,d){for(var c=0;c<l.length;c+=1)if(l[c]===d)return c;return-1},u={__proto__:null};v(o,s&&x&&i?function(l){var d=new t[l];if(Symbol.toStringTag in d){var c=i(d),_=x(c,Symbol.toStringTag);if(!_){var p=i(c);_=x(p,Symbol.toStringTag)}u["$"+l]=n(_.get)}}:function(l){var d=new t[l],c=d.slice||d.set;c&&(u["$"+l]=n(c))}),C.exports=function(l){if(!l||typeof l!="object")return!1;if(!s){var d=r(f(l),8,-1);return a(o,d)>-1?d:d==="Object"&&function(c){var _=!1;return v(u,function(p,g){if(!_)try{p(c),_=r(g,1)}catch{}}),_}(l)}return x?function(c){var _=!1;return v(u,function(p,g){if(!_)try{"$"+p(c)===g&&(_=r(g,1))}catch{}}),_}(l):null}},67020:function(C,A,e){var v=e(38700),w=e(50896),n=v.instance();function T(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}T.prototype=new v.baseCalendar,w(T.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(i,a){if(typeof i=="string"){var u=i.match(f);return u?u[0]:""}var l=this._validateYear(i),d=i.month(),c=""+this.toChineseMonth(l,d);return a&&c.length<2&&(c="0"+c),this.isIntercalaryMonth(l,d)&&(c+="i"),c},monthNames:function(i){if(typeof i=="string"){var a=i.match(s);return a?a[0]:""}var u=this._validateYear(i),l=i.month(),d=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"][this.toChineseMonth(u,l)-1];return this.isIntercalaryMonth(u,l)&&(d="\u95F0"+d),d},monthNamesShort:function(i){if(typeof i=="string"){var a=i.match(t);return a?a[0]:""}var u=this._validateYear(i),l=i.month(),d=["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"][this.toChineseMonth(u,l)-1];return this.isIntercalaryMonth(u,l)&&(d="\u95F0"+d),d},parseMonth:function(i,a){i=this._validateYear(i);var u,l=parseInt(a);if(isNaN(l))a[0]==="\u95F0"&&(u=!0,a=a.substring(1)),a[a.length-1]==="\u6708"&&(a=a.substring(0,a.length-1)),l=1+["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"].indexOf(a);else{var d=a[a.length-1];u=d==="i"||d==="I"}return this.toMonthIndex(i,l,u)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(i,a){if(i.year&&(i=i.year()),typeof i!="number"||i<1888||i>2111)throw a.replace(/\{0\}/,this.local.name);return i},toMonthIndex:function(i,a,u){var l=this.intercalaryMonth(i);if(u&&a!==l||a<1||a>12)throw v.local.invalidMonth.replace(/\{0\}/,this.local.name);return l?!u&&a<=l?a-1:a:a-1},toChineseMonth:function(i,a){i.year&&(a=(i=i.year()).month());var u=this.intercalaryMonth(i);if(a<0||a>(u?12:11))throw v.local.invalidMonth.replace(/\{0\}/,this.local.name);return u?a<u?a+1:a:a+1},intercalaryMonth:function(i){return i=this._validateYear(i),o[i-o[0]]>>13},isIntercalaryMonth:function(i,a){i.year&&(a=(i=i.year()).month());var u=this.intercalaryMonth(i);return!!u&&u===a},leapYear:function(i){return this.intercalaryMonth(i)!==0},weekOfYear:function(i,a,u){var l,d=this._validateYear(i,v.local.invalidyear),c=r[d-r[0]],_=c>>9&4095,p=c>>5&15,g=31&c;(l=n.newDate(_,p,g)).add(4-(l.dayOfWeek()||7),"d");var m=this.toJD(i,a,u)-l.toJD();return 1+Math.floor(m/7)},monthsInYear:function(i){return this.leapYear(i)?13:12},daysInMonth:function(i,a){i.year&&(a=i.month(),i=i.year()),i=this._validateYear(i);var u=o[i-o[0]];if(a>(u>>13?12:11))throw v.local.invalidMonth.replace(/\{0\}/,this.local.name);return u&1<<12-a?30:29},weekDay:function(i,a,u){return(this.dayOfWeek(i,a,u)||7)<6},toJD:function(i,a,u){var l=this._validate(i,c,u,v.local.invalidDate);i=this._validateYear(l.year()),a=l.month(),u=l.day();var d=this.isIntercalaryMonth(i,a),c=this.toChineseMonth(i,a),_=function(p,g,m,b,y){var M,h,E;if(typeof p=="object")h=p,M=g||{};else{var k;if(!(typeof p=="number"&&p>=1888&&p<=2111))throw new Error("Lunar year outside range 1888-2111");if(!(typeof g=="number"&&g>=1&&g<=12))throw new Error("Lunar month outside range 1 - 12");if(!(typeof m=="number"&&m>=1&&m<=30))throw new Error("Lunar day outside range 1 - 30");typeof b=="object"?(k=!1,M=b):(k=!!b,M={}),h={year:p,month:g,day:m,isIntercalary:k}}E=h.day-1;var D,P=o[h.year-o[0]],L=P>>13;D=L&&(h.month>L||h.isIntercalary)?h.month:h.month-1;for(var O=0;O<D;O++)E+=P&1<<12-O?30:29;var N=r[h.year-r[0]],V=new Date(N>>9&4095,(N>>5&15)-1,(31&N)+E);return M.year=V.getFullYear(),M.month=1+V.getMonth(),M.day=V.getDate(),M}(i,c,u,d);return n.toJD(_.year,_.month,_.day)},fromJD:function(i){var a=n.fromJD(i),u=function(d,c,_,p){var g,m;if(typeof d=="object")g=d,m=c||{};else{if(!(typeof d=="number"&&d>=1888&&d<=2111))throw new Error("Solar year outside range 1888-2111");if(!(typeof c=="number"&&c>=1&&c<=12))throw new Error("Solar month outside range 1 - 12");if(!(typeof _=="number"&&_>=1&&_<=31))throw new Error("Solar day outside range 1 - 31");g={year:d,month:c,day:_},m={}}var b=r[g.year-r[0]],y=g.year<<9|g.month<<5|g.day;m.year=y>=b?g.year:g.year-1,b=r[m.year-r[0]];var M,h=new Date(b>>9&4095,(b>>5&15)-1,31&b),E=new Date(g.year,g.month-1,g.day);M=Math.round((E-h)/864e5);var k,D=o[m.year-o[0]];for(k=0;k<13;k++){var P=D&1<<12-k?30:29;if(M<P)break;M-=P}var L=D>>13;return!L||k<L?(m.isIntercalary=!1,m.month=1+k):k===L?(m.isIntercalary=!0,m.month=k):(m.isIntercalary=!1,m.month=k),m.day=1+M,m}(a.year(),a.month(),a.day()),l=this.toMonthIndex(u.year,u.month,u.isIntercalary);return this.newDate(u.year,l,u.day)},fromString:function(i){var a=i.match(x),u=this._validateYear(+a[1]),l=+a[2],d=!!a[3],c=this.toMonthIndex(u,l,d),_=+a[4];return this.newDate(u,c,_)},add:function(i,a,u){var l=i.year(),d=i.month(),c=this.isIntercalaryMonth(l,d),_=this.toChineseMonth(l,d),p=Object.getPrototypeOf(T.prototype).add.call(this,i,a,u);if(u==="y"){var g=p.year(),m=p.month(),b=this.isIntercalaryMonth(g,_),y=c&&b?this.toMonthIndex(g,_,!0):this.toMonthIndex(g,_,!1);y!==m&&p.month(y)}return p}});var x=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,f=/^\d?\d[iI]?/m,s=/^??[]?/m,t=/^??[]?/m;v.calendars.chinese=T;var o=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],r=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},89792:function(C,A,e){var v=e(38700),w=e(50896);function n(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}n.prototype=new v.baseCalendar,w(n.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var x=this._validate(T,this.minMonth,this.minDay,v.local.invalidYear);return(T=x.year()+(x.year()<0?1:0))%4==3||T%4==-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,v.local.invalidYear||v.regionalOptions[""].invalidYear),13},weekOfYear:function(T,x,f){var s=this.newDate(T,x,f);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(T,x){var f=this._validate(T,x,this.minDay,v.local.invalidMonth);return this.daysPerMonth[f.month()-1]+(f.month()===13&&this.leapYear(f.year())?1:0)},weekDay:function(T,x,f){return(this.dayOfWeek(T,x,f)||7)<6},toJD:function(T,x,f){var s=this._validate(T,x,f,v.local.invalidDate);return(T=s.year())<0&&T++,s.day()+30*(s.month()-1)+365*(T-1)+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var x=Math.floor(T)+.5-this.jdEpoch,f=Math.floor((x-Math.floor((x+366)/1461))/365)+1;f<=0&&f--,x=Math.floor(T)+.5-this.newDate(f,1,1).toJD();var s=Math.floor(x/30)+1,t=x-30*(s-1)+1;return this.newDate(f,s,t)}}),v.calendars.coptic=n},55668:function(C,A,e){var v=e(38700),w=e(50896);function n(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}n.prototype=new v.baseCalendar,w(n.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(x){return this._validate(x,this.minMonth,this.minDay,v.local.invalidYear),!1},monthsInYear:function(x){return this._validate(x,this.minMonth,this.minDay,v.local.invalidYear),13},daysInYear:function(x){return this._validate(x,this.minMonth,this.minDay,v.local.invalidYear),400},weekOfYear:function(x,f,s){var t=this.newDate(x,f,s);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/8)+1},daysInMonth:function(x,f){var s=this._validate(x,f,this.minDay,v.local.invalidMonth);return this.daysPerMonth[s.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(x,f,s){return(this._validate(x,f,s,v.local.invalidDate).day()+1)%8},weekDay:function(x,f,s){var t=this.dayOfWeek(x,f,s);return t>=2&&t<=6},extraInfo:function(x,f,s){var t=this._validate(x,f,s,v.local.invalidDate);return{century:T[Math.floor((t.year()-1)/100)+1]||""}},toJD:function(x,f,s){var t=this._validate(x,f,s,v.local.invalidDate);return x=t.year()+(t.year()<0?1:0),f=t.month(),(s=t.day())+(f>1?16:0)+(f>2?32*(f-2):0)+400*(x-1)+this.jdEpoch-1},fromJD:function(x){x=Math.floor(x+.5)-Math.floor(this.jdEpoch)-1;var f=Math.floor(x/400)+1;x-=400*(f-1),x+=x>15?16:0;var s=Math.floor(x/32)+1,t=x-32*(s-1)+1;return this.newDate(f<=0?f-1:f,s,t)}});var T={20:"Fruitbat",21:"Anchovy"};v.calendars.discworld=n},65168:function(C,A,e){var v=e(38700),w=e(50896);function n(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}n.prototype=new v.baseCalendar,w(n.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var x=this._validate(T,this.minMonth,this.minDay,v.local.invalidYear);return(T=x.year()+(x.year()<0?1:0))%4==3||T%4==-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,v.local.invalidYear||v.regionalOptions[""].invalidYear),13},weekOfYear:function(T,x,f){var s=this.newDate(T,x,f);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(T,x){var f=this._validate(T,x,this.minDay,v.local.invalidMonth);return this.daysPerMonth[f.month()-1]+(f.month()===13&&this.leapYear(f.year())?1:0)},weekDay:function(T,x,f){return(this.dayOfWeek(T,x,f)||7)<6},toJD:function(T,x,f){var s=this._validate(T,x,f,v.local.invalidDate);return(T=s.year())<0&&T++,s.day()+30*(s.month()-1)+365*(T-1)+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var x=Math.floor(T)+.5-this.jdEpoch,f=Math.floor((x-Math.floor((x+366)/1461))/365)+1;f<=0&&f--,x=Math.floor(T)+.5-this.newDate(f,1,1).toJD();var s=Math.floor(x/30)+1,t=x-30*(s-1)+1;return this.newDate(f,s,t)}}),v.calendars.ethiopian=n},2084:function(C,A,e){var v=e(38700),w=e(50896);function n(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}function T(x,f){return x-f*Math.floor(x/f)}n.prototype=new v.baseCalendar,w(n.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(x){var f=this._validate(x,this.minMonth,this.minDay,v.local.invalidYear);return this._leapYear(f.year())},_leapYear:function(x){return T(7*(x=x<0?x+1:x)+1,19)<7},monthsInYear:function(x){return this._validate(x,this.minMonth,this.minDay,v.local.invalidYear),this._leapYear(x.year?x.year():x)?13:12},weekOfYear:function(x,f,s){var t=this.newDate(x,f,s);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(x){return x=this._validate(x,this.minMonth,this.minDay,v.local.invalidYear).year(),this.toJD(x===-1?1:x+1,7,1)-this.toJD(x,7,1)},daysInMonth:function(x,f){return x.year&&(f=x.month(),x=x.year()),this._validate(x,f,this.minDay,v.local.invalidMonth),f===12&&this.leapYear(x)||f===8&&T(this.daysInYear(x),10)===5?30:f===9&&T(this.daysInYear(x),10)===3?29:this.daysPerMonth[f-1]},weekDay:function(x,f,s){return this.dayOfWeek(x,f,s)!==6},extraInfo:function(x,f,s){var t=this._validate(x,f,s,v.local.invalidDate);return{yearType:(this.leapYear(t)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(t)%10-3]}},toJD:function(x,f,s){var t=this._validate(x,f,s,v.local.invalidDate);x=t.year(),f=t.month(),s=t.day();var o=x<=0?x+1:x,r=this.jdEpoch+this._delay1(o)+this._delay2(o)+s+1;if(f<7){for(var i=7;i<=this.monthsInYear(x);i++)r+=this.daysInMonth(x,i);for(i=1;i<f;i++)r+=this.daysInMonth(x,i)}else for(i=7;i<f;i++)r+=this.daysInMonth(x,i);return r},_delay1:function(x){var f=Math.floor((235*x-234)/19),s=12084+13753*f,t=29*f+Math.floor(s/25920);return T(3*(t+1),7)<3&&t++,t},_delay2:function(x){var f=this._delay1(x-1),s=this._delay1(x);return this._delay1(x+1)-s==356?2:s-f==382?1:0},fromJD:function(x){x=Math.floor(x)+.5;for(var f=Math.floor(98496*(x-this.jdEpoch)/35975351)-1;x>=this.toJD(f===-1?1:f+1,7,1);)f++;for(var s=x<this.toJD(f,1,1)?7:1;x>this.toJD(f,s,this.daysInMonth(f,s));)s++;var t=x-this.toJD(f,s,1)+1;return this.newDate(f,s,t)}}),v.calendars.hebrew=n},26368:function(C,A,e){var v=e(38700),w=e(50896);function n(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}n.prototype=new v.baseCalendar,w(n.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012Bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(T){return(11*this._validate(T,this.minMonth,this.minDay,v.local.invalidYear).year()+14)%30<11},weekOfYear:function(T,x,f){var s=this.newDate(T,x,f);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInYear:function(T){return this.leapYear(T)?355:354},daysInMonth:function(T,x){var f=this._validate(T,x,this.minDay,v.local.invalidMonth);return this.daysPerMonth[f.month()-1]+(f.month()===12&&this.leapYear(f.year())?1:0)},weekDay:function(T,x,f){return this.dayOfWeek(T,x,f)!==5},toJD:function(T,x,f){var s=this._validate(T,x,f,v.local.invalidDate);return T=s.year(),x=s.month(),T=T<=0?T+1:T,(f=s.day())+Math.ceil(29.5*(x-1))+354*(T-1)+Math.floor((3+11*T)/30)+this.jdEpoch-1},fromJD:function(T){T=Math.floor(T)+.5;var x=Math.floor((30*(T-this.jdEpoch)+10646)/10631);x=x<=0?x-1:x;var f=Math.min(12,Math.ceil((T-29-this.toJD(x,1,1))/29.5)+1),s=T-this.toJD(x,f,1)+1;return this.newDate(x,f,s)}}),v.calendars.islamic=n},24747:function(C,A,e){var v=e(38700),w=e(50896);function n(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}n.prototype=new v.baseCalendar,w(n.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var x=this._validate(T,this.minMonth,this.minDay,v.local.invalidYear);return(T=x.year()<0?x.year()+1:x.year())%4==0},weekOfYear:function(T,x,f){var s=this.newDate(T,x,f);return s.add(4-(s.dayOfWeek()||7),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(T,x){var f=this._validate(T,x,this.minDay,v.local.invalidMonth);return this.daysPerMonth[f.month()-1]+(f.month()===2&&this.leapYear(f.year())?1:0)},weekDay:function(T,x,f){return(this.dayOfWeek(T,x,f)||7)<6},toJD:function(T,x,f){var s=this._validate(T,x,f,v.local.invalidDate);return T=s.year(),x=s.month(),f=s.day(),T<0&&T++,x<=2&&(T--,x+=12),Math.floor(365.25*(T+4716))+Math.floor(30.6001*(x+1))+f-1524.5},fromJD:function(T){var x=Math.floor(T+.5)+1524,f=Math.floor((x-122.1)/365.25),s=Math.floor(365.25*f),t=Math.floor((x-s)/30.6001),o=t-Math.floor(t<14?1:13),r=f-Math.floor(o>2?4716:4715),i=x-s-Math.floor(30.6001*t);return r<=0&&r--,this.newDate(r,o,i)}}),v.calendars.julian=n},65616:function(C,A,e){var v=e(38700),w=e(50896);function n(f){this.local=this.regionalOptions[f||""]||this.regionalOptions[""]}function T(f,s){return f-s*Math.floor(f/s)}function x(f,s){return T(f-1,s)+1}n.prototype=new v.baseCalendar,w(n.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(f){return this._validate(f,this.minMonth,this.minDay,v.local.invalidYear),!1},formatYear:function(f){f=this._validate(f,this.minMonth,this.minDay,v.local.invalidYear).year();var s=Math.floor(f/400);return f%=400,f+=f<0?400:0,s+"."+Math.floor(f/20)+"."+f%20},forYear:function(f){if((f=f.split(".")).length<3)throw"Invalid Mayan year";for(var s=0,t=0;t<f.length;t++){var o=parseInt(f[t],10);if(Math.abs(o)>19||t>0&&o<0)throw"Invalid Mayan year";s=20*s+o}return s},monthsInYear:function(f){return this._validate(f,this.minMonth,this.minDay,v.local.invalidYear),18},weekOfYear:function(f,s,t){return this._validate(f,s,t,v.local.invalidDate),0},daysInYear:function(f){return this._validate(f,this.minMonth,this.minDay,v.local.invalidYear),360},daysInMonth:function(f,s){return this._validate(f,s,this.minDay,v.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(f,s,t){return this._validate(f,s,t,v.local.invalidDate).day()},weekDay:function(f,s,t){return this._validate(f,s,t,v.local.invalidDate),!0},extraInfo:function(f,s,t){var o=this._validate(f,s,t,v.local.invalidDate).toJD(),r=this._toHaab(o),i=this._toTzolkin(o);return{haabMonthName:this.local.haabMonths[r[0]-1],haabMonth:r[0],haabDay:r[1],tzolkinDayName:this.local.tzolkinMonths[i[0]-1],tzolkinDay:i[0],tzolkinTrecena:i[1]}},_toHaab:function(f){var s=T(8+(f-=this.jdEpoch)+340,365);return[Math.floor(s/20)+1,T(s,20)]},_toTzolkin:function(f){return[x(20+(f-=this.jdEpoch),20),x(f+4,13)]},toJD:function(f,s,t){var o=this._validate(f,s,t,v.local.invalidDate);return o.day()+20*o.month()+360*o.year()+this.jdEpoch},fromJD:function(f){f=Math.floor(f)+.5-this.jdEpoch;var s=Math.floor(f/360);f%=360,f+=f<0?360:0;var t=Math.floor(f/20),o=f%20;return this.newDate(s,t,o)}}),v.calendars.mayan=n},30632:function(C,A,e){var v=e(38700),w=e(50896);function n(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}n.prototype=new v.baseCalendar;var T=v.instance("gregorian");w(n.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(x){var f=this._validate(x,this.minMonth,this.minDay,v.local.invalidYear||v.regionalOptions[""].invalidYear);return T.leapYear(f.year()+(f.year()<1?1:0)+1469)},weekOfYear:function(x,f,s){var t=this.newDate(x,f,s);return t.add(1-(t.dayOfWeek()||7),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(x,f){var s=this._validate(x,f,this.minDay,v.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===12&&this.leapYear(s.year())?1:0)},weekDay:function(x,f,s){return(this.dayOfWeek(x,f,s)||7)<6},toJD:function(x,f,s){var t=this._validate(x,f,s,v.local.invalidMonth);(x=t.year())<0&&x++;for(var o=t.day(),r=1;r<t.month();r++)o+=this.daysPerMonth[r-1];return o+T.toJD(x+1468,3,13)},fromJD:function(x){x=Math.floor(x+.5);for(var f=Math.floor((x-(this.jdEpoch-1))/366);x>=this.toJD(f+1,1,1);)f++;for(var s=x-Math.floor(this.toJD(f,1,1)+.5)+1,t=1;s>this.daysInMonth(f,t);)s-=this.daysInMonth(f,t),t++;return this.newDate(f,t,s)}}),v.calendars.nanakshahi=n},73040:function(C,A,e){var v=e(38700),w=e(50896);function n(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}n.prototype=new v.baseCalendar,w(n.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(T){return this.daysInYear(T)!==this.daysPerYear},weekOfYear:function(T,x,f){var s=this.newDate(T,x,f);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInYear:function(T){if(T=this._validate(T,this.minMonth,this.minDay,v.local.invalidYear).year(),this.NEPALI_CALENDAR_DATA[T]===void 0)return this.daysPerYear;for(var x=0,f=this.minMonth;f<=12;f++)x+=this.NEPALI_CALENDAR_DATA[T][f];return x},daysInMonth:function(T,x){return T.year&&(x=T.month(),T=T.year()),this._validate(T,x,this.minDay,v.local.invalidMonth),this.NEPALI_CALENDAR_DATA[T]===void 0?this.daysPerMonth[x-1]:this.NEPALI_CALENDAR_DATA[T][x]},weekDay:function(T,x,f){return this.dayOfWeek(T,x,f)!==6},toJD:function(T,x,f){var s=this._validate(T,x,f,v.local.invalidDate);T=s.year(),x=s.month(),f=s.day();var t=v.instance(),o=0,r=x,i=T;this._createMissingCalendarData(T);var a=T-(r>9||r===9&&f>=this.NEPALI_CALENDAR_DATA[i][0]?56:57);for(x!==9&&(o=f,r--);r!==9;)r<=0&&(r=12,i--),o+=this.NEPALI_CALENDAR_DATA[i][r],r--;return x===9?(o+=f-this.NEPALI_CALENDAR_DATA[i][0])<0&&(o+=t.daysInYear(a)):o+=this.NEPALI_CALENDAR_DATA[i][9]-this.NEPALI_CALENDAR_DATA[i][0],t.newDate(a,1,1).add(o,"d").toJD()},fromJD:function(T){var x=v.instance().fromJD(T),f=x.year(),s=x.dayOfYear(),t=f+56;this._createMissingCalendarData(t);for(var o=9,r=this.NEPALI_CALENDAR_DATA[t][0],i=this.NEPALI_CALENDAR_DATA[t][o]-r+1;s>i;)++o>12&&(o=1,t++),i+=this.NEPALI_CALENDAR_DATA[t][o];var a=this.NEPALI_CALENDAR_DATA[t][o]-(i-s);return this.newDate(t,o,a)},_createMissingCalendarData:function(T){var x=this.daysPerMonth.slice(0);x.unshift(17);for(var f=T-1;f<T+2;f++)this.NEPALI_CALENDAR_DATA[f]===void 0&&(this.NEPALI_CALENDAR_DATA[f]=x)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),v.calendars.nepali=n},1104:function(C,A,e){var v=e(38700),w=e(50896);function n(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}function T(x,f){return x-f*Math.floor(x/f)}n.prototype=new v.baseCalendar,w(n.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xE6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xE6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(x){var f=this._validate(x,this.minMonth,this.minDay,v.local.invalidYear);return 682*((f.year()-(f.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(x,f,s){var t=this.newDate(x,f,s);return t.add(-(t.dayOfWeek()+1)%7,"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(x,f){var s=this._validate(x,f,this.minDay,v.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===12&&this.leapYear(s.year())?1:0)},weekDay:function(x,f,s){return this.dayOfWeek(x,f,s)!==5},toJD:function(x,f,s){var t=this._validate(x,f,s,v.local.invalidDate);x=t.year(),f=t.month(),s=t.day();var o=x-(x>=0?474:473),r=474+T(o,2820);return s+(f<=7?31*(f-1):30*(f-1)+6)+Math.floor((682*r-110)/2816)+365*(r-1)+1029983*Math.floor(o/2820)+this.jdEpoch-1},fromJD:function(x){var f=(x=Math.floor(x)+.5)-this.toJD(475,1,1),s=Math.floor(f/1029983),t=T(f,1029983),o=2820;if(t!==1029982){var r=Math.floor(t/366),i=T(t,366);o=Math.floor((2134*r+2816*i+2815)/1028522)+r+1}var a=o+2820*s+474;a=a<=0?a-1:a;var u=x-this.toJD(a,1,1)+1,l=u<=186?Math.ceil(u/31):Math.ceil((u-6)/30),d=x-this.toJD(a,l,1)+1;return this.newDate(a,l,d)}}),v.calendars.persian=n,v.calendars.jalali=n},51456:function(C,A,e){var v=e(38700),w=e(50896),n=v.instance();function T(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}T.prototype=new v.baseCalendar,w(T.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(x){var f=this._validate(x,this.minMonth,this.minDay,v.local.invalidYear);return x=this._t2gYear(f.year()),n.leapYear(x)},weekOfYear:function(x,f,s){var t=this._validate(x,this.minMonth,this.minDay,v.local.invalidYear);return x=this._t2gYear(t.year()),n.weekOfYear(x,t.month(),t.day())},daysInMonth:function(x,f){var s=this._validate(x,f,this.minDay,v.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===2&&this.leapYear(s.year())?1:0)},weekDay:function(x,f,s){return(this.dayOfWeek(x,f,s)||7)<6},toJD:function(x,f,s){var t=this._validate(x,f,s,v.local.invalidDate);return x=this._t2gYear(t.year()),n.toJD(x,t.month(),t.day())},fromJD:function(x){var f=n.fromJD(x),s=this._g2tYear(f.year());return this.newDate(s,f.month(),f.day())},_t2gYear:function(x){return x+this.yearsOffset+(x>=-this.yearsOffset&&x<=-1?1:0)},_g2tYear:function(x){return x-this.yearsOffset-(x>=1&&x<=this.yearsOffset?1:0)}}),v.calendars.taiwan=T},4592:function(C,A,e){var v=e(38700),w=e(50896),n=v.instance();function T(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}T.prototype=new v.baseCalendar,w(T.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(x){var f=this._validate(x,this.minMonth,this.minDay,v.local.invalidYear);return x=this._t2gYear(f.year()),n.leapYear(x)},weekOfYear:function(x,f,s){var t=this._validate(x,this.minMonth,this.minDay,v.local.invalidYear);return x=this._t2gYear(t.year()),n.weekOfYear(x,t.month(),t.day())},daysInMonth:function(x,f){var s=this._validate(x,f,this.minDay,v.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===2&&this.leapYear(s.year())?1:0)},weekDay:function(x,f,s){return(this.dayOfWeek(x,f,s)||7)<6},toJD:function(x,f,s){var t=this._validate(x,f,s,v.local.invalidDate);return x=this._t2gYear(t.year()),n.toJD(x,t.month(),t.day())},fromJD:function(x){var f=n.fromJD(x),s=this._g2tYear(f.year());return this.newDate(s,f.month(),f.day())},_t2gYear:function(x){return x-this.yearsOffset-(x>=1&&x<=this.yearsOffset?1:0)},_g2tYear:function(x){return x+this.yearsOffset+(x>=-this.yearsOffset&&x<=-1?1:0)}}),v.calendars.thai=T},45348:function(C,A,e){var v=e(38700),w=e(50896);function n(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}n.prototype=new v.baseCalendar,w(n.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012Bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(x){var f=this._validate(x,this.minMonth,this.minDay,v.local.invalidYear);return this.daysInYear(f.year())===355},weekOfYear:function(x,f,s){var t=this.newDate(x,f,s);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(x){for(var f=0,s=1;s<=12;s++)f+=this.daysInMonth(x,s);return f},daysInMonth:function(x,f){for(var s=this._validate(x,f,this.minDay,v.local.invalidMonth).toJD()-24e5+.5,t=0,o=0;o<T.length;o++){if(T[o]>s)return T[t]-T[t-1];t++}return 30},weekDay:function(x,f,s){return this.dayOfWeek(x,f,s)!==5},toJD:function(x,f,s){var t=this._validate(x,f,s,v.local.invalidDate),o=12*(t.year()-1)+t.month()-15292;return t.day()+T[o-1]-1+24e5-.5},fromJD:function(x){for(var f=x-24e5+.5,s=0,t=0;t<T.length&&!(T[t]>f);t++)s++;var o=s+15292,r=Math.floor((o-1)/12),i=r+1,a=o-12*r,u=f-T[s-1]+1;return this.newDate(i,a,u)},isValid:function(x,f,s){var t=v.baseCalendar.prototype.isValid.apply(this,arguments);return t&&(t=(x=x.year!=null?x.year:x)>=1276&&x<=1500),t},_validate:function(x,f,s,t){var o=v.baseCalendar.prototype._validate.apply(this,arguments);if(o.year<1276||o.year>1500)throw t.replace(/\{0\}/,this.local.name);return o}}),v.calendars.ummalqura=n;var T=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},38700:function(C,A,e){var v=e(50896);function w(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function n(t,o,r,i){if(this._calendar=t,this._year=o,this._month=r,this._day=i,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(s.local.invalidDate||s.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function T(t,o){return"000000".substring(0,o-(t=""+t).length)+t}function x(){this.shortYearCutoff="+10"}function f(t){this.local=this.regionalOptions[t]||this.regionalOptions[""]}v(w.prototype,{instance:function(t,o){t=(t||"gregorian").toLowerCase(),o=o||"";var r=this._localCals[t+"-"+o];if(!r&&this.calendars[t]&&(r=new this.calendars[t](o),this._localCals[t+"-"+o]=r),!r)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,t);return r},newDate:function(t,o,r,i,a){return(i=(t!=null&&t.year?t.calendar():typeof i=="string"?this.instance(i,a):i)||this.instance()).newDate(t,o,r)},substituteDigits:function(t){return function(o){return(o+"").replace(/[0-9]/g,function(r){return t[r]})}},substituteChineseDigits:function(t,o){return function(r){for(var i="",a=0;r>0;){var u=r%10;i=(u===0?"":t[u]+o[a])+i,a++,r=Math.floor(r/10)}return i.indexOf(t[1]+o[1])===0&&(i=i.substr(1)),i||t[0]}}}),v(n.prototype,{newDate:function(t,o,r){return this._calendar.newDate(t??this,o,r)},year:function(t){return arguments.length===0?this._year:this.set(t,"y")},month:function(t){return arguments.length===0?this._month:this.set(t,"m")},day:function(t){return arguments.length===0?this._day:this.set(t,"d")},date:function(t,o,r){if(!this._calendar.isValid(t,o,r))throw(s.local.invalidDate||s.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=t,this._month=o,this._day=r,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(t,o){return this._calendar.add(this,t,o)},set:function(t,o){return this._calendar.set(this,t,o)},compareTo:function(t){if(this._calendar.name!==t._calendar.name)throw(s.local.differentCalendars||s.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,t._calendar.local.name);var o=this._year!==t._year?this._year-t._year:this._month!==t._month?this.monthOfYear()-t.monthOfYear():this._day-t._day;return o===0?0:o<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(t){return this._calendar.fromJD(t)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(t){return this._calendar.fromJSDate(t)},toString:function(){return(this.year()<0?"-":"")+T(Math.abs(this.year()),4)+"-"+T(this.month(),2)+"-"+T(this.day(),2)}}),v(x.prototype,{_validateLevel:0,newDate:function(t,o,r){return t==null?this.today():(t.year&&(this._validate(t,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate),r=t.day(),o=t.month(),t=t.year()),new n(this,t,o,r))},today:function(){return this.fromJSDate(new Date)},epoch:function(t){return this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(t){var o=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return(o.year()<0?"-":"")+T(Math.abs(o.year()),4)},monthsInYear:function(t){return this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear),12},monthOfYear:function(t,o){var r=this._validate(t,o,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth);return(r.month()+this.monthsInYear(r)-this.firstMonth)%this.monthsInYear(r)+this.minMonth},fromMonthOfYear:function(t,o){var r=(o+this.firstMonth-2*this.minMonth)%this.monthsInYear(t)+this.minMonth;return this._validate(t,r,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth),r},daysInYear:function(t){var o=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return this.leapYear(o)?366:365},dayOfYear:function(t,o,r){var i=this._validate(t,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);return i.toJD()-this.newDate(i.year(),this.fromMonthOfYear(i.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(t,o,r){var i=this._validate(t,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(i))+2)%this.daysInWeek()},extraInfo:function(t,o,r){return this._validate(t,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate),{}},add:function(t,o,r){return this._validate(t,this.minMonth,this.minDay,s.local.invalidDate||s.regionalOptions[""].invalidDate),this._correctAdd(t,this._add(t,o,r),o,r)},_add:function(t,o,r){if(this._validateLevel++,r==="d"||r==="w"){var i=t.toJD()+o*(r==="w"?this.daysInWeek():1),a=t.calendar().fromJD(i);return this._validateLevel--,[a.year(),a.month(),a.day()]}try{var u=t.year()+(r==="y"?o:0),l=t.monthOfYear()+(r==="m"?o:0);a=t.day(),r==="y"?(t.month()!==this.fromMonthOfYear(u,l)&&(l=this.newDate(u,t.month(),this.minDay).monthOfYear()),l=Math.min(l,this.monthsInYear(u)),a=Math.min(a,this.daysInMonth(u,this.fromMonthOfYear(u,l)))):r==="m"&&(function(c){for(;l<c.minMonth;)u--,l+=c.monthsInYear(u);for(var _=c.monthsInYear(u);l>_-1+c.minMonth;)u++,l-=_,_=c.monthsInYear(u)}(this),a=Math.min(a,this.daysInMonth(u,this.fromMonthOfYear(u,l))));var d=[u,this.fromMonthOfYear(u,l),a];return this._validateLevel--,d}catch(c){throw this._validateLevel--,c}},_correctAdd:function(t,o,r,i){if(!(this.hasYearZero||i!=="y"&&i!=="m"||o[0]!==0&&t.year()>0==o[0]>0)){var a={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[i],u=r<0?-1:1;o=this._add(t,r*a[0]+u*a[1],a[2])}return t.date(o[0],o[1],o[2])},set:function(t,o,r){this._validate(t,this.minMonth,this.minDay,s.local.invalidDate||s.regionalOptions[""].invalidDate);var i=r==="y"?o:t.year(),a=r==="m"?o:t.month(),u=r==="d"?o:t.day();return r!=="y"&&r!=="m"||(u=Math.min(u,this.daysInMonth(i,a))),t.date(i,a,u)},isValid:function(t,o,r){this._validateLevel++;var i=this.hasYearZero||t!==0;if(i){var a=this.newDate(t,o,this.minDay);i=o>=this.minMonth&&o-this.minMonth<this.monthsInYear(a)&&r>=this.minDay&&r-this.minDay<this.daysInMonth(a)}return this._validateLevel--,i},toJSDate:function(t,o,r){var i=this._validate(t,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);return s.instance().fromJD(this.toJD(i)).toJSDate()},fromJSDate:function(t){return this.fromJD(s.instance().fromJSDate(t).toJD())},_validate:function(t,o,r,i){if(t.year){if(this._validateLevel===0&&this.name!==t.calendar().name)throw(s.local.differentCalendars||s.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,t.calendar().local.name);return t}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(t,o,r))throw i.replace(/\{0\}/,this.local.name);var a=this.newDate(t,o,r);return this._validateLevel--,a}catch(u){throw this._validateLevel--,u}}}),f.prototype=new x,v(f.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var o=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return(t=o.year()+(o.year()<0?1:0))%4==0&&(t%100!=0||t%400==0)},weekOfYear:function(t,o,r){var i=this.newDate(t,o,r);return i.add(4-(i.dayOfWeek()||7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(t,o){var r=this._validate(t,o,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(t,o,r){return(this.dayOfWeek(t,o,r)||7)<6},toJD:function(t,o,r){var i=this._validate(t,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);t=i.year(),o=i.month(),r=i.day(),t<0&&t++,o<3&&(o+=12,t--);var a=Math.floor(t/100),u=2-a+Math.floor(a/4);return Math.floor(365.25*(t+4716))+Math.floor(30.6001*(o+1))+r+u-1524.5},fromJD:function(t){var o=Math.floor(t+.5),r=Math.floor((o-186721625e-2)/36524.25),i=1524+(r=o+1+r-Math.floor(r/4)),a=Math.floor((i-122.1)/365.25),u=Math.floor(365.25*a),l=Math.floor((i-u)/30.6001),d=i-u-Math.floor(30.6001*l),c=l-(l>13.5?13:1),_=a-(c>2.5?4716:4715);return _<=0&&_--,this.newDate(_,c,d)},toJSDate:function(t,o,r){var i=this._validate(t,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate),a=new Date(i.year(),i.month()-1,i.day());return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a.setHours(a.getHours()>12?a.getHours()+2:0),a},fromJSDate:function(t){return this.newDate(t.getFullYear(),t.getMonth()+1,t.getDate())}});var s=C.exports=new w;s.cdate=n,s.baseCalendar=x,s.calendars.gregorian=f},15168:function(C,A,e){var v=e(50896),w=e(38700);v(w.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),w.local=w.regionalOptions[""],v(w.cdate.prototype,{formatDate:function(n,T){return typeof n!="string"&&(T=n,n=""),this._calendar.formatDate(n||"",this,T)}}),v(w.baseCalendar.prototype,{UNIX_EPOCH:w.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:w.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(n,T,x){if(typeof n!="string"&&(x=T,T=n,n=""),!T)return"";if(T.calendar()!==this)throw w.local.invalidFormat||w.regionalOptions[""].invalidFormat;n=n||this.local.dateFormat;for(var f,s,t,o=(x=x||{}).dayNamesShort||this.local.dayNamesShort,r=x.dayNames||this.local.dayNames,i=x.monthNumbers||this.local.monthNumbers,a=x.monthNamesShort||this.local.monthNamesShort,u=x.monthNames||this.local.monthNames,l=(x.calculateWeek||this.local.calculateWeek,function(h,E){for(var k=1;M+k<n.length&&n.charAt(M+k)===h;)k++;return M+=k-1,Math.floor(k/(E||1))>1}),d=function(h,E,k,D){var P=""+E;if(l(h,D))for(;P.length<k;)P="0"+P;return P},c=this,_=function(h){return typeof i=="function"?i.call(c,h,l("m")):m(d("m",h.month(),2))},p=function(h,E){return E?typeof u=="function"?u.call(c,h):u[h.month()-c.minMonth]:typeof a=="function"?a.call(c,h):a[h.month()-c.minMonth]},g=this.local.digits,m=function(h){return x.localNumbers&&g?g(h):h},b="",y=!1,M=0;M<n.length;M++)if(y)n.charAt(M)!=="'"||l("'")?b+=n.charAt(M):y=!1;else switch(n.charAt(M)){case"d":b+=m(d("d",T.day(),2));break;case"D":b+=(f=T.dayOfWeek(),s=o,t=r,l("D")?t[f]:s[f]);break;case"o":b+=d("o",T.dayOfYear(),3);break;case"w":b+=d("w",T.weekOfYear(),2);break;case"m":b+=_(T);break;case"M":b+=p(T,l("M"));break;case"y":b+=l("y",2)?T.year():(T.year()%100<10?"0":"")+T.year()%100;break;case"Y":l("Y",2),b+=T.formatYear();break;case"J":b+=T.toJD();break;case"@":b+=(T.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":b+=(T.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":l("'")?b+="'":y=!0;break;default:b+=n.charAt(M)}return b},parseDate:function(n,T,x){if(T==null)throw w.local.invalidArguments||w.regionalOptions[""].invalidArguments;if((T=typeof T=="object"?T.toString():T+"")==="")return null;n=n||this.local.dateFormat;var f=(x=x||{}).shortYearCutoff||this.shortYearCutoff;f=typeof f!="string"?f:this.today().year()%100+parseInt(f,10);for(var s=x.dayNamesShort||this.local.dayNamesShort,t=x.dayNames||this.local.dayNames,o=x.parseMonth||this.local.parseMonth,r=x.monthNumbers||this.local.monthNumbers,i=x.monthNamesShort||this.local.monthNamesShort,a=x.monthNames||this.local.monthNames,u=-1,l=-1,d=-1,c=-1,_=-1,p=!1,g=!1,m=function(N,V){for(var F=1;P+F<n.length&&n.charAt(P+F)===N;)F++;return P+=F-1,Math.floor(F/(V||1))>1},b=function(N,V){var F=m(N,V),j=[2,3,F?4:2,F?4:2,10,11,20]["oyYJ@!".indexOf(N)+1],Z=new RegExp("^-?\\d{1,"+j+"}"),z=T.substring(D).match(Z);if(!z)throw(w.local.missingNumberAt||w.regionalOptions[""].missingNumberAt).replace(/\{0\}/,D);return D+=z[0].length,parseInt(z[0],10)},y=this,M=function(){if(typeof r=="function"){m("m");var N=r.call(y,T.substring(D));return D+=N.length,N}return b("m")},h=function(N,V,F,j){for(var Z=m(N,j)?F:V,z=0;z<Z.length;z++)if(T.substr(D,Z[z].length).toLowerCase()===Z[z].toLowerCase())return D+=Z[z].length,z+y.minMonth;throw(w.local.unknownNameAt||w.regionalOptions[""].unknownNameAt).replace(/\{0\}/,D)},E=function(){if(typeof a=="function"){var N=m("M")?a.call(y,T.substring(D)):i.call(y,T.substring(D));return D+=N.length,N}return h("M",i,a)},k=function(){if(T.charAt(D)!==n.charAt(P))throw(w.local.unexpectedLiteralAt||w.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,D);D++},D=0,P=0;P<n.length;P++)if(g)n.charAt(P)!=="'"||m("'")?k():g=!1;else switch(n.charAt(P)){case"d":c=b("d");break;case"D":h("D",s,t);break;case"o":_=b("o");break;case"w":b("w");break;case"m":d=M();break;case"M":d=E();break;case"y":var L=P;p=!m("y",2),P=L,l=b("y",2);break;case"Y":l=b("Y",2);break;case"J":u=b("J")+.5,T.charAt(D)==="."&&(D++,b("J"));break;case"@":u=b("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":u=b("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":D=T.length;break;case"'":m("'")?k():g=!0;break;default:k()}if(D<T.length)throw w.local.unexpectedText||w.regionalOptions[""].unexpectedText;if(l===-1?l=this.today().year():l<100&&p&&(l+=f===-1?1900:this.today().year()-this.today().year()%100-(l<=f?0:100)),typeof d=="string"&&(d=o.call(this,l,d)),_>-1){d=1,c=_;for(var O=this.daysInMonth(l,d);c>O;O=this.daysInMonth(l,d))d++,c-=O}return u>-1?this.fromJD(u):this.newDate(l,d,c)},determineDate:function(n,T,x,f,s){x&&typeof x!="object"&&(s=f,f=x,x=null),typeof f!="string"&&(s=f,f="");var t=this;return T=T?T.newDate():null,n==null?T:typeof n=="string"?function(o){try{return t.parseDate(f,o,s)}catch{}for(var r=((o=o.toLowerCase()).match(/^c/)&&x?x.newDate():null)||t.today(),i=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,a=i.exec(o);a;)r.add(parseInt(a[1],10),a[2]||"d"),a=i.exec(o);return r}(n):typeof n=="number"?isNaN(n)||n===1/0||n===-1/0?T:t.today().add(n,"d"):t.newDate(n)}})},21576:function(){},19768:function(){},63436:function(C,A,e){"use strict";var v=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],w=typeof globalThis>"u"?e.g:globalThis;C.exports=function(){for(var n=[],T=0;T<v.length;T++)typeof w[v[T]]=="function"&&(n[n.length]=v[T]);return n}},67756:function(C,A,e){"use strict";function v(xe,ve,ye){xe.prototype=ve.prototype=ye,ye.constructor=xe}function w(xe,ve){var ye=Object.create(xe.prototype);for(var me in ve)ye[me]=ve[me];return ye}function n(){}e.d(A,{qy:function(){return _e},Gz:function(){return Q}});var T=.7,x=1/T,f="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",o=/^#([0-9a-f]{3,8})$/,r=new RegExp("^rgb\\(".concat(f,",").concat(f,",").concat(f,"\\)$")),i=new RegExp("^rgb\\(".concat(t,",").concat(t,",").concat(t,"\\)$")),a=new RegExp("^rgba\\(".concat(f,",").concat(f,",").concat(f,",").concat(s,"\\)$")),u=new RegExp("^rgba\\(".concat(t,",").concat(t,",").concat(t,",").concat(s,"\\)$")),l=new RegExp("^hsl\\(".concat(s,",").concat(t,",").concat(t,"\\)$")),d=new RegExp("^hsla\\(".concat(s,",").concat(t,",").concat(t,",").concat(s,"\\)$")),c={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function _(){return this.rgb().formatHex()}function p(){return this.rgb().formatRgb()}function g(xe){var ve,ye;return xe=(xe+"").trim().toLowerCase(),(ve=o.exec(xe))?(ye=ve[1].length,ve=parseInt(ve[1],16),ye===6?m(ve):ye===3?new M(ve>>8&15|ve>>4&240,ve>>4&15|240&ve,(15&ve)<<4|15&ve,1):ye===8?b(ve>>24&255,ve>>16&255,ve>>8&255,(255&ve)/255):ye===4?b(ve>>12&15|ve>>8&240,ve>>8&15|ve>>4&240,ve>>4&15|240&ve,((15&ve)<<4|15&ve)/255):null):(ve=r.exec(xe))?new M(ve[1],ve[2],ve[3],1):(ve=i.exec(xe))?new M(255*ve[1]/100,255*ve[2]/100,255*ve[3]/100,1):(ve=a.exec(xe))?b(ve[1],ve[2],ve[3],ve[4]):(ve=u.exec(xe))?b(255*ve[1]/100,255*ve[2]/100,255*ve[3]/100,ve[4]):(ve=l.exec(xe))?L(ve[1],ve[2]/100,ve[3]/100,1):(ve=d.exec(xe))?L(ve[1],ve[2]/100,ve[3]/100,ve[4]):c.hasOwnProperty(xe)?m(c[xe]):xe==="transparent"?new M(NaN,NaN,NaN,0):null}function m(xe){return new M(xe>>16&255,xe>>8&255,255&xe,1)}function b(xe,ve,ye,me){return me<=0&&(xe=ve=ye=NaN),new M(xe,ve,ye,me)}function y(xe,ve,ye,me){return arguments.length===1?((Me=xe)instanceof n||(Me=g(Me)),Me?new M((Me=Me.rgb()).r,Me.g,Me.b,Me.opacity):new M):new M(xe,ve,ye,me??1);var Me}function M(xe,ve,ye,me){this.r=+xe,this.g=+ve,this.b=+ye,this.opacity=+me}function h(){return"#".concat(P(this.r)).concat(P(this.g)).concat(P(this.b))}function E(){var xe=k(this.opacity);return"".concat(xe===1?"rgb(":"rgba(").concat(D(this.r),", ").concat(D(this.g),", ").concat(D(this.b)).concat(xe===1?")":", ".concat(xe,")"))}function k(xe){return isNaN(xe)?1:Math.max(0,Math.min(1,xe))}function D(xe){return Math.max(0,Math.min(255,Math.round(xe)||0))}function P(xe){return((xe=D(xe))<16?"0":"")+xe.toString(16)}function L(xe,ve,ye,me){return me<=0?xe=ve=ye=NaN:ye<=0||ye>=1?xe=ve=NaN:ve<=0&&(xe=NaN),new N(xe,ve,ye,me)}function O(xe){if(xe instanceof N)return new N(xe.h,xe.s,xe.l,xe.opacity);if(xe instanceof n||(xe=g(xe)),!xe)return new N;if(xe instanceof N)return xe;var ve=(xe=xe.rgb()).r/255,ye=xe.g/255,me=xe.b/255,Me=Math.min(ve,ye,me),Ae=Math.max(ve,ye,me),ce=NaN,ae=Ae-Me,pe=(Ae+Me)/2;return ae?(ce=ve===Ae?(ye-me)/ae+6*(ye<me):ye===Ae?(me-ve)/ae+2:(ve-ye)/ae+4,ae/=pe<.5?Ae+Me:2-Ae-Me,ce*=60):ae=pe>0&&pe<1?0:ce,new N(ce,ae,pe,xe.opacity)}function N(xe,ve,ye,me){this.h=+xe,this.s=+ve,this.l=+ye,this.opacity=+me}function V(xe){return(xe=(xe||0)%360)<0?xe+360:xe}function F(xe){return Math.max(0,Math.min(1,xe||0))}function j(xe,ve,ye){return 255*(xe<60?ve+(ye-ve)*xe/60:xe<180?ye:xe<240?ve+(ye-ve)*(240-xe)/60:ve)}function Z(xe,ve,ye,me,Me){var Ae=xe*xe,ce=Ae*xe;return((1-3*xe+3*Ae-ce)*ve+(4-6*Ae+3*ce)*ye+(1+3*xe+3*Ae-3*ce)*me+ce*Me)/6}v(n,g,{copy:function(xe){return Object.assign(new this.constructor,this,xe)},displayable:function(){return this.rgb().displayable()},hex:_,formatHex:_,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return O(this).formatHsl()},formatRgb:p,toString:p}),v(M,y,w(n,{brighter:function(xe){return xe=xe==null?x:Math.pow(x,xe),new M(this.r*xe,this.g*xe,this.b*xe,this.opacity)},darker:function(xe){return xe=xe==null?T:Math.pow(T,xe),new M(this.r*xe,this.g*xe,this.b*xe,this.opacity)},rgb:function(){return this},clamp:function(){return new M(D(this.r),D(this.g),D(this.b),k(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:h,formatHex:h,formatHex8:function(){return"#".concat(P(this.r)).concat(P(this.g)).concat(P(this.b)).concat(P(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:E,toString:E})),v(N,function(xe,ve,ye,me){return arguments.length===1?O(xe):new N(xe,ve,ye,me??1)},w(n,{brighter:function(xe){return xe=xe==null?x:Math.pow(x,xe),new N(this.h,this.s,this.l*xe,this.opacity)},darker:function(xe){return xe=xe==null?T:Math.pow(T,xe),new N(this.h,this.s,this.l*xe,this.opacity)},rgb:function(){var xe=this.h%360+360*(this.h<0),ve=isNaN(xe)||isNaN(this.s)?0:this.s,ye=this.l,me=ye+(ye<.5?ye:1-ye)*ve,Me=2*ye-me;return new M(j(xe>=240?xe-240:xe+120,Me,me),j(xe,Me,me),j(xe<120?xe+240:xe-120,Me,me),this.opacity)},clamp:function(){return new N(V(this.h),F(this.s),F(this.l),k(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var xe=k(this.opacity);return"".concat(xe===1?"hsl(":"hsla(").concat(V(this.h),", ").concat(100*F(this.s),"%, ").concat(100*F(this.l),"%").concat(xe===1?")":", ".concat(xe,")"))}}));var z=function(xe){return function(){return xe}};function H(xe,ve){var ye=ve-xe;return ye?function(me,Me){return function(Ae){return me+Ae*Me}}(xe,ye):z(isNaN(xe)?ve:xe)}var U=function xe(ve){var ye=function(Me){return(Me=+Me)==1?H:function(Ae,ce){return ce-Ae?function(ae,pe,De){return ae=Math.pow(ae,De),pe=Math.pow(pe,De)-ae,De=1/De,function(ke){return Math.pow(ae+ke*pe,De)}}(Ae,ce,Me):z(isNaN(Ae)?ce:Ae)}}(ve);function me(Me,Ae){var ce=ye((Me=y(Me)).r,(Ae=y(Ae)).r),ae=ye(Me.g,Ae.g),pe=ye(Me.b,Ae.b),De=H(Me.opacity,Ae.opacity);return function(ke){return Me.r=ce(ke),Me.g=ae(ke),Me.b=pe(ke),Me.opacity=De(ke),Me+""}}return me.gamma=xe,me}(1);function re(xe){return function(ve){var ye,me,Me=ve.length,Ae=new Array(Me),ce=new Array(Me),ae=new Array(Me);for(ye=0;ye<Me;++ye)me=y(ve[ye]),Ae[ye]=me.r||0,ce[ye]=me.g||0,ae[ye]=me.b||0;return Ae=xe(Ae),ce=xe(ce),ae=xe(ae),me.opacity=1,function(pe){return me.r=Ae(pe),me.g=ce(pe),me.b=ae(pe),me+""}}}function ee(xe,ve){var ye,me=ve?ve.length:0,Me=xe?Math.min(me,xe.length):0,Ae=new Array(Me),ce=new Array(me);for(ye=0;ye<Me;++ye)Ae[ye]=_e(xe[ye],ve[ye]);for(;ye<me;++ye)ce[ye]=ve[ye];return function(ae){for(ye=0;ye<Me;++ye)ce[ye]=Ae[ye](ae);return ce}}function J(xe,ve){var ye=new Date;return xe=+xe,ve=+ve,function(me){return ye.setTime(xe*(1-me)+ve*me),ye}}function Q(xe,ve){return xe=+xe,ve=+ve,function(ye){return xe*(1-ye)+ve*ye}}function ne(xe){return ne=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ve){return typeof ve}:function(ve){return ve&&typeof Symbol=="function"&&ve.constructor===Symbol&&ve!==Symbol.prototype?"symbol":typeof ve},ne(xe)}function K(xe,ve){var ye,me={},Me={};for(ye in xe!==null&&ne(xe)==="object"||(xe={}),ve!==null&&ne(ve)==="object"||(ve={}),ve)ye in xe?me[ye]=_e(xe[ye],ve[ye]):Me[ye]=ve[ye];return function(Ae){for(ye in me)Me[ye]=me[ye](Ae);return Me}}re(function(xe){var ve=xe.length-1;return function(ye){var me=ye<=0?ye=0:ye>=1?(ye=1,ve-1):Math.floor(ye*ve),Me=xe[me],Ae=xe[me+1],ce=me>0?xe[me-1]:2*Me-Ae,ae=me<ve-1?xe[me+2]:2*Ae-Me;return Z((ye-me/ve)*ve,ce,Me,Ae,ae)}}),re(function(xe){var ve=xe.length;return function(ye){var me=Math.floor(((ye%=1)<0?++ye:ye)*ve),Me=xe[(me+ve-1)%ve],Ae=xe[me%ve],ce=xe[(me+1)%ve],ae=xe[(me+2)%ve];return Z((ye-me/ve)*ve,Me,Ae,ce,ae)}});var oe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,le=new RegExp(oe.source,"g");function se(xe,ve){var ye,me,Me,Ae=oe.lastIndex=le.lastIndex=0,ce=-1,ae=[],pe=[];for(xe+="",ve+="";(ye=oe.exec(xe))&&(me=le.exec(ve));)(Me=me.index)>Ae&&(Me=ve.slice(Ae,Me),ae[ce]?ae[ce]+=Me:ae[++ce]=Me),(ye=ye[0])===(me=me[0])?ae[ce]?ae[ce]+=me:ae[++ce]=me:(ae[++ce]=null,pe.push({i:ce,x:Q(ye,me)})),Ae=le.lastIndex;return Ae<ve.length&&(Me=ve.slice(Ae),ae[ce]?ae[ce]+=Me:ae[++ce]=Me),ae.length<2?pe[0]?function(De){return function(ke){return De(ke)+""}}(pe[0].x):function(De){return function(){return De}}(ve):(ve=pe.length,function(De){for(var ke,Ee=0;Ee<ve;++Ee)ae[(ke=pe[Ee]).i]=ke.x(De);return ae.join("")})}function de(xe,ve){ve||(ve=[]);var ye,me=xe?Math.min(ve.length,xe.length):0,Me=ve.slice();return function(Ae){for(ye=0;ye<me;++ye)Me[ye]=xe[ye]*(1-Ae)+ve[ye]*Ae;return Me}}function be(xe){return be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ve){return typeof ve}:function(ve){return ve&&typeof Symbol=="function"&&ve.constructor===Symbol&&ve!==Symbol.prototype?"symbol":typeof ve},be(xe)}function _e(xe,ve){var ye,me,Me=be(ve);return ve==null||Me==="boolean"?z(ve):(Me==="number"?Q:Me==="string"?(ye=g(ve))?(ve=ye,U):se:ve instanceof g?U:ve instanceof Date?J:(me=ve,!ArrayBuffer.isView(me)||me instanceof DataView?Array.isArray(ve)?ee:typeof ve.valueOf!="function"&&typeof ve.toString!="function"||isNaN(ve)?K:Q:de))(xe,ve)}},30584:function(C){"use strict";C.exports=JSON.parse('["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]')},7294:function(C){"use strict";C.exports=JSON.parse('["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]')},47916:function(C){"use strict";C.exports=JSON.parse('["normal","italic","oblique"]')},2904:function(C){"use strict";C.exports=JSON.parse('["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]')},68194:function(C){"use strict";C.exports=JSON.parse('["inherit","initial","unset"]')},3748:function(C){"use strict";C.exports=JSON.parse('["caption","icon","menu","message-box","small-caption","status-bar"]')}},Y={};function ue(C){var A=Y[C];if(A!==void 0)return A.exports;var e=Y[C]={exports:{}};return q[C].call(e.exports,e,e.exports,ue),e.exports}return ue.n=function(C){var A=C&&C.__esModule?function(){return C.default}:function(){return C};return ue.d(A,{a:A}),A},ue.d=function(C,A){for(var e in A)ue.o(A,e)&&!ue.o(C,e)&&Object.defineProperty(C,e,{enumerable:!0,get:A[e]})},ue.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),ue.o=function(C,A){return Object.prototype.hasOwnProperty.call(C,A)},ue.r=function(C){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(C,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(C,"__esModule",{value:!0})},ue(13792)}()})});var ax=null;var kg=1,sx=Symbol("SIGNAL");function Ji(q){let Y=ax;return ax=q,Y}var lx={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function L4(q){if(!(Cg(q)&&!q.dirty)&&!(!q.dirty&&q.lastCleanEpoch===kg)){if(!q.producerMustRecompute(q)&&!Sg(q)){q.dirty=!1,q.lastCleanEpoch=kg;return}q.producerRecomputeValue(q),q.dirty=!1,q.lastCleanEpoch=kg}}function ux(q){return q&&(q.nextProducerIndex=0),Ji(q)}function cx(q,Y){if(Ji(Y),!(!q||q.producerNode===void 0||q.producerIndexOfThis===void 0||q.producerLastReadVersion===void 0)){if(Cg(q))for(let ue=q.nextProducerIndex;ue<q.producerNode.length;ue++)Eg(q.producerNode[ue],q.producerIndexOfThis[ue]);for(;q.producerNode.length>q.nextProducerIndex;)q.producerNode.pop(),q.producerLastReadVersion.pop(),q.producerIndexOfThis.pop()}}function Sg(q){sp(q);for(let Y=0;Y<q.producerNode.length;Y++){let ue=q.producerNode[Y],C=q.producerLastReadVersion[Y];if(C!==ue.version||(L4(ue),C!==ue.version))return!0}return!1}function fx(q){if(sp(q),Cg(q))for(let Y=0;Y<q.producerNode.length;Y++)Eg(q.producerNode[Y],q.producerIndexOfThis[Y]);q.producerNode.length=q.producerLastReadVersion.length=q.producerIndexOfThis.length=0,q.liveConsumerNode&&(q.liveConsumerNode.length=q.liveConsumerIndexOfThis.length=0)}function Eg(q,Y){if(O4(q),sp(q),q.liveConsumerNode.length===1)for(let C=0;C<q.producerNode.length;C++)Eg(q.producerNode[C],q.producerIndexOfThis[C]);let ue=q.liveConsumerNode.length-1;if(q.liveConsumerNode[Y]=q.liveConsumerNode[ue],q.liveConsumerIndexOfThis[Y]=q.liveConsumerIndexOfThis[ue],q.liveConsumerNode.length--,q.liveConsumerIndexOfThis.length--,Y<q.liveConsumerNode.length){let C=q.liveConsumerIndexOfThis[Y],A=q.liveConsumerNode[Y];sp(A),A.producerIndexOfThis[C]=Y}}function Cg(q){return q.consumerIsAlwaysLive||(q?.liveConsumerNode?.length??0)>0}function sp(q){q.producerNode??=[],q.producerIndexOfThis??=[],q.producerLastReadVersion??=[]}function O4(q){q.liveConsumerNode??=[],q.liveConsumerIndexOfThis??=[]}function P4(){throw new Error}var R4=P4;function hx(q){R4=q}function Jr(q){return typeof q=="function"}function mf(q){let ue=q(C=>{Error.call(C),C.stack=new Error().stack});return ue.prototype=Object.create(Error.prototype),ue.prototype.constructor=ue,ue}var lp=mf(q=>function(ue){q(this),this.message=ue?`${ue.length} errors occurred during unsubscription:
${ue.map((C,A)=>`${A+1}) ${C.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=ue});function Ih(q,Y){if(q){let ue=q.indexOf(Y);0<=ue&&q.splice(ue,1)}}var na=class q{constructor(Y){this.initialTeardown=Y,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Y;if(!this.closed){this.closed=!0;let{_parentage:ue}=this;if(ue)if(this._parentage=null,Array.isArray(ue))for(let e of ue)e.remove(this);else ue.remove(this);let{initialTeardown:C}=this;if(Jr(C))try{C()}catch(e){Y=e instanceof lp?e.errors:[e]}let{_finalizers:A}=this;if(A){this._finalizers=null;for(let e of A)try{dx(e)}catch(v){Y=Y??[],v instanceof lp?Y=[...Y,...v.errors]:Y.push(v)}}if(Y)throw new lp(Y)}}add(Y){var ue;if(Y&&Y!==this)if(this.closed)dx(Y);else{if(Y instanceof q){if(Y.closed||Y._hasParent(this))return;Y._addParent(this)}(this._finalizers=(ue=this._finalizers)!==null&&ue!==void 0?ue:[]).push(Y)}}_hasParent(Y){let{_parentage:ue}=this;return ue===Y||Array.isArray(ue)&&ue.includes(Y)}_addParent(Y){let{_parentage:ue}=this;this._parentage=Array.isArray(ue)?(ue.push(Y),ue):ue?[ue,Y]:Y}_removeParent(Y){let{_parentage:ue}=this;ue===Y?this._parentage=null:Array.isArray(ue)&&Ih(ue,Y)}remove(Y){let{_finalizers:ue}=this;ue&&Ih(ue,Y),Y instanceof q&&Y._removeParent(this)}};na.EMPTY=(()=>{let q=new na;return q.closed=!0,q})();var Dg=na.EMPTY;function up(q){return q instanceof na||q&&"closed"in q&&Jr(q.remove)&&Jr(q.add)&&Jr(q.unsubscribe)}function dx(q){Jr(q)?q():q.unsubscribe()}var Ul={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var vf={setTimeout(q,Y,...ue){let{delegate:C}=vf;return C?.setTimeout?C.setTimeout(q,Y,...ue):setTimeout(q,Y,...ue)},clearTimeout(q){let{delegate:Y}=vf;return(Y?.clearTimeout||clearTimeout)(q)},delegate:void 0};function cp(q){vf.setTimeout(()=>{let{onUnhandledError:Y}=Ul;if(Y)Y(q);else throw q})}function Lh(){}var px=Ig("C",void 0,void 0);function gx(q){return Ig("E",void 0,q)}function mx(q){return Ig("N",q,void 0)}function Ig(q,Y,ue){return{kind:q,value:Y,error:ue}}var kc=null;function yf(q){if(Ul.useDeprecatedSynchronousErrorHandling){let Y=!kc;if(Y&&(kc={errorThrown:!1,error:null}),q(),Y){let{errorThrown:ue,error:C}=kc;if(kc=null,ue)throw C}}else q()}function vx(q){Ul.useDeprecatedSynchronousErrorHandling&&kc&&(kc.errorThrown=!0,kc.error=q)}var Sc=class extends na{constructor(Y){super(),this.isStopped=!1,Y?(this.destination=Y,up(Y)&&Y.add(this)):this.destination=z4}static create(Y,ue,C){return new xf(Y,ue,C)}next(Y){this.isStopped?Og(mx(Y),this):this._next(Y)}error(Y){this.isStopped?Og(gx(Y),this):(this.isStopped=!0,this._error(Y))}complete(){this.isStopped?Og(px,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Y){this.destination.next(Y)}_error(Y){try{this.destination.error(Y)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},F4=Function.prototype.bind;function Lg(q,Y){return F4.call(q,Y)}var Pg=class{constructor(Y){this.partialObserver=Y}next(Y){let{partialObserver:ue}=this;if(ue.next)try{ue.next(Y)}catch(C){fp(C)}}error(Y){let{partialObserver:ue}=this;if(ue.error)try{ue.error(Y)}catch(C){fp(C)}else fp(Y)}complete(){let{partialObserver:Y}=this;if(Y.complete)try{Y.complete()}catch(ue){fp(ue)}}},xf=class extends Sc{constructor(Y,ue,C){super();let A;if(Jr(Y)||!Y)A={next:Y??void 0,error:ue??void 0,complete:C??void 0};else{let e;this&&Ul.useDeprecatedNextContext?(e=Object.create(Y),e.unsubscribe=()=>this.unsubscribe(),A={next:Y.next&&Lg(Y.next,e),error:Y.error&&Lg(Y.error,e),complete:Y.complete&&Lg(Y.complete,e)}):A=Y}this.destination=new Pg(A)}};function fp(q){Ul.useDeprecatedSynchronousErrorHandling?vx(q):cp(q)}function N4(q){throw q}function Og(q,Y){let{onStoppedNotification:ue}=Ul;ue&&vf.setTimeout(()=>ue(q,Y))}var z4={closed:!0,next:Lh,error:N4,complete:Lh};var bf=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ws(q){return q}function Rg(...q){return Fg(q)}function Fg(q){return q.length===0?Ws:q.length===1?q[0]:function(ue){return q.reduce((C,A)=>A(C),ue)}}var to=(()=>{class q{constructor(ue){ue&&(this._subscribe=ue)}lift(ue){let C=new q;return C.source=this,C.operator=ue,C}subscribe(ue,C,A){let e=j4(ue)?ue:new xf(ue,C,A);return yf(()=>{let{operator:v,source:w}=this;e.add(v?v.call(e,w):w?this._subscribe(e):this._trySubscribe(e))}),e}_trySubscribe(ue){try{return this._subscribe(ue)}catch(C){ue.error(C)}}forEach(ue,C){return C=yx(C),new C((A,e)=>{let v=new xf({next:w=>{try{ue(w)}catch(n){e(n),v.unsubscribe()}},error:e,complete:A});this.subscribe(v)})}_subscribe(ue){var C;return(C=this.source)===null||C===void 0?void 0:C.subscribe(ue)}[bf](){return this}pipe(...ue){return Fg(ue)(this)}toPromise(ue){return ue=yx(ue),new ue((C,A)=>{let e;this.subscribe(v=>e=v,v=>A(v),()=>C(e))})}}return q.create=Y=>new q(Y),q})();function yx(q){var Y;return(Y=q??Ul.Promise)!==null&&Y!==void 0?Y:Promise}function B4(q){return q&&Jr(q.next)&&Jr(q.error)&&Jr(q.complete)}function j4(q){return q&&q instanceof Sc||B4(q)&&up(q)}function Ng(q){return Jr(q?.lift)}function Ci(q){return Y=>{if(Ng(Y))return Y.lift(function(ue){try{return q(ue,this)}catch(C){this.error(C)}});throw new TypeError("Unable to lift unknown Observable type")}}function Di(q,Y,ue,C,A){return new zg(q,Y,ue,C,A)}var zg=class extends Sc{constructor(Y,ue,C,A,e,v){super(Y),this.onFinalize=e,this.shouldUnsubscribe=v,this._next=ue?function(w){try{ue(w)}catch(n){Y.error(n)}}:super._next,this._error=A?function(w){try{A(w)}catch(n){Y.error(n)}finally{this.unsubscribe()}}:super._error,this._complete=C?function(){try{C()}catch(w){Y.error(w)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Y;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:ue}=this;super.unsubscribe(),!ue&&((Y=this.onFinalize)===null||Y===void 0||Y.call(this))}}};function _f(){return Ci((q,Y)=>{let ue=null;q._refCount++;let C=Di(Y,void 0,void 0,void 0,()=>{if(!q||q._refCount<=0||0<--q._refCount){ue=null;return}let A=q._connection,e=ue;ue=null,A&&(!e||A===e)&&A.unsubscribe(),Y.unsubscribe()});q.subscribe(C),C.closed||(ue=q.connect())})}var wf=class extends to{constructor(Y,ue){super(),this.source=Y,this.subjectFactory=ue,this._subject=null,this._refCount=0,this._connection=null,Ng(Y)&&(this.lift=Y.lift)}_subscribe(Y){return this.getSubject().subscribe(Y)}getSubject(){let Y=this._subject;return(!Y||Y.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:Y}=this;this._subject=this._connection=null,Y?.unsubscribe()}connect(){let Y=this._connection;if(!Y){Y=this._connection=new na;let ue=this.getSubject();Y.add(this.source.subscribe(Di(ue,void 0,()=>{this._teardown(),ue.complete()},C=>{this._teardown(),ue.error(C)},()=>this._teardown()))),Y.closed&&(this._connection=null,Y=na.EMPTY)}return Y}refCount(){return _f()(this)}};var xx=mf(q=>function(){q(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var us=(()=>{class q extends to{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ue){let C=new hp(this,this);return C.operator=ue,C}_throwIfClosed(){if(this.closed)throw new xx}next(ue){yf(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let C of this.currentObservers)C.next(ue)}})}error(ue){yf(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ue;let{observers:C}=this;for(;C.length;)C.shift().error(ue)}})}complete(){yf(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:ue}=this;for(;ue.length;)ue.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ue;return((ue=this.observers)===null||ue===void 0?void 0:ue.length)>0}_trySubscribe(ue){return this._throwIfClosed(),super._trySubscribe(ue)}_subscribe(ue){return this._throwIfClosed(),this._checkFinalizedStatuses(ue),this._innerSubscribe(ue)}_innerSubscribe(ue){let{hasError:C,isStopped:A,observers:e}=this;return C||A?Dg:(this.currentObservers=null,e.push(ue),new na(()=>{this.currentObservers=null,Ih(e,ue)}))}_checkFinalizedStatuses(ue){let{hasError:C,thrownError:A,isStopped:e}=this;C?ue.error(A):e&&ue.complete()}asObservable(){let ue=new to;return ue.source=this,ue}}return q.create=(Y,ue)=>new hp(Y,ue),q})(),hp=class extends us{constructor(Y,ue){super(),this.destination=Y,this.source=ue}next(Y){var ue,C;(C=(ue=this.destination)===null||ue===void 0?void 0:ue.next)===null||C===void 0||C.call(ue,Y)}error(Y){var ue,C;(C=(ue=this.destination)===null||ue===void 0?void 0:ue.error)===null||C===void 0||C.call(ue,Y)}complete(){var Y,ue;(ue=(Y=this.destination)===null||Y===void 0?void 0:Y.complete)===null||ue===void 0||ue.call(Y)}_subscribe(Y){var ue,C;return(C=(ue=this.source)===null||ue===void 0?void 0:ue.subscribe(Y))!==null&&C!==void 0?C:Dg}};var ra=class extends us{constructor(Y){super(),this._value=Y}get value(){return this.getValue()}_subscribe(Y){let ue=super._subscribe(Y);return!ue.closed&&Y.next(this._value),ue}getValue(){let{hasError:Y,thrownError:ue,_value:C}=this;if(Y)throw ue;return this._throwIfClosed(),C}next(Y){super.next(this._value=Y)}};var Ys=new to(q=>q.complete());function bx(q){return q&&Jr(q.schedule)}function _x(q){return q[q.length-1]}function wx(q){return Jr(_x(q))?q.pop():void 0}function Ku(q){return bx(_x(q))?q.pop():void 0}function Mx(q,Y,ue,C){function A(e){return e instanceof ue?e:new ue(function(v){v(e)})}return new(ue||(ue=Promise))(function(e,v){function w(x){try{T(C.next(x))}catch(f){v(f)}}function n(x){try{T(C.throw(x))}catch(f){v(f)}}function T(x){x.done?e(x.value):A(x.value).then(w,n)}T((C=C.apply(q,Y||[])).next())})}function Tx(q){var Y=typeof Symbol=="function"&&Symbol.iterator,ue=Y&&q[Y],C=0;if(ue)return ue.call(q);if(q&&typeof q.length=="number")return{next:function(){return q&&C>=q.length&&(q=void 0),{value:q&&q[C++],done:!q}}};throw new TypeError(Y?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ec(q){return this instanceof Ec?(this.v=q,this):new Ec(q)}function Ax(q,Y,ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C=ue.apply(q,Y||[]),A,e=[];return A={},v("next"),v("throw"),v("return"),A[Symbol.asyncIterator]=function(){return this},A;function v(s){C[s]&&(A[s]=function(t){return new Promise(function(o,r){e.push([s,t,o,r])>1||w(s,t)})})}function w(s,t){try{n(C[s](t))}catch(o){f(e[0][3],o)}}function n(s){s.value instanceof Ec?Promise.resolve(s.value.v).then(T,x):f(e[0][2],s)}function T(s){w("next",s)}function x(s){w("throw",s)}function f(s,t){s(t),e.shift(),e.length&&w(e[0][0],e[0][1])}}function kx(q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Y=q[Symbol.asyncIterator],ue;return Y?Y.call(q):(q=typeof Tx=="function"?Tx(q):q[Symbol.iterator](),ue={},C("next"),C("throw"),C("return"),ue[Symbol.asyncIterator]=function(){return this},ue);function C(e){ue[e]=q[e]&&function(v){return new Promise(function(w,n){v=q[e](v),A(w,n,v.done,v.value)})}}function A(e,v,w,n){Promise.resolve(n).then(function(T){e({value:T,done:w})},v)}}var dp=q=>q&&typeof q.length=="number"&&typeof q!="function";function pp(q){return Jr(q?.then)}function gp(q){return Jr(q[bf])}function mp(q){return Symbol.asyncIterator&&Jr(q?.[Symbol.asyncIterator])}function vp(q){return new TypeError(`You provided ${q!==null&&typeof q=="object"?"an invalid object":`'${q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function V4(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var yp=V4();function xp(q){return Jr(q?.[yp])}function bp(q){return Ax(this,arguments,function*(){let ue=q.getReader();try{for(;;){let{value:C,done:A}=yield Ec(ue.read());if(A)return yield Ec(void 0);yield yield Ec(C)}}finally{ue.releaseLock()}})}function _p(q){return Jr(q?.getReader)}function ma(q){if(q instanceof to)return q;if(q!=null){if(gp(q))return U4(q);if(dp(q))return H4(q);if(pp(q))return q4(q);if(mp(q))return Sx(q);if(xp(q))return G4(q);if(_p(q))return W4(q)}throw vp(q)}function U4(q){return new to(Y=>{let ue=q[bf]();if(Jr(ue.subscribe))return ue.subscribe(Y);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function H4(q){return new to(Y=>{for(let ue=0;ue<q.length&&!Y.closed;ue++)Y.next(q[ue]);Y.complete()})}function q4(q){return new to(Y=>{q.then(ue=>{Y.closed||(Y.next(ue),Y.complete())},ue=>Y.error(ue)).then(null,cp)})}function G4(q){return new to(Y=>{for(let ue of q)if(Y.next(ue),Y.closed)return;Y.complete()})}function Sx(q){return new to(Y=>{Y4(q,Y).catch(ue=>Y.error(ue))})}function W4(q){return Sx(bp(q))}function Y4(q,Y){var ue,C,A,e;return Mx(this,void 0,void 0,function*(){try{for(ue=kx(q);C=yield ue.next(),!C.done;){let v=C.value;if(Y.next(v),Y.closed)return}}catch(v){A={error:v}}finally{try{C&&!C.done&&(e=ue.return)&&(yield e.call(ue))}finally{if(A)throw A.error}}Y.complete()})}function Is(q,Y,ue,C=0,A=!1){let e=Y.schedule(function(){ue(),A?q.add(this.schedule(null,C)):this.unsubscribe()},C);if(q.add(e),!A)return e}function wp(q,Y=0){return Ci((ue,C)=>{ue.subscribe(Di(C,A=>Is(C,q,()=>C.next(A),Y),()=>Is(C,q,()=>C.complete(),Y),A=>Is(C,q,()=>C.error(A),Y)))})}function Tp(q,Y=0){return Ci((ue,C)=>{C.add(q.schedule(()=>ue.subscribe(C),Y))})}function Ex(q,Y){return ma(q).pipe(Tp(Y),wp(Y))}function Cx(q,Y){return ma(q).pipe(Tp(Y),wp(Y))}function Dx(q,Y){return new to(ue=>{let C=0;return Y.schedule(function(){C===q.length?ue.complete():(ue.next(q[C++]),ue.closed||this.schedule())})})}function Ix(q,Y){return new to(ue=>{let C;return Is(ue,Y,()=>{C=q[yp](),Is(ue,Y,()=>{let A,e;try{({value:A,done:e}=C.next())}catch(v){ue.error(v);return}e?ue.complete():ue.next(A)},0,!0)}),()=>Jr(C?.return)&&C.return()})}function Mp(q,Y){if(!q)throw new Error("Iterable cannot be null");return new to(ue=>{Is(ue,Y,()=>{let C=q[Symbol.asyncIterator]();Is(ue,Y,()=>{C.next().then(A=>{A.done?ue.complete():ue.next(A.value)})},0,!0)})})}function Lx(q,Y){return Mp(bp(q),Y)}function Ox(q,Y){if(q!=null){if(gp(q))return Ex(q,Y);if(dp(q))return Dx(q,Y);if(pp(q))return Cx(q,Y);if(mp(q))return Mp(q,Y);if(xp(q))return Ix(q,Y);if(_p(q))return Lx(q,Y)}throw vp(q)}function ia(q,Y){return Y?Ox(q,Y):ma(q)}function ti(...q){let Y=Ku(q);return ia(q,Y)}function Tf(q,Y){let ue=Jr(q)?q:()=>q,C=A=>A.error(ue());return new to(Y?A=>Y.schedule(C,0,A):C)}function Bg(q){return!!q&&(q instanceof to||Jr(q.lift)&&Jr(q.subscribe))}var Du=mf(q=>function(){q(this),this.name="EmptyError",this.message="no elements in sequence"});function Ii(q,Y){return Ci((ue,C)=>{let A=0;ue.subscribe(Di(C,e=>{C.next(q.call(Y,e,A++))}))})}var{isArray:$4}=Array;function Z4(q,Y){return $4(Y)?q(...Y):q(Y)}function Px(q){return Ii(Y=>Z4(q,Y))}var{isArray:X4}=Array,{getPrototypeOf:K4,prototype:J4,keys:Q4}=Object;function Rx(q){if(q.length===1){let Y=q[0];if(X4(Y))return{args:Y,keys:null};if(e5(Y)){let ue=Q4(Y);return{args:ue.map(C=>Y[C]),keys:ue}}}return{args:q,keys:null}}function e5(q){return q&&typeof q=="object"&&K4(q)===J4}function Fx(q,Y){return q.reduce((ue,C,A)=>(ue[C]=Y[A],ue),{})}function Ap(...q){let Y=Ku(q),ue=wx(q),{args:C,keys:A}=Rx(q);if(C.length===0)return ia([],Y);let e=new to(t5(C,Y,A?v=>Fx(A,v):Ws));return ue?e.pipe(Px(ue)):e}function t5(q,Y,ue=Ws){return C=>{Nx(Y,()=>{let{length:A}=q,e=new Array(A),v=A,w=A;for(let n=0;n<A;n++)Nx(Y,()=>{let T=ia(q[n],Y),x=!1;T.subscribe(Di(C,f=>{e[n]=f,x||(x=!0,w--),w||C.next(ue(e.slice()))},()=>{--v||C.complete()}))},C)},C)}}function Nx(q,Y,ue){q?Is(ue,q,Y):Y()}function zx(q,Y,ue,C,A,e,v,w){let n=[],T=0,x=0,f=!1,s=()=>{f&&!n.length&&!T&&Y.complete()},t=r=>T<C?o(r):n.push(r),o=r=>{e&&Y.next(r),T++;let i=!1;ma(ue(r,x++)).subscribe(Di(Y,a=>{A?.(a),e?t(a):Y.next(a)},()=>{i=!0},void 0,()=>{if(i)try{for(T--;n.length&&T<C;){let a=n.shift();v?Is(Y,v,()=>o(a)):o(a)}s()}catch(a){Y.error(a)}}))};return q.subscribe(Di(Y,t,()=>{f=!0,s()})),()=>{w?.()}}function oa(q,Y,ue=1/0){return Jr(Y)?oa((C,A)=>Ii((e,v)=>Y(C,e,A,v))(ma(q(C,A))),ue):(typeof Y=="number"&&(ue=Y),Ci((C,A)=>zx(C,A,q,ue)))}function jg(q=1/0){return oa(Ws,q)}function Bx(){return jg(1)}function Mf(...q){return Bx()(ia(q,Ku(q)))}function kp(q){return new to(Y=>{ma(q()).subscribe(Y)})}function Hl(q,Y){return Ci((ue,C)=>{let A=0;ue.subscribe(Di(C,e=>q.call(Y,e,A++)&&C.next(e)))})}function Ju(q){return Ci((Y,ue)=>{let C=null,A=!1,e;C=Y.subscribe(Di(ue,void 0,void 0,v=>{e=ma(q(v,Ju(q)(Y))),C?(C.unsubscribe(),C=null,e.subscribe(ue)):A=!0})),A&&(C.unsubscribe(),C=null,e.subscribe(ue))})}function jx(q,Y,ue,C,A){return(e,v)=>{let w=ue,n=Y,T=0;e.subscribe(Di(v,x=>{let f=T++;n=w?q(n,x,f):(w=!0,x),C&&v.next(n)},A&&(()=>{w&&v.next(n),v.complete()})))}}function Af(q,Y){return Jr(Y)?oa(q,Y,1):oa(q,1)}function Qu(q){return Ci((Y,ue)=>{let C=!1;Y.subscribe(Di(ue,A=>{C=!0,ue.next(A)},()=>{C||ue.next(q),ue.complete()}))})}function Iu(q){return q<=0?()=>Ys:Ci((Y,ue)=>{let C=0;Y.subscribe(Di(ue,A=>{++C<=q&&(ue.next(A),q<=C&&ue.complete())}))})}function Vg(q){return Ii(()=>q)}function Sp(q=n5){return Ci((Y,ue)=>{let C=!1;Y.subscribe(Di(ue,A=>{C=!0,ue.next(A)},()=>C?ue.complete():ue.error(q())))})}function n5(){return new Du}function Oh(q){return Ci((Y,ue)=>{try{Y.subscribe(ue)}finally{ue.add(q)}})}function lu(q,Y){let ue=arguments.length>=2;return C=>C.pipe(q?Hl((A,e)=>q(A,e,C)):Ws,Iu(1),ue?Qu(Y):Sp(()=>new Du))}function kf(q){return q<=0?()=>Ys:Ci((Y,ue)=>{let C=[];Y.subscribe(Di(ue,A=>{C.push(A),q<C.length&&C.shift()},()=>{for(let A of C)ue.next(A);ue.complete()},void 0,()=>{C=null}))})}function Ug(q,Y){let ue=arguments.length>=2;return C=>C.pipe(q?Hl((A,e)=>q(A,e,C)):Ws,kf(1),ue?Qu(Y):Sp(()=>new Du))}function Hg(q,Y){return Ci(jx(q,Y,arguments.length>=2,!0))}function qg(...q){let Y=Ku(q);return Ci((ue,C)=>{(Y?Mf(q,ue,Y):Mf(q,ue)).subscribe(C)})}function ql(q,Y){return Ci((ue,C)=>{let A=null,e=0,v=!1,w=()=>v&&!A&&C.complete();ue.subscribe(Di(C,n=>{A?.unsubscribe();let T=0,x=e++;ma(q(n,x)).subscribe(A=Di(C,f=>C.next(Y?Y(n,f,x,T++):f),()=>{A=null,w()}))},()=>{v=!0,w()}))})}function Gg(q){return Ci((Y,ue)=>{ma(q).subscribe(Di(ue,()=>ue.complete(),Lh)),!ue.closed&&Y.subscribe(ue)})}function La(q,Y,ue){let C=Jr(q)||Y||ue?{next:q,error:Y,complete:ue}:q;return C?Ci((A,e)=>{var v;(v=C.subscribe)===null||v===void 0||v.call(C);let w=!0;A.subscribe(Di(e,n=>{var T;(T=C.next)===null||T===void 0||T.call(C,n),e.next(n)},()=>{var n;w=!1,(n=C.complete)===null||n===void 0||n.call(C),e.complete()},n=>{var T;w=!1,(T=C.error)===null||T===void 0||T.call(C,n),e.error(n)},()=>{var n,T;w&&((n=C.unsubscribe)===null||n===void 0||n.call(C)),(T=C.finalize)===null||T===void 0||T.call(C)}))}):Ws}var Zr=class extends Error{constructor(Y,ue){super(qm(Y,ue)),this.code=Y}};function qm(q,Y){return`${`NG0${Math.abs(q)}`}${Y?": "+Y:""}`}function Zp(q){return{toString:q}.toString()}var Ph=globalThis;function ao(q){for(let Y in q)if(q[Y]===ao)return Y;throw Error("Could not find renamed property on target object.")}function Zs(q){if(typeof q=="string")return q;if(Array.isArray(q))return"["+q.map(Zs).join(", ")+"]";if(q==null)return""+q;if(q.overriddenName)return`${q.overriddenName}`;if(q.name)return`${q.name}`;let Y=q.toString();if(Y==null)return""+Y;let ue=Y.indexOf(`
`);return ue===-1?Y:Y.substring(0,ue)}function Vx(q,Y){return q==null||q===""?Y===null?"":Y:Y==null||Y===""?q:q+" "+Y}var r5=ao({__forward_ref__:ao});function Gm(q){return q.__forward_ref__=Gm,q.toString=function(){return Zs(this())},q}function cs(q){return x2(q)?q():q}function x2(q){return typeof q=="function"&&q.hasOwnProperty(r5)&&q.__forward_ref__===Gm}function Yr(q){return{token:q.token,providedIn:q.providedIn||null,factory:q.factory,value:void 0}}function bl(q){return{providers:q.providers||[],imports:q.imports||[]}}function Xp(q){return Ux(q,_2)||Ux(q,w2)}function b2(q){return Xp(q)!==null}function Ux(q,Y){return q.hasOwnProperty(Y)?q[Y]:null}function i5(q){let Y=q&&(q[_2]||q[w2]);return Y||null}function Hx(q){return q&&(q.hasOwnProperty(qx)||q.hasOwnProperty(o5))?q[qx]:null}var _2=ao({\u0275prov:ao}),qx=ao({\u0275inj:ao}),w2=ao({ngInjectableDef:ao}),o5=ao({ngInjectorDef:ao}),pi=class{constructor(Y,ue){this._desc=Y,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof ue=="number"?this.__NG_ELEMENT_ID__=ue:ue!==void 0&&(this.\u0275prov=Yr({token:this,providedIn:ue.providedIn||"root",factory:ue.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function T2(q){return q&&!!q.\u0275providers}var a5=ao({\u0275cmp:ao}),s5=ao({\u0275dir:ao}),l5=ao({\u0275pipe:ao}),u5=ao({\u0275mod:ao}),Pp=ao({\u0275fac:ao}),Rh=ao({__NG_ELEMENT_ID__:ao}),Gx=ao({__NG_ENV_ID__:ao});function c5(q){return typeof q=="string"?q:q==null?"":String(q)}function f5(q){return typeof q=="function"?q.name||q.toString():typeof q=="object"&&q!=null&&typeof q.type=="function"?q.type.name||q.type.toString():c5(q)}function h5(q,Y){let ue=Y?`. Dependency path: ${Y.join(" > ")} > ${q}`:"";throw new Zr(-200,q)}function Wm(q,Y){throw new Zr(-201,!1)}var ci=function(q){return q[q.Default=0]="Default",q[q.Host=1]="Host",q[q.Self=2]="Self",q[q.SkipSelf=4]="SkipSelf",q[q.Optional=8]="Optional",q}(ci||{}),im;function M2(){return im}function yl(q){let Y=im;return im=q,Y}function A2(q,Y,ue){let C=Xp(q);if(C&&C.providedIn=="root")return C.value===void 0?C.value=C.factory():C.value;if(ue&ci.Optional)return null;if(Y!==void 0)return Y;Wm(q,"Injector")}var d5={},Fh=d5,p5="__NG_DI_FLAG__",Rp="ngTempTokenPath",g5="ngTokenPath",m5=/\n/gm,v5="\u0275",Wx="__source",Df;function y5(){return Df}function ec(q){let Y=Df;return Df=q,Y}function x5(q,Y=ci.Default){if(Df===void 0)throw new Zr(-203,!1);return Df===null?A2(q,void 0,Y):Df.get(q,Y&ci.Optional?null:void 0,Y)}function yi(q,Y=ci.Default){return(M2()||x5)(cs(q),Y)}function Nr(q,Y=ci.Default){return yi(q,Kp(Y))}function Kp(q){return typeof q>"u"||typeof q=="number"?q:0|(q.optional&&8)|(q.host&&1)|(q.self&&2)|(q.skipSelf&&4)}function om(q){let Y=[];for(let ue=0;ue<q.length;ue++){let C=cs(q[ue]);if(Array.isArray(C)){if(C.length===0)throw new Zr(900,!1);let A,e=ci.Default;for(let v=0;v<C.length;v++){let w=C[v],n=b5(w);typeof n=="number"?n===-1?A=w.token:e|=n:A=w}Y.push(yi(A,e))}else Y.push(yi(C))}return Y}function b5(q){return q[p5]}function _5(q,Y,ue,C){let A=q[Rp];throw Y[Wx]&&A.unshift(Y[Wx]),q.message=w5(`
`+q.message,A,ue,C),q[g5]=A,q[Rp]=null,q}function w5(q,Y,ue,C=null){q=q&&q.charAt(0)===`
`&&q.charAt(1)==v5?q.slice(2):q;let A=Zs(Y);if(Array.isArray(Y))A=Y.map(Zs).join(" -> ");else if(typeof Y=="object"){let e=[];for(let v in Y)if(Y.hasOwnProperty(v)){let w=Y[v];e.push(v+":"+(typeof w=="string"?JSON.stringify(w):Zs(w)))}A=`{${e.join(", ")}}`}return`${ue}${C?"("+C+")":""}[${A}]: ${q.replace(m5,`
  `)}`}function Lf(q,Y){let ue=q.hasOwnProperty(Pp);return ue?q[Pp]:null}function T5(q,Y,ue){if(q.length!==Y.length)return!1;for(let C=0;C<q.length;C++){let A=q[C],e=Y[C];if(ue&&(A=ue(A),e=ue(e)),e!==A)return!1}return!0}function M5(q){return q.flat(Number.POSITIVE_INFINITY)}function Ym(q,Y){q.forEach(ue=>Array.isArray(ue)?Ym(ue,Y):Y(ue))}function k2(q,Y,ue){Y>=q.length?q.push(ue):q.splice(Y,0,ue)}function Fp(q,Y){return Y>=q.length-1?q.pop():q.splice(Y,1)[0]}function A5(q,Y){let ue=[];for(let C=0;C<q;C++)ue.push(Y);return ue}var Nh={},uu=[],Of=new pi(""),S2=new pi("",-1),E2=new pi(""),Np=class{get(Y,ue=Fh){if(ue===Fh){let C=new Error(`NullInjectorError: No provider for ${Zs(Y)}!`);throw C.name="NullInjectorError",C}return ue}},C2=function(q){return q[q.OnPush=0]="OnPush",q[q.Default=1]="Default",q}(C2||{}),fu=function(q){return q[q.Emulated=0]="Emulated",q[q.None=2]="None",q[q.ShadowDom=3]="ShadowDom",q}(fu||{}),Lu=function(q){return q[q.None=0]="None",q[q.SignalBased=1]="SignalBased",q[q.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",q}(Lu||{});function k5(q,Y,ue){let C=q.length;for(;;){let A=q.indexOf(Y,ue);if(A===-1)return A;if(A===0||q.charCodeAt(A-1)<=32){let e=Y.length;if(A+e===C||q.charCodeAt(A+e)<=32)return A}ue=A+1}}function am(q,Y,ue){let C=0;for(;C<ue.length;){let A=ue[C];if(typeof A=="number"){if(A!==0)break;C++;let e=ue[C++],v=ue[C++],w=ue[C++];q.setAttribute(Y,v,w,e)}else{let e=A,v=ue[++C];E5(e)?q.setProperty(Y,e,v):q.setAttribute(Y,e,v),C++}}return C}function S5(q){return q===3||q===4||q===6}function E5(q){return q.charCodeAt(0)===64}function $m(q,Y){if(!(Y===null||Y.length===0))if(q===null||q.length===0)q=Y.slice();else{let ue=-1;for(let C=0;C<Y.length;C++){let A=Y[C];typeof A=="number"?ue=A:ue===0||(ue===-1||ue===2?Yx(q,ue,A,null,Y[++C]):Yx(q,ue,A,null,null))}}return q}function Yx(q,Y,ue,C,A){let e=0,v=q.length;if(Y===-1)v=-1;else for(;e<q.length;){let w=q[e++];if(typeof w=="number"){if(w===Y){v=-1;break}else if(w>Y){v=e-1;break}}}for(;e<q.length;){let w=q[e];if(typeof w=="number")break;if(w===ue){if(C===null){A!==null&&(q[e+1]=A);return}else if(C===q[e+1]){q[e+2]=A;return}}e++,C!==null&&e++,A!==null&&e++}v!==-1&&(q.splice(v,0,Y),e=v+1),q.splice(e++,0,ue),C!==null&&q.splice(e++,0,C),A!==null&&q.splice(e++,0,A)}var D2="ng-template";function C5(q,Y,ue,C){let A=0;if(C){for(;A<Y.length&&typeof Y[A]=="string";A+=2)if(Y[A]==="class"&&k5(Y[A+1].toLowerCase(),ue,0)!==-1)return!0}else if(Zm(q))return!1;if(A=Y.indexOf(1,A),A>-1){let e;for(;++A<Y.length&&typeof(e=Y[A])=="string";)if(e.toLowerCase()===ue)return!0}return!1}function Zm(q){return q.type===4&&q.value!==D2}function D5(q,Y,ue){let C=q.type===4&&!ue?D2:q.value;return Y===C}function I5(q,Y,ue){let C=4,A=q.attrs,e=A!==null?P5(A):0,v=!1;for(let w=0;w<Y.length;w++){let n=Y[w];if(typeof n=="number"){if(!v&&!Gl(C)&&!Gl(n))return!1;if(v&&Gl(n))continue;v=!1,C=n|C&1;continue}if(!v)if(C&4){if(C=2|C&1,n!==""&&!D5(q,n,ue)||n===""&&Y.length===1){if(Gl(C))return!1;v=!0}}else if(C&8){if(A===null||!C5(q,A,n,ue)){if(Gl(C))return!1;v=!0}}else{let T=Y[++w],x=L5(n,A,Zm(q),ue);if(x===-1){if(Gl(C))return!1;v=!0;continue}if(T!==""){let f;if(x>e?f="":f=A[x+1].toLowerCase(),C&2&&T!==f){if(Gl(C))return!1;v=!0}}}}return Gl(C)||v}function Gl(q){return(q&1)===0}function L5(q,Y,ue,C){if(Y===null)return-1;let A=0;if(C||!ue){let e=!1;for(;A<Y.length;){let v=Y[A];if(v===q)return A;if(v===3||v===6)e=!0;else if(v===1||v===2){let w=Y[++A];for(;typeof w=="string";)w=Y[++A];continue}else{if(v===4)break;if(v===0){A+=4;continue}}A+=e?1:2}return-1}else return R5(Y,q)}function I2(q,Y,ue=!1){for(let C=0;C<Y.length;C++)if(I5(q,Y[C],ue))return!0;return!1}function O5(q){let Y=q.attrs;if(Y!=null){let ue=Y.indexOf(5);if(!(ue&1))return Y[ue+1]}return null}function P5(q){for(let Y=0;Y<q.length;Y++){let ue=q[Y];if(S5(ue))return Y}return q.length}function R5(q,Y){let ue=q.indexOf(4);if(ue>-1)for(ue++;ue<q.length;){let C=q[ue];if(typeof C=="number")return-1;if(C===Y)return ue;ue++}return-1}function F5(q,Y){e:for(let ue=0;ue<Y.length;ue++){let C=Y[ue];if(q.length===C.length){for(let A=0;A<q.length;A++)if(q[A]!==C[A])continue e;return!0}}return!1}function $x(q,Y){return q?":not("+Y.trim()+")":Y}function N5(q){let Y=q[0],ue=1,C=2,A="",e=!1;for(;ue<q.length;){let v=q[ue];if(typeof v=="string")if(C&2){let w=q[++ue];A+="["+v+(w.length>0?'="'+w+'"':"")+"]"}else C&8?A+="."+v:C&4&&(A+=" "+v);else A!==""&&!Gl(v)&&(Y+=$x(e,A),A=""),C=v,e=e||!Gl(C);ue++}return A!==""&&(Y+=$x(e,A)),Y}function z5(q){return q.map(N5).join(",")}function B5(q){let Y=[],ue=[],C=1,A=2;for(;C<q.length;){let e=q[C];if(typeof e=="string")A===2?e!==""&&Y.push(e,q[++C]):A===8&&ue.push(e);else{if(!Gl(A))break;A=e}C++}return{attrs:Y,classes:ue}}function $l(q){return Zp(()=>{let Y=F2(q),ue=bo(Fr({},Y),{decls:q.decls,vars:q.vars,template:q.template,consts:q.consts||null,ngContentSelectors:q.ngContentSelectors,onPush:q.changeDetection===C2.OnPush,directiveDefs:null,pipeDefs:null,dependencies:Y.standalone&&q.dependencies||null,getStandaloneInjector:null,signals:q.signals??!1,data:q.data||{},encapsulation:q.encapsulation||fu.Emulated,styles:q.styles||uu,_:null,schemas:q.schemas||null,tView:null,id:""});N2(ue);let C=q.dependencies;return ue.directiveDefs=Xx(C,!1),ue.pipeDefs=Xx(C,!0),ue.id=U5(ue),ue})}function j5(q){return Ic(q)||L2(q)}function V5(q){return q!==null}function _l(q){return Zp(()=>({type:q.type,bootstrap:q.bootstrap||uu,declarations:q.declarations||uu,imports:q.imports||uu,exports:q.exports||uu,transitiveCompileScopes:null,schemas:q.schemas||null,id:q.id||null}))}function Zx(q,Y){if(q==null)return Nh;let ue={};for(let C in q)if(q.hasOwnProperty(C)){let A=q[C],e,v,w=Lu.None;Array.isArray(A)?(w=A[0],e=A[1],v=A[2]??e):(e=A,v=A),Y?(ue[e]=w!==Lu.None?[C,w]:C,Y[e]=v):ue[e]=C}return ue}function Jp(q){return Zp(()=>{let Y=F2(q);return N2(Y),Y})}function Ic(q){return q[a5]||null}function L2(q){return q[s5]||null}function O2(q){return q[l5]||null}function P2(q){let Y=Ic(q)||L2(q)||O2(q);return Y!==null?Y.standalone:!1}function R2(q,Y){let ue=q[u5]||null;if(!ue&&Y===!0)throw new Error(`Type ${Zs(q)} does not have '\u0275mod' property.`);return ue}function F2(q){let Y={};return{type:q.type,providersResolver:null,factory:null,hostBindings:q.hostBindings||null,hostVars:q.hostVars||0,hostAttrs:q.hostAttrs||null,contentQueries:q.contentQueries||null,declaredInputs:Y,inputTransforms:null,inputConfig:q.inputs||Nh,exportAs:q.exportAs||null,standalone:q.standalone===!0,signals:q.signals===!0,selectors:q.selectors||uu,viewQuery:q.viewQuery||null,features:q.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Zx(q.inputs,Y),outputs:Zx(q.outputs),debugInfo:null}}function N2(q){q.features?.forEach(Y=>Y(q))}function Xx(q,Y){if(!q)return null;let ue=Y?O2:j5;return()=>(typeof q=="function"?q():q).map(C=>ue(C)).filter(V5)}function U5(q){let Y=0,ue=[q.selectors,q.ngContentSelectors,q.hostVars,q.hostAttrs,q.consts,q.vars,q.decls,q.encapsulation,q.standalone,q.signals,q.exportAs,JSON.stringify(q.inputs),JSON.stringify(q.outputs),Object.getOwnPropertyNames(q.type.prototype),!!q.contentQueries,!!q.viewQuery].join("|");for(let A of ue)Y=Math.imul(31,Y)+A.charCodeAt(0)<<0;return Y+=2147483648,"c"+Y}function Qp(q){return{\u0275providers:q}}function H5(...q){return{\u0275providers:z2(!0,q),\u0275fromNgModule:!0}}function z2(q,...Y){let ue=[],C=new Set,A,e=v=>{ue.push(v)};return Ym(Y,v=>{let w=v;sm(w,e,[],C)&&(A||=[],A.push(w))}),A!==void 0&&B2(A,e),ue}function B2(q,Y){for(let ue=0;ue<q.length;ue++){let{ngModule:C,providers:A}=q[ue];Xm(A,e=>{Y(e,C)})}}function sm(q,Y,ue,C){if(q=cs(q),!q)return!1;let A=null,e=Hx(q),v=!e&&Ic(q);if(!e&&!v){let n=q.ngModule;if(e=Hx(n),e)A=n;else return!1}else{if(v&&!v.standalone)return!1;A=q}let w=C.has(A);if(v){if(w)return!1;if(C.add(A),v.dependencies){let n=typeof v.dependencies=="function"?v.dependencies():v.dependencies;for(let T of n)sm(T,Y,ue,C)}}else if(e){if(e.imports!=null&&!w){C.add(A);let T;try{Ym(e.imports,x=>{sm(x,Y,ue,C)&&(T||=[],T.push(x))})}finally{}T!==void 0&&B2(T,Y)}if(!w){let T=Lf(A)||(()=>new A);Y({provide:A,useFactory:T,deps:uu},A),Y({provide:E2,useValue:A,multi:!0},A),Y({provide:Of,useValue:()=>yi(A),multi:!0},A)}let n=e.providers;if(n!=null&&!w){let T=q;Xm(n,x=>{Y(x,T)})}}else return!1;return A!==q&&q.providers!==void 0}function Xm(q,Y){for(let ue of q)T2(ue)&&(ue=ue.\u0275providers),Array.isArray(ue)?Xm(ue,Y):Y(ue)}var q5=ao({provide:String,useValue:ao});function j2(q){return q!==null&&typeof q=="object"&&q5 in q}function G5(q){return!!(q&&q.useExisting)}function W5(q){return!!(q&&q.useFactory)}function Pf(q){return typeof q=="function"}function Y5(q){return!!q.useClass}var e0=new pi(""),Ep={},$5={},Wg;function Km(){return Wg===void 0&&(Wg=new Np),Wg}var xl=class{},zh=class extends xl{get destroyed(){return this._destroyed}constructor(Y,ue,C,A){super(),this.parent=ue,this.source=C,this.scopes=A,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,um(Y,v=>this.processProvider(v)),this.records.set(S2,Sf(void 0,this)),A.has("environment")&&this.records.set(xl,Sf(void 0,this));let e=this.records.get(e0);e!=null&&typeof e.value=="string"&&this.scopes.add(e.value),this.injectorDefTypes=new Set(this.get(E2,uu,ci.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let Y=Ji(null);try{for(let C of this._ngOnDestroyHooks)C.ngOnDestroy();let ue=this._onDestroyHooks;this._onDestroyHooks=[];for(let C of ue)C()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ji(Y)}}onDestroy(Y){return this.assertNotDestroyed(),this._onDestroyHooks.push(Y),()=>this.removeOnDestroy(Y)}runInContext(Y){this.assertNotDestroyed();let ue=ec(this),C=yl(void 0),A;try{return Y()}finally{ec(ue),yl(C)}}get(Y,ue=Fh,C=ci.Default){if(this.assertNotDestroyed(),Y.hasOwnProperty(Gx))return Y[Gx](this);C=Kp(C);let A,e=ec(this),v=yl(void 0);try{if(!(C&ci.SkipSelf)){let n=this.records.get(Y);if(n===void 0){let T=Q5(Y)&&Xp(Y);T&&this.injectableDefInScope(T)?n=Sf(lm(Y),Ep):n=null,this.records.set(Y,n)}if(n!=null)return this.hydrate(Y,n)}let w=C&ci.Self?Km():this.parent;return ue=C&ci.Optional&&ue===Fh?null:ue,w.get(Y,ue)}catch(w){if(w.name==="NullInjectorError"){if((w[Rp]=w[Rp]||[]).unshift(Zs(Y)),e)throw w;return _5(w,Y,"R3InjectorError",this.source)}else throw w}finally{yl(v),ec(e)}}resolveInjectorInitializers(){let Y=Ji(null),ue=ec(this),C=yl(void 0),A;try{let e=this.get(Of,uu,ci.Self);for(let v of e)v()}finally{ec(ue),yl(C),Ji(Y)}}toString(){let Y=[],ue=this.records;for(let C of ue.keys())Y.push(Zs(C));return`R3Injector[${Y.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Zr(205,!1)}processProvider(Y){Y=cs(Y);let ue=Pf(Y)?Y:cs(Y&&Y.provide),C=X5(Y);if(!Pf(Y)&&Y.multi===!0){let A=this.records.get(ue);A||(A=Sf(void 0,Ep,!0),A.factory=()=>om(A.multi),this.records.set(ue,A)),ue=Y,A.multi.push(Y)}this.records.set(ue,C)}hydrate(Y,ue){let C=Ji(null);try{return ue.value===Ep&&(ue.value=$5,ue.value=ue.factory()),typeof ue.value=="object"&&ue.value&&J5(ue.value)&&this._ngOnDestroyHooks.add(ue.value),ue.value}finally{Ji(C)}}injectableDefInScope(Y){if(!Y.providedIn)return!1;let ue=cs(Y.providedIn);return typeof ue=="string"?ue==="any"||this.scopes.has(ue):this.injectorDefTypes.has(ue)}removeOnDestroy(Y){let ue=this._onDestroyHooks.indexOf(Y);ue!==-1&&this._onDestroyHooks.splice(ue,1)}};function lm(q){let Y=Xp(q),ue=Y!==null?Y.factory:Lf(q);if(ue!==null)return ue;if(q instanceof pi)throw new Zr(204,!1);if(q instanceof Function)return Z5(q);throw new Zr(204,!1)}function Z5(q){if(q.length>0)throw new Zr(204,!1);let ue=i5(q);return ue!==null?()=>ue.factory(q):()=>new q}function X5(q){if(j2(q))return Sf(void 0,q.useValue);{let Y=V2(q);return Sf(Y,Ep)}}function V2(q,Y,ue){let C;if(Pf(q)){let A=cs(q);return Lf(A)||lm(A)}else if(j2(q))C=()=>cs(q.useValue);else if(W5(q))C=()=>q.useFactory(...om(q.deps||[]));else if(G5(q))C=()=>yi(cs(q.useExisting));else{let A=cs(q&&(q.useClass||q.provide));if(K5(q))C=()=>new A(...om(q.deps));else return Lf(A)||lm(A)}return C}function Sf(q,Y,ue=!1){return{factory:q,value:Y,multi:ue?[]:void 0}}function K5(q){return!!q.deps}function J5(q){return q!==null&&typeof q=="object"&&typeof q.ngOnDestroy=="function"}function Q5(q){return typeof q=="function"||typeof q=="object"&&q instanceof pi}function um(q,Y){for(let ue of q)Array.isArray(ue)?um(ue,Y):ue&&T2(ue)?um(ue.\u0275providers,Y):Y(ue)}function zc(q,Y){q instanceof zh&&q.assertNotDestroyed();let ue,C=ec(q),A=yl(void 0);try{return Y()}finally{ec(C),yl(A)}}function eT(){return M2()!==void 0||y5()!=null}function tT(q){return typeof q=="function"}var Ru=0,li=1,Gr=2,Oa=3,Wl=4,Js=5,Bh=6,zp=7,rc=8,Rf=9,hu=10,Ks=11,jh=12,Kx=13,Yh=14,Yl=15,$h=16,Ef=17,Ou=18,t0=19,U2=20,nc=21,Yg=22,Lc=23,ic=25,H2=1;var Oc=7,Bp=8,Ff=9,Xs=10,Jm=function(q){return q[q.None=0]="None",q[q.HasTransplantedViews=2]="HasTransplantedViews",q}(Jm||{});function Cc(q){return Array.isArray(q)&&typeof q[H2]=="object"}function Fu(q){return Array.isArray(q)&&q[H2]===!0}function q2(q){return(q.flags&4)!==0}function n0(q){return q.componentOffset>-1}function nT(q){return(q.flags&1)===1}function zf(q){return!!q.template}function rT(q){return(q[Gr]&512)!==0}var cm=class{constructor(Y,ue,C){this.previousValue=Y,this.currentValue=ue,this.firstChange=C}isFirstChange(){return this.firstChange}};function G2(q,Y,ue,C){Y!==null?Y.applyValueToInputSignal(Y,C):q[ue]=C}function Bf(){return W2}function W2(q){return q.type.prototype.ngOnChanges&&(q.setInput=oT),iT}Bf.ngInherit=!0;function iT(){let q=$2(this),Y=q?.current;if(Y){let ue=q.previous;if(ue===Nh)q.previous=Y;else for(let C in Y)ue[C]=Y[C];q.current=null,this.ngOnChanges(Y)}}function oT(q,Y,ue,C,A){let e=this.declaredInputs[C],v=$2(q)||aT(q,{previous:Nh,current:null}),w=v.current||(v.current={}),n=v.previous,T=n[e];w[e]=new cm(T&&T.currentValue,ue,n===Nh),G2(q,Y,A,ue)}var Y2="__ngSimpleChanges__";function $2(q){return q[Y2]||null}function aT(q,Y){return q[Y2]=Y}var Jx=null;var tc=function(q,Y,ue){Jx?.(q,Y,ue)},Z2="svg",sT="math",lT=!1;function uT(){return lT}function oc(q){for(;Array.isArray(q);)q=q[Ru];return q}function du(q,Y){return oc(Y[q.index])}function X2(q,Y){return q.data[Y]}function Bc(q,Y){let ue=Y[q];return Cc(ue)?ue:ue[Ru]}function cT(q){return(q[Gr]&4)===4}function Qm(q){return(q[Gr]&128)===128}function fT(q){return Fu(q[Oa])}function Qx(q,Y){return Y==null?null:q[Y]}function K2(q){q[Ef]=0}function hT(q){q[Gr]&1024||(q[Gr]|=1024,Qm(q)&&Vh(q))}function ev(q){return!!(q[Gr]&9216||q[Lc]?.dirty)}function fm(q){q[hu].changeDetectionScheduler?.notify(1),ev(q)?Vh(q):q[Gr]&64&&(uT()?(q[Gr]|=1024,Vh(q)):q[hu].changeDetectionScheduler?.notify())}function Vh(q){q[hu].changeDetectionScheduler?.notify();let Y=Uh(q);for(;Y!==null&&!(Y[Gr]&8192||(Y[Gr]|=8192,!Qm(Y)));)Y=Uh(Y)}function J2(q,Y){if((q[Gr]&256)===256)throw new Zr(911,!1);q[nc]===null&&(q[nc]=[]),q[nc].push(Y)}function dT(q,Y){if(q[nc]===null)return;let ue=q[nc].indexOf(Y);ue!==-1&&q[nc].splice(ue,1)}function Uh(q){let Y=q[Oa];return Fu(Y)?Y[Oa]:Y}var Ri={lFrame:sb(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function pT(){return Ri.lFrame.elementDepthCount}function gT(){Ri.lFrame.elementDepthCount++}function mT(){Ri.lFrame.elementDepthCount--}function Q2(){return Ri.bindingsEnabled}function eb(){return Ri.skipHydrationRootTNode!==null}function vT(q){return Ri.skipHydrationRootTNode===q}function yT(){Ri.skipHydrationRootTNode=null}function Uo(){return Ri.lFrame.lView}function pu(){return Ri.lFrame.tView}function Zl(){let q=tb();for(;q!==null&&q.type===64;)q=q.parent;return q}function tb(){return Ri.lFrame.currentTNode}function xT(){let q=Ri.lFrame,Y=q.currentTNode;return q.isParent?Y:Y.parent}function r0(q,Y){let ue=Ri.lFrame;ue.currentTNode=q,ue.isParent=Y}function nb(){return Ri.lFrame.isParent}function rb(){Ri.lFrame.isParent=!1}function bT(q){return Ri.lFrame.bindingIndex=q}function _T(){return Ri.lFrame.bindingIndex++}function wT(){return Ri.lFrame.inI18n}function TT(q,Y){let ue=Ri.lFrame;ue.bindingIndex=ue.bindingRootIndex=q,hm(Y)}function MT(){return Ri.lFrame.currentDirectiveIndex}function hm(q){Ri.lFrame.currentDirectiveIndex=q}function ib(){return Ri.lFrame.currentQueryIndex}function tv(q){Ri.lFrame.currentQueryIndex=q}function AT(q){let Y=q[li];return Y.type===2?Y.declTNode:Y.type===1?q[Js]:null}function ob(q,Y,ue){if(ue&ci.SkipSelf){let A=Y,e=q;for(;A=A.parent,A===null&&!(ue&ci.Host);)if(A=AT(e),A===null||(e=e[Yh],A.type&10))break;if(A===null)return!1;Y=A,q=e}let C=Ri.lFrame=ab();return C.currentTNode=Y,C.lView=q,!0}function nv(q){let Y=ab(),ue=q[li];Ri.lFrame=Y,Y.currentTNode=ue.firstChild,Y.lView=q,Y.tView=ue,Y.contextLView=q,Y.bindingIndex=ue.bindingStartIndex,Y.inI18n=!1}function ab(){let q=Ri.lFrame,Y=q===null?null:q.child;return Y===null?sb(q):Y}function sb(q){let Y={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:q,child:null,inI18n:!1};return q!==null&&(q.child=Y),Y}function lb(){let q=Ri.lFrame;return Ri.lFrame=q.parent,q.currentTNode=null,q.lView=null,q}var ub=lb;function rv(){let q=lb();q.isParent=!0,q.tView=null,q.selectedIndex=-1,q.contextLView=null,q.elementDepthCount=0,q.currentDirectiveIndex=-1,q.currentNamespace=null,q.bindingRootIndex=-1,q.bindingIndex=-1,q.currentQueryIndex=0}function cb(){return Ri.lFrame.selectedIndex}function Pc(q){Ri.lFrame.selectedIndex=q}function kT(){let q=Ri.lFrame;return X2(q.tView,q.selectedIndex)}function Zh(){Ri.lFrame.currentNamespace=Z2}function Xh(){ST()}function ST(){Ri.lFrame.currentNamespace=null}function ET(){return Ri.lFrame.currentNamespace}var fb=!0;function hb(){return fb}function db(q){fb=q}function CT(q,Y,ue){let{ngOnChanges:C,ngOnInit:A,ngDoCheck:e}=Y.type.prototype;if(C){let v=W2(Y);(ue.preOrderHooks??=[]).push(q,v),(ue.preOrderCheckHooks??=[]).push(q,v)}A&&(ue.preOrderHooks??=[]).push(0-q,A),e&&((ue.preOrderHooks??=[]).push(q,e),(ue.preOrderCheckHooks??=[]).push(q,e))}function pb(q,Y){for(let ue=Y.directiveStart,C=Y.directiveEnd;ue<C;ue++){let e=q.data[ue].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:n,ngAfterViewChecked:T,ngOnDestroy:x}=e;v&&(q.contentHooks??=[]).push(-ue,v),w&&((q.contentHooks??=[]).push(ue,w),(q.contentCheckHooks??=[]).push(ue,w)),n&&(q.viewHooks??=[]).push(-ue,n),T&&((q.viewHooks??=[]).push(ue,T),(q.viewCheckHooks??=[]).push(ue,T)),x!=null&&(q.destroyHooks??=[]).push(ue,x)}}function Cp(q,Y,ue){gb(q,Y,3,ue)}function Dp(q,Y,ue,C){(q[Gr]&3)===ue&&gb(q,Y,ue,C)}function $g(q,Y){let ue=q[Gr];(ue&3)===Y&&(ue&=16383,ue+=1,q[Gr]=ue)}function gb(q,Y,ue,C){let A=C!==void 0?q[Ef]&65535:0,e=C??-1,v=Y.length-1,w=0;for(let n=A;n<v;n++)if(typeof Y[n+1]=="number"){if(w=Y[n],C!=null&&w>=C)break}else Y[n]<0&&(q[Ef]+=65536),(w<e||e==-1)&&(DT(q,ue,Y,n),q[Ef]=(q[Ef]&4294901760)+n+2),n++}function e2(q,Y){tc(4,q,Y);let ue=Ji(null);try{Y.call(q)}finally{Ji(ue),tc(5,q,Y)}}function DT(q,Y,ue,C){let A=ue[C]<0,e=ue[C+1],v=A?-ue[C]:ue[C],w=q[v];A?q[Gr]>>14<q[Ef]>>16&&(q[Gr]&3)===Y&&(q[Gr]+=16384,e2(w,e)):e2(w,e)}var If=-1,Rc=class{constructor(Y,ue,C){this.factory=Y,this.resolving=!1,this.canSeeViewProviders=ue,this.injectImpl=C}};function IT(q){return q instanceof Rc}function LT(q){return(q.flags&8)!==0}function OT(q){return(q.flags&16)!==0}function mb(q){return q!==If}function jp(q){return q&32767}function PT(q){return q>>16}function Vp(q,Y){let ue=PT(q),C=Y;for(;ue>0;)C=C[Yh],ue--;return C}var dm=!0;function t2(q){let Y=dm;return dm=q,Y}var RT=256,vb=RT-1,yb=5,FT=0,cu={};function NT(q,Y,ue){let C;typeof ue=="string"?C=ue.charCodeAt(0)||0:ue.hasOwnProperty(Rh)&&(C=ue[Rh]),C==null&&(C=ue[Rh]=FT++);let A=C&vb,e=1<<A;Y.data[q+(A>>yb)]|=e}function Up(q,Y){let ue=xb(q,Y);if(ue!==-1)return ue;let C=Y[li];C.firstCreatePass&&(q.injectorIndex=Y.length,Zg(C.data,q),Zg(Y,null),Zg(C.blueprint,null));let A=iv(q,Y),e=q.injectorIndex;if(mb(A)){let v=jp(A),w=Vp(A,Y),n=w[li].data;for(let T=0;T<8;T++)Y[e+T]=w[v+T]|n[v+T]}return Y[e+8]=A,e}function Zg(q,Y){q.push(0,0,0,0,0,0,0,0,Y)}function xb(q,Y){return q.injectorIndex===-1||q.parent&&q.parent.injectorIndex===q.injectorIndex||Y[q.injectorIndex+8]===null?-1:q.injectorIndex}function iv(q,Y){if(q.parent&&q.parent.injectorIndex!==-1)return q.parent.injectorIndex;let ue=0,C=null,A=Y;for(;A!==null;){if(C=Mb(A),C===null)return If;if(ue++,A=A[Yh],C.injectorIndex!==-1)return C.injectorIndex|ue<<16}return If}function pm(q,Y,ue){NT(q,Y,ue)}function bb(q,Y,ue){if(ue&ci.Optional||q!==void 0)return q;Wm(Y,"NodeInjector")}function _b(q,Y,ue,C){if(ue&ci.Optional&&C===void 0&&(C=null),!(ue&(ci.Self|ci.Host))){let A=q[Rf],e=yl(void 0);try{return A?A.get(Y,C,ue&ci.Optional):A2(Y,C,ue&ci.Optional)}finally{yl(e)}}return bb(C,Y,ue)}function wb(q,Y,ue,C=ci.Default,A){if(q!==null){if(Y[Gr]&2048&&!(C&ci.Self)){let v=VT(q,Y,ue,C,cu);if(v!==cu)return v}let e=Tb(q,Y,ue,C,cu);if(e!==cu)return e}return _b(Y,ue,C,A)}function Tb(q,Y,ue,C,A){let e=BT(ue);if(typeof e=="function"){if(!ob(Y,q,C))return C&ci.Host?bb(A,ue,C):_b(Y,ue,C,A);try{let v;if(v=e(C),v==null&&!(C&ci.Optional))Wm(ue);else return v}finally{ub()}}else if(typeof e=="number"){let v=null,w=xb(q,Y),n=If,T=C&ci.Host?Y[Yl][Js]:null;for((w===-1||C&ci.SkipSelf)&&(n=w===-1?iv(q,Y):Y[w+8],n===If||!r2(C,!1)?w=-1:(v=Y[li],w=jp(n),Y=Vp(n,Y)));w!==-1;){let x=Y[li];if(n2(e,w,x.data)){let f=zT(w,Y,ue,v,C,T);if(f!==cu)return f}n=Y[w+8],n!==If&&r2(C,Y[li].data[w+8]===T)&&n2(e,w,Y)?(v=x,w=jp(n),Y=Vp(n,Y)):w=-1}}return A}function zT(q,Y,ue,C,A,e){let v=Y[li],w=v.data[q+8],n=C==null?n0(w)&&dm:C!=v&&(w.type&3)!==0,T=A&ci.Host&&e===w,x=Ip(w,v,ue,n,T);return x!==null?Fc(Y,v,x,w):cu}function Ip(q,Y,ue,C,A){let e=q.providerIndexes,v=Y.data,w=e&1048575,n=q.directiveStart,T=q.directiveEnd,x=e>>20,f=C?w:w+x,s=A?w+x:T;for(let t=f;t<s;t++){let o=v[t];if(t<n&&ue===o||t>=n&&o.type===ue)return t}if(A){let t=v[n];if(t&&zf(t)&&t.type===ue)return n}return null}function Fc(q,Y,ue,C){let A=q[ue],e=Y.data;if(IT(A)){let v=A;v.resolving&&h5(f5(e[ue]));let w=t2(v.canSeeViewProviders);v.resolving=!0;let n,T=v.injectImpl?yl(v.injectImpl):null,x=ob(q,C,ci.Default);try{A=q[ue]=v.factory(void 0,e,q,C),Y.firstCreatePass&&ue>=C.directiveStart&&CT(ue,e[ue],Y)}finally{T!==null&&yl(T),t2(w),v.resolving=!1,ub()}}return A}function BT(q){if(typeof q=="string")return q.charCodeAt(0)||0;let Y=q.hasOwnProperty(Rh)?q[Rh]:void 0;return typeof Y=="number"?Y>=0?Y&vb:jT:Y}function n2(q,Y,ue){let C=1<<q;return!!(ue[Y+(q>>yb)]&C)}function r2(q,Y){return!(q&ci.Self)&&!(q&ci.Host&&Y)}var Dc=class{constructor(Y,ue){this._tNode=Y,this._lView=ue}get(Y,ue,C){return wb(this._tNode,this._lView,Y,Kp(C),ue)}};function jT(){return new Dc(Zl(),Uo())}function i0(q){return Zp(()=>{let Y=q.prototype.constructor,ue=Y[Pp]||gm(Y),C=Object.prototype,A=Object.getPrototypeOf(q.prototype).constructor;for(;A&&A!==C;){let e=A[Pp]||gm(A);if(e&&e!==ue)return e;A=Object.getPrototypeOf(A)}return e=>new e})}function gm(q){return x2(q)?()=>{let Y=gm(cs(q));return Y&&Y()}:Lf(q)}function VT(q,Y,ue,C,A){let e=q,v=Y;for(;e!==null&&v!==null&&v[Gr]&2048&&!(v[Gr]&512);){let w=Tb(e,v,ue,C|ci.Self,cu);if(w!==cu)return w;let n=e.parent;if(!n){let T=v[U2];if(T){let x=T.get(ue,cu,C);if(x!==cu)return x}n=Mb(v),v=v[Yh]}e=n}return A}function Mb(q){let Y=q[li],ue=Y.type;return ue===2?Y.declTNode:ue===1?q[Js]:null}function i2(q,Y=null,ue=null,C){let A=Ab(q,Y,ue,C);return A.resolveInjectorInitializers(),A}function Ab(q,Y=null,ue=null,C,A=new Set){let e=[ue||uu,H5(q)];return C=C||(typeof q=="object"?void 0:Zs(q)),new zh(e,Y||Km(),C||null,A)}var jf=(()=>{let Y=class Y{static create(C,A){if(Array.isArray(C))return i2({name:""},A,C,"");{let e=C.name??"";return i2({name:e},C.parent,C.providers,e)}}};Y.THROW_IF_NOT_FOUND=Fh,Y.NULL=new Np,Y.\u0275prov=Yr({token:Y,providedIn:"any",factory:()=>yi(S2)}),Y.__NG_ELEMENT_ID__=-1;let q=Y;return q})();var UT="ngOriginalError";function Xg(q){return q[UT]}var Pu=class{constructor(){this._console=console}handleError(Y){let ue=this._findOriginalError(Y);this._console.error("ERROR",Y),ue&&this._console.error("ORIGINAL ERROR",ue)}_findOriginalError(Y){let ue=Y&&Xg(Y);for(;ue&&Xg(ue);)ue=Xg(ue);return ue||null}},kb=new pi("",{providedIn:"root",factory:()=>Nr(Pu).handleError.bind(void 0)}),Sb=(()=>{let Y=class Y{};Y.__NG_ELEMENT_ID__=HT,Y.__NG_ENV_ID__=C=>C;let q=Y;return q})(),mm=class extends Sb{constructor(Y){super(),this._lView=Y}onDestroy(Y){return J2(this._lView,Y),()=>dT(this._lView,Y)}};function HT(){return new mm(Uo())}function qT(){return Vf(Zl(),Uo())}function Vf(q,Y){return new gu(du(q,Y))}var gu=(()=>{let Y=class Y{constructor(C){this.nativeElement=C}};Y.__NG_ELEMENT_ID__=qT;let q=Y;return q})();function GT(q){return q instanceof gu?q.nativeElement:q}var vm=class extends us{constructor(Y=!1){super(),this.destroyRef=void 0,this.__isAsync=Y,eT()&&(this.destroyRef=Nr(Sb,{optional:!0})??void 0)}emit(Y){let ue=Ji(null);try{super.next(Y)}finally{Ji(ue)}}subscribe(Y,ue,C){let A=Y,e=ue||(()=>null),v=C;if(Y&&typeof Y=="object"){let n=Y;A=n.next?.bind(n),e=n.error?.bind(n),v=n.complete?.bind(n)}this.__isAsync&&(e=Kg(e),A&&(A=Kg(A)),v&&(v=Kg(v)));let w=super.subscribe({next:A,error:e,complete:v});return Y instanceof na&&Y.add(w),w}};function Kg(q){return Y=>{setTimeout(q,void 0,Y)}}var $s=vm;function WT(){return this._results[Symbol.iterator]()}var ym=class q{get changes(){return this._changes??=new $s}constructor(Y=!1){this._emitDistinctChangesOnly=Y,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let ue=q.prototype;ue[Symbol.iterator]||(ue[Symbol.iterator]=WT)}get(Y){return this._results[Y]}map(Y){return this._results.map(Y)}filter(Y){return this._results.filter(Y)}find(Y){return this._results.find(Y)}reduce(Y,ue){return this._results.reduce(Y,ue)}forEach(Y){this._results.forEach(Y)}some(Y){return this._results.some(Y)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(Y,ue){this.dirty=!1;let C=M5(Y);(this._changesDetected=!T5(this._results,C,ue))&&(this._results=C,this.length=C.length,this.last=C[this.length-1],this.first=C[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(Y){this._onDirty=Y}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function Eb(q){return(q.flags&128)===128}var Cb=new Map,YT=0;function $T(){return YT++}function ZT(q){Cb.set(q[t0],q)}function XT(q){Cb.delete(q[t0])}var o2="__ngContext__";function Nf(q,Y){Cc(Y)?(q[o2]=Y[t0],ZT(Y)):q[o2]=Y}function Db(q){return Lb(q[jh])}function Ib(q){return Lb(q[Wl])}function Lb(q){for(;q!==null&&!Fu(q);)q=q[Wl];return q}var xm;function Ob(q){xm=q}function KT(){if(xm!==void 0)return xm;if(typeof document<"u")return document;throw new Zr(210,!1)}var ov=new pi("",{providedIn:"root",factory:()=>JT}),JT="ng",av=new pi(""),Uf=new pi("",{providedIn:"platform",factory:()=>"unknown"});var sv=new pi("",{providedIn:"root",factory:()=>KT().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var QT="h",e6="b";var t6=()=>null;function lv(q,Y,ue=!1){return t6(q,Y,ue)}var Pb=!1,n6=new pi("",{providedIn:"root",factory:()=>Pb});function Rb(q){return q instanceof Function?q():q}var jc=function(q){return q[q.Important=1]="Important",q[q.DashCase=2]="DashCase",q}(jc||{}),r6;function uv(q,Y){return r6(q,Y)}function Cf(q,Y,ue,C,A){if(C!=null){let e,v=!1;Fu(C)?e=C:Cc(C)&&(v=!0,C=C[Ru]);let w=oc(C);q===0&&ue!==null?A==null?Vb(Y,ue,w):Hp(Y,ue,w,A||null,!0):q===1&&ue!==null?Hp(Y,ue,w,A||null,!0):q===2?v6(Y,w,v):q===3&&Y.destroyNode(w),e!=null&&x6(Y,q,e,ue,A)}}function i6(q,Y){return q.createText(Y)}function Fb(q,Y,ue){return q.createElement(Y,ue)}function o6(q,Y){Nb(q,Y),Y[Ru]=null,Y[Js]=null}function a6(q,Y,ue,C,A,e){C[Ru]=A,C[Js]=Y,o0(q,C,ue,1,A,e)}function Nb(q,Y){Y[hu].changeDetectionScheduler?.notify(1),o0(q,Y,Y[Ks],2,null,null)}function s6(q){let Y=q[jh];if(!Y)return Jg(q[li],q);for(;Y;){let ue=null;if(Cc(Y))ue=Y[jh];else{let C=Y[Xs];C&&(ue=C)}if(!ue){for(;Y&&!Y[Wl]&&Y!==q;)Cc(Y)&&Jg(Y[li],Y),Y=Y[Oa];Y===null&&(Y=q),Cc(Y)&&Jg(Y[li],Y),ue=Y&&Y[Wl]}Y=ue}}function l6(q,Y,ue,C){let A=Xs+C,e=ue.length;C>0&&(ue[A-1][Wl]=Y),C<e-Xs?(Y[Wl]=ue[A],k2(ue,Xs+C,Y)):(ue.push(Y),Y[Wl]=null),Y[Oa]=ue;let v=Y[$h];v!==null&&ue!==v&&u6(v,Y);let w=Y[Ou];w!==null&&w.insertView(q),fm(Y),Y[Gr]|=128}function u6(q,Y){let ue=q[Ff],A=Y[Oa][Oa][Yl];Y[Yl]!==A&&(q[Gr]|=Jm.HasTransplantedViews),ue===null?q[Ff]=[Y]:ue.push(Y)}function zb(q,Y){let ue=q[Ff],C=ue.indexOf(Y);ue.splice(C,1)}function bm(q,Y){if(q.length<=Xs)return;let ue=Xs+Y,C=q[ue];if(C){let A=C[$h];A!==null&&A!==q&&zb(A,C),Y>0&&(q[ue-1][Wl]=C[Wl]);let e=Fp(q,Xs+Y);o6(C[li],C);let v=e[Ou];v!==null&&v.detachView(e[li]),C[Oa]=null,C[Wl]=null,C[Gr]&=-129}return C}function Bb(q,Y){if(!(Y[Gr]&256)){let ue=Y[Ks];ue.destroyNode&&o0(q,Y,ue,3,null,null),s6(Y)}}function Jg(q,Y){if(Y[Gr]&256)return;let ue=Ji(null);try{Y[Gr]&=-129,Y[Gr]|=256,Y[Lc]&&fx(Y[Lc]),f6(q,Y),c6(q,Y),Y[li].type===1&&Y[Ks].destroy();let C=Y[$h];if(C!==null&&Fu(Y[Oa])){C!==Y[Oa]&&zb(C,Y);let A=Y[Ou];A!==null&&A.detachView(q)}XT(Y)}finally{Ji(ue)}}function c6(q,Y){let ue=q.cleanup,C=Y[zp];if(ue!==null)for(let e=0;e<ue.length-1;e+=2)if(typeof ue[e]=="string"){let v=ue[e+3];v>=0?C[v]():C[-v].unsubscribe(),e+=2}else{let v=C[ue[e+1]];ue[e].call(v)}C!==null&&(Y[zp]=null);let A=Y[nc];if(A!==null){Y[nc]=null;for(let e=0;e<A.length;e++){let v=A[e];v()}}}function f6(q,Y){let ue;if(q!=null&&(ue=q.destroyHooks)!=null)for(let C=0;C<ue.length;C+=2){let A=Y[ue[C]];if(!(A instanceof Rc)){let e=ue[C+1];if(Array.isArray(e))for(let v=0;v<e.length;v+=2){let w=A[e[v]],n=e[v+1];tc(4,w,n);try{n.call(w)}finally{tc(5,w,n)}}else{tc(4,A,e);try{e.call(A)}finally{tc(5,A,e)}}}}}function jb(q,Y,ue){return h6(q,Y.parent,ue)}function h6(q,Y,ue){let C=Y;for(;C!==null&&C.type&40;)Y=C,C=Y.parent;if(C===null)return ue[Ru];{let{componentOffset:A}=C;if(A>-1){let{encapsulation:e}=q.data[C.directiveStart+A];if(e===fu.None||e===fu.Emulated)return null}return du(C,ue)}}function Hp(q,Y,ue,C,A){q.insertBefore(Y,ue,C,A)}function Vb(q,Y,ue){q.appendChild(Y,ue)}function a2(q,Y,ue,C,A){C!==null?Hp(q,Y,ue,C,A):Vb(q,Y,ue)}function d6(q,Y,ue,C){q.removeChild(Y,ue,C)}function cv(q,Y){return q.parentNode(Y)}function p6(q,Y){return q.nextSibling(Y)}function Ub(q,Y,ue){return m6(q,Y,ue)}function g6(q,Y,ue){return q.type&40?du(q,ue):null}var m6=g6,s2;function Hb(q,Y,ue,C){let A=jb(q,C,Y),e=Y[Ks],v=C.parent||Y[Js],w=Ub(v,C,Y);if(A!=null)if(Array.isArray(ue))for(let n=0;n<ue.length;n++)a2(e,A,ue[n],w,!1);else a2(e,A,ue,w,!1);s2!==void 0&&s2(e,C,Y,ue,A)}function Lp(q,Y){if(Y!==null){let ue=Y.type;if(ue&3)return du(Y,q);if(ue&4)return _m(-1,q[Y.index]);if(ue&8){let C=Y.child;if(C!==null)return Lp(q,C);{let A=q[Y.index];return Fu(A)?_m(-1,A):oc(A)}}else{if(ue&32)return uv(Y,q)()||oc(q[Y.index]);{let C=qb(q,Y);if(C!==null){if(Array.isArray(C))return C[0];let A=Uh(q[Yl]);return Lp(A,C)}else return Lp(q,Y.next)}}}return null}function qb(q,Y){if(Y!==null){let C=q[Yl][Js],A=Y.projection;return C.projection[A]}return null}function _m(q,Y){let ue=Xs+q+1;if(ue<Y.length){let C=Y[ue],A=C[li].firstChild;if(A!==null)return Lp(C,A)}return Y[Oc]}function v6(q,Y,ue){let C=cv(q,Y);C&&d6(q,C,Y,ue)}function fv(q,Y,ue,C,A,e,v){for(;ue!=null;){let w=C[ue.index],n=ue.type;if(v&&Y===0&&(w&&Nf(oc(w),C),ue.flags|=2),(ue.flags&32)!==32)if(n&8)fv(q,Y,ue.child,C,A,e,!1),Cf(Y,q,A,w,e);else if(n&32){let T=uv(ue,C),x;for(;x=T();)Cf(Y,q,A,x,e);Cf(Y,q,A,w,e)}else n&16?Gb(q,Y,C,ue,A,e):Cf(Y,q,A,w,e);ue=v?ue.projectionNext:ue.next}}function o0(q,Y,ue,C,A,e){fv(ue,C,q.firstChild,Y,A,e,!1)}function y6(q,Y,ue){let C=Y[Ks],A=jb(q,ue,Y),e=ue.parent||Y[Js],v=Ub(e,ue,Y);Gb(C,0,Y,ue,A,v)}function Gb(q,Y,ue,C,A,e){let v=ue[Yl],n=v[Js].projection[C.projection];if(Array.isArray(n))for(let T=0;T<n.length;T++){let x=n[T];Cf(Y,q,A,x,e)}else{let T=n,x=v[Oa];Eb(C)&&(T.flags|=128),fv(q,Y,T,x,A,e,!0)}}function x6(q,Y,ue,C,A){let e=ue[Oc],v=oc(ue);e!==v&&Cf(Y,q,C,e,A);for(let w=Xs;w<ue.length;w++){let n=ue[w];o0(n[li],n,q,Y,C,e)}}function b6(q,Y,ue){q.setAttribute(Y,"style",ue)}function Wb(q,Y,ue){ue===""?q.removeAttribute(Y,"class"):q.setAttribute(Y,"class",ue)}function Yb(q,Y,ue){let{mergedAttrs:C,classes:A,styles:e}=ue;C!==null&&am(q,Y,C),A!==null&&Wb(q,Y,A),e!==null&&b6(q,Y,e)}var $b={};function Kh(q=1){Zb(pu(),Uo(),cb()+q,!1)}function Zb(q,Y,ue,C){if(!C)if((Y[Gr]&3)===3){let e=q.preOrderCheckHooks;e!==null&&Cp(Y,e,ue)}else{let e=q.preOrderHooks;e!==null&&Dp(Y,e,0,ue)}Pc(ue)}function wl(q,Y=ci.Default){let ue=Uo();if(ue===null)return yi(q,Y);let C=Zl();return wb(C,ue,cs(q),Y)}function Xb(q,Y,ue,C,A,e){let v=Ji(null);try{let w=null;A&Lu.SignalBased&&(w=Y[C][sx]),w!==null&&w.transformFn!==void 0&&(e=w.transformFn(e)),A&Lu.HasDecoratorInputTransform&&(e=q.inputTransforms[C].call(Y,e)),q.setInput!==null?q.setInput(Y,w,e,ue,C):G2(Y,w,C,e)}finally{Ji(v)}}function _6(q,Y){let ue=q.hostBindingOpCodes;if(ue!==null)try{for(let C=0;C<ue.length;C++){let A=ue[C];if(A<0)Pc(~A);else{let e=A,v=ue[++C],w=ue[++C];TT(v,e);let n=Y[e];w(2,n)}}}finally{Pc(-1)}}function a0(q,Y,ue,C,A,e,v,w,n,T,x){let f=Y.blueprint.slice();return f[Ru]=A,f[Gr]=C|4|128|8|64,(T!==null||q&&q[Gr]&2048)&&(f[Gr]|=2048),K2(f),f[Oa]=f[Yh]=q,f[rc]=ue,f[hu]=v||q&&q[hu],f[Ks]=w||q&&q[Ks],f[Rf]=n||q&&q[Rf]||null,f[Js]=e,f[t0]=$T(),f[Bh]=x,f[U2]=T,f[Yl]=Y.type==2?q[Yl]:f,f}function s0(q,Y,ue,C,A){let e=q.data[Y];if(e===null)e=w6(q,Y,ue,C,A),wT()&&(e.flags|=32);else if(e.type&64){e.type=ue,e.value=C,e.attrs=A;let v=xT();e.injectorIndex=v===null?-1:v.injectorIndex}return r0(e,!0),e}function w6(q,Y,ue,C,A){let e=tb(),v=nb(),w=v?e:e&&e.parent,n=q.data[Y]=D6(q,w,ue,Y,C,A);return q.firstChild===null&&(q.firstChild=n),e!==null&&(v?e.child==null&&n.parent!==null&&(e.child=n):e.next===null&&(e.next=n,n.prev=e)),n}function Kb(q,Y,ue,C){if(ue===0)return-1;let A=Y.length;for(let e=0;e<ue;e++)Y.push(C),q.blueprint.push(C),q.data.push(null);return A}function Jb(q,Y,ue,C,A){let e=cb(),v=C&2;try{Pc(-1),v&&Y.length>ic&&Zb(q,Y,ic,!1),tc(v?2:0,A),ue(C,A)}finally{Pc(e),tc(v?3:1,A)}}function Qb(q,Y,ue){if(q2(Y)){let C=Ji(null);try{let A=Y.directiveStart,e=Y.directiveEnd;for(let v=A;v<e;v++){let w=q.data[v];if(w.contentQueries){let n=ue[v];w.contentQueries(1,n,v)}}}finally{Ji(C)}}}function T6(q,Y,ue){Q2()&&(z6(q,Y,ue,du(ue,Y)),(ue.flags&64)===64&&r_(q,Y,ue))}function M6(q,Y,ue=du){let C=Y.localNames;if(C!==null){let A=Y.index+1;for(let e=0;e<C.length;e+=2){let v=C[e+1],w=v===-1?ue(Y,q):q[v];q[A++]=w}}}function e_(q){let Y=q.tView;return Y===null||Y.incompleteFirstPass?q.tView=t_(1,null,q.template,q.decls,q.vars,q.directiveDefs,q.pipeDefs,q.viewQuery,q.schemas,q.consts,q.id):Y}function t_(q,Y,ue,C,A,e,v,w,n,T,x){let f=ic+C,s=f+A,t=A6(f,s),o=typeof T=="function"?T():T;return t[li]={type:q,blueprint:t,template:ue,queries:null,viewQuery:w,declTNode:Y,data:t.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:s,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof e=="function"?e():e,pipeRegistry:typeof v=="function"?v():v,firstChild:null,schemas:n,consts:o,incompleteFirstPass:!1,ssrId:x}}function A6(q,Y){let ue=[];for(let C=0;C<Y;C++)ue.push(C<q?null:$b);return ue}function k6(q,Y,ue,C){let e=C.get(n6,Pb)||ue===fu.ShadowDom,v=q.selectRootElement(Y,e);return S6(v),v}function S6(q){E6(q)}var E6=()=>null;function C6(q,Y,ue,C){let A=Z6(Y);A.push(ue),q.firstCreatePass&&X6(q).push(C,A.length-1)}function D6(q,Y,ue,C,A,e){let v=Y?Y.injectorIndex:-1,w=0;return eb()&&(w|=128),{type:ue,index:C,insertBeforeIndex:null,injectorIndex:v,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:w,providerIndexes:0,value:A,attrs:e,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:Y,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function l2(q,Y,ue,C,A){for(let e in Y){if(!Y.hasOwnProperty(e))continue;let v=Y[e];if(v===void 0)continue;C??={};let w,n=Lu.None;Array.isArray(v)?(w=v[0],n=v[1]):w=v;let T=e;if(A!==null){if(!A.hasOwnProperty(e))continue;T=A[e]}q===0?u2(C,ue,T,w,n):u2(C,ue,T,w)}return C}function u2(q,Y,ue,C,A){let e;q.hasOwnProperty(ue)?(e=q[ue]).push(Y,C):e=q[ue]=[Y,C],A!==void 0&&e.push(A)}function I6(q,Y,ue){let C=Y.directiveStart,A=Y.directiveEnd,e=q.data,v=Y.attrs,w=[],n=null,T=null;for(let x=C;x<A;x++){let f=e[x],s=ue?ue.get(f):null,t=s?s.inputs:null,o=s?s.outputs:null;n=l2(0,f.inputs,x,n,t),T=l2(1,f.outputs,x,T,o);let r=n!==null&&v!==null&&!Zm(Y)?Y6(n,x,v):null;w.push(r)}n!==null&&(n.hasOwnProperty("class")&&(Y.flags|=8),n.hasOwnProperty("style")&&(Y.flags|=16)),Y.initialInputs=w,Y.inputs=n,Y.outputs=T}function L6(q){return q==="class"?"className":q==="for"?"htmlFor":q==="formaction"?"formAction":q==="innerHtml"?"innerHTML":q==="readonly"?"readOnly":q==="tabindex"?"tabIndex":q}function O6(q,Y,ue,C,A,e,v,w){let n=du(Y,ue),T=Y.inputs,x;!w&&T!=null&&(x=T[C])?(dv(q,ue,x,C,A),n0(Y)&&P6(ue,Y.index)):Y.type&3?(C=L6(C),A=v!=null?v(A,Y.value||"",C):A,e.setProperty(n,C,A)):Y.type&12}function P6(q,Y){let ue=Bc(Y,q);ue[Gr]&16||(ue[Gr]|=64)}function R6(q,Y,ue,C){if(Q2()){let A=C===null?null:{"":-1},e=j6(q,ue),v,w;e===null?v=w=null:[v,w]=e,v!==null&&n_(q,Y,ue,v,A,w),A&&V6(ue,C,A)}ue.mergedAttrs=$m(ue.mergedAttrs,ue.attrs)}function n_(q,Y,ue,C,A,e){for(let T=0;T<C.length;T++)pm(Up(ue,Y),q,C[T].type);H6(ue,q.data.length,C.length);for(let T=0;T<C.length;T++){let x=C[T];x.providersResolver&&x.providersResolver(x)}let v=!1,w=!1,n=Kb(q,Y,C.length,null);for(let T=0;T<C.length;T++){let x=C[T];ue.mergedAttrs=$m(ue.mergedAttrs,x.hostAttrs),q6(q,ue,Y,n,x),U6(n,x,A),x.contentQueries!==null&&(ue.flags|=4),(x.hostBindings!==null||x.hostAttrs!==null||x.hostVars!==0)&&(ue.flags|=64);let f=x.type.prototype;!v&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((q.preOrderHooks??=[]).push(ue.index),v=!0),!w&&(f.ngOnChanges||f.ngDoCheck)&&((q.preOrderCheckHooks??=[]).push(ue.index),w=!0),n++}I6(q,ue,e)}function F6(q,Y,ue,C,A){let e=A.hostBindings;if(e){let v=q.hostBindingOpCodes;v===null&&(v=q.hostBindingOpCodes=[]);let w=~Y.index;N6(v)!=w&&v.push(w),v.push(ue,C,e)}}function N6(q){let Y=q.length;for(;Y>0;){let ue=q[--Y];if(typeof ue=="number"&&ue<0)return ue}return 0}function z6(q,Y,ue,C){let A=ue.directiveStart,e=ue.directiveEnd;n0(ue)&&G6(Y,ue,q.data[A+ue.componentOffset]),q.firstCreatePass||Up(ue,Y),Nf(C,Y);let v=ue.initialInputs;for(let w=A;w<e;w++){let n=q.data[w],T=Fc(Y,q,w,ue);if(Nf(T,Y),v!==null&&W6(Y,w-A,T,n,ue,v),zf(n)){let x=Bc(ue.index,Y);x[rc]=Fc(Y,q,w,ue)}}}function r_(q,Y,ue){let C=ue.directiveStart,A=ue.directiveEnd,e=ue.index,v=MT();try{Pc(e);for(let w=C;w<A;w++){let n=q.data[w],T=Y[w];hm(w),(n.hostBindings!==null||n.hostVars!==0||n.hostAttrs!==null)&&B6(n,T)}}finally{Pc(-1),hm(v)}}function B6(q,Y){q.hostBindings!==null&&q.hostBindings(1,Y)}function j6(q,Y){let ue=q.directiveRegistry,C=null,A=null;if(ue)for(let e=0;e<ue.length;e++){let v=ue[e];if(I2(Y,v.selectors,!1))if(C||(C=[]),zf(v))if(v.findHostDirectiveDefs!==null){let w=[];A=A||new Map,v.findHostDirectiveDefs(v,w,A),C.unshift(...w,v);let n=w.length;wm(q,Y,n)}else C.unshift(v),wm(q,Y,0);else A=A||new Map,v.findHostDirectiveDefs?.(v,C,A),C.push(v)}return C===null?null:[C,A]}function wm(q,Y,ue){Y.componentOffset=ue,(q.components??=[]).push(Y.index)}function V6(q,Y,ue){if(Y){let C=q.localNames=[];for(let A=0;A<Y.length;A+=2){let e=ue[Y[A+1]];if(e==null)throw new Zr(-301,!1);C.push(Y[A],e)}}}function U6(q,Y,ue){if(ue){if(Y.exportAs)for(let C=0;C<Y.exportAs.length;C++)ue[Y.exportAs[C]]=q;zf(Y)&&(ue[""]=q)}}function H6(q,Y,ue){q.flags|=1,q.directiveStart=Y,q.directiveEnd=Y+ue,q.providerIndexes=Y}function q6(q,Y,ue,C,A){q.data[C]=A;let e=A.factory||(A.factory=Lf(A.type,!0)),v=new Rc(e,zf(A),wl);q.blueprint[C]=v,ue[C]=v,F6(q,Y,C,Kb(q,ue,A.hostVars,$b),A)}function G6(q,Y,ue){let C=du(Y,q),A=e_(ue),e=q[hu].rendererFactory,v=16;ue.signals?v=4096:ue.onPush&&(v=64);let w=hv(q,a0(q,A,null,v,C,Y,null,e.createRenderer(C,ue),null,null,null));q[Y.index]=w}function W6(q,Y,ue,C,A,e){let v=e[Y];if(v!==null)for(let w=0;w<v.length;){let n=v[w++],T=v[w++],x=v[w++],f=v[w++];Xb(C,ue,n,T,x,f)}}function Y6(q,Y,ue){let C=null,A=0;for(;A<ue.length;){let e=ue[A];if(e===0){A+=4;continue}else if(e===5){A+=2;continue}if(typeof e=="number")break;if(q.hasOwnProperty(e)){C===null&&(C=[]);let v=q[e];for(let w=0;w<v.length;w+=3)if(v[w]===Y){C.push(e,v[w+1],v[w+2],ue[A+1]);break}}A+=2}return C}function $6(q,Y,ue,C){return[q,!0,0,Y,null,C,null,ue,null,null]}function i_(q,Y){let ue=q.contentQueries;if(ue!==null){let C=Ji(null);try{for(let A=0;A<ue.length;A+=2){let e=ue[A],v=ue[A+1];if(v!==-1){let w=q.data[v];tv(e),w.contentQueries(2,Y[v],v)}}}finally{Ji(C)}}}function hv(q,Y){return q[jh]?q[Kx][Wl]=Y:q[jh]=Y,q[Kx]=Y,Y}function Tm(q,Y,ue){tv(0);let C=Ji(null);try{Y(q,ue)}finally{Ji(C)}}function Z6(q){return q[zp]||(q[zp]=[])}function X6(q){return q.cleanup||(q.cleanup=[])}function K6(q,Y){let ue=q[Rf],C=ue?ue.get(Pu,null):null;C&&C.handleError(Y)}function dv(q,Y,ue,C,A){for(let e=0;e<ue.length;){let v=ue[e++],w=ue[e++],n=ue[e++],T=Y[v],x=q.data[v];Xb(x,T,C,w,n,A)}}function J6(q,Y){let ue=Bc(Y,q),C=ue[li];Q6(C,ue);let A=ue[Ru];A!==null&&ue[Bh]===null&&(ue[Bh]=lv(A,ue[Rf])),pv(C,ue,ue[rc])}function Q6(q,Y){for(let ue=Y.length;ue<q.blueprint.length;ue++)Y.push(q.blueprint[ue])}function pv(q,Y,ue){nv(Y);try{let C=q.viewQuery;C!==null&&Tm(1,C,ue);let A=q.template;A!==null&&Jb(q,Y,A,1,ue),q.firstCreatePass&&(q.firstCreatePass=!1),Y[Ou]?.finishViewCreation(q),q.staticContentQueries&&i_(q,Y),q.staticViewQueries&&Tm(2,q.viewQuery,ue);let e=q.components;e!==null&&eM(Y,e)}catch(C){throw q.firstCreatePass&&(q.incompleteFirstPass=!0,q.firstCreatePass=!1),C}finally{Y[Gr]&=-5,rv()}}function eM(q,Y){for(let ue=0;ue<Y.length;ue++)J6(q,Y[ue])}function tM(q,Y,ue,C){let A=Ji(null);try{let e=Y.tView,w=q[Gr]&4096?4096:16,n=a0(q,e,ue,w,null,Y,null,null,C?.injector??null,C?.embeddedViewInjector??null,C?.dehydratedView??null),T=q[Y.index];n[$h]=T;let x=q[Ou];return x!==null&&(n[Ou]=x.createEmbeddedView(e)),pv(e,n,ue),n}finally{Ji(A)}}function c2(q,Y){return!Y||Y.firstChild===null||Eb(q)}function nM(q,Y,ue,C=!0){let A=Y[li];if(l6(A,Y,q,ue),C){let v=_m(ue,q),w=Y[Ks],n=cv(w,q[Oc]);n!==null&&a6(A,q[Js],w,Y,n,v)}let e=Y[Bh];e!==null&&e.firstChild!==null&&(e.firstChild=null)}function qp(q,Y,ue,C,A=!1){for(;ue!==null;){let e=Y[ue.index];e!==null&&C.push(oc(e)),Fu(e)&&rM(e,C);let v=ue.type;if(v&8)qp(q,Y,ue.child,C);else if(v&32){let w=uv(ue,Y),n;for(;n=w();)C.push(n)}else if(v&16){let w=qb(Y,ue);if(Array.isArray(w))C.push(...w);else{let n=Uh(Y[Yl]);qp(n[li],n,w,C,!0)}}ue=A?ue.projectionNext:ue.next}return C}function rM(q,Y){for(let ue=Xs;ue<q.length;ue++){let C=q[ue],A=C[li].firstChild;A!==null&&qp(C[li],C,A,Y)}q[Oc]!==q[Ru]&&Y.push(q[Oc])}var o_=[];function iM(q){return q[Lc]??oM(q)}function oM(q){let Y=o_.pop()??Object.create(sM);return Y.lView=q,Y}function aM(q){q.lView[Lc]!==q&&(q.lView=null,o_.push(q))}var sM=bo(Fr({},lx),{consumerIsAlwaysLive:!0,consumerMarkedDirty:q=>{Vh(q.lView)},consumerOnSignalRead(){this.lView[Lc]=this}}),a_=100;function s_(q,Y=!0,ue=0){let C=q[hu],A=C.rendererFactory,e=!1;e||A.begin?.();try{lM(q,ue)}catch(v){throw Y&&K6(q,v),v}finally{e||(A.end?.(),C.inlineEffectRunner?.flush())}}function lM(q,Y){Mm(q,Y);let ue=0;for(;ev(q);){if(ue===a_)throw new Zr(103,!1);ue++,Mm(q,1)}}function uM(q,Y,ue,C){let A=Y[Gr];if((A&256)===256)return;let e=!1;!e&&Y[hu].inlineEffectRunner?.flush(),nv(Y);let v=null,w=null;!e&&cM(q)&&(w=iM(Y),v=ux(w));try{K2(Y),bT(q.bindingStartIndex),ue!==null&&Jb(q,Y,ue,2,C);let n=(A&3)===3;if(!e)if(n){let f=q.preOrderCheckHooks;f!==null&&Cp(Y,f,null)}else{let f=q.preOrderHooks;f!==null&&Dp(Y,f,0,null),$g(Y,0)}if(fM(Y),l_(Y,0),q.contentQueries!==null&&i_(q,Y),!e)if(n){let f=q.contentCheckHooks;f!==null&&Cp(Y,f)}else{let f=q.contentHooks;f!==null&&Dp(Y,f,1),$g(Y,1)}_6(q,Y);let T=q.components;T!==null&&c_(Y,T,0);let x=q.viewQuery;if(x!==null&&Tm(2,x,C),!e)if(n){let f=q.viewCheckHooks;f!==null&&Cp(Y,f)}else{let f=q.viewHooks;f!==null&&Dp(Y,f,2),$g(Y,2)}if(q.firstUpdatePass===!0&&(q.firstUpdatePass=!1),Y[Yg]){for(let f of Y[Yg])f();Y[Yg]=null}e||(Y[Gr]&=-73)}catch(n){throw Vh(Y),n}finally{w!==null&&(cx(w,v),aM(w)),rv()}}function cM(q){return q.type!==2}function l_(q,Y){for(let ue=Db(q);ue!==null;ue=Ib(ue))for(let C=Xs;C<ue.length;C++){let A=ue[C];u_(A,Y)}}function fM(q){for(let Y=Db(q);Y!==null;Y=Ib(Y)){if(!(Y[Gr]&Jm.HasTransplantedViews))continue;let ue=Y[Ff];for(let C=0;C<ue.length;C++){let A=ue[C],e=A[Oa];hT(A)}}}function hM(q,Y,ue){let C=Bc(Y,q);u_(C,ue)}function u_(q,Y){Qm(q)&&Mm(q,Y)}function Mm(q,Y){let C=q[li],A=q[Gr],e=q[Lc],v=!!(Y===0&&A&16);if(v||=!!(A&64&&Y===0),v||=!!(A&1024),v||=!!(e?.dirty&&Sg(e)),e&&(e.dirty=!1),q[Gr]&=-9217,v)uM(C,q,C.template,q[rc]);else if(A&8192){l_(q,1);let w=C.components;w!==null&&c_(q,w,1)}}function c_(q,Y,ue){for(let C=0;C<Y.length;C++)hM(q,Y[C],ue)}function f_(q){for(q[hu].changeDetectionScheduler?.notify();q;){q[Gr]|=64;let Y=Uh(q);if(rT(q)&&!Y)return q;q=Y}return null}var Nc=class{get rootNodes(){let Y=this._lView,ue=Y[li];return qp(ue,Y,ue.firstChild,[])}constructor(Y,ue,C=!0){this._lView=Y,this._cdRefInjectingView=ue,this.notifyErrorHandler=C,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[rc]}set context(Y){this._lView[rc]=Y}get destroyed(){return(this._lView[Gr]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let Y=this._lView[Oa];if(Fu(Y)){let ue=Y[Bp],C=ue?ue.indexOf(this):-1;C>-1&&(bm(Y,C),Fp(ue,C))}this._attachedToViewContainer=!1}Bb(this._lView[li],this._lView)}onDestroy(Y){J2(this._lView,Y)}markForCheck(){f_(this._cdRefInjectingView||this._lView)}detach(){this._lView[Gr]&=-129}reattach(){fm(this._lView),this._lView[Gr]|=128}detectChanges(){this._lView[Gr]|=1024,s_(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Zr(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,Nb(this._lView[li],this._lView)}attachToAppRef(Y){if(this._attachedToViewContainer)throw new Zr(902,!1);this._appRef=Y,fm(this._lView)}},Hh=(()=>{let Y=class Y{};Y.__NG_ELEMENT_ID__=gM;let q=Y;return q})(),dM=Hh,pM=class extends dM{constructor(Y,ue,C){super(),this._declarationLView=Y,this._declarationTContainer=ue,this.elementRef=C}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(Y,ue){return this.createEmbeddedViewImpl(Y,ue)}createEmbeddedViewImpl(Y,ue,C){let A=tM(this._declarationLView,this._declarationTContainer,Y,{embeddedViewInjector:ue,dehydratedView:C});return new Nc(A)}};function gM(){return gv(Zl(),Uo())}function gv(q,Y){return q.type&4?new pM(Y,q,Vf(q,Y)):null}var U7=new RegExp(`^(\\d+)*(${e6}|${QT})*(.*)`);var mM=()=>null;function f2(q,Y){return mM(q,Y)}var Am=class{},km=class{},Gp=class{};function vM(q){let Y=Error(`No component factory found for ${Zs(q)}.`);return Y[yM]=q,Y}var yM="ngComponent";var Sm=class{resolveComponentFactory(Y){throw vM(Y)}},l0=(()=>{let Y=class Y{};Y.NULL=new Sm;let q=Y;return q})(),qh=class{},Hf=(()=>{let Y=class Y{constructor(){this.destroyNode=null}};Y.__NG_ELEMENT_ID__=()=>xM();let q=Y;return q})();function xM(){let q=Uo(),Y=Zl(),ue=Bc(Y.index,q);return(Cc(ue)?ue:q)[Ks]}var bM=(()=>{let Y=class Y{};Y.\u0275prov=Yr({token:Y,providedIn:"root",factory:()=>null});let q=Y;return q})(),Qg={};var h2=new Set;function h_(q){h2.has(q)||(h2.add(q),performance?.mark?.("mark_feature_usage",{detail:{feature:q}}))}function d2(...q){}function _M(){let q=typeof Ph.requestAnimationFrame=="function",Y=Ph[q?"requestAnimationFrame":"setTimeout"],ue=Ph[q?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&Y&&ue){let C=Y[Zone.__symbol__("OriginalDelegate")];C&&(Y=C);let A=ue[Zone.__symbol__("OriginalDelegate")];A&&(ue=A)}return{nativeRequestAnimationFrame:Y,nativeCancelAnimationFrame:ue}}var $o=class q{constructor({enableLongStackTrace:Y=!1,shouldCoalesceEventChangeDetection:ue=!1,shouldCoalesceRunChangeDetection:C=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new $s(!1),this.onMicrotaskEmpty=new $s(!1),this.onStable=new $s(!1),this.onError=new $s(!1),typeof Zone>"u")throw new Zr(908,!1);Zone.assertZonePatched();let A=this;A._nesting=0,A._outer=A._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(A._inner=A._inner.fork(new Zone.TaskTrackingZoneSpec)),Y&&Zone.longStackTraceZoneSpec&&(A._inner=A._inner.fork(Zone.longStackTraceZoneSpec)),A.shouldCoalesceEventChangeDetection=!C&&ue,A.shouldCoalesceRunChangeDetection=C,A.lastRequestAnimationFrameId=-1,A.nativeRequestAnimationFrame=_M().nativeRequestAnimationFrame,MM(A)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!q.isInAngularZone())throw new Zr(909,!1)}static assertNotInAngularZone(){if(q.isInAngularZone())throw new Zr(909,!1)}run(Y,ue,C){return this._inner.run(Y,ue,C)}runTask(Y,ue,C,A){let e=this._inner,v=e.scheduleEventTask("NgZoneEvent: "+A,Y,wM,d2,d2);try{return e.runTask(v,ue,C)}finally{e.cancelTask(v)}}runGuarded(Y,ue,C){return this._inner.runGuarded(Y,ue,C)}runOutsideAngular(Y){return this._outer.run(Y)}},wM={};function mv(q){if(q._nesting==0&&!q.hasPendingMicrotasks&&!q.isStable)try{q._nesting++,q.onMicrotaskEmpty.emit(null)}finally{if(q._nesting--,!q.hasPendingMicrotasks)try{q.runOutsideAngular(()=>q.onStable.emit(null))}finally{q.isStable=!0}}}function TM(q){q.isCheckStableRunning||q.lastRequestAnimationFrameId!==-1||(q.lastRequestAnimationFrameId=q.nativeRequestAnimationFrame.call(Ph,()=>{q.fakeTopEventTask||(q.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{q.lastRequestAnimationFrameId=-1,Em(q),q.isCheckStableRunning=!0,mv(q),q.isCheckStableRunning=!1},void 0,()=>{},()=>{})),q.fakeTopEventTask.invoke()}),Em(q))}function MM(q){let Y=()=>{TM(q)};q._inner=q._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(ue,C,A,e,v,w)=>{if(AM(w))return ue.invokeTask(A,e,v,w);try{return p2(q),ue.invokeTask(A,e,v,w)}finally{(q.shouldCoalesceEventChangeDetection&&e.type==="eventTask"||q.shouldCoalesceRunChangeDetection)&&Y(),g2(q)}},onInvoke:(ue,C,A,e,v,w,n)=>{try{return p2(q),ue.invoke(A,e,v,w,n)}finally{q.shouldCoalesceRunChangeDetection&&Y(),g2(q)}},onHasTask:(ue,C,A,e)=>{ue.hasTask(A,e),C===A&&(e.change=="microTask"?(q._hasPendingMicrotasks=e.microTask,Em(q),mv(q)):e.change=="macroTask"&&(q.hasPendingMacrotasks=e.macroTask))},onHandleError:(ue,C,A,e)=>(ue.handleError(A,e),q.runOutsideAngular(()=>q.onError.emit(e)),!1)})}function Em(q){q._hasPendingMicrotasks||(q.shouldCoalesceEventChangeDetection||q.shouldCoalesceRunChangeDetection)&&q.lastRequestAnimationFrameId!==-1?q.hasPendingMicrotasks=!0:q.hasPendingMicrotasks=!1}function p2(q){q._nesting++,q.isStable&&(q.isStable=!1,q.onUnstable.emit(null))}function g2(q){q._nesting--,mv(q)}function AM(q){return!Array.isArray(q)||q.length!==1?!1:q[0].data?.__ignore_ng_zone__===!0}var d_=(()=>{let Y=class Y{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let C=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let A of C)A()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};Y.\u0275prov=Yr({token:Y,providedIn:"root",factory:()=>new Y});let q=Y;return q})();function Cm(q,Y,ue){let C=ue?q.styles:null,A=ue?q.classes:null,e=0;if(Y!==null)for(let v=0;v<Y.length;v++){let w=Y[v];if(typeof w=="number")e=w;else if(e==1)A=Vx(A,w);else if(e==2){let n=w,T=Y[++v];C=Vx(C,n+": "+T+";")}}ue?q.styles=C:q.stylesWithoutHost=C,ue?q.classes=A:q.classesWithoutHost=A}var Wp=class extends l0{constructor(Y){super(),this.ngModule=Y}resolveComponentFactory(Y){let ue=Ic(Y);return new Gh(ue,this.ngModule)}};function m2(q){let Y=[];for(let ue in q){if(!q.hasOwnProperty(ue))continue;let C=q[ue];C!==void 0&&Y.push({propName:Array.isArray(C)?C[0]:C,templateName:ue})}return Y}function kM(q){let Y=q.toLowerCase();return Y==="svg"?Z2:Y==="math"?sT:null}var Dm=class{constructor(Y,ue){this.injector=Y,this.parentInjector=ue}get(Y,ue,C){C=Kp(C);let A=this.injector.get(Y,Qg,C);return A!==Qg||ue===Qg?A:this.parentInjector.get(Y,ue,C)}},Gh=class extends Gp{get inputs(){let Y=this.componentDef,ue=Y.inputTransforms,C=m2(Y.inputs);if(ue!==null)for(let A of C)ue.hasOwnProperty(A.propName)&&(A.transform=ue[A.propName]);return C}get outputs(){return m2(this.componentDef.outputs)}constructor(Y,ue){super(),this.componentDef=Y,this.ngModule=ue,this.componentType=Y.type,this.selector=z5(Y.selectors),this.ngContentSelectors=Y.ngContentSelectors?Y.ngContentSelectors:[],this.isBoundToModule=!!ue}create(Y,ue,C,A){let e=Ji(null);try{A=A||this.ngModule;let v=A instanceof xl?A:A?.injector;v&&this.componentDef.getStandaloneInjector!==null&&(v=this.componentDef.getStandaloneInjector(v)||v);let w=v?new Dm(Y,v):Y,n=w.get(qh,null);if(n===null)throw new Zr(407,!1);let T=w.get(bM,null),x=w.get(d_,null),f=w.get(Am,null),s={rendererFactory:n,sanitizer:T,inlineEffectRunner:null,afterRenderEventManager:x,changeDetectionScheduler:f},t=n.createRenderer(null,this.componentDef),o=this.componentDef.selectors[0][0]||"div",r=C?k6(t,C,this.componentDef.encapsulation,w):Fb(t,o,kM(o)),i=512;this.componentDef.signals?i|=4096:this.componentDef.onPush||(i|=16);let a=null;r!==null&&(a=lv(r,w,!0));let u=t_(0,null,null,1,0,null,null,null,null,null,null),l=a0(null,u,null,i,null,null,s,t,w,null,a);nv(l);let d,c;try{let _=this.componentDef,p,g=null;_.findHostDirectiveDefs?(p=[],g=new Map,_.findHostDirectiveDefs(_,p,g),p.push(_)):p=[_];let m=SM(l,r),b=EM(m,r,_,p,l,s,t);c=X2(u,ic),r&&IM(t,_,r,C),ue!==void 0&&LM(c,this.ngContentSelectors,ue),d=DM(b,_,p,g,l,[OM]),pv(u,l,null)}finally{rv()}return new Im(this.componentType,d,Vf(c,l),l,c)}finally{Ji(e)}}},Im=class extends km{constructor(Y,ue,C,A,e){super(),this.location=C,this._rootLView=A,this._tNode=e,this.previousInputValues=null,this.instance=ue,this.hostView=this.changeDetectorRef=new Nc(A,void 0,!1),this.componentType=Y}setInput(Y,ue){let C=this._tNode.inputs,A;if(C!==null&&(A=C[Y])){if(this.previousInputValues??=new Map,this.previousInputValues.has(Y)&&Object.is(this.previousInputValues.get(Y),ue))return;let e=this._rootLView;dv(e[li],e,A,Y,ue),this.previousInputValues.set(Y,ue);let v=Bc(this._tNode.index,e);f_(v)}}get injector(){return new Dc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(Y){this.hostView.onDestroy(Y)}};function SM(q,Y){let ue=q[li],C=ic;return q[C]=Y,s0(ue,C,2,"#host",null)}function EM(q,Y,ue,C,A,e,v){let w=A[li];CM(C,q,Y,v);let n=null;Y!==null&&(n=lv(Y,A[Rf]));let T=e.rendererFactory.createRenderer(Y,ue),x=16;ue.signals?x=4096:ue.onPush&&(x=64);let f=a0(A,e_(ue),null,x,A[q.index],q,e,T,null,null,n);return w.firstCreatePass&&wm(w,q,C.length-1),hv(A,f),A[q.index]=f}function CM(q,Y,ue,C){for(let A of q)Y.mergedAttrs=$m(Y.mergedAttrs,A.hostAttrs);Y.mergedAttrs!==null&&(Cm(Y,Y.mergedAttrs,!0),ue!==null&&Yb(C,ue,Y))}function DM(q,Y,ue,C,A,e){let v=Zl(),w=A[li],n=du(v,A);n_(w,A,v,ue,null,C);for(let x=0;x<ue.length;x++){let f=v.directiveStart+x,s=Fc(A,w,f,v);Nf(s,A)}r_(w,A,v),n&&Nf(n,A);let T=Fc(A,w,v.directiveStart+v.componentOffset,v);if(q[rc]=A[rc]=T,e!==null)for(let x of e)x(T,Y);return Qb(w,v,A),T}function IM(q,Y,ue,C){if(C)am(q,ue,["ng-version","17.3.10"]);else{let{attrs:A,classes:e}=B5(Y.selectors[0]);A&&am(q,ue,A),e&&e.length>0&&Wb(q,ue,e.join(" "))}}function LM(q,Y,ue){let C=q.projection=[];for(let A=0;A<Y.length;A++){let e=ue[A];C.push(e!=null?Array.from(e):null)}}function OM(){let q=Zl();pb(Uo()[li],q)}var qf=(()=>{let Y=class Y{};Y.__NG_ELEMENT_ID__=PM;let q=Y;return q})();function PM(){let q=Zl();return g_(q,Uo())}var RM=qf,p_=class extends RM{constructor(Y,ue,C){super(),this._lContainer=Y,this._hostTNode=ue,this._hostLView=C}get element(){return Vf(this._hostTNode,this._hostLView)}get injector(){return new Dc(this._hostTNode,this._hostLView)}get parentInjector(){let Y=iv(this._hostTNode,this._hostLView);if(mb(Y)){let ue=Vp(Y,this._hostLView),C=jp(Y),A=ue[li].data[C+8];return new Dc(A,ue)}else return new Dc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(Y){let ue=v2(this._lContainer);return ue!==null&&ue[Y]||null}get length(){return this._lContainer.length-Xs}createEmbeddedView(Y,ue,C){let A,e;typeof C=="number"?A=C:C!=null&&(A=C.index,e=C.injector);let v=f2(this._lContainer,Y.ssrId),w=Y.createEmbeddedViewImpl(ue||{},e,v);return this.insertImpl(w,A,c2(this._hostTNode,v)),w}createComponent(Y,ue,C,A,e){let v=Y&&!tT(Y),w;if(v)w=ue;else{let o=ue||{};w=o.index,C=o.injector,A=o.projectableNodes,e=o.environmentInjector||o.ngModuleRef}let n=v?Y:new Gh(Ic(Y)),T=C||this.parentInjector;if(!e&&n.ngModule==null){let r=(v?T:this.parentInjector).get(xl,null);r&&(e=r)}let x=Ic(n.componentType??{}),f=f2(this._lContainer,x?.id??null),s=f?.firstChild??null,t=n.create(T,A,s,e);return this.insertImpl(t.hostView,w,c2(this._hostTNode,f)),t}insert(Y,ue){return this.insertImpl(Y,ue,!0)}insertImpl(Y,ue,C){let A=Y._lView;if(fT(A)){let w=this.indexOf(Y);if(w!==-1)this.detach(w);else{let n=A[Oa],T=new p_(n,n[Js],n[Oa]);T.detach(T.indexOf(Y))}}let e=this._adjustIndex(ue),v=this._lContainer;return nM(v,A,e,C),Y.attachToViewContainerRef(),k2(em(v),e,Y),Y}move(Y,ue){return this.insert(Y,ue)}indexOf(Y){let ue=v2(this._lContainer);return ue!==null?ue.indexOf(Y):-1}remove(Y){let ue=this._adjustIndex(Y,-1),C=bm(this._lContainer,ue);C&&(Fp(em(this._lContainer),ue),Bb(C[li],C))}detach(Y){let ue=this._adjustIndex(Y,-1),C=bm(this._lContainer,ue);return C&&Fp(em(this._lContainer),ue)!=null?new Nc(C):null}_adjustIndex(Y,ue=0){return Y??this.length+ue}};function v2(q){return q[Bp]}function em(q){return q[Bp]||(q[Bp]=[])}function g_(q,Y){let ue,C=Y[q.index];return Fu(C)?ue=C:(ue=$6(C,Y,null,q),Y[q.index]=ue,hv(Y,ue)),NM(ue,Y,q,C),new p_(ue,q,Y)}function FM(q,Y){let ue=q[Ks],C=ue.createComment(""),A=du(Y,q),e=cv(ue,A);return Hp(ue,e,C,p6(ue,A),!1),C}var NM=zM;function zM(q,Y,ue,C){if(q[Oc])return;let A;ue.type&8?A=oc(C):A=FM(Y,ue),q[Oc]=A}var Lm=class q{constructor(Y){this.queryList=Y,this.matches=null}clone(){return new q(this.queryList)}setDirty(){this.queryList.setDirty()}},Om=class q{constructor(Y=[]){this.queries=Y}createEmbeddedView(Y){let ue=Y.queries;if(ue!==null){let C=Y.contentQueries!==null?Y.contentQueries[0]:ue.length,A=[];for(let e=0;e<C;e++){let v=ue.getByIndex(e),w=this.queries[v.indexInDeclarationView];A.push(w.clone())}return new q(A)}return null}insertView(Y){this.dirtyQueriesWithMatches(Y)}detachView(Y){this.dirtyQueriesWithMatches(Y)}finishViewCreation(Y){this.dirtyQueriesWithMatches(Y)}dirtyQueriesWithMatches(Y){for(let ue=0;ue<this.queries.length;ue++)vv(Y,ue).matches!==null&&this.queries[ue].setDirty()}},Pm=class{constructor(Y,ue,C=null){this.flags=ue,this.read=C,typeof Y=="string"?this.predicate=WM(Y):this.predicate=Y}},Rm=class q{constructor(Y=[]){this.queries=Y}elementStart(Y,ue){for(let C=0;C<this.queries.length;C++)this.queries[C].elementStart(Y,ue)}elementEnd(Y){for(let ue=0;ue<this.queries.length;ue++)this.queries[ue].elementEnd(Y)}embeddedTView(Y){let ue=null;for(let C=0;C<this.length;C++){let A=ue!==null?ue.length:0,e=this.getByIndex(C).embeddedTView(Y,A);e&&(e.indexInDeclarationView=C,ue!==null?ue.push(e):ue=[e])}return ue!==null?new q(ue):null}template(Y,ue){for(let C=0;C<this.queries.length;C++)this.queries[C].template(Y,ue)}getByIndex(Y){return this.queries[Y]}get length(){return this.queries.length}track(Y){this.queries.push(Y)}},Fm=class q{constructor(Y,ue=-1){this.metadata=Y,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=ue}elementStart(Y,ue){this.isApplyingToNode(ue)&&this.matchTNode(Y,ue)}elementEnd(Y){this._declarationNodeIndex===Y.index&&(this._appliesToNextNode=!1)}template(Y,ue){this.elementStart(Y,ue)}embeddedTView(Y,ue){return this.isApplyingToNode(Y)?(this.crossesNgTemplate=!0,this.addMatch(-Y.index,ue),new q(this.metadata)):null}isApplyingToNode(Y){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let ue=this._declarationNodeIndex,C=Y.parent;for(;C!==null&&C.type&8&&C.index!==ue;)C=C.parent;return ue===(C!==null?C.index:-1)}return this._appliesToNextNode}matchTNode(Y,ue){let C=this.metadata.predicate;if(Array.isArray(C))for(let A=0;A<C.length;A++){let e=C[A];this.matchTNodeWithReadOption(Y,ue,BM(ue,e)),this.matchTNodeWithReadOption(Y,ue,Ip(ue,Y,e,!1,!1))}else C===Hh?ue.type&4&&this.matchTNodeWithReadOption(Y,ue,-1):this.matchTNodeWithReadOption(Y,ue,Ip(ue,Y,C,!1,!1))}matchTNodeWithReadOption(Y,ue,C){if(C!==null){let A=this.metadata.read;if(A!==null)if(A===gu||A===qf||A===Hh&&ue.type&4)this.addMatch(ue.index,-2);else{let e=Ip(ue,Y,A,!1,!1);e!==null&&this.addMatch(ue.index,e)}else this.addMatch(ue.index,C)}}addMatch(Y,ue){this.matches===null?this.matches=[Y,ue]:this.matches.push(Y,ue)}};function BM(q,Y){let ue=q.localNames;if(ue!==null){for(let C=0;C<ue.length;C+=2)if(ue[C]===Y)return ue[C+1]}return null}function jM(q,Y){return q.type&11?Vf(q,Y):q.type&4?gv(q,Y):null}function VM(q,Y,ue,C){return ue===-1?jM(Y,q):ue===-2?UM(q,Y,C):Fc(q,q[li],ue,Y)}function UM(q,Y,ue){if(ue===gu)return Vf(Y,q);if(ue===Hh)return gv(Y,q);if(ue===qf)return g_(Y,q)}function m_(q,Y,ue,C){let A=Y[Ou].queries[C];if(A.matches===null){let e=q.data,v=ue.matches,w=[];for(let n=0;v!==null&&n<v.length;n+=2){let T=v[n];if(T<0)w.push(null);else{let x=e[T];w.push(VM(Y,x,v[n+1],ue.metadata.read))}}A.matches=w}return A.matches}function Nm(q,Y,ue,C){let A=q.queries.getByIndex(ue),e=A.matches;if(e!==null){let v=m_(q,Y,A,ue);for(let w=0;w<e.length;w+=2){let n=e[w];if(n>0)C.push(v[w/2]);else{let T=e[w+1],x=Y[-n];for(let f=Xs;f<x.length;f++){let s=x[f];s[$h]===s[Oa]&&Nm(s[li],s,T,C)}if(x[Ff]!==null){let f=x[Ff];for(let s=0;s<f.length;s++){let t=f[s];Nm(t[li],t,T,C)}}}}}return C}function HM(q,Y){return q[Ou].queries[Y].queryList}function qM(q,Y,ue){let C=new ym((ue&4)===4);return C6(q,Y,C,C.destroy),(Y[Ou]??=new Om).queries.push(new Lm(C))-1}function GM(q,Y,ue){let C=pu();return C.firstCreatePass&&(YM(C,new Pm(q,Y,ue),-1),(Y&2)===2&&(C.staticViewQueries=!0)),qM(C,Uo(),Y)}function WM(q){return q.split(",").map(Y=>Y.trim())}function YM(q,Y,ue){q.queries===null&&(q.queries=new Rm),q.queries.track(new Fm(Y,ue))}function vv(q,Y){return q.queries.getByIndex(Y)}function $M(q,Y){let ue=q[li],C=vv(ue,Y);return C.crossesNgTemplate?Nm(ue,q,Y,[]):m_(ue,q,C,Y)}var ac=class{},Wh=class{};var zm=class extends ac{constructor(Y,ue,C){super(),this._parent=ue,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Wp(this);let A=R2(Y);this._bootstrapComponents=Rb(A.bootstrap),this._r3Injector=Ab(Y,ue,[{provide:ac,useValue:this},{provide:l0,useValue:this.componentFactoryResolver},...C],Zs(Y),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(Y)}get injector(){return this._r3Injector}destroy(){let Y=this._r3Injector;!Y.destroyed&&Y.destroy(),this.destroyCbs.forEach(ue=>ue()),this.destroyCbs=null}onDestroy(Y){this.destroyCbs.push(Y)}},Bm=class extends Wh{constructor(Y){super(),this.moduleType=Y}create(Y){return new zm(this.moduleType,Y,[])}};var Yp=class extends ac{constructor(Y){super(),this.componentFactoryResolver=new Wp(this),this.instance=null;let ue=new zh([...Y.providers,{provide:ac,useValue:this},{provide:l0,useValue:this.componentFactoryResolver}],Y.parent||Km(),Y.debugName,new Set(["environment"]));this.injector=ue,Y.runEnvironmentInitializers&&ue.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(Y){this.injector.onDestroy(Y)}};function yv(q,Y,ue=null){return new Yp({providers:q,parent:Y,debugName:ue,runEnvironmentInitializers:!0}).injector}var u0=(()=>{let Y=class Y{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ra(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let C=this.taskId++;return this.pendingTasks.add(C),C}remove(C){this.pendingTasks.delete(C),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};Y.\u0275fac=function(A){return new(A||Y)},Y.\u0275prov=Yr({token:Y,factory:Y.\u0275fac,providedIn:"root"});let q=Y;return q})();function ZM(q,Y,ue){let C=q[Y];return Object.is(C,ue)?!1:(q[Y]=ue,!0)}function XM(q){return(q.flags&32)===32}function Vc(q,Y,ue){let C=Uo(),A=_T();if(ZM(C,A,Y)){let e=pu(),v=kT();O6(e,v,C,q,Y,C[Ks],ue,!1)}return Vc}function y2(q,Y,ue,C,A){let e=Y.inputs,v=A?"class":"style";dv(q,ue,e[v],v,C)}function KM(q,Y,ue,C,A,e){let v=Y.consts,w=Qx(v,A),n=s0(Y,q,2,C,w);return R6(Y,ue,n,Qx(v,e)),n.attrs!==null&&Cm(n,n.attrs,!1),n.mergedAttrs!==null&&Cm(n,n.mergedAttrs,!0),Y.queries!==null&&Y.queries.elementStart(Y,n),n}function xi(q,Y,ue,C){let A=Uo(),e=pu(),v=ic+q,w=A[Ks],n=e.firstCreatePass?KM(v,e,A,Y,ue,C):e.data[v],T=JM(e,A,n,w,Y,q);A[v]=T;let x=nT(n);return r0(n,!0),Yb(w,T,n),!XM(n)&&hb()&&Hb(e,A,T,n),pT()===0&&Nf(T,A),gT(),x&&(T6(e,A,n),Qb(e,n,A)),C!==null&&M6(A,n),xi}function no(){let q=Zl();nb()?rb():(q=q.parent,r0(q,!1));let Y=q;vT(Y)&&yT(),mT();let ue=pu();return ue.firstCreatePass&&(pb(ue,q),q2(q)&&ue.queries.elementEnd(q)),Y.classesWithoutHost!=null&&LT(Y)&&y2(ue,Y,Uo(),Y.classesWithoutHost,!0),Y.stylesWithoutHost!=null&&OT(Y)&&y2(ue,Y,Uo(),Y.stylesWithoutHost,!1),no}function Zo(q,Y,ue,C){return xi(q,Y,ue,C),no(),Zo}var JM=(q,Y,ue,C,A,e)=>(db(!0),Fb(C,A,ET()));var $p="en-US";var QM=$p;function eA(q){typeof q=="string"&&(QM=q.toLowerCase().replace(/_/g,"-"))}function tA(q,Y){let ue=null,C=O5(q);for(let A=0;A<Y.length;A++){let e=Y[A];if(e==="*"){ue=A;continue}if(C===null?I2(q,e,!0):F5(C,e))return A}return ue}function xv(q){let Y=Uo()[Yl][Js];if(!Y.projection){let ue=q?q.length:1,C=Y.projection=A5(ue,null),A=C.slice(),e=Y.child;for(;e!==null;){let v=q?tA(e,q):0;v!==null&&(A[v]?A[v].projectionNext=e:C[v]=e,A[v]=e),e=e.next}}}function bv(q,Y=0,ue){let C=Uo(),A=pu(),e=s0(A,ic+q,16,null,ue||null);e.projection===null&&(e.projection=Y),rb(),(!C[Bh]||eb())&&(e.flags&32)!==32&&y6(A,C,e)}function _v(q,Y,ue){GM(q,Y,ue)}function c0(q){let Y=Uo(),ue=pu(),C=ib();tv(C+1);let A=vv(ue,C);if(q.dirty&&cT(Y)===((A.metadata.flags&2)===2)){if(A.matches===null)q.reset([]);else{let e=$M(Y,C);q.reset(e,GT),q.notifyOnChanges()}return!0}return!1}function f0(){return HM(Uo(),ib())}function $a(q,Y=""){let ue=Uo(),C=pu(),A=q+ic,e=C.firstCreatePass?s0(C,A,1,Y,null):C.data[A],v=nA(C,ue,e,Y,q);ue[A]=v,hb()&&Hb(C,ue,v,e),r0(e,!1)}var nA=(q,Y,ue,C,A)=>(db(!0),i6(Y[Ks],C));function rA(q,Y,ue){let C=pu();if(C.firstCreatePass){let A=zf(q);jm(ue,C.data,C.blueprint,A,!0),jm(Y,C.data,C.blueprint,A,!1)}}function jm(q,Y,ue,C,A){if(q=cs(q),Array.isArray(q))for(let e=0;e<q.length;e++)jm(q[e],Y,ue,C,A);else{let e=pu(),v=Uo(),w=Zl(),n=Pf(q)?q:cs(q.provide),T=V2(q),x=w.providerIndexes&1048575,f=w.directiveStart,s=w.providerIndexes>>20;if(Pf(q)||!q.multi){let t=new Rc(T,A,wl),o=nm(n,Y,A?x:x+s,f);o===-1?(pm(Up(w,v),e,n),tm(e,q,Y.length),Y.push(n),w.directiveStart++,w.directiveEnd++,A&&(w.providerIndexes+=1048576),ue.push(t),v.push(t)):(ue[o]=t,v[o]=t)}else{let t=nm(n,Y,x+s,f),o=nm(n,Y,x,x+s),r=t>=0&&ue[t],i=o>=0&&ue[o];if(A&&!i||!A&&!r){pm(Up(w,v),e,n);let a=aA(A?oA:iA,ue.length,A,C,T);!A&&i&&(ue[o].providerFactory=a),tm(e,q,Y.length,0),Y.push(n),w.directiveStart++,w.directiveEnd++,A&&(w.providerIndexes+=1048576),ue.push(a),v.push(a)}else{let a=v_(ue[A?o:t],T,!A&&C);tm(e,q,t>-1?t:o,a)}!A&&C&&i&&ue[o].componentProviders++}}}function tm(q,Y,ue,C){let A=Pf(Y),e=Y5(Y);if(A||e){let n=(e?cs(Y.useClass):Y).prototype.ngOnDestroy;if(n){let T=q.destroyHooks||(q.destroyHooks=[]);if(!A&&Y.multi){let x=T.indexOf(ue);x===-1?T.push(ue,[C,n]):T[x+1].push(C,n)}else T.push(ue,n)}}}function v_(q,Y,ue){return ue&&q.componentProviders++,q.multi.push(Y)-1}function nm(q,Y,ue,C){for(let A=ue;A<C;A++)if(Y[A]===q)return A;return-1}function iA(q,Y,ue,C){return Vm(this.multi,[])}function oA(q,Y,ue,C){let A=this.multi,e;if(this.providerFactory){let v=this.providerFactory.componentProviders,w=Fc(ue,ue[li],this.providerFactory.index,C);e=w.slice(0,v),Vm(A,e);for(let n=v;n<w.length;n++)e.push(w[n])}else e=[],Vm(A,e);return e}function Vm(q,Y){for(let ue=0;ue<q.length;ue++){let C=q[ue];Y.push(C())}return Y}function aA(q,Y,ue,C,A){let e=new Rc(q,ue,wl);return e.multi=[],e.index=Y,e.componentProviders=0,v_(e,A,C&&!ue),e}function h0(q,Y=[]){return ue=>{ue.providersResolver=(C,A)=>rA(C,A?A(q):q,Y)}}var sA=(()=>{let Y=class Y{constructor(C){this._injector=C,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(C){if(!C.standalone)return null;if(!this.cachedInjectors.has(C)){let A=z2(!1,C.type),e=A.length>0?yv([A],this._injector,`Standalone[${C.type.name}]`):null;this.cachedInjectors.set(C,e)}return this.cachedInjectors.get(C)}ngOnDestroy(){try{for(let C of this.cachedInjectors.values())C!==null&&C.destroy()}finally{this.cachedInjectors.clear()}}};Y.\u0275prov=Yr({token:Y,providedIn:"environment",factory:()=>new Y(yi(xl))});let q=Y;return q})();function mu(q){h_("NgStandalone"),q.getStandaloneInjector=Y=>Y.get(sA).getOrCreateStandaloneInjector(q)}var d0=(()=>{let Y=class Y{log(C){console.log(C)}warn(C){console.warn(C)}};Y.\u0275fac=function(A){return new(A||Y)},Y.\u0275prov=Yr({token:Y,factory:Y.\u0275fac,providedIn:"platform"});let q=Y;return q})();var y_=new pi("");function Gf(q){return!!q&&typeof q.then=="function"}function x_(q){return!!q&&typeof q.subscribe=="function"}var b_=new pi(""),__=(()=>{let Y=class Y{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((C,A)=>{this.resolve=C,this.reject=A}),this.appInits=Nr(b_,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let C=[];for(let e of this.appInits){let v=e();if(Gf(v))C.push(v);else if(x_(v)){let w=new Promise((n,T)=>{v.subscribe({complete:n,error:T})});C.push(w)}}let A=()=>{this.done=!0,this.resolve()};Promise.all(C).then(()=>{A()}).catch(e=>{this.reject(e)}),C.length===0&&A(),this.initialized=!0}};Y.\u0275fac=function(A){return new(A||Y)},Y.\u0275prov=Yr({token:Y,factory:Y.\u0275fac,providedIn:"root"});let q=Y;return q})(),wv=new pi("");function lA(){hx(()=>{throw new Zr(600,!1)})}function uA(q){return q.isBoundToModule}function cA(q,Y,ue){try{let C=ue();return Gf(C)?C.catch(A=>{throw Y.runOutsideAngular(()=>q.handleError(A)),A}):C}catch(C){throw Y.runOutsideAngular(()=>q.handleError(C)),C}}var Jh=(()=>{let Y=class Y{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Nr(kb),this.afterRenderEffectManager=Nr(d_),this.externalTestViews=new Set,this.beforeRender=new us,this.afterTick=new us,this.componentTypes=[],this.components=[],this.isStable=Nr(u0).hasPendingTasks.pipe(Ii(C=>!C)),this._injector=Nr(xl)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(C,A){let e=C instanceof Gp;if(!this._injector.get(__).done){let t=!e&&P2(C),o=!1;throw new Zr(405,o)}let w;e?w=C:w=this._injector.get(l0).resolveComponentFactory(C),this.componentTypes.push(w.componentType);let n=uA(w)?void 0:this._injector.get(ac),T=A||w.selector,x=w.create(jf.NULL,[],T,n),f=x.location.nativeElement,s=x.injector.get(y_,null);return s?.registerApplication(f),x.onDestroy(()=>{this.detachView(x.hostView),rm(this.components,x),s?.unregisterApplication(f)}),this._loadComponent(x),x}tick(){this._tick(!0)}_tick(C){if(this._runningTick)throw new Zr(101,!1);let A=Ji(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(C)}catch(e){this.internalErrorHandler(e)}finally{this.afterTick.next(),this._runningTick=!1,Ji(A)}}detectChangesInAttachedViews(C){let A=0,e=this.afterRenderEffectManager;for(;;){if(A===a_)throw new Zr(103,!1);if(C){let v=A===0;this.beforeRender.next(v);for(let{_lView:w,notifyErrorHandler:n}of this._views)fA(w,v,n)}if(A++,e.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:v})=>Um(v))&&(e.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:v})=>Um(v))))break}}attachView(C){let A=C;this._views.push(A),A.attachToAppRef(this)}detachView(C){let A=C;rm(this._views,A),A.detachFromAppRef()}_loadComponent(C){this.attachView(C.hostView),this.tick(),this.components.push(C);let A=this._injector.get(wv,[]);[...this._bootstrapListeners,...A].forEach(e=>e(C))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(C=>C()),this._views.slice().forEach(C=>C.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(C){return this._destroyListeners.push(C),()=>rm(this._destroyListeners,C)}destroy(){if(this._destroyed)throw new Zr(406,!1);let C=this._injector;C.destroy&&!C.destroyed&&C.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};Y.\u0275fac=function(A){return new(A||Y)},Y.\u0275prov=Yr({token:Y,factory:Y.\u0275fac,providedIn:"root"});let q=Y;return q})();function rm(q,Y){let ue=q.indexOf(Y);ue>-1&&q.splice(ue,1)}function fA(q,Y,ue){!Y&&!Um(q)||hA(q,ue,Y)}function Um(q){return ev(q)}function hA(q,Y,ue){let C;ue?(C=0,q[Gr]|=1024):q[Gr]&64?C=0:C=1,s_(q,Y,C)}var Hm=class{constructor(Y,ue){this.ngModuleFactory=Y,this.componentFactories=ue}},Tv=(()=>{let Y=class Y{compileModuleSync(C){return new Bm(C)}compileModuleAsync(C){return Promise.resolve(this.compileModuleSync(C))}compileModuleAndAllComponentsSync(C){let A=this.compileModuleSync(C),e=R2(C),v=Rb(e.declarations).reduce((w,n)=>{let T=Ic(n);return T&&w.push(new Gh(T)),w},[]);return new Hm(A,v)}compileModuleAndAllComponentsAsync(C){return Promise.resolve(this.compileModuleAndAllComponentsSync(C))}clearCache(){}clearCacheFor(C){}getModuleId(C){}};Y.\u0275fac=function(A){return new(A||Y)},Y.\u0275prov=Yr({token:Y,factory:Y.\u0275fac,providedIn:"root"});let q=Y;return q})();var dA=(()=>{let Y=class Y{constructor(){this.zone=Nr($o),this.applicationRef=Nr(Jh)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};Y.\u0275fac=function(A){return new(A||Y)},Y.\u0275prov=Yr({token:Y,factory:Y.\u0275fac,providedIn:"root"});let q=Y;return q})();function pA(q){return[{provide:$o,useFactory:q},{provide:Of,multi:!0,useFactory:()=>{let Y=Nr(dA,{optional:!0});return()=>Y.initialize()}},{provide:Of,multi:!0,useFactory:()=>{let Y=Nr(yA);return()=>{Y.initialize()}}},{provide:kb,useFactory:gA}]}function gA(){let q=Nr($o),Y=Nr(Pu);return ue=>q.runOutsideAngular(()=>Y.handleError(ue))}function mA(q){let Y=pA(()=>new $o(vA(q)));return Qp([[],Y])}function vA(q){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:q?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:q?.runCoalescing??!1}}var yA=(()=>{let Y=class Y{constructor(){this.subscription=new na,this.initialized=!1,this.zone=Nr($o),this.pendingTasks=Nr(u0)}initialize(){if(this.initialized)return;this.initialized=!0;let C=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(C=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{$o.assertNotInAngularZone(),queueMicrotask(()=>{C!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(C),C=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{$o.assertInAngularZone(),C??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};Y.\u0275fac=function(A){return new(A||Y)},Y.\u0275prov=Yr({token:Y,factory:Y.\u0275fac,providedIn:"root"});let q=Y;return q})();function xA(){return typeof $localize<"u"&&$localize.locale||$p}var Mv=new pi("",{providedIn:"root",factory:()=>Nr(Mv,ci.Optional|ci.SkipSelf)||xA()});var w_=new pi("");var Op=null;function bA(q=[],Y){return jf.create({name:Y,providers:[{provide:e0,useValue:"platform"},{provide:w_,useValue:new Set([()=>Op=null])},...q]})}function _A(q=[]){if(Op)return Op;let Y=bA(q);return Op=Y,lA(),wA(Y),Y}function wA(q){q.get(av,null)?.forEach(ue=>ue())}var Wf=(()=>{let Y=class Y{};Y.__NG_ELEMENT_ID__=TA;let q=Y;return q})();function TA(q){return MA(Zl(),Uo(),(q&16)===16)}function MA(q,Y,ue){if(n0(q)&&!ue){let C=Bc(q.index,Y);return new Nc(C,C)}else if(q.type&47){let C=Y[Yl];return new Nc(C,Y)}return null}function T_(q){try{let{rootComponent:Y,appProviders:ue,platformProviders:C}=q,A=_A(C),e=[mA(),...ue||[]],w=new Yp({providers:e,parent:A,debugName:"",runEnvironmentInitializers:!1}).injector,n=w.get($o);return n.run(()=>{w.resolveInjectorInitializers();let T=w.get(Pu,null),x;n.runOutsideAngular(()=>{x=n.onError.subscribe({next:t=>{T.handleError(t)}})});let f=()=>w.destroy(),s=A.get(w_);return s.add(f),w.onDestroy(()=>{x.unsubscribe(),s.delete(f)}),cA(T,n,()=>{let t=w.get(__);return t.runInitializers(),t.donePromise.then(()=>{let o=w.get(Mv,$p);eA(o||$p);let r=w.get(Jh);return Y!==void 0&&r.bootstrap(Y),r})})})}catch(Y){return Promise.reject(Y)}}var S_=null;function Yf(){return S_}function E_(q){S_??=q}var p0=class{};var Tl=new pi(""),C_=(()=>{let Y=class Y{historyGo(C){throw new Error("")}};Y.\u0275fac=function(A){return new(A||Y)},Y.\u0275prov=Yr({token:Y,factory:()=>Nr(DA),providedIn:"platform"});let q=Y;return q})();var DA=(()=>{let Y=class Y extends C_{constructor(){super(),this._doc=Nr(Tl),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Yf().getBaseHref(this._doc)}onPopState(C){let A=Yf().getGlobalEventTarget(this._doc,"window");return A.addEventListener("popstate",C,!1),()=>A.removeEventListener("popstate",C)}onHashChange(C){let A=Yf().getGlobalEventTarget(this._doc,"window");return A.addEventListener("hashchange",C,!1),()=>A.removeEventListener("hashchange",C)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(C){this._location.pathname=C}pushState(C,A,e){this._history.pushState(C,A,e)}replaceState(C,A,e){this._history.replaceState(C,A,e)}forward(){this._history.forward()}back(){this._history.back()}historyGo(C=0){this._history.go(C)}getState(){return this._history.state}};Y.\u0275fac=function(A){return new(A||Y)},Y.\u0275prov=Yr({token:Y,factory:()=>new Y,providedIn:"platform"});let q=Y;return q})();function D_(q,Y){if(q.length==0)return Y;if(Y.length==0)return q;let ue=0;return q.endsWith("/")&&ue++,Y.startsWith("/")&&ue++,ue==2?q+Y.substring(1):ue==1?q+Y:q+"/"+Y}function M_(q){let Y=q.match(/#|\?|$/),ue=Y&&Y.index||q.length,C=ue-(q[ue-1]==="/"?1:0);return q.slice(0,C)+q.slice(ue)}function Uc(q){return q&&q[0]!=="?"?"?"+q:q}var m0=(()=>{let Y=class Y{historyGo(C){throw new Error("")}};Y.\u0275fac=function(A){return new(A||Y)},Y.\u0275prov=Yr({token:Y,factory:()=>Nr(I_),providedIn:"root"});let q=Y;return q})(),IA=new pi(""),I_=(()=>{let Y=class Y extends m0{constructor(C,A){super(),this._platformLocation=C,this._removeListenerFns=[],this._baseHref=A??this._platformLocation.getBaseHrefFromDOM()??Nr(Tl).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(C){this._removeListenerFns.push(this._platformLocation.onPopState(C),this._platformLocation.onHashChange(C))}getBaseHref(){return this._baseHref}prepareExternalUrl(C){return D_(this._baseHref,C)}path(C=!1){let A=this._platformLocation.pathname+Uc(this._platformLocation.search),e=this._platformLocation.hash;return e&&C?`${A}${e}`:A}pushState(C,A,e,v){let w=this.prepareExternalUrl(e+Uc(v));this._platformLocation.pushState(C,A,w)}replaceState(C,A,e,v){let w=this.prepareExternalUrl(e+Uc(v));this._platformLocation.replaceState(C,A,w)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(C=0){this._platformLocation.historyGo?.(C)}};Y.\u0275fac=function(A){return new(A||Y)(yi(C_),yi(IA,8))},Y.\u0275prov=Yr({token:Y,factory:Y.\u0275fac,providedIn:"root"});let q=Y;return q})();var Qh=(()=>{let Y=class Y{constructor(C){this._subject=new $s,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=C;let A=this._locationStrategy.getBaseHref();this._basePath=PA(M_(A_(A))),this._locationStrategy.onPopState(e=>{this._subject.emit({url:this.path(!0),pop:!0,state:e.state,type:e.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(C=!1){return this.normalize(this._locationStrategy.path(C))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(C,A=""){return this.path()==this.normalize(C+Uc(A))}normalize(C){return Y.stripTrailingSlash(OA(this._basePath,A_(C)))}prepareExternalUrl(C){return C&&C[0]!=="/"&&(C="/"+C),this._locationStrategy.prepareExternalUrl(C)}go(C,A="",e=null){this._locationStrategy.pushState(e,"",C,A),this._notifyUrlChangeListeners(this.prepareExternalUrl(C+Uc(A)),e)}replaceState(C,A="",e=null){this._locationStrategy.replaceState(e,"",C,A),this._notifyUrlChangeListeners(this.prepareExternalUrl(C+Uc(A)),e)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(C=0){this._locationStrategy.historyGo?.(C)}onUrlChange(C){return this._urlChangeListeners.push(C),this._urlChangeSubscription??=this.subscribe(A=>{this._notifyUrlChangeListeners(A.url,A.state)}),()=>{let A=this._urlChangeListeners.indexOf(C);this._urlChangeListeners.splice(A,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(C="",A){this._urlChangeListeners.forEach(e=>e(C,A))}subscribe(C,A,e){return this._subject.subscribe({next:C,error:A,complete:e})}};Y.normalizeQueryParams=Uc,Y.joinWithSlash=D_,Y.stripTrailingSlash=M_,Y.\u0275fac=function(A){return new(A||Y)(yi(m0))},Y.\u0275prov=Yr({token:Y,factory:()=>LA(),providedIn:"root"});let q=Y;return q})();function LA(){return new Qh(yi(m0))}function OA(q,Y){if(!q||!Y.startsWith(q))return Y;let ue=Y.substring(q.length);return ue===""||["/",";","?","#"].includes(ue[0])?ue:Y}function A_(q){return q.replace(/\/index.html$/,"")}function PA(q){if(new RegExp("^(https?:)?//").test(q)){let[,ue]=q.split(/\/\/[^\/]+/);return ue}return q}function L_(q,Y){Y=encodeURIComponent(Y);for(let ue of q.split(";")){let C=ue.indexOf("="),[A,e]=C==-1?[ue,""]:[ue.slice(0,C),ue.slice(C+1)];if(A.trim()===Y)return decodeURIComponent(e)}return null}var Nu=(()=>{let Y=class Y{};Y.\u0275fac=function(A){return new(A||Y)},Y.\u0275mod=_l({type:Y}),Y.\u0275inj=bl({});let q=Y;return q})(),O_="browser",RA="server";function kv(q){return q===RA}var g0=class{};var Cv=class extends p0{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Dv=class q extends Cv{static makeCurrent(){E_(new q)}onAndCancel(Y,ue,C){return Y.addEventListener(ue,C),()=>{Y.removeEventListener(ue,C)}}dispatchEvent(Y,ue){Y.dispatchEvent(ue)}remove(Y){Y.parentNode&&Y.parentNode.removeChild(Y)}createElement(Y,ue){return ue=ue||this.getDefaultDocument(),ue.createElement(Y)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Y){return Y.nodeType===Node.ELEMENT_NODE}isShadowRoot(Y){return Y instanceof DocumentFragment}getGlobalEventTarget(Y,ue){return ue==="window"?window:ue==="document"?Y:ue==="body"?Y.body:null}getBaseHref(Y){let ue=NA();return ue==null?null:zA(ue)}resetBaseElement(){ed=null}getUserAgent(){return window.navigator.userAgent}getCookie(Y){return L_(document.cookie,Y)}},ed=null;function NA(){return ed=ed||document.querySelector("base"),ed?ed.getAttribute("href"):null}function zA(q){return new URL(q,document.baseURI).pathname}var BA=(()=>{let Y=class Y{build(){return new XMLHttpRequest}};Y.\u0275fac=function(A){return new(A||Y)},Y.\u0275prov=Yr({token:Y,factory:Y.\u0275fac});let q=Y;return q})(),Iv=new pi(""),N_=(()=>{let Y=class Y{constructor(C,A){this._zone=A,this._eventNameToPlugin=new Map,C.forEach(e=>{e.manager=this}),this._plugins=C.slice().reverse()}addEventListener(C,A,e){return this._findPluginFor(A).addEventListener(C,A,e)}getZone(){return this._zone}_findPluginFor(C){let A=this._eventNameToPlugin.get(C);if(A)return A;if(A=this._plugins.find(v=>v.supports(C)),!A)throw new Zr(5101,!1);return this._eventNameToPlugin.set(C,A),A}};Y.\u0275fac=function(A){return new(A||Y)(yi(Iv),yi($o))},Y.\u0275prov=Yr({token:Y,factory:Y.\u0275fac});let q=Y;return q})(),v0=class{constructor(Y){this._doc=Y}},Sv="ng-app-id",z_=(()=>{let Y=class Y{constructor(C,A,e,v={}){this.doc=C,this.appId=A,this.nonce=e,this.platformId=v,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=kv(v),this.resetHostNodes()}addStyles(C){for(let A of C)this.changeUsageCount(A,1)===1&&this.onStyleAdded(A)}removeStyles(C){for(let A of C)this.changeUsageCount(A,-1)<=0&&this.onStyleRemoved(A)}ngOnDestroy(){let C=this.styleNodesInDOM;C&&(C.forEach(A=>A.remove()),C.clear());for(let A of this.getAllStyles())this.onStyleRemoved(A);this.resetHostNodes()}addHost(C){this.hostNodes.add(C);for(let A of this.getAllStyles())this.addStyleToHost(C,A)}removeHost(C){this.hostNodes.delete(C)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(C){for(let A of this.hostNodes)this.addStyleToHost(A,C)}onStyleRemoved(C){let A=this.styleRef;A.get(C)?.elements?.forEach(e=>e.remove()),A.delete(C)}collectServerRenderedStyles(){let C=this.doc.head?.querySelectorAll(`style[${Sv}="${this.appId}"]`);if(C?.length){let A=new Map;return C.forEach(e=>{e.textContent!=null&&A.set(e.textContent,e)}),A}return null}changeUsageCount(C,A){let e=this.styleRef;if(e.has(C)){let v=e.get(C);return v.usage+=A,v.usage}return e.set(C,{usage:A,elements:[]}),A}getStyleElement(C,A){let e=this.styleNodesInDOM,v=e?.get(A);if(v?.parentNode===C)return e.delete(A),v.removeAttribute(Sv),v;{let w=this.doc.createElement("style");return this.nonce&&w.setAttribute("nonce",this.nonce),w.textContent=A,this.platformIsServer&&w.setAttribute(Sv,this.appId),C.appendChild(w),w}}addStyleToHost(C,A){let e=this.getStyleElement(C,A),v=this.styleRef,w=v.get(A)?.elements;w?w.push(e):v.set(A,{elements:[e],usage:1})}resetHostNodes(){let C=this.hostNodes;C.clear(),C.add(this.doc.head)}};Y.\u0275fac=function(A){return new(A||Y)(yi(Tl),yi(ov),yi(sv,8),yi(Uf))},Y.\u0275prov=Yr({token:Y,factory:Y.\u0275fac});let q=Y;return q})(),Ev={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ov=/%COMP%/g,B_="%COMP%",jA=`_nghost-${B_}`,VA=`_ngcontent-${B_}`,UA=!0,HA=new pi("",{providedIn:"root",factory:()=>UA});function qA(q){return VA.replace(Ov,q)}function GA(q){return jA.replace(Ov,q)}function j_(q,Y){return Y.map(ue=>ue.replace(Ov,q))}var P_=(()=>{let Y=class Y{constructor(C,A,e,v,w,n,T,x=null){this.eventManager=C,this.sharedStylesHost=A,this.appId=e,this.removeStylesOnCompDestroy=v,this.doc=w,this.platformId=n,this.ngZone=T,this.nonce=x,this.rendererByCompId=new Map,this.platformIsServer=kv(n),this.defaultRenderer=new td(C,w,T,this.platformIsServer)}createRenderer(C,A){if(!C||!A)return this.defaultRenderer;this.platformIsServer&&A.encapsulation===fu.ShadowDom&&(A=bo(Fr({},A),{encapsulation:fu.Emulated}));let e=this.getOrCreateRenderer(C,A);return e instanceof y0?e.applyToHost(C):e instanceof nd&&e.applyStyles(),e}getOrCreateRenderer(C,A){let e=this.rendererByCompId,v=e.get(A.id);if(!v){let w=this.doc,n=this.ngZone,T=this.eventManager,x=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,s=this.platformIsServer;switch(A.encapsulation){case fu.Emulated:v=new y0(T,x,A,this.appId,f,w,n,s);break;case fu.ShadowDom:return new Lv(T,x,C,A,w,n,this.nonce,s);default:v=new nd(T,x,A,f,w,n,s);break}e.set(A.id,v)}return v}ngOnDestroy(){this.rendererByCompId.clear()}};Y.\u0275fac=function(A){return new(A||Y)(yi(N_),yi(z_),yi(ov),yi(HA),yi(Tl),yi(Uf),yi($o),yi(sv))},Y.\u0275prov=Yr({token:Y,factory:Y.\u0275fac});let q=Y;return q})(),td=class{constructor(Y,ue,C,A){this.eventManager=Y,this.doc=ue,this.ngZone=C,this.platformIsServer=A,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(Y,ue){return ue?this.doc.createElementNS(Ev[ue]||ue,Y):this.doc.createElement(Y)}createComment(Y){return this.doc.createComment(Y)}createText(Y){return this.doc.createTextNode(Y)}appendChild(Y,ue){(R_(Y)?Y.content:Y).appendChild(ue)}insertBefore(Y,ue,C){Y&&(R_(Y)?Y.content:Y).insertBefore(ue,C)}removeChild(Y,ue){Y&&Y.removeChild(ue)}selectRootElement(Y,ue){let C=typeof Y=="string"?this.doc.querySelector(Y):Y;if(!C)throw new Zr(-5104,!1);return ue||(C.textContent=""),C}parentNode(Y){return Y.parentNode}nextSibling(Y){return Y.nextSibling}setAttribute(Y,ue,C,A){if(A){ue=A+":"+ue;let e=Ev[A];e?Y.setAttributeNS(e,ue,C):Y.setAttribute(ue,C)}else Y.setAttribute(ue,C)}removeAttribute(Y,ue,C){if(C){let A=Ev[C];A?Y.removeAttributeNS(A,ue):Y.removeAttribute(`${C}:${ue}`)}else Y.removeAttribute(ue)}addClass(Y,ue){Y.classList.add(ue)}removeClass(Y,ue){Y.classList.remove(ue)}setStyle(Y,ue,C,A){A&(jc.DashCase|jc.Important)?Y.style.setProperty(ue,C,A&jc.Important?"important":""):Y.style[ue]=C}removeStyle(Y,ue,C){C&jc.DashCase?Y.style.removeProperty(ue):Y.style[ue]=""}setProperty(Y,ue,C){Y!=null&&(Y[ue]=C)}setValue(Y,ue){Y.nodeValue=ue}listen(Y,ue,C){if(typeof Y=="string"&&(Y=Yf().getGlobalEventTarget(this.doc,Y),!Y))throw new Error(`Unsupported event target ${Y} for event ${ue}`);return this.eventManager.addEventListener(Y,ue,this.decoratePreventDefault(C))}decoratePreventDefault(Y){return ue=>{if(ue==="__ngUnwrap__")return Y;(this.platformIsServer?this.ngZone.runGuarded(()=>Y(ue)):Y(ue))===!1&&ue.preventDefault()}}};function R_(q){return q.tagName==="TEMPLATE"&&q.content!==void 0}var Lv=class extends td{constructor(Y,ue,C,A,e,v,w,n){super(Y,e,v,n),this.sharedStylesHost=ue,this.hostEl=C,this.shadowRoot=C.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let T=j_(A.id,A.styles);for(let x of T){let f=document.createElement("style");w&&f.setAttribute("nonce",w),f.textContent=x,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(Y){return Y===this.hostEl?this.shadowRoot:Y}appendChild(Y,ue){return super.appendChild(this.nodeOrShadowRoot(Y),ue)}insertBefore(Y,ue,C){return super.insertBefore(this.nodeOrShadowRoot(Y),ue,C)}removeChild(Y,ue){return super.removeChild(this.nodeOrShadowRoot(Y),ue)}parentNode(Y){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Y)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},nd=class extends td{constructor(Y,ue,C,A,e,v,w,n){super(Y,e,v,w),this.sharedStylesHost=ue,this.removeStylesOnCompDestroy=A,this.styles=n?j_(n,C.styles):C.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},y0=class extends nd{constructor(Y,ue,C,A,e,v,w,n){let T=A+"-"+C.id;super(Y,ue,C,e,v,w,n,T),this.contentAttr=qA(T),this.hostAttr=GA(T)}applyToHost(Y){this.applyStyles(),this.setAttribute(Y,this.hostAttr,"")}createElement(Y,ue){let C=super.createElement(Y,ue);return super.setAttribute(C,this.contentAttr,""),C}},WA=(()=>{let Y=class Y extends v0{constructor(C){super(C)}supports(C){return!0}addEventListener(C,A,e){return C.addEventListener(A,e,!1),()=>this.removeEventListener(C,A,e)}removeEventListener(C,A,e){return C.removeEventListener(A,e)}};Y.\u0275fac=function(A){return new(A||Y)(yi(Tl))},Y.\u0275prov=Yr({token:Y,factory:Y.\u0275fac});let q=Y;return q})(),F_=["alt","control","meta","shift"],YA={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$A={alt:q=>q.altKey,control:q=>q.ctrlKey,meta:q=>q.metaKey,shift:q=>q.shiftKey},ZA=(()=>{let Y=class Y extends v0{constructor(C){super(C)}supports(C){return Y.parseEventName(C)!=null}addEventListener(C,A,e){let v=Y.parseEventName(A),w=Y.eventCallback(v.fullKey,e,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Yf().onAndCancel(C,v.domEventName,w))}static parseEventName(C){let A=C.toLowerCase().split("."),e=A.shift();if(A.length===0||!(e==="keydown"||e==="keyup"))return null;let v=Y._normalizeKey(A.pop()),w="",n=A.indexOf("code");if(n>-1&&(A.splice(n,1),w="code."),F_.forEach(x=>{let f=A.indexOf(x);f>-1&&(A.splice(f,1),w+=x+".")}),w+=v,A.length!=0||v.length===0)return null;let T={};return T.domEventName=e,T.fullKey=w,T}static matchEventFullKeyCode(C,A){let e=YA[C.key]||C.key,v="";return A.indexOf("code.")>-1&&(e=C.code,v="code."),e==null||!e?!1:(e=e.toLowerCase(),e===" "?e="space":e==="."&&(e="dot"),F_.forEach(w=>{if(w!==e){let n=$A[w];n(C)&&(v+=w+".")}}),v+=e,v===A)}static eventCallback(C,A,e){return v=>{Y.matchEventFullKeyCode(v,C)&&e.runGuarded(()=>A(v))}}static _normalizeKey(C){return C==="esc"?"escape":C}};Y.\u0275fac=function(A){return new(A||Y)(yi(Tl))},Y.\u0275prov=Yr({token:Y,factory:Y.\u0275fac});let q=Y;return q})();function V_(q,Y){return T_(Fr({rootComponent:q},XA(Y)))}function XA(q){return{appProviders:[...tk,...q?.providers??[]],platformProviders:ek}}function KA(){Dv.makeCurrent()}function JA(){return new Pu}function QA(){return Ob(document),document}var ek=[{provide:Uf,useValue:O_},{provide:av,useValue:KA,multi:!0},{provide:Tl,useFactory:QA,deps:[]}];var tk=[{provide:e0,useValue:"root"},{provide:Pu,useFactory:JA,deps:[]},{provide:Iv,useClass:WA,multi:!0,deps:[Tl,$o,Uf]},{provide:Iv,useClass:ZA,multi:!0,deps:[Tl]},P_,z_,N_,{provide:qh,useExisting:P_},{provide:g0,useClass:BA,deps:[]},[]];var U_=(()=>{let Y=class Y{constructor(C){this._doc=C}getTitle(){return this._doc.title}setTitle(C){this._doc.title=C||""}};Y.\u0275fac=function(A){return new(A||Y)(yi(Tl))},Y.\u0275prov=Yr({token:Y,factory:Y.\u0275fac,providedIn:"root"});let q=Y;return q})();var ii="primary",vd=Symbol("RouteTitle"),zv=class{constructor(Y){this.params=Y||{}}has(Y){return Object.prototype.hasOwnProperty.call(this.params,Y)}get(Y){if(this.has(Y)){let ue=this.params[Y];return Array.isArray(ue)?ue[0]:ue}return null}getAll(Y){if(this.has(Y)){let ue=this.params[Y];return Array.isArray(ue)?ue:[ue]}return[]}get keys(){return Object.keys(this.params)}};function Jf(q){return new zv(q)}function ik(q,Y,ue){let C=ue.path.split("/");if(C.length>q.length||ue.pathMatch==="full"&&(Y.hasChildren()||C.length<q.length))return null;let A={};for(let e=0;e<C.length;e++){let v=C[e],w=q[e];if(v.startsWith(":"))A[v.substring(1)]=w;else if(v!==w.path)return null}return{consumed:q.slice(0,C.length),posParams:A}}function ok(q,Y){if(q.length!==Y.length)return!1;for(let ue=0;ue<q.length;++ue)if(!yu(q[ue],Y[ue]))return!1;return!0}function yu(q,Y){let ue=q?Bv(q):void 0,C=Y?Bv(Y):void 0;if(!ue||!C||ue.length!=C.length)return!1;let A;for(let e=0;e<ue.length;e++)if(A=ue[e],!Z_(q[A],Y[A]))return!1;return!0}function Bv(q){return[...Object.keys(q),...Object.getOwnPropertySymbols(q)]}function Z_(q,Y){if(Array.isArray(q)&&Array.isArray(Y)){if(q.length!==Y.length)return!1;let ue=[...q].sort(),C=[...Y].sort();return ue.every((A,e)=>C[e]===A)}else return q===Y}function X_(q){return q.length>0?q[q.length-1]:null}function uc(q){return Bg(q)?q:Gf(q)?ia(Promise.resolve(q)):ti(q)}var ak={exact:J_,subset:Q_},K_={exact:sk,subset:lk,ignored:()=>!0};function H_(q,Y,ue){return ak[ue.paths](q.root,Y.root,ue.matrixParams)&&K_[ue.queryParams](q.queryParams,Y.queryParams)&&!(ue.fragment==="exact"&&q.fragment!==Y.fragment)}function sk(q,Y){return yu(q,Y)}function J_(q,Y,ue){if(!qc(q.segments,Y.segments)||!_0(q.segments,Y.segments,ue)||q.numberOfChildren!==Y.numberOfChildren)return!1;for(let C in Y.children)if(!q.children[C]||!J_(q.children[C],Y.children[C],ue))return!1;return!0}function lk(q,Y){return Object.keys(Y).length<=Object.keys(q).length&&Object.keys(Y).every(ue=>Z_(q[ue],Y[ue]))}function Q_(q,Y,ue){return ew(q,Y,Y.segments,ue)}function ew(q,Y,ue,C){if(q.segments.length>ue.length){let A=q.segments.slice(0,ue.length);return!(!qc(A,ue)||Y.hasChildren()||!_0(A,ue,C))}else if(q.segments.length===ue.length){if(!qc(q.segments,ue)||!_0(q.segments,ue,C))return!1;for(let A in Y.children)if(!q.children[A]||!Q_(q.children[A],Y.children[A],C))return!1;return!0}else{let A=ue.slice(0,q.segments.length),e=ue.slice(q.segments.length);return!qc(q.segments,A)||!_0(q.segments,A,C)||!q.children[ii]?!1:ew(q.children[ii],Y,e,C)}}function _0(q,Y,ue){return Y.every((C,A)=>K_[ue](q[A].parameters,C.parameters))}var sc=class{constructor(Y=new $i([],{}),ue={},C=null){this.root=Y,this.queryParams=ue,this.fragment=C}get queryParamMap(){return this._queryParamMap??=Jf(this.queryParams),this._queryParamMap}toString(){return fk.serialize(this)}},$i=class{constructor(Y,ue){this.segments=Y,this.children=ue,this.parent=null,Object.values(ue).forEach(C=>C.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return w0(this)}},Hc=class{constructor(Y,ue){this.path=Y,this.parameters=ue}get parameterMap(){return this._parameterMap??=Jf(this.parameters),this._parameterMap}toString(){return nw(this)}};function uk(q,Y){return qc(q,Y)&&q.every((ue,C)=>yu(ue.parameters,Y[C].parameters))}function qc(q,Y){return q.length!==Y.length?!1:q.every((ue,C)=>ue.path===Y[C].path)}function ck(q,Y){let ue=[];return Object.entries(q.children).forEach(([C,A])=>{C===ii&&(ue=ue.concat(Y(A,C)))}),Object.entries(q.children).forEach(([C,A])=>{C!==ii&&(ue=ue.concat(Y(A,C)))}),ue}var fy=(()=>{let Y=class Y{};Y.\u0275fac=function(A){return new(A||Y)},Y.\u0275prov=Yr({token:Y,factory:()=>new M0,providedIn:"root"});let q=Y;return q})(),M0=class{parse(Y){let ue=new Vv(Y);return new sc(ue.parseRootSegment(),ue.parseQueryParams(),ue.parseFragment())}serialize(Y){let ue=`/${rd(Y.root,!0)}`,C=pk(Y.queryParams),A=typeof Y.fragment=="string"?`#${hk(Y.fragment)}`:"";return`${ue}${C}${A}`}},fk=new M0;function w0(q){return q.segments.map(Y=>nw(Y)).join("/")}function rd(q,Y){if(!q.hasChildren())return w0(q);if(Y){let ue=q.children[ii]?rd(q.children[ii],!1):"",C=[];return Object.entries(q.children).forEach(([A,e])=>{A!==ii&&C.push(`${A}:${rd(e,!1)}`)}),C.length>0?`${ue}(${C.join("//")})`:ue}else{let ue=ck(q,(C,A)=>A===ii?[rd(q.children[ii],!1)]:[`${A}:${rd(C,!1)}`]);return Object.keys(q.children).length===1&&q.children[ii]!=null?`${w0(q)}/${ue[0]}`:`${w0(q)}/(${ue.join("//")})`}}function tw(q){return encodeURIComponent(q).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function x0(q){return tw(q).replace(/%3B/gi,";")}function hk(q){return encodeURI(q)}function jv(q){return tw(q).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function T0(q){return decodeURIComponent(q)}function q_(q){return T0(q.replace(/\+/g,"%20"))}function nw(q){return`${jv(q.path)}${dk(q.parameters)}`}function dk(q){return Object.entries(q).map(([Y,ue])=>`;${jv(Y)}=${jv(ue)}`).join("")}function pk(q){let Y=Object.entries(q).map(([ue,C])=>Array.isArray(C)?C.map(A=>`${x0(ue)}=${x0(A)}`).join("&"):`${x0(ue)}=${x0(C)}`).filter(ue=>ue);return Y.length?`?${Y.join("&")}`:""}var gk=/^[^\/()?;#]+/;function Pv(q){let Y=q.match(gk);return Y?Y[0]:""}var mk=/^[^\/()?;=#]+/;function vk(q){let Y=q.match(mk);return Y?Y[0]:""}var yk=/^[^=?&#]+/;function xk(q){let Y=q.match(yk);return Y?Y[0]:""}var bk=/^[^&#]+/;function _k(q){let Y=q.match(bk);return Y?Y[0]:""}var Vv=class{constructor(Y){this.url=Y,this.remaining=Y}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new $i([],{}):new $i([],this.parseChildren())}parseQueryParams(){let Y={};if(this.consumeOptional("?"))do this.parseQueryParam(Y);while(this.consumeOptional("&"));return Y}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let Y=[];for(this.peekStartsWith("(")||Y.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),Y.push(this.parseSegment());let ue={};this.peekStartsWith("/(")&&(this.capture("/"),ue=this.parseParens(!0));let C={};return this.peekStartsWith("(")&&(C=this.parseParens(!1)),(Y.length>0||Object.keys(ue).length>0)&&(C[ii]=new $i(Y,ue)),C}parseSegment(){let Y=Pv(this.remaining);if(Y===""&&this.peekStartsWith(";"))throw new Zr(4009,!1);return this.capture(Y),new Hc(T0(Y),this.parseMatrixParams())}parseMatrixParams(){let Y={};for(;this.consumeOptional(";");)this.parseParam(Y);return Y}parseParam(Y){let ue=vk(this.remaining);if(!ue)return;this.capture(ue);let C="";if(this.consumeOptional("=")){let A=Pv(this.remaining);A&&(C=A,this.capture(C))}Y[T0(ue)]=T0(C)}parseQueryParam(Y){let ue=xk(this.remaining);if(!ue)return;this.capture(ue);let C="";if(this.consumeOptional("=")){let v=_k(this.remaining);v&&(C=v,this.capture(C))}let A=q_(ue),e=q_(C);if(Y.hasOwnProperty(A)){let v=Y[A];Array.isArray(v)||(v=[v],Y[A]=v),v.push(e)}else Y[A]=e}parseParens(Y){let ue={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let C=Pv(this.remaining),A=this.remaining[C.length];if(A!=="/"&&A!==")"&&A!==";")throw new Zr(4010,!1);let e;C.indexOf(":")>-1?(e=C.slice(0,C.indexOf(":")),this.capture(e),this.capture(":")):Y&&(e=ii);let v=this.parseChildren();ue[e]=Object.keys(v).length===1?v[ii]:new $i([],v),this.consumeOptional("//")}return ue}peekStartsWith(Y){return this.remaining.startsWith(Y)}consumeOptional(Y){return this.peekStartsWith(Y)?(this.remaining=this.remaining.substring(Y.length),!0):!1}capture(Y){if(!this.consumeOptional(Y))throw new Zr(4011,!1)}};function rw(q){return q.segments.length>0?new $i([],{[ii]:q}):q}function iw(q){let Y={};for(let[C,A]of Object.entries(q.children)){let e=iw(A);if(C===ii&&e.segments.length===0&&e.hasChildren())for(let[v,w]of Object.entries(e.children))Y[v]=w;else(e.segments.length>0||e.hasChildren())&&(Y[C]=e)}let ue=new $i(q.segments,Y);return wk(ue)}function wk(q){if(q.numberOfChildren===1&&q.children[ii]){let Y=q.children[ii];return new $i(q.segments.concat(Y.segments),Y.children)}return q}function Qf(q){return q instanceof sc}function Tk(q,Y,ue=null,C=null){let A=ow(q);return aw(A,Y,ue,C)}function ow(q){let Y;function ue(e){let v={};for(let n of e.children){let T=ue(n);v[n.outlet]=T}let w=new $i(e.url,v);return e===q&&(Y=w),w}let C=ue(q.root),A=rw(C);return Y??A}function aw(q,Y,ue,C){let A=q;for(;A.parent;)A=A.parent;if(Y.length===0)return Rv(A,A,A,ue,C);let e=Mk(Y);if(e.toRoot())return Rv(A,A,new $i([],{}),ue,C);let v=Ak(e,A,q),w=v.processChildren?ad(v.segmentGroup,v.index,e.commands):lw(v.segmentGroup,v.index,e.commands);return Rv(A,v.segmentGroup,w,ue,C)}function A0(q){return typeof q=="object"&&q!=null&&!q.outlets&&!q.segmentPath}function ud(q){return typeof q=="object"&&q!=null&&q.outlets}function Rv(q,Y,ue,C,A){let e={};C&&Object.entries(C).forEach(([n,T])=>{e[n]=Array.isArray(T)?T.map(x=>`${x}`):`${T}`});let v;q===Y?v=ue:v=sw(q,Y,ue);let w=rw(iw(v));return new sc(w,e,A)}function sw(q,Y,ue){let C={};return Object.entries(q.children).forEach(([A,e])=>{e===Y?C[A]=ue:C[A]=sw(e,Y,ue)}),new $i(q.segments,C)}var k0=class{constructor(Y,ue,C){if(this.isAbsolute=Y,this.numberOfDoubleDots=ue,this.commands=C,Y&&C.length>0&&A0(C[0]))throw new Zr(4003,!1);let A=C.find(ud);if(A&&A!==X_(C))throw new Zr(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Mk(q){if(typeof q[0]=="string"&&q.length===1&&q[0]==="/")return new k0(!0,0,q);let Y=0,ue=!1,C=q.reduce((A,e,v)=>{if(typeof e=="object"&&e!=null){if(e.outlets){let w={};return Object.entries(e.outlets).forEach(([n,T])=>{w[n]=typeof T=="string"?T.split("/"):T}),[...A,{outlets:w}]}if(e.segmentPath)return[...A,e.segmentPath]}return typeof e!="string"?[...A,e]:v===0?(e.split("/").forEach((w,n)=>{n==0&&w==="."||(n==0&&w===""?ue=!0:w===".."?Y++:w!=""&&A.push(w))}),A):[...A,e]},[]);return new k0(ue,Y,C)}var Xf=class{constructor(Y,ue,C){this.segmentGroup=Y,this.processChildren=ue,this.index=C}};function Ak(q,Y,ue){if(q.isAbsolute)return new Xf(Y,!0,0);if(!ue)return new Xf(Y,!1,NaN);if(ue.parent===null)return new Xf(ue,!0,0);let C=A0(q.commands[0])?0:1,A=ue.segments.length-1+C;return kk(ue,A,q.numberOfDoubleDots)}function kk(q,Y,ue){let C=q,A=Y,e=ue;for(;e>A;){if(e-=A,C=C.parent,!C)throw new Zr(4005,!1);A=C.segments.length}return new Xf(C,!1,A-e)}function Sk(q){return ud(q[0])?q[0].outlets:{[ii]:q}}function lw(q,Y,ue){if(q??=new $i([],{}),q.segments.length===0&&q.hasChildren())return ad(q,Y,ue);let C=Ek(q,Y,ue),A=ue.slice(C.commandIndex);if(C.match&&C.pathIndex<q.segments.length){let e=new $i(q.segments.slice(0,C.pathIndex),{});return e.children[ii]=new $i(q.segments.slice(C.pathIndex),q.children),ad(e,0,A)}else return C.match&&A.length===0?new $i(q.segments,{}):C.match&&!q.hasChildren()?Uv(q,Y,ue):C.match?ad(q,0,A):Uv(q,Y,ue)}function ad(q,Y,ue){if(ue.length===0)return new $i(q.segments,{});{let C=Sk(ue),A={};if(Object.keys(C).some(e=>e!==ii)&&q.children[ii]&&q.numberOfChildren===1&&q.children[ii].segments.length===0){let e=ad(q.children[ii],Y,ue);return new $i(q.segments,e.children)}return Object.entries(C).forEach(([e,v])=>{typeof v=="string"&&(v=[v]),v!==null&&(A[e]=lw(q.children[e],Y,v))}),Object.entries(q.children).forEach(([e,v])=>{C[e]===void 0&&(A[e]=v)}),new $i(q.segments,A)}}function Ek(q,Y,ue){let C=0,A=Y,e={match:!1,pathIndex:0,commandIndex:0};for(;A<q.segments.length;){if(C>=ue.length)return e;let v=q.segments[A],w=ue[C];if(ud(w))break;let n=`${w}`,T=C<ue.length-1?ue[C+1]:null;if(A>0&&n===void 0)break;if(n&&T&&typeof T=="object"&&T.outlets===void 0){if(!W_(n,T,v))return e;C+=2}else{if(!W_(n,{},v))return e;C++}A++}return{match:!0,pathIndex:A,commandIndex:C}}function Uv(q,Y,ue){let C=q.segments.slice(0,Y),A=0;for(;A<ue.length;){let e=ue[A];if(ud(e)){let n=Ck(e.outlets);return new $i(C,n)}if(A===0&&A0(ue[0])){let n=q.segments[Y];C.push(new Hc(n.path,G_(ue[0]))),A++;continue}let v=ud(e)?e.outlets[ii]:`${e}`,w=A<ue.length-1?ue[A+1]:null;v&&w&&A0(w)?(C.push(new Hc(v,G_(w))),A+=2):(C.push(new Hc(v,{})),A++)}return new $i(C,{})}function Ck(q){let Y={};return Object.entries(q).forEach(([ue,C])=>{typeof C=="string"&&(C=[C]),C!==null&&(Y[ue]=Uv(new $i([],{}),0,C))}),Y}function G_(q){let Y={};return Object.entries(q).forEach(([ue,C])=>Y[ue]=`${C}`),Y}function W_(q,Y,ue){return q==ue.path&&yu(Y,ue.parameters)}var sd="imperative",Pa=function(q){return q[q.NavigationStart=0]="NavigationStart",q[q.NavigationEnd=1]="NavigationEnd",q[q.NavigationCancel=2]="NavigationCancel",q[q.NavigationError=3]="NavigationError",q[q.RoutesRecognized=4]="RoutesRecognized",q[q.ResolveStart=5]="ResolveStart",q[q.ResolveEnd=6]="ResolveEnd",q[q.GuardsCheckStart=7]="GuardsCheckStart",q[q.GuardsCheckEnd=8]="GuardsCheckEnd",q[q.RouteConfigLoadStart=9]="RouteConfigLoadStart",q[q.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",q[q.ChildActivationStart=11]="ChildActivationStart",q[q.ChildActivationEnd=12]="ChildActivationEnd",q[q.ActivationStart=13]="ActivationStart",q[q.ActivationEnd=14]="ActivationEnd",q[q.Scroll=15]="Scroll",q[q.NavigationSkipped=16]="NavigationSkipped",q}(Pa||{}),Ml=class{constructor(Y,ue){this.id=Y,this.url=ue}},cd=class extends Ml{constructor(Y,ue,C="imperative",A=null){super(Y,ue),this.type=Pa.NavigationStart,this.navigationTrigger=C,this.restoredState=A}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Gc=class extends Ml{constructor(Y,ue,C){super(Y,ue),this.urlAfterRedirects=C,this.type=Pa.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},el=function(q){return q[q.Redirect=0]="Redirect",q[q.SupersededByNewNavigation=1]="SupersededByNewNavigation",q[q.NoDataFromResolver=2]="NoDataFromResolver",q[q.GuardRejected=3]="GuardRejected",q}(el||{}),Hv=function(q){return q[q.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",q[q.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",q}(Hv||{}),lc=class extends Ml{constructor(Y,ue,C,A){super(Y,ue),this.reason=C,this.code=A,this.type=Pa.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Wc=class extends Ml{constructor(Y,ue,C,A){super(Y,ue),this.reason=C,this.code=A,this.type=Pa.NavigationSkipped}},fd=class extends Ml{constructor(Y,ue,C,A){super(Y,ue),this.error=C,this.target=A,this.type=Pa.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},S0=class extends Ml{constructor(Y,ue,C,A){super(Y,ue),this.urlAfterRedirects=C,this.state=A,this.type=Pa.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qv=class extends Ml{constructor(Y,ue,C,A){super(Y,ue),this.urlAfterRedirects=C,this.state=A,this.type=Pa.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gv=class extends Ml{constructor(Y,ue,C,A,e){super(Y,ue),this.urlAfterRedirects=C,this.state=A,this.shouldActivate=e,this.type=Pa.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Wv=class extends Ml{constructor(Y,ue,C,A){super(Y,ue),this.urlAfterRedirects=C,this.state=A,this.type=Pa.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yv=class extends Ml{constructor(Y,ue,C,A){super(Y,ue),this.urlAfterRedirects=C,this.state=A,this.type=Pa.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$v=class{constructor(Y){this.route=Y,this.type=Pa.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Zv=class{constructor(Y){this.route=Y,this.type=Pa.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Xv=class{constructor(Y){this.snapshot=Y,this.type=Pa.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Kv=class{constructor(Y){this.snapshot=Y,this.type=Pa.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Jv=class{constructor(Y){this.snapshot=Y,this.type=Pa.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qv=class{constructor(Y){this.snapshot=Y,this.type=Pa.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var hd=class{},dd=class{constructor(Y){this.url=Y}};var ey=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new O0,this.attachRef=null}},O0=(()=>{let Y=class Y{constructor(){this.contexts=new Map}onChildOutletCreated(C,A){let e=this.getOrCreateContext(C);e.outlet=A,this.contexts.set(C,e)}onChildOutletDestroyed(C){let A=this.getContext(C);A&&(A.outlet=null,A.attachRef=null)}onOutletDeactivated(){let C=this.contexts;return this.contexts=new Map,C}onOutletReAttached(C){this.contexts=C}getOrCreateContext(C){let A=this.getContext(C);return A||(A=new ey,this.contexts.set(C,A)),A}getContext(C){return this.contexts.get(C)||null}};Y.\u0275fac=function(A){return new(A||Y)},Y.\u0275prov=Yr({token:Y,factory:Y.\u0275fac,providedIn:"root"});let q=Y;return q})(),E0=class{constructor(Y){this._root=Y}get root(){return this._root.value}parent(Y){let ue=this.pathFromRoot(Y);return ue.length>1?ue[ue.length-2]:null}children(Y){let ue=ty(Y,this._root);return ue?ue.children.map(C=>C.value):[]}firstChild(Y){let ue=ty(Y,this._root);return ue&&ue.children.length>0?ue.children[0].value:null}siblings(Y){let ue=ny(Y,this._root);return ue.length<2?[]:ue[ue.length-2].children.map(A=>A.value).filter(A=>A!==Y)}pathFromRoot(Y){return ny(Y,this._root).map(ue=>ue.value)}};function ty(q,Y){if(q===Y.value)return Y;for(let ue of Y.children){let C=ty(q,ue);if(C)return C}return null}function ny(q,Y){if(q===Y.value)return[Y];for(let ue of Y.children){let C=ny(q,ue);if(C.length)return C.unshift(Y),C}return[]}var Qs=class{constructor(Y,ue){this.value=Y,this.children=ue}toString(){return`TreeNode(${this.value})`}};function Zf(q){let Y={};return q&&q.children.forEach(ue=>Y[ue.value.outlet]=ue),Y}var C0=class extends E0{constructor(Y,ue){super(Y),this.snapshot=ue,dy(this,Y)}toString(){return this.snapshot.toString()}};function uw(q){let Y=Dk(q),ue=new ra([new Hc("",{})]),C=new ra({}),A=new ra({}),e=new ra({}),v=new ra(""),w=new eh(ue,C,e,v,A,ii,q,Y.root);return w.snapshot=Y.root,new C0(new Qs(w,[]),Y)}function Dk(q){let Y={},ue={},C={},A="",e=new pd([],Y,C,A,ue,ii,q,null,{});return new D0("",new Qs(e,[]))}var eh=class{constructor(Y,ue,C,A,e,v,w,n){this.urlSubject=Y,this.paramsSubject=ue,this.queryParamsSubject=C,this.fragmentSubject=A,this.dataSubject=e,this.outlet=v,this.component=w,this._futureSnapshot=n,this.title=this.dataSubject?.pipe(Ii(T=>T[vd]))??ti(void 0),this.url=Y,this.params=ue,this.queryParams=C,this.fragment=A,this.data=e}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ii(Y=>Jf(Y))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ii(Y=>Jf(Y))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function hy(q,Y,ue="emptyOnly"){let C,{routeConfig:A}=q;return Y!==null&&(ue==="always"||A?.path===""||!Y.component&&!Y.routeConfig?.loadComponent)?C={params:Fr(Fr({},Y.params),q.params),data:Fr(Fr({},Y.data),q.data),resolve:Fr(Fr(Fr(Fr({},q.data),Y.data),A?.data),q._resolvedData)}:C={params:Fr({},q.params),data:Fr({},q.data),resolve:Fr(Fr({},q.data),q._resolvedData??{})},A&&fw(A)&&(C.resolve[vd]=A.title),C}var pd=class{get title(){return this.data?.[vd]}constructor(Y,ue,C,A,e,v,w,n,T){this.url=Y,this.params=ue,this.queryParams=C,this.fragment=A,this.data=e,this.outlet=v,this.component=w,this.routeConfig=n,this._resolve=T}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Jf(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Jf(this.queryParams),this._queryParamMap}toString(){let Y=this.url.map(C=>C.toString()).join("/"),ue=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${Y}', path:'${ue}')`}},D0=class extends E0{constructor(Y,ue){super(ue),this.url=Y,dy(this,ue)}toString(){return cw(this._root)}};function dy(q,Y){Y.value._routerState=q,Y.children.forEach(ue=>dy(q,ue))}function cw(q){let Y=q.children.length>0?` { ${q.children.map(cw).join(", ")} } `:"";return`${q.value}${Y}`}function Fv(q){if(q.snapshot){let Y=q.snapshot,ue=q._futureSnapshot;q.snapshot=ue,yu(Y.queryParams,ue.queryParams)||q.queryParamsSubject.next(ue.queryParams),Y.fragment!==ue.fragment&&q.fragmentSubject.next(ue.fragment),yu(Y.params,ue.params)||q.paramsSubject.next(ue.params),ok(Y.url,ue.url)||q.urlSubject.next(ue.url),yu(Y.data,ue.data)||q.dataSubject.next(ue.data)}else q.snapshot=q._futureSnapshot,q.dataSubject.next(q._futureSnapshot.data)}function ry(q,Y){let ue=yu(q.params,Y.params)&&uk(q.url,Y.url),C=!q.parent!=!Y.parent;return ue&&!C&&(!q.parent||ry(q.parent,Y.parent))}function fw(q){return typeof q.title=="string"||q.title===null}var Ik=(()=>{let Y=class Y{constructor(){this.activated=null,this._activatedRoute=null,this.name=ii,this.activateEvents=new $s,this.deactivateEvents=new $s,this.attachEvents=new $s,this.detachEvents=new $s,this.parentContexts=Nr(O0),this.location=Nr(qf),this.changeDetector=Nr(Wf),this.environmentInjector=Nr(xl),this.inputBinder=Nr(py,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(C){if(C.name){let{firstChange:A,previousValue:e}=C.name;if(A)return;this.isTrackedInParentContexts(e)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(e)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(C){return this.parentContexts.getContext(C)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let C=this.parentContexts.getContext(this.name);C?.route&&(C.attachRef?this.attach(C.attachRef,C.route):this.activateWith(C.route,C.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Zr(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Zr(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Zr(4012,!1);this.location.detach();let C=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(C.instance),C}attach(C,A){this.activated=C,this._activatedRoute=A,this.location.insert(C.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(C.instance)}deactivate(){if(this.activated){let C=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(C)}}activateWith(C,A){if(this.isActivated)throw new Zr(4013,!1);this._activatedRoute=C;let e=this.location,w=C.snapshot.component,n=this.parentContexts.getOrCreateContext(this.name).children,T=new iy(C,n,e.injector);this.activated=e.createComponent(w,{index:e.length,injector:T,environmentInjector:A??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};Y.\u0275fac=function(A){return new(A||Y)},Y.\u0275dir=Jp({type:Y,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Bf]});let q=Y;return q})(),iy=class q{__ngOutletInjector(Y){return new q(this.route,this.childContexts,Y)}constructor(Y,ue,C){this.route=Y,this.childContexts=ue,this.parent=C}get(Y,ue){return Y===eh?this.route:Y===O0?this.childContexts:this.parent.get(Y,ue)}},py=new pi("");function Lk(q,Y,ue){let C=gd(q,Y._root,ue?ue._root:void 0);return new C0(C,Y)}function gd(q,Y,ue){if(ue&&q.shouldReuseRoute(Y.value,ue.value.snapshot)){let C=ue.value;C._futureSnapshot=Y.value;let A=Ok(q,Y,ue);return new Qs(C,A)}else{if(q.shouldAttach(Y.value)){let e=q.retrieve(Y.value);if(e!==null){let v=e.route;return v.value._futureSnapshot=Y.value,v.children=Y.children.map(w=>gd(q,w)),v}}let C=Pk(Y.value),A=Y.children.map(e=>gd(q,e));return new Qs(C,A)}}function Ok(q,Y,ue){return Y.children.map(C=>{for(let A of ue.children)if(q.shouldReuseRoute(C.value,A.value.snapshot))return gd(q,C,A);return gd(q,C)})}function Pk(q){return new eh(new ra(q.url),new ra(q.params),new ra(q.queryParams),new ra(q.fragment),new ra(q.data),q.outlet,q.component,q)}var hw="ngNavigationCancelingError";function dw(q,Y){let{redirectTo:ue,navigationBehaviorOptions:C}=Qf(Y)?{redirectTo:Y,navigationBehaviorOptions:void 0}:Y,A=pw(!1,el.Redirect);return A.url=ue,A.navigationBehaviorOptions=C,A}function pw(q,Y){let ue=new Error(`NavigationCancelingError: ${q||""}`);return ue[hw]=!0,ue.cancellationCode=Y,ue}function Rk(q){return gw(q)&&Qf(q.url)}function gw(q){return!!q&&q[hw]}var Fk=(()=>{let Y=class Y{};Y.\u0275fac=function(A){return new(A||Y)},Y.\u0275cmp=$l({type:Y,selectors:[["ng-component"]],standalone:!0,features:[mu],decls:1,vars:0,template:function(A,e){A&1&&Zo(0,"router-outlet")},dependencies:[Ik],encapsulation:2});let q=Y;return q})();function Nk(q,Y){return q.providers&&!q._injector&&(q._injector=yv(q.providers,Y,`Route: ${q.path}`)),q._injector??Y}function gy(q){let Y=q.children&&q.children.map(gy),ue=Y?bo(Fr({},q),{children:Y}):Fr({},q);return!ue.component&&!ue.loadComponent&&(Y||ue.loadChildren)&&ue.outlet&&ue.outlet!==ii&&(ue.component=Fk),ue}function xu(q){return q.outlet||ii}function zk(q,Y){let ue=q.filter(C=>xu(C)===Y);return ue.push(...q.filter(C=>xu(C)!==Y)),ue}function yd(q){if(!q)return null;if(q.routeConfig?._injector)return q.routeConfig._injector;for(let Y=q.parent;Y;Y=Y.parent){let ue=Y.routeConfig;if(ue?._loadedInjector)return ue._loadedInjector;if(ue?._injector)return ue._injector}return null}var Bk=(q,Y,ue,C)=>Ii(A=>(new oy(Y,A.targetRouterState,A.currentRouterState,ue,C).activate(q),A)),oy=class{constructor(Y,ue,C,A,e){this.routeReuseStrategy=Y,this.futureState=ue,this.currState=C,this.forwardEvent=A,this.inputBindingEnabled=e}activate(Y){let ue=this.futureState._root,C=this.currState?this.currState._root:null;this.deactivateChildRoutes(ue,C,Y),Fv(this.futureState.root),this.activateChildRoutes(ue,C,Y)}deactivateChildRoutes(Y,ue,C){let A=Zf(ue);Y.children.forEach(e=>{let v=e.value.outlet;this.deactivateRoutes(e,A[v],C),delete A[v]}),Object.values(A).forEach(e=>{this.deactivateRouteAndItsChildren(e,C)})}deactivateRoutes(Y,ue,C){let A=Y.value,e=ue?ue.value:null;if(A===e)if(A.component){let v=C.getContext(A.outlet);v&&this.deactivateChildRoutes(Y,ue,v.children)}else this.deactivateChildRoutes(Y,ue,C);else e&&this.deactivateRouteAndItsChildren(ue,C)}deactivateRouteAndItsChildren(Y,ue){Y.value.component&&this.routeReuseStrategy.shouldDetach(Y.value.snapshot)?this.detachAndStoreRouteSubtree(Y,ue):this.deactivateRouteAndOutlet(Y,ue)}detachAndStoreRouteSubtree(Y,ue){let C=ue.getContext(Y.value.outlet),A=C&&Y.value.component?C.children:ue,e=Zf(Y);for(let v of Object.values(e))this.deactivateRouteAndItsChildren(v,A);if(C&&C.outlet){let v=C.outlet.detach(),w=C.children.onOutletDeactivated();this.routeReuseStrategy.store(Y.value.snapshot,{componentRef:v,route:Y,contexts:w})}}deactivateRouteAndOutlet(Y,ue){let C=ue.getContext(Y.value.outlet),A=C&&Y.value.component?C.children:ue,e=Zf(Y);for(let v of Object.values(e))this.deactivateRouteAndItsChildren(v,A);C&&(C.outlet&&(C.outlet.deactivate(),C.children.onOutletDeactivated()),C.attachRef=null,C.route=null)}activateChildRoutes(Y,ue,C){let A=Zf(ue);Y.children.forEach(e=>{this.activateRoutes(e,A[e.value.outlet],C),this.forwardEvent(new Qv(e.value.snapshot))}),Y.children.length&&this.forwardEvent(new Kv(Y.value.snapshot))}activateRoutes(Y,ue,C){let A=Y.value,e=ue?ue.value:null;if(Fv(A),A===e)if(A.component){let v=C.getOrCreateContext(A.outlet);this.activateChildRoutes(Y,ue,v.children)}else this.activateChildRoutes(Y,ue,C);else if(A.component){let v=C.getOrCreateContext(A.outlet);if(this.routeReuseStrategy.shouldAttach(A.snapshot)){let w=this.routeReuseStrategy.retrieve(A.snapshot);this.routeReuseStrategy.store(A.snapshot,null),v.children.onOutletReAttached(w.contexts),v.attachRef=w.componentRef,v.route=w.route.value,v.outlet&&v.outlet.attach(w.componentRef,w.route.value),Fv(w.route.value),this.activateChildRoutes(Y,null,v.children)}else{let w=yd(A.snapshot);v.attachRef=null,v.route=A,v.injector=w,v.outlet&&v.outlet.activateWith(A,v.injector),this.activateChildRoutes(Y,null,v.children)}}else this.activateChildRoutes(Y,null,C)}},I0=class{constructor(Y){this.path=Y,this.route=this.path[this.path.length-1]}},Kf=class{constructor(Y,ue){this.component=Y,this.route=ue}};function jk(q,Y,ue){let C=q._root,A=Y?Y._root:null;return id(C,A,ue,[C.value])}function Vk(q){let Y=q.routeConfig?q.routeConfig.canActivateChild:null;return!Y||Y.length===0?null:{node:q,guards:Y}}function nh(q,Y){let ue=Symbol(),C=Y.get(q,ue);return C===ue?typeof q=="function"&&!b2(q)?q:Y.get(q):C}function id(q,Y,ue,C,A={canDeactivateChecks:[],canActivateChecks:[]}){let e=Zf(Y);return q.children.forEach(v=>{Uk(v,e[v.value.outlet],ue,C.concat([v.value]),A),delete e[v.value.outlet]}),Object.entries(e).forEach(([v,w])=>ld(w,ue.getContext(v),A)),A}function Uk(q,Y,ue,C,A={canDeactivateChecks:[],canActivateChecks:[]}){let e=q.value,v=Y?Y.value:null,w=ue?ue.getContext(q.value.outlet):null;if(v&&e.routeConfig===v.routeConfig){let n=Hk(v,e,e.routeConfig.runGuardsAndResolvers);n?A.canActivateChecks.push(new I0(C)):(e.data=v.data,e._resolvedData=v._resolvedData),e.component?id(q,Y,w?w.children:null,C,A):id(q,Y,ue,C,A),n&&w&&w.outlet&&w.outlet.isActivated&&A.canDeactivateChecks.push(new Kf(w.outlet.component,v))}else v&&ld(Y,w,A),A.canActivateChecks.push(new I0(C)),e.component?id(q,null,w?w.children:null,C,A):id(q,null,ue,C,A);return A}function Hk(q,Y,ue){if(typeof ue=="function")return ue(q,Y);switch(ue){case"pathParamsChange":return!qc(q.url,Y.url);case"pathParamsOrQueryParamsChange":return!qc(q.url,Y.url)||!yu(q.queryParams,Y.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ry(q,Y)||!yu(q.queryParams,Y.queryParams);case"paramsChange":default:return!ry(q,Y)}}function ld(q,Y,ue){let C=Zf(q),A=q.value;Object.entries(C).forEach(([e,v])=>{A.component?Y?ld(v,Y.children.getContext(e),ue):ld(v,null,ue):ld(v,Y,ue)}),A.component?Y&&Y.outlet&&Y.outlet.isActivated?ue.canDeactivateChecks.push(new Kf(Y.outlet.component,A)):ue.canDeactivateChecks.push(new Kf(null,A)):ue.canDeactivateChecks.push(new Kf(null,A))}function xd(q){return typeof q=="function"}function qk(q){return typeof q=="boolean"}function Gk(q){return q&&xd(q.canLoad)}function Wk(q){return q&&xd(q.canActivate)}function Yk(q){return q&&xd(q.canActivateChild)}function $k(q){return q&&xd(q.canDeactivate)}function Zk(q){return q&&xd(q.canMatch)}function mw(q){return q instanceof Du||q?.name==="EmptyError"}var b0=Symbol("INITIAL_VALUE");function th(){return ql(q=>Ap(q.map(Y=>Y.pipe(Iu(1),qg(b0)))).pipe(Ii(Y=>{for(let ue of Y)if(ue!==!0){if(ue===b0)return b0;if(ue===!1||ue instanceof sc)return ue}return!0}),Hl(Y=>Y!==b0),Iu(1)))}function Xk(q,Y){return oa(ue=>{let{targetSnapshot:C,currentSnapshot:A,guards:{canActivateChecks:e,canDeactivateChecks:v}}=ue;return v.length===0&&e.length===0?ti(bo(Fr({},ue),{guardsResult:!0})):Kk(v,C,A,q).pipe(oa(w=>w&&qk(w)?Jk(C,e,q,Y):ti(w)),Ii(w=>bo(Fr({},ue),{guardsResult:w})))})}function Kk(q,Y,ue,C){return ia(q).pipe(oa(A=>r8(A.component,A.route,ue,Y,C)),lu(A=>A!==!0,!0))}function Jk(q,Y,ue,C){return ia(Y).pipe(Af(A=>Mf(e8(A.route.parent,C),Qk(A.route,C),n8(q,A.path,ue),t8(q,A.route,ue))),lu(A=>A!==!0,!0))}function Qk(q,Y){return q!==null&&Y&&Y(new Jv(q)),ti(!0)}function e8(q,Y){return q!==null&&Y&&Y(new Xv(q)),ti(!0)}function t8(q,Y,ue){let C=Y.routeConfig?Y.routeConfig.canActivate:null;if(!C||C.length===0)return ti(!0);let A=C.map(e=>kp(()=>{let v=yd(Y)??ue,w=nh(e,v),n=Wk(w)?w.canActivate(Y,q):zc(v,()=>w(Y,q));return uc(n).pipe(lu())}));return ti(A).pipe(th())}function n8(q,Y,ue){let C=Y[Y.length-1],e=Y.slice(0,Y.length-1).reverse().map(v=>Vk(v)).filter(v=>v!==null).map(v=>kp(()=>{let w=v.guards.map(n=>{let T=yd(v.node)??ue,x=nh(n,T),f=Yk(x)?x.canActivateChild(C,q):zc(T,()=>x(C,q));return uc(f).pipe(lu())});return ti(w).pipe(th())}));return ti(e).pipe(th())}function r8(q,Y,ue,C,A){let e=Y&&Y.routeConfig?Y.routeConfig.canDeactivate:null;if(!e||e.length===0)return ti(!0);let v=e.map(w=>{let n=yd(Y)??A,T=nh(w,n),x=$k(T)?T.canDeactivate(q,Y,ue,C):zc(n,()=>T(q,Y,ue,C));return uc(x).pipe(lu())});return ti(v).pipe(th())}function i8(q,Y,ue,C){let A=Y.canLoad;if(A===void 0||A.length===0)return ti(!0);let e=A.map(v=>{let w=nh(v,q),n=Gk(w)?w.canLoad(Y,ue):zc(q,()=>w(Y,ue));return uc(n)});return ti(e).pipe(th(),vw(C))}function vw(q){return Rg(La(Y=>{if(Qf(Y))throw dw(q,Y)}),Ii(Y=>Y===!0))}function o8(q,Y,ue,C){let A=Y.canMatch;if(!A||A.length===0)return ti(!0);let e=A.map(v=>{let w=nh(v,q),n=Zk(w)?w.canMatch(Y,ue):zc(q,()=>w(Y,ue));return uc(n)});return ti(e).pipe(th(),vw(C))}var md=class{constructor(Y){this.segmentGroup=Y||null}},L0=class extends Error{constructor(Y){super(),this.urlTree=Y}};function $f(q){return Tf(new md(q))}function a8(q){return Tf(new Zr(4e3,!1))}function s8(q){return Tf(pw(!1,el.GuardRejected))}var ay=class{constructor(Y,ue){this.urlSerializer=Y,this.urlTree=ue}lineralizeSegments(Y,ue){let C=[],A=ue.root;for(;;){if(C=C.concat(A.segments),A.numberOfChildren===0)return ti(C);if(A.numberOfChildren>1||!A.children[ii])return a8(Y.redirectTo);A=A.children[ii]}}applyRedirectCommands(Y,ue,C){let A=this.applyRedirectCreateUrlTree(ue,this.urlSerializer.parse(ue),Y,C);if(ue.startsWith("/"))throw new L0(A);return A}applyRedirectCreateUrlTree(Y,ue,C,A){let e=this.createSegmentGroup(Y,ue.root,C,A);return new sc(e,this.createQueryParams(ue.queryParams,this.urlTree.queryParams),ue.fragment)}createQueryParams(Y,ue){let C={};return Object.entries(Y).forEach(([A,e])=>{if(typeof e=="string"&&e.startsWith(":")){let w=e.substring(1);C[A]=ue[w]}else C[A]=e}),C}createSegmentGroup(Y,ue,C,A){let e=this.createSegments(Y,ue.segments,C,A),v={};return Object.entries(ue.children).forEach(([w,n])=>{v[w]=this.createSegmentGroup(Y,n,C,A)}),new $i(e,v)}createSegments(Y,ue,C,A){return ue.map(e=>e.path.startsWith(":")?this.findPosParam(Y,e,A):this.findOrReturn(e,C))}findPosParam(Y,ue,C){let A=C[ue.path.substring(1)];if(!A)throw new Zr(4001,!1);return A}findOrReturn(Y,ue){let C=0;for(let A of ue){if(A.path===Y.path)return ue.splice(C),A;C++}return Y}},sy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function l8(q,Y,ue,C,A){let e=my(q,Y,ue);return e.matched?(C=Nk(Y,C),o8(C,Y,ue,A).pipe(Ii(v=>v===!0?e:Fr({},sy)))):ti(e)}function my(q,Y,ue){if(Y.path==="**")return u8(ue);if(Y.path==="")return Y.pathMatch==="full"&&(q.hasChildren()||ue.length>0)?Fr({},sy):{matched:!0,consumedSegments:[],remainingSegments:ue,parameters:{},positionalParamSegments:{}};let A=(Y.matcher||ik)(ue,q,Y);if(!A)return Fr({},sy);let e={};Object.entries(A.posParams??{}).forEach(([w,n])=>{e[w]=n.path});let v=A.consumed.length>0?Fr(Fr({},e),A.consumed[A.consumed.length-1].parameters):e;return{matched:!0,consumedSegments:A.consumed,remainingSegments:ue.slice(A.consumed.length),parameters:v,positionalParamSegments:A.posParams??{}}}function u8(q){return{matched:!0,parameters:q.length>0?X_(q).parameters:{},consumedSegments:q,remainingSegments:[],positionalParamSegments:{}}}function Y_(q,Y,ue,C){return ue.length>0&&h8(q,ue,C)?{segmentGroup:new $i(Y,f8(C,new $i(ue,q.children))),slicedSegments:[]}:ue.length===0&&d8(q,ue,C)?{segmentGroup:new $i(q.segments,c8(q,ue,C,q.children)),slicedSegments:ue}:{segmentGroup:new $i(q.segments,q.children),slicedSegments:ue}}function c8(q,Y,ue,C){let A={};for(let e of ue)if(P0(q,Y,e)&&!C[xu(e)]){let v=new $i([],{});A[xu(e)]=v}return Fr(Fr({},C),A)}function f8(q,Y){let ue={};ue[ii]=Y;for(let C of q)if(C.path===""&&xu(C)!==ii){let A=new $i([],{});ue[xu(C)]=A}return ue}function h8(q,Y,ue){return ue.some(C=>P0(q,Y,C)&&xu(C)!==ii)}function d8(q,Y,ue){return ue.some(C=>P0(q,Y,C))}function P0(q,Y,ue){return(q.hasChildren()||Y.length>0)&&ue.pathMatch==="full"?!1:ue.path===""}function p8(q,Y,ue,C){return xu(q)!==C&&(C===ii||!P0(Y,ue,q))?!1:my(Y,q,ue).matched}function g8(q,Y,ue){return Y.length===0&&!q.children[ue]}var ly=class{};function m8(q,Y,ue,C,A,e,v="emptyOnly"){return new uy(q,Y,ue,C,A,v,e).recognize()}var v8=31,uy=class{constructor(Y,ue,C,A,e,v,w){this.injector=Y,this.configLoader=ue,this.rootComponentType=C,this.config=A,this.urlTree=e,this.paramsInheritanceStrategy=v,this.urlSerializer=w,this.applyRedirects=new ay(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(Y){return new Zr(4002,`'${Y.segmentGroup}'`)}recognize(){let Y=Y_(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(Y).pipe(Ii(ue=>{let C=new pd([],Object.freeze({}),Object.freeze(Fr({},this.urlTree.queryParams)),this.urlTree.fragment,{},ii,this.rootComponentType,null,{}),A=new Qs(C,ue),e=new D0("",A),v=Tk(C,[],this.urlTree.queryParams,this.urlTree.fragment);return v.queryParams=this.urlTree.queryParams,e.url=this.urlSerializer.serialize(v),this.inheritParamsAndData(e._root,null),{state:e,tree:v}}))}match(Y){return this.processSegmentGroup(this.injector,this.config,Y,ii).pipe(Ju(C=>{if(C instanceof L0)return this.urlTree=C.urlTree,this.match(C.urlTree.root);throw C instanceof md?this.noMatchError(C):C}))}inheritParamsAndData(Y,ue){let C=Y.value,A=hy(C,ue,this.paramsInheritanceStrategy);C.params=Object.freeze(A.params),C.data=Object.freeze(A.data),Y.children.forEach(e=>this.inheritParamsAndData(e,C))}processSegmentGroup(Y,ue,C,A){return C.segments.length===0&&C.hasChildren()?this.processChildren(Y,ue,C):this.processSegment(Y,ue,C,C.segments,A,!0).pipe(Ii(e=>e instanceof Qs?[e]:[]))}processChildren(Y,ue,C){let A=[];for(let e of Object.keys(C.children))e==="primary"?A.unshift(e):A.push(e);return ia(A).pipe(Af(e=>{let v=C.children[e],w=zk(ue,e);return this.processSegmentGroup(Y,w,v,e)}),Hg((e,v)=>(e.push(...v),e)),Qu(null),Ug(),oa(e=>{if(e===null)return $f(C);let v=yw(e);return y8(v),ti(v)}))}processSegment(Y,ue,C,A,e,v){return ia(ue).pipe(Af(w=>this.processSegmentAgainstRoute(w._injector??Y,ue,w,C,A,e,v).pipe(Ju(n=>{if(n instanceof md)return ti(null);throw n}))),lu(w=>!!w),Ju(w=>{if(mw(w))return g8(C,A,e)?ti(new ly):$f(C);throw w}))}processSegmentAgainstRoute(Y,ue,C,A,e,v,w){return p8(C,A,e,v)?C.redirectTo===void 0?this.matchSegmentAgainstRoute(Y,A,C,e,v):this.allowRedirects&&w?this.expandSegmentAgainstRouteUsingRedirect(Y,A,ue,C,e,v):$f(A):$f(A)}expandSegmentAgainstRouteUsingRedirect(Y,ue,C,A,e,v){let{matched:w,consumedSegments:n,positionalParamSegments:T,remainingSegments:x}=my(ue,A,e);if(!w)return $f(ue);A.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>v8&&(this.allowRedirects=!1));let f=this.applyRedirects.applyRedirectCommands(n,A.redirectTo,T);return this.applyRedirects.lineralizeSegments(A,f).pipe(oa(s=>this.processSegment(Y,C,ue,s.concat(x),v,!1)))}matchSegmentAgainstRoute(Y,ue,C,A,e){let v=l8(ue,C,A,Y,this.urlSerializer);return C.path==="**"&&(ue.children={}),v.pipe(ql(w=>w.matched?(Y=C._injector??Y,this.getChildConfig(Y,C,A).pipe(ql(({routes:n})=>{let T=C._loadedInjector??Y,{consumedSegments:x,remainingSegments:f,parameters:s}=w,t=new pd(x,s,Object.freeze(Fr({},this.urlTree.queryParams)),this.urlTree.fragment,b8(C),xu(C),C.component??C._loadedComponent??null,C,_8(C)),{segmentGroup:o,slicedSegments:r}=Y_(ue,x,f,n);if(r.length===0&&o.hasChildren())return this.processChildren(T,n,o).pipe(Ii(a=>a===null?null:new Qs(t,a)));if(n.length===0&&r.length===0)return ti(new Qs(t,[]));let i=xu(C)===e;return this.processSegment(T,n,o,r,i?ii:e,!0).pipe(Ii(a=>new Qs(t,a instanceof Qs?[a]:[])))}))):$f(ue)))}getChildConfig(Y,ue,C){return ue.children?ti({routes:ue.children,injector:Y}):ue.loadChildren?ue._loadedRoutes!==void 0?ti({routes:ue._loadedRoutes,injector:ue._loadedInjector}):i8(Y,ue,C,this.urlSerializer).pipe(oa(A=>A?this.configLoader.loadChildren(Y,ue).pipe(La(e=>{ue._loadedRoutes=e.routes,ue._loadedInjector=e.injector})):s8(ue))):ti({routes:[],injector:Y})}};function y8(q){q.sort((Y,ue)=>Y.value.outlet===ii?-1:ue.value.outlet===ii?1:Y.value.outlet.localeCompare(ue.value.outlet))}function x8(q){let Y=q.value.routeConfig;return Y&&Y.path===""}function yw(q){let Y=[],ue=new Set;for(let C of q){if(!x8(C)){Y.push(C);continue}let A=Y.find(e=>C.value.routeConfig===e.value.routeConfig);A!==void 0?(A.children.push(...C.children),ue.add(A)):Y.push(C)}for(let C of ue){let A=yw(C.children);Y.push(new Qs(C.value,A))}return Y.filter(C=>!ue.has(C))}function b8(q){return q.data||{}}function _8(q){return q.resolve||{}}function w8(q,Y,ue,C,A,e){return oa(v=>m8(q,Y,ue,C,v.extractedUrl,A,e).pipe(Ii(({state:w,tree:n})=>bo(Fr({},v),{targetSnapshot:w,urlAfterRedirects:n}))))}function T8(q,Y){return oa(ue=>{let{targetSnapshot:C,guards:{canActivateChecks:A}}=ue;if(!A.length)return ti(ue);let e=new Set(A.map(n=>n.route)),v=new Set;for(let n of e)if(!v.has(n))for(let T of xw(n))v.add(T);let w=0;return ia(v).pipe(Af(n=>e.has(n)?M8(n,C,q,Y):(n.data=hy(n,n.parent,q).resolve,ti(void 0))),La(()=>w++),kf(1),oa(n=>w===v.size?ti(ue):Ys))})}function xw(q){let Y=q.children.map(ue=>xw(ue)).flat();return[q,...Y]}function M8(q,Y,ue,C){let A=q.routeConfig,e=q._resolve;return A?.title!==void 0&&!fw(A)&&(e[vd]=A.title),A8(e,q,Y,C).pipe(Ii(v=>(q._resolvedData=v,q.data=hy(q,q.parent,ue).resolve,null)))}function A8(q,Y,ue,C){let A=Bv(q);if(A.length===0)return ti({});let e={};return ia(A).pipe(oa(v=>k8(q[v],Y,ue,C).pipe(lu(),La(w=>{e[v]=w}))),kf(1),Vg(e),Ju(v=>mw(v)?Ys:Tf(v)))}function k8(q,Y,ue,C){let A=yd(Y)??C,e=nh(q,A),v=e.resolve?e.resolve(Y,ue):zc(A,()=>e(Y,ue));return uc(v)}function Nv(q){return ql(Y=>{let ue=q(Y);return ue?ia(ue).pipe(Ii(()=>Y)):ti(Y)})}var bw=(()=>{let Y=class Y{buildTitle(C){let A,e=C.root;for(;e!==void 0;)A=this.getResolvedTitleForRoute(e)??A,e=e.children.find(v=>v.outlet===ii);return A}getResolvedTitleForRoute(C){return C.data[vd]}};Y.\u0275fac=function(A){return new(A||Y)},Y.\u0275prov=Yr({token:Y,factory:()=>Nr(S8),providedIn:"root"});let q=Y;return q})(),S8=(()=>{let Y=class Y extends bw{constructor(C){super(),this.title=C}updateTitle(C){let A=this.buildTitle(C);A!==void 0&&this.title.setTitle(A)}};Y.\u0275fac=function(A){return new(A||Y)(yi(U_))},Y.\u0275prov=Yr({token:Y,factory:Y.\u0275fac,providedIn:"root"});let q=Y;return q})(),vy=new pi("",{providedIn:"root",factory:()=>({})}),yy=new pi(""),E8=(()=>{let Y=class Y{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Nr(Tv)}loadComponent(C){if(this.componentLoaders.get(C))return this.componentLoaders.get(C);if(C._loadedComponent)return ti(C._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(C);let A=uc(C.loadComponent()).pipe(Ii(_w),La(v=>{this.onLoadEndListener&&this.onLoadEndListener(C),C._loadedComponent=v}),Oh(()=>{this.componentLoaders.delete(C)})),e=new wf(A,()=>new us).pipe(_f());return this.componentLoaders.set(C,e),e}loadChildren(C,A){if(this.childrenLoaders.get(A))return this.childrenLoaders.get(A);if(A._loadedRoutes)return ti({routes:A._loadedRoutes,injector:A._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(A);let v=C8(A,this.compiler,C,this.onLoadEndListener).pipe(Oh(()=>{this.childrenLoaders.delete(A)})),w=new wf(v,()=>new us).pipe(_f());return this.childrenLoaders.set(A,w),w}};Y.\u0275fac=function(A){return new(A||Y)},Y.\u0275prov=Yr({token:Y,factory:Y.\u0275fac,providedIn:"root"});let q=Y;return q})();function C8(q,Y,ue,C){return uc(q.loadChildren()).pipe(Ii(_w),oa(A=>A instanceof Wh||Array.isArray(A)?ti(A):ia(Y.compileModuleAsync(A))),Ii(A=>{C&&C(q);let e,v,w=!1;return Array.isArray(A)?(v=A,w=!0):(e=A.create(ue).injector,v=e.get(yy,[],{optional:!0,self:!0}).flat()),{routes:v.map(gy),injector:e}}))}function D8(q){return q&&typeof q=="object"&&"default"in q}function _w(q){return D8(q)?q.default:q}var xy=(()=>{let Y=class Y{};Y.\u0275fac=function(A){return new(A||Y)},Y.\u0275prov=Yr({token:Y,factory:()=>Nr(I8),providedIn:"root"});let q=Y;return q})(),I8=(()=>{let Y=class Y{shouldProcessUrl(C){return!0}extract(C){return C}merge(C,A){return C}};Y.\u0275fac=function(A){return new(A||Y)},Y.\u0275prov=Yr({token:Y,factory:Y.\u0275fac,providedIn:"root"});let q=Y;return q})(),L8=new pi("");var O8=(()=>{let Y=class Y{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new us,this.transitionAbortSubject=new us,this.configLoader=Nr(E8),this.environmentInjector=Nr(xl),this.urlSerializer=Nr(fy),this.rootContexts=Nr(O0),this.location=Nr(Qh),this.inputBindingEnabled=Nr(py,{optional:!0})!==null,this.titleStrategy=Nr(bw),this.options=Nr(vy,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Nr(xy),this.createViewTransition=Nr(L8,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ti(void 0),this.rootComponentType=null;let C=e=>this.events.next(new $v(e)),A=e=>this.events.next(new Zv(e));this.configLoader.onLoadEndListener=A,this.configLoader.onLoadStartListener=C}complete(){this.transitions?.complete()}handleNavigationRequest(C){let A=++this.navigationId;this.transitions?.next(bo(Fr(Fr({},this.transitions.value),C),{id:A}))}setupNavigations(C,A,e){return this.transitions=new ra({id:0,currentUrlTree:A,currentRawUrl:A,extractedUrl:this.urlHandlingStrategy.extract(A),urlAfterRedirects:this.urlHandlingStrategy.extract(A),rawUrl:A,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:sd,restoredState:null,currentSnapshot:e.snapshot,targetSnapshot:null,currentRouterState:e,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Hl(v=>v.id!==0),Ii(v=>bo(Fr({},v),{extractedUrl:this.urlHandlingStrategy.extract(v.rawUrl)})),ql(v=>{let w=!1,n=!1;return ti(v).pipe(ql(T=>{if(this.navigationId>v.id)return this.cancelNavigationTransition(v,"",el.SupersededByNewNavigation),Ys;this.currentTransition=v,this.currentNavigation={id:T.id,initialUrl:T.rawUrl,extractedUrl:T.extractedUrl,trigger:T.source,extras:T.extras,previousNavigation:this.lastSuccessfulNavigation?bo(Fr({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let x=!C.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=T.extras.onSameUrlNavigation??C.onSameUrlNavigation;if(!x&&f!=="reload"){let s="";return this.events.next(new Wc(T.id,this.urlSerializer.serialize(T.rawUrl),s,Hv.IgnoredSameUrlNavigation)),T.resolve(null),Ys}if(this.urlHandlingStrategy.shouldProcessUrl(T.rawUrl))return ti(T).pipe(ql(s=>{let t=this.transitions?.getValue();return this.events.next(new cd(s.id,this.urlSerializer.serialize(s.extractedUrl),s.source,s.restoredState)),t!==this.transitions?.getValue()?Ys:Promise.resolve(s)}),w8(this.environmentInjector,this.configLoader,this.rootComponentType,C.config,this.urlSerializer,this.paramsInheritanceStrategy),La(s=>{v.targetSnapshot=s.targetSnapshot,v.urlAfterRedirects=s.urlAfterRedirects,this.currentNavigation=bo(Fr({},this.currentNavigation),{finalUrl:s.urlAfterRedirects});let t=new S0(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(t)}));if(x&&this.urlHandlingStrategy.shouldProcessUrl(T.currentRawUrl)){let{id:s,extractedUrl:t,source:o,restoredState:r,extras:i}=T,a=new cd(s,this.urlSerializer.serialize(t),o,r);this.events.next(a);let u=uw(this.rootComponentType).snapshot;return this.currentTransition=v=bo(Fr({},T),{targetSnapshot:u,urlAfterRedirects:t,extras:bo(Fr({},i),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=t,ti(v)}else{let s="";return this.events.next(new Wc(T.id,this.urlSerializer.serialize(T.extractedUrl),s,Hv.IgnoredByUrlHandlingStrategy)),T.resolve(null),Ys}}),La(T=>{let x=new qv(T.id,this.urlSerializer.serialize(T.extractedUrl),this.urlSerializer.serialize(T.urlAfterRedirects),T.targetSnapshot);this.events.next(x)}),Ii(T=>(this.currentTransition=v=bo(Fr({},T),{guards:jk(T.targetSnapshot,T.currentSnapshot,this.rootContexts)}),v)),Xk(this.environmentInjector,T=>this.events.next(T)),La(T=>{if(v.guardsResult=T.guardsResult,Qf(T.guardsResult))throw dw(this.urlSerializer,T.guardsResult);let x=new Gv(T.id,this.urlSerializer.serialize(T.extractedUrl),this.urlSerializer.serialize(T.urlAfterRedirects),T.targetSnapshot,!!T.guardsResult);this.events.next(x)}),Hl(T=>T.guardsResult?!0:(this.cancelNavigationTransition(T,"",el.GuardRejected),!1)),Nv(T=>{if(T.guards.canActivateChecks.length)return ti(T).pipe(La(x=>{let f=new Wv(x.id,this.urlSerializer.serialize(x.extractedUrl),this.urlSerializer.serialize(x.urlAfterRedirects),x.targetSnapshot);this.events.next(f)}),ql(x=>{let f=!1;return ti(x).pipe(T8(this.paramsInheritanceStrategy,this.environmentInjector),La({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(x,"",el.NoDataFromResolver)}}))}),La(x=>{let f=new Yv(x.id,this.urlSerializer.serialize(x.extractedUrl),this.urlSerializer.serialize(x.urlAfterRedirects),x.targetSnapshot);this.events.next(f)}))}),Nv(T=>{let x=f=>{let s=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&s.push(this.configLoader.loadComponent(f.routeConfig).pipe(La(t=>{f.component=t}),Ii(()=>{})));for(let t of f.children)s.push(...x(t));return s};return Ap(x(T.targetSnapshot.root)).pipe(Qu(null),Iu(1))}),Nv(()=>this.afterPreactivation()),ql(()=>{let{currentSnapshot:T,targetSnapshot:x}=v,f=this.createViewTransition?.(this.environmentInjector,T.root,x.root);return f?ia(f).pipe(Ii(()=>v)):ti(v)}),Ii(T=>{let x=Lk(C.routeReuseStrategy,T.targetSnapshot,T.currentRouterState);return this.currentTransition=v=bo(Fr({},T),{targetRouterState:x}),this.currentNavigation.targetRouterState=x,v}),La(()=>{this.events.next(new hd)}),Bk(this.rootContexts,C.routeReuseStrategy,T=>this.events.next(T),this.inputBindingEnabled),Iu(1),La({next:T=>{w=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Gc(T.id,this.urlSerializer.serialize(T.extractedUrl),this.urlSerializer.serialize(T.urlAfterRedirects))),this.titleStrategy?.updateTitle(T.targetRouterState.snapshot),T.resolve(!0)},complete:()=>{w=!0}}),Gg(this.transitionAbortSubject.pipe(La(T=>{throw T}))),Oh(()=>{!w&&!n&&this.cancelNavigationTransition(v,"",el.SupersededByNewNavigation),this.currentTransition?.id===v.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ju(T=>{if(n=!0,gw(T))this.events.next(new lc(v.id,this.urlSerializer.serialize(v.extractedUrl),T.message,T.cancellationCode)),Rk(T)?this.events.next(new dd(T.url)):v.resolve(!1);else{this.events.next(new fd(v.id,this.urlSerializer.serialize(v.extractedUrl),T,v.targetSnapshot??void 0));try{v.resolve(C.errorHandler(T))}catch(x){this.options.resolveNavigationPromiseOnError?v.resolve(!1):v.reject(x)}}return Ys}))}))}cancelNavigationTransition(C,A,e){let v=new lc(C.id,this.urlSerializer.serialize(C.extractedUrl),A,e);this.events.next(v),C.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};Y.\u0275fac=function(A){return new(A||Y)},Y.\u0275prov=Yr({token:Y,factory:Y.\u0275fac,providedIn:"root"});let q=Y;return q})();function P8(q){return q!==sd}var R8=(()=>{let Y=class Y{};Y.\u0275fac=function(A){return new(A||Y)},Y.\u0275prov=Yr({token:Y,factory:()=>Nr(F8),providedIn:"root"});let q=Y;return q})(),cy=class{shouldDetach(Y){return!1}store(Y,ue){}shouldAttach(Y){return!1}retrieve(Y){return null}shouldReuseRoute(Y,ue){return Y.routeConfig===ue.routeConfig}},F8=(()=>{let Y=class Y extends cy{};Y.\u0275fac=(()=>{let C;return function(e){return(C||(C=i0(Y)))(e||Y)}})(),Y.\u0275prov=Yr({token:Y,factory:Y.\u0275fac,providedIn:"root"});let q=Y;return q})(),ww=(()=>{let Y=class Y{};Y.\u0275fac=function(A){return new(A||Y)},Y.\u0275prov=Yr({token:Y,factory:()=>Nr(N8),providedIn:"root"});let q=Y;return q})(),N8=(()=>{let Y=class Y extends ww{constructor(){super(...arguments),this.location=Nr(Qh),this.urlSerializer=Nr(fy),this.options=Nr(vy,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Nr(xy),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new sc,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=uw(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(C){return this.location.subscribe(A=>{A.type==="popstate"&&C(A.url,A.state)})}handleRouterEvent(C,A){if(C instanceof cd)this.stateMemento=this.createStateMemento();else if(C instanceof Wc)this.rawUrlTree=A.initialUrl;else if(C instanceof S0){if(this.urlUpdateStrategy==="eager"&&!A.extras.skipLocationChange){let e=this.urlHandlingStrategy.merge(A.finalUrl,A.initialUrl);this.setBrowserUrl(e,A)}}else C instanceof hd?(this.currentUrlTree=A.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(A.finalUrl,A.initialUrl),this.routerState=A.targetRouterState,this.urlUpdateStrategy==="deferred"&&(A.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,A))):C instanceof lc&&(C.code===el.GuardRejected||C.code===el.NoDataFromResolver)?this.restoreHistory(A):C instanceof fd?this.restoreHistory(A,!0):C instanceof Gc&&(this.lastSuccessfulId=C.id,this.currentPageId=this.browserPageId)}setBrowserUrl(C,A){let e=this.urlSerializer.serialize(C);if(this.location.isCurrentPathEqualTo(e)||A.extras.replaceUrl){let v=this.browserPageId,w=Fr(Fr({},A.extras.state),this.generateNgRouterState(A.id,v));this.location.replaceState(e,"",w)}else{let v=Fr(Fr({},A.extras.state),this.generateNgRouterState(A.id,this.browserPageId+1));this.location.go(e,"",v)}}restoreHistory(C,A=!1){if(this.canceledNavigationResolution==="computed"){let e=this.browserPageId,v=this.currentPageId-e;v!==0?this.location.historyGo(v):this.currentUrlTree===C.finalUrl&&v===0&&(this.resetState(C),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(A&&this.resetState(C),this.resetUrlToCurrentUrlTree())}resetState(C){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,C.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(C,A){return this.canceledNavigationResolution==="computed"?{navigationId:C,\u0275routerPageId:A}:{navigationId:C}}};Y.\u0275fac=(()=>{let C;return function(e){return(C||(C=i0(Y)))(e||Y)}})(),Y.\u0275prov=Yr({token:Y,factory:Y.\u0275fac,providedIn:"root"});let q=Y;return q})(),od=function(q){return q[q.COMPLETE=0]="COMPLETE",q[q.FAILED=1]="FAILED",q[q.REDIRECTING=2]="REDIRECTING",q}(od||{});function z8(q,Y){q.events.pipe(Hl(ue=>ue instanceof Gc||ue instanceof lc||ue instanceof fd||ue instanceof Wc),Ii(ue=>ue instanceof Gc||ue instanceof Wc?od.COMPLETE:(ue instanceof lc?ue.code===el.Redirect||ue.code===el.SupersededByNewNavigation:!1)?od.REDIRECTING:od.FAILED),Hl(ue=>ue!==od.REDIRECTING),Iu(1)).subscribe(()=>{Y()})}function B8(q){throw q}var j8={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},V8={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Tw=(()=>{let Y=class Y{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=Nr(d0),this.stateManager=Nr(ww),this.options=Nr(vy,{optional:!0})||{},this.pendingTasks=Nr(u0),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Nr(O8),this.urlSerializer=Nr(fy),this.location=Nr(Qh),this.urlHandlingStrategy=Nr(xy),this._events=new us,this.errorHandler=this.options.errorHandler||B8,this.navigated=!1,this.routeReuseStrategy=Nr(R8),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=Nr(yy,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!Nr(py,{optional:!0}),this.eventsSubscription=new na,this.isNgZoneEnabled=Nr($o)instanceof $o&&$o.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:C=>{this.console.warn(C)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let C=this.navigationTransitions.events.subscribe(A=>{try{let e=this.navigationTransitions.currentTransition,v=this.navigationTransitions.currentNavigation;if(e!==null&&v!==null){if(this.stateManager.handleRouterEvent(A,v),A instanceof lc&&A.code!==el.Redirect&&A.code!==el.SupersededByNewNavigation)this.navigated=!0;else if(A instanceof Gc)this.navigated=!0;else if(A instanceof dd){let w=this.urlHandlingStrategy.merge(A.url,e.currentRawUrl),n={info:e.extras.info,skipLocationChange:e.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||P8(e.source)};this.scheduleNavigation(w,sd,null,n,{resolve:e.resolve,reject:e.reject,promise:e.promise})}}H8(A)&&this._events.next(A)}catch(e){this.navigationTransitions.transitionAbortSubject.next(e)}});this.eventsSubscription.add(C)}resetRootComponentType(C){this.routerState.root.component=C,this.navigationTransitions.rootComponentType=C}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),sd,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((C,A)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(C,"popstate",A)},0)})}navigateToSyncWithBrowser(C,A,e){let v={replaceUrl:!0},w=e?.navigationId?e:null;if(e){let T=Fr({},e);delete T.navigationId,delete T.\u0275routerPageId,Object.keys(T).length!==0&&(v.state=T)}let n=this.parseUrl(C);this.scheduleNavigation(n,A,w,v)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(C){this.config=C.map(gy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(C,A={}){let{relativeTo:e,queryParams:v,fragment:w,queryParamsHandling:n,preserveFragment:T}=A,x=T?this.currentUrlTree.fragment:w,f=null;switch(n){case"merge":f=Fr(Fr({},this.currentUrlTree.queryParams),v);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=v||null}f!==null&&(f=this.removeEmptyProps(f));let s;try{let t=e?e.snapshot:this.routerState.snapshot.root;s=ow(t)}catch{(typeof C[0]!="string"||!C[0].startsWith("/"))&&(C=[]),s=this.currentUrlTree.root}return aw(s,C,f,x??null)}navigateByUrl(C,A={skipLocationChange:!1}){let e=Qf(C)?C:this.parseUrl(C),v=this.urlHandlingStrategy.merge(e,this.rawUrlTree);return this.scheduleNavigation(v,sd,null,A)}navigate(C,A={skipLocationChange:!1}){return U8(C),this.navigateByUrl(this.createUrlTree(C,A),A)}serializeUrl(C){return this.urlSerializer.serialize(C)}parseUrl(C){try{return this.urlSerializer.parse(C)}catch{return this.urlSerializer.parse("/")}}isActive(C,A){let e;if(A===!0?e=Fr({},j8):A===!1?e=Fr({},V8):e=A,Qf(C))return H_(this.currentUrlTree,C,e);let v=this.parseUrl(C);return H_(this.currentUrlTree,v,e)}removeEmptyProps(C){return Object.entries(C).reduce((A,[e,v])=>(v!=null&&(A[e]=v),A),{})}scheduleNavigation(C,A,e,v,w){if(this.disposed)return Promise.resolve(!1);let n,T,x;w?(n=w.resolve,T=w.reject,x=w.promise):x=new Promise((s,t)=>{n=s,T=t});let f=this.pendingTasks.add();return z8(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:A,restoredState:e,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:C,extras:v,resolve:n,reject:T,promise:x,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),x.catch(s=>Promise.reject(s))}};Y.\u0275fac=function(A){return new(A||Y)},Y.\u0275prov=Yr({token:Y,factory:Y.\u0275fac,providedIn:"root"});let q=Y;return q})();function U8(q){for(let Y=0;Y<q.length;Y++)if(q[Y]==null)throw new Zr(4008,!1)}function H8(q){return!(q instanceof hd)&&!(q instanceof dd)}var q8=new pi("");function Mw(q,...Y){return Qp([{provide:yy,multi:!0,useValue:q},[],{provide:eh,useFactory:G8,deps:[Tw]},{provide:wv,multi:!0,useFactory:W8},Y.map(ue=>ue.\u0275providers)])}function G8(q){return q.routerState.root}function W8(){let q=Nr(jf);return Y=>{let ue=q.get(Jh);if(Y!==ue.components[0])return;let C=q.get(Tw),A=q.get(Y8);q.get($8)===1&&C.initialNavigation(),q.get(Z8,null,ci.Optional)?.setUpPreloading(),q.get(q8,null,ci.Optional)?.init(),C.resetRootComponentType(ue.componentTypes[0]),A.closed||(A.next(),A.complete(),A.unsubscribe())}}var Y8=new pi("",{factory:()=>new us}),$8=new pi("",{providedIn:"root",factory:()=>1});var Z8=new pi("");var Aw=[];var kw={providers:[Mw(Aw)]};var X8={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},PL=bo(Fr({},X8),{"[class.ng-submitted]":"isSubmitted"});var Sw=new pi("CallSetDisabledState",{providedIn:"root",factory:()=>by}),by="always";var K8=new pi("");var Ew=(()=>{let Y=class Y{};Y.\u0275fac=function(A){return new(A||Y)},Y.\u0275mod=_l({type:Y}),Y.\u0275inj=bl({});let q=Y;return q})();var Cw=(()=>{let Y=class Y{static withConfig(C){return{ngModule:Y,providers:[{provide:Sw,useValue:C.callSetDisabledState??by}]}}};Y.\u0275fac=function(A){return new(A||Y)},Y.\u0275mod=_l({type:Y}),Y.\u0275inj=bl({imports:[Ew]});let q=Y;return q})(),Dw=(()=>{let Y=class Y{static withConfig(C){return{ngModule:Y,providers:[{provide:K8,useValue:C.warnOnNgModelWithFormControl??"always"},{provide:Sw,useValue:C.callSetDisabledState??by}]}}};Y.\u0275fac=function(A){return new(A||Y)},Y.\u0275mod=_l({type:Y}),Y.\u0275inj=bl({imports:[Ew]});let q=Y;return q})();var va=class q{static setModuleName(Y){q.moduleName=Y}static getModuleName(){return q.moduleName}static setPlotly(Y){if(typeof Y=="object"&&typeof Y.react!="function")throw new Error("Invalid plotly.js version. Please, use any version above 1.40.0");q.plotly=Y}static insert(Y){return q.instances.indexOf(Y)===-1&&q.instances.push(Y),Y}static remove(Y){let ue=q.instances.indexOf(Y);ue>=0&&(q.instances.splice(ue,1),q.plotly.purge(Y))}getInstanceByDivId(Y){for(let ue of q.instances)if(ue&&ue.id===Y)return ue}getPlotly(){return Dh(this,null,function*(){return yield this.waitFor(()=>this._getPlotly()!=="waiting"),this._getPlotly()})}_getPlotly(){if(typeof q.plotly>"u"){let Y=q.moduleName==="ViaCDN"?"Error loading Peer dependency plotly.js from CDN url":"Peer dependency plotly.js isn't installed";throw new Error(Y)}return q.plotly}waitFor(Y){return new Promise(ue=>{let C=()=>{Y()?ue():setTimeout(C,10)};C()})}newPlot(Y,ue,C,A,e){return Dh(this,null,function*(){if(yield this.waitFor(()=>this._getPlotly()!=="waiting"),e){let v={data:ue,layout:C,config:A,frames:e};return this._getPlotly().newPlot(Y,v).then(()=>q.insert(Y))}return this._getPlotly().newPlot(Y,ue,C,A).then(()=>q.insert(Y))})}plot(Y,ue,C,A,e){if(e){let v={data:ue,layout:C,config:A,frames:e};return this._getPlotly().newPlot(Y,v)}return this._getPlotly().newPlot(Y,ue,C,A)}update(Y,ue,C,A,e){if(e){let v={data:ue,layout:C,config:A,frames:e};return this._getPlotly().react(Y,v)}return this._getPlotly().react(Y,ue,C,A)}resize(Y){return this._getPlotly().Plots.resize(Y)}};va.instances=[];va.plotly=void 0;va.moduleName=void 0;va.\u0275fac=function(Y){return new(Y||va)};va.\u0275prov=Yr({token:va,factory:va.\u0275fac,providedIn:"root"});var R0=(()=>{class q{constructor(){}}return q.\u0275fac=function(ue){return new(ue||q)},q.\u0275mod=_l({type:q}),q.\u0275inj=bl({providers:[va],imports:[Nu]}),q})(),bd=(()=>{class q{constructor(){if(!this.isValid()){let ue="Invalid PlotlyJS object. Please check https://github.com/plotly/angular-plotly.js#quick-start to see how to add PlotlyJS to your project.";throw new Error(ue)}va.setPlotly(q.plotlyjs)}isValid(){return q.plotlyjs!==void 0&&(typeof q.plotlyjs.plot=="function"||typeof q.plotlyjs.newPlot=="function")}}return q.plotlyjs={},q.\u0275fac=function(ue){return new(ue||q)},q.\u0275mod=_l({type:q}),q.\u0275inj=bl({providers:[va],imports:[Nu,R0,R0]}),q})(),bu=class q{constructor(Y){this.plotlyService=Y,va.setModuleName("ViaCDN")}static setPlotlyVersion(Y,ue="plotly",C=""){if(!(Y==="latest"||/^(strict-)?\d\.\d{1,2}\.\d{1,2}$/.test(Y)))throw new Error("Invalid plotly version. Please set 'latest' or version number (i.e.: 1.4.3) or strict version number (i.e.: strict-1.4.3)");q.loadViaCDN(ue,C),q.plotlyVersion=Y}static setPlotlyBundle(Y){if(!(Y===null||q.plotlyBundleNames.indexOf(Y)>=0)){let C=q.plotlyBundleNames.map(A=>`"${A}"`).join(", ");throw new Error(`Invalid plotly bundle. Please set to null for full or ${C} for a partial bundle.`)}q.plotlyBundle=Y}static loadViaCDN(Y="plotly",ue=""){va.setPlotly("waiting"),setTimeout(()=>{let A="";switch(Y){case"cloudflare":if(q.plotlyVersion=="latest")throw new Error("As cloudflare hosts version specific files, 'latest' as a version is not supported. Please specify a version or you can choose 'plotly' as a CDN provider.");A=q.plotlyBundle==null?`https://cdnjs.cloudflare.com/ajax/libs/plotly.js/${q.plotlyVersion}/plotly.min.js`:`https://cdnjs.cloudflare.com/ajax/libs/plotly.js/${q.plotlyVersion}/plotly-${q.plotlyBundle}.min.js`;break;case"custom":if(!(ue&&typeof ue=="string"))throw new Error("Invalid or missing CDN URL. Please provide a CDN URL in case of custom provider. Alternatively, you can choose from 'plotly' or 'cloudflare'.");A=ue;break;default:A=q.plotlyBundle==null?`https://cdn.plot.ly/plotly-${q.plotlyVersion}.min.js`:`https://cdn.plot.ly/plotly-${q.plotlyBundle}-${q.plotlyVersion}.min.js`;break}let e=document.createElement("script");e.type="text/javascript",e.src=A,e.onerror=()=>console.error(`Error loading plotly.js library from ${A}`),document.getElementsByTagName("head")[0].appendChild(e);let w=200,n=()=>{let T=window.Plotly;if(T)va.setPlotly(T);else if(w>0)w--,setTimeout(n,50);else throw new Error(`Error loading plotly.js library from ${A}. Timeout.`)};n()})}};bu.plotlyBundle=void 0;bu.plotlyVersion="latest";bu.plotlyBundleNames=["basic","cartesian","geo","gl3d","gl2d","mapbox","finance"];bu.\u0275fac=function(Y){return new(Y||bu)(yi(va))};bu.\u0275mod=_l({type:bu});bu.\u0275inj=bl({providers:[va],imports:[Nu,R0,R0]});var tS=ox(wy());var Ty=ox(wy());var J8=["Graph"];bd.plotlyjs=Ty;var Iw=(()=>{let Y=class Y{constructor(){this.height=300,this.diagram={title:"Diagramtitle",paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)",xaxis:{title:"x-Achse",linecolor:"black",linewidth:2,mirror:!0,automargin:!0},yaxis:{title:"y-Achse",linecolor:"black",linewidth:2,mirror:!0,automargin:!0}}}ngOnInit(){this.data=this.traces;let C={autosize:!0,hovermode:"closest",showlegend:this.diagram.showlegend||!1,title:this.diagram.title,paper_bgcolor:this.diagram.paper_bgcolor||"rgba(0,0,0,0)",plot_bgcolor:this.diagram.plot_bgcolor||"rgba(0,0,0,0)",margin:{l:20,r:20,b:20,t:20},height:this.height,modebar:{bgcolor:"transparent",orientation:"v",position:"left"},legend:{x:1,y:.5}},A={displaylogo:!1,responsive:!0,staticPlot:this.diagram.options?.staticPlot||!1};switch(!0){case this.data.some(e=>e.type==="bar"||e.type==="scatter"||e.type==="line"):C=bo(Fr({},C),{barmode:this.diagram.barmode||"group",xaxis:this.diagram.xaxis,yaxis:this.diagram.yaxis});break;case this.data.some(e=>e.type==="pie"||e.type==="sunburst"):C=Fr({},C);break;default:console.warn("Diagramm-Typ nicht erkannt");break}this.Graph.nativeElement=Ty.newPlot(this.Graph.nativeElement,this.data,C,A)}};Y.\u0275fac=function(A){return new(A||Y)},Y.\u0275cmp=$l({type:Y,selectors:[["ngx-dynamic-diagram"]],viewQuery:function(A,e){if(A&1&&_v(J8,7),A&2){let v;c0(v=f0())&&(e.Graph=v.first)}},inputs:{traces:"traces",height:"height",diagram:"diagram"},standalone:!0,features:[mu],decls:2,vars:0,consts:[["Graph",""],["id","Graph"]],template:function(A,e){A&1&&Zo(0,"div",1,0)},styles:[".plotly-notifier[_ngcontent-%COMP%]{display:none}.js-plotly-plot[_ngcontent-%COMP%]   .plotly[_ngcontent-%COMP%]   [data-title][_ngcontent-%COMP%]:hover:before, .js-plotly-plot[_ngcontent-%COMP%]   .plotly[_ngcontent-%COMP%]   [data-title][_ngcontent-%COMP%]:hover:after{display:none!important}"]});let q=Y;return q})();var Lw={chart:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9.883 2.207a1.9 1.9 0 0 1 2.087 1.522l.025 .167l.005 .104v4a1 1 0 0 1 -.641 .933l-.107 .035a3.1 3.1 0 1 0 3.73 3.953l.05 -.173a1 1 0 0 1 .855 -.742l.113 -.006h3.8a2 2 0 0 1 2 2a1 1 0 0 1 -.026 .226a10 10 0 1 1 -12.27 -11.933l.27 -.067l.11 -.02z" stroke-width="0" fill="currentColor" /><path d="M14.775 2.526a.996 .996 0 0 1 .22 -.026l.122 .007l.112 .02l.103 .03a10 10 0 0 1 6.003 5.817l.108 .294a1 1 0 0 1 -.824 1.325l-.119 .007h-4.5a1 1 0 0 1 -.76 -.35a8 8 0 0 0 -.89 -.89a1 1 0 0 1 -.342 -.636l-.008 -.124v-4.495l.006 -.118c.005 -.042 .012 -.08 .02 -.116l.03 -.103a.998 .998 0 0 1 .168 -.299l.071 -.08c.03 -.028 .058 -.052 .087 -.075l.09 -.063l.088 -.05l.103 -.043l.112 -.032z" stroke-width="0" fill="currentColor" /></svg>'};var Q8=["*"],Ow=(()=>{let Y=class Y{set name(C){this.renderer.setProperty(this.element.nativeElement,"innerHTML",Lw[C]||null)}constructor(C,A){this.element=C,this.renderer=A}};Y.\u0275fac=function(A){return new(A||Y)(wl(gu),wl(Hf))},Y.\u0275cmp=$l({type:Y,selectors:[["dashboard-icons"]],inputs:{name:"name"},standalone:!0,features:[mu],ngContentSelectors:Q8,decls:1,vars:0,template:function(A,e){A&1&&(xv(),bv(0))}});let q=Y;return q})();var N0=(()=>{let Y=class Y{constructor(){this._comutedStyle=new ra(null),this.textFilter$=this._comutedStyle.asObservable();let C=document.querySelector(":root");this.computedStyle=getComputedStyle(C)}addStyleVariables(){}getStyleVariables(){return""}getSpecificStyle(C){console.log(this.computedStyle.getPropertyValue(C));let A=this.computedStyle.getPropertyValue(C);return{name:C,value:A}}};Y.\u0275fac=function(A){return new(A||Y)},Y.\u0275prov=Yr({token:Y,factory:Y.\u0275fac,providedIn:"root"});let q=Y;return q})();var Pw=(()=>{let Y=class Y{constructor(C){this._styleService=C,this.diagram={title:"",paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)",showlegend:!0},this.trace=[{values:[19,26,55],labels:["Residential","Non-Residential","Utility"],type:"pie",hole:.4,name:"The Night Cafe",marker:{colors:["rgba(58, 115, 238, 1)","rgba(58, 115, 238, 0.8)","rgba(58, 115, 238, 0.6)"],line:{color:"rgba(58, 115, 238, 0)",width:3}}}],this.legend=!0,this.barchart={barmode:"stack",title:"",showlegend:this.legend,xaxis:{title:"",linecolor:"black",linewidth:2,mirror:!0,automargin:!0,showline:!1},yaxis:{title:"",linecolor:"black",linewidth:2,mirror:!0,automargin:!0,showgrid:!0,showline:!1,gridcolor:"#323232",gridwidth:2,dtick:500,tickcolor:"#323232"}},this.bars=[{type:"bar",x:["Now","LQ"],y:[250,400],name:"Utility",marker:{color:"rgba(58, 115, 238, 1)"}},{type:"bar",x:["Now","LQ"],y:[500,150],name:"Non-Residential",marker:{color:"rgba(58, 115, 238, 0.8)"}},{type:"bar",x:["Now","LQ"],y:[250,240],text:["+25 %","-7 %"],textposition:"auto",name:"Residential",marker:{color:"rgba(58, 115, 238, 0.6)"}}],this.linechart={title:"",xaxis:{title:"",linecolor:"black",linewidth:2,mirror:!0,automargin:!0,showline:!1,gridcolor:"#323232"},yaxis:{title:"",linecolor:"black",linewidth:2,mirror:!0,automargin:!0,showgrid:!0,showline:!1,gridcolor:"#323232",gridwidth:2,dtick:50,tickcolor:"#323232"}},this.line=[{x:["01.01.2024","02.01.2024","03.01.2024","04.01.2024","05.01.2024","06.01.2024"],y:[50,45,43,44,51,50],type:"scatter",fill:"tozeroy",mode:"lines+markers",marker:{color:"rgba(58, 115, 238, 1)",size:10}},{x:["01.01.2024","02.01.2024","03.01.2024","04.01.2024","05.01.2024","06.01.2024"],y:[20,21,24,23,25,20],type:"scatter",fill:"tozeroy",mode:"lines+markers",marker:{color:"rgba(58, 115, 238, 0.8)",size:10}}],this.daten={x:["01.01.2024","02.01.2024","03.01.2024","04.01.2024","05.01.2024","06.01.2024"],y:[250,245,243,244,251,250]},this.sunburst={title:"",paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)",showlegend:!1},this.sun=[{type:"sunburst",labels:["WSP","WSP Mitte","WSP Ost","WSP West","Streifenboote Mitte","Streifenboote Ost","Streifenboote West","Zivilboote Mitte","Zivilboote Ost","Zivilboote West","RIB Ost","WSP50 Rib","WSP10 Wannsee","WSP11 Mollymauk","WSP12 Graureiher","WSP14 Pelikan"],parents:["","WSP","WSP","WSP","WSP Mitte","WSP Ost","WSP West","WSP Mitte","WSP Ost","WSP West","WSP West","RIB Ost","Streifenboote Ost","Streifenboote Ost","Streifenboote Ost","Streifenboote Ost"],values:[6,2,2,2,1,1,1,1,1,1,1,1,1,1,1,2],outsidetextfont:{size:20,color:"#377eb8"},leaf:{opacity:.4},marker:{line:{width:2}}}],console.log("Style: ",C.getSpecificStyle("--primary"))}};Y.\u0275fac=function(A){return new(A||Y)(wl(N0))},Y.\u0275cmp=$l({type:Y,selectors:[["dashboard1"]],standalone:!0,features:[h0([N0]),mu],decls:89,vars:12,consts:[["diagram_placeholder",""],["header",""],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-2","p-2"],[1,"relative","h-80","bg-tertiary","rounded-lg","p-2"],[1,"flex","flex-row","justify-between"],[1,""],[1,"flex","flex-row","h6","items-center"],[1,"h-4","w-4","mr-2"],["name","chart"],[1,"text-darker","text-md"],[1,"text-gray-500"],[1,"text-gray-500","text-sm"],[1,"grid","place-content-center","h-8","w-8","bg-secondary","border","border-borderline","rounded-lg"],[1,"h-6","w-6"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","stroke","currentColor","fill","none","stroke-linecap","round","stroke-linejoin","round"],["stroke","none","d","M0 0h24v24H0z","fill","none"],["d","M17 7l-10 10"],["d","M8 7l9 0l0 9"],[1,"absolute","top-16","right-2","bottom-2","left-2","bg-secondary","border","border-borderline","rounded"],[1,"",3,"traces","diagram","height"],[1,"relative","h-192","bg-tertiary","rounded-lg","p-2","col-span-2","row-span-2"]],template:function(A,e){A&1&&(xi(0,"div",2)(1,"div",3,0)(3,"div",4,1)(5,"div",5)(6,"div",6)(7,"div",7),Zo(8,"dashboard-icons",8),no(),xi(9,"h2",9),$a(10,"Grant amount ratio"),xi(11,"span",10),$a(12,"/ %"),no()()(),xi(13,"p",11),$a(14,"Track and report on specific grant ratio"),no()(),xi(15,"button",12)(16,"div",13),Zh(),xi(17,"svg",14),Zo(18,"path",15)(19,"path",16)(20,"path",17),no()()()(),Xh(),xi(21,"div",18),Zo(22,"ngx-dynamic-diagram",19),no()(),xi(23,"div",3,0)(25,"div",4,1)(27,"div",5)(28,"div",6)(29,"div",7),Zo(30,"dashboard-icons",8),no(),xi(31,"h2",9),$a(32,"Committed and actual balance"),xi(33,"span",10),$a(34,"/ $M"),no()()(),xi(35,"p",11),$a(36,"Presents funds reserved for specific purposes"),no()(),xi(37,"button",12)(38,"div",13),Zh(),xi(39,"svg",14),Zo(40,"path",15)(41,"path",16)(42,"path",17),no()()()(),Xh(),xi(43,"div",18),Zo(44,"ngx-dynamic-diagram",19),no()(),xi(45,"div",3,0)(47,"div",4,1)(49,"div",5)(50,"div",6)(51,"div",7),Zo(52,"dashboard-icons",8),no(),xi(53,"h2",9),$a(54,"Committed and actual balance"),xi(55,"span",10),$a(56,"/ $M"),no()()(),xi(57,"p",11),$a(58,"Presents funds reserved for specific purposes"),no()(),xi(59,"button",12)(60,"div",13),Zh(),xi(61,"svg",14),Zo(62,"path",15)(63,"path",16)(64,"path",17),no()()()(),Xh(),xi(65,"div",18),Zo(66,"ngx-dynamic-diagram",19),no()(),xi(67,"div",20,0)(69,"div",4,1)(71,"div",5)(72,"div",6)(73,"div",7),Zo(74,"dashboard-icons",8),no(),xi(75,"h2",9),$a(76,"Committed and actual balance"),xi(77,"span",10),$a(78,"/ $M"),no()()(),xi(79,"p",11),$a(80,"Presents funds reserved for specific purposes"),no()(),xi(81,"button",12)(82,"div",13),Zh(),xi(83,"svg",14),Zo(84,"path",15)(85,"path",16)(86,"path",17),no()()()(),Xh(),xi(87,"div",18),Zo(88,"ngx-dynamic-diagram",19),no()()()),A&2&&(Kh(22),Vc("traces",e.trace)("diagram",e.diagram)("height",260),Kh(22),Vc("traces",e.bars)("diagram",e.barchart)("height",260),Kh(22),Vc("traces",e.line)("diagram",e.linechart)("height",260),Kh(22),Vc("traces",e.sun)("diagram",e.sunburst)("height",720))},dependencies:[Nu,Ow,Iw]});let q=Y;return q})();bd.plotlyjs=tS;var Rw=(()=>{let Y=class Y{constructor(){this.isVisible=!1,this.isSpinnerVisible=!0,this.diagram1={title:"Scatter (lines+markers)",showlegend:!0,xaxis:{title:"x-Achse",linecolor:"black",linewidth:2,mirror:!0,automargin:!0},yaxis:{title:"y-Achse",linecolor:"black",linewidth:2,mirror:!0,automargin:!0},options:{staticPlot:!1}},this.trace1=[{type:"scatter",x:["WSP Mitte","WSP Ost","WSP West"],y:[20,14,23],line:{color:"#2563eb"},mode:"lines"},{type:"scatter",x:["WSP Mitte","WSP Ost","WSP West"],y:[5,23,10],line:{color:"rgb(0, 255, 0)"},mode:"lines"}],this.diagram2={title:"Barchart (vertical)",xaxis:{title:"x-Achse",linecolor:"black",linewidth:2,mirror:!0,automargin:!0},yaxis:{title:"y-Achse",linecolor:"black",linewidth:2,mirror:!0,automargin:!0}},this.trace2=[{type:"bar",x:[1,2,3],y:[10,20,23]},{type:"bar",x:[1,2,3],y:[11,24,22]}],this.diagram3={title:"Barchart (horizontal)",xaxis:{title:"x-Achse",linecolor:"black",linewidth:2,mirror:!0,automargin:!0},yaxis:{title:"y-Achse",linecolor:"black",linewidth:2,mirror:!0,automargin:!0}},this.trace3=[{type:"bar",x:[10,20,23],y:[1,2,3],orientation:"h"}],this.diagram4={title:"Scatter (markers -> size)",xaxis:{title:"x-Achse",linecolor:"black",linewidth:2,mirror:!0,automargin:!0},yaxis:{title:"y-Achse",linecolor:"black",linewidth:2,mirror:!0,automargin:!0}},this.trace4=[{type:"scatter",x:[0,1,2,3,4,5,6],y:[1,9,4,7,5,2,4],mode:"markers",marker:{size:[20,40,25,10,60,90,30]}}],this.diagram5={title:"Scatter (markers -> size)",xaxis:{title:"x-Achse",linecolor:"black",linewidth:2,mirror:!0,automargin:!0},yaxis:{title:"y-Achse",linecolor:"black",linewidth:2,mirror:!0,automargin:!0}},this.trace5=[{type:"scatter",x:[.1,.2,.3,.4],y:["A","B","C","D"],mode:"markers",name:"Percent of estimated voting age population",marker:{color:"rgba(156, 165, 196, 0.95)",line:{color:"rgba(156, 165, 196, 1.0)",width:1},symbol:"circle",size:16}},{type:"scatter",x:[.3,.4,.5,.6],y:["A","B","C","D"],mode:"markers",name:"Percent of estimated voting age population",marker:{color:"rgba(204, 204, 204, 0.95)",line:{color:"rgba(156, 165, 196, 1.0)",width:1},symbol:"circle",size:16}}],this.diagram6={title:"Pie"},this.trace6=[{values:[19,26,55],labels:["Residential","Non-Residential","Utility"],type:"pie",name:"The Night Cafe",marker:{colors:["rgba(204, 204, 204, 0.95)"]},domain:{x:[.52,1],y:[0,.48]},hoverinfo:"label+percent+name",textinfo:"none"}],this.diagram7={barmode:"stack",title:"Satcked Barchart (vertical)",xaxis:{title:"x-Achse",linecolor:"black",linewidth:2,mirror:!0,automargin:!0},yaxis:{title:"y-Achse",linecolor:"black",linewidth:2,mirror:!0,automargin:!0}},this.trace7=[{x:["giraffes","orangutans","monkeys"],y:[20,14,23],name:"SF Zoo",type:"bar"},{x:["giraffes","orangutans","monkeys"],y:[12,18,29],name:"LA Zoo",type:"bar"}],this.diagram8={title:"Linechart (vertical)",xaxis:{title:"x-Achse",linecolor:"black",linewidth:2,mirror:!0,automargin:!0},yaxis:{title:"y-Achse",linecolor:"black",linewidth:2,mirror:!0,automargin:!0}},this.trace8=[{x:[1,2,3,4],y:[0,2,3,5],fill:"tozeroy",type:"scatter"},{x:[1,2,3,4],y:[3,5,4,7],fill:"tonexty",type:"scatter"}],this.diagram9={title:"Sunburst"},this.trace9=[{type:"sunburst",labels:["Eve","Cain","Seth","Enos","Noam","Abel","Awan","Enoch","Azura"],parents:["","Eve","Eve","Seth","Seth","Eve","Eve","Awan","Eve"],values:[10,14,12,10,2,6,6,4,4],outsidetextfont:{size:20,color:"#377eb8"},leaf:{opacity:.4},marker:{line:{width:2}}}]}ngOnInit(){setTimeout(()=>{this.isVisible=!0},2e3)}};Y.\u0275fac=function(A){return new(A||Y)},Y.\u0275cmp=$l({type:Y,selectors:[["app-root"]],standalone:!0,features:[mu],decls:10,vars:0,consts:[[1,"overflow-hidden","p-4","pb-0"],[1,"flex","flex-col","h-full","overflow-y-auto","scrollbar-hide"],[1,"flex","flex-row","p-4","justify-between","bg-primary","border-b","border-borderline","rounded-t-lg","z-10"],[1,"text-darker","text-2xl","font-bold"],[1,"text-sm","text-dark"],[1,"relative","flex-auto","w-full","bg-primary","overflow-auto"]],template:function(A,e){A&1&&(xi(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h2",3),$a(5,"Alternative 2"),no(),xi(6,"p",4),$a(7,"Es wird ein Diagramm angezeigt."),no()()(),xi(8,"div",5),Zo(9,"dashboard1"),no()()())},dependencies:[Nu,Pw,Cw,bd,Dw],styles:[".col[_ngcontent-%COMP%]{background-color:red}.progress__svg[_ngcontent-%COMP%]{transform:rotate(-90deg)}.progress__text[_ngcontent-%COMP%]{fill:var(--accent);color:var(--accent);font-size:1.5rem;stroke-width:1px}.progress__meter[_ngcontent-%COMP%], .progress__value[_ngcontent-%COMP%]{fill:none}.progress__meter[_ngcontent-%COMP%]{stroke:currentColor;color:var(--static-gray);stroke-width:4px}.progress__value[_ngcontent-%COMP%]{stroke:currentColor;color:var(--accent);stroke-width:4px;transition:stroke-dashoffset .5s linear}.ProgressBar[_ngcontent-%COMP%]{display:block;width:100%;height:4px}.ProgressBar-background[_ngcontent-%COMP%], .ProgressBar-percentage[_ngcontent-%COMP%]{fill:currentColor}.ProgressBar-background[_ngcontent-%COMP%]{fill-opacity:.2}.ProgressBar-percentage[_ngcontent-%COMP%]{fill-opacity:.9;transition:stroke-dashoffset .5s linear}"]});let q=Y;return q})();V_(Rw,kw).catch(q=>console.error(q));
